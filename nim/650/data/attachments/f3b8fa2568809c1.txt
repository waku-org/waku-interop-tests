2025-02-13 04:02:25.955 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-13 04:02:25.956 DEBUG [tests.conftest] Running test: test_store_node_not_connected_directly_to_relaying_node with id: 2025-02-13_04-02-25__aef5053e-d45b-4897-bd2e-be7a746ca5c4
2025-02-13 04:02:25.956 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-13 04:02:25.956 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-13 04:02:25.956 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-13 04:02:25.964 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 04:02:25.964 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-13_04-02-25__aef5053e-d45b-4897-bd2e-be7a746ca5c4__wakuorg_nwaku:latest.log
2025-02-13 04:02:25.970 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 04:02:25.970 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-13_04-02-25__aef5053e-d45b-4897-bd2e-be7a746ca5c4__wakuorg_nwaku:latest.log
2025-02-13 04:02:25.975 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 04:02:25.975 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node3_2025-02-13_04-02-25__aef5053e-d45b-4897-bd2e-be7a746ca5c4__wakuorg_nwaku:latest.log
2025-02-13 04:02:25.975 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-13 04:02:25.975 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-13 04:02:25.976 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 04:02:25.976 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 04:02:26.044 DEBUG [src.node.docker_mananger] Network waku created
2025-02-13 04:02:26.044 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.9.39
2025-02-13 04:02:26.044 DEBUG [src.node.docker_mananger] Generated ports ['51400', '51401', '51402', '51403', '51404']
2025-02-13 04:02:26.044 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 04:02:26.044 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 04:02:26.044 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 04:02:26.045 DEBUG [src.node.docker_mananger] docker run -i -t -p 51400:51400 -p 51401:51401 -p 51402:51402 -p 51403:51403 -p 51404:51404 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=51402 --rest-port=51400 --tcp-port=51401 --discv5-udp-port=51403 --rest-address=0.0.0.0 --nat=extip:172.18.9.39 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0944874e14de4aa01adafd42031a1ff2fecab481f1021cbb2c08fedcb025c3c3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=51404 --metrics-logging=true --relay=true
2025-02-13 04:02:28.352 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.9.39 waku 6b7626525c7071b3b26fbd6bdff1b44a21e67bd2a8e30365368143bd35503449
2025-02-13 04:02:28.400 DEBUG [src.node.docker_mananger] Container started with ID 6b7626525c70. Setting up logs at ./log/docker/node1_2025-02-13_04-02-25__aef5053e-d45b-4897-bd2e-be7a746ca5c4__wakuorg_nwaku:latest.log
2025-02-13 04:02:28.401 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 51400
2025-02-13 04:02:28.401 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 04:02:29.402 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51400/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:02:29.404 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 04:02:29.404 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 04:02:29.405 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51400/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:02:29.407 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.9.39/tcp/51401/p2p/16Uiu2HAm5m8DFURHJsCtKh4R5xpmLNvRRqumNwHRMncCavK7MbMg","/ip4/172.18.9.39/tcp/51402/ws/p2p/16Uiu2HAm5m8DFURHJsCtKh4R5xpmLNvRRqumNwHRMncCavK7MbMg"],"enrUri":"enr:-L24QKu4cHxvV15OXWy_9Mp7Z5Dx1Vl7eX5j7vrQA1pcUSDkGUpoOVuF0aTftueTsYBvLUhrjRg5ymSn47p5JoIBNBYCgmlkgnY0gmlwhKwSCSeKbXVsdGlhZGRyc5YACASsEgknBsjJAAoErBIJJwbIyt0DgnJzhQADAQAAiXNlY3AyNTZrMaECmZCQtXljBH8b57qAqsDYMRUifKkZ84ISYZMJ69lhFPeDdGNwgsjJg3VkcILIy4V3YWt1MgE"}'
2025-02-13 04:02:29.407 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 04:02:29.407 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 04:02:29.407 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 04:02:29.409 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 04:02:29.409 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.185.123
2025-02-13 04:02:29.409 DEBUG [src.node.docker_mananger] Generated ports ['30807', '30808', '30809', '30810', '30811']
2025-02-13 04:02:29.409 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 04:02:29.409 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 04:02:29.409 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 04:02:29.410 DEBUG [src.node.docker_mananger] docker run -i -t -p 30807:30807 -p 30808:30808 -p 30809:30809 -p 30810:30810 -p 30811:30811 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=30809 --rest-port=30807 --tcp-port=30808 --discv5-udp-port=30810 --rest-address=0.0.0.0 --nat=extip:172.18.185.123 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f0fadb7e4e5b011af46eab2f1903db15d9a2bcd203719eadc978648b3ceb6ebc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=30811 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-L24QKu4cHxvV15OXWy_9Mp7Z5Dx1Vl7eX5j7vrQA1pcUSDkGUpoOVuF0aTftueTsYBvLUhrjRg5ymSn47p5JoIBNBYCgmlkgnY0gmlwhKwSCSeKbXVsdGlhZGRyc5YACASsEgknBsjJAAoErBIJJwbIyt0DgnJzhQADAQAAiXNlY3AyNTZrMaECmZCQtXljBH8b57qAqsDYMRUifKkZ84ISYZMJ69lhFPeDdGNwgsjJg3VkcILIy4V3YWt1MgE
2025-02-13 04:02:29.628 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.185.123 waku f26e0451329614e64dc5eb6209567f2cd5f0416290ecdaa83f25d68bb4d4caff
2025-02-13 04:02:29.677 DEBUG [src.node.docker_mananger] Container started with ID f26e04513296. Setting up logs at ./log/docker/node2_2025-02-13_04-02-25__aef5053e-d45b-4897-bd2e-be7a746ca5c4__wakuorg_nwaku:latest.log
2025-02-13 04:02:29.678 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 30807
2025-02-13 04:02:29.678 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 04:02:30.680 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30807/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:02:30.685 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 04:02:30.686 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 04:02:30.686 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30807/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:02:30.694 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.185.123/tcp/30808/p2p/16Uiu2HAmKcjn3E52Tag77bidyAP1cVXyi9fthz1FqU1x1eH4fDQm","/ip4/172.18.185.123/tcp/30809/ws/p2p/16Uiu2HAmKcjn3E52Tag77bidyAP1cVXyi9fthz1FqU1x1eH4fDQm"],"enrUri":"enr:-L24QD36nuhX7v6hSShFo1WAdauHj1UQ8V4Tml61AicWDhF6B-4tz27D4bSfk-mLSEceXsIQH4BqUJReACZ9aFrDiRgCgmlkgnY0gmlwhKwSuXuKbXVsdGlhZGRyc5YACASsErl7BnhYAAoErBK5ewZ4Wd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDZ24rNkxsFu8ktQQdglKsL6CFSGxVRSRSSyyl4IcLMHKDdGNwgnhYg3VkcIJ4WoV3YWt1MgM"}'
2025-02-13 04:02:30.694 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 04:02:30.694 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 04:02:30.694 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 04:02:30.697 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 04:02:30.699 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.95.76
2025-02-13 04:02:30.702 DEBUG [src.node.docker_mananger] Generated ports ['40878', '40879', '40880', '40881', '40882']
2025-02-13 04:02:30.705 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 04:02:30.705 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 04:02:30.705 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 04:02:30.705 DEBUG [src.node.docker_mananger] docker run -i -t -p 40878:40878 -p 40879:40879 -p 40880:40880 -p 40881:40881 -p 40882:40882 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40880 --rest-port=40878 --tcp-port=40879 --discv5-udp-port=40881 --rest-address=0.0.0.0 --nat=extip:172.18.95.76 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dec18cc7ffabf2ab424eafa3b3ad5c524e56d0342b39df8c1faf1211f43f8906 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40882 --metrics-logging=true --relay=false --storenode=/ip4/172.18.185.123/tcp/30808/p2p/16Uiu2HAmKcjn3E52Tag77bidyAP1cVXyi9fthz1FqU1x1eH4fDQm --discv5-bootstrap-node=enr:-L24QD36nuhX7v6hSShFo1WAdauHj1UQ8V4Tml61AicWDhF6B-4tz27D4bSfk-mLSEceXsIQH4BqUJReACZ9aFrDiRgCgmlkgnY0gmlwhKwSuXuKbXVsdGlhZGRyc5YACASsErl7BnhYAAoErBK5ewZ4Wd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDZ24rNkxsFu8ktQQdglKsL6CFSGxVRSRSSyyl4IcLMHKDdGNwgnhYg3VkcIJ4WoV3YWt1MgM
2025-02-13 04:02:30.945 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.95.76 waku 2540cdbe22146bcd7abf86ce0be5b7baf13e6b243fb3f8d8adf207fb2544527f
2025-02-13 04:02:30.994 DEBUG [src.node.docker_mananger] Container started with ID 2540cdbe2214. Setting up logs at ./log/docker/node3_2025-02-13_04-02-25__aef5053e-d45b-4897-bd2e-be7a746ca5c4__wakuorg_nwaku:latest.log
2025-02-13 04:02:30.994 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 40878
2025-02-13 04:02:30.994 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 04:02:31.995 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40878/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:02:31.997 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 04:02:31.997 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 04:02:31.998 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40878/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:02:32.000 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.95.76/tcp/40879/p2p/16Uiu2HAm7y9WMxwrE2qdiaajne4nyzev6TpmSMJHJomVrxTVu3K2","/ip4/172.18.95.76/tcp/40880/ws/p2p/16Uiu2HAm7y9WMxwrE2qdiaajne4nyzev6TpmSMJHJomVrxTVu3K2"],"enrUri":"enr:-L24QGT_-VUjRI_f-lTVpi1p5qxPaTJxQkCuhOfD98dAe5fUOBjA9xW54MbeRwiLKW8jJ1-kBrj8GF4BSaw2Ud1m5p0CgmlkgnY0gmlwhKwSX0yKbXVsdGlhZGRyc5YACASsEl9MBp-vAAoErBJfTAafsN0DgnJzhQADAQAAiXNlY3AyNTZrMaECulxfhWlBqi5srp6XSL70c_Uvs4ZihrxxKxFhuSZx_L2DdGNwgp-vg3VkcIKfsYV3YWt1MgA"}'
2025-02-13 04:02:32.000 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 04:02:32.000 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:51400/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-13 04:02:32.003 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:02:32.004 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30807/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-13 04:02:32.009 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:02:32.010 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51400/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:02:32.014 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.185.123/tcp/30808/p2p/16Uiu2HAmKcjn3E52Tag77bidyAP1cVXyi9fthz1FqU1x1eH4fDQm","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
2025-02-13 04:02:32.014 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30807/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:02:32.016 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.9.39/tcp/51401/p2p/16Uiu2HAm5m8DFURHJsCtKh4R5xpmLNvRRqumNwHRMncCavK7MbMg","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
2025-02-13 04:02:32.017 DEBUG [src.libs.common] Sleeping for 30 seconds
2025-02-13 04:03:02.017 DEBUG [src.steps.store] Relaying message
2025-02-13 04:03:02.018 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:51400/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2025-02-13 04:03:02.024 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:03:02.024 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-13 04:03:02.225 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-13 04:03:02.226 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40878/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:03:02.268 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"817f80f48c34b03ada1e","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xa6998750dcfb5a8b4a784bddc0eaf6fe60d565216730c1c17601b0285ef0e21c"}]}'
2025-02-13 04:03:02.275 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-13 04:03:02.276 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-13 04:03:02.276 DEBUG [src.node.waku_node] Stopping container with id 6b7626525c70
2025-02-13 04:03:03.120 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 04:03:03.121 DEBUG [src.node.waku_node] Stopping container with id f26e04513296
2025-02-13 04:03:03.962 ERROR [src.node.docker_mananger] Max retries reached for container 6b7626525c70. Exiting log stream.
2025-02-13 04:03:04.049 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 04:03:04.049 DEBUG [src.node.waku_node] Stopping container with id 2540cdbe2214
2025-02-13 04:03:04.897 ERROR [src.node.docker_mananger] Max retries reached for container f26e04513296. Exiting log stream.
2025-02-13 04:03:05.516 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 04:03:05.517 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-13 04:03:05.536 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-13 04:03:05.560 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-13 04:03:05.564 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
