2025-02-13 04:05:42.933 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-13 04:05:42.934 DEBUG [tests.conftest] Running test: test_store_with_invalid_hash with id: 2025-02-13_04-05-42__b5dbe31c-2d8e-4b46-bbb4-fd051fdf76a8
2025-02-13 04:05:42.934 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-13 04:05:42.934 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-13 04:05:42.934 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-13 04:05:42.941 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 04:05:42.941 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-13_04-05-42__b5dbe31c-2d8e-4b46-bbb4-fd051fdf76a8__wakuorg_nwaku:latest.log
2025-02-13 04:05:42.941 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 04:05:42.941 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 04:05:42.942 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 04:05:42.943 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.255.195
2025-02-13 04:05:42.943 DEBUG [src.node.docker_mananger] Generated ports ['55573', '55574', '55575', '55576', '55577']
2025-02-13 04:05:42.943 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 04:05:42.943 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 04:05:42.943 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 04:05:42.943 DEBUG [src.node.docker_mananger] docker run -i -t -p 55573:55573 -p 55574:55574 -p 55575:55575 -p 55576:55576 -p 55577:55577 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55575 --rest-port=55573 --tcp-port=55574 --discv5-udp-port=55576 --rest-address=0.0.0.0 --nat=extip:172.18.255.195 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dd0df8a3b4edd0d1ca0267fe40642f0bafe05dcd96cb6fe81b07bc5e1031eedc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55577 --metrics-logging=true --store=true --relay=true
2025-02-13 04:05:43.166 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.255.195 waku 3383d5a735011789769873bf6b202af2462ae7671cd1306a6c9cc9c58cf0002b
2025-02-13 04:05:43.208 DEBUG [src.node.docker_mananger] Container started with ID 3383d5a73501. Setting up logs at ./log/docker/publishing_node1_2025-02-13_04-05-42__b5dbe31c-2d8e-4b46-bbb4-fd051fdf76a8__wakuorg_nwaku:latest.log
2025-02-13 04:05:43.210 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 55573
2025-02-13 04:05:43.211 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 04:05:43.741 ERROR [src.node.docker_mananger] Max retries reached for container 22fd29c664b4. Exiting log stream.
2025-02-13 04:05:44.212 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:55573/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:05:44.215 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 04:05:44.215 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 04:05:44.215 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:55573/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:05:44.217 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.255.195/tcp/55574/p2p/16Uiu2HAmEjNhbJMa4FSZhL3SXSaEq2HjTfQtvUM8Ht74oyxNc9GW","/ip4/172.18.255.195/tcp/55575/ws/p2p/16Uiu2HAmEjNhbJMa4FSZhL3SXSaEq2HjTfQtvUM8Ht74oyxNc9GW"],"enrUri":"enr:-L24QJi7p1ppkrqxyeHNrnnJOiYhe8Jw-pCaSBAfe224GDCedFHdjmGhiH0H_8dlvT9xtytk6kAFtyVWWCUrWYn3TdYCgmlkgnY0gmlwhKwS_8OKbXVsdGlhZGRyc5YACASsEv_DBtkWAAoErBL_wwbZF90DgnJzhQADAQAAiXNlY3AyNTZrMaEDHtb35mj_RsoS6nVe2Z2nNxPrWk1V8TTZu_V6EQTpc8uDdGNwgtkWg3VkcILZGIV3YWt1MgM"}'
2025-02-13 04:05:44.217 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 04:05:44.224 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 04:05:44.224 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-13_04-05-42__b5dbe31c-2d8e-4b46-bbb4-fd051fdf76a8__wakuorg_nwaku:latest.log
2025-02-13 04:05:44.224 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 04:05:44.224 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 04:05:44.226 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 04:05:44.226 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.16.230
2025-02-13 04:05:44.226 DEBUG [src.node.docker_mananger] Generated ports ['5238', '5239', '5240', '5241', '5242']
2025-02-13 04:05:44.226 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 04:05:44.226 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 04:05:44.226 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 04:05:44.226 DEBUG [src.node.docker_mananger] docker run -i -t -p 5238:5238 -p 5239:5239 -p 5240:5240 -p 5241:5241 -p 5242:5242 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=5240 --rest-port=5238 --tcp-port=5239 --discv5-udp-port=5241 --rest-address=0.0.0.0 --nat=extip:172.18.16.230 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0b2a9bcee3bc793ce7ac3ea3c1258b1b8dfba7f11359e516eefaf6579bb7ebea --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=5242 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QJi7p1ppkrqxyeHNrnnJOiYhe8Jw-pCaSBAfe224GDCedFHdjmGhiH0H_8dlvT9xtytk6kAFtyVWWCUrWYn3TdYCgmlkgnY0gmlwhKwS_8OKbXVsdGlhZGRyc5YACASsEv_DBtkWAAoErBL_wwbZF90DgnJzhQADAQAAiXNlY3AyNTZrMaEDHtb35mj_RsoS6nVe2Z2nNxPrWk1V8TTZu_V6EQTpc8uDdGNwgtkWg3VkcILZGIV3YWt1MgM --storenode=/ip4/172.18.255.195/tcp/55574/p2p/16Uiu2HAmEjNhbJMa4FSZhL3SXSaEq2HjTfQtvUM8Ht74oyxNc9GW --store=true --relay=true
2025-02-13 04:05:44.458 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.16.230 waku 0266b6aed4a37f4d26eab0ec2ec9a6a6c87904fa24b14b7b476d8ab4c6f167d3
2025-02-13 04:05:44.501 DEBUG [src.node.docker_mananger] Container started with ID 0266b6aed4a3. Setting up logs at ./log/docker/store_node1_2025-02-13_04-05-42__b5dbe31c-2d8e-4b46-bbb4-fd051fdf76a8__wakuorg_nwaku:latest.log
2025-02-13 04:05:44.502 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 5238
2025-02-13 04:05:44.503 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 04:05:45.503 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:5238/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:05:45.506 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 04:05:45.506 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 04:05:45.506 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:5238/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:05:45.509 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.16.230/tcp/5239/p2p/16Uiu2HAm7hjMs5rAqFDdhzYL1sFuUWgZ95yvbQ7dCDUXXv8Ygeay","/ip4/172.18.16.230/tcp/5240/ws/p2p/16Uiu2HAm7hjMs5rAqFDdhzYL1sFuUWgZ95yvbQ7dCDUXXv8Ygeay"],"enrUri":"enr:-L24QJeZmg37Mdp8JUdp4bK3evpJsasnfyOc_XfinnE9eQmBJh6FJjRFUegdcz1IjP6i-lwqbyUwdmZqoQOjogTNHuYCgmlkgnY0gmlwhKwSEOaKbXVsdGlhZGRyc5YACASsEhDmBhR3AAoErBIQ5gYUeN0DgnJzhQADAQAAiXNlY3AyNTZrMaECtmlbwr1QuETda9SBumUh96JoNxqjppHWQgvPLe7zQI6DdGNwghR3g3VkcIIUeYV3YWt1MgM"}'
2025-02-13 04:05:45.509 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 04:05:45.509 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:5238/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.255.195/tcp/55574/p2p/16Uiu2HAmEjNhbJMa4FSZhL3SXSaEq2HjTfQtvUM8Ht74oyxNc9GW"]'
2025-02-13 04:05:45.512 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:05:45.512 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55573/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-13 04:05:45.514 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:05:45.514 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:5238/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-13 04:05:45.516 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:05:45.518 DEBUG [src.steps.store] Relaying message
2025-02-13 04:05:45.518 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55573/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-13 04:05:45.523 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:05:45.524 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-13 04:05:45.725 DEBUG [src.steps.store] Relaying message
2025-02-13 04:05:45.725 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55573/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8x", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-13 04:05:45.730 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:05:45.731 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-13 04:05:45.931 DEBUG [src.steps.store] Relaying message
2025-02-13 04:05:45.932 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55573/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8y", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-13 04:05:45.936 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:05:45.937 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-13 04:05:46.138 DEBUG [src.steps.store] Relaying message
2025-02-13 04:05:46.138 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55573/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8z", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-13 04:05:46.144 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:05:46.144 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-13 04:05:46.344 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:55573/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&hashes=0x74657374&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:05:46.347 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:55573/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&hashes=0x74657374&pageSize=50&ascending=true. Response content: b'waku message hash parsing error: invalid hash length: 4'
2025-02-13 04:05:46.348 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:5238/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&hashes=0x74657374&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:05:46.350 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:5238/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&hashes=0x74657374&pageSize=50&ascending=true. Response content: b'waku message hash parsing error: invalid hash length: 4'
2025-02-13 04:05:46.352 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-13 04:05:46.353 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-13 04:05:46.353 DEBUG [src.node.waku_node] Stopping container with id 3383d5a73501
2025-02-13 04:05:47.039 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 04:05:47.040 DEBUG [src.node.waku_node] Stopping container with id 0266b6aed4a3
2025-02-13 04:05:47.851 ERROR [src.node.docker_mananger] Max retries reached for container 3383d5a73501. Exiting log stream.
2025-02-13 04:05:48.510 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 04:05:48.511 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-13 04:05:48.518 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-13 04:05:48.524 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
