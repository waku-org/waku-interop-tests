2025-02-13 04:03:28.728 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-13 04:03:28.728 DEBUG [tests.conftest] Running test: test_publish_without_subscribing_via_api_works with id: 2025-02-13_04-03-28__83fdd5be-c9a0-494b-899b-9cc3db2f84e6
2025-02-13 04:03:28.728 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-13 04:03:28.729 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-13 04:03:28.729 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2025-02-13 04:03:28.735 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 04:03:28.735 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-13_04-03-28__83fdd5be-c9a0-494b-899b-9cc3db2f84e6__wakuorg_nwaku:latest.log
2025-02-13 04:03:28.736 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 04:03:28.736 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 04:03:28.737 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 04:03:28.737 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.40.180
2025-02-13 04:03:28.737 DEBUG [src.node.docker_mananger] Generated ports ['26756', '26757', '26758', '26759', '26760']
2025-02-13 04:03:28.737 DEBUG [src.node.waku_node] Cluster id was resolved to: 2
2025-02-13 04:03:28.738 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 04:03:28.738 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 04:03:28.738 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 04:03:28.738 DEBUG [src.node.docker_mananger] docker run -i -t -p 26756:26756 -p 26757:26757 -p 26758:26758 -p 26759:26759 -p 26760:26760 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26758 --rest-port=26756 --tcp-port=26757 --discv5-udp-port=26759 --rest-address=0.0.0.0 --nat=extip:172.18.40.180 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=c95b2d175d45ece56a4fa20ff3aa84e517f1f5db5b56d916242aae69ad2adfce --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26760 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/2/0
2025-02-13 04:03:28.970 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.40.180 waku 14bc47fe237e933da5ca9865ecb545618adba9df19e20268d04767a2b1b06f82
2025-02-13 04:03:29.015 DEBUG [src.node.docker_mananger] Container started with ID 14bc47fe237e. Setting up logs at ./log/docker/node1_2025-02-13_04-03-28__83fdd5be-c9a0-494b-899b-9cc3db2f84e6__wakuorg_nwaku:latest.log
2025-02-13 04:03:29.016 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 26756
2025-02-13 04:03:29.017 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 04:03:29.530 ERROR [src.node.docker_mananger] Max retries reached for container edd7266e63fb. Exiting log stream.
2025-02-13 04:03:30.017 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26756/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:03:30.019 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 04:03:30.020 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 04:03:30.020 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26756/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:03:30.022 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.40.180/tcp/26757/p2p/16Uiu2HAkvmxksM5akswRWwegW3ud4erZUL37DuATYcxuet7urdb2","/ip4/172.18.40.180/tcp/26758/ws/p2p/16Uiu2HAkvmxksM5akswRWwegW3ud4erZUL37DuATYcxuet7urdb2"],"enrUri":"enr:-L24QBhdmNPlM_q_hmF9aTQ856krIPT-qX-kpqPyTUR1Qz1mHT4BwrLAQCAKTlsyAm2O0nyuSl6slFS3fOpM__x2pAsCgmlkgnY0gmlwhKwSKLSKbXVsdGlhZGRyc5YACASsEii0BmiFAAoErBIotAZoht0DgnJzhQACAQAAiXNlY3AyNTZrMaECFA5F6ikYrQFuVMxdGeChcC3JDBpna7nrTgjmUUlP3K2DdGNwgmiFg3VkcIJoh4V3YWt1MgU"}'
2025-02-13 04:03:30.022 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 04:03:30.028 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 04:03:30.028 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-13_04-03-28__83fdd5be-c9a0-494b-899b-9cc3db2f84e6__wakuorg_nwaku:latest.log
2025-02-13 04:03:30.028 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 04:03:30.028 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 04:03:30.029 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 04:03:30.030 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.72.78
2025-02-13 04:03:30.030 DEBUG [src.node.docker_mananger] Generated ports ['16901', '16902', '16903', '16904', '16905']
2025-02-13 04:03:30.030 DEBUG [src.node.waku_node] Cluster id was resolved to: 2
2025-02-13 04:03:30.030 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 04:03:30.030 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 04:03:30.030 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 04:03:30.030 DEBUG [src.node.docker_mananger] docker run -i -t -p 16901:16901 -p 16902:16902 -p 16903:16903 -p 16904:16904 -p 16905:16905 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=16903 --rest-port=16901 --tcp-port=16902 --discv5-udp-port=16904 --rest-address=0.0.0.0 --nat=extip:172.18.72.78 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=b6f0d28921e3f6d4cf677c5b114bf1870ba0214d6e70dfafc3d3ed6e5ae730af --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=16905 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QBhdmNPlM_q_hmF9aTQ856krIPT-qX-kpqPyTUR1Qz1mHT4BwrLAQCAKTlsyAm2O0nyuSl6slFS3fOpM__x2pAsCgmlkgnY0gmlwhKwSKLSKbXVsdGlhZGRyc5YACASsEii0BmiFAAoErBIotAZoht0DgnJzhQACAQAAiXNlY3AyNTZrMaECFA5F6ikYrQFuVMxdGeChcC3JDBpna7nrTgjmUUlP3K2DdGNwgmiFg3VkcIJoh4V3YWt1MgU --pubsub-topic=/waku/2/rs/2/0
2025-02-13 04:03:30.244 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.72.78 waku e73a359bb059820bca50c315e0c40f8443b1b1acf943e63b585a5f8f46bf0537
2025-02-13 04:03:30.295 DEBUG [src.node.docker_mananger] Container started with ID e73a359bb059. Setting up logs at ./log/docker/node2_2025-02-13_04-03-28__83fdd5be-c9a0-494b-899b-9cc3db2f84e6__wakuorg_nwaku:latest.log
2025-02-13 04:03:30.295 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 16901
2025-02-13 04:03:30.295 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 04:03:31.297 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16901/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:03:31.302 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 04:03:31.303 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 04:03:31.303 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16901/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:03:31.306 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.72.78/tcp/16902/p2p/16Uiu2HAmM1KreDtwp48mvU8ECK8wVc9bgypxpyZnrutLen4zpkZq","/ip4/172.18.72.78/tcp/16903/ws/p2p/16Uiu2HAmM1KreDtwp48mvU8ECK8wVc9bgypxpyZnrutLen4zpkZq"],"enrUri":"enr:-L24QDRkSwwC8PAelWfxhOjv5rAI53HGXHLguZknNEjhwHrYTFIx5XB2har8lbGTl4LHrSGgr-QTeSB4bBlVgrwwq28CgmlkgnY0gmlwhKwSSE6KbXVsdGlhZGRyc5YACASsEkhOBkIGAAoErBJITgZCB90DgnJzhQACAQAAiXNlY3AyNTZrMaEDfBMqzN56Cu3VElFZN-68r9U64rniKRSZAKE4V2gsOgSDdGNwgkIGg3VkcIJCCIV3YWt1MgE"}'
2025-02-13 04:03:31.306 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 04:03:31.307 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16901/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.40.180/tcp/26757/p2p/16Uiu2HAkvmxksM5akswRWwegW3ud4erZUL37DuATYcxuet7urdb2"]'
2025-02-13 04:03:31.309 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:03:31.310 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:26756/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-13 04:03:31.315 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:03:31.315 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16901/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-13 04:03:31.320 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:03:31.322 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-13 04:03:31.323 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-13 04:03:31.323 DEBUG [src.node.waku_node] Stopping container with id 14bc47fe237e
2025-02-13 04:03:32.407 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 04:03:32.407 DEBUG [src.node.waku_node] Stopping container with id e73a359bb059
2025-02-13 04:03:33.220 ERROR [src.node.docker_mananger] Max retries reached for container 14bc47fe237e. Exiting log stream.
2025-02-13 04:03:33.895 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 04:03:33.897 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-13 04:03:33.902 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-13 04:03:33.907 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
