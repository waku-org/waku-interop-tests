2025-02-13 04:04:25.946 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-13 04:04:25.946 DEBUG [tests.conftest] Running test: test_relay_unsubscribe_with_invalid_pubsub_topic_format with id: 2025-02-13_04-04-25__44b53f6f-5a48-4f89-938d-cf0e957b37b0
2025-02-13 04:04:25.946 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-13 04:04:25.947 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-13 04:04:25.947 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2025-02-13 04:04:25.955 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 04:04:25.955 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-13_04-04-25__44b53f6f-5a48-4f89-938d-cf0e957b37b0__wakuorg_nwaku:latest.log
2025-02-13 04:04:25.956 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 04:04:25.956 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 04:04:25.959 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 04:04:25.959 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.255.214
2025-02-13 04:04:25.960 DEBUG [src.node.docker_mananger] Generated ports ['28764', '28765', '28766', '28767', '28768']
2025-02-13 04:04:25.960 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 04:04:25.960 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 04:04:25.960 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 04:04:25.960 DEBUG [src.node.docker_mananger] docker run -i -t -p 28764:28764 -p 28765:28765 -p 28766:28766 -p 28767:28767 -p 28768:28768 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28766 --rest-port=28764 --tcp-port=28765 --discv5-udp-port=28767 --rest-address=0.0.0.0 --nat=extip:172.18.255.214 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b6194290a9a11bccfae6d4bee5c1ed0bcf3f87af53985c7eb06cbb7cc5be6929 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28768 --metrics-logging=true --relay=true
2025-02-13 04:04:26.186 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.255.214 waku e98aa1e7d6d32780edde885edbe6f7d6482114f3b936a1573873b385e52d3de2
2025-02-13 04:04:26.240 DEBUG [src.node.docker_mananger] Container started with ID e98aa1e7d6d3. Setting up logs at ./log/docker/node1_2025-02-13_04-04-25__44b53f6f-5a48-4f89-938d-cf0e957b37b0__wakuorg_nwaku:latest.log
2025-02-13 04:04:26.242 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 28764
2025-02-13 04:04:26.242 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 04:04:26.773 ERROR [src.node.docker_mananger] Max retries reached for container 06724e995684. Exiting log stream.
2025-02-13 04:04:27.242 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28764/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:04:27.245 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 04:04:27.245 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 04:04:27.246 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28764/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:04:27.248 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.255.214/tcp/28765/p2p/16Uiu2HAkxWLNHrT4HqUAf7Y2GwrAKe7KnFVp9nVozXETSUj6cpvw","/ip4/172.18.255.214/tcp/28766/ws/p2p/16Uiu2HAkxWLNHrT4HqUAf7Y2GwrAKe7KnFVp9nVozXETSUj6cpvw"],"enrUri":"enr:-L24QCmWgSBPkIiRLk3G0hiBHN-m-EQsSwibGfXzx-MoWM1EAiL6YCtETplpkJ6mZZdgLgj10FZqWBpD7oiz1jCYVhMCgmlkgnY0gmlwhKwS_9aKbXVsdGlhZGRyc5YACASsEv_WBnBdAAoErBL_1gZwXt0DgnJzhQADAQAAiXNlY3AyNTZrMaECLcTKEo6UiLNoa0I1zqvhl3DTnAKWHS2KYh6kLrgR0hyDdGNwgnBdg3VkcIJwX4V3YWt1MgE"}'
2025-02-13 04:04:27.248 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 04:04:27.254 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 04:04:27.254 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-13_04-04-25__44b53f6f-5a48-4f89-938d-cf0e957b37b0__wakuorg_nwaku:latest.log
2025-02-13 04:04:27.255 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 04:04:27.255 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 04:04:27.256 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 04:04:27.256 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.34.99
2025-02-13 04:04:27.256 DEBUG [src.node.docker_mananger] Generated ports ['35096', '35097', '35098', '35099', '35100']
2025-02-13 04:04:27.256 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 04:04:27.256 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 04:04:27.257 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 04:04:27.257 DEBUG [src.node.docker_mananger] docker run -i -t -p 35096:35096 -p 35097:35097 -p 35098:35098 -p 35099:35099 -p 35100:35100 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=35098 --rest-port=35096 --tcp-port=35097 --discv5-udp-port=35099 --rest-address=0.0.0.0 --nat=extip:172.18.34.99 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=860cedeabaf5dec5ba08c47afe2bebd10f5e93ecde07f1a07c7adeb3045adb9b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=35100 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QCmWgSBPkIiRLk3G0hiBHN-m-EQsSwibGfXzx-MoWM1EAiL6YCtETplpkJ6mZZdgLgj10FZqWBpD7oiz1jCYVhMCgmlkgnY0gmlwhKwS_9aKbXVsdGlhZGRyc5YACASsEv_WBnBdAAoErBL_1gZwXt0DgnJzhQADAQAAiXNlY3AyNTZrMaECLcTKEo6UiLNoa0I1zqvhl3DTnAKWHS2KYh6kLrgR0hyDdGNwgnBdg3VkcIJwX4V3YWt1MgE
2025-02-13 04:04:27.484 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.34.99 waku 6b5ade2627918cc6910327ca50b8b0ffc3b630c077ca2120c80fe55d2b6757a6
2025-02-13 04:04:27.534 DEBUG [src.node.docker_mananger] Container started with ID 6b5ade262791. Setting up logs at ./log/docker/node2_2025-02-13_04-04-25__44b53f6f-5a48-4f89-938d-cf0e957b37b0__wakuorg_nwaku:latest.log
2025-02-13 04:04:27.535 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 35096
2025-02-13 04:04:27.535 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 04:04:28.536 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35096/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:04:28.541 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 04:04:28.542 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 04:04:28.545 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35096/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:04:28.548 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.34.99/tcp/35097/p2p/16Uiu2HAmD7MbThUdLm9CrDGBi5emqWx8u7mMzWvR5mrc53BA7U5g","/ip4/172.18.34.99/tcp/35098/ws/p2p/16Uiu2HAmD7MbThUdLm9CrDGBi5emqWx8u7mMzWvR5mrc53BA7U5g"],"enrUri":"enr:-L24QBPM7gsymkNBZKBsyfJnBR9YpqXEF33HFDA0TWwVE7xqRdk2rEmzIIBttxFbhELnPqwJrsIcNLKOrbU6Pr9du20CgmlkgnY0gmlwhKwSImOKbXVsdGlhZGRyc5YACASsEiJjBokZAAoErBIiYwaJGt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDBsEfQIqjoXpdKHT66KZapiD1PtX01kCaCMZzPgXn8huDdGNwgokZg3VkcIKJG4V3YWt1MgE"}'
2025-02-13 04:04:28.548 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 04:04:28.548 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35096/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.255.214/tcp/28765/p2p/16Uiu2HAkxWLNHrT4HqUAf7Y2GwrAKe7KnFVp9nVozXETSUj6cpvw"]'
2025-02-13 04:04:28.551 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:04:28.551 DEBUG [tests.relay.test_subscribe] Running test with payload /test/2/rs/0/1
2025-02-13 04:04:28.552 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:28764/relay/v1/subscriptions" -H "Content-Type: application/json" -d '"/test/2/rs/0/1"'
2025-02-13 04:04:28.554 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:28764/relay/v1/subscriptions. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
2025-02-13 04:04:28.555 DEBUG [tests.relay.test_subscribe] Running test with payload /waku/3/rs/0/1
2025-02-13 04:04:28.555 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:28764/relay/v1/subscriptions" -H "Content-Type: application/json" -d '"/waku/3/rs/0/1"'
2025-02-13 04:04:28.557 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:28764/relay/v1/subscriptions. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
2025-02-13 04:04:28.558 DEBUG [tests.relay.test_subscribe] Running test with payload /waku/2/test/0/1
2025-02-13 04:04:28.558 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:28764/relay/v1/subscriptions" -H "Content-Type: application/json" -d '"/waku/2/test/0/1"'
2025-02-13 04:04:28.561 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:28764/relay/v1/subscriptions. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
2025-02-13 04:04:28.561 DEBUG [tests.relay.test_subscribe] Running test with payload /waku/2/rs/3/b
2025-02-13 04:04:28.562 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:28764/relay/v1/subscriptions" -H "Content-Type: application/json" -d '"/waku/2/rs/3/b"'
2025-02-13 04:04:28.564 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:28764/relay/v1/subscriptions. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
2025-02-13 04:04:28.565 DEBUG [tests.relay.test_subscribe] Running test with payload /waku/2/rs/0
2025-02-13 04:04:28.565 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:28764/relay/v1/subscriptions" -H "Content-Type: application/json" -d '"/waku/2/rs/0"'
2025-02-13 04:04:28.567 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:28764/relay/v1/subscriptions. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
2025-02-13 04:04:28.569 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-13 04:04:28.570 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-13 04:04:28.570 DEBUG [src.node.waku_node] Stopping container with id e98aa1e7d6d3
2025-02-13 04:04:29.734 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 04:04:29.734 DEBUG [src.node.waku_node] Stopping container with id 6b5ade262791
2025-02-13 04:04:30.545 ERROR [src.node.docker_mananger] Max retries reached for container e98aa1e7d6d3. Exiting log stream.
2025-02-13 04:04:31.205 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 04:04:31.206 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-13 04:04:31.211 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-13 04:04:31.216 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
