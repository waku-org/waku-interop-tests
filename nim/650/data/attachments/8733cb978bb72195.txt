2025-02-13 04:03:03.584 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-13 04:03:03.584 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_all_with_invalid_request_id with id: 2025-02-13_04-03-03__2351cd2a-3eb8-4a4c-8ebf-f66e7d849762
2025-02-13 04:03:03.584 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-13 04:03:03.584 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-13 04:03:03.585 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-13 04:03:03.591 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 04:03:03.591 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-13_04-03-03__2351cd2a-3eb8-4a4c-8ebf-f66e7d849762__wakuorg_nwaku:latest.log
2025-02-13 04:03:03.591 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 04:03:03.591 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 04:03:03.592 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 04:03:03.593 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.191.138
2025-02-13 04:03:03.593 DEBUG [src.node.docker_mananger] Generated ports ['20738', '20739', '20740', '20741', '20742']
2025-02-13 04:03:03.593 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 04:03:03.593 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 04:03:03.593 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 04:03:03.593 DEBUG [src.node.docker_mananger] docker run -i -t -p 20738:20738 -p 20739:20739 -p 20740:20740 -p 20741:20741 -p 20742:20742 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20740 --rest-port=20738 --tcp-port=20739 --discv5-udp-port=20741 --rest-address=0.0.0.0 --nat=extip:172.18.191.138 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=096fa0be01d2deed09d5ad764ac5c66daeeea11fcdca6cfa90bfdd25258dfb38 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20742 --metrics-logging=true --relay=true --filter=true
2025-02-13 04:03:03.824 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.191.138 waku e190fee68d10c551aaaad58ffebf009f68f20b515875fcbf87c55bc9fa81914f
2025-02-13 04:03:03.871 DEBUG [src.node.docker_mananger] Container started with ID e190fee68d10. Setting up logs at ./log/docker/node1_2025-02-13_04-03-03__2351cd2a-3eb8-4a4c-8ebf-f66e7d849762__wakuorg_nwaku:latest.log
2025-02-13 04:03:03.872 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 20738
2025-02-13 04:03:03.872 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 04:03:04.387 ERROR [src.node.docker_mananger] Max retries reached for container 16d88c338d0e. Exiting log stream.
2025-02-13 04:03:04.873 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20738/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:03:04.876 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 04:03:04.877 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 04:03:04.877 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20738/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:03:04.879 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.191.138/tcp/20739/p2p/16Uiu2HAkxWsMCC1uUygb7QvUKXVyFY2M7ag6hm9HuPSuiN7ECdYN","/ip4/172.18.191.138/tcp/20740/ws/p2p/16Uiu2HAkxWsMCC1uUygb7QvUKXVyFY2M7ag6hm9HuPSuiN7ECdYN"],"enrUri":"enr:-L24QMen8y8uFbO-AlEUEVTfsEwmue88igSQdr5p_mWXQJMVAmHG-s2XW9htj6ZFoKX7z7B7u2qxWMzCtKN2Gr9TrDsCgmlkgnY0gmlwhKwSv4qKbXVsdGlhZGRyc5YACASsEr-KBlEDAAoErBK_igZRBN0DgnJzhQADAQAAiXNlY3AyNTZrMaECLefR270Efu5XDtsDFwEmya4-wlWygAfYERFDNeaT8zODdGNwglEDg3VkcIJRBYV3YWt1MgU"}'
2025-02-13 04:03:04.879 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 04:03:04.880 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-13 04:03:04.886 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 04:03:04.886 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-13_04-03-03__2351cd2a-3eb8-4a4c-8ebf-f66e7d849762__wakuorg_nwaku:latest.log
2025-02-13 04:03:04.886 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 04:03:04.886 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 04:03:04.887 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 04:03:04.888 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.79.187
2025-02-13 04:03:04.888 DEBUG [src.node.docker_mananger] Generated ports ['38630', '38631', '38632', '38633', '38634']
2025-02-13 04:03:04.888 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 04:03:04.888 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 04:03:04.888 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 04:03:04.888 DEBUG [src.node.docker_mananger] docker run -i -t -p 38630:38630 -p 38631:38631 -p 38632:38632 -p 38633:38633 -p 38634:38634 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=38632 --rest-port=38630 --tcp-port=38631 --discv5-udp-port=38633 --rest-address=0.0.0.0 --nat=extip:172.18.79.187 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d9f8fed841ba620d08d9e6be4a4dcbd19f12c8eb83ac21ddf16d0bdba31812b6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=38634 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QMen8y8uFbO-AlEUEVTfsEwmue88igSQdr5p_mWXQJMVAmHG-s2XW9htj6ZFoKX7z7B7u2qxWMzCtKN2Gr9TrDsCgmlkgnY0gmlwhKwSv4qKbXVsdGlhZGRyc5YACASsEr-KBlEDAAoErBK_igZRBN0DgnJzhQADAQAAiXNlY3AyNTZrMaECLefR270Efu5XDtsDFwEmya4-wlWygAfYERFDNeaT8zODdGNwglEDg3VkcIJRBYV3YWt1MgU --filternode=/ip4/172.18.191.138/tcp/20739/p2p/16Uiu2HAkxWsMCC1uUygb7QvUKXVyFY2M7ag6hm9HuPSuiN7ECdYN
2025-02-13 04:03:05.107 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.79.187 waku 72e871b406e2d7bf7d0ef1bac949d1e1e184a53308514c0e35f48862723081e5
2025-02-13 04:03:05.156 DEBUG [src.node.docker_mananger] Container started with ID 72e871b406e2. Setting up logs at ./log/docker/node2_2025-02-13_04-03-03__2351cd2a-3eb8-4a4c-8ebf-f66e7d849762__wakuorg_nwaku:latest.log
2025-02-13 04:03:05.156 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 38630
2025-02-13 04:03:05.156 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 04:03:06.157 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38630/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:03:06.160 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 04:03:06.160 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 04:03:06.161 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38630/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:03:06.163 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.79.187/tcp/38631/p2p/16Uiu2HAmG2PSqbrt8qQxqW1GpNDwxYXtq6mmFXxS2oFddDuNTgL2","/ip4/172.18.79.187/tcp/38632/ws/p2p/16Uiu2HAmG2PSqbrt8qQxqW1GpNDwxYXtq6mmFXxS2oFddDuNTgL2"],"enrUri":"enr:-L24QCy36Pl0jFsAQwf4gCgWgY0SOd9AAZCpR2XzGN0WhkRFCQ0lNe4Gci-KE0ZStBMsZozrIGgNWXEnEN9THtTbWZACgmlkgnY0gmlwhKwST7uKbXVsdGlhZGRyc5YACASsEk-7BpbnAAoErBJPuwaW6N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDMg5fQ7_hrxXQavb2weIXGh-PEPIy82BwULYT-DPKqKuDdGNwgpbng3VkcIKW6YV3YWt1MgA"}'
2025-02-13 04:03:06.163 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 04:03:06.164 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:38630/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.191.138/tcp/20739/p2p/16Uiu2HAkxWsMCC1uUygb7QvUKXVyFY2M7ag6hm9HuPSuiN7ECdYN"]'
2025-02-13 04:03:06.200 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:03:06.201 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-13 04:03:06.202 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20738/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-13 04:03:06.223 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:03:06.224 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:38630/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "05f4cf85-afdb-4a6e-84ab-b71eb6650843", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-13 04:03:06.237 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"05f4cf85-afdb-4a6e-84ab-b71eb6650843","statusDesc":"OK"}'
2025-02-13 04:03:06.238 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:38630/filter/v2/subscriptions/all" -H "Content-Type: application/json" -d '{"requestId": 1}'
2025-02-13 04:03:06.240 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:38630/filter/v2/subscriptions/all. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
2025-02-13 04:03:06.243 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-13 04:03:06.244 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-13 04:03:06.244 DEBUG [src.node.waku_node] Stopping container with id e190fee68d10
2025-02-13 04:03:07.341 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 04:03:07.341 DEBUG [src.node.waku_node] Stopping container with id 72e871b406e2
2025-02-13 04:03:08.154 ERROR [src.node.docker_mananger] Max retries reached for container e190fee68d10. Exiting log stream.
2025-02-13 04:03:08.626 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 04:03:08.627 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-13 04:03:08.632 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-13 04:03:08.636 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
