2025-02-13 04:02:57.132 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-13 04:02:57.133 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_from_non_existing_content_topic with id: 2025-02-13_04-02-57__cbda236a-7ec2-421d-bcbb-67da0ab0071f
2025-02-13 04:02:57.133 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-13 04:02:57.133 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-13 04:02:57.133 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-13 04:02:57.139 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 04:02:57.140 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-13_04-02-57__cbda236a-7ec2-421d-bcbb-67da0ab0071f__wakuorg_nwaku:latest.log
2025-02-13 04:02:57.140 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 04:02:57.140 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 04:02:57.141 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 04:02:57.141 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.236.219
2025-02-13 04:02:57.142 DEBUG [src.node.docker_mananger] Generated ports ['19225', '19226', '19227', '19228', '19229']
2025-02-13 04:02:57.142 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 04:02:57.142 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 04:02:57.142 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 04:02:57.142 DEBUG [src.node.docker_mananger] docker run -i -t -p 19225:19225 -p 19226:19226 -p 19227:19227 -p 19228:19228 -p 19229:19229 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19227 --rest-port=19225 --tcp-port=19226 --discv5-udp-port=19228 --rest-address=0.0.0.0 --nat=extip:172.18.236.219 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=79eeaa6bc3b273b3c28d801daeab8c0bac76ae949aa5314cd68a8b0170b75cec --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19229 --metrics-logging=true --relay=true --filter=true
2025-02-13 04:02:57.362 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.236.219 waku b652b4aa024b7d7dc0d446b913b001f65078ceecf3104699b192d0da092fb968
2025-02-13 04:02:57.409 DEBUG [src.node.docker_mananger] Container started with ID b652b4aa024b. Setting up logs at ./log/docker/node1_2025-02-13_04-02-57__cbda236a-7ec2-421d-bcbb-67da0ab0071f__wakuorg_nwaku:latest.log
2025-02-13 04:02:57.411 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 19225
2025-02-13 04:02:57.411 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 04:02:57.932 ERROR [src.node.docker_mananger] Max retries reached for container ac3bbc146f1d. Exiting log stream.
2025-02-13 04:02:58.411 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19225/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:02:58.414 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 04:02:58.414 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 04:02:58.415 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19225/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:02:58.417 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.236.219/tcp/19226/p2p/16Uiu2HAmMyq9nW6UbeXFJu5hhgLiNnbMhiCUtYcKL85wjwtw4AA8","/ip4/172.18.236.219/tcp/19227/ws/p2p/16Uiu2HAmMyq9nW6UbeXFJu5hhgLiNnbMhiCUtYcKL85wjwtw4AA8"],"enrUri":"enr:-L24QO7jRauJViOKy0WI7XhsPX3YSvV8J_C60aZuWdKOTlINQQE4F5Hy6tW1RmHM7JAB-Sq-r2S_VLBKgbMAoN2qNy8CgmlkgnY0gmlwhKwS7NuKbXVsdGlhZGRyc5YACASsEuzbBksaAAoErBLs2wZLG90DgnJzhQADAQAAiXNlY3AyNTZrMaEDiozRLUjzzHQToGRfLi63ntzsEvVJ6hMJp1Vk8dRJM42DdGNwgksag3VkcIJLHIV3YWt1MgU"}'
2025-02-13 04:02:58.417 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 04:02:58.417 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-13 04:02:58.424 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 04:02:58.424 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-13_04-02-57__cbda236a-7ec2-421d-bcbb-67da0ab0071f__wakuorg_nwaku:latest.log
2025-02-13 04:02:58.424 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 04:02:58.424 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 04:02:58.425 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 04:02:58.425 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.178.79
2025-02-13 04:02:58.426 DEBUG [src.node.docker_mananger] Generated ports ['16644', '16645', '16646', '16647', '16648']
2025-02-13 04:02:58.426 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 04:02:58.426 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 04:02:58.426 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 04:02:58.426 DEBUG [src.node.docker_mananger] docker run -i -t -p 16644:16644 -p 16645:16645 -p 16646:16646 -p 16647:16647 -p 16648:16648 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=16646 --rest-port=16644 --tcp-port=16645 --discv5-udp-port=16647 --rest-address=0.0.0.0 --nat=extip:172.18.178.79 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ecfd73eff09dc9bba4b49d4f1a6614beeebf5543ae42cfad0f95aaccd9df6e1f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=16648 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QO7jRauJViOKy0WI7XhsPX3YSvV8J_C60aZuWdKOTlINQQE4F5Hy6tW1RmHM7JAB-Sq-r2S_VLBKgbMAoN2qNy8CgmlkgnY0gmlwhKwS7NuKbXVsdGlhZGRyc5YACASsEuzbBksaAAoErBLs2wZLG90DgnJzhQADAQAAiXNlY3AyNTZrMaEDiozRLUjzzHQToGRfLi63ntzsEvVJ6hMJp1Vk8dRJM42DdGNwgksag3VkcIJLHIV3YWt1MgU --filternode=/ip4/172.18.236.219/tcp/19226/p2p/16Uiu2HAmMyq9nW6UbeXFJu5hhgLiNnbMhiCUtYcKL85wjwtw4AA8
2025-02-13 04:02:58.648 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.178.79 waku 498accd9646c42b215fc3e914ece7e8bf056fade76262d405dc8155ee78dea90
2025-02-13 04:02:58.697 DEBUG [src.node.docker_mananger] Container started with ID 498accd9646c. Setting up logs at ./log/docker/node2_2025-02-13_04-02-57__cbda236a-7ec2-421d-bcbb-67da0ab0071f__wakuorg_nwaku:latest.log
2025-02-13 04:02:58.697 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 16644
2025-02-13 04:02:58.697 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 04:02:59.698 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16644/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:02:59.700 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 04:02:59.701 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 04:02:59.701 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16644/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:02:59.703 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.178.79/tcp/16645/p2p/16Uiu2HAmGPWZuK9hPzbmg3xLDBt5LQ4VwhuotQ8BAHkY2uiLj7jb","/ip4/172.18.178.79/tcp/16646/ws/p2p/16Uiu2HAmGPWZuK9hPzbmg3xLDBt5LQ4VwhuotQ8BAHkY2uiLj7jb"],"enrUri":"enr:-L24QLvPig3kBpcQeW3GGTFLa-ehWnp-UIW9MhDQc39tLuCITkLRyIllNJtK77C1vAkFrrJCB2W1fKyS6e2kz4V8b4kCgmlkgnY0gmlwhKwSsk-KbXVsdGlhZGRyc5YACASsErJPBkEFAAoErBKyTwZBBt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDN3efK1lNbprgApJMUFM02Guiu7uN7_7FU-QJbzE6Jl6DdGNwgkEFg3VkcIJBB4V3YWt1MgA"}'
2025-02-13 04:02:59.703 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 04:02:59.704 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16644/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.236.219/tcp/19226/p2p/16Uiu2HAmMyq9nW6UbeXFJu5hhgLiNnbMhiCUtYcKL85wjwtw4AA8"]'
2025-02-13 04:02:59.742 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:02:59.742 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-13 04:02:59.742 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19225/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-13 04:02:59.758 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:02:59.759 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16644/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "628d303b-ba0c-4df7-8942-ab012796ddfb", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-13 04:02:59.771 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"628d303b-ba0c-4df7-8942-ab012796ddfb","statusDesc":"OK"}'
2025-02-13 04:02:59.773 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:16644/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/2/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-13 04:02:59.780 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:16644/filter/v2/subscriptions. Response content: b'{"requestId":"1","statusDesc":"NOT_FOUND: peer has no subscriptions"}'
2025-02-13 04:02:59.781 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19225/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2025-02-13 04:02:59.788 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:02:59.788 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-13 04:02:59.889 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-13 04:02:59.889 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16644/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:02:59.892 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1739419379781481472,"ephemeral":false}]'
2025-02-13 04:02:59.895 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-13 04:02:59.896 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-13 04:02:59.896 DEBUG [src.node.waku_node] Stopping container with id b652b4aa024b
2025-02-13 04:03:00.984 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 04:03:00.985 DEBUG [src.node.waku_node] Stopping container with id 498accd9646c
2025-02-13 04:03:01.798 ERROR [src.node.docker_mananger] Max retries reached for container b652b4aa024b. Exiting log stream.
2025-02-13 04:03:02.484 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 04:03:02.485 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-13 04:03:02.490 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-13 04:03:02.496 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
