2025-02-13 04:05:35.024 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-13 04:05:35.024 DEBUG [tests.conftest] Running test: test_store_with_empty_hashes with id: 2025-02-13_04-05-35__0ee1c831-f8da-4485-8cb0-7b503ffe7667
2025-02-13 04:05:35.024 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-13 04:05:35.024 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-13 04:05:35.025 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-13 04:05:35.031 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 04:05:35.031 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-13_04-05-35__0ee1c831-f8da-4485-8cb0-7b503ffe7667__wakuorg_nwaku:latest.log
2025-02-13 04:05:35.031 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 04:05:35.031 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 04:05:35.032 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 04:05:35.032 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.253.98
2025-02-13 04:05:35.033 DEBUG [src.node.docker_mananger] Generated ports ['44934', '44935', '44936', '44937', '44938']
2025-02-13 04:05:35.033 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 04:05:35.033 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 04:05:35.033 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 04:05:35.033 DEBUG [src.node.docker_mananger] docker run -i -t -p 44934:44934 -p 44935:44935 -p 44936:44936 -p 44937:44937 -p 44938:44938 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44936 --rest-port=44934 --tcp-port=44935 --discv5-udp-port=44937 --rest-address=0.0.0.0 --nat=extip:172.18.253.98 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a0cad2ed30d9e7d846f77ecd0df3529c8c182bda7a4ccf89e3bfe60bed7a3290 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44938 --metrics-logging=true --store=true --relay=true
2025-02-13 04:05:35.263 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.253.98 waku 4b481e0521be0a43c7f7be6bcbd1cd6631f83085ef10c3ac45b816d07ff8af30
2025-02-13 04:05:35.312 DEBUG [src.node.docker_mananger] Container started with ID 4b481e0521be. Setting up logs at ./log/docker/publishing_node1_2025-02-13_04-05-35__0ee1c831-f8da-4485-8cb0-7b503ffe7667__wakuorg_nwaku:latest.log
2025-02-13 04:05:35.314 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 44934
2025-02-13 04:05:35.316 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 04:05:35.816 ERROR [src.node.docker_mananger] Max retries reached for container 9b97827eb6d0. Exiting log stream.
2025-02-13 04:05:36.316 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44934/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:05:36.319 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 04:05:36.319 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 04:05:36.319 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44934/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:05:36.321 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.253.98/tcp/44935/p2p/16Uiu2HAm9vNXhWvdQoAw2JoaHCxBuScQemUwcqJLsJ19PHwnGsfL","/ip4/172.18.253.98/tcp/44936/ws/p2p/16Uiu2HAm9vNXhWvdQoAw2JoaHCxBuScQemUwcqJLsJ19PHwnGsfL"],"enrUri":"enr:-L24QK3T_z8AvF0FxMvjaGS9a3ZeRY0YyirTi7bPyl9B8rqzTjThZ7FbwPpqk7yeWOIUBQLIAT308WWmKrY-GPEbgxQCgmlkgnY0gmlwhKwS_WKKbXVsdGlhZGRyc5YACASsEv1iBq-HAAoErBL9YgaviN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC11260heewzBh87LDE8lvH7AYNO7KLZuU4Zn1i-UyFJ-DdGNwgq-Hg3VkcIKviYV3YWt1MgM"}'
2025-02-13 04:05:36.322 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 04:05:36.328 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 04:05:36.328 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-13_04-05-35__0ee1c831-f8da-4485-8cb0-7b503ffe7667__wakuorg_nwaku:latest.log
2025-02-13 04:05:36.329 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 04:05:36.329 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 04:05:36.330 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 04:05:36.330 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.56.23
2025-02-13 04:05:36.330 DEBUG [src.node.docker_mananger] Generated ports ['63427', '63428', '63429', '63430', '63431']
2025-02-13 04:05:36.331 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 04:05:36.331 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 04:05:36.331 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 04:05:36.331 DEBUG [src.node.docker_mananger] docker run -i -t -p 63427:63427 -p 63428:63428 -p 63429:63429 -p 63430:63430 -p 63431:63431 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63429 --rest-port=63427 --tcp-port=63428 --discv5-udp-port=63430 --rest-address=0.0.0.0 --nat=extip:172.18.56.23 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=afaf6a6dd3d6f8bd32d264e776b2c719cb0db3c02053d18cfbb8d81f6ffdb547 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63431 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QK3T_z8AvF0FxMvjaGS9a3ZeRY0YyirTi7bPyl9B8rqzTjThZ7FbwPpqk7yeWOIUBQLIAT308WWmKrY-GPEbgxQCgmlkgnY0gmlwhKwS_WKKbXVsdGlhZGRyc5YACASsEv1iBq-HAAoErBL9YgaviN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC11260heewzBh87LDE8lvH7AYNO7KLZuU4Zn1i-UyFJ-DdGNwgq-Hg3VkcIKviYV3YWt1MgM --storenode=/ip4/172.18.253.98/tcp/44935/p2p/16Uiu2HAm9vNXhWvdQoAw2JoaHCxBuScQemUwcqJLsJ19PHwnGsfL --store=true --relay=true
2025-02-13 04:05:36.560 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.56.23 waku 4fae9706b28443b7b8c7ba0762a68652e7d640be931dbfeefe9abb8cfbe86d31
2025-02-13 04:05:36.614 DEBUG [src.node.docker_mananger] Container started with ID 4fae9706b284. Setting up logs at ./log/docker/store_node1_2025-02-13_04-05-35__0ee1c831-f8da-4485-8cb0-7b503ffe7667__wakuorg_nwaku:latest.log
2025-02-13 04:05:36.614 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 63427
2025-02-13 04:05:36.615 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 04:05:37.615 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63427/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:05:37.618 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 04:05:37.618 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 04:05:37.618 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63427/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:05:37.620 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.56.23/tcp/63428/p2p/16Uiu2HAkuhoMW7gHnowUdkzmjDLuuuxxJuWiN9QcEc6xH5zugKD7","/ip4/172.18.56.23/tcp/63429/ws/p2p/16Uiu2HAkuhoMW7gHnowUdkzmjDLuuuxxJuWiN9QcEc6xH5zugKD7"],"enrUri":"enr:-L24QBuEbRBnPSASGnlO-W-7hU4isWlsoxSuTUus3a3shLVcG7oOYr9dnBSuTgLUv1JCL-1BQAY8OkJ2pKZpHAl8joACgmlkgnY0gmlwhKwSOBeKbXVsdGlhZGRyc5YACASsEjgXBvfEAAoErBI4Fwb3xd0DgnJzhQADAQAAiXNlY3AyNTZrMaECBCGhjyZGRFcnmKr_zJkkY-qUVRqWs_4YQQPn0Io74T6DdGNwgvfEg3VkcIL3xoV3YWt1MgM"}'
2025-02-13 04:05:37.620 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 04:05:37.621 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63427/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.253.98/tcp/44935/p2p/16Uiu2HAm9vNXhWvdQoAw2JoaHCxBuScQemUwcqJLsJ19PHwnGsfL"]'
2025-02-13 04:05:37.623 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:05:37.623 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44934/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-13 04:05:37.626 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:05:37.626 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63427/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-13 04:05:37.628 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:05:37.629 DEBUG [src.steps.store] Relaying message
2025-02-13 04:05:37.629 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44934/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-13 04:05:37.635 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:05:37.636 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-13 04:05:37.836 DEBUG [src.steps.store] Relaying message
2025-02-13 04:05:37.837 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44934/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8x", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-13 04:05:37.842 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:05:37.843 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-13 04:05:38.043 DEBUG [src.steps.store] Relaying message
2025-02-13 04:05:38.044 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44934/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8y", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-13 04:05:38.048 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:05:38.049 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-13 04:05:38.249 DEBUG [src.steps.store] Relaying message
2025-02-13 04:05:38.250 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44934/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8z", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-13 04:05:38.255 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:05:38.255 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-13 04:05:38.456 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44934/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&hashes=&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:05:38.459 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x980c98a3ddb973753891c9da04f5e6bdf827bc793d48011b08fb60411502dcd0"},{"messageHash":"0x685d6a3b3233e59689a3c4d71f8c405b637d134509398a918111a6e26613263d"},{"messageHash":"0xe747ed11c300fc6af5c891b79ef97ae369d69f54f5b280d95f06edcff4c9d479"},{"messageHash":"0x2237ff1c65bb5eaad5e76a1d76e6532a006a4bacac3d2156c364777e963cbb4d"}]}'
2025-02-13 04:05:38.459 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63427/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&hashes=&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:05:38.462 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x980c98a3ddb973753891c9da04f5e6bdf827bc793d48011b08fb60411502dcd0"},{"messageHash":"0x685d6a3b3233e59689a3c4d71f8c405b637d134509398a918111a6e26613263d"},{"messageHash":"0xe747ed11c300fc6af5c891b79ef97ae369d69f54f5b280d95f06edcff4c9d479"},{"messageHash":"0x2237ff1c65bb5eaad5e76a1d76e6532a006a4bacac3d2156c364777e963cbb4d"}]}'
2025-02-13 04:05:38.463 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-13 04:05:38.464 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-13 04:05:38.465 DEBUG [src.node.waku_node] Stopping container with id 4b481e0521be
2025-02-13 04:05:39.137 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 04:05:39.137 DEBUG [src.node.waku_node] Stopping container with id 4fae9706b284
2025-02-13 04:05:39.949 ERROR [src.node.docker_mananger] Max retries reached for container 4b481e0521be. Exiting log stream.
2025-02-13 04:05:40.617 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 04:05:40.620 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-13 04:05:40.629 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-13 04:05:40.636 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
