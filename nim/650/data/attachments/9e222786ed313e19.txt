2025-02-13 04:03:20.282 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-13 04:03:20.283 DEBUG [tests.conftest] Running test: test_filter_ping_on_peer_without_subscription with id: 2025-02-13_04-03-20__21b58f1a-0df7-4518-8bf3-44bc2b781ad7
2025-02-13 04:03:20.284 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-13 04:03:20.285 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-13 04:03:20.285 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-13 04:03:20.294 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 04:03:20.295 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-13_04-03-20__21b58f1a-0df7-4518-8bf3-44bc2b781ad7__wakuorg_nwaku:latest.log
2025-02-13 04:03:20.295 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 04:03:20.296 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 04:03:20.298 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 04:03:20.298 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.5.99
2025-02-13 04:03:20.298 DEBUG [src.node.docker_mananger] Generated ports ['13169', '13170', '13171', '13172', '13173']
2025-02-13 04:03:20.299 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 04:03:20.299 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 04:03:20.299 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 04:03:20.299 DEBUG [src.node.docker_mananger] docker run -i -t -p 13169:13169 -p 13170:13170 -p 13171:13171 -p 13172:13172 -p 13173:13173 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=13171 --rest-port=13169 --tcp-port=13170 --discv5-udp-port=13172 --rest-address=0.0.0.0 --nat=extip:172.18.5.99 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=89b58f0b32ce44bccbf3aa555ec541c6b0ee6ba4b05a84fcc0d46ddf176ee9bc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=13173 --metrics-logging=true --relay=true --filter=true
2025-02-13 04:03:20.538 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.5.99 waku 1fdf8a60d3f23dcb640c1574cdcdc63b3a868dacc94e3255641bfe783b0819b6
2025-02-13 04:03:20.591 DEBUG [src.node.docker_mananger] Container started with ID 1fdf8a60d3f2. Setting up logs at ./log/docker/node1_2025-02-13_04-03-20__21b58f1a-0df7-4518-8bf3-44bc2b781ad7__wakuorg_nwaku:latest.log
2025-02-13 04:03:20.592 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 13169
2025-02-13 04:03:20.592 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 04:03:21.168 ERROR [src.node.docker_mananger] Max retries reached for container 028c796b8e01. Exiting log stream.
2025-02-13 04:03:21.593 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:13169/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:03:21.596 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 04:03:21.596 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 04:03:21.596 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:13169/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:03:21.598 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.5.99/tcp/13170/p2p/16Uiu2HAmQmSo6gy2LScDGMxXTJgbrTvSBastauChgFnSN7fd691L","/ip4/172.18.5.99/tcp/13171/ws/p2p/16Uiu2HAmQmSo6gy2LScDGMxXTJgbrTvSBastauChgFnSN7fd691L"],"enrUri":"enr:-L24QFseMtIdFfiz-Us0R6G3jGClY-lD8usovu9XcnAANO0rbwXsTU56L1dCvIt0QBaeMs8EXHqR4aZkjTR54Pmj72QCgmlkgnY0gmlwhKwSBWOKbXVsdGlhZGRyc5YACASsEgVjBjNyAAoErBIFYwYzc90DgnJzhQADAQAAiXNlY3AyNTZrMaEDs_OhIOs5_38CciJwxVlDyYrUAWH785EczJ1MbinQlPuDdGNwgjNyg3VkcIIzdIV3YWt1MgU"}'
2025-02-13 04:03:21.599 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 04:03:21.599 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-13 04:03:21.605 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 04:03:21.605 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-13_04-03-20__21b58f1a-0df7-4518-8bf3-44bc2b781ad7__wakuorg_nwaku:latest.log
2025-02-13 04:03:21.605 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 04:03:21.606 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 04:03:21.607 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 04:03:21.607 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.188.21
2025-02-13 04:03:21.607 DEBUG [src.node.docker_mananger] Generated ports ['1122', '1123', '1124', '1125', '1126']
2025-02-13 04:03:21.608 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 04:03:21.608 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 04:03:21.608 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 04:03:21.608 DEBUG [src.node.docker_mananger] docker run -i -t -p 1122:1122 -p 1123:1123 -p 1124:1124 -p 1125:1125 -p 1126:1126 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=1124 --rest-port=1122 --tcp-port=1123 --discv5-udp-port=1125 --rest-address=0.0.0.0 --nat=extip:172.18.188.21 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ce7f263b21a832e796f9f62aa56fc2c61bffebc6eb12cae6b993f871f33ecfed --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=1126 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QFseMtIdFfiz-Us0R6G3jGClY-lD8usovu9XcnAANO0rbwXsTU56L1dCvIt0QBaeMs8EXHqR4aZkjTR54Pmj72QCgmlkgnY0gmlwhKwSBWOKbXVsdGlhZGRyc5YACASsEgVjBjNyAAoErBIFYwYzc90DgnJzhQADAQAAiXNlY3AyNTZrMaEDs_OhIOs5_38CciJwxVlDyYrUAWH785EczJ1MbinQlPuDdGNwgjNyg3VkcIIzdIV3YWt1MgU --filternode=/ip4/172.18.5.99/tcp/13170/p2p/16Uiu2HAmQmSo6gy2LScDGMxXTJgbrTvSBastauChgFnSN7fd691L
2025-02-13 04:03:21.840 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.188.21 waku 6d90296ec4cb1bc1099efb4106bbf9115fc00b12182ed6f01a4eb8c001dfe6c3
2025-02-13 04:03:21.889 DEBUG [src.node.docker_mananger] Container started with ID 6d90296ec4cb. Setting up logs at ./log/docker/node2_2025-02-13_04-03-20__21b58f1a-0df7-4518-8bf3-44bc2b781ad7__wakuorg_nwaku:latest.log
2025-02-13 04:03:21.889 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 1122
2025-02-13 04:03:21.889 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 04:03:22.890 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1122/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:03:22.893 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 04:03:22.893 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 04:03:22.893 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1122/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:03:22.895 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.188.21/tcp/1123/p2p/16Uiu2HAkwmd6XsEq3LXomzUovvoJc2YL2t1fX5eGKrtBKE4vrGvc","/ip4/172.18.188.21/tcp/1124/ws/p2p/16Uiu2HAkwmd6XsEq3LXomzUovvoJc2YL2t1fX5eGKrtBKE4vrGvc"],"enrUri":"enr:-L24QEJJsYzLJ5YZljYPpS4sQQuhkLsCDOtXT0j8AZAaSjxWDD-pbW0vygY5byX0eyFvG0uBY886KaInpmO9G_GuwOMCgmlkgnY0gmlwhKwSvBWKbXVsdGlhZGRyc5YACASsErwVBgRjAAoErBK8FQYEZN0DgnJzhQADAQAAiXNlY3AyNTZrMaECItO6s_nGxICotfRukcM7ZPJ-vkA7fSfqOt_lb0XJ8lmDdGNwggRjg3VkcIIEZYV3YWt1MgA"}'
2025-02-13 04:03:22.896 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 04:03:22.896 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:1122/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.5.99/tcp/13170/p2p/16Uiu2HAmQmSo6gy2LScDGMxXTJgbrTvSBastauChgFnSN7fd691L"]'
2025-02-13 04:03:22.936 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:03:22.939 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1122/filter/v2/subscriptions/1e626c31-87f2-4551-99d9-e1cd65058116" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:03:22.960 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:1122/filter/v2/subscriptions/1e626c31-87f2-4551-99d9-e1cd65058116. Response content: b'{"requestId":"1e626c31-87f2-4551-99d9-e1cd65058116","statusDesc":"NOT_FOUND: peer has no subscriptions"}'
2025-02-13 04:03:22.966 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-13 04:03:22.967 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-13 04:03:22.967 DEBUG [src.node.waku_node] Stopping container with id 1fdf8a60d3f2
2025-02-13 04:03:23.603 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 04:03:23.605 DEBUG [src.node.waku_node] Stopping container with id 6d90296ec4cb
2025-02-13 04:03:24.431 ERROR [src.node.docker_mananger] Max retries reached for container 1fdf8a60d3f2. Exiting log stream.
2025-02-13 04:03:24.858 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 04:03:24.859 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-13 04:03:24.867 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-13 04:03:24.872 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
