2025-02-13 04:05:10.424 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-13 04:05:10.424 DEBUG [tests.conftest] Running test: test_time_filter_end_time_now with id: 2025-02-13_04-05-10__4283f045-ee99-408b-b8fc-5df533a89789
2025-02-13 04:05:10.425 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-13 04:05:10.425 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-13 04:05:10.425 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-13 04:05:10.431 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 04:05:10.432 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-13_04-05-10__4283f045-ee99-408b-b8fc-5df533a89789__wakuorg_nwaku:latest.log
2025-02-13 04:05:10.432 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 04:05:10.432 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 04:05:10.433 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 04:05:10.433 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.68.23
2025-02-13 04:05:10.434 DEBUG [src.node.docker_mananger] Generated ports ['59766', '59767', '59768', '59769', '59770']
2025-02-13 04:05:10.434 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 04:05:10.434 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 04:05:10.434 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 04:05:10.434 DEBUG [src.node.docker_mananger] docker run -i -t -p 59766:59766 -p 59767:59767 -p 59768:59768 -p 59769:59769 -p 59770:59770 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=59768 --rest-port=59766 --tcp-port=59767 --discv5-udp-port=59769 --rest-address=0.0.0.0 --nat=extip:172.18.68.23 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fdd7f3efeb86aa132d5c0f75f39a1087cccacbccdd2480c015d8a9aa9eec6eff --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=59770 --metrics-logging=true --store=true --relay=true
2025-02-13 04:05:10.661 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.68.23 waku a6650e754136cd017a8a56f1f4fda2785ef9d767d57a1255141c5a664ad46db2
2025-02-13 04:05:10.705 DEBUG [src.node.docker_mananger] Container started with ID a6650e754136. Setting up logs at ./log/docker/publishing_node1_2025-02-13_04-05-10__4283f045-ee99-408b-b8fc-5df533a89789__wakuorg_nwaku:latest.log
2025-02-13 04:05:10.706 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 59766
2025-02-13 04:05:10.706 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 04:05:11.231 ERROR [src.node.docker_mananger] Max retries reached for container ec4469366153. Exiting log stream.
2025-02-13 04:05:11.707 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:59766/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:05:11.710 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 04:05:11.710 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 04:05:11.710 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:59766/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:05:11.712 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.68.23/tcp/59767/p2p/16Uiu2HAmDPhGbYhNEyRraXwsCBR3uWhg2ZQ6GwVt7n3aTzrabfty","/ip4/172.18.68.23/tcp/59768/ws/p2p/16Uiu2HAmDPhGbYhNEyRraXwsCBR3uWhg2ZQ6GwVt7n3aTzrabfty"],"enrUri":"enr:-L24QLQOeG82wW4nKFk3TbhqqE3kFe8sS_Vp9K9RRHwdC_QWUlhEpbSuTa0dJ4MflGa7v09kskf17ighBRS9L-CMonwCgmlkgnY0gmlwhKwSRBeKbXVsdGlhZGRyc5YACASsEkQXBul3AAoErBJEFwbpeN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDCvCpTP2YMtTiPhVLfK5gemoDoSfxCbLkc-SuoGEgyV6DdGNwgul3g3VkcILpeYV3YWt1MgM"}'
2025-02-13 04:05:11.712 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 04:05:11.719 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 04:05:11.719 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-13_04-05-10__4283f045-ee99-408b-b8fc-5df533a89789__wakuorg_nwaku:latest.log
2025-02-13 04:05:11.719 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 04:05:11.719 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 04:05:11.721 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 04:05:11.721 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.25.41
2025-02-13 04:05:11.721 DEBUG [src.node.docker_mananger] Generated ports ['2356', '2357', '2358', '2359', '2360']
2025-02-13 04:05:11.721 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 04:05:11.721 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 04:05:11.721 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 04:05:11.721 DEBUG [src.node.docker_mananger] docker run -i -t -p 2356:2356 -p 2357:2357 -p 2358:2358 -p 2359:2359 -p 2360:2360 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2358 --rest-port=2356 --tcp-port=2357 --discv5-udp-port=2359 --rest-address=0.0.0.0 --nat=extip:172.18.25.41 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e11afcee9ccf7ffacb05f746e5f061cbae568c9280ef11301f53a7cb24bae749 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2360 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QLQOeG82wW4nKFk3TbhqqE3kFe8sS_Vp9K9RRHwdC_QWUlhEpbSuTa0dJ4MflGa7v09kskf17ighBRS9L-CMonwCgmlkgnY0gmlwhKwSRBeKbXVsdGlhZGRyc5YACASsEkQXBul3AAoErBJEFwbpeN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDCvCpTP2YMtTiPhVLfK5gemoDoSfxCbLkc-SuoGEgyV6DdGNwgul3g3VkcILpeYV3YWt1MgM --storenode=/ip4/172.18.68.23/tcp/59767/p2p/16Uiu2HAmDPhGbYhNEyRraXwsCBR3uWhg2ZQ6GwVt7n3aTzrabfty --store=true --relay=true
2025-02-13 04:05:11.944 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.25.41 waku b5062a33a95d04d2229cfc94eab9f797b485752ff1383eb779b703f37be039e7
2025-02-13 04:05:11.997 DEBUG [src.node.docker_mananger] Container started with ID b5062a33a95d. Setting up logs at ./log/docker/store_node1_2025-02-13_04-05-10__4283f045-ee99-408b-b8fc-5df533a89789__wakuorg_nwaku:latest.log
2025-02-13 04:05:11.997 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 2356
2025-02-13 04:05:11.998 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 04:05:12.998 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2356/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:05:13.001 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 04:05:13.001 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 04:05:13.001 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2356/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:05:13.003 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.25.41/tcp/2357/p2p/16Uiu2HAmQfD9bzBVBBEDVCGui8fPFiXYuzy45qTF3TzEH8tUhLxx","/ip4/172.18.25.41/tcp/2358/ws/p2p/16Uiu2HAmQfD9bzBVBBEDVCGui8fPFiXYuzy45qTF3TzEH8tUhLxx"],"enrUri":"enr:-L24QPEgkb-Kw3YdFy4zwfyOgAmqaDYjTrFh6oUamYb48D59NLT6nMplCq-MJXUiVhQRPF2n69B8FS-c3HzVoHZqTnwCgmlkgnY0gmlwhKwSGSmKbXVsdGlhZGRyc5YACASsEhkpBgk1AAoErBIZKQYJNt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDslq25hsdSII_uyXPbkPG6uevZcvblrmCo4zAE1n4LumDdGNwggk1g3VkcIIJN4V3YWt1MgM"}'
2025-02-13 04:05:13.003 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 04:05:13.004 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2356/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.68.23/tcp/59767/p2p/16Uiu2HAmDPhGbYhNEyRraXwsCBR3uWhg2ZQ6GwVt7n3aTzrabfty"]'
2025-02-13 04:05:13.006 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:05:13.007 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:59766/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-13 04:05:13.009 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:05:13.009 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2356/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-13 04:05:13.011 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:05:13.012 DEBUG [src.steps.store] Relaying message
2025-02-13 04:05:13.012 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:59766/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-13 04:05:13.018 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:05:13.018 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-13 04:05:13.219 DEBUG [src.steps.store] Relaying message
2025-02-13 04:05:13.220 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:59766/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-13 04:05:13.225 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:05:13.225 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-13 04:05:13.426 DEBUG [src.steps.store] Relaying message
2025-02-13 04:05:13.426 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:59766/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-13 04:05:13.432 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:05:13.433 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-13 04:05:13.633 DEBUG [src.steps.store] Relaying message
2025-02-13 04:05:13.634 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:59766/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-13 04:05:13.640 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:05:13.640 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-13 04:05:13.841 DEBUG [src.steps.store] Relaying message
2025-02-13 04:05:13.841 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:59766/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-13 04:05:13.848 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:05:13.848 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-13 04:05:14.049 DEBUG [src.steps.store] Relaying message
2025-02-13 04:05:14.049 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:59766/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-13 04:05:14.055 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:05:14.055 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-13 04:05:14.255 DEBUG [tests.store.test_time_filter] inquering stored messages with start time 1739419510012495104 after end time 1739419514255685120
2025-02-13 04:05:14.256 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:59766/store/v3/messages?includeData=True&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=1739419510012495104&endTime=1739419514255685120&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:05:14.260 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xd169c729d13cbd6184aafb8fa1d178f33a62280da64fad5b87aa15d6fe19a201","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739419510012495104,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0x1ca9899992eef2a4a6585faf94b329c031a6fdbb1732dc35029d36f7cfc8196e","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739419512012502016,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0xd8a9ee1fb531226784b404b132d43052642bae918881bc60a7045cf4c5fd6861","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739419512912504064,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"}]}'
2025-02-13 04:05:14.260 DEBUG [tests.store.test_time_filter] number of messages stored for start time 1739419510012495104 and end time = 1739419514255685120 is  3
2025-02-13 04:05:14.260 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2356/store/v3/messages?includeData=True&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=1739419510012495104&endTime=1739419514255685120&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:05:14.263 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xd169c729d13cbd6184aafb8fa1d178f33a62280da64fad5b87aa15d6fe19a201","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739419510012495104,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0x1ca9899992eef2a4a6585faf94b329c031a6fdbb1732dc35029d36f7cfc8196e","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739419512012502016,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0xd8a9ee1fb531226784b404b132d43052642bae918881bc60a7045cf4c5fd6861","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739419512912504064,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"}]}'
2025-02-13 04:05:14.264 DEBUG [tests.store.test_time_filter] number of messages stored for start time 1739419510012495104 and end time = 1739419514255685120 is  3
2025-02-13 04:05:14.265 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-13 04:05:14.266 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-13 04:05:14.266 DEBUG [src.node.waku_node] Stopping container with id a6650e754136
2025-02-13 04:05:15.273 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 04:05:15.274 DEBUG [src.node.waku_node] Stopping container with id b5062a33a95d
2025-02-13 04:05:16.087 ERROR [src.node.docker_mananger] Max retries reached for container a6650e754136. Exiting log stream.
2025-02-13 04:05:16.525 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 04:05:16.526 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-13 04:05:16.534 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-13 04:05:16.540 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
