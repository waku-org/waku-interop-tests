2025-02-13 04:08:00.142 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-13 04:08:00.143 DEBUG [tests.conftest] Running test: test_light_push_with_invalid_version with id: 2025-02-13_04-08-00__e136f2ca-0dbc-40a3-b1a8-ffda0d811fac
2025-02-13 04:08:00.143 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-13 04:08:00.143 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-13 04:08:00.150 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 04:08:00.150 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-13_04-08-00__e136f2ca-0dbc-40a3-b1a8-ffda0d811fac__wakuorg_nwaku:latest.log
2025-02-13 04:08:00.150 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 04:08:00.150 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 04:08:00.151 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 04:08:00.152 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.179.47
2025-02-13 04:08:00.152 DEBUG [src.node.docker_mananger] Generated ports ['50241', '50242', '50243', '50244', '50245']
2025-02-13 04:08:00.152 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 04:08:00.152 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 04:08:00.152 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 04:08:00.152 DEBUG [src.node.docker_mananger] docker run -i -t -p 50241:50241 -p 50242:50242 -p 50243:50243 -p 50244:50244 -p 50245:50245 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=50243 --rest-port=50241 --tcp-port=50242 --discv5-udp-port=50244 --rest-address=0.0.0.0 --nat=extip:172.18.179.47 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=631d5b031afca1ef8e41554acddbcec6c92dc96a6fe8d3594f4a2738efa24de6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=50245 --metrics-logging=true --lightpush=true --relay=true
2025-02-13 04:08:00.374 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.179.47 waku eddce061c8587157022bec31eb712a1752e04e0a40379b8deac3c9a18d62c03f
2025-02-13 04:08:00.427 DEBUG [src.node.docker_mananger] Container started with ID eddce061c858. Setting up logs at ./log/docker/receiving_node1_2025-02-13_04-08-00__e136f2ca-0dbc-40a3-b1a8-ffda0d811fac__wakuorg_nwaku:latest.log
2025-02-13 04:08:00.427 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 50241
2025-02-13 04:08:00.427 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 04:08:00.943 ERROR [src.node.docker_mananger] Max retries reached for container 69b95aef6fe6. Exiting log stream.
2025-02-13 04:08:01.429 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50241/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:08:01.432 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 04:08:01.432 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 04:08:01.432 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50241/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:08:01.435 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.179.47/tcp/50242/p2p/16Uiu2HAmEDzqDTVKwy35KTdcyGuA7jYeNB1MJyX25oa5Tj7j7VDz","/ip4/172.18.179.47/tcp/50243/ws/p2p/16Uiu2HAmEDzqDTVKwy35KTdcyGuA7jYeNB1MJyX25oa5Tj7j7VDz"],"enrUri":"enr:-L24QHovvnlVGAlZx8Bl5a01879nOM2IATwO1i8v2s98ciO0K328lxRnk6saZWuoa6XEvynRUyTG5PJfaw7fFwOy1YkCgmlkgnY0gmlwhKwSsy-KbXVsdGlhZGRyc5YACASsErMvBsRCAAoErBKzLwbEQ90DgnJzhQADAQAAiXNlY3AyNTZrMaEDF1Bl5ZaIu1PjjncVOeKFffYBTn0hDNEvkpoPE3zxM7GDdGNwgsRCg3VkcILERIV3YWt1Mgk"}'
2025-02-13 04:08:01.435 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 04:08:01.441 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 04:08:01.442 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-13_04-08-00__e136f2ca-0dbc-40a3-b1a8-ffda0d811fac__wakuorg_nwaku:latest.log
2025-02-13 04:08:01.442 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 04:08:01.442 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 04:08:01.443 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 04:08:01.443 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.225.109
2025-02-13 04:08:01.443 DEBUG [src.node.docker_mananger] Generated ports ['45958', '45959', '45960', '45961', '45962']
2025-02-13 04:08:01.444 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 04:08:01.444 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 04:08:01.444 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 04:08:01.444 DEBUG [src.node.docker_mananger] docker run -i -t -p 45958:45958 -p 45959:45959 -p 45960:45960 -p 45961:45961 -p 45962:45962 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45960 --rest-port=45958 --tcp-port=45959 --discv5-udp-port=45961 --rest-address=0.0.0.0 --nat=extip:172.18.225.109 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ca4ceaa779e5aedddbea11de22dbae88d99cedcd37d80e3d6cec128631feea90 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45962 --metrics-logging=true --lightpush=false --relay=true
2025-02-13 04:08:01.677 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.225.109 waku 1ac0f46eb60a406d83680f451a2ff7ce5e6ed62ad78acd7fd736008baccec48f
2025-02-13 04:08:01.727 DEBUG [src.node.docker_mananger] Container started with ID 1ac0f46eb60a. Setting up logs at ./log/docker/receiving_node2_2025-02-13_04-08-00__e136f2ca-0dbc-40a3-b1a8-ffda0d811fac__wakuorg_nwaku:latest.log
2025-02-13 04:08:01.728 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 45958
2025-02-13 04:08:01.728 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 04:08:02.728 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45958/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:08:02.731 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 04:08:02.731 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 04:08:02.732 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45958/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:08:02.734 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.225.109/tcp/45959/p2p/16Uiu2HAmVEBzoUadXbUUcD6hQHn5FMYwbmELDwQusiVUwHrhxc2V","/ip4/172.18.225.109/tcp/45960/ws/p2p/16Uiu2HAmVEBzoUadXbUUcD6hQHn5FMYwbmELDwQusiVUwHrhxc2V"],"enrUri":"enr:-L24QN6k9dVBt_coXhU3r13HUjPQ2j0WQGkUJ2eSL1qL_fo3VE9sZpxIbakV_M6_5VQ8AThVwAUaIU-mygbtfoQ4jJsCgmlkgnY0gmlwhKwS4W2KbXVsdGlhZGRyc5YACASsEuFtBrOHAAoErBLhbQaziN0DgnJzhQADAQAAiXNlY3AyNTZrMaED9jxTmUqnmAiRu-buHDIYX2SknwFnjGFXt2xN6YS8uvqDdGNwgrOHg3VkcIKziYV3YWt1MgE"}'
2025-02-13 04:08:02.734 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 04:08:02.734 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:45958/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.179.47/tcp/50242/p2p/16Uiu2HAmEDzqDTVKwy35KTdcyGuA7jYeNB1MJyX25oa5Tj7j7VDz"]'
2025-02-13 04:08:02.773 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:08:02.781 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 04:08:02.782 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-13_04-08-00__e136f2ca-0dbc-40a3-b1a8-ffda0d811fac__wakuorg_nwaku:latest.log
2025-02-13 04:08:02.782 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 04:08:02.782 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 04:08:02.783 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 04:08:02.783 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.95.9
2025-02-13 04:08:02.784 DEBUG [src.node.docker_mananger] Generated ports ['33648', '33649', '33650', '33651', '33652']
2025-02-13 04:08:02.784 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 04:08:02.784 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 04:08:02.784 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 04:08:02.784 DEBUG [src.node.docker_mananger] docker run -i -t -p 33648:33648 -p 33649:33649 -p 33650:33650 -p 33651:33651 -p 33652:33652 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=33650 --rest-port=33648 --tcp-port=33649 --discv5-udp-port=33651 --rest-address=0.0.0.0 --nat=extip:172.18.95.9 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d3b6c2a0bfe95dff3f8b135a3bcbb1b0373eba4fa8848d8cca9fe3dbe1f43c49 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=33652 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QHovvnlVGAlZx8Bl5a01879nOM2IATwO1i8v2s98ciO0K328lxRnk6saZWuoa6XEvynRUyTG5PJfaw7fFwOy1YkCgmlkgnY0gmlwhKwSsy-KbXVsdGlhZGRyc5YACASsErMvBsRCAAoErBKzLwbEQ90DgnJzhQADAQAAiXNlY3AyNTZrMaEDF1Bl5ZaIu1PjjncVOeKFffYBTn0hDNEvkpoPE3zxM7GDdGNwgsRCg3VkcILERIV3YWt1Mgk --lightpushnode=/ip4/172.18.179.47/tcp/50242/p2p/16Uiu2HAmEDzqDTVKwy35KTdcyGuA7jYeNB1MJyX25oa5Tj7j7VDz --lightpush=true --relay=false
2025-02-13 04:08:03.020 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.95.9 waku aab6d47c0686abfddaa9ed5e4f4e0e026d6ea6b8a37b4f3929e1db0718a1459a
2025-02-13 04:08:03.067 DEBUG [src.node.docker_mananger] Container started with ID aab6d47c0686. Setting up logs at ./log/docker/lightpush_node1_2025-02-13_04-08-00__e136f2ca-0dbc-40a3-b1a8-ffda0d811fac__wakuorg_nwaku:latest.log
2025-02-13 04:08:03.067 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 33648
2025-02-13 04:08:03.067 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 04:08:04.068 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33648/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:08:04.071 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 04:08:04.071 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 04:08:04.071 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33648/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:08:04.073 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.95.9/tcp/33649/p2p/16Uiu2HAm5dHhXz4SbCDgbpCwFSPjVhgfGSTuFK98wrPwaCWNKzd8","/ip4/172.18.95.9/tcp/33650/ws/p2p/16Uiu2HAm5dHhXz4SbCDgbpCwFSPjVhgfGSTuFK98wrPwaCWNKzd8"],"enrUri":"enr:-L24QFhiKtVNI6zJ_Fb5cgRsRrJryt_ag6Avtup6XcQvZyPHLL_kYMNXqRSAxrofAjgrYyUsUoi52UOqRTLowKZAptkCgmlkgnY0gmlwhKwSXwmKbXVsdGlhZGRyc5YACASsEl8JBoNxAAoErBJfCQaDct0DgnJzhQADAQAAiXNlY3AyNTZrMaECl46lg1nNFGxynM6_vLQK_fcXPqrhwqdGqVc9BLnQprODdGNwgoNxg3VkcIKDc4V3YWt1Mgg"}'
2025-02-13 04:08:04.073 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 04:08:04.074 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33648/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.179.47/tcp/50242/p2p/16Uiu2HAmEDzqDTVKwy35KTdcyGuA7jYeNB1MJyX25oa5Tj7j7VDz"]'
2025-02-13 04:08:04.112 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:08:04.112 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33648/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.225.109/tcp/45959/p2p/16Uiu2HAmVEBzoUadXbUUcD6hQHn5FMYwbmELDwQusiVUwHrhxc2V"]'
2025-02-13 04:08:04.138 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:08:04.140 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50241/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-13 04:08:04.144 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:08:04.145 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:45958/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-13 04:08:04.154 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:08:04.155 DEBUG [src.steps.light_push] Lightpushing message
2025-02-13 04:08:04.157 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33648/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739419684155719424, "version": 2.1}}'
2025-02-13 04:08:04.160 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:33648/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
2025-02-13 04:08:04.162 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-13 04:08:04.163 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-13 04:08:04.164 DEBUG [src.node.waku_node] Stopping container with id eddce061c858
2025-02-13 04:08:04.900 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 04:08:04.901 DEBUG [src.node.waku_node] Stopping container with id 1ac0f46eb60a
2025-02-13 04:08:05.713 ERROR [src.node.docker_mananger] Max retries reached for container eddce061c858. Exiting log stream.
2025-02-13 04:08:06.407 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 04:08:06.407 DEBUG [src.node.waku_node] Stopping container with id aab6d47c0686
2025-02-13 04:08:07.220 ERROR [src.node.docker_mananger] Max retries reached for container 1ac0f46eb60a. Exiting log stream.
2025-02-13 04:08:07.917 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 04:08:07.918 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-13 04:08:07.925 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-13 04:08:07.932 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-13 04:08:07.938 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
