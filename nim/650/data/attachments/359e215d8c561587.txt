2025-02-13 04:06:44.334 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-13 04:06:44.336 DEBUG [tests.conftest] Running test: test_publish_without_subscribing_via_api_works with id: 2025-02-13_04-06-44__aad3ac11-ca04-4970-bc3b-11b511f7a203
2025-02-13 04:06:44.337 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-13 04:06:44.338 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-13 04:06:44.338 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2025-02-13 04:06:44.347 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 04:06:44.347 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-13_04-06-44__aad3ac11-ca04-4970-bc3b-11b511f7a203__wakuorg_nwaku:latest.log
2025-02-13 04:06:44.347 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 04:06:44.347 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 04:06:44.349 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 04:06:44.349 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.194.247
2025-02-13 04:06:44.349 DEBUG [src.node.docker_mananger] Generated ports ['61691', '61692', '61693', '61694', '61695']
2025-02-13 04:06:44.349 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 04:06:44.349 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 04:06:44.349 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 04:06:44.350 DEBUG [src.node.docker_mananger] docker run -i -t -p 61691:61691 -p 61692:61692 -p 61693:61693 -p 61694:61694 -p 61695:61695 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61693 --rest-port=61691 --tcp-port=61692 --discv5-udp-port=61694 --rest-address=0.0.0.0 --nat=extip:172.18.194.247 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=502afd533bb166f84fbaba6f55bece06d8aa77fd0fc8fb1ec96cd869d17e6ebe --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61695 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto
2025-02-13 04:06:44.576 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.194.247 waku e1daa4769dd05485a9f4d6a7f3d6abb102bf5156fc29a09af55e3e108e35a6c9
2025-02-13 04:06:44.620 DEBUG [src.node.docker_mananger] Container started with ID e1daa4769dd0. Setting up logs at ./log/docker/node1_2025-02-13_04-06-44__aad3ac11-ca04-4970-bc3b-11b511f7a203__wakuorg_nwaku:latest.log
2025-02-13 04:06:44.622 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 61691
2025-02-13 04:06:44.623 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 04:06:45.152 ERROR [src.node.docker_mananger] Max retries reached for container 4a52bdf4d6a6. Exiting log stream.
2025-02-13 04:06:45.623 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61691/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:06:45.626 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 04:06:45.626 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 04:06:45.626 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61691/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:06:45.629 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.194.247/tcp/61692/p2p/16Uiu2HAmEzfXXTK1ZjHhaUfPoTpZoPLWm9YUQWUckJcii99xf9jA","/ip4/172.18.194.247/tcp/61693/ws/p2p/16Uiu2HAmEzfXXTK1ZjHhaUfPoTpZoPLWm9YUQWUckJcii99xf9jA"],"enrUri":"enr:-L24QMwRGoPokQtmwzCjXoJRGxVMGGups1aRG92FXfaEHS1rDZMQXP3OvqYLC3JSnQwJbBs2AeQOee3CcOJ3EG7gwHsCgmlkgnY0gmlwhKwSwveKbXVsdGlhZGRyc5YACASsEsL3BvD8AAoErBLC9wbw_d0DgnJzhQACAQAAiXNlY3AyNTZrMaEDIsG0yoliGXIFsgbvIZuftKIQ-VMdyUA8W9z_910d042DdGNwgvD8g3VkcILw_oV3YWt1MgU"}'
2025-02-13 04:06:45.629 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 04:06:45.635 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 04:06:45.635 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-13_04-06-44__aad3ac11-ca04-4970-bc3b-11b511f7a203__wakuorg_nwaku:latest.log
2025-02-13 04:06:45.636 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 04:06:45.636 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 04:06:45.637 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 04:06:45.637 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.162.249
2025-02-13 04:06:45.637 DEBUG [src.node.docker_mananger] Generated ports ['32571', '32572', '32573', '32574', '32575']
2025-02-13 04:06:45.637 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 04:06:45.637 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 04:06:45.638 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 04:06:45.638 DEBUG [src.node.docker_mananger] docker run -i -t -p 32571:32571 -p 32572:32572 -p 32573:32573 -p 32574:32574 -p 32575:32575 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32573 --rest-port=32571 --tcp-port=32572 --discv5-udp-port=32574 --rest-address=0.0.0.0 --nat=extip:172.18.162.249 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=ddf518ed5fdb22eab73ec66e1adb0f89a9aa10d01edaae0b7b8bade6ddfccfd3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32575 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QMwRGoPokQtmwzCjXoJRGxVMGGups1aRG92FXfaEHS1rDZMQXP3OvqYLC3JSnQwJbBs2AeQOee3CcOJ3EG7gwHsCgmlkgnY0gmlwhKwSwveKbXVsdGlhZGRyc5YACASsEsL3BvD8AAoErBLC9wbw_d0DgnJzhQACAQAAiXNlY3AyNTZrMaEDIsG0yoliGXIFsgbvIZuftKIQ-VMdyUA8W9z_910d042DdGNwgvD8g3VkcILw_oV3YWt1MgU --content-topic=/myapp/1/latest/proto
2025-02-13 04:06:45.863 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.162.249 waku b492756cb7a4996c72f228dc655080e26f88488ad28250905f37bc94d99a6ecd
2025-02-13 04:06:45.918 DEBUG [src.node.docker_mananger] Container started with ID b492756cb7a4. Setting up logs at ./log/docker/node2_2025-02-13_04-06-44__aad3ac11-ca04-4970-bc3b-11b511f7a203__wakuorg_nwaku:latest.log
2025-02-13 04:06:45.919 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 32571
2025-02-13 04:06:45.919 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 04:06:46.920 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32571/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:06:46.924 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 04:06:46.925 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 04:06:46.925 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32571/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:06:46.928 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.162.249/tcp/32572/p2p/16Uiu2HAkv5wvhePrxb4TkNUN8mesxEbQLtJb45n7KMVCwPrGwKdY","/ip4/172.18.162.249/tcp/32573/ws/p2p/16Uiu2HAkv5wvhePrxb4TkNUN8mesxEbQLtJb45n7KMVCwPrGwKdY"],"enrUri":"enr:-L24QPtOm5PNkfzmx20O7X7pyEDmp2t34G_PdXXlEBKLfeUrH2KdWW7VQdAxTnryrwtc-mSHlHXcSSXb6Z2K2maa6D0CgmlkgnY0gmlwhKwSovmKbXVsdGlhZGRyc5YACASsEqL5Bn88AAoErBKi-QZ_Pd0DgnJzhQACAQAAiXNlY3AyNTZrMaECCc4aCrIYq7lWXsSVSLaw5I3F-dzOvUJKlSnusmsYRE-DdGNwgn88g3VkcIJ_PoV3YWt1MgE"}'
2025-02-13 04:06:46.928 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 04:06:46.929 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32571/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.194.247/tcp/61692/p2p/16Uiu2HAmEzfXXTK1ZjHhaUfPoTpZoPLWm9YUQWUckJcii99xf9jA"]'
2025-02-13 04:06:46.931 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:06:46.931 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61691/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-13 04:06:46.936 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:06:46.937 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32571/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-13 04:06:46.942 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:06:46.944 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-13 04:06:46.945 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-13 04:06:46.946 DEBUG [src.node.waku_node] Stopping container with id e1daa4769dd0
2025-02-13 04:06:47.863 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 04:06:47.864 DEBUG [src.node.waku_node] Stopping container with id b492756cb7a4
2025-02-13 04:06:48.675 ERROR [src.node.docker_mananger] Max retries reached for container e1daa4769dd0. Exiting log stream.
2025-02-13 04:06:48.839 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 04:06:48.840 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-13 04:06:48.846 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-13 04:06:48.851 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
