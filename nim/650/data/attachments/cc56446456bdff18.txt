2025-02-13 04:03:48.174 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-13 04:03:48.174 DEBUG [tests.conftest] Running test: test_light_push_with_payload_less_than_150_kb with id: 2025-02-13_04-03-48__9d05e563-60bf-4191-a8b4-c1346a917837
2025-02-13 04:03:48.174 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-13 04:03:48.175 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-13 04:03:48.181 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 04:03:48.181 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-13_04-03-48__9d05e563-60bf-4191-a8b4-c1346a917837__wakuorg_nwaku:latest.log
2025-02-13 04:03:48.181 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 04:03:48.181 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 04:03:48.183 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 04:03:48.183 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.100.94
2025-02-13 04:03:48.183 DEBUG [src.node.docker_mananger] Generated ports ['58340', '58341', '58342', '58343', '58344']
2025-02-13 04:03:48.183 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 04:03:48.183 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 04:03:48.183 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 04:03:48.183 DEBUG [src.node.docker_mananger] docker run -i -t -p 58340:58340 -p 58341:58341 -p 58342:58342 -p 58343:58343 -p 58344:58344 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=58342 --rest-port=58340 --tcp-port=58341 --discv5-udp-port=58343 --rest-address=0.0.0.0 --nat=extip:172.18.100.94 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cfdaf27a32a8145c1f5dbcecbcefd11f7712c7cc5f776d43a31ed0cce40bcf6a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=58344 --metrics-logging=true --lightpush=true --relay=true
2025-02-13 04:03:48.419 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.100.94 waku a6389d32b946072727e8c88acbb516051bc2a9fe6559b7fad446b13623327bd7
2025-02-13 04:03:48.467 DEBUG [src.node.docker_mananger] Container started with ID a6389d32b946. Setting up logs at ./log/docker/receiving_node1_2025-02-13_04-03-48__9d05e563-60bf-4191-a8b4-c1346a917837__wakuorg_nwaku:latest.log
2025-02-13 04:03:48.467 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 58340
2025-02-13 04:03:48.469 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 04:03:48.984 ERROR [src.node.docker_mananger] Max retries reached for container 629cfc6f024b. Exiting log stream.
2025-02-13 04:03:49.470 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58340/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:03:49.473 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 04:03:49.473 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 04:03:49.473 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58340/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:03:49.475 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.100.94/tcp/58341/p2p/16Uiu2HAkxADzyZb5e8fW3oUMz2vrSCWgsZi9DJhMVLhTZpsbPjLn","/ip4/172.18.100.94/tcp/58342/ws/p2p/16Uiu2HAkxADzyZb5e8fW3oUMz2vrSCWgsZi9DJhMVLhTZpsbPjLn"],"enrUri":"enr:-L24QONgf0OeQlsUTjxiTmQscyfieCWvcaIuuJbC1GucYiZjXF6AZOEwx2hP_4E9fZKcv1jSbhZKMvZdgW3sGWPayCsCgmlkgnY0gmlwhKwSZF6KbXVsdGlhZGRyc5YACASsEmReBuPlAAoErBJkXgbj5t0DgnJzhQADAQAAiXNlY3AyNTZrMaECKJ35MN9rsZINZypsln_5_2bHlf5KCsmhaTmgjxMa7PODdGNwguPlg3VkcILj54V3YWt1Mgk"}'
2025-02-13 04:03:49.476 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 04:03:49.482 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 04:03:49.482 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-13_04-03-48__9d05e563-60bf-4191-a8b4-c1346a917837__wakuorg_nwaku:latest.log
2025-02-13 04:03:49.482 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 04:03:49.483 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 04:03:49.484 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 04:03:49.484 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.37.33
2025-02-13 04:03:49.484 DEBUG [src.node.docker_mananger] Generated ports ['8725', '8726', '8727', '8728', '8729']
2025-02-13 04:03:49.484 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 04:03:49.484 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 04:03:49.484 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 04:03:49.485 DEBUG [src.node.docker_mananger] docker run -i -t -p 8725:8725 -p 8726:8726 -p 8727:8727 -p 8728:8728 -p 8729:8729 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8727 --rest-port=8725 --tcp-port=8726 --discv5-udp-port=8728 --rest-address=0.0.0.0 --nat=extip:172.18.37.33 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=afdeadfdb4ab0fbefa3ee7efea05709dccdb81ecf1a859b6ddaaee60ce11ae8d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8729 --metrics-logging=true --lightpush=false --relay=true
2025-02-13 04:03:49.718 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.37.33 waku f72d44b60340b944d19b947fc5769df977d06526b07d424747e3bab697a2bb6b
2025-02-13 04:03:49.770 DEBUG [src.node.docker_mananger] Container started with ID f72d44b60340. Setting up logs at ./log/docker/receiving_node2_2025-02-13_04-03-48__9d05e563-60bf-4191-a8b4-c1346a917837__wakuorg_nwaku:latest.log
2025-02-13 04:03:49.770 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 8725
2025-02-13 04:03:49.770 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 04:03:50.771 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:8725/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:03:50.773 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 04:03:50.773 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 04:03:50.774 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:8725/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:03:50.776 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.37.33/tcp/8726/p2p/16Uiu2HAmTC39YMmDE6d8DS37oFGsF6u6ccyVYjPHa2BQbfbxJSA8","/ip4/172.18.37.33/tcp/8727/ws/p2p/16Uiu2HAmTC39YMmDE6d8DS37oFGsF6u6ccyVYjPHa2BQbfbxJSA8"],"enrUri":"enr:-L24QK4xfL2U4e-FIW-VQElmpCj8VJpY5LGj7lQ3nAXFD_I4TbdVoHQ5xRLYIpvCOelA2Z0nxwtJzFKBugSA9k3Z0DsCgmlkgnY0gmlwhKwSJSGKbXVsdGlhZGRyc5YACASsEiUhBiIWAAoErBIlIQYiF90DgnJzhQADAQAAiXNlY3AyNTZrMaED1_fI_hjbEB6ZZH4fPj3rxNeh_S5zGBE2ih2umBYsTm2DdGNwgiIWg3VkcIIiGIV3YWt1MgE"}'
2025-02-13 04:03:50.776 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 04:03:50.776 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:8725/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.100.94/tcp/58341/p2p/16Uiu2HAkxADzyZb5e8fW3oUMz2vrSCWgsZi9DJhMVLhTZpsbPjLn"]'
2025-02-13 04:03:50.815 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:03:50.825 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 04:03:50.825 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-13_04-03-48__9d05e563-60bf-4191-a8b4-c1346a917837__wakuorg_nwaku:latest.log
2025-02-13 04:03:50.825 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 04:03:50.825 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 04:03:50.826 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 04:03:50.827 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.197.39
2025-02-13 04:03:50.827 DEBUG [src.node.docker_mananger] Generated ports ['19734', '19735', '19736', '19737', '19738']
2025-02-13 04:03:50.827 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 04:03:50.827 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 04:03:50.827 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 04:03:50.827 DEBUG [src.node.docker_mananger] docker run -i -t -p 19734:19734 -p 19735:19735 -p 19736:19736 -p 19737:19737 -p 19738:19738 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19736 --rest-port=19734 --tcp-port=19735 --discv5-udp-port=19737 --rest-address=0.0.0.0 --nat=extip:172.18.197.39 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3bab2a4c3c8eaa104c74f5fecb51b0e70fe60f855fb7ddaf7ceb10b8fb76aa98 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19738 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QONgf0OeQlsUTjxiTmQscyfieCWvcaIuuJbC1GucYiZjXF6AZOEwx2hP_4E9fZKcv1jSbhZKMvZdgW3sGWPayCsCgmlkgnY0gmlwhKwSZF6KbXVsdGlhZGRyc5YACASsEmReBuPlAAoErBJkXgbj5t0DgnJzhQADAQAAiXNlY3AyNTZrMaECKJ35MN9rsZINZypsln_5_2bHlf5KCsmhaTmgjxMa7PODdGNwguPlg3VkcILj54V3YWt1Mgk --lightpushnode=/ip4/172.18.100.94/tcp/58341/p2p/16Uiu2HAkxADzyZb5e8fW3oUMz2vrSCWgsZi9DJhMVLhTZpsbPjLn --lightpush=true --relay=false
2025-02-13 04:03:51.064 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.197.39 waku cb71078e394e67d7a3f5874fe975d7edcc77dea9bee833d4cbcc88590233a0d6
2025-02-13 04:03:51.119 DEBUG [src.node.docker_mananger] Container started with ID cb71078e394e. Setting up logs at ./log/docker/lightpush_node1_2025-02-13_04-03-48__9d05e563-60bf-4191-a8b4-c1346a917837__wakuorg_nwaku:latest.log
2025-02-13 04:03:51.120 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 19734
2025-02-13 04:03:51.120 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 04:03:52.120 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19734/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:03:52.123 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 04:03:52.123 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 04:03:52.123 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19734/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:03:52.125 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.197.39/tcp/19735/p2p/16Uiu2HAm3sCkYFiaUDXmwFSe63fPBdCBuS5tdB2zPie9TtmkuBMq","/ip4/172.18.197.39/tcp/19736/ws/p2p/16Uiu2HAm3sCkYFiaUDXmwFSe63fPBdCBuS5tdB2zPie9TtmkuBMq"],"enrUri":"enr:-L24QLMoJTAd_xif5KT9-x3oomzGgYO23ZhVLLLDljIeUX_TFHSfBm5wCT2yygA2MVyee-B3PkAoYIV3S1dKWGtLUHYCgmlkgnY0gmlwhKwSxSeKbXVsdGlhZGRyc5YACASsEsUnBk0XAAoErBLFJwZNGN0DgnJzhQADAQAAiXNlY3AyNTZrMaECfWfPHwe5qmHLClQGDZ2M_EEBhx-q-yGLmF-CH6CNnzCDdGNwgk0Xg3VkcIJNGYV3YWt1Mgg"}'
2025-02-13 04:03:52.126 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 04:03:52.126 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19734/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.100.94/tcp/58341/p2p/16Uiu2HAkxADzyZb5e8fW3oUMz2vrSCWgsZi9DJhMVLhTZpsbPjLn"]'
2025-02-13 04:03:52.162 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:03:52.163 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19734/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.37.33/tcp/8726/p2p/16Uiu2HAmTC39YMmDE6d8DS37oFGsF6u6ccyVYjPHa2BQbfbxJSA8"]'
2025-02-13 04:03:52.187 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:03:52.188 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58340/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-13 04:03:52.196 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:03:52.197 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:8725/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-13 04:03:52.203 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:03:52.207 DEBUG [tests.light_push.test_publish] Running test with payload length of 143360 bytes
2025-02-13 04:03:52.209 DEBUG [src.steps.light_push] Lightpushing message
2025-02-13 04:03:52.210 INFO [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2025-02-13 04:03:52.364 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:03:52.364 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-13 04:03:52.465 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-13 04:03:52.465 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58340/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:03:52.470 INFO [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2025-02-13 04:03:52.472 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-13 04:03:52.472 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:8725/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:03:52.477 INFO [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2025-02-13 04:03:52.481 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-13 04:03:52.482 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-13 04:03:52.482 DEBUG [src.node.waku_node] Stopping container with id a6389d32b946
2025-02-13 04:03:53.957 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 04:03:53.958 DEBUG [src.node.waku_node] Stopping container with id f72d44b60340
2025-02-13 04:03:54.770 ERROR [src.node.docker_mananger] Max retries reached for container a6389d32b946. Exiting log stream.
2025-02-13 04:03:55.458 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 04:03:55.459 DEBUG [src.node.waku_node] Stopping container with id cb71078e394e
2025-02-13 04:03:56.271 ERROR [src.node.docker_mananger] Max retries reached for container f72d44b60340. Exiting log stream.
2025-02-13 04:03:56.939 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 04:03:56.941 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-13 04:03:56.948 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-13 04:03:56.957 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-13 04:03:56.990 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
