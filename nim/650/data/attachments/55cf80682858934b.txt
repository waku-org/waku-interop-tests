2025-02-13 04:06:56.181 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-13 04:06:56.182 DEBUG [tests.conftest] Running test: test_publish_on_multiple_content_topics_and_only_after_fetch_them[content_topic_list1] with id: 2025-02-13_04-06-56__3ddf9f8a-4795-451a-896a-3d9410d033e1
2025-02-13 04:06:56.182 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-13 04:06:56.182 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-13 04:06:56.182 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2025-02-13 04:06:56.189 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 04:06:56.189 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-13_04-06-56__3ddf9f8a-4795-451a-896a-3d9410d033e1__wakuorg_nwaku:latest.log
2025-02-13 04:06:56.189 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 04:06:56.190 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 04:06:56.191 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 04:06:56.191 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.205.97
2025-02-13 04:06:56.191 DEBUG [src.node.docker_mananger] Generated ports ['2267', '2268', '2269', '2270', '2271']
2025-02-13 04:06:56.191 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 04:06:56.191 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 04:06:56.192 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 04:06:56.192 DEBUG [src.node.docker_mananger] docker run -i -t -p 2267:2267 -p 2268:2268 -p 2269:2269 -p 2270:2270 -p 2271:2271 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2269 --rest-port=2267 --tcp-port=2268 --discv5-udp-port=2270 --rest-address=0.0.0.0 --nat=extip:172.18.205.97 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=2efb964abafacf8ecd5faf24b9126d793bed5df0ceb195b9b1ce33c18cce2c15 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2271 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto
2025-02-13 04:06:56.426 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.205.97 waku 77814665e6be3dca57eef66ff26115d6500ba2d601059ffff0666b651d65b67e
2025-02-13 04:06:56.477 DEBUG [src.node.docker_mananger] Container started with ID 77814665e6be. Setting up logs at ./log/docker/node1_2025-02-13_04-06-56__3ddf9f8a-4795-451a-896a-3d9410d033e1__wakuorg_nwaku:latest.log
2025-02-13 04:06:56.478 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 2267
2025-02-13 04:06:56.478 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 04:06:56.973 ERROR [src.node.docker_mananger] Max retries reached for container b46aa2b011b5. Exiting log stream.
2025-02-13 04:06:57.478 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2267/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:06:57.481 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 04:06:57.481 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 04:06:57.481 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2267/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:06:57.484 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.205.97/tcp/2268/p2p/16Uiu2HAmMbR7Cj7Lzbeoah9FwPo1t7uqnVoma2qavYcMfLdq3Bt3","/ip4/172.18.205.97/tcp/2269/ws/p2p/16Uiu2HAmMbR7Cj7Lzbeoah9FwPo1t7uqnVoma2qavYcMfLdq3Bt3"],"enrUri":"enr:-L24QLp3hASEJOnDIf7tLpI6-dz9x4ZPA4_x0vQuk3lErhAYYNE766ZZcg73PhBsHu_PaGKQDAbbNIc1B6fZlt1sResCgmlkgnY0gmlwhKwSzWGKbXVsdGlhZGRyc5YACASsEs1hBgjcAAoErBLNYQYI3d0DgnJzhQACAQAAiXNlY3AyNTZrMaEDhM7aISxeSQpRqilEnimqzuenx96_pS_kI9T0CSoZ3IiDdGNwggjcg3VkcIII3oV3YWt1MgU"}'
2025-02-13 04:06:57.484 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 04:06:57.490 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 04:06:57.490 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-13_04-06-56__3ddf9f8a-4795-451a-896a-3d9410d033e1__wakuorg_nwaku:latest.log
2025-02-13 04:06:57.490 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 04:06:57.491 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 04:06:57.492 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 04:06:57.492 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.54.142
2025-02-13 04:06:57.492 DEBUG [src.node.docker_mananger] Generated ports ['40258', '40259', '40260', '40261', '40262']
2025-02-13 04:06:57.492 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 04:06:57.492 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 04:06:57.493 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 04:06:57.493 DEBUG [src.node.docker_mananger] docker run -i -t -p 40258:40258 -p 40259:40259 -p 40260:40260 -p 40261:40261 -p 40262:40262 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40260 --rest-port=40258 --tcp-port=40259 --discv5-udp-port=40261 --rest-address=0.0.0.0 --nat=extip:172.18.54.142 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=eead12ebdeffe9627cd4f27bf2dd39de2b48ac3c7a3dc95cf905f87b7d46ca34 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40262 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QLp3hASEJOnDIf7tLpI6-dz9x4ZPA4_x0vQuk3lErhAYYNE766ZZcg73PhBsHu_PaGKQDAbbNIc1B6fZlt1sResCgmlkgnY0gmlwhKwSzWGKbXVsdGlhZGRyc5YACASsEs1hBgjcAAoErBLNYQYI3d0DgnJzhQACAQAAiXNlY3AyNTZrMaEDhM7aISxeSQpRqilEnimqzuenx96_pS_kI9T0CSoZ3IiDdGNwggjcg3VkcIII3oV3YWt1MgU --content-topic=/myapp/1/latest/proto
2025-02-13 04:06:57.717 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.54.142 waku 26277ac9bcaf9ba90600d690a480c2d2e3fb7295c81bc152b4f2b9315ca9df33
2025-02-13 04:06:57.770 DEBUG [src.node.docker_mananger] Container started with ID 26277ac9bcaf. Setting up logs at ./log/docker/node2_2025-02-13_04-06-56__3ddf9f8a-4795-451a-896a-3d9410d033e1__wakuorg_nwaku:latest.log
2025-02-13 04:06:57.771 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 40258
2025-02-13 04:06:57.771 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 04:06:58.772 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40258/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:06:58.779 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 04:06:58.781 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 04:06:58.782 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40258/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:06:58.786 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.54.142/tcp/40259/p2p/16Uiu2HAm1z5S5TAAsUC4gcmagzpxuR4R39A5DiCBXbdsrkh5SRui","/ip4/172.18.54.142/tcp/40260/ws/p2p/16Uiu2HAm1z5S5TAAsUC4gcmagzpxuR4R39A5DiCBXbdsrkh5SRui"],"enrUri":"enr:-L24QAYhlK9AQyEtMImNdkxeKIXw22xOw9dgQ5KCv-b-0zgyaWkmfwu6wFWSh9q4qpZlFLzSEzD570pFMwVRRYXb170CgmlkgnY0gmlwhKwSNo6KbXVsdGlhZGRyc5YACASsEjaOBp1DAAoErBI2jgadRN0DgnJzhQACAQAAiXNlY3AyNTZrMaECYXM53X0k3B_12oG4Dkj_Bd5lpND5W-c6-L3V-IsDq7mDdGNwgp1Dg3VkcIKdRYV3YWt1MgE"}'
2025-02-13 04:06:58.786 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 04:06:58.787 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40258/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.205.97/tcp/2268/p2p/16Uiu2HAmMbR7Cj7Lzbeoah9FwPo1t7uqnVoma2qavYcMfLdq3Bt3"]'
2025-02-13 04:06:58.789 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:06:58.790 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2267/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto", "/waku/2/content/test.js", "/app/22/sometopic/someencoding", "/toychat/2/huilong/proto", "/statusim/1/community/cbor", "/app/27/sometopic/someencoding", "/app/29/sometopic/someencoding", "/app/20/sometopic/someencoding"]'
2025-02-13 04:06:58.800 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:06:58.801 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40258/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto", "/waku/2/content/test.js", "/app/22/sometopic/someencoding", "/toychat/2/huilong/proto", "/statusim/1/community/cbor", "/app/27/sometopic/someencoding", "/app/29/sometopic/someencoding", "/app/20/sometopic/someencoding"]'
2025-02-13 04:06:58.821 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:06:58.823 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2267/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L215YXBwLzEvbGF0ZXN0L3Byb3Rv", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-13 04:06:58.832 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:06:58.834 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2267/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L3dha3UvMi9jb250ZW50L3Rlc3QuanM=", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2025-02-13 04:06:58.840 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:06:58.841 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2267/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L2FwcC8yMi9zb21ldG9waWMvc29tZWVuY29kaW5n", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-13 04:06:58.845 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:06:58.846 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2267/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L3RveWNoYXQvMi9odWlsb25nL3Byb3Rv", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2025-02-13 04:06:58.852 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:06:58.852 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2267/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L3N0YXR1c2ltLzEvY29tbXVuaXR5L2Nib3I=", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2025-02-13 04:06:58.857 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:06:58.858 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2267/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L2FwcC8yNy9zb21ldG9waWMvc29tZWVuY29kaW5n", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-13 04:06:58.863 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:06:58.864 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2267/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L2FwcC8yOS9zb21ldG9waWMvc29tZWVuY29kaW5n", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-13 04:06:58.869 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:06:58.870 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2267/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L2FwcC8yMC9zb21ldG9waWMvc29tZWVuY29kaW5n", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-13 04:06:58.875 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:06:58.875 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-13 04:06:58.976 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40258/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:06:58.978 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L215YXBwLzEvbGF0ZXN0L3Byb3Rv","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739419618823773184,"ephemeral":false}]'
2025-02-13 04:06:58.978 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40258/relay/v1/auto/messages/%2Fwaku%2F2%2Fcontent%2Ftest.js" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:06:58.980 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3dha3UvMi9jb250ZW50L3Rlc3QuanM=","contentTopic":"/waku/2/content/test.js","version":0,"timestamp":1739419618834032896,"ephemeral":false}]'
2025-02-13 04:06:58.981 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40258/relay/v1/auto/messages/%2Fapp%2F22%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:06:58.983 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L2FwcC8yMi9zb21ldG9waWMvc29tZWVuY29kaW5n","contentTopic":"/app/22/sometopic/someencoding","version":0,"timestamp":1739419618841198848,"ephemeral":false}]'
2025-02-13 04:06:58.983 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40258/relay/v1/auto/messages/%2Ftoychat%2F2%2Fhuilong%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:06:58.986 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3RveWNoYXQvMi9odWlsb25nL3Byb3Rv","contentTopic":"/toychat/2/huilong/proto","version":0,"timestamp":1739419618846639104,"ephemeral":false}]'
2025-02-13 04:06:58.986 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40258/relay/v1/auto/messages/%2Fstatusim%2F1%2Fcommunity%2Fcbor" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:06:58.988 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3N0YXR1c2ltLzEvY29tbXVuaXR5L2Nib3I=","contentTopic":"/statusim/1/community/cbor","version":0,"timestamp":1739419618852629504,"ephemeral":false}]'
2025-02-13 04:06:58.989 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40258/relay/v1/auto/messages/%2Fapp%2F27%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:06:58.991 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L2FwcC8yNy9zb21ldG9waWMvc29tZWVuY29kaW5n","contentTopic":"/app/27/sometopic/someencoding","version":0,"timestamp":1739419618858805760,"ephemeral":false}]'
2025-02-13 04:06:58.991 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40258/relay/v1/auto/messages/%2Fapp%2F29%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:06:58.994 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L2FwcC8yOS9zb21ldG9waWMvc29tZWVuY29kaW5n","contentTopic":"/app/29/sometopic/someencoding","version":0,"timestamp":1739419618863926272,"ephemeral":false}]'
2025-02-13 04:06:58.994 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40258/relay/v1/auto/messages/%2Fapp%2F20%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:06:58.996 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L2FwcC8yMC9zb21ldG9waWMvc29tZWVuY29kaW5n","contentTopic":"/app/20/sometopic/someencoding","version":0,"timestamp":1739419618870352896,"ephemeral":false}]'
2025-02-13 04:06:58.998 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-13 04:06:58.999 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-13 04:06:58.999 DEBUG [src.node.waku_node] Stopping container with id 77814665e6be
2025-02-13 04:07:00.072 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 04:07:00.072 DEBUG [src.node.waku_node] Stopping container with id 26277ac9bcaf
2025-02-13 04:07:00.885 ERROR [src.node.docker_mananger] Max retries reached for container 77814665e6be. Exiting log stream.
2025-02-13 04:07:01.546 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 04:07:01.548 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-13 04:07:01.558 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-13 04:07:01.567 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
