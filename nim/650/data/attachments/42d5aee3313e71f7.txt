[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_pubsub_topics with id: 2025-02-13_04-04-01__160a32c4-8332-49ac-a121-14a337f8a59c
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-13_04-04-01__160a32c4-8332-49ac-a121-14a337f8a59c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.215.50
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['60532', '60533', '60534', '60535', '60536']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 60532:60532 -p 60533:60533 -p 60534:60534 -p 60535:60535 -p 60536:60536 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=60534 --rest-port=60532 --tcp-port=60533 --discv5-udp-port=60535 --rest-address=0.0.0.0 --nat=extip:172.18.215.50 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=febedcae43caacbe02cb4ef3def1d3f4ca313fcd39cb58a2dccf830a9efa2fd8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=60536 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.215.50 waku a365efb5b657e47af306f615b19c3c6bcd7ce65cb55f152ae5416b47cf61bc82
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID a365efb5b657. Setting up logs at ./log/docker/receiving_node1_2025-02-13_04-04-01__160a32c4-8332-49ac-a121-14a337f8a59c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 60532
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container b6e348edebdc. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60532/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60532/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.215.50/tcp/60533/p2p/16Uiu2HAmBGvxNVFzopJC7vULBpXivcHuYhazRMWtbVgaGhC9kaMP","/ip4/172.18.215.50/tcp/60534/ws/p2p/16Uiu2HAmBGvxNVFzopJC7vULBpXivcHuYhazRMWtbVgaGhC9kaMP"],"enrUri":"enr:-L24QISbfnE8YlDUq8MQJPYqhGUDkWH1Vyi5szgLzRFtLPw2T0xDqpEYmFfbtozEoYuuVWLIkMMpFmm8mbyzZScSLdgCgmlkgnY0gmlwhKwS1zKKbXVsdGlhZGRyc5YACASsEtcyBux1AAoErBLXMgbsdt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC632yRSjTuImhtziZg8DSCHfvz6k-CfqQGpJnEs8sT9qDdGNwgux1g3VkcILsd4V3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-13_04-04-01__160a32c4-8332-49ac-a121-14a337f8a59c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.117.84
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['18043', '18044', '18045', '18046', '18047']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 18043:18043 -p 18044:18044 -p 18045:18045 -p 18046:18046 -p 18047:18047 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18045 --rest-port=18043 --tcp-port=18044 --discv5-udp-port=18046 --rest-address=0.0.0.0 --nat=extip:172.18.117.84 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2e79ae5edae8978d977d2232580e6f057de2a0106fc8f2b0d19fafa2fbcd7cde --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18047 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.117.84 waku e6d56a83d12aa71d11fbc7b539ab9f3de7a4249238f6bdd5e6533d3fe398d5e3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID e6d56a83d12a. Setting up logs at ./log/docker/receiving_node2_2025-02-13_04-04-01__160a32c4-8332-49ac-a121-14a337f8a59c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 18043
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18043/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18043/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.117.84/tcp/18044/p2p/16Uiu2HAkzcc6nhucD19PSteL9VCyUSqWonzDwqKJfvsFrixn2REB","/ip4/172.18.117.84/tcp/18045/ws/p2p/16Uiu2HAkzcc6nhucD19PSteL9VCyUSqWonzDwqKJfvsFrixn2REB"],"enrUri":"enr:-L24QHQ7mByqlg5oVYGwRSc-LxkMMOvo8BAz7IOyo531uIDhOFp07mDBHRhngZ3tR8vk4wIXQ0aOYXadEKbYgb3Jx0cCgmlkgnY0gmlwhKwSdVSKbXVsdGlhZGRyc5YACASsEnVUBkZ8AAoErBJ1VAZGfd0DgnJzhQADAQAAiXNlY3AyNTZrMaECTRdv5SSUgmhXXMGP-dhh_w7-u1azfZ2zCk2rO7qvwnSDdGNwgkZ8g3VkcIJGfoV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18043/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.215.50/tcp/60533/p2p/16Uiu2HAmBGvxNVFzopJC7vULBpXivcHuYhazRMWtbVgaGhC9kaMP"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-13_04-04-01__160a32c4-8332-49ac-a121-14a337f8a59c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.239.197
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['58232', '58233', '58234', '58235', '58236']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 58232:58232 -p 58233:58233 -p 58234:58234 -p 58235:58235 -p 58236:58236 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=58234 --rest-port=58232 --tcp-port=58233 --discv5-udp-port=58235 --rest-address=0.0.0.0 --nat=extip:172.18.239.197 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ba4efbf0dd837203a8ed8ccf08566fe3fb1d64e3ed9ffcb6957fdf8fc588c2c4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=58236 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QISbfnE8YlDUq8MQJPYqhGUDkWH1Vyi5szgLzRFtLPw2T0xDqpEYmFfbtozEoYuuVWLIkMMpFmm8mbyzZScSLdgCgmlkgnY0gmlwhKwS1zKKbXVsdGlhZGRyc5YACASsEtcyBux1AAoErBLXMgbsdt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC632yRSjTuImhtziZg8DSCHfvz6k-CfqQGpJnEs8sT9qDdGNwgux1g3VkcILsd4V3YWt1Mgk --lightpushnode=/ip4/172.18.215.50/tcp/60533/p2p/16Uiu2HAmBGvxNVFzopJC7vULBpXivcHuYhazRMWtbVgaGhC9kaMP --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.239.197 waku d0820b2f9700e4bdf3c52e806a0d22d3b9ad40bdad3b82f0290254b373284770
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID d0820b2f9700. Setting up logs at ./log/docker/lightpush_node1_2025-02-13_04-04-01__160a32c4-8332-49ac-a121-14a337f8a59c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 58232
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58232/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58232/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.239.197/tcp/58233/p2p/16Uiu2HAmTWYsyrgfCseuV2Hf5FLjjqD4H2Ms487kAGBG1otnR1aE","/ip4/172.18.239.197/tcp/58234/ws/p2p/16Uiu2HAmTWYsyrgfCseuV2Hf5FLjjqD4H2Ms487kAGBG1otnR1aE"],"enrUri":"enr:-L24QOWGnJ76ZpTmiDWvCo5MGtFuJNlp8hBbXGXK-wKqDl4DVI0h6wSEzRmWlLFOmbKtkIeLW4PaqQp4rd3gMgfM0N8CgmlkgnY0gmlwhKwS78WKbXVsdGlhZGRyc5YACASsEu_FBuN5AAoErBLvxQbjet0DgnJzhQADAQAAiXNlY3AyNTZrMaED3LXbgelmB9ZYoXR572i7xtGJN3VdwEc1lWNP0rsCXHeDdGNwguN5g3VkcILje4V3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:58232/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.215.50/tcp/60533/p2p/16Uiu2HAmBGvxNVFzopJC7vULBpXivcHuYhazRMWtbVgaGhC9kaMP"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:58232/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.117.84/tcp/18044/p2p/16Uiu2HAkzcc6nhucD19PSteL9VCyUSqWonzDwqKJfvsFrixn2REB"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60532/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18043/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A dictionary', 'value': {'key': 'YWFh'}}
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:58232/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": {"key": "YWFh"}, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739419445966870528}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:58232/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'An integer', 'value': 1234567890}
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:58232/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": 1234567890, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739419445970929664}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:58232/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A list', 'value': ['YWFh']}
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:58232/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": ["YWFh"], "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739419445974392576}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:58232/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A bool', 'value': True}
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:58232/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": true, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739419445977745664}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:58232/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id a365efb5b657
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id e6d56a83d12a
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container a365efb5b657. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id d0820b2f9700
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container e6d56a83d12a. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.