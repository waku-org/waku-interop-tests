2025-02-13 04:05:13.249 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-13 04:05:13.249 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_with_invalid_request_id with id: 2025-02-13_04-05-13__dc8be6cf-c984-46e3-a4fa-ce3d83f87e35
2025-02-13 04:05:13.250 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-13 04:05:13.250 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-13 04:05:13.250 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-13 04:05:13.257 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 04:05:13.257 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-13_04-05-13__dc8be6cf-c984-46e3-a4fa-ce3d83f87e35__wakuorg_nwaku:latest.log
2025-02-13 04:05:13.257 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 04:05:13.257 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 04:05:13.259 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 04:05:13.259 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.136.54
2025-02-13 04:05:13.259 DEBUG [src.node.docker_mananger] Generated ports ['61059', '61060', '61061', '61062', '61063']
2025-02-13 04:05:13.260 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 04:05:13.260 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 04:05:13.260 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 04:05:13.260 DEBUG [src.node.docker_mananger] docker run -i -t -p 61059:61059 -p 61060:61060 -p 61061:61061 -p 61062:61062 -p 61063:61063 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61061 --rest-port=61059 --tcp-port=61060 --discv5-udp-port=61062 --rest-address=0.0.0.0 --nat=extip:172.18.136.54 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b4cf9bee8b7c82abde88e1aaa69f88c4ae69a8804dddfccaec38dfd97ef2e261 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61063 --metrics-logging=true --relay=true --filter=true
2025-02-13 04:05:13.500 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.136.54 waku 78f4bb9da587f67afe6ec500dad5ef16b031b7b909ac3a2c329ca0cb4c4b8841
2025-02-13 04:05:13.546 DEBUG [src.node.docker_mananger] Container started with ID 78f4bb9da587. Setting up logs at ./log/docker/node1_2025-02-13_04-05-13__dc8be6cf-c984-46e3-a4fa-ce3d83f87e35__wakuorg_nwaku:latest.log
2025-02-13 04:05:13.547 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 61059
2025-02-13 04:05:13.547 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 04:05:14.047 ERROR [src.node.docker_mananger] Max retries reached for container 494cfd5c9b71. Exiting log stream.
2025-02-13 04:05:14.548 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61059/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:05:14.551 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 04:05:14.552 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 04:05:14.552 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61059/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:05:14.554 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.136.54/tcp/61060/p2p/16Uiu2HAmSTZo4KpoGaj2BrfqFFZKx1BoQN6LGXYw79L1BE3B7nom","/ip4/172.18.136.54/tcp/61061/ws/p2p/16Uiu2HAmSTZo4KpoGaj2BrfqFFZKx1BoQN6LGXYw79L1BE3B7nom"],"enrUri":"enr:-L24QKsfcin6IU0ztADwqURKDFJI8k3onllhpyl6Rg5rJsVHZNjYm1P3PESjoKI83hPWN84IkF7YPwb-afgT4FnnHHwCgmlkgnY0gmlwhKwSiDaKbXVsdGlhZGRyc5YACASsEog2Bu6EAAoErBKINgbuhd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDzRZ2e-u6AaNC5o7eL7InO4M-pnn0UiXsBfbkq_Q23PyDdGNwgu6Eg3VkcILuhoV3YWt1MgU"}'
2025-02-13 04:05:14.554 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 04:05:14.555 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-13 04:05:14.562 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 04:05:14.562 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-13_04-05-13__dc8be6cf-c984-46e3-a4fa-ce3d83f87e35__wakuorg_nwaku:latest.log
2025-02-13 04:05:14.562 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 04:05:14.562 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 04:05:14.564 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 04:05:14.564 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.6.225
2025-02-13 04:05:14.564 DEBUG [src.node.docker_mananger] Generated ports ['9217', '9218', '9219', '9220', '9221']
2025-02-13 04:05:14.564 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 04:05:14.564 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 04:05:14.564 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 04:05:14.565 DEBUG [src.node.docker_mananger] docker run -i -t -p 9217:9217 -p 9218:9218 -p 9219:9219 -p 9220:9220 -p 9221:9221 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=9219 --rest-port=9217 --tcp-port=9218 --discv5-udp-port=9220 --rest-address=0.0.0.0 --nat=extip:172.18.6.225 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cf22f1b9c6ea7c625c5ebe0ce6feca019ea6b47fb16dea22ade7ccc418c47afa --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=9221 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QKsfcin6IU0ztADwqURKDFJI8k3onllhpyl6Rg5rJsVHZNjYm1P3PESjoKI83hPWN84IkF7YPwb-afgT4FnnHHwCgmlkgnY0gmlwhKwSiDaKbXVsdGlhZGRyc5YACASsEog2Bu6EAAoErBKINgbuhd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDzRZ2e-u6AaNC5o7eL7InO4M-pnn0UiXsBfbkq_Q23PyDdGNwgu6Eg3VkcILuhoV3YWt1MgU --filternode=/ip4/172.18.136.54/tcp/61060/p2p/16Uiu2HAmSTZo4KpoGaj2BrfqFFZKx1BoQN6LGXYw79L1BE3B7nom
2025-02-13 04:05:14.810 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.6.225 waku cbb8a931c2233c3cff6387dd66eb8cbe8e5d38dd04070fd6f6590271ceec40ba
2025-02-13 04:05:14.860 DEBUG [src.node.docker_mananger] Container started with ID cbb8a931c223. Setting up logs at ./log/docker/node2_2025-02-13_04-05-13__dc8be6cf-c984-46e3-a4fa-ce3d83f87e35__wakuorg_nwaku:latest.log
2025-02-13 04:05:14.861 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 9217
2025-02-13 04:05:14.861 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 04:05:15.862 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9217/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:05:15.865 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 04:05:15.866 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 04:05:15.866 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9217/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:05:15.868 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.6.225/tcp/9218/p2p/16Uiu2HAm9M5sN27fanwSevvgWVgyQkUURzxrkK8rb1SVqFA4J2QY","/ip4/172.18.6.225/tcp/9219/ws/p2p/16Uiu2HAm9M5sN27fanwSevvgWVgyQkUURzxrkK8rb1SVqFA4J2QY"],"enrUri":"enr:-L24QLRYBz2n068dYRxS41sEXa7nnIJ4c14b3PIf4IrzANVsNs10eS4UBPTwVx9hRViI_dMMyHNYCa43J8BFTSOV92ACgmlkgnY0gmlwhKwSBuGKbXVsdGlhZGRyc5YACASsEgbhBiQCAAoErBIG4QYkA90DgnJzhQADAQAAiXNlY3AyNTZrMaECzta5dbD9oojJbDwOEI-_vjUdBZ6NDXVSBndDBKtc7nGDdGNwgiQCg3VkcIIkBIV3YWt1MgA"}'
2025-02-13 04:05:15.868 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 04:05:15.869 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9217/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.136.54/tcp/61060/p2p/16Uiu2HAmSTZo4KpoGaj2BrfqFFZKx1BoQN6LGXYw79L1BE3B7nom"]'
2025-02-13 04:05:15.910 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:05:15.911 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-13 04:05:15.912 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61059/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-13 04:05:15.931 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:05:15.932 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9217/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "ef51bbc9-c07d-4a03-962d-3e78ec7ee241", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-13 04:05:15.944 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"ef51bbc9-c07d-4a03-962d-3e78ec7ee241","statusDesc":"OK"}'
2025-02-13 04:05:15.945 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:9217/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": 1, "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-13 04:05:15.948 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:9217/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
2025-02-13 04:05:15.950 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-13 04:05:15.951 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-13 04:05:15.951 DEBUG [src.node.waku_node] Stopping container with id 78f4bb9da587
2025-02-13 04:05:17.079 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 04:05:17.079 DEBUG [src.node.waku_node] Stopping container with id cbb8a931c223
2025-02-13 04:05:17.892 ERROR [src.node.docker_mananger] Max retries reached for container 78f4bb9da587. Exiting log stream.
2025-02-13 04:05:18.617 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 04:05:18.619 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-13 04:05:18.623 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-13 04:05:18.627 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
