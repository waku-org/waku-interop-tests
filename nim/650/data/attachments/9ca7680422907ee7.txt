2025-02-13 04:05:07.449 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-13 04:05:07.450 DEBUG [tests.conftest] Running test: test_filter_ping_on_unsubscribed_peer with id: 2025-02-13_04-05-07__d38ab597-e4bf-46b1-9fe9-9c1290f966ff
2025-02-13 04:05:07.450 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-13 04:05:07.450 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-13 04:05:07.450 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-13 04:05:07.456 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 04:05:07.456 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-13_04-05-07__d38ab597-e4bf-46b1-9fe9-9c1290f966ff__wakuorg_nwaku:latest.log
2025-02-13 04:05:07.457 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 04:05:07.457 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 04:05:07.458 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 04:05:07.458 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.229.191
2025-02-13 04:05:07.458 DEBUG [src.node.docker_mananger] Generated ports ['33526', '33527', '33528', '33529', '33530']
2025-02-13 04:05:07.458 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 04:05:07.459 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 04:05:07.459 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 04:05:07.459 DEBUG [src.node.docker_mananger] docker run -i -t -p 33526:33526 -p 33527:33527 -p 33528:33528 -p 33529:33529 -p 33530:33530 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=33528 --rest-port=33526 --tcp-port=33527 --discv5-udp-port=33529 --rest-address=0.0.0.0 --nat=extip:172.18.229.191 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=60ab0cc5d43becf1c3e224b50d9df8bd3247233a1ba7a7fec2fab43edf558caa --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=33530 --metrics-logging=true --relay=true --filter=true
2025-02-13 04:05:07.684 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.229.191 waku 0e529cfea6ab9546b7b4028c3a006f796edd512320e81aba78c6d79a6c0dc3a1
2025-02-13 04:05:07.733 DEBUG [src.node.docker_mananger] Container started with ID 0e529cfea6ab. Setting up logs at ./log/docker/node1_2025-02-13_04-05-07__d38ab597-e4bf-46b1-9fe9-9c1290f966ff__wakuorg_nwaku:latest.log
2025-02-13 04:05:07.733 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 33526
2025-02-13 04:05:07.733 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 04:05:08.255 ERROR [src.node.docker_mananger] Max retries reached for container 76eb89205ddf. Exiting log stream.
2025-02-13 04:05:08.734 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33526/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:05:08.737 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 04:05:08.737 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 04:05:08.737 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33526/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:05:08.739 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.229.191/tcp/33527/p2p/16Uiu2HAmUcHq2R4SGjNUNGTWdNtgeaFsG9rsrz2XyMvnhR2jW5f5","/ip4/172.18.229.191/tcp/33528/ws/p2p/16Uiu2HAmUcHq2R4SGjNUNGTWdNtgeaFsG9rsrz2XyMvnhR2jW5f5"],"enrUri":"enr:-L24QPDs5XB2_a7Uv5yuCAK1fc2yaVk6FL03iOR_mw9ArnYQJ_WdN3jyQy34DLm_zfFE1_NYWTbJNHbkr5_THgIqtuwCgmlkgnY0gmlwhKwS5b-KbXVsdGlhZGRyc5YACASsEuW_BoL3AAoErBLlvwaC-N0DgnJzhQADAQAAiXNlY3AyNTZrMaED7QoC1F3_jPOrVXCbbvVYtREmLWlntWj__xKi3UFNxviDdGNwgoL3g3VkcIKC-YV3YWt1MgU"}'
2025-02-13 04:05:08.740 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 04:05:08.740 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-13 04:05:08.746 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 04:05:08.746 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-13_04-05-07__d38ab597-e4bf-46b1-9fe9-9c1290f966ff__wakuorg_nwaku:latest.log
2025-02-13 04:05:08.746 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 04:05:08.746 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 04:05:08.748 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 04:05:08.748 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.232.24
2025-02-13 04:05:08.748 DEBUG [src.node.docker_mananger] Generated ports ['56845', '56846', '56847', '56848', '56849']
2025-02-13 04:05:08.748 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 04:05:08.748 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 04:05:08.748 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 04:05:08.749 DEBUG [src.node.docker_mananger] docker run -i -t -p 56845:56845 -p 56846:56846 -p 56847:56847 -p 56848:56848 -p 56849:56849 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56847 --rest-port=56845 --tcp-port=56846 --discv5-udp-port=56848 --rest-address=0.0.0.0 --nat=extip:172.18.232.24 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4d8d64ded2cd74d0e4afdbcdc1ee4c8dcaaf5f8d67cdf6197eee24fdecab53be --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56849 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QPDs5XB2_a7Uv5yuCAK1fc2yaVk6FL03iOR_mw9ArnYQJ_WdN3jyQy34DLm_zfFE1_NYWTbJNHbkr5_THgIqtuwCgmlkgnY0gmlwhKwS5b-KbXVsdGlhZGRyc5YACASsEuW_BoL3AAoErBLlvwaC-N0DgnJzhQADAQAAiXNlY3AyNTZrMaED7QoC1F3_jPOrVXCbbvVYtREmLWlntWj__xKi3UFNxviDdGNwgoL3g3VkcIKC-YV3YWt1MgU --filternode=/ip4/172.18.229.191/tcp/33527/p2p/16Uiu2HAmUcHq2R4SGjNUNGTWdNtgeaFsG9rsrz2XyMvnhR2jW5f5
2025-02-13 04:05:08.974 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.232.24 waku c31ef217e8a6200a209c87d06fd3f1453f5853f7ba0a7d54e8663f14d9571baa
2025-02-13 04:05:09.025 DEBUG [src.node.docker_mananger] Container started with ID c31ef217e8a6. Setting up logs at ./log/docker/node2_2025-02-13_04-05-07__d38ab597-e4bf-46b1-9fe9-9c1290f966ff__wakuorg_nwaku:latest.log
2025-02-13 04:05:09.026 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 56845
2025-02-13 04:05:09.026 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 04:05:10.026 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56845/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:05:10.029 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 04:05:10.030 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 04:05:10.030 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56845/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:05:10.032 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.232.24/tcp/56846/p2p/16Uiu2HAm3GZpfcKdubzCzqTfpn9F8fbx9vfM7n7bdrbbLMUbHy89","/ip4/172.18.232.24/tcp/56847/ws/p2p/16Uiu2HAm3GZpfcKdubzCzqTfpn9F8fbx9vfM7n7bdrbbLMUbHy89"],"enrUri":"enr:-L24QFddBMen3GVMWdDqEJQ3sZAN-0tXOTH6yLxz29TWWRILRpaorEN68oIeVcq7VGmC6dg-7oyfE4lZZ4XKPOszWF4CgmlkgnY0gmlwhKwS6BiKbXVsdGlhZGRyc5YACASsEugYBt4OAAoErBLoGAbeD90DgnJzhQADAQAAiXNlY3AyNTZrMaECdIhOVIPw2UtX9pIe943_hvodGlaWQbA6PSxJzU9zhn6DdGNwgt4Og3VkcILeEIV3YWt1MgA"}'
2025-02-13 04:05:10.032 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 04:05:10.032 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56845/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.229.191/tcp/33527/p2p/16Uiu2HAmUcHq2R4SGjNUNGTWdNtgeaFsG9rsrz2XyMvnhR2jW5f5"]'
2025-02-13 04:05:10.069 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:05:10.073 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-13 04:05:10.074 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33526/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-13 04:05:10.090 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:05:10.092 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56845/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "d76f1544-aaf7-4abe-89ed-b393c42627d2", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-13 04:05:10.103 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"d76f1544-aaf7-4abe-89ed-b393c42627d2","statusDesc":"OK"}'
2025-02-13 04:05:10.104 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56845/filter/v2/subscriptions/b0d3d9f4-6ea8-4015-8c25-763125d4d2d0" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:05:10.110 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"b0d3d9f4-6ea8-4015-8c25-763125d4d2d0","statusDesc":"OK"}'
2025-02-13 04:05:10.111 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:56845/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "12345", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-13 04:05:10.118 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"12345","statusDesc":"OK"}'
2025-02-13 04:05:10.118 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56845/filter/v2/subscriptions/3df9d015-f1c5-4b56-8bb2-3b0bfff0cf17" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:05:10.125 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:56845/filter/v2/subscriptions/3df9d015-f1c5-4b56-8bb2-3b0bfff0cf17. Response content: b'{"requestId":"3df9d015-f1c5-4b56-8bb2-3b0bfff0cf17","statusDesc":"NOT_FOUND: peer has no subscriptions"}'
2025-02-13 04:05:10.128 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-13 04:05:10.129 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-13 04:05:10.129 DEBUG [src.node.waku_node] Stopping container with id 0e529cfea6ab
2025-02-13 04:05:11.245 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 04:05:11.245 DEBUG [src.node.waku_node] Stopping container with id c31ef217e8a6
2025-02-13 04:05:12.073 ERROR [src.node.docker_mananger] Max retries reached for container 0e529cfea6ab. Exiting log stream.
2025-02-13 04:05:12.751 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 04:05:12.752 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-13 04:05:12.762 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-13 04:05:12.768 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
