2025-02-13 04:02:29.800 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-13 04:02:29.800 DEBUG [tests.conftest] Running test: test_lightpush with id: 2025-02-13_04-02-29__f8cdabc5-8d6d-4ba3-8dc1-55758c87f198
2025-02-13 04:02:29.801 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-13 04:02:29.802 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-13 04:02:29.802 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-13 04:02:29.802 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-13 04:02:29.803 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-13 04:02:29.815 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 04:02:29.815 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-13_04-02-29__f8cdabc5-8d6d-4ba3-8dc1-55758c87f198__wakuorg_nwaku:latest.log
2025-02-13 04:02:29.815 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 04:02:29.815 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 04:02:29.817 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 04:02:29.817 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.62.72
2025-02-13 04:02:29.817 DEBUG [src.node.docker_mananger] Generated ports ['27091', '27092', '27093', '27094', '27095']
2025-02-13 04:02:29.817 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 04:02:29.817 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 04:02:29.817 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 04:02:29.818 DEBUG [src.node.docker_mananger] docker run -i -t -p 27091:27091 -p 27092:27092 -p 27093:27093 -p 27094:27094 -p 27095:27095 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27093 --rest-port=27091 --tcp-port=27092 --discv5-udp-port=27094 --rest-address=0.0.0.0 --nat=extip:172.18.62.72 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6ab072bc52dae63e8bd0edef8cd3b141a46c09fdfca03ae6ae7df91eafa37704 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27095 --metrics-logging=true --lightpush=true --relay=true
2025-02-13 04:02:30.046 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.62.72 waku 154d51221f7b4c3171670c865c432b60d822b3f60b0fc43940fed91f94d8713f
2025-02-13 04:02:30.098 DEBUG [src.node.docker_mananger] Container started with ID 154d51221f7b. Setting up logs at ./log/docker/node1_2025-02-13_04-02-29__f8cdabc5-8d6d-4ba3-8dc1-55758c87f198__wakuorg_nwaku:latest.log
2025-02-13 04:02:30.099 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 27091
2025-02-13 04:02:30.099 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 04:02:30.626 ERROR [src.node.docker_mananger] Max retries reached for container 3f538f734e12. Exiting log stream.
2025-02-13 04:02:31.100 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27091/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:02:31.104 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 04:02:31.104 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 04:02:31.104 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27091/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:02:31.106 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.62.72/tcp/27092/p2p/16Uiu2HAm8wqcD7JoEt8VBPjA2NwNk9nY5LUWEVzJ9yziUGGGLNzQ","/ip4/172.18.62.72/tcp/27093/ws/p2p/16Uiu2HAm8wqcD7JoEt8VBPjA2NwNk9nY5LUWEVzJ9yziUGGGLNzQ"],"enrUri":"enr:-L24QPxocC3klVb_N4kznQQS46QkKdfauNSp2yOExIuQL5vNflgeqEXv-3grCXEMw6PxcJTFyEpRL0tQE016GKAryg4CgmlkgnY0gmlwhKwSPkiKbXVsdGlhZGRyc5YACASsEj5IBmnUAAoErBI-SAZp1d0DgnJzhQADAQAAiXNlY3AyNTZrMaECyOI9lktUT0CxS5gBW5QDcqvAFXeCUhY2gWgYkb-Vdn2DdGNwgmnUg3VkcIJp1oV3YWt1Mgk"}'
2025-02-13 04:02:31.107 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 04:02:31.112 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 04:02:31.112 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-13_04-02-29__f8cdabc5-8d6d-4ba3-8dc1-55758c87f198__wakuorg_nwaku:latest.log
2025-02-13 04:02:31.113 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 04:02:31.113 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 04:02:31.114 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 04:02:31.114 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.167.237
2025-02-13 04:02:31.114 DEBUG [src.node.docker_mananger] Generated ports ['1896', '1897', '1898', '1899', '1900']
2025-02-13 04:02:31.114 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 04:02:31.115 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 04:02:31.115 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 04:02:31.115 DEBUG [src.node.docker_mananger] docker run -i -t -p 1896:1896 -p 1897:1897 -p 1898:1898 -p 1899:1899 -p 1900:1900 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=1898 --rest-port=1896 --tcp-port=1897 --discv5-udp-port=1899 --rest-address=0.0.0.0 --nat=extip:172.18.167.237 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=18cf27b08aefab9c8d66c7d8c96dabc234c93ee9fb3cffa8d749a4942524c0ca --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=1900 --metrics-logging=true --lightpush=false --relay=true --discv5-bootstrap-node=enr:-L24QPxocC3klVb_N4kznQQS46QkKdfauNSp2yOExIuQL5vNflgeqEXv-3grCXEMw6PxcJTFyEpRL0tQE016GKAryg4CgmlkgnY0gmlwhKwSPkiKbXVsdGlhZGRyc5YACASsEj5IBmnUAAoErBI-SAZp1d0DgnJzhQADAQAAiXNlY3AyNTZrMaECyOI9lktUT0CxS5gBW5QDcqvAFXeCUhY2gWgYkb-Vdn2DdGNwgmnUg3VkcIJp1oV3YWt1Mgk
2025-02-13 04:02:31.339 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.167.237 waku fd3fb59d548f718276242e0b6ebc21e9b7709d34830d9bd2dc93c5cca02e84e9
2025-02-13 04:02:31.401 DEBUG [src.node.docker_mananger] Container started with ID fd3fb59d548f. Setting up logs at ./log/docker/node1_2025-02-13_04-02-29__f8cdabc5-8d6d-4ba3-8dc1-55758c87f198__wakuorg_nwaku:latest.log
2025-02-13 04:02:31.402 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 1896
2025-02-13 04:02:31.403 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 04:02:32.403 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1896/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:02:32.406 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 04:02:32.406 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 04:02:32.407 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1896/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:02:32.409 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.167.237/tcp/1897/p2p/16Uiu2HAm5rFn3ZsaUtdwPJBXYzR6XwBCwC6hhUDHwpvV6tm9GA1w","/ip4/172.18.167.237/tcp/1898/ws/p2p/16Uiu2HAm5rFn3ZsaUtdwPJBXYzR6XwBCwC6hhUDHwpvV6tm9GA1w"],"enrUri":"enr:-L24QB6yP9BMzPyiHFPM_Lev2mJhZBgclMC-6fYgeVhgKe0zf6zmG6kaVsem_BfDHsPsJVWHkOHYJFVOqZJkseb9-H8CgmlkgnY0gmlwhKwSp-2KbXVsdGlhZGRyc5YACASsEqftBgdpAAoErBKn7QYHat0DgnJzhQADAQAAiXNlY3AyNTZrMaECmuEGCKHz87Xu_mthqPVf_zW5KnWJK-ltklqVNXfcXBKDdGNwggdpg3VkcIIHa4V3YWt1MgE"}'
2025-02-13 04:02:32.409 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 04:02:32.415 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 04:02:32.415 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-13_04-02-29__f8cdabc5-8d6d-4ba3-8dc1-55758c87f198__wakuorg_nwaku:latest.log
2025-02-13 04:02:32.415 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 04:02:32.415 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 04:02:32.417 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 04:02:32.417 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.177.236
2025-02-13 04:02:32.417 DEBUG [src.node.docker_mananger] Generated ports ['40962', '40963', '40964', '40965', '40966']
2025-02-13 04:02:32.417 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 04:02:32.417 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 04:02:32.417 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 04:02:32.417 DEBUG [src.node.docker_mananger] docker run -i -t -p 40962:40962 -p 40963:40963 -p 40964:40964 -p 40965:40965 -p 40966:40966 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40964 --rest-port=40962 --tcp-port=40963 --discv5-udp-port=40965 --rest-address=0.0.0.0 --nat=extip:172.18.177.236 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e9fb0c95aaa12fbaacedf87dacc3efa4f2ed1094d41cfb85cec88ddc5d3c0fab --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40966 --metrics-logging=true --lightpush=true --relay=false --discv5-bootstrap-node=enr:-L24QPxocC3klVb_N4kznQQS46QkKdfauNSp2yOExIuQL5vNflgeqEXv-3grCXEMw6PxcJTFyEpRL0tQE016GKAryg4CgmlkgnY0gmlwhKwSPkiKbXVsdGlhZGRyc5YACASsEj5IBmnUAAoErBI-SAZp1d0DgnJzhQADAQAAiXNlY3AyNTZrMaECyOI9lktUT0CxS5gBW5QDcqvAFXeCUhY2gWgYkb-Vdn2DdGNwgmnUg3VkcIJp1oV3YWt1Mgk --lightpushnode=/ip4/172.18.62.72/tcp/27092/p2p/16Uiu2HAm8wqcD7JoEt8VBPjA2NwNk9nY5LUWEVzJ9yziUGGGLNzQ
2025-02-13 04:02:32.662 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.177.236 waku be00fc41bd3510c65d25e9d00fa1c0174fb91c9d8d8ba4f5195d9a73b2a056b0
2025-02-13 04:02:32.712 DEBUG [src.node.docker_mananger] Container started with ID be00fc41bd35. Setting up logs at ./log/docker/node1_2025-02-13_04-02-29__f8cdabc5-8d6d-4ba3-8dc1-55758c87f198__wakuorg_nwaku:latest.log
2025-02-13 04:02:32.712 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 40962
2025-02-13 04:02:32.712 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 04:02:33.714 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40962/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:02:33.717 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 04:02:33.717 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 04:02:33.717 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40962/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:02:33.719 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.177.236/tcp/40963/p2p/16Uiu2HAmK4mMpVEhKPKB5q6rbbKjVZdToL2ZxFhJPhGcjxtHnrVP","/ip4/172.18.177.236/tcp/40964/ws/p2p/16Uiu2HAmK4mMpVEhKPKB5q6rbbKjVZdToL2ZxFhJPhGcjxtHnrVP"],"enrUri":"enr:-L24QJ5ActIh3QI5FhPd6BXNe84kdqz-ay4NJnlnqfKGieamSwG0SojH9VF5ph-WUn3lNawWNMNzuMHi9fJqpSyIjo4CgmlkgnY0gmlwhKwSseyKbXVsdGlhZGRyc5YACASsErHsBqADAAoErBKx7AagBN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDXz1fRY44W7N9Vkb-Ch88Nk2bSgzCNBWki0o5C5G7fPqDdGNwgqADg3VkcIKgBYV3YWt1Mgg"}'
2025-02-13 04:02:33.719 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 04:02:33.720 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27091/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-13 04:02:33.723 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:02:33.724 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:1896/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-13 04:02:33.729 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:02:33.730 DEBUG [src.steps.light_push] Lightpushing message
2025-02-13 04:02:33.732 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40962/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": 1739419353730411776}}'
2025-02-13 04:02:33.780 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:02:33.782 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-13 04:02:33.882 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-13 04:02:33.883 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27091/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:02:33.885 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739419353730411776,"ephemeral":false}]'
2025-02-13 04:02:33.887 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-13 04:02:33.887 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1896/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:02:33.889 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739419353730411776,"ephemeral":false}]'
2025-02-13 04:02:33.892 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-13 04:02:33.892 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-13 04:02:33.893 DEBUG [src.node.waku_node] Stopping container with id 154d51221f7b
2025-02-13 04:02:34.588 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 04:02:34.588 DEBUG [src.node.waku_node] Stopping container with id fd3fb59d548f
2025-02-13 04:02:35.401 ERROR [src.node.docker_mananger] Max retries reached for container 154d51221f7b. Exiting log stream.
2025-02-13 04:02:36.094 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 04:02:36.096 DEBUG [src.node.waku_node] Stopping container with id be00fc41bd35
2025-02-13 04:02:36.923 ERROR [src.node.docker_mananger] Max retries reached for container fd3fb59d548f. Exiting log stream.
2025-02-13 04:02:37.593 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 04:02:37.596 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-13 04:02:37.605 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-13 04:02:37.615 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-13 04:02:37.624 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
