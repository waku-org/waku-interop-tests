2025-02-13 04:05:18.630 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-13 04:05:18.631 DEBUG [tests.conftest] Running test: test_light_push_while_peer_is_paused with id: 2025-02-13_04-05-18__a5abdc09-4eec-4dec-8211-556db049565d
2025-02-13 04:05:18.631 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-13 04:05:18.631 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-13 04:05:18.638 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 04:05:18.638 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-13_04-05-18__a5abdc09-4eec-4dec-8211-556db049565d__wakuorg_nwaku:latest.log
2025-02-13 04:05:18.638 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 04:05:18.638 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 04:05:18.640 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 04:05:18.640 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.22.110
2025-02-13 04:05:18.640 DEBUG [src.node.docker_mananger] Generated ports ['51136', '51137', '51138', '51139', '51140']
2025-02-13 04:05:18.640 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 04:05:18.640 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 04:05:18.641 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 04:05:18.641 DEBUG [src.node.docker_mananger] docker run -i -t -p 51136:51136 -p 51137:51137 -p 51138:51138 -p 51139:51139 -p 51140:51140 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=51138 --rest-port=51136 --tcp-port=51137 --discv5-udp-port=51139 --rest-address=0.0.0.0 --nat=extip:172.18.22.110 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0e3cf23c3cabdcb640f2ecfc2eecf0bb22e6ba9b3cecd8cdddadabdfbc34592a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=51140 --metrics-logging=true --lightpush=true --relay=true
2025-02-13 04:05:18.885 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.22.110 waku c661487bb72dd16259109bc832b08a63930ffc32ecbffd5e1fdea958b29d500c
2025-02-13 04:05:18.935 DEBUG [src.node.docker_mananger] Container started with ID c661487bb72d. Setting up logs at ./log/docker/receiving_node1_2025-02-13_04-05-18__a5abdc09-4eec-4dec-8211-556db049565d__wakuorg_nwaku:latest.log
2025-02-13 04:05:18.935 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 51136
2025-02-13 04:05:18.935 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 04:05:19.434 ERROR [src.node.docker_mananger] Max retries reached for container cbb8a931c223. Exiting log stream.
2025-02-13 04:05:19.936 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51136/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:05:19.939 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 04:05:19.939 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 04:05:19.939 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51136/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:05:19.941 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.22.110/tcp/51137/p2p/16Uiu2HAmDWrm3kvfunRz6ixFAUzfbMVfE2GuAHSBY7e95h8Wcw5B","/ip4/172.18.22.110/tcp/51138/ws/p2p/16Uiu2HAmDWrm3kvfunRz6ixFAUzfbMVfE2GuAHSBY7e95h8Wcw5B"],"enrUri":"enr:-L24QIRULZf-DHLfHAqy5XfTlBuagnHZe4J20FGTf83uE64uJbq957fimH7L7SM1aSijdsnoaMm7U7etKSlVTRXXq_4CgmlkgnY0gmlwhKwSFm6KbXVsdGlhZGRyc5YACASsEhZuBsfBAAoErBIWbgbHwt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDDMZ1PxYlG5MSTJkP0d6gUCykGFy2AxsJkzRQ3Dj7yjKDdGNwgsfBg3VkcILHw4V3YWt1Mgk"}'
2025-02-13 04:05:19.942 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 04:05:19.948 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 04:05:19.949 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-13_04-05-18__a5abdc09-4eec-4dec-8211-556db049565d__wakuorg_nwaku:latest.log
2025-02-13 04:05:19.949 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 04:05:19.949 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 04:05:19.952 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 04:05:19.953 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.139.164
2025-02-13 04:05:19.953 DEBUG [src.node.docker_mananger] Generated ports ['4763', '4764', '4765', '4766', '4767']
2025-02-13 04:05:19.953 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 04:05:19.953 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 04:05:19.953 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 04:05:19.953 DEBUG [src.node.docker_mananger] docker run -i -t -p 4763:4763 -p 4764:4764 -p 4765:4765 -p 4766:4766 -p 4767:4767 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4765 --rest-port=4763 --tcp-port=4764 --discv5-udp-port=4766 --rest-address=0.0.0.0 --nat=extip:172.18.139.164 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a2a3bddea56086fb73c423a8e0d80aac4b6dfd4e42abf871d84cb73ebcc675dc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4767 --metrics-logging=true --lightpush=false --relay=true
2025-02-13 04:05:20.188 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.139.164 waku 960c750b4764c00a3dcb8b4a34c609d0bd26ead090592d401b908e53104494f8
2025-02-13 04:05:20.241 DEBUG [src.node.docker_mananger] Container started with ID 960c750b4764. Setting up logs at ./log/docker/receiving_node2_2025-02-13_04-05-18__a5abdc09-4eec-4dec-8211-556db049565d__wakuorg_nwaku:latest.log
2025-02-13 04:05:20.241 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 4763
2025-02-13 04:05:20.241 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 04:05:21.242 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4763/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:05:21.246 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 04:05:21.246 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 04:05:21.246 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4763/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:05:21.248 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.139.164/tcp/4764/p2p/16Uiu2HAmBrsnMn5TvHUKGU3jUc2kahSC88UoWUySQPjqxCKi6ttC","/ip4/172.18.139.164/tcp/4765/ws/p2p/16Uiu2HAmBrsnMn5TvHUKGU3jUc2kahSC88UoWUySQPjqxCKi6ttC"],"enrUri":"enr:-L24QHXUThirb2YvEyCJCJZ4MJX1SievpGaZxHK2DxXZOWE3CAOvOYRdEeWVBVpp74MRNfoyArdhwW7scyGT4JuZzWkCgmlkgnY0gmlwhKwSi6SKbXVsdGlhZGRyc5YACASsEoukBhKcAAoErBKLpAYSnd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC9C_bSLG5-ZJ8yMzeoFq8eiwL-K3hidtvwYSunuHDA52DdGNwghKcg3VkcIISnoV3YWt1MgE"}'
2025-02-13 04:05:21.248 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 04:05:21.249 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4763/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.22.110/tcp/51137/p2p/16Uiu2HAmDWrm3kvfunRz6ixFAUzfbMVfE2GuAHSBY7e95h8Wcw5B"]'
2025-02-13 04:05:21.290 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:05:21.299 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 04:05:21.299 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-13_04-05-18__a5abdc09-4eec-4dec-8211-556db049565d__wakuorg_nwaku:latest.log
2025-02-13 04:05:21.299 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 04:05:21.299 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 04:05:21.301 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 04:05:21.301 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.84.76
2025-02-13 04:05:21.301 DEBUG [src.node.docker_mananger] Generated ports ['47924', '47925', '47926', '47927', '47928']
2025-02-13 04:05:21.301 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 04:05:21.301 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 04:05:21.301 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 04:05:21.302 DEBUG [src.node.docker_mananger] docker run -i -t -p 47924:47924 -p 47925:47925 -p 47926:47926 -p 47927:47927 -p 47928:47928 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=47926 --rest-port=47924 --tcp-port=47925 --discv5-udp-port=47927 --rest-address=0.0.0.0 --nat=extip:172.18.84.76 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2754fcfdfd809bb13a27fd42fcbc6d1efedee34a0ac37fa500b54acfbcca2e8b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=47928 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QIRULZf-DHLfHAqy5XfTlBuagnHZe4J20FGTf83uE64uJbq957fimH7L7SM1aSijdsnoaMm7U7etKSlVTRXXq_4CgmlkgnY0gmlwhKwSFm6KbXVsdGlhZGRyc5YACASsEhZuBsfBAAoErBIWbgbHwt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDDMZ1PxYlG5MSTJkP0d6gUCykGFy2AxsJkzRQ3Dj7yjKDdGNwgsfBg3VkcILHw4V3YWt1Mgk --lightpushnode=/ip4/172.18.22.110/tcp/51137/p2p/16Uiu2HAmDWrm3kvfunRz6ixFAUzfbMVfE2GuAHSBY7e95h8Wcw5B --lightpush=true --relay=false
2025-02-13 04:05:21.548 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.84.76 waku 2f11d3b1c89a904cacd09b4de604d68681dd51f21972a0f71d3b8497eae5cba4
2025-02-13 04:05:21.604 DEBUG [src.node.docker_mananger] Container started with ID 2f11d3b1c89a. Setting up logs at ./log/docker/lightpush_node1_2025-02-13_04-05-18__a5abdc09-4eec-4dec-8211-556db049565d__wakuorg_nwaku:latest.log
2025-02-13 04:05:21.605 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 47924
2025-02-13 04:05:21.605 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 04:05:22.605 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47924/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:05:22.609 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 04:05:22.609 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 04:05:22.609 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47924/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:05:22.611 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.84.76/tcp/47925/p2p/16Uiu2HAmBcsutBwswmyaBXwdRkDMVBxY6qLN5YM3axawhMps5AMQ","/ip4/172.18.84.76/tcp/47926/ws/p2p/16Uiu2HAmBcsutBwswmyaBXwdRkDMVBxY6qLN5YM3axawhMps5AMQ"],"enrUri":"enr:-L24QEYgVtpW2kzI7rB2MQtgmnAOoLQVZsExSXXfLNmby4YrMrI7q6JlQ-SubN3-na8EjAaFoNM5tVHTSBd0rHgae5sCgmlkgnY0gmlwhKwSVEyKbXVsdGlhZGRyc5YACASsElRMBrs1AAoErBJUTAa7Nt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC8JnfN0QcKgYUJ7tpGK1wwOC_j5gSRRYqipv9zvTiHgODdGNwgrs1g3VkcIK7N4V3YWt1Mgg"}'
2025-02-13 04:05:22.612 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 04:05:22.612 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47924/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.22.110/tcp/51137/p2p/16Uiu2HAmDWrm3kvfunRz6ixFAUzfbMVfE2GuAHSBY7e95h8Wcw5B"]'
2025-02-13 04:05:22.649 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:05:22.649 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47924/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.139.164/tcp/4764/p2p/16Uiu2HAmBrsnMn5TvHUKGU3jUc2kahSC88UoWUySQPjqxCKi6ttC"]'
2025-02-13 04:05:22.680 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:05:22.684 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:51136/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-13 04:05:22.692 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:05:22.693 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4763/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-13 04:05:22.696 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:05:22.699 DEBUG [src.node.waku_node] Stopping container with id c661487bb72d
2025-02-13 04:05:23.370 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 04:05:23.371 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47924/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739419522699716608}}'
2025-02-13 04:05:24.185 ERROR [src.node.docker_mananger] Max retries reached for container c661487bb72d. Exiting log stream.
2025-02-13 04:05:28.380 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:47924/lightpush/v1/message. Response content: b'Failed to request a message push: dial_failure'
2025-02-13 04:05:28.382 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-13 04:05:28.383 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-13 04:05:28.383 DEBUG [src.node.waku_node] Stopping container with id 960c750b4764
2025-02-13 04:05:29.922 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 04:05:29.922 DEBUG [src.node.waku_node] Stopping container with id 2f11d3b1c89a
2025-02-13 04:05:30.757 ERROR [src.node.docker_mananger] Max retries reached for container 960c750b4764. Exiting log stream.
2025-02-13 04:05:31.479 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 04:05:31.481 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-13 04:05:31.488 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-13 04:05:31.502 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-13 04:05:31.508 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
