2025-02-13 04:02:33.152 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-13 04:02:33.153 DEBUG [tests.conftest] Running test: test_filter_get_message_with_meta with id: 2025-02-13_04-02-33__cae6688d-553e-443c-af62-e23398cb3a0e
2025-02-13 04:02:33.153 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-13 04:02:33.153 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-13 04:02:33.153 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-13 04:02:33.159 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 04:02:33.159 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-13_04-02-33__cae6688d-553e-443c-af62-e23398cb3a0e__wakuorg_nwaku:latest.log
2025-02-13 04:02:33.159 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 04:02:33.159 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 04:02:33.161 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 04:02:33.161 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.29.62
2025-02-13 04:02:33.161 DEBUG [src.node.docker_mananger] Generated ports ['1889', '1890', '1891', '1892', '1893']
2025-02-13 04:02:33.161 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 04:02:33.161 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 04:02:33.162 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 04:02:33.162 DEBUG [src.node.docker_mananger] docker run -i -t -p 1889:1889 -p 1890:1890 -p 1891:1891 -p 1892:1892 -p 1893:1893 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=1891 --rest-port=1889 --tcp-port=1890 --discv5-udp-port=1892 --rest-address=0.0.0.0 --nat=extip:172.18.29.62 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1933bba2f0cf2f4aecdd4fcb085ddc57e62751d1a94cf7c7bbb979fcf4f2cccc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=1893 --metrics-logging=true --relay=true --filter=true
2025-02-13 04:02:33.379 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.29.62 waku 880ed7dd263116d96b9523a11569f4e596be23f290407261b27ce4684781f259
2025-02-13 04:02:33.426 DEBUG [src.node.docker_mananger] Container started with ID 880ed7dd2631. Setting up logs at ./log/docker/node1_2025-02-13_04-02-33__cae6688d-553e-443c-af62-e23398cb3a0e__wakuorg_nwaku:latest.log
2025-02-13 04:02:33.428 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 1889
2025-02-13 04:02:33.428 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 04:02:33.947 ERROR [src.node.docker_mananger] Max retries reached for container 82bcf3c3e893. Exiting log stream.
2025-02-13 04:02:34.428 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1889/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:02:34.432 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 04:02:34.432 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 04:02:34.432 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1889/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:02:34.434 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.29.62/tcp/1890/p2p/16Uiu2HAmTukvshYaZjaRzaXYRC2HRmqatbwevdCWvZBU5wQwYwQX","/ip4/172.18.29.62/tcp/1891/ws/p2p/16Uiu2HAmTukvshYaZjaRzaXYRC2HRmqatbwevdCWvZBU5wQwYwQX"],"enrUri":"enr:-L24QKDrRo1snOTqvxpnNvn5XsbwZyjRNLka34ZVxp5Ni_k3OIWsnHcKgyopLPAyPq67iZJZd3v_tCfD5ylMw7jwRrICgmlkgnY0gmlwhKwSHT6KbXVsdGlhZGRyc5YACASsEh0-BgdiAAoErBIdPgYHY90DgnJzhQADAQAAiXNlY3AyNTZrMaED4qfXRmdHFza4rna2x1_LPjGQ1P1QMzI-iPdfSwXA2wSDdGNwggdig3VkcIIHZIV3YWt1MgU"}'
2025-02-13 04:02:34.435 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 04:02:34.435 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-13 04:02:34.441 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 04:02:34.441 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-13_04-02-33__cae6688d-553e-443c-af62-e23398cb3a0e__wakuorg_nwaku:latest.log
2025-02-13 04:02:34.441 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 04:02:34.442 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 04:02:34.443 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 04:02:34.443 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.36.48
2025-02-13 04:02:34.443 DEBUG [src.node.docker_mananger] Generated ports ['31764', '31765', '31766', '31767', '31768']
2025-02-13 04:02:34.443 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 04:02:34.443 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 04:02:34.444 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 04:02:34.444 DEBUG [src.node.docker_mananger] docker run -i -t -p 31764:31764 -p 31765:31765 -p 31766:31766 -p 31767:31767 -p 31768:31768 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=31766 --rest-port=31764 --tcp-port=31765 --discv5-udp-port=31767 --rest-address=0.0.0.0 --nat=extip:172.18.36.48 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2bef1ff3d55357cecc2d8560a8fe5f76cacf6fdca3862d9db7b1bc465bf7ebda --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=31768 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QKDrRo1snOTqvxpnNvn5XsbwZyjRNLka34ZVxp5Ni_k3OIWsnHcKgyopLPAyPq67iZJZd3v_tCfD5ylMw7jwRrICgmlkgnY0gmlwhKwSHT6KbXVsdGlhZGRyc5YACASsEh0-BgdiAAoErBIdPgYHY90DgnJzhQADAQAAiXNlY3AyNTZrMaED4qfXRmdHFza4rna2x1_LPjGQ1P1QMzI-iPdfSwXA2wSDdGNwggdig3VkcIIHZIV3YWt1MgU --filternode=/ip4/172.18.29.62/tcp/1890/p2p/16Uiu2HAmTukvshYaZjaRzaXYRC2HRmqatbwevdCWvZBU5wQwYwQX
2025-02-13 04:02:34.675 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.36.48 waku 416d3a3e3b154624c0b111782401780c0f3227dec192f91c4283ae13a557d05a
2025-02-13 04:02:34.724 DEBUG [src.node.docker_mananger] Container started with ID 416d3a3e3b15. Setting up logs at ./log/docker/node2_2025-02-13_04-02-33__cae6688d-553e-443c-af62-e23398cb3a0e__wakuorg_nwaku:latest.log
2025-02-13 04:02:34.724 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 31764
2025-02-13 04:02:34.724 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 04:02:35.725 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31764/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:02:35.728 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 04:02:35.728 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 04:02:35.728 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31764/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:02:35.730 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.36.48/tcp/31765/p2p/16Uiu2HAm8jb453mqemmASXR681T5JTA6G52eZjosHzL8oYXiQimG","/ip4/172.18.36.48/tcp/31766/ws/p2p/16Uiu2HAm8jb453mqemmASXR681T5JTA6G52eZjosHzL8oYXiQimG"],"enrUri":"enr:-L24QP2grOyn3kd1Zti2oXHa4XM63s4OhrkiLGR76iKRAEOIUf9Ac8DT7QVeKWwgBAmxWZRo1DwNJtq2lzOq_JZ-kQECgmlkgnY0gmlwhKwSJDCKbXVsdGlhZGRyc5YACASsEiQwBnwVAAoErBIkMAZ8Ft0DgnJzhQADAQAAiXNlY3AyNTZrMaECxb7QgQ831R5Q4kp0XM3Y24dX7JVFwg4HNWa0nCzyvHODdGNwgnwVg3VkcIJ8F4V3YWt1MgA"}'
2025-02-13 04:02:35.731 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 04:02:35.731 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31764/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.29.62/tcp/1890/p2p/16Uiu2HAmTukvshYaZjaRzaXYRC2HRmqatbwevdCWvZBU5wQwYwQX"]'
2025-02-13 04:02:35.767 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:02:35.768 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-13 04:02:35.768 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:1889/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-13 04:02:35.787 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:02:35.788 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31764/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "e59c1cf0-3462-4843-930f-9f8caed08cc6", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-13 04:02:35.799 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"e59c1cf0-3462-4843-930f-9f8caed08cc6","statusDesc":"OK"}'
2025-02-13 04:02:35.801 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:1889/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "meta": "RmlsdGVyIHdvcmtzISE="}'
2025-02-13 04:02:35.810 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:02:35.810 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-13 04:02:35.910 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-13 04:02:35.911 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31764/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:02:35.914 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1739419355801116928,"meta":"RmlsdGVyIHdvcmtzISE=","ephemeral":false}]'
2025-02-13 04:02:35.917 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-13 04:02:35.918 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-13 04:02:35.918 DEBUG [src.node.waku_node] Stopping container with id 880ed7dd2631
2025-02-13 04:02:37.007 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 04:02:37.007 DEBUG [src.node.waku_node] Stopping container with id 416d3a3e3b15
2025-02-13 04:02:37.820 ERROR [src.node.docker_mananger] Max retries reached for container 880ed7dd2631. Exiting log stream.
2025-02-13 04:02:38.494 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 04:02:38.496 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-13 04:02:38.500 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-13 04:02:38.504 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
