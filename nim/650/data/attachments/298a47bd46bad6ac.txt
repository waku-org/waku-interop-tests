2025-02-13 04:02:50.942 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-13 04:02:50.942 DEBUG [tests.conftest] Running test: test_light_push_with_with_large_meta with id: 2025-02-13_04-02-50__5669e477-34d6-453c-ab09-37fbd9235550
2025-02-13 04:02:50.943 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-13 04:02:50.943 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-13 04:02:50.951 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 04:02:50.951 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-13_04-02-50__5669e477-34d6-453c-ab09-37fbd9235550__wakuorg_nwaku:latest.log
2025-02-13 04:02:50.951 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 04:02:50.951 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 04:02:50.952 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 04:02:50.953 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.168.10
2025-02-13 04:02:50.953 DEBUG [src.node.docker_mananger] Generated ports ['12034', '12035', '12036', '12037', '12038']
2025-02-13 04:02:50.953 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 04:02:50.953 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 04:02:50.953 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 04:02:50.953 DEBUG [src.node.docker_mananger] docker run -i -t -p 12034:12034 -p 12035:12035 -p 12036:12036 -p 12037:12037 -p 12038:12038 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=12036 --rest-port=12034 --tcp-port=12035 --discv5-udp-port=12037 --rest-address=0.0.0.0 --nat=extip:172.18.168.10 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fbee513fa5be9d0fd15ee9a7b7b783e3d83c3931938bbe2af8f30b1409ebef0e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=12038 --metrics-logging=true --lightpush=true --relay=true
2025-02-13 04:02:51.171 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.168.10 waku ff8b61816260f53486fb292af7f160f5b68cf5c1e4ea12f888f91d1c1bb4cedf
2025-02-13 04:02:51.218 DEBUG [src.node.docker_mananger] Container started with ID ff8b61816260. Setting up logs at ./log/docker/receiving_node1_2025-02-13_04-02-50__5669e477-34d6-453c-ab09-37fbd9235550__wakuorg_nwaku:latest.log
2025-02-13 04:02:51.218 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 12034
2025-02-13 04:02:51.218 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 04:02:51.708 ERROR [src.node.docker_mananger] Max retries reached for container 2883bac6b62d. Exiting log stream.
2025-02-13 04:02:52.220 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:12034/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:02:52.222 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 04:02:52.223 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 04:02:52.223 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:12034/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:02:52.225 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.168.10/tcp/12035/p2p/16Uiu2HAm4sdaBxDW6YmKowvcv1kmyoFchAST55ehZvWsahUAAxsn","/ip4/172.18.168.10/tcp/12036/ws/p2p/16Uiu2HAm4sdaBxDW6YmKowvcv1kmyoFchAST55ehZvWsahUAAxsn"],"enrUri":"enr:-L24QJfkZ1CRVn70FOodwbI1L6pCvYGxbQ1mTxg_uslZuWy8fNrH4mtywsMR2YqHlzPksz6SGj8zQQNCOuJWNPbyycsCgmlkgnY0gmlwhKwSqAqKbXVsdGlhZGRyc5YACASsEqgKBi8DAAoErBKoCgYvBN0DgnJzhQADAQAAiXNlY3AyNTZrMaECjF-P0tih_kL7M1nv61PmVf43MPSqhhXFe8It8MdDM5WDdGNwgi8Dg3VkcIIvBYV3YWt1Mgk"}'
2025-02-13 04:02:52.225 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 04:02:52.231 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 04:02:52.232 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-13_04-02-50__5669e477-34d6-453c-ab09-37fbd9235550__wakuorg_nwaku:latest.log
2025-02-13 04:02:52.232 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 04:02:52.232 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 04:02:52.233 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 04:02:52.233 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.104.249
2025-02-13 04:02:52.233 DEBUG [src.node.docker_mananger] Generated ports ['48061', '48062', '48063', '48064', '48065']
2025-02-13 04:02:52.233 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 04:02:52.234 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 04:02:52.234 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 04:02:52.234 DEBUG [src.node.docker_mananger] docker run -i -t -p 48061:48061 -p 48062:48062 -p 48063:48063 -p 48064:48064 -p 48065:48065 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=48063 --rest-port=48061 --tcp-port=48062 --discv5-udp-port=48064 --rest-address=0.0.0.0 --nat=extip:172.18.104.249 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dbbfc97f20dd694bff2dec93b8bd6c9aef519a56bd2ed8b42cbfceddeeec145c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=48065 --metrics-logging=true --lightpush=false --relay=true
2025-02-13 04:02:52.455 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.104.249 waku 841f317d1d52408a16c6d81cf048c59f0afbdc419c9409447989d5037e653f6c
2025-02-13 04:02:52.502 DEBUG [src.node.docker_mananger] Container started with ID 841f317d1d52. Setting up logs at ./log/docker/receiving_node2_2025-02-13_04-02-50__5669e477-34d6-453c-ab09-37fbd9235550__wakuorg_nwaku:latest.log
2025-02-13 04:02:52.503 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 48061
2025-02-13 04:02:52.504 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 04:02:53.504 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:48061/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:02:53.507 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 04:02:53.507 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 04:02:53.507 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:48061/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:02:53.509 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.104.249/tcp/48062/p2p/16Uiu2HAkxhwD9Lv254oVUpG6iyjVhPnj4aghPt3h3hBhZhRLpy9p","/ip4/172.18.104.249/tcp/48063/ws/p2p/16Uiu2HAkxhwD9Lv254oVUpG6iyjVhPnj4aghPt3h3hBhZhRLpy9p"],"enrUri":"enr:-L24QFu6MsuZIAe-RtIQ080AQ8hsDiYQaJD2FGn2FRDwbHUALcLR-JGKbU2zcz6vrtg6_3umCjFzOBml2NOYTeda4WACgmlkgnY0gmlwhKwSaPmKbXVsdGlhZGRyc5YACASsEmj5Bru-AAoErBJo-Qa7v90DgnJzhQADAQAAiXNlY3AyNTZrMaECML2TFjPG4K3oGUMDQd6K1_tnraLEM4Kfi9SrJYuDVGeDdGNwgru-g3VkcIK7wIV3YWt1MgE"}'
2025-02-13 04:02:53.509 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 04:02:53.510 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:48061/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.168.10/tcp/12035/p2p/16Uiu2HAm4sdaBxDW6YmKowvcv1kmyoFchAST55ehZvWsahUAAxsn"]'
2025-02-13 04:02:53.548 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:02:53.558 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-13 04:02:53.558 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-13_04-02-50__5669e477-34d6-453c-ab09-37fbd9235550__wakuorg_nwaku:latest.log
2025-02-13 04:02:53.558 DEBUG [src.node.waku_node] Starting Node...
2025-02-13 04:02:53.558 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-13 04:02:53.560 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-13 04:02:53.560 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.122.80
2025-02-13 04:02:53.560 DEBUG [src.node.docker_mananger] Generated ports ['28545', '28546', '28547', '28548', '28549']
2025-02-13 04:02:53.560 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-13 04:02:53.560 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-13 04:02:53.561 DEBUG [src.node.waku_node] Using volumes []
2025-02-13 04:02:53.561 DEBUG [src.node.docker_mananger] docker run -i -t -p 28545:28545 -p 28546:28546 -p 28547:28547 -p 28548:28548 -p 28549:28549 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28547 --rest-port=28545 --tcp-port=28546 --discv5-udp-port=28548 --rest-address=0.0.0.0 --nat=extip:172.18.122.80 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=15fc6d4ffd63b5dadc662cf48a1eac51fdfdd3b3de0faea7fc4c5683ec5c4a00 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28549 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QJfkZ1CRVn70FOodwbI1L6pCvYGxbQ1mTxg_uslZuWy8fNrH4mtywsMR2YqHlzPksz6SGj8zQQNCOuJWNPbyycsCgmlkgnY0gmlwhKwSqAqKbXVsdGlhZGRyc5YACASsEqgKBi8DAAoErBKoCgYvBN0DgnJzhQADAQAAiXNlY3AyNTZrMaECjF-P0tih_kL7M1nv61PmVf43MPSqhhXFe8It8MdDM5WDdGNwgi8Dg3VkcIIvBYV3YWt1Mgk --lightpushnode=/ip4/172.18.168.10/tcp/12035/p2p/16Uiu2HAm4sdaBxDW6YmKowvcv1kmyoFchAST55ehZvWsahUAAxsn --lightpush=true --relay=false
2025-02-13 04:02:53.796 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.122.80 waku 6a9419a3cbaadbc03e2b522b3c633ec393c9455573185e32b625afc134ad4cdd
2025-02-13 04:02:53.851 DEBUG [src.node.docker_mananger] Container started with ID 6a9419a3cbaa. Setting up logs at ./log/docker/lightpush_node1_2025-02-13_04-02-50__5669e477-34d6-453c-ab09-37fbd9235550__wakuorg_nwaku:latest.log
2025-02-13 04:02:53.852 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 28545
2025-02-13 04:02:53.852 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-13 04:02:54.852 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28545/health" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:02:54.855 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-13 04:02:54.855 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-13 04:02:54.855 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28545/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-13 04:02:54.857 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.122.80/tcp/28546/p2p/16Uiu2HAm9Kaa1ZTJWtfePPos6UPbsh7Dk2aN7qA3HAUiSJMjVr7R","/ip4/172.18.122.80/tcp/28547/ws/p2p/16Uiu2HAm9Kaa1ZTJWtfePPos6UPbsh7Dk2aN7qA3HAUiSJMjVr7R"],"enrUri":"enr:-L24QLDHED-p3fgCd8p1OlFfvdOAEQzemzFhRvnXdQAcYIoSNVM_8iKWKQbwAChysUIDxH-iH8kZ_pCac--ZwQutvEYCgmlkgnY0gmlwhKwSelCKbXVsdGlhZGRyc5YACASsEnpQBm-CAAoErBJ6UAZvg90DgnJzhQADAQAAiXNlY3AyNTZrMaECznQD06l9Z-oCWeCE9_POfvQmO666hnBgL7WmEPB2UpiDdGNwgm-Cg3VkcIJvhIV3YWt1Mgg"}'
2025-02-13 04:02:54.857 INFO [src.node.waku_node] REST service is ready !!
2025-02-13 04:02:54.858 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28545/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.168.10/tcp/12035/p2p/16Uiu2HAm4sdaBxDW6YmKowvcv1kmyoFchAST55ehZvWsahUAAxsn"]'
2025-02-13 04:02:54.894 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:02:54.896 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28545/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.104.249/tcp/48062/p2p/16Uiu2HAkxhwD9Lv254oVUpG6iyjVhPnj4aghPt3h3hBhZhRLpy9p"]'
2025-02-13 04:02:54.921 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:02:54.924 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:12034/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-13 04:02:54.932 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:02:54.932 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:48061/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-13 04:02:54.937 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-13 04:02:54.942 DEBUG [src.steps.light_push] Lightpushing message
2025-02-13 04:02:54.942 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28545/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739419374941996800, "meta": "YWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYQ=="}}'
2025-02-13 04:02:54.953 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:28545/lightpush/v1/message. Response content: b'Failed to request a message push: decode_rpc_failure: (kind: InvalidLengthField, field: "meta")'
2025-02-13 04:02:54.955 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-13 04:02:54.956 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-13 04:02:54.956 DEBUG [src.node.waku_node] Stopping container with id ff8b61816260
2025-02-13 04:02:55.713 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 04:02:55.713 DEBUG [src.node.waku_node] Stopping container with id 841f317d1d52
2025-02-13 04:02:56.525 ERROR [src.node.docker_mananger] Max retries reached for container ff8b61816260. Exiting log stream.
2025-02-13 04:02:57.208 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 04:02:57.208 DEBUG [src.node.waku_node] Stopping container with id 6a9419a3cbaa
2025-02-13 04:02:58.019 ERROR [src.node.docker_mananger] Max retries reached for container 841f317d1d52. Exiting log stream.
2025-02-13 04:02:58.686 DEBUG [src.node.waku_node] Container stopped.
2025-02-13 04:02:58.686 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-13 04:02:58.694 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-13 04:02:58.701 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-13 04:02:58.707 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
