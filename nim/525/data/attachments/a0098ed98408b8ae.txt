[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_subscribe_with_invalid_pubsub_topic_format with id: 2024-12-15_11-22-22__e27d5a35-d89f-4a54-9d2c-af98c345c5ae
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-15_11-22-22__e27d5a35-d89f-4a54-9d2c-af98c345c5ae__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.135.220
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['21937', '21938', '21939', '21940', '21941']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 21937:21937 -p 21938:21938 -p 21939:21939 -p 21940:21940 -p 21941:21941 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=21939 --rest-port=21937 --tcp-port=21938 --discv5-udp-port=21940 --rest-address=0.0.0.0 --nat=extip:172.18.135.220 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=aafb592571526bc2c01b3a21bfeb9c869cddf6cb9caf5ee1cd9d311b7ca49fdb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=21941 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.135.220 waku de6a41ad4ab1c1bfa2b102d2705c0a0b225ff4e805b57b49f7942a9a1ad07c3b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID de6a41ad4ab1. Setting up logs at ./log/docker/node1_2024-12-15_11-22-22__e27d5a35-d89f-4a54-9d2c-af98c345c5ae__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 21937
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container a49d6abd6da1. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21937/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21937/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.135.220/tcp/21938/p2p/16Uiu2HAmSTyYc9eih5aeAh2c84h6xE4ChEu4K1kCBbHp3tEH2ftF","/ip4/172.18.135.220/tcp/21939/ws/p2p/16Uiu2HAmSTyYc9eih5aeAh2c84h6xE4ChEu4K1kCBbHp3tEH2ftF"],"enrUri":"enr:-L24QOYUdi4Vji8NOOYs_k4wtZyVJbuHV6bptq5DeAJa9djDGa_SO0uLHfKVPYE4sVaIlc2DpjNVjBen3m5VlAbO6csCgmlkgnY0gmlwhKwSh9yKbXVsdGlhZGRyc5YACASsEofcBlWyAAoErBKH3AZVs90DgnJzhQADAQAAiXNlY3AyNTZrMaEDzTFRZ6_voQSfu1Z2VVJtFvutw4sQSuhchM1cbZVmjfyDdGNwglWyg3VkcIJVtIV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-15_11-22-22__e27d5a35-d89f-4a54-9d2c-af98c345c5ae__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.184.242
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['30748', '30749', '30750', '30751', '30752']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 30748:30748 -p 30749:30749 -p 30750:30750 -p 30751:30751 -p 30752:30752 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=30750 --rest-port=30748 --tcp-port=30749 --discv5-udp-port=30751 --rest-address=0.0.0.0 --nat=extip:172.18.184.242 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c2b0dc49dbcd23e30fc4a42fafceaf30fdd731c3e18e9209c0be624c2e03b30a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=30752 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QOYUdi4Vji8NOOYs_k4wtZyVJbuHV6bptq5DeAJa9djDGa_SO0uLHfKVPYE4sVaIlc2DpjNVjBen3m5VlAbO6csCgmlkgnY0gmlwhKwSh9yKbXVsdGlhZGRyc5YACASsEofcBlWyAAoErBKH3AZVs90DgnJzhQADAQAAiXNlY3AyNTZrMaEDzTFRZ6_voQSfu1Z2VVJtFvutw4sQSuhchM1cbZVmjfyDdGNwglWyg3VkcIJVtIV3YWt1MgU --filternode=/ip4/172.18.135.220/tcp/21938/p2p/16Uiu2HAmSTyYc9eih5aeAh2c84h6xE4ChEu4K1kCBbHp3tEH2ftF
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.184.242 waku a87cba9db57ef0598ce33130ed022e9b8f8915a85eb6d79a111e99b45194ed38
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID a87cba9db57e. Setting up logs at ./log/docker/node2_2024-12-15_11-22-22__e27d5a35-d89f-4a54-9d2c-af98c345c5ae__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 30748
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30748/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30748/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.184.242/tcp/30749/p2p/16Uiu2HAmLrBnHjnUg3wRiJYDGf8ZcWEnkscEBtztjrPtPBwUC6iJ","/ip4/172.18.184.242/tcp/30750/ws/p2p/16Uiu2HAmLrBnHjnUg3wRiJYDGf8ZcWEnkscEBtztjrPtPBwUC6iJ"],"enrUri":"enr:-L24QChyZeTaz5Y5YybHOmxBTbayN6-qsg9-HANVvrgVQRIxM25Pt8szR0MwlUwIccm0dL-5YTK32AqYXoEEfEoPuwsCgmlkgnY0gmlwhKwSuPKKbXVsdGlhZGRyc5YACASsErjyBngdAAoErBK48gZ4Ht0DgnJzhQADAQAAiXNlY3AyNTZrMaEDebvPNbQB5q3e9oDDQ6fXEE8AWU-kp4bfhJsb9oOD07eDdGNwgngdg3VkcIJ4H4V3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30748/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.135.220/tcp/21938/p2p/16Uiu2HAmSTyYc9eih5aeAh2c84h6xE4ChEu4K1kCBbHp3tEH2ftF"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21937/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30748/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "a874ecba-887c-420b-b682-a8105689da24", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"a874ecba-887c-420b-b682-a8105689da24","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30748/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": ["/waku/2/rs/3/1"]}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:30748/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id de6a41ad4ab1
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id a87cba9db57e
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container de6a41ad4ab1. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.