[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_subscribe_with_invalid_request_id with id: 2024-11-24_04-11-41__2947ef12-378d-4bda-9f46-6a0bfef11af6
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-24_04-11-41__2947ef12-378d-4bda-9f46-6a0bfef11af6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.240.197
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['54645', '54646', '54647', '54648', '54649']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 54645:54645 -p 54646:54646 -p 54647:54647 -p 54648:54648 -p 54649:54649 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=54647 --rest-port=54645 --tcp-port=54646 --discv5-udp-port=54648 --rest-address=0.0.0.0 --nat=extip:172.18.240.197 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fcefd0541d545030bb76ca8823ce4cabfb8957da7d4ae4f7b1bbdafe27ddcb28 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=54649 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.240.197 waku 1ab1fbce4d5df5f174fe0d59f3ef72f23944288018499b5253ddbe2331ae0a9f
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 3ed5d48078ae. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 1ab1fbce4d5d. Setting up logs at ./log/docker/node1_2024-11-24_04-11-41__2947ef12-378d-4bda-9f46-6a0bfef11af6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 54645
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54645/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54645/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.240.197/tcp/54646/p2p/16Uiu2HAmHLWADxsSqkPRAK581QPfnhZyRb3TD8VmmVyxPLdmYU4w","/ip4/172.18.240.197/tcp/54647/ws/p2p/16Uiu2HAmHLWADxsSqkPRAK581QPfnhZyRb3TD8VmmVyxPLdmYU4w"],"enrUri":"enr:-L24QMG4j_HFaYa8-NEIo3qEuDe4l-cdXM9fF8jVrV97kRzhCZI0IPIA7lTINIGDENKOVzC7pzdzC8lN5mEKGIsvcukCgmlkgnY0gmlwhKwS8MWKbXVsdGlhZGRyc5YACASsEvDFBtV2AAoErBLwxQbVd90DgnJzhQADAQAAiXNlY3AyNTZrMaEDRY4ayg-WuFqZKoSXDKcX8u-A_a5_c3zCrjp0RToajIiDdGNwgtV2g3VkcILVeIV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-11-24_04-11-41__2947ef12-378d-4bda-9f46-6a0bfef11af6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.128.163
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['14410', '14411', '14412', '14413', '14414']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 14410:14410 -p 14411:14411 -p 14412:14412 -p 14413:14413 -p 14414:14414 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14412 --rest-port=14410 --tcp-port=14411 --discv5-udp-port=14413 --rest-address=0.0.0.0 --nat=extip:172.18.128.163 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ffff7a365acaae0f4e1f6cf8e405fb9db7cf49acac2e35b270ce6f3be73654c7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14414 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QMG4j_HFaYa8-NEIo3qEuDe4l-cdXM9fF8jVrV97kRzhCZI0IPIA7lTINIGDENKOVzC7pzdzC8lN5mEKGIsvcukCgmlkgnY0gmlwhKwS8MWKbXVsdGlhZGRyc5YACASsEvDFBtV2AAoErBLwxQbVd90DgnJzhQADAQAAiXNlY3AyNTZrMaEDRY4ayg-WuFqZKoSXDKcX8u-A_a5_c3zCrjp0RToajIiDdGNwgtV2g3VkcILVeIV3YWt1MgU --filternode=/ip4/172.18.240.197/tcp/54646/p2p/16Uiu2HAmHLWADxsSqkPRAK581QPfnhZyRb3TD8VmmVyxPLdmYU4w
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.128.163 waku 0ddd017802e148f604317abeeb127479d4cfd357289f72a3ac3b9cea20be352b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 0ddd017802e1. Setting up logs at ./log/docker/node2_2024-11-24_04-11-41__2947ef12-378d-4bda-9f46-6a0bfef11af6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 14410
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14410/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14410/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.128.163/tcp/14411/p2p/16Uiu2HAkxu7apoNKhje1EVRzeEUKC7HpXE37979kJ1PyE5yZEQ6a","/ip4/172.18.128.163/tcp/14412/ws/p2p/16Uiu2HAkxu7apoNKhje1EVRzeEUKC7HpXE37979kJ1PyE5yZEQ6a"],"enrUri":"enr:-L24QGK1PeZd49Jsc5WOPf9yHSQrdU49BZ9_YLJEIXDP7If-XyJBIh4PlntEWQI3Q2qLfNQk7vJXXHTN5aDK1KC-pqMCgmlkgnY0gmlwhKwSgKOKbXVsdGlhZGRyc5YACASsEoCjBjhLAAoErBKAowY4TN0DgnJzhQADAQAAiXNlY3AyNTZrMaECM5qxciYUrOmwC8EFPemx3GwzB822_3hSlPqEAHyGDgeDdGNwgjhLg3VkcII4TYV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14410/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.240.197/tcp/54646/p2p/16Uiu2HAmHLWADxsSqkPRAK581QPfnhZyRb3TD8VmmVyxPLdmYU4w"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54645/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14410/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "8301232d-f7bd-460e-a724-93f3549b0af8", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"8301232d-f7bd-460e-a724-93f3549b0af8","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14410/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": 1, "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:14410/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 1ab1fbce4d5d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 0ddd017802e1
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 1ab1fbce4d5d. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.