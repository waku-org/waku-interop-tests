[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_node_not_connected_directly_to_lightpushing_node with id: 2024-11-24_04-03-32__023e8873-bbb9-4ab4-a9b2-1f8453092918
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-24_04-03-32__023e8873-bbb9-4ab4-a9b2-1f8453092918__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-11-24_04-03-32__023e8873-bbb9-4ab4-a9b2-1f8453092918__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-11-24_04-03-32__023e8873-bbb9-4ab4-a9b2-1f8453092918__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.170.155
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['58780', '58781', '58782', '58783', '58784']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 58780:58780 -p 58781:58781 -p 58782:58782 -p 58783:58783 -p 58784:58784 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=58782 --rest-port=58780 --tcp-port=58781 --discv5-udp-port=58783 --rest-address=0.0.0.0 --nat=extip:172.18.170.155 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6aef7e5a56693e96dcca0d2dfafcfe1b1df05a98c2d3a2fa117ed83a9fe98da7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=58784 --metrics-logging=true --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.170.155 waku 5d481189f090bb7ddd8d7a02cbb8a22c86a489c9eebb6c462539ff25406b6c43
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 5d481189f090. Setting up logs at ./log/docker/node1_2024-11-24_04-03-32__023e8873-bbb9-4ab4-a9b2-1f8453092918__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 58780
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container e99d23b21ca7. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58780/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58780/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.170.155/tcp/58781/p2p/16Uiu2HAm61F1zepVajFV8MrurzQAZ6BRW7oyzKrfMAUfTJ7b1JLG","/ip4/172.18.170.155/tcp/58782/ws/p2p/16Uiu2HAm61F1zepVajFV8MrurzQAZ6BRW7oyzKrfMAUfTJ7b1JLG"],"enrUri":"enr:-L24QMGVQx7nxhVWAObZdBBeZNS8tvjwcBRAE0aoQAJJvT0ESTQywMfjj7lWOJiVSH9a47-XQw0Db36421I1uhAXjcACgmlkgnY0gmlwhKwSqpuKbXVsdGlhZGRyc5YACASsEqqbBuWdAAoErBKqmwblnt0DgnJzhQADAQAAiXNlY3AyNTZrMaECnS5kYGhRfRLbQ59CzrnmEDA4yahXQdbwhGS5F1PIpOGDdGNwguWdg3VkcILln4V3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.0.130
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['16065', '16066', '16067', '16068', '16069']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 16065:16065 -p 16066:16066 -p 16067:16067 -p 16068:16068 -p 16069:16069 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=16067 --rest-port=16065 --tcp-port=16066 --discv5-udp-port=16068 --rest-address=0.0.0.0 --nat=extip:172.18.0.130 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3e1ea7cd1a29eafc5c61de3cf969bece902abbb03ca88c9a23be8dfeaf4babfc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=16069 --metrics-logging=true --lightpush=true --filter=true --relay=true --discv5-bootstrap-node=enr:-L24QMGVQx7nxhVWAObZdBBeZNS8tvjwcBRAE0aoQAJJvT0ESTQywMfjj7lWOJiVSH9a47-XQw0Db36421I1uhAXjcACgmlkgnY0gmlwhKwSqpuKbXVsdGlhZGRyc5YACASsEqqbBuWdAAoErBKqmwblnt0DgnJzhQADAQAAiXNlY3AyNTZrMaECnS5kYGhRfRLbQ59CzrnmEDA4yahXQdbwhGS5F1PIpOGDdGNwguWdg3VkcILln4V3YWt1Mgk --lightpushnode=/ip4/172.18.170.155/tcp/58781/p2p/16Uiu2HAm61F1zepVajFV8MrurzQAZ6BRW7oyzKrfMAUfTJ7b1JLG
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.0.130 waku d9e3a8615493045ae1375768bc324822b60258e658a3d3fd7a9f102c17f41fcb
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID d9e3a8615493. Setting up logs at ./log/docker/node2_2024-11-24_04-03-32__023e8873-bbb9-4ab4-a9b2-1f8453092918__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 16065
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16065/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16065/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.0.130/tcp/16066/p2p/16Uiu2HAmBeUwsH8g8F7NwZ758XZdCMauN1jvLCTtqc4KBNNdmxfC","/ip4/172.18.0.130/tcp/16067/ws/p2p/16Uiu2HAmBeUwsH8g8F7NwZ758XZdCMauN1jvLCTtqc4KBNNdmxfC"],"enrUri":"enr:-L24QPk3qw1q76ZDSgXtGyhUHw-AyPth9ACgzAzSJ6SXAdF1dMQ7OnqL_FizllrGq-VeLahoNHXZEkBv8G9Iyz_puL4CgmlkgnY0gmlwhKwSAIKKbXVsdGlhZGRyc5YACASsEgCCBj7CAAoErBIAggY-w90DgnJzhQADAQAAiXNlY3AyNTZrMaEC8QMQ6QvEeSxcYiDEQKqgiCjJ57mV5cJx1IntzPbYvuODdGNwgj7Cg3VkcII-xIV3YWt1Mg0"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.213.104
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['32798', '32799', '32800', '32801', '32802']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 32798:32798 -p 32799:32799 -p 32800:32800 -p 32801:32801 -p 32802:32802 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32800 --rest-port=32798 --tcp-port=32799 --discv5-udp-port=32801 --rest-address=0.0.0.0 --nat=extip:172.18.213.104 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c0928f7dd2dcea2da3ef1cda00ec3921dabed6c84a8b70fcce9bfdd93bf6ca55 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32802 --metrics-logging=true --relay=false --filternode=/ip4/172.18.0.130/tcp/16066/p2p/16Uiu2HAmBeUwsH8g8F7NwZ758XZdCMauN1jvLCTtqc4KBNNdmxfC --discv5-bootstrap-node=enr:-L24QPk3qw1q76ZDSgXtGyhUHw-AyPth9ACgzAzSJ6SXAdF1dMQ7OnqL_FizllrGq-VeLahoNHXZEkBv8G9Iyz_puL4CgmlkgnY0gmlwhKwSAIKKbXVsdGlhZGRyc5YACASsEgCCBj7CAAoErBIAggY-w90DgnJzhQADAQAAiXNlY3AyNTZrMaEC8QMQ6QvEeSxcYiDEQKqgiCjJ57mV5cJx1IntzPbYvuODdGNwgj7Cg3VkcII-xIV3YWt1Mg0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.213.104 waku c6ddee035e55f41158ebcb7f8ec8176ba607e6c569f7aae06be1205aaac4697b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID c6ddee035e55. Setting up logs at ./log/docker/node3_2024-11-24_04-03-32__023e8873-bbb9-4ab4-a9b2-1f8453092918__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 32798
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32798/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32798/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.213.104/tcp/32799/p2p/16Uiu2HAm9M826oSBXYzjwq2t72e7buyuBVhvvHgukC3fP56cEtTV","/ip4/172.18.213.104/tcp/32800/ws/p2p/16Uiu2HAm9M826oSBXYzjwq2t72e7buyuBVhvvHgukC3fP56cEtTV"],"enrUri":"enr:-L24QBFlxpeHOGfHUJh13i4ZZra56dV59nrVKVkQHwkB1X-bGdn9OjNYwaAlNd4KoXMR5uStUQt5Yb8eHh5xHLr-YTgCgmlkgnY0gmlwhKwS1WiKbXVsdGlhZGRyc5YACASsEtVoBoAfAAoErBLVaAaAIN0DgnJzhQADAQAAiXNlY3AyNTZrMaECztkn_JgGL3pxlLFI4KAVQSpuptHOPUJ9PfKbgIKhC4SDdGNwgoAfg3VkcIKAIYV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:58780/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16065/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32798/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58780/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58780/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58780/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.0.130/tcp/16066/p2p/16Uiu2HAmBeUwsH8g8F7NwZ758XZdCMauN1jvLCTtqc4KBNNdmxfC","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16065/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.170.155/tcp/58781/p2p/16Uiu2HAm61F1zepVajFV8MrurzQAZ6BRW7oyzKrfMAUfTJ7b1JLG","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true}],"origin":"Discv5"},{"multiaddr":"/ip4/172.18.213.104/tcp/32799/p2p/16Uiu2HAm9M826oSBXYzjwq2t72e7buyuBVhvvHgukC3fP56cEtTV","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32798/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.0.130/tcp/16066/p2p/16Uiu2HAmBeUwsH8g8F7NwZ758XZdCMauN1jvLCTtqc4KBNNdmxfC","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:58780/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1732421048655168768}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32798/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1732421048655168768,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 5d481189f090
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id d9e3a8615493
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 5d481189f090. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id c6ddee035e55
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container d9e3a8615493. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.