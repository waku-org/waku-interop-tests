[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_subscribe_to_pubsub_topic_from_another_cluster_id with id: 2024-12-12_08-59-01__ec222033-4b32-4843-bc15-cb51f69839b0
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-12_08-59-01__ec222033-4b32-4843-bc15-cb51f69839b0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.132.156
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['1782', '1783', '1784', '1785', '1786']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 1782:1782 -p 1783:1783 -p 1784:1784 -p 1785:1785 -p 1786:1786 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=1784 --rest-port=1782 --tcp-port=1783 --discv5-udp-port=1785 --rest-address=0.0.0.0 --nat=extip:172.18.132.156 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fef5b7c7dfd5db6b9fc6fa3cffd1f10e9e4cdcb84ebd4ebdc6cbd8a6a62a96df --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=1786 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.132.156 waku 5bc009d99b9e2142961fc6b37a14be8f62b6cb9bdb8833f88269116509cd0da3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 5bc009d99b9e. Setting up logs at ./log/docker/node1_2024-12-12_08-59-01__ec222033-4b32-4843-bc15-cb51f69839b0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 1782
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 82e173a86465. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1782/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1782/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.132.156/tcp/1783/p2p/16Uiu2HAmTELLG9j9bR5iTyN4D6acReu32WMgpPAwDJtUcpetkBmK","/ip4/172.18.132.156/tcp/1784/ws/p2p/16Uiu2HAmTELLG9j9bR5iTyN4D6acReu32WMgpPAwDJtUcpetkBmK"],"enrUri":"enr:-L24QEyhWloIEM0f518l0V2yrGeIoUHCcM9RRrkWOZHJeWtVcCSRtJnKGcGm6etNVsNl8ejRe2fLpCm2lNEcfOW_mAYCgmlkgnY0gmlwhKwShJyKbXVsdGlhZGRyc5YACASsEoScBgb3AAoErBKEnAYG-N0DgnJzhQADAQAAiXNlY3AyNTZrMaED2I5gsSEthRFD2sFTwNIJQB05SrViKxGqenR5KdRvLrqDdGNwggb3g3VkcIIG-YV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-12_08-59-01__ec222033-4b32-4843-bc15-cb51f69839b0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.34.151
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['41441', '41442', '41443', '41444', '41445']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 41441:41441 -p 41442:41442 -p 41443:41443 -p 41444:41444 -p 41445:41445 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=41443 --rest-port=41441 --tcp-port=41442 --discv5-udp-port=41444 --rest-address=0.0.0.0 --nat=extip:172.18.34.151 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ba78083c4a4e7dd8aede15e8c3aaf30f8bd55d4d4ae2ab1fdacb53df2cad58da --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=41445 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QEyhWloIEM0f518l0V2yrGeIoUHCcM9RRrkWOZHJeWtVcCSRtJnKGcGm6etNVsNl8ejRe2fLpCm2lNEcfOW_mAYCgmlkgnY0gmlwhKwShJyKbXVsdGlhZGRyc5YACASsEoScBgb3AAoErBKEnAYG-N0DgnJzhQADAQAAiXNlY3AyNTZrMaED2I5gsSEthRFD2sFTwNIJQB05SrViKxGqenR5KdRvLrqDdGNwggb3g3VkcIIG-YV3YWt1MgU --filternode=/ip4/172.18.132.156/tcp/1783/p2p/16Uiu2HAmTELLG9j9bR5iTyN4D6acReu32WMgpPAwDJtUcpetkBmK
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.34.151 waku a54dba52005715f84c9f70e348b97e5377bd431fa0ac618d7d2d6008228da658
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID a54dba520057. Setting up logs at ./log/docker/node2_2024-12-12_08-59-01__ec222033-4b32-4843-bc15-cb51f69839b0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 41441
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41441/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41441/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.34.151/tcp/41442/p2p/16Uiu2HAm7DtXjUThwrbkYR9ww7c78v1JiBPAtVKzvaqPMqrzGKrB","/ip4/172.18.34.151/tcp/41443/ws/p2p/16Uiu2HAm7DtXjUThwrbkYR9ww7c78v1JiBPAtVKzvaqPMqrzGKrB"],"enrUri":"enr:-L24QLQuEn4leVUj9a-jzvgg7QQrjh3ffjnfZN50BptoduPFWxxm37Rb3Wy1xH9WFF0c0vh53oAKr5U93xrnXXEuxEICgmlkgnY0gmlwhKwSIpeKbXVsdGlhZGRyc5YACASsEiKXBqHiAAoErBIilwah490DgnJzhQADAQAAiXNlY3AyNTZrMaECr0d26hlrWLOaDgB52VLFZYWAG8FlOcWhM3d3kcC5XDSDdGNwgqHig3VkcIKh5IV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41441/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.132.156/tcp/1783/p2p/16Uiu2HAmTELLG9j9bR5iTyN4D6acReu32WMgpPAwDJtUcpetkBmK"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1782/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/2"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41441/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "0be4e4a7-7541-44eb-a57d-c6c256f67c3a", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/2/2"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"0be4e4a7-7541-44eb-a57d-c6c256f67c3a","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1782/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41441/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1733993944368744960,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 5bc009d99b9e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id a54dba520057
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 5bc009d99b9e. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.