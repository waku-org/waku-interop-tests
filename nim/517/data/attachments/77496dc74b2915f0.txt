[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_payloads with id: 2024-12-12_09-02-20__858da9c1-1025-4382-8ac7-d9509a2e6c7d
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-12-12_09-02-20__858da9c1-1025-4382-8ac7-d9509a2e6c7d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.97.231
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['43388', '43389', '43390', '43391', '43392']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 43388:43388 -p 43389:43389 -p 43390:43390 -p 43391:43391 -p 43392:43392 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=43390 --rest-port=43388 --tcp-port=43389 --discv5-udp-port=43391 --rest-address=0.0.0.0 --nat=extip:172.18.97.231 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dabcfdf02a7f68998379a203fb1ac59358eadd499f2c4070ccecceeaf9ab6c6d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=43392 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.97.231 waku 1ed823cce416b5100c0c4dd71bc76f1e546ddcae4d245f6ad6988a3d2e8f68b7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 1ed823cce416. Setting up logs at ./log/docker/receiving_node1_2024-12-12_09-02-20__858da9c1-1025-4382-8ac7-d9509a2e6c7d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 43388
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 7c7f173d0a12. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43388/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43388/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.97.231/tcp/43389/p2p/16Uiu2HAm6DPxKhw8q3yAhQawBXCXp2XjmTj3NKbd89MXfSeYQqCR","/ip4/172.18.97.231/tcp/43390/ws/p2p/16Uiu2HAm6DPxKhw8q3yAhQawBXCXp2XjmTj3NKbd89MXfSeYQqCR"],"enrUri":"enr:-L24QAgYlfK0zGaFTy5JLHsKIQjHuVq8KUZVEcifq1Z3F2ELVG8Py8z3frvGR1_h2qrXW1cRlOVJIcsakGhdtg0rZkgCgmlkgnY0gmlwhKwSYeeKbXVsdGlhZGRyc5YACASsEmHnBql9AAoErBJh5wapft0DgnJzhQADAQAAiXNlY3AyNTZrMaECoEt3cJ4AFuQ5-ya8SA_RXEIkRcW2sYb7pRbf59it0T6DdGNwgql9g3VkcIKpf4V3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-12-12_09-02-20__858da9c1-1025-4382-8ac7-d9509a2e6c7d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.54.25
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['26372', '26373', '26374', '26375', '26376']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 26372:26372 -p 26373:26373 -p 26374:26374 -p 26375:26375 -p 26376:26376 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26374 --rest-port=26372 --tcp-port=26373 --discv5-udp-port=26375 --rest-address=0.0.0.0 --nat=extip:172.18.54.25 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6dbd0d41810f7dfb9f983069fb54acaf455ebcfdc72f176f01a7dee2ceab9b85 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26376 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.54.25 waku 925df75ed70fec2584dc982ef921a0d43465d017fee3b00209127544692ef39e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 925df75ed70f. Setting up logs at ./log/docker/receiving_node2_2024-12-12_09-02-20__858da9c1-1025-4382-8ac7-d9509a2e6c7d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 26372
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26372/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26372/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.54.25/tcp/26373/p2p/16Uiu2HAm8yyyfe9qLpwfEEqSAJFf5J2cfkJaNDNMJpqpnDmKjirb","/ip4/172.18.54.25/tcp/26374/ws/p2p/16Uiu2HAm8yyyfe9qLpwfEEqSAJFf5J2cfkJaNDNMJpqpnDmKjirb"],"enrUri":"enr:-L24QBfCdYH_OkalusKHUUpOpVYpOicoxTBbyzbBzxlRDpBHHQ756vZQXMXwD46cOD-M8dF8GQprwNgHwDNh9F0PW2MCgmlkgnY0gmlwhKwSNhmKbXVsdGlhZGRyc5YACASsEjYZBmcFAAoErBI2GQZnBt0DgnJzhQADAQAAiXNlY3AyNTZrMaECyW7dutThS9u4qX2tcCJ8QXrt4vvtbBZIONpNJtIpabCDdGNwgmcFg3VkcIJnB4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26372/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.97.231/tcp/43389/p2p/16Uiu2HAm6DPxKhw8q3yAhQawBXCXp2XjmTj3NKbd89MXfSeYQqCR"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-12-12_09-02-20__858da9c1-1025-4382-8ac7-d9509a2e6c7d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.224.191
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['13833', '13834', '13835', '13836', '13837']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 13833:13833 -p 13834:13834 -p 13835:13835 -p 13836:13836 -p 13837:13837 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=13835 --rest-port=13833 --tcp-port=13834 --discv5-udp-port=13836 --rest-address=0.0.0.0 --nat=extip:172.18.224.191 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f9bb0f275de2a0c033d3bbdfaaa685f7e35fd5dfb2df7eeafcbf1cf1dcfcf527 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=13837 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QAgYlfK0zGaFTy5JLHsKIQjHuVq8KUZVEcifq1Z3F2ELVG8Py8z3frvGR1_h2qrXW1cRlOVJIcsakGhdtg0rZkgCgmlkgnY0gmlwhKwSYeeKbXVsdGlhZGRyc5YACASsEmHnBql9AAoErBJh5wapft0DgnJzhQADAQAAiXNlY3AyNTZrMaECoEt3cJ4AFuQ5-ya8SA_RXEIkRcW2sYb7pRbf59it0T6DdGNwgql9g3VkcIKpf4V3YWt1Mgk --lightpushnode=/ip4/172.18.97.231/tcp/43389/p2p/16Uiu2HAm6DPxKhw8q3yAhQawBXCXp2XjmTj3NKbd89MXfSeYQqCR --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.224.191 waku a3f7f870e073048f2ccf21e4053994726c586fc16af4c454828bd807ff8129db
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID a3f7f870e073. Setting up logs at ./log/docker/lightpush_node1_2024-12-12_09-02-20__858da9c1-1025-4382-8ac7-d9509a2e6c7d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 13833
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13833/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13833/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.224.191/tcp/13834/p2p/16Uiu2HAmJ91cWJLJj9RsM8U2zXb2pHB5Fppuq3zs5QbuAMpao9LH","/ip4/172.18.224.191/tcp/13835/ws/p2p/16Uiu2HAmJ91cWJLJj9RsM8U2zXb2pHB5Fppuq3zs5QbuAMpao9LH"],"enrUri":"enr:-L24QP8zZYvMpGLc42g6NYiN16mXpr-i7em4jmU6ZH8SkU4EYfIqboDJXQtyKIBcNs2OjwvE9RAJKmfw-4HpvEPZ_00CgmlkgnY0gmlwhKwS4L-KbXVsdGlhZGRyc5YACASsEuC_BjYKAAoErBLgvwY2C90DgnJzhQADAQAAiXNlY3AyNTZrMaEDUXgf53VB-tql5E3ysshSXu5psAkPtr1Akm9Uj0HVB56DdGNwgjYKg3VkcII2DIV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13833/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.97.231/tcp/43389/p2p/16Uiu2HAm6DPxKhw8q3yAhQawBXCXp2XjmTj3NKbd89MXfSeYQqCR"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13833/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.54.25/tcp/26373/p2p/16Uiu2HAm8yyyfe9qLpwfEEqSAJFf5J2cfkJaNDNMJpqpnDmKjirb"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43388/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26372/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload Empty string
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13833/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1733994144013950208}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:13833/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload Unecoded text
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13833/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "Hello World!", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1733994144020247552}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:13833/lightpush/v1/message. Response content: b'Invalid message: Incorrect base64 string'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload A dictionary
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13833/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": {"key": "YWFh"}, "contentTopic": "/myapp/1/latest/proto", "timestamp": 1733994144027782400}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:13833/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload An integer
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13833/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": 1234567890, "contentTopic": "/myapp/1/latest/proto", "timestamp": 1733994144031895040}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:13833/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload A list
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13833/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": ["YWFh"], "contentTopic": "/myapp/1/latest/proto", "timestamp": 1733994144035515648}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:13833/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload A bool
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13833/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": true, "contentTopic": "/myapp/1/latest/proto", "timestamp": 1733994144039478784}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:13833/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 1ed823cce416
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 925df75ed70f
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 1ed823cce416. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id a3f7f870e073
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 925df75ed70f. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.