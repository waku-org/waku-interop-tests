[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_relay_receiving_node_not_connected_directly_to_relaying_node with id: 2024-12-12_08-52-17__d7913313-3af4-40a3-ab31-847966daa9d5
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-12_08-52-17__d7913313-3af4-40a3-ab31-847966daa9d5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-12_08-52-17__d7913313-3af4-40a3-ab31-847966daa9d5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-12-12_08-52-17__d7913313-3af4-40a3-ab31-847966daa9d5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.92.239
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['35075', '35076', '35077', '35078', '35079']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 35075:35075 -p 35076:35076 -p 35077:35077 -p 35078:35078 -p 35079:35079 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=35077 --rest-port=35075 --tcp-port=35076 --discv5-udp-port=35078 --rest-address=0.0.0.0 --nat=extip:172.18.92.239 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6c1c0baaf94a8fd3adf96102242fff7cbdb6a828fbdce0089e57cae63cc54b4c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=35079 --metrics-logging=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.92.239 waku 2e0410b3ecd8fba45bf8c153e478c2a4a23ad1458a880cf95960cfa9754cbdad
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 2e0410b3ecd8. Setting up logs at ./log/docker/node1_2024-12-12_08-52-17__d7913313-3af4-40a3-ab31-847966daa9d5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 35075
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 1f71406fe2c7. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35075/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35075/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.92.239/tcp/35076/p2p/16Uiu2HAkzWsu1hot76HgM836M2P6y5HbFEpinwpdm7wg9dMGDGsU","/ip4/172.18.92.239/tcp/35077/ws/p2p/16Uiu2HAkzWsu1hot76HgM836M2P6y5HbFEpinwpdm7wg9dMGDGsU"],"enrUri":"enr:-L24QGWLcJ-DClWHlZJi0GlExFQ7Y4dxnxI9LhsjtsMCv-HHJcQ39PEI1wF4IDPBgOKADFwU3Hp9GxxTVoAVk8_kpCECgmlkgnY0gmlwhKwSXO-KbXVsdGlhZGRyc5YACASsElzvBokEAAoErBJc7waJBd0DgnJzhQADAQAAiXNlY3AyNTZrMaECS5_QXU306x4IkaFdqO8GFxqb5waBCJcgyvZ9ZrIqLtuDdGNwgokEg3VkcIKJBoV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.24.199
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['63526', '63527', '63528', '63529', '63530']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 63526:63526 -p 63527:63527 -p 63528:63528 -p 63529:63529 -p 63530:63530 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63528 --rest-port=63526 --tcp-port=63527 --discv5-udp-port=63529 --rest-address=0.0.0.0 --nat=extip:172.18.24.199 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=caead5ffb9b7cc806ceafc66f6ad15b11efa0e5dd5ab78f2bcc76fea488c308f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63530 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QGWLcJ-DClWHlZJi0GlExFQ7Y4dxnxI9LhsjtsMCv-HHJcQ39PEI1wF4IDPBgOKADFwU3Hp9GxxTVoAVk8_kpCECgmlkgnY0gmlwhKwSXO-KbXVsdGlhZGRyc5YACASsElzvBokEAAoErBJc7waJBd0DgnJzhQADAQAAiXNlY3AyNTZrMaECS5_QXU306x4IkaFdqO8GFxqb5waBCJcgyvZ9ZrIqLtuDdGNwgokEg3VkcIKJBoV3YWt1MgE
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.24.199 waku cd4efc14cea06ccba29cdcfcf4e9661b652f2fb16d52e98bb138b40fd5b4ee32
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID cd4efc14cea0. Setting up logs at ./log/docker/node2_2024-12-12_08-52-17__d7913313-3af4-40a3-ab31-847966daa9d5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 63526
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63526/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63526/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.24.199/tcp/63527/p2p/16Uiu2HAmEaZBn13BWTbkMp78wDfyLZsMNcLC3H4in1HvsBUVfNra","/ip4/172.18.24.199/tcp/63528/ws/p2p/16Uiu2HAmEaZBn13BWTbkMp78wDfyLZsMNcLC3H4in1HvsBUVfNra"],"enrUri":"enr:-L24QAESp6zZVPIPhDrB1QiUn1VEt_I16gRpVndl9owGevKYBLtNR1c5w7wK_b_ROnTtNysy_eevhe9eEp8PKXeEI6cCgmlkgnY0gmlwhKwSGMeKbXVsdGlhZGRyc5YACASsEhjHBvgnAAoErBIYxwb4KN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDHJSY-jN9L0l0pOKy_VfifOoi8sHmFsg7QV6eKxOgDz-DdGNwgvgng3VkcIL4KYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.17.16
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['55711', '55712', '55713', '55714', '55715']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 55711:55711 -p 55712:55712 -p 55713:55713 -p 55714:55714 -p 55715:55715 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55713 --rest-port=55711 --tcp-port=55712 --discv5-udp-port=55714 --rest-address=0.0.0.0 --nat=extip:172.18.17.16 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=db5759fcbd0da6bacc6e87eeebd87b96beeb2c32cc4ad4372c15d7fb4aae484f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55715 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QAESp6zZVPIPhDrB1QiUn1VEt_I16gRpVndl9owGevKYBLtNR1c5w7wK_b_ROnTtNysy_eevhe9eEp8PKXeEI6cCgmlkgnY0gmlwhKwSGMeKbXVsdGlhZGRyc5YACASsEhjHBvgnAAoErBIYxwb4KN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDHJSY-jN9L0l0pOKy_VfifOoi8sHmFsg7QV6eKxOgDz-DdGNwgvgng3VkcIL4KYV3YWt1MgE
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.17.16 waku 9b1c8a10df0c0124071b958e7569bd9ca22f2ce456504666b0be2baf1f495f33
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 9b1c8a10df0c. Setting up logs at ./log/docker/node3_2024-12-12_08-52-17__d7913313-3af4-40a3-ab31-847966daa9d5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 55711
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55711/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55711/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.17.16/tcp/55712/p2p/16Uiu2HAkwxiuPF5wubvAKfFbd5yLUgN7DExPFBnVuZjJByqrEn2c","/ip4/172.18.17.16/tcp/55713/ws/p2p/16Uiu2HAkwxiuPF5wubvAKfFbd5yLUgN7DExPFBnVuZjJByqrEn2c"],"enrUri":"enr:-L24QHdydF9ddWrLspP9PC_6LMNVs5JphUP1736FQ3H7rV1EN8xTEtwnjO7xFwoTfu8dtvi27olO4NxhqYXI1vd1UC4CgmlkgnY0gmlwhKwSERCKbXVsdGlhZGRyc5YACASsEhEQBtmgAAoErBIREAbZod0DgnJzhQADAQAAiXNlY3AyNTZrMaECJauvYevsfYEt6bwo_l26drE06muENbxtrqoY5aTE7cmDdGNwgtmgg3VkcILZooV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35075/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63526/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55711/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35075/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.24.199/tcp/63527/p2p/16Uiu2HAmEaZBn13BWTbkMp78wDfyLZsMNcLC3H4in1HvsBUVfNra","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63526/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.92.239/tcp/35076/p2p/16Uiu2HAkzWsu1hot76HgM836M2P6y5HbFEpinwpdm7wg9dMGDGsU","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"},{"multiaddr":"/ip4/172.18.17.16/tcp/55712/p2p/16Uiu2HAkwxiuPF5wubvAKfFbd5yLUgN7DExPFBnVuZjJByqrEn2c","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55711/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.24.199/tcp/63527/p2p/16Uiu2HAmEaZBn13BWTbkMp78wDfyLZsMNcLC3H4in1HvsBUVfNra","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35075/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.relay:relay.py:123 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55711/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1733993571548110592,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 2e0410b3ecd8
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id cd4efc14cea0
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 2e0410b3ecd8. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 9b1c8a10df0c
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container cd4efc14cea0. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.