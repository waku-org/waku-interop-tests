[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_pubsub_topics with id: 2024-12-12_09-09-50__9378e432-c13c-4609-befe-7a435d75d6a3
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-12-12_09-09-50__9378e432-c13c-4609-befe-7a435d75d6a3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.116.186
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['20435', '20436', '20437', '20438', '20439']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 20435:20435 -p 20436:20436 -p 20437:20437 -p 20438:20438 -p 20439:20439 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20437 --rest-port=20435 --tcp-port=20436 --discv5-udp-port=20438 --rest-address=0.0.0.0 --nat=extip:172.18.116.186 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f3504b8da9d645aeed8adef2ecb52bbac1aa5bbe8a2cbcd7ebabed3a8e1ae5e9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20439 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.116.186 waku a9b89e6a3b8ce4f21aeb5cb6e6c633d441874f1a70c901e7039fc378a9a307cf
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID a9b89e6a3b8c. Setting up logs at ./log/docker/receiving_node1_2024-12-12_09-09-50__9378e432-c13c-4609-befe-7a435d75d6a3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 20435
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 5ecf5025e324. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20435/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20435/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.116.186/tcp/20436/p2p/16Uiu2HAmHSTNycJfMuY3E5FUYHud34if9r2a521LibwEsTYZTkUU","/ip4/172.18.116.186/tcp/20437/ws/p2p/16Uiu2HAmHSTNycJfMuY3E5FUYHud34if9r2a521LibwEsTYZTkUU"],"enrUri":"enr:-L24QG4FTFRL1zEx_1WOllhJpNPx-voBRGGWZhep3kTiSPUGVrZU3JSClkj30PHNBP_MNHeFrLefY4uRmy5dqMOp3coCgmlkgnY0gmlwhKwSdLqKbXVsdGlhZGRyc5YACASsEnS6Bk_UAAoErBJ0ugZP1d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDRxRyLO3hAixlbH5VB7zhNJa7xxaici8Gbh98zmHAfDWDdGNwgk_Ug3VkcIJP1oV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-12-12_09-09-50__9378e432-c13c-4609-befe-7a435d75d6a3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.98.158
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['24317', '24318', '24319', '24320', '24321']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 24317:24317 -p 24318:24318 -p 24319:24319 -p 24320:24320 -p 24321:24321 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=24319 --rest-port=24317 --tcp-port=24318 --discv5-udp-port=24320 --rest-address=0.0.0.0 --nat=extip:172.18.98.158 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=63afd9ba26d2514b1cdfdf772544fdafdcffce5f7b650f0b24cf3acabcd8e83a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=24321 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.98.158 waku f083900d37152bd7d5e16f57ffcfd955ac8cee3f5c9bf41e39cba2739a4085cc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID f083900d3715. Setting up logs at ./log/docker/receiving_node2_2024-12-12_09-09-50__9378e432-c13c-4609-befe-7a435d75d6a3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 24317
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24317/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24317/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.98.158/tcp/24318/p2p/16Uiu2HAmCL7DSrsss449U8H6Jam7MZL1MsVsY8WGBUduxN64z1jg","/ip4/172.18.98.158/tcp/24319/ws/p2p/16Uiu2HAmCL7DSrsss449U8H6Jam7MZL1MsVsY8WGBUduxN64z1jg"],"enrUri":"enr:-L24QATMdBMVck81A7sdGzn8uLxcklTzo0X7AN2b_iRsFfDyCL0WJLyv0CVkrY_twhGWwWgk_LPU0wkPnYJWQkSJvJICgmlkgnY0gmlwhKwSYp6KbXVsdGlhZGRyc5YACASsEmKeBl7-AAoErBJingZe_90DgnJzhQADAQAAiXNlY3AyNTZrMaEC-ym6BcS33Fb8Hl3a2dYU4tVw7Cijh-VuEAmfxKCxnKODdGNwgl7-g3VkcIJfAIV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24317/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.116.186/tcp/20436/p2p/16Uiu2HAmHSTNycJfMuY3E5FUYHud34if9r2a521LibwEsTYZTkUU"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-12-12_09-09-50__9378e432-c13c-4609-befe-7a435d75d6a3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.8.222
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['40149', '40150', '40151', '40152', '40153']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 40149:40149 -p 40150:40150 -p 40151:40151 -p 40152:40152 -p 40153:40153 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40151 --rest-port=40149 --tcp-port=40150 --discv5-udp-port=40152 --rest-address=0.0.0.0 --nat=extip:172.18.8.222 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3a27de8c83ddc6acdef27eb9db099f442cc007e0fe413b9b2ab3cd4c7a7ecc84 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40153 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QG4FTFRL1zEx_1WOllhJpNPx-voBRGGWZhep3kTiSPUGVrZU3JSClkj30PHNBP_MNHeFrLefY4uRmy5dqMOp3coCgmlkgnY0gmlwhKwSdLqKbXVsdGlhZGRyc5YACASsEnS6Bk_UAAoErBJ0ugZP1d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDRxRyLO3hAixlbH5VB7zhNJa7xxaici8Gbh98zmHAfDWDdGNwgk_Ug3VkcIJP1oV3YWt1Mgk --lightpushnode=/ip4/172.18.116.186/tcp/20436/p2p/16Uiu2HAmHSTNycJfMuY3E5FUYHud34if9r2a521LibwEsTYZTkUU --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.8.222 waku 7e99c505be37b313b806579b2b87960b665c48a10f06de5677ba56d4ae8639f6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 7e99c505be37. Setting up logs at ./log/docker/lightpush_node1_2024-12-12_09-09-50__9378e432-c13c-4609-befe-7a435d75d6a3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 40149
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40149/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40149/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.8.222/tcp/40150/p2p/16Uiu2HAmFQeGz5pFwjhduDKE4cd1QFrcLFCEFmhCnM8n9Lpd6VAr","/ip4/172.18.8.222/tcp/40151/ws/p2p/16Uiu2HAmFQeGz5pFwjhduDKE4cd1QFrcLFCEFmhCnM8n9Lpd6VAr"],"enrUri":"enr:-L24QI2PaMJwHyZjNxjucYOKXPC2WO62XS37iA4hXflOV8kTYLmNbtHkRkLzwnmUavVTOlV3cprq_cGcOQsov2x4kNYCgmlkgnY0gmlwhKwSCN6KbXVsdGlhZGRyc5YACASsEgjeBpzWAAoErBII3gac190DgnJzhQADAQAAiXNlY3AyNTZrMaEDKOY7QMNBFbiRm0v86ICfVmSIt_rq0dHaGAkkCdwt2VODdGNwgpzWg3VkcIKc2IV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40149/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.116.186/tcp/20436/p2p/16Uiu2HAmHSTNycJfMuY3E5FUYHud34if9r2a521LibwEsTYZTkUU"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40149/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.98.158/tcp/24318/p2p/16Uiu2HAmCL7DSrsss449U8H6Jam7MZL1MsVsY8WGBUduxN64z1jg"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20435/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24317/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A dictionary', 'value': {'key': 'YWFh'}}
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40149/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": {"key": "YWFh"}, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1733994594961769728}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:40149/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'An integer', 'value': 1234567890}
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40149/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": 1234567890, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1733994594980579840}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:40149/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A list', 'value': ['YWFh']}
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40149/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": ["YWFh"], "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1733994594988432640}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:40149/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A bool', 'value': True}
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40149/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": true, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1733994594993622016}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:40149/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id a9b89e6a3b8c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id f083900d3715
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container a9b89e6a3b8c. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 7e99c505be37
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container f083900d3715. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.