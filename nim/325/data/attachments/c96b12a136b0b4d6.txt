[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_missing_payload with id: 2024-08-20_09-07-14__dcc16916-7b30-4908-b5c1-59119a8eb1dc
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-20_09-07-14__dcc16916-7b30-4908-b5c1-59119a8eb1dc__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.5.176
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['52069', '52070', '52071', '52072', '52073']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 52069:52069 -p 52070:52070 -p 52071:52071 -p 52072:52072 -p 52073:52073 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=52071 --rest-port=52069 --tcp-port=52070 --discv5-udp-port=52072 --rest-address=0.0.0.0 --nat=extip:172.18.5.176 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=87c521b5f35ffd9794687c37ef7cc32dfb5bbab40ae7fc4c31355c5c8e4ede3d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=52073 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.5.176 waku 7dfc1bd3f5e45d69e14759b4e27fabcf92b5b57d1c03c30b358ce1dd6e881aa4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 7dfc1bd3f5e4. Setting up logs at ./log/docker/receiving_node1_2024-08-20_09-07-14__dcc16916-7b30-4908-b5c1-59119a8eb1dc__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 52069
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52069/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52069/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.5.176/tcp/52070/p2p/16Uiu2HAmMeuh2qzPrN9Q9gHun6HkkGpw8dLo7vjxDhiTDroXcoRF","/ip4/172.18.5.176/tcp/52071/ws/p2p/16Uiu2HAmMeuh2qzPrN9Q9gHun6HkkGpw8dLo7vjxDhiTDroXcoRF"],"enrUri":"enr:-LO4QMQpkZ_AL-ChrXcIT3hJFTlu56gidnnEUnNW-iFQn-sGPcLC_LIpdVClx24wWQD3netWDWsyAGp1DPJ-P0HXHpEBgmlkgnY0gmlwhKwSBbCKbXVsdGlhZGRyc4wACgSsEgWwBstn3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOFs-noXBOHUJCybU1CqeBwEZkKE_s1JIwvfRKSXWokToN0Y3CCy2aDdWRwgstohXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-20_09-07-14__dcc16916-7b30-4908-b5c1-59119a8eb1dc__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.34.207
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['31390', '31391', '31392', '31393', '31394']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 31390:31390 -p 31391:31391 -p 31392:31392 -p 31393:31393 -p 31394:31394 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=31392 --rest-port=31390 --tcp-port=31391 --discv5-udp-port=31393 --rest-address=0.0.0.0 --nat=extip:172.18.34.207 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=af7b90bfe7dbdd3cd90b595f7dafc7abef25f155cee6bf9496cfeb79c585ba0b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=31394 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.34.207 waku a61a328f5a3847524548c5ba985f7945fc862eddad44353c99c1e7cec68e051f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID a61a328f5a38. Setting up logs at ./log/docker/receiving_node2_2024-08-20_09-07-14__dcc16916-7b30-4908-b5c1-59119a8eb1dc__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 31390
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31390/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31390/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.34.207/tcp/31391/p2p/16Uiu2HAm8L8UGCf1DrG3htUH3sJhC3BJaC1hCFyzVLumZzoBTdc4","/ip4/172.18.34.207/tcp/31392/ws/p2p/16Uiu2HAm8L8UGCf1DrG3htUH3sJhC3BJaC1hCFyzVLumZzoBTdc4"],"enrUri":"enr:-LO4QODSFm7vB3BqHLZ-dwKNP2dM3vNxlkatqQcOyesvkE22NYf7smYVs0RUPwl6Hj9dUbl8w-kRbFY51kGAjID9qeYBgmlkgnY0gmlwhKwSIs-KbXVsdGlhZGRyc4wACgSsEiLPBnqg3QOCcnOFAAMBAACJc2VjcDI1NmsxoQK_vGYDZj7ba05pHfDbgD_bgG3ruoLuDvj1zHtCp8ASsYN0Y3CCep-DdWRwgnqhhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31390/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.5.176/tcp/52070/p2p/16Uiu2HAmMeuh2qzPrN9Q9gHun6HkkGpw8dLo7vjxDhiTDroXcoRF"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-20_09-07-14__dcc16916-7b30-4908-b5c1-59119a8eb1dc__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.219.180
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['3669', '3670', '3671', '3672', '3673']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 3669:3669 -p 3670:3670 -p 3671:3671 -p 3672:3672 -p 3673:3673 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=3671 --rest-port=3669 --tcp-port=3670 --discv5-udp-port=3672 --rest-address=0.0.0.0 --nat=extip:172.18.219.180 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7ade42df9e6d1da1da7b1c7e87a0033e059aa3c8e6c6ba67b1f9ee1fc94cf30a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=3673 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QMQpkZ_AL-ChrXcIT3hJFTlu56gidnnEUnNW-iFQn-sGPcLC_LIpdVClx24wWQD3netWDWsyAGp1DPJ-P0HXHpEBgmlkgnY0gmlwhKwSBbCKbXVsdGlhZGRyc4wACgSsEgWwBstn3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOFs-noXBOHUJCybU1CqeBwEZkKE_s1JIwvfRKSXWokToN0Y3CCy2aDdWRwgstohXdha3UyCQ --lightpushnode=/ip4/172.18.5.176/tcp/52070/p2p/16Uiu2HAmMeuh2qzPrN9Q9gHun6HkkGpw8dLo7vjxDhiTDroXcoRF --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.219.180 waku d9af78ab261572550bc16ae0c30e5b8ee74192131db55479860997a647ef8db9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID d9af78ab2615. Setting up logs at ./log/docker/lightpush_node1_2024-08-20_09-07-14__dcc16916-7b30-4908-b5c1-59119a8eb1dc__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 3669
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3669/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3669/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.219.180/tcp/3670/p2p/16Uiu2HAmDmGmnZ1DgbC99utjRomqjXMgQLWLUm9itqLHrH918tQ1","/ip4/172.18.219.180/tcp/3671/ws/p2p/16Uiu2HAmDmGmnZ1DgbC99utjRomqjXMgQLWLUm9itqLHrH918tQ1"],"enrUri":"enr:-LO4QHeTMl8Q9Z6WPJflcVTGWl2hcuIJWsg-Hp4hFlORwJxNCY7cBwNuS2ppDqcPVpm7mmzjkJeg51IgCn-lT_L_zi8BgmlkgnY0gmlwhKwS27SKbXVsdGlhZGRyc4wACgSsEtu0Bg5X3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMQd72XZt4Rm1mWQJRGqYodH4iATQXREBlOcrajUtkT-oN0Y3CCDlaDdWRwgg5YhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3669/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.5.176/tcp/52070/p2p/16Uiu2HAmMeuh2qzPrN9Q9gHun6HkkGpw8dLo7vjxDhiTDroXcoRF"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3669/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.34.207/tcp/31391/p2p/16Uiu2HAm8L8UGCf1DrG3htUH3sJhC3BJaC1hCFyzVLumZzoBTdc4"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52069/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31390/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3669/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"contentTopic": "/myapp/1/latest/proto", "timestamp": 1724144839473277184}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:3669/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 7dfc1bd3f5e4
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id a61a328f5a38
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id d9af78ab2615
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.