[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_version with id: 2024-08-20_09-08-28__0a26d06a-436c-49d4-a04b-f1d39c67fd80
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-20_09-08-28__0a26d06a-436c-49d4-a04b-f1d39c67fd80__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.251.47
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['15576', '15577', '15578', '15579', '15580']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 15576:15576 -p 15577:15577 -p 15578:15578 -p 15579:15579 -p 15580:15580 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15578 --rest-port=15576 --tcp-port=15577 --discv5-udp-port=15579 --rest-address=0.0.0.0 --nat=extip:172.18.251.47 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4aedca23cf11ee0caa149c91dc25607e35c5fd073b3deb6a8aa351a0fed0bce0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15580 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.251.47 waku f90ad3c1e263ba4fd68ab5a1f65b38f8ca3c715d3c8b95f55100df361a00960e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID f90ad3c1e263. Setting up logs at ./log/docker/receiving_node1_2024-08-20_09-08-28__0a26d06a-436c-49d4-a04b-f1d39c67fd80__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 15576
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15576/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15576/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.251.47/tcp/15577/p2p/16Uiu2HAm8pCcUw5fRsau9G5SFsU8nuMKA7sJy2Dxri7gZez4hnvp","/ip4/172.18.251.47/tcp/15578/ws/p2p/16Uiu2HAm8pCcUw5fRsau9G5SFsU8nuMKA7sJy2Dxri7gZez4hnvp"],"enrUri":"enr:-LO4QGgilUObZjRyjH3aqZ94VpFzvG9Bl0Klz2klcsZzF9jbKsW6A2RRqTiJOaIJ6EfCuHcRFayoHcLwFrB-EPddQhgBgmlkgnY0gmlwhKwS-y-KbXVsdGlhZGRyc4wACgSsEvsvBjza3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLG7VgdP5OKCAQkSbOFbwddGgsjOFJ-4DdLcIPji2O_1YN0Y3CCPNmDdWRwgjzbhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-20_09-08-28__0a26d06a-436c-49d4-a04b-f1d39c67fd80__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.55.191
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['20109', '20110', '20111', '20112', '20113']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 20109:20109 -p 20110:20110 -p 20111:20111 -p 20112:20112 -p 20113:20113 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20111 --rest-port=20109 --tcp-port=20110 --discv5-udp-port=20112 --rest-address=0.0.0.0 --nat=extip:172.18.55.191 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d322a8f633aaac4abd6d059c19e9cfdac7ffdbfee4da97e01d33274ece2aaf6a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20113 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.55.191 waku aed8df8f45a8034861dd6b1e21323c93460ae41cb2e090506e6be8f3813ba015
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID aed8df8f45a8. Setting up logs at ./log/docker/receiving_node2_2024-08-20_09-08-28__0a26d06a-436c-49d4-a04b-f1d39c67fd80__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 20109
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20109/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20109/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.55.191/tcp/20110/p2p/16Uiu2HAmQUqyPfErd69QEJ9NKKia2E7NqgHfiahcLWM8diWkJ7MZ","/ip4/172.18.55.191/tcp/20111/ws/p2p/16Uiu2HAmQUqyPfErd69QEJ9NKKia2E7NqgHfiahcLWM8diWkJ7MZ"],"enrUri":"enr:-LO4QAuyBYU461-sjssnVfMOPisCPYz6Sy3tv9W0PmCaLLgNU5vO5TGqRiu0yH6lBsHPgaeuS78TU8OQNDaxVTO2hOsBgmlkgnY0gmlwhKwSN7-KbXVsdGlhZGRyc4wACgSsEje_Bk6P3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOvsvZlwDLQ_Ah1ykvPaFJ4cvTk0wTFP-d06OkXOXmaOIN0Y3CCTo6DdWRwgk6QhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20109/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.251.47/tcp/15577/p2p/16Uiu2HAm8pCcUw5fRsau9G5SFsU8nuMKA7sJy2Dxri7gZez4hnvp"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-20_09-08-28__0a26d06a-436c-49d4-a04b-f1d39c67fd80__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.59.60
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['2249', '2250', '2251', '2252', '2253']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 2249:2249 -p 2250:2250 -p 2251:2251 -p 2252:2252 -p 2253:2253 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2251 --rest-port=2249 --tcp-port=2250 --discv5-udp-port=2252 --rest-address=0.0.0.0 --nat=extip:172.18.59.60 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0c1b069bf79af94dfdcee6baf3e24b7c11952bc176d684a8f5ef8495fef2f000 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2253 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QGgilUObZjRyjH3aqZ94VpFzvG9Bl0Klz2klcsZzF9jbKsW6A2RRqTiJOaIJ6EfCuHcRFayoHcLwFrB-EPddQhgBgmlkgnY0gmlwhKwS-y-KbXVsdGlhZGRyc4wACgSsEvsvBjza3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLG7VgdP5OKCAQkSbOFbwddGgsjOFJ-4DdLcIPji2O_1YN0Y3CCPNmDdWRwgjzbhXdha3UyCQ --lightpushnode=/ip4/172.18.251.47/tcp/15577/p2p/16Uiu2HAm8pCcUw5fRsau9G5SFsU8nuMKA7sJy2Dxri7gZez4hnvp --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.59.60 waku 233b5204eb446320db5743ffeaa2997dd5919c48b79335ef5623ad894fab27a8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 233b5204eb44. Setting up logs at ./log/docker/lightpush_node1_2024-08-20_09-08-28__0a26d06a-436c-49d4-a04b-f1d39c67fd80__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 2249
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2249/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2249/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.59.60/tcp/2250/p2p/16Uiu2HAm3En77Xw14rVReg3sDk1U5jTSv5dEQBp4QdVzGMBr4pfS","/ip4/172.18.59.60/tcp/2251/ws/p2p/16Uiu2HAm3En77Xw14rVReg3sDk1U5jTSv5dEQBp4QdVzGMBr4pfS"],"enrUri":"enr:-LO4QLFD2iL_8CUaVX_riaLQZMLxGHiXqP8fuuoA4z0mV84PLo04lJNFMhT6X5qIMP6hSaWPj_PFpjDzCauxyqw1t_IBgmlkgnY0gmlwhKwSOzyKbXVsdGlhZGRyc4wACgSsEjs8BgjL3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJ0EwiPIvla9JEcXdX3Tc9iFvMx05qpO5PnZGDxX3r8mYN0Y3CCCMqDdWRwggjMhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2249/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.251.47/tcp/15577/p2p/16Uiu2HAm8pCcUw5fRsau9G5SFsU8nuMKA7sJy2Dxri7gZez4hnvp"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2249/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.55.191/tcp/20110/p2p/16Uiu2HAmQUqyPfErd69QEJ9NKKia2E7NqgHfiahcLWM8diWkJ7MZ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15576/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20109/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2249/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724144914115407360, "version": 2.1}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:2249/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id f90ad3c1e263
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id aed8df8f45a8
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 233b5204eb44
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.