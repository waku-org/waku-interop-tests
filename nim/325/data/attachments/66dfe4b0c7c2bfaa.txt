[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_subscribe_with_invalid_request_id with id: 2024-08-20_09-04-42__91fdd151-909b-412a-a191-93c9ab5712d4
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node1_2024-08-20_09-04-42__91fdd151-909b-412a-a191-93c9ab5712d4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.48.149
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['26033', '26034', '26035', '26036', '26037']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 26033:26033 -p 26034:26034 -p 26035:26035 -p 26036:26036 -p 26037:26037 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26035 --rest-port=26033 --tcp-port=26034 --discv5-udp-port=26036 --rest-address=0.0.0.0 --nat=extip:172.18.48.149 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=099eef62deed55e2245fd2d44072ecbc0cc6584bfad41c9ce889c9da901ccf86 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26037 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.48.149 waku 7be02e42d697bfedfca9f32117c9e7d5ad54f16d18e81d154067961c326b8f98
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 7be02e42d697. Setting up logs at ./log/docker/node1_2024-08-20_09-04-42__91fdd151-909b-412a-a191-93c9ab5712d4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 26033
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26033/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26033/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.48.149/tcp/26034/p2p/16Uiu2HAmN46K49YUvmWuQDS4wkMKVRgM3QY4b15wjMj2ogemuCsJ","/ip4/172.18.48.149/tcp/26035/ws/p2p/16Uiu2HAmN46K49YUvmWuQDS4wkMKVRgM3QY4b15wjMj2ogemuCsJ"],"enrUri":"enr:-LO4QNeBeiimBxN0-ybB6Fgj1bVvpsfG2ACF8H1Xw3oVw-BpHDR0UCb5sOYT3y8Bu_K8h6SO-mdLLN7ZvRNXMLunm2YBgmlkgnY0gmlwhKwSMJWKbXVsdGlhZGRyc4wACgSsEjCVBmWz3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOLpEgW9yG-Nnq20Vd8_wY4tLCgD63a3gdrnnTyjRRGsYN0Y3CCZbKDdWRwgmW0hXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node2_2024-08-20_09-04-42__91fdd151-909b-412a-a191-93c9ab5712d4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.213.94
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['26856', '26857', '26858', '26859', '26860']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 26856:26856 -p 26857:26857 -p 26858:26858 -p 26859:26859 -p 26860:26860 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26858 --rest-port=26856 --tcp-port=26857 --discv5-udp-port=26859 --rest-address=0.0.0.0 --nat=extip:172.18.213.94 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5d0621a9ca3e4a3da732ff65a1edd954078a6a3de5fbfd7bfdd9ef3c7dcdd00c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26860 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QNeBeiimBxN0-ybB6Fgj1bVvpsfG2ACF8H1Xw3oVw-BpHDR0UCb5sOYT3y8Bu_K8h6SO-mdLLN7ZvRNXMLunm2YBgmlkgnY0gmlwhKwSMJWKbXVsdGlhZGRyc4wACgSsEjCVBmWz3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOLpEgW9yG-Nnq20Vd8_wY4tLCgD63a3gdrnnTyjRRGsYN0Y3CCZbKDdWRwgmW0hXdha3UyBQ --filternode=/ip4/172.18.48.149/tcp/26034/p2p/16Uiu2HAmN46K49YUvmWuQDS4wkMKVRgM3QY4b15wjMj2ogemuCsJ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.213.94 waku 8a5ca73ea9d342fc30e3569e3443364bde286d48506ab38321a8bb57ba8d631a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 8a5ca73ea9d3. Setting up logs at ./log/docker/node2_2024-08-20_09-04-42__91fdd151-909b-412a-a191-93c9ab5712d4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 26856
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26856/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26856/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.213.94/tcp/26857/p2p/16Uiu2HAmSaoe3mwuWYvCFfTsCT5M7Luifez3MxUJf41SpaM8Km12","/ip4/172.18.213.94/tcp/26858/ws/p2p/16Uiu2HAmSaoe3mwuWYvCFfTsCT5M7Luifez3MxUJf41SpaM8Km12"],"enrUri":"enr:-LO4QIspvNxMmt5cUlB4vsqOxEfhIfoHkDgE0LQAcliGkWo8HIF4van2VMD-AkNob5A-szjx-wLFj29nhjS0nyqVZc0BgmlkgnY0gmlwhKwS1V6KbXVsdGlhZGRyc4wACgSsEtVeBmjq3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPO8S7Fqkc1xk5LRwP812ByxZnjl1lQqInkqz_GGcFFsYN0Y3CCaOmDdWRwgmjrhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26856/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.48.149/tcp/26034/p2p/16Uiu2HAmN46K49YUvmWuQDS4wkMKVRgM3QY4b15wjMj2ogemuCsJ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26033/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26856/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "20feadb4-23a8-4a96-abc5-865b96d1001a", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"20feadb4-23a8-4a96-abc5-865b96d1001a","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26856/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": 1, "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:26856/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 7be02e42d697
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 8a5ca73ea9d3
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.