[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_unsubscribe_with_pubsub_topic_string_instead_of_list with id: 2024-08-20_09-05-53__e8f2434a-5fbb-44de-9699-65f686f04fda
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node1_2024-08-20_09-05-53__e8f2434a-5fbb-44de-9699-65f686f04fda__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.43.13
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['19916', '19917', '19918', '19919', '19920']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 19916:19916 -p 19917:19917 -p 19918:19918 -p 19919:19919 -p 19920:19920 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19918 --rest-port=19916 --tcp-port=19917 --discv5-udp-port=19919 --rest-address=0.0.0.0 --nat=extip:172.18.43.13 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7cbbdacd04525d4d5cadc9ffdce3d048daca296ad75abbaeede93eed0776e94b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19920 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.43.13 waku 0436c951a3fc8fd826de3e87d6179b5b82442ba7233e365f1805ddbf0e99415b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 0436c951a3fc. Setting up logs at ./log/docker/node1_2024-08-20_09-05-53__e8f2434a-5fbb-44de-9699-65f686f04fda__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 19916
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19916/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19916/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.43.13/tcp/19917/p2p/16Uiu2HAm3roDXxdEgdT3ogW3zU6My21RREVtLP55fa7rxitkeMaT","/ip4/172.18.43.13/tcp/19918/ws/p2p/16Uiu2HAm3roDXxdEgdT3ogW3zU6My21RREVtLP55fa7rxitkeMaT"],"enrUri":"enr:-LO4QCzqXFJ_-EhhYCAkmtOVeaAO5R1j4Q62GcYoGR95sBZ7Xgx5maiLNF4OB5PO6aoeaILHl9_VhIYGVMMHPqwSG6oBgmlkgnY0gmlwhKwSKw2KbXVsdGlhZGRyc4wACgSsEisNBk3O3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJ9TTLNNKnv8zxjkdbxc2gFaNNLCccy7SOjGCh5F_M5fIN0Y3CCTc2DdWRwgk3PhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node2_2024-08-20_09-05-53__e8f2434a-5fbb-44de-9699-65f686f04fda__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.27.138
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['28261', '28262', '28263', '28264', '28265']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 28261:28261 -p 28262:28262 -p 28263:28263 -p 28264:28264 -p 28265:28265 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28263 --rest-port=28261 --tcp-port=28262 --discv5-udp-port=28264 --rest-address=0.0.0.0 --nat=extip:172.18.27.138 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8fddabd6a6bcddebc2de35de8d9a6ca31b5d755a9ab6ecc45cb112d8fba639bf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28265 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QCzqXFJ_-EhhYCAkmtOVeaAO5R1j4Q62GcYoGR95sBZ7Xgx5maiLNF4OB5PO6aoeaILHl9_VhIYGVMMHPqwSG6oBgmlkgnY0gmlwhKwSKw2KbXVsdGlhZGRyc4wACgSsEisNBk3O3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJ9TTLNNKnv8zxjkdbxc2gFaNNLCccy7SOjGCh5F_M5fIN0Y3CCTc2DdWRwgk3PhXdha3UyBQ --filternode=/ip4/172.18.43.13/tcp/19917/p2p/16Uiu2HAm3roDXxdEgdT3ogW3zU6My21RREVtLP55fa7rxitkeMaT
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.27.138 waku f2ef6c5f1f4eefac860fe022469a6dc3738b9ebcbc3ad1a41086a5106bd6068c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID f2ef6c5f1f4e. Setting up logs at ./log/docker/node2_2024-08-20_09-05-53__e8f2434a-5fbb-44de-9699-65f686f04fda__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 28261
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28261/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28261/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.27.138/tcp/28262/p2p/16Uiu2HAkxMbDkfP6ANqqVMZTLyoqm6nN5JARDZHxSCmLickkWHqF","/ip4/172.18.27.138/tcp/28263/ws/p2p/16Uiu2HAkxMbDkfP6ANqqVMZTLyoqm6nN5JARDZHxSCmLickkWHqF"],"enrUri":"enr:-LO4QPwN8M8w_SBFcw_1rpVKvhgfbH56uDasapoOMqBDccXOHlhvdcgQHHog_v0FPD-UpBMCcWEv-hSgNVzW0z7xRi8BgmlkgnY0gmlwhKwSG4qKbXVsdGlhZGRyc4wACgSsEhuKBm5n3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIrh1suSrygtiTuDBqOY0noytlINV8q3LnEGmXknE0fhoN0Y3CCbmaDdWRwgm5ohXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28261/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.43.13/tcp/19917/p2p/16Uiu2HAm3roDXxdEgdT3ogW3zU6My21RREVtLP55fa7rxitkeMaT"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19916/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28261/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "752ff031-83aa-4c6f-a486-8b69f25f6e4c", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"752ff031-83aa-4c6f-a486-8b69f25f6e4c","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X DELETE "http://127.0.0.1:28261/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": "/test/1/waku-filter/proto", "pubsubTopic": "/waku/2/rs/3/1"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:28261/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 0436c951a3fc
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id f2ef6c5f1f4e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.