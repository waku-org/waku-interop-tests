[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_update_subscription_with_invalid_request_id with id: 2024-08-20_09-05-20__da0c66c5-e3c3-47c2-82f1-f15cb0f09c53
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node1_2024-08-20_09-05-20__da0c66c5-e3c3-47c2-82f1-f15cb0f09c53__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.6.1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['50040', '50041', '50042', '50043', '50044']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 50040:50040 -p 50041:50041 -p 50042:50042 -p 50043:50043 -p 50044:50044 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=50042 --rest-port=50040 --tcp-port=50041 --discv5-udp-port=50043 --rest-address=0.0.0.0 --nat=extip:172.18.6.1 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f94508f591bf10cb84f21fba5a0fbedbc79badf06eccf1de082c5452ceaaaadd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=50044 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.6.1 waku e090ddd86d6c6e44d5fa48c3a950f84af09ced9049c20183760df7f96614642c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID e090ddd86d6c. Setting up logs at ./log/docker/node1_2024-08-20_09-05-20__da0c66c5-e3c3-47c2-82f1-f15cb0f09c53__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 50040
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50040/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50040/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.6.1/tcp/50041/p2p/16Uiu2HAmUuGGr6JaLXZWcQ8PjtsDgptxo1bFxkLDZ5gua1eXCA6t","/ip4/172.18.6.1/tcp/50042/ws/p2p/16Uiu2HAmUuGGr6JaLXZWcQ8PjtsDgptxo1bFxkLDZ5gua1eXCA6t"],"enrUri":"enr:-LO4QBw1Zo2Mn7cb96mGHS24E1ki-dFdDLS7AMm7FlEXZj5TNJ4GJBHrLV9K2NMZS65kqhd8w4MUgJqwnRMWzKyVzq8BgmlkgnY0gmlwhKwSBgGKbXVsdGlhZGRyc4wACgSsEgYBBsN63QOCcnOFAAMBAACJc2VjcDI1NmsxoQPxYyB1yWTkvLCNw14aqOH5Uw560AQBhwDSA8EKkpTz0YN0Y3CCw3mDdWRwgsN7hXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node2_2024-08-20_09-05-20__da0c66c5-e3c3-47c2-82f1-f15cb0f09c53__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.146.119
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['21743', '21744', '21745', '21746', '21747']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 21743:21743 -p 21744:21744 -p 21745:21745 -p 21746:21746 -p 21747:21747 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=21745 --rest-port=21743 --tcp-port=21744 --discv5-udp-port=21746 --rest-address=0.0.0.0 --nat=extip:172.18.146.119 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f44f25e6cc69ba6a3f11954e3d4e78b4fbdc5e0846a2a64a60caed4aa96daeaa --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=21747 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QBw1Zo2Mn7cb96mGHS24E1ki-dFdDLS7AMm7FlEXZj5TNJ4GJBHrLV9K2NMZS65kqhd8w4MUgJqwnRMWzKyVzq8BgmlkgnY0gmlwhKwSBgGKbXVsdGlhZGRyc4wACgSsEgYBBsN63QOCcnOFAAMBAACJc2VjcDI1NmsxoQPxYyB1yWTkvLCNw14aqOH5Uw560AQBhwDSA8EKkpTz0YN0Y3CCw3mDdWRwgsN7hXdha3UyBQ --filternode=/ip4/172.18.6.1/tcp/50041/p2p/16Uiu2HAmUuGGr6JaLXZWcQ8PjtsDgptxo1bFxkLDZ5gua1eXCA6t
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.146.119 waku 6cf339538baa4326659c7973b47df541f7f798919bafab63c0439f96f40fb9b7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 6cf339538baa. Setting up logs at ./log/docker/node2_2024-08-20_09-05-20__da0c66c5-e3c3-47c2-82f1-f15cb0f09c53__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 21743
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21743/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21743/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.146.119/tcp/21744/p2p/16Uiu2HAmGkGTK8p7nu2EqV7cWrVZCzifwYtBmcAfMXsiPGgHmQHm","/ip4/172.18.146.119/tcp/21745/ws/p2p/16Uiu2HAmGkGTK8p7nu2EqV7cWrVZCzifwYtBmcAfMXsiPGgHmQHm"],"enrUri":"enr:-LO4QKvrnSpNvDKxLgS_4LqH5HoZZjUqdRQS7G6gltbUuZ5VX3bUuaypSA6fzpObWrA_Ky8BrO0Cacj3BvsDL8uNgywBgmlkgnY0gmlwhKwSkneKbXVsdGlhZGRyc4wACgSsEpJ3BlTx3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM8yNxFqppuj-sGp84mUcU5aaO5lSFfDPwycoI5ZCrHCIN0Y3CCVPCDdWRwglTyhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21743/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.6.1/tcp/50041/p2p/16Uiu2HAmUuGGr6JaLXZWcQ8PjtsDgptxo1bFxkLDZ5gua1eXCA6t"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:50040/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21743/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "0ec9a0a1-04c5-4dc6-93d4-031bf990968f", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"0ec9a0a1-04c5-4dc6-93d4-031bf990968f","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X PUT "http://127.0.0.1:21743/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": 1, "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:21743/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id e090ddd86d6c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 6cf339538baa
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.