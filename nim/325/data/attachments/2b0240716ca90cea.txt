[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_valid_version with id: 2024-08-20_09-08-21__4e23b43b-03c9-4fa8-8f1d-06c511113719
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-20_09-08-21__4e23b43b-03c9-4fa8-8f1d-06c511113719__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.2.247
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['60658', '60659', '60660', '60661', '60662']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 60658:60658 -p 60659:60659 -p 60660:60660 -p 60661:60661 -p 60662:60662 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=60660 --rest-port=60658 --tcp-port=60659 --discv5-udp-port=60661 --rest-address=0.0.0.0 --nat=extip:172.18.2.247 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bf0dfdc1aeeef89b6cb25d16a2abddd8a2b6aaddbf390305f3aca2127bb1ffe2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=60662 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.2.247 waku 995448d2dbce30df993a9bc511094af4573c85f6e136ed145f199b9b2e6c8c78
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 995448d2dbce. Setting up logs at ./log/docker/receiving_node1_2024-08-20_09-08-21__4e23b43b-03c9-4fa8-8f1d-06c511113719__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 60658
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60658/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60658/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.2.247/tcp/60659/p2p/16Uiu2HAmMRpwtHMA5KePFtVWtqtyQzsmLC1nQMUyZDBdDh79BxoC","/ip4/172.18.2.247/tcp/60660/ws/p2p/16Uiu2HAmMRpwtHMA5KePFtVWtqtyQzsmLC1nQMUyZDBdDh79BxoC"],"enrUri":"enr:-LO4QODE2BHkJ8bKFFQqgH9T-AHEseNS-Dn-q_k98mKcKVfBKDKz7jkP_FrMNGBJUoI0Sj80jvKmXVVxynb_O38VWeoBgmlkgnY0gmlwhKwSAveKbXVsdGlhZGRyc4wACgSsEgL3Buz03QOCcnOFAAMBAACJc2VjcDI1NmsxoQOCWf_MSuo9Dkz3idztYDHMCEu0L9WQjO_6B_OgTkI9A4N0Y3CC7PODdWRwguz1hXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-20_09-08-21__4e23b43b-03c9-4fa8-8f1d-06c511113719__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.118.190
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['13504', '13505', '13506', '13507', '13508']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 13504:13504 -p 13505:13505 -p 13506:13506 -p 13507:13507 -p 13508:13508 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=13506 --rest-port=13504 --tcp-port=13505 --discv5-udp-port=13507 --rest-address=0.0.0.0 --nat=extip:172.18.118.190 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2b5cae0ba50f436ebeaccdafa29c072a46afba1ef27e8d2dc439f8cbfcfdffc4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=13508 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.118.190 waku 21b459e6437056eac0c297b54eea249effaaf0e5128c5333581c99812be24171
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 21b459e64370. Setting up logs at ./log/docker/receiving_node2_2024-08-20_09-08-21__4e23b43b-03c9-4fa8-8f1d-06c511113719__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 13504
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13504/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13504/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.118.190/tcp/13505/p2p/16Uiu2HAkyk3zjHw8xGgmvVyMaZEF6GrevJ5qFrenCwd3PUGsQviZ","/ip4/172.18.118.190/tcp/13506/ws/p2p/16Uiu2HAkyk3zjHw8xGgmvVyMaZEF6GrevJ5qFrenCwd3PUGsQviZ"],"enrUri":"enr:-LO4QAOtAqoQ4zoK7fffNWibHud8DIHRyJ9-rJs8mT7D86_aUPwJUEHaCEy1bIeVBDqhsvw2urRdGhfRvNIcxJtpIk4BgmlkgnY0gmlwhKwSdr6KbXVsdGlhZGRyc4wACgSsEna-BjTC3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJAJBiTv5_gf9K9gSMXztaxWxXx7EOqhmTxeOidE17GtoN0Y3CCNMGDdWRwgjTDhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13504/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.2.247/tcp/60659/p2p/16Uiu2HAmMRpwtHMA5KePFtVWtqtyQzsmLC1nQMUyZDBdDh79BxoC"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-20_09-08-21__4e23b43b-03c9-4fa8-8f1d-06c511113719__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.42.177
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['19823', '19824', '19825', '19826', '19827']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 19823:19823 -p 19824:19824 -p 19825:19825 -p 19826:19826 -p 19827:19827 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19825 --rest-port=19823 --tcp-port=19824 --discv5-udp-port=19826 --rest-address=0.0.0.0 --nat=extip:172.18.42.177 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=748b12b9f9f7b2cabf06b47a4daebca2d34ff4bdce028df5c5d0e4fdc2787acb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19827 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QODE2BHkJ8bKFFQqgH9T-AHEseNS-Dn-q_k98mKcKVfBKDKz7jkP_FrMNGBJUoI0Sj80jvKmXVVxynb_O38VWeoBgmlkgnY0gmlwhKwSAveKbXVsdGlhZGRyc4wACgSsEgL3Buz03QOCcnOFAAMBAACJc2VjcDI1NmsxoQOCWf_MSuo9Dkz3idztYDHMCEu0L9WQjO_6B_OgTkI9A4N0Y3CC7PODdWRwguz1hXdha3UyCQ --lightpushnode=/ip4/172.18.2.247/tcp/60659/p2p/16Uiu2HAmMRpwtHMA5KePFtVWtqtyQzsmLC1nQMUyZDBdDh79BxoC --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.42.177 waku ccd94be3c5649fdb586e58999918d2ea8ca582f4b9e0cb993bb2d5b13709e0b3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID ccd94be3c564. Setting up logs at ./log/docker/lightpush_node1_2024-08-20_09-08-21__4e23b43b-03c9-4fa8-8f1d-06c511113719__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 19823
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19823/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19823/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.42.177/tcp/19824/p2p/16Uiu2HAmN8QUZniiLNtPrezZMrg5FvvrZL9FmabR8MRGrLfLideq","/ip4/172.18.42.177/tcp/19825/ws/p2p/16Uiu2HAmN8QUZniiLNtPrezZMrg5FvvrZL9FmabR8MRGrLfLideq"],"enrUri":"enr:-LO4QOcXR1EsnNRTuK0-K9myzag1_caryLUZtFcvJdZriBE7eQbGRrW8BY8_jO8QkdJWtqI2J-ASWlsLJcSYAaYz23oBgmlkgnY0gmlwhKwSKrGKbXVsdGlhZGRyc4wACgSsEiqxBk1x3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOMvySWTp6dguvzu2WH4KN8nuS_tsxX4sDohSZfGqkAOoN0Y3CCTXCDdWRwgk1yhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19823/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.2.247/tcp/60659/p2p/16Uiu2HAmMRpwtHMA5KePFtVWtqtyQzsmLC1nQMUyZDBdDh79BxoC"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19823/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.118.190/tcp/13505/p2p/16Uiu2HAkyk3zjHw8xGgmvVyMaZEF6GrevJ5qFrenCwd3PUGsQviZ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60658/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13504/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19823/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724144907169998080, "version": 10}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60658/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":10,"timestamp":1724144907169998080,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13504/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":10,"timestamp":1724144907169998080,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 995448d2dbce
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 21b459e64370
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id ccd94be3c564
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.