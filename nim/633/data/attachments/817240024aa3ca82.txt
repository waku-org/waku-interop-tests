[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_subscribe_and_publish_on_another_content_topic_from_another_shard with id: 2025-01-29_12-52-34__d1193f8d-e8da-450a-8e21-44fec84c1c84
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-29_12-52-34__d1193f8d-e8da-450a-8e21-44fec84c1c84__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.251.200
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['27206', '27207', '27208', '27209', '27210']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 27206:27206 -p 27207:27207 -p 27208:27208 -p 27209:27209 -p 27210:27210 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27208 --rest-port=27206 --tcp-port=27207 --discv5-udp-port=27209 --rest-address=0.0.0.0 --nat=extip:172.18.251.200 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=4acfd977e9e83c19dbaaad4c5b2dcc7f2ea2cfff5d227ceca1c1ae51c653a48a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27210 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.251.200 waku bb10d72d379c7cdf3b3a9347e68a5cd64e2bf368f7bd94a297dfd76ef0d13195
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID bb10d72d379c. Setting up logs at ./log/docker/node1_2025-01-29_12-52-34__d1193f8d-e8da-450a-8e21-44fec84c1c84__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 27206
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 330b67c19173. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27206/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27206/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.251.200/tcp/27207/p2p/16Uiu2HAm2CdYAQ9z3KgweGAaRUXD3owUB7oUqDVY9ahi4JNDWhhH","/ip4/172.18.251.200/tcp/27208/ws/p2p/16Uiu2HAm2CdYAQ9z3KgweGAaRUXD3owUB7oUqDVY9ahi4JNDWhhH"],"enrUri":"enr:-L24QPKFDAOlWh9x09Ay9xcVnb0EDC6ox2rdXNoFgXEv9Te8ONOPhshOs11Nk0WyCsMi0IEEPD4wFkg1RirDdiNb684CgmlkgnY0gmlwhKwS-8iKbXVsdGlhZGRyc5YACASsEvvIBmpHAAoErBL7yAZqSN0DgnJzhQACAQAAiXNlY3AyNTZrMaECZKp_NFva-CHJVW7SpDRV22XiPcikmPVFlbnOLfWpJuiDdGNwgmpHg3VkcIJqSYV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-29_12-52-34__d1193f8d-e8da-450a-8e21-44fec84c1c84__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.70.117
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['41845', '41846', '41847', '41848', '41849']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 41845:41845 -p 41846:41846 -p 41847:41847 -p 41848:41848 -p 41849:41849 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=41847 --rest-port=41845 --tcp-port=41846 --discv5-udp-port=41848 --rest-address=0.0.0.0 --nat=extip:172.18.70.117 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=f50cb2befc7b3160976db522c4aee36117cf8a23b6dbb9561cf6436e92fef9dc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=41849 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QPKFDAOlWh9x09Ay9xcVnb0EDC6ox2rdXNoFgXEv9Te8ONOPhshOs11Nk0WyCsMi0IEEPD4wFkg1RirDdiNb684CgmlkgnY0gmlwhKwS-8iKbXVsdGlhZGRyc5YACASsEvvIBmpHAAoErBL7yAZqSN0DgnJzhQACAQAAiXNlY3AyNTZrMaECZKp_NFva-CHJVW7SpDRV22XiPcikmPVFlbnOLfWpJuiDdGNwgmpHg3VkcIJqSYV3YWt1MgU --content-topic=/myapp/1/latest/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.70.117 waku 44f1828c17ba8e39061b0dd1eda4821512347de30f5957256cabbc4dd5589533
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 44f1828c17ba. Setting up logs at ./log/docker/node2_2025-01-29_12-52-34__d1193f8d-e8da-450a-8e21-44fec84c1c84__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 41845
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41845/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41845/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.70.117/tcp/41846/p2p/16Uiu2HAmTz1mowt4N4rNtHBmSBQ9RHjXoka7X7MCaNAyeXidsdUX","/ip4/172.18.70.117/tcp/41847/ws/p2p/16Uiu2HAmTz1mowt4N4rNtHBmSBQ9RHjXoka7X7MCaNAyeXidsdUX"],"enrUri":"enr:-L24QJmlQZm5Q_paQcrxGZfczSWPRpAWcEfwtgTwY4p-OfU8egrrN4jZ7AEO80yoqbsIsBt-1vscP23eifcvK-e8IxYCgmlkgnY0gmlwhKwSRnWKbXVsdGlhZGRyc5YACASsEkZ1BqN2AAoErBJGdQajd90DgnJzhQACAQAAiXNlY3AyNTZrMaED477yr6sgRw0lxWojSOwAYMbI51io9nbyi5F9nCCClfyDdGNwgqN2g3VkcIKjeIV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41845/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.251.200/tcp/27207/p2p/16Uiu2HAm2CdYAQ9z3KgweGAaRUXD3owUB7oUqDVY9ahi4JNDWhhH"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27206/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/toychat/2/huilong/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41845/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/toychat/2/huilong/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27206/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27206/relay/v1/auto/messages/%2Ftoychat%2F2%2Fhuilong%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/toychat/2/huilong/proto","version":0,"timestamp":1738155157087270656,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41845/relay/v1/auto/messages/%2Ftoychat%2F2%2Fhuilong%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/toychat/2/huilong/proto","version":0,"timestamp":1738155157087270656,"ephemeral":false}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27206/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27206/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738155157202859520,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41845/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738155157202859520,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id bb10d72d379c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 44f1828c17ba
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container bb10d72d379c. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.