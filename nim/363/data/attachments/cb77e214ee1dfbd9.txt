[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_node_not_connected_directly_to_lightpushing_node with id: 2024-09-17_04-12-22__b898d930-2aac-4e97-b318-a32830dbab22
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-17_04-12-22__b898d930-2aac-4e97-b318-a32830dbab22__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-17_04-12-22__b898d930-2aac-4e97-b318-a32830dbab22__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-09-17_04-12-22__b898d930-2aac-4e97-b318-a32830dbab22__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:28 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.60.77
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['42530', '42531', '42532', '42533', '42534']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 42530:42530 -p 42531:42531 -p 42532:42532 -p 42533:42533 -p 42534:42534 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42532 --rest-port=42530 --tcp-port=42531 --discv5-udp-port=42533 --rest-address=0.0.0.0 --nat=extip:172.18.60.77 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bef4fb3a6f319fecd3ffa114da262e859ba4eddd1ad7a8f678507facdc4a3a2d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42534 --metrics-logging=true --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.60.77 waku 1a469b3abaeb07443c0303f064c25552f712f17091b263572190d288ea58e493
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 1a469b3abaeb. Setting up logs at ./log/docker/node1_2024-09-17_04-12-22__b898d930-2aac-4e97-b318-a32830dbab22__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 42530
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42530/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42530/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.60.77/tcp/42531/p2p/16Uiu2HAkwkEq3U6ynpnrM8r49J6tCVWxSa6RNLKEhdY2sWwSBouL","/ip4/172.18.60.77/tcp/42532/ws/p2p/16Uiu2HAkwkEq3U6ynpnrM8r49J6tCVWxSa6RNLKEhdY2sWwSBouL"],"enrUri":"enr:-LO4QOmCVq0F-eueUtV2SQ5VBH-pc5POX_N_WN4Wyj7puFHjG_EB8w0NozkTOcxneGUfDFN_rwfLIrIMganjoSEI2PQBgmlkgnY0gmlwhKwSPE2KbXVsdGlhZGRyc4wACgSsEjxNBqYk3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIiePiW1jguXGtNg3V9hN0QPkTwkHFA0tGcmOis0YMNc4N0Y3CCpiODdWRwgqYlhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.91.67
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['55289', '55290', '55291', '55292', '55293']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 55289:55289 -p 55290:55290 -p 55291:55291 -p 55292:55292 -p 55293:55293 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55291 --rest-port=55289 --tcp-port=55290 --discv5-udp-port=55292 --rest-address=0.0.0.0 --nat=extip:172.18.91.67 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a5de9d6afd1af2ceb51d7e446fdda388ae38070dcdabb351b4f1052f1c0fbca5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55293 --metrics-logging=true --lightpush=true --store=true --relay=true --discv5-bootstrap-node=enr:-LO4QOmCVq0F-eueUtV2SQ5VBH-pc5POX_N_WN4Wyj7puFHjG_EB8w0NozkTOcxneGUfDFN_rwfLIrIMganjoSEI2PQBgmlkgnY0gmlwhKwSPE2KbXVsdGlhZGRyc4wACgSsEjxNBqYk3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIiePiW1jguXGtNg3V9hN0QPkTwkHFA0tGcmOis0YMNc4N0Y3CCpiODdWRwgqYlhXdha3UyCQ --lightpushnode=/ip4/172.18.60.77/tcp/42531/p2p/16Uiu2HAkwkEq3U6ynpnrM8r49J6tCVWxSa6RNLKEhdY2sWwSBouL
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.91.67 waku 2bcbbed2b4501e8e5fa1b6521b0df23a35a92b81030c19b9b5be4d604e655477
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 2bcbbed2b450. Setting up logs at ./log/docker/node2_2024-09-17_04-12-22__b898d930-2aac-4e97-b318-a32830dbab22__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 55289
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55289/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55289/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.91.67/tcp/55290/p2p/16Uiu2HAkvHGReEQyoQP5f76sMmS7NUH6AiA7mCzQJrdnwKWywwdq","/ip4/172.18.91.67/tcp/55291/ws/p2p/16Uiu2HAkvHGReEQyoQP5f76sMmS7NUH6AiA7mCzQJrdnwKWywwdq"],"enrUri":"enr:-LO4QJh0gQWuD5vfu9m2PIuBxqymoH5A3gylZonJag6i3fjCO2IVlOrUXauIQilbdXlHnqfgW3PqCkwflHUaYsr98mUBgmlkgnY0gmlwhKwSW0OKbXVsdGlhZGRyc4wACgSsEltDBtf73QOCcnOFAAMBAACJc2VjcDI1NmsxoQIMtGhRlcHaJWTMBOlCuNJKny7KIYqo90PxRske-zZ5gIN0Y3CC1_qDdWRwgtf8hXdha3UyCw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.66.245
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['47182', '47183', '47184', '47185', '47186']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 47182:47182 -p 47183:47183 -p 47184:47184 -p 47185:47185 -p 47186:47186 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=47184 --rest-port=47182 --tcp-port=47183 --discv5-udp-port=47185 --rest-address=0.0.0.0 --nat=extip:172.18.66.245 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=878ced6fcf77a94fefda0bdc686cbfb9bae5613cf2c0def62ceafeed0d57a9be --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=47186 --metrics-logging=true --relay=false --storenode=/ip4/172.18.91.67/tcp/55290/p2p/16Uiu2HAkvHGReEQyoQP5f76sMmS7NUH6AiA7mCzQJrdnwKWywwdq --discv5-bootstrap-node=enr:-LO4QJh0gQWuD5vfu9m2PIuBxqymoH5A3gylZonJag6i3fjCO2IVlOrUXauIQilbdXlHnqfgW3PqCkwflHUaYsr98mUBgmlkgnY0gmlwhKwSW0OKbXVsdGlhZGRyc4wACgSsEltDBtf73QOCcnOFAAMBAACJc2VjcDI1NmsxoQIMtGhRlcHaJWTMBOlCuNJKny7KIYqo90PxRske-zZ5gIN0Y3CC1_qDdWRwgtf8hXdha3UyCw
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.66.245 waku ceff5a80ae1f9a39f570750892c7898c229dc6e3954b130af84af55f424e6539
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID ceff5a80ae1f. Setting up logs at ./log/docker/node3_2024-09-17_04-12-22__b898d930-2aac-4e97-b318-a32830dbab22__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 47182
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47182/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47182/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.66.245/tcp/47183/p2p/16Uiu2HAm84M9FMggKWkb5LTTSqwcMk2tsqVdMYLne64nWvCHL3wC","/ip4/172.18.66.245/tcp/47184/ws/p2p/16Uiu2HAm84M9FMggKWkb5LTTSqwcMk2tsqVdMYLne64nWvCHL3wC"],"enrUri":"enr:-LO4QDuy0TEH3jnFjMxTU_I14LGyoyOkVcjpPvFlF_5Ty4NoGhKIGRRpRQgl0RaKXZHJvbsj-YU9a0ceWalp5vV2j5IBgmlkgnY0gmlwhKwSQvWKbXVsdGlhZGRyc4wACgSsEkL1BrhQ3QOCcnOFAAMBAACJc2VjcDI1NmsxoQK7sW8a6GopcG7DkKHE3DhI67Khs_WvdvsDzHrWnas5J4N0Y3CCuE-DdWRwgrhRhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:42530/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55289/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42530/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42530/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42530/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42530/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42530/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42530/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.91.67/tcp/55290/p2p/16Uiu2HAkvHGReEQyoQP5f76sMmS7NUH6AiA7mCzQJrdnwKWywwdq","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55289/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.60.77/tcp/42531/p2p/16Uiu2HAkwkEq3U6ynpnrM8r49J6tCVWxSa6RNLKEhdY2sWwSBouL","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:42530/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1726546383575136768}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.store:store.py:215 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47182/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"16d9f8be7c223421eada","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"8kFr7VYMMO773Ymk43L5Zmfg67umpq44bTMSigcTwxQ="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 1a469b3abaeb
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 2bcbbed2b450
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id ceff5a80ae1f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.