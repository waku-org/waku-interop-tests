[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_pubsub_topic_also_in_docker_flags[/waku/2/rs/2/1] with id: 2024-09-17_04-28-33__c66f75c5-fbee-4f93-a72d-cbea5b4e9cdd
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-17_04-28-33__c66f75c5-fbee-4f93-a72d-cbea5b4e9cdd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.196.198
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['52169', '52170', '52171', '52172', '52173']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 52169:52169 -p 52170:52170 -p 52171:52171 -p 52172:52172 -p 52173:52173 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=52171 --rest-port=52169 --tcp-port=52170 --discv5-udp-port=52172 --rest-address=0.0.0.0 --nat=extip:172.18.196.198 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=de47dbd0ddde1e29e39cefaaffef3cde8cc4bc8e4f59e7cea29a24c72adec69a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=52173 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/2/1 --content-topic=/myapp/1/latest/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.196.198 waku c94b67454b1c1d00ad93fd0f5060c983125ff407d3260327bc29a7df7ce5bb45
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID c94b67454b1c. Setting up logs at ./log/docker/node1_2024-09-17_04-28-33__c66f75c5-fbee-4f93-a72d-cbea5b4e9cdd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 52169
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52169/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52169/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.196.198/tcp/52170/p2p/16Uiu2HAmNyXxGV4C38p7KQXypTJbGi885Zb5tAkmaD7s136mqo2X","/ip4/172.18.196.198/tcp/52171/ws/p2p/16Uiu2HAmNyXxGV4C38p7KQXypTJbGi885Zb5tAkmaD7s136mqo2X"],"enrUri":"enr:-LO4QH8iIhc6lNMfmGPKWZobwGA_hFS7SJ-k0kMrPA1w0TvfT1TV1CPQlO5Srhf5U1eE2Tw0yGKFP7aNPtzfaYXf1NEBgmlkgnY0gmlwhKwSxMaKbXVsdGlhZGRyc4wACgSsEsTGBsvL3QOCcnOFAAIBAAGJc2VjcDI1NmsxoQOZVQ66N3lqEwSnA1or8PZaYpaDUFlGmRG3FfLVbgXhsIN0Y3CCy8qDdWRwgsvMhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-17_04-28-33__c66f75c5-fbee-4f93-a72d-cbea5b4e9cdd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.12.72
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['3379', '3380', '3381', '3382', '3383']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 3379:3379 -p 3380:3380 -p 3381:3381 -p 3382:3382 -p 3383:3383 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=3381 --rest-port=3379 --tcp-port=3380 --discv5-udp-port=3382 --rest-address=0.0.0.0 --nat=extip:172.18.12.72 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=cd88a0c6834f4342953bf2ae5f5697e9fa9b7bf6a5c5c9c7add3bd82a5e74e57 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=3383 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QH8iIhc6lNMfmGPKWZobwGA_hFS7SJ-k0kMrPA1w0TvfT1TV1CPQlO5Srhf5U1eE2Tw0yGKFP7aNPtzfaYXf1NEBgmlkgnY0gmlwhKwSxMaKbXVsdGlhZGRyc4wACgSsEsTGBsvL3QOCcnOFAAIBAAGJc2VjcDI1NmsxoQOZVQ66N3lqEwSnA1or8PZaYpaDUFlGmRG3FfLVbgXhsIN0Y3CCy8qDdWRwgsvMhXdha3UyBQ --pubsub-topic=/waku/2/rs/2/1 --content-topic=/myapp/1/latest/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.12.72 waku 7eba5acebad936981365499ecb1b9eccbeb9450e8c3672c6e214222a5c0454b9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 7eba5acebad9. Setting up logs at ./log/docker/node2_2024-09-17_04-28-33__c66f75c5-fbee-4f93-a72d-cbea5b4e9cdd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 3379
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3379/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3379/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.12.72/tcp/3380/p2p/16Uiu2HAkuZ4vhtnnPn8WhxbkwYgwEHeh4DiiPvqLC6SCHQeVLYzF","/ip4/172.18.12.72/tcp/3381/ws/p2p/16Uiu2HAkuZ4vhtnnPn8WhxbkwYgwEHeh4DiiPvqLC6SCHQeVLYzF"],"enrUri":"enr:-LO4QDQuReHQtihXJpb-Bo5JSc0LhuuEIuw2Rlm9YOXTwQUhD0pku1cE8XBEHvaA6r3DgpOn2XJPPf51PiHqTqQIhn0BgmlkgnY0gmlwhKwSDEiKbXVsdGlhZGRyc4wACgSsEgxIBg013QOCcnOFAAIBAAGJc2VjcDI1NmsxoQIB5QL7sXGSNQOWfUIHABFk3JXBZ1NYNI_y3022Nx8r7IN0Y3CCDTSDdWRwgg02hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3379/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.196.198/tcp/52170/p2p/16Uiu2HAmNyXxGV4C38p7KQXypTJbGi885Zb5tAkmaD7s136mqo2X"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52169/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3379/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52169/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52169/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1726547317309023744,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3379/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1726547317309023744,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id c94b67454b1c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 7eba5acebad9
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.