{"uid":"fe048a5d0813471a","name":"test_publish_after_node1_restarts","fullName":"tests.relay.test_publish.TestRelayPublish#test_publish_after_node1_restarts","historyId":"ac4c595ebfa5f8d963dda5d51f886384","time":{"start":1726547062679,"stop":1726547068124,"duration":5445},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"set_allure_env_variables","time":{"start":1726546269689,"stop":1726546269689,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail","time":{"start":1726547058195,"stop":1726547058195,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_setup","time":{"start":1726547058195,"stop":1726547058196,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_id","time":{"start":1726547058195,"stop":1726547058195,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes","time":{"start":1726547058195,"stop":1726547058195,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"check_waku_log_errors","time":{"start":1726547058195,"stop":1726547058195,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"common_setup","time":{"start":1726547058196,"stop":1726547058196,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_main_relay_nodes","time":{"start":1726547058196,"stop":1726547062509,"duration":4313},"status":"passed","steps":[{"name":"add_node_peer","time":{"start":1726547062430,"stop":1726547062509,"duration":79},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"args","value":"(<tests.relay.test_publish.TestRelayPublish object at 0x7faa8021c290>, <src.node.waku_node.WakuNode object at 0x7faa8021c560>, ['/ip4/172.18.21.53/tcp/25788/p2p/16Uiu2HAm2LN4Tmmj9EC8Q7b33rKjZtHgpgE489EM7VNWDPom1RHV'])"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"relay_setup","time":{"start":1726547058196,"stop":1726547058196,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"subscribe_main_relay_nodes","time":{"start":1726547062509,"stop":1726547062549,"duration":40},"status":"passed","steps":[{"name":"ensure_relay_subscriptions_on_nodes","time":{"start":1726547062509,"stop":1726547062549,"duration":40},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node_list","value":"[<src.node.waku_node.WakuNode object at 0x7faa7b213170>, <src.node.waku_node.WakuNode object at 0x7faa8021c560>]"},{"name":"pubsub_topic_list","value":"['/waku/2/rs/3/1']"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"relay_warm_up","time":{"start":1726547062551,"stop":1726547062678,"duration":127},"status":"passed","steps":[{"name":"wait_for_published_message_to_reach_relay_peer","time":{"start":1726547062551,"stop":1726547062678,"duration":127},"status":"passed","steps":[{"name":"check_published_message_reaches_relay_peer","time":{"start":1726547062552,"stop":1726547062678,"duration":126},"status":"passed","steps":[{"name":"assert_received_message","time":{"start":1726547062671,"stop":1726547062671,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1726547062551576576}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"assert_received_message","time":{"start":1726547062678,"stop":1726547062678,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1726547062551576576}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1726547062551576576}"},{"name":"pubsub_topic","value":"None"},{"name":"message_propagation_delay","value":"0.1"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"timeout_duration","value":"120"},{"name":"time_between_retries","value":"1"},{"name":"pubsub_topic","value":"None"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":4,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"testStage":{"status":"passed","steps":[{"name":"check_published_message_reaches_relay_peer","time":{"start":1726547062679,"stop":1726547062800,"duration":121},"status":"passed","steps":[{"name":"create_message","time":{"start":1726547062679,"stop":1726547062679,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"assert_received_message","time":{"start":1726547062789,"stop":1726547062789,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1726547062679228672}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"assert_received_message","time":{"start":1726547062800,"stop":1726547062800,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1726547062679228672}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"message","value":"None"},{"name":"pubsub_topic","value":"None"},{"name":"message_propagation_delay","value":"0.1"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"subscribe_and_publish_with_retry","time":{"start":1726547066796,"stop":1726547068124,"duration":1328},"status":"passed","steps":[{"name":"ensure_relay_subscriptions_on_nodes","time":{"start":1726547066796,"stop":1726547066863,"duration":67},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node_list","value":"[<src.node.waku_node.WakuNode object at 0x7faa7b213170>, <src.node.waku_node.WakuNode object at 0x7faa8021c560>]"},{"name":"pubsub_topic_list","value":"['/waku/2/rs/3/1']"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"check_published_message_reaches_relay_peer","time":{"start":1726547066863,"stop":1726547066988,"duration":125},"status":"failed","statusMessage":"AssertionError: Peer NODE_2:wakuorg/nwaku:latest couldn't find any messages\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.5/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/relay.py\", line 125, in check_published_message_reaches_relay_peer\n    assert get_messages_response, f\"Peer NODE_{index + 1}:{peer.image} couldn't find any messages\"\n           ^^^^^^^^^^^^^^^^^^^^^\n","steps":[{"name":"create_message","time":{"start":1726547066863,"stop":1726547066863,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"assert_received_message","time":{"start":1726547066984,"stop":1726547066984,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1726547066863045632}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"message","value":"None"},{"name":"pubsub_topic","value":"None"},{"name":"message_propagation_delay","value":"0.1"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":true,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"ensure_relay_subscriptions_on_nodes","time":{"start":1726547067989,"stop":1726547068001,"duration":12},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node_list","value":"[<src.node.waku_node.WakuNode object at 0x7faa7b213170>, <src.node.waku_node.WakuNode object at 0x7faa8021c560>]"},{"name":"pubsub_topic_list","value":"['/waku/2/rs/3/1']"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"check_published_message_reaches_relay_peer","time":{"start":1726547068001,"stop":1726547068124,"duration":123},"status":"passed","steps":[{"name":"create_message","time":{"start":1726547068001,"stop":1726547068001,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"assert_received_message","time":{"start":1726547068113,"stop":1726547068113,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1726547068001349376}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"assert_received_message","time":{"start":1726547068124,"stop":1726547068124,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1726547068001349376}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"message","value":"None"},{"name":"pubsub_topic","value":"None"},{"name":"message_propagation_delay","value":"0.1"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<tests.relay.test_publish.TestRelayPublish object at 0x7faa8021c290>, [<src.node.waku_node.WakuNode object at 0x7faa7b213170>, <src.node.waku_node.WakuNode object at 0x7faa8021c560>], ['/waku/2/rs/3/1'])"}],"shouldDisplayMessage":false,"stepsCount":9,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"ccd60159484cdb08","name":"log","source":"ccd60159484cdb08.txt","type":"text/plain","size":19444}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":14,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"test_setup::0","time":{"start":1726547068127,"stop":1726547068132,"duration":5},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes::0","time":{"start":1726547068133,"stop":1726547073782,"duration":5649},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"check_waku_log_errors::0","time":{"start":1726547073783,"stop":1726547073836,"duration":53},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail::0","time":{"start":1726547073836,"stop":1726547073836,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"set_allure_env_variables::0","time":{"start":1726548253741,"stop":1726548253741,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"flaky(reruns=5)"},{"name":"tag","value":"@pytest.mark.usefixtures('setup_main_relay_nodes', 'subscribe_main_relay_nodes', 'relay_warm_up')"},{"name":"parentSuite","value":"tests.relay"},{"name":"suite","value":"test_publish"},{"name":"subSuite","value":"TestRelayPublish"},{"name":"host","value":"fv-az698-406"},{"name":"thread","value":"2062-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.relay.test_publish"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":0,"broken":0,"skipped":0,"passed":56,"unknown":0,"total":56},"items":[{"uid":"39ec18b68bc94c43","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/362//#testresult/39ec18b68bc94c43","status":"passed","time":{"start":1726460747086,"stop":1726460752154,"duration":5068}},{"uid":"ce5b2462e2c38bec","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/361//#testresult/ce5b2462e2c38bec","status":"passed","time":{"start":1726374324017,"stop":1726374328989,"duration":4972}},{"uid":"62d2e87188870ed3","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/360//#testresult/62d2e87188870ed3","status":"passed","time":{"start":1726287919131,"stop":1726287925139,"duration":6008}},{"uid":"8b21a67dde4cadcf","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/359//#testresult/8b21a67dde4cadcf","status":"passed","time":{"start":1726201507548,"stop":1726201537121,"duration":29573}},{"uid":"d39438a0ca8faf3f","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/358//#testresult/d39438a0ca8faf3f","status":"passed","time":{"start":1726121565057,"stop":1726121594653,"duration":29596}},{"uid":"74b2720df6d64652","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/357//#testresult/74b2720df6d64652","status":"passed","time":{"start":1726115210998,"stop":1726115240799,"duration":29801}},{"uid":"5eb5fbbf8a71344f","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/356//#testresult/5eb5fbbf8a71344f","status":"passed","time":{"start":1726047466417,"stop":1726047495556,"duration":29139}},{"uid":"7cc268eeba7065e6","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/355//#testresult/7cc268eeba7065e6","status":"passed","time":{"start":1726028857585,"stop":1726028886959,"duration":29374}},{"uid":"bb97bec95ad2b9f8","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/354//#testresult/bb97bec95ad2b9f8","status":"passed","time":{"start":1725981440669,"stop":1725981469675,"duration":29006}},{"uid":"85d77227798ca571","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/353//#testresult/85d77227798ca571","status":"passed","time":{"start":1725976103076,"stop":1725976132782,"duration":29706}},{"uid":"b7254bdaa816c81c","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/352//#testresult/b7254bdaa816c81c","status":"passed","time":{"start":1725942332446,"stop":1725942361475,"duration":29029}},{"uid":"f2b0ddc2573cbbab","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/351//#testresult/f2b0ddc2573cbbab","status":"passed","time":{"start":1725855935969,"stop":1725855964847,"duration":28878}},{"uid":"304d5c262e263274","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/350//#testresult/304d5c262e263274","status":"passed","time":{"start":1725769508340,"stop":1725769537568,"duration":29228}},{"uid":"951f7dc15f7b4661","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/349//#testresult/951f7dc15f7b4661","status":"passed","time":{"start":1725683147830,"stop":1725683177011,"duration":29181}},{"uid":"87b4316a94187cec","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/348//#testresult/87b4316a94187cec","status":"passed","time":{"start":1725623921441,"stop":1725623950303,"duration":28862}},{"uid":"95dde84ba507a055","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/347//#testresult/95dde84ba507a055","status":"passed","time":{"start":1725615832082,"stop":1725615861336,"duration":29254}},{"uid":"90af5d961a1acf37","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/346//#testresult/90af5d961a1acf37","status":"passed","time":{"start":1725596711663,"stop":1725596741277,"duration":29614}},{"uid":"3aa4da5cf9baa9ee","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/345//#testresult/3aa4da5cf9baa9ee","status":"passed","time":{"start":1725510312227,"stop":1725510342101,"duration":29874}},{"uid":"677c13fc87bc7809","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/344//#testresult/677c13fc87bc7809","status":"passed","time":{"start":1725423948182,"stop":1725423977498,"duration":29316}},{"uid":"7c32489994e99c92","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/343//#testresult/7c32489994e99c92","status":"passed","time":{"start":1725337520848,"stop":1725337550620,"duration":29772}}]},"tags":["@pytest.mark.usefixtures('setup_main_relay_nodes', 'subscribe_main_relay_nodes', 'relay_warm_up')","flaky(reruns=5)"]},"source":"fe048a5d0813471a.json","parameterValues":[]}