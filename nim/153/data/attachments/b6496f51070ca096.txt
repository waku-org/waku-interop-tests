[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_light_push_with_invalid_pubsub_topics with id: 2024-04-18_04-14-13__8ea1d336-6bc0-441d-abe0-a9c797e3eb70
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:50 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-04-18_04-14-13__8ea1d336-6bc0-441d-abe0-a9c797e3eb70__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:54 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.198.151
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['22035', '22036', '22037', '22038', '22039']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:315 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:115 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 22035:22035 -p 22036:22036 -p 22037:22037 -p 22038:22038 -p 22039:22039 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22037 --rest-port=22035 --tcp-port=22036 --discv5-udp-port=22038 --rest-address=0.0.0.0 --nat=extip:172.18.198.151 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22039 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.198.151 waku dc26afd689b00f920b95ba851dbe2d213cd6fe79f0d265b011de672d042dad34
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID dc26afd689b0. Setting up logs at ./log/docker/receiving_node1_2024-04-18_04-14-13__8ea1d336-6bc0-441d-abe0-a9c797e3eb70__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:121 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 22035
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22035/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.198.151/tcp/22036/p2p/16Uiu2HAkytN15Fzu9JHPhbmuRwhbSwMeYcKHB4hcCWjU9F82M6Tu","/ip4/172.18.198.151/tcp/22037/ws/p2p/16Uiu2HAkytN15Fzu9JHPhbmuRwhbSwMeYcKHB4hcCWjU9F82M6Tu"],"enrUri":"enr:-LO4QDTO0vmwYmjyiDkBzRaQiTB6vfFzb6e9IPdV28PUXiNdYftqUPMW9DohGAMZqEIRwavoVotg2Dlevz1QFETtLmIBgmlkgnY0gmlwhKwSxpeKbXVsdGlhZGRyc4wACgSsEsaXBlYV3QOCcnOFAAABAACJc2VjcDI1NmsxoQJCRRoTC6OXmi-EzAFbQYfcUYxM6w-p1fXXfSiB802d3IN0Y3CCVhSDdWRwglYWhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:191 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:50 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-04-18_04-14-13__8ea1d336-6bc0-441d-abe0-a9c797e3eb70__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:54 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.251.211
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['60728', '60729', '60730', '60731', '60732']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:315 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:115 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 60728:60728 -p 60729:60729 -p 60730:60730 -p 60731:60731 -p 60732:60732 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=60730 --rest-port=60728 --tcp-port=60729 --discv5-udp-port=60731 --rest-address=0.0.0.0 --nat=extip:172.18.251.211 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=60732 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QDTO0vmwYmjyiDkBzRaQiTB6vfFzb6e9IPdV28PUXiNdYftqUPMW9DohGAMZqEIRwavoVotg2Dlevz1QFETtLmIBgmlkgnY0gmlwhKwSxpeKbXVsdGlhZGRyc4wACgSsEsaXBlYV3QOCcnOFAAABAACJc2VjcDI1NmsxoQJCRRoTC6OXmi-EzAFbQYfcUYxM6w-p1fXXfSiB802d3IN0Y3CCVhSDdWRwglYWhXdha3UyCQ --lightpushnode=/ip4/172.18.198.151/tcp/22036/p2p/16Uiu2HAkytN15Fzu9JHPhbmuRwhbSwMeYcKHB4hcCWjU9F82M6Tu --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.251.211 waku bab5de42d3a7129d0200afd5388cf420b70d8b2db3d001f4df4739035be5b071
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID bab5de42d3a7. Setting up logs at ./log/docker/lightpush_node1_2024-04-18_04-14-13__8ea1d336-6bc0-441d-abe0-a9c797e3eb70__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:121 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 60728
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60728/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.251.211/tcp/60729/p2p/16Uiu2HAm7GitFRf6UNGbKi5PQGdNDQYP9MApBZFFhBMdeeXHZ3iH","/ip4/172.18.251.211/tcp/60730/ws/p2p/16Uiu2HAm7GitFRf6UNGbKi5PQGdNDQYP9MApBZFFhBMdeeXHZ3iH"],"enrUri":"enr:-LO4QKBHTtjWvNscV9O2Q7GHWa4ar4_9D5w9AZLOks6EMOhuShArNqaNj4G3Ih2160b0LGD0b0E4VsVNEkLTUt4zeN4BgmlkgnY0gmlwhKwS-9OKbXVsdGlhZGRyc4wACgSsEvvTBu063QOCcnOFAAABAACJc2VjcDI1NmsxoQKwAUzEAk8WVHrtk3aAGLplkN3eGpCzPSPYMxaG20UiIoN0Y3CC7TmDdWRwgu07hXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:191 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60728/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.198.151/tcp/22036/p2p/16Uiu2HAkytN15Fzu9JHPhbmuRwhbSwMeYcKHB4hcCWjU9F82M6Tu"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22035/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:148 Running test with pubsub topic {'description': 'A dictionary', 'value': {'key': 'YWFh'}}
[35mDEBUG   [0m src.steps.light_push:light_push.py:127 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60728/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": {"key": "YWFh"}, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1713413657208345344}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:60728/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:148 Running test with pubsub topic {'description': 'An integer', 'value': 1234567890}
[35mDEBUG   [0m src.steps.light_push:light_push.py:127 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60728/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": 1234567890, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1713413657213065216}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:60728/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:148 Running test with pubsub topic {'description': 'A list', 'value': ['YWFh']}
[35mDEBUG   [0m src.steps.light_push:light_push.py:127 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60728/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": ["YWFh"], "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1713413657216600320}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:60728/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:148 Running test with pubsub topic {'description': 'A bool', 'value': True}
[35mDEBUG   [0m src.steps.light_push:light_push.py:127 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60728/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": true, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1713413657219823872}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:60728/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:168 Stopping container with id dc26afd689b0
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:168 Stopping container with id bab5de42d3a7
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Container stopped.