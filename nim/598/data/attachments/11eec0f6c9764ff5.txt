[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_content_topics with id: 2024-12-31_04-11-51__0f018456-198f-4f5a-b6ea-30501b5f9017
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-12-31_04-11-51__0f018456-198f-4f5a-b6ea-30501b5f9017__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.80.89
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['54704', '54705', '54706', '54707', '54708']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 54704:54704 -p 54705:54705 -p 54706:54706 -p 54707:54707 -p 54708:54708 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=54706 --rest-port=54704 --tcp-port=54705 --discv5-udp-port=54707 --rest-address=0.0.0.0 --nat=extip:172.18.80.89 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8a9d897e1afffbde7996051152e7dda352eeeaaccd4a219fb3bdd99f6cdee9d3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=54708 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.80.89 waku 9c402705394bb04d5cf9ec3a7238b78b42fba551d6716223777c5fcc775f1b5a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 9c402705394b. Setting up logs at ./log/docker/receiving_node1_2024-12-31_04-11-51__0f018456-198f-4f5a-b6ea-30501b5f9017__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 54704
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 25cc211f52a8. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54704/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54704/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.80.89/tcp/54705/p2p/16Uiu2HAm1YNCFjuY98FrFWJkwnbKJmER7KaueTrbXaCuJsPVcMjo","/ip4/172.18.80.89/tcp/54706/ws/p2p/16Uiu2HAm1YNCFjuY98FrFWJkwnbKJmER7KaueTrbXaCuJsPVcMjo"],"enrUri":"enr:-L24QH2nxY8gdgMNl0LbGA2U8l5eA8jqQ9gK2p1aajPvgl6JScDm8J4vM9cVGO0N9wEI3TV9XZ3f_UT7WYxEwSD1R6kCgmlkgnY0gmlwhKwSUFmKbXVsdGlhZGRyc5YACASsElBZBtWxAAoErBJQWQbVst0DgnJzhQADAQAAiXNlY3AyNTZrMaECWt0T1nOMoMcXqOxNSo__3kR5jQdoGmHflPjrpmbPHnqDdGNwgtWxg3VkcILVs4V3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-12-31_04-11-51__0f018456-198f-4f5a-b6ea-30501b5f9017__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.58.141
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['45160', '45161', '45162', '45163', '45164']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 45160:45160 -p 45161:45161 -p 45162:45162 -p 45163:45163 -p 45164:45164 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45162 --rest-port=45160 --tcp-port=45161 --discv5-udp-port=45163 --rest-address=0.0.0.0 --nat=extip:172.18.58.141 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9de825ccf4db7db381994e1ca15d7eab4e9c01eb8b3f1dddcde94854d4b17d7f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45164 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.58.141 waku e6c2b88b288f31f7fed0a066dd2939470adc1a57613e9700c4fa91994296bff0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID e6c2b88b288f. Setting up logs at ./log/docker/receiving_node2_2024-12-31_04-11-51__0f018456-198f-4f5a-b6ea-30501b5f9017__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 45160
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45160/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45160/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.58.141/tcp/45161/p2p/16Uiu2HAmV4Cj6SSCAqpCJGuSB9aP8L66PuGnWwbEfMrx6gsm6bHL","/ip4/172.18.58.141/tcp/45162/ws/p2p/16Uiu2HAmV4Cj6SSCAqpCJGuSB9aP8L66PuGnWwbEfMrx6gsm6bHL"],"enrUri":"enr:-L24QMIcbqLhY2d7Xk3M99YECC_AxUD-Qk2g4XQ5YK7zjZhKZkmCkSgMvagEQk9UBi-BdWLnBqFSkvYcAk35rUO1UugCgmlkgnY0gmlwhKwSOo2KbXVsdGlhZGRyc5YACASsEjqNBrBpAAoErBI6jQawat0DgnJzhQADAQAAiXNlY3AyNTZrMaED861Xy9VSQRZXE6wohhg8XQQrkq4ov0TVrsmzSSEexoODdGNwgrBpg3VkcIKwa4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45160/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.80.89/tcp/54705/p2p/16Uiu2HAm1YNCFjuY98FrFWJkwnbKJmER7KaueTrbXaCuJsPVcMjo"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-12-31_04-11-51__0f018456-198f-4f5a-b6ea-30501b5f9017__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.158.165
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['26099', '26100', '26101', '26102', '26103']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 26099:26099 -p 26100:26100 -p 26101:26101 -p 26102:26102 -p 26103:26103 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26101 --rest-port=26099 --tcp-port=26100 --discv5-udp-port=26102 --rest-address=0.0.0.0 --nat=extip:172.18.158.165 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6c5a9e1b0dd6dc9dad5df74da5cf0fafcc0c19bd015fff7ba2da711baaaf09bc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26103 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QH2nxY8gdgMNl0LbGA2U8l5eA8jqQ9gK2p1aajPvgl6JScDm8J4vM9cVGO0N9wEI3TV9XZ3f_UT7WYxEwSD1R6kCgmlkgnY0gmlwhKwSUFmKbXVsdGlhZGRyc5YACASsElBZBtWxAAoErBJQWQbVst0DgnJzhQADAQAAiXNlY3AyNTZrMaECWt0T1nOMoMcXqOxNSo__3kR5jQdoGmHflPjrpmbPHnqDdGNwgtWxg3VkcILVs4V3YWt1Mgk --lightpushnode=/ip4/172.18.80.89/tcp/54705/p2p/16Uiu2HAm1YNCFjuY98FrFWJkwnbKJmER7KaueTrbXaCuJsPVcMjo --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.158.165 waku e569331dd14adbc3e7b4857d72d0ec33fd1e1f3592cf0693228aabe1c874dacc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID e569331dd14a. Setting up logs at ./log/docker/lightpush_node1_2024-12-31_04-11-51__0f018456-198f-4f5a-b6ea-30501b5f9017__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 26099
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26099/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26099/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.158.165/tcp/26100/p2p/16Uiu2HAm9nSrsPvpZK27x3HdUwuKdQSQrfBanDPCzRRZ926W2zM1","/ip4/172.18.158.165/tcp/26101/ws/p2p/16Uiu2HAm9nSrsPvpZK27x3HdUwuKdQSQrfBanDPCzRRZ926W2zM1"],"enrUri":"enr:-L24QI7lN5uppa0FMUJ6376-RMQP-CAhp8DH2mDWotmydw9rOCIxMxR1jEba2RJLCPUm4rHsTu8H1nisbaVLToWAsPwCgmlkgnY0gmlwhKwSnqWKbXVsdGlhZGRyc5YACASsEp6lBmX0AAoErBKepQZl9d0DgnJzhQADAQAAiXNlY3AyNTZrMaEC1VX61mBB4cjPZh7pD-19w4qQgsZxOPWgBFfTKMyN1OSDdGNwgmX0g3VkcIJl9oV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26099/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.80.89/tcp/54705/p2p/16Uiu2HAm1YNCFjuY98FrFWJkwnbKJmER7KaueTrbXaCuJsPVcMjo"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26099/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.58.141/tcp/45161/p2p/16Uiu2HAmV4Cj6SSCAqpCJGuSB9aP8L66PuGnWwbEfMrx6gsm6bHL"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54704/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45160/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic Empty string
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26099/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "", "timestamp": 1735618316289747968}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:26099/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A dictionary
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26099/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": {"key": "YWFh"}, "timestamp": 1735618316297588224}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:26099/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic An integer
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26099/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": 1234567890, "timestamp": 1735618316305779456}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:26099/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A list
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26099/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": ["YWFh"], "timestamp": 1735618316315858176}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:26099/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A bool
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26099/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": true, "timestamp": 1735618316322860800}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:26099/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 9c402705394b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id e6c2b88b288f
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 9c402705394b. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id e569331dd14a
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container e6c2b88b288f. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.