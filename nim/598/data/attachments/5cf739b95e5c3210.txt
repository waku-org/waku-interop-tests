[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_update_subscription_with_invalid_request_id with id: 2024-12-31_04-10-31__34d2c216-44ee-4001-ac9d-41b8cc09f3ad
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-31_04-10-31__34d2c216-44ee-4001-ac9d-41b8cc09f3ad__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.53.84
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['34600', '34601', '34602', '34603', '34604']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 34600:34600 -p 34601:34601 -p 34602:34602 -p 34603:34603 -p 34604:34604 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34602 --rest-port=34600 --tcp-port=34601 --discv5-udp-port=34603 --rest-address=0.0.0.0 --nat=extip:172.18.53.84 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=adc97eb18ce6bfe9f59f6ecaeeb9c8e4e9bf1b63ba8bb50edf6bbd1fee73143b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34604 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.53.84 waku 276c088a7779faf9002fbcce904ed15b38956a5b9c8fbb7d49c80507e6f77e75
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 276c088a7779. Setting up logs at ./log/docker/node1_2024-12-31_04-10-31__34d2c216-44ee-4001-ac9d-41b8cc09f3ad__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 34600
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 3a207a43d343. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34600/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34600/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.53.84/tcp/34601/p2p/16Uiu2HAmSfsWpz4QpFs8o7rFxypvxd3bNzc7rF19AYzhRJpZgoQz","/ip4/172.18.53.84/tcp/34602/ws/p2p/16Uiu2HAmSfsWpz4QpFs8o7rFxypvxd3bNzc7rF19AYzhRJpZgoQz"],"enrUri":"enr:-L24QEFatksf4hDBM44Ywrask7DVqylSAVV4JKZgqgSXonhDGuEc9o8yhD5zdmpDpKhmRtxwGHOwdOdhTSB7guOBpjgCgmlkgnY0gmlwhKwSNVSKbXVsdGlhZGRyc5YACASsEjVUBocpAAoErBI1VAaHKt0DgnJzhQADAQAAiXNlY3AyNTZrMaED0D14A0Q_-jQbeUQId1OCVuZ6tyontHMqfS2N848nlJ-DdGNwgocpg3VkcIKHK4V3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-31_04-10-31__34d2c216-44ee-4001-ac9d-41b8cc09f3ad__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.166.114
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['7531', '7532', '7533', '7534', '7535']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 7531:7531 -p 7532:7532 -p 7533:7533 -p 7534:7534 -p 7535:7535 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7533 --rest-port=7531 --tcp-port=7532 --discv5-udp-port=7534 --rest-address=0.0.0.0 --nat=extip:172.18.166.114 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a7e9ce56a97cabd67a90a7e7a86bef2af4c5aed9ca834aa4dcc20b3a3380e5c2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7535 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QEFatksf4hDBM44Ywrask7DVqylSAVV4JKZgqgSXonhDGuEc9o8yhD5zdmpDpKhmRtxwGHOwdOdhTSB7guOBpjgCgmlkgnY0gmlwhKwSNVSKbXVsdGlhZGRyc5YACASsEjVUBocpAAoErBI1VAaHKt0DgnJzhQADAQAAiXNlY3AyNTZrMaED0D14A0Q_-jQbeUQId1OCVuZ6tyontHMqfS2N848nlJ-DdGNwgocpg3VkcIKHK4V3YWt1MgU --filternode=/ip4/172.18.53.84/tcp/34601/p2p/16Uiu2HAmSfsWpz4QpFs8o7rFxypvxd3bNzc7rF19AYzhRJpZgoQz
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.166.114 waku 400ebe0a717b595ebe62f7d859fd5f6ac51ee14e79d47914bc8546719c888f86
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 400ebe0a717b. Setting up logs at ./log/docker/node2_2024-12-31_04-10-31__34d2c216-44ee-4001-ac9d-41b8cc09f3ad__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 7531
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7531/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7531/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.166.114/tcp/7532/p2p/16Uiu2HAmVZZ3C9gQ6qKqHgRqxLWhpxkVWKqfk2KR8xUH8Q3F2msa","/ip4/172.18.166.114/tcp/7533/ws/p2p/16Uiu2HAmVZZ3C9gQ6qKqHgRqxLWhpxkVWKqfk2KR8xUH8Q3F2msa"],"enrUri":"enr:-L24QEYz07m0A4eY-aPppoUyG9r3ndiFCrKbnvxRQsmYa5A7FeG_Fbd93SKuAeW-zzGzjWKRfzbirsAPBEvegwnXA4YCgmlkgnY0gmlwhKwSpnKKbXVsdGlhZGRyc5YACASsEqZyBh1sAAoErBKmcgYdbd0DgnJzhQADAQAAiXNlY3AyNTZrMaED-zInP8a_OSTavxDjX6kDKI_kE2ia124_wOfduP9bBS2DdGNwgh1sg3VkcIIdboV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7531/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.53.84/tcp/34601/p2p/16Uiu2HAmSfsWpz4QpFs8o7rFxypvxd3bNzc7rF19AYzhRJpZgoQz"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34600/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7531/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "4792eab8-c101-4250-af4c-beb294584d4f", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"4792eab8-c101-4250-af4c-beb294584d4f","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X PUT "http://127.0.0.1:7531/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": 1, "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:7531/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 276c088a7779
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 400ebe0a717b
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 276c088a7779. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.