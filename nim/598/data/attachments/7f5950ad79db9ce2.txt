[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_missing_payload with id: 2024-12-31_04-11-35__075f5004-256e-479d-af1f-1f454644e0dc
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-12-31_04-11-35__075f5004-256e-479d-af1f-1f454644e0dc__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.18.170
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['41945', '41946', '41947', '41948', '41949']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 41945:41945 -p 41946:41946 -p 41947:41947 -p 41948:41948 -p 41949:41949 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=41947 --rest-port=41945 --tcp-port=41946 --discv5-udp-port=41948 --rest-address=0.0.0.0 --nat=extip:172.18.18.170 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=becf4627405bb13a46c3ecb1f57d591ecfcfc0bebf32796bc4af9a813f3aea09 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=41949 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.18.170 waku 9ac1dd86d1f7100a42f1886dc4748a4c12771ee3a12116f61b42051fc7b7e362
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 9ac1dd86d1f7. Setting up logs at ./log/docker/receiving_node1_2024-12-31_04-11-35__075f5004-256e-479d-af1f-1f454644e0dc__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 41945
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container aaa104afa217. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41945/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41945/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.18.170/tcp/41946/p2p/16Uiu2HAmMgpUXDH1N415ULGo5XQQ1RhBbVjLo4NdTrrxV7Uyrkrs","/ip4/172.18.18.170/tcp/41947/ws/p2p/16Uiu2HAmMgpUXDH1N415ULGo5XQQ1RhBbVjLo4NdTrrxV7Uyrkrs"],"enrUri":"enr:-L24QGxpYWaMyR6GLp8BW_KMRwbXJeTlGVRrgepDT3GiLm9mUO5pM8Xsxv-2gV3NJ_voyTMx3V9ERIVX94rAmyFwyngCgmlkgnY0gmlwhKwSEqqKbXVsdGlhZGRyc5YACASsEhKqBqPaAAoErBISqgaj290DgnJzhQADAQAAiXNlY3AyNTZrMaEDhjEtiw1pm2zc-MB1XcoDB6HwOKFZpmkyewRPtnLJteCDdGNwgqPag3VkcIKj3IV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-12-31_04-11-35__075f5004-256e-479d-af1f-1f454644e0dc__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.60.120
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['44248', '44249', '44250', '44251', '44252']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 44248:44248 -p 44249:44249 -p 44250:44250 -p 44251:44251 -p 44252:44252 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44250 --rest-port=44248 --tcp-port=44249 --discv5-udp-port=44251 --rest-address=0.0.0.0 --nat=extip:172.18.60.120 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9c2c4ab2b4eab93c1af1edfbca2eadc2a16c1a9da801d1bdfab58496d4ceebec --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44252 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.60.120 waku fd3f73ac18cd72da44378e819fedb37bb869473d0d9d2b3773afae5033eb1d14
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID fd3f73ac18cd. Setting up logs at ./log/docker/receiving_node2_2024-12-31_04-11-35__075f5004-256e-479d-af1f-1f454644e0dc__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 44248
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44248/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44248/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.60.120/tcp/44249/p2p/16Uiu2HAm4bJhE9o6FwMrfWq4MAZ2fWxeQPAQDFA4eWoQM1rdU83R","/ip4/172.18.60.120/tcp/44250/ws/p2p/16Uiu2HAm4bJhE9o6FwMrfWq4MAZ2fWxeQPAQDFA4eWoQM1rdU83R"],"enrUri":"enr:-L24QC0kvjTam3I6WAbFdZBN0qbnIvbc_5JNnxtwqaE2ZYhNCE33ScJTfMDPDCJRX1bOu3D7xdwSUg5qwn9uDKX8up8CgmlkgnY0gmlwhKwSPHiKbXVsdGlhZGRyc5YACASsEjx4BqzZAAoErBI8eAas2t0DgnJzhQADAQAAiXNlY3AyNTZrMaECiDDsNiAQV1lPFOi_h4MJSrLFDju2jTU0W9Xn58nOuaCDdGNwgqzZg3VkcIKs24V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44248/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.18.170/tcp/41946/p2p/16Uiu2HAmMgpUXDH1N415ULGo5XQQ1RhBbVjLo4NdTrrxV7Uyrkrs"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-12-31_04-11-35__075f5004-256e-479d-af1f-1f454644e0dc__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.205.119
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['11004', '11005', '11006', '11007', '11008']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 11004:11004 -p 11005:11005 -p 11006:11006 -p 11007:11007 -p 11008:11008 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=11006 --rest-port=11004 --tcp-port=11005 --discv5-udp-port=11007 --rest-address=0.0.0.0 --nat=extip:172.18.205.119 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7b412dd82c3cecbccbdac9ca3e8bb4ef93e2e1d55c4ddd7de5caff466db7bfaa --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=11008 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QGxpYWaMyR6GLp8BW_KMRwbXJeTlGVRrgepDT3GiLm9mUO5pM8Xsxv-2gV3NJ_voyTMx3V9ERIVX94rAmyFwyngCgmlkgnY0gmlwhKwSEqqKbXVsdGlhZGRyc5YACASsEhKqBqPaAAoErBISqgaj290DgnJzhQADAQAAiXNlY3AyNTZrMaEDhjEtiw1pm2zc-MB1XcoDB6HwOKFZpmkyewRPtnLJteCDdGNwgqPag3VkcIKj3IV3YWt1Mgk --lightpushnode=/ip4/172.18.18.170/tcp/41946/p2p/16Uiu2HAmMgpUXDH1N415ULGo5XQQ1RhBbVjLo4NdTrrxV7Uyrkrs --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.205.119 waku 7d7926df88c8f00a80168334be99f87ba343719233cb45f139194798d8299c8d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 7d7926df88c8. Setting up logs at ./log/docker/lightpush_node1_2024-12-31_04-11-35__075f5004-256e-479d-af1f-1f454644e0dc__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 11004
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11004/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11004/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.205.119/tcp/11005/p2p/16Uiu2HAmAMygcwmnczLCA8G9ZV2cTrRQQsVGB9Ktj1FjgZzkGQKd","/ip4/172.18.205.119/tcp/11006/ws/p2p/16Uiu2HAmAMygcwmnczLCA8G9ZV2cTrRQQsVGB9Ktj1FjgZzkGQKd"],"enrUri":"enr:-L24QCRzQZPUVamFOZmy6FFT_Z2MVj65jZd1sxmFDcSGHPcYT3qJemLlQP2uqO2XPSunZZODEqRbFGPmhftI--RvwUECgmlkgnY0gmlwhKwSzXeKbXVsdGlhZGRyc5YACASsEs13Bir9AAoErBLNdwYq_t0DgnJzhQADAQAAiXNlY3AyNTZrMaEC3ez_oDuIVzEBoVFsUnHxEygmRHl35j2o5R-cZDHttJyDdGNwgir9g3VkcIIq_4V3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11004/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.18.170/tcp/41946/p2p/16Uiu2HAmMgpUXDH1N415ULGo5XQQ1RhBbVjLo4NdTrrxV7Uyrkrs"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11004/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.60.120/tcp/44249/p2p/16Uiu2HAm4bJhE9o6FwMrfWq4MAZ2fWxeQPAQDFA4eWoQM1rdU83R"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41945/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44248/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11004/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"contentTopic": "/myapp/1/latest/proto", "timestamp": 1735618300190716672}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:11004/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 9ac1dd86d1f7
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id fd3f73ac18cd
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 9ac1dd86d1f7. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 7d7926df88c8
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container fd3f73ac18cd. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.