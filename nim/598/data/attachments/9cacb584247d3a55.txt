[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_msg_stored_when_ephemeral_false with id: 2024-12-31_04-06-29__f5912a4c-d202-4dd9-9bf9-4282ece2924d
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-31_04-06-29__f5912a4c-d202-4dd9-9bf9-4282ece2924d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-31_04-06-29__f5912a4c-d202-4dd9-9bf9-4282ece2924d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-12-31_04-06-29__f5912a4c-d202-4dd9-9bf9-4282ece2924d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:414 Start 3 nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.175.0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['4681', '4682', '4683', '4684', '4685']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 4681:4681 -p 4682:4682 -p 4683:4683 -p 4684:4684 -p 4685:4685 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4683 --rest-port=4681 --tcp-port=4682 --discv5-udp-port=4684 --rest-address=0.0.0.0 --nat=extip:172.18.175.0 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=827d2a012b23a62aa85c647e75989cbf3c4b7b3fba0e4595def6e95ec5c35841 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4685 --metrics-logging=true --relay=true --store=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.175.0 waku efc6a8fe8a65d7c15c8658300743dd60652d4fec33ab6e98ce0c252fffa3d7ef
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID efc6a8fe8a65. Setting up logs at ./log/docker/node1_2024-12-31_04-06-29__f5912a4c-d202-4dd9-9bf9-4282ece2924d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 4681
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 6b6be1d413b0. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4681/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4681/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.175.0/tcp/4682/p2p/16Uiu2HAmJsjSSUpTLBNUjMqrrErFdp6gHHfr2dgvFu9vgSiUcZgV","/ip4/172.18.175.0/tcp/4683/ws/p2p/16Uiu2HAmJsjSSUpTLBNUjMqrrErFdp6gHHfr2dgvFu9vgSiUcZgV"],"enrUri":"enr:-L24QBqDIO-OHrQMQcFGSYIVbMODwPuqPbHBa2XxBpzMzaUFAeL7h2EF3WpZ21O7h1j780qamDbiGxfZSJgW63hPQX8CgmlkgnY0gmlwhKwSrwCKbXVsdGlhZGRyc5YACASsEq8ABhJKAAoErBKvAAYSS90DgnJzhQADAQAAiXNlY3AyNTZrMaEDXGnP2ljY9tUB4RINs2nRuSwtV0WiNGZO35YJW0mOQvqDdGNwghJKg3VkcIISTIV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.4.162
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['18482', '18483', '18484', '18485', '18486']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 18482:18482 -p 18483:18483 -p 18484:18484 -p 18485:18485 -p 18486:18486 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18484 --rest-port=18482 --tcp-port=18483 --discv5-udp-port=18485 --rest-address=0.0.0.0 --nat=extip:172.18.4.162 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f7cdddb17dfc6e6c183fce0bff85313bbd04f3852e6efd02b833ffe50bd53cec --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18486 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-L24QBqDIO-OHrQMQcFGSYIVbMODwPuqPbHBa2XxBpzMzaUFAeL7h2EF3WpZ21O7h1j780qamDbiGxfZSJgW63hPQX8CgmlkgnY0gmlwhKwSrwCKbXVsdGlhZGRyc5YACASsEq8ABhJKAAoErBKvAAYSS90DgnJzhQADAQAAiXNlY3AyNTZrMaEDXGnP2ljY9tUB4RINs2nRuSwtV0WiNGZO35YJW0mOQvqDdGNwghJKg3VkcIISTIV3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.4.162 waku b3ba63c9d2c1a0d6a9d12989ef84a674d040210f0a6eea2a72d4fefc24bef4da
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID b3ba63c9d2c1. Setting up logs at ./log/docker/node2_2024-12-31_04-06-29__f5912a4c-d202-4dd9-9bf9-4282ece2924d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 18482
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18482/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18482/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.4.162/tcp/18483/p2p/16Uiu2HAmHBS5juBvMLJLqLVfSaRqvVgTPVoxFy9mkv5vynPA3bQR","/ip4/172.18.4.162/tcp/18484/ws/p2p/16Uiu2HAmHBS5juBvMLJLqLVfSaRqvVgTPVoxFy9mkv5vynPA3bQR"],"enrUri":"enr:-L24QHAFl9u9HlMRY6nPBE7hFxwwonFZpSTty6dlxDyD7g55Y_6BfVF5kvr1W_oNFr0PQ4RzZ7VCvO2bUVtnjfsCEVsCgmlkgnY0gmlwhKwSBKKKbXVsdGlhZGRyc5YACASsEgSiBkgzAAoErBIEogZINN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDQztEYx2zmf7P38WRQ24FZd06WLlHTso6sW1bLdawF_aDdGNwgkgzg3VkcIJINYV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.14.208
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['26588', '26589', '26590', '26591', '26592']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 26588:26588 -p 26589:26589 -p 26590:26590 -p 26591:26591 -p 26592:26592 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26590 --rest-port=26588 --tcp-port=26589 --discv5-udp-port=26591 --rest-address=0.0.0.0 --nat=extip:172.18.14.208 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4b3dba6f213a2aef7bf9e0bc5a1f6b29c4b47a57c28af6dddf410bebe8ed0f4f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26592 --metrics-logging=true --relay=false --storenode=/ip4/172.18.4.162/tcp/18483/p2p/16Uiu2HAmHBS5juBvMLJLqLVfSaRqvVgTPVoxFy9mkv5vynPA3bQR --discv5-bootstrap-node=enr:-L24QHAFl9u9HlMRY6nPBE7hFxwwonFZpSTty6dlxDyD7g55Y_6BfVF5kvr1W_oNFr0PQ4RzZ7VCvO2bUVtnjfsCEVsCgmlkgnY0gmlwhKwSBKKKbXVsdGlhZGRyc5YACASsEgSiBkgzAAoErBIEogZINN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDQztEYx2zmf7P38WRQ24FZd06WLlHTso6sW1bLdawF_aDdGNwgkgzg3VkcIJINYV3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.14.208 waku b92e6568728214a761dae4286e27334c83f66a23867f819842dd87d4e6793487
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID b92e65687282. Setting up logs at ./log/docker/node3_2024-12-31_04-06-29__f5912a4c-d202-4dd9-9bf9-4282ece2924d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 26588
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26588/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26588/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.14.208/tcp/26589/p2p/16Uiu2HAmCQUxKEJ8CZrx6Yaq4oSdJahFi8z5w6CvPMiTz3NSnh93","/ip4/172.18.14.208/tcp/26590/ws/p2p/16Uiu2HAmCQUxKEJ8CZrx6Yaq4oSdJahFi8z5w6CvPMiTz3NSnh93"],"enrUri":"enr:-L24QKF8o_QyQk7_wL9_ROzt3mWdIIF_udDFjHF_aqwu0dOWfSJCiP6N6Wlo4KOEX7Bzsr5L59dNOnb81wdyvh14kpACgmlkgnY0gmlwhKwSDtCKbXVsdGlhZGRyc5YACASsEg7QBmfdAAoErBIO0AZn3t0DgnJzhQADAQAAiXNlY3AyNTZrMaEC_EihYHL_6lkIazy-dfjtzLmCF6cfSzxERapNAu85LCqDdGNwgmfdg3VkcIJn34V3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:419 Subscribe node1 ,2 to pubtopic /waku/2/rs/3/1
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4681/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18482/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4681/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.4.162/tcp/18483/p2p/16Uiu2HAmHBS5juBvMLJLqLVfSaRqvVgTPVoxFy9mkv5vynPA3bQR","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18482/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.175.0/tcp/4682/p2p/16Uiu2HAmJsjSSUpTLBNUjMqrrErFdp6gHHfr2dgvFu9vgSiUcZgV","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:424 Node1 publish message with ephemeral = false
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4681/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "ephemeral": false}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 3 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:428 Check if message is stored 
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26588/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"73591a3457031203a357","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"jWai5b7TUvK+ai/chLqrrvESXOoof8m2lWhKOAXQJ1M="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id efc6a8fe8a65
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id b3ba63c9d2c1
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container efc6a8fe8a65. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id b92e65687282
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container b3ba63c9d2c1. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.