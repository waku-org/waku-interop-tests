[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_no_timestamp with id: 2024-08-21_04-21-27__0298e690-f8ad-4bf7-b278-f289324dd41f
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-21_04-21-27__0298e690-f8ad-4bf7-b278-f289324dd41f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.113.215
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['7677', '7678', '7679', '7680', '7681']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 7677:7677 -p 7678:7678 -p 7679:7679 -p 7680:7680 -p 7681:7681 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7679 --rest-port=7677 --tcp-port=7678 --discv5-udp-port=7680 --rest-address=0.0.0.0 --nat=extip:172.18.113.215 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3b499ced6accba5a312facb3d4ee8810e0cad94db94f2bc138d98d7b9b3dd758 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7681 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.113.215 waku 8aba192eb710be9b4901c8217f9a3bcd7757e26ab90e70007b6aad8b86385221
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 8aba192eb710. Setting up logs at ./log/docker/receiving_node1_2024-08-21_04-21-27__0298e690-f8ad-4bf7-b278-f289324dd41f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 7677
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7677/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7677/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.113.215/tcp/7678/p2p/16Uiu2HAmATqqvLKzEbLT9U2pcAWFDnz5zn86a3Yhun5KWwJ4Ts2C","/ip4/172.18.113.215/tcp/7679/ws/p2p/16Uiu2HAmATqqvLKzEbLT9U2pcAWFDnz5zn86a3Yhun5KWwJ4Ts2C"],"enrUri":"enr:-LO4QMPevUmHwO_LYIk5RcEj0wsVxk7Rghf23fGtBkCbfRKGOUoK4f6iEbgUE7FOWRt5-c-DDd6k_5kplfYFoekXHEcBgmlkgnY0gmlwhKwScdeKbXVsdGlhZGRyc4wACgSsEnHXBh3_3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLfbZ566pYEfFX9GT2_Pu855McIg44QtVxoDVEGLbgALYN0Y3CCHf6DdWRwgh4AhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-21_04-21-27__0298e690-f8ad-4bf7-b278-f289324dd41f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.172.42
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['14936', '14937', '14938', '14939', '14940']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 14936:14936 -p 14937:14937 -p 14938:14938 -p 14939:14939 -p 14940:14940 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14938 --rest-port=14936 --tcp-port=14937 --discv5-udp-port=14939 --rest-address=0.0.0.0 --nat=extip:172.18.172.42 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cba93af04f69ad266bdb7ddcf1a9a8fde860ae4cc9f5bdf94bbe8979c3c95e6a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14940 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.172.42 waku 9d4e31a7f5ddb2dc6361cca54d8023d6c56adbf219fdd8a29c3041cff15310bc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 9d4e31a7f5dd. Setting up logs at ./log/docker/receiving_node2_2024-08-21_04-21-27__0298e690-f8ad-4bf7-b278-f289324dd41f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 14936
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14936/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14936/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.172.42/tcp/14937/p2p/16Uiu2HAm4yonV4TrGw2kTgBm3unVyeZhRyetN2iEbfEckTtXHQm4","/ip4/172.18.172.42/tcp/14938/ws/p2p/16Uiu2HAm4yonV4TrGw2kTgBm3unVyeZhRyetN2iEbfEckTtXHQm4"],"enrUri":"enr:-LO4QNkr3OJVWXjDdTNJDyAE07WHfUSsAVzUV35Y7DZmwuVlRoIIjdvkuqtfkHYVOhXmOc4BvHFiAY8kiqEv7duJ1msBgmlkgnY0gmlwhKwSrCqKbXVsdGlhZGRyc4wACgSsEqwqBjpa3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKN9JfobwVrkglLWZLwTt2V6rkncDvAN8AW8fTKCq9kd4N0Y3CCOlmDdWRwgjpbhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14936/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.113.215/tcp/7678/p2p/16Uiu2HAmATqqvLKzEbLT9U2pcAWFDnz5zn86a3Yhun5KWwJ4Ts2C"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-21_04-21-27__0298e690-f8ad-4bf7-b278-f289324dd41f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.89.65
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['47309', '47310', '47311', '47312', '47313']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 47309:47309 -p 47310:47310 -p 47311:47311 -p 47312:47312 -p 47313:47313 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=47311 --rest-port=47309 --tcp-port=47310 --discv5-udp-port=47312 --rest-address=0.0.0.0 --nat=extip:172.18.89.65 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fc24a0c8b90bd96525c442f1fd16a5bbdb3ca1c33dce486b8ec0021e7bffe544 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=47313 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QMPevUmHwO_LYIk5RcEj0wsVxk7Rghf23fGtBkCbfRKGOUoK4f6iEbgUE7FOWRt5-c-DDd6k_5kplfYFoekXHEcBgmlkgnY0gmlwhKwScdeKbXVsdGlhZGRyc4wACgSsEnHXBh3_3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLfbZ566pYEfFX9GT2_Pu855McIg44QtVxoDVEGLbgALYN0Y3CCHf6DdWRwgh4AhXdha3UyCQ --lightpushnode=/ip4/172.18.113.215/tcp/7678/p2p/16Uiu2HAmATqqvLKzEbLT9U2pcAWFDnz5zn86a3Yhun5KWwJ4Ts2C --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.89.65 waku 61c3d0b652f5f4e652b9e390d4f64e878336aeea9d69cf911238e27a2c16cf73
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 61c3d0b652f5. Setting up logs at ./log/docker/lightpush_node1_2024-08-21_04-21-27__0298e690-f8ad-4bf7-b278-f289324dd41f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 47309
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47309/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47309/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.89.65/tcp/47310/p2p/16Uiu2HAm51jG6HMmrbBi13PmQq28YmDR6rE62NPfEmutUrtBFMn7","/ip4/172.18.89.65/tcp/47311/ws/p2p/16Uiu2HAm51jG6HMmrbBi13PmQq28YmDR6rE62NPfEmutUrtBFMn7"],"enrUri":"enr:-LO4QEi7AsK-Lggm3tSWsHLv_ZgIuiPt48mJE3oFeEmE_HR7RsaitOQxlgi1O8JbgvaZ4jnQKWs6i5sekexsWPCAGr8BgmlkgnY0gmlwhKwSWUGKbXVsdGlhZGRyc4wACgSsEllBBrjP3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKOcqPC0YPuFruvtfQkQ5ufisq8BVHnqDhGB2LI14VxeIN0Y3CCuM6DdWRwgrjQhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47309/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.113.215/tcp/7678/p2p/16Uiu2HAmATqqvLKzEbLT9U2pcAWFDnz5zn86a3Yhun5KWwJ4Ts2C"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47309/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.172.42/tcp/14937/p2p/16Uiu2HAm4yonV4TrGw2kTgBm3unVyeZhRyetN2iEbfEckTtXHQm4"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7677/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14936/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47309/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto"}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7677/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1724214092637104384,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14936/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1724214092637104384,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 8aba192eb710
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 9d4e31a7f5dd
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 61c3d0b652f5
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.