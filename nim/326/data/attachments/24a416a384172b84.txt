[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_subscribe_to_pubsub_topics_from_multiple_clusters with id: 2024-08-21_04-17-22__e3a8f4a8-c200-4bd0-8ba7-503e37d257c2
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node1_2024-08-21_04-17-22__e3a8f4a8-c200-4bd0-8ba7-503e37d257c2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.96.112
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['43989', '43990', '43991', '43992', '43993']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 43989:43989 -p 43990:43990 -p 43991:43991 -p 43992:43992 -p 43993:43993 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=43991 --rest-port=43989 --tcp-port=43990 --discv5-udp-port=43992 --rest-address=0.0.0.0 --nat=extip:172.18.96.112 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4a197acf7a3a1431bddad6ab88a3bcf5b3ef5ea9ffbdcbb9848b40316f8f1ad3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=43993 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.96.112 waku 0a9c052c9262b5bce2e638dc128778f0564bbe8a13fed0c9ebc916062a7e1ff9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 0a9c052c9262. Setting up logs at ./log/docker/node1_2024-08-21_04-17-22__e3a8f4a8-c200-4bd0-8ba7-503e37d257c2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 43989
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43989/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43989/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.96.112/tcp/43990/p2p/16Uiu2HAkv3t5N2459bavwJxL8HBPq8Dif24anXc5cvCh5Tx21iqY","/ip4/172.18.96.112/tcp/43991/ws/p2p/16Uiu2HAkv3t5N2459bavwJxL8HBPq8Dif24anXc5cvCh5Tx21iqY"],"enrUri":"enr:-LO4QKA9bdFzpW4Y6oIc7KkE73-ecOVubPw3ziQQPOtW0ehAI3CTpZySuz2R2pW1sZJfblI7PQwPFL_IZMAOnlM_5yQBgmlkgnY0gmlwhKwSYHCKbXVsdGlhZGRyc4wACgSsEmBwBqvX3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIJRpYN8eQP9hw9ob26g08VRmofwIqapKSGnLt1mnfWs4N0Y3CCq9aDdWRwgqvYhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node2_2024-08-21_04-17-22__e3a8f4a8-c200-4bd0-8ba7-503e37d257c2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.16.154
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['36208', '36209', '36210', '36211', '36212']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 36208:36208 -p 36209:36209 -p 36210:36210 -p 36211:36211 -p 36212:36212 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36210 --rest-port=36208 --tcp-port=36209 --discv5-udp-port=36211 --rest-address=0.0.0.0 --nat=extip:172.18.16.154 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eb6435eb130ce2e0485bb35c058ca8a38a72d6bc7a1f0eb06ca7c9ada9446df5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36212 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QKA9bdFzpW4Y6oIc7KkE73-ecOVubPw3ziQQPOtW0ehAI3CTpZySuz2R2pW1sZJfblI7PQwPFL_IZMAOnlM_5yQBgmlkgnY0gmlwhKwSYHCKbXVsdGlhZGRyc4wACgSsEmBwBqvX3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIJRpYN8eQP9hw9ob26g08VRmofwIqapKSGnLt1mnfWs4N0Y3CCq9aDdWRwgqvYhXdha3UyBQ --filternode=/ip4/172.18.96.112/tcp/43990/p2p/16Uiu2HAkv3t5N2459bavwJxL8HBPq8Dif24anXc5cvCh5Tx21iqY
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.16.154 waku afc33a9fff2da9edbc612efd9e0706eb135d545161638816c98898bf96bff1da
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID afc33a9fff2d. Setting up logs at ./log/docker/node2_2024-08-21_04-17-22__e3a8f4a8-c200-4bd0-8ba7-503e37d257c2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 36208
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36208/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36208/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.16.154/tcp/36209/p2p/16Uiu2HAm8tx4MnTb3dLQw1v1f5jwLzUWowdEsxikkDG5ww3o25mi","/ip4/172.18.16.154/tcp/36210/ws/p2p/16Uiu2HAm8tx4MnTb3dLQw1v1f5jwLzUWowdEsxikkDG5ww3o25mi"],"enrUri":"enr:-LO4QEsWlD3ONZZxBTgJ-7Vo_45nuFcr6HSQ64X3hQzQWt5sAlkRRYbRUst6JQN0_NDOpu5mik_jlvt9pHpB-cMVDpsBgmlkgnY0gmlwhKwSEJqKbXVsdGlhZGRyc4wACgSsEhCaBo1y3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLIJMrKeBs5TpTXypEKAs8eOGWvz5MQyLEojauWvrHneYN0Y3CCjXGDdWRwgo1zhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36208/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.96.112/tcp/43990/p2p/16Uiu2HAkv3t5N2459bavwJxL8HBPq8Dif24anXc5cvCh5Tx21iqY"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.filter.test_subscribe_create:test_subscribe_create.py:41 Running test with pubsub topic: /waku/2/rs/3/1
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43989/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36208/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "6c4f7a19-2450-4e3b-92d4-2eb85a1bfedf", "contentFilters": ["/waku/2/rs/3/1"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"6c4f7a19-2450-4e3b-92d4-2eb85a1bfedf","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43989/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/waku/2/rs/3/1", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36208/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/waku/2/rs/3/1","version":0,"timestamp":1724213845488734976,"ephemeral":false}]'
[35mDEBUG   [0m tests.filter.test_subscribe_create:test_subscribe_create.py:41 Running test with pubsub topic: /waku/2/rs/2/2
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43989/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/2"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36208/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "e429e4b6-56d2-4915-b633-07aec4af6a8e", "contentFilters": ["/waku/2/rs/2/2"], "pubsubTopic": "/waku/2/rs/2/2"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"e429e4b6-56d2-4915-b633-07aec4af6a8e","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43989/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/waku/2/rs/2/2", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36208/filter/v2/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/waku/2/rs/2/2","version":0,"timestamp":1724213845621689344,"ephemeral":false}]'
[35mDEBUG   [0m tests.filter.test_subscribe_create:test_subscribe_create.py:41 Running test with pubsub topic: /waku/2/rs/3/9
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43989/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/9"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36208/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "588df4ff-9357-4602-9c18-b794b6b6896b", "contentFilters": ["/waku/2/rs/3/9"], "pubsubTopic": "/waku/2/rs/3/9"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"588df4ff-9357-4602-9c18-b794b6b6896b","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43989/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F9" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/waku/2/rs/3/9", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36208/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F9" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/waku/2/rs/3/9","version":0,"timestamp":1724213845749828608,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 0a9c052c9262
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id afc33a9fff2d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.