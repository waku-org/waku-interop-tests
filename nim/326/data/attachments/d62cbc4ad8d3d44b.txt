[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_extra_field with id: 2024-08-21_04-21-55__ce703667-1422-4a12-836c-1ea49522a6fa
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-21_04-21-55__ce703667-1422-4a12-836c-1ea49522a6fa__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.70.211
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['34887', '34888', '34889', '34890', '34891']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 34887:34887 -p 34888:34888 -p 34889:34889 -p 34890:34890 -p 34891:34891 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34889 --rest-port=34887 --tcp-port=34888 --discv5-udp-port=34890 --rest-address=0.0.0.0 --nat=extip:172.18.70.211 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=aa50c2f0c89dba6f513acfcd5e8bd5b8b0de5db552d770a4aa49fccacc1a2dbf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34891 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.70.211 waku 9b62d2aa3fdb2fe83762f0208376775377459dbdffc407f17ca0077ea8ff3f9c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 9b62d2aa3fdb. Setting up logs at ./log/docker/receiving_node1_2024-08-21_04-21-55__ce703667-1422-4a12-836c-1ea49522a6fa__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 34887
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34887/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34887/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.70.211/tcp/34888/p2p/16Uiu2HAmCyn7mr7GonPDtoyekfbJGenHb5UBtQ4fEtWp3fQnDnAj","/ip4/172.18.70.211/tcp/34889/ws/p2p/16Uiu2HAmCyn7mr7GonPDtoyekfbJGenHb5UBtQ4fEtWp3fQnDnAj"],"enrUri":"enr:-LO4QOzRbwdyUfgvHiKS-dZyc-UxURxaeP1XTubaqoN2rhygHpmXcqslaAp5GLBZ7C-MsXr-UwJ6p3-TcwTEo_BawJ0BgmlkgnY0gmlwhKwSRtOKbXVsdGlhZGRyc4wACgSsEkbTBohJ3QOCcnOFAAMBAACJc2VjcDI1NmsxoQME0DQUmcsNqc__fxDuLGIVBhfbjnws8jLASnPDCbHgGIN0Y3CCiEiDdWRwgohKhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-21_04-21-55__ce703667-1422-4a12-836c-1ea49522a6fa__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.46.92
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['6603', '6604', '6605', '6606', '6607']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 6603:6603 -p 6604:6604 -p 6605:6605 -p 6606:6606 -p 6607:6607 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6605 --rest-port=6603 --tcp-port=6604 --discv5-udp-port=6606 --rest-address=0.0.0.0 --nat=extip:172.18.46.92 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=613ea26d4ac529a74fbb4f55ae672eee5fb078b8defca09e8f2cc7e10dcf529f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6607 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.46.92 waku 84704a529a1736124d425104cd2c89cf4c7cf936ea5b9809cd0877f35db66608
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 84704a529a17. Setting up logs at ./log/docker/receiving_node2_2024-08-21_04-21-55__ce703667-1422-4a12-836c-1ea49522a6fa__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 6603
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6603/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6603/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.46.92/tcp/6604/p2p/16Uiu2HAm9GxnoLrprs87my9LdH7jzEM4JhcQhMPX98n4U1ceKTra","/ip4/172.18.46.92/tcp/6605/ws/p2p/16Uiu2HAm9GxnoLrprs87my9LdH7jzEM4JhcQhMPX98n4U1ceKTra"],"enrUri":"enr:-LO4QIA_XQH7Fy9Ymx1TRcic4XS4if80hF8nFcALL2DlfuptZ25BTjmQpIPckP7ltObQZQGLi6faEjxtKLZZjXEAQ4sBgmlkgnY0gmlwhKwSLlyKbXVsdGlhZGRyc4wACgSsEi5cBhnN3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLNyGW3RHzTQEQBq5cVrmjMgay8OyJPZNJGTY7GDBf8Y4N0Y3CCGcyDdWRwghnOhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6603/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.70.211/tcp/34888/p2p/16Uiu2HAmCyn7mr7GonPDtoyekfbJGenHb5UBtQ4fEtWp3fQnDnAj"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-21_04-21-55__ce703667-1422-4a12-836c-1ea49522a6fa__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.10.20
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['60373', '60374', '60375', '60376', '60377']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 60373:60373 -p 60374:60374 -p 60375:60375 -p 60376:60376 -p 60377:60377 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=60375 --rest-port=60373 --tcp-port=60374 --discv5-udp-port=60376 --rest-address=0.0.0.0 --nat=extip:172.18.10.20 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ace1bbf3cafc09d8a99afe12da0584ea6d20ca3e01d3f94fe658deb873fadc8c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=60377 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QOzRbwdyUfgvHiKS-dZyc-UxURxaeP1XTubaqoN2rhygHpmXcqslaAp5GLBZ7C-MsXr-UwJ6p3-TcwTEo_BawJ0BgmlkgnY0gmlwhKwSRtOKbXVsdGlhZGRyc4wACgSsEkbTBohJ3QOCcnOFAAMBAACJc2VjcDI1NmsxoQME0DQUmcsNqc__fxDuLGIVBhfbjnws8jLASnPDCbHgGIN0Y3CCiEiDdWRwgohKhXdha3UyCQ --lightpushnode=/ip4/172.18.70.211/tcp/34888/p2p/16Uiu2HAmCyn7mr7GonPDtoyekfbJGenHb5UBtQ4fEtWp3fQnDnAj --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.10.20 waku 16081c33d046f81f219a9dee8dc4279513bf78dd7e8284061247d815e4538a67
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 16081c33d046. Setting up logs at ./log/docker/lightpush_node1_2024-08-21_04-21-55__ce703667-1422-4a12-836c-1ea49522a6fa__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 60373
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60373/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60373/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.10.20/tcp/60374/p2p/16Uiu2HAm32dDJ8gnSiShdUyG3eaCQCqeZJD2ZEJQruxYV77pL499","/ip4/172.18.10.20/tcp/60375/ws/p2p/16Uiu2HAm32dDJ8gnSiShdUyG3eaCQCqeZJD2ZEJQruxYV77pL499"],"enrUri":"enr:-LO4QADQbP318-te5Y7tFTYH5M89i9feF3CS0DX7mfbUKv0bP0gy4JyX_bAvQjkQkkUKm_gJllBxNvstU_TMgoGIHYoBgmlkgnY0gmlwhKwSChSKbXVsdGlhZGRyc4wACgSsEgoUBuvX3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJw9gIHWiP4TXvfaXmD8IVtw6k3TO2Y83SJ06i1hStKbIN0Y3CC69aDdWRwguvYhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60373/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.70.211/tcp/34888/p2p/16Uiu2HAmCyn7mr7GonPDtoyekfbJGenHb5UBtQ4fEtWp3fQnDnAj"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60373/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.46.92/tcp/6604/p2p/16Uiu2HAm9GxnoLrprs87my9LdH7jzEM4JhcQhMPX98n4U1ceKTra"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34887/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6603/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60373/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724214121154451456, "extraField": "extraValue"}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:60373/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 9b62d2aa3fdb
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 84704a529a17
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 16081c33d046
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.