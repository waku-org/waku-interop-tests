[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_pubsub_topics with id: 2024-08-21_04-21-14__62ae112d-0f3c-4226-87f1-a78cac215d57
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-21_04-21-14__62ae112d-0f3c-4226-87f1-a78cac215d57__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.60.216
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['55737', '55738', '55739', '55740', '55741']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 55737:55737 -p 55738:55738 -p 55739:55739 -p 55740:55740 -p 55741:55741 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55739 --rest-port=55737 --tcp-port=55738 --discv5-udp-port=55740 --rest-address=0.0.0.0 --nat=extip:172.18.60.216 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a3fd74c47dca6abd39ed77a0ebf1cc9b6c5cdc1bd22ae7b8fce3a8f6cd177bdc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55741 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.60.216 waku 67ec1ba51a768d54cef0402d946b740c8a82e1a8ef48961a2f54a3a59bdd7c15
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 67ec1ba51a76. Setting up logs at ./log/docker/receiving_node1_2024-08-21_04-21-14__62ae112d-0f3c-4226-87f1-a78cac215d57__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 55737
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55737/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55737/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.60.216/tcp/55738/p2p/16Uiu2HAkvsKD1s2Ax4oeaLs3KUd95FurrZmGWbe3PfGKAqnqvUSR","/ip4/172.18.60.216/tcp/55739/ws/p2p/16Uiu2HAkvsKD1s2Ax4oeaLs3KUd95FurrZmGWbe3PfGKAqnqvUSR"],"enrUri":"enr:-LO4QFvMJhwn_0ede3ZzRFmYHsU56XqUbEqOdDam4l0rAOQVbl2p2CBsxIm2Jg-qRUa1ieLeM1XRu3Nl3XFvkaS_k08BgmlkgnY0gmlwhKwSPNiKbXVsdGlhZGRyc4wACgSsEjzYBtm73QOCcnOFAAMBAACJc2VjcDI1NmsxoQIVbU0LJVwEPk88g5d3yUXrSl03ucytCs7wRQWAA0m9doN0Y3CC2bqDdWRwgtm8hXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-21_04-21-14__62ae112d-0f3c-4226-87f1-a78cac215d57__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.74.114
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['13856', '13857', '13858', '13859', '13860']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 13856:13856 -p 13857:13857 -p 13858:13858 -p 13859:13859 -p 13860:13860 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=13858 --rest-port=13856 --tcp-port=13857 --discv5-udp-port=13859 --rest-address=0.0.0.0 --nat=extip:172.18.74.114 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bccea5c5a77bce1ec9c9c7d7f18bf81b20f7ff74af8faa4edbdb79941974bdbe --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=13860 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.74.114 waku 71f569e9cc5359e55c5aec3197899defd004745e40dd160431007e7dabdeb5c1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 71f569e9cc53. Setting up logs at ./log/docker/receiving_node2_2024-08-21_04-21-14__62ae112d-0f3c-4226-87f1-a78cac215d57__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 13856
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13856/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13856/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.74.114/tcp/13857/p2p/16Uiu2HAmJbxS7c2Y4MaeWGyut3kHWBRnuAWoBJsc4hgyUKk2QWRt","/ip4/172.18.74.114/tcp/13858/ws/p2p/16Uiu2HAmJbxS7c2Y4MaeWGyut3kHWBRnuAWoBJsc4hgyUKk2QWRt"],"enrUri":"enr:-LO4QLFiAPin0XX8AS76GOf8xJmWuiOKGYst5b5wmis7i_OrQxvk_I-A5GFoNtMzlNK5cbwurTAnJimW3c9y7HPVgzoBgmlkgnY0gmlwhKwSSnKKbXVsdGlhZGRyc4wACgSsEkpyBjYi3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNYXzY3YxQm2EscvL_GQEQ9gKDeM_JEi1j7LFwM7eXtP4N0Y3CCNiGDdWRwgjYjhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13856/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.60.216/tcp/55738/p2p/16Uiu2HAkvsKD1s2Ax4oeaLs3KUd95FurrZmGWbe3PfGKAqnqvUSR"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-21_04-21-14__62ae112d-0f3c-4226-87f1-a78cac215d57__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.252.242
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['3792', '3793', '3794', '3795', '3796']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 3792:3792 -p 3793:3793 -p 3794:3794 -p 3795:3795 -p 3796:3796 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=3794 --rest-port=3792 --tcp-port=3793 --discv5-udp-port=3795 --rest-address=0.0.0.0 --nat=extip:172.18.252.242 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dff42abec633be1fbed17dc872dcecf61d24ffcf0efa7fcb2b6a47eed4a3f7fd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=3796 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QFvMJhwn_0ede3ZzRFmYHsU56XqUbEqOdDam4l0rAOQVbl2p2CBsxIm2Jg-qRUa1ieLeM1XRu3Nl3XFvkaS_k08BgmlkgnY0gmlwhKwSPNiKbXVsdGlhZGRyc4wACgSsEjzYBtm73QOCcnOFAAMBAACJc2VjcDI1NmsxoQIVbU0LJVwEPk88g5d3yUXrSl03ucytCs7wRQWAA0m9doN0Y3CC2bqDdWRwgtm8hXdha3UyCQ --lightpushnode=/ip4/172.18.60.216/tcp/55738/p2p/16Uiu2HAkvsKD1s2Ax4oeaLs3KUd95FurrZmGWbe3PfGKAqnqvUSR --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.252.242 waku 5c0458747f593d80c3246a01977fc6687347c12b78a9d9fef37c3ab8e93f664b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 5c0458747f59. Setting up logs at ./log/docker/lightpush_node1_2024-08-21_04-21-14__62ae112d-0f3c-4226-87f1-a78cac215d57__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 3792
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3792/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3792/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.252.242/tcp/3793/p2p/16Uiu2HAmKEyX9EaUdqqiXVAd1GEWrfzpQTmnv7wS78rav9NuiPbk","/ip4/172.18.252.242/tcp/3794/ws/p2p/16Uiu2HAmKEyX9EaUdqqiXVAd1GEWrfzpQTmnv7wS78rav9NuiPbk"],"enrUri":"enr:-LO4QBNXYSNBA2wR0Da1GC85jatkH25Y7InGkg-sGMJWnKAeESEPviJgUAj8xZyB2JD7YaALTjiZrcz5U_Gk-jCjsGgBgmlkgnY0gmlwhKwS_PKKbXVsdGlhZGRyc4wACgSsEvzyBg7S3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNh2u4xmsBaVyBn53A30eyiBXyNTu10vdkzff7nz9wcP4N0Y3CCDtGDdWRwgg7ThXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3792/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.60.216/tcp/55738/p2p/16Uiu2HAkvsKD1s2Ax4oeaLs3KUd95FurrZmGWbe3PfGKAqnqvUSR"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3792/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.74.114/tcp/13857/p2p/16Uiu2HAmJbxS7c2Y4MaeWGyut3kHWBRnuAWoBJsc4hgyUKk2QWRt"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55737/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13856/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A dictionary', 'value': {'key': 'YWFh'}}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3792/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": {"key": "YWFh"}, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724214079450042880}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:3792/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'An integer', 'value': 1234567890}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3792/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": 1234567890, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724214079455739904}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:3792/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A list', 'value': ['YWFh']}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3792/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": ["YWFh"], "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724214079460269824}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:3792/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A bool', 'value': True}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3792/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": true, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724214079464438784}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:3792/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 67ec1ba51a76
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 71f569e9cc53
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 5c0458747f59
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.