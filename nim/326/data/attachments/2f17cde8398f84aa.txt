[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_content_topic_not_in_docker_flags with id: 2024-08-21_04-28-58__ec8f2b61-d85d-4373-a8cb-e12a03319e06
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node1_2024-08-21_04-28-58__ec8f2b61-d85d-4373-a8cb-e12a03319e06__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.95.62
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['42980', '42981', '42982', '42983', '42984']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 42980:42980 -p 42981:42981 -p 42982:42982 -p 42983:42983 -p 42984:42984 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42982 --rest-port=42980 --tcp-port=42981 --discv5-udp-port=42983 --rest-address=0.0.0.0 --nat=extip:172.18.95.62 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=d4bede5a0776d61fb2a60f0bde2ebac052ac1bd25b1c81dd4fa26ae5db5ab8ac --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42984 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/2/0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.95.62 waku e598ca5844127926e55ca558cf144e23def7b4ee748050cdab5944f7895b1652
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID e598ca584412. Setting up logs at ./log/docker/node1_2024-08-21_04-28-58__ec8f2b61-d85d-4373-a8cb-e12a03319e06__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 42980
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42980/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42980/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.95.62/tcp/42981/p2p/16Uiu2HAm27JVZxt1DiN6r4E5ukF4N9r47RCop4FwXL8c92vtda4K","/ip4/172.18.95.62/tcp/42982/ws/p2p/16Uiu2HAm27JVZxt1DiN6r4E5ukF4N9r47RCop4FwXL8c92vtda4K"],"enrUri":"enr:-LO4QAPeMhlMhqTQ4Pl-DVKyzsVy7V0eJ1mhfssn-bguA9tpKZsBS9oDL11Pnq6wqA0YXqZtlo5gWbanj8kvEW1JpEYBgmlkgnY0gmlwhKwSXz6KbXVsdGlhZGRyc4wACgSsEl8-Bqfm3QOCcnOFAAIBAACJc2VjcDI1NmsxoQJjTQ8VBa2p2u_FP8BvT8WLYKLf0aGoYbS9g-_zZ2iDlIN0Y3CCp-WDdWRwgqfnhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node2_2024-08-21_04-28-58__ec8f2b61-d85d-4373-a8cb-e12a03319e06__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.206.172
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['6400', '6401', '6402', '6403', '6404']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 6400:6400 -p 6401:6401 -p 6402:6402 -p 6403:6403 -p 6404:6404 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6402 --rest-port=6400 --tcp-port=6401 --discv5-udp-port=6403 --rest-address=0.0.0.0 --nat=extip:172.18.206.172 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=7aac7ff6f6ca5ebf9c0fc9e43ddf9b6d6aef1ad5abfa6e119a800340bc457365 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6404 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QAPeMhlMhqTQ4Pl-DVKyzsVy7V0eJ1mhfssn-bguA9tpKZsBS9oDL11Pnq6wqA0YXqZtlo5gWbanj8kvEW1JpEYBgmlkgnY0gmlwhKwSXz6KbXVsdGlhZGRyc4wACgSsEl8-Bqfm3QOCcnOFAAIBAACJc2VjcDI1NmsxoQJjTQ8VBa2p2u_FP8BvT8WLYKLf0aGoYbS9g-_zZ2iDlIN0Y3CCp-WDdWRwgqfnhXdha3UyBQ --pubsub-topic=/waku/2/rs/2/0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.206.172 waku f886ec7e07d38838fdd6412a11dc4d9ae5a2dbd0c2b7a539539f25857f5b489b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID f886ec7e07d3. Setting up logs at ./log/docker/node2_2024-08-21_04-28-58__ec8f2b61-d85d-4373-a8cb-e12a03319e06__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 6400
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6400/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6400/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.206.172/tcp/6401/p2p/16Uiu2HAmVMB2zEyWT2S1DGnY4NL1De5X118XqPRsffGHrRCJMfdN","/ip4/172.18.206.172/tcp/6402/ws/p2p/16Uiu2HAmVMB2zEyWT2S1DGnY4NL1De5X118XqPRsffGHrRCJMfdN"],"enrUri":"enr:-LO4QDMyuYPeIE-cSG2gw85myjthYHnRoK2CDJ_kTz2BY70pABgrsg7ZDaO05irzoxI3r27PRF7iUxNdx1LqSE7L5h4BgmlkgnY0gmlwhKwSzqyKbXVsdGlhZGRyc4wACgSsEs6sBhkC3QOCcnOFAAIBAACJc2VjcDI1NmsxoQP4Bk3bMtZa77dz-mkUB0cKCzJDe6gfZD6rN9h2G_2pJYN0Y3CCGQGDdWRwghkDhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6400/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.95.62/tcp/42981/p2p/16Uiu2HAm27JVZxt1DiN6r4E5ukF4N9r47RCop4FwXL8c92vtda4K"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:42980/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6400/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:42980/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42980/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1724214541805435648,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6400/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1724214541805435648,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id e598ca584412
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id f886ec7e07d3
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.