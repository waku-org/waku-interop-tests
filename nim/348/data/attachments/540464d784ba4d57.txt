[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_content_topics with id: 2024-09-06_11-53-49__073bcd37-0888-44d8-993c-65aff94553c6
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-06_11-53-49__073bcd37-0888-44d8-993c-65aff94553c6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.9.75
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['25126', '25127', '25128', '25129', '25130']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 25126:25126 -p 25127:25127 -p 25128:25128 -p 25129:25129 -p 25130:25130 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25128 --rest-port=25126 --tcp-port=25127 --discv5-udp-port=25129 --rest-address=0.0.0.0 --nat=extip:172.18.9.75 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=468c470e2dc777781b8dcfbb0a3210428bdaf8dfbe0574deea27fdc253e15cce --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25130 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.9.75 waku f3392acf680d9ec497af5953e6ad0fc4fa8a35a43d90f4db9cb5278ee8b637d7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID f3392acf680d. Setting up logs at ./log/docker/receiving_node1_2024-09-06_11-53-49__073bcd37-0888-44d8-993c-65aff94553c6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 25126
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25126/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25126/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.9.75/tcp/25127/p2p/16Uiu2HAkxPUabMbhvm6oB3fNkkARjbLqaPdm4Lawu4FFZzDK1JRD","/ip4/172.18.9.75/tcp/25128/ws/p2p/16Uiu2HAkxPUabMbhvm6oB3fNkkARjbLqaPdm4Lawu4FFZzDK1JRD"],"enrUri":"enr:-LO4QKXJxPVl4nEg9_34UfK05iTX96NTVwcQ1Kw58RcJqjK_O4Y72kLEnSpQiAjXrIoW5b93o3F2IFpsHm2BFU5vCHMBgmlkgnY0gmlwhKwSCUuKbXVsdGlhZGRyc4wACgSsEglLBmIo3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIsAwJWg2uKk1jTskG3PiJg2b3PeFE5eyZSQ74g4eMtwIN0Y3CCYieDdWRwgmIphXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-06_11-53-49__073bcd37-0888-44d8-993c-65aff94553c6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.148.19
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['52259', '52260', '52261', '52262', '52263']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 52259:52259 -p 52260:52260 -p 52261:52261 -p 52262:52262 -p 52263:52263 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=52261 --rest-port=52259 --tcp-port=52260 --discv5-udp-port=52262 --rest-address=0.0.0.0 --nat=extip:172.18.148.19 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eff0de968cdf4bcdaa24bda4ba4a4ad2842acd950f7dfbdafcc46ae28055a1fd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=52263 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.148.19 waku 55ad2f7250b76a55a5a4600c613e47329c6a90e7cb1c8873167852f9a69fa8b5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 55ad2f7250b7. Setting up logs at ./log/docker/receiving_node2_2024-09-06_11-53-49__073bcd37-0888-44d8-993c-65aff94553c6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 52259
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52259/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52259/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.148.19/tcp/52260/p2p/16Uiu2HAmQtbrPmA32M7kAnvUK1HRktcWBbS8JqR1kiFKNxbDeakD","/ip4/172.18.148.19/tcp/52261/ws/p2p/16Uiu2HAmQtbrPmA32M7kAnvUK1HRktcWBbS8JqR1kiFKNxbDeakD"],"enrUri":"enr:-LO4QNSqx-S8MF-EpsmbwY-UHVwyo6QRHPPFvtf8wyoFvUYHfFj84Pt1ekeVGAGp90Q81zTDX9GiuU8CXGGiwxxFKbEBgmlkgnY0gmlwhKwSlBOKbXVsdGlhZGRyc4wACgSsEpQTBswl3QOCcnOFAAMBAACJc2VjcDI1NmsxoQO1yO-FSHvHKC36rF9D0niziO1IH5Eho8H38Eh-vH7NdoN0Y3CCzCSDdWRwgswmhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52259/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.9.75/tcp/25127/p2p/16Uiu2HAkxPUabMbhvm6oB3fNkkARjbLqaPdm4Lawu4FFZzDK1JRD"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-06_11-53-49__073bcd37-0888-44d8-993c-65aff94553c6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.226.3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['42676', '42677', '42678', '42679', '42680']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 42676:42676 -p 42677:42677 -p 42678:42678 -p 42679:42679 -p 42680:42680 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42678 --rest-port=42676 --tcp-port=42677 --discv5-udp-port=42679 --rest-address=0.0.0.0 --nat=extip:172.18.226.3 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ffb4d4c59edce2558adfd59d8ec3fdf1447d6a7c3bbc267cff0ecabc788bfeea --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42680 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QKXJxPVl4nEg9_34UfK05iTX96NTVwcQ1Kw58RcJqjK_O4Y72kLEnSpQiAjXrIoW5b93o3F2IFpsHm2BFU5vCHMBgmlkgnY0gmlwhKwSCUuKbXVsdGlhZGRyc4wACgSsEglLBmIo3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIsAwJWg2uKk1jTskG3PiJg2b3PeFE5eyZSQ74g4eMtwIN0Y3CCYieDdWRwgmIphXdha3UyCQ --lightpushnode=/ip4/172.18.9.75/tcp/25127/p2p/16Uiu2HAkxPUabMbhvm6oB3fNkkARjbLqaPdm4Lawu4FFZzDK1JRD --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.226.3 waku 227429e290c3bea45ae8f7d902a31e72e0cab917481d2c5d6a3c5ed230858f4a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 227429e290c3. Setting up logs at ./log/docker/lightpush_node1_2024-09-06_11-53-49__073bcd37-0888-44d8-993c-65aff94553c6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 42676
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42676/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42676/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.226.3/tcp/42677/p2p/16Uiu2HAm8RLEz9k97ofASgpqzWUH6GQi72xNmPeg6LHoDk69CUfg","/ip4/172.18.226.3/tcp/42678/ws/p2p/16Uiu2HAm8RLEz9k97ofASgpqzWUH6GQi72xNmPeg6LHoDk69CUfg"],"enrUri":"enr:-LO4QMoXHtJONBLGjVOmAYZST9vppT8ovUY5A5uCg7vVpLmSWcI_LgAoDZkxlzCnan7DSBGKc4ehQzaLGjfMB62JHgYBgmlkgnY0gmlwhKwS4gOKbXVsdGlhZGRyc4wACgSsEuIDBqa23QOCcnOFAAMBAACJc2VjcDI1NmsxoQLBEZy11yA1c-_qTwp2m_I--0Hwo22WLk8QJCbn8Fucp4N0Y3CCprWDdWRwgqa3hXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:42676/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.9.75/tcp/25127/p2p/16Uiu2HAkxPUabMbhvm6oB3fNkkARjbLqaPdm4Lawu4FFZzDK1JRD"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:42676/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.148.19/tcp/52260/p2p/16Uiu2HAmQtbrPmA32M7kAnvUK1HRktcWBbS8JqR1kiFKNxbDeakD"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25126/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52259/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic Empty string
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:42676/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "", "timestamp": 1725623634761425152}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:42676/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A dictionary
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:42676/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": {"key": "YWFh"}, "timestamp": 1725623634772561920}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:42676/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic An integer
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:42676/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": 1234567890, "timestamp": 1725623634778050048}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:42676/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A list
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:42676/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": ["YWFh"], "timestamp": 1725623634786600704}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:42676/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A bool
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:42676/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": true, "timestamp": 1725623634790887680}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:42676/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id f3392acf680d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 55ad2f7250b7
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 227429e290c3
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.