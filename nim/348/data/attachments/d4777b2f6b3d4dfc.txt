[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_valid_meta with id: 2024-09-06_11-54-40__8f0b9c24-758c-46b9-9f48-a10527cdf0c9
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-06_11-54-40__8f0b9c24-758c-46b9-9f48-a10527cdf0c9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.109.10
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['38492', '38493', '38494', '38495', '38496']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 38492:38492 -p 38493:38493 -p 38494:38494 -p 38495:38495 -p 38496:38496 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=38494 --rest-port=38492 --tcp-port=38493 --discv5-udp-port=38495 --rest-address=0.0.0.0 --nat=extip:172.18.109.10 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7a6f6c59bdaba9aafef7eadeb3ce2304daf2caffbaf74818be56efa5f9ae538f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=38496 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.109.10 waku c84888707758c0e52c3ef23975c72984fd9b2f7afbfb1f423772a7af7f564e85
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID c84888707758. Setting up logs at ./log/docker/receiving_node1_2024-09-06_11-54-40__8f0b9c24-758c-46b9-9f48-a10527cdf0c9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 38492
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38492/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38492/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.109.10/tcp/38493/p2p/16Uiu2HAmF5PkBqPyEwhGf1xHKhC4BpfWZXcvnCYiDR1DwsuH74kU","/ip4/172.18.109.10/tcp/38494/ws/p2p/16Uiu2HAmF5PkBqPyEwhGf1xHKhC4BpfWZXcvnCYiDR1DwsuH74kU"],"enrUri":"enr:-LO4QIa7jOgE_qW_e4dNmPz9kHYOhhECoS8OxLxciQH8nUXxRbKKezlrTjf20_xtWvfCp-kUyNNFWg5GWxnq07jrDaQBgmlkgnY0gmlwhKwSbQqKbXVsdGlhZGRyc4wACgSsEm0KBpZe3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMj98QOPmmXoTqBLi3YFHLgl0Oan3EsoCAvwkQXulQvNYN0Y3CCll2DdWRwgpZfhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-06_11-54-40__8f0b9c24-758c-46b9-9f48-a10527cdf0c9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.214.90
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['62280', '62281', '62282', '62283', '62284']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 62280:62280 -p 62281:62281 -p 62282:62282 -p 62283:62283 -p 62284:62284 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62282 --rest-port=62280 --tcp-port=62281 --discv5-udp-port=62283 --rest-address=0.0.0.0 --nat=extip:172.18.214.90 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d605bffd892eb627eefbdf20bbc3eedb56f8c073785d3e13eda3ec8dadcffffa --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62284 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.214.90 waku 1d99deb7cf0a6e0d993845f73ade499fc88b9282531b24a9f652a18dc3846b54
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 1d99deb7cf0a. Setting up logs at ./log/docker/receiving_node2_2024-09-06_11-54-40__8f0b9c24-758c-46b9-9f48-a10527cdf0c9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 62280
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62280/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62280/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.214.90/tcp/62281/p2p/16Uiu2HAmVVVnYFMQUdjQfmu9sR6ai6CDp6UerKEWspnXLvFaoKyx","/ip4/172.18.214.90/tcp/62282/ws/p2p/16Uiu2HAmVVVnYFMQUdjQfmu9sR6ai6CDp6UerKEWspnXLvFaoKyx"],"enrUri":"enr:-LO4QIgk9Zqf9uVlGfVjvnsYb8ob6qZx7n3mVjuSg62wFq0jfzOtADOjVav4il_A7rrZsbLxvB1rWtVMdlpW40hMMYsBgmlkgnY0gmlwhKwS1lqKbXVsdGlhZGRyc4wACgSsEtZaBvNK3QOCcnOFAAMBAACJc2VjcDI1NmsxoQP6KCb9PlLpr2NHNO0XI6MxKtMyj39DhJmBxfjZ2ZzpL4N0Y3CC80mDdWRwgvNLhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62280/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.109.10/tcp/38493/p2p/16Uiu2HAmF5PkBqPyEwhGf1xHKhC4BpfWZXcvnCYiDR1DwsuH74kU"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-06_11-54-40__8f0b9c24-758c-46b9-9f48-a10527cdf0c9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.117.49
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['14220', '14221', '14222', '14223', '14224']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 14220:14220 -p 14221:14221 -p 14222:14222 -p 14223:14223 -p 14224:14224 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14222 --rest-port=14220 --tcp-port=14221 --discv5-udp-port=14223 --rest-address=0.0.0.0 --nat=extip:172.18.117.49 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8381adf61c08e9355f068bdaa082e73b55fca2ebc9fa4ae3f72b9ab9ba2fc4bc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14224 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QIa7jOgE_qW_e4dNmPz9kHYOhhECoS8OxLxciQH8nUXxRbKKezlrTjf20_xtWvfCp-kUyNNFWg5GWxnq07jrDaQBgmlkgnY0gmlwhKwSbQqKbXVsdGlhZGRyc4wACgSsEm0KBpZe3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMj98QOPmmXoTqBLi3YFHLgl0Oan3EsoCAvwkQXulQvNYN0Y3CCll2DdWRwgpZfhXdha3UyCQ --lightpushnode=/ip4/172.18.109.10/tcp/38493/p2p/16Uiu2HAmF5PkBqPyEwhGf1xHKhC4BpfWZXcvnCYiDR1DwsuH74kU --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.117.49 waku 2fa25527916f313ca7e8ef6347c6ce1ae1db26776b5d65e2d6ebedccd234be82
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 2fa25527916f. Setting up logs at ./log/docker/lightpush_node1_2024-09-06_11-54-40__8f0b9c24-758c-46b9-9f48-a10527cdf0c9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 14220
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14220/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14220/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.117.49/tcp/14221/p2p/16Uiu2HAkxcjvn8z7HmThrbRhUX7WsZ3zsnwdxU6FpdRhLV62APqC","/ip4/172.18.117.49/tcp/14222/ws/p2p/16Uiu2HAkxcjvn8z7HmThrbRhUX7WsZ3zsnwdxU6FpdRhLV62APqC"],"enrUri":"enr:-LO4QGvzeE5MC-K-palwr4yjn4lxPExUbqOh2XoFViFP6xhvfZNgPqDg9Z3biGMyqX9xX55BgRGnWBDlqUfFJK-Z-sQBgmlkgnY0gmlwhKwSdTGKbXVsdGlhZGRyc4wACgSsEnUxBjeO3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIvaOnp_S5b5zcRD_RzvAgvyuhgtXVAR6XadM2EoBbHG4N0Y3CCN42DdWRwgjePhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14220/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.109.10/tcp/38493/p2p/16Uiu2HAmF5PkBqPyEwhGf1xHKhC4BpfWZXcvnCYiDR1DwsuH74kU"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14220/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.214.90/tcp/62281/p2p/16Uiu2HAmVVVnYFMQUdjQfmu9sR6ai6CDp6UerKEWspnXLvFaoKyx"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38492/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62280/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14220/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1725623685276135424, "meta": "TGlnaHQgcHVzaCB3b3JrcyEh"}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38492/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1725623685276135424,"meta":"TGlnaHQgcHVzaCB3b3JrcyEh","ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62280/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1725623685276135424,"meta":"TGlnaHQgcHVzaCB3b3JrcyEh","ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id c84888707758
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 1d99deb7cf0a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 2fa25527916f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.