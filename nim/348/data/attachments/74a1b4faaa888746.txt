[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_meta with id: 2024-09-06_11-54-43__cf6077c2-bc19-4ea2-94c7-3a2db9150be1
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-06_11-54-43__cf6077c2-bc19-4ea2-94c7-3a2db9150be1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.66.167
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['55807', '55808', '55809', '55810', '55811']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 55807:55807 -p 55808:55808 -p 55809:55809 -p 55810:55810 -p 55811:55811 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55809 --rest-port=55807 --tcp-port=55808 --discv5-udp-port=55810 --rest-address=0.0.0.0 --nat=extip:172.18.66.167 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e547ffc3cab037ed8065ecd9f61b73fcfca60c81ff4adb3a42dd5d69bebdbff8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55811 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.66.167 waku 2e0f2e0ed366a3ed99439c43861d2df86d6fdf4306e4c6d1cf2bac2196462d11
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 2e0f2e0ed366. Setting up logs at ./log/docker/receiving_node1_2024-09-06_11-54-43__cf6077c2-bc19-4ea2-94c7-3a2db9150be1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 55807
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55807/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55807/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.66.167/tcp/55808/p2p/16Uiu2HAmA989TpqVrWZztBbUQjsDik71FXFugAh8J44B3vLxnqPr","/ip4/172.18.66.167/tcp/55809/ws/p2p/16Uiu2HAmA989TpqVrWZztBbUQjsDik71FXFugAh8J44B3vLxnqPr"],"enrUri":"enr:-LO4QPbT1zwJYZl_cyXW7k4RJV84LL13K0avnfTw-zuE66-IbfrefvqfYTuMJ9Rf_V02gG1yC-xkaKg2xzhBgluQ6WkBgmlkgnY0gmlwhKwSQqeKbXVsdGlhZGRyc4wACgSsEkKnBtoB3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLaogRWmCo10xjBzZsb3XlRJ08bTDDv8XOec-vSHc5ahYN0Y3CC2gCDdWRwgtoChXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-06_11-54-43__cf6077c2-bc19-4ea2-94c7-3a2db9150be1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.50.166
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['41128', '41129', '41130', '41131', '41132']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 41128:41128 -p 41129:41129 -p 41130:41130 -p 41131:41131 -p 41132:41132 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=41130 --rest-port=41128 --tcp-port=41129 --discv5-udp-port=41131 --rest-address=0.0.0.0 --nat=extip:172.18.50.166 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c43aad2ced4f73d6b5ad467df01ccbe339cc5d50dae922e95c5ece220ace64dc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=41132 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.50.166 waku 9e6c058922a9ff8f4163cda3aa01a00f048dc579b35396c5560be8377f21ef5f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 9e6c058922a9. Setting up logs at ./log/docker/receiving_node2_2024-09-06_11-54-43__cf6077c2-bc19-4ea2-94c7-3a2db9150be1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 41128
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41128/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41128/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.50.166/tcp/41129/p2p/16Uiu2HAmJ3quSg9nLW5wRGccwDpbZuTsH4QxozfNoizMetnX4hzd","/ip4/172.18.50.166/tcp/41130/ws/p2p/16Uiu2HAmJ3quSg9nLW5wRGccwDpbZuTsH4QxozfNoizMetnX4hzd"],"enrUri":"enr:-LO4QAv0cRAz0ncJhGn4pdXXk1k_esTSSGOCGts4wFo0efelX9WCokGUJyDLX4TcV7v90om4sf9VNBA2VuExwTFC6_YBgmlkgnY0gmlwhKwSMqaKbXVsdGlhZGRyc4wACgSsEjKmBqCq3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNQJT5lsQVDhUNoBabL0JD336duDmuvsItpb6fOL86DZoN0Y3CCoKmDdWRwgqCrhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41128/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.66.167/tcp/55808/p2p/16Uiu2HAmA989TpqVrWZztBbUQjsDik71FXFugAh8J44B3vLxnqPr"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-06_11-54-43__cf6077c2-bc19-4ea2-94c7-3a2db9150be1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.110.218
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['56887', '56888', '56889', '56890', '56891']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 56887:56887 -p 56888:56888 -p 56889:56889 -p 56890:56890 -p 56891:56891 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56889 --rest-port=56887 --tcp-port=56888 --discv5-udp-port=56890 --rest-address=0.0.0.0 --nat=extip:172.18.110.218 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c3b9392c7a8fecd36cf7ef793fcfe6c1a15bae894a40ed027de0ddddb3001ecf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56891 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QPbT1zwJYZl_cyXW7k4RJV84LL13K0avnfTw-zuE66-IbfrefvqfYTuMJ9Rf_V02gG1yC-xkaKg2xzhBgluQ6WkBgmlkgnY0gmlwhKwSQqeKbXVsdGlhZGRyc4wACgSsEkKnBtoB3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLaogRWmCo10xjBzZsb3XlRJ08bTDDv8XOec-vSHc5ahYN0Y3CC2gCDdWRwgtoChXdha3UyCQ --lightpushnode=/ip4/172.18.66.167/tcp/55808/p2p/16Uiu2HAmA989TpqVrWZztBbUQjsDik71FXFugAh8J44B3vLxnqPr --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.110.218 waku 571603858b593d359be2eede6633080c1c61ed77387a92a2a3ffff2842094670
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 571603858b59. Setting up logs at ./log/docker/lightpush_node1_2024-09-06_11-54-43__cf6077c2-bc19-4ea2-94c7-3a2db9150be1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 56887
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56887/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56887/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.110.218/tcp/56888/p2p/16Uiu2HAm29frtuJAyAbceZd97ocQUC6bJPipQWTH9KVvo6d1e9wL","/ip4/172.18.110.218/tcp/56889/ws/p2p/16Uiu2HAm29frtuJAyAbceZd97ocQUC6bJPipQWTH9KVvo6d1e9wL"],"enrUri":"enr:-LO4QAtv4ZCmMkN4jPrXHWQShN1qkloDLakLQJe_9GhxaTWVBrJFaLLvvqC6lObpZk9_pTGaW1aj-ATuSHEeG2uZZvABgmlkgnY0gmlwhKwSbtqKbXVsdGlhZGRyc4wACgSsEm7aBt453QOCcnOFAAMBAACJc2VjcDI1NmsxoQJj6GGNk8qyDMczFTj1LfXism_DRnHgblFBXwzRpMX-94N0Y3CC3jiDdWRwgt46hXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56887/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.66.167/tcp/55808/p2p/16Uiu2HAmA989TpqVrWZztBbUQjsDik71FXFugAh8J44B3vLxnqPr"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56887/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.50.166/tcp/41129/p2p/16Uiu2HAmJ3quSg9nLW5wRGccwDpbZuTsH4QxozfNoizMetnX4hzd"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55807/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41128/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56887/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1725623688049744384, "meta": "Light push works!!"}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:56887/lightpush/v1/message. Response content: b'Invalid message: Incorrect base64 string'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 2e0f2e0ed366
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 9e6c058922a9
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 571603858b59
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.