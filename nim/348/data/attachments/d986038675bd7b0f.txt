[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_missing_pubsub_topics with id: 2024-09-06_11-54-16__88e7f6d7-6c78-4d5c-b9bd-7d40a16ac6c7
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-06_11-54-16__88e7f6d7-6c78-4d5c-b9bd-7d40a16ac6c7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.204.91
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['45923', '45924', '45925', '45926', '45927']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 45923:45923 -p 45924:45924 -p 45925:45925 -p 45926:45926 -p 45927:45927 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45925 --rest-port=45923 --tcp-port=45924 --discv5-udp-port=45926 --rest-address=0.0.0.0 --nat=extip:172.18.204.91 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=73c060ac8fd66c0683e96db524a9ebb1f1fe866ccfbf54ecabefb8fae8c1bd0d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45927 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.204.91 waku 566f0470863317c4a46cc01dd17e8ab6921f734f35cff6232aa15bc06e0eaeac
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 566f04708633. Setting up logs at ./log/docker/receiving_node1_2024-09-06_11-54-16__88e7f6d7-6c78-4d5c-b9bd-7d40a16ac6c7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 45923
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45923/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45923/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.204.91/tcp/45924/p2p/16Uiu2HAmRhc4VFaqpJHvo8HotQF3DS8CKN6uwe5EPpqDbuy6sU1P","/ip4/172.18.204.91/tcp/45925/ws/p2p/16Uiu2HAmRhc4VFaqpJHvo8HotQF3DS8CKN6uwe5EPpqDbuy6sU1P"],"enrUri":"enr:-LO4QAjkV7fiQpnfwX-c00u-6cWb70vYoxONa0Tx5tY4rRrqV1if2VTTaB99AKezmDSIjXQQVLKEmdh6W4rei6zhRmwBgmlkgnY0gmlwhKwSzFuKbXVsdGlhZGRyc4wACgSsEsxbBrNl3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPB03gtFzm6qxS2OOpoqa_lwZLZZH67u8-KVBNwCclNAoN0Y3CCs2SDdWRwgrNmhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-06_11-54-16__88e7f6d7-6c78-4d5c-b9bd-7d40a16ac6c7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.145.161
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['42752', '42753', '42754', '42755', '42756']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 42752:42752 -p 42753:42753 -p 42754:42754 -p 42755:42755 -p 42756:42756 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42754 --rest-port=42752 --tcp-port=42753 --discv5-udp-port=42755 --rest-address=0.0.0.0 --nat=extip:172.18.145.161 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9af4fe5c165207f863e5bd02dd8df8eaf7a10ddcf87ebd88a8c0c8677871e51f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42756 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.145.161 waku cab0ceda2ed881fcc348d83bd1958dc6a105db1d94ceba6bfc57ef6392012c16
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID cab0ceda2ed8. Setting up logs at ./log/docker/receiving_node2_2024-09-06_11-54-16__88e7f6d7-6c78-4d5c-b9bd-7d40a16ac6c7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 42752
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42752/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42752/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.145.161/tcp/42753/p2p/16Uiu2HAm6v3aqJvJvQg63H5P5V2B9WcaMRAhFqc4CEZHhCoMf3KL","/ip4/172.18.145.161/tcp/42754/ws/p2p/16Uiu2HAm6v3aqJvJvQg63H5P5V2B9WcaMRAhFqc4CEZHhCoMf3KL"],"enrUri":"enr:-LO4QGLNqYV1RC8fkIAdtFxlfOg0cnDt3umck8VTFbgjbfpgTn6VL2Nx07T4Ateduv4PhLr3IVl2MPHr7b-peBCm1UMBgmlkgnY0gmlwhKwSkaGKbXVsdGlhZGRyc4wACgSsEpGhBqcC3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKqtT8pWnXMTmkVBjTdpECbKt64OGm7tlfGh0aHNrcdH4N0Y3CCpwGDdWRwgqcDhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:42752/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.204.91/tcp/45924/p2p/16Uiu2HAmRhc4VFaqpJHvo8HotQF3DS8CKN6uwe5EPpqDbuy6sU1P"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-06_11-54-16__88e7f6d7-6c78-4d5c-b9bd-7d40a16ac6c7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.143.52
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['50002', '50003', '50004', '50005', '50006']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 50002:50002 -p 50003:50003 -p 50004:50004 -p 50005:50005 -p 50006:50006 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=50004 --rest-port=50002 --tcp-port=50003 --discv5-udp-port=50005 --rest-address=0.0.0.0 --nat=extip:172.18.143.52 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8f358dbe7a350c87cccb6acda7ec7deaa0962e66f796f38d0de10fafafc9cb0e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=50006 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QAjkV7fiQpnfwX-c00u-6cWb70vYoxONa0Tx5tY4rRrqV1if2VTTaB99AKezmDSIjXQQVLKEmdh6W4rei6zhRmwBgmlkgnY0gmlwhKwSzFuKbXVsdGlhZGRyc4wACgSsEsxbBrNl3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPB03gtFzm6qxS2OOpoqa_lwZLZZH67u8-KVBNwCclNAoN0Y3CCs2SDdWRwgrNmhXdha3UyCQ --lightpushnode=/ip4/172.18.204.91/tcp/45924/p2p/16Uiu2HAmRhc4VFaqpJHvo8HotQF3DS8CKN6uwe5EPpqDbuy6sU1P --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.143.52 waku aca9fbe00e571092abc2f13b38e0e971826bfbbd94547b060f448990576d1035
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID aca9fbe00e57. Setting up logs at ./log/docker/lightpush_node1_2024-09-06_11-54-16__88e7f6d7-6c78-4d5c-b9bd-7d40a16ac6c7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 50002
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50002/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50002/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.143.52/tcp/50003/p2p/16Uiu2HAmJ8d9ViorX4WNwHif3G93JvNhRNNMzrUPcaQS81XR4MhL","/ip4/172.18.143.52/tcp/50004/ws/p2p/16Uiu2HAmJ8d9ViorX4WNwHif3G93JvNhRNNMzrUPcaQS81XR4MhL"],"enrUri":"enr:-LO4QPyYsVOzFvQ5SVxQiSE1uuGufGRxIdaieviWBIIvF_kjSIHUXooD2t5coGgmqsJeCyDJ4AgKQLD2zURk2pQ0oVQBgmlkgnY0gmlwhKwSjzSKbXVsdGlhZGRyc4wACgSsEo80BsNU3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNRXrj7pv3IoLeDHWfCpyKVWaRX51PaxONfuhmej_x1K4N0Y3CCw1ODdWRwgsNVhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:50002/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.204.91/tcp/45924/p2p/16Uiu2HAmRhc4VFaqpJHvo8HotQF3DS8CKN6uwe5EPpqDbuy6sU1P"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:50002/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.145.161/tcp/42753/p2p/16Uiu2HAm6v3aqJvJvQg63H5P5V2B9WcaMRAhFqc4CEZHhCoMf3KL"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45923/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:42752/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:50002/lightpush/v1/message" -H "Content-Type: application/json" -d '{"message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1725623661719748608}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:50002/lightpush/v1/message. Response content: b'Failed to request a message push: Lightpush request has not been published to any peers. msg_hash: 0x336eb2f62ad5db16c363a112d08aeb29c119e16947bafc98f893530dd3532888'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 566f04708633
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id cab0ceda2ed8
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id aca9fbe00e57
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.