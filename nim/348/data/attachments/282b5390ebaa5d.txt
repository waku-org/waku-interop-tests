[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_valid_version with id: 2024-09-06_11-54-31__f76f3331-e53a-4799-bfe0-9ac07511439e
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-06_11-54-31__f76f3331-e53a-4799-bfe0-9ac07511439e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.140.172
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['13029', '13030', '13031', '13032', '13033']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 13029:13029 -p 13030:13030 -p 13031:13031 -p 13032:13032 -p 13033:13033 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=13031 --rest-port=13029 --tcp-port=13030 --discv5-udp-port=13032 --rest-address=0.0.0.0 --nat=extip:172.18.140.172 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bea31adc7c6b3dd695f533fbbecddbcd5429cd4cee5fd36ee5f6eebc97ee4249 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=13033 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.140.172 waku 4e1f5e0b278d053d80ad8dc30edf9dfcfd9570ca92609b183c0d9caccebae5e1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 4e1f5e0b278d. Setting up logs at ./log/docker/receiving_node1_2024-09-06_11-54-31__f76f3331-e53a-4799-bfe0-9ac07511439e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 13029
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13029/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13029/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.140.172/tcp/13030/p2p/16Uiu2HAmC8vKQg5j6ZNCES6DctNuoDXz52KmnGyeQ9SPr3nbtPii","/ip4/172.18.140.172/tcp/13031/ws/p2p/16Uiu2HAmC8vKQg5j6ZNCES6DctNuoDXz52KmnGyeQ9SPr3nbtPii"],"enrUri":"enr:-LO4QAvt67XpwiXA9LVaw1hifi2HyqQhFpqgWsSAMGeg7froIinltJrGiou8l9Jir5flr359rWuUho6PLsxiRm77g2oBgmlkgnY0gmlwhKwSjKyKbXVsdGlhZGRyc4wACgSsEoysBjLn3QOCcnOFAAMBAACJc2VjcDI1NmsxoQL4TAQoq5mcOvoqQvBm094TwcVaS7aGJRcUwjlKNetgw4N0Y3CCMuaDdWRwgjLohXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-06_11-54-31__f76f3331-e53a-4799-bfe0-9ac07511439e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.211.194
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['44813', '44814', '44815', '44816', '44817']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 44813:44813 -p 44814:44814 -p 44815:44815 -p 44816:44816 -p 44817:44817 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44815 --rest-port=44813 --tcp-port=44814 --discv5-udp-port=44816 --rest-address=0.0.0.0 --nat=extip:172.18.211.194 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0bb6500d8c23fb4554dd2a5cfccaed3dcbacec9b1a7329ccae7eceb60016bf05 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44817 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.211.194 waku 8a0e2d61e9af86ddde81de320fff4e888977283522f5a1608b3da9bf10250259
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 8a0e2d61e9af. Setting up logs at ./log/docker/receiving_node2_2024-09-06_11-54-31__f76f3331-e53a-4799-bfe0-9ac07511439e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 44813
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44813/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44813/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.211.194/tcp/44814/p2p/16Uiu2HAmRdHrYWBSpYwrfZeSAGYmpMz2YJEgkFXWenH4ke51BVW6","/ip4/172.18.211.194/tcp/44815/ws/p2p/16Uiu2HAmRdHrYWBSpYwrfZeSAGYmpMz2YJEgkFXWenH4ke51BVW6"],"enrUri":"enr:-LO4QF53uS1poRr9jt0hczuHQPzA5otkZ-p4DAZQSyI97AJ-XZDvbdeZOPDe8IOeNiELMjjr5cvjX4qvTnO063ZglBoBgmlkgnY0gmlwhKwS08KKbXVsdGlhZGRyc4wACgSsEtPCBq8P3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPAuI-Jc-tfrn-xk6YcxiqrsxpkkRYijqnOYIDOQp3sV4N0Y3CCrw6DdWRwgq8QhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44813/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.140.172/tcp/13030/p2p/16Uiu2HAmC8vKQg5j6ZNCES6DctNuoDXz52KmnGyeQ9SPr3nbtPii"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-06_11-54-31__f76f3331-e53a-4799-bfe0-9ac07511439e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.171.74
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['59357', '59358', '59359', '59360', '59361']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 59357:59357 -p 59358:59358 -p 59359:59359 -p 59360:59360 -p 59361:59361 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=59359 --rest-port=59357 --tcp-port=59358 --discv5-udp-port=59360 --rest-address=0.0.0.0 --nat=extip:172.18.171.74 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fb216fd9fdc908e617a4d4a347ece8f794c9ad0b6cacddfcfdc34c0a07d30f77 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=59361 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QAvt67XpwiXA9LVaw1hifi2HyqQhFpqgWsSAMGeg7froIinltJrGiou8l9Jir5flr359rWuUho6PLsxiRm77g2oBgmlkgnY0gmlwhKwSjKyKbXVsdGlhZGRyc4wACgSsEoysBjLn3QOCcnOFAAMBAACJc2VjcDI1NmsxoQL4TAQoq5mcOvoqQvBm094TwcVaS7aGJRcUwjlKNetgw4N0Y3CCMuaDdWRwgjLohXdha3UyCQ --lightpushnode=/ip4/172.18.140.172/tcp/13030/p2p/16Uiu2HAmC8vKQg5j6ZNCES6DctNuoDXz52KmnGyeQ9SPr3nbtPii --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.171.74 waku a33b4b596b2c4e53b5166340e268bd48f4d9aff2ebccc6b116bb44361c062ba6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID a33b4b596b2c. Setting up logs at ./log/docker/lightpush_node1_2024-09-06_11-54-31__f76f3331-e53a-4799-bfe0-9ac07511439e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 59357
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59357/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59357/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.171.74/tcp/59358/p2p/16Uiu2HAkuTgiPbuieeV35m4bSZSEK15Y5PkxcQUo9WYwnreZn714","/ip4/172.18.171.74/tcp/59359/ws/p2p/16Uiu2HAkuTgiPbuieeV35m4bSZSEK15Y5PkxcQUo9WYwnreZn714"],"enrUri":"enr:-LO4QKcH80QkfuWfRq-CSjLNltKuUf-EVztIK63-to9gqK1gFMYIBM3fV27sIe6cvXhLUz_cKlhYJ8ICZHrxvw75e-EBgmlkgnY0gmlwhKwSq0qKbXVsdGlhZGRyc4wACgSsEqtKBuff3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIAg_32chsRg_2MskoLwmx9kF0GmESwr7dPr0IGqq6Ew4N0Y3CC596DdWRwgufghXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59357/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.140.172/tcp/13030/p2p/16Uiu2HAmC8vKQg5j6ZNCES6DctNuoDXz52KmnGyeQ9SPr3nbtPii"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59357/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.211.194/tcp/44814/p2p/16Uiu2HAmRdHrYWBSpYwrfZeSAGYmpMz2YJEgkFXWenH4ke51BVW6"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13029/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44813/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59357/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1725623676265490688, "version": 10}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13029/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":10,"timestamp":1725623676265490688,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44813/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":10,"timestamp":1725623676265490688,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 4e1f5e0b278d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 8a0e2d61e9af
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id a33b4b596b2c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.