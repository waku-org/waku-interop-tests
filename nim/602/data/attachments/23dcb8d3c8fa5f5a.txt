[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_get_store_message_with_version with id: 2025-01-04_04-20-17__b7391b61-273f-441f-9da4-4c3d85dd9cc9
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-01-04_04-20-17__b7391b61-273f-441f-9da4-4c3d85dd9cc9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.249.39
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['10711', '10712', '10713', '10714', '10715']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 10711:10711 -p 10712:10712 -p 10713:10713 -p 10714:10714 -p 10715:10715 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=10713 --rest-port=10711 --tcp-port=10712 --discv5-udp-port=10714 --rest-address=0.0.0.0 --nat=extip:172.18.249.39 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a9dbe4fbab3adbd9ccb5cd02b390e1a659d0afbf3defead52bd4f9a6d1751c3c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=10715 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.249.39 waku b877c47820de7961ec9750309174bb28de328db33bb09fd3f84a6dd69aa624fa
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID b877c47820de. Setting up logs at ./log/docker/publishing_node1_2025-01-04_04-20-17__b7391b61-273f-441f-9da4-4c3d85dd9cc9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 10711
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container e0ffc8175b56. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10711/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10711/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.249.39/tcp/10712/p2p/16Uiu2HAmLhvsKTqKtwGYQVRLc1Vud3pfdtdMuT4r3CgaRCzjbYsN","/ip4/172.18.249.39/tcp/10713/ws/p2p/16Uiu2HAmLhvsKTqKtwGYQVRLc1Vud3pfdtdMuT4r3CgaRCzjbYsN"],"enrUri":"enr:-L24QIRi7XXv42xze0QY2IQmj-VmQH_zkCVm5H9r-3eyJ7ToCIRuS_rXPIoGOJIU_BtzQFxEQaAv55GohQWwAlDpYvMCgmlkgnY0gmlwhKwS-SeKbXVsdGlhZGRyc5YACASsEvknBinYAAoErBL5JwYp2d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDd55M6a-6k3j60yoPhj8enRneyBZ7neF2n1gQw1dE9RWDdGNwginYg3VkcIIp2oV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-01-04_04-20-17__b7391b61-273f-441f-9da4-4c3d85dd9cc9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.205.198
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['44914', '44915', '44916', '44917', '44918']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 44914:44914 -p 44915:44915 -p 44916:44916 -p 44917:44917 -p 44918:44918 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44916 --rest-port=44914 --tcp-port=44915 --discv5-udp-port=44917 --rest-address=0.0.0.0 --nat=extip:172.18.205.198 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a03e65d6a7e878b3eb543a7a97ad4f700c51da4fff7b5aa7aabdb4fdcddff43f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44918 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QIRi7XXv42xze0QY2IQmj-VmQH_zkCVm5H9r-3eyJ7ToCIRuS_rXPIoGOJIU_BtzQFxEQaAv55GohQWwAlDpYvMCgmlkgnY0gmlwhKwS-SeKbXVsdGlhZGRyc5YACASsEvknBinYAAoErBL5JwYp2d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDd55M6a-6k3j60yoPhj8enRneyBZ7neF2n1gQw1dE9RWDdGNwginYg3VkcIIp2oV3YWt1MgM --storenode=/ip4/172.18.249.39/tcp/10712/p2p/16Uiu2HAmLhvsKTqKtwGYQVRLc1Vud3pfdtdMuT4r3CgaRCzjbYsN --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.205.198 waku 699fed3e48ed244a3eda6a8e11eac9175f5690900402c4b130ac4b35ce3ca0f6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 699fed3e48ed. Setting up logs at ./log/docker/store_node1_2025-01-04_04-20-17__b7391b61-273f-441f-9da4-4c3d85dd9cc9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 44914
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44914/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44914/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.205.198/tcp/44915/p2p/16Uiu2HAm1VnuuRE3jCDTbyGdjjNYnbxkDozdWMQFRRovevrRYHaS","/ip4/172.18.205.198/tcp/44916/ws/p2p/16Uiu2HAm1VnuuRE3jCDTbyGdjjNYnbxkDozdWMQFRRovevrRYHaS"],"enrUri":"enr:-L24QBkg7IQlwlFcl0wI-Jt8ZMSp2zlIc0HY6xbuR2nriuP0T1VYtCnRTidr-sJmxH-v61lvu2OZH-BSGMAINiRWeRICgmlkgnY0gmlwhKwSzcaKbXVsdGlhZGRyc5YACASsEs3GBq9zAAoErBLNxgavdN0DgnJzhQADAQAAiXNlY3AyNTZrMaECWjRIrgA0y8IwSQVV6pN8TxGb-GUdGamqFiku-H_hUouDdGNwgq9zg3VkcIKvdYV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44914/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.249.39/tcp/10712/p2p/16Uiu2HAmLhvsKTqKtwGYQVRLc1Vud3pfdtdMuT4r3CgaRCzjbYsN"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10711/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44914/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10711/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)', "version": 10}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10711/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"L59YFcAESAJL2cTV/iCehs+8BfJ9ap2tY3jX7x5MdOs="}]}'
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44914/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"L59YFcAESAJL2cTV/iCehs+8BfJ9ap2tY3jX7x5MdOs="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id b877c47820de
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 699fed3e48ed
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container b877c47820de. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.