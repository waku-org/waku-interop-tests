[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_pubsub_topics with id: 2025-01-04_04-11-49__4836d314-3dd1-4a81-94c0-07a42cdd58f3
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-01-04_04-11-49__4836d314-3dd1-4a81-94c0-07a42cdd58f3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.142.150
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['44594', '44595', '44596', '44597', '44598']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 44594:44594 -p 44595:44595 -p 44596:44596 -p 44597:44597 -p 44598:44598 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44596 --rest-port=44594 --tcp-port=44595 --discv5-udp-port=44597 --rest-address=0.0.0.0 --nat=extip:172.18.142.150 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6f75edf2f3e75a7f6fff3a78f9c8b0cebdcbebfbe9ebd4dddd4fdabef2b6c7aa --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44598 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.142.150 waku 362283b0c1c711b2febd34c452e643e878721e6d9e528f5992e6bbc22bacbb67
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 362283b0c1c7. Setting up logs at ./log/docker/receiving_node1_2025-01-04_04-11-49__4836d314-3dd1-4a81-94c0-07a42cdd58f3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 44594
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container f137f29a70ad. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44594/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44594/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.142.150/tcp/44595/p2p/16Uiu2HAmQBWGTSTxuRWpVrvM5de78kBjBeGFCAV1bav4gxH1LbYM","/ip4/172.18.142.150/tcp/44596/ws/p2p/16Uiu2HAmQBWGTSTxuRWpVrvM5de78kBjBeGFCAV1bav4gxH1LbYM"],"enrUri":"enr:-L24QATQ3WuPEhr340kS7LpX3o-QoeD0-VVfOiuNWOO1CkreHGho4hawr4Bgb2BtBoXDJl9jpnMuywARNFE4j6Ki4TgCgmlkgnY0gmlwhKwSjpaKbXVsdGlhZGRyc5YACASsEo6WBq4zAAoErBKOlgauNN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDq0HOrk_7GXpvmfkY5pRQ1SfOSjzZlPZCBCNiySV7uxqDdGNwgq4zg3VkcIKuNYV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-01-04_04-11-49__4836d314-3dd1-4a81-94c0-07a42cdd58f3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.0.193
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['6508', '6509', '6510', '6511', '6512']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 6508:6508 -p 6509:6509 -p 6510:6510 -p 6511:6511 -p 6512:6512 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6510 --rest-port=6508 --tcp-port=6509 --discv5-udp-port=6511 --rest-address=0.0.0.0 --nat=extip:172.18.0.193 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=af6db0b7b21f7cf475e871b1ae43dab43fccda2eecefd62e34a1badbdd0e075d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6512 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.0.193 waku 816b8e7197693fdbd46763a106ac826b63695340f2c4cd11c14639629c864236
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 816b8e719769. Setting up logs at ./log/docker/receiving_node2_2025-01-04_04-11-49__4836d314-3dd1-4a81-94c0-07a42cdd58f3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 6508
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6508/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6508/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.0.193/tcp/6509/p2p/16Uiu2HAmMgBBiCEPgAoJYVbLVXQw2Cd6uYXPimV2HWP54p3HzXve","/ip4/172.18.0.193/tcp/6510/ws/p2p/16Uiu2HAmMgBBiCEPgAoJYVbLVXQw2Cd6uYXPimV2HWP54p3HzXve"],"enrUri":"enr:-L24QEfQm2PeeRQMH_KbTV5AEmePFweFQ_uZcVMGJHWKa9Y9IxGSbFXMdnYNZ1TE8Z_A-PCo9wsYWW6UzvPhEh6eF04CgmlkgnY0gmlwhKwSAMGKbXVsdGlhZGRyc5YACASsEgDBBhltAAoErBIAwQYZbt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDhgcDnzAy-_LY9wa02cHAMrQjW0BJ98J_AaMviEn8rseDdGNwghltg3VkcIIZb4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6508/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.142.150/tcp/44595/p2p/16Uiu2HAmQBWGTSTxuRWpVrvM5de78kBjBeGFCAV1bav4gxH1LbYM"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-01-04_04-11-49__4836d314-3dd1-4a81-94c0-07a42cdd58f3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.121.154
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['53180', '53181', '53182', '53183', '53184']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 53180:53180 -p 53181:53181 -p 53182:53182 -p 53183:53183 -p 53184:53184 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=53182 --rest-port=53180 --tcp-port=53181 --discv5-udp-port=53183 --rest-address=0.0.0.0 --nat=extip:172.18.121.154 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=74cd481bcfdb06c40d7ad1ba9757da2cabc9eaaefcbf7c6b131ac329c4d27ceb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=53184 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QATQ3WuPEhr340kS7LpX3o-QoeD0-VVfOiuNWOO1CkreHGho4hawr4Bgb2BtBoXDJl9jpnMuywARNFE4j6Ki4TgCgmlkgnY0gmlwhKwSjpaKbXVsdGlhZGRyc5YACASsEo6WBq4zAAoErBKOlgauNN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDq0HOrk_7GXpvmfkY5pRQ1SfOSjzZlPZCBCNiySV7uxqDdGNwgq4zg3VkcIKuNYV3YWt1Mgk --lightpushnode=/ip4/172.18.142.150/tcp/44595/p2p/16Uiu2HAmQBWGTSTxuRWpVrvM5de78kBjBeGFCAV1bav4gxH1LbYM --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.121.154 waku 0c48d31f7f3da983dc403b255ba8263985dfaecb31059bc5bd4967fb1752a063
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 0c48d31f7f3d. Setting up logs at ./log/docker/lightpush_node1_2025-01-04_04-11-49__4836d314-3dd1-4a81-94c0-07a42cdd58f3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 53180
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53180/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53180/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.121.154/tcp/53181/p2p/16Uiu2HAmEmZxkc2YkojXrjW3bRtQ9sxPcmKm92oysZT5j1CcE8HU","/ip4/172.18.121.154/tcp/53182/ws/p2p/16Uiu2HAmEmZxkc2YkojXrjW3bRtQ9sxPcmKm92oysZT5j1CcE8HU"],"enrUri":"enr:-L24QOOWrQmRg60XbMpYR74ZWJ5zrcI03OEPcPRrkFLdqg8fHrZjcv26QFQty0a2NEPA4c9Bm4bX5s3u0ufGWtdlWe4CgmlkgnY0gmlwhKwSeZqKbXVsdGlhZGRyc5YACASsEnmaBs-9AAoErBJ5mgbPvt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDH2bc_yRfwzEMBs8kWKOEGgnWKNw0IdZ7by-XPmY3u8-DdGNwgs-9g3VkcILPv4V3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53180/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.142.150/tcp/44595/p2p/16Uiu2HAmQBWGTSTxuRWpVrvM5de78kBjBeGFCAV1bav4gxH1LbYM"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53180/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.0.193/tcp/6509/p2p/16Uiu2HAmMgBBiCEPgAoJYVbLVXQw2Cd6uYXPimV2HWP54p3HzXve"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44594/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6508/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A dictionary', 'value': {'key': 'YWFh'}}
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53180/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": {"key": "YWFh"}, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1735963914587576320}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:53180/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'An integer', 'value': 1234567890}
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53180/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": 1234567890, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1735963914594828800}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:53180/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A list', 'value': ['YWFh']}
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53180/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": ["YWFh"], "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1735963914601008640}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:53180/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A bool', 'value': True}
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53180/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": true, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1735963914605032704}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:53180/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 362283b0c1c7
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 816b8e719769
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 362283b0c1c7. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 0c48d31f7f3d
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 816b8e719769. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.