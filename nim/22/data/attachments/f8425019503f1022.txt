INF 2024-05-07 13:21:51.164+00:00 Running nwaku node                         topics="wakunode main" tid=1 file=wakunode2.nim:122 version=v0.27.0-rc.0-44-g38f8b0
INF 2024-05-07 13:21:51.164+00:00 Configuration: Enabled protocols           topics="wakunode main" tid=1 file=wakunode2.nim:30 relay=true rlnRelay=false store=true filter=false lightpush=false peerExchange=true
INF 2024-05-07 13:21:51.164+00:00 Configuration. Network                     topics="wakunode main" tid=1 file=wakunode2.nim:38 cluster=0 maxPeers=none(int)
INF 2024-05-07 13:21:51.164+00:00 Configuration. Shards                      topics="wakunode main" tid=1 file=wakunode2.nim:41 shard=/waku/2/default-waku/proto
NTC 2024-05-07 13:21:51.164+00:00 REST service started                       tid=1 file=server.nim:189 address=0.0.0.0:38406
INF 2024-05-07 13:21:51.164+00:00 Starting REST HTTP server                  tid=1 file=builder.nim:109 url=http://0.0.0.0:38406/
DBG 2024-05-07 13:21:51.164+00:00 Retrieve dynamic bootstrap nodes           topics="wakunode main" tid=1 file=waku.nim:84
DBG 2024-05-07 13:21:51.164+00:00 No method for retrieving dynamic bootstrap nodes specified. topics="waku dnsdisc" tid=1 file=waku_dnsdisc.nim:131
DBG 2024-05-07 13:21:51.164+00:00 Setting up storage                         tid=1 file=node_factory.nim:414
DBG 2024-05-07 13:21:51.164+00:00 Initializing node                          tid=1 file=node_factory.nim:423
TRC 2024-05-07 13:21:51.165+00:00 registering protocols                      topics="libp2p multistream" tid=1 file=multistream.nim:238 protos="@[\"/ipfs/id/1.0.0\"]"
TRC 2024-05-07 13:21:51.165+00:00 registering protocols                      topics="libp2p multistream" tid=1 file=multistream.nim:238 protos="@[\"/libp2p/autonat/1.0.0\"]"
TRC 2024-05-07 13:21:51.165+00:00 registering protocols                      topics="libp2p multistream" tid=1 file=multistream.nim:238 protos="@[\"/libp2p/circuit/relay/0.2.0/hop\", \"/libp2p/circuit/relay/0.1.0\"]"
TRC 2024-05-07 13:21:51.165+00:00 no peer storage found                      tid=1 file=peer_manager.nim:521
INF 2024-05-07 13:21:51.165+00:00 Initializing networking                    tid=1 file=waku_node.nim:153 addrs="@[/ip4/172.18.123.89/tcp/38407, /ip4/172.18.123.89/tcp/38408/ws]"
DBG 2024-05-07 13:21:51.165+00:00 Mounting protocols                         tid=1 file=node_factory.nim:429
INF 2024-05-07 13:21:51.165+00:00 Created WakuMetadata protocol              topics="waku node" tid=1 file=protocol.nim:120 clusterId=0 shards={0}
TRC 2024-05-07 13:21:51.165+00:00 registering protocols                      topics="libp2p multistream" tid=1 file=multistream.nim:238 protos="@[\"/vac/waku/metadata/1.0.0\"]"
INF 2024-05-07 13:21:51.165+00:00 mounting sharding                          topics="waku node" tid=1 file=waku_node.nim:218 clusterId=0 shardCount=1
DBG 2024-05-07 13:21:51.165+00:00 Setting max message size                   tid=1 file=node_factory.nim:154 num_bytes=153600
INF 2024-05-07 13:21:51.165+00:00 mounting relay protocol                    topics="waku node" tid=1 file=waku_node.nim:404
TRC 2024-05-07 13:21:51.165+00:00 registering protocols                      topics="libp2p multistream" tid=1 file=multistream.nim:238 protos="@[\"/vac/waku/relay/2.0.0\", \"/meshsub/1.1.0\", \"/meshsub/1.0.0\", \"/meshsub/1.1.0\", \"/meshsub/1.0.0\"]"
INF 2024-05-07 13:21:51.165+00:00 relay mounted successfully                 topics="waku node" tid=1 file=waku_node.nim:424
DBG 2024-05-07 13:21:51.165+00:00 subscribe                                  topics="waku node" tid=1 file=waku_node.nim:289 pubsubTopic=/waku/2/default-waku/proto
DBG 2024-05-07 13:21:51.165+00:00 subscribe                                  topics="waku relay" tid=1 file=protocol.nim:257 pubsubTopic=/waku/2/default-waku/proto
TRC 2024-05-07 13:21:51.165+00:00 adding validator for topic                 topics="libp2p pubsub" tid=1 file=pubsub.nim:521 topic=/waku/2/default-waku/proto
TRC 2024-05-07 13:21:51.165+00:00 subscribing to topic                       topics="libp2p pubsub" tid=1 file=pubsub.nim:485 name=/waku/2/default-waku/proto
TRC 2024-05-07 13:21:51.165+00:00 rebalancing mesh                           topics="libp2p gossipsub" tid=1 file=behavior.nim:318 mesh=0 gossipsub=0 topic=/waku/2/default-waku/proto
TRC 2024-05-07 13:21:51.165+00:00 replenishing mesh                          topics="libp2p gossipsub" tid=1 file=behavior.nim:330 peers=0 mesh=0 gossipsub=0 topic=/waku/2/default-waku/proto
TRC 2024-05-07 13:21:51.165+00:00 grafting                                   topics="libp2p gossipsub" tid=1 file=behavior.nim:359 grafting=0 mesh=0 gossipsub=0 topic=/waku/2/default-waku/proto
TRC 2024-05-07 13:21:51.165+00:00 mesh balanced                              topics="libp2p gossipsub" tid=1 file=behavior.nim:528 mesh=0 gossipsub=0 topic=/waku/2/default-waku/proto
DBG 2024-05-07 13:21:51.165+00:00 adding validator to signed topics          tid=1 file=validator_signed.nim:59
INF 2024-05-07 13:21:51.165+00:00 mounting rendezvous discovery protocol     topics="waku node" tid=1 file=waku_node.nim:1152
TRC 2024-05-07 13:21:51.165+00:00 registering protocols                      topics="libp2p multistream" tid=1 file=multistream.nim:238 protos="@[\"/rendezvous/1.0.0\"]"
INF 2024-05-07 13:21:51.165+00:00 mounting libp2p ping protocol              topics="waku node" tid=1 file=waku_node.nim:1110
TRC 2024-05-07 13:21:51.165+00:00 registering protocols                      topics="libp2p multistream" tid=1 file=multistream.nim:238 protos="@[\"/ipfs/ping/1.0.0\"]"
DBG 2024-05-07 13:21:51.168+00:00 sqlite database page stats                 tid=1 file=builder.nim:66 pageSize=4096 pages=1 freePages=0
DBG 2024-05-07 13:21:51.168+00:00 starting message store's sqlite database migration topics="waku archive migration" tid=1 file=migrations.nim:61
INF 2024-05-07 13:21:51.168+00:00 Not considered schema version 7            topics="waku archive migration" tid=1 file=migrations.nim:49
INF 2024-05-07 13:21:51.168+00:00 database schema is outdated                topics="sqlite" tid=1 file=db_sqlite.nim:451 userVersion=0 targetVersion=8
DBG 2024-05-07 13:21:51.168+00:00 executing migration statement              topics="sqlite" tid=1 file=db_sqlite.nim:473 statement="CREATE TABLE IF NOT EXISTS  Message(\n        id BLOB PRIMARY KEY,\n        timestamp INTEGER NOT NULL,\n        contentTopic BLOB NOT NULL,\n        pubsubTopic BLOB NOT NULL,\n        payload BLOB,\n        version INTEGER NOT NULL\n    ) WITHOUT ROWID;"
DBG 2024-05-07 13:21:51.170+00:00 migration statement executed succesfully   topics="sqlite" tid=1 file=db_sqlite.nim:481 statement="CREATE TABLE IF NOT EXISTS  Message(\n        id BLOB PRIMARY KEY,\n        timestamp INTEGER NOT NULL,\n        contentTopic BLOB NOT NULL,\n        pubsubTopic BLOB NOT NULL,\n        payload BLOB,\n        version INTEGER NOT NULL\n    ) WITHOUT ROWID;"
DBG 2024-05-07 13:21:51.170+00:00 executing migration statement              topics="sqlite" tid=1 file=db_sqlite.nim:473 statement="CREATE TABLE IF NOT EXISTS Message_backup (\n        id BLOB PRIMARY KEY,\n        timestamp INTEGER NOT NULL,\n        contentTopic BLOB NOT NULL,\n        pubsubTopic BLOB NOT NULL,\n        payload BLOB,\n        version INTEGER NOT NULL\n    ) WITHOUT ROWID;"
DBG 2024-05-07 13:21:51.171+00:00 migration statement executed succesfully   topics="sqlite" tid=1 file=db_sqlite.nim:481 statement="CREATE TABLE IF NOT EXISTS Message_backup (\n        id BLOB PRIMARY KEY,\n        timestamp INTEGER NOT NULL,\n        contentTopic BLOB NOT NULL,\n        pubsubTopic BLOB NOT NULL,\n        payload BLOB,\n        version INTEGER NOT NULL\n    ) WITHOUT ROWID;"
DBG 2024-05-07 13:21:51.171+00:00 executing migration statement              topics="sqlite" tid=1 file=db_sqlite.nim:473 statement="INSERT INTO Message_backup SELECT id, timestamp, contentTopic, pubsubTopic, payload, version FROM Message;"
DBG 2024-05-07 13:21:51.171+00:00 migration statement executed succesfully   topics="sqlite" tid=1 file=db_sqlite.nim:481 statement="INSERT INTO Message_backup SELECT id, timestamp, contentTopic, pubsubTopic, payload, version FROM Message;"
DBG 2024-05-07 13:21:51.171+00:00 executing migration statement              topics="sqlite" tid=1 file=db_sqlite.nim:473 statement="DROP TABLE Message;"
DBG 2024-05-07 13:21:51.172+00:00 migration statement executed succesfully   topics="sqlite" tid=1 file=db_sqlite.nim:481 statement="DROP TABLE Message;"
DBG 2024-05-07 13:21:51.172+00:00 executing migration statement              topics="sqlite" tid=1 file=db_sqlite.nim:473 statement="CREATE TABLE IF NOT EXISTS Message(\n        id BLOB PRIMARY KEY,\n        receiverTimestamp REAL NOT NULL,\n        contentTopic BLOB NOT NULL,\n        pubsubTopic BLOB NOT NULL,\n        payload BLOB,\n        version INTEGER NOT NULL,\n        senderTimestamp REAL NOT NULL\n    ) WITHOUT ROWID;"
DBG 2024-05-07 13:21:51.173+00:00 migration statement executed succesfully   topics="sqlite" tid=1 file=db_sqlite.nim:481 statement="CREATE TABLE IF NOT EXISTS Message(\n        id BLOB PRIMARY KEY,\n        receiverTimestamp REAL NOT NULL,\n        contentTopic BLOB NOT NULL,\n        pubsubTopic BLOB NOT NULL,\n        payload BLOB,\n        version INTEGER NOT NULL,\n        senderTimestamp REAL NOT NULL\n    ) WITHOUT ROWID;"
DBG 2024-05-07 13:21:51.173+00:00 executing migration statement              topics="sqlite" tid=1 file=db_sqlite.nim:473 statement="INSERT INTO Message (id, receiverTimestamp, contentTopic, pubsubTopic, payload, version, senderTimestamp)\n    SELECT id, timestamp, contentTopic, pubsubTopic, payload, version, 0\n    FROM Message_backup;"
DBG 2024-05-07 13:21:51.173+00:00 migration statement executed succesfully   topics="sqlite" tid=1 file=db_sqlite.nim:481 statement="INSERT INTO Message (id, receiverTimestamp, contentTopic, pubsubTopic, payload, version, senderTimestamp)\n    SELECT id, timestamp, contentTopic, pubsubTopic, payload, version, 0\n    FROM Message_backup;"
DBG 2024-05-07 13:21:51.173+00:00 executing migration statement              topics="sqlite" tid=1 file=db_sqlite.nim:473 statement="DROP TABLE Message_backup;"
DBG 2024-05-07 13:21:51.174+00:00 migration statement executed succesfully   topics="sqlite" tid=1 file=db_sqlite.nim:481 statement="DROP TABLE Message_backup;"
DBG 2024-05-07 13:21:51.174+00:00 executing migration statement              topics="sqlite" tid=1 file=db_sqlite.nim:473 statement="CREATE TABLE IF NOT EXISTS Message_backup (\n        id BLOB PRIMARY KEY,\n        receiverTimestamp REAL NOT NULL,\n        contentTopic BLOB NOT NULL,\n        pubsubTopic BLOB NOT NULL,\n        payload BLOB,\n        version INTEGER NOT NULL,\n        senderTimestamp REAL NOT NULL\n    ) WITHOUT ROWID;"
DBG 2024-05-07 13:21:51.175+00:00 migration statement executed succesfully   topics="sqlite" tid=1 file=db_sqlite.nim:481 statement="CREATE TABLE IF NOT EXISTS Message_backup (\n        id BLOB PRIMARY KEY,\n        receiverTimestamp REAL NOT NULL,\n        contentTopic BLOB NOT NULL,\n        pubsubTopic BLOB NOT NULL,\n        payload BLOB,\n        version INTEGER NOT NULL,\n        senderTimestamp REAL NOT NULL\n    ) WITHOUT ROWID;"
DBG 2024-05-07 13:21:51.175+00:00 executing migration statement              topics="sqlite" tid=1 file=db_sqlite.nim:473 statement="INSERT INTO Message_backup SELECT id, receiverTimestamp, contentTopic, pubsubTopic, payload, version, senderTimestamp FROM Message;"
DBG 2024-05-07 13:21:51.175+00:00 migration statement executed succesfully   topics="sqlite" tid=1 file=db_sqlite.nim:481 statement="INSERT INTO Message_backup SELECT id, receiverTimestamp, contentTopic, pubsubTopic, payload, version, senderTimestamp FROM Message;"
DBG 2024-05-07 13:21:51.175+00:00 executing migration statement              topics="sqlite" tid=1 file=db_sqlite.nim:473 statement="DROP TABLE Message;"
DBG 2024-05-07 13:21:51.176+00:00 migration statement executed succesfully   topics="sqlite" tid=1 file=db_sqlite.nim:481 statement="DROP TABLE Message;"
DBG 2024-05-07 13:21:51.176+00:00 executing migration statement              topics="sqlite" tid=1 file=db_sqlite.nim:473 statement="CREATE TABLE IF NOT EXISTS Message(\n        id BLOB PRIMARY KEY,\n        receiverTimestamp INTEGER NOT NULL,\n        contentTopic BLOB NOT NULL,\n        pubsubTopic BLOB NOT NULL,\n        payload BLOB,\n        version INTEGER NOT NULL,\n        senderTimestamp INTEGER NOT NULL\n    ) WITHOUT ROWID;"
DBG 2024-05-07 13:21:51.177+00:00 migration statement executed succesfully   topics="sqlite" tid=1 file=db_sqlite.nim:481 statement="CREATE TABLE IF NOT EXISTS Message(\n        id BLOB PRIMARY KEY,\n        receiverTimestamp INTEGER NOT NULL,\n        contentTopic BLOB NOT NULL,\n        pubsubTopic BLOB NOT NULL,\n        payload BLOB,\n        version INTEGER NOT NULL,\n        senderTimestamp INTEGER NOT NULL\n    ) WITHOUT ROWID;"
DBG 2024-05-07 13:21:51.177+00:00 executing migration statement              topics="sqlite" tid=1 file=db_sqlite.nim:473 statement="INSERT INTO Message (id, receiverTimestamp, contentTopic, pubsubTopic, payload, version, senderTimestamp)\n    SELECT id, CAST(receiverTimestamp*1000000000 AS INTEGER), contentTopic, pubsubTopic, payload, version, CAST(senderTimestamp*1000000000 AS INTEGER)\n    FROM Message_backup;"
DBG 2024-05-07 13:21:51.177+00:00 migration statement executed succesfully   topics="sqlite" tid=1 file=db_sqlite.nim:481 statement="INSERT INTO Message (id, receiverTimestamp, contentTopic, pubsubTopic, payload, version, senderTimestamp)\n    SELECT id, CAST(receiverTimestamp*1000000000 AS INTEGER), contentTopic, pubsubTopic, payload, version, CAST(senderTimestamp*1000000000 AS INTEGER)\n    FROM Message_backup;"
DBG 2024-05-07 13:21:51.177+00:00 executing migration statement              topics="sqlite" tid=1 file=db_sqlite.nim:473 statement="DROP TABLE Message_backup;"
DBG 2024-05-07 13:21:51.178+00:00 migration statement executed succesfully   topics="sqlite" tid=1 file=db_sqlite.nim:481 statement="DROP TABLE Message_backup;"
DBG 2024-05-07 13:21:51.178+00:00 executing migration statement              topics="sqlite" tid=1 file=db_sqlite.nim:473 statement="ALTER TABLE Message RENAME TO Message_backup;"
DBG 2024-05-07 13:21:51.179+00:00 migration statement executed succesfully   topics="sqlite" tid=1 file=db_sqlite.nim:481 statement="ALTER TABLE Message RENAME TO Message_backup;"
DBG 2024-05-07 13:21:51.180+00:00 executing migration statement              topics="sqlite" tid=1 file=db_sqlite.nim:473 statement="CREATE TABLE IF NOT EXISTS Message(\n        id BLOB,\n        receiverTimestamp INTEGER NOT NULL,\n        contentTopic BLOB NOT NULL,\n        pubsubTopic BLOB NOT NULL,\n        payload BLOB,\n        version INTEGER NOT NULL,\n        senderTimestamp INTEGER NOT NULL,\n        CONSTRAINT messageIndex PRIMARY KEY (senderTimestamp, id, pubsubTopic)\n    ) WITHOUT ROWID;"
DBG 2024-05-07 13:21:51.180+00:00 migration statement executed succesfully   topics="sqlite" tid=1 file=db_sqlite.nim:481 statement="CREATE TABLE IF NOT EXISTS Message(\n        id BLOB,\n        receiverTimestamp INTEGER NOT NULL,\n        contentTopic BLOB NOT NULL,\n        pubsubTopic BLOB NOT NULL,\n        payload BLOB,\n        version INTEGER NOT NULL,\n        senderTimestamp INTEGER NOT NULL,\n        CONSTRAINT messageIndex PRIMARY KEY (senderTimestamp, id, pubsubTopic)\n    ) WITHOUT ROWID;"
DBG 2024-05-07 13:21:51.180+00:00 executing migration statement              topics="sqlite" tid=1 file=db_sqlite.nim:473 statement="INSERT INTO Message\n    SELECT *\n    FROM Message_backup;"
DBG 2024-05-07 13:21:51.180+00:00 migration statement executed succesfully   topics="sqlite" tid=1 file=db_sqlite.nim:481 statement="INSERT INTO Message\n    SELECT *\n    FROM Message_backup;"
DBG 2024-05-07 13:21:51.180+00:00 executing migration statement              topics="sqlite" tid=1 file=db_sqlite.nim:473 statement="DROP TABLE Message_backup;"
DBG 2024-05-07 13:21:51.181+00:00 migration statement executed succesfully   topics="sqlite" tid=1 file=db_sqlite.nim:481 statement="DROP TABLE Message_backup;"
DBG 2024-05-07 13:21:51.181+00:00 executing migration statement              topics="sqlite" tid=1 file=db_sqlite.nim:473 statement="CREATE INDEX IF NOT EXISTS i_msg ON Message (contentTopic, pubsubTopic, senderTimestamp, id);"
DBG 2024-05-07 13:21:51.182+00:00 migration statement executed succesfully   topics="sqlite" tid=1 file=db_sqlite.nim:481 statement="CREATE INDEX IF NOT EXISTS i_msg ON Message (contentTopic, pubsubTopic, senderTimestamp, id);"
DBG 2024-05-07 13:21:51.182+00:00 executing migration statement              topics="sqlite" tid=1 file=db_sqlite.nim:473 statement="ALTER TABLE message RENAME COLUMN receiverTimestamp TO storedAt;"
DBG 2024-05-07 13:21:51.183+00:00 migration statement executed succesfully   topics="sqlite" tid=1 file=db_sqlite.nim:481 statement="ALTER TABLE message RENAME COLUMN receiverTimestamp TO storedAt;"
DBG 2024-05-07 13:21:51.183+00:00 executing migration statement              topics="sqlite" tid=1 file=db_sqlite.nim:473 statement="DROP INDEX IF EXISTS i_msg;"
DBG 2024-05-07 13:21:51.184+00:00 migration statement executed succesfully   topics="sqlite" tid=1 file=db_sqlite.nim:481 statement="DROP INDEX IF EXISTS i_msg;"
DBG 2024-05-07 13:21:51.184+00:00 executing migration statement              topics="sqlite" tid=1 file=db_sqlite.nim:473 statement="CREATE INDEX IF NOT EXISTS i_query ON message (contentTopic, pubsubTopic, storedAt, id);"
DBG 2024-05-07 13:21:51.185+00:00 migration statement executed succesfully   topics="sqlite" tid=1 file=db_sqlite.nim:481 statement="CREATE INDEX IF NOT EXISTS i_query ON message (contentTopic, pubsubTopic, storedAt, id);"
DBG 2024-05-07 13:21:51.185+00:00 executing migration statement              topics="sqlite" tid=1 file=db_sqlite.nim:473 statement="DROP INDEX IF EXISTS i_rt;"
DBG 2024-05-07 13:21:51.185+00:00 migration statement executed succesfully   topics="sqlite" tid=1 file=db_sqlite.nim:481 statement="DROP INDEX IF EXISTS i_rt;"
DBG 2024-05-07 13:21:51.185+00:00 executing migration statement              topics="sqlite" tid=1 file=db_sqlite.nim:473 statement="CREATE INDEX IF NOT EXISTS i_ts ON message (storedAt);"
DBG 2024-05-07 13:21:51.185+00:00 migration statement executed succesfully   topics="sqlite" tid=1 file=db_sqlite.nim:481 statement="CREATE INDEX IF NOT EXISTS i_ts ON message (storedAt);"
DBG 2024-05-07 13:21:51.185+00:00 executing migration statement              topics="sqlite" tid=1 file=db_sqlite.nim:473 statement="ALTER TABLE message RENAME TO message_backup;"
DBG 2024-05-07 13:21:51.187+00:00 migration statement executed succesfully   topics="sqlite" tid=1 file=db_sqlite.nim:481 statement="ALTER TABLE message RENAME TO message_backup;"
DBG 2024-05-07 13:21:51.187+00:00 executing migration statement              topics="sqlite" tid=1 file=db_sqlite.nim:473 statement="CREATE TABLE IF NOT EXISTS message(\n  pubsubTopic BLOB NOT NULL,\n  contentTopic BLOB NOT NULL,\n  payload BLOB,\n  version INTEGER NOT NULL,\n  timestamp INTEGER NOT NULL,\n  id BLOB,\n  storedAt INTEGER NOT NULL,\n  CONSTRAINT messageIndex PRIMARY KEY (storedAt, id, pubsubTopic)\n) WITHOUT ROWID;"
DBG 2024-05-07 13:21:51.188+00:00 migration statement executed succesfully   topics="sqlite" tid=1 file=db_sqlite.nim:481 statement="CREATE TABLE IF NOT EXISTS message(\n  pubsubTopic BLOB NOT NULL,\n  contentTopic BLOB NOT NULL,\n  payload BLOB,\n  version INTEGER NOT NULL,\n  timestamp INTEGER NOT NULL,\n  id BLOB,\n  storedAt INTEGER NOT NULL,\n  CONSTRAINT messageIndex PRIMARY KEY (storedAt, id, pubsubTopic)\n) WITHOUT ROWID;"
DBG 2024-05-07 13:21:51.188+00:00 executing migration statement              topics="sqlite" tid=1 file=db_sqlite.nim:473 statement="INSERT OR IGNORE INTO message(pubsubTopic, contentTopic, payload, version, timestamp, id, storedAt)\n  SELECT pubsubTopic, contentTopic, payload, version, senderTimestamp, id, storedAt\n  FROM message_backup;"
DBG 2024-05-07 13:21:51.188+00:00 migration statement executed succesfully   topics="sqlite" tid=1 file=db_sqlite.nim:481 statement="INSERT OR IGNORE INTO message(pubsubTopic, contentTopic, payload, version, timestamp, id, storedAt)\n  SELECT pubsubTopic, contentTopic, payload, version, senderTimestamp, id, storedAt\n  FROM message_backup;"
DBG 2024-05-07 13:21:51.188+00:00 executing migration statement              topics="sqlite" tid=1 file=db_sqlite.nim:473 statement="DROP TABLE message_backup;"
DBG 2024-05-07 13:21:51.189+00:00 migration statement executed succesfully   topics="sqlite" tid=1 file=db_sqlite.nim:481 statement="DROP TABLE message_backup;"
DBG 2024-05-07 13:21:51.189+00:00 executing migration statement              topics="sqlite" tid=1 file=db_sqlite.nim:473 statement="ALTER TABLE message RENAME TO message_backup;"
DBG 2024-05-07 13:21:51.190+00:00 migration statement executed succesfully   topics="sqlite" tid=1 file=db_sqlite.nim:481 statement="ALTER TABLE message RENAME TO message_backup;"
DBG 2024-05-07 13:21:51.190+00:00 executing migration statement              topics="sqlite" tid=1 file=db_sqlite.nim:473 statement="CREATE TABLE IF NOT EXISTS message (\n  pubsubTopic BLOB NOT NULL,\n  contentTopic BLOB NOT NULL,\n  payload BLOB,\n  version INTEGER NOT NULL,\n  timestamp INTEGER NOT NULL,\n  id BLOB,\n  messageHash BLOB, -- Newly added, this will be populated with a counter value\n  storedAt INTEGER NOT NULL,\n  CONSTRAINT messageIndex PRIMARY KEY (messageHash)\n) WITHOUT ROWID;"
DBG 2024-05-07 13:21:51.191+00:00 migration statement executed succesfully   topics="sqlite" tid=1 file=db_sqlite.nim:481 statement="CREATE TABLE IF NOT EXISTS message (\n  pubsubTopic BLOB NOT NULL,\n  contentTopic BLOB NOT NULL,\n  payload BLOB,\n  version INTEGER NOT NULL,\n  timestamp INTEGER NOT NULL,\n  id BLOB,\n  messageHash BLOB, -- Newly added, this will be populated with a counter value\n  storedAt INTEGER NOT NULL,\n  CONSTRAINT messageIndex PRIMARY KEY (messageHash)\n) WITHOUT ROWID;"
DBG 2024-05-07 13:21:51.191+00:00 executing migration statement              topics="sqlite" tid=1 file=db_sqlite.nim:473 statement="INSERT INTO message(pubsubTopic, contentTopic, payload, version, timestamp, id, messageHash, storedAt)\nSELECT\n  mb.pubsubTopic,\n  mb.contentTopic,\n  mb.payload,\n  mb.version,\n  mb.timestamp,\n  mb.id,\n  randomblob(32), -- to populate 32-byte random blob\n  mb.storedAt\nFROM message_backup AS mb;"
DBG 2024-05-07 13:21:51.191+00:00 migration statement executed succesfully   topics="sqlite" tid=1 file=db_sqlite.nim:481 statement="INSERT INTO message(pubsubTopic, contentTopic, payload, version, timestamp, id, messageHash, storedAt)\nSELECT\n  mb.pubsubTopic,\n  mb.contentTopic,\n  mb.payload,\n  mb.version,\n  mb.timestamp,\n  mb.id,\n  randomblob(32), -- to populate 32-byte random blob\n  mb.storedAt\nFROM message_backup AS mb;"
DBG 2024-05-07 13:21:51.191+00:00 executing migration statement              topics="sqlite" tid=1 file=db_sqlite.nim:473 statement="DROP TABLE message_backup;"
DBG 2024-05-07 13:21:51.191+00:00 migration statement executed succesfully   topics="sqlite" tid=1 file=db_sqlite.nim:481 statement="DROP TABLE message_backup;"
DBG 2024-05-07 13:21:51.192+00:00 database user_version updated              topics="sqlite" tid=1 file=db_sqlite.nim:486 userVersion=8
DBG 2024-05-07 13:21:51.192+00:00 finished message store's sqlite database migration topics="waku archive migration" tid=1 file=migrations.nim:76
DBG 2024-05-07 13:21:51.192+00:00 setting up sqlite waku archive driver      tid=1 file=builder.nim:80
/app/apps/wakunode2/wakunode2.nim(138) wakunode2
/app/waku/factory/waku.nim(95) init
/app/waku/factory/node_factory.nim(432) setupNode
/app/waku/factory/node_factory.nim(113) setupProtocols
/app/vendor/nim-chronos/chronos/internal/asyncfutures.nim(382) futureContinue
/app/waku/factory/node_factory.nim(231) setupProtocols
/app/waku/waku_archive/driver/builder.nim(24) new
/app/vendor/nim-chronos/chronos/internal/asyncfutures.nim(382) futureContinue
/app/waku/waku_archive/driver/builder.nim(81) new
/app/waku/waku_archive/driver/sqlite_driver/sqlite_driver.nim(53) new
/app/waku/waku_archive/driver/sqlite_driver/queries.nim(159) prepareInsertMessageStmt
/app/vendor/nim-results/results.nim(376) raiseResultDefect
[[reraised from:
/app/apps/wakunode2/wakunode2.nim(138) wakunode2
/app/waku/factory/waku.nim(95) init
/app/waku/factory/node_factory.nim(432) setupNode
/app/waku/factory/node_factory.nim(113) setupProtocols
/app/vendor/nim-chronos/chronos/internal/asyncfutures.nim(382) futureContinue
/app/waku/factory/node_factory.nim(231) setupProtocols
/app/waku/waku_archive/driver/builder.nim(24) new
/app/vendor/nim-chronos/chronos/internal/asyncfutures.nim(382) futureContinue
/app/waku/waku_archive/driver/builder.nim(125) new
]]
[[reraised from:
/app/apps/wakunode2/wakunode2.nim(138) wakunode2
/app/waku/factory/waku.nim(95) init
/app/waku/factory/node_factory.nim(432) setupNode
/app/waku/factory/node_factory.nim(113) setupProtocols
/app/vendor/nim-chronos/chronos/internal/asyncfutures.nim(382) futureContinue
/app/waku/factory/node_factory.nim(231) setupProtocols
/app/waku/waku_archive/driver/builder.nim(24) new
/app/vendor/nim-chronos/chronos/internal/asyncfutures.nim(382) futureContinue
/app/waku/waku_archive/driver/builder.nim(125) new
]]
[[reraised from:
/app/apps/wakunode2/wakunode2.nim(138) wakunode2
/app/waku/factory/waku.nim(95) init
/app/waku/factory/node_factory.nim(432) setupNode
/app/waku/factory/node_factory.nim(113) setupProtocols
/app/vendor/nim-chronos/chronos/internal/asyncfutures.nim(382) futureContinue
/app/waku/factory/node_factory.nim(334) setupProtocols
]]
[[reraised from:
/app/apps/wakunode2/wakunode2.nim(138) wakunode2
/app/waku/factory/waku.nim(95) init
/app/waku/factory/node_factory.nim(432) setupNode
/app/waku/factory/node_factory.nim(113) setupProtocols
/app/vendor/nim-chronos/chronos/internal/asyncfutures.nim(382) futureContinue
/app/waku/factory/node_factory.nim(334) setupProtocols
]]
Error: unhandled exception: this is a valid statement: SQL logic error [ResultDefect]
