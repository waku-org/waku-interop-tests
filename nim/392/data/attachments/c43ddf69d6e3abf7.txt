[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_single_pubsub_topic[/waku/2/rs/999/999] with id: 2024-10-15_04-27-35__86176b62-ca47-423e-b7e6-ff6366921256
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-15_04-27-35__86176b62-ca47-423e-b7e6-ff6366921256__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.100.235
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['50500', '50501', '50502', '50503', '50504']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 999
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 50500:50500 -p 50501:50501 -p 50502:50502 -p 50503:50503 -p 50504:50504 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=50502 --rest-port=50500 --tcp-port=50501 --discv5-udp-port=50503 --rest-address=0.0.0.0 --nat=extip:172.18.100.235 --peer-exchange=true --discv5-discovery=true --cluster-id=999 --nodekey=41a5ce77c7d8441c49eb4e1a01e16ebd7bfadbf296ac99ab9c7bd86d2c742cae --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=50504 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/999/999
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.100.235 waku d3a36d65399edd823e1281f1e7037657fb0a4ceb50aa685c9038201d36876720
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID d3a36d65399e. Setting up logs at ./log/docker/node1_2024-10-15_04-27-35__86176b62-ca47-423e-b7e6-ff6366921256__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 50500
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50500/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50500/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.100.235/tcp/50501/p2p/16Uiu2HAmPa1MkGRvyzSAZorwJq4WpVvH38b3YvXsf75CCRESMmsp","/ip4/172.18.100.235/tcp/50502/ws/p2p/16Uiu2HAmPa1MkGRvyzSAZorwJq4WpVvH38b3YvXsf75CCRESMmsp"],"enrUri":"enr:-LO4QOnJshbuYkRZmdlbmI3YNdjXik9I73PdIZDI7VyQ28yZPfHi_-LOS1zhuCDpQYqX7-FP07gy2HPkyaaf_HyOR14BgmlkgnY0gmlwhKwSZOuKbXVsdGlhZGRyc4wACgSsEmTrBsVG3QOCcnOFA-cBA-eJc2VjcDI1NmsxoQOiKcqwfCMGSfO68dJTyAsp6fRbijdbF-e6BRYlp9ydA4N0Y3CCxUWDdWRwgsVHhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-10-15_04-27-35__86176b62-ca47-423e-b7e6-ff6366921256__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.125.212
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['63794', '63795', '63796', '63797', '63798']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 999
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 63794:63794 -p 63795:63795 -p 63796:63796 -p 63797:63797 -p 63798:63798 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63796 --rest-port=63794 --tcp-port=63795 --discv5-udp-port=63797 --rest-address=0.0.0.0 --nat=extip:172.18.125.212 --peer-exchange=true --discv5-discovery=true --cluster-id=999 --nodekey=ee3eea4949fd36890d9cc9fa9daa8d1885bb0c6f9f93cb3b25f19bda3b21d90b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63798 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QOnJshbuYkRZmdlbmI3YNdjXik9I73PdIZDI7VyQ28yZPfHi_-LOS1zhuCDpQYqX7-FP07gy2HPkyaaf_HyOR14BgmlkgnY0gmlwhKwSZOuKbXVsdGlhZGRyc4wACgSsEmTrBsVG3QOCcnOFA-cBA-eJc2VjcDI1NmsxoQOiKcqwfCMGSfO68dJTyAsp6fRbijdbF-e6BRYlp9ydA4N0Y3CCxUWDdWRwgsVHhXdha3UyBQ --pubsub-topic=/waku/2/rs/999/999
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.125.212 waku f792de0723bbfc9fefbd4ffca2eedf2986b85ca5808e20a4bebdfade91390fa6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID f792de0723bb. Setting up logs at ./log/docker/node2_2024-10-15_04-27-35__86176b62-ca47-423e-b7e6-ff6366921256__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 63794
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63794/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63794/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.125.212/tcp/63795/p2p/16Uiu2HAm3ELFdcxot25qjRQLi61mCXX9ndpagv9k1jhZYGq8dCwy","/ip4/172.18.125.212/tcp/63796/ws/p2p/16Uiu2HAm3ELFdcxot25qjRQLi61mCXX9ndpagv9k1jhZYGq8dCwy"],"enrUri":"enr:-LO4QPa3IkbqSLH8VELrpojs3g6m1uk1d3ZYv-QNIBrj3B0oGTY3jEGUj-cpcMa65hRBlnuD2EQ7eISZ1DSP1g6y7iABgmlkgnY0gmlwhKwSfdSKbXVsdGlhZGRyc4wACgSsEn3UBvk03QOCcnOFA-cBA-eJc2VjcDI1NmsxoQJz9c0cPj4MkmAJsG8yPhmRYyxIYmcSufF5Haj4hP__UIN0Y3CC-TODdWRwgvk1hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63794/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.100.235/tcp/50501/p2p/16Uiu2HAmPa1MkGRvyzSAZorwJq4WpVvH38b3YvXsf75CCRESMmsp"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:50500/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/999/999"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63794/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/999/999"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:50500/relay/v1/messages/%2Fwaku%2F2%2Frs%2F999%2F999" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50500/relay/v1/messages/%2Fwaku%2F2%2Frs%2F999%2F999" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1728966458562459392,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63794/relay/v1/messages/%2Fwaku%2F2%2Frs%2F999%2F999" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1728966458562459392,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id d3a36d65399e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id f792de0723bb
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.