[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_subscribe_to_pubsub_topics_from_multiple_clusters with id: 2024-10-15_04-16-33__e5a3d5c4-b62d-4127-a269-d0a3521f5f35
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-15_04-16-33__e5a3d5c4-b62d-4127-a269-d0a3521f5f35__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.7.147
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['7505', '7506', '7507', '7508', '7509']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 7505:7505 -p 7506:7506 -p 7507:7507 -p 7508:7508 -p 7509:7509 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7507 --rest-port=7505 --tcp-port=7506 --discv5-udp-port=7508 --rest-address=0.0.0.0 --nat=extip:172.18.7.147 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dc83f38fed4ee806ee06dca8b4e8fca6d3873e0db6d24dc92f34e6c10041b66e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7509 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.7.147 waku 8946b05ed13a9d949c185cf2f178369314c0e509ad4d60944ddc3717a1ee40ab
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 8946b05ed13a. Setting up logs at ./log/docker/node1_2024-10-15_04-16-33__e5a3d5c4-b62d-4127-a269-d0a3521f5f35__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 7505
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7505/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7505/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.7.147/tcp/7506/p2p/16Uiu2HAm3ofCVPxLRe9V5Cowj4itsHvBnx9PCYASzqqmfNzXEDBs","/ip4/172.18.7.147/tcp/7507/ws/p2p/16Uiu2HAm3ofCVPxLRe9V5Cowj4itsHvBnx9PCYASzqqmfNzXEDBs"],"enrUri":"enr:-LO4QMiYroDvPGbKXTaXfteYsajVX_5nbZqkXVdQ4cLKwxXeVYHEUW1JJmt2WVPVrktCTQI3ZaSCPGE6NeZrv84d9QUBgmlkgnY0gmlwhKwSB5OKbXVsdGlhZGRyc4wACgSsEgeTBh1T3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJ8f2PZFSn20ANjJl-ZZJGpv9klb3edZWaA_uxpyaCi7oN0Y3CCHVKDdWRwgh1UhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-10-15_04-16-33__e5a3d5c4-b62d-4127-a269-d0a3521f5f35__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.128.187
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['7724', '7725', '7726', '7727', '7728']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 7724:7724 -p 7725:7725 -p 7726:7726 -p 7727:7727 -p 7728:7728 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7726 --rest-port=7724 --tcp-port=7725 --discv5-udp-port=7727 --rest-address=0.0.0.0 --nat=extip:172.18.128.187 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=046fbe651e0251ab8dee0ae4b7f753d5afc2f69da4bcfed0bd8066a12e68fe4d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7728 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QMiYroDvPGbKXTaXfteYsajVX_5nbZqkXVdQ4cLKwxXeVYHEUW1JJmt2WVPVrktCTQI3ZaSCPGE6NeZrv84d9QUBgmlkgnY0gmlwhKwSB5OKbXVsdGlhZGRyc4wACgSsEgeTBh1T3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJ8f2PZFSn20ANjJl-ZZJGpv9klb3edZWaA_uxpyaCi7oN0Y3CCHVKDdWRwgh1UhXdha3UyBQ --filternode=/ip4/172.18.7.147/tcp/7506/p2p/16Uiu2HAm3ofCVPxLRe9V5Cowj4itsHvBnx9PCYASzqqmfNzXEDBs
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.128.187 waku 331f86e6deba06a88a7b0037ebde55d871a99e8e1eb1099e301e79ffe73caab2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 331f86e6deba. Setting up logs at ./log/docker/node2_2024-10-15_04-16-33__e5a3d5c4-b62d-4127-a269-d0a3521f5f35__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 7724
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7724/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7724/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.128.187/tcp/7725/p2p/16Uiu2HAm5rDeWHVeGQTMWhoE2opmz3T8kPemV5mKyWt97xauSXPD","/ip4/172.18.128.187/tcp/7726/ws/p2p/16Uiu2HAm5rDeWHVeGQTMWhoE2opmz3T8kPemV5mKyWt97xauSXPD"],"enrUri":"enr:-LO4QGO2BMwMlnKWMfhF_myzdtWwDruGluVbHTdoA3iJbL4qKZ_joEro5yH8tI9UNk-kf7TRo14RXp-DJFeFMEk9FeMBgmlkgnY0gmlwhKwSgLuKbXVsdGlhZGRyc4wACgSsEoC7Bh4u3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKa3p18pT8eXahq86FI6Px-Zb7XeDAiVzD0jdPKmjqOyIN0Y3CCHi2DdWRwgh4vhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7724/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.7.147/tcp/7506/p2p/16Uiu2HAm3ofCVPxLRe9V5Cowj4itsHvBnx9PCYASzqqmfNzXEDBs"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.filter.test_subscribe_create:test_subscribe_create.py:41 Running test with pubsub topic: /waku/2/rs/3/1
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7505/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7724/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "0f5ad10e-e6d0-4d51-a5a5-062a9510126d", "contentFilters": ["/waku/2/rs/3/1"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"0f5ad10e-e6d0-4d51-a5a5-062a9510126d","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7505/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/waku/2/rs/3/1", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7724/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/waku/2/rs/3/1","version":0,"timestamp":1728965796727583232,"ephemeral":false}]'
[35mDEBUG   [0m tests.filter.test_subscribe_create:test_subscribe_create.py:41 Running test with pubsub topic: /waku/2/rs/2/2
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7505/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/2"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7724/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "e67d13c7-e23f-4828-bb37-2d5d1c756427", "contentFilters": ["/waku/2/rs/2/2"], "pubsubTopic": "/waku/2/rs/2/2"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"e67d13c7-e23f-4828-bb37-2d5d1c756427","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7505/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/waku/2/rs/2/2", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7724/filter/v2/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/waku/2/rs/2/2","version":0,"timestamp":1728965796879343872,"ephemeral":false}]'
[35mDEBUG   [0m tests.filter.test_subscribe_create:test_subscribe_create.py:41 Running test with pubsub topic: /waku/2/rs/3/9
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7505/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/9"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7724/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "0186c4c0-98fe-423c-aa8e-f5a1754bb8ad", "contentFilters": ["/waku/2/rs/3/9"], "pubsubTopic": "/waku/2/rs/3/9"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"0186c4c0-98fe-423c-aa8e-f5a1754bb8ad","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7505/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F9" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/waku/2/rs/3/9", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7724/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F9" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/waku/2/rs/3/9","version":0,"timestamp":1728965797033572096,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 8946b05ed13a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 331f86e6deba
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.