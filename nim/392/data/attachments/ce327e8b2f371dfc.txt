[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_subscribe_with_no_content_topic with id: 2024-10-15_04-16-54__66490987-ade1-414a-a429-a36ae1a610d9
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-15_04-16-54__66490987-ade1-414a-a429-a36ae1a610d9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.44.141
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['9690', '9691', '9692', '9693', '9694']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 9690:9690 -p 9691:9691 -p 9692:9692 -p 9693:9693 -p 9694:9694 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=9692 --rest-port=9690 --tcp-port=9691 --discv5-udp-port=9693 --rest-address=0.0.0.0 --nat=extip:172.18.44.141 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b8414ce95ad3caeb5bcf5cda1b6fb5df36fb5b1510ba6fdfff441fca55e9bbe6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=9694 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.44.141 waku fc4053d40ecf74658728685c9b275607bab569af3d035b3510bdcbd7a9ef0804
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID fc4053d40ecf. Setting up logs at ./log/docker/node1_2024-10-15_04-16-54__66490987-ade1-414a-a429-a36ae1a610d9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 9690
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9690/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9690/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.44.141/tcp/9691/p2p/16Uiu2HAmLXxXZDx8rFk5Mgfyytw6X7jhddCCoproCy446QKeDsj1","/ip4/172.18.44.141/tcp/9692/ws/p2p/16Uiu2HAmLXxXZDx8rFk5Mgfyytw6X7jhddCCoproCy446QKeDsj1"],"enrUri":"enr:-LO4QOZBnrsh38uMqGHsyPyAF2Xd_fEpY2H_H7Q1y_WG08rwT1ORe6gv6K6ogX5a6DSTpnky85xjacXpQ6GBDsydq98BgmlkgnY0gmlwhKwSLI2KbXVsdGlhZGRyc4wACgSsEiyNBiXc3QOCcnOFAAMBAACJc2VjcDI1NmsxoQN1EF5VAockkw9Wdcol3IRPDOksWJm6RHr5NKEW28AKPIN0Y3CCJduDdWRwgiXdhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-10-15_04-16-54__66490987-ade1-414a-a429-a36ae1a610d9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.236.145
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['52847', '52848', '52849', '52850', '52851']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 52847:52847 -p 52848:52848 -p 52849:52849 -p 52850:52850 -p 52851:52851 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=52849 --rest-port=52847 --tcp-port=52848 --discv5-udp-port=52850 --rest-address=0.0.0.0 --nat=extip:172.18.236.145 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0adf5a117d3cec1ccd5dc4f1edddebfac45be25d5c4cff0cbf7fa85bea6bdda8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=52851 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QOZBnrsh38uMqGHsyPyAF2Xd_fEpY2H_H7Q1y_WG08rwT1ORe6gv6K6ogX5a6DSTpnky85xjacXpQ6GBDsydq98BgmlkgnY0gmlwhKwSLI2KbXVsdGlhZGRyc4wACgSsEiyNBiXc3QOCcnOFAAMBAACJc2VjcDI1NmsxoQN1EF5VAockkw9Wdcol3IRPDOksWJm6RHr5NKEW28AKPIN0Y3CCJduDdWRwgiXdhXdha3UyBQ --filternode=/ip4/172.18.44.141/tcp/9691/p2p/16Uiu2HAmLXxXZDx8rFk5Mgfyytw6X7jhddCCoproCy446QKeDsj1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.236.145 waku 031b1a31fc7706ce8261bfa00b42d9379489bc5941b08dd76c03c8135c096d36
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 031b1a31fc77. Setting up logs at ./log/docker/node2_2024-10-15_04-16-54__66490987-ade1-414a-a429-a36ae1a610d9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 52847
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52847/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52847/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.236.145/tcp/52848/p2p/16Uiu2HAmLmtauCutHQW1xEPdJMpTcXVqyNeUuH8YaYUYhW7ebp9m","/ip4/172.18.236.145/tcp/52849/ws/p2p/16Uiu2HAmLmtauCutHQW1xEPdJMpTcXVqyNeUuH8YaYUYhW7ebp9m"],"enrUri":"enr:-LO4QMoe9TDpCKFTbGdZb4mcQq1OwK4J7-xFFa6EJSbGtA2cRGEU-Jdt4eJriB-zTEaDUYeeFamJAtcrRHRqfHf7_XQBgmlkgnY0gmlwhKwS7JGKbXVsdGlhZGRyc4wACgSsEuyRBs5x3QOCcnOFAAMBAACJc2VjcDI1NmsxoQN4ogrNghC4T_H62LOYsA0s_NtBpN0l5O9NssJRA6mUOIN0Y3CCznCDdWRwgs5yhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52847/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.44.141/tcp/9691/p2p/16Uiu2HAmLXxXZDx8rFk5Mgfyytw6X7jhddCCoproCy446QKeDsj1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9690/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52847/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "c23b85ab-cf9a-43e1-b9f3-32e24dd05ea9", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"c23b85ab-cf9a-43e1-b9f3-32e24dd05ea9","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52847/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "pubsubTopic": "/waku/2/rs/3/1"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:52847/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id fc4053d40ecf
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 031b1a31fc77
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.