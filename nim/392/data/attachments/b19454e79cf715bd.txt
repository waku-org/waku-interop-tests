[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_full__peer_full with id: 2024-10-15_04-20-55__5b140c95-9886-4aca-a0a5-4f2bd702d002
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-10-15_04-20-55__5b140c95-9886-4aca-a0a5-4f2bd702d002__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.142.32
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['41254', '41255', '41256', '41257', '41258']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 41254:41254 -p 41255:41255 -p 41256:41256 -p 41257:41257 -p 41258:41258 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=41256 --rest-port=41254 --tcp-port=41255 --discv5-udp-port=41257 --rest-address=0.0.0.0 --nat=extip:172.18.142.32 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=14fc6a7ef9fb5e8bded1fa3a4fae3e1c7f96fd3e67cfd9b0fd0e6bd17c3ea0b7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=41258 --metrics-logging=true --lightpush=true --relay=true --filter=true
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.103.213
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['14484', '14485', '14486', '14487', '14488']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 14484:14484 -p 14485:14485 -p 14486:14486 -p 14487:14487 -p 14488:14488 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14486 --rest-port=14484 --tcp-port=14485 --discv5-udp-port=14487 --rest-address=0.0.0.0 --nat=extip:172.18.103.213 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6aa1ee3af897e9561d3a3dcc995bee901b3d32f6ef2a8a0c6c4e2ebbbfc1e087 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14488 --metrics-logging=true --lightpush=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.103.213 waku 682dbe6f7bc27144fc1e4ceba24f9be4100b2ec6bb00b105b1771d98f4dd9354
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 682dbe6f7bc2. Setting up logs at ./log/docker/receiving_node1_2024-10-15_04-20-55__5b140c95-9886-4aca-a0a5-4f2bd702d002__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 14484
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14484/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14484/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.103.213/tcp/14485/p2p/16Uiu2HAkxS3WKMvhrF6MoNyF4gXHs8cbDMXrd5XR7bNNCjCPWtWE","/ip4/172.18.103.213/tcp/14486/ws/p2p/16Uiu2HAkxS3WKMvhrF6MoNyF4gXHs8cbDMXrd5XR7bNNCjCPWtWE"],"enrUri":"enr:-LO4QBh6WpdYZGrq334Lfx1J8CnsA-W1wlDV5-c13aSOvqEbeFe8k4k7J7-6zyr9SAbWw1VkHpDYIg-kzMhwo-6rItkBgmlkgnY0gmlwhKwSZ9WKbXVsdGlhZGRyc4wACgSsEmfVBjiW3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIsq2aOpd2FeFAhDdxRgSSqjseQRU8g1Qj-aJ5ex6Lxk4N0Y3CCOJWDdWRwgjiXhXdha3UyDQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-10-15_04-20-55__5b140c95-9886-4aca-a0a5-4f2bd702d002__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.146.142
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['31865', '31866', '31867', '31868', '31869']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 31865:31865 -p 31866:31866 -p 31867:31867 -p 31868:31868 -p 31869:31869 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=31867 --rest-port=31865 --tcp-port=31866 --discv5-udp-port=31868 --rest-address=0.0.0.0 --nat=extip:172.18.146.142 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=71aa77a6d010595ddbbe8eaefaecbee8f9ebc4efff97cc5fda1c90eb6db56da3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=31869 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QBh6WpdYZGrq334Lfx1J8CnsA-W1wlDV5-c13aSOvqEbeFe8k4k7J7-6zyr9SAbWw1VkHpDYIg-kzMhwo-6rItkBgmlkgnY0gmlwhKwSZ9WKbXVsdGlhZGRyc4wACgSsEmfVBjiW3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIsq2aOpd2FeFAhDdxRgSSqjseQRU8g1Qj-aJ5ex6Lxk4N0Y3CCOJWDdWRwgjiXhXdha3UyDQ --lightpushnode=/ip4/172.18.103.213/tcp/14485/p2p/16Uiu2HAkxS3WKMvhrF6MoNyF4gXHs8cbDMXrd5XR7bNNCjCPWtWE --lightpush=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.146.142 waku acc5cd069b44f66a85af5e8f006b912b8626654053c0692fc6c6efbdc8177b70
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID acc5cd069b44. Setting up logs at ./log/docker/lightpush_node1_2024-10-15_04-20-55__5b140c95-9886-4aca-a0a5-4f2bd702d002__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 31865
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31865/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31865/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.146.142/tcp/31866/p2p/16Uiu2HAm3xuSX8qfR5tkMzzvnzSz5hqRP3XiAsZxoieiAsDjZu9J","/ip4/172.18.146.142/tcp/31867/ws/p2p/16Uiu2HAm3xuSX8qfR5tkMzzvnzSz5hqRP3XiAsZxoieiAsDjZu9J"],"enrUri":"enr:-LO4QGMX6Q-pp5aHPdZHG3kY2JwOzKZQmeu2kx0p5frnjYOOYmDnhj8kxbui-xwTEVfmkEccHmq2lASfYXQJZNquFdEBgmlkgnY0gmlwhKwSko6KbXVsdGlhZGRyc4wACgSsEpKOBnx73QOCcnOFAAMBAACJc2VjcDI1NmsxoQJ-3bh-P82NudylLfrf2mVsu8g_a2t5_OtxZ_64ni6gUYN0Y3CCfHqDdWRwgnx8hXdha3UyDQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31865/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.103.213/tcp/14485/p2p/16Uiu2HAkxS3WKMvhrF6MoNyF4gXHs8cbDMXrd5XR7bNNCjCPWtWE"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14484/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31865/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.5 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31865/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1728966068521137920}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14484/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1728966068521137920,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31865/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1728966068521137920,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 682dbe6f7bc2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id acc5cd069b44
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.