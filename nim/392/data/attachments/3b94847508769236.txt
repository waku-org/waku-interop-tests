[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_valid_version with id: 2024-10-15_04-19-52__3c877cd6-1430-4053-be05-3e828200836a
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-10-15_04-19-52__3c877cd6-1430-4053-be05-3e828200836a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.230.226
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['34325', '34326', '34327', '34328', '34329']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 34325:34325 -p 34326:34326 -p 34327:34327 -p 34328:34328 -p 34329:34329 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34327 --rest-port=34325 --tcp-port=34326 --discv5-udp-port=34328 --rest-address=0.0.0.0 --nat=extip:172.18.230.226 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fabee67bd5c99a44ad16c4ae42ab6ea7a0706c94b9a229876a26a197ced992ad --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34329 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.230.226 waku f0982163552b4742cbb65bbcd2d0a63b54ba1c81e5f0b9750c75886aa8e750be
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID f0982163552b. Setting up logs at ./log/docker/receiving_node1_2024-10-15_04-19-52__3c877cd6-1430-4053-be05-3e828200836a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 34325
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34325/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34325/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.230.226/tcp/34326/p2p/16Uiu2HAmN8gMfGFdPLpkocythAwqb69mpTa5mhEsZXHnLBUzLMPo","/ip4/172.18.230.226/tcp/34327/ws/p2p/16Uiu2HAmN8gMfGFdPLpkocythAwqb69mpTa5mhEsZXHnLBUzLMPo"],"enrUri":"enr:-LO4QIKD1SBc7u1U8o6RBmJM30divx_rB3Cg4X9TEef2icR0eag7aFo9dKI7IWtmsibO250kpnBmm0LzFUY3nPJ19wwBgmlkgnY0gmlwhKwS5uKKbXVsdGlhZGRyc4wACgSsEubiBoYX3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOM0Rl8PydKKX3eqXimVM9Ln7bTrE9t7k6UKI4KiC1YYoN0Y3CChhaDdWRwgoYYhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-10-15_04-19-52__3c877cd6-1430-4053-be05-3e828200836a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.99.69
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['63945', '63946', '63947', '63948', '63949']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 63945:63945 -p 63946:63946 -p 63947:63947 -p 63948:63948 -p 63949:63949 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63947 --rest-port=63945 --tcp-port=63946 --discv5-udp-port=63948 --rest-address=0.0.0.0 --nat=extip:172.18.99.69 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=70f247e146effbae45a36f46be68dcbd0bca5d12ccebeaaf0e2d9ae236c500dd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63949 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.99.69 waku 453b815fc73180b2c8f0b2eb262c51cf2c9cebc55d8ee1f9aa516866e8fec4dd
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 453b815fc731. Setting up logs at ./log/docker/receiving_node2_2024-10-15_04-19-52__3c877cd6-1430-4053-be05-3e828200836a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 63945
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63945/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63945/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.99.69/tcp/63946/p2p/16Uiu2HAmUbFKxQuHGqk1o2WysxCAC47AvTR54b1HZyQUjTdoGMPw","/ip4/172.18.99.69/tcp/63947/ws/p2p/16Uiu2HAmUbFKxQuHGqk1o2WysxCAC47AvTR54b1HZyQUjTdoGMPw"],"enrUri":"enr:-LO4QDU-3Dfp6lylbd9ZXrqXCE6bLHHu00gL58efJFPGHHBWVUl3Tp3v3RUEUCuV3_M2wAeE1wMNVuTqqMoAlOEZNjwBgmlkgnY0gmlwhKwSY0WKbXVsdGlhZGRyc4wACgSsEmNFBvnL3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPsxZol0EXOBYmxbShsP2Mqtv6IcdLJbqBy6mdwDMQEOoN0Y3CC-cqDdWRwgvnMhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63945/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.230.226/tcp/34326/p2p/16Uiu2HAmN8gMfGFdPLpkocythAwqb69mpTa5mhEsZXHnLBUzLMPo"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-10-15_04-19-52__3c877cd6-1430-4053-be05-3e828200836a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.42.222
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['56639', '56640', '56641', '56642', '56643']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 56639:56639 -p 56640:56640 -p 56641:56641 -p 56642:56642 -p 56643:56643 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56641 --rest-port=56639 --tcp-port=56640 --discv5-udp-port=56642 --rest-address=0.0.0.0 --nat=extip:172.18.42.222 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=beb1ef4f7d91adafae9ca90daeec1ffa29a951fc2adaa1df02f8b1ccce97f8dc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56643 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QIKD1SBc7u1U8o6RBmJM30divx_rB3Cg4X9TEef2icR0eag7aFo9dKI7IWtmsibO250kpnBmm0LzFUY3nPJ19wwBgmlkgnY0gmlwhKwS5uKKbXVsdGlhZGRyc4wACgSsEubiBoYX3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOM0Rl8PydKKX3eqXimVM9Ln7bTrE9t7k6UKI4KiC1YYoN0Y3CChhaDdWRwgoYYhXdha3UyCQ --lightpushnode=/ip4/172.18.230.226/tcp/34326/p2p/16Uiu2HAmN8gMfGFdPLpkocythAwqb69mpTa5mhEsZXHnLBUzLMPo --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.42.222 waku 935922e6d1b6d7dcb3ba5b560d5540318145ab62135396f2b2c13794cdfeb65a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 935922e6d1b6. Setting up logs at ./log/docker/lightpush_node1_2024-10-15_04-19-52__3c877cd6-1430-4053-be05-3e828200836a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 56639
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56639/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56639/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.42.222/tcp/56640/p2p/16Uiu2HAmDWx85j6TUtXQ1TyaYQN1m4U3UEpQ6JGAp1baus25m1eC","/ip4/172.18.42.222/tcp/56641/ws/p2p/16Uiu2HAmDWx85j6TUtXQ1TyaYQN1m4U3UEpQ6JGAp1baus25m1eC"],"enrUri":"enr:-LO4QPyI90en9u04qfZ4h9HpNao_-AxmpoddQ4Xbcxz3afGpC4i-6Ji41VHsYAOpUGbV0-z-eOwHrFZ1cE36kT2adxcBgmlkgnY0gmlwhKwSKt6KbXVsdGlhZGRyc4wACgSsEireBt1B3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMMzIWFXOkvbEk_4xqP1QkgCNN_eewu7y6Y3fNv7PoIrYN0Y3CC3UCDdWRwgt1ChXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56639/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.230.226/tcp/34326/p2p/16Uiu2HAmN8gMfGFdPLpkocythAwqb69mpTa5mhEsZXHnLBUzLMPo"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56639/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.99.69/tcp/63946/p2p/16Uiu2HAmUbFKxQuHGqk1o2WysxCAC47AvTR54b1HZyQUjTdoGMPw"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34325/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63945/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56639/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1728965996944847872, "version": 10}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34325/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":10,"timestamp":1728965996944847872,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63945/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":10,"timestamp":1728965996944847872,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id f0982163552b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 453b815fc731
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 935922e6d1b6
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.