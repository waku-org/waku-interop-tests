[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_retrieve_messages_without_subscribing_via_api with id: 2024-10-15_04-24-44__a9148a92-b18c-4dd4-a25f-b65d6d21a3a0
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-15_04-24-44__a9148a92-b18c-4dd4-a25f-b65d6d21a3a0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.191.154
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['12028', '12029', '12030', '12031', '12032']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 12028:12028 -p 12029:12029 -p 12030:12030 -p 12031:12031 -p 12032:12032 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=12030 --rest-port=12028 --tcp-port=12029 --discv5-udp-port=12031 --rest-address=0.0.0.0 --nat=extip:172.18.191.154 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=36e899ea80320b1c97ccf0e7fefe2e3ab5b0f26d7e7fb8e0a43ae7fba17be1dc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=12032 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.191.154 waku c7b3de99b976c6f07859cb0778f78af5ae92a8aeb4ca31da0947a5ffb80ce196
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID c7b3de99b976. Setting up logs at ./log/docker/node1_2024-10-15_04-24-44__a9148a92-b18c-4dd4-a25f-b65d6d21a3a0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 12028
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12028/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12028/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.191.154/tcp/12029/p2p/16Uiu2HAmA7QH4RC1kAjgxzrLCLYsdzvDSv1kse5kpSWYLEeZsPBY","/ip4/172.18.191.154/tcp/12030/ws/p2p/16Uiu2HAmA7QH4RC1kAjgxzrLCLYsdzvDSv1kse5kpSWYLEeZsPBY"],"enrUri":"enr:-LO4QNTCfEyDUU8FibxYEKEQQCYBFPDOsFRnCpvEpZjj5VzsI0y3Ekw-exoKjROcZ3kKZJehvcYdsiTO0WrZbsN4SW4BgmlkgnY0gmlwhKwSv5qKbXVsdGlhZGRyc4wACgSsEr-aBi7-3QOCcnOFAAIBAACJc2VjcDI1NmsxoQLaMRg8w-P3ahv7queXN0XgP4dhllpVgijMhF2GGj8XK4N0Y3CCLv2DdWRwgi7_hXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-10-15_04-24-44__a9148a92-b18c-4dd4-a25f-b65d6d21a3a0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.112.56
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['5625', '5626', '5627', '5628', '5629']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 5625:5625 -p 5626:5626 -p 5627:5627 -p 5628:5628 -p 5629:5629 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=5627 --rest-port=5625 --tcp-port=5626 --discv5-udp-port=5628 --rest-address=0.0.0.0 --nat=extip:172.18.112.56 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=d1dc13642d13aab32af05ba94f96d43aff958ed933979ff687f73de7ac5fa62b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=5629 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QNTCfEyDUU8FibxYEKEQQCYBFPDOsFRnCpvEpZjj5VzsI0y3Ekw-exoKjROcZ3kKZJehvcYdsiTO0WrZbsN4SW4BgmlkgnY0gmlwhKwSv5qKbXVsdGlhZGRyc4wACgSsEr-aBi7-3QOCcnOFAAIBAACJc2VjcDI1NmsxoQLaMRg8w-P3ahv7queXN0XgP4dhllpVgijMhF2GGj8XK4N0Y3CCLv2DdWRwgi7_hXdha3UyBQ --content-topic=/myapp/1/latest/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.112.56 waku a48804947baf03e1ac2f976866a4e204fe589a4fb71d4fd0cc7da9f0d41b5432
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID a48804947baf. Setting up logs at ./log/docker/node2_2024-10-15_04-24-44__a9148a92-b18c-4dd4-a25f-b65d6d21a3a0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 5625
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5625/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5625/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.112.56/tcp/5626/p2p/16Uiu2HAmPmfbGGD9ty6GCtQAvgB84QnP3HKTHGbgUYN5CYtHGfG3","/ip4/172.18.112.56/tcp/5627/ws/p2p/16Uiu2HAmPmfbGGD9ty6GCtQAvgB84QnP3HKTHGbgUYN5CYtHGfG3"],"enrUri":"enr:-LO4QONaIIOXuTQLqJUnnOzYK-BQENJMjmhOwGiCwmmr4oESRpEg9XFC2nDbVsWLCU_Ea6D9IpIU2msVsqBHc_5VLCYBgmlkgnY0gmlwhKwScDiKbXVsdGlhZGRyc4wACgSsEnA4BhX73QOCcnOFAAIBAACJc2VjcDI1NmsxoQOlJmkxRgmarPPwbt6SGKiUR2U24hUrGX6fgzM-5egeOIN0Y3CCFfqDdWRwghX8hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5625/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.191.154/tcp/12029/p2p/16Uiu2HAmA7QH4RC1kAjgxzrLCLYsdzvDSv1kse5kpSWYLEeZsPBY"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12028/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12028/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1728966289082171392,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5625/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1728966289082171392,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id c7b3de99b976
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id a48804947baf
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.