[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_sender_uses_auto_api_receiver_uses_regular_api with id: 2024-10-15_04-27-17__c68d6866-ad08-49c1-b54c-ec3d893c757d
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-15_04-27-17__c68d6866-ad08-49c1-b54c-ec3d893c757d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.210.22
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['29946', '29947', '29948', '29949', '29950']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 29946:29946 -p 29947:29947 -p 29948:29948 -p 29949:29949 -p 29950:29950 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29948 --rest-port=29946 --tcp-port=29947 --discv5-udp-port=29949 --rest-address=0.0.0.0 --nat=extip:172.18.210.22 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=5cebd0ad3aebe8783dd1c58cbb4ec77696efbcd34428901d05c70eda3acbcccf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29950 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/2/0 --num-shards-in-network=1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.210.22 waku a5e6e1a85519f26ca9254f2876650b63e184b333182e9ace26b330bddf0ea92e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID a5e6e1a85519. Setting up logs at ./log/docker/node1_2024-10-15_04-27-17__c68d6866-ad08-49c1-b54c-ec3d893c757d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 29946
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29946/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29946/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.210.22/tcp/29947/p2p/16Uiu2HAmQpc1AWyse3QhDGFdnNvDjHHhwbtZYVGtz8bat26ogT3E","/ip4/172.18.210.22/tcp/29948/ws/p2p/16Uiu2HAmQpc1AWyse3QhDGFdnNvDjHHhwbtZYVGtz8bat26ogT3E"],"enrUri":"enr:-LO4QMyKsg2sKmwnI7aEVYIkqNwGy4uKLW8j12xvaT43fuPBRcgWnnGj0MDhLcH9ec8ufIcAYBbNwDsoRYqmWlzm8mEBgmlkgnY0gmlwhKwS0haKbXVsdGlhZGRyc4wACgSsEtIWBnT83QOCcnOFAAIBAACJc2VjcDI1NmsxoQO0wsiMegwmC2-jo1gJwqesfxNgoEnHkAehX7UDdFweAYN0Y3CCdPuDdWRwgnT9hXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-10-15_04-27-17__c68d6866-ad08-49c1-b54c-ec3d893c757d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.79.195
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['39417', '39418', '39419', '39420', '39421']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 39417:39417 -p 39418:39418 -p 39419:39419 -p 39420:39420 -p 39421:39421 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39419 --rest-port=39417 --tcp-port=39418 --discv5-udp-port=39420 --rest-address=0.0.0.0 --nat=extip:172.18.79.195 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=c8e1fa24eab9cb0a1f5ccffe4eac97e0ffd85bcabbbfca3e3fbb3dbe296bde44 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39421 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QMyKsg2sKmwnI7aEVYIkqNwGy4uKLW8j12xvaT43fuPBRcgWnnGj0MDhLcH9ec8ufIcAYBbNwDsoRYqmWlzm8mEBgmlkgnY0gmlwhKwS0haKbXVsdGlhZGRyc4wACgSsEtIWBnT83QOCcnOFAAIBAACJc2VjcDI1NmsxoQO0wsiMegwmC2-jo1gJwqesfxNgoEnHkAehX7UDdFweAYN0Y3CCdPuDdWRwgnT9hXdha3UyBQ --pubsub-topic=/waku/2/rs/2/0 --num-shards-in-network=1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.79.195 waku e9182eebdbb5de53c9aefa81f79e94e10f802f36a04654289b9a07732fc9a57f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID e9182eebdbb5. Setting up logs at ./log/docker/node2_2024-10-15_04-27-17__c68d6866-ad08-49c1-b54c-ec3d893c757d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 39417
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39417/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39417/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.79.195/tcp/39418/p2p/16Uiu2HAkxviLnTrC8a66PALnrM24Qjcvjzo2U1La71Jfzm8Xv2xX","/ip4/172.18.79.195/tcp/39419/ws/p2p/16Uiu2HAkxviLnTrC8a66PALnrM24Qjcvjzo2U1La71Jfzm8Xv2xX"],"enrUri":"enr:-LO4QIXZY1Fxwu-Bo4cH8rOJIi4IFIvjZT28tnRa6qeS9AvmKm8bs_5OxPVkye8DteQOIOeAsOAj_LvGKJPgT7vBEGcBgmlkgnY0gmlwhKwST8OKbXVsdGlhZGRyc4wACgSsEk_DBpn73QOCcnOFAAIBAACJc2VjcDI1NmsxoQI0A5MqpPEk9XjUTSJEe77begSt8vzbb0BRXMuw_giMwIN0Y3CCmfqDdWRwgpn8hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39417/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.210.22/tcp/29947/p2p/16Uiu2HAmQpc1AWyse3QhDGFdnNvDjHHhwbtZYVGtz8bat26ogT3E"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29946/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39417/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29946/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39417/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1728966440377670656,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id a5e6e1a85519
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id e9182eebdbb5
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.