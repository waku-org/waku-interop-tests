2025-02-07 04:03:17.451 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-07 04:03:17.451 DEBUG [tests.conftest] Running test: test_light_push_with_missing_payload with id: 2025-02-07_04-03-17__744e4b07-b486-4b92-91df-6a399c8605ee
2025-02-07 04:03:17.452 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-07 04:03:17.452 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-07 04:03:17.459 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:03:17.459 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-07_04-03-17__744e4b07-b486-4b92-91df-6a399c8605ee__wakuorg_nwaku:latest.log
2025-02-07 04:03:17.459 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:03:17.459 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:03:17.460 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:03:17.461 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.95.52
2025-02-07 04:03:17.461 DEBUG [src.node.docker_mananger] Generated ports ['63632', '63633', '63634', '63635', '63636']
2025-02-07 04:03:17.461 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:03:17.461 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:03:17.461 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:03:17.461 DEBUG [src.node.docker_mananger] docker run -i -t -p 63632:63632 -p 63633:63633 -p 63634:63634 -p 63635:63635 -p 63636:63636 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63634 --rest-port=63632 --tcp-port=63633 --discv5-udp-port=63635 --rest-address=0.0.0.0 --nat=extip:172.18.95.52 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fc1fcf7d06ea7f1a8fa68ba332bd5697ffe6ef772d7d8dda4cdebecd851b00f3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63636 --metrics-logging=true --lightpush=true --relay=true
2025-02-07 04:03:17.711 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.95.52 waku 036ea80193342bfee45f5e2e4b77e611d4e154b59f939fc8d846a8835ffa4c16
2025-02-07 04:03:17.769 DEBUG [src.node.docker_mananger] Container started with ID 036ea8019334. Setting up logs at ./log/docker/receiving_node1_2025-02-07_04-03-17__744e4b07-b486-4b92-91df-6a399c8605ee__wakuorg_nwaku:latest.log
2025-02-07 04:03:17.769 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 63632
2025-02-07 04:03:17.770 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:03:18.248 ERROR [src.node.docker_mananger] Max retries reached for container 825d7afa2c8c. Exiting log stream.
2025-02-07 04:03:18.770 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63632/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:03:18.774 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:03:18.774 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:03:18.774 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63632/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:03:18.777 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.95.52/tcp/63633/p2p/16Uiu2HAmHaQecoy69exDKDUrxVATnnJW7VxWJ6xnL6Kyk3ryWYBS","/ip4/172.18.95.52/tcp/63634/ws/p2p/16Uiu2HAmHaQecoy69exDKDUrxVATnnJW7VxWJ6xnL6Kyk3ryWYBS"],"enrUri":"enr:-L24QPoTYoU_VC6ieoVKdbgBsB9rqvazq1vyVdpyu4fI4EZ3ek5v2qv_Y9F28t1mhmkfX-hwdptYFeLYgBN2XsQpoHkCgmlkgnY0gmlwhKwSXzSKbXVsdGlhZGRyc5YACASsEl80BviRAAoErBJfNAb4kt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDSR4BWoAknMF9OBk8uNe46AIV-9HJn8aeCVqxVNOp52GDdGNwgviRg3VkcIL4k4V3YWt1Mgk"}'
2025-02-07 04:03:18.777 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:03:18.784 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:03:18.784 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-07_04-03-17__744e4b07-b486-4b92-91df-6a399c8605ee__wakuorg_nwaku:latest.log
2025-02-07 04:03:18.784 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:03:18.784 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:03:18.786 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:03:18.786 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.20.65
2025-02-07 04:03:18.786 DEBUG [src.node.docker_mananger] Generated ports ['20239', '20240', '20241', '20242', '20243']
2025-02-07 04:03:18.786 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:03:18.786 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:03:18.786 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:03:18.787 DEBUG [src.node.docker_mananger] docker run -i -t -p 20239:20239 -p 20240:20240 -p 20241:20241 -p 20242:20242 -p 20243:20243 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20241 --rest-port=20239 --tcp-port=20240 --discv5-udp-port=20242 --rest-address=0.0.0.0 --nat=extip:172.18.20.65 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e334bb4cbcefb7853cbbdf24afeef5e9ecbcfebbea90e85f9a7cc217dde8dcbd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20243 --metrics-logging=true --lightpush=false --relay=true
2025-02-07 04:03:19.021 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.20.65 waku a01e0d7b36c69b7cfdb1d2f5b8b13dac6c4a42a712077c9629a926a019ad35e2
2025-02-07 04:03:19.066 DEBUG [src.node.docker_mananger] Container started with ID a01e0d7b36c6. Setting up logs at ./log/docker/receiving_node2_2025-02-07_04-03-17__744e4b07-b486-4b92-91df-6a399c8605ee__wakuorg_nwaku:latest.log
2025-02-07 04:03:19.067 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 20239
2025-02-07 04:03:19.067 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:03:20.068 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20239/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:03:20.072 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:03:20.072 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:03:20.072 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20239/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:03:20.075 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.20.65/tcp/20240/p2p/16Uiu2HAmPGAa66UpkKzz6Fn6CVJm17TS78cozxBBcQammdevP7e8","/ip4/172.18.20.65/tcp/20241/ws/p2p/16Uiu2HAmPGAa66UpkKzz6Fn6CVJm17TS78cozxBBcQammdevP7e8"],"enrUri":"enr:-L24QCIhqkaCoQz6FB1Tf2_f8UUzou-vjcxfjXDkrkVDiubSViPv6irkWmjilF5OpBxK6lwY606QZ1bvL-xeJ1SdZzsCgmlkgnY0gmlwhKwSFEGKbXVsdGlhZGRyc5YACASsEhRBBk8QAAoErBIUQQZPEd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDnZfBDocj_aBvFL5OjVswCRPrrh3e8H2TCvlNS_Zh1CGDdGNwgk8Qg3VkcIJPEoV3YWt1MgE"}'
2025-02-07 04:03:20.075 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:03:20.075 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20239/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.95.52/tcp/63633/p2p/16Uiu2HAmHaQecoy69exDKDUrxVATnnJW7VxWJ6xnL6Kyk3ryWYBS"]'
2025-02-07 04:03:20.124 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:03:20.133 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:03:20.133 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-07_04-03-17__744e4b07-b486-4b92-91df-6a399c8605ee__wakuorg_nwaku:latest.log
2025-02-07 04:03:20.133 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:03:20.134 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:03:20.135 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:03:20.135 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.19.200
2025-02-07 04:03:20.135 DEBUG [src.node.docker_mananger] Generated ports ['42211', '42212', '42213', '42214', '42215']
2025-02-07 04:03:20.136 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:03:20.136 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:03:20.136 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:03:20.136 DEBUG [src.node.docker_mananger] docker run -i -t -p 42211:42211 -p 42212:42212 -p 42213:42213 -p 42214:42214 -p 42215:42215 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42213 --rest-port=42211 --tcp-port=42212 --discv5-udp-port=42214 --rest-address=0.0.0.0 --nat=extip:172.18.19.200 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bfc881c34e5b680cbfc3bed92e37d6e8fbbcdfc7b530278f52df1fb15bbf5cf6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42215 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QPoTYoU_VC6ieoVKdbgBsB9rqvazq1vyVdpyu4fI4EZ3ek5v2qv_Y9F28t1mhmkfX-hwdptYFeLYgBN2XsQpoHkCgmlkgnY0gmlwhKwSXzSKbXVsdGlhZGRyc5YACASsEl80BviRAAoErBJfNAb4kt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDSR4BWoAknMF9OBk8uNe46AIV-9HJn8aeCVqxVNOp52GDdGNwgviRg3VkcIL4k4V3YWt1Mgk --lightpushnode=/ip4/172.18.95.52/tcp/63633/p2p/16Uiu2HAmHaQecoy69exDKDUrxVATnnJW7VxWJ6xnL6Kyk3ryWYBS --lightpush=true --relay=false
2025-02-07 04:03:20.383 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.19.200 waku a5b4470ecf0287b26dfec621590fc79446f78a527ef7d9ae0e2ffad4e9c3d4fa
2025-02-07 04:03:20.436 DEBUG [src.node.docker_mananger] Container started with ID a5b4470ecf02. Setting up logs at ./log/docker/lightpush_node1_2025-02-07_04-03-17__744e4b07-b486-4b92-91df-6a399c8605ee__wakuorg_nwaku:latest.log
2025-02-07 04:03:20.436 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 42211
2025-02-07 04:03:20.436 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:03:21.437 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42211/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:03:21.441 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:03:21.441 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:03:21.441 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42211/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:03:21.443 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.19.200/tcp/42212/p2p/16Uiu2HAmNmbaFCp4qbVCtUxtCZC5EbaoMzvHjwqKNN3x9Uu7isbE","/ip4/172.18.19.200/tcp/42213/ws/p2p/16Uiu2HAmNmbaFCp4qbVCtUxtCZC5EbaoMzvHjwqKNN3x9Uu7isbE"],"enrUri":"enr:-L24QFrgVKCJi8hv77EWqwFyovfhZpb9NxDr9mMq0WTHz0n9NjHwMiG54CsAcfWq-JmHtZLRnSBEyVp_8xyZV1PAV2wCgmlkgnY0gmlwhKwSE8iKbXVsdGlhZGRyc5YACASsEhPIBqTkAAoErBITyAak5d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDlkYuasRRbaXy-Ce6D7dJWTHvJOmaVS46RxrdNvCo39GDdGNwgqTkg3VkcIKk5oV3YWt1Mgg"}'
2025-02-07 04:03:21.443 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:03:21.444 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42211/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.95.52/tcp/63633/p2p/16Uiu2HAmHaQecoy69exDKDUrxVATnnJW7VxWJ6xnL6Kyk3ryWYBS"]'
2025-02-07 04:03:21.483 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:03:21.486 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42211/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.20.65/tcp/20240/p2p/16Uiu2HAmPGAa66UpkKzz6Fn6CVJm17TS78cozxBBcQammdevP7e8"]'
2025-02-07 04:03:21.511 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:03:21.516 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63632/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-07 04:03:21.523 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:03:21.525 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20239/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-07 04:03:21.528 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:03:21.531 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42211/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"contentTopic": "/myapp/1/latest/proto", "timestamp": 1738901001531206656}}'
2025-02-07 04:03:21.535 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:42211/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
2025-02-07 04:03:21.536 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-07 04:03:21.537 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-07 04:03:21.538 DEBUG [src.node.waku_node] Stopping container with id 036ea8019334
2025-02-07 04:03:22.309 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:03:22.309 DEBUG [src.node.waku_node] Stopping container with id a01e0d7b36c6
2025-02-07 04:03:23.123 ERROR [src.node.docker_mananger] Max retries reached for container 036ea8019334. Exiting log stream.
2025-02-07 04:03:23.829 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:03:23.830 DEBUG [src.node.waku_node] Stopping container with id a5b4470ecf02
2025-02-07 04:03:24.644 ERROR [src.node.docker_mananger] Max retries reached for container a01e0d7b36c6. Exiting log stream.
2025-02-07 04:03:25.273 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:03:25.276 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-07 04:03:25.283 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-07 04:03:25.290 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-07 04:03:25.297 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
