2025-02-07 04:08:56.533 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-07 04:08:56.534 DEBUG [tests.conftest] Running test: test_passing_non_base64_cursor with id: 2025-02-07_04-08-56__2cea834e-de03-46bb-9aa8-e9e707415b4b
2025-02-07 04:08:56.534 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-07 04:08:56.534 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-07 04:08:56.534 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-07 04:08:56.541 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:08:56.541 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-07_04-08-56__2cea834e-de03-46bb-9aa8-e9e707415b4b__wakuorg_nwaku:latest.log
2025-02-07 04:08:56.541 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:08:56.541 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:08:56.542 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:08:56.542 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.107.182
2025-02-07 04:08:56.543 DEBUG [src.node.docker_mananger] Generated ports ['32142', '32143', '32144', '32145', '32146']
2025-02-07 04:08:56.543 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:08:56.543 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:08:56.543 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:08:56.543 DEBUG [src.node.docker_mananger] docker run -i -t -p 32142:32142 -p 32143:32143 -p 32144:32144 -p 32145:32145 -p 32146:32146 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32144 --rest-port=32142 --tcp-port=32143 --discv5-udp-port=32145 --rest-address=0.0.0.0 --nat=extip:172.18.107.182 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bdcd30d2ae4e3fedbabe30afb1dcaa3d43df999d28ef4b5bbd40f9fd3fd67076 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32146 --metrics-logging=true --store=true --relay=true
2025-02-07 04:08:56.768 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.107.182 waku 31588c403adb0dadf1fc50c1fb044dc9126c8872d7b15c6cd48ec252462f1756
2025-02-07 04:08:56.822 DEBUG [src.node.docker_mananger] Container started with ID 31588c403adb. Setting up logs at ./log/docker/publishing_node1_2025-02-07_04-08-56__2cea834e-de03-46bb-9aa8-e9e707415b4b__wakuorg_nwaku:latest.log
2025-02-07 04:08:56.823 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 32142
2025-02-07 04:08:56.824 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:08:57.339 ERROR [src.node.docker_mananger] Max retries reached for container 39c569e0f842. Exiting log stream.
2025-02-07 04:08:57.825 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32142/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:08:57.828 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:08:57.828 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:08:57.828 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32142/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:08:57.830 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.107.182/tcp/32143/p2p/16Uiu2HAmD8nUWsM3rzAfGVjnLRqwSpfdPp9fnSZ7ucLmrZoTLQBC","/ip4/172.18.107.182/tcp/32144/ws/p2p/16Uiu2HAmD8nUWsM3rzAfGVjnLRqwSpfdPp9fnSZ7ucLmrZoTLQBC"],"enrUri":"enr:-L24QLjB-sZ80MqAQP03cNkb6P0l79yjeypLiDFCUYfWfUQaCpWt8SWFpmGwsANBO2M1P9vvohHtEHV5duuVbJazJmsCgmlkgnY0gmlwhKwSa7aKbXVsdGlhZGRyc5YACASsEmu2Bn2PAAoErBJrtgZ9kN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDBx7Vx75O2xMctBI9NfEBGowHZyd9vBUyZcHkk6h1yGODdGNwgn2Pg3VkcIJ9kYV3YWt1MgM"}'
2025-02-07 04:08:57.831 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:08:57.837 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:08:57.837 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-07_04-08-56__2cea834e-de03-46bb-9aa8-e9e707415b4b__wakuorg_nwaku:latest.log
2025-02-07 04:08:57.837 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:08:57.837 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:08:57.838 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:08:57.838 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.9.136
2025-02-07 04:08:57.839 DEBUG [src.node.docker_mananger] Generated ports ['7316', '7317', '7318', '7319', '7320']
2025-02-07 04:08:57.839 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:08:57.839 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:08:57.839 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:08:57.839 DEBUG [src.node.docker_mananger] docker run -i -t -p 7316:7316 -p 7317:7317 -p 7318:7318 -p 7319:7319 -p 7320:7320 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7318 --rest-port=7316 --tcp-port=7317 --discv5-udp-port=7319 --rest-address=0.0.0.0 --nat=extip:172.18.9.136 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=368bcf703f37aed91e73c2f4cbed5dadcee6e184eefff922ff8e26e824ee1b0c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7320 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QLjB-sZ80MqAQP03cNkb6P0l79yjeypLiDFCUYfWfUQaCpWt8SWFpmGwsANBO2M1P9vvohHtEHV5duuVbJazJmsCgmlkgnY0gmlwhKwSa7aKbXVsdGlhZGRyc5YACASsEmu2Bn2PAAoErBJrtgZ9kN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDBx7Vx75O2xMctBI9NfEBGowHZyd9vBUyZcHkk6h1yGODdGNwgn2Pg3VkcIJ9kYV3YWt1MgM --storenode=/ip4/172.18.107.182/tcp/32143/p2p/16Uiu2HAmD8nUWsM3rzAfGVjnLRqwSpfdPp9fnSZ7ucLmrZoTLQBC --store=true --relay=true
2025-02-07 04:08:58.060 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.9.136 waku bcbbd81db4c17a95fe38ba8c1e15c92de43c767ae913b64d66981c77687ccdd7
2025-02-07 04:08:58.110 DEBUG [src.node.docker_mananger] Container started with ID bcbbd81db4c1. Setting up logs at ./log/docker/store_node1_2025-02-07_04-08-56__2cea834e-de03-46bb-9aa8-e9e707415b4b__wakuorg_nwaku:latest.log
2025-02-07 04:08:58.111 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 7316
2025-02-07 04:08:58.111 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:08:59.111 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7316/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:08:59.114 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:08:59.114 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:08:59.114 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7316/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:08:59.116 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.9.136/tcp/7317/p2p/16Uiu2HAmCWqmhBp6CEgVdBpKKJDL38TedoVpaEvXcHDHQbJRF5Xe","/ip4/172.18.9.136/tcp/7318/ws/p2p/16Uiu2HAmCWqmhBp6CEgVdBpKKJDL38TedoVpaEvXcHDHQbJRF5Xe"],"enrUri":"enr:-L24QBZ48WE-IUwUPeyqrxOaGSFumPqbMs6RsFVE6D_MycFGVtaWb1EwASpvlopqatiHfcFLVBrO37Q4Ab_hAjYIp3kCgmlkgnY0gmlwhKwSCYiKbXVsdGlhZGRyc5YACASsEgmIBhyVAAoErBIJiAYclt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC_emnJ192_NJgYr1-doW_rWbgl4-KiLa2LicVB9XWWNGDdGNwghyVg3VkcIIcl4V3YWt1MgM"}'
2025-02-07 04:08:59.116 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:08:59.117 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7316/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.107.182/tcp/32143/p2p/16Uiu2HAmD8nUWsM3rzAfGVjnLRqwSpfdPp9fnSZ7ucLmrZoTLQBC"]'
2025-02-07 04:08:59.119 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:08:59.120 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32142/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-07 04:08:59.122 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:08:59.122 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7316/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-07 04:08:59.124 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:08:59.125 DEBUG [src.steps.store] Relaying message
2025-02-07 04:08:59.126 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32142/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:08:59.131 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:08:59.132 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:08:59.333 DEBUG [src.steps.store] Relaying message
2025-02-07 04:08:59.333 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32142/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8x", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:08:59.338 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:08:59.338 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:08:59.539 DEBUG [src.steps.store] Relaying message
2025-02-07 04:08:59.539 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32142/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8y", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:08:59.545 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:08:59.545 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:08:59.746 DEBUG [src.steps.store] Relaying message
2025-02-07 04:08:59.746 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32142/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8z", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:08:59.752 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:08:59.753 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:08:59.953 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32142/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&cursor=test&pageSize=100&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:08:59.955 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:32142/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&cursor=test&pageSize=100&ascending=true. Response content: b'Exception converting hex string to bytes: t is not a hexadecimal character'
2025-02-07 04:08:59.957 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7316/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&cursor=test&pageSize=100&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:08:59.959 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:7316/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&cursor=test&pageSize=100&ascending=true. Response content: b'Exception converting hex string to bytes: t is not a hexadecimal character'
2025-02-07 04:08:59.961 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-07 04:08:59.962 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-07 04:08:59.962 DEBUG [src.node.waku_node] Stopping container with id 31588c403adb
2025-02-07 04:09:00.637 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:09:00.638 DEBUG [src.node.waku_node] Stopping container with id bcbbd81db4c1
2025-02-07 04:09:01.450 ERROR [src.node.docker_mananger] Max retries reached for container 31588c403adb. Exiting log stream.
2025-02-07 04:09:02.096 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:09:02.096 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-07 04:09:02.103 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-07 04:09:02.108 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
