2025-02-07 04:03:24.905 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-07 04:03:24.906 DEBUG [tests.conftest] Running test: test_filter_update_subscription_with_pubsub_topic_list_instead_of_string with id: 2025-02-07_04-03-24__aea75171-c3db-48e4-a1da-22d9f5300f89
2025-02-07 04:03:24.906 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-07 04:03:24.906 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-07 04:03:24.907 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-07 04:03:24.912 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:03:24.912 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-07_04-03-24__aea75171-c3db-48e4-a1da-22d9f5300f89__wakuorg_nwaku:latest.log
2025-02-07 04:03:24.913 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:03:24.913 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:03:24.914 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:03:24.914 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.51.199
2025-02-07 04:03:24.914 DEBUG [src.node.docker_mananger] Generated ports ['1410', '1411', '1412', '1413', '1414']
2025-02-07 04:03:24.915 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:03:24.915 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:03:24.915 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:03:24.915 DEBUG [src.node.docker_mananger] docker run -i -t -p 1410:1410 -p 1411:1411 -p 1412:1412 -p 1413:1413 -p 1414:1414 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=1412 --rest-port=1410 --tcp-port=1411 --discv5-udp-port=1413 --rest-address=0.0.0.0 --nat=extip:172.18.51.199 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d8af6b6a3a1d4b05f2fa4c200acf14e7a12e1df8dee0fdae70bfadabaefebc8c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=1414 --metrics-logging=true --relay=true --filter=true
2025-02-07 04:03:25.143 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.51.199 waku 556e85894208fb9675e456264e2a0d3e5011bae48c83d34f7f778834cdd3efd2
2025-02-07 04:03:25.193 DEBUG [src.node.docker_mananger] Container started with ID 556e85894208. Setting up logs at ./log/docker/node1_2025-02-07_04-03-24__aea75171-c3db-48e4-a1da-22d9f5300f89__wakuorg_nwaku:latest.log
2025-02-07 04:03:25.193 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 1410
2025-02-07 04:03:25.195 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:03:25.708 ERROR [src.node.docker_mananger] Max retries reached for container 1926c9828342. Exiting log stream.
2025-02-07 04:03:26.195 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1410/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:03:26.198 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:03:26.198 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:03:26.199 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1410/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:03:26.201 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.51.199/tcp/1411/p2p/16Uiu2HAm8Sydgj2dtmtW7ccaPTJB31abEuy344DRecoCfMwZH6U3","/ip4/172.18.51.199/tcp/1412/ws/p2p/16Uiu2HAm8Sydgj2dtmtW7ccaPTJB31abEuy344DRecoCfMwZH6U3"],"enrUri":"enr:-L24QHusKE678tlkn2zEKq5PaOQbnJSveo2CQxCdERW8zX64InNLB4R9dmmoNHyzVL34ApgnY0k0uIdmLckGYcQ9-UYCgmlkgnY0gmlwhKwSM8eKbXVsdGlhZGRyc5YACASsEjPHBgWDAAoErBIzxwYFhN0DgnJzhQADAQAAiXNlY3AyNTZrMaECwX14tVwObBIZBHuMKG3gfFzfeNirn-rrXMG_lcOLcxSDdGNwggWDg3VkcIIFhYV3YWt1MgU"}'
2025-02-07 04:03:26.201 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:03:26.201 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-07 04:03:26.207 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:03:26.208 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-07_04-03-24__aea75171-c3db-48e4-a1da-22d9f5300f89__wakuorg_nwaku:latest.log
2025-02-07 04:03:26.208 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:03:26.208 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:03:26.209 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:03:26.209 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.165.228
2025-02-07 04:03:26.209 DEBUG [src.node.docker_mananger] Generated ports ['11039', '11040', '11041', '11042', '11043']
2025-02-07 04:03:26.210 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:03:26.210 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:03:26.210 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:03:26.210 DEBUG [src.node.docker_mananger] docker run -i -t -p 11039:11039 -p 11040:11040 -p 11041:11041 -p 11042:11042 -p 11043:11043 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=11041 --rest-port=11039 --tcp-port=11040 --discv5-udp-port=11042 --rest-address=0.0.0.0 --nat=extip:172.18.165.228 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c6a71422fc0276ebad7c7dca7ba7ae3436afbafa73ff551da4cacadb83bc3771 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=11043 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QHusKE678tlkn2zEKq5PaOQbnJSveo2CQxCdERW8zX64InNLB4R9dmmoNHyzVL34ApgnY0k0uIdmLckGYcQ9-UYCgmlkgnY0gmlwhKwSM8eKbXVsdGlhZGRyc5YACASsEjPHBgWDAAoErBIzxwYFhN0DgnJzhQADAQAAiXNlY3AyNTZrMaECwX14tVwObBIZBHuMKG3gfFzfeNirn-rrXMG_lcOLcxSDdGNwggWDg3VkcIIFhYV3YWt1MgU --filternode=/ip4/172.18.51.199/tcp/1411/p2p/16Uiu2HAm8Sydgj2dtmtW7ccaPTJB31abEuy344DRecoCfMwZH6U3
2025-02-07 04:03:26.438 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.165.228 waku ec7e48bd80e528ca2b84a1518ef242babe5dfb2593f64a8cf662f1e93aab0305
2025-02-07 04:03:26.491 DEBUG [src.node.docker_mananger] Container started with ID ec7e48bd80e5. Setting up logs at ./log/docker/node2_2025-02-07_04-03-24__aea75171-c3db-48e4-a1da-22d9f5300f89__wakuorg_nwaku:latest.log
2025-02-07 04:03:26.491 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 11039
2025-02-07 04:03:26.491 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:03:27.493 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11039/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:03:27.495 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:03:27.496 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:03:27.496 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11039/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:03:27.498 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.165.228/tcp/11040/p2p/16Uiu2HAm3s1gSFjof1xx7yYBp8Za17fesMADqHB47uRzGjkSytxS","/ip4/172.18.165.228/tcp/11041/ws/p2p/16Uiu2HAm3s1gSFjof1xx7yYBp8Za17fesMADqHB47uRzGjkSytxS"],"enrUri":"enr:-L24QNQBr4ROl2BQ3MjAl4TEq4mWPL0YoDjBbCp98q1V4wJDX33hizL8LyJyJ4wd9XQB0XVPbjO-LM1q-Ju-0eteW2gCgmlkgnY0gmlwhKwSpeSKbXVsdGlhZGRyc5YACASsEqXkBisgAAoErBKl5AYrId0DgnJzhQADAQAAiXNlY3AyNTZrMaECfVtKlLJbgEKj9eMCZAbaW6bITxWk81YK0JffKarhiOuDdGNwgisgg3VkcIIrIoV3YWt1MgA"}'
2025-02-07 04:03:27.498 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:03:27.499 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11039/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.51.199/tcp/1411/p2p/16Uiu2HAm8Sydgj2dtmtW7ccaPTJB31abEuy344DRecoCfMwZH6U3"]'
2025-02-07 04:03:27.537 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:03:27.537 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-07 04:03:27.538 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:1410/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-07 04:03:27.555 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:03:27.556 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11039/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "785010a9-a3d7-4fc8-9371-ba965876aa70", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-07 04:03:27.568 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"785010a9-a3d7-4fc8-9371-ba965876aa70","statusDesc":"OK"}'
2025-02-07 04:03:27.569 INFO [src.node.api_clients.base_client] curl -v -X PUT "http://127.0.0.1:11039/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": ["/waku/2/rs/3/1"]}'
2025-02-07 04:03:27.571 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:11039/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
2025-02-07 04:03:27.574 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-07 04:03:27.575 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-07 04:03:27.575 DEBUG [src.node.waku_node] Stopping container with id 556e85894208
2025-02-07 04:03:28.645 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:03:28.645 DEBUG [src.node.waku_node] Stopping container with id ec7e48bd80e5
2025-02-07 04:03:29.457 ERROR [src.node.docker_mananger] Max retries reached for container 556e85894208. Exiting log stream.
2025-02-07 04:03:30.149 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:03:30.151 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-07 04:03:30.155 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-07 04:03:30.158 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
