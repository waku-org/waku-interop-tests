2025-02-07 04:06:59.832 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-07 04:06:59.833 DEBUG [tests.conftest] Running test: test_store_with_wrong_url_content_topic with id: 2025-02-07_04-06-59__6c993731-944f-483a-9ece-c71170c3549b
2025-02-07 04:06:59.833 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-07 04:06:59.833 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-07 04:06:59.833 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-07 04:06:59.839 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:06:59.839 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-07_04-06-59__6c993731-944f-483a-9ece-c71170c3549b__wakuorg_nwaku:latest.log
2025-02-07 04:06:59.840 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:06:59.840 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:06:59.841 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:06:59.841 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.78.134
2025-02-07 04:06:59.841 DEBUG [src.node.docker_mananger] Generated ports ['16964', '16965', '16966', '16967', '16968']
2025-02-07 04:06:59.842 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:06:59.842 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:06:59.842 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:06:59.842 DEBUG [src.node.docker_mananger] docker run -i -t -p 16964:16964 -p 16965:16965 -p 16966:16966 -p 16967:16967 -p 16968:16968 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=16966 --rest-port=16964 --tcp-port=16965 --discv5-udp-port=16967 --rest-address=0.0.0.0 --nat=extip:172.18.78.134 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6ecd2bb078ee30b9dfefd79eda92d18ceaac2f8a763faaedbc4731ddf5ccd37a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=16968 --metrics-logging=true --store=true --relay=true
2025-02-07 04:07:00.062 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.78.134 waku 7fa1bda992e84b59bdab1d67da30a3569e60b43273ae6a6852be8e21c5e1e964
2025-02-07 04:07:00.108 DEBUG [src.node.docker_mananger] Container started with ID 7fa1bda992e8. Setting up logs at ./log/docker/publishing_node1_2025-02-07_04-06-59__6c993731-944f-483a-9ece-c71170c3549b__wakuorg_nwaku:latest.log
2025-02-07 04:07:00.110 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 16964
2025-02-07 04:07:00.112 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:07:00.626 ERROR [src.node.docker_mananger] Max retries reached for container d89d7d12f86b. Exiting log stream.
2025-02-07 04:07:01.112 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16964/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:07:01.115 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:07:01.115 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:07:01.116 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16964/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:07:01.118 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.78.134/tcp/16965/p2p/16Uiu2HAm3eAE6MhGw6GFCAiXFgK5nAMuHG92mdmeqzg2Hd2r2fxv","/ip4/172.18.78.134/tcp/16966/ws/p2p/16Uiu2HAm3eAE6MhGw6GFCAiXFgK5nAMuHG92mdmeqzg2Hd2r2fxv"],"enrUri":"enr:-L24QHif33V8fR5sbM1D-jU6k_go7lWjZFebae55fgAvc09CNZPH7p9HS_hGzx18k0njPJFKtKdQlrMPlqcKjI5kpWECgmlkgnY0gmlwhKwSToaKbXVsdGlhZGRyc5YACASsEk6GBkJFAAoErBJOhgZCRt0DgnJzhQADAQAAiXNlY3AyNTZrMaECehBnUbvXJ2sikwuIsZkBvz3mxBrkKRXoAAKUcxciY9uDdGNwgkJFg3VkcIJCR4V3YWt1MgM"}'
2025-02-07 04:07:01.118 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:07:01.125 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:07:01.125 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-07_04-06-59__6c993731-944f-483a-9ece-c71170c3549b__wakuorg_nwaku:latest.log
2025-02-07 04:07:01.125 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:07:01.125 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:07:01.126 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:07:01.127 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.45.46
2025-02-07 04:07:01.127 DEBUG [src.node.docker_mananger] Generated ports ['46576', '46577', '46578', '46579', '46580']
2025-02-07 04:07:01.127 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:07:01.127 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:07:01.127 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:07:01.127 DEBUG [src.node.docker_mananger] docker run -i -t -p 46576:46576 -p 46577:46577 -p 46578:46578 -p 46579:46579 -p 46580:46580 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=46578 --rest-port=46576 --tcp-port=46577 --discv5-udp-port=46579 --rest-address=0.0.0.0 --nat=extip:172.18.45.46 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2b1f82ba78e192aadccf33ea4df0d34f8e8e9c41892c1b294ff4ba5c0ee68aa5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=46580 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QHif33V8fR5sbM1D-jU6k_go7lWjZFebae55fgAvc09CNZPH7p9HS_hGzx18k0njPJFKtKdQlrMPlqcKjI5kpWECgmlkgnY0gmlwhKwSToaKbXVsdGlhZGRyc5YACASsEk6GBkJFAAoErBJOhgZCRt0DgnJzhQADAQAAiXNlY3AyNTZrMaECehBnUbvXJ2sikwuIsZkBvz3mxBrkKRXoAAKUcxciY9uDdGNwgkJFg3VkcIJCR4V3YWt1MgM --storenode=/ip4/172.18.78.134/tcp/16965/p2p/16Uiu2HAm3eAE6MhGw6GFCAiXFgK5nAMuHG92mdmeqzg2Hd2r2fxv --store=true --relay=true
2025-02-07 04:07:01.366 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.45.46 waku 45b0ec4e4e9b3b1b8c9727ac4a9deffb81273a24592b9f2779ac290a52a991a0
2025-02-07 04:07:01.417 DEBUG [src.node.docker_mananger] Container started with ID 45b0ec4e4e9b. Setting up logs at ./log/docker/store_node1_2025-02-07_04-06-59__6c993731-944f-483a-9ece-c71170c3549b__wakuorg_nwaku:latest.log
2025-02-07 04:07:01.417 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 46576
2025-02-07 04:07:01.418 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:07:02.419 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46576/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:07:02.422 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:07:02.422 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:07:02.422 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46576/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:07:02.424 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.45.46/tcp/46577/p2p/16Uiu2HAm2hXeoHw8YCuNwGRdgwdMWzPm5yfnByTZ2wthmTWRckRy","/ip4/172.18.45.46/tcp/46578/ws/p2p/16Uiu2HAm2hXeoHw8YCuNwGRdgwdMWzPm5yfnByTZ2wthmTWRckRy"],"enrUri":"enr:-L24QEBkXClc5SS8xJQgw8lAoF0ug1wb0Vxwogaw59lKsacFOG3VqZWxNWdr6GBxfNm3BnDEux7tqDoglcWjHwmofPECgmlkgnY0gmlwhKwSLS6KbXVsdGlhZGRyc5YACASsEi0uBrXxAAoErBItLga18t0DgnJzhQADAQAAiXNlY3AyNTZrMaECbBGvfS8i8lJWvCK5i_ISw8qcS-uj_IBy3tjKFz9eYUyDdGNwgrXxg3VkcIK184V3YWt1MgM"}'
2025-02-07 04:07:02.425 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:07:02.425 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46576/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.78.134/tcp/16965/p2p/16Uiu2HAm3eAE6MhGw6GFCAiXFgK5nAMuHG92mdmeqzg2Hd2r2fxv"]'
2025-02-07 04:07:02.427 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:07:02.428 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16964/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-07 04:07:02.430 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:07:02.430 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46576/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-07 04:07:02.432 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:07:02.433 DEBUG [src.steps.store] Relaying message
2025-02-07 04:07:02.433 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16964/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:07:02.442 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:07:02.443 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:07:02.644 DEBUG [src.steps.store] Relaying message
2025-02-07 04:07:02.644 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16964/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:07:02.652 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:07:02.652 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:07:02.853 DEBUG [src.steps.store] Relaying message
2025-02-07 04:07:02.853 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16964/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:07:02.859 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:07:02.859 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:07:03.060 DEBUG [src.steps.store] Relaying message
2025-02-07 04:07:03.060 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16964/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:07:03.067 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:07:03.067 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:07:03.268 DEBUG [src.steps.store] Relaying message
2025-02-07 04:07:03.268 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16964/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:07:03.274 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:07:03.274 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:07:03.476 DEBUG [src.steps.store] Relaying message
2025-02-07 04:07:03.476 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16964/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:07:03.482 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:07:03.483 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:07:03.684 DEBUG [src.steps.store] Relaying message
2025-02-07 04:07:03.684 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16964/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:07:03.690 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:07:03.690 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:07:03.891 DEBUG [src.steps.store] Relaying message
2025-02-07 04:07:03.891 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16964/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:07:03.898 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:07:03.898 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:07:04.100 DEBUG [tests.store.test_topics] trying to find stored messages with wrong content_topic =myapp/1/latest/proto
2025-02-07 04:07:04.100 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16964/store/v3/messages?includeData=true&contentTopics=myapp%2F1%2Flatest%2Fproto&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:07:04.104 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
2025-02-07 04:07:04.104 DEBUG [tests.store.test_topics]  response for wrong url content topic is {'requestId': '', 'statusCode': 200, 'statusDesc': 'OK', 'messages': []}
2025-02-07 04:07:04.106 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-07 04:07:04.108 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-07 04:07:04.108 DEBUG [src.node.waku_node] Stopping container with id 7fa1bda992e8
2025-02-07 04:07:04.676 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:07:04.677 DEBUG [src.node.waku_node] Stopping container with id 45b0ec4e4e9b
2025-02-07 04:07:05.489 ERROR [src.node.docker_mananger] Max retries reached for container 7fa1bda992e8. Exiting log stream.
2025-02-07 04:07:06.210 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:07:06.213 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-07 04:07:06.220 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-07 04:07:06.227 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
