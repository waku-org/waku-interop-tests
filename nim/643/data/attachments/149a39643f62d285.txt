2025-02-07 04:03:50.233 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-07 04:03:50.233 DEBUG [tests.conftest] Running test: test_light_push_on_non_subscribed_pubsub_topic with id: 2025-02-07_04-03-50__fa664568-6ffd-40ad-ad27-c3ccf0b31779
2025-02-07 04:03:50.233 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-07 04:03:50.233 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-07 04:03:50.240 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:03:50.240 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-07_04-03-50__fa664568-6ffd-40ad-ad27-c3ccf0b31779__wakuorg_nwaku:latest.log
2025-02-07 04:03:50.240 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:03:50.240 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:03:50.241 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:03:50.241 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.206.249
2025-02-07 04:03:50.242 DEBUG [src.node.docker_mananger] Generated ports ['18038', '18039', '18040', '18041', '18042']
2025-02-07 04:03:50.242 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:03:50.242 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:03:50.242 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:03:50.242 DEBUG [src.node.docker_mananger] docker run -i -t -p 18038:18038 -p 18039:18039 -p 18040:18040 -p 18041:18041 -p 18042:18042 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18040 --rest-port=18038 --tcp-port=18039 --discv5-udp-port=18041 --rest-address=0.0.0.0 --nat=extip:172.18.206.249 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2bccf89d53bee346dde55a8f0b92f9b47e9ebf7e0cee0fa3aaa7cee7c06696ab --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18042 --metrics-logging=true --lightpush=true --relay=true
2025-02-07 04:03:50.473 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.206.249 waku 321f9b398655287e1cfca1ac14fc8228f70486b9fe4dc2a6ed85bb7a8d4d24c1
2025-02-07 04:03:50.519 DEBUG [src.node.docker_mananger] Container started with ID 321f9b398655. Setting up logs at ./log/docker/receiving_node1_2025-02-07_04-03-50__fa664568-6ffd-40ad-ad27-c3ccf0b31779__wakuorg_nwaku:latest.log
2025-02-07 04:03:50.519 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 18038
2025-02-07 04:03:50.520 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:03:51.023 ERROR [src.node.docker_mananger] Max retries reached for container 0c554b6da1f9. Exiting log stream.
2025-02-07 04:03:51.520 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18038/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:03:51.523 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:03:51.523 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:03:51.523 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18038/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:03:51.526 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.206.249/tcp/18039/p2p/16Uiu2HAm1oiQAYgSdx6F2xoZ4brAhBzVjh2psL6pZVMKjM85HmqU","/ip4/172.18.206.249/tcp/18040/ws/p2p/16Uiu2HAm1oiQAYgSdx6F2xoZ4brAhBzVjh2psL6pZVMKjM85HmqU"],"enrUri":"enr:-L24QGqG8fsNPIsBKu4JE68lDkF0Kf1ao18GpC4wUZ7Wqd81bgXEDXMHkwpawuwbdhsAKHto0nbasVwLzQupJXDWj4QCgmlkgnY0gmlwhKwSzvmKbXVsdGlhZGRyc5YACASsEs75BkZ3AAoErBLO-QZGeN0DgnJzhQADAQAAiXNlY3AyNTZrMaECXsuiydXoG1OBGIqb3sx9WsXuVa_TWXUqSCN99CEqq0uDdGNwgkZ3g3VkcIJGeYV3YWt1Mgk"}'
2025-02-07 04:03:51.526 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:03:51.532 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:03:51.533 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-07_04-03-50__fa664568-6ffd-40ad-ad27-c3ccf0b31779__wakuorg_nwaku:latest.log
2025-02-07 04:03:51.533 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:03:51.533 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:03:51.534 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:03:51.534 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.255.212
2025-02-07 04:03:51.535 DEBUG [src.node.docker_mananger] Generated ports ['4139', '4140', '4141', '4142', '4143']
2025-02-07 04:03:51.535 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:03:51.535 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:03:51.535 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:03:51.535 DEBUG [src.node.docker_mananger] docker run -i -t -p 4139:4139 -p 4140:4140 -p 4141:4141 -p 4142:4142 -p 4143:4143 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4141 --rest-port=4139 --tcp-port=4140 --discv5-udp-port=4142 --rest-address=0.0.0.0 --nat=extip:172.18.255.212 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5ee1efc18ab5174885caadeb2badc0a970f02db9b9dc0161c7efad9bfa6a3ddc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4143 --metrics-logging=true --lightpush=false --relay=true
2025-02-07 04:03:51.759 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.255.212 waku 8e2fc25fa9c98e0bb64259c5ae43c58165fa95caced79338b50ae80c4e0f99c3
2025-02-07 04:03:51.808 DEBUG [src.node.docker_mananger] Container started with ID 8e2fc25fa9c9. Setting up logs at ./log/docker/receiving_node2_2025-02-07_04-03-50__fa664568-6ffd-40ad-ad27-c3ccf0b31779__wakuorg_nwaku:latest.log
2025-02-07 04:03:51.809 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 4139
2025-02-07 04:03:51.809 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:03:52.809 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4139/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:03:52.812 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:03:52.812 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:03:52.813 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4139/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:03:52.815 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.255.212/tcp/4140/p2p/16Uiu2HAmR2K2wFEtSSrwyqoqBHLscgnQs52JfSFVJNoayw1ajEB5","/ip4/172.18.255.212/tcp/4141/ws/p2p/16Uiu2HAmR2K2wFEtSSrwyqoqBHLscgnQs52JfSFVJNoayw1ajEB5"],"enrUri":"enr:-L24QF5Dkyn5rbomkNvdlbzLmeuAG7oBydeJ1vmtIU060kyNG9MGqo98FJ0ENTLRx8IBiu_hphDA8QC5wng8v67m11YCgmlkgnY0gmlwhKwS_9SKbXVsdGlhZGRyc5YACASsEv_UBhAsAAoErBL_1AYQLd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDt8KQz8IWcX74VnTncrtugEjmk7COXevAVtsXnr827TyDdGNwghAsg3VkcIIQLoV3YWt1MgE"}'
2025-02-07 04:03:52.815 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:03:52.815 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4139/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.206.249/tcp/18039/p2p/16Uiu2HAm1oiQAYgSdx6F2xoZ4brAhBzVjh2psL6pZVMKjM85HmqU"]'
2025-02-07 04:03:52.855 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:03:52.865 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:03:52.865 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-07_04-03-50__fa664568-6ffd-40ad-ad27-c3ccf0b31779__wakuorg_nwaku:latest.log
2025-02-07 04:03:52.865 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:03:52.866 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:03:52.867 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:03:52.867 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.31.62
2025-02-07 04:03:52.867 DEBUG [src.node.docker_mananger] Generated ports ['27520', '27521', '27522', '27523', '27524']
2025-02-07 04:03:52.867 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:03:52.868 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:03:52.868 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:03:52.868 DEBUG [src.node.docker_mananger] docker run -i -t -p 27520:27520 -p 27521:27521 -p 27522:27522 -p 27523:27523 -p 27524:27524 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27522 --rest-port=27520 --tcp-port=27521 --discv5-udp-port=27523 --rest-address=0.0.0.0 --nat=extip:172.18.31.62 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8a14dafbec5d38360aa79bfccde2dd00a6cac95745c7c43cb9debe66ceefacef --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27524 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QGqG8fsNPIsBKu4JE68lDkF0Kf1ao18GpC4wUZ7Wqd81bgXEDXMHkwpawuwbdhsAKHto0nbasVwLzQupJXDWj4QCgmlkgnY0gmlwhKwSzvmKbXVsdGlhZGRyc5YACASsEs75BkZ3AAoErBLO-QZGeN0DgnJzhQADAQAAiXNlY3AyNTZrMaECXsuiydXoG1OBGIqb3sx9WsXuVa_TWXUqSCN99CEqq0uDdGNwgkZ3g3VkcIJGeYV3YWt1Mgk --lightpushnode=/ip4/172.18.206.249/tcp/18039/p2p/16Uiu2HAm1oiQAYgSdx6F2xoZ4brAhBzVjh2psL6pZVMKjM85HmqU --lightpush=true --relay=false
2025-02-07 04:03:53.103 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.31.62 waku aa532ac43a3990e18ef77d3d5787ae07f1dc81e843ed84b92a16eee0752337b4
2025-02-07 04:03:53.150 DEBUG [src.node.docker_mananger] Container started with ID aa532ac43a39. Setting up logs at ./log/docker/lightpush_node1_2025-02-07_04-03-50__fa664568-6ffd-40ad-ad27-c3ccf0b31779__wakuorg_nwaku:latest.log
2025-02-07 04:03:53.150 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 27520
2025-02-07 04:03:53.151 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:03:54.151 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27520/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:03:54.154 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:03:54.154 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:03:54.154 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27520/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:03:54.156 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.31.62/tcp/27521/p2p/16Uiu2HAmJuK7kuDQq4NFpKgiJ33RbWzELeQrQ1h2FgC4fcJ3Gmqw","/ip4/172.18.31.62/tcp/27522/ws/p2p/16Uiu2HAmJuK7kuDQq4NFpKgiJ33RbWzELeQrQ1h2FgC4fcJ3Gmqw"],"enrUri":"enr:-L24QHoK6hhqEQKVR5xmMtlsenM6QomEJyXjnKajnNqqUk0QBaZVWFfBNZ-j8RRnT9UO8FiuYwgsijgSojdexUQg98cCgmlkgnY0gmlwhKwSHz6KbXVsdGlhZGRyc5YACASsEh8-BmuBAAoErBIfPgZrgt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDXNF48jOzm7PMRM1RHb8p4EVem42tdMeSRSRtaPrnRh6DdGNwgmuBg3VkcIJrg4V3YWt1Mgg"}'
2025-02-07 04:03:54.156 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:03:54.157 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27520/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.206.249/tcp/18039/p2p/16Uiu2HAm1oiQAYgSdx6F2xoZ4brAhBzVjh2psL6pZVMKjM85HmqU"]'
2025-02-07 04:03:54.192 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:03:54.193 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27520/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.255.212/tcp/4140/p2p/16Uiu2HAmR2K2wFEtSSrwyqoqBHLscgnQs52JfSFVJNoayw1ajEB5"]'
2025-02-07 04:03:54.221 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:03:54.222 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18038/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-07 04:03:54.231 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:03:54.234 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4139/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-07 04:03:54.238 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:03:54.240 DEBUG [src.steps.light_push] Lightpushing message
2025-02-07 04:03:54.241 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27520/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738901034240951040}}'
2025-02-07 04:03:54.249 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:27520/lightpush/v1/message. Response content: b'Failed to request a message push: not_published_to_any_peer'
2025-02-07 04:03:54.251 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-07 04:03:54.252 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-07 04:03:54.252 DEBUG [src.node.waku_node] Stopping container with id 321f9b398655
2025-02-07 04:03:55.007 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:03:55.008 DEBUG [src.node.waku_node] Stopping container with id 8e2fc25fa9c9
2025-02-07 04:03:55.819 ERROR [src.node.docker_mananger] Max retries reached for container 321f9b398655. Exiting log stream.
2025-02-07 04:03:56.503 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:03:56.504 DEBUG [src.node.waku_node] Stopping container with id aa532ac43a39
2025-02-07 04:03:57.315 ERROR [src.node.docker_mananger] Max retries reached for container 8e2fc25fa9c9. Exiting log stream.
2025-02-07 04:03:58.005 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:03:58.006 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-07 04:03:58.014 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-07 04:03:58.020 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-07 04:03:58.025 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
