2025-02-07 04:04:58.270 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-07 04:04:58.271 DEBUG [tests.conftest] Running test: test_single_content_topic[/statusim/1/community/cbor] with id: 2025-02-07_04-04-58__e4f11d80-dfc9-46b2-b479-952f70331ea6
2025-02-07 04:04:58.271 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-07 04:04:58.271 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-07 04:04:58.271 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2025-02-07 04:04:58.278 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:04:58.278 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-07_04-04-58__e4f11d80-dfc9-46b2-b479-952f70331ea6__wakuorg_nwaku:latest.log
2025-02-07 04:04:58.278 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:04:58.278 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:04:58.280 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:04:58.280 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.61.231
2025-02-07 04:04:58.280 DEBUG [src.node.docker_mananger] Generated ports ['12173', '12174', '12175', '12176', '12177']
2025-02-07 04:04:58.280 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:04:58.280 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:04:58.280 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:04:58.281 DEBUG [src.node.docker_mananger] docker run -i -t -p 12173:12173 -p 12174:12174 -p 12175:12175 -p 12176:12176 -p 12177:12177 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=12175 --rest-port=12173 --tcp-port=12174 --discv5-udp-port=12176 --rest-address=0.0.0.0 --nat=extip:172.18.61.231 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=a3bf0df0c7fb9dee5f9bcd5c38adbdfbeb70030a8ee2c6c5c02f5b16ecdddac7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=12177 --metrics-logging=true --relay=true --filter=true --content-topic=/statusim/1/community/cbor
2025-02-07 04:04:58.504 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.61.231 waku 02252a2af5fc14a19370d810fc7317b19f114445b361b7f05b328f8eca3a5fec
2025-02-07 04:04:58.555 DEBUG [src.node.docker_mananger] Container started with ID 02252a2af5fc. Setting up logs at ./log/docker/node1_2025-02-07_04-04-58__e4f11d80-dfc9-46b2-b479-952f70331ea6__wakuorg_nwaku:latest.log
2025-02-07 04:04:58.555 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 12173
2025-02-07 04:04:58.556 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:04:59.063 ERROR [src.node.docker_mananger] Max retries reached for container 5364d27f16d1. Exiting log stream.
2025-02-07 04:04:59.556 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:12173/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:04:59.559 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:04:59.559 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:04:59.559 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:12173/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:04:59.562 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.61.231/tcp/12174/p2p/16Uiu2HAkwxGU8AFmytizn5HHFHy1bYcpBgcDXFcapxdswG7FiFPW","/ip4/172.18.61.231/tcp/12175/ws/p2p/16Uiu2HAkwxGU8AFmytizn5HHFHy1bYcpBgcDXFcapxdswG7FiFPW"],"enrUri":"enr:-L24QCHMOW-Ir-FQMn9lDasC-iBN7Z8e0YoIAWZOBr_Uf-1EAgPWW9Lh3n_zgMrlm1PAzEIQDtE4cCTQrIUaZVZ93yQCgmlkgnY0gmlwhKwSPeeKbXVsdGlhZGRyc5YACASsEj3nBi-OAAoErBI95wYvj90DgnJzhQACAQAAiXNlY3AyNTZrMaECJY3LWqn6MdU19jP90MYArIismpxnovJCeoNXp2nnWNmDdGNwgi-Og3VkcIIvkIV3YWt1MgU"}'
2025-02-07 04:04:59.562 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:04:59.568 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:04:59.568 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-07_04-04-58__e4f11d80-dfc9-46b2-b479-952f70331ea6__wakuorg_nwaku:latest.log
2025-02-07 04:04:59.568 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:04:59.568 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:04:59.570 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:04:59.570 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.54.228
2025-02-07 04:04:59.570 DEBUG [src.node.docker_mananger] Generated ports ['23145', '23146', '23147', '23148', '23149']
2025-02-07 04:04:59.570 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:04:59.570 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:04:59.570 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:04:59.571 DEBUG [src.node.docker_mananger] docker run -i -t -p 23145:23145 -p 23146:23146 -p 23147:23147 -p 23148:23148 -p 23149:23149 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23147 --rest-port=23145 --tcp-port=23146 --discv5-udp-port=23148 --rest-address=0.0.0.0 --nat=extip:172.18.54.228 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=1a5ecd9bdaaa2d4b3ffed5ac6bc2d1e4ec26a09310f1c27adeb2ebf54e6a3bcc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23149 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QCHMOW-Ir-FQMn9lDasC-iBN7Z8e0YoIAWZOBr_Uf-1EAgPWW9Lh3n_zgMrlm1PAzEIQDtE4cCTQrIUaZVZ93yQCgmlkgnY0gmlwhKwSPeeKbXVsdGlhZGRyc5YACASsEj3nBi-OAAoErBI95wYvj90DgnJzhQACAQAAiXNlY3AyNTZrMaECJY3LWqn6MdU19jP90MYArIismpxnovJCeoNXp2nnWNmDdGNwgi-Og3VkcIIvkIV3YWt1MgU --content-topic=/statusim/1/community/cbor
2025-02-07 04:04:59.799 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.54.228 waku ef5da4a55c81c0e27c37148b0f5d563d3280d9827fcea63e6c3347f42c3c1f87
2025-02-07 04:04:59.847 DEBUG [src.node.docker_mananger] Container started with ID ef5da4a55c81. Setting up logs at ./log/docker/node2_2025-02-07_04-04-58__e4f11d80-dfc9-46b2-b479-952f70331ea6__wakuorg_nwaku:latest.log
2025-02-07 04:04:59.847 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 23145
2025-02-07 04:04:59.847 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:05:00.848 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23145/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:05:00.861 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:05:00.861 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:05:00.861 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23145/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:05:00.867 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.54.228/tcp/23146/p2p/16Uiu2HAkwvVLkZfvxs9vxPSBzRXRBKgLnaANxHfVtcZFYV9tow9G","/ip4/172.18.54.228/tcp/23147/ws/p2p/16Uiu2HAkwvVLkZfvxs9vxPSBzRXRBKgLnaANxHfVtcZFYV9tow9G"],"enrUri":"enr:-L24QJGOOtLlAjMGTuXuMSrCVAm-fYadxV1SzDJlw81z1aM2esxvwX0wMx91hBbDZQI0UgZMiPeHBNUNqTuBRDEJU5gCgmlkgnY0gmlwhKwSNuSKbXVsdGlhZGRyc5YACASsEjbkBlpqAAoErBI25AZaa90DgnJzhQACAQAAiXNlY3AyNTZrMaECJRkwKxse9qu3ZPyWniB_YzvAu0DtFMGml6HSf9yJKFeDdGNwglpqg3VkcIJabIV3YWt1MgE"}'
2025-02-07 04:05:00.867 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:05:00.868 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23145/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.61.231/tcp/12174/p2p/16Uiu2HAkwxGU8AFmytizn5HHFHy1bYcpBgcDXFcapxdswG7FiFPW"]'
2025-02-07 04:05:00.870 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:05:00.871 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:12173/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/statusim/1/community/cbor"]'
2025-02-07 04:05:00.873 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:05:00.874 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23145/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/statusim/1/community/cbor"]'
2025-02-07 04:05:00.876 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:05:00.876 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:12173/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:05:00.881 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:05:00.881 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-07 04:05:00.982 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-07 04:05:00.983 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:12173/relay/v1/auto/messages/%2Fstatusim%2F1%2Fcommunity%2Fcbor" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:05:00.985 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/statusim/1/community/cbor","version":0,"timestamp":1738901100876604160,"ephemeral":false}]'
2025-02-07 04:05:00.987 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-07 04:05:00.987 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23145/relay/v1/auto/messages/%2Fstatusim%2F1%2Fcommunity%2Fcbor" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:05:00.990 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/statusim/1/community/cbor","version":0,"timestamp":1738901100876604160,"ephemeral":false}]'
2025-02-07 04:05:00.992 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-07 04:05:00.993 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-07 04:05:00.993 DEBUG [src.node.waku_node] Stopping container with id 02252a2af5fc
2025-02-07 04:05:02.036 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:05:02.037 DEBUG [src.node.waku_node] Stopping container with id ef5da4a55c81
2025-02-07 04:05:02.849 ERROR [src.node.docker_mananger] Max retries reached for container 02252a2af5fc. Exiting log stream.
2025-02-07 04:05:03.553 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:05:03.554 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-07 04:05:03.560 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-07 04:05:03.564 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
