2025-02-07 04:06:16.260 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-07 04:06:16.261 DEBUG [tests.conftest] Running test: test_time_filter_matches_one_message with id: 2025-02-07_04-06-16__fc8da3e5-13ba-45af-9d12-43d5bfcd33f3
2025-02-07 04:06:16.261 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-07 04:06:16.261 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-07 04:06:16.261 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-07 04:06:16.267 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:06:16.268 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-07_04-06-16__fc8da3e5-13ba-45af-9d12-43d5bfcd33f3__wakuorg_nwaku:latest.log
2025-02-07 04:06:16.268 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:06:16.268 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:06:16.269 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:06:16.269 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.37.186
2025-02-07 04:06:16.269 DEBUG [src.node.docker_mananger] Generated ports ['7597', '7598', '7599', '7600', '7601']
2025-02-07 04:06:16.270 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:06:16.270 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:06:16.270 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:06:16.270 DEBUG [src.node.docker_mananger] docker run -i -t -p 7597:7597 -p 7598:7598 -p 7599:7599 -p 7600:7600 -p 7601:7601 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7599 --rest-port=7597 --tcp-port=7598 --discv5-udp-port=7600 --rest-address=0.0.0.0 --nat=extip:172.18.37.186 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=aebab6cceccb4b3d1ca7dfecfb4ce64126927fff1bbe19cf8994efccca163e47 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7601 --metrics-logging=true --store=true --relay=true
2025-02-07 04:06:16.501 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.37.186 waku 7ec972bfdd635daf9c342b23075c42718087940f958369684eb3826f9d19f274
2025-02-07 04:06:16.550 DEBUG [src.node.docker_mananger] Container started with ID 7ec972bfdd63. Setting up logs at ./log/docker/publishing_node1_2025-02-07_04-06-16__fc8da3e5-13ba-45af-9d12-43d5bfcd33f3__wakuorg_nwaku:latest.log
2025-02-07 04:06:16.550 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 7597
2025-02-07 04:06:16.551 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:06:17.062 ERROR [src.node.docker_mananger] Max retries reached for container f5b110ada190. Exiting log stream.
2025-02-07 04:06:17.551 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7597/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:06:17.554 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:06:17.554 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:06:17.554 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7597/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:06:17.556 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.37.186/tcp/7598/p2p/16Uiu2HAmUWndGfcfNyyJ14yo77aF2CgsDJhokacovreLZcuQ9eCf","/ip4/172.18.37.186/tcp/7599/ws/p2p/16Uiu2HAmUWndGfcfNyyJ14yo77aF2CgsDJhokacovreLZcuQ9eCf"],"enrUri":"enr:-L24QLXIaCba7X-vROnHgI40jZumBr2aXnvAYhiYsup_mtw2SNfB_UznkE7JAYr8PMubZuT6pAa9WChmotDdtJ1PJOUCgmlkgnY0gmlwhKwSJbqKbXVsdGlhZGRyc5YACASsEiW6Bh2uAAoErBIlugYdr90DgnJzhQADAQAAiXNlY3AyNTZrMaED66EWY2k3b0blUekV-NyTPwT1Ndf306vACVMN-TsvdsiDdGNwgh2ug3VkcIIdsIV3YWt1MgM"}'
2025-02-07 04:06:17.556 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:06:17.563 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:06:17.563 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-07_04-06-16__fc8da3e5-13ba-45af-9d12-43d5bfcd33f3__wakuorg_nwaku:latest.log
2025-02-07 04:06:17.563 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:06:17.563 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:06:17.565 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:06:17.565 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.248.206
2025-02-07 04:06:17.565 DEBUG [src.node.docker_mananger] Generated ports ['2304', '2305', '2306', '2307', '2308']
2025-02-07 04:06:17.565 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:06:17.565 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:06:17.566 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:06:17.566 DEBUG [src.node.docker_mananger] docker run -i -t -p 2304:2304 -p 2305:2305 -p 2306:2306 -p 2307:2307 -p 2308:2308 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2306 --rest-port=2304 --tcp-port=2305 --discv5-udp-port=2307 --rest-address=0.0.0.0 --nat=extip:172.18.248.206 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7dcd5adfa2bd10d1b27f10feeebcd976b29ac19ffdea684e8cece0203e6d682e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2308 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QLXIaCba7X-vROnHgI40jZumBr2aXnvAYhiYsup_mtw2SNfB_UznkE7JAYr8PMubZuT6pAa9WChmotDdtJ1PJOUCgmlkgnY0gmlwhKwSJbqKbXVsdGlhZGRyc5YACASsEiW6Bh2uAAoErBIlugYdr90DgnJzhQADAQAAiXNlY3AyNTZrMaED66EWY2k3b0blUekV-NyTPwT1Ndf306vACVMN-TsvdsiDdGNwgh2ug3VkcIIdsIV3YWt1MgM --storenode=/ip4/172.18.37.186/tcp/7598/p2p/16Uiu2HAmUWndGfcfNyyJ14yo77aF2CgsDJhokacovreLZcuQ9eCf --store=true --relay=true
2025-02-07 04:06:17.787 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.248.206 waku 576f7b586a4c149e09e1ce409f54d67dc4b1852f7cabee29db7ecd1ab7ab6ee6
2025-02-07 04:06:17.840 DEBUG [src.node.docker_mananger] Container started with ID 576f7b586a4c. Setting up logs at ./log/docker/store_node1_2025-02-07_04-06-16__fc8da3e5-13ba-45af-9d12-43d5bfcd33f3__wakuorg_nwaku:latest.log
2025-02-07 04:06:17.843 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 2304
2025-02-07 04:06:17.844 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:06:18.844 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2304/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:06:18.847 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:06:18.847 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:06:18.847 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2304/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:06:18.849 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.248.206/tcp/2305/p2p/16Uiu2HAmV9Lm17UiHXhXW1TvZFuHjHbsmh6WNCuYYKY7zTmUDq2d","/ip4/172.18.248.206/tcp/2306/ws/p2p/16Uiu2HAmV9Lm17UiHXhXW1TvZFuHjHbsmh6WNCuYYKY7zTmUDq2d"],"enrUri":"enr:-L24QGiJtXhbCFiK619k20ULyO_1vM_ZhY-6WFLNFsgvHdjOBWoC0AQmo4hCQL9HeK45nD8KPfHhe4-681HUQI9pyrQCgmlkgnY0gmlwhKwS-M6KbXVsdGlhZGRyc5YACASsEvjOBgkBAAoErBL4zgYJAt0DgnJzhQADAQAAiXNlY3AyNTZrMaED9P5Ub5PomsdI1m8q_VEB-oBMBmgDHOrb2CMHlrAFHi6DdGNwggkBg3VkcIIJA4V3YWt1MgM"}'
2025-02-07 04:06:18.849 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:06:18.850 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2304/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.37.186/tcp/7598/p2p/16Uiu2HAmUWndGfcfNyyJ14yo77aF2CgsDJhokacovreLZcuQ9eCf"]'
2025-02-07 04:06:18.852 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:06:18.853 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7597/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-07 04:06:18.855 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:06:18.855 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2304/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-07 04:06:18.857 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:06:18.858 DEBUG [src.steps.store] Relaying message
2025-02-07 04:06:18.859 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7597/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:06:18.865 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:06:18.865 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:06:19.066 DEBUG [src.steps.store] Relaying message
2025-02-07 04:06:19.066 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7597/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:06:19.072 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:06:19.073 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:06:19.274 DEBUG [src.steps.store] Relaying message
2025-02-07 04:06:19.274 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7597/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:06:19.280 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:06:19.280 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:06:19.481 DEBUG [src.steps.store] Relaying message
2025-02-07 04:06:19.482 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7597/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:06:19.487 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:06:19.488 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:06:19.689 DEBUG [src.steps.store] Relaying message
2025-02-07 04:06:19.689 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7597/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:06:19.695 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:06:19.696 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:06:19.897 DEBUG [src.steps.store] Relaying message
2025-02-07 04:06:19.897 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7597/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:06:19.904 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:06:19.904 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:06:20.105 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7597/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=1738901175858466912&endTime=1738901175858666912&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:06:20.108 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x2a9cec5297923790a32eae93e01770647fa207ee16dfddecb1bce3d9115023c6"}]}'
2025-02-07 04:06:20.109 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2304/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=1738901175858466912&endTime=1738901175858666912&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:06:20.112 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x2a9cec5297923790a32eae93e01770647fa207ee16dfddecb1bce3d9115023c6"}]}'
2025-02-07 04:06:20.113 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-07 04:06:20.114 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-07 04:06:20.114 DEBUG [src.node.waku_node] Stopping container with id 7ec972bfdd63
2025-02-07 04:06:21.056 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:06:21.057 DEBUG [src.node.waku_node] Stopping container with id 576f7b586a4c
2025-02-07 04:06:21.869 ERROR [src.node.docker_mananger] Max retries reached for container 7ec972bfdd63. Exiting log stream.
2025-02-07 04:06:22.552 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:06:22.553 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-07 04:06:22.560 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-07 04:06:22.566 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
