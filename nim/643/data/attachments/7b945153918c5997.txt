2025-02-07 04:02:29.016 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-07 04:02:29.017 DEBUG [tests.conftest] Running test: test_store_node_not_connected_directly_to_lightpushing_node with id: 2025-02-07_04-02-29__aeb785ca-723a-469b-ae72-2f3b62f104e4
2025-02-07 04:02:29.017 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-07 04:02:29.017 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-07 04:02:29.017 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-07 04:02:29.025 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:02:29.025 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-07_04-02-29__aeb785ca-723a-469b-ae72-2f3b62f104e4__wakuorg_nwaku:latest.log
2025-02-07 04:02:29.031 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:02:29.031 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-07_04-02-29__aeb785ca-723a-469b-ae72-2f3b62f104e4__wakuorg_nwaku:latest.log
2025-02-07 04:02:29.036 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:02:29.036 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node3_2025-02-07_04-02-29__aeb785ca-723a-469b-ae72-2f3b62f104e4__wakuorg_nwaku:latest.log
2025-02-07 04:02:29.036 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-07 04:02:29.036 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-07 04:02:29.037 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:02:29.037 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:02:29.102 DEBUG [src.node.docker_mananger] Network waku created
2025-02-07 04:02:29.102 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.104.17
2025-02-07 04:02:29.102 DEBUG [src.node.docker_mananger] Generated ports ['42616', '42617', '42618', '42619', '42620']
2025-02-07 04:02:29.102 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:02:29.103 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:02:29.103 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:02:29.103 DEBUG [src.node.docker_mananger] docker run -i -t -p 42616:42616 -p 42617:42617 -p 42618:42618 -p 42619:42619 -p 42620:42620 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42618 --rest-port=42616 --tcp-port=42617 --discv5-udp-port=42619 --rest-address=0.0.0.0 --nat=extip:172.18.104.17 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dad7615dedca5ac9a3be64ceeadbd3bcb5085e22b7bffd8d3848ada4e5c2eb30 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42620 --metrics-logging=true --lightpush=true
2025-02-07 04:02:31.223 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.104.17 waku ef04712e150829a2ae4e6b58e7ab99d9d16c5ef0e58f7dcf5e03d4a97a959468
2025-02-07 04:02:31.277 DEBUG [src.node.docker_mananger] Container started with ID ef04712e1508. Setting up logs at ./log/docker/node1_2025-02-07_04-02-29__aeb785ca-723a-469b-ae72-2f3b62f104e4__wakuorg_nwaku:latest.log
2025-02-07 04:02:31.277 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 42616
2025-02-07 04:02:31.277 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:02:32.278 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42616/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:02:32.281 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:02:32.281 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:02:32.281 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42616/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:02:32.284 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.104.17/tcp/42617/p2p/16Uiu2HAmDbRHA1E5oPUdvR1mfY9dyYgo1jPW9jcdZP9uym5HyFZB","/ip4/172.18.104.17/tcp/42618/ws/p2p/16Uiu2HAmDbRHA1E5oPUdvR1mfY9dyYgo1jPW9jcdZP9uym5HyFZB"],"enrUri":"enr:-L24QCiGjA0wwbU04WKCCPJF6UTW63Jv9UPaflFgPhfdDQkjAcY0gj4fdnfxY0nF0vPGHVR_tWj735pb2R9NE4yQmq8CgmlkgnY0gmlwhKwSaBGKbXVsdGlhZGRyc5YACASsEmgRBqZ5AAoErBJoEQamet0DgnJzhQADAQAAiXNlY3AyNTZrMaEDDfGM-iNQ34ezOOY6LQjtVUgiDJdnHkBv1a5Z7rFfOoKDdGNwgqZ5g3VkcIKme4V3YWt1Mgk"}'
2025-02-07 04:02:32.284 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:02:32.284 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:02:32.284 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:02:32.286 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:02:32.286 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.210.234
2025-02-07 04:02:32.286 DEBUG [src.node.docker_mananger] Generated ports ['19294', '19295', '19296', '19297', '19298']
2025-02-07 04:02:32.287 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:02:32.287 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:02:32.287 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:02:32.287 DEBUG [src.node.docker_mananger] docker run -i -t -p 19294:19294 -p 19295:19295 -p 19296:19296 -p 19297:19297 -p 19298:19298 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19296 --rest-port=19294 --tcp-port=19295 --discv5-udp-port=19297 --rest-address=0.0.0.0 --nat=extip:172.18.210.234 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0179d1b2b6a302a747ffd5eded71ecefaf1f325e294bcf8cea06905babfce995 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19298 --metrics-logging=true --lightpush=true --store=true --relay=true --discv5-bootstrap-node=enr:-L24QCiGjA0wwbU04WKCCPJF6UTW63Jv9UPaflFgPhfdDQkjAcY0gj4fdnfxY0nF0vPGHVR_tWj735pb2R9NE4yQmq8CgmlkgnY0gmlwhKwSaBGKbXVsdGlhZGRyc5YACASsEmgRBqZ5AAoErBJoEQamet0DgnJzhQADAQAAiXNlY3AyNTZrMaEDDfGM-iNQ34ezOOY6LQjtVUgiDJdnHkBv1a5Z7rFfOoKDdGNwgqZ5g3VkcIKme4V3YWt1Mgk --lightpushnode=/ip4/172.18.104.17/tcp/42617/p2p/16Uiu2HAmDbRHA1E5oPUdvR1mfY9dyYgo1jPW9jcdZP9uym5HyFZB
2025-02-07 04:02:32.507 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.210.234 waku 0ff6816295910e7d3cae9de8f343dc568835f0203c844725e9a0eb073d0e38fa
2025-02-07 04:02:32.561 DEBUG [src.node.docker_mananger] Container started with ID 0ff681629591. Setting up logs at ./log/docker/node2_2025-02-07_04-02-29__aeb785ca-723a-469b-ae72-2f3b62f104e4__wakuorg_nwaku:latest.log
2025-02-07 04:02:32.562 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 19294
2025-02-07 04:02:32.563 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:02:33.563 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19294/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:02:33.566 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:02:33.566 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:02:33.566 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19294/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:02:33.569 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.210.234/tcp/19295/p2p/16Uiu2HAkxjiAjRUxgc2yxw9cYm1GS85fNKwx6U1WAUAtNnwz3o6V","/ip4/172.18.210.234/tcp/19296/ws/p2p/16Uiu2HAkxjiAjRUxgc2yxw9cYm1GS85fNKwx6U1WAUAtNnwz3o6V"],"enrUri":"enr:-L24QOEmwbJk8deCWYM20iGd8LCMewZ-RD1aXKx1d_2cu2b8OaYlqDV8ceR24I0T0CqdM40CF4FzB0V7JVnDrnYC1MgCgmlkgnY0gmlwhKwS0uqKbXVsdGlhZGRyc5YACASsEtLqBktfAAoErBLS6gZLYN0DgnJzhQADAQAAiXNlY3AyNTZrMaECMTH9cI1Z2GYzu1noCL94rzZZw6syrN-ln1sTRF21ARaDdGNwgktfg3VkcIJLYYV3YWt1Mgs"}'
2025-02-07 04:02:33.569 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:02:33.569 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:02:33.569 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:02:33.571 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:02:33.571 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.9.53
2025-02-07 04:02:33.571 DEBUG [src.node.docker_mananger] Generated ports ['20371', '20372', '20373', '20374', '20375']
2025-02-07 04:02:33.571 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:02:33.571 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:02:33.571 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:02:33.572 DEBUG [src.node.docker_mananger] docker run -i -t -p 20371:20371 -p 20372:20372 -p 20373:20373 -p 20374:20374 -p 20375:20375 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20373 --rest-port=20371 --tcp-port=20372 --discv5-udp-port=20374 --rest-address=0.0.0.0 --nat=extip:172.18.9.53 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5ab61c8cd8c84fadfb80e2dffb4f10cf6eb4dfaa7bb7ddbd84a3b8d4bd55e20d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20375 --metrics-logging=true --relay=false --storenode=/ip4/172.18.210.234/tcp/19295/p2p/16Uiu2HAkxjiAjRUxgc2yxw9cYm1GS85fNKwx6U1WAUAtNnwz3o6V --discv5-bootstrap-node=enr:-L24QOEmwbJk8deCWYM20iGd8LCMewZ-RD1aXKx1d_2cu2b8OaYlqDV8ceR24I0T0CqdM40CF4FzB0V7JVnDrnYC1MgCgmlkgnY0gmlwhKwS0uqKbXVsdGlhZGRyc5YACASsEtLqBktfAAoErBLS6gZLYN0DgnJzhQADAQAAiXNlY3AyNTZrMaECMTH9cI1Z2GYzu1noCL94rzZZw6syrN-ln1sTRF21ARaDdGNwgktfg3VkcIJLYYV3YWt1Mgs
2025-02-07 04:02:33.814 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.9.53 waku 263de3a7e9ce379a5510ecc95045b5786233c5c63c40f861589f58a1ea37f79a
2025-02-07 04:02:33.862 DEBUG [src.node.docker_mananger] Container started with ID 263de3a7e9ce. Setting up logs at ./log/docker/node3_2025-02-07_04-02-29__aeb785ca-723a-469b-ae72-2f3b62f104e4__wakuorg_nwaku:latest.log
2025-02-07 04:02:33.863 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 20371
2025-02-07 04:02:33.864 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:02:34.864 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20371/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:02:34.867 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:02:34.867 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:02:34.867 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20371/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:02:34.869 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.9.53/tcp/20372/p2p/16Uiu2HAmSTjcvDSJZQc6Efo8aqSpSVGwpbdv5RjiPETG9rJcKxrT","/ip4/172.18.9.53/tcp/20373/ws/p2p/16Uiu2HAmSTjcvDSJZQc6Efo8aqSpSVGwpbdv5RjiPETG9rJcKxrT"],"enrUri":"enr:-L24QIBLTgKFpbJMmkQUTyh4PozBebyS-X67SOQroMibbiPLfBdnu4x_c8kJ1RNwgsNAS0hhUx-ZnrTB82yF2_qUWF0CgmlkgnY0gmlwhKwSCTWKbXVsdGlhZGRyc5YACASsEgk1Bk-UAAoErBIJNQZPld0DgnJzhQADAQAAiXNlY3AyNTZrMaEDzSGSewPixj0lic-ptb7NFMA1xDaKrYV9k9tKTnAsutCDdGNwgk-Ug3VkcIJPloV3YWt1MgA"}'
2025-02-07 04:02:34.870 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:02:34.870 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42616/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-07 04:02:34.874 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:02:34.875 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19294/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-07 04:02:34.879 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:02:34.881 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42616/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:02:34.884 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.210.234/tcp/19295/p2p/16Uiu2HAkxjiAjRUxgc2yxw9cYm1GS85fNKwx6U1WAUAtNnwz3o6V","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
2025-02-07 04:02:34.884 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19294/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:02:34.887 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.104.17/tcp/42617/p2p/16Uiu2HAmDbRHA1E5oPUdvR1mfY9dyYgo1jPW9jcdZP9uym5HyFZB","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
2025-02-07 04:02:34.887 DEBUG [src.libs.common] Sleeping for 30 seconds
2025-02-07 04:03:04.887 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42616/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1738900984887768320}}'
2025-02-07 04:03:04.900 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:03:04.900 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:03:05.900 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-07 04:03:05.901 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20371/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:03:05.943 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"3ca0fcfce61b54fd85d2","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x6fec705d1e12b974ecf547a0705b18ddcc5213bcf8ed9041552595bb827de56c"}]}'
2025-02-07 04:03:05.952 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-07 04:03:05.953 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-07 04:03:05.953 DEBUG [src.node.waku_node] Stopping container with id ef04712e1508
2025-02-07 04:03:06.982 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:03:06.982 DEBUG [src.node.waku_node] Stopping container with id 0ff681629591
2025-02-07 04:03:07.795 ERROR [src.node.docker_mananger] Max retries reached for container ef04712e1508. Exiting log stream.
2025-02-07 04:03:08.175 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:03:08.176 DEBUG [src.node.waku_node] Stopping container with id 263de3a7e9ce
2025-02-07 04:03:08.988 ERROR [src.node.docker_mananger] Max retries reached for container 0ff681629591. Exiting log stream.
2025-02-07 04:03:09.537 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:03:09.540 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-07 04:03:09.548 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-07 04:03:09.560 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-07 04:03:09.563 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
