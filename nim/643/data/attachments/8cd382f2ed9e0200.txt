2025-02-07 04:08:35.440 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-07 04:08:35.440 DEBUG [tests.conftest] Running test: test_relay_no_subscription with id: 2025-02-07_04-08-35__83b645e5-2d13-4500-9db5-54de6dfcbc07
2025-02-07 04:08:35.440 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-07 04:08:35.441 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-07 04:08:35.441 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2025-02-07 04:08:35.447 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:08:35.447 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-07_04-08-35__83b645e5-2d13-4500-9db5-54de6dfcbc07__wakuorg_nwaku:latest.log
2025-02-07 04:08:35.447 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:08:35.447 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:08:35.448 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:08:35.448 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.192.0
2025-02-07 04:08:35.448 DEBUG [src.node.docker_mananger] Generated ports ['26888', '26889', '26890', '26891', '26892']
2025-02-07 04:08:35.449 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:08:35.449 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:08:35.449 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:08:35.449 DEBUG [src.node.docker_mananger] docker run -i -t -p 26888:26888 -p 26889:26889 -p 26890:26890 -p 26891:26891 -p 26892:26892 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26890 --rest-port=26888 --tcp-port=26889 --discv5-udp-port=26891 --rest-address=0.0.0.0 --nat=extip:172.18.192.0 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5001866cbf6f9b5a3afeee0ca76da78b3ee0dca96dbf783cfd1c593b51eec0ca --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26892 --metrics-logging=true --relay=true
2025-02-07 04:08:35.667 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.192.0 waku fcd29327bd4e9a73e366042f8d6b87c3d1863521eafdbc89594de405873c3f50
2025-02-07 04:08:35.715 DEBUG [src.node.docker_mananger] Container started with ID fcd29327bd4e. Setting up logs at ./log/docker/node1_2025-02-07_04-08-35__83b645e5-2d13-4500-9db5-54de6dfcbc07__wakuorg_nwaku:latest.log
2025-02-07 04:08:35.716 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 26888
2025-02-07 04:08:35.716 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:08:36.246 ERROR [src.node.docker_mananger] Max retries reached for container 3a1bce2243e2. Exiting log stream.
2025-02-07 04:08:36.717 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26888/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:08:36.719 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:08:36.719 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:08:36.719 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26888/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:08:36.721 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.192.0/tcp/26889/p2p/16Uiu2HAmAdmQ5PAKjASdZ5RsTWPRwR3wppPJxeomVUU7pKPDeMyr","/ip4/172.18.192.0/tcp/26890/ws/p2p/16Uiu2HAmAdmQ5PAKjASdZ5RsTWPRwR3wppPJxeomVUU7pKPDeMyr"],"enrUri":"enr:-L24QJFw9Kbj51P3GaW-_Us09lXFDEgbe4YhFq89oHqg9as6GI-80U2Y1YZvN2Gaftd3FClYJPyFOXSZFX5kuQHErN0CgmlkgnY0gmlwhKwSwACKbXVsdGlhZGRyc5YACASsEsAABmkJAAoErBLAAAZpCt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC4fhmiBGPL8nzWRO5ZSdDnsGvPbuvorbwapUW_beKgfmDdGNwgmkJg3VkcIJpC4V3YWt1MgE"}'
2025-02-07 04:08:36.721 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:08:36.727 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:08:36.728 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-07_04-08-35__83b645e5-2d13-4500-9db5-54de6dfcbc07__wakuorg_nwaku:latest.log
2025-02-07 04:08:36.728 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:08:36.728 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:08:36.729 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:08:36.729 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.50.252
2025-02-07 04:08:36.730 DEBUG [src.node.docker_mananger] Generated ports ['8242', '8243', '8244', '8245', '8246']
2025-02-07 04:08:36.730 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:08:36.730 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:08:36.730 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:08:36.730 DEBUG [src.node.docker_mananger] docker run -i -t -p 8242:8242 -p 8243:8243 -p 8244:8244 -p 8245:8245 -p 8246:8246 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8244 --rest-port=8242 --tcp-port=8243 --discv5-udp-port=8245 --rest-address=0.0.0.0 --nat=extip:172.18.50.252 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=df3e9fd1dce92cc9e920226d8d323be90c3afc013b1d2b1b9d8cbebb95fc7dc9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8246 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QJFw9Kbj51P3GaW-_Us09lXFDEgbe4YhFq89oHqg9as6GI-80U2Y1YZvN2Gaftd3FClYJPyFOXSZFX5kuQHErN0CgmlkgnY0gmlwhKwSwACKbXVsdGlhZGRyc5YACASsEsAABmkJAAoErBLAAAZpCt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC4fhmiBGPL8nzWRO5ZSdDnsGvPbuvorbwapUW_beKgfmDdGNwgmkJg3VkcIJpC4V3YWt1MgE
2025-02-07 04:08:36.958 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.50.252 waku 2c608b342155963c29160d1d2b238322503bec71cf66c668953fda5ed61a2fec
2025-02-07 04:08:37.004 DEBUG [src.node.docker_mananger] Container started with ID 2c608b342155. Setting up logs at ./log/docker/node2_2025-02-07_04-08-35__83b645e5-2d13-4500-9db5-54de6dfcbc07__wakuorg_nwaku:latest.log
2025-02-07 04:08:37.005 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 8242
2025-02-07 04:08:37.005 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:08:38.006 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:8242/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:08:38.012 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:08:38.014 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:08:38.014 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:8242/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:08:38.020 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.50.252/tcp/8243/p2p/16Uiu2HAkytoLv7RFqn4CUr17JjsExp5Ub9UufBN9pANoM48ecVnW","/ip4/172.18.50.252/tcp/8244/ws/p2p/16Uiu2HAkytoLv7RFqn4CUr17JjsExp5Ub9UufBN9pANoM48ecVnW"],"enrUri":"enr:-L24QNDgenFFELbJJ9aX5WbnAc2ZSmK81QlrS_yc2Z-nvj8jN9F1LjDj6eK8quvaE_J_zevcWLEGbFHHJvEb_C30r6wCgmlkgnY0gmlwhKwSMvyKbXVsdGlhZGRyc5YACASsEjL8BiAzAAoErBIy_AYgNN0DgnJzhQADAQAAiXNlY3AyNTZrMaECQmHBmqnua-75ThJ7tD2kxD9eAskyklceWe9u7LL3GSeDdGNwgiAzg3VkcIIgNYV3YWt1MgE"}'
2025-02-07 04:08:38.020 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:08:38.021 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:8242/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.192.0/tcp/26889/p2p/16Uiu2HAmAdmQ5PAKjASdZ5RsTWPRwR3wppPJxeomVUU7pKPDeMyr"]'
2025-02-07 04:08:38.024 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:08:38.025 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:26888/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:08:38.027 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:26888/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Failed to publish: Node not subscribed to topic: /waku/2/rs/3/1'
2025-02-07 04:08:38.029 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-07 04:08:38.030 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-07 04:08:38.030 DEBUG [src.node.waku_node] Stopping container with id fcd29327bd4e
2025-02-07 04:08:39.200 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:08:39.201 DEBUG [src.node.waku_node] Stopping container with id 2c608b342155
2025-02-07 04:08:40.025 ERROR [src.node.docker_mananger] Max retries reached for container fcd29327bd4e. Exiting log stream.
2025-02-07 04:08:40.730 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:08:40.731 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-07 04:08:40.740 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-07 04:08:40.744 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
