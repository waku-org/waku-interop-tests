2025-02-07 04:05:59.068 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-07 04:05:59.068 DEBUG [tests.conftest] Running test: test_publishing_node_paused_and_unpaused with id: 2025-02-07_04-05-59__56a77e70-cc8e-4c6c-9410-7b2f1f51257a
2025-02-07 04:05:59.069 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-07 04:05:59.069 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-07 04:05:59.069 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-07 04:05:59.076 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:05:59.076 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-07_04-05-59__56a77e70-cc8e-4c6c-9410-7b2f1f51257a__wakuorg_nwaku:latest.log
2025-02-07 04:05:59.077 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:05:59.077 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:05:59.078 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:05:59.078 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.173.80
2025-02-07 04:05:59.079 DEBUG [src.node.docker_mananger] Generated ports ['37647', '37648', '37649', '37650', '37651']
2025-02-07 04:05:59.079 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:05:59.079 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:05:59.079 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:05:59.079 DEBUG [src.node.docker_mananger] docker run -i -t -p 37647:37647 -p 37648:37648 -p 37649:37649 -p 37650:37650 -p 37651:37651 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37649 --rest-port=37647 --tcp-port=37648 --discv5-udp-port=37650 --rest-address=0.0.0.0 --nat=extip:172.18.173.80 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b3e6a89cf0cdca99fab5d7979a12aec518eaa3efffe7ee9d33675a07faf2ffe1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37651 --metrics-logging=true --store=true --relay=true
2025-02-07 04:05:59.314 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.173.80 waku eb3620089728227f265b01c5e0481fcef4c012f7e8e08dac44bf52ff98c4adb1
2025-02-07 04:05:59.366 DEBUG [src.node.docker_mananger] Container started with ID eb3620089728. Setting up logs at ./log/docker/publishing_node1_2025-02-07_04-05-59__56a77e70-cc8e-4c6c-9410-7b2f1f51257a__wakuorg_nwaku:latest.log
2025-02-07 04:05:59.367 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 37647
2025-02-07 04:05:59.367 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:05:59.885 ERROR [src.node.docker_mananger] Max retries reached for container b053ea5a0df6. Exiting log stream.
2025-02-07 04:06:00.368 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37647/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:06:00.371 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:06:00.371 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:06:00.371 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37647/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:06:00.373 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.173.80/tcp/37648/p2p/16Uiu2HAm2DXYqPUaU6n2RpLSbBz3eq7yGweVqKMgw3AvA7VBroAx","/ip4/172.18.173.80/tcp/37649/ws/p2p/16Uiu2HAm2DXYqPUaU6n2RpLSbBz3eq7yGweVqKMgw3AvA7VBroAx"],"enrUri":"enr:-L24QOjwaTomO3vdJx7etwnkDi1GLS78e65VHyHLGpJjG8KSMCDquoD8bFsF-cMcz5UEJ16kNEldDem_RZzfoKZaWnICgmlkgnY0gmlwhKwSrVCKbXVsdGlhZGRyc5YACASsEq1QBpMQAAoErBKtUAaTEd0DgnJzhQADAQAAiXNlY3AyNTZrMaECZOVOfFfQqV_dAry--0GblyG6J3ApzwGNnwCTvp1Di4GDdGNwgpMQg3VkcIKTEoV3YWt1MgM"}'
2025-02-07 04:06:00.374 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:06:00.386 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:06:00.386 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-07_04-05-59__56a77e70-cc8e-4c6c-9410-7b2f1f51257a__wakuorg_nwaku:latest.log
2025-02-07 04:06:00.386 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:06:00.386 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:06:00.391 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:06:00.391 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.43.84
2025-02-07 04:06:00.391 DEBUG [src.node.docker_mananger] Generated ports ['63545', '63546', '63547', '63548', '63549']
2025-02-07 04:06:00.391 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:06:00.391 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:06:00.391 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:06:00.391 DEBUG [src.node.docker_mananger] docker run -i -t -p 63545:63545 -p 63546:63546 -p 63547:63547 -p 63548:63548 -p 63549:63549 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63547 --rest-port=63545 --tcp-port=63546 --discv5-udp-port=63548 --rest-address=0.0.0.0 --nat=extip:172.18.43.84 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=afa20fc1a8ccb7bb2e7acea0fecb112de4eacddb1deadadead45da2ea91a2398 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63549 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QOjwaTomO3vdJx7etwnkDi1GLS78e65VHyHLGpJjG8KSMCDquoD8bFsF-cMcz5UEJ16kNEldDem_RZzfoKZaWnICgmlkgnY0gmlwhKwSrVCKbXVsdGlhZGRyc5YACASsEq1QBpMQAAoErBKtUAaTEd0DgnJzhQADAQAAiXNlY3AyNTZrMaECZOVOfFfQqV_dAry--0GblyG6J3ApzwGNnwCTvp1Di4GDdGNwgpMQg3VkcIKTEoV3YWt1MgM --storenode=/ip4/172.18.173.80/tcp/37648/p2p/16Uiu2HAm2DXYqPUaU6n2RpLSbBz3eq7yGweVqKMgw3AvA7VBroAx --store=true --relay=true
2025-02-07 04:06:00.630 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.43.84 waku aeff9efa1c3ca5a8d7426a32eb4abcbb3133f8e74a8f71a56c1c295ddfa91c4c
2025-02-07 04:06:00.677 DEBUG [src.node.docker_mananger] Container started with ID aeff9efa1c3c. Setting up logs at ./log/docker/store_node1_2025-02-07_04-05-59__56a77e70-cc8e-4c6c-9410-7b2f1f51257a__wakuorg_nwaku:latest.log
2025-02-07 04:06:00.678 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 63545
2025-02-07 04:06:00.678 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:06:01.678 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63545/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:06:01.682 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:06:01.682 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:06:01.682 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63545/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:06:01.684 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.43.84/tcp/63546/p2p/16Uiu2HAmFd14xTUSSicgYAiFAReRVNRE2xeas55Do3hxb8DiFBhn","/ip4/172.18.43.84/tcp/63547/ws/p2p/16Uiu2HAmFd14xTUSSicgYAiFAReRVNRE2xeas55Do3hxb8DiFBhn"],"enrUri":"enr:-L24QO19Lp0I-PX5UdXm3pi5q0LOaIbvPQBGChxKGUMF8SEtB73XCzw1O23qD3pCzxYl8Maa-tm-z3dwI8WXIswVot4CgmlkgnY0gmlwhKwSK1SKbXVsdGlhZGRyc5YACASsEitUBvg6AAoErBIrVAb4O90DgnJzhQADAQAAiXNlY3AyNTZrMaEDLBC2If190J_QJmOYvpnplsCRG8LiOpOaaIhz0SY-haWDdGNwgvg6g3VkcIL4PIV3YWt1MgM"}'
2025-02-07 04:06:01.685 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:06:01.685 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63545/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.173.80/tcp/37648/p2p/16Uiu2HAm2DXYqPUaU6n2RpLSbBz3eq7yGweVqKMgw3AvA7VBroAx"]'
2025-02-07 04:06:01.688 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:06:01.688 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37647/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-07 04:06:01.691 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:06:01.691 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63545/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-07 04:06:01.693 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:06:01.694 DEBUG [src.steps.store] Relaying message
2025-02-07 04:06:01.695 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37647/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:06:01.701 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:06:01.701 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:06:01.902 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-07 04:06:01.903 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37647/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:06:01.906 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xb3f63322ba2c39ccf2df62782e41ef1d515c89022d3163652ab44eda8c0bc2f4"}]}'
2025-02-07 04:06:01.906 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-07 04:06:01.907 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63545/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:06:01.910 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xb3f63322ba2c39ccf2df62782e41ef1d515c89022d3163652ab44eda8c0bc2f4"}]}'
2025-02-07 04:06:01.911 DEBUG [src.node.waku_node] Pausing container with id eb3620089728
2025-02-07 04:06:01.919 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:06:02.919 DEBUG [src.node.waku_node] Unpause container with id eb3620089728
2025-02-07 04:06:02.929 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37647/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:06:02.932 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:06:02.933 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:06:02.933 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37647/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:06:02.935 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.173.80/tcp/37648/p2p/16Uiu2HAm2DXYqPUaU6n2RpLSbBz3eq7yGweVqKMgw3AvA7VBroAx","/ip4/172.18.173.80/tcp/37649/ws/p2p/16Uiu2HAm2DXYqPUaU6n2RpLSbBz3eq7yGweVqKMgw3AvA7VBroAx"],"enrUri":"enr:-L24QOjwaTomO3vdJx7etwnkDi1GLS78e65VHyHLGpJjG8KSMCDquoD8bFsF-cMcz5UEJ16kNEldDem_RZzfoKZaWnICgmlkgnY0gmlwhKwSrVCKbXVsdGlhZGRyc5YACASsEq1QBpMQAAoErBKtUAaTEd0DgnJzhQADAQAAiXNlY3AyNTZrMaECZOVOfFfQqV_dAry--0GblyG6J3ApzwGNnwCTvp1Di4GDdGNwgpMQg3VkcIKTEoV3YWt1MgM"}'
2025-02-07 04:06:02.935 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:06:02.935 DEBUG [src.steps.store] Relaying message
2025-02-07 04:06:02.935 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37647/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:06:02.941 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:06:02.941 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:06:03.142 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-07 04:06:03.143 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37647/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:06:03.146 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xb3f63322ba2c39ccf2df62782e41ef1d515c89022d3163652ab44eda8c0bc2f4"},{"messageHash":"0x814f18f2683c8293ccee77966e63262a414aa1dda1fb7e6d95b325603b16810b"}]}'
2025-02-07 04:06:03.146 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-07 04:06:03.147 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63545/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:06:03.150 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xb3f63322ba2c39ccf2df62782e41ef1d515c89022d3163652ab44eda8c0bc2f4"},{"messageHash":"0x814f18f2683c8293ccee77966e63262a414aa1dda1fb7e6d95b325603b16810b"}]}'
2025-02-07 04:06:03.150 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37647/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:06:03.153 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xb3f63322ba2c39ccf2df62782e41ef1d515c89022d3163652ab44eda8c0bc2f4"},{"messageHash":"0x814f18f2683c8293ccee77966e63262a414aa1dda1fb7e6d95b325603b16810b"}]}'
2025-02-07 04:06:03.153 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63545/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:06:03.156 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xb3f63322ba2c39ccf2df62782e41ef1d515c89022d3163652ab44eda8c0bc2f4"},{"messageHash":"0x814f18f2683c8293ccee77966e63262a414aa1dda1fb7e6d95b325603b16810b"}]}'
2025-02-07 04:06:03.158 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-07 04:06:03.159 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-07 04:06:03.159 DEBUG [src.node.waku_node] Stopping container with id eb3620089728
2025-02-07 04:06:03.883 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:06:03.883 DEBUG [src.node.waku_node] Stopping container with id aeff9efa1c3c
2025-02-07 04:06:04.696 ERROR [src.node.docker_mananger] Max retries reached for container eb3620089728. Exiting log stream.
2025-02-07 04:06:05.412 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:06:05.413 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-07 04:06:05.418 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-07 04:06:05.424 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
