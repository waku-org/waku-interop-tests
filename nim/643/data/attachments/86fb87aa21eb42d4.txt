2025-02-07 04:02:38.443 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-07 04:02:38.443 DEBUG [tests.conftest] Running test: test_lightpush with id: 2025-02-07_04-02-38__d08e21f5-1176-4788-b33e-af75f176521b
2025-02-07 04:02:38.443 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-07 04:02:38.444 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-07 04:02:38.444 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-07 04:02:38.444 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-07 04:02:38.444 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-07 04:02:38.451 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:02:38.451 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-07_04-02-38__d08e21f5-1176-4788-b33e-af75f176521b__wakuorg_nwaku:latest.log
2025-02-07 04:02:38.451 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:02:38.451 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:02:38.453 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:02:38.453 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.234.229
2025-02-07 04:02:38.453 DEBUG [src.node.docker_mananger] Generated ports ['23602', '23603', '23604', '23605', '23606']
2025-02-07 04:02:38.453 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:02:38.453 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:02:38.453 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:02:38.453 DEBUG [src.node.docker_mananger] docker run -i -t -p 23602:23602 -p 23603:23603 -p 23604:23604 -p 23605:23605 -p 23606:23606 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23604 --rest-port=23602 --tcp-port=23603 --discv5-udp-port=23605 --rest-address=0.0.0.0 --nat=extip:172.18.234.229 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=070bfd2a1cbefc058ed13e62d171b53a7e59e93c6e2fd762efb2f038f45fece8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23606 --metrics-logging=true --lightpush=true --relay=true
2025-02-07 04:02:38.679 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.234.229 waku 7bc43446dcbc6bfd71a0f746272bd95e3605d18603459bd872057a21e559bbcf
2025-02-07 04:02:38.730 DEBUG [src.node.docker_mananger] Container started with ID 7bc43446dcbc. Setting up logs at ./log/docker/node1_2025-02-07_04-02-38__d08e21f5-1176-4788-b33e-af75f176521b__wakuorg_nwaku:latest.log
2025-02-07 04:02:38.732 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 23602
2025-02-07 04:02:38.732 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:02:39.245 ERROR [src.node.docker_mananger] Max retries reached for container caa074132181. Exiting log stream.
2025-02-07 04:02:39.732 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23602/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:02:39.735 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:02:39.735 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:02:39.736 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23602/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:02:39.738 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.234.229/tcp/23603/p2p/16Uiu2HAm877eiJfw8RTZ4YB5KsxiVH4ip3rEqJc2sAakQChUJL59","/ip4/172.18.234.229/tcp/23604/ws/p2p/16Uiu2HAm877eiJfw8RTZ4YB5KsxiVH4ip3rEqJc2sAakQChUJL59"],"enrUri":"enr:-L24QAZJeGbCxrT72stj2YUYfPsmHLVKYdSOuLby3zV4RA4CTiZEVrdu5FbLJELVYPtK5gJRqllnR0qJGD-nwaumosYCgmlkgnY0gmlwhKwS6uWKbXVsdGlhZGRyc5YACASsEurlBlwzAAoErBLq5QZcNN0DgnJzhQADAQAAiXNlY3AyNTZrMaECvGbrxgrm7JghWBtsJ_07TYuHyaKBUQUvPl9NHwzZuDSDdGNwglwzg3VkcIJcNYV3YWt1Mgk"}'
2025-02-07 04:02:39.738 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:02:39.744 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:02:39.744 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-07_04-02-38__d08e21f5-1176-4788-b33e-af75f176521b__wakuorg_nwaku:latest.log
2025-02-07 04:02:39.745 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:02:39.745 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:02:39.746 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:02:39.746 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.81.246
2025-02-07 04:02:39.746 DEBUG [src.node.docker_mananger] Generated ports ['43400', '43401', '43402', '43403', '43404']
2025-02-07 04:02:39.747 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:02:39.747 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:02:39.747 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:02:39.747 DEBUG [src.node.docker_mananger] docker run -i -t -p 43400:43400 -p 43401:43401 -p 43402:43402 -p 43403:43403 -p 43404:43404 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=43402 --rest-port=43400 --tcp-port=43401 --discv5-udp-port=43403 --rest-address=0.0.0.0 --nat=extip:172.18.81.246 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a08f3ea24cbbdcac0cf68d84243ebbbb74ffbdda65cd7af1b1e0c097cfffd2dd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=43404 --metrics-logging=true --lightpush=false --relay=true --discv5-bootstrap-node=enr:-L24QAZJeGbCxrT72stj2YUYfPsmHLVKYdSOuLby3zV4RA4CTiZEVrdu5FbLJELVYPtK5gJRqllnR0qJGD-nwaumosYCgmlkgnY0gmlwhKwS6uWKbXVsdGlhZGRyc5YACASsEurlBlwzAAoErBLq5QZcNN0DgnJzhQADAQAAiXNlY3AyNTZrMaECvGbrxgrm7JghWBtsJ_07TYuHyaKBUQUvPl9NHwzZuDSDdGNwglwzg3VkcIJcNYV3YWt1Mgk
2025-02-07 04:02:39.979 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.81.246 waku da812c42cc91953b78b58a6d851f7cfdcc6ccc552bba9f6007ef4662d15eb1a2
2025-02-07 04:02:40.024 DEBUG [src.node.docker_mananger] Container started with ID da812c42cc91. Setting up logs at ./log/docker/node1_2025-02-07_04-02-38__d08e21f5-1176-4788-b33e-af75f176521b__wakuorg_nwaku:latest.log
2025-02-07 04:02:40.025 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 43400
2025-02-07 04:02:40.025 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:02:41.025 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43400/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:02:41.034 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:02:41.035 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:02:41.035 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43400/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:02:41.040 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.81.246/tcp/43401/p2p/16Uiu2HAmLLjARqsnKuAHcfDbwzJXEdX7DH5kGRdmxcMLSnska7Me","/ip4/172.18.81.246/tcp/43402/ws/p2p/16Uiu2HAmLLjARqsnKuAHcfDbwzJXEdX7DH5kGRdmxcMLSnska7Me"],"enrUri":"enr:-L24QIQnCmLyahksSPz1moISY7Jtzv6Xf0pGJetAg5AMuqP4KbraopbznEfKknKeVZVo6a8wkrCIza-NbXBXzkaH95sCgmlkgnY0gmlwhKwSUfaKbXVsdGlhZGRyc5YACASsElH2BqmJAAoErBJR9gapit0DgnJzhQADAQAAiXNlY3AyNTZrMaEDci_eWj5_9ivJAjLSHQ_MkXONwMVBn8At1FxYS1mlvF2DdGNwgqmJg3VkcIKpi4V3YWt1MgE"}'
2025-02-07 04:02:41.040 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:02:41.047 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:02:41.047 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-07_04-02-38__d08e21f5-1176-4788-b33e-af75f176521b__wakuorg_nwaku:latest.log
2025-02-07 04:02:41.047 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:02:41.048 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:02:41.049 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:02:41.049 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.1.193
2025-02-07 04:02:41.049 DEBUG [src.node.docker_mananger] Generated ports ['29386', '29387', '29388', '29389', '29390']
2025-02-07 04:02:41.049 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:02:41.049 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:02:41.049 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:02:41.050 DEBUG [src.node.docker_mananger] docker run -i -t -p 29386:29386 -p 29387:29387 -p 29388:29388 -p 29389:29389 -p 29390:29390 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29388 --rest-port=29386 --tcp-port=29387 --discv5-udp-port=29389 --rest-address=0.0.0.0 --nat=extip:172.18.1.193 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c0eead862bec2a659f3e4ba0f9fec886cdcbef6d7ad5fbdebcccb53673dc6bbf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29390 --metrics-logging=true --lightpush=true --relay=false --discv5-bootstrap-node=enr:-L24QAZJeGbCxrT72stj2YUYfPsmHLVKYdSOuLby3zV4RA4CTiZEVrdu5FbLJELVYPtK5gJRqllnR0qJGD-nwaumosYCgmlkgnY0gmlwhKwS6uWKbXVsdGlhZGRyc5YACASsEurlBlwzAAoErBLq5QZcNN0DgnJzhQADAQAAiXNlY3AyNTZrMaECvGbrxgrm7JghWBtsJ_07TYuHyaKBUQUvPl9NHwzZuDSDdGNwglwzg3VkcIJcNYV3YWt1Mgk --lightpushnode=/ip4/172.18.234.229/tcp/23603/p2p/16Uiu2HAm877eiJfw8RTZ4YB5KsxiVH4ip3rEqJc2sAakQChUJL59
2025-02-07 04:02:41.268 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.1.193 waku 1b45e548bf3891610d24580ea11247fa7b460b27e8c163b67a214f0b819b8b6c
2025-02-07 04:02:41.315 DEBUG [src.node.docker_mananger] Container started with ID 1b45e548bf38. Setting up logs at ./log/docker/node1_2025-02-07_04-02-38__d08e21f5-1176-4788-b33e-af75f176521b__wakuorg_nwaku:latest.log
2025-02-07 04:02:41.315 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 29386
2025-02-07 04:02:41.315 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:02:42.316 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29386/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:02:42.319 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:02:42.319 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:02:42.320 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29386/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:02:42.322 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.1.193/tcp/29387/p2p/16Uiu2HAmAijq8tjhrCBFb8N4kr6iNQ3kjEx85siDLqmsAd5RzzNJ","/ip4/172.18.1.193/tcp/29388/ws/p2p/16Uiu2HAmAijq8tjhrCBFb8N4kr6iNQ3kjEx85siDLqmsAd5RzzNJ"],"enrUri":"enr:-L24QEVm_Tw-S6QO0G6yhOC85Pa4dcfkzHAqHnMhUFZboSsZIGSQaD1jmHokfMem8l7B_Fw5Ch-16fv71L6KBfyjSX8CgmlkgnY0gmlwhKwSAcGKbXVsdGlhZGRyc5YACASsEgHBBnLLAAoErBIBwQZyzN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC4z6IHb83CETJvvuy5xMMrLh3jMRqtzz2WK0v9Xl3Fj-DdGNwgnLLg3VkcIJyzYV3YWt1Mgg"}'
2025-02-07 04:02:42.322 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:02:42.322 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23602/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-07 04:02:42.328 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:02:42.328 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:43400/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-07 04:02:42.334 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:02:42.335 DEBUG [src.steps.light_push] Lightpushing message
2025-02-07 04:02:42.335 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29386/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": 1738900962334963200}}'
2025-02-07 04:02:42.387 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:02:42.389 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-07 04:02:42.491 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-07 04:02:42.491 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23602/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:02:42.494 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738900962334963200,"ephemeral":false}]'
2025-02-07 04:02:42.495 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-07 04:02:42.496 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43400/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:02:42.498 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738900962334963200,"ephemeral":false}]'
2025-02-07 04:02:42.501 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-07 04:02:42.501 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-07 04:02:42.502 DEBUG [src.node.waku_node] Stopping container with id 7bc43446dcbc
2025-02-07 04:02:43.220 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:02:43.220 DEBUG [src.node.waku_node] Stopping container with id da812c42cc91
2025-02-07 04:02:44.054 ERROR [src.node.docker_mananger] Max retries reached for container 7bc43446dcbc. Exiting log stream.
2025-02-07 04:02:44.717 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:02:44.717 DEBUG [src.node.waku_node] Stopping container with id 1b45e548bf38
2025-02-07 04:02:45.529 ERROR [src.node.docker_mananger] Max retries reached for container da812c42cc91. Exiting log stream.
2025-02-07 04:02:46.210 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:02:46.212 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-07 04:02:46.227 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-07 04:02:46.241 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-07 04:02:46.255 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
