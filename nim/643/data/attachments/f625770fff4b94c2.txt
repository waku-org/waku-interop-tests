2025-02-07 04:08:10.989 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-07 04:08:10.990 DEBUG [tests.conftest] Running test: test_main_node_only_lightpush__peer_only_lightpush with id: 2025-02-07_04-08-10__8231fb31-c76d-40a2-acd1-a0e4073d73ec
2025-02-07 04:08:10.990 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-07 04:08:10.990 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-07 04:08:10.996 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:08:10.997 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-07_04-08-10__8231fb31-c76d-40a2-acd1-a0e4073d73ec__wakuorg_nwaku:latest.log
2025-02-07 04:08:10.997 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:08:10.997 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:08:10.998 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:08:10.998 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.39.62
2025-02-07 04:08:10.998 DEBUG [src.node.docker_mananger] Generated ports ['25169', '25170', '25171', '25172', '25173']
2025-02-07 04:08:10.998 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:08:10.999 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:08:10.999 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:08:10.999 DEBUG [src.node.docker_mananger] docker run -i -t -p 25169:25169 -p 25170:25170 -p 25171:25171 -p 25172:25172 -p 25173:25173 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25171 --rest-port=25169 --tcp-port=25170 --discv5-udp-port=25172 --rest-address=0.0.0.0 --nat=extip:172.18.39.62 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5d0d7ce9b7fef7b118dfaf7d0db2a0993b50ed3ecdcfb6dcf75c3bce8a3ccc79 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25173 --metrics-logging=true --lightpush=true --relay=false
2025-02-07 04:08:11.224 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.39.62 waku 6e62757d1e62327287e51813c4e0abe9f582f03a532fccb0a3001751e1db2ae9
2025-02-07 04:08:11.271 DEBUG [src.node.docker_mananger] Container started with ID 6e62757d1e62. Setting up logs at ./log/docker/receiving_node1_2025-02-07_04-08-10__8231fb31-c76d-40a2-acd1-a0e4073d73ec__wakuorg_nwaku:latest.log
2025-02-07 04:08:11.272 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 25169
2025-02-07 04:08:11.273 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:08:11.785 ERROR [src.node.docker_mananger] Max retries reached for container 9faa57eab61e. Exiting log stream.
2025-02-07 04:08:12.273 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25169/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:08:12.275 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:08:12.276 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:08:12.276 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25169/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:08:12.278 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.39.62/tcp/25170/p2p/16Uiu2HAmL9vSyc673a8CsuS3apnQ9MBJknJuBeUkJkDf3MTVdKFs","/ip4/172.18.39.62/tcp/25171/ws/p2p/16Uiu2HAmL9vSyc673a8CsuS3apnQ9MBJknJuBeUkJkDf3MTVdKFs"],"enrUri":"enr:-L24QCQY86RDR2N5fGh7O_joWKScUHBCPgejJGh66vkllXwafhk2VGDu93-1HnNtctplPRgqDNgGjPI55dnzTi3MsfMCgmlkgnY0gmlwhKwSJz6KbXVsdGlhZGRyc5YACASsEic-BmJSAAoErBInPgZiU90DgnJzhQADAQAAiXNlY3AyNTZrMaEDb2s9cIpTEMBInXnnnLoZdv-HgCF5Y-xZFxNMqN0AcYaDdGNwgmJSg3VkcIJiVIV3YWt1Mgg"}'
2025-02-07 04:08:12.278 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:08:12.284 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:08:12.284 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-07_04-08-10__8231fb31-c76d-40a2-acd1-a0e4073d73ec__wakuorg_nwaku:latest.log
2025-02-07 04:08:12.284 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:08:12.284 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:08:12.286 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:08:12.286 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.167.253
2025-02-07 04:08:12.286 DEBUG [src.node.docker_mananger] Generated ports ['32591', '32592', '32593', '32594', '32595']
2025-02-07 04:08:12.286 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:08:12.286 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:08:12.286 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:08:12.286 DEBUG [src.node.docker_mananger] docker run -i -t -p 32591:32591 -p 32592:32592 -p 32593:32593 -p 32594:32594 -p 32595:32595 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32593 --rest-port=32591 --tcp-port=32592 --discv5-udp-port=32594 --rest-address=0.0.0.0 --nat=extip:172.18.167.253 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=335c6c80dbc45b1aaa07b35b81efcbddae5bba5052631cbd4b3bbee9d8f3dcfd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32595 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QCQY86RDR2N5fGh7O_joWKScUHBCPgejJGh66vkllXwafhk2VGDu93-1HnNtctplPRgqDNgGjPI55dnzTi3MsfMCgmlkgnY0gmlwhKwSJz6KbXVsdGlhZGRyc5YACASsEic-BmJSAAoErBInPgZiU90DgnJzhQADAQAAiXNlY3AyNTZrMaEDb2s9cIpTEMBInXnnnLoZdv-HgCF5Y-xZFxNMqN0AcYaDdGNwgmJSg3VkcIJiVIV3YWt1Mgg --lightpushnode=/ip4/172.18.39.62/tcp/25170/p2p/16Uiu2HAmL9vSyc673a8CsuS3apnQ9MBJknJuBeUkJkDf3MTVdKFs --lightpush=true --relay=false
2025-02-07 04:08:12.510 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.167.253 waku c1aeec37acbc946ea7547f4826ea5a61ee6dbfb4b5bd1226c2d5abe95027339c
2025-02-07 04:08:12.560 DEBUG [src.node.docker_mananger] Container started with ID c1aeec37acbc. Setting up logs at ./log/docker/lightpush_node1_2025-02-07_04-08-10__8231fb31-c76d-40a2-acd1-a0e4073d73ec__wakuorg_nwaku:latest.log
2025-02-07 04:08:12.560 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 32591
2025-02-07 04:08:12.560 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:08:13.560 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32591/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:08:13.563 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:08:13.563 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:08:13.563 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32591/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:08:13.565 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.167.253/tcp/32592/p2p/16Uiu2HAmCKXqeVnYJ6bYmmQ5mpgfdjqg7n52QDAS1KYFRGEDYQrg","/ip4/172.18.167.253/tcp/32593/ws/p2p/16Uiu2HAmCKXqeVnYJ6bYmmQ5mpgfdjqg7n52QDAS1KYFRGEDYQrg"],"enrUri":"enr:-L24QHZQpkL_5v5cvx0v-Nad8bVe9X86XoGPmjMdQT3PqSIrRSCWWfveENJ7QYATo81clG5eoQXuWsNY_SA-Pks9y3QCgmlkgnY0gmlwhKwSp_2KbXVsdGlhZGRyc5YACASsEqf9Bn9QAAoErBKn_QZ_Ud0DgnJzhQADAQAAiXNlY3AyNTZrMaEC-wP9C2YanrGJ6ziXoBz5Cgq0uPfTsx73bcWfrxg5X_WDdGNwgn9Qg3VkcIJ_UoV3YWt1Mgg"}'
2025-02-07 04:08:13.566 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:08:13.566 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32591/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.39.62/tcp/25170/p2p/16Uiu2HAmL9vSyc673a8CsuS3apnQ9MBJknJuBeUkJkDf3MTVdKFs"]'
2025-02-07 04:08:13.602 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:08:13.603 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32591/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738901293603674112}}'
2025-02-07 04:08:13.622 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:32591/lightpush/v1/message. Response content: b'Failed to request a message push: no waku relay found'
2025-02-07 04:08:13.623 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-07 04:08:13.625 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-07 04:08:13.625 DEBUG [src.node.waku_node] Stopping container with id 6e62757d1e62
2025-02-07 04:08:14.452 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:08:14.453 DEBUG [src.node.waku_node] Stopping container with id c1aeec37acbc
2025-02-07 04:08:15.274 ERROR [src.node.docker_mananger] Max retries reached for container 6e62757d1e62. Exiting log stream.
2025-02-07 04:08:15.510 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:08:15.510 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-07 04:08:15.518 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-07 04:08:15.521 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
