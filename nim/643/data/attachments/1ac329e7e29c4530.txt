2025-02-07 04:04:44.125 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-07 04:04:44.125 DEBUG [tests.conftest] Running test: test_main_node_only_lightpush__peer_only_filter with id: 2025-02-07_04-04-44__830ffacd-4384-4507-8f8a-bb4d38d308b0
2025-02-07 04:04:44.126 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-07 04:04:44.126 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-07 04:04:44.135 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:04:44.136 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-07_04-04-44__830ffacd-4384-4507-8f8a-bb4d38d308b0__wakuorg_nwaku:latest.log
2025-02-07 04:04:44.136 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:04:44.136 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:04:44.137 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:04:44.137 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.216.250
2025-02-07 04:04:44.138 DEBUG [src.node.docker_mananger] Generated ports ['26353', '26354', '26355', '26356', '26357']
2025-02-07 04:04:44.138 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:04:44.138 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:04:44.138 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:04:44.138 DEBUG [src.node.docker_mananger] docker run -i -t -p 26353:26353 -p 26354:26354 -p 26355:26355 -p 26356:26356 -p 26357:26357 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26355 --rest-port=26353 --tcp-port=26354 --discv5-udp-port=26356 --rest-address=0.0.0.0 --nat=extip:172.18.216.250 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=10df4f1dccb46cb5cfd5d09cfccdee3a65de00bbc58170ffc2e6c99cdc51964a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26357 --metrics-logging=true --lightpush=false --relay=false --filter=true
2025-02-07 04:04:44.374 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.216.250 waku 88efb07e5a42f242fae38852c58a102774606bbbd8b8167f76b6a133383a56e9
2025-02-07 04:04:44.424 DEBUG [src.node.docker_mananger] Container started with ID 88efb07e5a42. Setting up logs at ./log/docker/receiving_node1_2025-02-07_04-04-44__830ffacd-4384-4507-8f8a-bb4d38d308b0__wakuorg_nwaku:latest.log
2025-02-07 04:04:44.424 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 26353
2025-02-07 04:04:44.424 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:04:44.925 ERROR [src.node.docker_mananger] Max retries reached for container 9608dbca8479. Exiting log stream.
2025-02-07 04:04:45.425 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26353/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:04:45.428 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:04:45.428 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:04:45.428 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26353/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:04:45.430 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.216.250/tcp/26354/p2p/16Uiu2HAmSAsRD9pgCSfVczbV6LAKfbNo9d5wUEGJvA4pQxgBXo4z","/ip4/172.18.216.250/tcp/26355/ws/p2p/16Uiu2HAmSAsRD9pgCSfVczbV6LAKfbNo9d5wUEGJvA4pQxgBXo4z"],"enrUri":"enr:-L24QGA2TARuR2rkji4b8xpRjA77Wszchq1tnNNfVi1DUgpFBVlKTkQCGcvgNumP5nvE40Of3RWsVdKJ85kx2ntBwDsCgmlkgnY0gmlwhKwS2PqKbXVsdGlhZGRyc5YACASsEtj6BmbyAAoErBLY-gZm890DgnJzhQADAQAAiXNlY3AyNTZrMaEDyM-EDK7D9jn253h3PXk39n6GD6MupSaldG2w-RtBXk-DdGNwgmbyg3VkcIJm9IV3YWt1MgQ"}'
2025-02-07 04:04:45.430 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:04:45.437 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:04:45.437 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-07_04-04-44__830ffacd-4384-4507-8f8a-bb4d38d308b0__wakuorg_nwaku:latest.log
2025-02-07 04:04:45.437 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:04:45.437 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:04:45.438 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:04:45.439 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.108.198
2025-02-07 04:04:45.439 DEBUG [src.node.docker_mananger] Generated ports ['6175', '6176', '6177', '6178', '6179']
2025-02-07 04:04:45.439 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:04:45.439 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:04:45.439 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:04:45.439 DEBUG [src.node.docker_mananger] docker run -i -t -p 6175:6175 -p 6176:6176 -p 6177:6177 -p 6178:6178 -p 6179:6179 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6177 --rest-port=6175 --tcp-port=6176 --discv5-udp-port=6178 --rest-address=0.0.0.0 --nat=extip:172.18.108.198 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7337fb5caacd7c2d3e30ededec1becf1fceb4f31ed5aedda98cce043daa9abbe --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6179 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QGA2TARuR2rkji4b8xpRjA77Wszchq1tnNNfVi1DUgpFBVlKTkQCGcvgNumP5nvE40Of3RWsVdKJ85kx2ntBwDsCgmlkgnY0gmlwhKwS2PqKbXVsdGlhZGRyc5YACASsEtj6BmbyAAoErBLY-gZm890DgnJzhQADAQAAiXNlY3AyNTZrMaEDyM-EDK7D9jn253h3PXk39n6GD6MupSaldG2w-RtBXk-DdGNwgmbyg3VkcIJm9IV3YWt1MgQ --lightpushnode=/ip4/172.18.216.250/tcp/26354/p2p/16Uiu2HAmSAsRD9pgCSfVczbV6LAKfbNo9d5wUEGJvA4pQxgBXo4z --lightpush=true --relay=false
2025-02-07 04:04:45.673 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.108.198 waku b8c89c1b5527ff9bf569c75202cab79b07585e791879cd582abcf88a408e7d52
2025-02-07 04:04:45.726 DEBUG [src.node.docker_mananger] Container started with ID b8c89c1b5527. Setting up logs at ./log/docker/lightpush_node1_2025-02-07_04-04-44__830ffacd-4384-4507-8f8a-bb4d38d308b0__wakuorg_nwaku:latest.log
2025-02-07 04:04:45.727 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 6175
2025-02-07 04:04:45.727 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:04:46.727 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6175/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:04:46.730 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:04:46.731 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:04:46.731 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6175/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:04:46.733 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.108.198/tcp/6176/p2p/16Uiu2HAkzHFiJw2djSqt7HEY287KyciSbYDitAHdNTFJKKXf7wGq","/ip4/172.18.108.198/tcp/6177/ws/p2p/16Uiu2HAkzHFiJw2djSqt7HEY287KyciSbYDitAHdNTFJKKXf7wGq"],"enrUri":"enr:-L24QAnYdZR1vVc9H8RkXnHz451s3icex8S-ZhNo6lFm5g4tf7BBKBIgzlD6y8YZNqHsRNWj9PdQGm4p-ps3wq8YIL8CgmlkgnY0gmlwhKwSbMaKbXVsdGlhZGRyc5YACASsEmzGBhggAAoErBJsxgYYId0DgnJzhQADAQAAiXNlY3AyNTZrMaECSCJZc8X6Ub3VO7MouAqD7uOEWF-DIbzo1V2SRVJGmb6DdGNwghggg3VkcIIYIoV3YWt1Mgg"}'
2025-02-07 04:04:46.733 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:04:46.734 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6175/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.216.250/tcp/26354/p2p/16Uiu2HAmSAsRD9pgCSfVczbV6LAKfbNo9d5wUEGJvA4pQxgBXo4z"]'
2025-02-07 04:04:46.768 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:04:46.769 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6175/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738901086769106688}}'
2025-02-07 04:04:46.791 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:6175/lightpush/v1/message. Response content: b'Failed to request a message push: dial_failure'
2025-02-07 04:04:46.793 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-07 04:04:46.794 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-07 04:04:46.794 DEBUG [src.node.waku_node] Stopping container with id 88efb07e5a42
2025-02-07 04:04:47.908 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:04:47.908 DEBUG [src.node.waku_node] Stopping container with id b8c89c1b5527
2025-02-07 04:04:48.720 ERROR [src.node.docker_mananger] Max retries reached for container 88efb07e5a42. Exiting log stream.
2025-02-07 04:04:49.409 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:04:49.411 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-07 04:04:49.413 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-07 04:04:49.417 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
