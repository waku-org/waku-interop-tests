2025-02-07 04:04:13.516 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-07 04:04:13.516 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_with_very_large_request_id with id: 2025-02-07_04-04-13__b527ceb6-363c-4707-96bc-1435d34e850a
2025-02-07 04:04:13.517 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-07 04:04:13.517 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-07 04:04:13.517 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-07 04:04:13.523 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:04:13.523 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-07_04-04-13__b527ceb6-363c-4707-96bc-1435d34e850a__wakuorg_nwaku:latest.log
2025-02-07 04:04:13.523 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:04:13.523 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:04:13.524 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:04:13.525 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.241.46
2025-02-07 04:04:13.525 DEBUG [src.node.docker_mananger] Generated ports ['9134', '9135', '9136', '9137', '9138']
2025-02-07 04:04:13.525 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:04:13.525 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:04:13.525 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:04:13.525 DEBUG [src.node.docker_mananger] docker run -i -t -p 9134:9134 -p 9135:9135 -p 9136:9136 -p 9137:9137 -p 9138:9138 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=9136 --rest-port=9134 --tcp-port=9135 --discv5-udp-port=9137 --rest-address=0.0.0.0 --nat=extip:172.18.241.46 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a9f15bc2bcb88fd9ffb3a5ba97b8f5fe3b3e7fbeeeb8603f66e0596fc7ebd7a4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=9138 --metrics-logging=true --relay=true --filter=true
2025-02-07 04:04:13.743 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.241.46 waku 0d08dc458c4bd2da0a451482fb04d0b650b3d5bb7596b9a29d2bc8b772e6ebd6
2025-02-07 04:04:13.793 DEBUG [src.node.docker_mananger] Container started with ID 0d08dc458c4b. Setting up logs at ./log/docker/node1_2025-02-07_04-04-13__b527ceb6-363c-4707-96bc-1435d34e850a__wakuorg_nwaku:latest.log
2025-02-07 04:04:13.795 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 9134
2025-02-07 04:04:13.795 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:04:14.323 ERROR [src.node.docker_mananger] Max retries reached for container dc63051ecb4f. Exiting log stream.
2025-02-07 04:04:14.795 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9134/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:04:14.798 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:04:14.799 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:04:14.799 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9134/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:04:14.801 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.241.46/tcp/9135/p2p/16Uiu2HAmH73gWP4cAKdrVwSNSrecLGhKLxxgoDuQ5qc3ggkS3d7T","/ip4/172.18.241.46/tcp/9136/ws/p2p/16Uiu2HAmH73gWP4cAKdrVwSNSrecLGhKLxxgoDuQ5qc3ggkS3d7T"],"enrUri":"enr:-L24QNLMiv_LwT-QHBrWsALd64q1Gm4iIQNIAAOPhFW_gEA2X8dMUexS6yBuKL83txYj25iHRWDlYWTOV2fZeUI06CoCgmlkgnY0gmlwhKwS8S6KbXVsdGlhZGRyc5YACASsEvEuBiOvAAoErBLxLgYjsN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDQhudkRfKjfp-H1M5ycavqBEURuRDwlbTMzUBbffjxIaDdGNwgiOvg3VkcIIjsYV3YWt1MgU"}'
2025-02-07 04:04:14.801 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:04:14.802 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-07 04:04:14.808 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:04:14.808 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-07_04-04-13__b527ceb6-363c-4707-96bc-1435d34e850a__wakuorg_nwaku:latest.log
2025-02-07 04:04:14.808 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:04:14.808 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:04:14.810 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:04:14.810 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.202.89
2025-02-07 04:04:14.810 DEBUG [src.node.docker_mananger] Generated ports ['33551', '33552', '33553', '33554', '33555']
2025-02-07 04:04:14.810 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:04:14.810 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:04:14.811 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:04:14.811 DEBUG [src.node.docker_mananger] docker run -i -t -p 33551:33551 -p 33552:33552 -p 33553:33553 -p 33554:33554 -p 33555:33555 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=33553 --rest-port=33551 --tcp-port=33552 --discv5-udp-port=33554 --rest-address=0.0.0.0 --nat=extip:172.18.202.89 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fcad9ddec75e8de47bbc4ebaab3ecb2fedbaacf305bace9ef9dcf30f30b661fc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=33555 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QNLMiv_LwT-QHBrWsALd64q1Gm4iIQNIAAOPhFW_gEA2X8dMUexS6yBuKL83txYj25iHRWDlYWTOV2fZeUI06CoCgmlkgnY0gmlwhKwS8S6KbXVsdGlhZGRyc5YACASsEvEuBiOvAAoErBLxLgYjsN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDQhudkRfKjfp-H1M5ycavqBEURuRDwlbTMzUBbffjxIaDdGNwgiOvg3VkcIIjsYV3YWt1MgU --filternode=/ip4/172.18.241.46/tcp/9135/p2p/16Uiu2HAmH73gWP4cAKdrVwSNSrecLGhKLxxgoDuQ5qc3ggkS3d7T
2025-02-07 04:04:15.032 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.202.89 waku 0539a4d6771b1391f19eadd4e9c20a8fb7aab6704d570818337c4d4b47b83e10
2025-02-07 04:04:15.077 DEBUG [src.node.docker_mananger] Container started with ID 0539a4d6771b. Setting up logs at ./log/docker/node2_2025-02-07_04-04-13__b527ceb6-363c-4707-96bc-1435d34e850a__wakuorg_nwaku:latest.log
2025-02-07 04:04:15.077 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 33551
2025-02-07 04:04:15.078 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:04:16.078 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33551/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:04:16.081 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:04:16.081 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:04:16.082 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33551/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:04:16.084 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.202.89/tcp/33552/p2p/16Uiu2HAkyXKexi3RGRYxai8q82pLbifdu67jMbMVPi5y5TugN74y","/ip4/172.18.202.89/tcp/33553/ws/p2p/16Uiu2HAkyXKexi3RGRYxai8q82pLbifdu67jMbMVPi5y5TugN74y"],"enrUri":"enr:-L24QLvYbnQVz_lwHA0a_YfbTxVxKAiQz1C4dfA5iiAPpXwfPsOXzw3g7EcJe8sn4l66BCPcRdCgTn0kM9SVsQ8ar0kCgmlkgnY0gmlwhKwSylmKbXVsdGlhZGRyc5YACASsEspZBoMQAAoErBLKWQaDEd0DgnJzhQADAQAAiXNlY3AyNTZrMaECPOFAWNecKIO-x-xCXvSmcNKHeAkTcZBbtweumlZNN3aDdGNwgoMQg3VkcIKDEoV3YWt1MgA"}'
2025-02-07 04:04:16.084 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:04:16.084 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33551/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.241.46/tcp/9135/p2p/16Uiu2HAmH73gWP4cAKdrVwSNSrecLGhKLxxgoDuQ5qc3ggkS3d7T"]'
2025-02-07 04:04:16.122 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:04:16.122 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-07 04:04:16.123 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9134/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-07 04:04:16.139 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:04:16.141 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33551/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "81df494d-fb28-413b-b0b2-cd0ef6e097f3", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-07 04:04:16.154 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"81df494d-fb28-413b-b0b2-cd0ef6e097f3","statusDesc":"OK"}'
2025-02-07 04:04:16.155 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9134/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:04:16.162 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:04:16.162 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-07 04:04:16.263 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-07 04:04:16.263 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33551/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:04:16.265 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1738901056155513088,"ephemeral":false}]'
2025-02-07 04:04:16.267 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:33551/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "12345678901234567890123456789012345678901234567890", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-07 04:04:16.275 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"12345678901234567890123456789012345678901234567890","statusDesc":"OK"}'
2025-02-07 04:04:16.275 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9134/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:04:16.278 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:04:16.279 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-07 04:04:16.379 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-07 04:04:16.379 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33551/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:04:16.381 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:33551/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto. Response content: b'Not subscribed to topic: /test/1/waku-filter/proto'
2025-02-07 04:04:16.384 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-07 04:04:16.385 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-07 04:04:16.385 DEBUG [src.node.waku_node] Stopping container with id 0d08dc458c4b
2025-02-07 04:04:17.355 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:04:17.356 DEBUG [src.node.waku_node] Stopping container with id 0539a4d6771b
2025-02-07 04:04:18.169 ERROR [src.node.docker_mananger] Max retries reached for container 0d08dc458c4b. Exiting log stream.
2025-02-07 04:04:18.848 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:04:18.848 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-07 04:04:18.854 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-07 04:04:18.859 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
