2025-02-07 04:03:42.364 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-07 04:03:42.364 DEBUG [tests.conftest] Running test: test_light_push_with_missing_content_topic with id: 2025-02-07_04-03-42__03540f17-5412-4e67-a8c4-4dd6e02f5b99
2025-02-07 04:03:42.365 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-07 04:03:42.365 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-07 04:03:42.371 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:03:42.372 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-07_04-03-42__03540f17-5412-4e67-a8c4-4dd6e02f5b99__wakuorg_nwaku:latest.log
2025-02-07 04:03:42.372 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:03:42.372 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:03:42.373 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:03:42.373 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.6.20
2025-02-07 04:03:42.374 DEBUG [src.node.docker_mananger] Generated ports ['1146', '1147', '1148', '1149', '1150']
2025-02-07 04:03:42.374 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:03:42.374 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:03:42.374 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:03:42.374 DEBUG [src.node.docker_mananger] docker run -i -t -p 1146:1146 -p 1147:1147 -p 1148:1148 -p 1149:1149 -p 1150:1150 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=1148 --rest-port=1146 --tcp-port=1147 --discv5-udp-port=1149 --rest-address=0.0.0.0 --nat=extip:172.18.6.20 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ad35a07edc8c7c7cf90ebbd2bdb0c2a66db63c1b732aa0bbe607ebae3cfcc26b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=1150 --metrics-logging=true --lightpush=true --relay=true
2025-02-07 04:03:42.598 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.6.20 waku 4f3b8ecef83257fb3efc300557537a049a64303b73fac4cc7b9eff51b4e051ba
2025-02-07 04:03:42.647 DEBUG [src.node.docker_mananger] Container started with ID 4f3b8ecef832. Setting up logs at ./log/docker/receiving_node1_2025-02-07_04-03-42__03540f17-5412-4e67-a8c4-4dd6e02f5b99__wakuorg_nwaku:latest.log
2025-02-07 04:03:42.647 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 1146
2025-02-07 04:03:42.649 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:03:43.139 ERROR [src.node.docker_mananger] Max retries reached for container 332fe1793f33. Exiting log stream.
2025-02-07 04:03:43.649 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1146/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:03:43.652 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:03:43.652 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:03:43.652 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1146/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:03:43.655 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.6.20/tcp/1147/p2p/16Uiu2HAmExkSDepgm6iiVQXGUM65YCocdLmqi2g7Jieb5dhdFEhU","/ip4/172.18.6.20/tcp/1148/ws/p2p/16Uiu2HAmExkSDepgm6iiVQXGUM65YCocdLmqi2g7Jieb5dhdFEhU"],"enrUri":"enr:-L24QECUZWmszMQZ0dGCwnCTzxfQ6NUGKyXaDpoyWScTriMSW0GlaGjY7UW2yuvMHyafiK2HhcRRrVR2xVUFLGZvVOQCgmlkgnY0gmlwhKwSBhSKbXVsdGlhZGRyc5YACASsEgYUBgR7AAoErBIGFAYEfN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDIkQYO3iyHUd0k99rNClQ1sTpmBf3aqyxXJoXLGKLlG-DdGNwggR7g3VkcIIEfYV3YWt1Mgk"}'
2025-02-07 04:03:43.655 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:03:43.661 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:03:43.662 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-07_04-03-42__03540f17-5412-4e67-a8c4-4dd6e02f5b99__wakuorg_nwaku:latest.log
2025-02-07 04:03:43.662 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:03:43.662 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:03:43.663 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:03:43.663 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.29.214
2025-02-07 04:03:43.663 DEBUG [src.node.docker_mananger] Generated ports ['2151', '2152', '2153', '2154', '2155']
2025-02-07 04:03:43.663 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:03:43.664 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:03:43.664 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:03:43.664 DEBUG [src.node.docker_mananger] docker run -i -t -p 2151:2151 -p 2152:2152 -p 2153:2153 -p 2154:2154 -p 2155:2155 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2153 --rest-port=2151 --tcp-port=2152 --discv5-udp-port=2154 --rest-address=0.0.0.0 --nat=extip:172.18.29.214 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ae8fa8bdd77be5facd5d878cc5a08c27a9965fef067313c43df20e608fa8c5bb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2155 --metrics-logging=true --lightpush=false --relay=true
2025-02-07 04:03:43.889 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.29.214 waku 7a4bb690ccc86e02c225b4ff11829822d1bc446106bca059ef649c24b7e668a8
2025-02-07 04:03:43.936 DEBUG [src.node.docker_mananger] Container started with ID 7a4bb690ccc8. Setting up logs at ./log/docker/receiving_node2_2025-02-07_04-03-42__03540f17-5412-4e67-a8c4-4dd6e02f5b99__wakuorg_nwaku:latest.log
2025-02-07 04:03:43.936 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 2151
2025-02-07 04:03:43.937 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:03:44.938 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2151/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:03:44.941 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:03:44.941 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:03:44.941 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2151/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:03:44.943 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.29.214/tcp/2152/p2p/16Uiu2HAm8U7E8RRXqGw5j8EfKF2D3eNdsZztkVcFxs3xVVPFuSAP","/ip4/172.18.29.214/tcp/2153/ws/p2p/16Uiu2HAm8U7E8RRXqGw5j8EfKF2D3eNdsZztkVcFxs3xVVPFuSAP"],"enrUri":"enr:-L24QLSJqKUG6lNRTj_FT2r4OrXMNLvy-eSFNJC0aNLiOKrCTXlJ3CGor3K1WtPQVEQ8ZDcGFmaW8V6ukWh90a74Eo8CgmlkgnY0gmlwhKwSHdaKbXVsdGlhZGRyc5YACASsEh3WBghoAAoErBId1gYIad0DgnJzhQADAQAAiXNlY3AyNTZrMaECwcejgtKv51yKSbc83ec_lyYKOLznljMf-EpFPOCXbWSDdGNwgghog3VkcIIIaoV3YWt1MgE"}'
2025-02-07 04:03:44.943 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:03:44.944 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2151/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.6.20/tcp/1147/p2p/16Uiu2HAmExkSDepgm6iiVQXGUM65YCocdLmqi2g7Jieb5dhdFEhU"]'
2025-02-07 04:03:44.982 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:03:44.991 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:03:44.991 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-07_04-03-42__03540f17-5412-4e67-a8c4-4dd6e02f5b99__wakuorg_nwaku:latest.log
2025-02-07 04:03:44.991 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:03:44.991 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:03:44.993 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:03:44.993 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.18.5
2025-02-07 04:03:44.993 DEBUG [src.node.docker_mananger] Generated ports ['21968', '21969', '21970', '21971', '21972']
2025-02-07 04:03:44.993 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:03:44.993 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:03:44.993 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:03:44.993 DEBUG [src.node.docker_mananger] docker run -i -t -p 21968:21968 -p 21969:21969 -p 21970:21970 -p 21971:21971 -p 21972:21972 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=21970 --rest-port=21968 --tcp-port=21969 --discv5-udp-port=21971 --rest-address=0.0.0.0 --nat=extip:172.18.18.5 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6f01a43a7ad15f60cca6ede511c14c4242b3b0dbdafd4b436b39ca311eef83d1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=21972 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QECUZWmszMQZ0dGCwnCTzxfQ6NUGKyXaDpoyWScTriMSW0GlaGjY7UW2yuvMHyafiK2HhcRRrVR2xVUFLGZvVOQCgmlkgnY0gmlwhKwSBhSKbXVsdGlhZGRyc5YACASsEgYUBgR7AAoErBIGFAYEfN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDIkQYO3iyHUd0k99rNClQ1sTpmBf3aqyxXJoXLGKLlG-DdGNwggR7g3VkcIIEfYV3YWt1Mgk --lightpushnode=/ip4/172.18.6.20/tcp/1147/p2p/16Uiu2HAmExkSDepgm6iiVQXGUM65YCocdLmqi2g7Jieb5dhdFEhU --lightpush=true --relay=false
2025-02-07 04:03:45.226 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.18.5 waku 0c554b6da1f9a6f87eda5854499271f28d5348dc7bb0691035b45378431ee58b
2025-02-07 04:03:45.274 DEBUG [src.node.docker_mananger] Container started with ID 0c554b6da1f9. Setting up logs at ./log/docker/lightpush_node1_2025-02-07_04-03-42__03540f17-5412-4e67-a8c4-4dd6e02f5b99__wakuorg_nwaku:latest.log
2025-02-07 04:03:45.274 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 21968
2025-02-07 04:03:45.275 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:03:46.276 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:21968/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:03:46.278 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:03:46.279 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:03:46.279 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:21968/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:03:46.281 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.18.5/tcp/21969/p2p/16Uiu2HAmTrE6YrhNFHGjdA1iUiM3MjF42zwVYsj9wnoqfci7R4La","/ip4/172.18.18.5/tcp/21970/ws/p2p/16Uiu2HAmTrE6YrhNFHGjdA1iUiM3MjF42zwVYsj9wnoqfci7R4La"],"enrUri":"enr:-L24QG8j7aUOqxgbrdPEMomzr4CywBqiMXi-f9issgdpEOCmNY4c2Sk9NZ1sH2wnpxmr3FKm6c9Bu6TGcKjDpgY_Co4CgmlkgnY0gmlwhKwSEgWKbXVsdGlhZGRyc5YACASsEhIFBlXRAAoErBISBQZV0t0DgnJzhQADAQAAiXNlY3AyNTZrMaED4cA8PEZnRsNLMHBumO-Phn2bx0KJLSMzoAvIABLo7luDdGNwglXRg3VkcIJV04V3YWt1Mgg"}'
2025-02-07 04:03:46.281 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:03:46.281 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:21968/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.6.20/tcp/1147/p2p/16Uiu2HAmExkSDepgm6iiVQXGUM65YCocdLmqi2g7Jieb5dhdFEhU"]'
2025-02-07 04:03:46.321 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:03:46.321 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:21968/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.29.214/tcp/2152/p2p/16Uiu2HAm8U7E8RRXqGw5j8EfKF2D3eNdsZztkVcFxs3xVVPFuSAP"]'
2025-02-07 04:03:46.353 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:03:46.354 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:1146/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-07 04:03:46.360 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:03:46.362 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2151/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-07 04:03:46.367 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:03:46.369 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:21968/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "timestamp": 1738901026369631744}}'
2025-02-07 04:03:46.372 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:21968/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
2025-02-07 04:03:46.374 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-07 04:03:46.375 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-07 04:03:46.375 DEBUG [src.node.waku_node] Stopping container with id 4f3b8ecef832
2025-02-07 04:03:47.162 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:03:47.162 DEBUG [src.node.waku_node] Stopping container with id 7a4bb690ccc8
2025-02-07 04:03:47.975 ERROR [src.node.docker_mananger] Max retries reached for container 4f3b8ecef832. Exiting log stream.
2025-02-07 04:03:48.689 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:03:48.689 DEBUG [src.node.waku_node] Stopping container with id 0c554b6da1f9
2025-02-07 04:03:49.501 ERROR [src.node.docker_mananger] Max retries reached for container 7a4bb690ccc8. Exiting log stream.
2025-02-07 04:03:50.211 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:03:50.214 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-07 04:03:50.219 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-07 04:03:50.225 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-07 04:03:50.230 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
