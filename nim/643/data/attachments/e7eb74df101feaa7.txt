2025-02-07 04:05:27.073 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-07 04:05:27.073 DEBUG [tests.conftest] Running test: test_time_filter_start_time_equals_end_time with id: 2025-02-07_04-05-27__fe12f0c7-e252-4f88-b4b0-4c5bb63538ee
2025-02-07 04:05:27.073 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-07 04:05:27.074 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-07 04:05:27.074 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-07 04:05:27.083 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:05:27.083 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-07_04-05-27__fe12f0c7-e252-4f88-b4b0-4c5bb63538ee__wakuorg_nwaku:latest.log
2025-02-07 04:05:27.083 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:05:27.083 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:05:27.085 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:05:27.085 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.29.148
2025-02-07 04:05:27.085 DEBUG [src.node.docker_mananger] Generated ports ['9490', '9491', '9492', '9493', '9494']
2025-02-07 04:05:27.086 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:05:27.086 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:05:27.086 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:05:27.086 DEBUG [src.node.docker_mananger] docker run -i -t -p 9490:9490 -p 9491:9491 -p 9492:9492 -p 9493:9493 -p 9494:9494 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=9492 --rest-port=9490 --tcp-port=9491 --discv5-udp-port=9493 --rest-address=0.0.0.0 --nat=extip:172.18.29.148 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4ed00afd59ad7e6eeefdefaaefa4fbc45c8aeabd2fc5ffedc99db142f7ac1ac2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=9494 --metrics-logging=true --store=true --relay=true
2025-02-07 04:05:27.335 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.29.148 waku 7db6b930097924a8e9d935aeb41f71c4cc66bdae44b5620df4e7d8459bdc5e0d
2025-02-07 04:05:27.391 DEBUG [src.node.docker_mananger] Container started with ID 7db6b9300979. Setting up logs at ./log/docker/publishing_node1_2025-02-07_04-05-27__fe12f0c7-e252-4f88-b4b0-4c5bb63538ee__wakuorg_nwaku:latest.log
2025-02-07 04:05:27.393 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 9490
2025-02-07 04:05:27.393 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:05:27.876 ERROR [src.node.docker_mananger] Max retries reached for container e21dec0ac2d0. Exiting log stream.
2025-02-07 04:05:28.394 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9490/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:05:28.397 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:05:28.397 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:05:28.398 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9490/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:05:28.400 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.29.148/tcp/9491/p2p/16Uiu2HAmFHjAeqDX3VSSMr1iaYEb1fP9aGp1yL3nwEmMq4c2ubea","/ip4/172.18.29.148/tcp/9492/ws/p2p/16Uiu2HAmFHjAeqDX3VSSMr1iaYEb1fP9aGp1yL3nwEmMq4c2ubea"],"enrUri":"enr:-L24QHv6TFcJ4SF_qRlCq269AF5vQswo_koU8cOhE9iF8VsJTld3HDTkwy3pST75OyUoBsXQHjTjsWZcso3CjR23gYMCgmlkgnY0gmlwhKwSHZSKbXVsdGlhZGRyc5YACASsEh2UBiUTAAoErBIdlAYlFN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDJyCyJJ5Gq9Wrigiw042FcUV8LGI3z3ucs8oZO951JBuDdGNwgiUTg3VkcIIlFYV3YWt1MgM"}'
2025-02-07 04:05:28.400 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:05:28.409 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:05:28.409 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-07_04-05-27__fe12f0c7-e252-4f88-b4b0-4c5bb63538ee__wakuorg_nwaku:latest.log
2025-02-07 04:05:28.409 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:05:28.409 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:05:28.411 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:05:28.411 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.37.40
2025-02-07 04:05:28.411 DEBUG [src.node.docker_mananger] Generated ports ['48306', '48307', '48308', '48309', '48310']
2025-02-07 04:05:28.411 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:05:28.411 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:05:28.412 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:05:28.412 DEBUG [src.node.docker_mananger] docker run -i -t -p 48306:48306 -p 48307:48307 -p 48308:48308 -p 48309:48309 -p 48310:48310 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=48308 --rest-port=48306 --tcp-port=48307 --discv5-udp-port=48309 --rest-address=0.0.0.0 --nat=extip:172.18.37.40 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fee96cd5e2b3d4bbacaa87b2ccebde464d21bc6aab2bb24df67bec94974ca065 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=48310 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QHv6TFcJ4SF_qRlCq269AF5vQswo_koU8cOhE9iF8VsJTld3HDTkwy3pST75OyUoBsXQHjTjsWZcso3CjR23gYMCgmlkgnY0gmlwhKwSHZSKbXVsdGlhZGRyc5YACASsEh2UBiUTAAoErBIdlAYlFN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDJyCyJJ5Gq9Wrigiw042FcUV8LGI3z3ucs8oZO951JBuDdGNwgiUTg3VkcIIlFYV3YWt1MgM --storenode=/ip4/172.18.29.148/tcp/9491/p2p/16Uiu2HAmFHjAeqDX3VSSMr1iaYEb1fP9aGp1yL3nwEmMq4c2ubea --store=true --relay=true
2025-02-07 04:05:28.670 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.37.40 waku e39236e30f5d64e94ed74cd4b95146a90ef63a7dacdb02bb3a31d0e38db862c4
2025-02-07 04:05:28.723 DEBUG [src.node.docker_mananger] Container started with ID e39236e30f5d. Setting up logs at ./log/docker/store_node1_2025-02-07_04-05-27__fe12f0c7-e252-4f88-b4b0-4c5bb63538ee__wakuorg_nwaku:latest.log
2025-02-07 04:05:28.725 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 48306
2025-02-07 04:05:28.726 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:05:29.729 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:48306/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:05:29.733 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:05:29.733 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:05:29.733 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:48306/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:05:29.736 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.37.40/tcp/48307/p2p/16Uiu2HAmD9ab1RbtSuwvjsJSsXCqhQn67NMX9cRfqRDm5o5bwryH","/ip4/172.18.37.40/tcp/48308/ws/p2p/16Uiu2HAmD9ab1RbtSuwvjsJSsXCqhQn67NMX9cRfqRDm5o5bwryH"],"enrUri":"enr:-L24QAfWMznTbeWTJ6U_4g4iOMP4g_vLNwR1odLa8wagyVqzKtlCDSYjppIlKaH0GUrGb4gFzgo35bE9ZFmjDSy9kBwCgmlkgnY0gmlwhKwSJSiKbXVsdGlhZGRyc5YACASsEiUoBryzAAoErBIlKAa8tN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDB1L5WOIjLw8yHomCO1F-mbpov_OK_kdxpIpDFrERFTSDdGNwgryzg3VkcIK8tYV3YWt1MgM"}'
2025-02-07 04:05:29.736 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:05:29.736 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:48306/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.29.148/tcp/9491/p2p/16Uiu2HAmFHjAeqDX3VSSMr1iaYEb1fP9aGp1yL3nwEmMq4c2ubea"]'
2025-02-07 04:05:29.739 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:05:29.739 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9490/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-07 04:05:29.742 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:05:29.742 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:48306/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-07 04:05:29.744 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:05:29.745 DEBUG [src.steps.store] Relaying message
2025-02-07 04:05:29.745 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9490/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:05:29.751 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:05:29.752 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:05:29.953 DEBUG [src.steps.store] Relaying message
2025-02-07 04:05:29.953 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9490/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:05:29.959 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:05:29.960 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:05:30.161 DEBUG [src.steps.store] Relaying message
2025-02-07 04:05:30.161 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9490/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:05:30.168 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:05:30.169 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:05:30.370 DEBUG [src.steps.store] Relaying message
2025-02-07 04:05:30.370 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9490/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:05:30.377 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:05:30.378 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:05:30.578 DEBUG [src.steps.store] Relaying message
2025-02-07 04:05:30.579 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9490/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:05:30.586 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:05:30.587 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:05:30.788 DEBUG [src.steps.store] Relaying message
2025-02-07 04:05:30.788 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9490/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:05:30.796 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:05:30.796 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:05:30.997 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9490/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=1738901126745254912&endTime=1738901126745254912&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:05:31.002 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x599ee2871f7d70bb6f7aac20a66cf5fe1b2948ed60259ae6d83068ce5d9c4865"}]}'
2025-02-07 04:05:31.045 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-07 04:05:31.047 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-07 04:05:31.047 DEBUG [src.node.waku_node] Stopping container with id 7db6b9300979
2025-02-07 04:05:31.976 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:05:31.977 DEBUG [src.node.waku_node] Stopping container with id e39236e30f5d
2025-02-07 04:05:32.791 ERROR [src.node.docker_mananger] Max retries reached for container 7db6b9300979. Exiting log stream.
2025-02-07 04:05:33.506 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:05:33.507 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-07 04:05:33.515 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-07 04:05:33.521 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-07 04:05:33.522 DEBUG [tests.conftest] Running fixture teardown: attach_logs_on_fail
2025-02-07 04:05:33.522 DEBUG [tests.conftest] Test failed, attempting to attach logs to the allure reports
2025-02-07 04:05:33.523 DEBUG [src.libs.common] Attaching file ./log/docker/publishing_node1_2025-02-07_04-05-27__fe12f0c7-e252-4f88-b4b0-4c5bb63538ee__wakuorg_nwaku:latest.log
2025-02-07 04:05:33.523 DEBUG [src.libs.common] Attaching file ./log/docker/store_node1_2025-02-07_04-05-27__fe12f0c7-e252-4f88-b4b0-4c5bb63538ee__wakuorg_nwaku:latest.log
