2025-02-07 04:06:08.016 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-07 04:06:08.016 DEBUG [tests.conftest] Running test: test_publish_on_multiple_content_topics_and_only_after_fetch_them[content_topic_list1] with id: 2025-02-07_04-06-08__8be95428-9433-465e-ac7b-498fa053ebea
2025-02-07 04:06:08.017 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-07 04:06:08.017 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-07 04:06:08.017 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2025-02-07 04:06:08.024 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:06:08.024 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-07_04-06-08__8be95428-9433-465e-ac7b-498fa053ebea__wakuorg_nwaku:latest.log
2025-02-07 04:06:08.024 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:06:08.025 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:06:08.026 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:06:08.026 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.120.150
2025-02-07 04:06:08.026 DEBUG [src.node.docker_mananger] Generated ports ['12257', '12258', '12259', '12260', '12261']
2025-02-07 04:06:08.026 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:06:08.026 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:06:08.027 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:06:08.027 DEBUG [src.node.docker_mananger] docker run -i -t -p 12257:12257 -p 12258:12258 -p 12259:12259 -p 12260:12260 -p 12261:12261 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=12259 --rest-port=12257 --tcp-port=12258 --discv5-udp-port=12260 --rest-address=0.0.0.0 --nat=extip:172.18.120.150 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=9cbafcafccaadadd41d6d6b9be461a4e9bc3e6fddfb26a2a2cc4c25caa67d74c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=12261 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto
2025-02-07 04:06:08.257 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.120.150 waku f6c0eb2d452505b8266674c3e8557d9e2a65344506282252c3a4c7a525bc76d6
2025-02-07 04:06:08.313 DEBUG [src.node.docker_mananger] Container started with ID f6c0eb2d4525. Setting up logs at ./log/docker/node1_2025-02-07_04-06-08__8be95428-9433-465e-ac7b-498fa053ebea__wakuorg_nwaku:latest.log
2025-02-07 04:06:08.313 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 12257
2025-02-07 04:06:08.314 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:06:08.787 ERROR [src.node.docker_mananger] Max retries reached for container 26292bbac855. Exiting log stream.
2025-02-07 04:06:09.314 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:12257/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:06:09.317 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:06:09.317 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:06:09.317 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:12257/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:06:09.320 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.120.150/tcp/12258/p2p/16Uiu2HAkyfuDFgpETHGJpGUvPE64b4BNYtr1zmvbpXF58NP9K4MH","/ip4/172.18.120.150/tcp/12259/ws/p2p/16Uiu2HAkyfuDFgpETHGJpGUvPE64b4BNYtr1zmvbpXF58NP9K4MH"],"enrUri":"enr:-L24QDX1wdJ2_GWmnlCT9VQ5v5NoKp6SgkwPLG1EZXnKOr0xG2DTwA_IfZRl-s0YLUfVwsrIZAtdKh_Rt8gH30fq12cCgmlkgnY0gmlwhKwSeJaKbXVsdGlhZGRyc5YACASsEniWBi_iAAoErBJ4lgYv490DgnJzhQACAQAAiXNlY3AyNTZrMaECPxPXMPFkIAs3uv_5LTbWzF_uXhECNnx2pGwxKecoE9SDdGNwgi_ig3VkcIIv5IV3YWt1MgU"}'
2025-02-07 04:06:09.320 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:06:09.326 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:06:09.326 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-07_04-06-08__8be95428-9433-465e-ac7b-498fa053ebea__wakuorg_nwaku:latest.log
2025-02-07 04:06:09.326 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:06:09.327 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:06:09.328 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:06:09.328 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.150.164
2025-02-07 04:06:09.328 DEBUG [src.node.docker_mananger] Generated ports ['37313', '37314', '37315', '37316', '37317']
2025-02-07 04:06:09.328 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:06:09.328 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:06:09.328 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:06:09.329 DEBUG [src.node.docker_mananger] docker run -i -t -p 37313:37313 -p 37314:37314 -p 37315:37315 -p 37316:37316 -p 37317:37317 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37315 --rest-port=37313 --tcp-port=37314 --discv5-udp-port=37316 --rest-address=0.0.0.0 --nat=extip:172.18.150.164 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=ce547fb8ce37bc8b0ac5aa305ab2b4e6a00cee5b2d0a368fa7af9bdb7aaa12ba --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37317 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QDX1wdJ2_GWmnlCT9VQ5v5NoKp6SgkwPLG1EZXnKOr0xG2DTwA_IfZRl-s0YLUfVwsrIZAtdKh_Rt8gH30fq12cCgmlkgnY0gmlwhKwSeJaKbXVsdGlhZGRyc5YACASsEniWBi_iAAoErBJ4lgYv490DgnJzhQACAQAAiXNlY3AyNTZrMaECPxPXMPFkIAs3uv_5LTbWzF_uXhECNnx2pGwxKecoE9SDdGNwgi_ig3VkcIIv5IV3YWt1MgU --content-topic=/myapp/1/latest/proto
2025-02-07 04:06:09.569 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.150.164 waku 385413ba6b4149ae47248caabfd510b0a7f96dbfc854f778296304082c617463
2025-02-07 04:06:09.627 DEBUG [src.node.docker_mananger] Container started with ID 385413ba6b41. Setting up logs at ./log/docker/node2_2025-02-07_04-06-08__8be95428-9433-465e-ac7b-498fa053ebea__wakuorg_nwaku:latest.log
2025-02-07 04:06:09.627 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 37313
2025-02-07 04:06:09.628 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:06:10.628 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37313/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:06:10.638 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:06:10.639 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:06:10.639 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37313/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:06:10.642 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.150.164/tcp/37314/p2p/16Uiu2HAmE7T5sL7gha2t9c4vkPQxDnW2aQmN46hYVa6gK49SuDbs","/ip4/172.18.150.164/tcp/37315/ws/p2p/16Uiu2HAmE7T5sL7gha2t9c4vkPQxDnW2aQmN46hYVa6gK49SuDbs"],"enrUri":"enr:-L24QFUoy46-YKyXxQedp3pzWpbHut8YaT5dUqbjEHlr84D4B9GK4xdWMSn9o3W0fnh9DKJGNorwgJmAXKV1RVXLWg0CgmlkgnY0gmlwhKwSlqSKbXVsdGlhZGRyc5YACASsEpakBpHCAAoErBKWpAaRw90DgnJzhQACAQAAiXNlY3AyNTZrMaEDFaMELb09PivwYqTZqVImteYjCGkKWTnzB5s2A1r1lgaDdGNwgpHCg3VkcIKRxIV3YWt1MgE"}'
2025-02-07 04:06:10.643 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:06:10.644 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37313/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.120.150/tcp/12258/p2p/16Uiu2HAkyfuDFgpETHGJpGUvPE64b4BNYtr1zmvbpXF58NP9K4MH"]'
2025-02-07 04:06:10.647 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:06:10.649 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:12257/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto", "/waku/2/content/test.js", "/app/22/sometopic/someencoding", "/toychat/2/huilong/proto", "/statusim/1/community/cbor", "/app/27/sometopic/someencoding", "/app/29/sometopic/someencoding", "/app/20/sometopic/someencoding"]'
2025-02-07 04:06:10.659 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:06:10.659 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37313/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto", "/waku/2/content/test.js", "/app/22/sometopic/someencoding", "/toychat/2/huilong/proto", "/statusim/1/community/cbor", "/app/27/sometopic/someencoding", "/app/29/sometopic/someencoding", "/app/20/sometopic/someencoding"]'
2025-02-07 04:06:10.679 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:06:10.680 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:12257/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L215YXBwLzEvbGF0ZXN0L3Byb3Rv", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:06:10.693 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:06:10.693 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:12257/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L3dha3UvMi9jb250ZW50L3Rlc3QuanM=", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:06:10.699 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:06:10.700 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:12257/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L2FwcC8yMi9zb21ldG9waWMvc29tZWVuY29kaW5n", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:06:10.704 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:06:10.705 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:12257/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L3RveWNoYXQvMi9odWlsb25nL3Byb3Rv", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:06:10.710 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:06:10.711 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:12257/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L3N0YXR1c2ltLzEvY29tbXVuaXR5L2Nib3I=", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:06:10.716 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:06:10.717 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:12257/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L2FwcC8yNy9zb21ldG9waWMvc29tZWVuY29kaW5n", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:06:10.722 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:06:10.722 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:12257/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L2FwcC8yOS9zb21ldG9waWMvc29tZWVuY29kaW5n", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:06:10.727 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:06:10.728 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:12257/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L2FwcC8yMC9zb21ldG9waWMvc29tZWVuY29kaW5n", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:06:10.732 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:06:10.733 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-07 04:06:10.834 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37313/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:06:10.836 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L215YXBwLzEvbGF0ZXN0L3Byb3Rv","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738901170680164096,"ephemeral":false}]'
2025-02-07 04:06:10.836 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37313/relay/v1/auto/messages/%2Fwaku%2F2%2Fcontent%2Ftest.js" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:06:10.839 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3dha3UvMi9jb250ZW50L3Rlc3QuanM=","contentTopic":"/waku/2/content/test.js","version":0,"timestamp":1738901170693494784,"ephemeral":false}]'
2025-02-07 04:06:10.839 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37313/relay/v1/auto/messages/%2Fapp%2F22%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:06:10.841 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L2FwcC8yMi9zb21ldG9waWMvc29tZWVuY29kaW5n","contentTopic":"/app/22/sometopic/someencoding","version":0,"timestamp":1738901170700009728,"ephemeral":false}]'
2025-02-07 04:06:10.842 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37313/relay/v1/auto/messages/%2Ftoychat%2F2%2Fhuilong%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:06:10.844 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3RveWNoYXQvMi9odWlsb25nL3Byb3Rv","contentTopic":"/toychat/2/huilong/proto","version":0,"timestamp":1738901170704936192,"ephemeral":false}]'
2025-02-07 04:06:10.844 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37313/relay/v1/auto/messages/%2Fstatusim%2F1%2Fcommunity%2Fcbor" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:06:10.847 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3N0YXR1c2ltLzEvY29tbXVuaXR5L2Nib3I=","contentTopic":"/statusim/1/community/cbor","version":0,"timestamp":1738901170710896896,"ephemeral":false}]'
2025-02-07 04:06:10.847 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37313/relay/v1/auto/messages/%2Fapp%2F27%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:06:10.849 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L2FwcC8yNy9zb21ldG9waWMvc29tZWVuY29kaW5n","contentTopic":"/app/27/sometopic/someencoding","version":0,"timestamp":1738901170717086976,"ephemeral":false}]'
2025-02-07 04:06:10.849 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37313/relay/v1/auto/messages/%2Fapp%2F29%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:06:10.852 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L2FwcC8yOS9zb21ldG9waWMvc29tZWVuY29kaW5n","contentTopic":"/app/29/sometopic/someencoding","version":0,"timestamp":1738901170722630656,"ephemeral":false}]'
2025-02-07 04:06:10.852 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37313/relay/v1/auto/messages/%2Fapp%2F20%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:06:10.854 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L2FwcC8yMC9zb21ldG9waWMvc29tZWVuY29kaW5n","contentTopic":"/app/20/sometopic/someencoding","version":0,"timestamp":1738901170728330240,"ephemeral":false}]'
2025-02-07 04:06:10.855 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-07 04:06:10.856 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-07 04:06:10.857 DEBUG [src.node.waku_node] Stopping container with id f6c0eb2d4525
2025-02-07 04:06:11.912 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:06:11.912 DEBUG [src.node.waku_node] Stopping container with id 385413ba6b41
2025-02-07 04:06:12.725 ERROR [src.node.docker_mananger] Max retries reached for container f6c0eb2d4525. Exiting log stream.
2025-02-07 04:06:13.438 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:06:13.439 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-07 04:06:13.448 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-07 04:06:13.457 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
