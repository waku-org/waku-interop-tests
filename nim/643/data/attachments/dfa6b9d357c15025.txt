2025-02-07 04:03:08.635 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-07 04:03:08.635 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_all_with_invalid_request_id with id: 2025-02-07_04-03-08__45932ef0-7837-4402-892f-de26642b2cd1
2025-02-07 04:03:08.635 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-07 04:03:08.636 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-07 04:03:08.636 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-07 04:03:08.642 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:03:08.642 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-07_04-03-08__45932ef0-7837-4402-892f-de26642b2cd1__wakuorg_nwaku:latest.log
2025-02-07 04:03:08.642 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:03:08.642 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:03:08.643 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:03:08.643 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.221.51
2025-02-07 04:03:08.643 DEBUG [src.node.docker_mananger] Generated ports ['22463', '22464', '22465', '22466', '22467']
2025-02-07 04:03:08.644 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:03:08.644 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:03:08.644 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:03:08.644 DEBUG [src.node.docker_mananger] docker run -i -t -p 22463:22463 -p 22464:22464 -p 22465:22465 -p 22466:22466 -p 22467:22467 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22465 --rest-port=22463 --tcp-port=22464 --discv5-udp-port=22466 --rest-address=0.0.0.0 --nat=extip:172.18.221.51 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a5538bf0f44b07ef75a23ef8d85cc325cd0afd0e86dd2fbdbcabea3bfa10bbd4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22467 --metrics-logging=true --relay=true --filter=true
2025-02-07 04:03:08.862 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.221.51 waku 1541c219787eb805d5132b5b6123882e0134ebd72d2bfcb158740635e0be8722
2025-02-07 04:03:08.907 DEBUG [src.node.docker_mananger] Container started with ID 1541c219787e. Setting up logs at ./log/docker/node1_2025-02-07_04-03-08__45932ef0-7837-4402-892f-de26642b2cd1__wakuorg_nwaku:latest.log
2025-02-07 04:03:08.907 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 22463
2025-02-07 04:03:08.908 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:03:09.435 ERROR [src.node.docker_mananger] Max retries reached for container f60129222d72. Exiting log stream.
2025-02-07 04:03:09.909 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22463/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:03:09.912 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:03:09.912 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:03:09.912 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22463/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:03:09.914 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.221.51/tcp/22464/p2p/16Uiu2HAmG2p6ZE5f25qhqJmnuUKNNv7Ms11cTb5wBBu8bXseUTsM","/ip4/172.18.221.51/tcp/22465/ws/p2p/16Uiu2HAmG2p6ZE5f25qhqJmnuUKNNv7Ms11cTb5wBBu8bXseUTsM"],"enrUri":"enr:-L24QN5MZZz0HHmpk62KSL3i4zDCBFo14DiZyYYiHnmP0ENJLTwB0VSN3ffvmRXi2vrc8LB-8-fHF7gw1j9C1ILR9LACgmlkgnY0gmlwhKwS3TOKbXVsdGlhZGRyc5YACASsEt0zBlfAAAoErBLdMwZXwd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDMio-i3nPL6PETNt6mBPWpE-txhjVXPSU1vzACwdd51iDdGNwglfAg3VkcIJXwoV3YWt1MgU"}'
2025-02-07 04:03:09.914 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:03:09.915 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-07 04:03:09.921 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:03:09.921 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-07_04-03-08__45932ef0-7837-4402-892f-de26642b2cd1__wakuorg_nwaku:latest.log
2025-02-07 04:03:09.921 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:03:09.921 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:03:09.923 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:03:09.923 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.248.90
2025-02-07 04:03:09.923 DEBUG [src.node.docker_mananger] Generated ports ['55342', '55343', '55344', '55345', '55346']
2025-02-07 04:03:09.923 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:03:09.923 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:03:09.923 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:03:09.924 DEBUG [src.node.docker_mananger] docker run -i -t -p 55342:55342 -p 55343:55343 -p 55344:55344 -p 55345:55345 -p 55346:55346 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55344 --rest-port=55342 --tcp-port=55343 --discv5-udp-port=55345 --rest-address=0.0.0.0 --nat=extip:172.18.248.90 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=24b503480a4a4fc1cdb57643c309671bac32e3b99fd7df98d6f9bb77a8ea2e85 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55346 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QN5MZZz0HHmpk62KSL3i4zDCBFo14DiZyYYiHnmP0ENJLTwB0VSN3ffvmRXi2vrc8LB-8-fHF7gw1j9C1ILR9LACgmlkgnY0gmlwhKwS3TOKbXVsdGlhZGRyc5YACASsEt0zBlfAAAoErBLdMwZXwd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDMio-i3nPL6PETNt6mBPWpE-txhjVXPSU1vzACwdd51iDdGNwglfAg3VkcIJXwoV3YWt1MgU --filternode=/ip4/172.18.221.51/tcp/22464/p2p/16Uiu2HAmG2p6ZE5f25qhqJmnuUKNNv7Ms11cTb5wBBu8bXseUTsM
2025-02-07 04:03:10.145 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.248.90 waku d23fb946ad8c9b3668320f55305a47e6bd5058849eaf209d09f937717a9c9aca
2025-02-07 04:03:10.192 DEBUG [src.node.docker_mananger] Container started with ID d23fb946ad8c. Setting up logs at ./log/docker/node2_2025-02-07_04-03-08__45932ef0-7837-4402-892f-de26642b2cd1__wakuorg_nwaku:latest.log
2025-02-07 04:03:10.192 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 55342
2025-02-07 04:03:10.192 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:03:11.193 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:55342/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:03:11.196 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:03:11.196 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:03:11.196 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:55342/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:03:11.198 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.248.90/tcp/55343/p2p/16Uiu2HAmVrCVrUp3GKw5ozJkDZGZPzoQkPrnSwT7UftBLSMA3Nqs","/ip4/172.18.248.90/tcp/55344/ws/p2p/16Uiu2HAmVrCVrUp3GKw5ozJkDZGZPzoQkPrnSwT7UftBLSMA3Nqs"],"enrUri":"enr:-L24QPPMkwtUI_aisa3nIwTvY04OZbUUV2RNNXPYp276PDz_XcH7xvkqLR82Za93GWooF_6-oGVWFdNseyLFmXC7wnsCgmlkgnY0gmlwhKwS-FqKbXVsdGlhZGRyc5YACASsEvhaBtgvAAoErBL4WgbYMN0DgnJzhQADAQAAiXNlY3AyNTZrMaED_3XNUuLkS-C95oIXJqHK2cZtaXDoRmquC2ez-iTdhSaDdGNwgtgvg3VkcILYMYV3YWt1MgA"}'
2025-02-07 04:03:11.198 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:03:11.199 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55342/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.221.51/tcp/22464/p2p/16Uiu2HAmG2p6ZE5f25qhqJmnuUKNNv7Ms11cTb5wBBu8bXseUTsM"]'
2025-02-07 04:03:11.237 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:03:11.237 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-07 04:03:11.238 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22463/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-07 04:03:11.254 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:03:11.256 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55342/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "44bd7a2f-2cff-40f4-8716-d07d135a1876", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-07 04:03:11.268 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"44bd7a2f-2cff-40f4-8716-d07d135a1876","statusDesc":"OK"}'
2025-02-07 04:03:11.269 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:55342/filter/v2/subscriptions/all" -H "Content-Type: application/json" -d '{"requestId": 1}'
2025-02-07 04:03:11.271 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:55342/filter/v2/subscriptions/all. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
2025-02-07 04:03:11.275 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-07 04:03:11.275 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-07 04:03:11.276 DEBUG [src.node.waku_node] Stopping container with id 1541c219787e
2025-02-07 04:03:12.387 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:03:12.387 DEBUG [src.node.waku_node] Stopping container with id d23fb946ad8c
2025-02-07 04:03:13.199 ERROR [src.node.docker_mananger] Max retries reached for container 1541c219787e. Exiting log stream.
2025-02-07 04:03:13.885 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:03:13.886 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-07 04:03:13.893 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-07 04:03:13.896 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
