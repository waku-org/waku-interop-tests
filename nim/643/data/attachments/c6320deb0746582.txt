2025-02-07 04:06:01.736 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-07 04:06:01.736 DEBUG [tests.conftest] Running test: test_store_without_pubsub_topic_and_content_topic with id: 2025-02-07_04-06-01__93e18239-a03e-4d22-b10f-3560b224c0db
2025-02-07 04:06:01.737 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-07 04:06:01.738 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-07 04:06:01.738 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-07 04:06:01.747 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:06:01.747 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-07_04-06-01__93e18239-a03e-4d22-b10f-3560b224c0db__wakuorg_nwaku:latest.log
2025-02-07 04:06:01.747 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:06:01.748 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:06:01.751 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:06:01.752 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.208.76
2025-02-07 04:06:01.752 DEBUG [src.node.docker_mananger] Generated ports ['23887', '23888', '23889', '23890', '23891']
2025-02-07 04:06:01.752 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:06:01.753 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:06:01.753 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:06:01.753 DEBUG [src.node.docker_mananger] docker run -i -t -p 23887:23887 -p 23888:23888 -p 23889:23889 -p 23890:23890 -p 23891:23891 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23889 --rest-port=23887 --tcp-port=23888 --discv5-udp-port=23890 --rest-address=0.0.0.0 --nat=extip:172.18.208.76 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c1238b5b9dbf57fb0bfd9fbada8dcbe3510ac1fe82d4681ca5f8d083c8ce7a0a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23891 --metrics-logging=true --store=true --relay=true
2025-02-07 04:06:02.010 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.208.76 waku 3ccceda0ce4ed59eb5a43d699660eedce5bb7d06ce8bfc056e576f0094750771
2025-02-07 04:06:02.062 DEBUG [src.node.docker_mananger] Container started with ID 3ccceda0ce4e. Setting up logs at ./log/docker/publishing_node1_2025-02-07_04-06-01__93e18239-a03e-4d22-b10f-3560b224c0db__wakuorg_nwaku:latest.log
2025-02-07 04:06:02.063 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 23887
2025-02-07 04:06:02.064 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:06:02.579 ERROR [src.node.docker_mananger] Max retries reached for container 09e8c5a3b6f8. Exiting log stream.
2025-02-07 04:06:03.064 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23887/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:06:03.068 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:06:03.068 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:06:03.068 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23887/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:06:03.071 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.208.76/tcp/23888/p2p/16Uiu2HAmDFuMJjUF6uHYk1PK11HTH2vGQjmN9SusxJqNHydX2dAf","/ip4/172.18.208.76/tcp/23889/ws/p2p/16Uiu2HAmDFuMJjUF6uHYk1PK11HTH2vGQjmN9SusxJqNHydX2dAf"],"enrUri":"enr:-L24QNBLh9-5MJlFQbZPHYALoEgXtpC2bqnJl8Ke5p-3lcYCC-0II55VbpzKH98gGUFogEzs9dnj_IulWdny09SUd0gCgmlkgnY0gmlwhKwS0EyKbXVsdGlhZGRyc5YACASsEtBMBl1QAAoErBLQTAZdUd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDCPGs1PZ7IIJxgCIqLoVPQfZ8XUDnxt-QRMAaIfCQHsiDdGNwgl1Qg3VkcIJdUoV3YWt1MgM"}'
2025-02-07 04:06:03.071 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:06:03.078 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:06:03.078 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-07_04-06-01__93e18239-a03e-4d22-b10f-3560b224c0db__wakuorg_nwaku:latest.log
2025-02-07 04:06:03.078 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:06:03.079 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:06:03.080 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:06:03.080 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.157.82
2025-02-07 04:06:03.080 DEBUG [src.node.docker_mananger] Generated ports ['42371', '42372', '42373', '42374', '42375']
2025-02-07 04:06:03.081 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:06:03.081 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:06:03.081 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:06:03.081 DEBUG [src.node.docker_mananger] docker run -i -t -p 42371:42371 -p 42372:42372 -p 42373:42373 -p 42374:42374 -p 42375:42375 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42373 --rest-port=42371 --tcp-port=42372 --discv5-udp-port=42374 --rest-address=0.0.0.0 --nat=extip:172.18.157.82 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5ce7f15f2dbdba8af5dac5ed98dc67cbea1d06ddcf1caf346ccdbefeddb3fdf4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42375 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QNBLh9-5MJlFQbZPHYALoEgXtpC2bqnJl8Ke5p-3lcYCC-0II55VbpzKH98gGUFogEzs9dnj_IulWdny09SUd0gCgmlkgnY0gmlwhKwS0EyKbXVsdGlhZGRyc5YACASsEtBMBl1QAAoErBLQTAZdUd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDCPGs1PZ7IIJxgCIqLoVPQfZ8XUDnxt-QRMAaIfCQHsiDdGNwgl1Qg3VkcIJdUoV3YWt1MgM --storenode=/ip4/172.18.208.76/tcp/23888/p2p/16Uiu2HAmDFuMJjUF6uHYk1PK11HTH2vGQjmN9SusxJqNHydX2dAf --store=true --relay=true
2025-02-07 04:06:03.316 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.157.82 waku f2624ba021bb9ca814c8e42ed33012ae7c73df033d924c4b6879ae3ac096ed7a
2025-02-07 04:06:03.364 DEBUG [src.node.docker_mananger] Container started with ID f2624ba021bb. Setting up logs at ./log/docker/store_node1_2025-02-07_04-06-01__93e18239-a03e-4d22-b10f-3560b224c0db__wakuorg_nwaku:latest.log
2025-02-07 04:06:03.365 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 42371
2025-02-07 04:06:03.366 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:06:04.367 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42371/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:06:04.370 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:06:04.370 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:06:04.370 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42371/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:06:04.373 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.157.82/tcp/42372/p2p/16Uiu2HAmTixJ7BptJsT6LUkb9qN9wD31gpJ12kr2ijAQ36cvZoTv","/ip4/172.18.157.82/tcp/42373/ws/p2p/16Uiu2HAmTixJ7BptJsT6LUkb9qN9wD31gpJ12kr2ijAQ36cvZoTv"],"enrUri":"enr:-L24QB_QYYC1zYfXmYpPe9lV3QXkze849_vCPYo3c9My4nx4F1Ct-cJ-wZ1w_ZChPYZ-hdKCccWBcdsZCbLmhdEpfwoCgmlkgnY0gmlwhKwSnVKKbXVsdGlhZGRyc5YACASsEp1SBqWEAAoErBKdUgalhd0DgnJzhQADAQAAiXNlY3AyNTZrMaED3-NNvjuPXk1ejsqdvEgh84uJOq-i5kBhEKX4Hf_E5gGDdGNwgqWEg3VkcIKlhoV3YWt1MgM"}'
2025-02-07 04:06:04.373 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:06:04.374 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42371/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.208.76/tcp/23888/p2p/16Uiu2HAmDFuMJjUF6uHYk1PK11HTH2vGQjmN9SusxJqNHydX2dAf"]'
2025-02-07 04:06:04.376 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:06:04.377 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23887/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-07 04:06:04.379 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:06:04.379 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42371/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-07 04:06:04.381 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:06:04.382 DEBUG [src.steps.store] Relaying message
2025-02-07 04:06:04.382 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23887/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:06:04.388 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:06:04.389 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:06:04.590 DEBUG [src.steps.store] Relaying message
2025-02-07 04:06:04.590 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23887/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:06:04.597 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:06:04.597 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:06:04.798 DEBUG [src.steps.store] Relaying message
2025-02-07 04:06:04.798 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23887/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:06:04.805 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:06:04.806 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:06:05.007 DEBUG [src.steps.store] Relaying message
2025-02-07 04:06:05.007 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23887/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:06:05.014 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:06:05.014 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:06:05.216 DEBUG [src.steps.store] Relaying message
2025-02-07 04:06:05.216 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23887/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:06:05.223 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:06:05.223 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:06:05.424 DEBUG [src.steps.store] Relaying message
2025-02-07 04:06:05.425 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23887/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:06:05.432 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:06:05.432 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:06:05.633 DEBUG [src.steps.store] Relaying message
2025-02-07 04:06:05.634 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23887/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:06:05.640 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:06:05.641 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:06:05.842 DEBUG [src.steps.store] Relaying message
2025-02-07 04:06:05.842 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23887/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:06:05.848 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:06:05.849 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:06:06.050 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23887/store/v3/messages?pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:06:06.054 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x00b1a563161e9de071348ed6bec9f3e036d8704025a4ac63b34e6e48de6524b4"},{"messageHash":"0x767f8b1ceee9b7d4cd81a8c74d61704c2012b4d292f3e2fd3428c62ee1bd02d0"},{"messageHash":"0x338108b70d363ffeb6adfb746b3f8aa0999156a4177bc6bf8c66a7d5107ec995"},{"messageHash":"0x4c26185269f02505df2a73d58b42da794c0a846ca6547e768841c829324a44af"},{"messageHash":"0xb218540a707d916274c0010f3d89a8401f6626c109d8a7f6e295bbed59f14aea"},{"messageHash":"0x6cc1b8f99558235b6a4c4dea37870a85dd7d775e61c8717b638ac8d5ea3acad1"},{"messageHash":"0x31badf9fe3dba3adb60b2d33cd5edd5cc4eb7f397a30a6422d913466c80ad654"},{"messageHash":"0x5590e0f24f35a3dbf95a1a1d6a4ba38a2bc57ed35c2c9d140db5568a81f951f5"}]}'
2025-02-07 04:06:06.055 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42371/store/v3/messages?pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:06:06.058 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x00b1a563161e9de071348ed6bec9f3e036d8704025a4ac63b34e6e48de6524b4"},{"messageHash":"0x767f8b1ceee9b7d4cd81a8c74d61704c2012b4d292f3e2fd3428c62ee1bd02d0"},{"messageHash":"0x338108b70d363ffeb6adfb746b3f8aa0999156a4177bc6bf8c66a7d5107ec995"},{"messageHash":"0x4c26185269f02505df2a73d58b42da794c0a846ca6547e768841c829324a44af"},{"messageHash":"0xb218540a707d916274c0010f3d89a8401f6626c109d8a7f6e295bbed59f14aea"},{"messageHash":"0x6cc1b8f99558235b6a4c4dea37870a85dd7d775e61c8717b638ac8d5ea3acad1"},{"messageHash":"0x31badf9fe3dba3adb60b2d33cd5edd5cc4eb7f397a30a6422d913466c80ad654"},{"messageHash":"0x5590e0f24f35a3dbf95a1a1d6a4ba38a2bc57ed35c2c9d140db5568a81f951f5"}]}'
2025-02-07 04:06:06.062 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-07 04:06:06.063 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-07 04:06:06.063 DEBUG [src.node.waku_node] Stopping container with id 3ccceda0ce4e
2025-02-07 04:06:07.601 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:06:07.601 DEBUG [src.node.waku_node] Stopping container with id f2624ba021bb
2025-02-07 04:06:08.416 ERROR [src.node.docker_mananger] Max retries reached for container 3ccceda0ce4e. Exiting log stream.
2025-02-07 04:06:09.026 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:06:09.028 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-07 04:06:09.034 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-07 04:06:09.041 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
