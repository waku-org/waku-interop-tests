2025-02-07 04:04:12.030 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-07 04:04:12.030 DEBUG [tests.conftest] Running test: test_light_push_with_invalid_meta with id: 2025-02-07_04-04-12__684d0e72-8a2f-45ae-b702-0ec7a1fc2c68
2025-02-07 04:04:12.030 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-07 04:04:12.031 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-07 04:04:12.037 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:04:12.037 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-07_04-04-12__684d0e72-8a2f-45ae-b702-0ec7a1fc2c68__wakuorg_nwaku:latest.log
2025-02-07 04:04:12.037 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:04:12.038 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:04:12.039 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:04:12.039 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.69.68
2025-02-07 04:04:12.039 DEBUG [src.node.docker_mananger] Generated ports ['22483', '22484', '22485', '22486', '22487']
2025-02-07 04:04:12.039 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:04:12.040 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:04:12.040 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:04:12.040 DEBUG [src.node.docker_mananger] docker run -i -t -p 22483:22483 -p 22484:22484 -p 22485:22485 -p 22486:22486 -p 22487:22487 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22485 --rest-port=22483 --tcp-port=22484 --discv5-udp-port=22486 --rest-address=0.0.0.0 --nat=extip:172.18.69.68 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3fbbe4dfb79cfab190d3dfcbb8aa9a6ecaa75144163940b3c6d4b9f11df7ef21 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22487 --metrics-logging=true --lightpush=true --relay=true
2025-02-07 04:04:12.263 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.69.68 waku 2792750b7c192dd66a9db874bb52aeedc0d6ca23b813ef75b13b49d3d18d02bf
2025-02-07 04:04:12.318 DEBUG [src.node.docker_mananger] Container started with ID 2792750b7c19. Setting up logs at ./log/docker/receiving_node1_2025-02-07_04-04-12__684d0e72-8a2f-45ae-b702-0ec7a1fc2c68__wakuorg_nwaku:latest.log
2025-02-07 04:04:12.318 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 22483
2025-02-07 04:04:12.319 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:04:12.831 ERROR [src.node.docker_mananger] Max retries reached for container c379a29341b9. Exiting log stream.
2025-02-07 04:04:13.320 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22483/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:04:13.323 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:04:13.323 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:04:13.323 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22483/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:04:13.325 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.69.68/tcp/22484/p2p/16Uiu2HAmLhMSjoQNEqwGDLXZWTBDeGQZjv3FaKF6qLnqo1XjA5pn","/ip4/172.18.69.68/tcp/22485/ws/p2p/16Uiu2HAmLhMSjoQNEqwGDLXZWTBDeGQZjv3FaKF6qLnqo1XjA5pn"],"enrUri":"enr:-L24QJq9ZtsOCpLyu2HA9D64y4PG_-aA2tA2_8ZPx0AqUTt6SOkOvPj2kB9PxkWmvvSWnzplsp5YiNFxez82Nt5BVBwCgmlkgnY0gmlwhKwSRUSKbXVsdGlhZGRyc5YACASsEkVEBlfUAAoErBJFRAZX1d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDd3iCDj47BB9-y_Yh49Kca0oIPFM012THKi4A1d6xuSuDdGNwglfUg3VkcIJX1oV3YWt1Mgk"}'
2025-02-07 04:04:13.326 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:04:13.332 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:04:13.332 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-07_04-04-12__684d0e72-8a2f-45ae-b702-0ec7a1fc2c68__wakuorg_nwaku:latest.log
2025-02-07 04:04:13.332 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:04:13.333 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:04:13.334 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:04:13.334 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.249.142
2025-02-07 04:04:13.334 DEBUG [src.node.docker_mananger] Generated ports ['2655', '2656', '2657', '2658', '2659']
2025-02-07 04:04:13.334 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:04:13.334 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:04:13.334 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:04:13.335 DEBUG [src.node.docker_mananger] docker run -i -t -p 2655:2655 -p 2656:2656 -p 2657:2657 -p 2658:2658 -p 2659:2659 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2657 --rest-port=2655 --tcp-port=2656 --discv5-udp-port=2658 --rest-address=0.0.0.0 --nat=extip:172.18.249.142 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cb12c518a1db6b33b886a8adbafa7df0de7b1e06b05a3d3767d7149f8c7e439c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2659 --metrics-logging=true --lightpush=false --relay=true
2025-02-07 04:04:13.563 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.249.142 waku 1b04653064029518e45d6ec9b42e6e487add86f312a55b57470ad6939c28ae7d
2025-02-07 04:04:13.610 DEBUG [src.node.docker_mananger] Container started with ID 1b0465306402. Setting up logs at ./log/docker/receiving_node2_2025-02-07_04-04-12__684d0e72-8a2f-45ae-b702-0ec7a1fc2c68__wakuorg_nwaku:latest.log
2025-02-07 04:04:13.611 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 2655
2025-02-07 04:04:13.611 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:04:14.611 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2655/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:04:14.614 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:04:14.614 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:04:14.615 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2655/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:04:14.617 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.249.142/tcp/2656/p2p/16Uiu2HAmLKuT9nExzdwZiid9ctKtProSf9yR2G4zXqoqCGHLyekP","/ip4/172.18.249.142/tcp/2657/ws/p2p/16Uiu2HAmLKuT9nExzdwZiid9ctKtProSf9yR2G4zXqoqCGHLyekP"],"enrUri":"enr:-L24QF1A-m9vD4bFH6LcA7BfO1Q-SQMz7MDqTNWEQT3b6HRAUkyLGhhSQ9jxkpGD7_TK85c16V591Y7DTTQ5GmX3AvcCgmlkgnY0gmlwhKwS-Y6KbXVsdGlhZGRyc5YACASsEvmOBgpgAAoErBL5jgYKYd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDcfnruetHBPtbiEe63HyqfzMX0gYcosJB7UoVREPhqDiDdGNwggpgg3VkcIIKYoV3YWt1MgE"}'
2025-02-07 04:04:14.617 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:04:14.617 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2655/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.69.68/tcp/22484/p2p/16Uiu2HAmLhMSjoQNEqwGDLXZWTBDeGQZjv3FaKF6qLnqo1XjA5pn"]'
2025-02-07 04:04:14.657 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:04:14.666 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:04:14.667 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-07_04-04-12__684d0e72-8a2f-45ae-b702-0ec7a1fc2c68__wakuorg_nwaku:latest.log
2025-02-07 04:04:14.667 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:04:14.667 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:04:14.668 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:04:14.669 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.243.68
2025-02-07 04:04:14.669 DEBUG [src.node.docker_mananger] Generated ports ['9600', '9601', '9602', '9603', '9604']
2025-02-07 04:04:14.669 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:04:14.669 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:04:14.669 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:04:14.669 DEBUG [src.node.docker_mananger] docker run -i -t -p 9600:9600 -p 9601:9601 -p 9602:9602 -p 9603:9603 -p 9604:9604 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=9602 --rest-port=9600 --tcp-port=9601 --discv5-udp-port=9603 --rest-address=0.0.0.0 --nat=extip:172.18.243.68 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8b32ed6b2435445ffcc4e691a495f4f7cfbdceef1831fffdf0baa44a5c070e41 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=9604 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QJq9ZtsOCpLyu2HA9D64y4PG_-aA2tA2_8ZPx0AqUTt6SOkOvPj2kB9PxkWmvvSWnzplsp5YiNFxez82Nt5BVBwCgmlkgnY0gmlwhKwSRUSKbXVsdGlhZGRyc5YACASsEkVEBlfUAAoErBJFRAZX1d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDd3iCDj47BB9-y_Yh49Kca0oIPFM012THKi4A1d6xuSuDdGNwglfUg3VkcIJX1oV3YWt1Mgk --lightpushnode=/ip4/172.18.69.68/tcp/22484/p2p/16Uiu2HAmLhMSjoQNEqwGDLXZWTBDeGQZjv3FaKF6qLnqo1XjA5pn --lightpush=true --relay=false
2025-02-07 04:04:14.920 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.243.68 waku e16974963bcdfdf0af10174a8cb9c783019da410acee792f8547109a40616ceb
2025-02-07 04:04:14.966 DEBUG [src.node.docker_mananger] Container started with ID e16974963bcd. Setting up logs at ./log/docker/lightpush_node1_2025-02-07_04-04-12__684d0e72-8a2f-45ae-b702-0ec7a1fc2c68__wakuorg_nwaku:latest.log
2025-02-07 04:04:14.967 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 9600
2025-02-07 04:04:14.967 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:04:15.967 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9600/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:04:15.970 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:04:15.970 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:04:15.971 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9600/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:04:15.973 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.243.68/tcp/9601/p2p/16Uiu2HAmUgyfDTAHUH5WQaX3RGes5wiDTcMgK9oqJMRjFEdbjCuB","/ip4/172.18.243.68/tcp/9602/ws/p2p/16Uiu2HAmUgyfDTAHUH5WQaX3RGes5wiDTcMgK9oqJMRjFEdbjCuB"],"enrUri":"enr:-L24QHVSxFT0_YQwCJBdAuqkCtVgDFf_-m2Y6fxqu4h2AAf3EUXay8f0s0_Gge685k_M1XYCLQxCiCYC-Y5kvBZgWa0CgmlkgnY0gmlwhKwS80SKbXVsdGlhZGRyc5YACASsEvNEBiWBAAoErBLzRAYlgt0DgnJzhQADAQAAiXNlY3AyNTZrMaED7j1fBpKVb2dOipNjhzOrgw95n2P1pJ_FucKytFeFg86DdGNwgiWBg3VkcIIlg4V3YWt1Mgg"}'
2025-02-07 04:04:15.973 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:04:15.973 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9600/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.69.68/tcp/22484/p2p/16Uiu2HAmLhMSjoQNEqwGDLXZWTBDeGQZjv3FaKF6qLnqo1XjA5pn"]'
2025-02-07 04:04:16.010 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:04:16.011 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9600/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.249.142/tcp/2656/p2p/16Uiu2HAmLKuT9nExzdwZiid9ctKtProSf9yR2G4zXqoqCGHLyekP"]'
2025-02-07 04:04:16.038 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:04:16.040 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22483/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-07 04:04:16.048 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:04:16.050 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2655/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-07 04:04:16.056 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:04:16.059 DEBUG [src.steps.light_push] Lightpushing message
2025-02-07 04:04:16.059 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9600/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738901056059228160, "meta": "Light push works!!"}}'
2025-02-07 04:04:16.063 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:9600/lightpush/v1/message. Response content: b'Invalid message: Incorrect base64 string'
2025-02-07 04:04:16.065 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-07 04:04:16.066 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-07 04:04:16.066 DEBUG [src.node.waku_node] Stopping container with id 2792750b7c19
2025-02-07 04:04:16.829 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:04:16.830 DEBUG [src.node.waku_node] Stopping container with id 1b0465306402
2025-02-07 04:04:17.646 ERROR [src.node.docker_mananger] Max retries reached for container 2792750b7c19. Exiting log stream.
2025-02-07 04:04:17.719 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:04:17.719 DEBUG [src.node.waku_node] Stopping container with id e16974963bcd
2025-02-07 04:04:18.532 ERROR [src.node.docker_mananger] Max retries reached for container 1b0465306402. Exiting log stream.
2025-02-07 04:04:18.935 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:04:18.937 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-07 04:04:18.944 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-07 04:04:18.950 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-07 04:04:18.955 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
