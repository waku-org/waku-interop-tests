2025-02-07 04:04:07.934 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-07 04:04:07.935 DEBUG [tests.conftest] Running test: test_invalid_page_size with id: 2025-02-07_04-04-07__328e297f-4d6d-4fc9-804f-ab1935f07715
2025-02-07 04:04:07.935 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-07 04:04:07.935 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-07 04:04:07.935 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-07 04:04:07.942 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:04:07.942 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-07_04-04-07__328e297f-4d6d-4fc9-804f-ab1935f07715__wakuorg_nwaku:latest.log
2025-02-07 04:04:07.942 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:04:07.942 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:04:07.944 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:04:07.944 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.34.92
2025-02-07 04:04:07.944 DEBUG [src.node.docker_mananger] Generated ports ['6040', '6041', '6042', '6043', '6044']
2025-02-07 04:04:07.944 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:04:07.945 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:04:07.945 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:04:07.945 DEBUG [src.node.docker_mananger] docker run -i -t -p 6040:6040 -p 6041:6041 -p 6042:6042 -p 6043:6043 -p 6044:6044 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6042 --rest-port=6040 --tcp-port=6041 --discv5-udp-port=6043 --rest-address=0.0.0.0 --nat=extip:172.18.34.92 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cdb9f2728ded827aee5ab9df5bba5d7ae7a6e7ecf7cf4211f4b2cef25bdabc3c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6044 --metrics-logging=true --store=true --relay=true
2025-02-07 04:04:08.178 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.34.92 waku 0500dd4eb42a4318129d27f3cb85e925486ab98c66f840485bbb5b101e424868
2025-02-07 04:04:08.230 DEBUG [src.node.docker_mananger] Container started with ID 0500dd4eb42a. Setting up logs at ./log/docker/publishing_node1_2025-02-07_04-04-07__328e297f-4d6d-4fc9-804f-ab1935f07715__wakuorg_nwaku:latest.log
2025-02-07 04:04:08.232 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 6040
2025-02-07 04:04:08.232 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:04:08.736 ERROR [src.node.docker_mananger] Max retries reached for container 9a9bbb0c798d. Exiting log stream.
2025-02-07 04:04:09.233 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6040/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:04:09.236 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:04:09.236 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:04:09.236 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6040/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:04:09.238 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.34.92/tcp/6041/p2p/16Uiu2HAmDRxm98ziLLmc6gdAoGxSMfVaYq3984fR6KTJFbn9BA9e","/ip4/172.18.34.92/tcp/6042/ws/p2p/16Uiu2HAmDRxm98ziLLmc6gdAoGxSMfVaYq3984fR6KTJFbn9BA9e"],"enrUri":"enr:-L24QBecwO1TDRr6DIKnOHqvEUBne5MjqKadqZsMW1yikuhXPGUav3d_Jr5J81ail8Q9e4RZDwhwvelRxQEkVd_7voECgmlkgnY0gmlwhKwSIlyKbXVsdGlhZGRyc5YACASsEiJcBheZAAoErBIiXAYXmt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDC4VXCNa1uW484cA-LUaJOKXGYLD3vGnJv1HahZ6wX-mDdGNwgheZg3VkcIIXm4V3YWt1MgM"}'
2025-02-07 04:04:09.239 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:04:09.245 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:04:09.245 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-07_04-04-07__328e297f-4d6d-4fc9-804f-ab1935f07715__wakuorg_nwaku:latest.log
2025-02-07 04:04:09.246 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:04:09.246 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:04:09.247 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:04:09.247 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.124.195
2025-02-07 04:04:09.247 DEBUG [src.node.docker_mananger] Generated ports ['47831', '47832', '47833', '47834', '47835']
2025-02-07 04:04:09.247 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:04:09.248 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:04:09.248 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:04:09.248 DEBUG [src.node.docker_mananger] docker run -i -t -p 47831:47831 -p 47832:47832 -p 47833:47833 -p 47834:47834 -p 47835:47835 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=47833 --rest-port=47831 --tcp-port=47832 --discv5-udp-port=47834 --rest-address=0.0.0.0 --nat=extip:172.18.124.195 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=412dde5b2c6325c4aa3db8bafb11ba3e7bb5adc56d6ee4a2e48a33d4c2abaf5a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=47835 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QBecwO1TDRr6DIKnOHqvEUBne5MjqKadqZsMW1yikuhXPGUav3d_Jr5J81ail8Q9e4RZDwhwvelRxQEkVd_7voECgmlkgnY0gmlwhKwSIlyKbXVsdGlhZGRyc5YACASsEiJcBheZAAoErBIiXAYXmt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDC4VXCNa1uW484cA-LUaJOKXGYLD3vGnJv1HahZ6wX-mDdGNwgheZg3VkcIIXm4V3YWt1MgM --storenode=/ip4/172.18.34.92/tcp/6041/p2p/16Uiu2HAmDRxm98ziLLmc6gdAoGxSMfVaYq3984fR6KTJFbn9BA9e --store=true --relay=true
2025-02-07 04:04:09.484 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.124.195 waku e9172e05b80d4a672a67d43e26a97e5b92f142941125a4ac1d3a95c3af461344
2025-02-07 04:04:09.534 DEBUG [src.node.docker_mananger] Container started with ID e9172e05b80d. Setting up logs at ./log/docker/store_node1_2025-02-07_04-04-07__328e297f-4d6d-4fc9-804f-ab1935f07715__wakuorg_nwaku:latest.log
2025-02-07 04:04:09.534 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 47831
2025-02-07 04:04:09.535 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:04:10.536 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47831/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:04:10.538 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:04:10.538 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:04:10.539 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47831/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:04:10.541 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.124.195/tcp/47832/p2p/16Uiu2HAmHe5VBhT7Y7MwT84Weg3KyyqQVn9hJarkq9pAMat72qub","/ip4/172.18.124.195/tcp/47833/ws/p2p/16Uiu2HAmHe5VBhT7Y7MwT84Weg3KyyqQVn9hJarkq9pAMat72qub"],"enrUri":"enr:-L24QN15whQoy43TXN6BnnBS9KZrr9wSrF8gTGq5ZY4nAd2bACuyyFREFl_DWw33t0RqJ6zN6HW-gqIZSQjyIWIL_iQCgmlkgnY0gmlwhKwSfMOKbXVsdGlhZGRyc5YACASsEnzDBrrYAAoErBJ8wwa62d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDSg6pSFn5K9nr6gaFmopHyWTYE8WxTFKggWcqD2GIOVKDdGNwgrrYg3VkcIK62oV3YWt1MgM"}'
2025-02-07 04:04:10.541 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:04:10.541 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47831/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.34.92/tcp/6041/p2p/16Uiu2HAmDRxm98ziLLmc6gdAoGxSMfVaYq3984fR6KTJFbn9BA9e"]'
2025-02-07 04:04:10.544 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:04:10.544 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6040/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-07 04:04:10.547 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:04:10.547 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47831/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-07 04:04:10.549 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:04:10.550 DEBUG [src.steps.store] Relaying message
2025-02-07 04:04:10.550 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6040/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:04:10.557 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:04:10.557 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:04:10.758 DEBUG [src.steps.store] Relaying message
2025-02-07 04:04:10.758 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6040/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8x", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:04:10.764 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:04:10.764 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:04:10.965 DEBUG [src.steps.store] Relaying message
2025-02-07 04:04:10.965 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6040/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8y", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:04:10.971 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:04:10.971 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:04:11.173 DEBUG [src.steps.store] Relaying message
2025-02-07 04:04:11.173 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6040/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8z", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:04:11.180 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:04:11.180 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:04:11.381 DEBUG [src.steps.store] Relaying message
2025-02-07 04:04:11.381 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6040/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV80", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:04:11.387 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:04:11.388 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:04:11.589 DEBUG [src.steps.store] Relaying message
2025-02-07 04:04:11.589 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6040/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV81", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:04:11.596 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:04:11.597 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:04:11.798 DEBUG [src.steps.store] Relaying message
2025-02-07 04:04:11.798 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6040/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV82", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:04:11.805 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:04:11.805 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:04:12.006 DEBUG [src.steps.store] Relaying message
2025-02-07 04:04:12.006 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6040/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV83", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:04:12.012 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:04:12.013 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:04:12.214 DEBUG [src.steps.store] Relaying message
2025-02-07 04:04:12.215 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6040/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV84", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:04:12.221 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:04:12.222 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:04:12.422 DEBUG [src.steps.store] Relaying message
2025-02-07 04:04:12.423 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6040/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV85", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:04:12.429 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:04:12.430 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:04:12.630 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6040/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=$2&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:04:12.633 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:6040/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=$2&ascending=true. Response content: b'page size parsing error: invalid integer: $2'
2025-02-07 04:04:12.634 DEBUG [tests.store.test_page_size] the invalid page_size $2 wasn't accepted 
2025-02-07 04:04:12.635 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47831/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=$2&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:04:12.637 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:47831/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=$2&ascending=true. Response content: b'page size parsing error: invalid integer: $2'
2025-02-07 04:04:12.638 DEBUG [tests.store.test_page_size] the invalid page_size $2 wasn't accepted 
2025-02-07 04:04:12.639 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-07 04:04:12.640 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-07 04:04:12.641 DEBUG [src.node.waku_node] Stopping container with id 0500dd4eb42a
2025-02-07 04:04:13.779 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:04:13.780 DEBUG [src.node.waku_node] Stopping container with id e9172e05b80d
2025-02-07 04:04:14.593 ERROR [src.node.docker_mananger] Max retries reached for container 0500dd4eb42a. Exiting log stream.
2025-02-07 04:04:15.281 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:04:15.284 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-07 04:04:15.290 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-07 04:04:15.297 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
