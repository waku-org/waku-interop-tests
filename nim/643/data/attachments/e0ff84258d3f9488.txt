2025-02-07 04:08:03.209 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-07 04:08:03.209 DEBUG [tests.conftest] Running test: test_light_push_with_invalid_version with id: 2025-02-07_04-08-03__c50453df-7d3a-4211-9eba-71415b89dcd1
2025-02-07 04:08:03.210 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-07 04:08:03.210 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-07 04:08:03.216 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:08:03.216 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-07_04-08-03__c50453df-7d3a-4211-9eba-71415b89dcd1__wakuorg_nwaku:latest.log
2025-02-07 04:08:03.216 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:08:03.216 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:08:03.218 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:08:03.218 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.68.196
2025-02-07 04:08:03.218 DEBUG [src.node.docker_mananger] Generated ports ['6616', '6617', '6618', '6619', '6620']
2025-02-07 04:08:03.218 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:08:03.218 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:08:03.218 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:08:03.219 DEBUG [src.node.docker_mananger] docker run -i -t -p 6616:6616 -p 6617:6617 -p 6618:6618 -p 6619:6619 -p 6620:6620 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6618 --rest-port=6616 --tcp-port=6617 --discv5-udp-port=6619 --rest-address=0.0.0.0 --nat=extip:172.18.68.196 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=381f020debd46a7eac9a64b44703aeca81db28620dc6c8b7d0e1720dc92ddedf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6620 --metrics-logging=true --lightpush=true --relay=true
2025-02-07 04:08:03.439 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.68.196 waku 0986535b148ed592a832c6db5d1be823de20d1b2e872eaefbcd69b8441be3cc3
2025-02-07 04:08:03.487 DEBUG [src.node.docker_mananger] Container started with ID 0986535b148e. Setting up logs at ./log/docker/receiving_node1_2025-02-07_04-08-03__c50453df-7d3a-4211-9eba-71415b89dcd1__wakuorg_nwaku:latest.log
2025-02-07 04:08:03.488 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 6616
2025-02-07 04:08:03.488 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:08:04.003 ERROR [src.node.docker_mananger] Max retries reached for container 3754cd091993. Exiting log stream.
2025-02-07 04:08:04.490 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6616/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:08:04.493 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:08:04.493 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:08:04.493 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6616/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:08:04.495 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.68.196/tcp/6617/p2p/16Uiu2HAmTadC5T8ssyzCP6rJ1dsvru8UU5QdTmaTvRw1RJX9esCG","/ip4/172.18.68.196/tcp/6618/ws/p2p/16Uiu2HAmTadC5T8ssyzCP6rJ1dsvru8UU5QdTmaTvRw1RJX9esCG"],"enrUri":"enr:-L24QH-CWosaAZ_2RzmVPc5HL1PrGZxZYgD_uhTfGmHnmKglJLLbwSidvmD8NLaPgL2L8JlXDPt0tk5VgxU4fosa3XsCgmlkgnY0gmlwhKwSRMSKbXVsdGlhZGRyc5YACASsEkTEBhnZAAoErBJExAYZ2t0DgnJzhQADAQAAiXNlY3AyNTZrMaED3cEOaQX31uaSgWIXs32hHmW6-H3BRIuAb_qsyhG2lt2DdGNwghnZg3VkcIIZ24V3YWt1Mgk"}'
2025-02-07 04:08:04.495 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:08:04.502 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:08:04.502 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-07_04-08-03__c50453df-7d3a-4211-9eba-71415b89dcd1__wakuorg_nwaku:latest.log
2025-02-07 04:08:04.502 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:08:04.502 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:08:04.503 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:08:04.503 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.159.105
2025-02-07 04:08:04.503 DEBUG [src.node.docker_mananger] Generated ports ['65465', '65466', '65467', '65468', '65469']
2025-02-07 04:08:04.504 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:08:04.504 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:08:04.504 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:08:04.504 DEBUG [src.node.docker_mananger] docker run -i -t -p 65465:65465 -p 65466:65466 -p 65467:65467 -p 65468:65468 -p 65469:65469 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=65467 --rest-port=65465 --tcp-port=65466 --discv5-udp-port=65468 --rest-address=0.0.0.0 --nat=extip:172.18.159.105 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2dbdcfa6437429a0ecf030ab8f1061195c1ba174ad9abcaa3a69095c91e47f6c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=65469 --metrics-logging=true --lightpush=false --relay=true
2025-02-07 04:08:04.731 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.159.105 waku 7f00b9f954c06ead77a11f513ac26ec77340103b0d3359e4baca1a2860b3d7c8
2025-02-07 04:08:04.779 DEBUG [src.node.docker_mananger] Container started with ID 7f00b9f954c0. Setting up logs at ./log/docker/receiving_node2_2025-02-07_04-08-03__c50453df-7d3a-4211-9eba-71415b89dcd1__wakuorg_nwaku:latest.log
2025-02-07 04:08:04.780 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 65465
2025-02-07 04:08:04.780 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:08:05.780 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:65465/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:08:05.783 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:08:05.783 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:08:05.783 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:65465/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:08:05.785 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.159.105/tcp/65466/p2p/16Uiu2HAm9eeJ5gcriqGmd9E3AQarycxXvrQ2dnvtyRxDzrsA8aau","/ip4/172.18.159.105/tcp/65467/ws/p2p/16Uiu2HAm9eeJ5gcriqGmd9E3AQarycxXvrQ2dnvtyRxDzrsA8aau"],"enrUri":"enr:-L24QC6S1NWORXWZ-9Rf7RmwSP4IRlRkAWfY9ZOzMPbp5Y1MIb7W2DK8TljU3jQczeKnO2T0uTo3wbbr8x9oy03fXA8CgmlkgnY0gmlwhKwSn2mKbXVsdGlhZGRyc5YACASsEp9pBv-6AAoErBKfaQb_u90DgnJzhQADAQAAiXNlY3AyNTZrMaEC01ZDOfRKJwAnOELMDxQMNka23x4RXvEeIK6xtBBC2fqDdGNwgv-6g3VkcIL_vIV3YWt1MgE"}'
2025-02-07 04:08:05.785 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:08:05.786 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:65465/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.68.196/tcp/6617/p2p/16Uiu2HAmTadC5T8ssyzCP6rJ1dsvru8UU5QdTmaTvRw1RJX9esCG"]'
2025-02-07 04:08:05.825 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:08:05.833 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:08:05.833 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-07_04-08-03__c50453df-7d3a-4211-9eba-71415b89dcd1__wakuorg_nwaku:latest.log
2025-02-07 04:08:05.833 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:08:05.833 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:08:05.834 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:08:05.835 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.163.90
2025-02-07 04:08:05.835 DEBUG [src.node.docker_mananger] Generated ports ['30160', '30161', '30162', '30163', '30164']
2025-02-07 04:08:05.835 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:08:05.835 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:08:05.835 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:08:05.835 DEBUG [src.node.docker_mananger] docker run -i -t -p 30160:30160 -p 30161:30161 -p 30162:30162 -p 30163:30163 -p 30164:30164 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=30162 --rest-port=30160 --tcp-port=30161 --discv5-udp-port=30163 --rest-address=0.0.0.0 --nat=extip:172.18.163.90 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0debc970da44ecc5d5b6ff2fbcbca458542837a7b4ed445acbb1ddea3ee3c08c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=30164 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QH-CWosaAZ_2RzmVPc5HL1PrGZxZYgD_uhTfGmHnmKglJLLbwSidvmD8NLaPgL2L8JlXDPt0tk5VgxU4fosa3XsCgmlkgnY0gmlwhKwSRMSKbXVsdGlhZGRyc5YACASsEkTEBhnZAAoErBJExAYZ2t0DgnJzhQADAQAAiXNlY3AyNTZrMaED3cEOaQX31uaSgWIXs32hHmW6-H3BRIuAb_qsyhG2lt2DdGNwghnZg3VkcIIZ24V3YWt1Mgk --lightpushnode=/ip4/172.18.68.196/tcp/6617/p2p/16Uiu2HAmTadC5T8ssyzCP6rJ1dsvru8UU5QdTmaTvRw1RJX9esCG --lightpush=true --relay=false
2025-02-07 04:08:06.087 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.163.90 waku 9faa57eab61ee0080197e89fa0236c31d0c6e5b737cc2d0581c616d55a601b17
2025-02-07 04:08:06.130 DEBUG [src.node.docker_mananger] Container started with ID 9faa57eab61e. Setting up logs at ./log/docker/lightpush_node1_2025-02-07_04-08-03__c50453df-7d3a-4211-9eba-71415b89dcd1__wakuorg_nwaku:latest.log
2025-02-07 04:08:06.131 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 30160
2025-02-07 04:08:06.131 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:08:07.132 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30160/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:08:07.135 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:08:07.135 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:08:07.135 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30160/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:08:07.137 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.163.90/tcp/30161/p2p/16Uiu2HAmQ25fPE3JmfDzEkbCSrFT3t1euyEWfB9tNe647nADcf4z","/ip4/172.18.163.90/tcp/30162/ws/p2p/16Uiu2HAmQ25fPE3JmfDzEkbCSrFT3t1euyEWfB9tNe647nADcf4z"],"enrUri":"enr:-L24QJ7dHsbgnVZh0w4dj1NtETp5KVGa5yy7Vk4Js63MkkJDFbSo_DGe6BVp3g0b6ByugQi59E0oqeJGDAHpUQtVYasCgmlkgnY0gmlwhKwSo1qKbXVsdGlhZGRyc5YACASsEqNaBnXRAAoErBKjWgZ10t0DgnJzhQADAQAAiXNlY3AyNTZrMaEDqNfCasHZJunpksgTAY72N5lW4ciEij7WKbMmfPho0FeDdGNwgnXRg3VkcIJ104V3YWt1Mgg"}'
2025-02-07 04:08:07.137 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:08:07.138 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30160/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.68.196/tcp/6617/p2p/16Uiu2HAmTadC5T8ssyzCP6rJ1dsvru8UU5QdTmaTvRw1RJX9esCG"]'
2025-02-07 04:08:07.175 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:08:07.176 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30160/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.159.105/tcp/65466/p2p/16Uiu2HAm9eeJ5gcriqGmd9E3AQarycxXvrQ2dnvtyRxDzrsA8aau"]'
2025-02-07 04:08:07.201 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:08:07.205 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6616/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-07 04:08:07.210 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:08:07.211 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:65465/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-07 04:08:07.218 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:08:07.223 DEBUG [src.steps.light_push] Lightpushing message
2025-02-07 04:08:07.224 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30160/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738901287223297024, "version": 2.1}}'
2025-02-07 04:08:07.228 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:30160/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
2025-02-07 04:08:07.233 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-07 04:08:07.234 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-07 04:08:07.234 DEBUG [src.node.waku_node] Stopping container with id 0986535b148e
2025-02-07 04:08:07.983 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:08:07.983 DEBUG [src.node.waku_node] Stopping container with id 7f00b9f954c0
2025-02-07 04:08:08.794 ERROR [src.node.docker_mananger] Max retries reached for container 0986535b148e. Exiting log stream.
2025-02-07 04:08:09.495 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:08:09.496 DEBUG [src.node.waku_node] Stopping container with id 9faa57eab61e
2025-02-07 04:08:10.307 ERROR [src.node.docker_mananger] Max retries reached for container 7f00b9f954c0. Exiting log stream.
2025-02-07 04:08:10.968 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:08:10.970 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-07 04:08:10.976 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-07 04:08:10.981 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-07 04:08:10.986 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
