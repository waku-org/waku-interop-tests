2025-02-07 04:10:14.603 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-07 04:10:14.604 DEBUG [tests.conftest] Running test: test_store_with_multiple_content_topics with id: 2025-02-07_04-10-14__b8ef2712-9f3a-43b7-a377-78bc87449a5a
2025-02-07 04:10:14.604 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-07 04:10:14.604 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-07 04:10:14.604 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-07 04:10:14.610 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:10:14.611 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-07_04-10-14__b8ef2712-9f3a-43b7-a377-78bc87449a5a__wakuorg_nwaku:latest.log
2025-02-07 04:10:14.611 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:10:14.611 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:10:14.612 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:10:14.612 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.182.114
2025-02-07 04:10:14.612 DEBUG [src.node.docker_mananger] Generated ports ['36124', '36125', '36126', '36127', '36128']
2025-02-07 04:10:14.613 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:10:14.613 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:10:14.613 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:10:14.613 DEBUG [src.node.docker_mananger] docker run -i -t -p 36124:36124 -p 36125:36125 -p 36126:36126 -p 36127:36127 -p 36128:36128 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36126 --rest-port=36124 --tcp-port=36125 --discv5-udp-port=36127 --rest-address=0.0.0.0 --nat=extip:172.18.182.114 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=68627e8e214c0cc1616edc7043c186348d9b21fb4c0e9efb4dab6c7f76b9fc19 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36128 --metrics-logging=true --store=true --relay=true
2025-02-07 04:10:14.840 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.182.114 waku acbc74764477d7efd820482be66e465d93b880f7e4d77eeb1c8c8c9726c01de1
2025-02-07 04:10:14.890 DEBUG [src.node.docker_mananger] Container started with ID acbc74764477. Setting up logs at ./log/docker/publishing_node1_2025-02-07_04-10-14__b8ef2712-9f3a-43b7-a377-78bc87449a5a__wakuorg_nwaku:latest.log
2025-02-07 04:10:14.890 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 36124
2025-02-07 04:10:14.891 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:10:15.404 ERROR [src.node.docker_mananger] Max retries reached for container 069b53cfff48. Exiting log stream.
2025-02-07 04:10:15.891 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36124/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:10:15.894 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:10:15.894 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:10:15.894 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36124/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:10:15.896 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.182.114/tcp/36125/p2p/16Uiu2HAkzebhLwcsFUdF3ip7TPs4uzdmnXeMKgXwmhDHUn7xjYzm","/ip4/172.18.182.114/tcp/36126/ws/p2p/16Uiu2HAkzebhLwcsFUdF3ip7TPs4uzdmnXeMKgXwmhDHUn7xjYzm"],"enrUri":"enr:-L24QL7gndmQ5n37RaGbt17IoCV3cmR9JzlTvoT_9Fgua0ZjVZKuz_D1qfkPUxz2MESUTlHqcAv0CqZ1ZW4G_jLEF4YCgmlkgnY0gmlwhKwStnKKbXVsdGlhZGRyc5YACASsErZyBo0dAAoErBK2cgaNHt0DgnJzhQADAQAAiXNlY3AyNTZrMaECTZokRD1HPSuf53X46HoHaKfQFzNNZjkS4QK9N5ry-_KDdGNwgo0dg3VkcIKNH4V3YWt1MgM"}'
2025-02-07 04:10:15.896 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:10:15.903 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:10:15.903 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-07_04-10-14__b8ef2712-9f3a-43b7-a377-78bc87449a5a__wakuorg_nwaku:latest.log
2025-02-07 04:10:15.903 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:10:15.903 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:10:15.904 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:10:15.904 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.198.53
2025-02-07 04:10:15.905 DEBUG [src.node.docker_mananger] Generated ports ['15366', '15367', '15368', '15369', '15370']
2025-02-07 04:10:15.905 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:10:15.905 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:10:15.905 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:10:15.905 DEBUG [src.node.docker_mananger] docker run -i -t -p 15366:15366 -p 15367:15367 -p 15368:15368 -p 15369:15369 -p 15370:15370 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15368 --rest-port=15366 --tcp-port=15367 --discv5-udp-port=15369 --rest-address=0.0.0.0 --nat=extip:172.18.198.53 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a686c0ad33c51c9f5b9afcefb0abe9ddd032486b8ce8e8a6d3dada1dac38bcf5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15370 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QL7gndmQ5n37RaGbt17IoCV3cmR9JzlTvoT_9Fgua0ZjVZKuz_D1qfkPUxz2MESUTlHqcAv0CqZ1ZW4G_jLEF4YCgmlkgnY0gmlwhKwStnKKbXVsdGlhZGRyc5YACASsErZyBo0dAAoErBK2cgaNHt0DgnJzhQADAQAAiXNlY3AyNTZrMaECTZokRD1HPSuf53X46HoHaKfQFzNNZjkS4QK9N5ry-_KDdGNwgo0dg3VkcIKNH4V3YWt1MgM --storenode=/ip4/172.18.182.114/tcp/36125/p2p/16Uiu2HAkzebhLwcsFUdF3ip7TPs4uzdmnXeMKgXwmhDHUn7xjYzm --store=true --relay=true
2025-02-07 04:10:16.140 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.198.53 waku 56ffc0ac808bbe99a96bd14a9448b534c973fd37fa4c3a07ff16f62145c575de
2025-02-07 04:10:16.185 DEBUG [src.node.docker_mananger] Container started with ID 56ffc0ac808b. Setting up logs at ./log/docker/store_node1_2025-02-07_04-10-14__b8ef2712-9f3a-43b7-a377-78bc87449a5a__wakuorg_nwaku:latest.log
2025-02-07 04:10:16.186 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 15366
2025-02-07 04:10:16.186 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:10:17.187 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15366/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:10:17.189 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:10:17.190 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:10:17.190 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15366/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:10:17.192 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.198.53/tcp/15367/p2p/16Uiu2HAkzobkXJDBRcnsbdjEWYMPBeEQhTNn6FhPh7bZ6C5uoTQ3","/ip4/172.18.198.53/tcp/15368/ws/p2p/16Uiu2HAkzobkXJDBRcnsbdjEWYMPBeEQhTNn6FhPh7bZ6C5uoTQ3"],"enrUri":"enr:-L24QMOjniUOryMjchudqIfw5FIqHvLZPJ8zF_pFHUe1b-kyN-ksLFjZiGExShv10Hh5AntCz6H4xCWF5d1XnrfmQfICgmlkgnY0gmlwhKwSxjWKbXVsdGlhZGRyc5YACASsEsY1BjwHAAoErBLGNQY8CN0DgnJzhQADAQAAiXNlY3AyNTZrMaECT-huUFJkbnrkcjBLeUVUDUkXU-ZXka3eGYV6r68pERCDdGNwgjwHg3VkcII8CYV3YWt1MgM"}'
2025-02-07 04:10:17.192 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:10:17.193 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15366/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.182.114/tcp/36125/p2p/16Uiu2HAkzebhLwcsFUdF3ip7TPs4uzdmnXeMKgXwmhDHUn7xjYzm"]'
2025-02-07 04:10:17.195 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:10:17.196 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36124/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-07 04:10:17.198 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:10:17.198 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15366/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-07 04:10:17.200 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:10:17.201 DEBUG [src.steps.store] Relaying message
2025-02-07 04:10:17.201 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36124/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:10:17.207 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:10:17.207 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:10:17.408 DEBUG [src.steps.store] Relaying message
2025-02-07 04:10:17.408 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36124/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:10:17.413 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:10:17.414 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:10:17.614 DEBUG [src.steps.store] Relaying message
2025-02-07 04:10:17.615 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36124/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:10:17.620 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:10:17.620 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:10:17.821 DEBUG [src.steps.store] Relaying message
2025-02-07 04:10:17.822 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36124/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:10:17.827 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:10:17.827 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:10:18.029 DEBUG [src.steps.store] Relaying message
2025-02-07 04:10:18.029 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36124/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:10:18.035 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:10:18.035 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:10:18.236 DEBUG [src.steps.store] Relaying message
2025-02-07 04:10:18.236 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36124/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:10:18.242 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:10:18.242 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:10:18.443 DEBUG [src.steps.store] Relaying message
2025-02-07 04:10:18.443 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36124/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:10:18.448 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:10:18.449 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:10:18.650 DEBUG [src.steps.store] Relaying message
2025-02-07 04:10:18.650 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36124/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:10:18.655 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:10:18.656 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:10:18.857 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36124/store/v3/messages?contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto%2C%2Fstatusim%2F1%2Fcommunity%2Fcbor&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:10:18.860 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xdf3f55f6725aa40cce70c8e3391d0828b4d3b900bf3dbfeae25c4ce326b99310"},{"messageHash":"0x975d4ad83705011fa7a02f44614eea1457aca19fe347242e7e1143fe6427b7f2"}]}'
2025-02-07 04:10:18.861 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15366/store/v3/messages?contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto%2C%2Fstatusim%2F1%2Fcommunity%2Fcbor&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:10:18.863 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xdf3f55f6725aa40cce70c8e3391d0828b4d3b900bf3dbfeae25c4ce326b99310"},{"messageHash":"0x975d4ad83705011fa7a02f44614eea1457aca19fe347242e7e1143fe6427b7f2"}]}'
2025-02-07 04:10:18.866 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-07 04:10:18.867 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-07 04:10:18.867 DEBUG [src.node.waku_node] Stopping container with id acbc74764477
2025-02-07 04:10:19.427 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:10:19.427 DEBUG [src.node.waku_node] Stopping container with id 56ffc0ac808b
2025-02-07 04:10:20.238 ERROR [src.node.docker_mananger] Max retries reached for container acbc74764477. Exiting log stream.
2025-02-07 04:10:20.741 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:10:20.742 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-07 04:10:20.749 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-07 04:10:20.756 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
