2025-02-07 04:03:41.592 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-07 04:03:41.592 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_with_no_content_topic with id: 2025-02-07_04-03-41__2348ecc3-041c-46a3-bcc7-13877a6bfce9
2025-02-07 04:03:41.593 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-07 04:03:41.593 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-07 04:03:41.593 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-07 04:03:41.599 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:03:41.599 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-07_04-03-41__2348ecc3-041c-46a3-bcc7-13877a6bfce9__wakuorg_nwaku:latest.log
2025-02-07 04:03:41.600 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:03:41.600 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:03:41.601 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:03:41.601 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.171.34
2025-02-07 04:03:41.601 DEBUG [src.node.docker_mananger] Generated ports ['36469', '36470', '36471', '36472', '36473']
2025-02-07 04:03:41.601 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:03:41.602 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:03:41.602 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:03:41.602 DEBUG [src.node.docker_mananger] docker run -i -t -p 36469:36469 -p 36470:36470 -p 36471:36471 -p 36472:36472 -p 36473:36473 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36471 --rest-port=36469 --tcp-port=36470 --discv5-udp-port=36472 --rest-address=0.0.0.0 --nat=extip:172.18.171.34 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c04d4e2e790cba5e8efc94ca49eaced52a6d67adce19bc7bbbbacde4c28b43ee --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36473 --metrics-logging=true --relay=true --filter=true
2025-02-07 04:03:41.827 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.171.34 waku 399eab1a37ac316f41cfecedf1cb7f43da4060d6061e06875eb442600f888ee4
2025-02-07 04:03:41.872 DEBUG [src.node.docker_mananger] Container started with ID 399eab1a37ac. Setting up logs at ./log/docker/node1_2025-02-07_04-03-41__2348ecc3-041c-46a3-bcc7-13877a6bfce9__wakuorg_nwaku:latest.log
2025-02-07 04:03:41.873 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 36469
2025-02-07 04:03:41.873 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:03:42.393 ERROR [src.node.docker_mananger] Max retries reached for container fa4c59295005. Exiting log stream.
2025-02-07 04:03:42.874 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36469/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:03:42.877 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:03:42.877 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:03:42.877 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36469/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:03:42.879 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.171.34/tcp/36470/p2p/16Uiu2HAmFSyFLHgovstHneRYu73PMaBjz8Z83k4bcNtU78bmPofS","/ip4/172.18.171.34/tcp/36471/ws/p2p/16Uiu2HAmFSyFLHgovstHneRYu73PMaBjz8Z83k4bcNtU78bmPofS"],"enrUri":"enr:-L24QFd7Kp5IAPBrQd7ZID3FDjfqwgLyMFAo_MOumL5RCWS7IaN2hkMwQfhD1q8advYsvImGcwS_vUrWDoqC3P-T87UCgmlkgnY0gmlwhKwSqyKKbXVsdGlhZGRyc5YACASsEqsiBo52AAoErBKrIgaOd90DgnJzhQADAQAAiXNlY3AyNTZrMaEDKX7YIHB2yEf8t9xn6_v4JjqGLJY5XF6kqR6EA975wl2DdGNwgo52g3VkcIKOeIV3YWt1MgU"}'
2025-02-07 04:03:42.880 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:03:42.880 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-07 04:03:42.887 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:03:42.887 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-07_04-03-41__2348ecc3-041c-46a3-bcc7-13877a6bfce9__wakuorg_nwaku:latest.log
2025-02-07 04:03:42.887 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:03:42.887 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:03:42.889 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:03:42.889 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.216.205
2025-02-07 04:03:42.889 DEBUG [src.node.docker_mananger] Generated ports ['34024', '34025', '34026', '34027', '34028']
2025-02-07 04:03:42.889 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:03:42.889 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:03:42.889 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:03:42.889 DEBUG [src.node.docker_mananger] docker run -i -t -p 34024:34024 -p 34025:34025 -p 34026:34026 -p 34027:34027 -p 34028:34028 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34026 --rest-port=34024 --tcp-port=34025 --discv5-udp-port=34027 --rest-address=0.0.0.0 --nat=extip:172.18.216.205 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=95dc2b71d4afb3ee98b3a11758050ca18bcc00158b2eb6a06f2aacdd0dc3bca4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34028 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QFd7Kp5IAPBrQd7ZID3FDjfqwgLyMFAo_MOumL5RCWS7IaN2hkMwQfhD1q8advYsvImGcwS_vUrWDoqC3P-T87UCgmlkgnY0gmlwhKwSqyKKbXVsdGlhZGRyc5YACASsEqsiBo52AAoErBKrIgaOd90DgnJzhQADAQAAiXNlY3AyNTZrMaEDKX7YIHB2yEf8t9xn6_v4JjqGLJY5XF6kqR6EA975wl2DdGNwgo52g3VkcIKOeIV3YWt1MgU --filternode=/ip4/172.18.171.34/tcp/36470/p2p/16Uiu2HAmFSyFLHgovstHneRYu73PMaBjz8Z83k4bcNtU78bmPofS
2025-02-07 04:03:43.112 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.216.205 waku 5b67ac35e60e16ad7b5a95f042a6845ed66048b4afb9c5f590a36537866cbcfb
2025-02-07 04:03:43.156 DEBUG [src.node.docker_mananger] Container started with ID 5b67ac35e60e. Setting up logs at ./log/docker/node2_2025-02-07_04-03-41__2348ecc3-041c-46a3-bcc7-13877a6bfce9__wakuorg_nwaku:latest.log
2025-02-07 04:03:43.156 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 34024
2025-02-07 04:03:43.157 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:03:44.157 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:34024/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:03:44.160 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:03:44.160 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:03:44.160 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:34024/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:03:44.162 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.216.205/tcp/34025/p2p/16Uiu2HAm5V7ZkFVBDLWL6CFEvmv7mz2UDZ1HmgChFdtUTKZsSezn","/ip4/172.18.216.205/tcp/34026/ws/p2p/16Uiu2HAm5V7ZkFVBDLWL6CFEvmv7mz2UDZ1HmgChFdtUTKZsSezn"],"enrUri":"enr:-L24QOLAg3Kv5COSwbJhclurNUFVTg6cTEW05oW4uTggNzsGKNIKx7jer-RgnUH1x2Vt4aVnGh2CbNpCdYmcINxP2ZMCgmlkgnY0gmlwhKwS2M2KbXVsdGlhZGRyc5YACASsEtjNBoTpAAoErBLYzQaE6t0DgnJzhQADAQAAiXNlY3AyNTZrMaEClXaKi3b2lzCYZQCQwXqRNefcNH1mrOelerlz9Jq9jNODdGNwgoTpg3VkcIKE64V3YWt1MgA"}'
2025-02-07 04:03:44.162 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:03:44.163 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34024/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.171.34/tcp/36470/p2p/16Uiu2HAmFSyFLHgovstHneRYu73PMaBjz8Z83k4bcNtU78bmPofS"]'
2025-02-07 04:03:44.198 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:03:44.200 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-07 04:03:44.200 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36469/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-07 04:03:44.217 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:03:44.219 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34024/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "58536873-0f38-464c-9cd2-3c43d518f4de", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-07 04:03:44.231 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"58536873-0f38-464c-9cd2-3c43d518f4de","statusDesc":"OK"}'
2025-02-07 04:03:44.232 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:34024/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-07 04:03:44.235 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:34024/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
2025-02-07 04:03:44.237 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-07 04:03:44.238 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-07 04:03:44.238 DEBUG [src.node.waku_node] Stopping container with id 399eab1a37ac
2025-02-07 04:03:45.365 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:03:45.365 DEBUG [src.node.waku_node] Stopping container with id 5b67ac35e60e
2025-02-07 04:03:46.176 ERROR [src.node.docker_mananger] Max retries reached for container 399eab1a37ac. Exiting log stream.
2025-02-07 04:03:46.887 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:03:46.888 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-07 04:03:46.892 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-07 04:03:46.896 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
