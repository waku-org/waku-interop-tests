2025-02-07 04:02:52.943 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-07 04:02:52.943 DEBUG [tests.conftest] Running test: test_light_push_with_with_large_meta with id: 2025-02-07_04-02-52__cfb85f4a-a5d4-4d3a-9549-f035e6f19eff
2025-02-07 04:02:52.943 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-07 04:02:52.944 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-07 04:02:52.950 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:02:52.951 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-07_04-02-52__cfb85f4a-a5d4-4d3a-9549-f035e6f19eff__wakuorg_nwaku:latest.log
2025-02-07 04:02:52.951 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:02:52.951 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:02:52.952 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:02:52.952 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.133.191
2025-02-07 04:02:52.953 DEBUG [src.node.docker_mananger] Generated ports ['46678', '46679', '46680', '46681', '46682']
2025-02-07 04:02:52.953 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:02:52.953 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:02:52.953 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:02:52.953 DEBUG [src.node.docker_mananger] docker run -i -t -p 46678:46678 -p 46679:46679 -p 46680:46680 -p 46681:46681 -p 46682:46682 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=46680 --rest-port=46678 --tcp-port=46679 --discv5-udp-port=46681 --rest-address=0.0.0.0 --nat=extip:172.18.133.191 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=51477e8c0ddbcbbea5dd2e31cba5cf138ee156adec2f5ce4172cff5d545ba6c1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=46682 --metrics-logging=true --lightpush=true --relay=true
2025-02-07 04:02:53.177 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.133.191 waku eadbdc6eead3aa4bea34c7257cf763a2ec9650b05282af8e6faf9c93a18fb2b9
2025-02-07 04:02:53.239 DEBUG [src.node.docker_mananger] Container started with ID eadbdc6eead3. Setting up logs at ./log/docker/receiving_node1_2025-02-07_04-02-52__cfb85f4a-a5d4-4d3a-9549-f035e6f19eff__wakuorg_nwaku:latest.log
2025-02-07 04:02:53.240 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 46678
2025-02-07 04:02:53.242 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:02:53.689 ERROR [src.node.docker_mananger] Max retries reached for container 5eb236a97310. Exiting log stream.
2025-02-07 04:02:54.244 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46678/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:02:54.247 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:02:54.247 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:02:54.247 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46678/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:02:54.250 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.133.191/tcp/46679/p2p/16Uiu2HAmQnb19o3ejfHVphg5AfALPW72NdaKSwGBUoU75FYt7viJ","/ip4/172.18.133.191/tcp/46680/ws/p2p/16Uiu2HAmQnb19o3ejfHVphg5AfALPW72NdaKSwGBUoU75FYt7viJ"],"enrUri":"enr:-L24QChLmA5sh0FPa1A0wIPp5taN1K--NA1IRkt1P0hPAqBva45IJJ4Xc4MdDRYRSAhhcQUI7ghRp0rxj5BC9H_Hk8wCgmlkgnY0gmlwhKwShb-KbXVsdGlhZGRyc5YACASsEoW_BrZXAAoErBKFvwa2WN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDtD59pvOk7X3hY1IED-Avh1yRpcDQnfdCTB56HvzHrM-DdGNwgrZXg3VkcIK2WYV3YWt1Mgk"}'
2025-02-07 04:02:54.250 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:02:54.256 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:02:54.257 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-07_04-02-52__cfb85f4a-a5d4-4d3a-9549-f035e6f19eff__wakuorg_nwaku:latest.log
2025-02-07 04:02:54.257 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:02:54.257 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:02:54.258 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:02:54.258 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.251.65
2025-02-07 04:02:54.258 DEBUG [src.node.docker_mananger] Generated ports ['54857', '54858', '54859', '54860', '54861']
2025-02-07 04:02:54.259 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:02:54.259 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:02:54.259 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:02:54.259 DEBUG [src.node.docker_mananger] docker run -i -t -p 54857:54857 -p 54858:54858 -p 54859:54859 -p 54860:54860 -p 54861:54861 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=54859 --rest-port=54857 --tcp-port=54858 --discv5-udp-port=54860 --rest-address=0.0.0.0 --nat=extip:172.18.251.65 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fb08ecafdecf3dc0bfd0e7e69cbf4f2e4b0e1033ab2b3fb33629f8656c4e41d5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=54861 --metrics-logging=true --lightpush=false --relay=true
2025-02-07 04:02:54.489 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.251.65 waku 7cb014f5cd36c3d28a419f11d2666b93b8caea1e5bb2420ea1fa79fd542d4af8
2025-02-07 04:02:54.536 DEBUG [src.node.docker_mananger] Container started with ID 7cb014f5cd36. Setting up logs at ./log/docker/receiving_node2_2025-02-07_04-02-52__cfb85f4a-a5d4-4d3a-9549-f035e6f19eff__wakuorg_nwaku:latest.log
2025-02-07 04:02:54.536 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 54857
2025-02-07 04:02:54.536 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:02:55.537 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54857/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:02:55.539 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:02:55.540 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:02:55.540 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54857/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:02:55.542 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.251.65/tcp/54858/p2p/16Uiu2HAm8UPdB9a7aSJjdkahTFc6txEMuEKqdjs8Dqqqt9JtvLge","/ip4/172.18.251.65/tcp/54859/ws/p2p/16Uiu2HAm8UPdB9a7aSJjdkahTFc6txEMuEKqdjs8Dqqqt9JtvLge"],"enrUri":"enr:-L24QEBwhqdXtXREZMDMYts-oqUTP1hzgwM_uOOACrhQPKbGZEo98IaBaEMUQQJjskt7C95JInJ5DwvxpX2PAR6c_A8CgmlkgnY0gmlwhKwS-0GKbXVsdGlhZGRyc5YACASsEvtBBtZKAAoErBL7QQbWS90DgnJzhQADAQAAiXNlY3AyNTZrMaECwdot5L4MqBhqIy1fP8b95bYvUFTk8Nv8XuHm8Fiz4D-DdGNwgtZKg3VkcILWTIV3YWt1MgE"}'
2025-02-07 04:02:55.542 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:02:55.543 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54857/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.133.191/tcp/46679/p2p/16Uiu2HAmQnb19o3ejfHVphg5AfALPW72NdaKSwGBUoU75FYt7viJ"]'
2025-02-07 04:02:55.584 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:02:55.592 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:02:55.592 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-07_04-02-52__cfb85f4a-a5d4-4d3a-9549-f035e6f19eff__wakuorg_nwaku:latest.log
2025-02-07 04:02:55.592 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:02:55.592 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:02:55.594 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:02:55.594 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.48.23
2025-02-07 04:02:55.594 DEBUG [src.node.docker_mananger] Generated ports ['55639', '55640', '55641', '55642', '55643']
2025-02-07 04:02:55.594 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:02:55.594 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:02:55.595 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:02:55.595 DEBUG [src.node.docker_mananger] docker run -i -t -p 55639:55639 -p 55640:55640 -p 55641:55641 -p 55642:55642 -p 55643:55643 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55641 --rest-port=55639 --tcp-port=55640 --discv5-udp-port=55642 --rest-address=0.0.0.0 --nat=extip:172.18.48.23 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8bf9bc5dc6d4e6accd2bad65126f99f4abbe25cda48ba035bd5b1c5b69eedb16 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55643 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QChLmA5sh0FPa1A0wIPp5taN1K--NA1IRkt1P0hPAqBva45IJJ4Xc4MdDRYRSAhhcQUI7ghRp0rxj5BC9H_Hk8wCgmlkgnY0gmlwhKwShb-KbXVsdGlhZGRyc5YACASsEoW_BrZXAAoErBKFvwa2WN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDtD59pvOk7X3hY1IED-Avh1yRpcDQnfdCTB56HvzHrM-DdGNwgrZXg3VkcIK2WYV3YWt1Mgk --lightpushnode=/ip4/172.18.133.191/tcp/46679/p2p/16Uiu2HAmQnb19o3ejfHVphg5AfALPW72NdaKSwGBUoU75FYt7viJ --lightpush=true --relay=false
2025-02-07 04:02:55.831 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.48.23 waku d9cb7b4242e24e70c7d54aa18c0b34441a896ae89fa7399cef3bd0dd08ab1b93
2025-02-07 04:02:55.880 DEBUG [src.node.docker_mananger] Container started with ID d9cb7b4242e2. Setting up logs at ./log/docker/lightpush_node1_2025-02-07_04-02-52__cfb85f4a-a5d4-4d3a-9549-f035e6f19eff__wakuorg_nwaku:latest.log
2025-02-07 04:02:55.880 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 55639
2025-02-07 04:02:55.880 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:02:56.882 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:55639/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:02:56.885 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:02:56.886 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:02:56.886 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:55639/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:02:56.888 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.48.23/tcp/55640/p2p/16Uiu2HAmSNJJjXcGcvXgkeKZD6iq7i64Qba5JmMisfMmMmJSR1cS","/ip4/172.18.48.23/tcp/55641/ws/p2p/16Uiu2HAmSNJJjXcGcvXgkeKZD6iq7i64Qba5JmMisfMmMmJSR1cS"],"enrUri":"enr:-L24QLDctWB4CkmYeGjcmj7EiJ9T-7Hbqw_D09ASOaTx1M8nZ2pZ3x_0b_eC79JagMUPpVrqMR01hxJ_bi2rBYuj8nkCgmlkgnY0gmlwhKwSMBeKbXVsdGlhZGRyc5YACASsEjAXBtlYAAoErBIwFwbZWd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDy70LyjLWUgh8gO7VN3oM6DjtFHhQLkkgiDHAr1ItwveDdGNwgtlYg3VkcILZWoV3YWt1Mgg"}'
2025-02-07 04:02:56.888 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:02:56.889 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55639/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.133.191/tcp/46679/p2p/16Uiu2HAmQnb19o3ejfHVphg5AfALPW72NdaKSwGBUoU75FYt7viJ"]'
2025-02-07 04:02:56.926 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:02:56.926 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55639/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.251.65/tcp/54858/p2p/16Uiu2HAm8UPdB9a7aSJjdkahTFc6txEMuEKqdjs8Dqqqt9JtvLge"]'
2025-02-07 04:02:56.958 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:02:56.960 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46678/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-07 04:02:56.966 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:02:56.968 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54857/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-07 04:02:56.972 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:02:56.975 DEBUG [src.steps.light_push] Lightpushing message
2025-02-07 04:02:56.976 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55639/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738900976974893824, "meta": "YWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYQ=="}}'
2025-02-07 04:02:56.986 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:55639/lightpush/v1/message. Response content: b'Failed to request a message push: decode_rpc_failure: (kind: InvalidLengthField, field: "meta")'
2025-02-07 04:02:56.989 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-07 04:02:56.990 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-07 04:02:56.990 DEBUG [src.node.waku_node] Stopping container with id eadbdc6eead3
2025-02-07 04:02:57.726 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:02:57.726 DEBUG [src.node.waku_node] Stopping container with id 7cb014f5cd36
2025-02-07 04:02:58.541 ERROR [src.node.docker_mananger] Max retries reached for container eadbdc6eead3. Exiting log stream.
2025-02-07 04:02:59.017 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:02:59.017 DEBUG [src.node.waku_node] Stopping container with id d9cb7b4242e2
2025-02-07 04:02:59.830 ERROR [src.node.docker_mananger] Max retries reached for container 7cb014f5cd36. Exiting log stream.
2025-02-07 04:03:00.506 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:03:00.507 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-07 04:03:00.514 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-07 04:03:00.521 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-07 04:03:00.527 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
