2025-02-07 04:05:06.508 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-07 04:05:06.509 DEBUG [tests.conftest] Running test: test_time_filter_zero_start_time with id: 2025-02-07_04-05-06__bbdf279e-b13c-4d6e-aad6-ee298533c7e1
2025-02-07 04:05:06.509 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-07 04:05:06.510 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-07 04:05:06.510 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-07 04:05:06.518 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:05:06.519 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-07_04-05-06__bbdf279e-b13c-4d6e-aad6-ee298533c7e1__wakuorg_nwaku:latest.log
2025-02-07 04:05:06.519 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:05:06.519 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:05:06.521 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:05:06.522 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.117.126
2025-02-07 04:05:06.522 DEBUG [src.node.docker_mananger] Generated ports ['7434', '7435', '7436', '7437', '7438']
2025-02-07 04:05:06.522 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:05:06.523 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:05:06.523 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:05:06.523 DEBUG [src.node.docker_mananger] docker run -i -t -p 7434:7434 -p 7435:7435 -p 7436:7436 -p 7437:7437 -p 7438:7438 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7436 --rest-port=7434 --tcp-port=7435 --discv5-udp-port=7437 --rest-address=0.0.0.0 --nat=extip:172.18.117.126 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bc42df02e5df7dee6a75f6eaac12b00fbd599c0d960b3f7f5eb1e6f2bd33f9f2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7438 --metrics-logging=true --store=true --relay=true
2025-02-07 04:05:06.760 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.117.126 waku b158e5f798b0ea02e1078c50f68fc4fc5bfb7411621fffd97e85f1c90a2fcc36
2025-02-07 04:05:06.807 DEBUG [src.node.docker_mananger] Container started with ID b158e5f798b0. Setting up logs at ./log/docker/publishing_node1_2025-02-07_04-05-06__bbdf279e-b13c-4d6e-aad6-ee298533c7e1__wakuorg_nwaku:latest.log
2025-02-07 04:05:06.809 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 7434
2025-02-07 04:05:06.809 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:05:07.347 ERROR [src.node.docker_mananger] Max retries reached for container 44ba6c7dfb0d. Exiting log stream.
2025-02-07 04:05:07.809 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7434/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:05:07.812 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:05:07.812 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:05:07.813 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7434/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:05:07.815 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.117.126/tcp/7435/p2p/16Uiu2HAmGDNMCDoTNfrx5TfD1ArCgmZu2coDoCLiRyjL6sKAuitf","/ip4/172.18.117.126/tcp/7436/ws/p2p/16Uiu2HAmGDNMCDoTNfrx5TfD1ArCgmZu2coDoCLiRyjL6sKAuitf"],"enrUri":"enr:-L24QLYSkWff42ANFNxXkRyZcOE4zflYqhL67BxQYnAL24cPeFsv419NzGMuXfHDTERs71qlsq2dpGL6M5HiHUpG800CgmlkgnY0gmlwhKwSdX6KbXVsdGlhZGRyc5YACASsEnV-Bh0LAAoErBJ1fgYdDN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDNN6FMWbzZYsiQsdvPd5UqOmptcX7WPUO8Mzt4p3xZWiDdGNwgh0Lg3VkcIIdDYV3YWt1MgM"}'
2025-02-07 04:05:07.815 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:05:07.822 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:05:07.822 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-07_04-05-06__bbdf279e-b13c-4d6e-aad6-ee298533c7e1__wakuorg_nwaku:latest.log
2025-02-07 04:05:07.822 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:05:07.822 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:05:07.823 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:05:07.823 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.248.147
2025-02-07 04:05:07.824 DEBUG [src.node.docker_mananger] Generated ports ['31356', '31357', '31358', '31359', '31360']
2025-02-07 04:05:07.824 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:05:07.824 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:05:07.824 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:05:07.824 DEBUG [src.node.docker_mananger] docker run -i -t -p 31356:31356 -p 31357:31357 -p 31358:31358 -p 31359:31359 -p 31360:31360 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=31358 --rest-port=31356 --tcp-port=31357 --discv5-udp-port=31359 --rest-address=0.0.0.0 --nat=extip:172.18.248.147 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4b1a8dbaa53d5a3c7da57aa2bf233acda28eeaf9e203bdbbfb8c6e58d6c301db --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=31360 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QLYSkWff42ANFNxXkRyZcOE4zflYqhL67BxQYnAL24cPeFsv419NzGMuXfHDTERs71qlsq2dpGL6M5HiHUpG800CgmlkgnY0gmlwhKwSdX6KbXVsdGlhZGRyc5YACASsEnV-Bh0LAAoErBJ1fgYdDN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDNN6FMWbzZYsiQsdvPd5UqOmptcX7WPUO8Mzt4p3xZWiDdGNwgh0Lg3VkcIIdDYV3YWt1MgM --storenode=/ip4/172.18.117.126/tcp/7435/p2p/16Uiu2HAmGDNMCDoTNfrx5TfD1ArCgmZu2coDoCLiRyjL6sKAuitf --store=true --relay=true
2025-02-07 04:05:08.051 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.248.147 waku 653fcfe4dea48db99ce67262a59340d5507efdda1d2af2edf5e08e6d4178d98e
2025-02-07 04:05:08.097 DEBUG [src.node.docker_mananger] Container started with ID 653fcfe4dea4. Setting up logs at ./log/docker/store_node1_2025-02-07_04-05-06__bbdf279e-b13c-4d6e-aad6-ee298533c7e1__wakuorg_nwaku:latest.log
2025-02-07 04:05:08.098 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 31356
2025-02-07 04:05:08.098 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:05:09.099 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31356/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:05:09.101 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:05:09.102 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:05:09.102 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31356/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:05:09.104 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.248.147/tcp/31357/p2p/16Uiu2HAkv9dt3cqigRVa62idbMaTrs3hg12oH2g6NH3tFDDWKAwz","/ip4/172.18.248.147/tcp/31358/ws/p2p/16Uiu2HAkv9dt3cqigRVa62idbMaTrs3hg12oH2g6NH3tFDDWKAwz"],"enrUri":"enr:-L24QMNym_HxtVSisEsHM2uCEMzJkiaA4pwE_7JxlCmIoth4HdV0L9paGMmUF5OnfwloKlH-fJ6oS4Spvy5AXqL0oD0CgmlkgnY0gmlwhKwS-JOKbXVsdGlhZGRyc5YACASsEviTBnp9AAoErBL4kwZ6ft0DgnJzhQADAQAAiXNlY3AyNTZrMaECCsAFQS4Uj937KF1J9KHlqVDm5BIXlhzF9DOvYSDP1NmDdGNwgnp9g3VkcIJ6f4V3YWt1MgM"}'
2025-02-07 04:05:09.105 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:05:09.105 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31356/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.117.126/tcp/7435/p2p/16Uiu2HAmGDNMCDoTNfrx5TfD1ArCgmZu2coDoCLiRyjL6sKAuitf"]'
2025-02-07 04:05:09.108 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:05:09.108 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7434/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-07 04:05:09.111 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:05:09.111 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31356/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-07 04:05:09.113 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:05:09.114 DEBUG [src.steps.store] Relaying message
2025-02-07 04:05:09.114 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7434/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:05:09.119 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:05:09.120 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:05:09.320 DEBUG [src.steps.store] Relaying message
2025-02-07 04:05:09.321 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7434/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:05:09.327 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:05:09.327 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:05:09.528 DEBUG [src.steps.store] Relaying message
2025-02-07 04:05:09.528 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7434/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:05:09.534 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:05:09.535 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:05:09.736 DEBUG [src.steps.store] Relaying message
2025-02-07 04:05:09.736 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7434/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:05:09.742 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:05:09.742 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:05:09.943 DEBUG [src.steps.store] Relaying message
2025-02-07 04:05:09.943 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7434/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:05:09.949 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:05:09.950 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:05:10.151 DEBUG [src.steps.store] Relaying message
2025-02-07 04:05:10.151 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7434/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:05:10.157 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:05:10.157 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:05:10.358 DEBUG [tests.store.test_time_filter] inquering stored messages with start time 0
2025-02-07 04:05:10.358 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7434/store/v3/messages?includeData=True&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=0&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:05:10.361 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x11b20bbb451af52b7b3b0216293b127679f76949b008914001d13a34e48da92d","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738901106114160128,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0xc6c95945e1047a476d14c1539e2f7e5fe63d6503a9e3083e0434d130d1d385e0","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738901108114167040,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0x79bca254696b88a86c278deb2db950325cb1131589a3b233780b3a195028e409","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738901109014169088,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0x6e4ae7875ee49af81f520c72e10117147350bdf2fb06f2761620ded77d36d012","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738901109214170880,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0x1198a3323550e1b4b681f5367284f2d4b1c1d4391ceaf6104e5d12b4bebbb11e","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738901111114172928,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0x0ef5cb206463e8e27b51c2922f03a15e3bb936ff5becd8deabdc948cd4dc9ec8","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738901119114173952,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"}]}'
2025-02-07 04:05:10.362 DEBUG [tests.store.test_time_filter] number of messages stored for  start time = 0 is  6
2025-02-07 04:05:10.362 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31356/store/v3/messages?includeData=True&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=0&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:05:10.366 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x11b20bbb451af52b7b3b0216293b127679f76949b008914001d13a34e48da92d","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738901106114160128,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0xc6c95945e1047a476d14c1539e2f7e5fe63d6503a9e3083e0434d130d1d385e0","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738901108114167040,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0x79bca254696b88a86c278deb2db950325cb1131589a3b233780b3a195028e409","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738901109014169088,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0x6e4ae7875ee49af81f520c72e10117147350bdf2fb06f2761620ded77d36d012","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738901109214170880,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0x1198a3323550e1b4b681f5367284f2d4b1c1d4391ceaf6104e5d12b4bebbb11e","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738901111114172928,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0x0ef5cb206463e8e27b51c2922f03a15e3bb936ff5becd8deabdc948cd4dc9ec8","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738901119114173952,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"}]}'
2025-02-07 04:05:10.366 DEBUG [tests.store.test_time_filter] number of messages stored for  start time = 0 is  6
2025-02-07 04:05:10.367 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-07 04:05:10.368 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-07 04:05:10.369 DEBUG [src.node.waku_node] Stopping container with id b158e5f798b0
2025-02-07 04:05:11.314 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:05:11.315 DEBUG [src.node.waku_node] Stopping container with id 653fcfe4dea4
2025-02-07 04:05:12.127 ERROR [src.node.docker_mananger] Max retries reached for container b158e5f798b0. Exiting log stream.
2025-02-07 04:05:12.816 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:05:12.817 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-07 04:05:12.823 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-07 04:05:12.830 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
