2025-02-07 04:05:53.442 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-07 04:05:53.443 DEBUG [tests.conftest] Running test: test_store_with_invalid_hash with id: 2025-02-07_04-05-53__58bd03b7-d7b0-4a8a-8ac0-68c76db06035
2025-02-07 04:05:53.443 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-07 04:05:53.443 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-07 04:05:53.443 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-07 04:05:53.450 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:05:53.450 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-07_04-05-53__58bd03b7-d7b0-4a8a-8ac0-68c76db06035__wakuorg_nwaku:latest.log
2025-02-07 04:05:53.450 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:05:53.450 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:05:53.452 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:05:53.452 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.122.152
2025-02-07 04:05:53.452 DEBUG [src.node.docker_mananger] Generated ports ['63815', '63816', '63817', '63818', '63819']
2025-02-07 04:05:53.452 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:05:53.452 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:05:53.452 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:05:53.452 DEBUG [src.node.docker_mananger] docker run -i -t -p 63815:63815 -p 63816:63816 -p 63817:63817 -p 63818:63818 -p 63819:63819 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63817 --rest-port=63815 --tcp-port=63816 --discv5-udp-port=63818 --rest-address=0.0.0.0 --nat=extip:172.18.122.152 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d0bc5ce9f1f878ed65fe75e1fbaceaa7ff7d97cafb5fdbdadc098bdd7a733eae --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63819 --metrics-logging=true --store=true --relay=true
2025-02-07 04:05:53.677 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.122.152 waku d8f77ca00402da88212a304b005e137f6d8453a114292d2a0a8cde96e0ad7b3b
2025-02-07 04:05:53.727 DEBUG [src.node.docker_mananger] Container started with ID d8f77ca00402. Setting up logs at ./log/docker/publishing_node1_2025-02-07_04-05-53__58bd03b7-d7b0-4a8a-8ac0-68c76db06035__wakuorg_nwaku:latest.log
2025-02-07 04:05:53.729 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 63815
2025-02-07 04:05:53.730 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:05:54.248 ERROR [src.node.docker_mananger] Max retries reached for container 5b6097051462. Exiting log stream.
2025-02-07 04:05:54.730 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63815/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:05:54.733 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:05:54.733 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:05:54.733 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63815/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:05:54.735 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.122.152/tcp/63816/p2p/16Uiu2HAmDQiVpFe6sEXJri4hjs8Gn2zb9chpDbAENEngNTup3H1i","/ip4/172.18.122.152/tcp/63817/ws/p2p/16Uiu2HAmDQiVpFe6sEXJri4hjs8Gn2zb9chpDbAENEngNTup3H1i"],"enrUri":"enr:-L24QJudW4LNTBM-cPLo-OhxNuNlrTuq3SQ2MMcI8vwjZhnNbIRjgaz9EdRsR4F3SQP5linPNP8bbupULckV4Kq4xh0CgmlkgnY0gmlwhKwSepiKbXVsdGlhZGRyc5YACASsEnqYBvlIAAoErBJ6mAb5Sd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDCzOha5epcoaWHBbHnl9Kx-wxcSxqWxcTdeJmgu581SmDdGNwgvlIg3VkcIL5SoV3YWt1MgM"}'
2025-02-07 04:05:54.735 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:05:54.742 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 04:05:54.742 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-07_04-05-53__58bd03b7-d7b0-4a8a-8ac0-68c76db06035__wakuorg_nwaku:latest.log
2025-02-07 04:05:54.742 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 04:05:54.742 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 04:05:54.744 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 04:05:54.744 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.180.144
2025-02-07 04:05:54.744 DEBUG [src.node.docker_mananger] Generated ports ['6690', '6691', '6692', '6693', '6694']
2025-02-07 04:05:54.744 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 04:05:54.744 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 04:05:54.744 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 04:05:54.745 DEBUG [src.node.docker_mananger] docker run -i -t -p 6690:6690 -p 6691:6691 -p 6692:6692 -p 6693:6693 -p 6694:6694 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6692 --rest-port=6690 --tcp-port=6691 --discv5-udp-port=6693 --rest-address=0.0.0.0 --nat=extip:172.18.180.144 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5a8bcc76acb9a9bd6f4317da66d319c85fb9c9e243ccf8e2f72fdbe698d5c5b1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6694 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QJudW4LNTBM-cPLo-OhxNuNlrTuq3SQ2MMcI8vwjZhnNbIRjgaz9EdRsR4F3SQP5linPNP8bbupULckV4Kq4xh0CgmlkgnY0gmlwhKwSepiKbXVsdGlhZGRyc5YACASsEnqYBvlIAAoErBJ6mAb5Sd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDCzOha5epcoaWHBbHnl9Kx-wxcSxqWxcTdeJmgu581SmDdGNwgvlIg3VkcIL5SoV3YWt1MgM --storenode=/ip4/172.18.122.152/tcp/63816/p2p/16Uiu2HAmDQiVpFe6sEXJri4hjs8Gn2zb9chpDbAENEngNTup3H1i --store=true --relay=true
2025-02-07 04:05:54.970 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.180.144 waku b053ea5a0df681d31a55f9c19e4ea8c44306bc8f7797175bd742fffca88b932b
2025-02-07 04:05:55.022 DEBUG [src.node.docker_mananger] Container started with ID b053ea5a0df6. Setting up logs at ./log/docker/store_node1_2025-02-07_04-05-53__58bd03b7-d7b0-4a8a-8ac0-68c76db06035__wakuorg_nwaku:latest.log
2025-02-07 04:05:55.023 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 6690
2025-02-07 04:05:55.024 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 04:05:56.024 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6690/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:05:56.027 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 04:05:56.027 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 04:05:56.027 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6690/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:05:56.029 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.180.144/tcp/6691/p2p/16Uiu2HAm1Qm1zjduXg1WbGqHvc8FkPWqEk6gnP95kTCZCuR9yDZN","/ip4/172.18.180.144/tcp/6692/ws/p2p/16Uiu2HAm1Qm1zjduXg1WbGqHvc8FkPWqEk6gnP95kTCZCuR9yDZN"],"enrUri":"enr:-L24QJrnfMjH5QVsL1eQT_wMckVAtYJgjHVA5S_VLqhm4URjbGWjs_s7e5YZd-79nEfFNwJrUhbpFsIkBOlY58lMEGkCgmlkgnY0gmlwhKwStJCKbXVsdGlhZGRyc5YACASsErSQBhojAAoErBK0kAYaJN0DgnJzhQADAQAAiXNlY3AyNTZrMaECWOo8ubwSF7OolrkoxSj2nJvYfzd8yrN7nMRCtX9M48WDdGNwghojg3VkcIIaJYV3YWt1MgM"}'
2025-02-07 04:05:56.029 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 04:05:56.029 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6690/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.122.152/tcp/63816/p2p/16Uiu2HAmDQiVpFe6sEXJri4hjs8Gn2zb9chpDbAENEngNTup3H1i"]'
2025-02-07 04:05:56.032 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:05:56.032 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63815/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-07 04:05:56.035 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:05:56.035 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6690/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-07 04:05:56.037 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:05:56.039 DEBUG [src.steps.store] Relaying message
2025-02-07 04:05:56.039 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63815/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:05:56.044 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:05:56.045 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:05:56.246 DEBUG [src.steps.store] Relaying message
2025-02-07 04:05:56.247 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63815/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8x", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:05:56.253 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:05:56.254 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:05:56.454 DEBUG [src.steps.store] Relaying message
2025-02-07 04:05:56.455 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63815/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8y", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:05:56.460 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:05:56.461 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:05:56.661 DEBUG [src.steps.store] Relaying message
2025-02-07 04:05:56.662 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63815/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8z", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-07 04:05:56.668 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 04:05:56.668 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-07 04:05:56.870 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63815/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&hashes=0x74657374&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:05:56.873 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:63815/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&hashes=0x74657374&pageSize=50&ascending=true. Response content: b'waku message hash parsing error: invalid hash length: 4'
2025-02-07 04:05:56.874 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6690/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&hashes=0x74657374&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-07 04:05:56.876 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:6690/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&hashes=0x74657374&pageSize=50&ascending=true. Response content: b'waku message hash parsing error: invalid hash length: 4'
2025-02-07 04:05:56.878 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-07 04:05:56.879 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-07 04:05:56.880 DEBUG [src.node.waku_node] Stopping container with id d8f77ca00402
2025-02-07 04:05:57.556 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:05:57.557 DEBUG [src.node.waku_node] Stopping container with id b053ea5a0df6
2025-02-07 04:05:58.386 ERROR [src.node.docker_mananger] Max retries reached for container d8f77ca00402. Exiting log stream.
2025-02-07 04:05:59.046 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 04:05:59.047 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-07 04:05:59.058 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-07 04:05:59.064 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
