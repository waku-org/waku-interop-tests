[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_update_subscription_with_pubsub_topic_list_instead_of_string with id: 2025-02-07_04-03-24__aea75171-c3db-48e4-a1da-22d9f5300f89
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-02-07_04-03-24__aea75171-c3db-48e4-a1da-22d9f5300f89__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.51.199
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['1410', '1411', '1412', '1413', '1414']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 1410:1410 -p 1411:1411 -p 1412:1412 -p 1413:1413 -p 1414:1414 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=1412 --rest-port=1410 --tcp-port=1411 --discv5-udp-port=1413 --rest-address=0.0.0.0 --nat=extip:172.18.51.199 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d8af6b6a3a1d4b05f2fa4c200acf14e7a12e1df8dee0fdae70bfadabaefebc8c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=1414 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.51.199 waku 556e85894208fb9675e456264e2a0d3e5011bae48c83d34f7f778834cdd3efd2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 556e85894208. Setting up logs at ./log/docker/node1_2025-02-07_04-03-24__aea75171-c3db-48e4-a1da-22d9f5300f89__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 1410
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 1926c9828342. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1410/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1410/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.51.199/tcp/1411/p2p/16Uiu2HAm8Sydgj2dtmtW7ccaPTJB31abEuy344DRecoCfMwZH6U3","/ip4/172.18.51.199/tcp/1412/ws/p2p/16Uiu2HAm8Sydgj2dtmtW7ccaPTJB31abEuy344DRecoCfMwZH6U3"],"enrUri":"enr:-L24QHusKE678tlkn2zEKq5PaOQbnJSveo2CQxCdERW8zX64InNLB4R9dmmoNHyzVL34ApgnY0k0uIdmLckGYcQ9-UYCgmlkgnY0gmlwhKwSM8eKbXVsdGlhZGRyc5YACASsEjPHBgWDAAoErBIzxwYFhN0DgnJzhQADAQAAiXNlY3AyNTZrMaECwX14tVwObBIZBHuMKG3gfFzfeNirn-rrXMG_lcOLcxSDdGNwggWDg3VkcIIFhYV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-02-07_04-03-24__aea75171-c3db-48e4-a1da-22d9f5300f89__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.165.228
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['11039', '11040', '11041', '11042', '11043']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 11039:11039 -p 11040:11040 -p 11041:11041 -p 11042:11042 -p 11043:11043 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=11041 --rest-port=11039 --tcp-port=11040 --discv5-udp-port=11042 --rest-address=0.0.0.0 --nat=extip:172.18.165.228 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c6a71422fc0276ebad7c7dca7ba7ae3436afbafa73ff551da4cacadb83bc3771 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=11043 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QHusKE678tlkn2zEKq5PaOQbnJSveo2CQxCdERW8zX64InNLB4R9dmmoNHyzVL34ApgnY0k0uIdmLckGYcQ9-UYCgmlkgnY0gmlwhKwSM8eKbXVsdGlhZGRyc5YACASsEjPHBgWDAAoErBIzxwYFhN0DgnJzhQADAQAAiXNlY3AyNTZrMaECwX14tVwObBIZBHuMKG3gfFzfeNirn-rrXMG_lcOLcxSDdGNwggWDg3VkcIIFhYV3YWt1MgU --filternode=/ip4/172.18.51.199/tcp/1411/p2p/16Uiu2HAm8Sydgj2dtmtW7ccaPTJB31abEuy344DRecoCfMwZH6U3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.165.228 waku ec7e48bd80e528ca2b84a1518ef242babe5dfb2593f64a8cf662f1e93aab0305
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ec7e48bd80e5. Setting up logs at ./log/docker/node2_2025-02-07_04-03-24__aea75171-c3db-48e4-a1da-22d9f5300f89__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 11039
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11039/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11039/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.165.228/tcp/11040/p2p/16Uiu2HAm3s1gSFjof1xx7yYBp8Za17fesMADqHB47uRzGjkSytxS","/ip4/172.18.165.228/tcp/11041/ws/p2p/16Uiu2HAm3s1gSFjof1xx7yYBp8Za17fesMADqHB47uRzGjkSytxS"],"enrUri":"enr:-L24QNQBr4ROl2BQ3MjAl4TEq4mWPL0YoDjBbCp98q1V4wJDX33hizL8LyJyJ4wd9XQB0XVPbjO-LM1q-Ju-0eteW2gCgmlkgnY0gmlwhKwSpeSKbXVsdGlhZGRyc5YACASsEqXkBisgAAoErBKl5AYrId0DgnJzhQADAQAAiXNlY3AyNTZrMaECfVtKlLJbgEKj9eMCZAbaW6bITxWk81YK0JffKarhiOuDdGNwgisgg3VkcIIrIoV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11039/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.51.199/tcp/1411/p2p/16Uiu2HAm8Sydgj2dtmtW7ccaPTJB31abEuy344DRecoCfMwZH6U3"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1410/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11039/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "785010a9-a3d7-4fc8-9371-ba965876aa70", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"785010a9-a3d7-4fc8-9371-ba965876aa70","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X PUT "http://127.0.0.1:11039/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": ["/waku/2/rs/3/1"]}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:11039/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 556e85894208
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id ec7e48bd80e5
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 556e85894208. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.