[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_only_relay__peer_relay_and_store with id: 2024-04-30_04-23-12__8fda946c-43ba-4aed-818e-9fc581829e93
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-04-30_04-23-12__8fda946c-43ba-4aed-818e-9fc581829e93__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.135.51
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['34772', '34773', '34774', '34775', '34776']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:314 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 34772:34772 -p 34773:34773 -p 34774:34774 -p 34775:34775 -p 34776:34776 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34774 --rest-port=34772 --tcp-port=34773 --discv5-udp-port=34775 --rest-address=0.0.0.0 --nat=extip:172.18.135.51 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34776 --metrics-logging=true --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.135.51 waku 5590677ee094f5558a305a149a898efa1c966f6c8c43fdca56e3e12637cf83b9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 5590677ee094. Setting up logs at ./log/docker/publishing_node1_2024-04-30_04-23-12__8fda946c-43ba-4aed-818e-9fc581829e93__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:120 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 34772
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34772/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.135.51/tcp/34773/p2p/16Uiu2HAmKTUoVa6kRnkgWpj4KbGQZKexibukjH4jYTEpeb5nPfnF","/ip4/172.18.135.51/tcp/34774/ws/p2p/16Uiu2HAmKTUoVa6kRnkgWpj4KbGQZKexibukjH4jYTEpeb5nPfnF"],"enrUri":"enr:-LO4QGBP2XuLMKUpzzofKsA6gqIyWViGuusnS3k6v3uPAACGZo9M8epKGccWlBENlE_boL_IDjH0pVLfEiPsp8qUbMABgmlkgnY0gmlwhKwShzOKbXVsdGlhZGRyc4wACgSsEoczBofW3QOCcnOFAAABAACJc2VjcDI1NmsxoQNlDwJiPoBq6yp8DYL4jZlus7egwKKPqav7W1D1iLQ5WIN0Y3CCh9WDdWRwgofXhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:190 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-04-30_04-23-12__8fda946c-43ba-4aed-818e-9fc581829e93__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.135.185
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['64394', '64395', '64396', '64397', '64398']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:314 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 64394:64394 -p 64395:64395 -p 64396:64396 -p 64397:64397 -p 64398:64398 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64396 --rest-port=64394 --tcp-port=64395 --discv5-udp-port=64397 --rest-address=0.0.0.0 --nat=extip:172.18.135.185 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64398 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QGBP2XuLMKUpzzofKsA6gqIyWViGuusnS3k6v3uPAACGZo9M8epKGccWlBENlE_boL_IDjH0pVLfEiPsp8qUbMABgmlkgnY0gmlwhKwShzOKbXVsdGlhZGRyc4wACgSsEoczBofW3QOCcnOFAAABAACJc2VjcDI1NmsxoQNlDwJiPoBq6yp8DYL4jZlus7egwKKPqav7W1D1iLQ5WIN0Y3CCh9WDdWRwgofXhXdha3UyAQ --storenode=/ip4/172.18.135.51/tcp/34773/p2p/16Uiu2HAmKTUoVa6kRnkgWpj4KbGQZKexibukjH4jYTEpeb5nPfnF --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.135.185 waku d0244069b02adef1f1445dc9a6b011579ca4283bedd7ebe10e1ff973c7c2ee55
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID d0244069b02a. Setting up logs at ./log/docker/store_node1_2024-04-30_04-23-12__8fda946c-43ba-4aed-818e-9fc581829e93__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:120 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 64394
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64394/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.135.185/tcp/64395/p2p/16Uiu2HAmK9hWwwoiuUvVYPMoSeFVizmfbfc1S5q1YZw6on3R1ECr","/ip4/172.18.135.185/tcp/64396/ws/p2p/16Uiu2HAmK9hWwwoiuUvVYPMoSeFVizmfbfc1S5q1YZw6on3R1ECr"],"enrUri":"enr:-LO4QHZSUhz_6m3SuXxluDRf6ImS8NMttv8UdhKvF21iFs7FWynFyOkXNn0P2jWqZNXi5NkvJmrXaOMJ8_acf6FtTcYBgmlkgnY0gmlwhKwSh7mKbXVsdGlhZGRyc4wACgSsEoe5BvuM3QOCcnOFAAABAACJc2VjcDI1NmsxoQNggO5sv1G3lJ8eVXEtjo3HEe4S5mNuJH769fS3ccNng4N0Y3CC-4uDdWRwgvuNhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:190 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64394/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.135.51/tcp/34773/p2p/16Uiu2HAmKTUoVa6kRnkgWpj4KbGQZKexibukjH4jYTEpeb5nPfnF"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34772/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64394/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34772/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64394/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1714451004844272896,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Stopping container with id 5590677ee094
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Stopping container with id d0244069b02a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-04-30_04-23-12__8fda946c-43ba-4aed-818e-9fc581829e93__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-04-30_04-23-12__8fda946c-43ba-4aed-818e-9fc581829e93__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_only_relay__peer_relay_and_store with id: 2024-04-30_04-23-29__383b75eb-377d-4bda-ad44-397f2b8c8868
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-04-30_04-23-29__383b75eb-377d-4bda-ad44-397f2b8c8868__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.35.18
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['43853', '43854', '43855', '43856', '43857']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:314 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 43853:43853 -p 43854:43854 -p 43855:43855 -p 43856:43856 -p 43857:43857 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=43855 --rest-port=43853 --tcp-port=43854 --discv5-udp-port=43856 --rest-address=0.0.0.0 --nat=extip:172.18.35.18 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=43857 --metrics-logging=true --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.35.18 waku 19307d5b6deef0bcb07794da5ee6209beddde7a5655e8847d2aefdce4429911d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 19307d5b6dee. Setting up logs at ./log/docker/publishing_node1_2024-04-30_04-23-29__383b75eb-377d-4bda-ad44-397f2b8c8868__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:120 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 43853
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43853/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.35.18/tcp/43854/p2p/16Uiu2HAky6bBNtAePLVMoTmcvt7WHJfvQPfTporkE3KQ87qczjC2","/ip4/172.18.35.18/tcp/43855/ws/p2p/16Uiu2HAky6bBNtAePLVMoTmcvt7WHJfvQPfTporkE3KQ87qczjC2"],"enrUri":"enr:-LO4QGzABBDgHutU_nuNwPPxrCUKtxNpQOUKaWanDjj5h5eVBO0bXnhQTkPDn8i-Bc7o_K10na_8UXZt8HAfxY2XjtYBgmlkgnY0gmlwhKwSIxKKbXVsdGlhZGRyc4wACgSsEiMSBqtP3QOCcnOFAAABAACJc2VjcDI1NmsxoQI2i0jfJwhDKqVvE97qBNXl6Z5zwBRHxL_XCWaMxcrOf4N0Y3CCq06DdWRwgqtQhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:190 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-04-30_04-23-29__383b75eb-377d-4bda-ad44-397f2b8c8868__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.251.54
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['64028', '64029', '64030', '64031', '64032']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:314 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 64028:64028 -p 64029:64029 -p 64030:64030 -p 64031:64031 -p 64032:64032 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64030 --rest-port=64028 --tcp-port=64029 --discv5-udp-port=64031 --rest-address=0.0.0.0 --nat=extip:172.18.251.54 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64032 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QGzABBDgHutU_nuNwPPxrCUKtxNpQOUKaWanDjj5h5eVBO0bXnhQTkPDn8i-Bc7o_K10na_8UXZt8HAfxY2XjtYBgmlkgnY0gmlwhKwSIxKKbXVsdGlhZGRyc4wACgSsEiMSBqtP3QOCcnOFAAABAACJc2VjcDI1NmsxoQI2i0jfJwhDKqVvE97qBNXl6Z5zwBRHxL_XCWaMxcrOf4N0Y3CCq06DdWRwgqtQhXdha3UyAQ --storenode=/ip4/172.18.35.18/tcp/43854/p2p/16Uiu2HAky6bBNtAePLVMoTmcvt7WHJfvQPfTporkE3KQ87qczjC2 --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.251.54 waku 0cc00309bb520df5c271ecd84e6cf00d1a99cf2ae868337b1e4f24d3a7a88454
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 0cc00309bb52. Setting up logs at ./log/docker/store_node1_2024-04-30_04-23-29__383b75eb-377d-4bda-ad44-397f2b8c8868__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:120 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 64028
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64028/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.251.54/tcp/64029/p2p/16Uiu2HAmCHqnFxEpGSPyGyMt229RA1HKqp4RtgFXUnGcJMankuff","/ip4/172.18.251.54/tcp/64030/ws/p2p/16Uiu2HAmCHqnFxEpGSPyGyMt229RA1HKqp4RtgFXUnGcJMankuff"],"enrUri":"enr:-LO4QLcaNJT4yPBDmbor2XsP3gwTrTyJRFze86JUk3q1kW91K29_DkkrOCWd59UD2VGVGiIirjEjWYnTVCTkuDjALiMBgmlkgnY0gmlwhKwS-zaKbXVsdGlhZGRyc4wACgSsEvs2Bvoe3QOCcnOFAAABAACJc2VjcDI1NmsxoQL6lR0KZErAFW51K0nSX8FPUDYxFuEs5btKNixPid1yuoN0Y3CC-h2DdWRwgvofhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:190 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64028/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.35.18/tcp/43854/p2p/16Uiu2HAky6bBNtAePLVMoTmcvt7WHJfvQPfTporkE3KQ87qczjC2"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43853/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64028/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43853/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64028/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1714451021224488448,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Stopping container with id 19307d5b6dee
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Stopping container with id 0cc00309bb52
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-04-30_04-23-29__383b75eb-377d-4bda-ad44-397f2b8c8868__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-04-30_04-23-29__383b75eb-377d-4bda-ad44-397f2b8c8868__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_only_relay__peer_relay_and_store with id: 2024-04-30_04-23-45__3b723a40-956d-4dde-a6b8-506d7b41126c
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-04-30_04-23-45__3b723a40-956d-4dde-a6b8-506d7b41126c__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.137.36
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['39247', '39248', '39249', '39250', '39251']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:314 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 39247:39247 -p 39248:39248 -p 39249:39249 -p 39250:39250 -p 39251:39251 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39249 --rest-port=39247 --tcp-port=39248 --discv5-udp-port=39250 --rest-address=0.0.0.0 --nat=extip:172.18.137.36 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39251 --metrics-logging=true --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.137.36 waku 4412dea66cd57c0ee6ff6c3c61aafa961891a4358bbbedb4a3fc96238d168544
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 4412dea66cd5. Setting up logs at ./log/docker/publishing_node1_2024-04-30_04-23-45__3b723a40-956d-4dde-a6b8-506d7b41126c__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:120 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 39247
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39247/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.137.36/tcp/39248/p2p/16Uiu2HAmP7BjoHJM7j86z3FKVoB3vHUvuYKCi6ECBGHo45WRL86h","/ip4/172.18.137.36/tcp/39249/ws/p2p/16Uiu2HAmP7BjoHJM7j86z3FKVoB3vHUvuYKCi6ECBGHo45WRL86h"],"enrUri":"enr:-LO4QP9bZYbOIr2bV09MNQvTyB_LLV95wIy3BvQtchXn3BjQCbImG44_jqo08gh6KKNeq4uJd2JpP3qPoS3wmP4BbYgBgmlkgnY0gmlwhKwSiSSKbXVsdGlhZGRyc4wACgSsEokkBplR3QOCcnOFAAABAACJc2VjcDI1NmsxoQObStjK_ldJi70yqiitXmaaa0DOaKDyLizHV7iSRXMdXoN0Y3CCmVCDdWRwgplShXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:190 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-04-30_04-23-45__3b723a40-956d-4dde-a6b8-506d7b41126c__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.136.190
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['25754', '25755', '25756', '25757', '25758']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:314 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 25754:25754 -p 25755:25755 -p 25756:25756 -p 25757:25757 -p 25758:25758 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25756 --rest-port=25754 --tcp-port=25755 --discv5-udp-port=25757 --rest-address=0.0.0.0 --nat=extip:172.18.136.190 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25758 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QP9bZYbOIr2bV09MNQvTyB_LLV95wIy3BvQtchXn3BjQCbImG44_jqo08gh6KKNeq4uJd2JpP3qPoS3wmP4BbYgBgmlkgnY0gmlwhKwSiSSKbXVsdGlhZGRyc4wACgSsEokkBplR3QOCcnOFAAABAACJc2VjcDI1NmsxoQObStjK_ldJi70yqiitXmaaa0DOaKDyLizHV7iSRXMdXoN0Y3CCmVCDdWRwgplShXdha3UyAQ --storenode=/ip4/172.18.137.36/tcp/39248/p2p/16Uiu2HAmP7BjoHJM7j86z3FKVoB3vHUvuYKCi6ECBGHo45WRL86h --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.136.190 waku 1b6b29d099ba4e0e2cbd0c56a8b2cb2c35ad110f9e13efc7a61b7d05945359f9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 1b6b29d099ba. Setting up logs at ./log/docker/store_node1_2024-04-30_04-23-45__3b723a40-956d-4dde-a6b8-506d7b41126c__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:120 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 25754
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25754/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.136.190/tcp/25755/p2p/16Uiu2HAmLJB41iq3bcjLyhDdCFpX6osUf5514kWPYdsPiXarkxAf","/ip4/172.18.136.190/tcp/25756/ws/p2p/16Uiu2HAmLJB41iq3bcjLyhDdCFpX6osUf5514kWPYdsPiXarkxAf"],"enrUri":"enr:-LO4QOJ4lAiVZPUgEwm-tTpPp6JMsGxv_zP93_b0ntogX1rpEckhfmwVdxFxUVlfSQ3BG_Oa8j5tdahHYjDGtYvrT_MBgmlkgnY0gmlwhKwSiL6KbXVsdGlhZGRyc4wACgSsEoi-BmSc3QOCcnOFAAABAACJc2VjcDI1NmsxoQNxiGY8EBPCLPthu2PrHjUFl9FJsbRInMED8AiT0Nr_VIN0Y3CCZJuDdWRwgmSdhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:190 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25754/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.137.36/tcp/39248/p2p/16Uiu2HAmP7BjoHJM7j86z3FKVoB3vHUvuYKCi6ECBGHo45WRL86h"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39247/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25754/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39247/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25754/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1714451037648359680,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Stopping container with id 4412dea66cd5
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Stopping container with id 1b6b29d099ba
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-04-30_04-23-45__3b723a40-956d-4dde-a6b8-506d7b41126c__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-04-30_04-23-45__3b723a40-956d-4dde-a6b8-506d7b41126c__harbor.status.im_wakuorg_nwaku:latest.log