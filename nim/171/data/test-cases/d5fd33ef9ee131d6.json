{"uid":"d5fd33ef9ee131d6","name":"test_ping_only_some_nodes_have_subscriptions","fullName":"tests.filter.test_multiple_nodes.TestFilterMultipleNodes#test_ping_only_some_nodes_have_subscriptions","historyId":"2d6409c42149872333898c33c1f95002","time":{"start":1714450389173,"stop":1714450394134,"duration":4961},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"set_allure_env_variables","time":{"start":1714450286520,"stop":1714450286520,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail","time":{"start":1714450385930,"stop":1714450385930,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_id","time":{"start":1714450385930,"stop":1714450385930,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_setup","time":{"start":1714450385930,"stop":1714450385931,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes","time":{"start":1714450385930,"stop":1714450385930,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_main_relay_node","time":{"start":1714450385931,"stop":1714450387681,"duration":1750},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"common_setup","time":{"start":1714450385931,"stop":1714450385931,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"filter_setup","time":{"start":1714450385931,"stop":1714450385931,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_main_filter_node","time":{"start":1714450387681,"stop":1714450389172,"duration":1491},"status":"passed","steps":[{"name":"add_node_peer","time":{"start":1714450389148,"stop":1714450389172,"duration":24},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"args","value":"(<tests.filter.test_multiple_nodes.TestFilterMultipleNodes object at 0x7f1763293b90>, <src.node.waku_node.WakuNode object at 0x7f1763910d70>, ['/ip4/172.18.97.218/tcp/49617/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip'])"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"testStage":{"status":"passed","steps":[{"name":"wait_for_subscriptions_on_main_nodes","time":{"start":1714450389173,"stop":1714450389197,"duration":24},"status":"passed","steps":[{"name":"create_filter_subscription_with_retry","time":{"start":1714450389188,"stop":1714450389197,"duration":9},"status":"passed","steps":[{"name":"create_filter_subscription","time":{"start":1714450389188,"stop":1714450389197,"duration":9},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"subscription","value":"{'requestId': '2816de56-529e-412e-82b2-89b0d3c7d1a5', 'contentFilters': ['/test/1/waku-filter/proto'], 'pubsubTopic': '/waku/2/rs/0/1'}"},{"name":"node","value":"None"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"subscription","value":"{'requestId': '2816de56-529e-412e-82b2-89b0d3c7d1a5', 'contentFilters': ['/test/1/waku-filter/proto'], 'pubsubTopic': '/waku/2/rs/0/1'}"},{"name":"node","value":"None"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"content_topic_list","value":"['/test/1/waku-filter/proto']"},{"name":"pubsub_topic","value":"None"}],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"add_node_peer","time":{"start":1714450390611,"stop":1714450390640,"duration":29},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"args","value":"(<tests.filter.test_multiple_nodes.TestFilterMultipleNodes object at 0x7f1763293b90>, <src.node.waku_node.WakuNode object at 0x7f1751f362a0>, ['/ip4/172.18.97.218/tcp/49617/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip'])"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"add_node_peer","time":{"start":1714450392110,"stop":1714450392113,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"args","value":"(<tests.filter.test_multiple_nodes.TestFilterMultipleNodes object at 0x7f1763293b90>, <src.node.waku_node.WakuNode object at 0x7f1751f36390>, ['/ip4/172.18.97.218/tcp/49617/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip'])"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"add_node_peer","time":{"start":1714450394076,"stop":1714450394102,"duration":26},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"args","value":"(<tests.filter.test_multiple_nodes.TestFilterMultipleNodes object at 0x7f1763293b90>, <src.node.waku_node.WakuNode object at 0x7f1751fb1d60>, ['/ip4/172.18.97.218/tcp/49617/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip'])"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"ping_filter_subscriptions","time":{"start":1714450394102,"stop":1714450394114,"duration":12},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"request_id","value":"'1'"},{"name":"node","value":"<src.node.waku_node.WakuNode object at 0x7f1763910d70>"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"ping_filter_subscriptions","time":{"start":1714450394114,"stop":1714450394122,"duration":8},"status":"broken","statusMessage":"Exception: Error: 404 Client Error: Not Found for url: http://127.0.0.1:50726/filter/v2/subscriptions/cbac00b1-0f24-4c7a-8fcf-3a566b4729b3 with response: b'{\"requestId\":\"cbac00b1-0f24-4c7a-8fcf-3a566b4729b3\",\"statusDesc\":\"NOT_FOUND: peer has no subscriptions\"}'\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.3/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/filter.py\", line 179, in ping_filter_subscriptions\n    ping_sub_response = node.ping_filter_subscriptions(request_id)\n                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/waku_node.py\", line 257, in ping_filter_subscriptions\n    return self._api.ping_filter_subscriptions(request_id)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 75, in ping_filter_subscriptions\n    ping_subscriptions_response = self.rest_call(\"get\", f\"filter/v2/subscriptions/{quote(request_id, safe='')}\")\n                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 16, in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/base_client.py\", line 17, in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\n","steps":[],"attachments":[],"parameters":[{"name":"request_id","value":"'cbac00b1-0f24-4c7a-8fcf-3a566b4729b3'"},{"name":"node","value":"<src.node.waku_node.WakuNode object at 0x7f1751f362a0>"}],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"ping_filter_subscriptions","time":{"start":1714450394123,"stop":1714450394127,"duration":4},"status":"broken","statusMessage":"Exception: Error: 404 Client Error: Not Found for url: http://127.0.0.1:9458/filter/v2/subscriptions/31254628-9ad6-4a6d-90fd-7cf191262e92 with response: b'{\"requestId\":\"31254628-9ad6-4a6d-90fd-7cf191262e92\",\"statusDesc\":\"peer has no subscription\"}'\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.3/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/filter.py\", line 179, in ping_filter_subscriptions\n    ping_sub_response = node.ping_filter_subscriptions(request_id)\n                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/waku_node.py\", line 257, in ping_filter_subscriptions\n    return self._api.ping_filter_subscriptions(request_id)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 75, in ping_filter_subscriptions\n    ping_subscriptions_response = self.rest_call(\"get\", f\"filter/v2/subscriptions/{quote(request_id, safe='')}\")\n                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 16, in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/base_client.py\", line 17, in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\n","steps":[],"attachments":[],"parameters":[{"name":"request_id","value":"'31254628-9ad6-4a6d-90fd-7cf191262e92'"},{"name":"node","value":"<src.node.waku_node.WakuNode object at 0x7f1751f36390>"}],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"ping_filter_subscriptions","time":{"start":1714450394128,"stop":1714450394134,"duration":6},"status":"broken","statusMessage":"Exception: Error: 404 Client Error: Not Found for url: http://127.0.0.1:16307/filter/v2/subscriptions/30c15a31-7df1-423c-b8e0-54020864ad63 with response: b'{\"requestId\":\"30c15a31-7df1-423c-b8e0-54020864ad63\",\"statusDesc\":\"NOT_FOUND: peer has no subscriptions\"}'\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.3/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/filter.py\", line 179, in ping_filter_subscriptions\n    ping_sub_response = node.ping_filter_subscriptions(request_id)\n                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/waku_node.py\", line 257, in ping_filter_subscriptions\n    return self._api.ping_filter_subscriptions(request_id)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 75, in ping_filter_subscriptions\n    ping_subscriptions_response = self.rest_call(\"get\", f\"filter/v2/subscriptions/{quote(request_id, safe='')}\")\n                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 16, in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/base_client.py\", line 17, in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\n","steps":[],"attachments":[],"parameters":[{"name":"request_id","value":"'30c15a31-7df1-423c-b8e0-54020864ad63'"},{"name":"node","value":"<src.node.waku_node.WakuNode object at 0x7f1751fb1d60>"}],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"b570d2f3173bebf2","name":"log","source":"b570d2f3173bebf2.txt","type":"text/plain","size":23603}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":10,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"test_setup::0","time":{"start":1714450394136,"stop":1714450394136,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes::0","time":{"start":1714450394137,"stop":1714450403990,"duration":9853},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail::0","time":{"start":1714450403990,"stop":1714450403990,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"set_allure_env_variables::0","time":{"start":1714451041399,"stop":1714451041399,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"@pytest.mark.usefixtures('setup_main_relay_node', 'setup_main_filter_node')"},{"name":"parentSuite","value":"tests.filter"},{"name":"suite","value":"test_multiple_nodes"},{"name":"subSuite","value":"TestFilterMultipleNodes"},{"name":"host","value":"fv-az525-590"},{"name":"thread","value":"2087-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.filter.test_multiple_nodes"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":0,"broken":3,"skipped":0,"passed":27,"unknown":0,"total":30},"items":[{"uid":"5475bafababe2622","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/170//#testresult/5475bafababe2622","status":"passed","time":{"start":1714377005470,"stop":1714377010869,"duration":5399}},{"uid":"43d122e22effa1ca","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/169//#testresult/43d122e22effa1ca","status":"broken","statusDetails":"requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=15881): Max retries exceeded with url: /debug/v1/info (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f1b956e8a70>: Failed to establish a new connection: [Errno 111] Connection refused'))","time":{"start":1714363949927,"stop":1714363949927,"duration":0}},{"uid":"bf729d6a1a2201b4","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/168//#testresult/bf729d6a1a2201b4","status":"broken","statusDetails":"requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=49677): Max retries exceeded with url: /debug/v1/info (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fb4e4f3f020>: Failed to establish a new connection: [Errno 111] Connection refused'))","time":{"start":1714277507976,"stop":1714277507976,"duration":0}},{"uid":"c6c968de14e4f28f","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/167//#testresult/c6c968de14e4f28f","status":"broken","statusDetails":"requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=19734): Max retries exceeded with url: /debug/v1/info (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fd3ae797f80>: Failed to establish a new connection: [Errno 111] Connection refused'))","time":{"start":1714191097218,"stop":1714191097218,"duration":0}},{"uid":"f96c802c79f8d59c","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/166//#testresult/f96c802c79f8d59c","status":"passed","time":{"start":1714104691841,"stop":1714104696503,"duration":4662}},{"uid":"e6aee1e71f0b6320","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/165//#testresult/e6aee1e71f0b6320","status":"passed","time":{"start":1714018362358,"stop":1714018367354,"duration":4996}},{"uid":"8e5d95002007ba73","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/164//#testresult/8e5d95002007ba73","status":"passed","time":{"start":1713931891956,"stop":1713931897011,"duration":5055}},{"uid":"b892d20016a9fa39","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/163//#testresult/b892d20016a9fa39","status":"passed","time":{"start":1713845518897,"stop":1713845523983,"duration":5086}},{"uid":"e9ec051e54564988","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/162//#testresult/e9ec051e54564988","status":"passed","time":{"start":1713799295984,"stop":1713799302086,"duration":6102}},{"uid":"d0e9d002a1b2c1b9","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/161//#testresult/d0e9d002a1b2c1b9","status":"passed","time":{"start":1713795911882,"stop":1713795917322,"duration":5440}},{"uid":"d8abfd682304746d","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/160//#testresult/d8abfd682304746d","status":"passed","time":{"start":1713787247903,"stop":1713787253321,"duration":5418}},{"uid":"777935332796e685","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/159//#testresult/777935332796e685","status":"passed","time":{"start":1713759142675,"stop":1713759148182,"duration":5507}},{"uid":"936293b644d3908","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/158//#testresult/936293b644d3908","status":"passed","time":{"start":1713672725150,"stop":1713672730035,"duration":4885}},{"uid":"dfa0bfa5975538c4","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/157//#testresult/dfa0bfa5975538c4","status":"passed","time":{"start":1713586384257,"stop":1713586389706,"duration":5449}},{"uid":"cc70263bd6707ed8","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/155//#testresult/cc70263bd6707ed8","status":"passed","time":{"start":1713433502824,"stop":1713433508528,"duration":5704}},{"uid":"1c162947cf783add","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/153//#testresult/1c162947cf783add","status":"passed","time":{"start":1713413522903,"stop":1713413527432,"duration":4529}},{"uid":"3c68630a04791a61","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/152//#testresult/3c68630a04791a61","status":"passed","time":{"start":1713327245928,"stop":1713327251565,"duration":5637}},{"uid":"6af69b05623162f","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/151//#testresult/6af69b05623162f","status":"passed","time":{"start":1713277414726,"stop":1713277419605,"duration":4879}},{"uid":"fe5c204b22a2310b","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/150//#testresult/fe5c204b22a2310b","status":"passed","time":{"start":1713240804791,"stop":1713240812165,"duration":7374}},{"uid":"d56e73141d97076e","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/149//#testresult/d56e73141d97076e","status":"passed","time":{"start":1713187207783,"stop":1713187212963,"duration":5180}}]},"tags":["@pytest.mark.usefixtures('setup_main_relay_node', 'setup_main_filter_node')"]},"source":"d5fd33ef9ee131d6.json","parameterValues":[]}