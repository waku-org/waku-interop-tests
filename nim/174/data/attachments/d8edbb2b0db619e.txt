[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_filter_get_message_with_extra_field with id: 2024-05-03_04-12-47__7d803a56-f2f1-4a7b-9020-304238b112e3
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/node1_2024-05-03_04-12-47__7d803a56-f2f1-4a7b-9020-304238b112e3__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.234.32
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['50608', '50609', '50610', '50611', '50612']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:314 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 50608:50608 -p 50609:50609 -p 50610:50610 -p 50611:50611 -p 50612:50612 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=50610 --rest-port=50608 --tcp-port=50609 --discv5-udp-port=50611 --rest-address=0.0.0.0 --nat=extip:172.18.234.32 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=50612 --metrics-logging=true --relay=true --filter=true --nodekey=30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.234.32 waku a8c09b2c945b0f0ae65f80f27b2cb0a76d99435a1b1fd39d8a7af0c998939669
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID a8c09b2c945b. Setting up logs at ./log/docker/node1_2024-05-03_04-12-47__7d803a56-f2f1-4a7b-9020-304238b112e3__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:120 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 50608
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50608/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.234.32/tcp/50609/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip","/ip4/172.18.234.32/tcp/50610/ws/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"],"enrUri":"enr:-LO4QCPpFVSZmEMP-j3MoRcVesBeT18FMElAhyyc3JNk6_duMEOC0Mz8ev_uvjQl3ffri9PfA7SV0APKLgFcD-eBs1oBgmlkgnY0gmlwhKwS6iCKbXVsdGlhZGRyc4wACgSsEuogBsWy3QOCcnOFAAABAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCxbGDdWRwgsWzhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:190 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/node2_2024-05-03_04-12-47__7d803a56-f2f1-4a7b-9020-304238b112e3__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.82.66
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['53663', '53664', '53665', '53666', '53667']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:314 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 53663:53663 -p 53664:53664 -p 53665:53665 -p 53666:53666 -p 53667:53667 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=53665 --rest-port=53663 --tcp-port=53664 --discv5-udp-port=53666 --rest-address=0.0.0.0 --nat=extip:172.18.82.66 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=53667 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QCPpFVSZmEMP-j3MoRcVesBeT18FMElAhyyc3JNk6_duMEOC0Mz8ev_uvjQl3ffri9PfA7SV0APKLgFcD-eBs1oBgmlkgnY0gmlwhKwS6iCKbXVsdGlhZGRyc4wACgSsEuogBsWy3QOCcnOFAAABAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCxbGDdWRwgsWzhXdha3UyBQ --filternode=/ip4/172.18.234.32/tcp/50609/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.82.66 waku 085e0538c1be0df634d6ed44cfd4323a868421f29e835e4a9aa99353b55dbee9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 085e0538c1be. Setting up logs at ./log/docker/node2_2024-05-03_04-12-47__7d803a56-f2f1-4a7b-9020-304238b112e3__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:120 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 53663
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53663/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.82.66/tcp/53664/p2p/16Uiu2HAkw7c8rw9HiZsF8aXL3EM17Jo2ejQ1HVfvHSgoM6qBpWr4","/ip4/172.18.82.66/tcp/53665/ws/p2p/16Uiu2HAkw7c8rw9HiZsF8aXL3EM17Jo2ejQ1HVfvHSgoM6qBpWr4"],"enrUri":"enr:-LO4QKHEsejsvjIJ8ufJ5S7y-xe5BsT015dzc9-82W5uj2khZ5DNFkU6IETCXAslork7Kq-In15XQZSgV7-hXdQaClQBgmlkgnY0gmlwhKwSUkKKbXVsdGlhZGRyc4wACgSsElJCBtGh3QOCcnOFAAABAACJc2VjcDI1NmsxoQIZFpLBGLI72QJt5EjuMnRYuXFTydm0LBVnbzE6DshvaYN0Y3CC0aCDdWRwgtGihXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:190 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53663/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.234.32/tcp/50609/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:50608/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53663/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "0c76738b-d34d-475b-8d89-dd4c1bd77778", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/0/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"0c76738b-d34d-475b-8d89-dd4c1bd77778","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:50608/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "extraField": "extraValue"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:50608/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F1. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Stopping container with id a8c09b2c945b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Stopping container with id 085e0538c1be
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Container stopped.