[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_lightpush with id: 2024-10-17_04-02-40__d0766e1e-aabd-4d3b-8a8a-0ea99826220d
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-17_04-02-40__d0766e1e-aabd-4d3b-8a8a-0ea99826220d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.124.27
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['51135', '51136', '51137', '51138', '51139']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 51135:51135 -p 51136:51136 -p 51137:51137 -p 51138:51138 -p 51139:51139 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=51137 --rest-port=51135 --tcp-port=51136 --discv5-udp-port=51138 --rest-address=0.0.0.0 --nat=extip:172.18.124.27 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=af550619f871ef6c7c794dffeff8a001c46fae2a1df2511f31e6123c4e3eb0d4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=51139 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.124.27 waku 6e3d0b85d61ea051a3583f0b2e06fd6425be29feac10a69d6341b33829203807
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 6e3d0b85d61e. Setting up logs at ./log/docker/node1_2024-10-17_04-02-40__d0766e1e-aabd-4d3b-8a8a-0ea99826220d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 51135
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51135/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51135/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.124.27/tcp/51136/p2p/16Uiu2HAmQ3EEAjTHMhTEkW4fxMVJirqPrX64n2yzSx5i8Km8o8aq","/ip4/172.18.124.27/tcp/51137/ws/p2p/16Uiu2HAmQ3EEAjTHMhTEkW4fxMVJirqPrX64n2yzSx5i8Km8o8aq"],"enrUri":"enr:-LO4QBbB5lY1t6ZvK38nYodLP5HlP1JqcSgMHiaXE85eXFkxQ7LST85-Ut_DksrwGsvTZwS7D5dt7F6gfRt0GiWbTggBgmlkgnY0gmlwhKwSfBuKbXVsdGlhZGRyc4wACgSsEnwbBsfB3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOpIwZnKjSDkZCi_fTCP6rO52-V-3v_1guBtyeSGbDIxoN0Y3CCx8CDdWRwgsfChXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-17_04-02-40__d0766e1e-aabd-4d3b-8a8a-0ea99826220d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.232.207
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['9372', '9373', '9374', '9375', '9376']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 9372:9372 -p 9373:9373 -p 9374:9374 -p 9375:9375 -p 9376:9376 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=9374 --rest-port=9372 --tcp-port=9373 --discv5-udp-port=9375 --rest-address=0.0.0.0 --nat=extip:172.18.232.207 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6b3cddc0d47b9c0690cfeb4a9acc08a6806ffc4ee9b87a6bd1ccfcf9739d651e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=9376 --metrics-logging=true --lightpush=false --relay=true --discv5-bootstrap-node=enr:-LO4QBbB5lY1t6ZvK38nYodLP5HlP1JqcSgMHiaXE85eXFkxQ7LST85-Ut_DksrwGsvTZwS7D5dt7F6gfRt0GiWbTggBgmlkgnY0gmlwhKwSfBuKbXVsdGlhZGRyc4wACgSsEnwbBsfB3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOpIwZnKjSDkZCi_fTCP6rO52-V-3v_1guBtyeSGbDIxoN0Y3CCx8CDdWRwgsfChXdha3UyCQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.232.207 waku 3dbc832a389ffd961af872cd50f5421604639bb5658a3ca25fc0d697ad4dbe53
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 3dbc832a389f. Setting up logs at ./log/docker/node1_2024-10-17_04-02-40__d0766e1e-aabd-4d3b-8a8a-0ea99826220d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 9372
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9372/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9372/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.232.207/tcp/9373/p2p/16Uiu2HAm7fK7qrk6okFK9nPd1cMs3BgJDjQx5Qt7S6M5oKEo3NLv","/ip4/172.18.232.207/tcp/9374/ws/p2p/16Uiu2HAm7fK7qrk6okFK9nPd1cMs3BgJDjQx5Qt7S6M5oKEo3NLv"],"enrUri":"enr:-LO4QLc14tghY8HGJnF_iycFRnsZ8gV3jQol4CpxOohjK1iGDx3zx8JAAuarZVDlbiQwSmpxbdxlbd7qXCaXrCh2-j4BgmlkgnY0gmlwhKwS6M-KbXVsdGlhZGRyc4wACgSsEujPBiSe3QOCcnOFAAMBAACJc2VjcDI1NmsxoQK1ysleSyvuceS_bcqsRUjkpeegEye5ZvpujmXAv6paR4N0Y3CCJJ2DdWRwgiSfhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-17_04-02-40__d0766e1e-aabd-4d3b-8a8a-0ea99826220d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.1.24
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['22398', '22399', '22400', '22401', '22402']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 22398:22398 -p 22399:22399 -p 22400:22400 -p 22401:22401 -p 22402:22402 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22400 --rest-port=22398 --tcp-port=22399 --discv5-udp-port=22401 --rest-address=0.0.0.0 --nat=extip:172.18.1.24 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a3abc67ded703b319aedc452ca8cebace1ecedda76a01170a9bcc173c89ef9aa --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22402 --metrics-logging=true --lightpush=true --relay=false --discv5-bootstrap-node=enr:-LO4QBbB5lY1t6ZvK38nYodLP5HlP1JqcSgMHiaXE85eXFkxQ7LST85-Ut_DksrwGsvTZwS7D5dt7F6gfRt0GiWbTggBgmlkgnY0gmlwhKwSfBuKbXVsdGlhZGRyc4wACgSsEnwbBsfB3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOpIwZnKjSDkZCi_fTCP6rO52-V-3v_1guBtyeSGbDIxoN0Y3CCx8CDdWRwgsfChXdha3UyCQ --lightpushnode=/ip4/172.18.124.27/tcp/51136/p2p/16Uiu2HAmQ3EEAjTHMhTEkW4fxMVJirqPrX64n2yzSx5i8Km8o8aq
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.1.24 waku 4ca190a0a7ef6a21ade696531de83c5857255dba50720db1eb1b05d42ddfcbcd
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 4ca190a0a7ef. Setting up logs at ./log/docker/node1_2024-10-17_04-02-40__d0766e1e-aabd-4d3b-8a8a-0ea99826220d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 22398
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22398/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22398/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.1.24/tcp/22399/p2p/16Uiu2HAmA8qDAQYvGcwecaYm4rULc3sRfs5UGC3T87idKJf55TfT","/ip4/172.18.1.24/tcp/22400/ws/p2p/16Uiu2HAmA8qDAQYvGcwecaYm4rULc3sRfs5UGC3T87idKJf55TfT"],"enrUri":"enr:-LO4QJhvgawlN1eL5hc8gSib-mqAPPGowoPE3aUBE3l07Y7WNImc2qixVJPzQze-xJ4LEpJNMSkK-ccQD23HaZu_irMBgmlkgnY0gmlwhKwSARiKbXVsdGlhZGRyc4wACgSsEgEYBleA3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLajt366SeWfUt-XP-QREv5ajcVvlj3mIHeWHUKlji2PoN0Y3CCV3-DdWRwgleBhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51135/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9372/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22398/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": 1729137766303302912}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51135/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1729137766303302912,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9372/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1729137766303302912,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 6e3d0b85d61e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 3dbc832a389f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 4ca190a0a7ef
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.