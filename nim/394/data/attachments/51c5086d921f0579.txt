[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_ping_on_unsubscribed_peer with id: 2024-10-17_04-06-14__a97d0c5e-3384-4278-9c1b-c5d314b67a9f
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-17_04-06-14__a97d0c5e-3384-4278-9c1b-c5d314b67a9f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.195.194
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['48704', '48705', '48706', '48707', '48708']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 48704:48704 -p 48705:48705 -p 48706:48706 -p 48707:48707 -p 48708:48708 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=48706 --rest-port=48704 --tcp-port=48705 --discv5-udp-port=48707 --rest-address=0.0.0.0 --nat=extip:172.18.195.194 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=22a24d2f851bbfdc0ae6cfb6fedf1aaadf905be2bbf5c65f5b54c275af95d67a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=48708 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.195.194 waku b19cf773743dd30d9171352e974296fb60598c3442ba378b0ba38cc2229ebee4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID b19cf773743d. Setting up logs at ./log/docker/node1_2024-10-17_04-06-14__a97d0c5e-3384-4278-9c1b-c5d314b67a9f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 48704
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48704/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48704/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.195.194/tcp/48705/p2p/16Uiu2HAmPpGiWPTgmpMFZjjsj67irPtWf3LFfv8gpLc7JdBndet2","/ip4/172.18.195.194/tcp/48706/ws/p2p/16Uiu2HAmPpGiWPTgmpMFZjjsj67irPtWf3LFfv8gpLc7JdBndet2"],"enrUri":"enr:-LO4QImS0ktqlbtvN74IugUk7ASE5s9CqiWdmymfBMTD-ylHXaPJZuv_vZ3MHvVyMa0BS3XgdcUIBCHavrxEDX4xF5gBgmlkgnY0gmlwhKwSw8KKbXVsdGlhZGRyc4wACgSsEsPCBr5C3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOl0UnSPqkW69yVVLEQkQNGgulCGfjDH0107Lpg-Gte84N0Y3CCvkGDdWRwgr5DhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-10-17_04-06-14__a97d0c5e-3384-4278-9c1b-c5d314b67a9f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.127.212
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['56512', '56513', '56514', '56515', '56516']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 56512:56512 -p 56513:56513 -p 56514:56514 -p 56515:56515 -p 56516:56516 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56514 --rest-port=56512 --tcp-port=56513 --discv5-udp-port=56515 --rest-address=0.0.0.0 --nat=extip:172.18.127.212 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bc05a163afefaabacef18e7ad3b29359b0fbbacc653efd35dea6c1e1fe8a7e0a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56516 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QImS0ktqlbtvN74IugUk7ASE5s9CqiWdmymfBMTD-ylHXaPJZuv_vZ3MHvVyMa0BS3XgdcUIBCHavrxEDX4xF5gBgmlkgnY0gmlwhKwSw8KKbXVsdGlhZGRyc4wACgSsEsPCBr5C3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOl0UnSPqkW69yVVLEQkQNGgulCGfjDH0107Lpg-Gte84N0Y3CCvkGDdWRwgr5DhXdha3UyBQ --filternode=/ip4/172.18.195.194/tcp/48705/p2p/16Uiu2HAmPpGiWPTgmpMFZjjsj67irPtWf3LFfv8gpLc7JdBndet2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.127.212 waku 68362f2b2826b5073eb4da846f0e1c52a9b9b43fd96cd35ce93f7da3d5af6ae9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 68362f2b2826. Setting up logs at ./log/docker/node2_2024-10-17_04-06-14__a97d0c5e-3384-4278-9c1b-c5d314b67a9f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 56512
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56512/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56512/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.127.212/tcp/56513/p2p/16Uiu2HAmMPhzddYtvhzX5hjbqZvTSVdTL4gdHNHtPe4cbL19ywHz","/ip4/172.18.127.212/tcp/56514/ws/p2p/16Uiu2HAmMPhzddYtvhzX5hjbqZvTSVdTL4gdHNHtPe4cbL19ywHz"],"enrUri":"enr:-LO4QCaZ7o2NUsroS6UMZWQzASajIc3GPARD3UfNX-5xXMywVpUqH56t0mLATKo2IhwAPGo52PS523J39NvrEh4ncBABgmlkgnY0gmlwhKwSf9SKbXVsdGlhZGRyc4wACgSsEn_UBtzC3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOBzvnqDR0lgJwgKtuEPw_ETRxRWPQ6u43ev6lRRh9rcYN0Y3CC3MGDdWRwgtzDhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56512/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.195.194/tcp/48705/p2p/16Uiu2HAmPpGiWPTgmpMFZjjsj67irPtWf3LFfv8gpLc7JdBndet2"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48704/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56512/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "e4238c4e-6b26-413c-9db9-78c2435e221b", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"e4238c4e-6b26-413c-9db9-78c2435e221b","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56512/filter/v2/subscriptions/578a2c53-1382-4b53-bef6-348fe8889e98" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"578a2c53-1382-4b53-bef6-348fe8889e98","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X DELETE "http://127.0.0.1:56512/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "12345", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"12345","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56512/filter/v2/subscriptions/21dc3bd4-2b0f-4fe5-b05a-efe53483f2c8" -H "Content-Type: application/json" -d 'None'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:56512/filter/v2/subscriptions/21dc3bd4-2b0f-4fe5-b05a-efe53483f2c8. Response content: b'{"requestId":"21dc3bd4-2b0f-4fe5-b05a-efe53483f2c8","statusDesc":"NOT_FOUND: peer has no subscriptions"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id b19cf773743d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 68362f2b2826
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.