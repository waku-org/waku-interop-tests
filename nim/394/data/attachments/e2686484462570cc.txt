[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_only_lightpush__peer_full with id: 2024-10-17_04-12-01__f2daede8-51ef-43dd-b8d1-39d5fd35fe09
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-10-17_04-12-01__f2daede8-51ef-43dd-b8d1-39d5fd35fe09__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.6.0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['50955', '50956', '50957', '50958', '50959']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 50955:50955 -p 50956:50956 -p 50957:50957 -p 50958:50958 -p 50959:50959 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=50957 --rest-port=50955 --tcp-port=50956 --discv5-udp-port=50958 --rest-address=0.0.0.0 --nat=extip:172.18.6.0 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=62136d2bfcda380d4c5cca486d06bb772efe04b635d8cdaca2c151c2ff01a9d1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=50959 --metrics-logging=true --lightpush=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.6.0 waku b37c19620e55bdbed4ae4d624d1f1a60841aa16a8372054f1fa17f3f79d908d0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID b37c19620e55. Setting up logs at ./log/docker/receiving_node1_2024-10-17_04-12-01__f2daede8-51ef-43dd-b8d1-39d5fd35fe09__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 50955
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50955/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50955/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.6.0/tcp/50956/p2p/16Uiu2HAmQE7pPdPzAGxbMQYxgdFiBPurrKM7Rmm4cAWYsGEKU1qu","/ip4/172.18.6.0/tcp/50957/ws/p2p/16Uiu2HAmQE7pPdPzAGxbMQYxgdFiBPurrKM7Rmm4cAWYsGEKU1qu"],"enrUri":"enr:-LO4QH8PwcK-yq8FV3XuGc0IwDioAednzQrRCPbzL7AydAj_Q5og3PV61zU1lyhuTbXL31Hf2PsgKN3xWgiPj6ebuEwBgmlkgnY0gmlwhKwSBgCKbXVsdGlhZGRyc4wACgSsEgYABscN3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOr7SqIm2exAj1l39l2etAK4WSjgJuWamo4Mzc7fJgZTIN0Y3CCxwyDdWRwgscOhXdha3UyDQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-10-17_04-12-01__f2daede8-51ef-43dd-b8d1-39d5fd35fe09__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.165.33
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['40980', '40981', '40982', '40983', '40984']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 40980:40980 -p 40981:40981 -p 40982:40982 -p 40983:40983 -p 40984:40984 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40982 --rest-port=40980 --tcp-port=40981 --discv5-udp-port=40983 --rest-address=0.0.0.0 --nat=extip:172.18.165.33 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=afdf0c60a5f1bd07acad4cba6dbecad5875adbcd0873808c5a19c23cecfac421 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40984 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.165.33 waku 525a22d1e0b39fb65e4e91a3993063e4d8e6c876e0f964658ef81ea23129e4c0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 525a22d1e0b3. Setting up logs at ./log/docker/receiving_node2_2024-10-17_04-12-01__f2daede8-51ef-43dd-b8d1-39d5fd35fe09__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 40980
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40980/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40980/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.165.33/tcp/40981/p2p/16Uiu2HAmKu2iu2SRqg56mYGt2Mfgq4FKtTwBHAD7mRd54WLBr4vZ","/ip4/172.18.165.33/tcp/40982/ws/p2p/16Uiu2HAmKu2iu2SRqg56mYGt2Mfgq4FKtTwBHAD7mRd54WLBr4vZ"],"enrUri":"enr:-LO4QFpCWGwu4tadN4r3WXBOzkIAgvtrVogFH_PnlRQSz_RCG9XO0m4d_wKPDLcQGHtN8TinwIay20E_EW0PUHm7FAIBgmlkgnY0gmlwhKwSpSGKbXVsdGlhZGRyc4wACgSsEqUhBqAW3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNrmp9Zt897mGZo9h-vcmpwqKuwYRbEv2jt7BGvuaAzdoN0Y3CCoBWDdWRwgqAXhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40980/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.6.0/tcp/50956/p2p/16Uiu2HAmQE7pPdPzAGxbMQYxgdFiBPurrKM7Rmm4cAWYsGEKU1qu"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-10-17_04-12-01__f2daede8-51ef-43dd-b8d1-39d5fd35fe09__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.61.105
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['24570', '24571', '24572', '24573', '24574']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 24570:24570 -p 24571:24571 -p 24572:24572 -p 24573:24573 -p 24574:24574 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=24572 --rest-port=24570 --tcp-port=24571 --discv5-udp-port=24573 --rest-address=0.0.0.0 --nat=extip:172.18.61.105 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2f61240db3a8da7da77dfeef5149d0bac172375ba38d8a4916c10b8e52a0f758 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=24574 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QH8PwcK-yq8FV3XuGc0IwDioAednzQrRCPbzL7AydAj_Q5og3PV61zU1lyhuTbXL31Hf2PsgKN3xWgiPj6ebuEwBgmlkgnY0gmlwhKwSBgCKbXVsdGlhZGRyc4wACgSsEgYABscN3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOr7SqIm2exAj1l39l2etAK4WSjgJuWamo4Mzc7fJgZTIN0Y3CCxwyDdWRwgscOhXdha3UyDQ --lightpushnode=/ip4/172.18.6.0/tcp/50956/p2p/16Uiu2HAmQE7pPdPzAGxbMQYxgdFiBPurrKM7Rmm4cAWYsGEKU1qu --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.61.105 waku 90a264874d235ad3275768c682e5078f82aa8d43409277f559a1626066536303
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 90a264874d23. Setting up logs at ./log/docker/lightpush_node1_2024-10-17_04-12-01__f2daede8-51ef-43dd-b8d1-39d5fd35fe09__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 24570
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24570/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24570/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.61.105/tcp/24571/p2p/16Uiu2HAmGQF9wx3nd5m9cNiy8CGesKnKkMUYEz8pEyEXxXNtFU4a","/ip4/172.18.61.105/tcp/24572/ws/p2p/16Uiu2HAmGQF9wx3nd5m9cNiy8CGesKnKkMUYEz8pEyEXxXNtFU4a"],"enrUri":"enr:-LO4QOm4MUvaoqhj7u7R5BiM0qfFz7i2AbPxZDjN7iPtUB-CfxmHwPJcjgrTyXZAsPUkmSVfOPneFb7F_3z8sP6VST8BgmlkgnY0gmlwhKwSPWmKbXVsdGlhZGRyc4wACgSsEj1pBl_83QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3p8Zno82Fp-SRxt9eI_ZUjPNV1EofMTXKt5rUxsUXG4N0Y3CCX_uDdWRwgl_9hXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24570/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.6.0/tcp/50956/p2p/16Uiu2HAmQE7pPdPzAGxbMQYxgdFiBPurrKM7Rmm4cAWYsGEKU1qu"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24570/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.165.33/tcp/40981/p2p/16Uiu2HAmKu2iu2SRqg56mYGt2Mfgq4FKtTwBHAD7mRd54WLBr4vZ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:50955/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40980/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24570/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1729138327384110080}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50955/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1729138327384110080,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40980/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1729138327384110080,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id b37c19620e55
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 525a22d1e0b3
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 90a264874d23
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.