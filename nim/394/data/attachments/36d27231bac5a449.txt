[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_lightpushed_message with id: 2024-10-17_04-32-17__ecd69afc-fe12-4d8e-b487-5c00c4a318c7
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-10-17_04-32-17__ecd69afc-fe12-4d8e-b487-5c00c4a318c7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.138.232
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['47546', '47547', '47548', '47549', '47550']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 47546:47546 -p 47547:47547 -p 47548:47548 -p 47549:47549 -p 47550:47550 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=47548 --rest-port=47546 --tcp-port=47547 --discv5-udp-port=47549 --rest-address=0.0.0.0 --nat=extip:172.18.138.232 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2afcb3c09e1e47561afd46e6552d0bafc44ebbdce6a60efb0fbbe3e21a1ce4ed --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=47550 --metrics-logging=true --store=true --relay=true --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.138.232 waku 33a9539f0335d879e79df0b2a8f8fffcf7ea758e61f36202e14ce3d47e4793c4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 33a9539f0335. Setting up logs at ./log/docker/publishing_node1_2024-10-17_04-32-17__ecd69afc-fe12-4d8e-b487-5c00c4a318c7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 47546
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47546/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47546/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.138.232/tcp/47547/p2p/16Uiu2HAmLzVTj8YvkfAnuuhvFX3UsKZqkGgjVpXW29oaCpA7EyLA","/ip4/172.18.138.232/tcp/47548/ws/p2p/16Uiu2HAmLzVTj8YvkfAnuuhvFX3UsKZqkGgjVpXW29oaCpA7EyLA"],"enrUri":"enr:-LO4QJd5X5BjKVub7iD_RtTR12QbJq6qPR7OtpuswUl1_JdFfNt7w4f9iL4Grfl0InAlClUGY2CQpzcPn2kHozCcmMoBgmlkgnY0gmlwhKwSiuiKbXVsdGlhZGRyc4wACgSsEoroBrm83QOCcnOFAAMBAACJc2VjcDI1NmsxoQN73HJZy86hKbaLPIUSHuTUzS5cOV0fQSDMaj0daJ0nf4N0Y3CCubuDdWRwgrm9hXdha3UyCw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node2_2024-10-17_04-32-17__ecd69afc-fe12-4d8e-b487-5c00c4a318c7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.148.183
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['14351', '14352', '14353', '14354', '14355']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 14351:14351 -p 14352:14352 -p 14353:14353 -p 14354:14354 -p 14355:14355 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14353 --rest-port=14351 --tcp-port=14352 --discv5-udp-port=14354 --rest-address=0.0.0.0 --nat=extip:172.18.148.183 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dd52f616b7a1dac2eec8efadcbf3a9598c8dc2dae9a2fb3fbcefdd4ee5df7efe --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14355 --metrics-logging=true --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.148.183 waku a6f272c7c756f9c29892961a590bed18ead126302e03bd4e90eccf1ee093932c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID a6f272c7c756. Setting up logs at ./log/docker/publishing_node2_2024-10-17_04-32-17__ecd69afc-fe12-4d8e-b487-5c00c4a318c7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 14351
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14351/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14351/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.148.183/tcp/14352/p2p/16Uiu2HAmGK88AHJJZnKZdeuYLKDGT4W8CJfTMwqbjKYDcFyeek8z","/ip4/172.18.148.183/tcp/14353/ws/p2p/16Uiu2HAmGK88AHJJZnKZdeuYLKDGT4W8CJfTMwqbjKYDcFyeek8z"],"enrUri":"enr:-LO4QK_mgTNeqcKhw0JVqCLXu32WcXFKpBvEAeFsV9mzZoWbZdgz9LaulaohprSj5WmIZIA8YKlNhHQOdCQhf7NfBt8BgmlkgnY0gmlwhKwSlLeKbXVsdGlhZGRyc4wACgSsEpS3BjgR3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM2V-vT_lgCpFQvS7NpWzFn7x0qkE4Ue05zOO8GvfqN84N0Y3CCOBCDdWRwgjgShXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14351/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.138.232/tcp/47547/p2p/16Uiu2HAmLzVTj8YvkfAnuuhvFX3UsKZqkGgjVpXW29oaCpA7EyLA"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2024-10-17_04-32-17__ecd69afc-fe12-4d8e-b487-5c00c4a318c7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.166.134
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['16573', '16574', '16575', '16576', '16577']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 16573:16573 -p 16574:16574 -p 16575:16575 -p 16576:16576 -p 16577:16577 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=16575 --rest-port=16573 --tcp-port=16574 --discv5-udp-port=16576 --rest-address=0.0.0.0 --nat=extip:172.18.166.134 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=65d96c3b3dbe7828ecef689468d7ed622e9d37f205eb8252d2deeae3c7c8c042 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=16577 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QJd5X5BjKVub7iD_RtTR12QbJq6qPR7OtpuswUl1_JdFfNt7w4f9iL4Grfl0InAlClUGY2CQpzcPn2kHozCcmMoBgmlkgnY0gmlwhKwSiuiKbXVsdGlhZGRyc4wACgSsEoroBrm83QOCcnOFAAMBAACJc2VjcDI1NmsxoQN73HJZy86hKbaLPIUSHuTUzS5cOV0fQSDMaj0daJ0nf4N0Y3CCubuDdWRwgrm9hXdha3UyCw --storenode=/ip4/172.18.138.232/tcp/47547/p2p/16Uiu2HAmLzVTj8YvkfAnuuhvFX3UsKZqkGgjVpXW29oaCpA7EyLA --store=false --relay=false --lightpush=true --lightpushnode=/ip4/172.18.138.232/tcp/47547/p2p/16Uiu2HAmLzVTj8YvkfAnuuhvFX3UsKZqkGgjVpXW29oaCpA7EyLA
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.166.134 waku 00123b58d499189b90750d3455b10e26b3940a3773fb1248894903cc2cb66b63
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 00123b58d499. Setting up logs at ./log/docker/store_node1_2024-10-17_04-32-17__ecd69afc-fe12-4d8e-b487-5c00c4a318c7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 16573
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16573/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16573/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.166.134/tcp/16574/p2p/16Uiu2HAm4tAhPM72tKQ8MWEG1TRPmFVdq8GgyQ44hYs9VnuN2vZv","/ip4/172.18.166.134/tcp/16575/ws/p2p/16Uiu2HAm4tAhPM72tKQ8MWEG1TRPmFVdq8GgyQ44hYs9VnuN2vZv"],"enrUri":"enr:-LO4QC9WsYSVI9LDkICJnHSP1cPNy-JshE6wiBu0lHthbJVuBZgLYpJUlT_vAJbrRQj1wUjUQLsMV5FYdPv2NqiuvCIBgmlkgnY0gmlwhKwSpoaKbXVsdGlhZGRyc4wACgSsEqaGBkC_3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKMgsEAsza3yMwl1l25lkGnDnC7BWEHOr55izuHkOz4IYN0Y3CCQL6DdWRwgkDAhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16573/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.138.232/tcp/47547/p2p/16Uiu2HAmLzVTj8YvkfAnuuhvFX3UsKZqkGgjVpXW29oaCpA7EyLA"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16573/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.148.183/tcp/14352/p2p/16Uiu2HAmGK88AHJJZnKZdeuYLKDGT4W8CJfTMwqbjKYDcFyeek8z"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47546/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14351/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16573/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1729139543178126592}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47546/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"7qqAOb1mZE2DrC0nJwHrUr1oHWaBSJdAzBxw1EOKjYs="}]}'
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16573/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"2b0b063444d63b249f7f","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"7qqAOb1mZE2DrC0nJwHrUr1oHWaBSJdAzBxw1EOKjYs="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 33a9539f0335
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id a6f272c7c756
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 00123b58d499
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.