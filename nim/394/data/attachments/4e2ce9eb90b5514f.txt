[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_version with id: 2024-10-17_04-10-54__e27695a7-4227-4da7-88f6-597bbc1a600d
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-10-17_04-10-54__e27695a7-4227-4da7-88f6-597bbc1a600d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.144.10
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['45917', '45918', '45919', '45920', '45921']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 45917:45917 -p 45918:45918 -p 45919:45919 -p 45920:45920 -p 45921:45921 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45919 --rest-port=45917 --tcp-port=45918 --discv5-udp-port=45920 --rest-address=0.0.0.0 --nat=extip:172.18.144.10 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3eaeaab92f3fd1bedc67ef0cfe43aa741eb1b9b9cd20d4d39f09e30ea6dc281a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45921 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.144.10 waku 2e98d15c7c13516d6f15f57fd58734366f030d49b8ac9b13fe01aba8a7d24a58
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 2e98d15c7c13. Setting up logs at ./log/docker/receiving_node1_2024-10-17_04-10-54__e27695a7-4227-4da7-88f6-597bbc1a600d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 45917
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45917/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45917/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.144.10/tcp/45918/p2p/16Uiu2HAmF2bhKAg9rvYeLfp33gM7HhykUnBPKwAaYB2Rfoeu51TT","/ip4/172.18.144.10/tcp/45919/ws/p2p/16Uiu2HAmF2bhKAg9rvYeLfp33gM7HhykUnBPKwAaYB2Rfoeu51TT"],"enrUri":"enr:-LO4QBo0oraByW3ouCaNONZc50l7dQdzF5DtyPczTwcdeeFEMgA_xFV2xsCcCGrs67k_Ftd6oQRfFewFQwFgxCYU5kcBgmlkgnY0gmlwhKwSkAqKbXVsdGlhZGRyc4wACgSsEpAKBrNf3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMjQIksskNxh7GbhgFlhyyf0PvHQV02WNM7_IU7ZQAGfoN0Y3CCs16DdWRwgrNghXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-10-17_04-10-54__e27695a7-4227-4da7-88f6-597bbc1a600d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.73.81
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['1075', '1076', '1077', '1078', '1079']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 1075:1075 -p 1076:1076 -p 1077:1077 -p 1078:1078 -p 1079:1079 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=1077 --rest-port=1075 --tcp-port=1076 --discv5-udp-port=1078 --rest-address=0.0.0.0 --nat=extip:172.18.73.81 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cea7ac81f62cedce2e0df94ed8bfef86e89abdde87fbb6fbed5dbbc3f351fa82 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=1079 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.73.81 waku f5e0e0833b91954cf0f82dfc401b9d9c2f44df4233624c7fa45f88bc5bfef654
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID f5e0e0833b91. Setting up logs at ./log/docker/receiving_node2_2024-10-17_04-10-54__e27695a7-4227-4da7-88f6-597bbc1a600d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 1075
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1075/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1075/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.73.81/tcp/1076/p2p/16Uiu2HAmABNB2sbYt29PaC8fvRWB3safxXebBAJfBE1pVLge48EG","/ip4/172.18.73.81/tcp/1077/ws/p2p/16Uiu2HAmABNB2sbYt29PaC8fvRWB3safxXebBAJfBE1pVLge48EG"],"enrUri":"enr:-LO4QA8NoY9wQn2oJLLQsoJ8_OuCv751ns7eHwyLI49Hk8USVr0p5jaZR-nKM2FX6sa2y8vDyDBSxBArm_BTrZ1N7B8BgmlkgnY0gmlwhKwSSVGKbXVsdGlhZGRyc4wACgSsEklRBgQ13QOCcnOFAAMBAACJc2VjcDI1NmsxoQLbNQn9ERz9y7gNN7txvRBoMWUYZg4JRcnx6umwl76r5YN0Y3CCBDSDdWRwggQ2hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1075/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.144.10/tcp/45918/p2p/16Uiu2HAmF2bhKAg9rvYeLfp33gM7HhykUnBPKwAaYB2Rfoeu51TT"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-10-17_04-10-54__e27695a7-4227-4da7-88f6-597bbc1a600d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.146.227
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['32271', '32272', '32273', '32274', '32275']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 32271:32271 -p 32272:32272 -p 32273:32273 -p 32274:32274 -p 32275:32275 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32273 --rest-port=32271 --tcp-port=32272 --discv5-udp-port=32274 --rest-address=0.0.0.0 --nat=extip:172.18.146.227 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=adae5794d97f3ba2fab751fd1f9cedcaadb4d330a13e9fdbd3c144f1dacfa04a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32275 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QBo0oraByW3ouCaNONZc50l7dQdzF5DtyPczTwcdeeFEMgA_xFV2xsCcCGrs67k_Ftd6oQRfFewFQwFgxCYU5kcBgmlkgnY0gmlwhKwSkAqKbXVsdGlhZGRyc4wACgSsEpAKBrNf3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMjQIksskNxh7GbhgFlhyyf0PvHQV02WNM7_IU7ZQAGfoN0Y3CCs16DdWRwgrNghXdha3UyCQ --lightpushnode=/ip4/172.18.144.10/tcp/45918/p2p/16Uiu2HAmF2bhKAg9rvYeLfp33gM7HhykUnBPKwAaYB2Rfoeu51TT --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.146.227 waku 5f8898c2a999a69249c690cafe49b65f8ee64fde35a355bae1f72f8022191ae9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 5f8898c2a999. Setting up logs at ./log/docker/lightpush_node1_2024-10-17_04-10-54__e27695a7-4227-4da7-88f6-597bbc1a600d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 32271
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32271/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32271/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.146.227/tcp/32272/p2p/16Uiu2HAmN6z5iFrrJ489sEKjtaLuZ79BAPgSAtAW9evP3xcC6amF","/ip4/172.18.146.227/tcp/32273/ws/p2p/16Uiu2HAmN6z5iFrrJ489sEKjtaLuZ79BAPgSAtAW9evP3xcC6amF"],"enrUri":"enr:-LO4QFwkjG5-tCe-guWNtcnO3uSX81-rDWgGAcDym5rd0BRDXbXM41rC1EvEb5t6L2DmsuVnrxuGsPj_EzRe9SXbz4MBgmlkgnY0gmlwhKwSkuOKbXVsdGlhZGRyc4wACgSsEpLjBn4R3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOMYfrMvxyEEgONhq9XflSIiRpFmjT65N2xz0Dk3XqrwoN0Y3CCfhCDdWRwgn4ShXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32271/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.144.10/tcp/45918/p2p/16Uiu2HAmF2bhKAg9rvYeLfp33gM7HhykUnBPKwAaYB2Rfoeu51TT"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32271/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.73.81/tcp/1076/p2p/16Uiu2HAmABNB2sbYt29PaC8fvRWB3safxXebBAJfBE1pVLge48EG"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45917/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1075/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32271/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1729138261207073536, "version": 2.1}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:32271/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 2e98d15c7c13
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id f5e0e0833b91
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 5f8898c2a999
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.