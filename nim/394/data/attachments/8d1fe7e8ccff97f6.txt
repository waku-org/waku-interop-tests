[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_unsubscribe_from_some_of_the_subscribed_content_topics with id: 2024-10-17_04-07-47__07fd51ba-5933-4316-8331-8f8708306f55
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-17_04-07-47__07fd51ba-5933-4316-8331-8f8708306f55__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.10.205
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['8938', '8939', '8940', '8941', '8942']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 8938:8938 -p 8939:8939 -p 8940:8940 -p 8941:8941 -p 8942:8942 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8940 --rest-port=8938 --tcp-port=8939 --discv5-udp-port=8941 --rest-address=0.0.0.0 --nat=extip:172.18.10.205 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6c6abdcea27aeded48f4b720edbecf5ff3fccabd42c23c4bd0e73ad8d1daacd4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8942 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.10.205 waku 5cfd3526c449ec51dfc6941ce3ff0441244168952ea70beff68bcbf46473f67d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 5cfd3526c449. Setting up logs at ./log/docker/node1_2024-10-17_04-07-47__07fd51ba-5933-4316-8331-8f8708306f55__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 8938
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8938/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8938/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.10.205/tcp/8939/p2p/16Uiu2HAmM94CZSFzFSk1JNiEwdMLr2L5KASDsEwfWv35LffvFxTs","/ip4/172.18.10.205/tcp/8940/ws/p2p/16Uiu2HAmM94CZSFzFSk1JNiEwdMLr2L5KASDsEwfWv35LffvFxTs"],"enrUri":"enr:-LO4QHVTGSPpsXt09Heu3jjiu3dunsBQ2tnJajlj_oyfQIt5VeSwuexRCpRcH3Rj8uu0QqQKYfguDRQtZV188zVOQSQBgmlkgnY0gmlwhKwSCs2KbXVsdGlhZGRyc4wACgSsEgrNBiLs3QOCcnOFAAMBAACJc2VjcDI1NmsxoQN-DhxWVQPAbEthK8ajPMexiIpq9TMBUoj-GpgtTdT6EoN0Y3CCIuuDdWRwgiLthXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-10-17_04-07-47__07fd51ba-5933-4316-8331-8f8708306f55__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.183.78
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['32698', '32699', '32700', '32701', '32702']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 32698:32698 -p 32699:32699 -p 32700:32700 -p 32701:32701 -p 32702:32702 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32700 --rest-port=32698 --tcp-port=32699 --discv5-udp-port=32701 --rest-address=0.0.0.0 --nat=extip:172.18.183.78 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9a7bf8b7cdc459f07dd99a2f7150c1de2d6890f9cd6ba6f51ccee2f51cc3b91d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32702 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QHVTGSPpsXt09Heu3jjiu3dunsBQ2tnJajlj_oyfQIt5VeSwuexRCpRcH3Rj8uu0QqQKYfguDRQtZV188zVOQSQBgmlkgnY0gmlwhKwSCs2KbXVsdGlhZGRyc4wACgSsEgrNBiLs3QOCcnOFAAMBAACJc2VjcDI1NmsxoQN-DhxWVQPAbEthK8ajPMexiIpq9TMBUoj-GpgtTdT6EoN0Y3CCIuuDdWRwgiLthXdha3UyBQ --filternode=/ip4/172.18.10.205/tcp/8939/p2p/16Uiu2HAmM94CZSFzFSk1JNiEwdMLr2L5KASDsEwfWv35LffvFxTs
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.183.78 waku 7c49e1729cd61e4803bb98104d46ee77edef013d4568be012d4be91d7216c995
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 7c49e1729cd6. Setting up logs at ./log/docker/node2_2024-10-17_04-07-47__07fd51ba-5933-4316-8331-8f8708306f55__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 32698
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32698/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32698/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.183.78/tcp/32699/p2p/16Uiu2HAm2D2jnaoRAnWfWgVZFLomBSQ3z1Cqr2UuULUrMY5PswQM","/ip4/172.18.183.78/tcp/32700/ws/p2p/16Uiu2HAm2D2jnaoRAnWfWgVZFLomBSQ3z1Cqr2UuULUrMY5PswQM"],"enrUri":"enr:-LO4QKjT9shh0tmwjBYsvzrpCmvntFdnM8SdZEmjhwy6xYZCY7p6U9FiCUVa2zl-rnyPFGctIZeHGGniib_9o01gQsYBgmlkgnY0gmlwhKwSt06KbXVsdGlhZGRyc4wACgSsErdOBn-83QOCcnOFAAMBAACJc2VjcDI1NmsxoQJkxLrMZY7n2WzMoNM46N54b6t3VLcIQ2UfJFdwhtFDUoN0Y3CCf7uDdWRwgn-9hXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32698/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.10.205/tcp/8939/p2p/16Uiu2HAmM94CZSFzFSk1JNiEwdMLr2L5KASDsEwfWv35LffvFxTs"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8938/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32698/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "e9a493ee-cfcd-4c63-bca0-f56924e68a01", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"e9a493ee-cfcd-4c63-bca0-f56924e68a01","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8938/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32698/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "2d246d87-f20f-4708-b80b-d4a8efe0a969", "contentFilters": ["Hello World!", "1234567890"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"2d246d87-f20f-4708-b80b-d4a8efe0a969","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8938/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "1234567890", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32698/filter/v2/messages/1234567890" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"1234567890","version":0,"timestamp":1729138071526749952,"ephemeral":false}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X DELETE "http://127.0.0.1:32698/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["Hello World!"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8938/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "1234567890", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32698/filter/v2/messages/1234567890" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"1234567890","version":0,"timestamp":1729138071651751168,"ephemeral":false}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8938/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "Hello World!", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32698/filter/v2/messages/Hello%20World%21" -H "Content-Type: application/json" -d 'None'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:32698/filter/v2/messages/Hello%20World%21. Response content: b'Not subscribed to topic: Hello World!'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 5cfd3526c449
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 7c49e1729cd6
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.