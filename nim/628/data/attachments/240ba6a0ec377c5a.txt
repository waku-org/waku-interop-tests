[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_content_topic_and_pubsub_topic_not_in_docker_flags with id: 2025-01-26_04-05-08__5e96ce75-35bf-400f-a1e5-cb69ff032abd
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-26_04-05-08__5e96ce75-35bf-400f-a1e5-cb69ff032abd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.10.228
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['31911', '31912', '31913', '31914', '31915']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 31911:31911 -p 31912:31912 -p 31913:31913 -p 31914:31914 -p 31915:31915 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=31913 --rest-port=31911 --tcp-port=31912 --discv5-udp-port=31914 --rest-address=0.0.0.0 --nat=extip:172.18.10.228 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=b2cd87ff4ac3e18cbfe3eea25abb2fdd6cdce4db6c5ad8bd87d85d51bc1b1cd1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=31915 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.10.228 waku 076c1c9a8df9e1a5d804ff1c11c712f65068fa1f819fdea295f54d8cc061bd3e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 076c1c9a8df9. Setting up logs at ./log/docker/node1_2025-01-26_04-05-08__5e96ce75-35bf-400f-a1e5-cb69ff032abd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 31911
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 79d9021f854c. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31911/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31911/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.10.228/tcp/31912/p2p/16Uiu2HAmPMk8HpdeokFv2ezm5GSLvp8YipK8CGYtvwck4bS7euqG","/ip4/172.18.10.228/tcp/31913/ws/p2p/16Uiu2HAmPMk8HpdeokFv2ezm5GSLvp8YipK8CGYtvwck4bS7euqG"],"enrUri":"enr:-L24QJLGhgCeQhrCky35O1VUIJIxDNpv_2jG8yTpUf6kOYkLDlBo6aniAALAanxx9ynk8ICy6g8rmYu4mJ2NePn_dHYCgmlkgnY0gmlwhKwSCuSKbXVsdGlhZGRyc5YACASsEgrkBnyoAAoErBIK5AZ8qd0DgnJzhQACAQAAiXNlY3AyNTZrMaEDnwWZYznSDrMMI_1VAKG3JnAXYdQ_bvPmwlE5icfkpgeDdGNwgnyog3VkcIJ8qoV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-26_04-05-08__5e96ce75-35bf-400f-a1e5-cb69ff032abd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.234.112
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['37784', '37785', '37786', '37787', '37788']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 37784:37784 -p 37785:37785 -p 37786:37786 -p 37787:37787 -p 37788:37788 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37786 --rest-port=37784 --tcp-port=37785 --discv5-udp-port=37787 --rest-address=0.0.0.0 --nat=extip:172.18.234.112 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=6aef70fc01cafc3b995e5adc3c596bd0a5a6ec6fd7ce2de32b87c0edcdda8aed --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37788 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QJLGhgCeQhrCky35O1VUIJIxDNpv_2jG8yTpUf6kOYkLDlBo6aniAALAanxx9ynk8ICy6g8rmYu4mJ2NePn_dHYCgmlkgnY0gmlwhKwSCuSKbXVsdGlhZGRyc5YACASsEgrkBnyoAAoErBIK5AZ8qd0DgnJzhQACAQAAiXNlY3AyNTZrMaEDnwWZYznSDrMMI_1VAKG3JnAXYdQ_bvPmwlE5icfkpgeDdGNwgnyog3VkcIJ8qoV3YWt1MgU
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.234.112 waku f952a4fb13ef55e4eafeab598ea49cf4ce83cee6ac523a369d2bc6eaadf6c282
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID f952a4fb13ef. Setting up logs at ./log/docker/node2_2025-01-26_04-05-08__5e96ce75-35bf-400f-a1e5-cb69ff032abd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 37784
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37784/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37784/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.234.112/tcp/37785/p2p/16Uiu2HAmNRJv73GEm3z1RjrCg4MT8dHGXCb5JUh4UgTJhncvmJtY","/ip4/172.18.234.112/tcp/37786/ws/p2p/16Uiu2HAmNRJv73GEm3z1RjrCg4MT8dHGXCb5JUh4UgTJhncvmJtY"],"enrUri":"enr:-L24QPpUJXclYM9aEfVjaiWQHmlTHLaIUoPmQNGpPSYkSRjTZgq3-6l9qJ5KA1oq5o4oM354sDmQnVWdFO6Dc8b2HPUCgmlkgnY0gmlwhKwS6nCKbXVsdGlhZGRyc5YACASsEupwBpOZAAoErBLqcAaTmt0DgnJzhQACAQAAiXNlY3AyNTZrMaEDkRO69rvcdrs_VoiTTFbQ3iNdA14VrEmFwjEXUP6hKWGDdGNwgpOZg3VkcIKTm4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37784/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.10.228/tcp/31912/p2p/16Uiu2HAmPMk8HpdeokFv2ezm5GSLvp8YipK8CGYtvwck4bS7euqG"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31911/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37784/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31911/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31911/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1737864310884982784,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37784/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1737864310884982784,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 076c1c9a8df9
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id f952a4fb13ef
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 076c1c9a8df9. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.