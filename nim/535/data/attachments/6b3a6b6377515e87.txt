[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 22c4c5ebad6b. Exiting log stream.
[35mDEBUG   [0m src.postgres_setup:postgres_setup.py:36 Postgres container started
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_on_empty_postgress_db with id: 2024-12-22_04-19-41__ff9bf791-bafe-43ed-b4d8-8e32877d0567
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-12-22_04-19-41__ff9bf791-bafe-43ed-b4d8-8e32877d0567__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.67.140
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['62335', '62336', '62337', '62338', '62339']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 62335:62335 -p 62336:62336 -p 62337:62337 -p 62338:62338 -p 62339:62339 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62337 --rest-port=62335 --tcp-port=62336 --discv5-udp-port=62338 --rest-address=0.0.0.0 --nat=extip:172.18.67.140 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ae0ef61814feee54e466ad66c4cc518c02dd9f4d147edde08a00116ddc438ea7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62339 --metrics-logging=true --store=true --relay=true --store-message-db-url=postgres://postgres:test123@postgres:5432/postgres
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.67.140 waku a93ffbefe1b68d63f1d74f2b8bbed609162863d04f4ea918df8d5120769009d6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID a93ffbefe1b6. Setting up logs at ./log/docker/publishing_node1_2024-12-22_04-19-41__ff9bf791-bafe-43ed-b4d8-8e32877d0567__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 62335
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62335/health" -H "Content-Type: application/json" -d 'None'
[1m[31mERROR   [0m src.node.waku_node:waku_node.py:188 REST service did not become ready in time: HTTPConnectionPool(host='127.0.0.1', port=62335): Read timed out. (read timeout=20)
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.81.128
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['47912', '47913', '47914', '47915', '47916']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 47912:47912 -p 47913:47913 -p 47914:47914 -p 47915:47915 -p 47916:47916 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=47914 --rest-port=47912 --tcp-port=47913 --discv5-udp-port=47915 --rest-address=0.0.0.0 --nat=extip:172.18.81.128 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b7f26cf1e8a40c9a6c3ecc35bccd3bdbc60c8963dd7a7a6fc9be5c3d5954d7fe --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=47916 --metrics-logging=true --store=true --relay=true --store-message-db-url=postgres://postgres:test123@postgres:5432/postgres
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.81.128 waku 9ee13b64f4efd32e4a31f7d401431cafdde1a5a24d2ccb0881d30c75f55261f0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 9ee13b64f4ef. Setting up logs at ./log/docker/publishing_node1_2024-12-22_04-19-41__ff9bf791-bafe-43ed-b4d8-8e32877d0567__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 47912
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47912/health" -H "Content-Type: application/json" -d 'None'
[1m[31mERROR   [0m src.node.waku_node:waku_node.py:188 REST service did not become ready in time: HTTPConnectionPool(host='127.0.0.1', port=47912): Read timed out. (read timeout=20)
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.194.111
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['16088', '16089', '16090', '16091', '16092']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 16088:16088 -p 16089:16089 -p 16090:16090 -p 16091:16091 -p 16092:16092 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=16090 --rest-port=16088 --tcp-port=16089 --discv5-udp-port=16091 --rest-address=0.0.0.0 --nat=extip:172.18.194.111 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2d6fde74b02bec2ae24d8acabd2cae3ec22c7e0bf739ec62cca00ffcc1a9ad7d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=16092 --metrics-logging=true --store=true --relay=true --store-message-db-url=postgres://postgres:test123@postgres:5432/postgres
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.194.111 waku 74f00d956adfee4cde2b9b398b4b11f86af5d04f9974ae54e76d24bd342a7e98
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 74f00d956adf. Setting up logs at ./log/docker/publishing_node1_2024-12-22_04-19-41__ff9bf791-bafe-43ed-b4d8-8e32877d0567__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 16088
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16088/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Initializing","protocolsHealth":[]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16088/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Initializing","protocolsHealth":[]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16088/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16088/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.194.111/tcp/16089/p2p/16Uiu2HAkxoBXcPduxCPEiGqAaizgYb5nNS1xRMgV3TMP6GE5sDLr","/ip4/172.18.194.111/tcp/16090/ws/p2p/16Uiu2HAkxoBXcPduxCPEiGqAaizgYb5nNS1xRMgV3TMP6GE5sDLr"],"enrUri":"enr:-L24QPxrjKaYXCOaq3xFK1xM79muZCnBa3LdNVfvKrLzj4buUWcph-BYqGoRFnbZkK52COhrCRuiPpVpROhVV36ny1QCgmlkgnY0gmlwhKwSwm-KbXVsdGlhZGRyc5YACASsEsJvBj7ZAAoErBLCbwY-2t0DgnJzhQADAQAAiXNlY3AyNTZrMaECMhWrH7HLqt69HaarLkWHWf5VYVh1SiPMorr3W6n285-DdGNwgj7Zg3VkcII-24V3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2024-12-22_04-19-41__ff9bf791-bafe-43ed-b4d8-8e32877d0567__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.146.11
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['12077', '12078', '12079', '12080', '12081']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 12077:12077 -p 12078:12078 -p 12079:12079 -p 12080:12080 -p 12081:12081 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=12079 --rest-port=12077 --tcp-port=12078 --discv5-udp-port=12080 --rest-address=0.0.0.0 --nat=extip:172.18.146.11 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cc9fea71b06e73ffe57d249f56ce5c195e5fdeeeaf98f1f0f42f96ae9deb5d76 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=12081 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QPxrjKaYXCOaq3xFK1xM79muZCnBa3LdNVfvKrLzj4buUWcph-BYqGoRFnbZkK52COhrCRuiPpVpROhVV36ny1QCgmlkgnY0gmlwhKwSwm-KbXVsdGlhZGRyc5YACASsEsJvBj7ZAAoErBLCbwY-2t0DgnJzhQADAQAAiXNlY3AyNTZrMaECMhWrH7HLqt69HaarLkWHWf5VYVh1SiPMorr3W6n285-DdGNwgj7Zg3VkcII-24V3YWt1MgM --storenode=/ip4/172.18.194.111/tcp/16089/p2p/16Uiu2HAkxoBXcPduxCPEiGqAaizgYb5nNS1xRMgV3TMP6GE5sDLr --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.146.11 waku 319ebbaf3b9f244af817a74686e30c2b9b0e056c61f91ec8758f2ed311b8d61c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 319ebbaf3b9f. Setting up logs at ./log/docker/store_node1_2024-12-22_04-19-41__ff9bf791-bafe-43ed-b4d8-8e32877d0567__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 12077
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12077/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12077/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.146.11/tcp/12078/p2p/16Uiu2HAmH6AjwPtSGPZTDAhy81tgSPMD2xFbpBSFGrszGuGrW6VD","/ip4/172.18.146.11/tcp/12079/ws/p2p/16Uiu2HAmH6AjwPtSGPZTDAhy81tgSPMD2xFbpBSFGrszGuGrW6VD"],"enrUri":"enr:-L24QGhK1jie74fAY32bkNfoE1t0FikIiv3POyhlsSMJRQ_IGV6cKS6lUJIGtlUYS55Le6thbcYYKNow_apF51-CetACgmlkgnY0gmlwhKwSkguKbXVsdGlhZGRyc5YACASsEpILBi8uAAoErBKSCwYvL90DgnJzhQADAQAAiXNlY3AyNTZrMaEDQeIEOZdJ-Saj_Uy4ef2sR9P3ULgTSm5ro9ImtCi6jpCDdGNwgi8ug3VkcIIvMIV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12077/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.194.111/tcp/16089/p2p/16Uiu2HAkxoBXcPduxCPEiGqAaizgYb5nNS1xRMgV3TMP6GE5sDLr"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16088/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12077/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16088/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16088/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"oJZ3EWyHaJGMifLM6Ytjg254ofUoCMkmnkCAdMM9bYY="}]}'
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12077/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"f569b8ee7af9be834799","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"oJZ3EWyHaJGMifLM6Ytjg254ofUoCMkmnkCAdMM9bYY="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 74f00d956adf
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 319ebbaf3b9f
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 74f00d956adf. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.postgres_setup:postgres_setup.py:44 Postgres container stopped and removed.