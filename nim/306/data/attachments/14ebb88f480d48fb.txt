[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_ping_on_unsubscribed_peer with id: 2024-08-07_08-11-35__6b786eb4-ec18-4a05-a811-1495941ff0fd
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node1_2024-08-07_08-11-35__6b786eb4-ec18-4a05-a811-1495941ff0fd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.140.104
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['39715', '39716', '39717', '39718', '39719']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:160 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:162 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 39715:39715 -p 39716:39716 -p 39717:39717 -p 39718:39718 -p 39719:39719 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39717 --rest-port=39715 --tcp-port=39716 --discv5-udp-port=39718 --rest-address=0.0.0.0 --nat=extip:172.18.140.104 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39719 --metrics-logging=true --relay=true --filter=true --nodekey=30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.140.104 waku 502c1b8cf1c04bae3276ca074eb866842c9f949782d6ac52e01aa0804a8dcdca
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 502c1b8cf1c0. Setting up logs at ./log/docker/node1_2024-08-07_08-11-35__6b786eb4-ec18-4a05-a811-1495941ff0fd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:174 Started container from image wakuorg/nwaku:latest. REST: 39715
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39715/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39715/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.140.104/tcp/39716/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip","/ip4/172.18.140.104/tcp/39717/ws/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"],"enrUri":"enr:-LO4QOecOKWDVKVeDrJHbYyxPU1IVJsb4yeQZgY_2d9qHroLNeQmrICGhsjAJ34TOXHwrNvgtTAzTuwX4WfUg2BacrYBgmlkgnY0gmlwhKwSjGiKbXVsdGlhZGRyc4wACgSsEoxoBpsl3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCmySDdWRwgpsmhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node2_2024-08-07_08-11-35__6b786eb4-ec18-4a05-a811-1495941ff0fd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.169.43
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['19892', '19893', '19894', '19895', '19896']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:160 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:162 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 19892:19892 -p 19893:19893 -p 19894:19894 -p 19895:19895 -p 19896:19896 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19894 --rest-port=19892 --tcp-port=19893 --discv5-udp-port=19895 --rest-address=0.0.0.0 --nat=extip:172.18.169.43 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19896 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QOecOKWDVKVeDrJHbYyxPU1IVJsb4yeQZgY_2d9qHroLNeQmrICGhsjAJ34TOXHwrNvgtTAzTuwX4WfUg2BacrYBgmlkgnY0gmlwhKwSjGiKbXVsdGlhZGRyc4wACgSsEoxoBpsl3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCmySDdWRwgpsmhXdha3UyBQ --filternode=/ip4/172.18.140.104/tcp/39716/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.169.43 waku 5ada580e3e927453d3d7ef9f57c4dee843e3cee995ae761fc89b4b0de03fec08
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 5ada580e3e92. Setting up logs at ./log/docker/node2_2024-08-07_08-11-35__6b786eb4-ec18-4a05-a811-1495941ff0fd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:174 Started container from image wakuorg/nwaku:latest. REST: 19892
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19892/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19892/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.169.43/tcp/19893/p2p/16Uiu2HAm9jNLD8nMsrAZZpHVBgxHH7PNg6uYedYi4q5uYR9XmKj3","/ip4/172.18.169.43/tcp/19894/ws/p2p/16Uiu2HAm9jNLD8nMsrAZZpHVBgxHH7PNg6uYedYi4q5uYR9XmKj3"],"enrUri":"enr:-LO4QAgyVVyvBCdUz67i_iDwLEJBwcZ7cCS8aZTeZVV4cWvYY7MCraD5W7q5fjA7_Mb_2kEjOQKq2-4Ns1xebQc1K4gBgmlkgnY0gmlwhKwSqSuKbXVsdGlhZGRyc4wACgSsEqkrBk223QOCcnOFAAMBAACJc2VjcDI1NmsxoQLUjB3sLNEflKQR3IDKb928AGnLk9XwpMXyPbkWuB1pToN0Y3CCTbWDdWRwgk23hXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19892/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.140.104/tcp/39716/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39715/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19892/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "116ddb52-d584-4b0b-919c-7d29446b7192", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"116ddb52-d584-4b0b-919c-7d29446b7192","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19892/filter/v2/subscriptions/ac8b2a89-94a3-40bf-be0c-1db4b1529188" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"ac8b2a89-94a3-40bf-be0c-1db4b1529188","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X DELETE "http://127.0.0.1:19892/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "12345", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"12345","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19892/filter/v2/subscriptions/f70ac29c-8b0a-4fba-a784-7ec376edc97a" -H "Content-Type: application/json" -d 'None'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:19892/filter/v2/subscriptions/f70ac29c-8b0a-4fba-a784-7ec376edc97a. Response content: b'{"requestId":"f70ac29c-8b0a-4fba-a784-7ec376edc97a","statusDesc":"NOT_FOUND: peer has no subscriptions"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 502c1b8cf1c0
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 5ada580e3e92
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.