[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_content_topics with id: 2025-01-15_04-03-29__d9973ded-6376-400d-b84c-2f026e0a87b5
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-01-15_04-03-29__d9973ded-6376-400d-b84c-2f026e0a87b5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.153.100
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['64627', '64628', '64629', '64630', '64631']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 64627:64627 -p 64628:64628 -p 64629:64629 -p 64630:64630 -p 64631:64631 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64629 --rest-port=64627 --tcp-port=64628 --discv5-udp-port=64630 --rest-address=0.0.0.0 --nat=extip:172.18.153.100 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7dc4fbc1bee7fc8efc1cab274dcaeeebeac0fff0e5cb5ca1596051b8beb4aa75 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64631 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.153.100 waku dfd5f38acfc6b50000e2ddcc97ddc925a1bb143ba4de81da23d803f0da30641c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID dfd5f38acfc6. Setting up logs at ./log/docker/receiving_node1_2025-01-15_04-03-29__d9973ded-6376-400d-b84c-2f026e0a87b5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 64627
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 8483e0511ee9. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64627/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64627/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.153.100/tcp/64628/p2p/16Uiu2HAm7Hg47Hc7eVM5Ega8J3Ekc1ECXpEkLYaaPoyWGqkyfgZn","/ip4/172.18.153.100/tcp/64629/ws/p2p/16Uiu2HAm7Hg47Hc7eVM5Ega8J3Ekc1ECXpEkLYaaPoyWGqkyfgZn"],"enrUri":"enr:-L24QPmOsuUNh-sA0VYUnYieqSWFhO7XXghywutbyQhMJF8LCJDb-j2W4XzPGQsVVLi5lDjjEK342edQngAnl0re-fACgmlkgnY0gmlwhKwSmWSKbXVsdGlhZGRyc5YACASsEplkBvx0AAoErBKZZAb8dd0DgnJzhQADAQAAiXNlY3AyNTZrMaECsD-uR22kcSmQRhNH6XY9ttkdtqQCeYpgsTE67brM9bmDdGNwgvx0g3VkcIL8doV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-01-15_04-03-29__d9973ded-6376-400d-b84c-2f026e0a87b5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.13.138
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['47228', '47229', '47230', '47231', '47232']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 47228:47228 -p 47229:47229 -p 47230:47230 -p 47231:47231 -p 47232:47232 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=47230 --rest-port=47228 --tcp-port=47229 --discv5-udp-port=47231 --rest-address=0.0.0.0 --nat=extip:172.18.13.138 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=28d7e69cdd61cca5830f3c1cca2fd1ebfbd0ed69be9d926acee42b7fbcccba6d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=47232 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.13.138 waku fd5096e2fae4ce9ad0ebf415fac961f2c06d89ef9e8dfeccddf3ccf7ff4832e9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID fd5096e2fae4. Setting up logs at ./log/docker/receiving_node2_2025-01-15_04-03-29__d9973ded-6376-400d-b84c-2f026e0a87b5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 47228
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47228/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47228/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.13.138/tcp/47229/p2p/16Uiu2HAmBvvLeTMPieMBxqD3WP1AkBW4ADe46fNo15DQ9KiKGKjH","/ip4/172.18.13.138/tcp/47230/ws/p2p/16Uiu2HAmBvvLeTMPieMBxqD3WP1AkBW4ADe46fNo15DQ9KiKGKjH"],"enrUri":"enr:-L24QNp56YFGgbjmEmce7RHQ3T2WCHZ9V6Prmml28owjJGdiKV5u78Htb_Hl88xcOk4EFF012t6yUcqW-RAhWEoIcDMCgmlkgnY0gmlwhKwSDYqKbXVsdGlhZGRyc5YACASsEg2KBrh9AAoErBINiga4ft0DgnJzhQADAQAAiXNlY3AyNTZrMaEC9TkSFwAjFkRmn_7srOhMXDkBDHQe2ST0ZhFKgKtAI7SDdGNwgrh9g3VkcIK4f4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47228/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.153.100/tcp/64628/p2p/16Uiu2HAm7Hg47Hc7eVM5Ega8J3Ekc1ECXpEkLYaaPoyWGqkyfgZn"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-01-15_04-03-29__d9973ded-6376-400d-b84c-2f026e0a87b5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.193.151
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['52261', '52262', '52263', '52264', '52265']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 52261:52261 -p 52262:52262 -p 52263:52263 -p 52264:52264 -p 52265:52265 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=52263 --rest-port=52261 --tcp-port=52262 --discv5-udp-port=52264 --rest-address=0.0.0.0 --nat=extip:172.18.193.151 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9bff86fa6c8ecda4db89ccf8cedcffa5f4c0193f4dbd1400fc91ed9facb3c6e5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=52265 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QPmOsuUNh-sA0VYUnYieqSWFhO7XXghywutbyQhMJF8LCJDb-j2W4XzPGQsVVLi5lDjjEK342edQngAnl0re-fACgmlkgnY0gmlwhKwSmWSKbXVsdGlhZGRyc5YACASsEplkBvx0AAoErBKZZAb8dd0DgnJzhQADAQAAiXNlY3AyNTZrMaECsD-uR22kcSmQRhNH6XY9ttkdtqQCeYpgsTE67brM9bmDdGNwgvx0g3VkcIL8doV3YWt1Mgk --lightpushnode=/ip4/172.18.153.100/tcp/64628/p2p/16Uiu2HAm7Hg47Hc7eVM5Ega8J3Ekc1ECXpEkLYaaPoyWGqkyfgZn --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.193.151 waku 021a9e2d013af48121633fb38374e1ad88dafb78f2079077c8e42d16e344d421
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 021a9e2d013a. Setting up logs at ./log/docker/lightpush_node1_2025-01-15_04-03-29__d9973ded-6376-400d-b84c-2f026e0a87b5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 52261
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52261/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52261/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.193.151/tcp/52262/p2p/16Uiu2HAm2wgVnh19go7zpVdiCuF1EK5xYye4cLubR67sPWrAwqS8","/ip4/172.18.193.151/tcp/52263/ws/p2p/16Uiu2HAm2wgVnh19go7zpVdiCuF1EK5xYye4cLubR67sPWrAwqS8"],"enrUri":"enr:-L24QI3iS5VyjO9yBFeXXQpbU3Y519bhNbIBZqYP91USxtQOUqkeM1OcutXnMvfcb0NgIE-LTZO5C1XNGIAZT_62aowCgmlkgnY0gmlwhKwSwZeKbXVsdGlhZGRyc5YACASsEsGXBswmAAoErBLBlwbMJ90DgnJzhQADAQAAiXNlY3AyNTZrMaECb7HRSCLvj7JvnAzlfzCQixincShGfhYibg8-MxwnuFGDdGNwgswmg3VkcILMKIV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52261/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.153.100/tcp/64628/p2p/16Uiu2HAm7Hg47Hc7eVM5Ega8J3Ekc1ECXpEkLYaaPoyWGqkyfgZn"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52261/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.13.138/tcp/47229/p2p/16Uiu2HAmBvvLeTMPieMBxqD3WP1AkBW4ADe46fNo15DQ9KiKGKjH"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64627/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47228/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic Empty string
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52261/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "", "timestamp": 1736913813635244288}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:52261/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A dictionary
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52261/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": {"key": "YWFh"}, "timestamp": 1736913813643118592}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:52261/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic An integer
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52261/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": 1234567890, "timestamp": 1736913813651405568}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:52261/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A list
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52261/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": ["YWFh"], "timestamp": 1736913813656619264}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:52261/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A bool
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52261/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": true, "timestamp": 1736913813661678080}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:52261/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id dfd5f38acfc6
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id fd5096e2fae4
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container dfd5f38acfc6. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 021a9e2d013a
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container fd5096e2fae4. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.