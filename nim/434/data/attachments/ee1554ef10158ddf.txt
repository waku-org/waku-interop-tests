[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_missing_payload with id: 2024-11-07_04-54-41__2c28b6bd-f7ce-4d6a-90df-e5706f70d49f
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-11-07_04-54-41__2c28b6bd-f7ce-4d6a-90df-e5706f70d49f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.2.5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['53159', '53160', '53161', '53162', '53163']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 53159:53159 -p 53160:53160 -p 53161:53161 -p 53162:53162 -p 53163:53163 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=53161 --rest-port=53159 --tcp-port=53160 --discv5-udp-port=53162 --rest-address=0.0.0.0 --nat=extip:172.18.2.5 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=af9ca27e9f99e4bc78f7c3369c108f1d1e5ac606258d20ecdc6aa7fdc1a0e196 --max-connections=1000 --filter-subscription-timeout=600 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=53163 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.2.5 waku 9adbbd3edb12830886f52b666c6bdb05f6f3f5358accacaeacff842307ada2b5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 9adbbd3edb12. Setting up logs at ./log/docker/receiving_node1_2024-11-07_04-54-41__2c28b6bd-f7ce-4d6a-90df-e5706f70d49f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 53159
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 968d1dc07b88. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53159/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53159/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.2.5/tcp/53160/p2p/16Uiu2HAm3w2KMAKytYgauu8hSa8WvdmEitnuMgD3HYbDF2oUCJAF","/ip4/172.18.2.5/tcp/53161/ws/p2p/16Uiu2HAm3w2KMAKytYgauu8hSa8WvdmEitnuMgD3HYbDF2oUCJAF"],"enrUri":"enr:-L24QOYw528TfPvm0f2QSvjcXlRRxz1hfqYTgi7_PNW_f0ubbKUTgAzn30jOSADB1-0o2u8tX2UODjrBFxxg6MO218gCgmlkgnY0gmlwhKwSAgWKbXVsdGlhZGRyc5YACASsEgIFBs-oAAoErBICBQbPqd0DgnJzhQADAQAAiXNlY3AyNTZrMaECfmJVi_Lw1XkngIW5zd8Wq3d9n3nULV-QCR-wpKlLeeSDdGNwgs-og3VkcILPqoV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-11-07_04-54-41__2c28b6bd-f7ce-4d6a-90df-e5706f70d49f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.215.50
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['47704', '47705', '47706', '47707', '47708']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 47704:47704 -p 47705:47705 -p 47706:47706 -p 47707:47707 -p 47708:47708 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=47706 --rest-port=47704 --tcp-port=47705 --discv5-udp-port=47707 --rest-address=0.0.0.0 --nat=extip:172.18.215.50 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=92eade4fab0cbaedaaf3dd0f440aeb237c9c6aaa3ce6fa77c05e33f3d73deb17 --max-connections=1000 --filter-subscription-timeout=600 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=47708 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.215.50 waku 3143e41115490365763351f3c1eea12e4c207bfeb8d5b71832d28a398386c1d2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 3143e4111549. Setting up logs at ./log/docker/receiving_node2_2024-11-07_04-54-41__2c28b6bd-f7ce-4d6a-90df-e5706f70d49f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 47704
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47704/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47704/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.215.50/tcp/47705/p2p/16Uiu2HAmBWTbbWwcDncFqWjCuGYPWH2q9Q7W38ghVvuW5aDzCys7","/ip4/172.18.215.50/tcp/47706/ws/p2p/16Uiu2HAmBWTbbWwcDncFqWjCuGYPWH2q9Q7W38ghVvuW5aDzCys7"],"enrUri":"enr:-L24QHzdvgCmTQBa9FShUY6iKpvT6-QUH_fzjcPYFd5AiyLPdgr8P0LB0zKC71Nasuh9g4gZkUUXdNQI_5yTA8Qh9VcCgmlkgnY0gmlwhKwS1zKKbXVsdGlhZGRyc5YACASsEtcyBrpZAAoErBLXMga6Wt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC7vTkyHuaatfbD86h11-7iD-iP4e2UdLT8UxPsSFISEKDdGNwgrpZg3VkcIK6W4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47704/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.2.5/tcp/53160/p2p/16Uiu2HAm3w2KMAKytYgauu8hSa8WvdmEitnuMgD3HYbDF2oUCJAF"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-11-07_04-54-41__2c28b6bd-f7ce-4d6a-90df-e5706f70d49f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.88.123
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['5017', '5018', '5019', '5020', '5021']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 5017:5017 -p 5018:5018 -p 5019:5019 -p 5020:5020 -p 5021:5021 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=5019 --rest-port=5017 --tcp-port=5018 --discv5-udp-port=5020 --rest-address=0.0.0.0 --nat=extip:172.18.88.123 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=13aa5cf086ba94bd1d4fffd0d2e902ca078fd16a3cbd5e2ade97f3550a7ee7af --max-connections=1000 --filter-subscription-timeout=600 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=5021 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QOYw528TfPvm0f2QSvjcXlRRxz1hfqYTgi7_PNW_f0ubbKUTgAzn30jOSADB1-0o2u8tX2UODjrBFxxg6MO218gCgmlkgnY0gmlwhKwSAgWKbXVsdGlhZGRyc5YACASsEgIFBs-oAAoErBICBQbPqd0DgnJzhQADAQAAiXNlY3AyNTZrMaECfmJVi_Lw1XkngIW5zd8Wq3d9n3nULV-QCR-wpKlLeeSDdGNwgs-og3VkcILPqoV3YWt1Mgk --lightpushnode=/ip4/172.18.2.5/tcp/53160/p2p/16Uiu2HAm3w2KMAKytYgauu8hSa8WvdmEitnuMgD3HYbDF2oUCJAF --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.88.123 waku 271b86f139d40ce333bb2f751accc17911e998ab30d39ebe9ec809556300fd10
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 271b86f139d4. Setting up logs at ./log/docker/lightpush_node1_2024-11-07_04-54-41__2c28b6bd-f7ce-4d6a-90df-e5706f70d49f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 5017
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5017/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5017/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.88.123/tcp/5018/p2p/16Uiu2HAmALru1h83NfhZhxhcE2noq5cRnaj7pEXAj5UMJ9JTDeoJ","/ip4/172.18.88.123/tcp/5019/ws/p2p/16Uiu2HAmALru1h83NfhZhxhcE2noq5cRnaj7pEXAj5UMJ9JTDeoJ"],"enrUri":"enr:-L24QKhl9kX4Oqsdx3RXIAokcrbxl56wsvg4xOOIeCyk0fF0T9NiQB5BTgzqIBQp1dPCNQ_UQW3dOV0icg84CFakGjACgmlkgnY0gmlwhKwSWHuKbXVsdGlhZGRyc5YACASsElh7BhOaAAoErBJYewYTm90DgnJzhQADAQAAiXNlY3AyNTZrMaEC3aO-kEVlGBVGj7dgF7Y6wWuYMfjQHoV7NBWBs3rr9FGDdGNwghOag3VkcIITnIV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5017/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.2.5/tcp/53160/p2p/16Uiu2HAm3w2KMAKytYgauu8hSa8WvdmEitnuMgD3HYbDF2oUCJAF"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5017/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.215.50/tcp/47705/p2p/16Uiu2HAmBWTbbWwcDncFqWjCuGYPWH2q9Q7W38ghVvuW5aDzCys7"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53159/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47704/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5017/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"contentTopic": "/myapp/1/latest/proto", "timestamp": 1730955285817785856}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:5017/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 9adbbd3edb12
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 3143e4111549
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 9adbbd3edb12. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 271b86f139d4
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 3143e4111549. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.