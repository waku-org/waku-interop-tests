[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_relay_and_store__peer_neither_relay_nor_store with id: 2024-05-27_14-14-37__16cd0568-146d-4034-8822-1e25d45c77e8
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-27_14-14-37__16cd0568-146d-4034-8822-1e25d45c77e8__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.58.174
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['9787', '9788', '9789', '9790', '9791']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:345 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 9787:9787 -p 9788:9788 -p 9789:9789 -p 9790:9790 -p 9791:9791 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=9789 --rest-port=9787 --tcp-port=9788 --discv5-udp-port=9790 --rest-address=0.0.0.0 --nat=extip:172.18.58.174 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=9791 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.58.174 waku fd499866d76d4b38f00c67e3d0ec9a70c8f008117935cdf0a5378c7fdc4d068a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID fd499866d76d. Setting up logs at ./log/docker/publishing_node1_2024-05-27_14-14-37__16cd0568-146d-4034-8822-1e25d45c77e8__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 9787
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9787/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:209 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9787/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.58.174/tcp/9788/p2p/16Uiu2HAkzWBEN9rtW9astGZkXXQj4BjtXCNrwrFyQ78arawgtMNX","/ip4/172.18.58.174/tcp/9789/ws/p2p/16Uiu2HAkzWBEN9rtW9astGZkXXQj4BjtXCNrwrFyQ78arawgtMNX"],"enrUri":"enr:-LO4QGZeA4imssAtOI7_4xjpNPwNs6wscPRy2b-F-JzGwNvDVQmaEOWGOZ2Dgbxzt7FdXJPGv6pcf5MJDvImtBvxQ9ABgmlkgnY0gmlwhKwSOq6KbXVsdGlhZGRyc4wACgSsEjquBiY93QOCcnOFAAABAACJc2VjcDI1NmsxoQJLcdUVCDkINixEXb1bK-GkcZx5G_AxmK1T5VoPFUcmmIN0Y3CCJjyDdWRwgiY-hXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-27_14-14-37__16cd0568-146d-4034-8822-1e25d45c77e8__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.218.100
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['62318', '62319', '62320', '62321', '62322']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:345 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 62318:62318 -p 62319:62319 -p 62320:62320 -p 62321:62321 -p 62322:62322 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62320 --rest-port=62318 --tcp-port=62319 --discv5-udp-port=62321 --rest-address=0.0.0.0 --nat=extip:172.18.218.100 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62322 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QGZeA4imssAtOI7_4xjpNPwNs6wscPRy2b-F-JzGwNvDVQmaEOWGOZ2Dgbxzt7FdXJPGv6pcf5MJDvImtBvxQ9ABgmlkgnY0gmlwhKwSOq6KbXVsdGlhZGRyc4wACgSsEjquBiY93QOCcnOFAAABAACJc2VjcDI1NmsxoQJLcdUVCDkINixEXb1bK-GkcZx5G_AxmK1T5VoPFUcmmIN0Y3CCJjyDdWRwgiY-hXdha3UyAw --storenode=/ip4/172.18.58.174/tcp/9788/p2p/16Uiu2HAkzWBEN9rtW9astGZkXXQj4BjtXCNrwrFyQ78arawgtMNX --store=false --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.218.100 waku b7e342e9ae7b1a51feac9ef30f40514ed2ff4cfced1b098d55fc68619e2d8c52
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID b7e342e9ae7b. Setting up logs at ./log/docker/store_node1_2024-05-27_14-14-37__16cd0568-146d-4034-8822-1e25d45c77e8__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 62318
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62318/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:209 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62318/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.218.100/tcp/62319/p2p/16Uiu2HAmTE3ysE8yXLMCjrkUu1Nm55hjbxYCb4ngKrj5wy8soTBH","/ip4/172.18.218.100/tcp/62320/ws/p2p/16Uiu2HAmTE3ysE8yXLMCjrkUu1Nm55hjbxYCb4ngKrj5wy8soTBH"],"enrUri":"enr:-LO4QIOU8euz0LzL35Vq_IfJQMnDP4lgEZEuIzWB7agGNY6iEX4d1jLRmZhpLrt7XE2oen_zQ22l_KPPWAZ-J4NYmh0BgmlkgnY0gmlwhKwS2mSKbXVsdGlhZGRyc4wACgSsEtpkBvNw3QOCcnOFAAABAACJc2VjcDI1NmsxoQPYe-OLKJn8mxKv_sTPu59z9Cq3po6tLpAvbZtp3SXwrIN0Y3CC82-DdWRwgvNxhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62318/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.58.174/tcp/9788/p2p/16Uiu2HAkzWBEN9rtW9astGZkXXQj4BjtXCNrwrFyQ78arawgtMNX"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9787/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9787/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9787/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1716819280589060352,"ephemeral":false}]}'
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62318/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1716819280589060352,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id fd499866d76d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id b7e342e9ae7b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:32 Running fixture teardown: set_allure_env_variables