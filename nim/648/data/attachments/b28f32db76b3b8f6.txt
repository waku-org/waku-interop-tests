2025-02-11 15:02:35.375 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 15:02:35.375 DEBUG [tests.conftest] Running test: test_store_node_not_connected_directly_to_lightpushing_node with id: 2025-02-11_15-02-35__88607d25-40b3-4dad-8e1c-848aba098b6c
2025-02-11 15:02:35.376 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 15:02:35.376 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-11 15:02:35.376 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-11 15:02:35.385 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 15:02:35.385 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-11_15-02-35__88607d25-40b3-4dad-8e1c-848aba098b6c__wakuorg_nwaku:latest.log
2025-02-11 15:02:35.390 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 15:02:35.391 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-11_15-02-35__88607d25-40b3-4dad-8e1c-848aba098b6c__wakuorg_nwaku:latest.log
2025-02-11 15:02:35.396 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 15:02:35.396 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node3_2025-02-11_15-02-35__88607d25-40b3-4dad-8e1c-848aba098b6c__wakuorg_nwaku:latest.log
2025-02-11 15:02:35.396 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-11 15:02:35.397 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-11 15:02:35.397 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 15:02:35.398 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 15:02:35.461 DEBUG [src.node.docker_mananger] Network waku created
2025-02-11 15:02:35.461 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.158.30
2025-02-11 15:02:35.461 DEBUG [src.node.docker_mananger] Generated ports ['47352', '47353', '47354', '47355', '47356']
2025-02-11 15:02:35.462 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 15:02:35.462 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 15:02:35.462 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 15:02:35.462 DEBUG [src.node.docker_mananger] docker run -i -t -p 47352:47352 -p 47353:47353 -p 47354:47354 -p 47355:47355 -p 47356:47356 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=47354 --rest-port=47352 --tcp-port=47353 --discv5-udp-port=47355 --rest-address=0.0.0.0 --nat=extip:172.18.158.30 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=20fe7b1ebbb18edefad5fbf278d5cdaf19eeacce1770fece9cd8b8ba2696277a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=47356 --metrics-logging=true --lightpush=true
2025-02-11 15:02:38.623 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.158.30 waku a0c8b210e31dae8c38bfae6b57ce30bee0811151a65cac2480b9d4bef290096c
2025-02-11 15:02:38.671 DEBUG [src.node.docker_mananger] Container started with ID a0c8b210e31d. Setting up logs at ./log/docker/node1_2025-02-11_15-02-35__88607d25-40b3-4dad-8e1c-848aba098b6c__wakuorg_nwaku:latest.log
2025-02-11 15:02:38.671 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 47352
2025-02-11 15:02:38.672 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 15:02:39.673 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47352/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:02:39.676 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 15:02:39.676 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 15:02:39.677 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47352/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:02:39.679 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.158.30/tcp/47353/p2p/16Uiu2HAmSFzaAa7sjw6D6dVbAhesVcDvPjhSowmBFPEXUT4n5HEU","/ip4/172.18.158.30/tcp/47354/ws/p2p/16Uiu2HAmSFzaAa7sjw6D6dVbAhesVcDvPjhSowmBFPEXUT4n5HEU"],"enrUri":"enr:-L24QJ6tmMZMwCYfkQulT9zRrPLNgQ2cHox7oOQ3eHTJRtlCalPRHGEwk7AiwbUC_U0yRZlZuGda6R9uv2wVYGzVRwwCgmlkgnY0gmlwhKwSnh6KbXVsdGlhZGRyc5YACASsEp4eBrj5AAoErBKeHga4-t0DgnJzhQADAQAAiXNlY3AyNTZrMaEDyh-CZnAy9ZcLDxBoJuylOcsGKAVylORZ8R_mGlMfoJ2DdGNwgrj5g3VkcIK4-4V3YWt1Mgk"}'
2025-02-11 15:02:39.679 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 15:02:39.679 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 15:02:39.679 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 15:02:39.681 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 15:02:39.681 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.56.217
2025-02-11 15:02:39.681 DEBUG [src.node.docker_mananger] Generated ports ['12497', '12498', '12499', '12500', '12501']
2025-02-11 15:02:39.681 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 15:02:39.682 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 15:02:39.682 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 15:02:39.682 DEBUG [src.node.docker_mananger] docker run -i -t -p 12497:12497 -p 12498:12498 -p 12499:12499 -p 12500:12500 -p 12501:12501 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=12499 --rest-port=12497 --tcp-port=12498 --discv5-udp-port=12500 --rest-address=0.0.0.0 --nat=extip:172.18.56.217 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b25edbefe5f7b84e611603ed6e14e9ad2e08bdca441be1eca5df8affc2d1b0ee --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=12501 --metrics-logging=true --lightpush=true --store=true --relay=true --discv5-bootstrap-node=enr:-L24QJ6tmMZMwCYfkQulT9zRrPLNgQ2cHox7oOQ3eHTJRtlCalPRHGEwk7AiwbUC_U0yRZlZuGda6R9uv2wVYGzVRwwCgmlkgnY0gmlwhKwSnh6KbXVsdGlhZGRyc5YACASsEp4eBrj5AAoErBKeHga4-t0DgnJzhQADAQAAiXNlY3AyNTZrMaEDyh-CZnAy9ZcLDxBoJuylOcsGKAVylORZ8R_mGlMfoJ2DdGNwgrj5g3VkcIK4-4V3YWt1Mgk --lightpushnode=/ip4/172.18.158.30/tcp/47353/p2p/16Uiu2HAmSFzaAa7sjw6D6dVbAhesVcDvPjhSowmBFPEXUT4n5HEU
2025-02-11 15:02:39.913 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.56.217 waku f879e0898ce851455d65dd3bcea534b5accc63722fb0503b06ccffaf01360bd1
2025-02-11 15:02:39.970 DEBUG [src.node.docker_mananger] Container started with ID f879e0898ce8. Setting up logs at ./log/docker/node2_2025-02-11_15-02-35__88607d25-40b3-4dad-8e1c-848aba098b6c__wakuorg_nwaku:latest.log
2025-02-11 15:02:39.971 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 12497
2025-02-11 15:02:39.971 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 15:02:40.972 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:12497/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:02:40.974 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 15:02:40.974 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 15:02:40.975 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:12497/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:02:40.977 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.56.217/tcp/12498/p2p/16Uiu2HAm7X8bCFD4nsE7gEd3Uy9EX9xz4cPXntsfKQLrBig7mRyj","/ip4/172.18.56.217/tcp/12499/ws/p2p/16Uiu2HAm7X8bCFD4nsE7gEd3Uy9EX9xz4cPXntsfKQLrBig7mRyj"],"enrUri":"enr:-L24QL6V5NcA-UX9J9nsr5U1OPUCWUwxH38dR7ir43t7RfXJKb1Va5nQYdscfhS0HW1FoSv3iS4qmTyk-pkqi4jWdpQCgmlkgnY0gmlwhKwSONmKbXVsdGlhZGRyc5YACASsEjjZBjDSAAoErBI42QYw090DgnJzhQADAQAAiXNlY3AyNTZrMaECs7I8UBxPW0608ME5WaX5FwyBniT6mAhYIFc0oh39lRqDdGNwgjDSg3VkcIIw1IV3YWt1Mgs"}'
2025-02-11 15:02:40.977 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 15:02:40.977 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 15:02:40.977 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 15:02:40.979 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 15:02:40.979 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.150.17
2025-02-11 15:02:40.979 DEBUG [src.node.docker_mananger] Generated ports ['31816', '31817', '31818', '31819', '31820']
2025-02-11 15:02:40.979 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 15:02:40.979 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 15:02:40.980 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 15:02:40.980 DEBUG [src.node.docker_mananger] docker run -i -t -p 31816:31816 -p 31817:31817 -p 31818:31818 -p 31819:31819 -p 31820:31820 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=31818 --rest-port=31816 --tcp-port=31817 --discv5-udp-port=31819 --rest-address=0.0.0.0 --nat=extip:172.18.150.17 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=102f34d9e1c63b0d48be74e2f8eefd4fa9b74b1e648edb4fee968f5ab43ea88d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=31820 --metrics-logging=true --relay=false --storenode=/ip4/172.18.56.217/tcp/12498/p2p/16Uiu2HAm7X8bCFD4nsE7gEd3Uy9EX9xz4cPXntsfKQLrBig7mRyj --discv5-bootstrap-node=enr:-L24QL6V5NcA-UX9J9nsr5U1OPUCWUwxH38dR7ir43t7RfXJKb1Va5nQYdscfhS0HW1FoSv3iS4qmTyk-pkqi4jWdpQCgmlkgnY0gmlwhKwSONmKbXVsdGlhZGRyc5YACASsEjjZBjDSAAoErBI42QYw090DgnJzhQADAQAAiXNlY3AyNTZrMaECs7I8UBxPW0608ME5WaX5FwyBniT6mAhYIFc0oh39lRqDdGNwgjDSg3VkcIIw1IV3YWt1Mgs
2025-02-11 15:02:41.224 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.150.17 waku a743887a66a1aaa0bb5758b977d8f8a2f5afe35d2bae0c24ba23167d7155f445
2025-02-11 15:02:41.273 DEBUG [src.node.docker_mananger] Container started with ID a743887a66a1. Setting up logs at ./log/docker/node3_2025-02-11_15-02-35__88607d25-40b3-4dad-8e1c-848aba098b6c__wakuorg_nwaku:latest.log
2025-02-11 15:02:41.274 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 31816
2025-02-11 15:02:41.274 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 15:02:42.274 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31816/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:02:42.277 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 15:02:42.277 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 15:02:42.278 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31816/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:02:42.280 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.150.17/tcp/31817/p2p/16Uiu2HAmKozraVjtSYig4EGLujj9y5R7iazmAmG8KwAAkBb5VgEz","/ip4/172.18.150.17/tcp/31818/ws/p2p/16Uiu2HAmKozraVjtSYig4EGLujj9y5R7iazmAmG8KwAAkBb5VgEz"],"enrUri":"enr:-L24QEFHBTlVouSNXaCy6o14OGQH5HJu_g_nsjTlwun6ymbUau56FH8UU5psOa51zkXCOWxwHAKMrPCDK02O240v6VYCgmlkgnY0gmlwhKwSlhGKbXVsdGlhZGRyc5YACASsEpYRBnxJAAoErBKWEQZ8St0DgnJzhQADAQAAiXNlY3AyNTZrMaEDalCbU2Si_DeNLn8DAMuBU-7pAKqMBdBdstXYH8JOAIeDdGNwgnxJg3VkcIJ8S4V3YWt1MgA"}'
2025-02-11 15:02:42.280 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 15:02:42.280 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47352/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 15:02:42.284 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:02:42.285 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:12497/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 15:02:42.291 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:02:42.292 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47352/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:02:42.295 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.56.217/tcp/12498/p2p/16Uiu2HAm7X8bCFD4nsE7gEd3Uy9EX9xz4cPXntsfKQLrBig7mRyj","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
2025-02-11 15:02:42.295 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:12497/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:02:42.297 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.158.30/tcp/47353/p2p/16Uiu2HAmSFzaAa7sjw6D6dVbAhesVcDvPjhSowmBFPEXUT4n5HEU","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
2025-02-11 15:02:42.297 DEBUG [src.libs.common] Sleeping for 30 seconds
2025-02-11 15:03:12.298 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47352/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1739286192298556928}}'
2025-02-11 15:03:12.311 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:03:12.311 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 15:03:13.312 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-11 15:03:13.312 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31816/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:03:13.357 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"add442b1a868363c2d8c","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x70b33d24d89b8e15efee884427b7649d4543c81eec83bb38fa5e770b17c72460"}]}'
2025-02-11 15:03:13.363 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 15:03:13.366 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 15:03:13.367 DEBUG [src.node.waku_node] Stopping container with id a0c8b210e31d
2025-02-11 15:03:14.460 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 15:03:14.461 DEBUG [src.node.waku_node] Stopping container with id f879e0898ce8
2025-02-11 15:03:15.275 ERROR [src.node.docker_mananger] Max retries reached for container a0c8b210e31d. Exiting log stream.
2025-02-11 15:03:15.775 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 15:03:15.776 DEBUG [src.node.waku_node] Stopping container with id a743887a66a1
2025-02-11 15:03:16.630 ERROR [src.node.docker_mananger] Max retries reached for container f879e0898ce8. Exiting log stream.
2025-02-11 15:03:17.160 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 15:03:17.162 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 15:03:17.171 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 15:03:17.195 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 15:03:17.200 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
