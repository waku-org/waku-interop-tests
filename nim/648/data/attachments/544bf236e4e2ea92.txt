2025-02-11 15:03:31.282 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 15:03:31.283 DEBUG [tests.conftest] Running test: test_store with id: 2025-02-11_15-03-31__b987848d-a7c2-4f2b-96d8-2df878f08a73
2025-02-11 15:03:31.283 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 15:03:31.283 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-11 15:03:31.284 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-11 15:03:31.284 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-11 15:03:31.284 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-11 15:03:31.293 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 15:03:31.293 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-11_15-03-31__b987848d-a7c2-4f2b-96d8-2df878f08a73__wakuorg_nwaku:latest.log
2025-02-11 15:03:31.293 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 15:03:31.293 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 15:03:31.355 DEBUG [src.node.docker_mananger] Network waku created
2025-02-11 15:03:31.355 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.240.116
2025-02-11 15:03:31.356 DEBUG [src.node.docker_mananger] Generated ports ['32980', '32981', '32982', '32983', '32984']
2025-02-11 15:03:31.356 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 15:03:31.356 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 15:03:31.356 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 15:03:31.356 DEBUG [src.node.docker_mananger] docker run -i -t -p 32980:32980 -p 32981:32981 -p 32982:32982 -p 32983:32983 -p 32984:32984 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32982 --rest-port=32980 --tcp-port=32981 --discv5-udp-port=32983 --rest-address=0.0.0.0 --nat=extip:172.18.240.116 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d7871ae8b76425c0371a86dcc12fc835de96ca9d9caa057b0240e1f0e0fb8ceb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32984 --metrics-logging=true --relay=true --store=true
2025-02-11 15:03:33.591 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.240.116 waku faa4a8ce8dd5554b87348fdaad7c8207925c78cf10951ce31c1126ce1bcf6d8d
2025-02-11 15:03:33.639 DEBUG [src.node.docker_mananger] Container started with ID faa4a8ce8dd5. Setting up logs at ./log/docker/node1_2025-02-11_15-03-31__b987848d-a7c2-4f2b-96d8-2df878f08a73__wakuorg_nwaku:latest.log
2025-02-11 15:03:33.639 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 32980
2025-02-11 15:03:33.639 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 15:03:34.640 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32980/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:03:34.643 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 15:03:34.643 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 15:03:34.643 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32980/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:03:34.645 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.240.116/tcp/32981/p2p/16Uiu2HAmTbWg5fpcdT5rWBWH2XP9oHXLrAtxBS2BtA7bj9vguoNK","/ip4/172.18.240.116/tcp/32982/ws/p2p/16Uiu2HAmTbWg5fpcdT5rWBWH2XP9oHXLrAtxBS2BtA7bj9vguoNK"],"enrUri":"enr:-L24QKQVbu9qBoo3w6KJ4wEEBzobXuBEZcx0xc-In99FwLCWXsRV0mtZ84pMThn2DnGJeqAK1Oz0CQwe9NtYT5UOIhQCgmlkgnY0gmlwhKwS8HSKbXVsdGlhZGRyc5YACASsEvB0BoDVAAoErBLwdAaA1t0DgnJzhQADAQAAiXNlY3AyNTZrMaED3ftEonusEaA4FhGZj9_LzM4c_d2zuIZ5gEjYdXbDTfyDdGNwgoDVg3VkcIKA14V3YWt1MgM"}'
2025-02-11 15:03:34.645 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 15:03:34.651 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 15:03:34.652 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-11_15-03-31__b987848d-a7c2-4f2b-96d8-2df878f08a73__wakuorg_nwaku:latest.log
2025-02-11 15:03:34.652 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 15:03:34.652 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 15:03:34.653 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 15:03:34.654 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.122.125
2025-02-11 15:03:34.654 DEBUG [src.node.docker_mananger] Generated ports ['54591', '54592', '54593', '54594', '54595']
2025-02-11 15:03:34.654 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 15:03:34.654 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 15:03:34.654 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 15:03:34.654 DEBUG [src.node.docker_mananger] docker run -i -t -p 54591:54591 -p 54592:54592 -p 54593:54593 -p 54594:54594 -p 54595:54595 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=54593 --rest-port=54591 --tcp-port=54592 --discv5-udp-port=54594 --rest-address=0.0.0.0 --nat=extip:172.18.122.125 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b6c952d48f5278ccb4bcdebff7c4c0d5fc20ea96c2adb9e1f9ac024e2aef0bac --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=54595 --metrics-logging=true --relay=true --store=true --discv5-bootstrap-node=enr:-L24QKQVbu9qBoo3w6KJ4wEEBzobXuBEZcx0xc-In99FwLCWXsRV0mtZ84pMThn2DnGJeqAK1Oz0CQwe9NtYT5UOIhQCgmlkgnY0gmlwhKwS8HSKbXVsdGlhZGRyc5YACASsEvB0BoDVAAoErBLwdAaA1t0DgnJzhQADAQAAiXNlY3AyNTZrMaED3ftEonusEaA4FhGZj9_LzM4c_d2zuIZ5gEjYdXbDTfyDdGNwgoDVg3VkcIKA14V3YWt1MgM --storenode=/ip4/172.18.240.116/tcp/32981/p2p/16Uiu2HAmTbWg5fpcdT5rWBWH2XP9oHXLrAtxBS2BtA7bj9vguoNK
2025-02-11 15:03:34.888 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.122.125 waku 0b607a9e76d6da395da42d69aec09c603c793a9ea5ea35b317f8ad6f49488918
2025-02-11 15:03:34.936 DEBUG [src.node.docker_mananger] Container started with ID 0b607a9e76d6. Setting up logs at ./log/docker/node1_2025-02-11_15-03-31__b987848d-a7c2-4f2b-96d8-2df878f08a73__wakuorg_nwaku:latest.log
2025-02-11 15:03:34.936 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 54591
2025-02-11 15:03:34.937 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 15:03:35.938 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54591/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:03:35.942 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 15:03:35.942 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 15:03:35.942 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54591/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:03:35.944 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.122.125/tcp/54592/p2p/16Uiu2HAm4UxnP7BmaMr8pMEKsW5v3YRBx6NwWPksi4UPR24iUfGN","/ip4/172.18.122.125/tcp/54593/ws/p2p/16Uiu2HAm4UxnP7BmaMr8pMEKsW5v3YRBx6NwWPksi4UPR24iUfGN"],"enrUri":"enr:-L24QM_ukMlwxWfzffnzNiJuxO2O_V_YXGX1fNfv_2HYWYhzHTJMgm_69DtA3Nla6ySlWbFL4U_sYYZddlbU32IVA40CgmlkgnY0gmlwhKwSen2KbXVsdGlhZGRyc5YACASsEnp9BtVAAAoErBJ6fQbVQd0DgnJzhQADAQAAiXNlY3AyNTZrMaEChpDsnDiAmWboiAPaPc5fpvdnxU3MLCqTrOuIjWO527uDdGNwgtVAg3VkcILVQoV3YWt1MgM"}'
2025-02-11 15:03:35.945 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 15:03:35.945 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32980/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 15:03:35.949 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:03:35.950 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54591/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 15:03:35.956 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:03:35.957 DEBUG [src.steps.store] Relaying message
2025-02-11 15:03:35.957 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32980/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 15:03:35.966 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:03:35.967 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 15:03:36.167 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-11 15:03:36.168 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54591/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:03:36.171 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xa8d6f98dc9979c55cd1a79d150efee3c53d617f97eada7fca6f00aab781c71eb"}]}'
2025-02-11 15:03:36.173 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 15:03:36.174 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 15:03:36.174 DEBUG [src.node.waku_node] Stopping container with id faa4a8ce8dd5
2025-02-11 15:03:37.350 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 15:03:37.350 DEBUG [src.node.waku_node] Stopping container with id 0b607a9e76d6
2025-02-11 15:03:38.162 ERROR [src.node.docker_mananger] Max retries reached for container faa4a8ce8dd5. Exiting log stream.
2025-02-11 15:03:38.826 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 15:03:38.827 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 15:03:38.834 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 15:03:38.840 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
