2025-02-11 15:03:24.500 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 15:03:24.500 DEBUG [tests.conftest] Running test: test_filter_ping_on_subscribed_peer with id: 2025-02-11_15-03-24__3ba6d5a7-7639-4192-ba70-b0efb69d826f
2025-02-11 15:03:24.500 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 15:03:24.500 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-11 15:03:24.501 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-11 15:03:24.507 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 15:03:24.507 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-11_15-03-24__3ba6d5a7-7639-4192-ba70-b0efb69d826f__wakuorg_nwaku:latest.log
2025-02-11 15:03:24.507 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 15:03:24.507 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 15:03:24.509 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 15:03:24.509 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.136.162
2025-02-11 15:03:24.509 DEBUG [src.node.docker_mananger] Generated ports ['55550', '55551', '55552', '55553', '55554']
2025-02-11 15:03:24.509 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 15:03:24.509 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 15:03:24.509 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 15:03:24.510 DEBUG [src.node.docker_mananger] docker run -i -t -p 55550:55550 -p 55551:55551 -p 55552:55552 -p 55553:55553 -p 55554:55554 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55552 --rest-port=55550 --tcp-port=55551 --discv5-udp-port=55553 --rest-address=0.0.0.0 --nat=extip:172.18.136.162 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e48db9ead4f378dd5cbf059c1ca0d89f3cc8cb36309e08c246acad4f7cbb4ec0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55554 --metrics-logging=true --relay=true --filter=true
2025-02-11 15:03:24.745 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.136.162 waku c986037a751e9ed6a10dd89b23be252c8a27d768c5b36208f3dc2b052afee0b2
2025-02-11 15:03:24.798 DEBUG [src.node.docker_mananger] Container started with ID c986037a751e. Setting up logs at ./log/docker/node1_2025-02-11_15-03-24__3ba6d5a7-7639-4192-ba70-b0efb69d826f__wakuorg_nwaku:latest.log
2025-02-11 15:03:24.799 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 55550
2025-02-11 15:03:24.799 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 15:03:25.268 ERROR [src.node.docker_mananger] Max retries reached for container cdb1207bd240. Exiting log stream.
2025-02-11 15:03:25.800 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:55550/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:03:25.803 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 15:03:25.804 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 15:03:25.804 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:55550/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:03:25.806 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.136.162/tcp/55551/p2p/16Uiu2HAmGeCZKcmuXarfMPnuCorznZpV6SYmtt1JPv6toNje9Q6m","/ip4/172.18.136.162/tcp/55552/ws/p2p/16Uiu2HAmGeCZKcmuXarfMPnuCorznZpV6SYmtt1JPv6toNje9Q6m"],"enrUri":"enr:-L24QCVSPJU1UWk3c9R8DDgUiCvOcXW53oCHbjwSCb1EZxutZpIkeR6QmmF3DjyDsSd-GAielPyb9h_4X-dQs7SkUvACgmlkgnY0gmlwhKwSiKKKbXVsdGlhZGRyc5YACASsEoiiBtj_AAoErBKIogbZAN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDOzr4S2bRtyPL965XWXerbtmM2KMA8LpA6hUOFdyfv5qDdGNwgtj_g3VkcILZAYV3YWt1MgU"}'
2025-02-11 15:03:25.806 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 15:03:25.807 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-11 15:03:25.813 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 15:03:25.813 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-11_15-03-24__3ba6d5a7-7639-4192-ba70-b0efb69d826f__wakuorg_nwaku:latest.log
2025-02-11 15:03:25.813 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 15:03:25.813 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 15:03:25.814 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 15:03:25.814 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.8.228
2025-02-11 15:03:25.815 DEBUG [src.node.docker_mananger] Generated ports ['35168', '35169', '35170', '35171', '35172']
2025-02-11 15:03:25.815 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 15:03:25.815 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 15:03:25.815 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 15:03:25.815 DEBUG [src.node.docker_mananger] docker run -i -t -p 35168:35168 -p 35169:35169 -p 35170:35170 -p 35171:35171 -p 35172:35172 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=35170 --rest-port=35168 --tcp-port=35169 --discv5-udp-port=35171 --rest-address=0.0.0.0 --nat=extip:172.18.8.228 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bbbbc3ba7a56d09a9ebdd1edf96ec13bc8fdb1e2c0882915896eaad216feebe5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=35172 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QCVSPJU1UWk3c9R8DDgUiCvOcXW53oCHbjwSCb1EZxutZpIkeR6QmmF3DjyDsSd-GAielPyb9h_4X-dQs7SkUvACgmlkgnY0gmlwhKwSiKKKbXVsdGlhZGRyc5YACASsEoiiBtj_AAoErBKIogbZAN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDOzr4S2bRtyPL965XWXerbtmM2KMA8LpA6hUOFdyfv5qDdGNwgtj_g3VkcILZAYV3YWt1MgU --filternode=/ip4/172.18.136.162/tcp/55551/p2p/16Uiu2HAmGeCZKcmuXarfMPnuCorznZpV6SYmtt1JPv6toNje9Q6m
2025-02-11 15:03:26.041 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.8.228 waku 833c0c023e7f61522edf1bf24a1b4d256f1312f83f9dc7ebda66e0e54ee84c85
2025-02-11 15:03:26.096 DEBUG [src.node.docker_mananger] Container started with ID 833c0c023e7f. Setting up logs at ./log/docker/node2_2025-02-11_15-03-24__3ba6d5a7-7639-4192-ba70-b0efb69d826f__wakuorg_nwaku:latest.log
2025-02-11 15:03:26.096 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 35168
2025-02-11 15:03:26.097 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 15:03:27.097 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35168/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:03:27.100 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 15:03:27.100 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 15:03:27.100 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35168/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:03:27.102 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.8.228/tcp/35169/p2p/16Uiu2HAm78zUfVNbLU7DjaZnBsexVhLqr13j8CV6iUmrZE2xBqzg","/ip4/172.18.8.228/tcp/35170/ws/p2p/16Uiu2HAm78zUfVNbLU7DjaZnBsexVhLqr13j8CV6iUmrZE2xBqzg"],"enrUri":"enr:-L24QHfXsxH5IyA3Qu19l2_Ks7rkIoBJRlDLe03C0jVLpa3ZNw_If1_1ylCWwbWdRm-jcLaAHHcpNlMXyV2PI8uR7XACgmlkgnY0gmlwhKwSCOSKbXVsdGlhZGRyc5YACASsEgjkBolhAAoErBII5AaJYt0DgnJzhQADAQAAiXNlY3AyNTZrMaECrgZI7La2wWN524dgYsahi75WWNjrDI4k9sDz1cG0e7GDdGNwgolhg3VkcIKJY4V3YWt1MgA"}'
2025-02-11 15:03:27.103 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 15:03:27.103 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35168/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.136.162/tcp/55551/p2p/16Uiu2HAmGeCZKcmuXarfMPnuCorznZpV6SYmtt1JPv6toNje9Q6m"]'
2025-02-11 15:03:27.143 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:03:27.144 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-11 15:03:27.144 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55550/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 15:03:27.159 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:03:27.161 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35168/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "e9198f7b-50be-46e9-91b4-72492d217fce", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-11 15:03:27.172 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"e9198f7b-50be-46e9-91b4-72492d217fce","statusDesc":"OK"}'
2025-02-11 15:03:27.173 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35168/filter/v2/subscriptions/12157526-ddfe-47c0-9f2b-4cbf4b26163e" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:03:27.180 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"12157526-ddfe-47c0-9f2b-4cbf4b26163e","statusDesc":"OK"}'
2025-02-11 15:03:27.182 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 15:03:27.182 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 15:03:27.183 DEBUG [src.node.waku_node] Stopping container with id c986037a751e
2025-02-11 15:03:28.272 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 15:03:28.272 DEBUG [src.node.waku_node] Stopping container with id 833c0c023e7f
2025-02-11 15:03:29.098 ERROR [src.node.docker_mananger] Max retries reached for container c986037a751e. Exiting log stream.
2025-02-11 15:03:29.762 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 15:03:29.765 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 15:03:29.773 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 15:03:29.777 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
