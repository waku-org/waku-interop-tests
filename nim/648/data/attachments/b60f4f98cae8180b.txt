2025-02-11 15:04:43.366 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 15:04:43.366 DEBUG [tests.conftest] Running test: test_light_push_with_missing_content_topic with id: 2025-02-11_15-04-43__e798fccd-bd75-44a1-85be-05f3ccaf3be7
2025-02-11 15:04:43.366 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 15:04:43.367 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-11 15:04:43.373 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 15:04:43.373 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-11_15-04-43__e798fccd-bd75-44a1-85be-05f3ccaf3be7__wakuorg_nwaku:latest.log
2025-02-11 15:04:43.373 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 15:04:43.373 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 15:04:43.374 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 15:04:43.374 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.47.95
2025-02-11 15:04:43.375 DEBUG [src.node.docker_mananger] Generated ports ['29084', '29085', '29086', '29087', '29088']
2025-02-11 15:04:43.375 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 15:04:43.375 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 15:04:43.375 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 15:04:43.375 DEBUG [src.node.docker_mananger] docker run -i -t -p 29084:29084 -p 29085:29085 -p 29086:29086 -p 29087:29087 -p 29088:29088 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29086 --rest-port=29084 --tcp-port=29085 --discv5-udp-port=29087 --rest-address=0.0.0.0 --nat=extip:172.18.47.95 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d1bcdcf6ceaf10d29c0adceb0c50ac7f66b9a5a0cdfe1c9ecff60a7399fa422c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29088 --metrics-logging=true --lightpush=true --relay=true
2025-02-11 15:04:43.601 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.47.95 waku dc798760951297e6ae5212888f488fdb30c55b8a0fde886e8562e39b3efffe4e
2025-02-11 15:04:43.651 DEBUG [src.node.docker_mananger] Container started with ID dc7987609512. Setting up logs at ./log/docker/receiving_node1_2025-02-11_15-04-43__e798fccd-bd75-44a1-85be-05f3ccaf3be7__wakuorg_nwaku:latest.log
2025-02-11 15:04:43.652 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 29084
2025-02-11 15:04:43.652 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 15:04:44.124 ERROR [src.node.docker_mananger] Max retries reached for container 4459cb4f2445. Exiting log stream.
2025-02-11 15:04:44.653 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29084/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:04:44.656 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 15:04:44.656 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 15:04:44.656 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29084/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:04:44.658 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.47.95/tcp/29085/p2p/16Uiu2HAkuqM3sVK4HVrjzWF1vptKBJg6NBcNX6tqh5Y4KyYauK9h","/ip4/172.18.47.95/tcp/29086/ws/p2p/16Uiu2HAkuqM3sVK4HVrjzWF1vptKBJg6NBcNX6tqh5Y4KyYauK9h"],"enrUri":"enr:-L24QLiZbOhL_PB2tzYnZFjeRiyHHOQvTaZHJNOB86QfZgs6CLml8tKDCBLzcjKReAtUpuB76vazxTdP2DXItbcOcqwCgmlkgnY0gmlwhKwSL1-KbXVsdGlhZGRyc5YACASsEi9fBnGdAAoErBIvXwZxnt0DgnJzhQADAQAAiXNlY3AyNTZrMaECBhCJGX6cZH13RwoLd6sM_Y4lZG3m_jr06YMVeLN8gBCDdGNwgnGdg3VkcIJxn4V3YWt1Mgk"}'
2025-02-11 15:04:44.658 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 15:04:44.665 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 15:04:44.665 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-11_15-04-43__e798fccd-bd75-44a1-85be-05f3ccaf3be7__wakuorg_nwaku:latest.log
2025-02-11 15:04:44.665 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 15:04:44.665 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 15:04:44.666 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 15:04:44.667 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.206.7
2025-02-11 15:04:44.667 DEBUG [src.node.docker_mananger] Generated ports ['45842', '45843', '45844', '45845', '45846']
2025-02-11 15:04:44.667 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 15:04:44.667 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 15:04:44.667 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 15:04:44.667 DEBUG [src.node.docker_mananger] docker run -i -t -p 45842:45842 -p 45843:45843 -p 45844:45844 -p 45845:45845 -p 45846:45846 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45844 --rest-port=45842 --tcp-port=45843 --discv5-udp-port=45845 --rest-address=0.0.0.0 --nat=extip:172.18.206.7 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5dea4cbc2adcfdfee50b7fb6eebe0da5c2ff57a5f4cbc9c5faaee0ddfc5a02ed --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45846 --metrics-logging=true --lightpush=false --relay=true
2025-02-11 15:04:44.905 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.206.7 waku f4a79253fb9b608a05eb688c748490bda6e9e7db5aa4af693bf02b49d94c7644
2025-02-11 15:04:44.953 DEBUG [src.node.docker_mananger] Container started with ID f4a79253fb9b. Setting up logs at ./log/docker/receiving_node2_2025-02-11_15-04-43__e798fccd-bd75-44a1-85be-05f3ccaf3be7__wakuorg_nwaku:latest.log
2025-02-11 15:04:44.953 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 45842
2025-02-11 15:04:44.953 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 15:04:45.954 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45842/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:04:45.957 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 15:04:45.958 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 15:04:45.958 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45842/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:04:45.960 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.206.7/tcp/45843/p2p/16Uiu2HAmPfRhPsHa282rjpRgVy6sE2YGufrWNEVP3no94GBwx4oK","/ip4/172.18.206.7/tcp/45844/ws/p2p/16Uiu2HAmPfRhPsHa282rjpRgVy6sE2YGufrWNEVP3no94GBwx4oK"],"enrUri":"enr:-L24QJJ8VsfByWTzOvQEBChjbmVwoi6xInPfVq4AkAZ5nBzZcnsVJQdcT0cI60FE5BVa-4rhEqds7tyqcWz1RtU7neQCgmlkgnY0gmlwhKwSzgeKbXVsdGlhZGRyc5YACASsEs4HBrMTAAoErBLOBwazFN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDo403Of3S6TEo54c-wkV9FFiIkvWhuo46mRi8D_opf2KDdGNwgrMTg3VkcIKzFYV3YWt1MgE"}'
2025-02-11 15:04:45.960 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 15:04:45.960 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:45842/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.47.95/tcp/29085/p2p/16Uiu2HAkuqM3sVK4HVrjzWF1vptKBJg6NBcNX6tqh5Y4KyYauK9h"]'
2025-02-11 15:04:45.997 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:04:46.005 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 15:04:46.005 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-11_15-04-43__e798fccd-bd75-44a1-85be-05f3ccaf3be7__wakuorg_nwaku:latest.log
2025-02-11 15:04:46.005 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 15:04:46.006 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 15:04:46.007 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 15:04:46.007 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.87.94
2025-02-11 15:04:46.007 DEBUG [src.node.docker_mananger] Generated ports ['62137', '62138', '62139', '62140', '62141']
2025-02-11 15:04:46.007 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 15:04:46.008 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 15:04:46.008 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 15:04:46.008 DEBUG [src.node.docker_mananger] docker run -i -t -p 62137:62137 -p 62138:62138 -p 62139:62139 -p 62140:62140 -p 62141:62141 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62139 --rest-port=62137 --tcp-port=62138 --discv5-udp-port=62140 --rest-address=0.0.0.0 --nat=extip:172.18.87.94 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8bbcac1a4fceddbf1b94b5a70c1f2f29fd07cb5cecbf2f444c0b1b0767aa9cef --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62141 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QLiZbOhL_PB2tzYnZFjeRiyHHOQvTaZHJNOB86QfZgs6CLml8tKDCBLzcjKReAtUpuB76vazxTdP2DXItbcOcqwCgmlkgnY0gmlwhKwSL1-KbXVsdGlhZGRyc5YACASsEi9fBnGdAAoErBIvXwZxnt0DgnJzhQADAQAAiXNlY3AyNTZrMaECBhCJGX6cZH13RwoLd6sM_Y4lZG3m_jr06YMVeLN8gBCDdGNwgnGdg3VkcIJxn4V3YWt1Mgk --lightpushnode=/ip4/172.18.47.95/tcp/29085/p2p/16Uiu2HAkuqM3sVK4HVrjzWF1vptKBJg6NBcNX6tqh5Y4KyYauK9h --lightpush=true --relay=false
2025-02-11 15:04:46.246 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.87.94 waku e48d0a05e67bd3579d08869e98b9c182a6a53e2dd45b203c8d75ac6b254ad61e
2025-02-11 15:04:46.298 DEBUG [src.node.docker_mananger] Container started with ID e48d0a05e67b. Setting up logs at ./log/docker/lightpush_node1_2025-02-11_15-04-43__e798fccd-bd75-44a1-85be-05f3ccaf3be7__wakuorg_nwaku:latest.log
2025-02-11 15:04:46.298 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 62137
2025-02-11 15:04:46.299 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 15:04:47.299 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62137/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:04:47.303 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 15:04:47.303 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 15:04:47.303 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62137/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:04:47.305 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.87.94/tcp/62138/p2p/16Uiu2HAmRQD2aMVAr7BFQeTWoAPL28e89m7S7WsVGbcgp7C7YhTZ","/ip4/172.18.87.94/tcp/62139/ws/p2p/16Uiu2HAmRQD2aMVAr7BFQeTWoAPL28e89m7S7WsVGbcgp7C7YhTZ"],"enrUri":"enr:-L24QKN1MSYo16_OOKZXjS8wB2bqcAvFkn_ON33VwkiFXc_xb5E3gVkKKrPtwOQrGdJpymrHScDTVI-hXiNZnzbfFkMCgmlkgnY0gmlwhKwSV16KbXVsdGlhZGRyc5YACASsEldeBvK6AAoErBJXXgbyu90DgnJzhQADAQAAiXNlY3AyNTZrMaEDvV6NXqyY1mvK1d0KYwxbUNhPmiWMpOHeuRm1BzqwgryDdGNwgvK6g3VkcILyvIV3YWt1Mgg"}'
2025-02-11 15:04:47.305 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 15:04:47.305 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62137/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.47.95/tcp/29085/p2p/16Uiu2HAkuqM3sVK4HVrjzWF1vptKBJg6NBcNX6tqh5Y4KyYauK9h"]'
2025-02-11 15:04:47.342 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:04:47.343 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62137/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.206.7/tcp/45843/p2p/16Uiu2HAmPfRhPsHa282rjpRgVy6sE2YGufrWNEVP3no94GBwx4oK"]'
2025-02-11 15:04:47.372 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:04:47.373 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29084/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 15:04:47.378 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:04:47.379 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:45842/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 15:04:47.384 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:04:47.387 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62137/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "timestamp": 1739286287387361280}}'
2025-02-11 15:04:47.392 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:62137/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
2025-02-11 15:04:47.396 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 15:04:47.397 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 15:04:47.397 DEBUG [src.node.waku_node] Stopping container with id dc7987609512
2025-02-11 15:04:48.136 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 15:04:48.137 DEBUG [src.node.waku_node] Stopping container with id f4a79253fb9b
2025-02-11 15:04:48.948 ERROR [src.node.docker_mananger] Max retries reached for container dc7987609512. Exiting log stream.
2025-02-11 15:04:49.625 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 15:04:49.627 DEBUG [src.node.waku_node] Stopping container with id e48d0a05e67b
2025-02-11 15:04:50.459 ERROR [src.node.docker_mananger] Max retries reached for container f4a79253fb9b. Exiting log stream.
2025-02-11 15:04:51.123 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 15:04:51.124 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 15:04:51.132 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 15:04:51.145 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 15:04:51.152 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
