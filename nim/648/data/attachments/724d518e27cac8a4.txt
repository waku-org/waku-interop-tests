2025-02-11 15:06:04.971 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 15:06:04.971 DEBUG [tests.conftest] Running test: test_filter_ping_on_unsubscribed_peer with id: 2025-02-11_15-06-04__d2d0fd7f-8906-4214-8f91-841eedabab01
2025-02-11 15:06:04.971 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 15:06:04.972 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-11 15:06:04.972 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-11 15:06:04.981 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 15:06:04.982 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-11_15-06-04__d2d0fd7f-8906-4214-8f91-841eedabab01__wakuorg_nwaku:latest.log
2025-02-11 15:06:04.982 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 15:06:04.982 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 15:06:04.984 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 15:06:04.984 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.165.125
2025-02-11 15:06:04.985 DEBUG [src.node.docker_mananger] Generated ports ['38588', '38589', '38590', '38591', '38592']
2025-02-11 15:06:04.985 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 15:06:04.985 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 15:06:04.986 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 15:06:04.987 DEBUG [src.node.docker_mananger] docker run -i -t -p 38588:38588 -p 38589:38589 -p 38590:38590 -p 38591:38591 -p 38592:38592 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=38590 --rest-port=38588 --tcp-port=38589 --discv5-udp-port=38591 --rest-address=0.0.0.0 --nat=extip:172.18.165.125 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ed5c938c5bcbfb9fe4dc8b2d3d86f1aefce50babc8f6ccbadafd2be0ea01e3cf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=38592 --metrics-logging=true --relay=true --filter=true
2025-02-11 15:06:05.220 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.165.125 waku 781888e87336673252936982939cc584682ffef40aefc0b2058841a5ff78bdd5
2025-02-11 15:06:05.272 DEBUG [src.node.docker_mananger] Container started with ID 781888e87336. Setting up logs at ./log/docker/node1_2025-02-11_15-06-04__d2d0fd7f-8906-4214-8f91-841eedabab01__wakuorg_nwaku:latest.log
2025-02-11 15:06:05.274 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 38588
2025-02-11 15:06:05.274 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 15:06:05.813 ERROR [src.node.docker_mananger] Max retries reached for container 49dd90193cb3. Exiting log stream.
2025-02-11 15:06:06.275 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38588/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:06:06.278 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 15:06:06.278 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 15:06:06.278 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38588/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:06:06.280 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.165.125/tcp/38589/p2p/16Uiu2HAkxhLhik7kuznzewdJcTSF3Fch3A4rbPNJ7PJLy5UcyCe2","/ip4/172.18.165.125/tcp/38590/ws/p2p/16Uiu2HAkxhLhik7kuznzewdJcTSF3Fch3A4rbPNJ7PJLy5UcyCe2"],"enrUri":"enr:-L24QGBg2LW92Kb4sPiazNWTEx0F5usshcNLn8OBf_QgOcrLdSSuJVAIZE6i_Nfh4BURpX71gtOw15yI1XuVbhlYcbsCgmlkgnY0gmlwhKwSpX2KbXVsdGlhZGRyc5YACASsEqV9Bpa9AAoErBKlfQaWvt0DgnJzhQADAQAAiXNlY3AyNTZrMaECMJaOmIM5mbEyplpSqDGbzhMPJ5fvGi71IOTSFTogTL-DdGNwgpa9g3VkcIKWv4V3YWt1MgU"}'
2025-02-11 15:06:06.280 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 15:06:06.281 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-11 15:06:06.287 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 15:06:06.287 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-11_15-06-04__d2d0fd7f-8906-4214-8f91-841eedabab01__wakuorg_nwaku:latest.log
2025-02-11 15:06:06.288 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 15:06:06.288 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 15:06:06.289 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 15:06:06.289 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.49.153
2025-02-11 15:06:06.289 DEBUG [src.node.docker_mananger] Generated ports ['45402', '45403', '45404', '45405', '45406']
2025-02-11 15:06:06.290 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 15:06:06.290 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 15:06:06.290 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 15:06:06.290 DEBUG [src.node.docker_mananger] docker run -i -t -p 45402:45402 -p 45403:45403 -p 45404:45404 -p 45405:45405 -p 45406:45406 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45404 --rest-port=45402 --tcp-port=45403 --discv5-udp-port=45405 --rest-address=0.0.0.0 --nat=extip:172.18.49.153 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0edee3fdf58ec3ddd16abd9cae1df80a96b955dbc718b1efa8da26dca6bc1f1b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45406 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QGBg2LW92Kb4sPiazNWTEx0F5usshcNLn8OBf_QgOcrLdSSuJVAIZE6i_Nfh4BURpX71gtOw15yI1XuVbhlYcbsCgmlkgnY0gmlwhKwSpX2KbXVsdGlhZGRyc5YACASsEqV9Bpa9AAoErBKlfQaWvt0DgnJzhQADAQAAiXNlY3AyNTZrMaECMJaOmIM5mbEyplpSqDGbzhMPJ5fvGi71IOTSFTogTL-DdGNwgpa9g3VkcIKWv4V3YWt1MgU --filternode=/ip4/172.18.165.125/tcp/38589/p2p/16Uiu2HAkxhLhik7kuznzewdJcTSF3Fch3A4rbPNJ7PJLy5UcyCe2
2025-02-11 15:06:06.519 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.49.153 waku 989186c6df73cc978f1b091803a65254733607a06412030ad58702cf8a4f9a31
2025-02-11 15:06:06.571 DEBUG [src.node.docker_mananger] Container started with ID 989186c6df73. Setting up logs at ./log/docker/node2_2025-02-11_15-06-04__d2d0fd7f-8906-4214-8f91-841eedabab01__wakuorg_nwaku:latest.log
2025-02-11 15:06:06.571 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 45402
2025-02-11 15:06:06.571 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 15:06:07.572 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45402/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:06:07.575 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 15:06:07.575 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 15:06:07.575 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45402/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:06:07.577 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.49.153/tcp/45403/p2p/16Uiu2HAm91TjgFXeDjJdRRZQoyrnjVodtMSJRagLTrmY2XmozaPp","/ip4/172.18.49.153/tcp/45404/ws/p2p/16Uiu2HAm91TjgFXeDjJdRRZQoyrnjVodtMSJRagLTrmY2XmozaPp"],"enrUri":"enr:-L24QN9OhbR5q8eb7enqXMIwD94tLWNDzX2o98QQeQ7jxkt8O4RDCIZn9oESr7BwYeP_vgpEdwFAAPTMlM_1LF4PZIgCgmlkgnY0gmlwhKwSMZmKbXVsdGlhZGRyc5YACASsEjGZBrFbAAoErBIxmQaxXN0DgnJzhQADAQAAiXNlY3AyNTZrMaECyc_Ve7ENd6KcXs65fUEZ5w9coVcBb5Z5_DsroBimmxeDdGNwgrFbg3VkcIKxXYV3YWt1MgA"}'
2025-02-11 15:06:07.578 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 15:06:07.578 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:45402/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.165.125/tcp/38589/p2p/16Uiu2HAkxhLhik7kuznzewdJcTSF3Fch3A4rbPNJ7PJLy5UcyCe2"]'
2025-02-11 15:06:07.615 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:06:07.616 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-11 15:06:07.617 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:38588/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 15:06:07.636 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:06:07.637 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:45402/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "792ad389-e4e5-4a50-8927-7ea4afb4de8d", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-11 15:06:07.648 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"792ad389-e4e5-4a50-8927-7ea4afb4de8d","statusDesc":"OK"}'
2025-02-11 15:06:07.649 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45402/filter/v2/subscriptions/81917c41-3b62-4f4d-9e7d-04ce0d154b07" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:06:07.656 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"81917c41-3b62-4f4d-9e7d-04ce0d154b07","statusDesc":"OK"}'
2025-02-11 15:06:07.657 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:45402/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "12345", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-11 15:06:07.665 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"12345","statusDesc":"OK"}'
2025-02-11 15:06:07.665 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45402/filter/v2/subscriptions/6b89fec2-3b22-4df5-bae9-e94884de83e3" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:06:07.672 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:45402/filter/v2/subscriptions/6b89fec2-3b22-4df5-bae9-e94884de83e3. Response content: b'{"requestId":"6b89fec2-3b22-4df5-bae9-e94884de83e3","statusDesc":"NOT_FOUND: peer has no subscriptions"}'
2025-02-11 15:06:07.675 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 15:06:07.677 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 15:06:07.677 DEBUG [src.node.waku_node] Stopping container with id 781888e87336
2025-02-11 15:06:08.757 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 15:06:08.758 DEBUG [src.node.waku_node] Stopping container with id 989186c6df73
2025-02-11 15:06:09.570 ERROR [src.node.docker_mananger] Max retries reached for container 781888e87336. Exiting log stream.
2025-02-11 15:06:10.306 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 15:06:10.308 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 15:06:10.313 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 15:06:10.318 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
