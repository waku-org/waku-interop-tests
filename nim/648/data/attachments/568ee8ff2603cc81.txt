2025-02-11 15:04:45.507 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 15:04:45.507 DEBUG [tests.conftest] Running test: test_single_content_topic[/statusim/1/community/cbor] with id: 2025-02-11_15-04-45__9b01d823-89bb-4cd5-bf1c-d16de6a4b06b
2025-02-11 15:04:45.508 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 15:04:45.508 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-11 15:04:45.508 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2025-02-11 15:04:45.515 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 15:04:45.515 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-11_15-04-45__9b01d823-89bb-4cd5-bf1c-d16de6a4b06b__wakuorg_nwaku:latest.log
2025-02-11 15:04:45.515 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 15:04:45.515 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 15:04:45.517 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 15:04:45.517 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.186.220
2025-02-11 15:04:45.517 DEBUG [src.node.docker_mananger] Generated ports ['30672', '30673', '30674', '30675', '30676']
2025-02-11 15:04:45.517 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 15:04:45.517 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 15:04:45.517 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 15:04:45.517 DEBUG [src.node.docker_mananger] docker run -i -t -p 30672:30672 -p 30673:30673 -p 30674:30674 -p 30675:30675 -p 30676:30676 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=30674 --rest-port=30672 --tcp-port=30673 --discv5-udp-port=30675 --rest-address=0.0.0.0 --nat=extip:172.18.186.220 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=2d33c3df33d61f8cf1dcead059bd9dbc02b08ea7ca93ae58fe141e7c180a01e9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=30676 --metrics-logging=true --relay=true --filter=true --content-topic=/statusim/1/community/cbor
2025-02-11 15:04:45.747 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.186.220 waku 3c01483e8e853ba85fa8fca6349e41f58d3c9fe9aca72a864e595a7668c43125
2025-02-11 15:04:45.791 DEBUG [src.node.docker_mananger] Container started with ID 3c01483e8e85. Setting up logs at ./log/docker/node1_2025-02-11_15-04-45__9b01d823-89bb-4cd5-bf1c-d16de6a4b06b__wakuorg_nwaku:latest.log
2025-02-11 15:04:45.792 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 30672
2025-02-11 15:04:45.792 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 15:04:46.300 ERROR [src.node.docker_mananger] Max retries reached for container fddc5aa37fb6. Exiting log stream.
2025-02-11 15:04:46.792 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30672/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:04:46.795 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 15:04:46.796 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 15:04:46.796 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30672/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:04:46.798 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.186.220/tcp/30673/p2p/16Uiu2HAm4HtAGpud1eT9grcRx9KhN2PdcEFB7UrRGDLxZVAtPtkD","/ip4/172.18.186.220/tcp/30674/ws/p2p/16Uiu2HAm4HtAGpud1eT9grcRx9KhN2PdcEFB7UrRGDLxZVAtPtkD"],"enrUri":"enr:-L24QOiAJir5L3Ow1fPNTLqlrO5F9s9F5vSrPPQPNVIwiLvZUCZA20iWgv8QMjtGWx-LlSjnoJXT02iEXgu7AFxb9rwCgmlkgnY0gmlwhKwSutyKbXVsdGlhZGRyc5YACASsErrcBnfRAAoErBK63AZ30t0DgnJzhQACAQAAiXNlY3AyNTZrMaECg7pPAY0KA6v8LHkoNxqYy1szBv8JoKbah2mJrnEwkDaDdGNwgnfRg3VkcIJ304V3YWt1MgU"}'
2025-02-11 15:04:46.798 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 15:04:46.805 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 15:04:46.805 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-11_15-04-45__9b01d823-89bb-4cd5-bf1c-d16de6a4b06b__wakuorg_nwaku:latest.log
2025-02-11 15:04:46.806 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 15:04:46.806 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 15:04:46.807 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 15:04:46.807 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.46.178
2025-02-11 15:04:46.807 DEBUG [src.node.docker_mananger] Generated ports ['64450', '64451', '64452', '64453', '64454']
2025-02-11 15:04:46.808 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 15:04:46.808 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 15:04:46.808 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 15:04:46.808 DEBUG [src.node.docker_mananger] docker run -i -t -p 64450:64450 -p 64451:64451 -p 64452:64452 -p 64453:64453 -p 64454:64454 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64452 --rest-port=64450 --tcp-port=64451 --discv5-udp-port=64453 --rest-address=0.0.0.0 --nat=extip:172.18.46.178 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=06e589b483dac740bc9aa5ce2cb54fa6ba0ffdbccf3e53c2bfb3f3b31ac8fb70 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64454 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QOiAJir5L3Ow1fPNTLqlrO5F9s9F5vSrPPQPNVIwiLvZUCZA20iWgv8QMjtGWx-LlSjnoJXT02iEXgu7AFxb9rwCgmlkgnY0gmlwhKwSutyKbXVsdGlhZGRyc5YACASsErrcBnfRAAoErBK63AZ30t0DgnJzhQACAQAAiXNlY3AyNTZrMaECg7pPAY0KA6v8LHkoNxqYy1szBv8JoKbah2mJrnEwkDaDdGNwgnfRg3VkcIJ304V3YWt1MgU --content-topic=/statusim/1/community/cbor
2025-02-11 15:04:47.038 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.46.178 waku 5df440b100599fd446511cf277c0c38a526d2e6bfa56329556865ead41565c27
2025-02-11 15:04:47.090 DEBUG [src.node.docker_mananger] Container started with ID 5df440b10059. Setting up logs at ./log/docker/node2_2025-02-11_15-04-45__9b01d823-89bb-4cd5-bf1c-d16de6a4b06b__wakuorg_nwaku:latest.log
2025-02-11 15:04:47.090 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 64450
2025-02-11 15:04:47.090 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 15:04:48.091 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64450/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:04:48.095 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 15:04:48.096 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 15:04:48.096 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64450/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:04:48.105 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.46.178/tcp/64451/p2p/16Uiu2HAmFw5ccZMMigUiNzLkxGW1N73be6LcMXx4k9Qr34wsddzv","/ip4/172.18.46.178/tcp/64452/ws/p2p/16Uiu2HAmFw5ccZMMigUiNzLkxGW1N73be6LcMXx4k9Qr34wsddzv"],"enrUri":"enr:-L24QAyGZpnMy5kc_uJ4SayABuI0mt09uwWazDpoDgKWk8use8TV6H7bsrl7KNlVYRIfbbMmXKv7_ZQCRd4mGCj-Xg8CgmlkgnY0gmlwhKwSLrKKbXVsdGlhZGRyc5YACASsEi6yBvvDAAoErBIusgb7xN0DgnJzhQACAQAAiXNlY3AyNTZrMaEDMLJOVNdq8MoUIcoYrzLE6zXzytseEZc-6ccvUve5p2-DdGNwgvvDg3VkcIL7xYV3YWt1MgE"}'
2025-02-11 15:04:48.106 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 15:04:48.106 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64450/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.186.220/tcp/30673/p2p/16Uiu2HAm4HtAGpud1eT9grcRx9KhN2PdcEFB7UrRGDLxZVAtPtkD"]'
2025-02-11 15:04:48.110 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:04:48.113 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30672/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/statusim/1/community/cbor"]'
2025-02-11 15:04:48.116 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:04:48.116 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64450/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/statusim/1/community/cbor"]'
2025-02-11 15:04:48.118 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:04:48.119 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30672/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2025-02-11 15:04:48.124 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:04:48.124 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 15:04:48.224 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-11 15:04:48.225 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30672/relay/v1/auto/messages/%2Fstatusim%2F1%2Fcommunity%2Fcbor" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:04:48.228 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/statusim/1/community/cbor","version":0,"timestamp":1739286288119421440,"ephemeral":false}]'
2025-02-11 15:04:48.229 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-11 15:04:48.230 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64450/relay/v1/auto/messages/%2Fstatusim%2F1%2Fcommunity%2Fcbor" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:04:48.232 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/statusim/1/community/cbor","version":0,"timestamp":1739286288119421440,"ephemeral":false}]'
2025-02-11 15:04:48.235 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 15:04:48.236 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 15:04:48.236 DEBUG [src.node.waku_node] Stopping container with id 3c01483e8e85
2025-02-11 15:04:49.268 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 15:04:49.270 DEBUG [src.node.waku_node] Stopping container with id 5df440b10059
2025-02-11 15:04:50.097 ERROR [src.node.docker_mananger] Max retries reached for container 3c01483e8e85. Exiting log stream.
2025-02-11 15:04:50.760 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 15:04:50.762 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 15:04:50.771 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 15:04:50.775 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
