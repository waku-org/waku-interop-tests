2025-02-11 15:06:51.926 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 15:06:51.926 DEBUG [tests.conftest] Running test: test_time_filter_invalid_start_time with id: 2025-02-11_15-06-51__7334d5a9-1186-475b-9805-5d63412eb5ba
2025-02-11 15:06:51.927 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 15:06:51.927 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-11 15:06:51.928 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-11 15:06:51.938 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 15:06:51.938 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-11_15-06-51__7334d5a9-1186-475b-9805-5d63412eb5ba__wakuorg_nwaku:latest.log
2025-02-11 15:06:51.938 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 15:06:51.939 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 15:06:51.942 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 15:06:51.943 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.251.171
2025-02-11 15:06:51.943 DEBUG [src.node.docker_mananger] Generated ports ['64799', '64800', '64801', '64802', '64803']
2025-02-11 15:06:51.944 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 15:06:51.944 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 15:06:51.944 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 15:06:51.944 DEBUG [src.node.docker_mananger] docker run -i -t -p 64799:64799 -p 64800:64800 -p 64801:64801 -p 64802:64802 -p 64803:64803 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64801 --rest-port=64799 --tcp-port=64800 --discv5-udp-port=64802 --rest-address=0.0.0.0 --nat=extip:172.18.251.171 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c2f7ca2e0bcbf9428d4e37c45e68dfce63ee169f0c4bbe860113b7617b70706a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64803 --metrics-logging=true --store=true --relay=true
2025-02-11 15:06:52.203 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.251.171 waku 9e007250be5b706667790eac291a175e18a41eaa20019981a31b3350d47b7a10
2025-02-11 15:06:52.255 DEBUG [src.node.docker_mananger] Container started with ID 9e007250be5b. Setting up logs at ./log/docker/publishing_node1_2025-02-11_15-06-51__7334d5a9-1186-475b-9805-5d63412eb5ba__wakuorg_nwaku:latest.log
2025-02-11 15:06:52.256 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 64799
2025-02-11 15:06:52.256 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 15:06:52.765 ERROR [src.node.docker_mananger] Max retries reached for container 2f8526700c61. Exiting log stream.
2025-02-11 15:06:53.256 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64799/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:06:53.259 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 15:06:53.259 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 15:06:53.259 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64799/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:06:53.262 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.251.171/tcp/64800/p2p/16Uiu2HAmUjkwRMxNTJfCQ1RHkpYzLDGShvL31y7dBxbJnTQ9Uggr","/ip4/172.18.251.171/tcp/64801/ws/p2p/16Uiu2HAmUjkwRMxNTJfCQ1RHkpYzLDGShvL31y7dBxbJnTQ9Uggr"],"enrUri":"enr:-L24QLpQkLH9X_NuJA49cQQVDMZbHjbMg1CiF0No-GcSNcQ5b-usOTL_z-Cm0dZzr6IhFVzQ3k8ZW0yH1hkmzQUAlT0CgmlkgnY0gmlwhKwS-6uKbXVsdGlhZGRyc5YACASsEvurBv0gAAoErBL7qwb9Id0DgnJzhQADAQAAiXNlY3AyNTZrMaED7vO6-znAnG_PoYMEVpDo34OU7s9F44vZcOK6Ru2aMZuDdGNwgv0gg3VkcIL9IoV3YWt1MgM"}'
2025-02-11 15:06:53.262 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 15:06:53.269 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 15:06:53.269 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-11_15-06-51__7334d5a9-1186-475b-9805-5d63412eb5ba__wakuorg_nwaku:latest.log
2025-02-11 15:06:53.269 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 15:06:53.269 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 15:06:53.271 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 15:06:53.271 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.173.82
2025-02-11 15:06:53.271 DEBUG [src.node.docker_mananger] Generated ports ['20194', '20195', '20196', '20197', '20198']
2025-02-11 15:06:53.271 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 15:06:53.271 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 15:06:53.271 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 15:06:53.271 DEBUG [src.node.docker_mananger] docker run -i -t -p 20194:20194 -p 20195:20195 -p 20196:20196 -p 20197:20197 -p 20198:20198 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20196 --rest-port=20194 --tcp-port=20195 --discv5-udp-port=20197 --rest-address=0.0.0.0 --nat=extip:172.18.173.82 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ceed8c4ffdef260f9378afee557c48c4ffaefafbb77e2dccd6e0227fccbda922 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20198 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QLpQkLH9X_NuJA49cQQVDMZbHjbMg1CiF0No-GcSNcQ5b-usOTL_z-Cm0dZzr6IhFVzQ3k8ZW0yH1hkmzQUAlT0CgmlkgnY0gmlwhKwS-6uKbXVsdGlhZGRyc5YACASsEvurBv0gAAoErBL7qwb9Id0DgnJzhQADAQAAiXNlY3AyNTZrMaED7vO6-znAnG_PoYMEVpDo34OU7s9F44vZcOK6Ru2aMZuDdGNwgv0gg3VkcIL9IoV3YWt1MgM --storenode=/ip4/172.18.251.171/tcp/64800/p2p/16Uiu2HAmUjkwRMxNTJfCQ1RHkpYzLDGShvL31y7dBxbJnTQ9Uggr --store=true --relay=true
2025-02-11 15:06:53.516 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.173.82 waku 218a387945f7c7ae37aacd6a7bae63f21b64e10f9f0153753cc3cc3269c36edf
2025-02-11 15:06:53.565 DEBUG [src.node.docker_mananger] Container started with ID 218a387945f7. Setting up logs at ./log/docker/store_node1_2025-02-11_15-06-51__7334d5a9-1186-475b-9805-5d63412eb5ba__wakuorg_nwaku:latest.log
2025-02-11 15:06:53.567 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 20194
2025-02-11 15:06:53.568 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 15:06:54.569 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20194/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:06:54.572 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 15:06:54.572 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 15:06:54.573 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20194/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:06:54.575 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.173.82/tcp/20195/p2p/16Uiu2HAm4RNYysGwBoemEXKudtQodrZGnyqBkFQURChc1w5BhAkR","/ip4/172.18.173.82/tcp/20196/ws/p2p/16Uiu2HAm4RNYysGwBoemEXKudtQodrZGnyqBkFQURChc1w5BhAkR"],"enrUri":"enr:-L24QKzM1i7BFZLpVoTMcTuFn-QDMxE-GwcFELDa-gpr2bC4NsGKcedfepiyglwxrEtQRD8u3GE8Y38hopPhvgSg5qgCgmlkgnY0gmlwhKwSrVKKbXVsdGlhZGRyc5YACASsEq1SBk7jAAoErBKtUgZO5N0DgnJzhQADAQAAiXNlY3AyNTZrMaEChaV6BqeFtmIY_hSGtedFvhezGdJbNki5pwtlgFPfL_qDdGNwgk7jg3VkcIJO5YV3YWt1MgM"}'
2025-02-11 15:06:54.575 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 15:06:54.576 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20194/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.251.171/tcp/64800/p2p/16Uiu2HAmUjkwRMxNTJfCQ1RHkpYzLDGShvL31y7dBxbJnTQ9Uggr"]'
2025-02-11 15:06:54.578 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:06:54.579 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64799/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 15:06:54.581 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:06:54.582 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20194/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 15:06:54.584 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:06:54.585 DEBUG [src.steps.store] Relaying message
2025-02-11 15:06:54.586 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64799/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 15:06:54.592 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:06:54.593 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 15:06:54.794 DEBUG [src.steps.store] Relaying message
2025-02-11 15:06:54.794 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64799/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 15:06:54.801 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:06:54.801 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 15:06:55.002 DEBUG [src.steps.store] Relaying message
2025-02-11 15:06:55.002 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64799/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 15:06:55.010 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:06:55.010 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 15:06:55.211 DEBUG [src.steps.store] Relaying message
2025-02-11 15:06:55.212 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64799/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 15:06:55.220 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:06:55.220 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 15:06:55.421 DEBUG [src.steps.store] Relaying message
2025-02-11 15:06:55.421 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64799/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 15:06:55.428 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:06:55.428 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 15:06:55.629 DEBUG [src.steps.store] Relaying message
2025-02-11 15:06:55.630 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64799/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 15:06:55.636 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:06:55.637 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 15:06:55.837 DEBUG [tests.store.test_time_filter] inquering stored messages with start time abc
2025-02-11 15:06:55.838 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64799/store/v3/messages?includeData=True&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=abc&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:06:55.841 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:64799/store/v3/messages?includeData=True&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=abc&pageSize=20&ascending=true. Response content: b'time parsing error: invalid integer: abc'
2025-02-11 15:06:55.842 DEBUG [tests.store.test_time_filter] invalid start_time cause error Error: 400 Client Error: Bad Request for url: http://127.0.0.1:64799/store/v3/messages?includeData=True&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=abc&pageSize=20&ascending=true with response: b'time parsing error: invalid integer: abc'
2025-02-11 15:06:55.843 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 15:06:55.845 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 15:06:55.845 DEBUG [src.node.waku_node] Stopping container with id 9e007250be5b
2025-02-11 15:06:56.795 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 15:06:56.796 DEBUG [src.node.waku_node] Stopping container with id 218a387945f7
2025-02-11 15:06:57.609 ERROR [src.node.docker_mananger] Max retries reached for container 9e007250be5b. Exiting log stream.
2025-02-11 15:06:58.358 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 15:06:58.359 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 15:06:58.368 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 15:06:58.374 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
