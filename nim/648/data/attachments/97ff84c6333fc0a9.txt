2025-02-11 15:10:05.958 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 15:10:05.959 DEBUG [tests.conftest] Running test: test_filter_subscribe_to_pubsub_topics_from_multiple_clusters with id: 2025-02-11_15-10-05__0c1911ab-bcc6-404a-a462-cb0ff1518add
2025-02-11 15:10:05.959 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 15:10:05.959 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-11 15:10:05.959 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-11 15:10:05.965 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 15:10:05.965 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-11_15-10-05__0c1911ab-bcc6-404a-a462-cb0ff1518add__wakuorg_nwaku:latest.log
2025-02-11 15:10:05.965 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 15:10:05.965 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 15:10:05.967 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 15:10:05.967 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.162.241
2025-02-11 15:10:05.967 DEBUG [src.node.docker_mananger] Generated ports ['34492', '34493', '34494', '34495', '34496']
2025-02-11 15:10:05.967 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 15:10:05.967 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 15:10:05.967 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 15:10:05.968 DEBUG [src.node.docker_mananger] docker run -i -t -p 34492:34492 -p 34493:34493 -p 34494:34494 -p 34495:34495 -p 34496:34496 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34494 --rest-port=34492 --tcp-port=34493 --discv5-udp-port=34495 --rest-address=0.0.0.0 --nat=extip:172.18.162.241 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=63b07a59c9fdf8e8f9cc12266352ddfb6bdcfb7b0da1d88ec04a6d85bcd33388 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34496 --metrics-logging=true --relay=true --filter=true
2025-02-11 15:10:06.192 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.162.241 waku c5687f25ddf118c18b5c80e28d7c1a3c60bbd25971e7fa69f6e48b0057ef800a
2025-02-11 15:10:06.242 DEBUG [src.node.docker_mananger] Container started with ID c5687f25ddf1. Setting up logs at ./log/docker/node1_2025-02-11_15-10-05__0c1911ab-bcc6-404a-a462-cb0ff1518add__wakuorg_nwaku:latest.log
2025-02-11 15:10:06.242 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 34492
2025-02-11 15:10:06.242 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 15:10:06.756 ERROR [src.node.docker_mananger] Max retries reached for container 78f5719bd5fb. Exiting log stream.
2025-02-11 15:10:07.243 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:34492/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:10:07.246 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 15:10:07.246 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 15:10:07.246 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:34492/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:10:07.248 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.162.241/tcp/34493/p2p/16Uiu2HAmPRiVJhEvskxDgDxR1HPJg2NjZ9vwLZCcqzk2jVmuqbjQ","/ip4/172.18.162.241/tcp/34494/ws/p2p/16Uiu2HAmPRiVJhEvskxDgDxR1HPJg2NjZ9vwLZCcqzk2jVmuqbjQ"],"enrUri":"enr:-L24QA2OKyGxlygxx6n-TTJrOHhtdoB-YmiEa6CmNHY0KTzAQuxsfS401wVl8zgTd3uU_s8xc7Lzt1pw8bvOIcASZ9ACgmlkgnY0gmlwhKwSovGKbXVsdGlhZGRyc5YACASsEqLxBoa9AAoErBKi8QaGvt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDoAoSGG_Jil04_Q-UvQOzaGjyAu8HXDjn-imvckar6aODdGNwgoa9g3VkcIKGv4V3YWt1MgU"}'
2025-02-11 15:10:07.249 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 15:10:07.249 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-11 15:10:07.255 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 15:10:07.255 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-11_15-10-05__0c1911ab-bcc6-404a-a462-cb0ff1518add__wakuorg_nwaku:latest.log
2025-02-11 15:10:07.255 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 15:10:07.255 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 15:10:07.257 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 15:10:07.257 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.215.185
2025-02-11 15:10:07.257 DEBUG [src.node.docker_mananger] Generated ports ['15691', '15692', '15693', '15694', '15695']
2025-02-11 15:10:07.257 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 15:10:07.257 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 15:10:07.257 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 15:10:07.257 DEBUG [src.node.docker_mananger] docker run -i -t -p 15691:15691 -p 15692:15692 -p 15693:15693 -p 15694:15694 -p 15695:15695 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15693 --rest-port=15691 --tcp-port=15692 --discv5-udp-port=15694 --rest-address=0.0.0.0 --nat=extip:172.18.215.185 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f9185affff8b7f0a8eb4126d8de42cbb5f83e5eeee6a6130feff3cf506a26dae --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15695 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QA2OKyGxlygxx6n-TTJrOHhtdoB-YmiEa6CmNHY0KTzAQuxsfS401wVl8zgTd3uU_s8xc7Lzt1pw8bvOIcASZ9ACgmlkgnY0gmlwhKwSovGKbXVsdGlhZGRyc5YACASsEqLxBoa9AAoErBKi8QaGvt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDoAoSGG_Jil04_Q-UvQOzaGjyAu8HXDjn-imvckar6aODdGNwgoa9g3VkcIKGv4V3YWt1MgU --filternode=/ip4/172.18.162.241/tcp/34493/p2p/16Uiu2HAmPRiVJhEvskxDgDxR1HPJg2NjZ9vwLZCcqzk2jVmuqbjQ
2025-02-11 15:10:07.485 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.215.185 waku 3043b46280b1698ec12519671e305c91dca89b4945515d38fcb24473fad26118
2025-02-11 15:10:07.530 DEBUG [src.node.docker_mananger] Container started with ID 3043b46280b1. Setting up logs at ./log/docker/node2_2025-02-11_15-10-05__0c1911ab-bcc6-404a-a462-cb0ff1518add__wakuorg_nwaku:latest.log
2025-02-11 15:10:07.530 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 15691
2025-02-11 15:10:07.531 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 15:10:08.532 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15691/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:10:08.535 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 15:10:08.535 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 15:10:08.535 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15691/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:10:08.537 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.215.185/tcp/15692/p2p/16Uiu2HAmM1J17XURvuFHGHZRtEcGKvcnKZ1ZqfaGvyhmdFkKr2Aq","/ip4/172.18.215.185/tcp/15693/ws/p2p/16Uiu2HAmM1J17XURvuFHGHZRtEcGKvcnKZ1ZqfaGvyhmdFkKr2Aq"],"enrUri":"enr:-L24QCOTsEMcwSVb7dGWhtJFvQYiTDei3mpqWc-_Gro3mKT-Q2DrAhkjR1HHBbBohkKetItwouDlRnAvWWRBanbqum0CgmlkgnY0gmlwhKwS17mKbXVsdGlhZGRyc5YACASsEte5Bj1MAAoErBLXuQY9Td0DgnJzhQADAQAAiXNlY3AyNTZrMaEDfBESJ6bDHkvd5Ch3TXNxf5fE6vH5Cb6FAnH_bwLhI4aDdGNwgj1Mg3VkcII9ToV3YWt1MgA"}'
2025-02-11 15:10:08.537 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 15:10:08.538 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15691/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.162.241/tcp/34493/p2p/16Uiu2HAmPRiVJhEvskxDgDxR1HPJg2NjZ9vwLZCcqzk2jVmuqbjQ"]'
2025-02-11 15:10:08.574 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:10:08.578 DEBUG [tests.filter.test_subscribe_create] Running test with pubsub topic: /waku/2/rs/3/1
2025-02-11 15:10:08.578 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34492/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 15:10:08.594 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:10:08.595 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15691/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "3b53c266-76b6-4a19-b34b-648dfa806337", "contentFilters": ["/waku/2/rs/3/1"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-11 15:10:08.607 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"3b53c266-76b6-4a19-b34b-648dfa806337","statusDesc":"OK"}'
2025-02-11 15:10:08.608 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34492/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/waku/2/rs/3/1", "timestamp": '$(date +%s%N)'}'
2025-02-11 15:10:08.616 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:10:08.616 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 15:10:08.716 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-11 15:10:08.717 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15691/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:10:08.719 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/waku/2/rs/3/1","version":0,"timestamp":1739286608608425472,"ephemeral":false}]'
2025-02-11 15:10:08.721 DEBUG [tests.filter.test_subscribe_create] Running test with pubsub topic: /waku/2/rs/2/2
2025-02-11 15:10:08.721 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34492/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/2"]'
2025-02-11 15:10:08.724 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:10:08.725 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15691/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "20469814-731e-49bc-85b8-c9c4ecc0aa2a", "contentFilters": ["/waku/2/rs/2/2"], "pubsubTopic": "/waku/2/rs/2/2"}'
2025-02-11 15:10:08.733 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"20469814-731e-49bc-85b8-c9c4ecc0aa2a","statusDesc":"OK"}'
2025-02-11 15:10:08.733 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34492/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/waku/2/rs/2/2", "timestamp": '$(date +%s%N)'}'
2025-02-11 15:10:08.737 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:10:08.738 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 15:10:08.838 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-11 15:10:08.838 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15691/filter/v2/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:10:08.841 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/waku/2/rs/2/2","version":0,"timestamp":1739286608733537792,"ephemeral":false}]'
2025-02-11 15:10:08.842 DEBUG [tests.filter.test_subscribe_create] Running test with pubsub topic: /waku/2/rs/3/9
2025-02-11 15:10:08.842 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34492/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/9"]'
2025-02-11 15:10:08.845 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:10:08.846 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15691/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "cf64ce3d-7dcf-4ba8-b2ed-4e8ed6630b85", "contentFilters": ["/waku/2/rs/3/9"], "pubsubTopic": "/waku/2/rs/3/9"}'
2025-02-11 15:10:08.854 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"cf64ce3d-7dcf-4ba8-b2ed-4e8ed6630b85","statusDesc":"OK"}'
2025-02-11 15:10:08.854 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34492/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F9" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/waku/2/rs/3/9", "timestamp": '$(date +%s%N)'}'
2025-02-11 15:10:08.859 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:10:08.859 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 15:10:08.959 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-11 15:10:08.960 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15691/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F9" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:10:08.962 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/waku/2/rs/3/9","version":0,"timestamp":1739286608854493696,"ephemeral":false}]'
2025-02-11 15:10:08.965 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 15:10:08.966 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 15:10:08.966 DEBUG [src.node.waku_node] Stopping container with id c5687f25ddf1
2025-02-11 15:10:09.823 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 15:10:09.823 DEBUG [src.node.waku_node] Stopping container with id 3043b46280b1
2025-02-11 15:10:10.635 ERROR [src.node.docker_mananger] Max retries reached for container c5687f25ddf1. Exiting log stream.
2025-02-11 15:10:11.331 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 15:10:11.332 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 15:10:11.339 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 15:10:11.345 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
