2025-02-11 15:04:07.056 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 15:04:07.056 DEBUG [tests.conftest] Running test: test_light_push_with_missing_payload with id: 2025-02-11_15-04-07__29022134-2f53-415d-ba9b-a765f579d06d
2025-02-11 15:04:07.057 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 15:04:07.057 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-11 15:04:07.067 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 15:04:07.067 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-11_15-04-07__29022134-2f53-415d-ba9b-a765f579d06d__wakuorg_nwaku:latest.log
2025-02-11 15:04:07.068 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 15:04:07.068 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 15:04:07.071 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 15:04:07.071 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.253.234
2025-02-11 15:04:07.071 DEBUG [src.node.docker_mananger] Generated ports ['61127', '61128', '61129', '61130', '61131']
2025-02-11 15:04:07.072 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 15:04:07.072 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 15:04:07.072 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 15:04:07.072 DEBUG [src.node.docker_mananger] docker run -i -t -p 61127:61127 -p 61128:61128 -p 61129:61129 -p 61130:61130 -p 61131:61131 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61129 --rest-port=61127 --tcp-port=61128 --discv5-udp-port=61130 --rest-address=0.0.0.0 --nat=extip:172.18.253.234 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b2fedbd46d5472dc0ffd4b70acc2098ff1ecf0193bceabc4aff6a71c1716e4d0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61131 --metrics-logging=true --lightpush=true --relay=true
2025-02-11 15:04:07.318 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.253.234 waku 5d1f49b57fc3d693cc3dbf30b8abb53768a84ad06d2ad5f1de24e039396dfdfd
2025-02-11 15:04:07.372 DEBUG [src.node.docker_mananger] Container started with ID 5d1f49b57fc3. Setting up logs at ./log/docker/receiving_node1_2025-02-11_15-04-07__29022134-2f53-415d-ba9b-a765f579d06d__wakuorg_nwaku:latest.log
2025-02-11 15:04:07.373 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 61127
2025-02-11 15:04:07.374 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 15:04:07.902 ERROR [src.node.docker_mananger] Max retries reached for container 32a1d27fc374. Exiting log stream.
2025-02-11 15:04:08.375 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61127/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:04:08.378 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 15:04:08.379 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 15:04:08.379 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61127/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:04:08.381 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.253.234/tcp/61128/p2p/16Uiu2HAkvgNNYE2gpz6HxzwALuxEXkt1PZGn2eEFbaADBgz9Ym4q","/ip4/172.18.253.234/tcp/61129/ws/p2p/16Uiu2HAkvgNNYE2gpz6HxzwALuxEXkt1PZGn2eEFbaADBgz9Ym4q"],"enrUri":"enr:-L24QFdSs08kwiL1Lce7yGX3ruYaXF_BuYDdFl-pqDrtqa12Ycs9AAcSlcH546ul1O6XvtukQOclMP7zG_6iZX2T6p0CgmlkgnY0gmlwhKwS_eqKbXVsdGlhZGRyc5YACASsEv3qBu7IAAoErBL96gbuyd0DgnJzhQADAQAAiXNlY3AyNTZrMaECEp99ZPNXcIcEJ_c_ypmhGwlwOYKTrP8E3yPLfEJ1bcaDdGNwgu7Ig3VkcILuyoV3YWt1Mgk"}'
2025-02-11 15:04:08.381 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 15:04:08.389 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 15:04:08.389 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-11_15-04-07__29022134-2f53-415d-ba9b-a765f579d06d__wakuorg_nwaku:latest.log
2025-02-11 15:04:08.389 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 15:04:08.389 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 15:04:08.391 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 15:04:08.391 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.230.166
2025-02-11 15:04:08.391 DEBUG [src.node.docker_mananger] Generated ports ['57130', '57131', '57132', '57133', '57134']
2025-02-11 15:04:08.392 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 15:04:08.392 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 15:04:08.392 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 15:04:08.392 DEBUG [src.node.docker_mananger] docker run -i -t -p 57130:57130 -p 57131:57131 -p 57132:57132 -p 57133:57133 -p 57134:57134 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57132 --rest-port=57130 --tcp-port=57131 --discv5-udp-port=57133 --rest-address=0.0.0.0 --nat=extip:172.18.230.166 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dd2cc42e69f4ca2401ca1fa5fc4ffe50cfad4b17e5b9ddfbc693f1deddcbc2f1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57134 --metrics-logging=true --lightpush=false --relay=true
2025-02-11 15:04:08.631 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.230.166 waku c5d45305dad99fcdddacba30c75bd4921f89914a94006caa7e62bb3e09429afd
2025-02-11 15:04:08.683 DEBUG [src.node.docker_mananger] Container started with ID c5d45305dad9. Setting up logs at ./log/docker/receiving_node2_2025-02-11_15-04-07__29022134-2f53-415d-ba9b-a765f579d06d__wakuorg_nwaku:latest.log
2025-02-11 15:04:08.683 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 57130
2025-02-11 15:04:08.684 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 15:04:09.685 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57130/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:04:09.688 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 15:04:09.688 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 15:04:09.688 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57130/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:04:09.690 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.230.166/tcp/57131/p2p/16Uiu2HAmGTLC2ZvHGYowhCd3CBki6D6D45LUepAW4HbpAuB5rGs9","/ip4/172.18.230.166/tcp/57132/ws/p2p/16Uiu2HAmGTLC2ZvHGYowhCd3CBki6D6D45LUepAW4HbpAuB5rGs9"],"enrUri":"enr:-L24QCLAyLaN8UGM0gQ-Gz3suIg5J4rF6tMtAvKX1KyE9FH4UdukMKPXaUscPzH-xomEKE73Z8GEdJYc-uel4qHby7ICgmlkgnY0gmlwhKwS5qaKbXVsdGlhZGRyc5YACASsEuamBt8rAAoErBLmpgbfLN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDOHI2JUbXKINhdGb4lTVTahtal9gUzg4QoXM8d1JJbSCDdGNwgt8rg3VkcILfLYV3YWt1MgE"}'
2025-02-11 15:04:09.690 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 15:04:09.691 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57130/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.253.234/tcp/61128/p2p/16Uiu2HAkvgNNYE2gpz6HxzwALuxEXkt1PZGn2eEFbaADBgz9Ym4q"]'
2025-02-11 15:04:09.731 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:04:09.743 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 15:04:09.743 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-11_15-04-07__29022134-2f53-415d-ba9b-a765f579d06d__wakuorg_nwaku:latest.log
2025-02-11 15:04:09.743 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 15:04:09.743 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 15:04:09.745 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 15:04:09.745 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.1.7
2025-02-11 15:04:09.745 DEBUG [src.node.docker_mananger] Generated ports ['11681', '11682', '11683', '11684', '11685']
2025-02-11 15:04:09.745 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 15:04:09.745 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 15:04:09.746 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 15:04:09.746 DEBUG [src.node.docker_mananger] docker run -i -t -p 11681:11681 -p 11682:11682 -p 11683:11683 -p 11684:11684 -p 11685:11685 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=11683 --rest-port=11681 --tcp-port=11682 --discv5-udp-port=11684 --rest-address=0.0.0.0 --nat=extip:172.18.1.7 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d0b9aac9044f9df65dad19c32af58d461fadb834ad9dec9d4785671ca1db8c11 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=11685 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QFdSs08kwiL1Lce7yGX3ruYaXF_BuYDdFl-pqDrtqa12Ycs9AAcSlcH546ul1O6XvtukQOclMP7zG_6iZX2T6p0CgmlkgnY0gmlwhKwS_eqKbXVsdGlhZGRyc5YACASsEv3qBu7IAAoErBL96gbuyd0DgnJzhQADAQAAiXNlY3AyNTZrMaECEp99ZPNXcIcEJ_c_ypmhGwlwOYKTrP8E3yPLfEJ1bcaDdGNwgu7Ig3VkcILuyoV3YWt1Mgk --lightpushnode=/ip4/172.18.253.234/tcp/61128/p2p/16Uiu2HAkvgNNYE2gpz6HxzwALuxEXkt1PZGn2eEFbaADBgz9Ym4q --lightpush=true --relay=false
2025-02-11 15:04:10.005 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.1.7 waku 700a3317b1170710f040248f9ef776a9d0aa1b97f3bad55b995a52a06bb1f5e9
2025-02-11 15:04:10.079 DEBUG [src.node.docker_mananger] Container started with ID 700a3317b117. Setting up logs at ./log/docker/lightpush_node1_2025-02-11_15-04-07__29022134-2f53-415d-ba9b-a765f579d06d__wakuorg_nwaku:latest.log
2025-02-11 15:04:10.080 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 11681
2025-02-11 15:04:10.080 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 15:04:11.080 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11681/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:04:11.084 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 15:04:11.084 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 15:04:11.085 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11681/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:04:11.087 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.1.7/tcp/11682/p2p/16Uiu2HAm1ffA2yezBWrnXFtbL8jV1WxKkb3zzDrWXnpZ6hdd6Ub8","/ip4/172.18.1.7/tcp/11683/ws/p2p/16Uiu2HAm1ffA2yezBWrnXFtbL8jV1WxKkb3zzDrWXnpZ6hdd6Ub8"],"enrUri":"enr:-L24QHMp5_2Z8eUaAoklkAs30bFKv-UymlCLOiMf1v8AKtATPT1HRoSqylnJRP7tPFMOGaMwL_yISRLCcgqhzHPdmhsCgmlkgnY0gmlwhKwSAQeKbXVsdGlhZGRyc5YACASsEgEHBi2iAAoErBIBBwYto90DgnJzhQADAQAAiXNlY3AyNTZrMaECXLtSY9sVigqrL8_In1oo-T2b_LP6rlMrRKmqNELZdo-DdGNwgi2ig3VkcIItpIV3YWt1Mgg"}'
2025-02-11 15:04:11.087 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 15:04:11.088 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11681/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.253.234/tcp/61128/p2p/16Uiu2HAkvgNNYE2gpz6HxzwALuxEXkt1PZGn2eEFbaADBgz9Ym4q"]'
2025-02-11 15:04:11.127 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:04:11.130 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11681/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.230.166/tcp/57131/p2p/16Uiu2HAmGTLC2ZvHGYowhCd3CBki6D6D45LUepAW4HbpAuB5rGs9"]'
2025-02-11 15:04:11.156 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:04:11.157 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61127/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 15:04:11.168 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:04:11.169 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57130/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 15:04:11.173 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:04:11.174 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11681/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"contentTopic": "/myapp/1/latest/proto", "timestamp": 1739286251174187264}}'
2025-02-11 15:04:11.176 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:11681/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
2025-02-11 15:04:11.178 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 15:04:11.179 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 15:04:11.179 DEBUG [src.node.waku_node] Stopping container with id 5d1f49b57fc3
2025-02-11 15:04:11.898 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 15:04:11.898 DEBUG [src.node.waku_node] Stopping container with id c5d45305dad9
2025-02-11 15:04:12.711 ERROR [src.node.docker_mananger] Max retries reached for container 5d1f49b57fc3. Exiting log stream.
2025-02-11 15:04:13.199 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 15:04:13.199 DEBUG [src.node.waku_node] Stopping container with id 700a3317b117
2025-02-11 15:04:14.012 ERROR [src.node.docker_mananger] Max retries reached for container c5d45305dad9. Exiting log stream.
2025-02-11 15:04:14.729 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 15:04:14.731 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 15:04:14.738 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 15:04:14.745 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 15:04:14.752 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
