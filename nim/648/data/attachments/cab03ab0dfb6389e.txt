[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_missing_payload with id: 2025-02-11_15-04-07__29022134-2f53-415d-ba9b-a765f579d06d
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-11_15-04-07__29022134-2f53-415d-ba9b-a765f579d06d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.253.234
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['61127', '61128', '61129', '61130', '61131']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 61127:61127 -p 61128:61128 -p 61129:61129 -p 61130:61130 -p 61131:61131 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61129 --rest-port=61127 --tcp-port=61128 --discv5-udp-port=61130 --rest-address=0.0.0.0 --nat=extip:172.18.253.234 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b2fedbd46d5472dc0ffd4b70acc2098ff1ecf0193bceabc4aff6a71c1716e4d0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61131 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.253.234 waku 5d1f49b57fc3d693cc3dbf30b8abb53768a84ad06d2ad5f1de24e039396dfdfd
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 5d1f49b57fc3. Setting up logs at ./log/docker/receiving_node1_2025-02-11_15-04-07__29022134-2f53-415d-ba9b-a765f579d06d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 61127
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 32a1d27fc374. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61127/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61127/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.253.234/tcp/61128/p2p/16Uiu2HAkvgNNYE2gpz6HxzwALuxEXkt1PZGn2eEFbaADBgz9Ym4q","/ip4/172.18.253.234/tcp/61129/ws/p2p/16Uiu2HAkvgNNYE2gpz6HxzwALuxEXkt1PZGn2eEFbaADBgz9Ym4q"],"enrUri":"enr:-L24QFdSs08kwiL1Lce7yGX3ruYaXF_BuYDdFl-pqDrtqa12Ycs9AAcSlcH546ul1O6XvtukQOclMP7zG_6iZX2T6p0CgmlkgnY0gmlwhKwS_eqKbXVsdGlhZGRyc5YACASsEv3qBu7IAAoErBL96gbuyd0DgnJzhQADAQAAiXNlY3AyNTZrMaECEp99ZPNXcIcEJ_c_ypmhGwlwOYKTrP8E3yPLfEJ1bcaDdGNwgu7Ig3VkcILuyoV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-11_15-04-07__29022134-2f53-415d-ba9b-a765f579d06d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.230.166
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['57130', '57131', '57132', '57133', '57134']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 57130:57130 -p 57131:57131 -p 57132:57132 -p 57133:57133 -p 57134:57134 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57132 --rest-port=57130 --tcp-port=57131 --discv5-udp-port=57133 --rest-address=0.0.0.0 --nat=extip:172.18.230.166 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dd2cc42e69f4ca2401ca1fa5fc4ffe50cfad4b17e5b9ddfbc693f1deddcbc2f1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57134 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.230.166 waku c5d45305dad99fcdddacba30c75bd4921f89914a94006caa7e62bb3e09429afd
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID c5d45305dad9. Setting up logs at ./log/docker/receiving_node2_2025-02-11_15-04-07__29022134-2f53-415d-ba9b-a765f579d06d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 57130
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57130/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57130/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.230.166/tcp/57131/p2p/16Uiu2HAmGTLC2ZvHGYowhCd3CBki6D6D45LUepAW4HbpAuB5rGs9","/ip4/172.18.230.166/tcp/57132/ws/p2p/16Uiu2HAmGTLC2ZvHGYowhCd3CBki6D6D45LUepAW4HbpAuB5rGs9"],"enrUri":"enr:-L24QCLAyLaN8UGM0gQ-Gz3suIg5J4rF6tMtAvKX1KyE9FH4UdukMKPXaUscPzH-xomEKE73Z8GEdJYc-uel4qHby7ICgmlkgnY0gmlwhKwS5qaKbXVsdGlhZGRyc5YACASsEuamBt8rAAoErBLmpgbfLN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDOHI2JUbXKINhdGb4lTVTahtal9gUzg4QoXM8d1JJbSCDdGNwgt8rg3VkcILfLYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57130/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.253.234/tcp/61128/p2p/16Uiu2HAkvgNNYE2gpz6HxzwALuxEXkt1PZGn2eEFbaADBgz9Ym4q"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-11_15-04-07__29022134-2f53-415d-ba9b-a765f579d06d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.1.7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['11681', '11682', '11683', '11684', '11685']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 11681:11681 -p 11682:11682 -p 11683:11683 -p 11684:11684 -p 11685:11685 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=11683 --rest-port=11681 --tcp-port=11682 --discv5-udp-port=11684 --rest-address=0.0.0.0 --nat=extip:172.18.1.7 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d0b9aac9044f9df65dad19c32af58d461fadb834ad9dec9d4785671ca1db8c11 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=11685 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QFdSs08kwiL1Lce7yGX3ruYaXF_BuYDdFl-pqDrtqa12Ycs9AAcSlcH546ul1O6XvtukQOclMP7zG_6iZX2T6p0CgmlkgnY0gmlwhKwS_eqKbXVsdGlhZGRyc5YACASsEv3qBu7IAAoErBL96gbuyd0DgnJzhQADAQAAiXNlY3AyNTZrMaECEp99ZPNXcIcEJ_c_ypmhGwlwOYKTrP8E3yPLfEJ1bcaDdGNwgu7Ig3VkcILuyoV3YWt1Mgk --lightpushnode=/ip4/172.18.253.234/tcp/61128/p2p/16Uiu2HAkvgNNYE2gpz6HxzwALuxEXkt1PZGn2eEFbaADBgz9Ym4q --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.1.7 waku 700a3317b1170710f040248f9ef776a9d0aa1b97f3bad55b995a52a06bb1f5e9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 700a3317b117. Setting up logs at ./log/docker/lightpush_node1_2025-02-11_15-04-07__29022134-2f53-415d-ba9b-a765f579d06d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 11681
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11681/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11681/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.1.7/tcp/11682/p2p/16Uiu2HAm1ffA2yezBWrnXFtbL8jV1WxKkb3zzDrWXnpZ6hdd6Ub8","/ip4/172.18.1.7/tcp/11683/ws/p2p/16Uiu2HAm1ffA2yezBWrnXFtbL8jV1WxKkb3zzDrWXnpZ6hdd6Ub8"],"enrUri":"enr:-L24QHMp5_2Z8eUaAoklkAs30bFKv-UymlCLOiMf1v8AKtATPT1HRoSqylnJRP7tPFMOGaMwL_yISRLCcgqhzHPdmhsCgmlkgnY0gmlwhKwSAQeKbXVsdGlhZGRyc5YACASsEgEHBi2iAAoErBIBBwYto90DgnJzhQADAQAAiXNlY3AyNTZrMaECXLtSY9sVigqrL8_In1oo-T2b_LP6rlMrRKmqNELZdo-DdGNwgi2ig3VkcIItpIV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11681/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.253.234/tcp/61128/p2p/16Uiu2HAkvgNNYE2gpz6HxzwALuxEXkt1PZGn2eEFbaADBgz9Ym4q"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11681/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.230.166/tcp/57131/p2p/16Uiu2HAmGTLC2ZvHGYowhCd3CBki6D6D45LUepAW4HbpAuB5rGs9"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61127/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57130/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11681/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"contentTopic": "/myapp/1/latest/proto", "timestamp": 1739286251174187264}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:11681/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 5d1f49b57fc3
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id c5d45305dad9
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 5d1f49b57fc3. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 700a3317b117
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container c5d45305dad9. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.