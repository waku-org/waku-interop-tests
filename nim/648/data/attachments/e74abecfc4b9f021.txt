2025-02-11 15:07:03.175 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 15:07:03.175 DEBUG [tests.conftest] Running test: test_light_push_with_invalid_version with id: 2025-02-11_15-07-03__30a54bce-fe26-42b9-bbf8-ca881737269b
2025-02-11 15:07:03.175 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 15:07:03.176 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-11 15:07:03.182 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 15:07:03.182 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-11_15-07-03__30a54bce-fe26-42b9-bbf8-ca881737269b__wakuorg_nwaku:latest.log
2025-02-11 15:07:03.182 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 15:07:03.182 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 15:07:03.184 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 15:07:03.184 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.53.254
2025-02-11 15:07:03.184 DEBUG [src.node.docker_mananger] Generated ports ['42906', '42907', '42908', '42909', '42910']
2025-02-11 15:07:03.184 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 15:07:03.184 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 15:07:03.184 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 15:07:03.184 DEBUG [src.node.docker_mananger] docker run -i -t -p 42906:42906 -p 42907:42907 -p 42908:42908 -p 42909:42909 -p 42910:42910 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42908 --rest-port=42906 --tcp-port=42907 --discv5-udp-port=42909 --rest-address=0.0.0.0 --nat=extip:172.18.53.254 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bf93549d3efd2c2cbb6ab7d8d892f0a10fbfa1db01c1dc17b2fa3ecbb3d7a6eb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42910 --metrics-logging=true --lightpush=true --relay=true
2025-02-11 15:07:03.430 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.53.254 waku c23c1521cf6e425865a403f648ed1d641a7eb40e5d1269dc0f2f99e3131f9888
2025-02-11 15:07:03.484 DEBUG [src.node.docker_mananger] Container started with ID c23c1521cf6e. Setting up logs at ./log/docker/receiving_node1_2025-02-11_15-07-03__30a54bce-fe26-42b9-bbf8-ca881737269b__wakuorg_nwaku:latest.log
2025-02-11 15:07:03.484 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 42906
2025-02-11 15:07:03.485 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 15:07:03.969 ERROR [src.node.docker_mananger] Max retries reached for container 1dc52a862ffe. Exiting log stream.
2025-02-11 15:07:04.485 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42906/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:07:04.488 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 15:07:04.489 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 15:07:04.489 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42906/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:07:04.491 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.53.254/tcp/42907/p2p/16Uiu2HAmF5zBucZSUbQzQvnvpYE222sZxe28Wamfr4m6NMSN7RMN","/ip4/172.18.53.254/tcp/42908/ws/p2p/16Uiu2HAmF5zBucZSUbQzQvnvpYE222sZxe28Wamfr4m6NMSN7RMN"],"enrUri":"enr:-L24QOh6-KnMG92igVO0Ok3xVMGxI8YNTU7MG5B5FXlxPW77BSrhd8o3lg0Kc6jsk9LyDvae28t8GCjd9_8UWn3IarACgmlkgnY0gmlwhKwSNf6KbXVsdGlhZGRyc5YACASsEjX-BqebAAoErBI1_gannN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDJB62D-A3CNb34lvsGjsASD4b3z6RC3_rdf9366DB1l2DdGNwgqebg3VkcIKnnYV3YWt1Mgk"}'
2025-02-11 15:07:04.491 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 15:07:04.498 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 15:07:04.498 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-11_15-07-03__30a54bce-fe26-42b9-bbf8-ca881737269b__wakuorg_nwaku:latest.log
2025-02-11 15:07:04.499 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 15:07:04.499 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 15:07:04.500 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 15:07:04.500 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.222.128
2025-02-11 15:07:04.500 DEBUG [src.node.docker_mananger] Generated ports ['65027', '65028', '65029', '65030', '65031']
2025-02-11 15:07:04.501 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 15:07:04.501 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 15:07:04.501 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 15:07:04.501 DEBUG [src.node.docker_mananger] docker run -i -t -p 65027:65027 -p 65028:65028 -p 65029:65029 -p 65030:65030 -p 65031:65031 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=65029 --rest-port=65027 --tcp-port=65028 --discv5-udp-port=65030 --rest-address=0.0.0.0 --nat=extip:172.18.222.128 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=18dfe1afd0e08ccc6e74a998c7fbabe36e1eaafa2f3dbcdbc7eb5fd33cd5da7b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=65031 --metrics-logging=true --lightpush=false --relay=true
2025-02-11 15:07:04.732 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.222.128 waku 1905840b920ed4ecc2610b3a757d6f9a0edf03cac74c16f84abaabac3cde172e
2025-02-11 15:07:04.784 DEBUG [src.node.docker_mananger] Container started with ID 1905840b920e. Setting up logs at ./log/docker/receiving_node2_2025-02-11_15-07-03__30a54bce-fe26-42b9-bbf8-ca881737269b__wakuorg_nwaku:latest.log
2025-02-11 15:07:04.784 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 65027
2025-02-11 15:07:04.784 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 15:07:05.785 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:65027/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:07:05.787 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 15:07:05.788 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 15:07:05.788 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:65027/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:07:05.790 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.222.128/tcp/65028/p2p/16Uiu2HAmF2gxaDdGrmdqAg7WfjZ6Zk5GuD5ZAoxpob8ikKn6nWRA","/ip4/172.18.222.128/tcp/65029/ws/p2p/16Uiu2HAmF2gxaDdGrmdqAg7WfjZ6Zk5GuD5ZAoxpob8ikKn6nWRA"],"enrUri":"enr:-L24QKwZNk87FDR1EBRkg8fQz_FVzsnaLphZZs52NmsKjDnHG-qVg7rEN33HxRDmYY4ksZXZzZtpBE3Dy8C0tRzTcVYCgmlkgnY0gmlwhKwS3oCKbXVsdGlhZGRyc5YACASsEt6ABv4EAAoErBLegAb-Bd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDI0Z8oXLc5pm482VqXoyg6da4ic_H_QGDOCVn3Bz2BQWDdGNwgv4Eg3VkcIL-BoV3YWt1MgE"}'
2025-02-11 15:07:05.790 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 15:07:05.790 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:65027/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.53.254/tcp/42907/p2p/16Uiu2HAmF5zBucZSUbQzQvnvpYE222sZxe28Wamfr4m6NMSN7RMN"]'
2025-02-11 15:07:05.829 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:07:05.839 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 15:07:05.839 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-11_15-07-03__30a54bce-fe26-42b9-bbf8-ca881737269b__wakuorg_nwaku:latest.log
2025-02-11 15:07:05.839 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 15:07:05.839 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 15:07:05.841 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 15:07:05.841 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.21.195
2025-02-11 15:07:05.841 DEBUG [src.node.docker_mananger] Generated ports ['6549', '6550', '6551', '6552', '6553']
2025-02-11 15:07:05.841 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 15:07:05.841 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 15:07:05.842 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 15:07:05.842 DEBUG [src.node.docker_mananger] docker run -i -t -p 6549:6549 -p 6550:6550 -p 6551:6551 -p 6552:6552 -p 6553:6553 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6551 --rest-port=6549 --tcp-port=6550 --discv5-udp-port=6552 --rest-address=0.0.0.0 --nat=extip:172.18.21.195 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fd117ad1fa8ce8b9dfb45b2cd91c22b8dedf55bc1c02fdbc93ecf54fc62c854e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6553 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QOh6-KnMG92igVO0Ok3xVMGxI8YNTU7MG5B5FXlxPW77BSrhd8o3lg0Kc6jsk9LyDvae28t8GCjd9_8UWn3IarACgmlkgnY0gmlwhKwSNf6KbXVsdGlhZGRyc5YACASsEjX-BqebAAoErBI1_gannN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDJB62D-A3CNb34lvsGjsASD4b3z6RC3_rdf9366DB1l2DdGNwgqebg3VkcIKnnYV3YWt1Mgk --lightpushnode=/ip4/172.18.53.254/tcp/42907/p2p/16Uiu2HAmF5zBucZSUbQzQvnvpYE222sZxe28Wamfr4m6NMSN7RMN --lightpush=true --relay=false
2025-02-11 15:07:06.079 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.21.195 waku fa54edf41910339dce4e83f2a40b522db0dc121ff7af5e153acdd8041dcd25f9
2025-02-11 15:07:06.130 DEBUG [src.node.docker_mananger] Container started with ID fa54edf41910. Setting up logs at ./log/docker/lightpush_node1_2025-02-11_15-07-03__30a54bce-fe26-42b9-bbf8-ca881737269b__wakuorg_nwaku:latest.log
2025-02-11 15:07:06.130 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 6549
2025-02-11 15:07:06.130 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 15:07:07.130 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6549/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:07:07.134 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 15:07:07.134 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 15:07:07.134 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6549/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:07:07.136 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.21.195/tcp/6550/p2p/16Uiu2HAmAySFgyxPtVrVYVWWDKFEt8mx479h4FSkLpLdnVeMUuKX","/ip4/172.18.21.195/tcp/6551/ws/p2p/16Uiu2HAmAySFgyxPtVrVYVWWDKFEt8mx479h4FSkLpLdnVeMUuKX"],"enrUri":"enr:-L24QDNkqKT_gX_tZXaazsjuv6U4HCyvhY4tn4PIWyVDBsXqXtGU7Qg3lDJOs_0hRO8FUApg8dTXDVNS0GBIc4empZUCgmlkgnY0gmlwhKwSFcOKbXVsdGlhZGRyc5YACASsEhXDBhmWAAoErBIVwwYZl90DgnJzhQADAQAAiXNlY3AyNTZrMaEC5wJerb0WyciJCk1qK56Ug-RRmdMHFuUeQ3btXl8_lJqDdGNwghmWg3VkcIIZmIV3YWt1Mgg"}'
2025-02-11 15:07:07.137 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 15:07:07.137 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6549/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.53.254/tcp/42907/p2p/16Uiu2HAmF5zBucZSUbQzQvnvpYE222sZxe28Wamfr4m6NMSN7RMN"]'
2025-02-11 15:07:07.173 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:07:07.173 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6549/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.222.128/tcp/65028/p2p/16Uiu2HAmF2gxaDdGrmdqAg7WfjZ6Zk5GuD5ZAoxpob8ikKn6nWRA"]'
2025-02-11 15:07:07.202 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:07:07.203 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42906/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 15:07:07.211 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:07:07.211 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:65027/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 15:07:07.223 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:07:07.225 DEBUG [src.steps.light_push] Lightpushing message
2025-02-11 15:07:07.225 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6549/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739286427224945408, "version": 2.1}}'
2025-02-11 15:07:07.228 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:6549/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
2025-02-11 15:07:07.230 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 15:07:07.231 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 15:07:07.231 DEBUG [src.node.waku_node] Stopping container with id c23c1521cf6e
2025-02-11 15:07:07.985 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 15:07:07.985 DEBUG [src.node.waku_node] Stopping container with id 1905840b920e
2025-02-11 15:07:08.798 ERROR [src.node.docker_mananger] Max retries reached for container c23c1521cf6e. Exiting log stream.
2025-02-11 15:07:09.498 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 15:07:09.499 DEBUG [src.node.waku_node] Stopping container with id fa54edf41910
2025-02-11 15:07:10.315 ERROR [src.node.docker_mananger] Max retries reached for container 1905840b920e. Exiting log stream.
2025-02-11 15:07:11.012 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 15:07:11.013 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 15:07:11.020 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 15:07:11.027 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 15:07:11.033 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
