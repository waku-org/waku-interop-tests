2025-02-11 15:05:38.655 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 15:05:38.655 DEBUG [tests.conftest] Running test: test_unsubscribe_from_non_subscribed_content_topics with id: 2025-02-11_15-05-38__6da7c94d-ce7f-4833-8314-3360e58873c1
2025-02-11 15:05:38.655 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 15:05:38.656 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-11 15:05:38.656 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2025-02-11 15:05:38.662 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 15:05:38.662 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-11_15-05-38__6da7c94d-ce7f-4833-8314-3360e58873c1__wakuorg_nwaku:latest.log
2025-02-11 15:05:38.662 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 15:05:38.663 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 15:05:38.664 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 15:05:38.664 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.172.30
2025-02-11 15:05:38.664 DEBUG [src.node.docker_mananger] Generated ports ['17814', '17815', '17816', '17817', '17818']
2025-02-11 15:05:38.664 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 15:05:38.664 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 15:05:38.665 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 15:05:38.665 DEBUG [src.node.docker_mananger] docker run -i -t -p 17814:17814 -p 17815:17815 -p 17816:17816 -p 17817:17817 -p 17818:17818 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17816 --rest-port=17814 --tcp-port=17815 --discv5-udp-port=17817 --rest-address=0.0.0.0 --nat=extip:172.18.172.30 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=42d91be0bf34dffae8bc2a99e1bfee81e1e3e875a06bef4d05f3b62f7effe727 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17818 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto
2025-02-11 15:05:38.909 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.172.30 waku ff08a1cec506382b56968a43ae78627f7f40f7cabbd629f28c90bddba40a1729
2025-02-11 15:05:38.960 DEBUG [src.node.docker_mananger] Container started with ID ff08a1cec506. Setting up logs at ./log/docker/node1_2025-02-11_15-05-38__6da7c94d-ce7f-4833-8314-3360e58873c1__wakuorg_nwaku:latest.log
2025-02-11 15:05:38.960 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 17814
2025-02-11 15:05:38.961 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 15:05:39.457 ERROR [src.node.docker_mananger] Max retries reached for container f215c3de79c5. Exiting log stream.
2025-02-11 15:05:39.961 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17814/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:05:39.964 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 15:05:39.964 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 15:05:39.964 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17814/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:05:39.966 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.172.30/tcp/17815/p2p/16Uiu2HAm9MrLAfDCepDNZH1topsPFSPSPb3aJSoCka67oSEc7yUs","/ip4/172.18.172.30/tcp/17816/ws/p2p/16Uiu2HAm9MrLAfDCepDNZH1topsPFSPSPb3aJSoCka67oSEc7yUs"],"enrUri":"enr:-L24QA5Xk-6tlLAcYGuHi7lWc0xLPw5BcMfY_76rzum8fhvSYp5rCwpW4ogMGgY-4NkB0cn9QRW9BCKEluqoXHaNbq4CgmlkgnY0gmlwhKwSrB6KbXVsdGlhZGRyc5YACASsEqweBkWXAAoErBKsHgZFmN0DgnJzhQACAQAAiXNlY3AyNTZrMaECzwj_ee4jQDQFlq2_KqXRL3s8Hpz1MRy_F8F6qdywuLCDdGNwgkWXg3VkcIJFmYV3YWt1MgU"}'
2025-02-11 15:05:39.967 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 15:05:39.973 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 15:05:39.973 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-11_15-05-38__6da7c94d-ce7f-4833-8314-3360e58873c1__wakuorg_nwaku:latest.log
2025-02-11 15:05:39.973 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 15:05:39.973 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 15:05:39.975 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 15:05:39.975 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.120.20
2025-02-11 15:05:39.975 DEBUG [src.node.docker_mananger] Generated ports ['12951', '12952', '12953', '12954', '12955']
2025-02-11 15:05:39.975 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 15:05:39.975 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 15:05:39.976 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 15:05:39.976 DEBUG [src.node.docker_mananger] docker run -i -t -p 12951:12951 -p 12952:12952 -p 12953:12953 -p 12954:12954 -p 12955:12955 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=12953 --rest-port=12951 --tcp-port=12952 --discv5-udp-port=12954 --rest-address=0.0.0.0 --nat=extip:172.18.120.20 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=eabdf1dca4f7db60dcfa51cc739f87d5da8d9ac7baf69ca598efbc7af97c2d9e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=12955 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QA5Xk-6tlLAcYGuHi7lWc0xLPw5BcMfY_76rzum8fhvSYp5rCwpW4ogMGgY-4NkB0cn9QRW9BCKEluqoXHaNbq4CgmlkgnY0gmlwhKwSrB6KbXVsdGlhZGRyc5YACASsEqweBkWXAAoErBKsHgZFmN0DgnJzhQACAQAAiXNlY3AyNTZrMaECzwj_ee4jQDQFlq2_KqXRL3s8Hpz1MRy_F8F6qdywuLCDdGNwgkWXg3VkcIJFmYV3YWt1MgU --content-topic=/myapp/1/latest/proto
2025-02-11 15:05:40.212 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.120.20 waku 9e574d6f73702bb486a23433eadffbbc22678f91eb0c6d866e618f2712483836
2025-02-11 15:05:40.263 DEBUG [src.node.docker_mananger] Container started with ID 9e574d6f7370. Setting up logs at ./log/docker/node2_2025-02-11_15-05-38__6da7c94d-ce7f-4833-8314-3360e58873c1__wakuorg_nwaku:latest.log
2025-02-11 15:05:40.263 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 12951
2025-02-11 15:05:40.264 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 15:05:41.264 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:12951/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:05:41.273 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 15:05:41.273 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 15:05:41.274 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:12951/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:05:41.280 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.120.20/tcp/12952/p2p/16Uiu2HAkucTL9RBSXFkDMzBfcnbxqYi8zGBR3YauqAivd3Kbr9ri","/ip4/172.18.120.20/tcp/12953/ws/p2p/16Uiu2HAkucTL9RBSXFkDMzBfcnbxqYi8zGBR3YauqAivd3Kbr9ri"],"enrUri":"enr:-L24QDi_a9CXiqWw8TWpKQB-IcccRZ_LVMa8LjV6vrZ0LG0LcHvAf-dNmoXMzoNY2v4dH1TEyKnP9ZSWivJxRp-apLACgmlkgnY0gmlwhKwSeBSKbXVsdGlhZGRyc5YACASsEngUBjKYAAoErBJ4FAYymd0DgnJzhQACAQAAiXNlY3AyNTZrMaECAsMWJj9rJMjoVEtQSrL2YTPI1NG8DUhvrQ4GU7qGIOuDdGNwgjKYg3VkcIIymoV3YWt1MgE"}'
2025-02-11 15:05:41.281 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 15:05:41.282 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:12951/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.172.30/tcp/17815/p2p/16Uiu2HAm9MrLAfDCepDNZH1topsPFSPSPb3aJSoCka67oSEc7yUs"]'
2025-02-11 15:05:41.285 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:05:41.286 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:17814/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto", "/waku/2/content/test.js", "/app/22/sometopic/someencoding", "/toychat/2/huilong/proto", "/statusim/1/community/cbor", "/app/27/sometopic/someencoding", "/app/29/sometopic/someencoding", "/app/20/sometopic/someencoding"]'
2025-02-11 15:05:41.292 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:05:41.292 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:12951/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto", "/waku/2/content/test.js", "/app/22/sometopic/someencoding", "/toychat/2/huilong/proto", "/statusim/1/community/cbor", "/app/27/sometopic/someencoding", "/app/29/sometopic/someencoding", "/app/20/sometopic/someencoding"]'
2025-02-11 15:05:41.298 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:05:41.299 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17814/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 15:05:41.301 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:05:41.301 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 15:05:41.401 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-11 15:05:41.402 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17814/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:05:41.404 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:17814/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto. Response content: b'/myapp/1/latest/proto'
2025-02-11 15:05:41.406 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17814/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2025-02-11 15:05:41.408 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:05:41.408 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 15:05:41.509 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-11 15:05:41.509 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17814/relay/v1/auto/messages/%2Fwaku%2F2%2Fcontent%2Ftest.js" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:05:41.511 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:17814/relay/v1/auto/messages/%2Fwaku%2F2%2Fcontent%2Ftest.js. Response content: b'/waku/2/content/test.js'
2025-02-11 15:05:41.513 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17814/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-11 15:05:41.515 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:05:41.515 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 15:05:41.615 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-11 15:05:41.616 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17814/relay/v1/auto/messages/%2Fapp%2F22%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:05:41.618 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:17814/relay/v1/auto/messages/%2Fapp%2F22%2Fsometopic%2Fsomeencoding. Response content: b'/app/22/sometopic/someencoding'
2025-02-11 15:05:41.620 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17814/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 15:05:41.622 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:05:41.622 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 15:05:41.723 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-11 15:05:41.723 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17814/relay/v1/auto/messages/%2Ftoychat%2F2%2Fhuilong%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:05:41.725 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:17814/relay/v1/auto/messages/%2Ftoychat%2F2%2Fhuilong%2Fproto. Response content: b'/toychat/2/huilong/proto'
2025-02-11 15:05:41.727 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17814/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2025-02-11 15:05:41.729 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:05:41.729 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 15:05:41.830 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-11 15:05:41.830 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17814/relay/v1/auto/messages/%2Fstatusim%2F1%2Fcommunity%2Fcbor" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:05:41.832 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:17814/relay/v1/auto/messages/%2Fstatusim%2F1%2Fcommunity%2Fcbor. Response content: b'/statusim/1/community/cbor'
2025-02-11 15:05:41.834 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17814/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-11 15:05:41.836 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:05:41.836 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 15:05:41.936 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-11 15:05:41.937 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17814/relay/v1/auto/messages/%2Fapp%2F27%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:05:41.939 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:17814/relay/v1/auto/messages/%2Fapp%2F27%2Fsometopic%2Fsomeencoding. Response content: b'/app/27/sometopic/someencoding'
2025-02-11 15:05:41.941 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17814/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-11 15:05:41.943 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:05:41.943 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 15:05:42.044 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-11 15:05:42.044 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17814/relay/v1/auto/messages/%2Fapp%2F29%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:05:42.046 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:17814/relay/v1/auto/messages/%2Fapp%2F29%2Fsometopic%2Fsomeencoding. Response content: b'/app/29/sometopic/someencoding'
2025-02-11 15:05:42.048 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17814/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-11 15:05:42.050 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:05:42.050 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 15:05:42.151 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-11 15:05:42.151 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17814/relay/v1/auto/messages/%2Fapp%2F20%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:05:42.154 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:17814/relay/v1/auto/messages/%2Fapp%2F20%2Fsometopic%2Fsomeencoding. Response content: b'/app/20/sometopic/someencoding'
2025-02-11 15:05:42.156 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 15:05:42.157 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 15:05:42.157 DEBUG [src.node.waku_node] Stopping container with id ff08a1cec506
2025-02-11 15:05:43.432 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 15:05:43.432 DEBUG [src.node.waku_node] Stopping container with id 9e574d6f7370
2025-02-11 15:05:44.244 ERROR [src.node.docker_mananger] Max retries reached for container ff08a1cec506. Exiting log stream.
2025-02-11 15:05:44.934 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 15:05:44.935 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 15:05:44.941 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 15:05:44.947 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
