2025-02-11 15:06:48.926 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 15:06:48.926 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_all_from_90_content_topics with id: 2025-02-11_15-06-48__a2cc71ba-ec1d-4d4d-b5e4-d1ce16d9084f
2025-02-11 15:06:48.926 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 15:06:48.926 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-11 15:06:48.927 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-11 15:06:48.932 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 15:06:48.933 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-11_15-06-48__a2cc71ba-ec1d-4d4d-b5e4-d1ce16d9084f__wakuorg_nwaku:latest.log
2025-02-11 15:06:48.933 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 15:06:48.933 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 15:06:48.934 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 15:06:48.934 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.67.25
2025-02-11 15:06:48.934 DEBUG [src.node.docker_mananger] Generated ports ['56510', '56511', '56512', '56513', '56514']
2025-02-11 15:06:48.935 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 15:06:48.935 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 15:06:48.935 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 15:06:48.935 DEBUG [src.node.docker_mananger] docker run -i -t -p 56510:56510 -p 56511:56511 -p 56512:56512 -p 56513:56513 -p 56514:56514 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56512 --rest-port=56510 --tcp-port=56511 --discv5-udp-port=56513 --rest-address=0.0.0.0 --nat=extip:172.18.67.25 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=01c1055da88a6ea654bcb2dfe02ab1ca4a5ace6e02eccdbc970fdddde1ae3c39 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56514 --metrics-logging=true --relay=true --filter=true
2025-02-11 15:06:49.163 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.67.25 waku 4a61310325defd86dc39b2af5e5aa8ee244bc646cf2d37906635d1448bde2cc4
2025-02-11 15:06:49.211 DEBUG [src.node.docker_mananger] Container started with ID 4a61310325de. Setting up logs at ./log/docker/node1_2025-02-11_15-06-48__a2cc71ba-ec1d-4d4d-b5e4-d1ce16d9084f__wakuorg_nwaku:latest.log
2025-02-11 15:06:49.211 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 56510
2025-02-11 15:06:49.212 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 15:06:49.733 ERROR [src.node.docker_mananger] Max retries reached for container 3e8796c3a247. Exiting log stream.
2025-02-11 15:06:50.212 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56510/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:06:50.215 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 15:06:50.215 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 15:06:50.215 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56510/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:06:50.218 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.67.25/tcp/56511/p2p/16Uiu2HAmEv1bFHpQo6TUcmXbYAxMFmtnjHC9q1toP3wcT14nz8nX","/ip4/172.18.67.25/tcp/56512/ws/p2p/16Uiu2HAmEv1bFHpQo6TUcmXbYAxMFmtnjHC9q1toP3wcT14nz8nX"],"enrUri":"enr:-L24QBRY-g00kmefRDz4d_OhkD_cDyJpn6g_7hgAMWgjEuG6IPYBPvam4TSD3ak_BT-J3L7nMJsePK3sBbHm3p_AOrwCgmlkgnY0gmlwhKwSQxmKbXVsdGlhZGRyc5YACASsEkMZBty_AAoErBJDGQbcwN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDIZB9IUO_ZurEeexmguMBV9DoPuLxgzxN8FbBCC6vreSDdGNwgty_g3VkcILcwYV3YWt1MgU"}'
2025-02-11 15:06:50.218 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 15:06:50.218 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-11 15:06:50.228 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 15:06:50.228 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-11_15-06-48__a2cc71ba-ec1d-4d4d-b5e4-d1ce16d9084f__wakuorg_nwaku:latest.log
2025-02-11 15:06:50.228 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 15:06:50.228 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 15:06:50.230 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 15:06:50.230 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.132.68
2025-02-11 15:06:50.230 DEBUG [src.node.docker_mananger] Generated ports ['49388', '49389', '49390', '49391', '49392']
2025-02-11 15:06:50.230 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 15:06:50.230 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 15:06:50.231 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 15:06:50.231 DEBUG [src.node.docker_mananger] docker run -i -t -p 49388:49388 -p 49389:49389 -p 49390:49390 -p 49391:49391 -p 49392:49392 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=49390 --rest-port=49388 --tcp-port=49389 --discv5-udp-port=49391 --rest-address=0.0.0.0 --nat=extip:172.18.132.68 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cdab823f00cbabd1dcdfaa5080126eb77146be2fdfa256fd48df752fffafc424 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=49392 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QBRY-g00kmefRDz4d_OhkD_cDyJpn6g_7hgAMWgjEuG6IPYBPvam4TSD3ak_BT-J3L7nMJsePK3sBbHm3p_AOrwCgmlkgnY0gmlwhKwSQxmKbXVsdGlhZGRyc5YACASsEkMZBty_AAoErBJDGQbcwN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDIZB9IUO_ZurEeexmguMBV9DoPuLxgzxN8FbBCC6vreSDdGNwgty_g3VkcILcwYV3YWt1MgU --filternode=/ip4/172.18.67.25/tcp/56511/p2p/16Uiu2HAmEv1bFHpQo6TUcmXbYAxMFmtnjHC9q1toP3wcT14nz8nX
2025-02-11 15:06:50.473 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.132.68 waku 841a3963821f5778802964a794c160f065d9f2e7f0f0e2c9c349f5e3b670be21
2025-02-11 15:06:50.524 DEBUG [src.node.docker_mananger] Container started with ID 841a3963821f. Setting up logs at ./log/docker/node2_2025-02-11_15-06-48__a2cc71ba-ec1d-4d4d-b5e4-d1ce16d9084f__wakuorg_nwaku:latest.log
2025-02-11 15:06:50.524 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 49388
2025-02-11 15:06:50.524 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 15:06:51.526 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49388/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:06:51.529 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 15:06:51.529 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 15:06:51.529 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49388/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:06:51.531 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.132.68/tcp/49389/p2p/16Uiu2HAm9aev8DUneg8sBvScRWkZPKiRhMzYUURbo3mcM2yjVyp8","/ip4/172.18.132.68/tcp/49390/ws/p2p/16Uiu2HAm9aev8DUneg8sBvScRWkZPKiRhMzYUURbo3mcM2yjVyp8"],"enrUri":"enr:-L24QCug7EUVP4_0mt46MFH78s776hevJRdEn2hV54c3Vh4POofPGvsd6CDAqGJPM4CrV5UabyKraBdCBMo-_3klmy8CgmlkgnY0gmlwhKwShESKbXVsdGlhZGRyc5YACASsEoREBsDtAAoErBKERAbA7t0DgnJzhQADAQAAiXNlY3AyNTZrMaEC0lCkXFT3wfh8AI8lWzi7A6p_lFwAPQnj3S8CQsfXsc2DdGNwgsDtg3VkcILA74V3YWt1MgA"}'
2025-02-11 15:06:51.531 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 15:06:51.532 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49388/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.67.25/tcp/56511/p2p/16Uiu2HAmEv1bFHpQo6TUcmXbYAxMFmtnjHC9q1toP3wcT14nz8nX"]'
2025-02-11 15:06:51.568 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:06:51.571 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56510/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 15:06:51.591 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:06:51.593 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49388/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "2e9c2b12-9f23-4142-972b-9fff609c3916", "contentFilters": ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "30"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-11 15:06:51.610 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"2e9c2b12-9f23-4142-972b-9fff609c3916","statusDesc":"OK"}'
2025-02-11 15:06:51.611 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56510/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 15:06:51.613 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:06:51.614 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49388/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "d9beb0e5-2b6e-415d-b5b3-3ac99d99bc49", "contentFilters": ["31", "32", "33", "34", "35", "36", "37", "38", "39", "40", "41", "42", "43", "44", "45", "46", "47", "48", "49", "50", "51", "52", "53", "54", "55", "56", "57", "58", "59", "60"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-11 15:06:51.630 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"d9beb0e5-2b6e-415d-b5b3-3ac99d99bc49","statusDesc":"OK"}'
2025-02-11 15:06:51.630 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56510/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 15:06:51.633 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:06:51.633 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49388/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "15f24da5-63e8-450f-8112-956689572c2e", "contentFilters": ["61", "62", "63", "64", "65", "66", "67", "68", "69", "70", "71", "72", "73", "74", "75", "76", "77", "78", "79", "80", "81", "82", "83", "84", "85", "86", "87", "88", "89", "90"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-11 15:06:51.654 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"15f24da5-63e8-450f-8112-956689572c2e","statusDesc":"OK"}'
2025-02-11 15:06:51.655 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56510/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "17", "timestamp": '$(date +%s%N)'}'
2025-02-11 15:06:51.679 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:06:51.680 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 15:06:51.780 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-11 15:06:51.780 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49388/filter/v2/messages/17" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:06:51.784 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"17","version":0,"timestamp":1739286411654871296,"ephemeral":false}]'
2025-02-11 15:06:51.786 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56510/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "32", "timestamp": '$(date +%s%N)'}'
2025-02-11 15:06:51.808 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:06:51.808 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 15:06:51.908 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-11 15:06:51.909 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49388/filter/v2/messages/32" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:06:51.912 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"32","version":0,"timestamp":1739286411786299136,"ephemeral":false}]'
2025-02-11 15:06:51.913 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56510/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "79", "timestamp": '$(date +%s%N)'}'
2025-02-11 15:06:51.936 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:06:51.936 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 15:06:52.036 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-11 15:06:52.037 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49388/filter/v2/messages/79" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:06:52.039 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"79","version":0,"timestamp":1739286411913695488,"ephemeral":false}]'
2025-02-11 15:06:52.041 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:49388/filter/v2/subscriptions/all" -H "Content-Type: application/json" -d '{"requestId": "1"}'
2025-02-11 15:06:52.051 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
2025-02-11 15:06:52.051 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56510/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "1", "timestamp": '$(date +%s%N)'}'
2025-02-11 15:06:52.055 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:06:52.056 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 15:06:52.156 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-11 15:06:52.156 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49388/filter/v2/messages/1" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:06:52.159 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:49388/filter/v2/messages/1. Response content: b'Not subscribed to topic: 1'
2025-02-11 15:06:52.161 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56510/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "44", "timestamp": '$(date +%s%N)'}'
2025-02-11 15:06:52.164 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:06:52.164 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 15:06:52.265 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-11 15:06:52.265 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49388/filter/v2/messages/44" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:06:52.268 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:49388/filter/v2/messages/44. Response content: b'Not subscribed to topic: 44'
2025-02-11 15:06:52.270 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56510/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "75", "timestamp": '$(date +%s%N)'}'
2025-02-11 15:06:52.274 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:06:52.274 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 15:06:52.374 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-11 15:06:52.375 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49388/filter/v2/messages/75" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:06:52.377 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:49388/filter/v2/messages/75. Response content: b'Not subscribed to topic: 75'
2025-02-11 15:06:52.380 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 15:06:52.381 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 15:06:52.381 DEBUG [src.node.waku_node] Stopping container with id 4a61310325de
2025-02-11 15:06:53.782 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 15:06:53.783 DEBUG [src.node.waku_node] Stopping container with id 841a3963821f
2025-02-11 15:06:54.595 ERROR [src.node.docker_mananger] Max retries reached for container 4a61310325de. Exiting log stream.
2025-02-11 15:06:55.291 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 15:06:55.293 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 15:06:55.302 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 15:06:55.308 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
