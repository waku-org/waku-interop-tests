2025-02-11 15:06:32.805 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 15:06:32.805 DEBUG [tests.conftest] Running test: test_main_node_only_lightpush__peer_only_filter with id: 2025-02-11_15-06-32__8ca9525d-611c-4e82-abca-6b246ac33e2b
2025-02-11 15:06:32.805 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 15:06:32.805 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-11 15:06:32.812 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 15:06:32.812 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-11_15-06-32__8ca9525d-611c-4e82-abca-6b246ac33e2b__wakuorg_nwaku:latest.log
2025-02-11 15:06:32.812 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 15:06:32.813 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 15:06:32.814 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 15:06:32.814 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.180.6
2025-02-11 15:06:32.814 DEBUG [src.node.docker_mananger] Generated ports ['48282', '48283', '48284', '48285', '48286']
2025-02-11 15:06:32.814 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 15:06:32.815 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 15:06:32.815 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 15:06:32.815 DEBUG [src.node.docker_mananger] docker run -i -t -p 48282:48282 -p 48283:48283 -p 48284:48284 -p 48285:48285 -p 48286:48286 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=48284 --rest-port=48282 --tcp-port=48283 --discv5-udp-port=48285 --rest-address=0.0.0.0 --nat=extip:172.18.180.6 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d1feaa6a6de98a7debace63f832eeeb360fe26b0b1308e095efcb20dbacc82a9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=48286 --metrics-logging=true --lightpush=false --relay=false --filter=true
2025-02-11 15:06:33.038 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.180.6 waku dfdb489a4936036ec4f0a6bc51d4ea36d5770c3cf958f70338cb8b0507fe6f95
2025-02-11 15:06:33.090 DEBUG [src.node.docker_mananger] Container started with ID dfdb489a4936. Setting up logs at ./log/docker/receiving_node1_2025-02-11_15-06-32__8ca9525d-611c-4e82-abca-6b246ac33e2b__wakuorg_nwaku:latest.log
2025-02-11 15:06:33.092 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 48282
2025-02-11 15:06:33.092 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 15:06:33.611 ERROR [src.node.docker_mananger] Max retries reached for container f5d975ca1d06. Exiting log stream.
2025-02-11 15:06:34.093 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:48282/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:06:34.096 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 15:06:34.096 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 15:06:34.096 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:48282/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:06:34.098 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.180.6/tcp/48283/p2p/16Uiu2HAmCxKYykMjGetUiaxb49Q4Ac8iGumsUrjcQpoq8fa7UhKp","/ip4/172.18.180.6/tcp/48284/ws/p2p/16Uiu2HAmCxKYykMjGetUiaxb49Q4Ac8iGumsUrjcQpoq8fa7UhKp"],"enrUri":"enr:-L24QKQ-30mZYW81FN6QY57vrDgLAy7KrR_RFBjetttkwpf_QCk6fFD4TtrDykan5Yztk52cx-Oldp4BLH9TemZ5C8ECgmlkgnY0gmlwhKwStAaKbXVsdGlhZGRyc5YACASsErQGBrybAAoErBK0Bga8nN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDBHCVwuf5sJ83KubIKYS0UzAKF74p7ohKj4h1QIGxwxuDdGNwgrybg3VkcIK8nYV3YWt1MgQ"}'
2025-02-11 15:06:34.099 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 15:06:34.105 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 15:06:34.105 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-11_15-06-32__8ca9525d-611c-4e82-abca-6b246ac33e2b__wakuorg_nwaku:latest.log
2025-02-11 15:06:34.106 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 15:06:34.106 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 15:06:34.107 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 15:06:34.107 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.115.165
2025-02-11 15:06:34.107 DEBUG [src.node.docker_mananger] Generated ports ['50137', '50138', '50139', '50140', '50141']
2025-02-11 15:06:34.108 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 15:06:34.108 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 15:06:34.108 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 15:06:34.108 DEBUG [src.node.docker_mananger] docker run -i -t -p 50137:50137 -p 50138:50138 -p 50139:50139 -p 50140:50140 -p 50141:50141 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=50139 --rest-port=50137 --tcp-port=50138 --discv5-udp-port=50140 --rest-address=0.0.0.0 --nat=extip:172.18.115.165 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2feab5e7c530ab9fbdde72adde5b7cc17ce4be0ffe901b0827ddc4a8d5bdf883 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=50141 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QKQ-30mZYW81FN6QY57vrDgLAy7KrR_RFBjetttkwpf_QCk6fFD4TtrDykan5Yztk52cx-Oldp4BLH9TemZ5C8ECgmlkgnY0gmlwhKwStAaKbXVsdGlhZGRyc5YACASsErQGBrybAAoErBK0Bga8nN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDBHCVwuf5sJ83KubIKYS0UzAKF74p7ohKj4h1QIGxwxuDdGNwgrybg3VkcIK8nYV3YWt1MgQ --lightpushnode=/ip4/172.18.180.6/tcp/48283/p2p/16Uiu2HAmCxKYykMjGetUiaxb49Q4Ac8iGumsUrjcQpoq8fa7UhKp --lightpush=true --relay=false
2025-02-11 15:06:34.353 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.115.165 waku b00f12d462bf660b0f1203b5f4e0c6b1c14f5aecb5228b8e906a07c1b9b821c7
2025-02-11 15:06:34.400 DEBUG [src.node.docker_mananger] Container started with ID b00f12d462bf. Setting up logs at ./log/docker/lightpush_node1_2025-02-11_15-06-32__8ca9525d-611c-4e82-abca-6b246ac33e2b__wakuorg_nwaku:latest.log
2025-02-11 15:06:34.401 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 50137
2025-02-11 15:06:34.401 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 15:06:35.401 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50137/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:06:35.405 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 15:06:35.405 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 15:06:35.405 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50137/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:06:35.407 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.115.165/tcp/50138/p2p/16Uiu2HAmT3m4U5VoaXWFBkXv2Fiaf1MP79WHFDKwBkrLdhvM3TaW","/ip4/172.18.115.165/tcp/50139/ws/p2p/16Uiu2HAmT3m4U5VoaXWFBkXv2Fiaf1MP79WHFDKwBkrLdhvM3TaW"],"enrUri":"enr:-L24QFnHMbEVx-cQfm5fEG_EnCy9R3H0XOrfQStpuAXmEm50O5b5W0-isquK_l9QgKF3sjOrwJ9jzGnAOSdHqvyU7D0CgmlkgnY0gmlwhKwSc6WKbXVsdGlhZGRyc5YACASsEnOlBsPaAAoErBJzpQbD290DgnJzhQADAQAAiXNlY3AyNTZrMaED1djyz9THlP-EYw9k3057vYoeuUEG1OvBb1G19uiE7e-DdGNwgsPag3VkcILD3IV3YWt1Mgg"}'
2025-02-11 15:06:35.408 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 15:06:35.408 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50137/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.180.6/tcp/48283/p2p/16Uiu2HAmCxKYykMjGetUiaxb49Q4Ac8iGumsUrjcQpoq8fa7UhKp"]'
2025-02-11 15:06:35.444 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:06:35.445 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50137/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739286395445270528}}'
2025-02-11 15:06:35.468 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:50137/lightpush/v1/message. Response content: b'Failed to request a message push: dial_failure'
2025-02-11 15:06:35.470 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 15:06:35.471 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 15:06:35.471 DEBUG [src.node.waku_node] Stopping container with id dfdb489a4936
2025-02-11 15:06:36.572 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 15:06:36.572 DEBUG [src.node.waku_node] Stopping container with id b00f12d462bf
2025-02-11 15:06:37.385 ERROR [src.node.docker_mananger] Max retries reached for container dfdb489a4936. Exiting log stream.
2025-02-11 15:06:38.077 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 15:06:38.079 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 15:06:38.082 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 15:06:38.085 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
