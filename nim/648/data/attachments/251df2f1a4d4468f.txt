2025-02-11 15:03:08.574 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 15:03:08.574 DEBUG [tests.conftest] Running test: test_filter_get_message_with_150_kb_payload with id: 2025-02-11_15-03-08__b8d38886-3552-467a-95f5-897c219fe5b0
2025-02-11 15:03:08.574 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 15:03:08.575 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-11 15:03:08.575 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-11 15:03:08.581 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 15:03:08.581 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-11_15-03-08__b8d38886-3552-467a-95f5-897c219fe5b0__wakuorg_nwaku:latest.log
2025-02-11 15:03:08.581 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 15:03:08.581 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 15:03:08.582 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 15:03:08.583 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.17.32
2025-02-11 15:03:08.583 DEBUG [src.node.docker_mananger] Generated ports ['39689', '39690', '39691', '39692', '39693']
2025-02-11 15:03:08.583 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 15:03:08.583 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 15:03:08.583 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 15:03:08.583 DEBUG [src.node.docker_mananger] docker run -i -t -p 39689:39689 -p 39690:39690 -p 39691:39691 -p 39692:39692 -p 39693:39693 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39691 --rest-port=39689 --tcp-port=39690 --discv5-udp-port=39692 --rest-address=0.0.0.0 --nat=extip:172.18.17.32 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6dae6b6a3defc3fff18efdda8fcc1da3ae2c1c5fec66fbc543d32c6c9e462a7b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39693 --metrics-logging=true --relay=true --filter=true
2025-02-11 15:03:08.805 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.17.32 waku 05f3e0f48c34f1f8a26cb9ae285c430ff6a5280e569fc8d313141878215c9faa
2025-02-11 15:03:08.849 DEBUG [src.node.docker_mananger] Container started with ID 05f3e0f48c34. Setting up logs at ./log/docker/node1_2025-02-11_15-03-08__b8d38886-3552-467a-95f5-897c219fe5b0__wakuorg_nwaku:latest.log
2025-02-11 15:03:08.849 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 39689
2025-02-11 15:03:08.850 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 15:03:09.377 ERROR [src.node.docker_mananger] Max retries reached for container 703550e231fb. Exiting log stream.
2025-02-11 15:03:09.851 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39689/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:03:09.854 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 15:03:09.854 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 15:03:09.855 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39689/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:03:09.857 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.17.32/tcp/39690/p2p/16Uiu2HAm6bvAptoYdpuPYybiPe8oL4EYsjpVhDF9a2J531MmxgXg","/ip4/172.18.17.32/tcp/39691/ws/p2p/16Uiu2HAm6bvAptoYdpuPYybiPe8oL4EYsjpVhDF9a2J531MmxgXg"],"enrUri":"enr:-L24QJOJmx_FEJm4OvVliXuRG3ZUlk-Nzf2jBrquJw7jRkGlJh-xFHq5vp7JwKUbqjGXVws1RUZO7BjER49kHgiI_TsCgmlkgnY0gmlwhKwSESCKbXVsdGlhZGRyc5YACASsEhEgBpsKAAoErBIRIAabC90DgnJzhQADAQAAiXNlY3AyNTZrMaECphBowpR6xyFsK2sIMlU_ZaFhKwvCAGJCx5L0L3-LtEeDdGNwgpsKg3VkcIKbDIV3YWt1MgU"}'
2025-02-11 15:03:09.857 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 15:03:09.857 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-11 15:03:09.864 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 15:03:09.864 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-11_15-03-08__b8d38886-3552-467a-95f5-897c219fe5b0__wakuorg_nwaku:latest.log
2025-02-11 15:03:09.864 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 15:03:09.864 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 15:03:09.865 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 15:03:09.865 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.52.153
2025-02-11 15:03:09.866 DEBUG [src.node.docker_mananger] Generated ports ['64991', '64992', '64993', '64994', '64995']
2025-02-11 15:03:09.866 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 15:03:09.866 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 15:03:09.866 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 15:03:09.866 DEBUG [src.node.docker_mananger] docker run -i -t -p 64991:64991 -p 64992:64992 -p 64993:64993 -p 64994:64994 -p 64995:64995 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64993 --rest-port=64991 --tcp-port=64992 --discv5-udp-port=64994 --rest-address=0.0.0.0 --nat=extip:172.18.52.153 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a03f54bdfe907e807aa0b18d1fe74adba665ce9af1fdb08ecbe4eedcca072cc4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64995 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QJOJmx_FEJm4OvVliXuRG3ZUlk-Nzf2jBrquJw7jRkGlJh-xFHq5vp7JwKUbqjGXVws1RUZO7BjER49kHgiI_TsCgmlkgnY0gmlwhKwSESCKbXVsdGlhZGRyc5YACASsEhEgBpsKAAoErBIRIAabC90DgnJzhQADAQAAiXNlY3AyNTZrMaECphBowpR6xyFsK2sIMlU_ZaFhKwvCAGJCx5L0L3-LtEeDdGNwgpsKg3VkcIKbDIV3YWt1MgU --filternode=/ip4/172.18.17.32/tcp/39690/p2p/16Uiu2HAm6bvAptoYdpuPYybiPe8oL4EYsjpVhDF9a2J531MmxgXg
2025-02-11 15:03:10.093 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.52.153 waku 46a6643334965f94b5bfb6fa5609c4be3906cdc290e95191e94005284f9beeb8
2025-02-11 15:03:10.140 DEBUG [src.node.docker_mananger] Container started with ID 46a664333496. Setting up logs at ./log/docker/node2_2025-02-11_15-03-08__b8d38886-3552-467a-95f5-897c219fe5b0__wakuorg_nwaku:latest.log
2025-02-11 15:03:10.140 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 64991
2025-02-11 15:03:10.140 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 15:03:11.141 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64991/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:03:11.144 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 15:03:11.145 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 15:03:11.145 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64991/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:03:11.147 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.52.153/tcp/64992/p2p/16Uiu2HAm9gcutmWb2Z9wfSG4tF1Mro8W5DFxXaUFMjjMkVUdgcRR","/ip4/172.18.52.153/tcp/64993/ws/p2p/16Uiu2HAm9gcutmWb2Z9wfSG4tF1Mro8W5DFxXaUFMjjMkVUdgcRR"],"enrUri":"enr:-L24QHZryDPfCk2mLX0VMhCna33bTC7bJDUUPZamOZ8faKxVY0I_1kH_NU6gvQK54IyWj4ZWxCVxlVux0qmetRYm-cgCgmlkgnY0gmlwhKwSNJmKbXVsdGlhZGRyc5YACASsEjSZBv3gAAoErBI0mQb94d0DgnJzhQADAQAAiXNlY3AyNTZrMaEC09fcZ_HuMC2kb-snIFqIo-ZxlLA1C2jT1czBoTnhXiyDdGNwgv3gg3VkcIL94oV3YWt1MgA"}'
2025-02-11 15:03:11.147 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 15:03:11.147 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64991/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.17.32/tcp/39690/p2p/16Uiu2HAm6bvAptoYdpuPYybiPe8oL4EYsjpVhDF9a2J531MmxgXg"]'
2025-02-11 15:03:11.189 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:03:11.190 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-11 15:03:11.191 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:39689/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 15:03:11.210 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:03:11.212 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64991/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "16d4ae30-22f5-48f2-adb6-91c7cf21272b", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-11 15:03:11.225 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"16d4ae30-22f5-48f2-adb6-91c7cf21272b","statusDesc":"OK"}'
2025-02-11 15:03:11.228 INFO [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2025-02-11 15:03:11.249 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:03:11.250 DEBUG [src.libs.common] Sleeping for 2 seconds
2025-02-11 15:03:13.250 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-11 15:03:13.250 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64991/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:03:13.255 INFO [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2025-02-11 15:03:13.259 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 15:03:13.260 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 15:03:13.260 DEBUG [src.node.waku_node] Stopping container with id 05f3e0f48c34
2025-02-11 15:03:14.365 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 15:03:14.366 DEBUG [src.node.waku_node] Stopping container with id 46a664333496
2025-02-11 15:03:15.177 ERROR [src.node.docker_mananger] Max retries reached for container 05f3e0f48c34. Exiting log stream.
2025-02-11 15:03:15.844 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 15:03:15.846 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 15:03:15.850 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 15:03:15.854 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
