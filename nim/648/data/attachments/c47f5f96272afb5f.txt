2025-02-11 15:06:11.664 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 15:06:11.664 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_from_non_existing_pubsub_topic with id: 2025-02-11_15-06-11__0170f75e-c238-4ab7-b0c5-f23240875500
2025-02-11 15:06:11.664 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 15:06:11.664 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-11 15:06:11.665 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-11 15:06:11.671 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 15:06:11.671 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-11_15-06-11__0170f75e-c238-4ab7-b0c5-f23240875500__wakuorg_nwaku:latest.log
2025-02-11 15:06:11.671 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 15:06:11.671 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 15:06:11.673 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 15:06:11.673 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.42.2
2025-02-11 15:06:11.673 DEBUG [src.node.docker_mananger] Generated ports ['27418', '27419', '27420', '27421', '27422']
2025-02-11 15:06:11.673 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 15:06:11.673 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 15:06:11.673 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 15:06:11.674 DEBUG [src.node.docker_mananger] docker run -i -t -p 27418:27418 -p 27419:27419 -p 27420:27420 -p 27421:27421 -p 27422:27422 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27420 --rest-port=27418 --tcp-port=27419 --discv5-udp-port=27421 --rest-address=0.0.0.0 --nat=extip:172.18.42.2 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=695e011fccccdb0d3b51b4954e97a9bbe67dd5a3eda38bf3baeabd876d56be26 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27422 --metrics-logging=true --relay=true --filter=true
2025-02-11 15:06:11.931 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.42.2 waku af078f9eddb2a72d49a232979f2275ead4f1faac3dacc8a4b36b03209a70525f
2025-02-11 15:06:11.979 DEBUG [src.node.docker_mananger] Container started with ID af078f9eddb2. Setting up logs at ./log/docker/node1_2025-02-11_15-06-11__0170f75e-c238-4ab7-b0c5-f23240875500__wakuorg_nwaku:latest.log
2025-02-11 15:06:11.980 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 27418
2025-02-11 15:06:11.980 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 15:06:12.468 ERROR [src.node.docker_mananger] Max retries reached for container fc3f76a25f61. Exiting log stream.
2025-02-11 15:06:12.981 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27418/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:06:12.984 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 15:06:12.984 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 15:06:12.985 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27418/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:06:12.987 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.42.2/tcp/27419/p2p/16Uiu2HAmFW1ZivgvDizg9Y6tTARy8S5jp1czwzHyYpGQgHT7vsRi","/ip4/172.18.42.2/tcp/27420/ws/p2p/16Uiu2HAmFW1ZivgvDizg9Y6tTARy8S5jp1czwzHyYpGQgHT7vsRi"],"enrUri":"enr:-L24QFt0BlFugMWy3ZDkB4MxeBzCsLa7BNzOuUdSmtwY_jWDOVqV37vy1eaolLv_7F_3GT3mPBzUgKGQgqBc0iDvXqgCgmlkgnY0gmlwhKwSKgKKbXVsdGlhZGRyc5YACASsEioCBmsbAAoErBIqAgZrHN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDKkY044HCBLMW7gKRSqYjIM0WKGao1hK0NvaFpX9skAmDdGNwgmsbg3VkcIJrHYV3YWt1MgU"}'
2025-02-11 15:06:12.987 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 15:06:12.987 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-11 15:06:12.994 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 15:06:12.994 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-11_15-06-11__0170f75e-c238-4ab7-b0c5-f23240875500__wakuorg_nwaku:latest.log
2025-02-11 15:06:12.994 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 15:06:12.994 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 15:06:12.996 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 15:06:12.996 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.228.181
2025-02-11 15:06:12.996 DEBUG [src.node.docker_mananger] Generated ports ['59856', '59857', '59858', '59859', '59860']
2025-02-11 15:06:12.996 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 15:06:12.996 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 15:06:12.996 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 15:06:12.997 DEBUG [src.node.docker_mananger] docker run -i -t -p 59856:59856 -p 59857:59857 -p 59858:59858 -p 59859:59859 -p 59860:59860 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=59858 --rest-port=59856 --tcp-port=59857 --discv5-udp-port=59859 --rest-address=0.0.0.0 --nat=extip:172.18.228.181 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fe9a5b083e7e73a8561e92bcdfeb6621c7e5dcdd28fdbfdbaf4f2eea1021cc77 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=59860 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QFt0BlFugMWy3ZDkB4MxeBzCsLa7BNzOuUdSmtwY_jWDOVqV37vy1eaolLv_7F_3GT3mPBzUgKGQgqBc0iDvXqgCgmlkgnY0gmlwhKwSKgKKbXVsdGlhZGRyc5YACASsEioCBmsbAAoErBIqAgZrHN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDKkY044HCBLMW7gKRSqYjIM0WKGao1hK0NvaFpX9skAmDdGNwgmsbg3VkcIJrHYV3YWt1MgU --filternode=/ip4/172.18.42.2/tcp/27419/p2p/16Uiu2HAmFW1ZivgvDizg9Y6tTARy8S5jp1czwzHyYpGQgHT7vsRi
2025-02-11 15:06:13.231 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.228.181 waku b79d00cc17454020a29a0fe422a17ff9f5a1529bee9552e6c5e2cc06183ca0b0
2025-02-11 15:06:13.279 DEBUG [src.node.docker_mananger] Container started with ID b79d00cc1745. Setting up logs at ./log/docker/node2_2025-02-11_15-06-11__0170f75e-c238-4ab7-b0c5-f23240875500__wakuorg_nwaku:latest.log
2025-02-11 15:06:13.280 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 59856
2025-02-11 15:06:13.280 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 15:06:14.280 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:59856/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:06:14.284 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 15:06:14.284 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 15:06:14.284 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:59856/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:06:14.287 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.228.181/tcp/59857/p2p/16Uiu2HAm7tgq2R86ewnzBXucwNNkQWyxv79R8xVwnF9jNMZVD5ZN","/ip4/172.18.228.181/tcp/59858/ws/p2p/16Uiu2HAm7tgq2R86ewnzBXucwNNkQWyxv79R8xVwnF9jNMZVD5ZN"],"enrUri":"enr:-L24QAo_X6P3zOp_0idBEuTTlaqvyw4ylyft4_77nfALL9shYvbL5oTLEHV4qcI8_wOXfuUAfZ2GLm6FvXgvQgyPqL8CgmlkgnY0gmlwhKwS5LWKbXVsdGlhZGRyc5YACASsEuS1BunRAAoErBLktQbp0t0DgnJzhQADAQAAiXNlY3AyNTZrMaECuTfifYl1A20DyMDoNXn97vpCKDA9q80m4FduJ32Z6wWDdGNwgunRg3VkcILp04V3YWt1MgA"}'
2025-02-11 15:06:14.287 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 15:06:14.287 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:59856/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.42.2/tcp/27419/p2p/16Uiu2HAmFW1ZivgvDizg9Y6tTARy8S5jp1czwzHyYpGQgHT7vsRi"]'
2025-02-11 15:06:14.326 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:06:14.326 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-11 15:06:14.327 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27418/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 15:06:14.343 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:06:14.344 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:59856/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1dd6362c-d821-400a-bd5b-ee58f3dea6fe", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-11 15:06:14.356 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"1dd6362c-d821-400a-bd5b-ee58f3dea6fe","statusDesc":"OK"}'
2025-02-11 15:06:14.357 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:59856/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/waku/2/rs/3/1"], "pubsubTopic": "/waku/2/rs/3/9"}'
2025-02-11 15:06:14.365 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:59856/filter/v2/subscriptions. Response content: b'{"requestId":"1","statusDesc":"NOT_FOUND: peer has no subscriptions"}'
2025-02-11 15:06:14.366 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27418/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 15:06:14.373 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:06:14.373 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 15:06:14.474 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-11 15:06:14.474 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:59856/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:06:14.477 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1739286374366004992,"ephemeral":false}]'
2025-02-11 15:06:14.481 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 15:06:14.482 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 15:06:14.482 DEBUG [src.node.waku_node] Stopping container with id af078f9eddb2
2025-02-11 15:06:15.575 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 15:06:15.575 DEBUG [src.node.waku_node] Stopping container with id b79d00cc1745
2025-02-11 15:06:16.388 ERROR [src.node.docker_mananger] Max retries reached for container af078f9eddb2. Exiting log stream.
2025-02-11 15:06:17.083 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 15:06:17.086 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 15:06:17.090 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 15:06:17.094 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
