2025-02-11 15:04:33.373 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 15:04:33.374 DEBUG [tests.conftest] Running test: test_light_push_while_peer_is_paused with id: 2025-02-11_15-04-33__256d5aa2-7d14-4d78-952e-5aeafc600adf
2025-02-11 15:04:33.374 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 15:04:33.374 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-11 15:04:33.381 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 15:04:33.381 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-11_15-04-33__256d5aa2-7d14-4d78-952e-5aeafc600adf__wakuorg_nwaku:latest.log
2025-02-11 15:04:33.381 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 15:04:33.381 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 15:04:33.383 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 15:04:33.383 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.66.22
2025-02-11 15:04:33.383 DEBUG [src.node.docker_mananger] Generated ports ['53587', '53588', '53589', '53590', '53591']
2025-02-11 15:04:33.383 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 15:04:33.383 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 15:04:33.383 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 15:04:33.383 DEBUG [src.node.docker_mananger] docker run -i -t -p 53587:53587 -p 53588:53588 -p 53589:53589 -p 53590:53590 -p 53591:53591 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=53589 --rest-port=53587 --tcp-port=53588 --discv5-udp-port=53590 --rest-address=0.0.0.0 --nat=extip:172.18.66.22 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=febfe0063db6aeeabf17c5e61ce7cb269ca1aea34e2cc37e5dbcba1d2c5d75aa --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=53591 --metrics-logging=true --lightpush=true --relay=true
2025-02-11 15:04:33.634 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.66.22 waku 6655798e72d384a5ffe364696574b5ba9a0a54a1c8fe64e4fa86830b0d6f9676
2025-02-11 15:04:33.680 DEBUG [src.node.docker_mananger] Container started with ID 6655798e72d3. Setting up logs at ./log/docker/receiving_node1_2025-02-11_15-04-33__256d5aa2-7d14-4d78-952e-5aeafc600adf__wakuorg_nwaku:latest.log
2025-02-11 15:04:33.681 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 53587
2025-02-11 15:04:33.681 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 15:04:34.177 ERROR [src.node.docker_mananger] Max retries reached for container fcc895695e28. Exiting log stream.
2025-02-11 15:04:34.681 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53587/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:04:34.684 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 15:04:34.685 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 15:04:34.685 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53587/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:04:34.687 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.66.22/tcp/53588/p2p/16Uiu2HAkw3uU8DnQk4hzKCiDotekwvdi5VcZ97R3jH9scBGZZN9z","/ip4/172.18.66.22/tcp/53589/ws/p2p/16Uiu2HAkw3uU8DnQk4hzKCiDotekwvdi5VcZ97R3jH9scBGZZN9z"],"enrUri":"enr:-L24QKufNvNZ6GKm6Xdg7_v_InKasXfRCT87580E3EWXz1JVK0R1CmJmeJaqsWmrNj8aeEHrvblMl8dlyYrMtFw6ckUCgmlkgnY0gmlwhKwSQhaKbXVsdGlhZGRyc5YACASsEkIWBtFUAAoErBJCFgbRVd0DgnJzhQADAQAAiXNlY3AyNTZrMaECGCPY92ZGn4hEIVFg0UZbcInrbbZi-_A8autcRq1VoV2DdGNwgtFUg3VkcILRVoV3YWt1Mgk"}'
2025-02-11 15:04:34.687 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 15:04:34.694 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 15:04:34.694 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-11_15-04-33__256d5aa2-7d14-4d78-952e-5aeafc600adf__wakuorg_nwaku:latest.log
2025-02-11 15:04:34.694 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 15:04:34.694 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 15:04:34.695 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 15:04:34.696 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.33.159
2025-02-11 15:04:34.696 DEBUG [src.node.docker_mananger] Generated ports ['62445', '62446', '62447', '62448', '62449']
2025-02-11 15:04:34.696 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 15:04:34.696 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 15:04:34.696 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 15:04:34.696 DEBUG [src.node.docker_mananger] docker run -i -t -p 62445:62445 -p 62446:62446 -p 62447:62447 -p 62448:62448 -p 62449:62449 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62447 --rest-port=62445 --tcp-port=62446 --discv5-udp-port=62448 --rest-address=0.0.0.0 --nat=extip:172.18.33.159 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=86a0e1f30bf9adb70c9a7cda1e38d302d7aa3f5a6ff0e3b83e7897ae95aed882 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62449 --metrics-logging=true --lightpush=false --relay=true
2025-02-11 15:04:34.929 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.33.159 waku 5085458a95f0df6ada2a59177b5cf82fadbaa88fde5e65939731f2f36e47e672
2025-02-11 15:04:34.977 DEBUG [src.node.docker_mananger] Container started with ID 5085458a95f0. Setting up logs at ./log/docker/receiving_node2_2025-02-11_15-04-33__256d5aa2-7d14-4d78-952e-5aeafc600adf__wakuorg_nwaku:latest.log
2025-02-11 15:04:34.978 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 62445
2025-02-11 15:04:34.978 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 15:04:35.979 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62445/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:04:35.982 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 15:04:35.982 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 15:04:35.982 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62445/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:04:35.984 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.33.159/tcp/62446/p2p/16Uiu2HAm3qcpERpmhPHLkpUWMq37kyv7eQWE2MCRsP6ZMB6ct6AZ","/ip4/172.18.33.159/tcp/62447/ws/p2p/16Uiu2HAm3qcpERpmhPHLkpUWMq37kyv7eQWE2MCRsP6ZMB6ct6AZ"],"enrUri":"enr:-L24QCiEdztKUS8RNFFHynqWEWjndkt3rVWCNGAd_RjeFPoEShHhXhzK_wxElzoLbkZubQF3q4fv5N5mhqQ1qPijNJkCgmlkgnY0gmlwhKwSIZ-KbXVsdGlhZGRyc5YACASsEiGfBvPuAAoErBIhnwbz790DgnJzhQADAQAAiXNlY3AyNTZrMaECfP_bOAXMNwB1evgmCMiAmwZ76aIyWthHRMVsaNVk6aaDdGNwgvPug3VkcILz8IV3YWt1MgE"}'
2025-02-11 15:04:35.985 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 15:04:35.985 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62445/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.66.22/tcp/53588/p2p/16Uiu2HAkw3uU8DnQk4hzKCiDotekwvdi5VcZ97R3jH9scBGZZN9z"]'
2025-02-11 15:04:36.029 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:04:36.036 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 15:04:36.036 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-11_15-04-33__256d5aa2-7d14-4d78-952e-5aeafc600adf__wakuorg_nwaku:latest.log
2025-02-11 15:04:36.036 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 15:04:36.036 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 15:04:36.038 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 15:04:36.038 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.207.148
2025-02-11 15:04:36.038 DEBUG [src.node.docker_mananger] Generated ports ['54042', '54043', '54044', '54045', '54046']
2025-02-11 15:04:36.038 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 15:04:36.038 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 15:04:36.039 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 15:04:36.039 DEBUG [src.node.docker_mananger] docker run -i -t -p 54042:54042 -p 54043:54043 -p 54044:54044 -p 54045:54045 -p 54046:54046 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=54044 --rest-port=54042 --tcp-port=54043 --discv5-udp-port=54045 --rest-address=0.0.0.0 --nat=extip:172.18.207.148 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=aafcbf976d65eabf04f9e0bf7018eaab5f6f0a4ac9dff23d8ae6aee8cd4ddee8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=54046 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QKufNvNZ6GKm6Xdg7_v_InKasXfRCT87580E3EWXz1JVK0R1CmJmeJaqsWmrNj8aeEHrvblMl8dlyYrMtFw6ckUCgmlkgnY0gmlwhKwSQhaKbXVsdGlhZGRyc5YACASsEkIWBtFUAAoErBJCFgbRVd0DgnJzhQADAQAAiXNlY3AyNTZrMaECGCPY92ZGn4hEIVFg0UZbcInrbbZi-_A8autcRq1VoV2DdGNwgtFUg3VkcILRVoV3YWt1Mgk --lightpushnode=/ip4/172.18.66.22/tcp/53588/p2p/16Uiu2HAkw3uU8DnQk4hzKCiDotekwvdi5VcZ97R3jH9scBGZZN9z --lightpush=true --relay=false
2025-02-11 15:04:36.286 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.207.148 waku 629a0b638f9380fd04b795bdb4c7d15d2201897fcf309ccf8446474a0097048f
2025-02-11 15:04:36.334 DEBUG [src.node.docker_mananger] Container started with ID 629a0b638f93. Setting up logs at ./log/docker/lightpush_node1_2025-02-11_15-04-33__256d5aa2-7d14-4d78-952e-5aeafc600adf__wakuorg_nwaku:latest.log
2025-02-11 15:04:36.335 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 54042
2025-02-11 15:04:36.335 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 15:04:37.335 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54042/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:04:37.338 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 15:04:37.338 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 15:04:37.339 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54042/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:04:37.341 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.207.148/tcp/54043/p2p/16Uiu2HAmLTziBtTfLW45hz9CPGxc8SR8WerfhELT8DxMAn4o8zD2","/ip4/172.18.207.148/tcp/54044/ws/p2p/16Uiu2HAmLTziBtTfLW45hz9CPGxc8SR8WerfhELT8DxMAn4o8zD2"],"enrUri":"enr:-L24QC3I4jAS8XIbzR_Hhm2HblOWsds2v6GVIVANHp7hosEDSHkYei-kv68_TvXVbwJ4ckB8iJEVnAVnUGu4lg5HGhcCgmlkgnY0gmlwhKwSz5SKbXVsdGlhZGRyc5YACASsEs-UBtMbAAoErBLPlAbTHN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDdAyDkMdUuowHWyNrF4IySmYlRGrPlPGmU5HY0bSHilWDdGNwgtMbg3VkcILTHYV3YWt1Mgg"}'
2025-02-11 15:04:37.341 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 15:04:37.341 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54042/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.66.22/tcp/53588/p2p/16Uiu2HAkw3uU8DnQk4hzKCiDotekwvdi5VcZ97R3jH9scBGZZN9z"]'
2025-02-11 15:04:37.377 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:04:37.379 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54042/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.33.159/tcp/62446/p2p/16Uiu2HAm3qcpERpmhPHLkpUWMq37kyv7eQWE2MCRsP6ZMB6ct6AZ"]'
2025-02-11 15:04:37.406 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:04:37.407 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53587/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 15:04:37.416 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:04:37.416 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62445/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 15:04:37.420 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:04:37.422 DEBUG [src.node.waku_node] Stopping container with id 6655798e72d3
2025-02-11 15:04:38.186 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 15:04:38.186 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54042/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739286277422885376}}'
2025-02-11 15:04:38.999 ERROR [src.node.docker_mananger] Max retries reached for container 6655798e72d3. Exiting log stream.
2025-02-11 15:04:43.195 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:54042/lightpush/v1/message. Response content: b'Failed to request a message push: dial_failure'
2025-02-11 15:04:43.197 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 15:04:43.198 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 15:04:43.198 DEBUG [src.node.waku_node] Stopping container with id 5085458a95f0
2025-02-11 15:04:44.699 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 15:04:44.699 DEBUG [src.node.waku_node] Stopping container with id 629a0b638f93
2025-02-11 15:04:45.511 ERROR [src.node.docker_mananger] Max retries reached for container 5085458a95f0. Exiting log stream.
2025-02-11 15:04:45.927 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 15:04:45.930 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 15:04:45.936 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 15:04:45.943 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 15:04:45.948 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
