2025-02-11 15:06:14.402 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 15:06:14.402 DEBUG [tests.conftest] Running test: test_store_with_unknown_content_topic with id: 2025-02-11_15-06-14__f479a366-f392-41b7-a4ce-6aa9cbfda258
2025-02-11 15:06:14.402 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 15:06:14.403 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-11 15:06:14.403 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-11 15:06:14.409 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 15:06:14.409 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-11_15-06-14__f479a366-f392-41b7-a4ce-6aa9cbfda258__wakuorg_nwaku:latest.log
2025-02-11 15:06:14.409 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 15:06:14.410 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 15:06:14.411 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 15:06:14.411 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.198.233
2025-02-11 15:06:14.411 DEBUG [src.node.docker_mananger] Generated ports ['2055', '2056', '2057', '2058', '2059']
2025-02-11 15:06:14.411 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 15:06:14.412 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 15:06:14.412 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 15:06:14.412 DEBUG [src.node.docker_mananger] docker run -i -t -p 2055:2055 -p 2056:2056 -p 2057:2057 -p 2058:2058 -p 2059:2059 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2057 --rest-port=2055 --tcp-port=2056 --discv5-udp-port=2058 --rest-address=0.0.0.0 --nat=extip:172.18.198.233 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e591d264a6cbccf09c29f0d72ed2d7eb3a0dfcbcbfc910bbeb5f9dfaea1de4fa --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2059 --metrics-logging=true --store=true --relay=true
2025-02-11 15:06:14.634 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.198.233 waku 3752443aa3f25966797b87fcb95af5e328624409f66fb4859742964349aa20f3
2025-02-11 15:06:14.690 DEBUG [src.node.docker_mananger] Container started with ID 3752443aa3f2. Setting up logs at ./log/docker/publishing_node1_2025-02-11_15-06-14__f479a366-f392-41b7-a4ce-6aa9cbfda258__wakuorg_nwaku:latest.log
2025-02-11 15:06:14.691 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 2055
2025-02-11 15:06:14.691 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 15:06:15.204 ERROR [src.node.docker_mananger] Max retries reached for container 2aab43e9f7e2. Exiting log stream.
2025-02-11 15:06:15.691 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2055/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:06:15.694 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 15:06:15.694 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 15:06:15.695 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2055/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:06:15.697 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.198.233/tcp/2056/p2p/16Uiu2HAmBCCPpVc1DYpL9BCYA4NriiTKsTX4qFHmsRRiKovvqeht","/ip4/172.18.198.233/tcp/2057/ws/p2p/16Uiu2HAmBCCPpVc1DYpL9BCYA4NriiTKsTX4qFHmsRRiKovvqeht"],"enrUri":"enr:-L24QEULr5wNf1MU33Kz8_jTFj75yeiW_scXB-_dWJN38ZeOGHXcgOY0gEeu2BwxoPq9KHZ-CPme9VV_OAUv7UFQ_rQCgmlkgnY0gmlwhKwSxumKbXVsdGlhZGRyc5YACASsEsbpBggIAAoErBLG6QYICd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC6kc_vcvwPlrouIdCQf2v0KeZfCZlsrKXT94DKI4NSueDdGNwgggIg3VkcIIICoV3YWt1MgM"}'
2025-02-11 15:06:15.697 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 15:06:15.704 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 15:06:15.704 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-11_15-06-14__f479a366-f392-41b7-a4ce-6aa9cbfda258__wakuorg_nwaku:latest.log
2025-02-11 15:06:15.704 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 15:06:15.705 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 15:06:15.706 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 15:06:15.706 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.140.93
2025-02-11 15:06:15.706 DEBUG [src.node.docker_mananger] Generated ports ['14939', '14940', '14941', '14942', '14943']
2025-02-11 15:06:15.706 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 15:06:15.707 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 15:06:15.707 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 15:06:15.707 DEBUG [src.node.docker_mananger] docker run -i -t -p 14939:14939 -p 14940:14940 -p 14941:14941 -p 14942:14942 -p 14943:14943 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14941 --rest-port=14939 --tcp-port=14940 --discv5-udp-port=14942 --rest-address=0.0.0.0 --nat=extip:172.18.140.93 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=acb5264b87df47b1c7acee33aaecd62c7fe3f4d12ad9a17a4e7cf1afe1e819e4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14943 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QEULr5wNf1MU33Kz8_jTFj75yeiW_scXB-_dWJN38ZeOGHXcgOY0gEeu2BwxoPq9KHZ-CPme9VV_OAUv7UFQ_rQCgmlkgnY0gmlwhKwSxumKbXVsdGlhZGRyc5YACASsEsbpBggIAAoErBLG6QYICd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC6kc_vcvwPlrouIdCQf2v0KeZfCZlsrKXT94DKI4NSueDdGNwgggIg3VkcIIICoV3YWt1MgM --storenode=/ip4/172.18.198.233/tcp/2056/p2p/16Uiu2HAmBCCPpVc1DYpL9BCYA4NriiTKsTX4qFHmsRRiKovvqeht --store=true --relay=true
2025-02-11 15:06:15.931 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.140.93 waku 023ebc828845d199e4da365b8b2f83da3870a3668187ef63f3a2151269070627
2025-02-11 15:06:15.982 DEBUG [src.node.docker_mananger] Container started with ID 023ebc828845. Setting up logs at ./log/docker/store_node1_2025-02-11_15-06-14__f479a366-f392-41b7-a4ce-6aa9cbfda258__wakuorg_nwaku:latest.log
2025-02-11 15:06:15.982 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 14939
2025-02-11 15:06:15.982 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 15:06:16.983 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14939/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:06:16.986 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 15:06:16.986 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 15:06:16.986 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14939/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:06:16.988 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.140.93/tcp/14940/p2p/16Uiu2HAmVienxDDKwHUjM8ggjyP1HfXvgnc9bpe2Hc8EEBCAxnNj","/ip4/172.18.140.93/tcp/14941/ws/p2p/16Uiu2HAmVienxDDKwHUjM8ggjyP1HfXvgnc9bpe2Hc8EEBCAxnNj"],"enrUri":"enr:-L24QP0SRYLMpy7D7b-PTODgPbja6XDMHGG8p8w5JVTH0uy3dH-dkamZkO_MCBK-Bet0mXj1i-sISuvXKtRW3fL42WYCgmlkgnY0gmlwhKwSjF2KbXVsdGlhZGRyc5YACASsEoxdBjpcAAoErBKMXQY6Xd0DgnJzhQADAQAAiXNlY3AyNTZrMaED_YbjH_gYc99kiSjEJ16hhbxBEIHQtg3rmRGPMU60_EiDdGNwgjpcg3VkcII6XoV3YWt1MgM"}'
2025-02-11 15:06:16.988 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 15:06:16.989 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14939/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.198.233/tcp/2056/p2p/16Uiu2HAmBCCPpVc1DYpL9BCYA4NriiTKsTX4qFHmsRRiKovvqeht"]'
2025-02-11 15:06:16.991 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:06:16.991 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2055/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 15:06:16.994 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:06:16.994 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14939/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 15:06:16.996 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:06:16.997 DEBUG [src.steps.store] Relaying message
2025-02-11 15:06:16.997 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2055/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 15:06:17.002 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:06:17.004 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 15:06:17.204 DEBUG [src.steps.store] Relaying message
2025-02-11 15:06:17.205 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2055/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2025-02-11 15:06:17.211 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:06:17.211 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 15:06:17.412 DEBUG [src.steps.store] Relaying message
2025-02-11 15:06:17.412 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2055/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-11 15:06:17.418 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:06:17.419 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 15:06:17.620 DEBUG [src.steps.store] Relaying message
2025-02-11 15:06:17.621 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2055/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 15:06:17.627 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:06:17.627 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 15:06:17.828 DEBUG [src.steps.store] Relaying message
2025-02-11 15:06:17.829 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2055/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2025-02-11 15:06:17.835 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:06:17.835 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 15:06:18.036 DEBUG [src.steps.store] Relaying message
2025-02-11 15:06:18.036 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2055/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-11 15:06:18.043 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:06:18.044 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 15:06:18.245 DEBUG [src.steps.store] Relaying message
2025-02-11 15:06:18.245 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2055/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-11 15:06:18.251 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:06:18.251 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 15:06:18.452 DEBUG [src.steps.store] Relaying message
2025-02-11 15:06:18.453 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2055/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-11 15:06:18.459 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:06:18.460 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 15:06:18.661 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2055/store/v3/messages?contentTopics=test&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:06:18.665 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
2025-02-11 15:06:18.665 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14939/store/v3/messages?contentTopics=test&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:06:18.668 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
2025-02-11 15:06:18.671 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 15:06:18.672 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 15:06:18.672 DEBUG [src.node.waku_node] Stopping container with id 3752443aa3f2
2025-02-11 15:06:19.248 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 15:06:19.249 DEBUG [src.node.waku_node] Stopping container with id 023ebc828845
2025-02-11 15:06:20.062 ERROR [src.node.docker_mananger] Max retries reached for container 3752443aa3f2. Exiting log stream.
2025-02-11 15:06:20.759 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 15:06:20.760 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 15:06:20.767 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 15:06:20.773 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
