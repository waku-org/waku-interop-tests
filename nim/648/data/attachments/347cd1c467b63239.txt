2025-02-11 15:07:42.219 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 15:07:42.220 DEBUG [tests.conftest] Running test: test_publish_without_subscribing_via_api_works with id: 2025-02-11_15-07-42__22df0b39-cac9-45a5-9212-66f542bce7d4
2025-02-11 15:07:42.220 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 15:07:42.220 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-11 15:07:42.220 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2025-02-11 15:07:42.228 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 15:07:42.228 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-11_15-07-42__22df0b39-cac9-45a5-9212-66f542bce7d4__wakuorg_nwaku:latest.log
2025-02-11 15:07:42.228 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 15:07:42.228 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 15:07:42.230 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 15:07:42.230 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.40.204
2025-02-11 15:07:42.230 DEBUG [src.node.docker_mananger] Generated ports ['18542', '18543', '18544', '18545', '18546']
2025-02-11 15:07:42.230 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 15:07:42.230 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 15:07:42.231 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 15:07:42.231 DEBUG [src.node.docker_mananger] docker run -i -t -p 18542:18542 -p 18543:18543 -p 18544:18544 -p 18545:18545 -p 18546:18546 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18544 --rest-port=18542 --tcp-port=18543 --discv5-udp-port=18545 --rest-address=0.0.0.0 --nat=extip:172.18.40.204 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=f9dfafdbcf3ecd1e66711aabfeccf064f9dc95aebc0dfedcfdfb742546d973fb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18546 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto
2025-02-11 15:07:42.467 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.40.204 waku 5feaf951cde456c0e9cead5afe3117108313dd83561405f4e0aeeaa17ea52dba
2025-02-11 15:07:42.522 DEBUG [src.node.docker_mananger] Container started with ID 5feaf951cde4. Setting up logs at ./log/docker/node1_2025-02-11_15-07-42__22df0b39-cac9-45a5-9212-66f542bce7d4__wakuorg_nwaku:latest.log
2025-02-11 15:07:42.523 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 18542
2025-02-11 15:07:42.524 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 15:07:42.887 ERROR [src.node.docker_mananger] Max retries reached for container d2df64078f7c. Exiting log stream.
2025-02-11 15:07:43.525 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18542/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:07:43.528 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 15:07:43.528 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 15:07:43.528 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18542/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:07:43.530 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.40.204/tcp/18543/p2p/16Uiu2HAmVS4dZBhqR5jAafA4SbR1JSCrDn3RPZgfVTFNjkmD6WKL","/ip4/172.18.40.204/tcp/18544/ws/p2p/16Uiu2HAmVS4dZBhqR5jAafA4SbR1JSCrDn3RPZgfVTFNjkmD6WKL"],"enrUri":"enr:-L24QC6delbq_EqsJZjWT48Zou-tOjfgb3ilqsNbQEn0GyaIRz-Knh3JwKtyFdFd_unY8wA3gAfSOBoDpiGK6ZGMqGgCgmlkgnY0gmlwhKwSKMyKbXVsdGlhZGRyc5YACASsEijMBkhvAAoErBIozAZIcN0DgnJzhQACAQAAiXNlY3AyNTZrMaED-Ub3ltXhPFyKs2ExvyM9v05UUqpwlkYuCj1oG3ApxwODdGNwgkhvg3VkcIJIcYV3YWt1MgU"}'
2025-02-11 15:07:43.530 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 15:07:43.537 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 15:07:43.537 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-11_15-07-42__22df0b39-cac9-45a5-9212-66f542bce7d4__wakuorg_nwaku:latest.log
2025-02-11 15:07:43.537 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 15:07:43.537 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 15:07:43.539 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 15:07:43.539 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.115.27
2025-02-11 15:07:43.539 DEBUG [src.node.docker_mananger] Generated ports ['37862', '37863', '37864', '37865', '37866']
2025-02-11 15:07:43.539 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 15:07:43.539 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 15:07:43.539 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 15:07:43.539 DEBUG [src.node.docker_mananger] docker run -i -t -p 37862:37862 -p 37863:37863 -p 37864:37864 -p 37865:37865 -p 37866:37866 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37864 --rest-port=37862 --tcp-port=37863 --discv5-udp-port=37865 --rest-address=0.0.0.0 --nat=extip:172.18.115.27 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=effcc52e6f2ef914c0bb540a508f4c6f45d2bb1ab9f5a1c7ee48afaa0ea0e738 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37866 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QC6delbq_EqsJZjWT48Zou-tOjfgb3ilqsNbQEn0GyaIRz-Knh3JwKtyFdFd_unY8wA3gAfSOBoDpiGK6ZGMqGgCgmlkgnY0gmlwhKwSKMyKbXVsdGlhZGRyc5YACASsEijMBkhvAAoErBIozAZIcN0DgnJzhQACAQAAiXNlY3AyNTZrMaED-Ub3ltXhPFyKs2ExvyM9v05UUqpwlkYuCj1oG3ApxwODdGNwgkhvg3VkcIJIcYV3YWt1MgU --content-topic=/myapp/1/latest/proto
2025-02-11 15:07:43.791 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.115.27 waku 1e69b1a1f9e888db19e7f71b3545d519b10496f6ab98ee3576f58b8393f93c50
2025-02-11 15:07:43.837 DEBUG [src.node.docker_mananger] Container started with ID 1e69b1a1f9e8. Setting up logs at ./log/docker/node2_2025-02-11_15-07-42__22df0b39-cac9-45a5-9212-66f542bce7d4__wakuorg_nwaku:latest.log
2025-02-11 15:07:43.838 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 37862
2025-02-11 15:07:43.839 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 15:07:44.839 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37862/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:07:44.862 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 15:07:44.863 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 15:07:44.864 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37862/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:07:44.871 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.115.27/tcp/37863/p2p/16Uiu2HAmHsUKy2vH17BjuszXD85pzQjQMWYiRj8M7hU67tf7aSqC","/ip4/172.18.115.27/tcp/37864/ws/p2p/16Uiu2HAmHsUKy2vH17BjuszXD85pzQjQMWYiRj8M7hU67tf7aSqC"],"enrUri":"enr:-L24QKvDtEh1cK8m8PWxi_sdDDheKQQh-REBMh8BqAPDHSZlaTcaTq8xY1fjRyPJsBaxIPVjcWeFE83QYJNdCyftSLkCgmlkgnY0gmlwhKwScxuKbXVsdGlhZGRyc5YACASsEnMbBpPnAAoErBJzGwaT6N0DgnJzhQACAQAAiXNlY3AyNTZrMaEDTX0Jysc6SOf-OZHrYK3B925dsK8uQMb66mRfSm9b53eDdGNwgpPng3VkcIKT6YV3YWt1MgE"}'
2025-02-11 15:07:44.872 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 15:07:44.872 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37862/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.40.204/tcp/18543/p2p/16Uiu2HAmVS4dZBhqR5jAafA4SbR1JSCrDn3RPZgfVTFNjkmD6WKL"]'
2025-02-11 15:07:44.875 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:07:44.875 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18542/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 15:07:44.880 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:07:44.881 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37862/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 15:07:44.886 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:07:44.889 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 15:07:44.890 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 15:07:44.890 DEBUG [src.node.waku_node] Stopping container with id 5feaf951cde4
2025-02-11 15:07:46.000 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 15:07:46.000 DEBUG [src.node.waku_node] Stopping container with id 1e69b1a1f9e8
2025-02-11 15:07:46.813 ERROR [src.node.docker_mananger] Max retries reached for container 5feaf951cde4. Exiting log stream.
2025-02-11 15:07:47.525 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 15:07:47.527 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 15:07:47.533 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 15:07:47.537 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
