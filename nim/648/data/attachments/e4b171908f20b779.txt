2025-02-11 15:10:53.752 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 15:10:53.752 DEBUG [tests.conftest] Running test: test_light_push_with_missing_pubsub_topics with id: 2025-02-11_15-10-53__60362b44-dc81-4bb2-94b9-3e06ce993861
2025-02-11 15:10:53.753 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 15:10:53.753 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-11 15:10:53.760 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 15:10:53.760 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-11_15-10-53__60362b44-dc81-4bb2-94b9-3e06ce993861__wakuorg_nwaku:latest.log
2025-02-11 15:10:53.760 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 15:10:53.760 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 15:10:53.762 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 15:10:53.762 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.108.155
2025-02-11 15:10:53.762 DEBUG [src.node.docker_mananger] Generated ports ['50736', '50737', '50738', '50739', '50740']
2025-02-11 15:10:53.762 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 15:10:53.762 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 15:10:53.762 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 15:10:53.762 DEBUG [src.node.docker_mananger] docker run -i -t -p 50736:50736 -p 50737:50737 -p 50738:50738 -p 50739:50739 -p 50740:50740 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=50738 --rest-port=50736 --tcp-port=50737 --discv5-udp-port=50739 --rest-address=0.0.0.0 --nat=extip:172.18.108.155 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d67676ee0daceb662aac1b646cc99a2caf16465fd7d061ba47dda0a1acd1ae15 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=50740 --metrics-logging=true --lightpush=true --relay=true
2025-02-11 15:10:54.006 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.108.155 waku 7aa41335c57e9ee8607863fa08bead5f348fc683fce40f837a81b611a14c9d18
2025-02-11 15:10:54.053 DEBUG [src.node.docker_mananger] Container started with ID 7aa41335c57e. Setting up logs at ./log/docker/receiving_node1_2025-02-11_15-10-53__60362b44-dc81-4bb2-94b9-3e06ce993861__wakuorg_nwaku:latest.log
2025-02-11 15:10:54.054 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 50736
2025-02-11 15:10:54.054 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 15:10:54.390 ERROR [src.node.docker_mananger] Max retries reached for container f76090058386. Exiting log stream.
2025-02-11 15:10:55.055 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50736/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:10:55.058 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 15:10:55.058 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 15:10:55.058 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50736/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:10:55.061 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.108.155/tcp/50737/p2p/16Uiu2HAm3eXrSx7aWafDrDdtRdvdE5mrZwJUb7nBZtPv4riyfzBQ","/ip4/172.18.108.155/tcp/50738/ws/p2p/16Uiu2HAm3eXrSx7aWafDrDdtRdvdE5mrZwJUb7nBZtPv4riyfzBQ"],"enrUri":"enr:-L24QKH8kH8KEA8SsUUwqVFeWbD9eEdapARi3Bq6RmfRtEKCEjhsDEcoxa75U8gqL5qA7J3TLdlrR2T0D_Hla7yG7hMCgmlkgnY0gmlwhKwSbJuKbXVsdGlhZGRyc5YACASsEmybBsYxAAoErBJsmwbGMt0DgnJzhQADAQAAiXNlY3AyNTZrMaECeijbazLzovg4IpbXSRgC2qcnHZP8H2rNYpBcU3Bwki-DdGNwgsYxg3VkcILGM4V3YWt1Mgk"}'
2025-02-11 15:10:55.061 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 15:10:55.067 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 15:10:55.068 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-11_15-10-53__60362b44-dc81-4bb2-94b9-3e06ce993861__wakuorg_nwaku:latest.log
2025-02-11 15:10:55.068 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 15:10:55.068 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 15:10:55.069 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 15:10:55.069 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.110.135
2025-02-11 15:10:55.069 DEBUG [src.node.docker_mananger] Generated ports ['11994', '11995', '11996', '11997', '11998']
2025-02-11 15:10:55.070 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 15:10:55.070 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 15:10:55.070 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 15:10:55.070 DEBUG [src.node.docker_mananger] docker run -i -t -p 11994:11994 -p 11995:11995 -p 11996:11996 -p 11997:11997 -p 11998:11998 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=11996 --rest-port=11994 --tcp-port=11995 --discv5-udp-port=11997 --rest-address=0.0.0.0 --nat=extip:172.18.110.135 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4ecfecdaa233ece4d0c0e52aced0eb9144e8c88e8db1c29e9bcaaa38d6ba3fa3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=11998 --metrics-logging=true --lightpush=false --relay=true
2025-02-11 15:10:55.308 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.110.135 waku 35098927e510cd0bb9edd9a1a44318fa98f5eee218bf534f38ad8eb7e03f05cd
2025-02-11 15:10:55.355 DEBUG [src.node.docker_mananger] Container started with ID 35098927e510. Setting up logs at ./log/docker/receiving_node2_2025-02-11_15-10-53__60362b44-dc81-4bb2-94b9-3e06ce993861__wakuorg_nwaku:latest.log
2025-02-11 15:10:55.355 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 11994
2025-02-11 15:10:55.355 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 15:10:56.356 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11994/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:10:56.359 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 15:10:56.359 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 15:10:56.359 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11994/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:10:56.361 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.110.135/tcp/11995/p2p/16Uiu2HAmTGBisCcXzZ3M3v6ya1ov1f6guzs4BcvbxZTr7j1kmNyh","/ip4/172.18.110.135/tcp/11996/ws/p2p/16Uiu2HAmTGBisCcXzZ3M3v6ya1ov1f6guzs4BcvbxZTr7j1kmNyh"],"enrUri":"enr:-L24QHNFx41sJSo4RnAqPT6BrcbDHFP5jg39O_VmcKvKbxULHMIa7EEK7RFq83yabaIv7Djo7clz2kTMI5rdZ-PX_cACgmlkgnY0gmlwhKwSboeKbXVsdGlhZGRyc5YACASsEm6HBi7bAAoErBJuhwYu3N0DgnJzhQADAQAAiXNlY3AyNTZrMaED2QfNvHYw0ML_tHwg4bjfKkmp7dQyR39xQ2sq5On7w9yDdGNwgi7bg3VkcIIu3YV3YWt1MgE"}'
2025-02-11 15:10:56.361 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 15:10:56.362 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11994/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.108.155/tcp/50737/p2p/16Uiu2HAm3eXrSx7aWafDrDdtRdvdE5mrZwJUb7nBZtPv4riyfzBQ"]'
2025-02-11 15:10:56.401 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:10:56.421 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 15:10:56.421 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-11_15-10-53__60362b44-dc81-4bb2-94b9-3e06ce993861__wakuorg_nwaku:latest.log
2025-02-11 15:10:56.423 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 15:10:56.424 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 15:10:56.428 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 15:10:56.428 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.253.126
2025-02-11 15:10:56.428 DEBUG [src.node.docker_mananger] Generated ports ['56509', '56510', '56511', '56512', '56513']
2025-02-11 15:10:56.428 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 15:10:56.428 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 15:10:56.428 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 15:10:56.429 DEBUG [src.node.docker_mananger] docker run -i -t -p 56509:56509 -p 56510:56510 -p 56511:56511 -p 56512:56512 -p 56513:56513 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56511 --rest-port=56509 --tcp-port=56510 --discv5-udp-port=56512 --rest-address=0.0.0.0 --nat=extip:172.18.253.126 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ef1882bdbdaab9fe8031e4c44a5aac4706cbe8d7be8e6ffe1b346b5fa4eff7d0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56513 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QKH8kH8KEA8SsUUwqVFeWbD9eEdapARi3Bq6RmfRtEKCEjhsDEcoxa75U8gqL5qA7J3TLdlrR2T0D_Hla7yG7hMCgmlkgnY0gmlwhKwSbJuKbXVsdGlhZGRyc5YACASsEmybBsYxAAoErBJsmwbGMt0DgnJzhQADAQAAiXNlY3AyNTZrMaECeijbazLzovg4IpbXSRgC2qcnHZP8H2rNYpBcU3Bwki-DdGNwgsYxg3VkcILGM4V3YWt1Mgk --lightpushnode=/ip4/172.18.108.155/tcp/50737/p2p/16Uiu2HAm3eXrSx7aWafDrDdtRdvdE5mrZwJUb7nBZtPv4riyfzBQ --lightpush=true --relay=false
2025-02-11 15:10:56.649 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.253.126 waku 845c51f60c32bfcc73d0500a8017928dfc6e88156ae002582385f6b6221b3610
2025-02-11 15:10:56.695 DEBUG [src.node.docker_mananger] Container started with ID 845c51f60c32. Setting up logs at ./log/docker/lightpush_node1_2025-02-11_15-10-53__60362b44-dc81-4bb2-94b9-3e06ce993861__wakuorg_nwaku:latest.log
2025-02-11 15:10:56.695 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 56509
2025-02-11 15:10:56.695 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 15:10:57.696 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56509/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:10:57.699 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 15:10:57.699 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 15:10:57.699 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56509/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:10:57.701 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.253.126/tcp/56510/p2p/16Uiu2HAmUeo2Rf3s3r7qVEmZ7RSm7iuLqQXyjiUVkBFyzo8ZdkvF","/ip4/172.18.253.126/tcp/56511/ws/p2p/16Uiu2HAmUeo2Rf3s3r7qVEmZ7RSm7iuLqQXyjiUVkBFyzo8ZdkvF"],"enrUri":"enr:-L24QPWf7NlhTUNm5blOvuF1qHlpEva7_IKb4sk42wadz9chWyffdlBY4wZKlHy4yx73E_sXeotu-wR5Le5uv2NW5LACgmlkgnY0gmlwhKwS_X6KbXVsdGlhZGRyc5YACASsEv1-Bty-AAoErBL9fgbcv90DgnJzhQADAQAAiXNlY3AyNTZrMaED7a4vcd5gAebcwF54qQCDeZyOEceycs7s9zNKevwjQhyDdGNwgty-g3VkcILcwIV3YWt1Mgg"}'
2025-02-11 15:10:57.702 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 15:10:57.702 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56509/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.108.155/tcp/50737/p2p/16Uiu2HAm3eXrSx7aWafDrDdtRdvdE5mrZwJUb7nBZtPv4riyfzBQ"]'
2025-02-11 15:10:57.737 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:10:57.738 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56509/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.110.135/tcp/11995/p2p/16Uiu2HAmTGBisCcXzZ3M3v6ya1ov1f6guzs4BcvbxZTr7j1kmNyh"]'
2025-02-11 15:10:57.767 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:10:57.770 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50736/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 15:10:57.776 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:10:57.776 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11994/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 15:10:57.780 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:10:57.784 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56509/lightpush/v1/message" -H "Content-Type: application/json" -d '{"message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739286657784069632}}'
2025-02-11 15:10:57.793 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:56509/lightpush/v1/message. Response content: b'Failed to request a message push: not_published_to_any_peer'
2025-02-11 15:10:57.794 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 15:10:57.795 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 15:10:57.795 DEBUG [src.node.waku_node] Stopping container with id 7aa41335c57e
2025-02-11 15:10:58.556 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 15:10:58.556 DEBUG [src.node.waku_node] Stopping container with id 35098927e510
2025-02-11 15:10:59.368 ERROR [src.node.docker_mananger] Max retries reached for container 7aa41335c57e. Exiting log stream.
2025-02-11 15:11:00.076 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 15:11:00.076 DEBUG [src.node.waku_node] Stopping container with id 845c51f60c32
2025-02-11 15:11:00.893 ERROR [src.node.docker_mananger] Max retries reached for container 35098927e510. Exiting log stream.
2025-02-11 15:11:01.566 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 15:11:01.569 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 15:11:01.575 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 15:11:01.582 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 15:11:01.588 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
