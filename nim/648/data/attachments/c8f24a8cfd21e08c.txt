2025-02-11 15:02:34.352 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 15:02:34.353 DEBUG [tests.conftest] Running test: test_lightpush with id: 2025-02-11_15-02-34__6a0ed456-94c9-4608-a790-968dffe8d925
2025-02-11 15:02:34.353 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 15:02:34.353 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-11 15:02:34.353 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-11 15:02:34.354 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-11 15:02:34.354 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-11 15:02:34.360 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 15:02:34.361 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-11_15-02-34__6a0ed456-94c9-4608-a790-968dffe8d925__wakuorg_nwaku:latest.log
2025-02-11 15:02:34.361 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 15:02:34.361 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 15:02:34.362 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 15:02:34.362 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.132.6
2025-02-11 15:02:34.363 DEBUG [src.node.docker_mananger] Generated ports ['39567', '39568', '39569', '39570', '39571']
2025-02-11 15:02:34.363 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 15:02:34.363 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 15:02:34.363 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 15:02:34.363 DEBUG [src.node.docker_mananger] docker run -i -t -p 39567:39567 -p 39568:39568 -p 39569:39569 -p 39570:39570 -p 39571:39571 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39569 --rest-port=39567 --tcp-port=39568 --discv5-udp-port=39570 --rest-address=0.0.0.0 --nat=extip:172.18.132.6 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d6129f0498f6ecb6a9f9bf0adcf30d640c4a69e9baf4b1af70ea72bfefe4ef62 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39571 --metrics-logging=true --lightpush=true --relay=true
2025-02-11 15:02:34.595 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.132.6 waku 90eb4157502cedd2bd70172682364197a185f98ab1220ab6b1ce58f4b6b91965
2025-02-11 15:02:34.641 DEBUG [src.node.docker_mananger] Container started with ID 90eb4157502c. Setting up logs at ./log/docker/node1_2025-02-11_15-02-34__6a0ed456-94c9-4608-a790-968dffe8d925__wakuorg_nwaku:latest.log
2025-02-11 15:02:34.641 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 39567
2025-02-11 15:02:34.641 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 15:02:35.151 ERROR [src.node.docker_mananger] Max retries reached for container 67478849dc41. Exiting log stream.
2025-02-11 15:02:35.643 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39567/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:02:35.646 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 15:02:35.646 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 15:02:35.646 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39567/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:02:35.649 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.132.6/tcp/39568/p2p/16Uiu2HAmHyiMsjB7i8ZJqeW4VYo12Bj5bjfzHQHcxKhKRPp4eV46","/ip4/172.18.132.6/tcp/39569/ws/p2p/16Uiu2HAmHyiMsjB7i8ZJqeW4VYo12Bj5bjfzHQHcxKhKRPp4eV46"],"enrUri":"enr:-L24QHCPLN1eNwmn3i0E5o_er-HBzRQXPiUoNSXkjM9D-IPuCTRf1bY12pWAC7SYRY41dLWrerrHznxEfycUWk-kb8gCgmlkgnY0gmlwhKwShAaKbXVsdGlhZGRyc5YACASsEoQGBpqQAAoErBKEBgaakd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDTxZj4aKnX_zIfR8p8dO_Ffk7psu8GnKUsA5os78nL3uDdGNwgpqQg3VkcIKakoV3YWt1Mgk"}'
2025-02-11 15:02:35.649 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 15:02:35.655 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 15:02:35.655 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-11_15-02-34__6a0ed456-94c9-4608-a790-968dffe8d925__wakuorg_nwaku:latest.log
2025-02-11 15:02:35.655 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 15:02:35.656 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 15:02:35.657 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 15:02:35.657 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.249.238
2025-02-11 15:02:35.657 DEBUG [src.node.docker_mananger] Generated ports ['47996', '47997', '47998', '47999', '48000']
2025-02-11 15:02:35.657 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 15:02:35.658 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 15:02:35.658 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 15:02:35.658 DEBUG [src.node.docker_mananger] docker run -i -t -p 47996:47996 -p 47997:47997 -p 47998:47998 -p 47999:47999 -p 48000:48000 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=47998 --rest-port=47996 --tcp-port=47997 --discv5-udp-port=47999 --rest-address=0.0.0.0 --nat=extip:172.18.249.238 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1b4f7ca4de466ebadcc5249eadcef42fbf8c3fb07b5bab00aaccda8962b5bfdf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=48000 --metrics-logging=true --lightpush=false --relay=true --discv5-bootstrap-node=enr:-L24QHCPLN1eNwmn3i0E5o_er-HBzRQXPiUoNSXkjM9D-IPuCTRf1bY12pWAC7SYRY41dLWrerrHznxEfycUWk-kb8gCgmlkgnY0gmlwhKwShAaKbXVsdGlhZGRyc5YACASsEoQGBpqQAAoErBKEBgaakd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDTxZj4aKnX_zIfR8p8dO_Ffk7psu8GnKUsA5os78nL3uDdGNwgpqQg3VkcIKakoV3YWt1Mgk
2025-02-11 15:02:35.879 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.249.238 waku af27a9d9b82dc929b4d584d0b02d7778151100a8ffd36dcde5046e50ea986e49
2025-02-11 15:02:35.926 DEBUG [src.node.docker_mananger] Container started with ID af27a9d9b82d. Setting up logs at ./log/docker/node1_2025-02-11_15-02-34__6a0ed456-94c9-4608-a790-968dffe8d925__wakuorg_nwaku:latest.log
2025-02-11 15:02:35.927 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 47996
2025-02-11 15:02:35.927 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 15:02:36.928 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47996/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:02:36.931 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 15:02:36.931 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 15:02:36.932 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47996/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:02:36.939 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.249.238/tcp/47997/p2p/16Uiu2HAmJ4cpnQ6UpehijHU2orNdbgLsXBBSdVAZUb8cRoHmTQP9","/ip4/172.18.249.238/tcp/47998/ws/p2p/16Uiu2HAmJ4cpnQ6UpehijHU2orNdbgLsXBBSdVAZUb8cRoHmTQP9"],"enrUri":"enr:-L24QEIqyQq81PNcBsdEGIz7-nG2ylNa5pmwWmiWmAcMePBBFGn2LtijbzZiwCNYLbqlvAM1a12702wp0I5CW4_dSGACgmlkgnY0gmlwhKwS-e6KbXVsdGlhZGRyc5YACASsEvnuBrt9AAoErBL57ga7ft0DgnJzhQADAQAAiXNlY3AyNTZrMaEDUFgI2K4f60Sl8DWF5yzZCwBzCJtiImNDmfgL9cQtiJCDdGNwgrt9g3VkcIK7f4V3YWt1MgE"}'
2025-02-11 15:02:36.942 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 15:02:36.949 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 15:02:36.949 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-11_15-02-34__6a0ed456-94c9-4608-a790-968dffe8d925__wakuorg_nwaku:latest.log
2025-02-11 15:02:36.949 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 15:02:36.949 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 15:02:36.951 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 15:02:36.951 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.6.5
2025-02-11 15:02:36.951 DEBUG [src.node.docker_mananger] Generated ports ['9163', '9164', '9165', '9166', '9167']
2025-02-11 15:02:36.951 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 15:02:36.951 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 15:02:36.951 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 15:02:36.951 DEBUG [src.node.docker_mananger] docker run -i -t -p 9163:9163 -p 9164:9164 -p 9165:9165 -p 9166:9166 -p 9167:9167 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=9165 --rest-port=9163 --tcp-port=9164 --discv5-udp-port=9166 --rest-address=0.0.0.0 --nat=extip:172.18.6.5 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4fdaa4308dc8ccb19dbf996c47d235fca9cb51c5d81a0dca8c2ababdad6e0dec --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=9167 --metrics-logging=true --lightpush=true --relay=false --discv5-bootstrap-node=enr:-L24QHCPLN1eNwmn3i0E5o_er-HBzRQXPiUoNSXkjM9D-IPuCTRf1bY12pWAC7SYRY41dLWrerrHznxEfycUWk-kb8gCgmlkgnY0gmlwhKwShAaKbXVsdGlhZGRyc5YACASsEoQGBpqQAAoErBKEBgaakd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDTxZj4aKnX_zIfR8p8dO_Ffk7psu8GnKUsA5os78nL3uDdGNwgpqQg3VkcIKakoV3YWt1Mgk --lightpushnode=/ip4/172.18.132.6/tcp/39568/p2p/16Uiu2HAmHyiMsjB7i8ZJqeW4VYo12Bj5bjfzHQHcxKhKRPp4eV46
2025-02-11 15:02:37.200 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.6.5 waku 31164f5539b79e21b5f001f92eaad791e87e3c8c23008996178806093f0ef856
2025-02-11 15:02:37.254 DEBUG [src.node.docker_mananger] Container started with ID 31164f5539b7. Setting up logs at ./log/docker/node1_2025-02-11_15-02-34__6a0ed456-94c9-4608-a790-968dffe8d925__wakuorg_nwaku:latest.log
2025-02-11 15:02:37.254 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 9163
2025-02-11 15:02:37.254 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 15:02:38.255 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9163/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:02:38.258 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 15:02:38.258 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 15:02:38.258 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9163/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:02:38.260 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.6.5/tcp/9164/p2p/16Uiu2HAm657a9ms8cAfGh2B8jNXJPfafgV8jcNwyH5qd9S1vgPj4","/ip4/172.18.6.5/tcp/9165/ws/p2p/16Uiu2HAm657a9ms8cAfGh2B8jNXJPfafgV8jcNwyH5qd9S1vgPj4"],"enrUri":"enr:-L24QABO2NFhV1JnI8cfMc_5pu9AbbJN_-VunqA-EtHahcVTYCExB3r-cpSI4r925W9wd42EomplMVAT35PyvPCiMpACgmlkgnY0gmlwhKwSBgWKbXVsdGlhZGRyc5YACASsEgYFBiPMAAoErBIGBQYjzd0DgnJzhQADAQAAiXNlY3AyNTZrMaECnixL7l0nVtTHkN6ar958ScRP2LRZ9iBbvL68ysiMv0eDdGNwgiPMg3VkcIIjzoV3YWt1Mgg"}'
2025-02-11 15:02:38.260 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 15:02:38.261 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:39567/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 15:02:38.264 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:02:38.265 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47996/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 15:02:38.270 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:02:38.272 DEBUG [src.steps.light_push] Lightpushing message
2025-02-11 15:02:38.272 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9163/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": 1739286158272102912}}'
2025-02-11 15:02:38.324 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:02:38.324 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 15:02:38.425 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-11 15:02:38.425 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39567/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:02:38.428 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739286158272102912,"ephemeral":false}]'
2025-02-11 15:02:38.429 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-11 15:02:38.430 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47996/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:02:38.432 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739286158272102912,"ephemeral":false}]'
2025-02-11 15:02:38.435 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 15:02:38.435 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 15:02:38.436 DEBUG [src.node.waku_node] Stopping container with id 90eb4157502c
2025-02-11 15:02:39.088 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 15:02:39.090 DEBUG [src.node.waku_node] Stopping container with id af27a9d9b82d
2025-02-11 15:02:39.902 ERROR [src.node.docker_mananger] Max retries reached for container 90eb4157502c. Exiting log stream.
2025-02-11 15:02:40.615 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 15:02:40.615 DEBUG [src.node.waku_node] Stopping container with id 31164f5539b7
2025-02-11 15:02:41.426 ERROR [src.node.docker_mananger] Max retries reached for container af27a9d9b82d. Exiting log stream.
2025-02-11 15:02:42.133 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 15:02:42.134 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 15:02:42.142 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 15:02:42.150 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 15:02:42.157 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
