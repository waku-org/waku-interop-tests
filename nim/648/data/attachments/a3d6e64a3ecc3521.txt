[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_pubsub_topic_also_in_docker_flags[/waku/2/rs/2/0] with id: 2025-02-11_15-03-38__8d5a46ee-7788-4e4a-943c-91f476802871
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-02-11_15-03-38__8d5a46ee-7788-4e4a-943c-91f476802871__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.190.253
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['33604', '33605', '33606', '33607', '33608']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 33604:33604 -p 33605:33605 -p 33606:33606 -p 33607:33607 -p 33608:33608 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=33606 --rest-port=33604 --tcp-port=33605 --discv5-udp-port=33607 --rest-address=0.0.0.0 --nat=extip:172.18.190.253 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=fab7a7284b950cb8a62d6eac0b9e9dda2c41c0461b10aa4b8e2b698fd65d6a96 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=33608 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/2/0 --content-topic=/myapp/1/latest/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.190.253 waku 31440368192dd385a713e4331d8d0edd04e59424620ad7436de165b2ea3e9ed5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 31440368192d. Setting up logs at ./log/docker/node1_2025-02-11_15-03-38__8d5a46ee-7788-4e4a-943c-91f476802871__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 33604
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 17992f28e4d8. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33604/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33604/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.190.253/tcp/33605/p2p/16Uiu2HAm5fkxQiBgCHFMbbM5M6A6cKqKuhDoPN3pwyuDm4pZzKMN","/ip4/172.18.190.253/tcp/33606/ws/p2p/16Uiu2HAm5fkxQiBgCHFMbbM5M6A6cKqKuhDoPN3pwyuDm4pZzKMN"],"enrUri":"enr:-L24QCBpXBOaLEHuLuHTBfZftB5VPGWpewXcEs45ydF9l21UP9MXSb_k-fL2CytSLlOOTGGI2RWxyYCsmm2JZXVht3MCgmlkgnY0gmlwhKwSvv2KbXVsdGlhZGRyc5YACASsEr79BoNFAAoErBK-_QaDRt0DgnJzhQACAQAAiXNlY3AyNTZrMaECmDCgi48IAwRdhQOev9Oko5kZoyI6e5tQXVCsQC0k8y2DdGNwgoNFg3VkcIKDR4V3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-02-11_15-03-38__8d5a46ee-7788-4e4a-943c-91f476802871__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.254.65
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['61310', '61311', '61312', '61313', '61314']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 61310:61310 -p 61311:61311 -p 61312:61312 -p 61313:61313 -p 61314:61314 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61312 --rest-port=61310 --tcp-port=61311 --discv5-udp-port=61313 --rest-address=0.0.0.0 --nat=extip:172.18.254.65 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=bb1e05e82bfadec2c3b8a0badb415d3697787eca065697ccd7fca3e93ee2670e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61314 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QCBpXBOaLEHuLuHTBfZftB5VPGWpewXcEs45ydF9l21UP9MXSb_k-fL2CytSLlOOTGGI2RWxyYCsmm2JZXVht3MCgmlkgnY0gmlwhKwSvv2KbXVsdGlhZGRyc5YACASsEr79BoNFAAoErBK-_QaDRt0DgnJzhQACAQAAiXNlY3AyNTZrMaECmDCgi48IAwRdhQOev9Oko5kZoyI6e5tQXVCsQC0k8y2DdGNwgoNFg3VkcIKDR4V3YWt1MgU --pubsub-topic=/waku/2/rs/2/0 --content-topic=/myapp/1/latest/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.254.65 waku a10b2057f1a1c386524b5ae8455a4d9e2e594bb2e61d71f1002dd71549637be7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID a10b2057f1a1. Setting up logs at ./log/docker/node2_2025-02-11_15-03-38__8d5a46ee-7788-4e4a-943c-91f476802871__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 61310
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61310/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61310/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.254.65/tcp/61311/p2p/16Uiu2HAmTuPBshihhiYHniJ3M9nvbTxBpp2rRgqMv8EgQBMtbTc9","/ip4/172.18.254.65/tcp/61312/ws/p2p/16Uiu2HAmTuPBshihhiYHniJ3M9nvbTxBpp2rRgqMv8EgQBMtbTc9"],"enrUri":"enr:-L24QGE_6nfefSyYkbfCWuJ1X18zS5ITA4lvr1VVdoPyieOMGVjrwTyrRDi-yy3XIaBDv5Jac2C6DgFQRHfQgl9mP30CgmlkgnY0gmlwhKwS_kGKbXVsdGlhZGRyc5YACASsEv5BBu9_AAoErBL-QQbvgN0DgnJzhQACAQAAiXNlY3AyNTZrMaED4o9CA1B-wzv7zyiynTJtrdrRghLSztiDfFVMFyYxjp6DdGNwgu9_g3VkcILvgYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61310/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.190.253/tcp/33605/p2p/16Uiu2HAm5fkxQiBgCHFMbbM5M6A6cKqKuhDoPN3pwyuDm4pZzKMN"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33604/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61310/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33604/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33604/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739286221552673792,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61310/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739286221552673792,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 31440368192d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id a10b2057f1a1
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 31440368192d. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.