2025-02-11 15:06:20.776 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 15:06:20.776 DEBUG [tests.conftest] Running test: test_store_with_long_string_pubsub_topic with id: 2025-02-11_15-06-20__f0eef101-cc33-4b62-83f8-29735a6a4a00
2025-02-11 15:06:20.777 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 15:06:20.777 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-11 15:06:20.777 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-11 15:06:20.784 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 15:06:20.784 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-11_15-06-20__f0eef101-cc33-4b62-83f8-29735a6a4a00__wakuorg_nwaku:latest.log
2025-02-11 15:06:20.784 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 15:06:20.784 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 15:06:20.786 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 15:06:20.786 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.61.51
2025-02-11 15:06:20.786 DEBUG [src.node.docker_mananger] Generated ports ['53301', '53302', '53303', '53304', '53305']
2025-02-11 15:06:20.786 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 15:06:20.787 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 15:06:20.787 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 15:06:20.787 DEBUG [src.node.docker_mananger] docker run -i -t -p 53301:53301 -p 53302:53302 -p 53303:53303 -p 53304:53304 -p 53305:53305 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=53303 --rest-port=53301 --tcp-port=53302 --discv5-udp-port=53304 --rest-address=0.0.0.0 --nat=extip:172.18.61.51 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b0ae87b4bc07b5e8ff8be0ebc2b9e14bbe6cc0f7ed84dbee5c9fde9914b2acae --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=53305 --metrics-logging=true --store=true --relay=true
2025-02-11 15:06:21.032 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.61.51 waku 8b0102cfbcdd4f59b9f043c8966169c153557301bfeb29ac11ee4ca110f72e30
2025-02-11 15:06:21.083 DEBUG [src.node.docker_mananger] Container started with ID 8b0102cfbcdd. Setting up logs at ./log/docker/publishing_node1_2025-02-11_15-06-20__f0eef101-cc33-4b62-83f8-29735a6a4a00__wakuorg_nwaku:latest.log
2025-02-11 15:06:21.085 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 53301
2025-02-11 15:06:21.086 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 15:06:21.578 ERROR [src.node.docker_mananger] Max retries reached for container 023ebc828845. Exiting log stream.
2025-02-11 15:06:22.087 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53301/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:06:22.090 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 15:06:22.090 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 15:06:22.091 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53301/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:06:22.093 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.61.51/tcp/53302/p2p/16Uiu2HAmByB6PSTKFHzHo6Bdk2KDNpyYbxS9XadyHLKvWfzxnxh7","/ip4/172.18.61.51/tcp/53303/ws/p2p/16Uiu2HAmByB6PSTKFHzHo6Bdk2KDNpyYbxS9XadyHLKvWfzxnxh7"],"enrUri":"enr:-L24QGw7jFNxj1HYFARg8rXRajwNFonyMWcO1MWkeIHH96jaVYa6XYa5jNBL_IcUXpZEh2rF4ZKssIbCU_FFEV35oMkCgmlkgnY0gmlwhKwSPTOKbXVsdGlhZGRyc5YACASsEj0zBtA2AAoErBI9MwbQN90DgnJzhQADAQAAiXNlY3AyNTZrMaEC9czqNEfbVf5_Ydu3_TJEWGAjEU3_hLNPePgkC97KxuqDdGNwgtA2g3VkcILQOIV3YWt1MgM"}'
2025-02-11 15:06:22.093 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 15:06:22.100 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 15:06:22.100 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-11_15-06-20__f0eef101-cc33-4b62-83f8-29735a6a4a00__wakuorg_nwaku:latest.log
2025-02-11 15:06:22.100 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 15:06:22.100 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 15:06:22.101 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 15:06:22.102 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.164.193
2025-02-11 15:06:22.102 DEBUG [src.node.docker_mananger] Generated ports ['38361', '38362', '38363', '38364', '38365']
2025-02-11 15:06:22.102 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 15:06:22.102 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 15:06:22.102 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 15:06:22.102 DEBUG [src.node.docker_mananger] docker run -i -t -p 38361:38361 -p 38362:38362 -p 38363:38363 -p 38364:38364 -p 38365:38365 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=38363 --rest-port=38361 --tcp-port=38362 --discv5-udp-port=38364 --rest-address=0.0.0.0 --nat=extip:172.18.164.193 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b08e1a54bccbea06d313a07fe2dc28dfeaf59e6a94c0af6ae41e4ea4cef89dee --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=38365 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QGw7jFNxj1HYFARg8rXRajwNFonyMWcO1MWkeIHH96jaVYa6XYa5jNBL_IcUXpZEh2rF4ZKssIbCU_FFEV35oMkCgmlkgnY0gmlwhKwSPTOKbXVsdGlhZGRyc5YACASsEj0zBtA2AAoErBI9MwbQN90DgnJzhQADAQAAiXNlY3AyNTZrMaEC9czqNEfbVf5_Ydu3_TJEWGAjEU3_hLNPePgkC97KxuqDdGNwgtA2g3VkcILQOIV3YWt1MgM --storenode=/ip4/172.18.61.51/tcp/53302/p2p/16Uiu2HAmByB6PSTKFHzHo6Bdk2KDNpyYbxS9XadyHLKvWfzxnxh7 --store=true --relay=true
2025-02-11 15:06:22.333 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.164.193 waku 10879d45ad7070791a7c439337e7e7e02bddc050bbb25b71480c14793c54d136
2025-02-11 15:06:22.379 DEBUG [src.node.docker_mananger] Container started with ID 10879d45ad70. Setting up logs at ./log/docker/store_node1_2025-02-11_15-06-20__f0eef101-cc33-4b62-83f8-29735a6a4a00__wakuorg_nwaku:latest.log
2025-02-11 15:06:22.380 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 38361
2025-02-11 15:06:22.381 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 15:06:23.382 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38361/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:06:23.385 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 15:06:23.386 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 15:06:23.386 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38361/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:06:23.392 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.164.193/tcp/38362/p2p/16Uiu2HAmH76XxmoibrtULuwD6cWBFzhexaDCvFWEPDu9NQXCHSz5","/ip4/172.18.164.193/tcp/38363/ws/p2p/16Uiu2HAmH76XxmoibrtULuwD6cWBFzhexaDCvFWEPDu9NQXCHSz5"],"enrUri":"enr:-L24QFWNpb97gXnxb1e-6boTsuxUdaLT2QSzePu-RRLOM_0QaCqK4iJOOYtjwfqVBl8j9ZH02W0jhdBoIADLguHyK0wCgmlkgnY0gmlwhKwSpMGKbXVsdGlhZGRyc5YACASsEqTBBpXaAAoErBKkwQaV290DgnJzhQADAQAAiXNlY3AyNTZrMaEDQh7XTUao6vjgP8R2T52mty-lh9qDwnuRkBe49Fdk_KKDdGNwgpXag3VkcIKV3IV3YWt1MgM"}'
2025-02-11 15:06:23.392 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 15:06:23.392 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:38361/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.61.51/tcp/53302/p2p/16Uiu2HAmByB6PSTKFHzHo6Bdk2KDNpyYbxS9XadyHLKvWfzxnxh7"]'
2025-02-11 15:06:23.395 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:06:23.396 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53301/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 15:06:23.398 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:06:23.398 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:38361/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 15:06:23.401 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:06:23.401 DEBUG [src.steps.store] Relaying message
2025-02-11 15:06:23.401 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53301/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 15:06:23.407 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:06:23.408 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 15:06:23.609 DEBUG [src.steps.store] Relaying message
2025-02-11 15:06:23.609 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53301/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2025-02-11 15:06:23.616 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:06:23.616 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 15:06:23.817 DEBUG [src.steps.store] Relaying message
2025-02-11 15:06:23.817 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53301/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-11 15:06:23.824 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:06:23.824 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 15:06:24.025 DEBUG [src.steps.store] Relaying message
2025-02-11 15:06:24.025 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53301/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 15:06:24.032 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:06:24.032 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 15:06:24.233 DEBUG [src.steps.store] Relaying message
2025-02-11 15:06:24.234 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53301/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2025-02-11 15:06:24.240 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:06:24.241 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 15:06:24.442 DEBUG [src.steps.store] Relaying message
2025-02-11 15:06:24.442 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53301/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-11 15:06:24.449 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:06:24.449 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 15:06:24.651 DEBUG [src.steps.store] Relaying message
2025-02-11 15:06:24.651 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53301/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-11 15:06:24.657 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:06:24.658 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 15:06:24.859 DEBUG [src.steps.store] Relaying message
2025-02-11 15:06:24.859 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53301/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-11 15:06:24.865 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:06:24.866 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 15:06:25.177 DEBUG [tests.store.test_topics] Trying to get stored msg with url topic size million 
2025-02-11 15:06:25.178 DEBUG [src.steps.store] Relaying message
2025-02-11 15:06:25.178 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53301/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 15:06:25.185 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:06:25.185 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 15:06:25.387 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-11 15:06:25.603 INFO [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2025-02-11 15:06:30.905 ERROR [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2025-02-11 15:06:30.909 ERROR [tests.store.test_topics] store request with very long pubsub topic wasn't accepted 
2025-02-11 15:06:30.913 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 15:06:30.914 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 15:06:30.914 DEBUG [src.node.waku_node] Stopping container with id 8b0102cfbcdd
2025-02-11 15:06:31.500 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 15:06:31.501 DEBUG [src.node.waku_node] Stopping container with id 10879d45ad70
2025-02-11 15:06:32.333 ERROR [src.node.docker_mananger] Max retries reached for container 8b0102cfbcdd. Exiting log stream.
2025-02-11 15:06:32.997 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 15:06:32.998 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 15:06:33.012 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 15:06:33.019 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
