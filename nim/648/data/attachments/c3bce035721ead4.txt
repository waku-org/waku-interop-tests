2025-02-11 15:11:19.786 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 15:11:19.786 DEBUG [tests.conftest] Running test: test_publish_on_multiple_content_topics_and_only_after_fetch_them[content_topic_list0] with id: 2025-02-11_15-11-19__3094e68d-202e-4ce1-8289-0bd3e00d48f6
2025-02-11 15:11:19.786 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 15:11:19.787 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-11 15:11:19.787 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2025-02-11 15:11:19.793 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 15:11:19.794 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-11_15-11-19__3094e68d-202e-4ce1-8289-0bd3e00d48f6__wakuorg_nwaku:latest.log
2025-02-11 15:11:19.794 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 15:11:19.794 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 15:11:19.795 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 15:11:19.795 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.114.214
2025-02-11 15:11:19.796 DEBUG [src.node.docker_mananger] Generated ports ['32508', '32509', '32510', '32511', '32512']
2025-02-11 15:11:19.796 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 15:11:19.796 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 15:11:19.796 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 15:11:19.796 DEBUG [src.node.docker_mananger] docker run -i -t -p 32508:32508 -p 32509:32509 -p 32510:32510 -p 32511:32511 -p 32512:32512 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32510 --rest-port=32508 --tcp-port=32509 --discv5-udp-port=32511 --rest-address=0.0.0.0 --nat=extip:172.18.114.214 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=a8c74d556f3dbad48d85e0cbf86cbaf5a7f4d626047d184efbee4cb08e756d6d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32512 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto
2025-02-11 15:11:20.031 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.114.214 waku 7c39a54a3593366b6d8e514b1028a95d42cfe2ba9f133db986a3434f33bf1cda
2025-02-11 15:11:20.081 DEBUG [src.node.docker_mananger] Container started with ID 7c39a54a3593. Setting up logs at ./log/docker/node1_2025-02-11_15-11-19__3094e68d-202e-4ce1-8289-0bd3e00d48f6__wakuorg_nwaku:latest.log
2025-02-11 15:11:20.082 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 32508
2025-02-11 15:11:20.083 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 15:11:20.578 ERROR [src.node.docker_mananger] Max retries reached for container f16802c312d0. Exiting log stream.
2025-02-11 15:11:21.083 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32508/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:11:21.086 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 15:11:21.086 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 15:11:21.086 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32508/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:11:21.089 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.114.214/tcp/32509/p2p/16Uiu2HAmPKK4HcKwSX4GmDFWTkA7pkNmuPfK15qbKbJkNMcYbLgq","/ip4/172.18.114.214/tcp/32510/ws/p2p/16Uiu2HAmPKK4HcKwSX4GmDFWTkA7pkNmuPfK15qbKbJkNMcYbLgq"],"enrUri":"enr:-L24QNBcTF22DJEfCa_2gPmjnTpRaXutst-Upi1BX5IRo_5zMt7UOrWEEcYl0Ji3x9ak_Vwc936JlA1wt1okBLZTSGYCgmlkgnY0gmlwhKwSctaKbXVsdGlhZGRyc5YACASsEnLWBn79AAoErBJy1gZ-_t0DgnJzhQACAQAAiXNlY3AyNTZrMaEDnmYXh32sbJcTS4ArTdsGIQo0eIhjVaAw4tnC9ObXXFKDdGNwgn79g3VkcIJ-_4V3YWt1MgU"}'
2025-02-11 15:11:21.089 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 15:11:21.095 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 15:11:21.095 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-11_15-11-19__3094e68d-202e-4ce1-8289-0bd3e00d48f6__wakuorg_nwaku:latest.log
2025-02-11 15:11:21.096 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 15:11:21.096 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 15:11:21.097 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 15:11:21.097 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.148.120
2025-02-11 15:11:21.097 DEBUG [src.node.docker_mananger] Generated ports ['32126', '32127', '32128', '32129', '32130']
2025-02-11 15:11:21.097 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 15:11:21.098 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 15:11:21.098 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 15:11:21.098 DEBUG [src.node.docker_mananger] docker run -i -t -p 32126:32126 -p 32127:32127 -p 32128:32128 -p 32129:32129 -p 32130:32130 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32128 --rest-port=32126 --tcp-port=32127 --discv5-udp-port=32129 --rest-address=0.0.0.0 --nat=extip:172.18.148.120 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=f8b8cef44bdcefac3cac4ae4a682aad5c8cae4ce2c8d50e1c9cfb866752cbec0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32130 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QNBcTF22DJEfCa_2gPmjnTpRaXutst-Upi1BX5IRo_5zMt7UOrWEEcYl0Ji3x9ak_Vwc936JlA1wt1okBLZTSGYCgmlkgnY0gmlwhKwSctaKbXVsdGlhZGRyc5YACASsEnLWBn79AAoErBJy1gZ-_t0DgnJzhQACAQAAiXNlY3AyNTZrMaEDnmYXh32sbJcTS4ArTdsGIQo0eIhjVaAw4tnC9ObXXFKDdGNwgn79g3VkcIJ-_4V3YWt1MgU --content-topic=/myapp/1/latest/proto
2025-02-11 15:11:21.325 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.148.120 waku 1c5815e1f858803dd03af20eda88ede5e24e40f0a4235612229018c9a306c54e
2025-02-11 15:11:21.369 DEBUG [src.node.docker_mananger] Container started with ID 1c5815e1f858. Setting up logs at ./log/docker/node2_2025-02-11_15-11-19__3094e68d-202e-4ce1-8289-0bd3e00d48f6__wakuorg_nwaku:latest.log
2025-02-11 15:11:21.369 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 32126
2025-02-11 15:11:21.369 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 15:11:22.370 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32126/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:11:22.388 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 15:11:22.392 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 15:11:22.392 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32126/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:11:22.396 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.148.120/tcp/32127/p2p/16Uiu2HAm98BWjtNzjm7oHeu5Sk89ZWu87V8x6mLa5SdBKFmUM7mH","/ip4/172.18.148.120/tcp/32128/ws/p2p/16Uiu2HAm98BWjtNzjm7oHeu5Sk89ZWu87V8x6mLa5SdBKFmUM7mH"],"enrUri":"enr:-L24QJfayszGue0hcOAJIM5eixqaN6zQbsDQ3jlVyGytYNJbUOUVmI07kFBs8oURs5RYHpG-9LmsRJN8kkJdNhhF_PgCgmlkgnY0gmlwhKwSlHiKbXVsdGlhZGRyc5YACASsEpR4Bn1_AAoErBKUeAZ9gN0DgnJzhQACAQAAiXNlY3AyNTZrMaECy4iOXWkSPB4GL0GiPXKIKltBRhMyyY-04v60u_WI9rCDdGNwgn1_g3VkcIJ9gYV3YWt1MgE"}'
2025-02-11 15:11:22.397 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 15:11:22.398 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32126/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.114.214/tcp/32509/p2p/16Uiu2HAmPKK4HcKwSX4GmDFWTkA7pkNmuPfK15qbKbJkNMcYbLgq"]'
2025-02-11 15:11:22.403 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:11:22.403 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32508/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/newsService/1.0/weekly/protobuf", "/newsService/1.0/alerts/xml", "/newsService/1.0/updates/json", "/newsService/2.0/alerts/json", "/newsService/2.0/summaries/xml", "/newsService/2.0/highlights/yaml", "/newsService/3.0/weekly/json", "/newsService/3.0/summaries/xml"]'
2025-02-11 15:11:22.410 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:11:22.410 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32126/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/newsService/1.0/weekly/protobuf", "/newsService/1.0/alerts/xml", "/newsService/1.0/updates/json", "/newsService/2.0/alerts/json", "/newsService/2.0/summaries/xml", "/newsService/2.0/highlights/yaml", "/newsService/3.0/weekly/json", "/newsService/3.0/summaries/xml"]'
2025-02-11 15:11:22.421 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:11:22.422 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32508/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L25ld3NTZXJ2aWNlLzEuMC93ZWVrbHkvcHJvdG9idWY=", "contentTopic": "/newsService/1.0/weekly/protobuf", "timestamp": '$(date +%s%N)'}'
2025-02-11 15:11:22.430 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:11:22.430 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32508/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L25ld3NTZXJ2aWNlLzEuMC9hbGVydHMveG1s", "contentTopic": "/newsService/1.0/alerts/xml", "timestamp": '$(date +%s%N)'}'
2025-02-11 15:11:22.436 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:11:22.436 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32508/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L25ld3NTZXJ2aWNlLzEuMC91cGRhdGVzL2pzb24=", "contentTopic": "/newsService/1.0/updates/json", "timestamp": '$(date +%s%N)'}'
2025-02-11 15:11:22.442 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:11:22.443 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32508/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L25ld3NTZXJ2aWNlLzIuMC9hbGVydHMvanNvbg==", "contentTopic": "/newsService/2.0/alerts/json", "timestamp": '$(date +%s%N)'}'
2025-02-11 15:11:22.447 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:11:22.448 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32508/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L25ld3NTZXJ2aWNlLzIuMC9zdW1tYXJpZXMveG1s", "contentTopic": "/newsService/2.0/summaries/xml", "timestamp": '$(date +%s%N)'}'
2025-02-11 15:11:22.453 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:11:22.455 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32508/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L25ld3NTZXJ2aWNlLzIuMC9oaWdobGlnaHRzL3lhbWw=", "contentTopic": "/newsService/2.0/highlights/yaml", "timestamp": '$(date +%s%N)'}'
2025-02-11 15:11:22.459 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:11:22.460 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32508/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L25ld3NTZXJ2aWNlLzMuMC93ZWVrbHkvanNvbg==", "contentTopic": "/newsService/3.0/weekly/json", "timestamp": '$(date +%s%N)'}'
2025-02-11 15:11:22.465 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:11:22.466 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32508/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L25ld3NTZXJ2aWNlLzMuMC9zdW1tYXJpZXMveG1s", "contentTopic": "/newsService/3.0/summaries/xml", "timestamp": '$(date +%s%N)'}'
2025-02-11 15:11:22.472 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 15:11:22.473 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 15:11:22.573 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32126/relay/v1/auto/messages/%2FnewsService%2F1.0%2Fweekly%2Fprotobuf" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:11:22.576 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L25ld3NTZXJ2aWNlLzEuMC93ZWVrbHkvcHJvdG9idWY=","contentTopic":"/newsService/1.0/weekly/protobuf","version":0,"timestamp":1739286682421858048,"ephemeral":false}]'
2025-02-11 15:11:22.576 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32126/relay/v1/auto/messages/%2FnewsService%2F1.0%2Falerts%2Fxml" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:11:22.578 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L25ld3NTZXJ2aWNlLzEuMC9hbGVydHMveG1s","contentTopic":"/newsService/1.0/alerts/xml","version":0,"timestamp":1739286682430629120,"ephemeral":false}]'
2025-02-11 15:11:22.579 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32126/relay/v1/auto/messages/%2FnewsService%2F1.0%2Fupdates%2Fjson" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:11:22.581 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L25ld3NTZXJ2aWNlLzEuMC91cGRhdGVzL2pzb24=","contentTopic":"/newsService/1.0/updates/json","version":0,"timestamp":1739286682436658176,"ephemeral":false}]'
2025-02-11 15:11:22.581 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32126/relay/v1/auto/messages/%2FnewsService%2F2.0%2Falerts%2Fjson" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:11:22.584 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L25ld3NTZXJ2aWNlLzIuMC9hbGVydHMvanNvbg==","contentTopic":"/newsService/2.0/alerts/json","version":0,"timestamp":1739286682443274496,"ephemeral":false}]'
2025-02-11 15:11:22.584 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32126/relay/v1/auto/messages/%2FnewsService%2F2.0%2Fsummaries%2Fxml" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:11:22.586 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L25ld3NTZXJ2aWNlLzIuMC9zdW1tYXJpZXMveG1s","contentTopic":"/newsService/2.0/summaries/xml","version":0,"timestamp":1739286682448388864,"ephemeral":false}]'
2025-02-11 15:11:22.587 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32126/relay/v1/auto/messages/%2FnewsService%2F2.0%2Fhighlights%2Fyaml" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:11:22.589 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L25ld3NTZXJ2aWNlLzIuMC9oaWdobGlnaHRzL3lhbWw=","contentTopic":"/newsService/2.0/highlights/yaml","version":0,"timestamp":1739286682454939136,"ephemeral":false}]'
2025-02-11 15:11:22.590 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32126/relay/v1/auto/messages/%2FnewsService%2F3.0%2Fweekly%2Fjson" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:11:22.592 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L25ld3NTZXJ2aWNlLzMuMC93ZWVrbHkvanNvbg==","contentTopic":"/newsService/3.0/weekly/json","version":0,"timestamp":1739286682459967232,"ephemeral":false}]'
2025-02-11 15:11:22.592 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32126/relay/v1/auto/messages/%2FnewsService%2F3.0%2Fsummaries%2Fxml" -H "Content-Type: application/json" -d 'None'
2025-02-11 15:11:22.594 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L25ld3NTZXJ2aWNlLzMuMC9zdW1tYXJpZXMveG1s","contentTopic":"/newsService/3.0/summaries/xml","version":0,"timestamp":1739286682466608896,"ephemeral":false}]'
2025-02-11 15:11:22.596 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 15:11:22.597 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 15:11:22.597 DEBUG [src.node.waku_node] Stopping container with id 7c39a54a3593
2025-02-11 15:11:23.661 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 15:11:23.661 DEBUG [src.node.waku_node] Stopping container with id 1c5815e1f858
2025-02-11 15:11:24.476 ERROR [src.node.docker_mananger] Max retries reached for container 7c39a54a3593. Exiting log stream.
2025-02-11 15:11:25.161 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 15:11:25.163 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 15:11:25.170 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 15:11:25.178 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
