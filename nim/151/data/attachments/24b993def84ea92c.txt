[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_only_relay__peer_only_store with id: 2024-04-16_14-32-01__92ad6b98-a643-436b-a52f-0284e52f8a6f
[35mDEBUG   [0m src.steps.store:store.py:28 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:50 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-04-16_14-32-01__92ad6b98-a643-436b-a52f-0284e52f8a6f__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:54 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.187.57
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['4748', '4749', '4750', '4751', '4752']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:315 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:115 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 4748:4748 -p 4749:4749 -p 4750:4750 -p 4751:4751 -p 4752:4752 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4750 --rest-port=4748 --tcp-port=4749 --discv5-udp-port=4751 --rest-address=0.0.0.0 --nat=extip:172.18.187.57 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4752 --metrics-logging=true --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.187.57 waku 4810cfe1cefaa475bac3bcb1046639cc96aff7c5770f2d8dde6d3413d3bd1c8d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 4810cfe1cefa. Setting up logs at ./log/docker/publishing_node1_2024-04-16_14-32-01__92ad6b98-a643-436b-a52f-0284e52f8a6f__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:121 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 4748
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4748/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.187.57/tcp/4749/p2p/16Uiu2HAmHtpd97FyiaV2h27NosR2YMeC5MtEsGAxb7LgVMfZUF1j","/ip4/172.18.187.57/tcp/4750/ws/p2p/16Uiu2HAmHtpd97FyiaV2h27NosR2YMeC5MtEsGAxb7LgVMfZUF1j"],"enrUri":"enr:-LO4QGIPjI2wVCMpRRsanBoK0E6oajuBURr6f9tDpREAHQDABsXMNL0gZKROo9nA6f-ZliHdrSk_KqUUrs-DGaGjgcIBgmlkgnY0gmlwhKwSuzmKbXVsdGlhZGRyc4wACgSsErs5BhKO3QOCcnOFAAABAACJc2VjcDI1NmsxoQNN1ZFj7Zv_bKvuN4-tmvevn0DY5uwGjpU6lm0UR0PiGoN0Y3CCEo2DdWRwghKPhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:191 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:50 WakuNode instance initialized with log path ./log/docker/store_node1_2024-04-16_14-32-01__92ad6b98-a643-436b-a52f-0284e52f8a6f__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:54 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.190.30
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['13492', '13493', '13494', '13495', '13496']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:315 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:115 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 13492:13492 -p 13493:13493 -p 13494:13494 -p 13495:13495 -p 13496:13496 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=13494 --rest-port=13492 --tcp-port=13493 --discv5-udp-port=13495 --rest-address=0.0.0.0 --nat=extip:172.18.190.30 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=13496 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QGIPjI2wVCMpRRsanBoK0E6oajuBURr6f9tDpREAHQDABsXMNL0gZKROo9nA6f-ZliHdrSk_KqUUrs-DGaGjgcIBgmlkgnY0gmlwhKwSuzmKbXVsdGlhZGRyc4wACgSsErs5BhKO3QOCcnOFAAABAACJc2VjcDI1NmsxoQNN1ZFj7Zv_bKvuN4-tmvevn0DY5uwGjpU6lm0UR0PiGoN0Y3CCEo2DdWRwghKPhXdha3UyAQ --storenode=/ip4/172.18.187.57/tcp/4749/p2p/16Uiu2HAmHtpd97FyiaV2h27NosR2YMeC5MtEsGAxb7LgVMfZUF1j --store=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.190.30 waku f3e1650e1473df7de03a7cfee0526cfb46c30c1f1b43ce04da7f0de179e59eb5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID f3e1650e1473. Setting up logs at ./log/docker/store_node1_2024-04-16_14-32-01__92ad6b98-a643-436b-a52f-0284e52f8a6f__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:121 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 13492
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13492/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.190.30/tcp/13493/p2p/16Uiu2HAmAr4U4mwFVVUTipLvqzK1obU3Wt26ng3c6cWv8smD978S","/ip4/172.18.190.30/tcp/13494/ws/p2p/16Uiu2HAmAr4U4mwFVVUTipLvqzK1obU3Wt26ng3c6cWv8smD978S"],"enrUri":"enr:-LO4QEh1aSP4nyJSJbZrqAp-rehwMG0F7dIm99xpFlyPkAu7Co8HV18-5-sEb02GVwAu-H1XUTZNdBrJhpV1osgalz8BgmlkgnY0gmlwhKwSvh6KbXVsdGlhZGRyc4wACgSsEr4eBjS23QOCcnOFAAABAACJc2VjcDI1NmsxoQLlHquCdKZybsuwcixe2com-crljyM6_EJN2B_URa-jB4N0Y3CCNLWDdWRwgjS3hXdha3UyAg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:191 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13492/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.187.57/tcp/4749/p2p/16Uiu2HAmHtpd97FyiaV2h27NosR2YMeC5MtEsGAxb7LgVMfZUF1j"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4748/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:128 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4748/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:159 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13492/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:168 Stopping container with id 4810cfe1cefa
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:168 Stopping container with id f3e1650e1473
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Container stopped.