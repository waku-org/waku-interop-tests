[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_2_receiving_nodes__relay_node1_forwards_lightpushed_message_to_relay_node2 with id: 2024-11-01_04-08-22__c63cffbf-8789-48dd-a509-2d26468d58bf
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-11-01_04-08-22__c63cffbf-8789-48dd-a509-2d26468d58bf__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.144.161
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['46578', '46579', '46580', '46581', '46582']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 46578:46578 -p 46579:46579 -p 46580:46580 -p 46581:46581 -p 46582:46582 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=46580 --rest-port=46578 --tcp-port=46579 --discv5-udp-port=46581 --rest-address=0.0.0.0 --nat=extip:172.18.144.161 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b4cf24ecec9dc6de8a0d1de22fd9419f58c2cdb040abfe7acffcd71b2e63fdab --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=46582 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.144.161 waku 38656528ed86320cae4e332ac5b2eb14546a42c91f65ad414edbc069b71822a9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 38656528ed86. Setting up logs at ./log/docker/receiving_node1_2024-11-01_04-08-22__c63cffbf-8789-48dd-a509-2d26468d58bf__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 46578
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 0cf734a98c18. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46578/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46578/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.144.161/tcp/46579/p2p/16Uiu2HAkwA51UWbnT4fRoGN7jTKJiaw7Wy3HVhRdHGop2BNEGuEf","/ip4/172.18.144.161/tcp/46580/ws/p2p/16Uiu2HAkwA51UWbnT4fRoGN7jTKJiaw7Wy3HVhRdHGop2BNEGuEf"],"enrUri":"enr:-L24QOQtJMzhPOvKsyXIBjKFULw1G0BKuxfsNKRGH-yvi5t9cM596mRTFp_nWZLVckZ4oK1d-thjGJjZxAU0P9rpr1cCgmlkgnY0gmlwhKwSkKGKbXVsdGlhZGRyc5YACASsEpChBrXzAAoErBKQoQa19N0DgnJzhQADAQAAiXNlY3AyNTZrMaECGbgesASj3S5Wr_2XoOLiDLH5yd1u-xFQataM4rPNhrCDdGNwgrXzg3VkcIK19YV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-11-01_04-08-22__c63cffbf-8789-48dd-a509-2d26468d58bf__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.8.179
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['36936', '36937', '36938', '36939', '36940']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 36936:36936 -p 36937:36937 -p 36938:36938 -p 36939:36939 -p 36940:36940 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36938 --rest-port=36936 --tcp-port=36937 --discv5-udp-port=36939 --rest-address=0.0.0.0 --nat=extip:172.18.8.179 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ae8eca39d74e3552d821ea5d74044ef2ac5ea8f60ea832d77aaa46ceb8ea8dfa --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36940 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.8.179 waku 58ec7ca953cd4fdbd0ab705d74cf374a06731e7d29b7b5f83684fa5dc4e6920e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 58ec7ca953cd. Setting up logs at ./log/docker/receiving_node2_2024-11-01_04-08-22__c63cffbf-8789-48dd-a509-2d26468d58bf__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 36936
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36936/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36936/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.8.179/tcp/36937/p2p/16Uiu2HAmCGjFFFibdqNBiW5DjFzY9oGAZbwNkZZTSTZWw7Lb7nGG","/ip4/172.18.8.179/tcp/36938/ws/p2p/16Uiu2HAmCGjFFFibdqNBiW5DjFzY9oGAZbwNkZZTSTZWw7Lb7nGG"],"enrUri":"enr:-L24QMLOL5D8PPA5JpJrawhvo3yX78FP8pXHywCJafk-PaeZMAc5-4f0rd1Vp3lW0Fkt1ec5E31FDdYhwDSc4OagxpACgmlkgnY0gmlwhKwSCLOKbXVsdGlhZGRyc5YACASsEgizBpBJAAoErBIIswaQSt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC-kwk0jhciM3R_gwasZzVNVfn7KY3N8UIU4awmnVCMDmDdGNwgpBJg3VkcIKQS4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36936/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.144.161/tcp/46579/p2p/16Uiu2HAkwA51UWbnT4fRoGN7jTKJiaw7Wy3HVhRdHGop2BNEGuEf"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-11-01_04-08-22__c63cffbf-8789-48dd-a509-2d26468d58bf__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.174.223
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['40861', '40862', '40863', '40864', '40865']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 40861:40861 -p 40862:40862 -p 40863:40863 -p 40864:40864 -p 40865:40865 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40863 --rest-port=40861 --tcp-port=40862 --discv5-udp-port=40864 --rest-address=0.0.0.0 --nat=extip:172.18.174.223 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=95e5bbb9aad9cff3ab35b3bfedfcbd6ce0199483acbe7b1f3ce0dbeeeabb9b5e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40865 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QOQtJMzhPOvKsyXIBjKFULw1G0BKuxfsNKRGH-yvi5t9cM596mRTFp_nWZLVckZ4oK1d-thjGJjZxAU0P9rpr1cCgmlkgnY0gmlwhKwSkKGKbXVsdGlhZGRyc5YACASsEpChBrXzAAoErBKQoQa19N0DgnJzhQADAQAAiXNlY3AyNTZrMaECGbgesASj3S5Wr_2XoOLiDLH5yd1u-xFQataM4rPNhrCDdGNwgrXzg3VkcIK19YV3YWt1Mgk --lightpushnode=/ip4/172.18.144.161/tcp/46579/p2p/16Uiu2HAkwA51UWbnT4fRoGN7jTKJiaw7Wy3HVhRdHGop2BNEGuEf --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.174.223 waku 774bc93d740a79ff74e44cf25b3e4dadd948b4655db8589f59e9c44df34bf79e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 774bc93d740a. Setting up logs at ./log/docker/lightpush_node1_2024-11-01_04-08-22__c63cffbf-8789-48dd-a509-2d26468d58bf__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 40861
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40861/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40861/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.174.223/tcp/40862/p2p/16Uiu2HAmNXRuZzW75m8SST3Y8xRuSg2hT3aDRV4TaojvWmvxZ46r","/ip4/172.18.174.223/tcp/40863/ws/p2p/16Uiu2HAmNXRuZzW75m8SST3Y8xRuSg2hT3aDRV4TaojvWmvxZ46r"],"enrUri":"enr:-L24QFYuDRoxFI-w0Q4lSfvUvsatoau0L2TuxQ1QEnfptTeDFLYqZotTTf6xLA4eaS3PC_2tm_pPrGNC6AUTlE14qlwCgmlkgnY0gmlwhKwSrt-KbXVsdGlhZGRyc5YACASsEq7fBp-eAAoErBKu3wafn90DgnJzhQADAQAAiXNlY3AyNTZrMaEDkqUeoshERWbG931KCstujVKs8eFi3IK_mvy-9UjlEs-DdGNwgp-eg3VkcIKfoIV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40861/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.144.161/tcp/46579/p2p/16Uiu2HAkwA51UWbnT4fRoGN7jTKJiaw7Wy3HVhRdHGop2BNEGuEf"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40861/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.8.179/tcp/36937/p2p/16Uiu2HAmCGjFFFibdqNBiW5DjFzY9oGAZbwNkZZTSTZWw7Lb7nGG"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:46578/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36936/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40861/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1730434107608757248}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46578/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1730434107608757248,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36936/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1730434107608757248,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 38656528ed86
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 58ec7ca953cd
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 38656528ed86. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 774bc93d740a
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 58ec7ca953cd. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.