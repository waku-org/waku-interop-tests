[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_version with id: 2024-11-01_04-10-28__cfbc522d-acf5-4553-9975-6b586c68d1f8
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-11-01_04-10-28__cfbc522d-acf5-4553-9975-6b586c68d1f8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.76.245
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['34360', '34361', '34362', '34363', '34364']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 34360:34360 -p 34361:34361 -p 34362:34362 -p 34363:34363 -p 34364:34364 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34362 --rest-port=34360 --tcp-port=34361 --discv5-udp-port=34363 --rest-address=0.0.0.0 --nat=extip:172.18.76.245 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ddac10bb86ab7dffcd3ca4f62926ce4f4cc601cc8b81fdc87f3cab6e51eb6ffb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34364 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.76.245 waku 937bd5677ae0bba30b3c23ac48224b6639997b51106cf0bca3c9ae680e4a5c97
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 66102e7c3c78. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 937bd5677ae0. Setting up logs at ./log/docker/receiving_node1_2024-11-01_04-10-28__cfbc522d-acf5-4553-9975-6b586c68d1f8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 34360
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34360/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34360/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.76.245/tcp/34361/p2p/16Uiu2HAmJUHsKv4R9VfUkTa3UK51MvmAwNzuBK4P4xeLg3nn8pL4","/ip4/172.18.76.245/tcp/34362/ws/p2p/16Uiu2HAmJUHsKv4R9VfUkTa3UK51MvmAwNzuBK4P4xeLg3nn8pL4"],"enrUri":"enr:-L24QMqXvU9UviQgyk83iCeHDHMvGAgZ2IrFnKML9ITI8upNLcFRvQ4Ig16c-blwtk_U1l4WO7XeypmR0Oo9KCmmu1ICgmlkgnY0gmlwhKwSTPWKbXVsdGlhZGRyc5YACASsEkz1BoY5AAoErBJM9QaGOt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDVmiKSc54tJm_GhMcffkJd-lpoV0rfFxI0HOPf-E1bPWDdGNwgoY5g3VkcIKGO4V3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-11-01_04-10-28__cfbc522d-acf5-4553-9975-6b586c68d1f8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.50.78
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['57335', '57336', '57337', '57338', '57339']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 57335:57335 -p 57336:57336 -p 57337:57337 -p 57338:57338 -p 57339:57339 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57337 --rest-port=57335 --tcp-port=57336 --discv5-udp-port=57338 --rest-address=0.0.0.0 --nat=extip:172.18.50.78 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5a1ee0c42c47f78ff58c4cafce04f649b3ccd6e32fd26d015d8848a282d48ab4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57339 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.50.78 waku 0088f808eb89bb2d517a37120700dd14f200aa01353d28725119da733917a3de
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 0088f808eb89. Setting up logs at ./log/docker/receiving_node2_2024-11-01_04-10-28__cfbc522d-acf5-4553-9975-6b586c68d1f8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 57335
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57335/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57335/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.50.78/tcp/57336/p2p/16Uiu2HAmKtcGRazrgKYXe7Kz4mNrPvHumDrrPFn1ynnFMCLgZyAa","/ip4/172.18.50.78/tcp/57337/ws/p2p/16Uiu2HAmKtcGRazrgKYXe7Kz4mNrPvHumDrrPFn1ynnFMCLgZyAa"],"enrUri":"enr:-L24QK4rnshivGiTUgBzWNMuSIv3rc4aJ0MaakWEsZKzVg-hQeT-1PicD9LOLWfh4d_EGC5m8t95AOKVtIEKGHCRHPECgmlkgnY0gmlwhKwSMk6KbXVsdGlhZGRyc5YACASsEjJOBt_4AAoErBIyTgbf-d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDa374MEOVFjAhJ9h5ku8uhNDne7p6lI_Ar0aWMjsv6huDdGNwgt_4g3VkcILf-oV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57335/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.76.245/tcp/34361/p2p/16Uiu2HAmJUHsKv4R9VfUkTa3UK51MvmAwNzuBK4P4xeLg3nn8pL4"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-11-01_04-10-28__cfbc522d-acf5-4553-9975-6b586c68d1f8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.64.103
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['31596', '31597', '31598', '31599', '31600']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 31596:31596 -p 31597:31597 -p 31598:31598 -p 31599:31599 -p 31600:31600 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=31598 --rest-port=31596 --tcp-port=31597 --discv5-udp-port=31599 --rest-address=0.0.0.0 --nat=extip:172.18.64.103 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4bdccff8b5a5cffa302eeface743024fddb3d0d3db0864d50e2691bedcd10e7d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=31600 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QMqXvU9UviQgyk83iCeHDHMvGAgZ2IrFnKML9ITI8upNLcFRvQ4Ig16c-blwtk_U1l4WO7XeypmR0Oo9KCmmu1ICgmlkgnY0gmlwhKwSTPWKbXVsdGlhZGRyc5YACASsEkz1BoY5AAoErBJM9QaGOt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDVmiKSc54tJm_GhMcffkJd-lpoV0rfFxI0HOPf-E1bPWDdGNwgoY5g3VkcIKGO4V3YWt1Mgk --lightpushnode=/ip4/172.18.76.245/tcp/34361/p2p/16Uiu2HAmJUHsKv4R9VfUkTa3UK51MvmAwNzuBK4P4xeLg3nn8pL4 --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.64.103 waku de7b387b2e20445448c78de865b98aedce36f9c518ea0cd52359373cffd8393b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID de7b387b2e20. Setting up logs at ./log/docker/lightpush_node1_2024-11-01_04-10-28__cfbc522d-acf5-4553-9975-6b586c68d1f8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 31596
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31596/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31596/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.64.103/tcp/31597/p2p/16Uiu2HAmQzzZZmJte2AMsF5pmvASHXRvNUD1uz4rUuf2a1nPBv5b","/ip4/172.18.64.103/tcp/31598/ws/p2p/16Uiu2HAmQzzZZmJte2AMsF5pmvASHXRvNUD1uz4rUuf2a1nPBv5b"],"enrUri":"enr:-L24QGtZXIv8clrraN0uMgOy44A4WTV_HinnsW7zN7vMOQimd69Qp49OczIyfj7gZSRBAYazQz9i7F9kNeLL0_lGnOECgmlkgnY0gmlwhKwSQGeKbXVsdGlhZGRyc5YACASsEkBnBnttAAoErBJAZwZ7bt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDt2wZPsDzyCYHfQFChbJuHG7TD4jEampqYWMwto_qOw6DdGNwgnttg3VkcIJ7b4V3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31596/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.76.245/tcp/34361/p2p/16Uiu2HAmJUHsKv4R9VfUkTa3UK51MvmAwNzuBK4P4xeLg3nn8pL4"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31596/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.50.78/tcp/57336/p2p/16Uiu2HAmKtcGRazrgKYXe7Kz4mNrPvHumDrrPFn1ynnFMCLgZyAa"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34360/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57335/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31596/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1730434233582449664, "version": 2.1}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:31596/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 937bd5677ae0
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 0088f808eb89
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 937bd5677ae0. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id de7b387b2e20
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 0088f808eb89. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.