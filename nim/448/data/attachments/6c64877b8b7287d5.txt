[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_unsubscribe_with_invalid_request_id with id: 2024-11-13_04-12-19__ecbacec1-ada9-4bd7-8b50-2b9757f30809
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-13_04-12-19__ecbacec1-ada9-4bd7-8b50-2b9757f30809__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.1.77
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['28602', '28603', '28604', '28605', '28606']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 28602:28602 -p 28603:28603 -p 28604:28604 -p 28605:28605 -p 28606:28606 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28604 --rest-port=28602 --tcp-port=28603 --discv5-udp-port=28605 --rest-address=0.0.0.0 --nat=extip:172.18.1.77 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=399cebca4a4ffde29c9a8e7e3fee9f0a6ddc74d7c4a78fcf76ec967c44616cf0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28606 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.1.77 waku 920d19d6d0b8e86a3af0c7019f0bc043c24ac34fde76fc6c9a9ccaa01ffb2b19
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 920d19d6d0b8. Setting up logs at ./log/docker/node1_2024-11-13_04-12-19__ecbacec1-ada9-4bd7-8b50-2b9757f30809__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 28602
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 3fbd60d94704. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28602/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28602/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.1.77/tcp/28603/p2p/16Uiu2HAkzK69yhCETjsPTbRfs6ZmCUSfjmrxkHY1KcjfKRLT6SJ1","/ip4/172.18.1.77/tcp/28604/ws/p2p/16Uiu2HAkzK69yhCETjsPTbRfs6ZmCUSfjmrxkHY1KcjfKRLT6SJ1"],"enrUri":"enr:-L24QLRx9bUklxnuWHcnKcpzjsZN9dumK_Bp7-z7wAGp7HEVd7WiFipYtgEfTaI4Lk-ON9TM6xFLzpoRiwxS1MQw2O4CgmlkgnY0gmlwhKwSAU2KbXVsdGlhZGRyc5YACASsEgFNBm-7AAoErBIBTQZvvN0DgnJzhQADAQAAiXNlY3AyNTZrMaECSJq0U-0v11b8I7uEsp9PdwxpF361VLHNnCS6zCsFVqaDdGNwgm-7g3VkcIJvvYV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-11-13_04-12-19__ecbacec1-ada9-4bd7-8b50-2b9757f30809__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.252.67
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['26584', '26585', '26586', '26587', '26588']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 26584:26584 -p 26585:26585 -p 26586:26586 -p 26587:26587 -p 26588:26588 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26586 --rest-port=26584 --tcp-port=26585 --discv5-udp-port=26587 --rest-address=0.0.0.0 --nat=extip:172.18.252.67 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4bdaf9c037f65e54c5b1ee6b856d7dbd2e345c2ccce9a5afcf3e7af3ddabbd38 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26588 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QLRx9bUklxnuWHcnKcpzjsZN9dumK_Bp7-z7wAGp7HEVd7WiFipYtgEfTaI4Lk-ON9TM6xFLzpoRiwxS1MQw2O4CgmlkgnY0gmlwhKwSAU2KbXVsdGlhZGRyc5YACASsEgFNBm-7AAoErBIBTQZvvN0DgnJzhQADAQAAiXNlY3AyNTZrMaECSJq0U-0v11b8I7uEsp9PdwxpF361VLHNnCS6zCsFVqaDdGNwgm-7g3VkcIJvvYV3YWt1MgU --filternode=/ip4/172.18.1.77/tcp/28603/p2p/16Uiu2HAkzK69yhCETjsPTbRfs6ZmCUSfjmrxkHY1KcjfKRLT6SJ1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.252.67 waku d0611a48e52dde408b59e900aa37c3d4e3519c5b856b5598766ea9f3c1adea42
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID d0611a48e52d. Setting up logs at ./log/docker/node2_2024-11-13_04-12-19__ecbacec1-ada9-4bd7-8b50-2b9757f30809__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 26584
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26584/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26584/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.252.67/tcp/26585/p2p/16Uiu2HAmAZvnGTzHwkuxKNfF3TUTMbydnkC7LQtT83Gz9Zgz2iVV","/ip4/172.18.252.67/tcp/26586/ws/p2p/16Uiu2HAmAZvnGTzHwkuxKNfF3TUTMbydnkC7LQtT83Gz9Zgz2iVV"],"enrUri":"enr:-L24QIpRfOL08pQFYJT7vPvsOGaihKEz64jZqOUZyLk2zzPVVt58cIqZ5IFNuGcxyJdiC4tunj9tXfH21g4PUMlPZlcCgmlkgnY0gmlwhKwS_EOKbXVsdGlhZGRyc5YACASsEvxDBmfZAAoErBL8QwZn2t0DgnJzhQADAQAAiXNlY3AyNTZrMaEC4PyvrEsdJd6GpsvyorAfT6MOek_GYc86kU_1Op9DClCDdGNwgmfZg3VkcIJn24V3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26584/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.1.77/tcp/28603/p2p/16Uiu2HAkzK69yhCETjsPTbRfs6ZmCUSfjmrxkHY1KcjfKRLT6SJ1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28602/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26584/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "d144c742-694b-4a2d-abae-7a81365f0560", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"d144c742-694b-4a2d-abae-7a81365f0560","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X DELETE "http://127.0.0.1:26584/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": 1, "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:26584/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 920d19d6d0b8
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id d0611a48e52d
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 920d19d6d0b8. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.