[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_valid_version with id: 2024-11-13_04-14-36__e558480b-ee15-4372-af68-c0c067b3918c
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-11-13_04-14-36__e558480b-ee15-4372-af68-c0c067b3918c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.74.120
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['57669', '57670', '57671', '57672', '57673']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 57669:57669 -p 57670:57670 -p 57671:57671 -p 57672:57672 -p 57673:57673 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57671 --rest-port=57669 --tcp-port=57670 --discv5-udp-port=57672 --rest-address=0.0.0.0 --nat=extip:172.18.74.120 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f86fbfa684d6f2f8a505ce34bfac08fcbd339eee8a46b75ee754fdea66bc59bf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57673 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.74.120 waku 2ec7f11d67e83043fc513775b86fa935f90f0ede7e043752c50674b9dc191465
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 2ec7f11d67e8. Setting up logs at ./log/docker/receiving_node1_2024-11-13_04-14-36__e558480b-ee15-4372-af68-c0c067b3918c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 57669
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container f4d6f56e7176. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57669/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57669/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.74.120/tcp/57670/p2p/16Uiu2HAmEFxSEawAR46NBY8FR4Meoh5sCkouWrCNkXE5j5oeK3Zt","/ip4/172.18.74.120/tcp/57671/ws/p2p/16Uiu2HAmEFxSEawAR46NBY8FR4Meoh5sCkouWrCNkXE5j5oeK3Zt"],"enrUri":"enr:-L24QAck5fSS4jqSYd34FfpMstDCAGnw15jeVP5IVtMs3JoVBhMf9O6GCdwMiO4FOYIMARCbl3elywZ_15FVxS8X9soCgmlkgnY0gmlwhKwSSniKbXVsdGlhZGRyc5YACASsEkp4BuFGAAoErBJKeAbhR90DgnJzhQADAQAAiXNlY3AyNTZrMaEDF9DZqXmDfhEHM0X3SzknBbk-VOq3t3d7B1wEE23VhpuDdGNwguFGg3VkcILhSIV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-11-13_04-14-36__e558480b-ee15-4372-af68-c0c067b3918c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.48.226
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['25391', '25392', '25393', '25394', '25395']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 25391:25391 -p 25392:25392 -p 25393:25393 -p 25394:25394 -p 25395:25395 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25393 --rest-port=25391 --tcp-port=25392 --discv5-udp-port=25394 --rest-address=0.0.0.0 --nat=extip:172.18.48.226 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2c7bb05c6dd9c7cb75acd1e3ecc87365ef5ab9aa90b64ee4dfdaaabbed1a3bdb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25395 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.48.226 waku 2cde5e3a3fcb766cf3ed320ede8ab768c402ed4aa31365d1c2b1ee9bb5ac5ca1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 2cde5e3a3fcb. Setting up logs at ./log/docker/receiving_node2_2024-11-13_04-14-36__e558480b-ee15-4372-af68-c0c067b3918c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 25391
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25391/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25391/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.48.226/tcp/25392/p2p/16Uiu2HAmPdVC9qdoj4z6jnJjEkPUvfcDiKuuUc7QFuAZkynjzAaR","/ip4/172.18.48.226/tcp/25393/ws/p2p/16Uiu2HAmPdVC9qdoj4z6jnJjEkPUvfcDiKuuUc7QFuAZkynjzAaR"],"enrUri":"enr:-L24QEFDbK3DklhXfWhWbHUSXkpDS0lfN2SOimQxx_q-8AiHAekzRGTLpcFxNewAbm9yEnp0-qVtmIi_CfkbKRDV_5MCgmlkgnY0gmlwhKwSMOKKbXVsdGlhZGRyc5YACASsEjDiBmMwAAoErBIw4gZjMd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDow4BwW_ioBZ9NVjq_cNgKG4IBdRL5SYLjrwWnigMXf6DdGNwgmMwg3VkcIJjMoV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25391/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.74.120/tcp/57670/p2p/16Uiu2HAmEFxSEawAR46NBY8FR4Meoh5sCkouWrCNkXE5j5oeK3Zt"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-11-13_04-14-36__e558480b-ee15-4372-af68-c0c067b3918c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.217.87
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['54915', '54916', '54917', '54918', '54919']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 54915:54915 -p 54916:54916 -p 54917:54917 -p 54918:54918 -p 54919:54919 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=54917 --rest-port=54915 --tcp-port=54916 --discv5-udp-port=54918 --rest-address=0.0.0.0 --nat=extip:172.18.217.87 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8948bdce9efdcfaa82adc60cefcaa93b3ad4abe1eacdbbe963f7eda0ababb64c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=54919 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QAck5fSS4jqSYd34FfpMstDCAGnw15jeVP5IVtMs3JoVBhMf9O6GCdwMiO4FOYIMARCbl3elywZ_15FVxS8X9soCgmlkgnY0gmlwhKwSSniKbXVsdGlhZGRyc5YACASsEkp4BuFGAAoErBJKeAbhR90DgnJzhQADAQAAiXNlY3AyNTZrMaEDF9DZqXmDfhEHM0X3SzknBbk-VOq3t3d7B1wEE23VhpuDdGNwguFGg3VkcILhSIV3YWt1Mgk --lightpushnode=/ip4/172.18.74.120/tcp/57670/p2p/16Uiu2HAmEFxSEawAR46NBY8FR4Meoh5sCkouWrCNkXE5j5oeK3Zt --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.217.87 waku aa058d1728b93a3791dd1a0f1bfee1db6c2747213300b0c9881eb30b26768d53
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID aa058d1728b9. Setting up logs at ./log/docker/lightpush_node1_2024-11-13_04-14-36__e558480b-ee15-4372-af68-c0c067b3918c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 54915
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54915/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54915/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.217.87/tcp/54916/p2p/16Uiu2HAmKzY7twAME6e3VZLqoCjWPbzXoaG5BJd9mfnV5qoH2Fsc","/ip4/172.18.217.87/tcp/54917/ws/p2p/16Uiu2HAmKzY7twAME6e3VZLqoCjWPbzXoaG5BJd9mfnV5qoH2Fsc"],"enrUri":"enr:-L24QHYf9xDEIPacXIHFFsQUW1QBleCX5uIzacEa15PyYlKTOpCzwDGD5SI20Z52C-0vqjUHiR6fhkyyCMYg2ABiF5MCgmlkgnY0gmlwhKwS2VeKbXVsdGlhZGRyc5YACASsEtlXBtaEAAoErBLZVwbWhd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDbQPD6GBb15iDx7HHaYhUJCVvbHMPlCu_r01pyqVUjVeDdGNwgtaEg3VkcILWhoV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54915/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.74.120/tcp/57670/p2p/16Uiu2HAmEFxSEawAR46NBY8FR4Meoh5sCkouWrCNkXE5j5oeK3Zt"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54915/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.48.226/tcp/25392/p2p/16Uiu2HAmPdVC9qdoj4z6jnJjEkPUvfcDiKuuUc7QFuAZkynjzAaR"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57669/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25391/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54915/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1731471282295233792, "version": 10}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57669/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":10,"timestamp":1731471282295233792,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25391/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":10,"timestamp":1731471282295233792,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 2ec7f11d67e8
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 2cde5e3a3fcb
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 2ec7f11d67e8. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id aa058d1728b9
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 2cde5e3a3fcb. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.