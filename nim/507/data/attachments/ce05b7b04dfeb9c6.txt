[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_no_timestamp with id: 2024-12-09_01-37-11__a860475e-80ea-4d1f-baa6-afd11a01d468
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-12-09_01-37-11__a860475e-80ea-4d1f-baa6-afd11a01d468__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.200.112
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['5870', '5871', '5872', '5873', '5874']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 5870:5870 -p 5871:5871 -p 5872:5872 -p 5873:5873 -p 5874:5874 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=5872 --rest-port=5870 --tcp-port=5871 --discv5-udp-port=5873 --rest-address=0.0.0.0 --nat=extip:172.18.200.112 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ca5ba71fd6c0fb026c66215f90b95573f37aeba7363cfac1f06f193e0ecbca41 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=5874 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.200.112 waku 3a1199c3d334ba415cba116f12b6ef1752305caf1a5246d7ad27ff4e0df811f7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 3a1199c3d334. Setting up logs at ./log/docker/receiving_node1_2024-12-09_01-37-11__a860475e-80ea-4d1f-baa6-afd11a01d468__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 5870
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 9c1e3e76f51a. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5870/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5870/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.200.112/tcp/5871/p2p/16Uiu2HAmFd9m4tbhtm7gEEsbokMWXig4RChHRoexAYcUJb2E1xFE","/ip4/172.18.200.112/tcp/5872/ws/p2p/16Uiu2HAmFd9m4tbhtm7gEEsbokMWXig4RChHRoexAYcUJb2E1xFE"],"enrUri":"enr:-L24QPdvDmgm8zH14iJkCbxye0RK084vLhqGNIfrhe9vNTfyFW_d7Qfi4N9NPNDStWx6HyHi7HO9Db-pxrAL8-xwIcwCgmlkgnY0gmlwhKwSyHCKbXVsdGlhZGRyc5YACASsEshwBhbvAAoErBLIcAYW8N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDLBqJ_rcSCA12e2c5snbI1cdrWV1uP1Giu-zUSDZ4OWWDdGNwghbvg3VkcIIW8YV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-12-09_01-37-11__a860475e-80ea-4d1f-baa6-afd11a01d468__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.29.25
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['27803', '27804', '27805', '27806', '27807']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 27803:27803 -p 27804:27804 -p 27805:27805 -p 27806:27806 -p 27807:27807 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27805 --rest-port=27803 --tcp-port=27804 --discv5-udp-port=27806 --rest-address=0.0.0.0 --nat=extip:172.18.29.25 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4bc7abfc3ca03aae2d8d4bc009dfbb5ed59bd8b859f690ed1b2e2cf4ad6ee8a7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27807 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.29.25 waku f72d44d4540cd84f1cc0a4837834d65f1b47ddf269972eb67fd798b85ab4cfc2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID f72d44d4540c. Setting up logs at ./log/docker/receiving_node2_2024-12-09_01-37-11__a860475e-80ea-4d1f-baa6-afd11a01d468__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 27803
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27803/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27803/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.29.25/tcp/27804/p2p/16Uiu2HAmEs8fMqCcJexrtBBY8v7LtBeamDq8fZRJ4UtnrGsKoj7v","/ip4/172.18.29.25/tcp/27805/ws/p2p/16Uiu2HAmEs8fMqCcJexrtBBY8v7LtBeamDq8fZRJ4UtnrGsKoj7v"],"enrUri":"enr:-L24QBlL1r4lAsv3qJ9J73BSjiaoxcaSUbTAqbibM1bbYmnHBc8ufI2LxgbsbCJEtfMiD_Vgl1bF_-iSomJoqoXnsM0CgmlkgnY0gmlwhKwSHRmKbXVsdGlhZGRyc5YACASsEh0ZBmycAAoErBIdGQZsnd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDINO90KYNH0fasxa04Uk-Qd2TBKcgG33Bd4q6aozAEEmDdGNwgmycg3VkcIJsnoV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27803/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.200.112/tcp/5871/p2p/16Uiu2HAmFd9m4tbhtm7gEEsbokMWXig4RChHRoexAYcUJb2E1xFE"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-12-09_01-37-11__a860475e-80ea-4d1f-baa6-afd11a01d468__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.220.181
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['39307', '39308', '39309', '39310', '39311']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 39307:39307 -p 39308:39308 -p 39309:39309 -p 39310:39310 -p 39311:39311 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39309 --rest-port=39307 --tcp-port=39308 --discv5-udp-port=39310 --rest-address=0.0.0.0 --nat=extip:172.18.220.181 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7fb01e13d2ad3f5f6281bc76df6a5f85250448cf04ab1d3d03aacbadc4b0fe59 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39311 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QPdvDmgm8zH14iJkCbxye0RK084vLhqGNIfrhe9vNTfyFW_d7Qfi4N9NPNDStWx6HyHi7HO9Db-pxrAL8-xwIcwCgmlkgnY0gmlwhKwSyHCKbXVsdGlhZGRyc5YACASsEshwBhbvAAoErBLIcAYW8N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDLBqJ_rcSCA12e2c5snbI1cdrWV1uP1Giu-zUSDZ4OWWDdGNwghbvg3VkcIIW8YV3YWt1Mgk --lightpushnode=/ip4/172.18.200.112/tcp/5871/p2p/16Uiu2HAmFd9m4tbhtm7gEEsbokMWXig4RChHRoexAYcUJb2E1xFE --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.220.181 waku f8fd1d10810c2a665b0e70608d27a997aa51626b27f8fa0a67ffa6cf1f737028
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID f8fd1d10810c. Setting up logs at ./log/docker/lightpush_node1_2024-12-09_01-37-11__a860475e-80ea-4d1f-baa6-afd11a01d468__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 39307
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39307/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39307/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.220.181/tcp/39308/p2p/16Uiu2HAmPHjbJL1tAaw8kA3Ce7hCKcAtmoYwKfHwYS9FCX5CQgDx","/ip4/172.18.220.181/tcp/39309/ws/p2p/16Uiu2HAmPHjbJL1tAaw8kA3Ce7hCKcAtmoYwKfHwYS9FCX5CQgDx"],"enrUri":"enr:-L24QK_gwBgUOqr8XoTv-lme_ylHoA0F-PM1jI8Cs5P3KqMbZ587erTv0Cr0xnYC6TIwDkKVRKk6NrHnXyiSVdbCId0CgmlkgnY0gmlwhKwS3LWKbXVsdGlhZGRyc5YACASsEty1BpmMAAoErBLctQaZjd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDnf6r-KQr0BL0ReZYsq2dggEzDf57kkFgn7Wxtt2F7DODdGNwgpmMg3VkcIKZjoV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39307/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.200.112/tcp/5871/p2p/16Uiu2HAmFd9m4tbhtm7gEEsbokMWXig4RChHRoexAYcUJb2E1xFE"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39307/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.29.25/tcp/27804/p2p/16Uiu2HAmEs8fMqCcJexrtBBY8v7LtBeamDq8fZRJ4UtnrGsKoj7v"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5870/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27803/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39307/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto"}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5870/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1733708236011629824,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27803/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1733708236011629824,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 3a1199c3d334
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id f72d44d4540c
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 3a1199c3d334. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id f8fd1d10810c
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container f72d44d4540c. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.