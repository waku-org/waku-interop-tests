[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_valid_meta with id: 2024-12-09_01-37-20__09e4dc23-82d1-4c85-8c2c-f2b98ede8055
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-12-09_01-37-20__09e4dc23-82d1-4c85-8c2c-f2b98ede8055__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.245.144
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['57003', '57004', '57005', '57006', '57007']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 57003:57003 -p 57004:57004 -p 57005:57005 -p 57006:57006 -p 57007:57007 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57005 --rest-port=57003 --tcp-port=57004 --discv5-udp-port=57006 --rest-address=0.0.0.0 --nat=extip:172.18.245.144 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5ad5dc3a1bdeb932a023ec5aff8f325b9318bedb0ecdae2aeed3f333d3799c50 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57007 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.245.144 waku f27084855872a8435b64a2bf274241256125b20ea63ed1b3272efff8fe3d8cc6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID f27084855872. Setting up logs at ./log/docker/receiving_node1_2024-12-09_01-37-20__09e4dc23-82d1-4c85-8c2c-f2b98ede8055__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 57003
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container f8fd1d10810c. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57003/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57003/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.245.144/tcp/57004/p2p/16Uiu2HAmAAH68LLPDcdUGJQSjY8ssDfmgMru4fHEanqREwhaWA7i","/ip4/172.18.245.144/tcp/57005/ws/p2p/16Uiu2HAmAAH68LLPDcdUGJQSjY8ssDfmgMru4fHEanqREwhaWA7i"],"enrUri":"enr:-L24QL-giUTiImHFeUIECSKmxYXH410mcUXqy8eZu_Jt1ZEGfFWHHyDCHgO4meFdliXTVgSN7pZyXSOMRjv73CJbGOECgmlkgnY0gmlwhKwS9ZCKbXVsdGlhZGRyc5YACASsEvWQBt6sAAoErBL1kAberd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC2u21hGpDFpu0yzEELHSbBF8pfISzXawK0jghBDNE_GGDdGNwgt6sg3VkcILeroV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-12-09_01-37-20__09e4dc23-82d1-4c85-8c2c-f2b98ede8055__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.168.72
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['64217', '64218', '64219', '64220', '64221']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 64217:64217 -p 64218:64218 -p 64219:64219 -p 64220:64220 -p 64221:64221 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64219 --rest-port=64217 --tcp-port=64218 --discv5-udp-port=64220 --rest-address=0.0.0.0 --nat=extip:172.18.168.72 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c8a74d1a4fe0abaff2dfb58579dc62b49b6758569ba92a7cde375c5ddc8facf9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64221 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.168.72 waku bc62ca30eb95f86e4e675fdcbfe7a6184c1869fec6c8ef36f55aab257785c368
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID bc62ca30eb95. Setting up logs at ./log/docker/receiving_node2_2024-12-09_01-37-20__09e4dc23-82d1-4c85-8c2c-f2b98ede8055__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 64217
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64217/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64217/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.168.72/tcp/64218/p2p/16Uiu2HAmKDcdr9b8r6tXbowwUjjP6t3MDLvWwqt7avsgrGTDizXR","/ip4/172.18.168.72/tcp/64219/ws/p2p/16Uiu2HAmKDcdr9b8r6tXbowwUjjP6t3MDLvWwqt7avsgrGTDizXR"],"enrUri":"enr:-L24QAWE_qWqpRPoZZEvWyTimItBSoghwOVxgKZhJ2dpQQ9keSYgXohXEuViYw8epMUkHH1fnRuw0vNT09ZNy1PkW4cCgmlkgnY0gmlwhKwSqEiKbXVsdGlhZGRyc5YACASsEqhIBvraAAoErBKoSAb6290DgnJzhQADAQAAiXNlY3AyNTZrMaEDYYG8TwggmC3ahZdfFb9oDr2tQnaDmGo6BUUqrPFEKpCDdGNwgvrag3VkcIL63IV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64217/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.245.144/tcp/57004/p2p/16Uiu2HAmAAH68LLPDcdUGJQSjY8ssDfmgMru4fHEanqREwhaWA7i"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-12-09_01-37-20__09e4dc23-82d1-4c85-8c2c-f2b98ede8055__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.93.194
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['63800', '63801', '63802', '63803', '63804']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 63800:63800 -p 63801:63801 -p 63802:63802 -p 63803:63803 -p 63804:63804 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63802 --rest-port=63800 --tcp-port=63801 --discv5-udp-port=63803 --rest-address=0.0.0.0 --nat=extip:172.18.93.194 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=543b00a5dfacad038bc0b4e3cbe690fdfff8fdab6c0efb7bfd9f969daaaaa0e3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63804 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QL-giUTiImHFeUIECSKmxYXH410mcUXqy8eZu_Jt1ZEGfFWHHyDCHgO4meFdliXTVgSN7pZyXSOMRjv73CJbGOECgmlkgnY0gmlwhKwS9ZCKbXVsdGlhZGRyc5YACASsEvWQBt6sAAoErBL1kAberd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC2u21hGpDFpu0yzEELHSbBF8pfISzXawK0jghBDNE_GGDdGNwgt6sg3VkcILeroV3YWt1Mgk --lightpushnode=/ip4/172.18.245.144/tcp/57004/p2p/16Uiu2HAmAAH68LLPDcdUGJQSjY8ssDfmgMru4fHEanqREwhaWA7i --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.93.194 waku 9cdd29fab6449ba1fe9dbe0b9a328c9672c31d3fe4880bfe54bc3c5bc03e9ac1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 9cdd29fab644. Setting up logs at ./log/docker/lightpush_node1_2024-12-09_01-37-20__09e4dc23-82d1-4c85-8c2c-f2b98ede8055__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 63800
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63800/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63800/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.93.194/tcp/63801/p2p/16Uiu2HAm2pnQykfb77V69caTcA6sokZzuMsGZDLwPnCKJX7pYTxb","/ip4/172.18.93.194/tcp/63802/ws/p2p/16Uiu2HAm2pnQykfb77V69caTcA6sokZzuMsGZDLwPnCKJX7pYTxb"],"enrUri":"enr:-L24QGLxnDqODEnbIETzHG6u2fQvq4K5srQFlCyGo1q7SSBCX_Owv4MM32GszZgt0BNz1JJq4kI53xKEhrzDEFpUYTwCgmlkgnY0gmlwhKwSXcKKbXVsdGlhZGRyc5YACASsEl3CBvk5AAoErBJdwgb5Ot0DgnJzhQADAQAAiXNlY3AyNTZrMaECbe1xOywwJ0OzCsd2i9MvDPCHfYvWmF56qSi2NufUlsiDdGNwgvk5g3VkcIL5O4V3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63800/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.245.144/tcp/57004/p2p/16Uiu2HAmAAH68LLPDcdUGJQSjY8ssDfmgMru4fHEanqREwhaWA7i"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63800/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.168.72/tcp/64218/p2p/16Uiu2HAmKDcdr9b8r6tXbowwUjjP6t3MDLvWwqt7avsgrGTDizXR"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57003/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64217/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63800/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1733708245171837952, "meta": "TGlnaHQgcHVzaCB3b3JrcyEh"}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57003/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1733708245171837952,"meta":"TGlnaHQgcHVzaCB3b3JrcyEh","ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64217/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1733708245171837952,"meta":"TGlnaHQgcHVzaCB3b3JrcyEh","ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id f27084855872
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id bc62ca30eb95
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container f27084855872. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 9cdd29fab644
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container bc62ca30eb95. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.