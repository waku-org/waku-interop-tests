[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_msg_not_stored_when_ephemeral_true with id: 2024-12-09_01-32-05__87c3d830-619e-46a2-8ee7-e44180e82ca0
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-09_01-32-05__87c3d830-619e-46a2-8ee7-e44180e82ca0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-09_01-32-05__87c3d830-619e-46a2-8ee7-e44180e82ca0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-12-09_01-32-05__87c3d830-619e-46a2-8ee7-e44180e82ca0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:388 Start 3 nodes 
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.174.58
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['61824', '61825', '61826', '61827', '61828']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 61824:61824 -p 61825:61825 -p 61826:61826 -p 61827:61827 -p 61828:61828 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61826 --rest-port=61824 --tcp-port=61825 --discv5-udp-port=61827 --rest-address=0.0.0.0 --nat=extip:172.18.174.58 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=abf8999e05a2638795d881e5b75e6e6a5a2fec0d2ccbbe9e3bb8accd971bddea --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61828 --metrics-logging=true --relay=true --store=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.174.58 waku baf2175186ec0ef8aab3127eb2946ec07fe82a9a9fbc0a4c55e6f0c9e011f5e5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID baf2175186ec. Setting up logs at ./log/docker/node1_2024-12-09_01-32-05__87c3d830-619e-46a2-8ee7-e44180e82ca0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 61824
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container bab5f914ad79. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61824/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61824/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.174.58/tcp/61825/p2p/16Uiu2HAkxj1SdL69fG3aStW7B1RWjB92cfjwyLQzidF6jz6SCCjh","/ip4/172.18.174.58/tcp/61826/ws/p2p/16Uiu2HAkxj1SdL69fG3aStW7B1RWjB92cfjwyLQzidF6jz6SCCjh"],"enrUri":"enr:-L24QOl63UrxiTuCOiDYjJRvQ43fXWhdlHuUGVuJpkb8ud8UKy8LN173Ccj2LCO5J-rO3AkqfMjztmVOyl-VeOyU7_wCgmlkgnY0gmlwhKwSrjqKbXVsdGlhZGRyc5YACASsEq46BvGBAAoErBKuOgbxgt0DgnJzhQADAQAAiXNlY3AyNTZrMaECMQPw5sLQL3r-GeXo1cy44U4G2OMvfKPmJbTcpbYBwuCDdGNwgvGBg3VkcILxg4V3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.240.255
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['47441', '47442', '47443', '47444', '47445']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 47441:47441 -p 47442:47442 -p 47443:47443 -p 47444:47444 -p 47445:47445 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=47443 --rest-port=47441 --tcp-port=47442 --discv5-udp-port=47444 --rest-address=0.0.0.0 --nat=extip:172.18.240.255 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=be25dbdd5decdf6d053fda660ebbf7aa6a9af6ff3b4bf7867fce7e21bfbb5fc9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=47445 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-L24QOl63UrxiTuCOiDYjJRvQ43fXWhdlHuUGVuJpkb8ud8UKy8LN173Ccj2LCO5J-rO3AkqfMjztmVOyl-VeOyU7_wCgmlkgnY0gmlwhKwSrjqKbXVsdGlhZGRyc5YACASsEq46BvGBAAoErBKuOgbxgt0DgnJzhQADAQAAiXNlY3AyNTZrMaECMQPw5sLQL3r-GeXo1cy44U4G2OMvfKPmJbTcpbYBwuCDdGNwgvGBg3VkcILxg4V3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.240.255 waku d3bb21001c5f9ccef336a1fc4da6fd2273d1a5fec20be921b6e134007c34cdff
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID d3bb21001c5f. Setting up logs at ./log/docker/node2_2024-12-09_01-32-05__87c3d830-619e-46a2-8ee7-e44180e82ca0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 47441
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47441/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47441/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.240.255/tcp/47442/p2p/16Uiu2HAkxNpzbKZeZUuZ14AUn27VTAJqAKy8ngCJByYjyYPPsVp4","/ip4/172.18.240.255/tcp/47443/ws/p2p/16Uiu2HAkxNpzbKZeZUuZ14AUn27VTAJqAKy8ngCJByYjyYPPsVp4"],"enrUri":"enr:-L24QEZgYja4BUx4sd4vslWYEXGtaTXbh1q6jnK_ckrJ989fBnggglf_A8bl0Ze8lDFpBanM8JZCvS3xYv1S3aEuenwCgmlkgnY0gmlwhKwS8P-KbXVsdGlhZGRyc5YACASsEvD_BrlSAAoErBLw_wa5U90DgnJzhQADAQAAiXNlY3AyNTZrMaECK9iCoHnPNufvUwDr7YDs7xGOSTgqHq_FIrffAPuBj0mDdGNwgrlSg3VkcIK5VIV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.159.127
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['45374', '45375', '45376', '45377', '45378']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 45374:45374 -p 45375:45375 -p 45376:45376 -p 45377:45377 -p 45378:45378 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45376 --rest-port=45374 --tcp-port=45375 --discv5-udp-port=45377 --rest-address=0.0.0.0 --nat=extip:172.18.159.127 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cbdcfbc1d0e61c9d693fcdec511929c22bd03b47161990e10abfa13e5e3b0aba --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45378 --metrics-logging=true --relay=false --storenode=/ip4/172.18.240.255/tcp/47442/p2p/16Uiu2HAkxNpzbKZeZUuZ14AUn27VTAJqAKy8ngCJByYjyYPPsVp4 --discv5-bootstrap-node=enr:-L24QEZgYja4BUx4sd4vslWYEXGtaTXbh1q6jnK_ckrJ989fBnggglf_A8bl0Ze8lDFpBanM8JZCvS3xYv1S3aEuenwCgmlkgnY0gmlwhKwS8P-KbXVsdGlhZGRyc5YACASsEvD_BrlSAAoErBLw_wa5U90DgnJzhQADAQAAiXNlY3AyNTZrMaECK9iCoHnPNufvUwDr7YDs7xGOSTgqHq_FIrffAPuBj0mDdGNwgrlSg3VkcIK5VIV3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.159.127 waku c0c432574b10f31e273a5adf0c9a191facd4417f52f1d22e288a24565e06d625
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID c0c432574b10. Setting up logs at ./log/docker/node3_2024-12-09_01-32-05__87c3d830-619e-46a2-8ee7-e44180e82ca0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 45374
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45374/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45374/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.159.127/tcp/45375/p2p/16Uiu2HAmPtwbPYyGKoytrbcWmuN1rC82ZQLhSNb2AdVGRoYq5heQ","/ip4/172.18.159.127/tcp/45376/ws/p2p/16Uiu2HAmPtwbPYyGKoytrbcWmuN1rC82ZQLhSNb2AdVGRoYq5heQ"],"enrUri":"enr:-L24QIYhMF2w1BPRRXuvbfXkrEwEaLJiW6PYasWuDrP8cUFwEs-TiXjx992CiEHVToFLgVwVBcknEVqIFQMvFwve9yoCgmlkgnY0gmlwhKwSn3-KbXVsdGlhZGRyc5YACASsEp9_BrE_AAoErBKffwaxQN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDpwOR_dJ0eBQ-1HV2SHTZ-w0-KAxH4m71IdrmLx2DGpmDdGNwgrE_g3VkcIKxQYV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:393 Subscribe node1 ,2 to pubtopic /waku/2/rs/3/1
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61824/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47441/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61824/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.240.255/tcp/47442/p2p/16Uiu2HAkxNpzbKZeZUuZ14AUn27VTAJqAKy8ngCJByYjyYPPsVp4","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47441/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.174.58/tcp/61825/p2p/16Uiu2HAkxj1SdL69fG3aStW7B1RWjB92cfjwyLQzidF6jz6SCCjh","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:398 Node1 publish message with flag ephemeral = True
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61824/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "ephemeral": true}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 3 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:403 Node3 makes store request to get messages
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45374/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"02387644b07b6112d16c","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:407 Response for store when ephemeral = true is strPeer wakuorg/nwaku:latest couldn't find any messages. Actual response: {'requestId': '02387644b07b6112d16c', 'statusCode': 200, 'statusDesc': 'OK', 'messages': []}
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:409 Message isn't stored as ephemeral = True
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id baf2175186ec
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id d3bb21001c5f
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container baf2175186ec. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id c0c432574b10
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container d3bb21001c5f. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.