[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_extra_field with id: 2024-12-09_01-37-30__f4fa696f-7bb4-474b-afc8-63bae276850a
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-12-09_01-37-30__f4fa696f-7bb4-474b-afc8-63bae276850a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.207.223
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['23225', '23226', '23227', '23228', '23229']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 23225:23225 -p 23226:23226 -p 23227:23227 -p 23228:23228 -p 23229:23229 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23227 --rest-port=23225 --tcp-port=23226 --discv5-udp-port=23228 --rest-address=0.0.0.0 --nat=extip:172.18.207.223 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bfff46d7b02be4bc4cf7eaeafcd2f6a02f5c781d6b54e1b4f9b3ead0535a6f10 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23229 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.207.223 waku 4f49a9cf1f5d8c588181ae0af20b0657148a6e3ca29247c9775b53cd5f51ba67
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 4f49a9cf1f5d. Setting up logs at ./log/docker/receiving_node1_2024-12-09_01-37-30__f4fa696f-7bb4-474b-afc8-63bae276850a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 23225
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 9cdd29fab644. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23225/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23225/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.207.223/tcp/23226/p2p/16Uiu2HAmSLV8G5PxfiSeVHYskykDFrdXo99fZeMHZBnCxY6RJzZN","/ip4/172.18.207.223/tcp/23227/ws/p2p/16Uiu2HAmSLV8G5PxfiSeVHYskykDFrdXo99fZeMHZBnCxY6RJzZN"],"enrUri":"enr:-L24QL2gUNxbzi38VjGBdTcvrFwHg1MAs1DoY4yELD2_XUz2KcFZ30IFKpVg6kbozCfrJZi0vR7VYqc6cZyC7ldxDkYCgmlkgnY0gmlwhKwSz9-KbXVsdGlhZGRyc5YACASsEs_fBlq6AAoErBLP3wZau90DgnJzhQADAQAAiXNlY3AyNTZrMaEDy0YeNTfsP1DSFsjZawOOWrs1VaLUxyZ8P7PeOjFDnuGDdGNwglq6g3VkcIJavIV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-12-09_01-37-30__f4fa696f-7bb4-474b-afc8-63bae276850a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.35.143
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['39532', '39533', '39534', '39535', '39536']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 39532:39532 -p 39533:39533 -p 39534:39534 -p 39535:39535 -p 39536:39536 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39534 --rest-port=39532 --tcp-port=39533 --discv5-udp-port=39535 --rest-address=0.0.0.0 --nat=extip:172.18.35.143 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f0b9ddbabee98ae352eceb8d4feb76fcc0912de87d1f59ad0aa68eccc7ffd661 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39536 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.35.143 waku 94629a986861cc466cca83e2121505134940a66fc618f84a57e68496f1f1e7cc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 94629a986861. Setting up logs at ./log/docker/receiving_node2_2024-12-09_01-37-30__f4fa696f-7bb4-474b-afc8-63bae276850a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 39532
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39532/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39532/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.35.143/tcp/39533/p2p/16Uiu2HAm3mQRQC8gCqcdEFv14Ri2FR6sTu4wxsNttGj7oXQuRvZT","/ip4/172.18.35.143/tcp/39534/ws/p2p/16Uiu2HAm3mQRQC8gCqcdEFv14Ri2FR6sTu4wxsNttGj7oXQuRvZT"],"enrUri":"enr:-L24QGIKlZlNJVwCvvq0M4yWdfnjqOXRVV3EvjoYlh-CbjAmRl0XGmUYq0-rnTguYnjCFDTzIvAlXuSqKFiCJNSF29gCgmlkgnY0gmlwhKwSI4-KbXVsdGlhZGRyc5YACASsEiOPBpptAAoErBIjjwaabt0DgnJzhQADAQAAiXNlY3AyNTZrMaECe-uFAMwJaJNRVbdwGpqr3AHYgrKhgdmvzz773OIN-K6DdGNwgpptg3VkcIKab4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39532/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.207.223/tcp/23226/p2p/16Uiu2HAmSLV8G5PxfiSeVHYskykDFrdXo99fZeMHZBnCxY6RJzZN"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-12-09_01-37-30__f4fa696f-7bb4-474b-afc8-63bae276850a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.128.65
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['34785', '34786', '34787', '34788', '34789']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 34785:34785 -p 34786:34786 -p 34787:34787 -p 34788:34788 -p 34789:34789 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34787 --rest-port=34785 --tcp-port=34786 --discv5-udp-port=34788 --rest-address=0.0.0.0 --nat=extip:172.18.128.65 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=05effdbda0da2355f9fdc27c6df797b71ee0b7809ccf89bc5bfdcfd90fdaf010 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34789 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QL2gUNxbzi38VjGBdTcvrFwHg1MAs1DoY4yELD2_XUz2KcFZ30IFKpVg6kbozCfrJZi0vR7VYqc6cZyC7ldxDkYCgmlkgnY0gmlwhKwSz9-KbXVsdGlhZGRyc5YACASsEs_fBlq6AAoErBLP3wZau90DgnJzhQADAQAAiXNlY3AyNTZrMaEDy0YeNTfsP1DSFsjZawOOWrs1VaLUxyZ8P7PeOjFDnuGDdGNwglq6g3VkcIJavIV3YWt1Mgk --lightpushnode=/ip4/172.18.207.223/tcp/23226/p2p/16Uiu2HAmSLV8G5PxfiSeVHYskykDFrdXo99fZeMHZBnCxY6RJzZN --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.128.65 waku d664b9bbfe79c25e7ad5d68f307a84ff5c3aaac1f95ea630dea3e971bed88944
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID d664b9bbfe79. Setting up logs at ./log/docker/lightpush_node1_2024-12-09_01-37-30__f4fa696f-7bb4-474b-afc8-63bae276850a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 34785
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34785/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34785/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.128.65/tcp/34786/p2p/16Uiu2HAmJf2syh31G8oU1KUGDbCnPhcTcuLqG5ZcjpmaRsqkWotA","/ip4/172.18.128.65/tcp/34787/ws/p2p/16Uiu2HAmJf2syh31G8oU1KUGDbCnPhcTcuLqG5ZcjpmaRsqkWotA"],"enrUri":"enr:-L24QATcty9-JcHjSgOTDu4hfnSRfEBTiZ3tVSBYFrnCcvYsIA-XqpVyYkJKmNh6YuI1LZ3EcgYyqPD53dRvCau9F5gCgmlkgnY0gmlwhKwSgEGKbXVsdGlhZGRyc5YACASsEoBBBofiAAoErBKAQQaH490DgnJzhQADAQAAiXNlY3AyNTZrMaEDWSj7Mfyg-IOxBkagEGlIEHLIt4UsNu_9zEogmdr2Z8eDdGNwgofig3VkcIKH5IV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34785/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.207.223/tcp/23226/p2p/16Uiu2HAmSLV8G5PxfiSeVHYskykDFrdXo99fZeMHZBnCxY6RJzZN"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34785/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.35.143/tcp/39533/p2p/16Uiu2HAm3mQRQC8gCqcdEFv14Ri2FR6sTu4wxsNttGj7oXQuRvZT"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23225/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39532/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34785/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1733708254435463168, "extraField": "extraValue"}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:34785/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 4f49a9cf1f5d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 94629a986861
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 4f49a9cf1f5d. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id d664b9bbfe79
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 94629a986861. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.