[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_publish_with_payload_less_than_150_kb with id: 2024-10-12_04-24-14__eef54c54-6120-429a-b601-ab80c83bd77b
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.relay:relay.py:34 Running fixture setup: setup_main_relay_nodes
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-12_04-24-14__eef54c54-6120-429a-b601-ab80c83bd77b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.196.201
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['11694', '11695', '11696', '11697', '11698']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 11694:11694 -p 11695:11695 -p 11696:11696 -p 11697:11697 -p 11698:11698 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=11696 --rest-port=11694 --tcp-port=11695 --discv5-udp-port=11697 --rest-address=0.0.0.0 --nat=extip:172.18.196.201 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f3aa1fe7aaeb94a956f6bebabeeed5e47247799b448eebda0a1c0835afe91c0c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=11698 --metrics-logging=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.196.201 waku 615dffa13771da2d50cac19d37e9c7dc546609fa04d18fea5e88e0879e972ecb
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 615dffa13771. Setting up logs at ./log/docker/node1_2024-10-12_04-24-14__eef54c54-6120-429a-b601-ab80c83bd77b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 11694
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11694/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11694/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.196.201/tcp/11695/p2p/16Uiu2HAmDTniD51a6vwTCs4QKxYuc5DmYExYde8gUeVcaEtSBrq3","/ip4/172.18.196.201/tcp/11696/ws/p2p/16Uiu2HAmDTniD51a6vwTCs4QKxYuc5DmYExYde8gUeVcaEtSBrq3"],"enrUri":"enr:-LO4QAusdv4yKYQisu7rRG7dmxwvhD-4pueygnx6ZtnZ1s1aOxDoJk5VB2Rjvq6cavu0jY_1Ud2d4oeVx117qTxaxHcBgmlkgnY0gmlwhKwSxMmKbXVsdGlhZGRyc4wACgSsEsTJBi2w3QOCcnOFAAMBAACJc2VjcDI1NmsxoQML_SMsemPuWQ02VyVRJv6XDcNkDZqrTZvQxGmVfWUshoN0Y3CCLa-DdWRwgi2xhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-10-12_04-24-14__eef54c54-6120-429a-b601-ab80c83bd77b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.104.188
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['35386', '35387', '35388', '35389', '35390']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 35386:35386 -p 35387:35387 -p 35388:35388 -p 35389:35389 -p 35390:35390 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=35388 --rest-port=35386 --tcp-port=35387 --discv5-udp-port=35389 --rest-address=0.0.0.0 --nat=extip:172.18.104.188 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c90c2effa95e5a1af23e669b5ef0cfa325e7b2cadbdcaafdb9e0d4af754627ed --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=35390 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QAusdv4yKYQisu7rRG7dmxwvhD-4pueygnx6ZtnZ1s1aOxDoJk5VB2Rjvq6cavu0jY_1Ud2d4oeVx117qTxaxHcBgmlkgnY0gmlwhKwSxMmKbXVsdGlhZGRyc4wACgSsEsTJBi2w3QOCcnOFAAMBAACJc2VjcDI1NmsxoQML_SMsemPuWQ02VyVRJv6XDcNkDZqrTZvQxGmVfWUshoN0Y3CCLa-DdWRwgi2xhXdha3UyAQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.104.188 waku b8b19b3170423d212aee1acae3b810c2aa58704cde8e11d30b02045762f51d35
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID b8b19b317042. Setting up logs at ./log/docker/node2_2024-10-12_04-24-14__eef54c54-6120-429a-b601-ab80c83bd77b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 35386
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35386/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35386/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.104.188/tcp/35387/p2p/16Uiu2HAmR17D8QPxe7UkRviuhAuefvnzgtK9fdcBDTDX8ni6sqyx","/ip4/172.18.104.188/tcp/35388/ws/p2p/16Uiu2HAmR17D8QPxe7UkRviuhAuefvnzgtK9fdcBDTDX8ni6sqyx"],"enrUri":"enr:-LO4QLsEZL16w2wjZNH7tnaVjst6XRes_KJ24gmK3hBu6qxZI1UEjxW1dDsIqhVEJ9CnU1P372I_mbINAWV-KVB2AAABgmlkgnY0gmlwhKwSaLyKbXVsdGlhZGRyc4wACgSsEmi8Boo83QOCcnOFAAMBAACJc2VjcDI1NmsxoQO3c514T_7syS1TQEvhg9VLnjiFuKlgSQ29wSVjOIhYJ4N0Y3CCijuDdWRwgoo9hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35386/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.196.201/tcp/11695/p2p/16Uiu2HAmDTniD51a6vwTCs4QKxYuc5DmYExYde8gUeVcaEtSBrq3"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.relay:relay.py:59 Running fixture setup: subscribe_main_relay_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11694/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35386/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11694/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.relay:relay.py:123 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11694/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1728707059458692096,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.relay:relay.py:123 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35386/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1728707059458692096,"ephemeral":false}]'
[32mINFO    [0m src.steps.relay:relay.py:71 WARM UP successful!!
[35mDEBUG   [0m tests.relay.test_publish:test_publish.py:49 Running test with payload length of 102400 bytes
[32mINFO    [0m src.node.api_clients.base_client:custom_logger.py:10 Log line was discarded because it's longer than max_log_line_length=5000
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 2 seconds
[35mDEBUG   [0m src.steps.relay:relay.py:123 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11694/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:custom_logger.py:10 Log line was discarded because it's longer than max_log_line_length=5000
[35mDEBUG   [0m src.steps.relay:relay.py:123 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35386/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:custom_logger.py:10 Log line was discarded because it's longer than max_log_line_length=5000
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 615dffa13771
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id b8b19b317042
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.