[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_extra_field with id: 2024-10-12_04-21-08__15d5139e-aac6-49c6-b43f-e530262536eb
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-10-12_04-21-08__15d5139e-aac6-49c6-b43f-e530262536eb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.13.61
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['40216', '40217', '40218', '40219', '40220']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 40216:40216 -p 40217:40217 -p 40218:40218 -p 40219:40219 -p 40220:40220 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40218 --rest-port=40216 --tcp-port=40217 --discv5-udp-port=40219 --rest-address=0.0.0.0 --nat=extip:172.18.13.61 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ee57a3fd2604d9c416296c8cba1c3fbe0da88ecccb2e64ac39a06acdd91e8ca9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40220 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.13.61 waku 5b1afd706e3e4395316275d903d0431896fc852fcf9080b0105eb8c90f5ec701
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 5b1afd706e3e. Setting up logs at ./log/docker/receiving_node1_2024-10-12_04-21-08__15d5139e-aac6-49c6-b43f-e530262536eb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 40216
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40216/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40216/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.13.61/tcp/40217/p2p/16Uiu2HAm6amGHuQTKfwHDx9r319VbWXcnh3bDvGrtihgjkXzduQD","/ip4/172.18.13.61/tcp/40218/ws/p2p/16Uiu2HAm6amGHuQTKfwHDx9r319VbWXcnh3bDvGrtihgjkXzduQD"],"enrUri":"enr:-LO4QB7ckn7zgwo_glFW0-8FjO1NbxkzfViB9Ec_Ct6avPuZBxk1WgXD-EqIvPCNqpEzB8HmGjOwQ3228Q1-zWW-aRYBgmlkgnY0gmlwhKwSDT2KbXVsdGlhZGRyc4wACgSsEg09Bp0a3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKlxMI1ns4NsCWiZyUDzj0laK68Qc-zmPd_Es3OHl6YQoN0Y3CCnRmDdWRwgp0bhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-10-12_04-21-08__15d5139e-aac6-49c6-b43f-e530262536eb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.242.98
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['4585', '4586', '4587', '4588', '4589']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 4585:4585 -p 4586:4586 -p 4587:4587 -p 4588:4588 -p 4589:4589 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4587 --rest-port=4585 --tcp-port=4586 --discv5-udp-port=4588 --rest-address=0.0.0.0 --nat=extip:172.18.242.98 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4d91aea1bcdf03b218118ae9f0b40b53dccad0df3bc870a8ea2eddd160f6aeee --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4589 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.242.98 waku 0f393ab5c9f1be68ee6f1bb680301dcf599723d981a2fde8433197b1368d087e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 0f393ab5c9f1. Setting up logs at ./log/docker/receiving_node2_2024-10-12_04-21-08__15d5139e-aac6-49c6-b43f-e530262536eb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 4585
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4585/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4585/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.242.98/tcp/4586/p2p/16Uiu2HAmR7ghf8x6WHWeLvY9ibE149JTDbQ1nyznQRC8BmPBPA6E","/ip4/172.18.242.98/tcp/4587/ws/p2p/16Uiu2HAmR7ghf8x6WHWeLvY9ibE149JTDbQ1nyznQRC8BmPBPA6E"],"enrUri":"enr:-LO4QMt2wW4ABkmE9Z6XDpzu1yeJnoxT5DYJGk6OvJ7eh4ajNBnpKskX7JImSqAekNKB5PNGi2PC6JBQcmdfq2fh7ugBgmlkgnY0gmlwhKwS8mKKbXVsdGlhZGRyc4wACgSsEvJiBhHr3QOCcnOFAAMBAACJc2VjcDI1NmsxoQO5IvgpIMLfpVtaaBswVeuaZ0foZjB0JUUgOrLUTZ8eQ4N0Y3CCEeqDdWRwghHshXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4585/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.13.61/tcp/40217/p2p/16Uiu2HAm6amGHuQTKfwHDx9r319VbWXcnh3bDvGrtihgjkXzduQD"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-10-12_04-21-08__15d5139e-aac6-49c6-b43f-e530262536eb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.20.13
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['64132', '64133', '64134', '64135', '64136']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 64132:64132 -p 64133:64133 -p 64134:64134 -p 64135:64135 -p 64136:64136 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64134 --rest-port=64132 --tcp-port=64133 --discv5-udp-port=64135 --rest-address=0.0.0.0 --nat=extip:172.18.20.13 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d49331358bb9bab5a4ceb4fd6a19dd9b1ed9ac9e7caf2bdaa54c00afc5a4f5c5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64136 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QB7ckn7zgwo_glFW0-8FjO1NbxkzfViB9Ec_Ct6avPuZBxk1WgXD-EqIvPCNqpEzB8HmGjOwQ3228Q1-zWW-aRYBgmlkgnY0gmlwhKwSDT2KbXVsdGlhZGRyc4wACgSsEg09Bp0a3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKlxMI1ns4NsCWiZyUDzj0laK68Qc-zmPd_Es3OHl6YQoN0Y3CCnRmDdWRwgp0bhXdha3UyCQ --lightpushnode=/ip4/172.18.13.61/tcp/40217/p2p/16Uiu2HAm6amGHuQTKfwHDx9r319VbWXcnh3bDvGrtihgjkXzduQD --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.20.13 waku d61b435aa9038d4967182e11d37430d93985b6c66fd8d3f01c53eba91afc2eb4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID d61b435aa903. Setting up logs at ./log/docker/lightpush_node1_2024-10-12_04-21-08__15d5139e-aac6-49c6-b43f-e530262536eb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 64132
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64132/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64132/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.20.13/tcp/64133/p2p/16Uiu2HAmL3s6az2jvciaxLkuBzyeGhN9Tr6T13myVPssNxufZDbQ","/ip4/172.18.20.13/tcp/64134/ws/p2p/16Uiu2HAmL3s6az2jvciaxLkuBzyeGhN9Tr6T13myVPssNxufZDbQ"],"enrUri":"enr:-LO4QEyDzZwBvofjXrbUR9d2dnvTHi1sI6RlkQ5vFKAEBHTBK8m9FPdtA53Pjet6CE5hwfauGY2MUSAcLMcxRD7cDuMBgmlkgnY0gmlwhKwSFA2KbXVsdGlhZGRyc4wACgSsEhQNBvqG3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNt3fctGFGQCRVy4iFJK-6PyG9sSgSs3LxK5q-PUyPxm4N0Y3CC-oWDdWRwgvqHhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64132/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.13.61/tcp/40217/p2p/16Uiu2HAm6amGHuQTKfwHDx9r319VbWXcnh3bDvGrtihgjkXzduQD"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64132/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.242.98/tcp/4586/p2p/16Uiu2HAmR7ghf8x6WHWeLvY9ibE149JTDbQ1nyznQRC8BmPBPA6E"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40216/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4585/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64132/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1728706874295729664, "extraField": "extraValue"}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:64132/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 5b1afd706e3e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 0f393ab5c9f1
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id d61b435aa903
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.