[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_no_timestamp with id: 2024-10-12_04-20-38__0cc1ac5e-c222-41b6-a701-47dc033bfd7b
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-10-12_04-20-38__0cc1ac5e-c222-41b6-a701-47dc033bfd7b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.170.124
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['44893', '44894', '44895', '44896', '44897']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 44893:44893 -p 44894:44894 -p 44895:44895 -p 44896:44896 -p 44897:44897 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44895 --rest-port=44893 --tcp-port=44894 --discv5-udp-port=44896 --rest-address=0.0.0.0 --nat=extip:172.18.170.124 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a01c83eb0d04cae67b3aca64d1fe85cfe84e63fdff3ff6673578daa37c3d9be1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44897 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.170.124 waku de256987f4459de0490b2e6353553920501883bce15e584880cf9b538d51a72b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID de256987f445. Setting up logs at ./log/docker/receiving_node1_2024-10-12_04-20-38__0cc1ac5e-c222-41b6-a701-47dc033bfd7b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 44893
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44893/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44893/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.170.124/tcp/44894/p2p/16Uiu2HAm9XmzAR23VUAnGtrb34R16qpKN8MpbSmPMhN8pWQ1XRYZ","/ip4/172.18.170.124/tcp/44895/ws/p2p/16Uiu2HAm9XmzAR23VUAnGtrb34R16qpKN8MpbSmPMhN8pWQ1XRYZ"],"enrUri":"enr:-LO4QFKd5BA73vc05XOOg7A4SWjq0FD0ocyxY8Nb39Z3ZfARH9ZSuHId-Bucx_up7ebZLmj9ChsqKnjG9tds4l7ayiIBgmlkgnY0gmlwhKwSqnyKbXVsdGlhZGRyc4wACgSsEqp8Bq9f3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLRk-SsEV_S6W7dMnT9cke0bMQrxpVr2K0whk8VnQJQVoN0Y3CCr16DdWRwgq9ghXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-10-12_04-20-38__0cc1ac5e-c222-41b6-a701-47dc033bfd7b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.225.54
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['25503', '25504', '25505', '25506', '25507']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 25503:25503 -p 25504:25504 -p 25505:25505 -p 25506:25506 -p 25507:25507 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25505 --rest-port=25503 --tcp-port=25504 --discv5-udp-port=25506 --rest-address=0.0.0.0 --nat=extip:172.18.225.54 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c1d2b1a1bbfe6dcec7f4aea7eb89fd6be5c7e5090ac995acafbc0debf4a6796a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25507 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.225.54 waku dff9969020339afb733f1e33532d0c0073bcdabecc7249247fe7b4218f41fc80
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID dff996902033. Setting up logs at ./log/docker/receiving_node2_2024-10-12_04-20-38__0cc1ac5e-c222-41b6-a701-47dc033bfd7b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 25503
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25503/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25503/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.225.54/tcp/25504/p2p/16Uiu2HAm4Gti1jKk3hygcpbsB5LnkoFFiPzcu8bAE3ARGgKmeHdF","/ip4/172.18.225.54/tcp/25505/ws/p2p/16Uiu2HAm4Gti1jKk3hygcpbsB5LnkoFFiPzcu8bAE3ARGgKmeHdF"],"enrUri":"enr:-LO4QJOdsCaKRlCWhuckuZpMx1XccPUz01-8nuN_Z9-6sDxgVarMD5usQmOQwvzs86-AkglOMoh2MxOrei0-X0w2fo0BgmlkgnY0gmlwhKwS4TaKbXVsdGlhZGRyc4wACgSsEuE2BmOh3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKDeVi42vpdXi0HpjaTdQ3AV0DiCN6DH9Xw7o_g0L2ZfoN0Y3CCY6CDdWRwgmOihXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25503/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.170.124/tcp/44894/p2p/16Uiu2HAm9XmzAR23VUAnGtrb34R16qpKN8MpbSmPMhN8pWQ1XRYZ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-10-12_04-20-38__0cc1ac5e-c222-41b6-a701-47dc033bfd7b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.232.175
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['7264', '7265', '7266', '7267', '7268']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 7264:7264 -p 7265:7265 -p 7266:7266 -p 7267:7267 -p 7268:7268 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7266 --rest-port=7264 --tcp-port=7265 --discv5-udp-port=7267 --rest-address=0.0.0.0 --nat=extip:172.18.232.175 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fc6662ef9add1855bea1c2f0bf48d5feddb3c3c535bd7fecaba8beaaebcbbaf4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7268 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QFKd5BA73vc05XOOg7A4SWjq0FD0ocyxY8Nb39Z3ZfARH9ZSuHId-Bucx_up7ebZLmj9ChsqKnjG9tds4l7ayiIBgmlkgnY0gmlwhKwSqnyKbXVsdGlhZGRyc4wACgSsEqp8Bq9f3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLRk-SsEV_S6W7dMnT9cke0bMQrxpVr2K0whk8VnQJQVoN0Y3CCr16DdWRwgq9ghXdha3UyCQ --lightpushnode=/ip4/172.18.170.124/tcp/44894/p2p/16Uiu2HAm9XmzAR23VUAnGtrb34R16qpKN8MpbSmPMhN8pWQ1XRYZ --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.232.175 waku a8d047311a41f3ad6691e43aa66aa3bbb1e8dd5942dc47ed9b3fbe2c78557cda
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID a8d047311a41. Setting up logs at ./log/docker/lightpush_node1_2024-10-12_04-20-38__0cc1ac5e-c222-41b6-a701-47dc033bfd7b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 7264
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7264/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7264/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.232.175/tcp/7265/p2p/16Uiu2HAm4evGVgUk49EgsLGiP48v8QNkRGUFK3WHmzhcQ6eVw9dD","/ip4/172.18.232.175/tcp/7266/ws/p2p/16Uiu2HAm4evGVgUk49EgsLGiP48v8QNkRGUFK3WHmzhcQ6eVw9dD"],"enrUri":"enr:-LO4QJmgLGIKGCSqnr27aMXngqHGhdCF7nRGx4YOJUxwE-Ujd_E4bwmm9I8jT-e3xj6HN-3apKF1cOgFvcwpEQDAXaIBgmlkgnY0gmlwhKwS6K-KbXVsdGlhZGRyc4wACgSsEuivBhxi3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKJHeNn-NM4KTTEb-UNbX2TIITAIFMEw655t57ZSfQLZIN0Y3CCHGGDdWRwghxjhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7264/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.170.124/tcp/44894/p2p/16Uiu2HAm9XmzAR23VUAnGtrb34R16qpKN8MpbSmPMhN8pWQ1XRYZ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7264/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.225.54/tcp/25504/p2p/16Uiu2HAm4Gti1jKk3hygcpbsB5LnkoFFiPzcu8bAE3ARGgKmeHdF"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44893/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25503/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7264/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto"}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44893/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1728706844498707200,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25503/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1728706844498707200,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id de256987f445
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id dff996902033
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id a8d047311a41
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.