[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_with_large_meta with id: 2024-10-12_04-21-03__43c6617e-3cd4-42d7-a664-6de39f27a8d3
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-10-12_04-21-03__43c6617e-3cd4-42d7-a664-6de39f27a8d3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.138.145
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['64821', '64822', '64823', '64824', '64825']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 64821:64821 -p 64822:64822 -p 64823:64823 -p 64824:64824 -p 64825:64825 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64823 --rest-port=64821 --tcp-port=64822 --discv5-udp-port=64824 --rest-address=0.0.0.0 --nat=extip:172.18.138.145 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bf72f75a09aaabb7def817a43db7bbffefb1aaacff8ff8e1a160abeba6dbbd9f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64825 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.138.145 waku 129426b1a9aa1ebb9a6d32f5f67ee6d5e6637ad54fea1ed4a7a5a36f3468ac69
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 129426b1a9aa. Setting up logs at ./log/docker/receiving_node1_2024-10-12_04-21-03__43c6617e-3cd4-42d7-a664-6de39f27a8d3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 64821
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64821/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64821/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.138.145/tcp/64822/p2p/16Uiu2HAkwfxKP6tHHaGghrhRCb5ZpE7s6Riu8bQ5njJoSKDpNY5w","/ip4/172.18.138.145/tcp/64823/ws/p2p/16Uiu2HAkwfxKP6tHHaGghrhRCb5ZpE7s6Riu8bQ5njJoSKDpNY5w"],"enrUri":"enr:-LO4QGne28h7S17vqCiuZryP2SU4rnPcd53qbJcFP0XGW_klaAAllJSn1U1CmjymUmiGFvRqsPO3RCl2LnlvYufB0UEBgmlkgnY0gmlwhKwSipGKbXVsdGlhZGRyc4wACgSsEoqRBv033QOCcnOFAAMBAACJc2VjcDI1NmsxoQIhX_pyi634qU8HdGcZJIIfU1dHy7x0oikzLZOBpNtWMoN0Y3CC_TaDdWRwgv04hXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-10-12_04-21-03__43c6617e-3cd4-42d7-a664-6de39f27a8d3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.45.0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['10452', '10453', '10454', '10455', '10456']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 10452:10452 -p 10453:10453 -p 10454:10454 -p 10455:10455 -p 10456:10456 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=10454 --rest-port=10452 --tcp-port=10453 --discv5-udp-port=10455 --rest-address=0.0.0.0 --nat=extip:172.18.45.0 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7d4c1acc2ead432dc44a023369a03f5db6478bebcc797e12e43eb727579a655f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=10456 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.45.0 waku 88fa39a9b060edf23d40044fc7c4d0eead151659a4a494decfbc0fb22e475f2e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 88fa39a9b060. Setting up logs at ./log/docker/receiving_node2_2024-10-12_04-21-03__43c6617e-3cd4-42d7-a664-6de39f27a8d3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 10452
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10452/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10452/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.45.0/tcp/10453/p2p/16Uiu2HAmHGRcXp2uP9NeQfnSJSj9JdJcen6TasjebFe2MDaMzgvh","/ip4/172.18.45.0/tcp/10454/ws/p2p/16Uiu2HAmHGRcXp2uP9NeQfnSJSj9JdJcen6TasjebFe2MDaMzgvh"],"enrUri":"enr:-LO4QPuQqoqna8Pv07mHcllNICs2iMLtuHiSXJfyh53Ib1w4GyGS9-LPRQlzt705Kqcrcpoq1hDb7jwXFLNVecZjO6QBgmlkgnY0gmlwhKwSLQCKbXVsdGlhZGRyc4wACgSsEi0ABijW3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNEgqQIrfw24nKW_uUqgp4JJaaHAmnlyMZDSNfCJtlmboN0Y3CCKNWDdWRwgijXhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10452/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.138.145/tcp/64822/p2p/16Uiu2HAkwfxKP6tHHaGghrhRCb5ZpE7s6Riu8bQ5njJoSKDpNY5w"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-10-12_04-21-03__43c6617e-3cd4-42d7-a664-6de39f27a8d3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.79.250
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['50843', '50844', '50845', '50846', '50847']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 50843:50843 -p 50844:50844 -p 50845:50845 -p 50846:50846 -p 50847:50847 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=50845 --rest-port=50843 --tcp-port=50844 --discv5-udp-port=50846 --rest-address=0.0.0.0 --nat=extip:172.18.79.250 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=afa34ec37a3caf1accd9fae03477a6aebdf85104f7ccbd0a9155a1f8b567a4bd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=50847 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QGne28h7S17vqCiuZryP2SU4rnPcd53qbJcFP0XGW_klaAAllJSn1U1CmjymUmiGFvRqsPO3RCl2LnlvYufB0UEBgmlkgnY0gmlwhKwSipGKbXVsdGlhZGRyc4wACgSsEoqRBv033QOCcnOFAAMBAACJc2VjcDI1NmsxoQIhX_pyi634qU8HdGcZJIIfU1dHy7x0oikzLZOBpNtWMoN0Y3CC_TaDdWRwgv04hXdha3UyCQ --lightpushnode=/ip4/172.18.138.145/tcp/64822/p2p/16Uiu2HAkwfxKP6tHHaGghrhRCb5ZpE7s6Riu8bQ5njJoSKDpNY5w --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.79.250 waku 6fdf37c5529ffe402622d6955ec647660d891a439ff3975b5d0ea20b4107430e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 6fdf37c5529f. Setting up logs at ./log/docker/lightpush_node1_2024-10-12_04-21-03__43c6617e-3cd4-42d7-a664-6de39f27a8d3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 50843
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50843/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50843/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.79.250/tcp/50844/p2p/16Uiu2HAmUQNdD49ExKMgNEZv49e2XtYFfJGfG4dPhnJbXiCgcuD5","/ip4/172.18.79.250/tcp/50845/ws/p2p/16Uiu2HAmUQNdD49ExKMgNEZv49e2XtYFfJGfG4dPhnJbXiCgcuD5"],"enrUri":"enr:-LO4QKY3J4JWaxbebkcTKT4x894byvlqgXxqO_vQPPDTtiFJaxhefOCnTVzOKNB7JDGPBSGO7d_Bbj-sCRRBmq_61ycBgmlkgnY0gmlwhKwST_qKbXVsdGlhZGRyc4wACgSsEk_6Bsad3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPp_HbpcHWo0gPDjvvAO3LXiyLnhKK1hi2EETeTUmZYFIN0Y3CCxpyDdWRwgsaehXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:50843/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.138.145/tcp/64822/p2p/16Uiu2HAkwfxKP6tHHaGghrhRCb5ZpE7s6Riu8bQ5njJoSKDpNY5w"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:50843/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.45.0/tcp/10453/p2p/16Uiu2HAmHGRcXp2uP9NeQfnSJSj9JdJcen6TasjebFe2MDaMzgvh"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64821/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10452/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:50843/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1728706869802946816, "meta": "YWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYQ=="}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:50843/lightpush/v1/message. Response content: b'Failed to request a message push: decode_rpc_failure: (kind: InvalidLengthField, field: "meta")'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 129426b1a9aa
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 88fa39a9b060
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 6fdf37c5529f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.