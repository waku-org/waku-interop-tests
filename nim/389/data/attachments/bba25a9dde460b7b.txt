[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_only_lightpush__peer_full with id: 2024-10-12_04-21-56__81d66da6-2cb4-447f-b701-d97c7430d1b7
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-10-12_04-21-56__81d66da6-2cb4-447f-b701-d97c7430d1b7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.140.96
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['42407', '42408', '42409', '42410', '42411']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 42407:42407 -p 42408:42408 -p 42409:42409 -p 42410:42410 -p 42411:42411 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42409 --rest-port=42407 --tcp-port=42408 --discv5-udp-port=42410 --rest-address=0.0.0.0 --nat=extip:172.18.140.96 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=26d2b2825e29f67bebcac702bd4642c95d39e5ddfcedf8b64714ef8db507ae6f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42411 --metrics-logging=true --lightpush=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.140.96 waku 39e1b5e302a6bae41533bbe3b024bb8e85cf22a4dfadc51fa7e13eab8979eef2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 39e1b5e302a6. Setting up logs at ./log/docker/receiving_node1_2024-10-12_04-21-56__81d66da6-2cb4-447f-b701-d97c7430d1b7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 42407
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42407/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42407/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.140.96/tcp/42408/p2p/16Uiu2HAm3DU42afjMkygNUiFXoxC7MKptfMkuFquPQ7TcG4k4K6h","/ip4/172.18.140.96/tcp/42409/ws/p2p/16Uiu2HAm3DU42afjMkygNUiFXoxC7MKptfMkuFquPQ7TcG4k4K6h"],"enrUri":"enr:-LO4QA5B00C9v2VArI6E9q-nyTYtb0ohQFCoWqAVhpCor0cyRknqhgO07g9wtARPbnz7f7IRFP3K6D6EfwPyE4CdJ00BgmlkgnY0gmlwhKwSjGCKbXVsdGlhZGRyc4wACgSsEoxgBqWp3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJzvQoxCSzX2VFAsDlUWcNRbq1fj4QPuwVERWRiJt4-GoN0Y3CCpaiDdWRwgqWqhXdha3UyDQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-10-12_04-21-56__81d66da6-2cb4-447f-b701-d97c7430d1b7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.60.250
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['35471', '35472', '35473', '35474', '35475']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 35471:35471 -p 35472:35472 -p 35473:35473 -p 35474:35474 -p 35475:35475 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=35473 --rest-port=35471 --tcp-port=35472 --discv5-udp-port=35474 --rest-address=0.0.0.0 --nat=extip:172.18.60.250 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ec6efffe6accc7a437beddf882004ff96fe210fd1be8aeafad0efbc23da52892 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=35475 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.60.250 waku c2e49387221a68bf0949421352bc9895807d22bc32591bf4c574fae34662cee9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID c2e49387221a. Setting up logs at ./log/docker/receiving_node2_2024-10-12_04-21-56__81d66da6-2cb4-447f-b701-d97c7430d1b7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 35471
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35471/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35471/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.60.250/tcp/35472/p2p/16Uiu2HAmMSBrLXjCkdojJzfqJte64uiHgj7wBRa96kgqc95PkQQF","/ip4/172.18.60.250/tcp/35473/ws/p2p/16Uiu2HAmMSBrLXjCkdojJzfqJte64uiHgj7wBRa96kgqc95PkQQF"],"enrUri":"enr:-LO4QNVBykVmIc1QXlXP4BCi30vNC7mQ8U65kNcMgR-Q8G4PX40s_aYqdRS00QgY36NnE7UnBGiFdH-Wet4dG38GKxkBgmlkgnY0gmlwhKwSPPqKbXVsdGlhZGRyc4wACgSsEjz6BoqR3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOCcaLGZYueCWE4W_WWLpvVfIXNFcJnIij2MZ6AUH2pmIN0Y3CCipCDdWRwgoqShXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35471/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.140.96/tcp/42408/p2p/16Uiu2HAm3DU42afjMkygNUiFXoxC7MKptfMkuFquPQ7TcG4k4K6h"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-10-12_04-21-56__81d66da6-2cb4-447f-b701-d97c7430d1b7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.34.171
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['21676', '21677', '21678', '21679', '21680']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 21676:21676 -p 21677:21677 -p 21678:21678 -p 21679:21679 -p 21680:21680 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=21678 --rest-port=21676 --tcp-port=21677 --discv5-udp-port=21679 --rest-address=0.0.0.0 --nat=extip:172.18.34.171 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ad73e510c1a2e1dcf32b6155aae2bd413e8b906de28cf4ab2ea6ff061587f60e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=21680 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QA5B00C9v2VArI6E9q-nyTYtb0ohQFCoWqAVhpCor0cyRknqhgO07g9wtARPbnz7f7IRFP3K6D6EfwPyE4CdJ00BgmlkgnY0gmlwhKwSjGCKbXVsdGlhZGRyc4wACgSsEoxgBqWp3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJzvQoxCSzX2VFAsDlUWcNRbq1fj4QPuwVERWRiJt4-GoN0Y3CCpaiDdWRwgqWqhXdha3UyDQ --lightpushnode=/ip4/172.18.140.96/tcp/42408/p2p/16Uiu2HAm3DU42afjMkygNUiFXoxC7MKptfMkuFquPQ7TcG4k4K6h --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.34.171 waku 016627f1da520f45d91a770b8b8bad1f1c4fcc535adf8102141576360e55843a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 016627f1da52. Setting up logs at ./log/docker/lightpush_node1_2024-10-12_04-21-56__81d66da6-2cb4-447f-b701-d97c7430d1b7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 21676
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21676/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21676/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.34.171/tcp/21677/p2p/16Uiu2HAkvzhNYkkFqMcGRGiMHMzA3omMy1qWPQqim6Ma6fKvPxnL","/ip4/172.18.34.171/tcp/21678/ws/p2p/16Uiu2HAkvzhNYkkFqMcGRGiMHMzA3omMy1qWPQqim6Ma6fKvPxnL"],"enrUri":"enr:-LO4QB2CkLZgaCaOjU7QAyngs_26Ao3IzyovHaD8qWsbC48-UzPY8eWcD4HgsQJIVYY-I5jeETRlFdSeCf6d3d9SYxcBgmlkgnY0gmlwhKwSIquKbXVsdGlhZGRyc4wACgSsEiKrBlSu3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIXUW2M6ugoSOV_n-XCz3u1lqe1lu0ky5DHPTZj5zOlAYN0Y3CCVK2DdWRwglSvhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21676/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.140.96/tcp/42408/p2p/16Uiu2HAm3DU42afjMkygNUiFXoxC7MKptfMkuFquPQ7TcG4k4K6h"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21676/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.60.250/tcp/35472/p2p/16Uiu2HAmMSBrLXjCkdojJzfqJte64uiHgj7wBRa96kgqc95PkQQF"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:42407/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35471/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21676/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1728706921914120960}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42407/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1728706921914120960,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35471/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1728706921914120960,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 39e1b5e302a6
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id c2e49387221a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 016627f1da52
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.