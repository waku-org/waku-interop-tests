[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_filter_works_with_static_sharding with id: 2024-04-22_14-30-04__a0178ae9-5901-48dd-a8cc-f310887803ea
[35mDEBUG   [0m src.steps.sharding:sharding.py:30 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/node1_2024-04-22_14-30-04__a0178ae9-5901-48dd-a8cc-f310887803ea__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.sharding:sharding.py:242 Cluster id was resolved to: 2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.7.140
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['57139', '57140', '57141', '57142', '57143']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:313 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:113 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 57139:57139 -p 57140:57140 -p 57141:57141 -p 57142:57142 -p 57143:57143 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57141 --rest-port=57139 --tcp-port=57140 --discv5-udp-port=57142 --rest-address=0.0.0.0 --nat=extip:172.18.7.140 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57143 --metrics-logging=true --relay=true --filter=true --nodekey=30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68 --pubsub-topic=/waku/2/rs/2/0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.7.140 waku ca404d88af7fe86d1dfbb45acd7b6b37c02590b416eefb775eead045dd928f86
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID ca404d88af7f. Setting up logs at ./log/docker/node1_2024-04-22_14-30-04__a0178ae9-5901-48dd-a8cc-f310887803ea__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:119 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 57139
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57139/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.7.140/tcp/57140/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip","/ip4/172.18.7.140/tcp/57141/ws/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"],"enrUri":"enr:-LO4QJ4c8T29o71SIj1o_3DHwS3U99LSIHYKqaPGBTFW1RvGcBvWGBkBHi5hNAOTu5Tbk7RQcjL77kTVPyuX7YoFnIcBgmlkgnY0gmlwhKwSB4yKbXVsdGlhZGRyc4wACgSsEgeMBt813QOCcnOFAAIBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CC3zSDdWRwgt82hXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:189 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/node2_2024-04-22_14-30-04__a0178ae9-5901-48dd-a8cc-f310887803ea__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.sharding:sharding.py:242 Cluster id was resolved to: 2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.242.161
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['41076', '41077', '41078', '41079', '41080']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:313 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:113 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 41076:41076 -p 41077:41077 -p 41078:41078 -p 41079:41079 -p 41080:41080 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=41078 --rest-port=41076 --tcp-port=41077 --discv5-udp-port=41079 --rest-address=0.0.0.0 --nat=extip:172.18.242.161 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=41080 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QJ4c8T29o71SIj1o_3DHwS3U99LSIHYKqaPGBTFW1RvGcBvWGBkBHi5hNAOTu5Tbk7RQcjL77kTVPyuX7YoFnIcBgmlkgnY0gmlwhKwSB4yKbXVsdGlhZGRyc4wACgSsEgeMBt813QOCcnOFAAIBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CC3zSDdWRwgt82hXdha3UyBQ --filternode=/ip4/172.18.7.140/tcp/57140/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip --pubsub-topic=/waku/2/rs/2/0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.242.161 waku 5e8924a53f56ccf264bd8b5dd3a736858fa59921759455f0ee13dfcbea2640a3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 5e8924a53f56. Setting up logs at ./log/docker/node2_2024-04-22_14-30-04__a0178ae9-5901-48dd-a8cc-f310887803ea__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:119 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 41076
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41076/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.242.161/tcp/41077/p2p/16Uiu2HAmSwkioayDDRkTGqjE63u31t8vnoRhTyCauNtfGtriADkn","/ip4/172.18.242.161/tcp/41078/ws/p2p/16Uiu2HAmSwkioayDDRkTGqjE63u31t8vnoRhTyCauNtfGtriADkn"],"enrUri":"enr:-LO4QDvmTs-aJxqlA7clOJzG35sspYREeVkKU9B9L0f5KRPJKaIO7tC0RAhV3PoHlrwRlx5UmNG5g3oFIVzkR33ibUwBgmlkgnY0gmlwhKwS8qGKbXVsdGlhZGRyc4wACgSsEvKhBqB23QOCcnOFAAIBAACJc2VjcDI1NmsxoQPUTxSNyotb3RW0IvITj8kzkYh2jvmwn6vq-m25ua7Cc4N0Y3CCoHWDdWRwgqB3hXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:189 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41076/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.7.140/tcp/57140/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57139/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41076/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "218be53e-e50a-4d94-8b04-586d6287480a", "contentFilters": ["/myapp/1/latest/proto"], "pubsubTopic": "/waku/2/rs/2/0"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"218be53e-e50a-4d94-8b04-586d6287480a","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57139/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:204 Checking that peer NODE_2:harbor.status.im/wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41076/filter/v2/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1713796207413931008,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:166 Stopping container with id ca404d88af7f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:166 Stopping container with id 5e8924a53f56
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Container stopped.