[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_filter_get_message_with_version with id: 2024-04-11_08-06-05__631a3bda-d889-4ed1-8630-567203f33f93
[35mDEBUG   [0m src.steps.filter:filter.py:27 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:33 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:50 WakuNode instance initialized with log path ./log/docker/node1_2024-04-11_08-06-05__631a3bda-d889-4ed1-8630-567203f33f93__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:54 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.46.43
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['20109', '20110', '20111', '20112', '20113']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:297 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:115 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 20109:20109 -p 20110:20110 -p 20111:20111 -p 20112:20112 -p 20113:20113 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20111 --rest-port=20109 --tcp-port=20110 --discv5-udp-port=20112 --rest-address=0.0.0.0 --nat=extip:172.18.46.43 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20113 --metrics-logging=true --relay=true --filter=true --nodekey=30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.46.43 waku 64184de46322b69c9970497e1adf09467434903d01ebbe8a4e0441d4f3e27f85
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 64184de46322. Setting up logs at ./log/docker/node1_2024-04-11_08-06-05__631a3bda-d889-4ed1-8630-567203f33f93__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:121 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 20109
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20109/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.46.43/tcp/20110/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip","/ip4/172.18.46.43/tcp/20111/ws/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"],"enrUri":"enr:-LO4QBc2rLlseU5-OY3W7zDPGbAPzozJ2C2Msyp-Klolh7leYBj1K2mUavJx7UCy3GL_0MWIb2xMCGRXGj-SfxdfftQBgmlkgnY0gmlwhKwSLiuKbXVsdGlhZGRyc4wACgSsEi4rBk6P3QOCcnOFAAABAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCTo6DdWRwgk6QhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:191 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:38 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:50 WakuNode instance initialized with log path ./log/docker/node2_2024-04-11_08-06-05__631a3bda-d889-4ed1-8630-567203f33f93__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:54 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.78.39
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['36880', '36881', '36882', '36883', '36884']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:297 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:115 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 36880:36880 -p 36881:36881 -p 36882:36882 -p 36883:36883 -p 36884:36884 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36882 --rest-port=36880 --tcp-port=36881 --discv5-udp-port=36883 --rest-address=0.0.0.0 --nat=extip:172.18.78.39 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36884 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QBc2rLlseU5-OY3W7zDPGbAPzozJ2C2Msyp-Klolh7leYBj1K2mUavJx7UCy3GL_0MWIb2xMCGRXGj-SfxdfftQBgmlkgnY0gmlwhKwSLiuKbXVsdGlhZGRyc4wACgSsEi4rBk6P3QOCcnOFAAABAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCTo6DdWRwgk6QhXdha3UyBQ --filternode=/ip4/172.18.46.43/tcp/20110/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.78.39 waku ae5703aceabfdacd113584d29c7e8582d3dbbe261359f973c1a9e89d6e0d9c7e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID ae5703aceabf. Setting up logs at ./log/docker/node2_2024-04-11_08-06-05__631a3bda-d889-4ed1-8630-567203f33f93__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:121 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 36880
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36880/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.78.39/tcp/36881/p2p/16Uiu2HAkwGCLL3v5fJqKa2JDGyXG7KPmJ8xsifdhLpvFwNPSWLox","/ip4/172.18.78.39/tcp/36882/ws/p2p/16Uiu2HAkwGCLL3v5fJqKa2JDGyXG7KPmJ8xsifdhLpvFwNPSWLox"],"enrUri":"enr:-LO4QHYh6u3SyysEb5BK6ddXRpr3JYncMr9Kqb6zVcEPNtAmRSjH5mzY9dR5KujhcN7x_WnlUIBv233J4cMDNLaw16wBgmlkgnY0gmlwhKwSTieKbXVsdGlhZGRyc4wACgSsEk4nBpAS3QOCcnOFAAABAACJc2VjcDI1NmsxoQIbSeMgWL26biyUwD4LYAJZFZHwNCPziw-XqhRgJ84bZ4N0Y3CCkBGDdWRwgpAThXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:191 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36880/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.46.43/tcp/20110/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20109/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36880/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "6a1ab293-0905-4b7f-b3e7-086a4416d25d", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/0/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"6a1ab293-0905-4b7f-b3e7-086a4416d25d","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20109/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "version": 10}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:harbor.status.im/wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36880/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":10,"timestamp":1712822769594433024,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:168 Stopping container with id 64184de46322
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:168 Stopping container with id ae5703aceabf
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Container stopped.