[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_meta with id: 2024-09-24_04-19-19__4f214cf3-e4e1-4e05-8f50-c228c1664d40
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-24_04-19-19__4f214cf3-e4e1-4e05-8f50-c228c1664d40__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.160.73
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['20906', '20907', '20908', '20909', '20910']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 20906:20906 -p 20907:20907 -p 20908:20908 -p 20909:20909 -p 20910:20910 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20908 --rest-port=20906 --tcp-port=20907 --discv5-udp-port=20909 --rest-address=0.0.0.0 --nat=extip:172.18.160.73 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2ecdecba6e6a1ea9b5eb740bbfebad7aea76d914d8eec4d7a58ebb4d70d27f8d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20910 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.160.73 waku 8eedfdc8a844b566975ca8469254933c65e1815af517a6dbf962d99371b3aa3e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 8eedfdc8a844. Setting up logs at ./log/docker/receiving_node1_2024-09-24_04-19-19__4f214cf3-e4e1-4e05-8f50-c228c1664d40__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 20906
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20906/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20906/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.160.73/tcp/20907/p2p/16Uiu2HAkvaeWC1FQgPCp2hevHN4D5meU8QeQAx3CCVsQVrRt3o67","/ip4/172.18.160.73/tcp/20908/ws/p2p/16Uiu2HAkvaeWC1FQgPCp2hevHN4D5meU8QeQAx3CCVsQVrRt3o67"],"enrUri":"enr:-LO4QGiFxgFMRXkF_wRv9jYap6msQ2DFImH-6FbID5yiwtT1LviA5JzJoC8eIzvvBiqXujZ17KULjH49-8SGiBeq0OsBgmlkgnY0gmlwhKwSoEmKbXVsdGlhZGRyc4wACgSsEqBJBlGs3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIRKD7Rt634x_XmOxnsiRAu0C6naCOCS-WpOTy9icTuYIN0Y3CCUauDdWRwglGthXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-24_04-19-19__4f214cf3-e4e1-4e05-8f50-c228c1664d40__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.84.186
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['8531', '8532', '8533', '8534', '8535']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 8531:8531 -p 8532:8532 -p 8533:8533 -p 8534:8534 -p 8535:8535 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8533 --rest-port=8531 --tcp-port=8532 --discv5-udp-port=8534 --rest-address=0.0.0.0 --nat=extip:172.18.84.186 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e0b6603b688d7f4bd0a0cc7efdc5fde3e7ccf0a5af5bb0cf556eaeaafd6f44bb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8535 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.84.186 waku 5b9eea274db37e5bab6b291b6a16182fce8f0a0f9e393b02ecf03009d1fd9354
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 5b9eea274db3. Setting up logs at ./log/docker/receiving_node2_2024-09-24_04-19-19__4f214cf3-e4e1-4e05-8f50-c228c1664d40__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 8531
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8531/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8531/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.84.186/tcp/8532/p2p/16Uiu2HAmJwHJ3YLdTCbVg3jxcRebTQoZC8D7z52wUy8nZwyNzWUQ","/ip4/172.18.84.186/tcp/8533/ws/p2p/16Uiu2HAmJwHJ3YLdTCbVg3jxcRebTQoZC8D7z52wUy8nZwyNzWUQ"],"enrUri":"enr:-LO4QDIXL0Ekcn-nVqaRNDVu_s8tW8Hxi0V7VJfgby8DRSo8HQrYaKFP-yT7znpXNGsWdTXvpKHNUQNQmfbVLv1_JtgBgmlkgnY0gmlwhKwSVLqKbXVsdGlhZGRyc4wACgSsElS6BiFV3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNdUpK9JImx7OsKJr3pqjzlbod7u-HtPYu6qoECsFHAAYN0Y3CCIVSDdWRwgiFWhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8531/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.160.73/tcp/20907/p2p/16Uiu2HAkvaeWC1FQgPCp2hevHN4D5meU8QeQAx3CCVsQVrRt3o67"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-24_04-19-19__4f214cf3-e4e1-4e05-8f50-c228c1664d40__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.14.80
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['17869', '17870', '17871', '17872', '17873']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 17869:17869 -p 17870:17870 -p 17871:17871 -p 17872:17872 -p 17873:17873 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17871 --rest-port=17869 --tcp-port=17870 --discv5-udp-port=17872 --rest-address=0.0.0.0 --nat=extip:172.18.14.80 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ae3abb08c334e73c638b92ea7a62abfe425ed8ea5ea6dfdffbf95b5b65784b6a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17873 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QGiFxgFMRXkF_wRv9jYap6msQ2DFImH-6FbID5yiwtT1LviA5JzJoC8eIzvvBiqXujZ17KULjH49-8SGiBeq0OsBgmlkgnY0gmlwhKwSoEmKbXVsdGlhZGRyc4wACgSsEqBJBlGs3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIRKD7Rt634x_XmOxnsiRAu0C6naCOCS-WpOTy9icTuYIN0Y3CCUauDdWRwglGthXdha3UyCQ --lightpushnode=/ip4/172.18.160.73/tcp/20907/p2p/16Uiu2HAkvaeWC1FQgPCp2hevHN4D5meU8QeQAx3CCVsQVrRt3o67 --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.14.80 waku a03509c6ac371d118a7ca68f5f764b93b910c5eccaf2210c75a9ae7209b60f2d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID a03509c6ac37. Setting up logs at ./log/docker/lightpush_node1_2024-09-24_04-19-19__4f214cf3-e4e1-4e05-8f50-c228c1664d40__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 17869
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17869/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17869/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.14.80/tcp/17870/p2p/16Uiu2HAmQjT3wTzsqNexRZ4iKNSML45QLJCwv15hnkKSMrJBzCHu","/ip4/172.18.14.80/tcp/17871/ws/p2p/16Uiu2HAmQjT3wTzsqNexRZ4iKNSML45QLJCwv15hnkKSMrJBzCHu"],"enrUri":"enr:-LO4QCV1wUYJcQqyn-Zv5uwEvvlsjt7HYSSh3GyQGVN8joOzNR-HcuvH1_wBZ5USYw5cvR50OEyfW0uitLLeAwsMPPwBgmlkgnY0gmlwhKwSDlCKbXVsdGlhZGRyc4wACgSsEg5QBkXP3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOzcMHSMS2PDZ2_Zg4QO5LKO5fq3YMusUYx5LOqy6ieyIN0Y3CCRc6DdWRwgkXQhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:17869/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.160.73/tcp/20907/p2p/16Uiu2HAkvaeWC1FQgPCp2hevHN4D5meU8QeQAx3CCVsQVrRt3o67"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:17869/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.84.186/tcp/8532/p2p/16Uiu2HAmJwHJ3YLdTCbVg3jxcRebTQoZC8D7z52wUy8nZwyNzWUQ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20906/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8531/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:17869/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1727151564702475776, "meta": "Light push works!!"}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:17869/lightpush/v1/message. Response content: b'Invalid message: Incorrect base64 string'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 8eedfdc8a844
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 5b9eea274db3
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id a03509c6ac37
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.