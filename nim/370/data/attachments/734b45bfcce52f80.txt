[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_subscribe_to_single_topics with id: 2024-09-24_04-15-37__17674d03-34b4-442b-af58-fde5589a5b15
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-24_04-15-37__17674d03-34b4-442b-af58-fde5589a5b15__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.173.72
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['1821', '1822', '1823', '1824', '1825']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 1821:1821 -p 1822:1822 -p 1823:1823 -p 1824:1824 -p 1825:1825 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=1823 --rest-port=1821 --tcp-port=1822 --discv5-udp-port=1824 --rest-address=0.0.0.0 --nat=extip:172.18.173.72 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b9becabb0f3ae80cf92fc33bc8bd372cdff25ee88deb6db9a9b78142bfffcecc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=1825 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.173.72 waku 2eef3c354e4103fb0e0659e9c3ff8bd32c6640d34ba24d449601ba82ded21ba4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 2eef3c354e41. Setting up logs at ./log/docker/node1_2024-09-24_04-15-37__17674d03-34b4-442b-af58-fde5589a5b15__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 1821
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1821/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1821/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.173.72/tcp/1822/p2p/16Uiu2HAm6DMgTdbN7qqYtPzEUXBn9vx3pKKyoAfs8vcqm4ZtfQRb","/ip4/172.18.173.72/tcp/1823/ws/p2p/16Uiu2HAm6DMgTdbN7qqYtPzEUXBn9vx3pKKyoAfs8vcqm4ZtfQRb"],"enrUri":"enr:-LO4QCltcwS_ReOyJZfPdduqmQcndU0Q8u_QS-Wqp0x0g5KTdfWvJp8yNOJljErb3j_chk4u5lPNjRBUdhGKPS7cgmcBgmlkgnY0gmlwhKwSrUiKbXVsdGlhZGRyc4wACgSsEq1IBgcf3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKgSOVZvDfu2RrgEhQXTGac2RNC_TLO3DFdG9mioC9OroN0Y3CCBx6DdWRwggcghXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-24_04-15-37__17674d03-34b4-442b-af58-fde5589a5b15__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.209.92
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['13477', '13478', '13479', '13480', '13481']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 13477:13477 -p 13478:13478 -p 13479:13479 -p 13480:13480 -p 13481:13481 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=13479 --rest-port=13477 --tcp-port=13478 --discv5-udp-port=13480 --rest-address=0.0.0.0 --nat=extip:172.18.209.92 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=382de6a69c4e0e33a2b5b9dcc5af8f0c6015ce1eb24f2cae7e348d16dececccf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=13481 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QCltcwS_ReOyJZfPdduqmQcndU0Q8u_QS-Wqp0x0g5KTdfWvJp8yNOJljErb3j_chk4u5lPNjRBUdhGKPS7cgmcBgmlkgnY0gmlwhKwSrUiKbXVsdGlhZGRyc4wACgSsEq1IBgcf3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKgSOVZvDfu2RrgEhQXTGac2RNC_TLO3DFdG9mioC9OroN0Y3CCBx6DdWRwggcghXdha3UyBQ --filternode=/ip4/172.18.173.72/tcp/1822/p2p/16Uiu2HAm6DMgTdbN7qqYtPzEUXBn9vx3pKKyoAfs8vcqm4ZtfQRb
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.209.92 waku 24bac81c5e27fa2211870463b768059830889b4fa78141ee051ca702f8849cac
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 24bac81c5e27. Setting up logs at ./log/docker/node2_2024-09-24_04-15-37__17674d03-34b4-442b-af58-fde5589a5b15__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 13477
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13477/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13477/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.209.92/tcp/13478/p2p/16Uiu2HAm5J1CzzAPnymuknBqFrRGnxho8irihqNxnSw5juaYhDkK","/ip4/172.18.209.92/tcp/13479/ws/p2p/16Uiu2HAm5J1CzzAPnymuknBqFrRGnxho8irihqNxnSw5juaYhDkK"],"enrUri":"enr:-LO4QG4b8vE_9sJMtsSZ9P62TSjSfOA_dHPVj4B4KUR3s9E9UFZB15EUSmncqlKvsaOh_phWa9YCj8N0sqn_a7Ahk5UBgmlkgnY0gmlwhKwS0VyKbXVsdGlhZGRyc4wACgSsEtFcBjSn3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKSnfawap6IJkjBAm_sZ48nBy-riPJuZb6zhktYVD02UIN0Y3CCNKaDdWRwgjSohXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13477/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.173.72/tcp/1822/p2p/16Uiu2HAm6DMgTdbN7qqYtPzEUXBn9vx3pKKyoAfs8vcqm4ZtfQRb"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1821/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13477/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "57573925-c562-4e93-90b1-34aa8215b9d3", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"57573925-c562-4e93-90b1-34aa8215b9d3","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1821/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13477/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1727151340553626624,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 2eef3c354e41
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 24bac81c5e27
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.