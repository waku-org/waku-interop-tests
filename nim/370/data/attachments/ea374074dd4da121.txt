[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_pubsub_topic_also_in_docker_flags[/waku/2/rs/2/1] with id: 2024-09-24_04-26-15__c625f1c0-336f-41b8-b76c-29da80ec046e
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-24_04-26-15__c625f1c0-336f-41b8-b76c-29da80ec046e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.116.83
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['54671', '54672', '54673', '54674', '54675']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 54671:54671 -p 54672:54672 -p 54673:54673 -p 54674:54674 -p 54675:54675 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=54673 --rest-port=54671 --tcp-port=54672 --discv5-udp-port=54674 --rest-address=0.0.0.0 --nat=extip:172.18.116.83 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=fa251da5cdf6dd0b34e7278b4c4f2cf4ecfed285fe0adbf370d201fe41d84ccb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=54675 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/2/1 --content-topic=/myapp/1/latest/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.116.83 waku c4798b2969c74d3ca708c958f2b1db268822ce9fa31d0419dba3c8cda3f29b07
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID c4798b2969c7. Setting up logs at ./log/docker/node1_2024-09-24_04-26-15__c625f1c0-336f-41b8-b76c-29da80ec046e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 54671
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54671/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54671/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.116.83/tcp/54672/p2p/16Uiu2HAmGZ8vtNbXXn6Vi5kZ86DRjKA5VzV8wC2CVMpASPiDKQG7","/ip4/172.18.116.83/tcp/54673/ws/p2p/16Uiu2HAmGZ8vtNbXXn6Vi5kZ86DRjKA5VzV8wC2CVMpASPiDKQG7"],"enrUri":"enr:-LO4QDXOpzl_tSxSsT4CUSwmGQs8Be2IWiPFMPPuP8xy-_f4OYZLqb6Co2kCNKckIzUY9rXFOreCvaIyRABDOHVGe_MBgmlkgnY0gmlwhKwSdFOKbXVsdGlhZGRyc4wACgSsEnRTBtWR3QOCcnOFAAIBAAGJc2VjcDI1NmsxoQM57vakNlCem_imI4Ms8sVpm8EcKjdjqTb2JnR3pDO62IN0Y3CC1ZCDdWRwgtWShXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-24_04-26-15__c625f1c0-336f-41b8-b76c-29da80ec046e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.94.41
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['11203', '11204', '11205', '11206', '11207']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 11203:11203 -p 11204:11204 -p 11205:11205 -p 11206:11206 -p 11207:11207 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=11205 --rest-port=11203 --tcp-port=11204 --discv5-udp-port=11206 --rest-address=0.0.0.0 --nat=extip:172.18.94.41 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=b94b33e76dddc2be2d3cfe5fe6dabaaeee6fdf0a99fe3f97d42c70ded3fbbaaa --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=11207 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QDXOpzl_tSxSsT4CUSwmGQs8Be2IWiPFMPPuP8xy-_f4OYZLqb6Co2kCNKckIzUY9rXFOreCvaIyRABDOHVGe_MBgmlkgnY0gmlwhKwSdFOKbXVsdGlhZGRyc4wACgSsEnRTBtWR3QOCcnOFAAIBAAGJc2VjcDI1NmsxoQM57vakNlCem_imI4Ms8sVpm8EcKjdjqTb2JnR3pDO62IN0Y3CC1ZCDdWRwgtWShXdha3UyBQ --pubsub-topic=/waku/2/rs/2/1 --content-topic=/myapp/1/latest/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.94.41 waku 3e97283096e44f797d3e6477ff575af0833d797c5f2501637ce7aef9c4efb563
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 3e97283096e4. Setting up logs at ./log/docker/node2_2024-09-24_04-26-15__c625f1c0-336f-41b8-b76c-29da80ec046e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 11203
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11203/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11203/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.94.41/tcp/11204/p2p/16Uiu2HAm3sGQ3frrnGcciF7S9PeoFxD6dC2RFdzNLc3CSbc41XU1","/ip4/172.18.94.41/tcp/11205/ws/p2p/16Uiu2HAm3sGQ3frrnGcciF7S9PeoFxD6dC2RFdzNLc3CSbc41XU1"],"enrUri":"enr:-LO4QIXh3W709tsz1H-D-X_HIV1rrvxWxVgRtbdA2cz2RNmiSfHiii8rUdmX9Mw_FQ52iQHixL0d7xnDbTLG6qzDqTwBgmlkgnY0gmlwhKwSXimKbXVsdGlhZGRyc4wACgSsEl4pBivF3QOCcnOFAAIBAAGJc2VjcDI1NmsxoQJ9a-6wNvha-QTlwzpKOfON_nZOah67vDXRqkYs1dHaZoN0Y3CCK8SDdWRwgivGhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11203/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.116.83/tcp/54672/p2p/16Uiu2HAmGZ8vtNbXXn6Vi5kZ86DRjKA5VzV8wC2CVMpASPiDKQG7"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54671/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11203/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54671/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54671/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1727151979113559040,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11203/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1727151979113559040,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id c4798b2969c7
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 3e97283096e4
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.