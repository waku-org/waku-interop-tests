[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_cant_retrieve_messages_on_not_subscribed_content_topic with id: 2024-09-24_04-24-24__bede9923-25e5-4e0f-ae11-8cf46ba1d30e
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-24_04-24-24__bede9923-25e5-4e0f-ae11-8cf46ba1d30e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.145.64
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['58768', '58769', '58770', '58771', '58772']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 58768:58768 -p 58769:58769 -p 58770:58770 -p 58771:58771 -p 58772:58772 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=58770 --rest-port=58768 --tcp-port=58769 --discv5-udp-port=58771 --rest-address=0.0.0.0 --nat=extip:172.18.145.64 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=6b95d32e1fdd4cabe6f155ee8457baab32abfacce53c0fc19e99b4703f1b19f3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=58772 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.145.64 waku b852dae6995ae5f54b53572cce23d7808d487206d9eab57f5efe393412597aa8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID b852dae6995a. Setting up logs at ./log/docker/node1_2024-09-24_04-24-24__bede9923-25e5-4e0f-ae11-8cf46ba1d30e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 58768
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58768/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58768/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.145.64/tcp/58769/p2p/16Uiu2HAmAwpiMLxTSHovrHewVW5Cy1ZbNS4rBiXtLCsni4R5pHKP","/ip4/172.18.145.64/tcp/58770/ws/p2p/16Uiu2HAmAwpiMLxTSHovrHewVW5Cy1ZbNS4rBiXtLCsni4R5pHKP"],"enrUri":"enr:-LO4QGnynBrrOXWbIf1PG71W3NQBmRh2ODpVMscZ2V6UvEQDSMh9I0b9gp8elEOpn_5kt-vgtgwzzBLAKpHpvquXVB4BgmlkgnY0gmlwhKwSkUCKbXVsdGlhZGRyc4wACgSsEpFABuWS3QOCcnOFAAIBAACJc2VjcDI1NmsxoQLmmJp8bFQ5wbKW93F6vt3c_Hr2iOu0Ll-My-7jVBWVQoN0Y3CC5ZGDdWRwguWThXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-24_04-24-24__bede9923-25e5-4e0f-ae11-8cf46ba1d30e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.12.89
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['39064', '39065', '39066', '39067', '39068']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 39064:39064 -p 39065:39065 -p 39066:39066 -p 39067:39067 -p 39068:39068 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39066 --rest-port=39064 --tcp-port=39065 --discv5-udp-port=39067 --rest-address=0.0.0.0 --nat=extip:172.18.12.89 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=3b1a75ccbff31b0dc21d47da5cdfc0c83ffb9dbaa67aa4db91df2cebf8a5011e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39068 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QGnynBrrOXWbIf1PG71W3NQBmRh2ODpVMscZ2V6UvEQDSMh9I0b9gp8elEOpn_5kt-vgtgwzzBLAKpHpvquXVB4BgmlkgnY0gmlwhKwSkUCKbXVsdGlhZGRyc4wACgSsEpFABuWS3QOCcnOFAAIBAACJc2VjcDI1NmsxoQLmmJp8bFQ5wbKW93F6vt3c_Hr2iOu0Ll-My-7jVBWVQoN0Y3CC5ZGDdWRwguWThXdha3UyBQ --content-topic=/myapp/1/latest/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.12.89 waku dd872b29cf1c8aa33c1302432d930b02ddb6d20551afca57fda9507828e2e3dd
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID dd872b29cf1c. Setting up logs at ./log/docker/node2_2024-09-24_04-24-24__bede9923-25e5-4e0f-ae11-8cf46ba1d30e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 39064
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39064/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39064/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.12.89/tcp/39065/p2p/16Uiu2HAkxhKdy8HgoxobBYSfk6xAVc6Rs2faSMWSNqYCY19rrB5a","/ip4/172.18.12.89/tcp/39066/ws/p2p/16Uiu2HAkxhKdy8HgoxobBYSfk6xAVc6Rs2faSMWSNqYCY19rrB5a"],"enrUri":"enr:-LO4QJ0uCUfpnWzl3waXGefBoiru5-F7XJJzuGwWJuSNpSG_N9suO80SYRsHy3XFoy1WMJK2m94l2zgQtyHRZ1r45FsBgmlkgnY0gmlwhKwSDFmKbXVsdGlhZGRyc4wACgSsEgxZBpia3QOCcnOFAAIBAACJc2VjcDI1NmsxoQIwlVppEEPmKZo9BNfgTLpJhdAGktQbOrFmpoa42R7BqYN0Y3CCmJmDdWRwgpibhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39064/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.145.64/tcp/58769/p2p/16Uiu2HAmAwpiMLxTSHovrHewVW5Cy1ZbNS4rBiXtLCsni4R5pHKP"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:58768/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39064/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:58768/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58768/relay/v1/auto/messages/%2Ftoychat%2F2%2Fhuilong%2Fproto" -H "Content-Type: application/json" -d 'None'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:58768/relay/v1/auto/messages/%2Ftoychat%2F2%2Fhuilong%2Fproto. Response content: b'/toychat/2/huilong/proto'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id b852dae6995a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id dd872b29cf1c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.