[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_single_content_topic[/toychat/2/huilong/proto] with id: 2024-09-24_04-25-45__168028ff-71d9-45b6-934f-1fd667056893
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-24_04-25-45__168028ff-71d9-45b6-934f-1fd667056893__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.51.99
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['25983', '25984', '25985', '25986', '25987']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 25983:25983 -p 25984:25984 -p 25985:25985 -p 25986:25986 -p 25987:25987 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25985 --rest-port=25983 --tcp-port=25984 --discv5-udp-port=25986 --rest-address=0.0.0.0 --nat=extip:172.18.51.99 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=c5c0edac5df2afdaa5bee6feb8cae1fc9c19400f3e4a0cbebcd9cc772eeebab9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25987 --metrics-logging=true --relay=true --filter=true --content-topic=/toychat/2/huilong/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.51.99 waku ce456f7516f9e95dbfa06df4925cf106aa87c4d63c0ffc888d44c1658dfa9eb2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID ce456f7516f9. Setting up logs at ./log/docker/node1_2024-09-24_04-25-45__168028ff-71d9-45b6-934f-1fd667056893__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 25983
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25983/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25983/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.51.99/tcp/25984/p2p/16Uiu2HAkwoYPCjKp7kJ93mW2gfV3cQ7Dpwyk1J5t3d3q5k1qoS6N","/ip4/172.18.51.99/tcp/25985/ws/p2p/16Uiu2HAkwoYPCjKp7kJ93mW2gfV3cQ7Dpwyk1J5t3d3q5k1qoS6N"],"enrUri":"enr:-LO4QGYNxFgszGv3rjesegFDlM4S2qzRgdIKqtryEroNMs8qX138JH7KSWggqguaXoF3fs-P2j3Mgj8NiLMKk63AOesBgmlkgnY0gmlwhKwSM2OKbXVsdGlhZGRyc4wACgSsEjNjBmWB3QOCcnOFAAIBAACJc2VjcDI1NmsxoQIjUY_4x95PkSoqHMAwVw-EqWey4jnXJQYTL7t9ug46q4N0Y3CCZYCDdWRwgmWChXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-24_04-25-45__168028ff-71d9-45b6-934f-1fd667056893__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.219.89
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['61463', '61464', '61465', '61466', '61467']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 61463:61463 -p 61464:61464 -p 61465:61465 -p 61466:61466 -p 61467:61467 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61465 --rest-port=61463 --tcp-port=61464 --discv5-udp-port=61466 --rest-address=0.0.0.0 --nat=extip:172.18.219.89 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=c8e8bd48bfe4dce16ab37be9bcdcf5daf815c5e829b8a4ec6cf062fb2d52eda7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61467 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QGYNxFgszGv3rjesegFDlM4S2qzRgdIKqtryEroNMs8qX138JH7KSWggqguaXoF3fs-P2j3Mgj8NiLMKk63AOesBgmlkgnY0gmlwhKwSM2OKbXVsdGlhZGRyc4wACgSsEjNjBmWB3QOCcnOFAAIBAACJc2VjcDI1NmsxoQIjUY_4x95PkSoqHMAwVw-EqWey4jnXJQYTL7t9ug46q4N0Y3CCZYCDdWRwgmWChXdha3UyBQ --content-topic=/toychat/2/huilong/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.219.89 waku 77bb4826dcbaf3106b40289b3b748c7d14241a9d05edec09040c277f23ecd5b8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 77bb4826dcba. Setting up logs at ./log/docker/node2_2024-09-24_04-25-45__168028ff-71d9-45b6-934f-1fd667056893__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 61463
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61463/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61463/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.219.89/tcp/61464/p2p/16Uiu2HAky6GxXjUmTwLsSgqNzERDv7B8H8KAd6VGD2Ck4YaTFkJg","/ip4/172.18.219.89/tcp/61465/ws/p2p/16Uiu2HAky6GxXjUmTwLsSgqNzERDv7B8H8KAd6VGD2Ck4YaTFkJg"],"enrUri":"enr:-LO4QIcwOI5Dr7Lb4OC63P4QlOMf09nBZgcZzY57GMnDltXUXq7zbo-bHthM612D1FBy_N0DxmXt431RP3MXgXlP0AIBgmlkgnY0gmlwhKwS21mKbXVsdGlhZGRyc4wACgSsEttZBvAZ3QOCcnOFAAIBAACJc2VjcDI1NmsxoQI2dq541fba_5PV7uVFefdgcW0M3Pib5g_2MRIzMNGCvYN0Y3CC8BiDdWRwgvAahXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61463/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.51.99/tcp/25984/p2p/16Uiu2HAkwoYPCjKp7kJ93mW2gfV3cQ7Dpwyk1J5t3d3q5k1qoS6N"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25983/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/toychat/2/huilong/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61463/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/toychat/2/huilong/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25983/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25983/relay/v1/auto/messages/%2Ftoychat%2F2%2Fhuilong%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/toychat/2/huilong/proto","version":0,"timestamp":1727151949626474240,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61463/relay/v1/auto/messages/%2Ftoychat%2F2%2Fhuilong%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/toychat/2/huilong/proto","version":0,"timestamp":1727151949626474240,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id ce456f7516f9
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 77bb4826dcba
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.