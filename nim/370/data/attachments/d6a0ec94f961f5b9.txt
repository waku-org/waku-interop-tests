[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_unsubscribe_from_some_of_the_subscribed_content_topics with id: 2024-09-24_04-16-54__46c48b6b-940f-4926-8906-a66abf38fdde
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-24_04-16-54__46c48b6b-940f-4926-8906-a66abf38fdde__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.94.248
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['48909', '48910', '48911', '48912', '48913']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 48909:48909 -p 48910:48910 -p 48911:48911 -p 48912:48912 -p 48913:48913 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=48911 --rest-port=48909 --tcp-port=48910 --discv5-udp-port=48912 --rest-address=0.0.0.0 --nat=extip:172.18.94.248 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=045fbb5e6a1ccafcddfde03fdac3bddcbef2dcf0da7de33dcec65fab9afec466 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=48913 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.94.248 waku afccffe0f72e46ac2c951bd07f0e9fd53a1c8dcce373e18aec9a8c5af3ba9045
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID afccffe0f72e. Setting up logs at ./log/docker/node1_2024-09-24_04-16-54__46c48b6b-940f-4926-8906-a66abf38fdde__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 48909
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48909/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48909/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.94.248/tcp/48910/p2p/16Uiu2HAmMLQnwrT45gLU95dLkP4iojiceqaDmhiyupNwyupZBnSo","/ip4/172.18.94.248/tcp/48911/ws/p2p/16Uiu2HAmMLQnwrT45gLU95dLkP4iojiceqaDmhiyupNwyupZBnSo"],"enrUri":"enr:-LO4QA6R7zf3I91RAdwbADce4bwoE-ZjjzI3cEHVvLYv3OzgBZtbm7P_fMVKvHjrtx6Uq6IZ6mpSZ3gVmf_PmMOzm1gBgmlkgnY0gmlwhKwSXviKbXVsdGlhZGRyc4wACgSsEl74Br8P3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOA9si14cJ2NPBMmBqnBIg_W5q1Ba67cUm_Z9dHwBj6HIN0Y3CCvw6DdWRwgr8QhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-24_04-16-54__46c48b6b-940f-4926-8906-a66abf38fdde__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.93.31
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['18062', '18063', '18064', '18065', '18066']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 18062:18062 -p 18063:18063 -p 18064:18064 -p 18065:18065 -p 18066:18066 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18064 --rest-port=18062 --tcp-port=18063 --discv5-udp-port=18065 --rest-address=0.0.0.0 --nat=extip:172.18.93.31 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f99ebf7faab7a7caa0dbb1f02cba1aeff4b805ce8038cf55dadb1cf10b3d6ebf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18066 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QA6R7zf3I91RAdwbADce4bwoE-ZjjzI3cEHVvLYv3OzgBZtbm7P_fMVKvHjrtx6Uq6IZ6mpSZ3gVmf_PmMOzm1gBgmlkgnY0gmlwhKwSXviKbXVsdGlhZGRyc4wACgSsEl74Br8P3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOA9si14cJ2NPBMmBqnBIg_W5q1Ba67cUm_Z9dHwBj6HIN0Y3CCvw6DdWRwgr8QhXdha3UyBQ --filternode=/ip4/172.18.94.248/tcp/48910/p2p/16Uiu2HAmMLQnwrT45gLU95dLkP4iojiceqaDmhiyupNwyupZBnSo
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.93.31 waku 36eb87878e725f2d394fbf87d7e6bef1cebe72b677d4758f626ed9ccba907abc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 36eb87878e72. Setting up logs at ./log/docker/node2_2024-09-24_04-16-54__46c48b6b-940f-4926-8906-a66abf38fdde__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 18062
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18062/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18062/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.93.31/tcp/18063/p2p/16Uiu2HAm61L9s3vvZAPnyeahNPcCq5PnijXdhqcf9LNwqQ2Jjpgk","/ip4/172.18.93.31/tcp/18064/ws/p2p/16Uiu2HAm61L9s3vvZAPnyeahNPcCq5PnijXdhqcf9LNwqQ2Jjpgk"],"enrUri":"enr:-LO4QMMtQOVCSEI9ZT14r-We_8UPb7ll-NkiatkCigT_WWenEyTQ0AB4lUqPyNZVB31HhabGAtJaPHPcLPWgKu-L648BgmlkgnY0gmlwhKwSXR-KbXVsdGlhZGRyc4wACgSsEl0fBkaQ3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKdNDLy2w8xlEVZrWl8xcgdQVsEbdjShWbY1IxsQXs8nYN0Y3CCRo-DdWRwgkaRhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18062/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.94.248/tcp/48910/p2p/16Uiu2HAmMLQnwrT45gLU95dLkP4iojiceqaDmhiyupNwyupZBnSo"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48909/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18062/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "d30da0c7-00a2-4b12-a800-dc6323c9c9fd", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"d30da0c7-00a2-4b12-a800-dc6323c9c9fd","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48909/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18062/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "292cc6c3-6bc2-4ca4-b9b5-6f5d762c44b4", "contentFilters": ["Hello World!", "1234567890"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"292cc6c3-6bc2-4ca4-b9b5-6f5d762c44b4","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48909/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "1234567890", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18062/filter/v2/messages/1234567890" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"1234567890","version":0,"timestamp":1727151417740512768,"ephemeral":false}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X DELETE "http://127.0.0.1:18062/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["Hello World!"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48909/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "1234567890", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18062/filter/v2/messages/1234567890" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"1234567890","version":0,"timestamp":1727151417868133376,"ephemeral":false}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48909/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "Hello World!", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18062/filter/v2/messages/Hello%20World%21" -H "Content-Type: application/json" -d 'None'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:18062/filter/v2/messages/Hello%20World%21. Response content: b'Not subscribed to topic: Hello World!'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id afccffe0f72e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 36eb87878e72
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.