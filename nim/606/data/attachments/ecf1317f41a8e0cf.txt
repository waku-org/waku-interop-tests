[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_extra_field with id: 2025-01-05_19-16-05__86a3617e-145b-478e-a146-74ab31824a67
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-01-05_19-16-05__86a3617e-145b-478e-a146-74ab31824a67__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.39.190
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['18489', '18490', '18491', '18492', '18493']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 18489:18489 -p 18490:18490 -p 18491:18491 -p 18492:18492 -p 18493:18493 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18491 --rest-port=18489 --tcp-port=18490 --discv5-udp-port=18492 --rest-address=0.0.0.0 --nat=extip:172.18.39.190 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f33c4bb515bdfededd78f252a5702646aa37cddf6222adaefbf3e7b7a19695ee --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18493 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.39.190 waku 6a48d134304bf00cecc3b8794892cd618463eee284c2ebde2af7f02390f64fec
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 6a48d134304b. Setting up logs at ./log/docker/receiving_node1_2025-01-05_19-16-05__86a3617e-145b-478e-a146-74ab31824a67__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 18489
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 74e55938b99e. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18489/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18489/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.39.190/tcp/18490/p2p/16Uiu2HAmUd9LtPJz5Q3GCpHBihdkVw128ciKJ6x5xpZRL7C1kdrj","/ip4/172.18.39.190/tcp/18491/ws/p2p/16Uiu2HAmUd9LtPJz5Q3GCpHBihdkVw128ciKJ6x5xpZRL7C1kdrj"],"enrUri":"enr:-L24QDEgfYCnOfPXfPLuqjc9NBzQ0QP1a8t0mzngUkqbAtytKbFs_PsW16d8Q2az-SiQ9LYmamt1uakcsDmloXlML6ECgmlkgnY0gmlwhKwSJ76KbXVsdGlhZGRyc5YACASsEie-Bkg6AAoErBInvgZIO90DgnJzhQADAQAAiXNlY3AyNTZrMaED7UH_Z8Xw9Y_a7Ks2ugoP2dX7iXRpB1UDIkrjge3NL-yDdGNwgkg6g3VkcIJIPIV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-01-05_19-16-05__86a3617e-145b-478e-a146-74ab31824a67__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.51.66
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['55815', '55816', '55817', '55818', '55819']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 55815:55815 -p 55816:55816 -p 55817:55817 -p 55818:55818 -p 55819:55819 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55817 --rest-port=55815 --tcp-port=55816 --discv5-udp-port=55818 --rest-address=0.0.0.0 --nat=extip:172.18.51.66 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=feef8f6349a1db88c3e8bfdef6e00aeaaaed7b1aebc2c47cda359ec5f8e1b2ff --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55819 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.51.66 waku 2fc160577606038b1670ac36d810b0345dcda7bcc4687f5de50c37750b407e6f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 2fc160577606. Setting up logs at ./log/docker/receiving_node2_2025-01-05_19-16-05__86a3617e-145b-478e-a146-74ab31824a67__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 55815
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55815/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55815/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.51.66/tcp/55816/p2p/16Uiu2HAm721niBufWPKxuhLYVRtX4x5vM8tTMLBBKjNid7ohVR6a","/ip4/172.18.51.66/tcp/55817/ws/p2p/16Uiu2HAm721niBufWPKxuhLYVRtX4x5vM8tTMLBBKjNid7ohVR6a"],"enrUri":"enr:-L24QFmoDdTb0ERe-BLteAo4FLvMl-oelbDsd3jfWbXw85FyHKd1PDXLejl-77ezCZtiSSEJF-6OYtD8CJ_Uaf503XkCgmlkgnY0gmlwhKwSM0KKbXVsdGlhZGRyc5YACASsEjNCBtoIAAoErBIzQgbaCd0DgnJzhQADAQAAiXNlY3AyNTZrMaECrDyzo70qZsudnL2xWkcyEfAh8U54268R4IxgKeF_SMODdGNwgtoIg3VkcILaCoV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55815/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.39.190/tcp/18490/p2p/16Uiu2HAmUd9LtPJz5Q3GCpHBihdkVw128ciKJ6x5xpZRL7C1kdrj"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-01-05_19-16-05__86a3617e-145b-478e-a146-74ab31824a67__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.3.254
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['8393', '8394', '8395', '8396', '8397']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 8393:8393 -p 8394:8394 -p 8395:8395 -p 8396:8396 -p 8397:8397 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8395 --rest-port=8393 --tcp-port=8394 --discv5-udp-port=8396 --rest-address=0.0.0.0 --nat=extip:172.18.3.254 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=226e5f0e5ab70cbecaae6e3df4b5380ffb77bb9cd0b9fd424cd75e6ceebbf4c2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8397 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QDEgfYCnOfPXfPLuqjc9NBzQ0QP1a8t0mzngUkqbAtytKbFs_PsW16d8Q2az-SiQ9LYmamt1uakcsDmloXlML6ECgmlkgnY0gmlwhKwSJ76KbXVsdGlhZGRyc5YACASsEie-Bkg6AAoErBInvgZIO90DgnJzhQADAQAAiXNlY3AyNTZrMaED7UH_Z8Xw9Y_a7Ks2ugoP2dX7iXRpB1UDIkrjge3NL-yDdGNwgkg6g3VkcIJIPIV3YWt1Mgk --lightpushnode=/ip4/172.18.39.190/tcp/18490/p2p/16Uiu2HAmUd9LtPJz5Q3GCpHBihdkVw128ciKJ6x5xpZRL7C1kdrj --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.3.254 waku 46358212bab06ba362ff5024f5b8edcea931cc7e9ab6443a3224f444f9e83b9f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 46358212bab0. Setting up logs at ./log/docker/lightpush_node1_2025-01-05_19-16-05__86a3617e-145b-478e-a146-74ab31824a67__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 8393
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8393/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8393/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.3.254/tcp/8394/p2p/16Uiu2HAm841aJW4fRQJG2kG7vMoQ9GvccdXG2nd4eGdyAmbBY28L","/ip4/172.18.3.254/tcp/8395/ws/p2p/16Uiu2HAm841aJW4fRQJG2kG7vMoQ9GvccdXG2nd4eGdyAmbBY28L"],"enrUri":"enr:-L24QNTuQjIA37R1KrmzN-BOwaR7snfgP5eTirt2K5K9YsaDTC9sR0CRznGYbvP1cPGADcQfR6JtAu-zbI2sQAx9jn4CgmlkgnY0gmlwhKwSA_6KbXVsdGlhZGRyc5YACASsEgP-BiDKAAoErBID_gYgy90DgnJzhQADAQAAiXNlY3AyNTZrMaECu5tO8MW3zAp9xGhfzTrVgaNxutnVLbbOkNh7F5fHAQWDdGNwgiDKg3VkcIIgzIV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8393/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.39.190/tcp/18490/p2p/16Uiu2HAmUd9LtPJz5Q3GCpHBihdkVw128ciKJ6x5xpZRL7C1kdrj"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8393/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.51.66/tcp/55816/p2p/16Uiu2HAm721niBufWPKxuhLYVRtX4x5vM8tTMLBBKjNid7ohVR6a"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18489/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55815/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8393/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1736104569248237824, "extraField": "extraValue"}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:8393/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 6a48d134304b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 2fc160577606
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 6a48d134304b. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 46358212bab0
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 2fc160577606. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.