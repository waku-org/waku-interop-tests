[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_update_subscription_add_a_new_content_topic with id: 2025-01-05_19-16-27__b6601fef-9aa5-4639-b5f5-31f2af24e7c5
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-05_19-16-27__b6601fef-9aa5-4639-b5f5-31f2af24e7c5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.180.155
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['53121', '53122', '53123', '53124', '53125']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 53121:53121 -p 53122:53122 -p 53123:53123 -p 53124:53124 -p 53125:53125 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=53123 --rest-port=53121 --tcp-port=53122 --discv5-udp-port=53124 --rest-address=0.0.0.0 --nat=extip:172.18.180.155 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5f22a61c18bcbc4cef8f7f424ebed184259ff13a9e1b3caed26f73c1f08f41fe --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=53125 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.180.155 waku 5a6be449c39e5360ce9887f51afcac8823d5a3dd4aa5993adf71cfb9a0d0a717
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 5a6be449c39e. Setting up logs at ./log/docker/node1_2025-01-05_19-16-27__b6601fef-9aa5-4639-b5f5-31f2af24e7c5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 53121
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 9e9147845709. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53121/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53121/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.180.155/tcp/53122/p2p/16Uiu2HAmUcABkd3xdN2cWbPaDf1XJL1daPPcnoCiGAznDFHEARfd","/ip4/172.18.180.155/tcp/53123/ws/p2p/16Uiu2HAmUcABkd3xdN2cWbPaDf1XJL1daPPcnoCiGAznDFHEARfd"],"enrUri":"enr:-L24QBY8ngvgWm3qFFckB5qTeCiNmhWY3v4BB2ZpmIM1AUHnOkPAjhjjnOE_OM95bltv-vG7jz4uYcc0YQLlSaW7mwECgmlkgnY0gmlwhKwStJuKbXVsdGlhZGRyc5YACASsErSbBs-CAAoErBK0mwbPg90DgnJzhQADAQAAiXNlY3AyNTZrMaED7QFemBpX7aMtXG3otVGlFqHp-VBy8ElKKkHiSgDCS9iDdGNwgs-Cg3VkcILPhIV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-05_19-16-27__b6601fef-9aa5-4639-b5f5-31f2af24e7c5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.55.85
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['8832', '8833', '8834', '8835', '8836']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 8832:8832 -p 8833:8833 -p 8834:8834 -p 8835:8835 -p 8836:8836 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8834 --rest-port=8832 --tcp-port=8833 --discv5-udp-port=8835 --rest-address=0.0.0.0 --nat=extip:172.18.55.85 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6f6d71efdefb02aa71acbd8ed5f2cbcd1ca9d4b59b252feabbfbcfea4f6ef4bf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8836 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QBY8ngvgWm3qFFckB5qTeCiNmhWY3v4BB2ZpmIM1AUHnOkPAjhjjnOE_OM95bltv-vG7jz4uYcc0YQLlSaW7mwECgmlkgnY0gmlwhKwStJuKbXVsdGlhZGRyc5YACASsErSbBs-CAAoErBK0mwbPg90DgnJzhQADAQAAiXNlY3AyNTZrMaED7QFemBpX7aMtXG3otVGlFqHp-VBy8ElKKkHiSgDCS9iDdGNwgs-Cg3VkcILPhIV3YWt1MgU --filternode=/ip4/172.18.180.155/tcp/53122/p2p/16Uiu2HAmUcABkd3xdN2cWbPaDf1XJL1daPPcnoCiGAznDFHEARfd
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.55.85 waku 5cc5e015f695b3ef50c8d08ee702fb3329951d5ed9e9cd4857be8dd0fb59daa1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 5cc5e015f695. Setting up logs at ./log/docker/node2_2025-01-05_19-16-27__b6601fef-9aa5-4639-b5f5-31f2af24e7c5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 8832
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8832/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8832/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.55.85/tcp/8833/p2p/16Uiu2HAm8xqZgmivSrB1ZVUdSTcthSDCA7VXp88VmXB71SM4UB8Q","/ip4/172.18.55.85/tcp/8834/ws/p2p/16Uiu2HAm8xqZgmivSrB1ZVUdSTcthSDCA7VXp88VmXB71SM4UB8Q"],"enrUri":"enr:-L24QN8G2Aq3n3DuNuL2ItRzCSM8ki-0ik9AKTlh-3fi6P7caZrvhUHVKhhyRxN2SATA6LBAFR9oaRQnCJovq_g2nyECgmlkgnY0gmlwhKwSN1WKbXVsdGlhZGRyc5YACASsEjdVBiKBAAoErBI3VQYigt0DgnJzhQADAQAAiXNlY3AyNTZrMaECySPFrrB34DvvQxKKqnXo492uaOGeG1OoWqYmr8AR3T2DdGNwgiKBg3VkcIIig4V3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8832/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.180.155/tcp/53122/p2p/16Uiu2HAmUcABkd3xdN2cWbPaDf1XJL1daPPcnoCiGAznDFHEARfd"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53121/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8832/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "2844cf55-e1ed-43ab-a467-7294cd0d7fbd", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"2844cf55-e1ed-43ab-a467-7294cd0d7fbd","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X PUT "http://127.0.0.1:8832/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/2/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53121/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8832/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1736104589940118528,"ephemeral":false}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53121/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/2/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8832/filter/v2/messages/%2Ftest%2F2%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/2/waku-filter/proto","version":0,"timestamp":1736104590049729792,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 5a6be449c39e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 5cc5e015f695
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 5a6be449c39e. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.