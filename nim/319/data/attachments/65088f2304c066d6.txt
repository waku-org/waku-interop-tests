[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_with_peerAddr with id: 2024-08-16_07-38-42__d4c2661a-0414-4f42-b99f-e45fdaf65006
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:28 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-08-16_07-38-42__d4c2661a-0414-4f42-b99f-e45fdaf65006__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.124.199
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['51100', '51101', '51102', '51103', '51104']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 51100:51100 -p 51101:51101 -p 51102:51102 -p 51103:51103 -p 51104:51104 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=51102 --rest-port=51100 --tcp-port=51101 --discv5-udp-port=51103 --rest-address=0.0.0.0 --nat=extip:172.18.124.199 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8a21b00c1fd368e73cf66537803cadb0bafc4cd77ef40a5a6f17359b0efe0393 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=51104 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.124.199 waku 0085a09612b9d13a3c32a70aa8b32806d974245ffcecc1de06627a0a6db3bdb8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 0085a09612b9. Setting up logs at ./log/docker/publishing_node1_2024-08-16_07-38-42__d4c2661a-0414-4f42-b99f-e45fdaf65006__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 51100
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51100/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51100/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.124.199/tcp/51101/p2p/16Uiu2HAmRrcz1J25TLCrre9kVboXKoh57ZZTY26Lp63J79rCi46N","/ip4/172.18.124.199/tcp/51102/ws/p2p/16Uiu2HAmRrcz1J25TLCrre9kVboXKoh57ZZTY26Lp63J79rCi46N"],"enrUri":"enr:-LO4QNP4Ew5r3V7Mrd1MAP-kVT0OXiBtCBWOD3i-k1l8zD-ebQhD1WtCWWUx72INHxLyky52DJr2oT820SOmjwPCNTEBgmlkgnY0gmlwhKwSfMeKbXVsdGlhZGRyc4wACgSsEnzHBsee3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPEIr1zsJhq1e4cQwYyybevBi6n7iraxmZTpCjJfgheW4N0Y3CCx52DdWRwgsefhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/store_node1_2024-08-16_07-38-42__d4c2661a-0414-4f42-b99f-e45fdaf65006__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.137.87
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['45146', '45147', '45148', '45149', '45150']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 45146:45146 -p 45147:45147 -p 45148:45148 -p 45149:45149 -p 45150:45150 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45148 --rest-port=45146 --tcp-port=45147 --discv5-udp-port=45149 --rest-address=0.0.0.0 --nat=extip:172.18.137.87 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c8a9e4c7c88f60177a0fbce84cbac1cfbf1acdecdea1c7dbe8dcd88d7a0f4b4a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45150 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QNP4Ew5r3V7Mrd1MAP-kVT0OXiBtCBWOD3i-k1l8zD-ebQhD1WtCWWUx72INHxLyky52DJr2oT820SOmjwPCNTEBgmlkgnY0gmlwhKwSfMeKbXVsdGlhZGRyc4wACgSsEnzHBsee3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPEIr1zsJhq1e4cQwYyybevBi6n7iraxmZTpCjJfgheW4N0Y3CCx52DdWRwgsefhXdha3UyAw --storenode=/ip4/172.18.124.199/tcp/51101/p2p/16Uiu2HAmRrcz1J25TLCrre9kVboXKoh57ZZTY26Lp63J79rCi46N --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.137.87 waku a428b5063c0134651c8bdbe46aa9a0fa041f2e247e2de3fae63d16babac2db78
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID a428b5063c01. Setting up logs at ./log/docker/store_node1_2024-08-16_07-38-42__d4c2661a-0414-4f42-b99f-e45fdaf65006__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 45146
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45146/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45146/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.137.87/tcp/45147/p2p/16Uiu2HAm9CESmHujpoyG3RDwvaj5TZTRE8QF5GTW3d9aaphU2Nym","/ip4/172.18.137.87/tcp/45148/ws/p2p/16Uiu2HAm9CESmHujpoyG3RDwvaj5TZTRE8QF5GTW3d9aaphU2Nym"],"enrUri":"enr:-LO4QJsQRy-zntrc5pMTjEZriR9nJvmb5uZpVtyGUdIPYL6FdXDyQmKEd_qwJI8HeEoU11o_sdXiCjXxDH_mFGTuv9MBgmlkgnY0gmlwhKwSiVeKbXVsdGlhZGRyc4wACgSsEolXBrBc3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLMkjGm5Ro1h4vkELyvXQdowfYovDzIEoAPghZagcB96IN0Y3CCsFuDdWRwgrBdhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45146/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.124.199/tcp/51101/p2p/16Uiu2HAmRrcz1J25TLCrre9kVboXKoh57ZZTY26Lp63J79rCi46N"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51100/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45146/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:128 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51100/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:216 Checking that peer wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45146/store/v3/messages?peerAddr=%2Fip4%2F172.18.124.199%2Ftcp%2F51101%2Fp2p%2F16Uiu2HAmRrcz1J25TLCrre9kVboXKoh57ZZTY26Lp63J79rCi46N&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"ffcc03f21a133ae0b498","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"YkSVZnm7bdExS29QUVd5ACxXqp9wmLAXEWp34KhjACM="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 0085a09612b9
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id a428b5063c01
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.