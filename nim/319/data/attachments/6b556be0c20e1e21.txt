[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_valid_payloads_lightpush_at_spam_rate with id: 2024-08-16_07-21-14__e7547691-7d54-48fa-a0f3-dda0a5c0d80e
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.rln:rln.py:130 Registering RLN credentials for single node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node_2024-08-16_07-21-14__6d5cbf77-d445-4400-9ef4-d28fa0acf96b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:187 Registering RLN credentials...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.waku_node:waku_node.py:187 Registering RLN credentials...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.11.167
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['38727', '38728', '38729', '38730', '38731']
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 38727:38727 -p 38728:38728 -p 38729:38729 -p 38730:38730 -p 38731:38731 wakuorg/nwaku:latest generateRlnKeystore --execute --rln-relay-user-message-limit=100 --rln-relay-cred-path=/keystore/keystore.json --rln-relay-cred-password=password --rln-relay-eth-client-address=https://sepolia.infura.io/v3/0fbc961f49944da4b8fde35715e2171b --rln-relay-eth-contract-address=0xCB33Aa5B38d79E3D9Fa8B10afF38AA201399a7e3 --rln-relay-eth-private-key=d5f76ef141a96d916f99c72878a92cc6fb479af8441670d103e307d1184ab367
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.11.167 waku 37327a465d2744b0c9e2205edf5dbb973dc431f770e86c2184f4ad900347e62c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 37327a465d27. Setting up logs at ./log/docker/node_2024-08-16_07-21-14__6d5cbf77-d445-4400-9ef4-d28fa0acf96b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:206 Executed container from image wakuorg/nwaku:latest. REST: 38727 to register RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:208 Waiting for keystore /home/runner/work/waku-interop-tests/waku-interop-tests/keystore_ymug_1/keystore.json
[35mDEBUG   [0m src.steps.rln:rln.py:130 Registering RLN credentials for single node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node_2024-08-16_07-21-25__76182fe6-4568-441e-9d82-b8582cb9ed11__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:187 Registering RLN credentials...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.243.138
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['11134', '11135', '11136', '11137', '11138']
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 11134:11134 -p 11135:11135 -p 11136:11136 -p 11137:11137 -p 11138:11138 wakuorg/nwaku:latest generateRlnKeystore --execute --rln-relay-user-message-limit=100 --rln-relay-cred-path=/keystore/keystore.json --rln-relay-cred-password=password --rln-relay-eth-client-address=https://sepolia.infura.io/v3/0fbc961f49944da4b8fde35715e2171b --rln-relay-eth-contract-address=0xCB33Aa5B38d79E3D9Fa8B10afF38AA201399a7e3 --rln-relay-eth-private-key=6bafcb0228b6b369b2de376bd9e37cdd3f5d30ce0787992b235acfacfa5de52e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.243.138 waku 86d1bb68cd36dea992afb33853ee2f6772d311613070de59043fef26478e29ca
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 86d1bb68cd36. Setting up logs at ./log/docker/node_2024-08-16_07-21-25__76182fe6-4568-441e-9d82-b8582cb9ed11__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:206 Executed container from image wakuorg/nwaku:latest. REST: 11134 to register RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:208 Waiting for keystore /home/runner/work/waku-interop-tests/waku-interop-tests/keystore_jjtw_2/keystore.json
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node1_2024-08-16_07-21-14__e7547691-7d54-48fa-a0f3-dda0a5c0d80e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.230.189
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['39543', '39544', '39545', '39546', '39547']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes ['/home/runner/work/waku-interop-tests/waku-interop-tests/rln_tree_ymug_1:/etc/rln_tree', '/home/runner/work/waku-interop-tests/waku-interop-tests/keystore_ymug_1:/keystore']
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 39543:39543 -p 39544:39544 -p 39545:39545 -p 39546:39546 -p 39547:39547 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39545 --rest-port=39543 --tcp-port=39544 --discv5-udp-port=39546 --rest-address=0.0.0.0 --nat=extip:172.18.230.189 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3d4968fef43caa5ed3bc65d4abbeeabba8bd278cbccebf8aaec20cacfaa3a5b5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39547 --metrics-logging=true --relay=true --rln-relay-membership-index=1 --lightpush=true --rln-relay-user-message-limit=1 --rln-relay-epoch-sec=1 --rln-relay=true --rln-relay-cred-path=/keystore/keystore.json --rln-relay-cred-password=password
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.230.189 waku 8ef0eab25527379737c9e99224bba68c8dbe45b813e26b6aa7fe1da8378ce216
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 8ef0eab25527. Setting up logs at ./log/docker/node1_2024-08-16_07-21-14__e7547691-7d54-48fa-a0f3-dda0a5c0d80e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 39543
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39543/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Initializing","protocolsHealth":[{"Rln Relay":"Ready"}]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39543/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[{"Rln Relay":"Ready"}]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39543/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.230.189/tcp/39544/p2p/16Uiu2HAmLebv2hn3BrnuzLnJKLEydaA58ZDgz5WyLKQgG3c3BzUo","/ip4/172.18.230.189/tcp/39545/ws/p2p/16Uiu2HAmLebv2hn3BrnuzLnJKLEydaA58ZDgz5WyLKQgG3c3BzUo"],"enrUri":"enr:-LO4QCcD5XdXQ5pVAybXCaEL1k6CoWun1rBSuQAKCn_9awcsE_4ApSAfI0OHmmQEdRfHnD3Tz-EA4eMkrXp3Bj9c2mkBgmlkgnY0gmlwhKwS5r2KbXVsdGlhZGRyc4wACgSsEua9Bpp53QOCcnOFAAMBAACJc2VjcDI1NmsxoQN2xCCjnH39_NOS2fPOXZPQgtjSWsM8JLKNEXe8WwzO4IN0Y3CCmniDdWRwgpp6hXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/lightpush_node2_2024-08-16_07-21-14__e7547691-7d54-48fa-a0f3-dda0a5c0d80e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.32.151
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['33200', '33201', '33202', '33203', '33204']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes ['/home/runner/work/waku-interop-tests/waku-interop-tests/rln_tree_jjtw_2:/etc/rln_tree', '/home/runner/work/waku-interop-tests/waku-interop-tests/keystore_jjtw_2:/keystore']
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 33200:33200 -p 33201:33201 -p 33202:33202 -p 33203:33203 -p 33204:33204 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=33202 --rest-port=33200 --tcp-port=33201 --discv5-udp-port=33203 --rest-address=0.0.0.0 --nat=extip:172.18.32.151 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fa8e770d574f8ad78cba0db0e4207aaaa3f7d8e0be19fd6cb0f6fc9da0feee04 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=33204 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QCcD5XdXQ5pVAybXCaEL1k6CoWun1rBSuQAKCn_9awcsE_4ApSAfI0OHmmQEdRfHnD3Tz-EA4eMkrXp3Bj9c2mkBgmlkgnY0gmlwhKwS5r2KbXVsdGlhZGRyc4wACgSsEua9Bpp53QOCcnOFAAMBAACJc2VjcDI1NmsxoQN2xCCjnH39_NOS2fPOXZPQgtjSWsM8JLKNEXe8WwzO4IN0Y3CCmniDdWRwgpp6hXdha3UyCQ --lightpush=true --lightpushnode=/ip4/172.18.230.189/tcp/39544/p2p/16Uiu2HAmLebv2hn3BrnuzLnJKLEydaA58ZDgz5WyLKQgG3c3BzUo --rln-relay-membership-index=1 --rln-relay-user-message-limit=1 --rln-relay-epoch-sec=1 --rln-relay=true --rln-relay-cred-path=/keystore/keystore.json --rln-relay-cred-password=password
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.32.151 waku cae5d77c13d09f86478092e12251802d20811a998c5391fb25587212a8f324b0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID cae5d77c13d0. Setting up logs at ./log/docker/lightpush_node2_2024-08-16_07-21-14__e7547691-7d54-48fa-a0f3-dda0a5c0d80e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 33200
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33200/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Initializing","protocolsHealth":[{"Rln Relay":"Ready"}]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33200/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[{"Rln Relay":"Ready"}]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33200/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.32.151/tcp/33201/p2p/16Uiu2HAm87bPdPygH7BYvY3VzCkbAshTKY6pY9bTWivY4SQq3p2c","/ip4/172.18.32.151/tcp/33202/ws/p2p/16Uiu2HAm87bPdPygH7BYvY3VzCkbAshTKY6pY9bTWivY4SQq3p2c"],"enrUri":"enr:-LO4QCKUBxUNkHjqjwNKyp5WFGldUKtKxwAm4UhRQiSqACkFE7HuByjTTG9biqdkVBXjhc01S8rd6gktOQJURmNeZ-ABgmlkgnY0gmlwhKwSIJeKbXVsdGlhZGRyc4wACgSsEiCXBoGy3QOCcnOFAAMBAACJc2VjcDI1NmsxoQK8hklf0n74jzDqhb4U9c7F3YhFwPYiE_nljy4nl31LaYN0Y3CCgbGDdWRwgoGzhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33200/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.230.189/tcp/39544/p2p/16Uiu2HAmLebv2hn3BrnuzLnJKLEydaA58ZDgz5WyLKQgG3c3BzUo"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39543/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/1/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33200/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/1/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.relay.test_rln:test_rln.py:30 Running test with payload A simple string
[35mDEBUG   [0m tests.relay.test_rln:test_rln.py:33 Sending message No. #1
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33200/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/1/0", "message": {"payload": "SGVsbG8gV29ybGQh", "contentTopic": "/test/1/waku-rln-relay/proto", "timestamp": 1723792908963845632}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.relay.test_rln:test_rln.py:30 Running test with payload An integer
[35mDEBUG   [0m tests.relay.test_rln:test_rln.py:33 Sending message No. #2
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33200/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/1/0", "message": {"payload": "MTIzNDU2Nzg5MA==", "contentTopic": "/test/1/waku-rln-relay/proto", "timestamp": 1723792909254674432}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:33200/lightpush/v1/message. Response content: b'Failed to request a message push: could not get new message id to generate an rln proof: NonceLimitReached: Nonce limit reached. Please wait for the next epoch. requested nonce: 1 & nonceLimit: 1'
[35mDEBUG   [0m tests.relay.test_rln:test_rln.py:30 Running test with payload A dictionary
[35mDEBUG   [0m tests.relay.test_rln:test_rln.py:33 Sending message No. #3
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33200/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/1/0", "message": {"payload": "eyJrZXkiOiAidmFsdWUifQ==", "contentTopic": "/test/1/waku-rln-relay/proto", "timestamp": 1723792909262597120}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:33200/lightpush/v1/message. Response content: b'Failed to request a message push: could not get new message id to generate an rln proof: NonceLimitReached: Nonce limit reached. Please wait for the next epoch. requested nonce: 2 & nonceLimit: 1'
[35mDEBUG   [0m tests.relay.test_rln:test_rln.py:30 Running test with payload Chinese characters
[35mDEBUG   [0m tests.relay.test_rln:test_rln.py:33 Sending message No. #4
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33200/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/1/0", "message": {"payload": "6L+Z5piv5LiA5Lqb5Lit5paH", "contentTopic": "/test/1/waku-rln-relay/proto", "timestamp": 1723792909269333248}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:33200/lightpush/v1/message. Response content: b'Failed to request a message push: could not get new message id to generate an rln proof: NonceLimitReached: Nonce limit reached. Please wait for the next epoch. requested nonce: 3 & nonceLimit: 1'
[35mDEBUG   [0m tests.relay.test_rln:test_rln.py:30 Running test with payload Emojis
[35mDEBUG   [0m tests.relay.test_rln:test_rln.py:33 Sending message No. #5
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33200/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/1/0", "message": {"payload": "8J+agPCfjJ/inKg=", "contentTopic": "/test/1/waku-rln-relay/proto", "timestamp": 1723792909276195328}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:33200/lightpush/v1/message. Response content: b'Failed to request a message push: could not get new message id to generate an rln proof: NonceLimitReached: Nonce limit reached. Please wait for the next epoch. requested nonce: 4 & nonceLimit: 1'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 8ef0eab25527
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id cae5d77c13d0
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.