[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_2_receiving_nodes__relay_node1_forwards_lightpushed_message_to_relay_node2 with id: 2024-08-16_07-28-28__caf3ecfe-5ab0-4f71-b0c8-29296e0495b2
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-16_07-28-28__caf3ecfe-5ab0-4f71-b0c8-29296e0495b2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.99.236
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['36199', '36200', '36201', '36202', '36203']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 36199:36199 -p 36200:36200 -p 36201:36201 -p 36202:36202 -p 36203:36203 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36201 --rest-port=36199 --tcp-port=36200 --discv5-udp-port=36202 --rest-address=0.0.0.0 --nat=extip:172.18.99.236 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bd0f979f4eaed5aab2ce94a9c1fcdf424ededef89afc3f6c17d40e445dabfe5f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36203 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.99.236 waku f7f1dcec771a6813737e27862c4d035c146b7aeb49b0ece163a5ee8de108cc02
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID f7f1dcec771a. Setting up logs at ./log/docker/receiving_node1_2024-08-16_07-28-28__caf3ecfe-5ab0-4f71-b0c8-29296e0495b2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 36199
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36199/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36199/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.99.236/tcp/36200/p2p/16Uiu2HAmGpbYBrbHDbZ43mbzjRaAdgKwok7E5EbUuHrawNeAN9ch","/ip4/172.18.99.236/tcp/36201/ws/p2p/16Uiu2HAmGpbYBrbHDbZ43mbzjRaAdgKwok7E5EbUuHrawNeAN9ch"],"enrUri":"enr:-LO4QMOe8ZpM_jTHo-G7nTWjzlH9pVsTHcUXtG_WXYzYh3gNabp9t1CPZQjvJ4354KOpppmr6JInxoOuVsRuDHB3El8BgmlkgnY0gmlwhKwSY-yKbXVsdGlhZGRyc4wACgSsEmPsBo1p3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM95MMXDCtyK_W8zpZxL56clA_eVBaw_3ZrqjCoCrORboN0Y3CCjWiDdWRwgo1qhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-16_07-28-28__caf3ecfe-5ab0-4f71-b0c8-29296e0495b2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.158.195
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['18358', '18359', '18360', '18361', '18362']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 18358:18358 -p 18359:18359 -p 18360:18360 -p 18361:18361 -p 18362:18362 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18360 --rest-port=18358 --tcp-port=18359 --discv5-udp-port=18361 --rest-address=0.0.0.0 --nat=extip:172.18.158.195 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7eb41584d66c61dc8db4eb1d5d5eca3e8d7bffd1f960b10f56741a4c6adedeba --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18362 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.158.195 waku 09ffe9bf505476b802ea33b2cd878ab365f2e5e270f109173c95d34c0bf9eb62
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 09ffe9bf5054. Setting up logs at ./log/docker/receiving_node2_2024-08-16_07-28-28__caf3ecfe-5ab0-4f71-b0c8-29296e0495b2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 18358
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18358/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18358/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.158.195/tcp/18359/p2p/16Uiu2HAm8vUBTuVz1aWNbDTiAbaG1XgG61nuNezk2sguTF3No8Bw","/ip4/172.18.158.195/tcp/18360/ws/p2p/16Uiu2HAm8vUBTuVz1aWNbDTiAbaG1XgG61nuNezk2sguTF3No8Bw"],"enrUri":"enr:-LO4QMF2pnMpgXBULSI7qufHFLinv3dDOTK07btmhkvYBplTS6YbmOiRdu12PWid05mhE__51FbxK-5O7IBDeke3EYABgmlkgnY0gmlwhKwSnsOKbXVsdGlhZGRyc4wACgSsEp7DBke43QOCcnOFAAMBAACJc2VjcDI1NmsxoQLIiG6-Ru8tPvvrRa0sWF0jm1oVvsoMuMk5i7cbeUvhtoN0Y3CCR7eDdWRwgke5hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18358/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.99.236/tcp/36200/p2p/16Uiu2HAmGpbYBrbHDbZ43mbzjRaAdgKwok7E5EbUuHrawNeAN9ch"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-16_07-28-28__caf3ecfe-5ab0-4f71-b0c8-29296e0495b2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.7.73
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['17052', '17053', '17054', '17055', '17056']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 17052:17052 -p 17053:17053 -p 17054:17054 -p 17055:17055 -p 17056:17056 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17054 --rest-port=17052 --tcp-port=17053 --discv5-udp-port=17055 --rest-address=0.0.0.0 --nat=extip:172.18.7.73 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6f894b9e5cb6e4eb5ffc385299e2de862abef54d6d75e2e3192e7f387f81f5a3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17056 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QMOe8ZpM_jTHo-G7nTWjzlH9pVsTHcUXtG_WXYzYh3gNabp9t1CPZQjvJ4354KOpppmr6JInxoOuVsRuDHB3El8BgmlkgnY0gmlwhKwSY-yKbXVsdGlhZGRyc4wACgSsEmPsBo1p3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM95MMXDCtyK_W8zpZxL56clA_eVBaw_3ZrqjCoCrORboN0Y3CCjWiDdWRwgo1qhXdha3UyCQ --lightpushnode=/ip4/172.18.99.236/tcp/36200/p2p/16Uiu2HAmGpbYBrbHDbZ43mbzjRaAdgKwok7E5EbUuHrawNeAN9ch --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.7.73 waku 35cb1232f583f5ecd4361a2c99b129372342d33885a3608317bbbb8cf3e46ece
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 35cb1232f583. Setting up logs at ./log/docker/lightpush_node1_2024-08-16_07-28-28__caf3ecfe-5ab0-4f71-b0c8-29296e0495b2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 17052
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17052/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17052/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.7.73/tcp/17053/p2p/16Uiu2HAmC44ia9sWrsuVF8kv9Mv3XtKG3YwtTuB7NgmsqrwLuJq7","/ip4/172.18.7.73/tcp/17054/ws/p2p/16Uiu2HAmC44ia9sWrsuVF8kv9Mv3XtKG3YwtTuB7NgmsqrwLuJq7"],"enrUri":"enr:-LO4QCQIfyRvZVXyg-cM49B2ByD5Yw4apd9MJphesUvMQD1IaVv7CrYA0oB8ZmQ-ovupyeIZb1Zod7uR7wSe4UZzV9ABgmlkgnY0gmlwhKwSB0mKbXVsdGlhZGRyc4wACgSsEgdJBkKe3QOCcnOFAAMBAACJc2VjcDI1NmsxoQL3DZwBe367fqz30dBsULP1E8XL9K2NV66uRrhAWC96moN0Y3CCQp2DdWRwgkKfhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:17052/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.99.236/tcp/36200/p2p/16Uiu2HAmGpbYBrbHDbZ43mbzjRaAdgKwok7E5EbUuHrawNeAN9ch"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:17052/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.158.195/tcp/18359/p2p/16Uiu2HAm8vUBTuVz1aWNbDTiAbaG1XgG61nuNezk2sguTF3No8Bw"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36199/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18358/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:17052/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1723793314416521984}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36199/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1723793314416521984,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18358/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1723793314416521984,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id f7f1dcec771a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 09ffe9bf5054
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 35cb1232f583
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.