[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_message_published_on_different_pubsub_topic_is_not_retrieved with id: 2024-08-16_07-32-58__a52c0997-1ce7-4f98-bef2-2aba95cebc84
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.relay:relay.py:34 Running fixture setup: setup_main_relay_nodes
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node1_2024-08-16_07-32-58__a52c0997-1ce7-4f98-bef2-2aba95cebc84__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.231.128
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['40310', '40311', '40312', '40313', '40314']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 40310:40310 -p 40311:40311 -p 40312:40312 -p 40313:40313 -p 40314:40314 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40312 --rest-port=40310 --tcp-port=40311 --discv5-udp-port=40313 --rest-address=0.0.0.0 --nat=extip:172.18.231.128 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ca880819b065add3eddc2c726c77d5beeab015af8a7e750cecc8a3cee843aff5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40314 --metrics-logging=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.231.128 waku a6639076c01582d557a9076ec3af629229cf0ef2498cc9af31c84b75380051cc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID a6639076c015. Setting up logs at ./log/docker/node1_2024-08-16_07-32-58__a52c0997-1ce7-4f98-bef2-2aba95cebc84__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 40310
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40310/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40310/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.231.128/tcp/40311/p2p/16Uiu2HAmJTN62LjoekQn7mXJ5XSA6vS4VHy3jC9f9sGSLqBx2uES","/ip4/172.18.231.128/tcp/40312/ws/p2p/16Uiu2HAmJTN62LjoekQn7mXJ5XSA6vS4VHy3jC9f9sGSLqBx2uES"],"enrUri":"enr:-LO4QFST9ABfj1cVMjjNC92cyv17Nl49lqvnSECM6i_6iOCyeRJ_8pkpg8FFNR505Jd1bslnpKTJdlZaP72AYNSKmcMBgmlkgnY0gmlwhKwS54CKbXVsdGlhZGRyc4wACgSsEueABp143QOCcnOFAAMBAACJc2VjcDI1NmsxoQNWK7rO9kaR3DBzH7VciYdteI27VdtsYAPMzePwZeQJs4N0Y3CCnXeDdWRwgp15hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node2_2024-08-16_07-32-58__a52c0997-1ce7-4f98-bef2-2aba95cebc84__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.4.247
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['43350', '43351', '43352', '43353', '43354']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 43350:43350 -p 43351:43351 -p 43352:43352 -p 43353:43353 -p 43354:43354 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=43352 --rest-port=43350 --tcp-port=43351 --discv5-udp-port=43353 --rest-address=0.0.0.0 --nat=extip:172.18.4.247 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c3a15bcd60ed1c77c96bcb3e7fd750fccbd3d61fc3549b30b5a70a9daeb1be5b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=43354 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QFST9ABfj1cVMjjNC92cyv17Nl49lqvnSECM6i_6iOCyeRJ_8pkpg8FFNR505Jd1bslnpKTJdlZaP72AYNSKmcMBgmlkgnY0gmlwhKwS54CKbXVsdGlhZGRyc4wACgSsEueABp143QOCcnOFAAMBAACJc2VjcDI1NmsxoQNWK7rO9kaR3DBzH7VciYdteI27VdtsYAPMzePwZeQJs4N0Y3CCnXeDdWRwgp15hXdha3UyAQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.4.247 waku b74385b83fb6df56817d17f22462b301b0b9b031571d59872145a476626caa7c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID b74385b83fb6. Setting up logs at ./log/docker/node2_2024-08-16_07-32-58__a52c0997-1ce7-4f98-bef2-2aba95cebc84__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 43350
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43350/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43350/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.4.247/tcp/43351/p2p/16Uiu2HAmSonM2qMaTYuWvqCjNpaC7B4YwZP4XPw7bpEaUBVGzsmC","/ip4/172.18.4.247/tcp/43352/ws/p2p/16Uiu2HAmSonM2qMaTYuWvqCjNpaC7B4YwZP4XPw7bpEaUBVGzsmC"],"enrUri":"enr:-LO4QCdHfYW7pBSu3H0RD0CEIwgHGzRlYORZv69FSSygJo9hCXgv3__SlB26Lge3s4F0kdKCCXw5wPKDdDprxunrOiEBgmlkgnY0gmlwhKwSBPeKbXVsdGlhZGRyc4wACgSsEgT3BqlY3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPSREVSZUmipOMltFHKFRMV8M9M_jJqYZhKSfl4YNzIY4N0Y3CCqVeDdWRwgqlZhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43350/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.231.128/tcp/40311/p2p/16Uiu2HAmJTN62LjoekQn7mXJ5XSA6vS4VHy3jC9f9sGSLqBx2uES"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.relay:relay.py:59 Running fixture setup: subscribe_main_relay_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40310/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43350/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40310/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.relay:relay.py:123 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40310/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1723793582774227968,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.relay:relay.py:123 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43350/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1723793582774227968,"ephemeral":false}]'
[32mINFO    [0m src.steps.relay:relay.py:71 WARM UP successful!!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40310/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0", "/waku/2/rs/3/1", "/waku/2/rs/3/9", "/waku/2/rs/3/25", "/waku/2/rs/3/1000"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43350/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0", "/waku/2/rs/3/1", "/waku/2/rs/3/9", "/waku/2/rs/3/25", "/waku/2/rs/3/1000"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40310/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43350/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id a6639076c015
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id b74385b83fb6
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.