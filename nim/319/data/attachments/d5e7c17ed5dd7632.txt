[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_no_timestamp with id: 2024-08-16_07-30-09__7819eb8a-c9cf-4e6d-8bed-14791569fc43
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-16_07-30-09__7819eb8a-c9cf-4e6d-8bed-14791569fc43__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.134.150
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['45393', '45394', '45395', '45396', '45397']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 45393:45393 -p 45394:45394 -p 45395:45395 -p 45396:45396 -p 45397:45397 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45395 --rest-port=45393 --tcp-port=45394 --discv5-udp-port=45396 --rest-address=0.0.0.0 --nat=extip:172.18.134.150 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=55f68b72161f5d9e60b0dbee4564a25d9da0c14e72f8e0c111cfe2bab5c37b21 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45397 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.134.150 waku 2a7b6eebb8112b31c8a5ba8eb48f100f99637aeb9ee4031aa5a6cc1c50238500
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 2a7b6eebb811. Setting up logs at ./log/docker/receiving_node1_2024-08-16_07-30-09__7819eb8a-c9cf-4e6d-8bed-14791569fc43__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 45393
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45393/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45393/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.134.150/tcp/45394/p2p/16Uiu2HAmTGD98aRUbMnonX5Kd4WfT7wojxdZk8SKXFXno5xpQ4Cr","/ip4/172.18.134.150/tcp/45395/ws/p2p/16Uiu2HAmTGD98aRUbMnonX5Kd4WfT7wojxdZk8SKXFXno5xpQ4Cr"],"enrUri":"enr:-LO4QKOqTde54kmL70l8wajAtzATIInzkbmoyctJjCWH7N8NVT1GWnQyjlzj-siBZU2TuAy3LMxSUwftEte6Four2wsBgmlkgnY0gmlwhKwShpaKbXVsdGlhZGRyc4wACgSsEoaWBrFT3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPZCWhLw7tegHCFSqIlfCyJBERUcxWT66uYnJIdNllsA4N0Y3CCsVKDdWRwgrFUhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-16_07-30-09__7819eb8a-c9cf-4e6d-8bed-14791569fc43__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.215.254
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['21235', '21236', '21237', '21238', '21239']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 21235:21235 -p 21236:21236 -p 21237:21237 -p 21238:21238 -p 21239:21239 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=21237 --rest-port=21235 --tcp-port=21236 --discv5-udp-port=21238 --rest-address=0.0.0.0 --nat=extip:172.18.215.254 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dff9d36c4d5f39f1bd9bd50d3cd0ef02a4cfaa5ddba03d4a84105ea8baebcdb9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=21239 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.215.254 waku 426bd3c034c647814a046b7e91deda6d65d075a1a503e124e0943d91c6b29f8f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 426bd3c034c6. Setting up logs at ./log/docker/receiving_node2_2024-08-16_07-30-09__7819eb8a-c9cf-4e6d-8bed-14791569fc43__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 21235
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21235/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21235/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.215.254/tcp/21236/p2p/16Uiu2HAmJBTXYkdgGFefanRXKDNMnGQekp9iLNSjb9cJPtS3DUKJ","/ip4/172.18.215.254/tcp/21237/ws/p2p/16Uiu2HAmJBTXYkdgGFefanRXKDNMnGQekp9iLNSjb9cJPtS3DUKJ"],"enrUri":"enr:-LO4QKQT0xFtnxMWZQmk5Kqyi_3njPHaXC-wHzOgxUGlsKm3J5nJKvKv5bvI_aTDRUzm8xadpOwu-wINkv0m0CetawABgmlkgnY0gmlwhKwS1_6KbXVsdGlhZGRyc4wACgSsEtf-BlL13QOCcnOFAAMBAACJc2VjcDI1NmsxoQNSGJZ_zRo3FWJSH4TLvuIgTbV7LAcUtctgQpvCvNnMUYN0Y3CCUvSDdWRwglL2hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21235/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.134.150/tcp/45394/p2p/16Uiu2HAmTGD98aRUbMnonX5Kd4WfT7wojxdZk8SKXFXno5xpQ4Cr"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-16_07-30-09__7819eb8a-c9cf-4e6d-8bed-14791569fc43__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.108.43
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['37007', '37008', '37009', '37010', '37011']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 37007:37007 -p 37008:37008 -p 37009:37009 -p 37010:37010 -p 37011:37011 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37009 --rest-port=37007 --tcp-port=37008 --discv5-udp-port=37010 --rest-address=0.0.0.0 --nat=extip:172.18.108.43 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3e2fdb3e9ba1e91a1572fbb8a75c9f3d5b4c9afa0c6cc9ee5eb6a8e6f8fcfad7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37011 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QKOqTde54kmL70l8wajAtzATIInzkbmoyctJjCWH7N8NVT1GWnQyjlzj-siBZU2TuAy3LMxSUwftEte6Four2wsBgmlkgnY0gmlwhKwShpaKbXVsdGlhZGRyc4wACgSsEoaWBrFT3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPZCWhLw7tegHCFSqIlfCyJBERUcxWT66uYnJIdNllsA4N0Y3CCsVKDdWRwgrFUhXdha3UyCQ --lightpushnode=/ip4/172.18.134.150/tcp/45394/p2p/16Uiu2HAmTGD98aRUbMnonX5Kd4WfT7wojxdZk8SKXFXno5xpQ4Cr --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.108.43 waku e52497947eb37ca7fa384dcb7b3579654609515e6f8de4276e474c72b7f40b1d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID e52497947eb3. Setting up logs at ./log/docker/lightpush_node1_2024-08-16_07-30-09__7819eb8a-c9cf-4e6d-8bed-14791569fc43__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 37007
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37007/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37007/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.108.43/tcp/37008/p2p/16Uiu2HAkvdZ8dvHKRmKcU1Fy3R1S9A6R1rCewVo54N4dsLQV3Bd8","/ip4/172.18.108.43/tcp/37009/ws/p2p/16Uiu2HAkvdZ8dvHKRmKcU1Fy3R1S9A6R1rCewVo54N4dsLQV3Bd8"],"enrUri":"enr:-LO4QN5qFkcDgiLkmEpFVqSd-N9MRp8Uly7wq3J36H_x-lkRDPfG6l2oEbgVqjpeW4g7OSzmpssvKN2UwujgxF-lmVsBgmlkgnY0gmlwhKwSbCuKbXVsdGlhZGRyc4wACgSsEmwrBpCR3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIR5uoDu7o_vP6YnNH62GH54ptZnYeKrvKWP9zGHftgx4N0Y3CCkJCDdWRwgpCShXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37007/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.134.150/tcp/45394/p2p/16Uiu2HAmTGD98aRUbMnonX5Kd4WfT7wojxdZk8SKXFXno5xpQ4Cr"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37007/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.215.254/tcp/21236/p2p/16Uiu2HAmJBTXYkdgGFefanRXKDNMnGQekp9iLNSjb9cJPtS3DUKJ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45393/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21235/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37007/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto"}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45393/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1723793414243217408,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21235/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1723793414243217408,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 2a7b6eebb811
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 426bd3c034c6
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id e52497947eb3
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.