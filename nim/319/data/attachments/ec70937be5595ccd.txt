[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_single_pubsub_topic[/waku/2/rs/5/1] with id: 2024-08-16_07-38-08__747f9ab2-8abd-4204-b9a9-a27a10c4214b
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node1_2024-08-16_07-38-08__747f9ab2-8abd-4204-b9a9-a27a10c4214b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.64.101
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['33682', '33683', '33684', '33685', '33686']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:71 Cluster id was resolved to: 5
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 33682:33682 -p 33683:33683 -p 33684:33684 -p 33685:33685 -p 33686:33686 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=33684 --rest-port=33682 --tcp-port=33683 --discv5-udp-port=33685 --rest-address=0.0.0.0 --nat=extip:172.18.64.101 --peer-exchange=true --discv5-discovery=true --cluster-id=5 --nodekey=e36959fe3adb52d042dca6d84c7dbe51cdcbf572e87acea9cf0bdb4ad93ede0e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=33686 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/5/1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.64.101 waku 640736332e52629496d7f0081f1c09713dbbd9a618f1d9e2bd70db6c11d1c18f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 640736332e52. Setting up logs at ./log/docker/node1_2024-08-16_07-38-08__747f9ab2-8abd-4204-b9a9-a27a10c4214b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 33682
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33682/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33682/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.64.101/tcp/33683/p2p/16Uiu2HAmDT1yQGz6Uh45B6P7GnuDHnMxGiQ7gRybLseSsYjm2WFZ","/ip4/172.18.64.101/tcp/33684/ws/p2p/16Uiu2HAmDT1yQGz6Uh45B6P7GnuDHnMxGiQ7gRybLseSsYjm2WFZ"],"enrUri":"enr:-LO4QHfpTqr18a__3SOTaNGTI2SPzeiZZKfZdWIzaEipAfe8CbMwJs_mZ6egIDBIMUaMXR4yRP5c96A1S_8-t0vym-IBgmlkgnY0gmlwhKwSQGWKbXVsdGlhZGRyc4wACgSsEkBlBoOU3QOCcnOFAAUBAAGJc2VjcDI1NmsxoQMLyo1K-WS6Jtwn9lS-NVnIVuBd_15o8rnaeEshSZDvSIN0Y3CCg5ODdWRwgoOVhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node2_2024-08-16_07-38-08__747f9ab2-8abd-4204-b9a9-a27a10c4214b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.6.212
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['33860', '33861', '33862', '33863', '33864']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:71 Cluster id was resolved to: 5
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 33860:33860 -p 33861:33861 -p 33862:33862 -p 33863:33863 -p 33864:33864 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=33862 --rest-port=33860 --tcp-port=33861 --discv5-udp-port=33863 --rest-address=0.0.0.0 --nat=extip:172.18.6.212 --peer-exchange=true --discv5-discovery=true --cluster-id=5 --nodekey=bf5682c84bca1aa8f0dcf9a90286c72feeb91184cdc43acc9defe9b365a7d2ea --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=33864 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QHfpTqr18a__3SOTaNGTI2SPzeiZZKfZdWIzaEipAfe8CbMwJs_mZ6egIDBIMUaMXR4yRP5c96A1S_8-t0vym-IBgmlkgnY0gmlwhKwSQGWKbXVsdGlhZGRyc4wACgSsEkBlBoOU3QOCcnOFAAUBAAGJc2VjcDI1NmsxoQMLyo1K-WS6Jtwn9lS-NVnIVuBd_15o8rnaeEshSZDvSIN0Y3CCg5ODdWRwgoOVhXdha3UyBQ --pubsub-topic=/waku/2/rs/5/1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.6.212 waku 2a1d4a1c64336e35b5bf607e9f04c00fc50eca4d16b3ded7925b1d01353982d2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 2a1d4a1c6433. Setting up logs at ./log/docker/node2_2024-08-16_07-38-08__747f9ab2-8abd-4204-b9a9-a27a10c4214b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 33860
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33860/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33860/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.6.212/tcp/33861/p2p/16Uiu2HAmJoUgG6XiiaXmiZC39Hc34yPAt3Z25Y97xeVDqBJ14Cjy","/ip4/172.18.6.212/tcp/33862/ws/p2p/16Uiu2HAmJoUgG6XiiaXmiZC39Hc34yPAt3Z25Y97xeVDqBJ14Cjy"],"enrUri":"enr:-LO4QBNzP2T0yDFP-wyp6zr891bATLiXhzN8jsh4ewRyY4kWdqa3nlHhFk0ZMX1QTaIvJ-Xq0dEfLddnz62h4p9cv38BgmlkgnY0gmlwhKwSBtSKbXVsdGlhZGRyc4wACgSsEgbUBoRG3QOCcnOFAAUBAAGJc2VjcDI1NmsxoQNbUswtwb4ecpif8ajjoPhN8FGYOll9hXUdUX7VQEbe4IN0Y3CChEWDdWRwgoRHhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33860/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.64.101/tcp/33683/p2p/16Uiu2HAmDT1yQGz6Uh45B6P7GnuDHnMxGiQ7gRybLseSsYjm2WFZ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33682/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/5/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33860/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/5/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33682/relay/v1/messages/%2Fwaku%2F2%2Frs%2F5%2F1" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33682/relay/v1/messages/%2Fwaku%2F2%2Frs%2F5%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1723793891260148480,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33860/relay/v1/messages/%2Fwaku%2F2%2Frs%2F5%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1723793891260148480,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 640736332e52
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 2a1d4a1c6433
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.