[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_relay_subscribe_to_single_pubsub_topic with id: 2024-08-16_07-34-22__42df00cf-10d6-4741-a41a-e431c1eafd10
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.relay:relay.py:34 Running fixture setup: setup_main_relay_nodes
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node1_2024-08-16_07-34-22__42df00cf-10d6-4741-a41a-e431c1eafd10__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.34.153
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['51683', '51684', '51685', '51686', '51687']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 51683:51683 -p 51684:51684 -p 51685:51685 -p 51686:51686 -p 51687:51687 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=51685 --rest-port=51683 --tcp-port=51684 --discv5-udp-port=51686 --rest-address=0.0.0.0 --nat=extip:172.18.34.153 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=feb60ecd87d29c5ffcfef5ae2afa1ae695ddebd92ae583dfd99a6682dbdaafa9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=51687 --metrics-logging=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.34.153 waku 7c143dc4d995513caef698138eac5213024e5187a3bb01bc8e9fdf38ad1d549e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 7c143dc4d995. Setting up logs at ./log/docker/node1_2024-08-16_07-34-22__42df00cf-10d6-4741-a41a-e431c1eafd10__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 51683
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51683/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51683/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.34.153/tcp/51684/p2p/16Uiu2HAmPWHF8ESrjFMWo57bL98dnDT5a1tPzdK4xQefMyTFXoCD","/ip4/172.18.34.153/tcp/51685/ws/p2p/16Uiu2HAmPWHF8ESrjFMWo57bL98dnDT5a1tPzdK4xQefMyTFXoCD"],"enrUri":"enr:-LO4QJSdmg9fREvlXlmXeEgpM2FyWDashXiNsfsKg1gvBXxwBHe0TZbGDIBi539bL4304USNG32ZkFXkAydaTMik4k0BgmlkgnY0gmlwhKwSIpmKbXVsdGlhZGRyc4wACgSsEiKZBsnl3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOhNW5CEvF_hsEFYmXU1IbUuLRrl6NyBnRM-4ejpksU0oN0Y3CCyeSDdWRwgsnmhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node2_2024-08-16_07-34-22__42df00cf-10d6-4741-a41a-e431c1eafd10__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.182.107
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['33480', '33481', '33482', '33483', '33484']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 33480:33480 -p 33481:33481 -p 33482:33482 -p 33483:33483 -p 33484:33484 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=33482 --rest-port=33480 --tcp-port=33481 --discv5-udp-port=33483 --rest-address=0.0.0.0 --nat=extip:172.18.182.107 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=570ee42251e53cef859d8bf79fc3deed4eeb08fdcc3207a3ec1da0b19f0dc2c0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=33484 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QJSdmg9fREvlXlmXeEgpM2FyWDashXiNsfsKg1gvBXxwBHe0TZbGDIBi539bL4304USNG32ZkFXkAydaTMik4k0BgmlkgnY0gmlwhKwSIpmKbXVsdGlhZGRyc4wACgSsEiKZBsnl3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOhNW5CEvF_hsEFYmXU1IbUuLRrl6NyBnRM-4ejpksU0oN0Y3CCyeSDdWRwgsnmhXdha3UyAQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.182.107 waku 2f71481b6d2be0867c0643385b9ea413dcf3de7d7fd0327154a4e60a4d0d3e71
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 2f71481b6d2b. Setting up logs at ./log/docker/node2_2024-08-16_07-34-22__42df00cf-10d6-4741-a41a-e431c1eafd10__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 33480
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33480/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33480/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.182.107/tcp/33481/p2p/16Uiu2HAmUY5XT4MhDnWGDaKHN4NWbv9QysTiM1kjkV5KqzumSHHr","/ip4/172.18.182.107/tcp/33482/ws/p2p/16Uiu2HAmUY5XT4MhDnWGDaKHN4NWbv9QysTiM1kjkV5KqzumSHHr"],"enrUri":"enr:-LO4QN7T5VIEjFNALWMnUiDV_350cOhOr7TVtWWM30lpA06QY_CXEZA5LJHXk6e0PaUL5wqWaWVcY49aJcgoVdK_SZcBgmlkgnY0gmlwhKwStmuKbXVsdGlhZGRyc4wACgSsErZrBoLK3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPr9cbY-4JPY5xb0ZSc2jINu70CxE77-SUV7YLsiD7FeYN0Y3CCgsmDdWRwgoLLhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33480/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.34.153/tcp/51684/p2p/16Uiu2HAmPWHF8ESrjFMWo57bL98dnDT5a1tPzdK4xQefMyTFXoCD"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51683/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33480/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51683/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.relay:relay.py:123 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51683/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1723793665751091456,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.relay:relay.py:123 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33480/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1723793665751091456,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 7c143dc4d995
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 2f71481b6d2b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.