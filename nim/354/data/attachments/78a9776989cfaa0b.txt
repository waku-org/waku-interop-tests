[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_missing_pubsub_topics with id: 2024-09-10_15-12-46__de3a0e76-c396-42ba-a5dd-9bf33a9d5848
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-10_15-12-46__de3a0e76-c396-42ba-a5dd-9bf33a9d5848__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.24.63
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['23182', '23183', '23184', '23185', '23186']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 23182:23182 -p 23183:23183 -p 23184:23184 -p 23185:23185 -p 23186:23186 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23184 --rest-port=23182 --tcp-port=23183 --discv5-udp-port=23185 --rest-address=0.0.0.0 --nat=extip:172.18.24.63 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b0fabd3def05f5983ffc5a2bdb8bff2ceb801fe959a250fce41a6b291bd8c945 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23186 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.24.63 waku 46cbe449a80ec088e0d0486a33a6c434d1deb519c4146479791a551ee211f2ee
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 46cbe449a80e. Setting up logs at ./log/docker/receiving_node1_2024-09-10_15-12-46__de3a0e76-c396-42ba-a5dd-9bf33a9d5848__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 23182
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23182/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23182/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.24.63/tcp/23183/p2p/16Uiu2HAkv2mMpSSCufNVRokXte1G4CRFrP86P8Xq1cf3GWSUmeCr","/ip4/172.18.24.63/tcp/23184/ws/p2p/16Uiu2HAkv2mMpSSCufNVRokXte1G4CRFrP86P8Xq1cf3GWSUmeCr"],"enrUri":"enr:-LO4QIJpoZGszehzcaJfumuTD5OkjsveA8_FhbNLKXCcVEo7EfZ3Xp7Awm5QWjqVxBW_qt0_jXV-vjW8fohB8WEQZJoBgmlkgnY0gmlwhKwSGD-KbXVsdGlhZGRyc4wACgSsEhg_BlqQ3QOCcnOFAAMBAACJc2VjcDI1NmsxoQII_WlFXA3dEJzcmFrJZfGtzpGz8EO89l7_crXqc9QB04N0Y3CCWo-DdWRwglqRhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-10_15-12-46__de3a0e76-c396-42ba-a5dd-9bf33a9d5848__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.202.41
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['44435', '44436', '44437', '44438', '44439']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 44435:44435 -p 44436:44436 -p 44437:44437 -p 44438:44438 -p 44439:44439 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44437 --rest-port=44435 --tcp-port=44436 --discv5-udp-port=44438 --rest-address=0.0.0.0 --nat=extip:172.18.202.41 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b3dc51a3f4cbd49c8afce7e1bc9bed9c7c22b93988cf1ca409a9b1fe1aacf3f9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44439 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.202.41 waku 975a9c3d2f5a47024af6060cb7e16b345194e4f6de0a755aa924bf43a1d5f18e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 975a9c3d2f5a. Setting up logs at ./log/docker/receiving_node2_2024-09-10_15-12-46__de3a0e76-c396-42ba-a5dd-9bf33a9d5848__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 44435
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44435/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44435/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.202.41/tcp/44436/p2p/16Uiu2HAkythkvE6WbuBahJygymScCanDmsjnLiJTssXp4NGx57hy","/ip4/172.18.202.41/tcp/44437/ws/p2p/16Uiu2HAkythkvE6WbuBahJygymScCanDmsjnLiJTssXp4NGx57hy"],"enrUri":"enr:-LO4QO5VYG2Su3srXkmvwS15YAkTnqb34a_9Sisbr0w4QxNpcSmYLaW-wJQIKyd4-4ShCpLCReQZzIhjWn-LBb3P370BgmlkgnY0gmlwhKwSyimKbXVsdGlhZGRyc4wACgSsEsopBq2V3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJCW3ChQt2GkGXGEexzEGZ451Ca6bVlcFhUekl4t8JpUIN0Y3CCrZSDdWRwgq2WhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44435/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.24.63/tcp/23183/p2p/16Uiu2HAkv2mMpSSCufNVRokXte1G4CRFrP86P8Xq1cf3GWSUmeCr"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-10_15-12-46__de3a0e76-c396-42ba-a5dd-9bf33a9d5848__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.206.245
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['2922', '2923', '2924', '2925', '2926']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 2922:2922 -p 2923:2923 -p 2924:2924 -p 2925:2925 -p 2926:2926 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2924 --rest-port=2922 --tcp-port=2923 --discv5-udp-port=2925 --rest-address=0.0.0.0 --nat=extip:172.18.206.245 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cf1d4ecfa0bab47ae70e5a02c9245efd4b78b8bfbeff5bc1cc24932ba588ef78 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2926 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QIJpoZGszehzcaJfumuTD5OkjsveA8_FhbNLKXCcVEo7EfZ3Xp7Awm5QWjqVxBW_qt0_jXV-vjW8fohB8WEQZJoBgmlkgnY0gmlwhKwSGD-KbXVsdGlhZGRyc4wACgSsEhg_BlqQ3QOCcnOFAAMBAACJc2VjcDI1NmsxoQII_WlFXA3dEJzcmFrJZfGtzpGz8EO89l7_crXqc9QB04N0Y3CCWo-DdWRwglqRhXdha3UyCQ --lightpushnode=/ip4/172.18.24.63/tcp/23183/p2p/16Uiu2HAkv2mMpSSCufNVRokXte1G4CRFrP86P8Xq1cf3GWSUmeCr --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.206.245 waku 27210b92b8190fb178a8289aca9a3e5f2ca6852d97af6eca078f4a313c44a06d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 27210b92b819. Setting up logs at ./log/docker/lightpush_node1_2024-09-10_15-12-46__de3a0e76-c396-42ba-a5dd-9bf33a9d5848__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 2922
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2922/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2922/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.206.245/tcp/2923/p2p/16Uiu2HAmGQhCKf9UW6h1HbzmzQCv7tty7sF7auft4YSfQwgPRBq4","/ip4/172.18.206.245/tcp/2924/ws/p2p/16Uiu2HAmGQhCKf9UW6h1HbzmzQCv7tty7sF7auft4YSfQwgPRBq4"],"enrUri":"enr:-LO4QDzVYSrfh0w7ugYzMLOpMt-Cj816Pezyp1FFbo2TCCGqZDvcmjYg-pI_yZMzoDvhcEO1tLth1vuXjDQdD4IiezsBgmlkgnY0gmlwhKwSzvWKbXVsdGlhZGRyc4wACgSsEs71Bgts3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3xTg3pUp6Og2r-OqClnPvSAKRq0sCS71l3fOTFZEDy4N0Y3CCC2uDdWRwggtthXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2922/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.24.63/tcp/23183/p2p/16Uiu2HAkv2mMpSSCufNVRokXte1G4CRFrP86P8Xq1cf3GWSUmeCr"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2922/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.202.41/tcp/44436/p2p/16Uiu2HAkythkvE6WbuBahJygymScCanDmsjnLiJTssXp4NGx57hy"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23182/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44435/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2922/lightpush/v1/message" -H "Content-Type: application/json" -d '{"message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1725981171341251328}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:2922/lightpush/v1/message. Response content: b'Failed to request a message push: Lightpush request has not been published to any peers. msg_hash: 0x02773007d1ebcf340545f72a94634c98c19049715007dc5ac471396506454b9f'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 46cbe449a80e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 975a9c3d2f5a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 27210b92b819
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.