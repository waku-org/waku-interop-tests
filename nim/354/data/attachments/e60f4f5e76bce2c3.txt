[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_update_subscription_with_invalid_request_id with id: 2024-09-10_15-09-52__7f3e4421-94cf-4586-9f82-ea7c06bbf3fa
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-10_15-09-52__7f3e4421-94cf-4586-9f82-ea7c06bbf3fa__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.107.214
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['8176', '8177', '8178', '8179', '8180']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 8176:8176 -p 8177:8177 -p 8178:8178 -p 8179:8179 -p 8180:8180 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8178 --rest-port=8176 --tcp-port=8177 --discv5-udp-port=8179 --rest-address=0.0.0.0 --nat=extip:172.18.107.214 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7a8aad1f1b7a5af84a4f4a4adc99aa2a83bbb3f31fd2ffe4e8a263b3c07bdb85 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8180 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.107.214 waku a12d8dad590cb45f56351d8a3c103a0655cf0fef39f112ca45879e821a594954
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID a12d8dad590c. Setting up logs at ./log/docker/node1_2024-09-10_15-09-52__7f3e4421-94cf-4586-9f82-ea7c06bbf3fa__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 8176
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8176/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8176/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.107.214/tcp/8177/p2p/16Uiu2HAkzqiaTXmsAJ8W9dNeDHaf5aw5HtqQgXUcLGwfFqJmmaJo","/ip4/172.18.107.214/tcp/8178/ws/p2p/16Uiu2HAkzqiaTXmsAJ8W9dNeDHaf5aw5HtqQgXUcLGwfFqJmmaJo"],"enrUri":"enr:-LO4QPtjjFV7QS5meaaKG_ofhWB24Jl7BqeVkINmv5lwrufaG2_VUQNkX2WbkHUKX5hzNxlD8edYe9ckQH-1zIXguYwBgmlkgnY0gmlwhKwSa9aKbXVsdGlhZGRyc4wACgSsEmvWBh_y3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJQc0-tibEmQbZBKShZtdpAxxAFjxOPl1r0zSSzaVDH7IN0Y3CCH_GDdWRwgh_zhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-10_15-09-52__7f3e4421-94cf-4586-9f82-ea7c06bbf3fa__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.177.187
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['44710', '44711', '44712', '44713', '44714']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 44710:44710 -p 44711:44711 -p 44712:44712 -p 44713:44713 -p 44714:44714 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44712 --rest-port=44710 --tcp-port=44711 --discv5-udp-port=44713 --rest-address=0.0.0.0 --nat=extip:172.18.177.187 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5808a0bce2a16045fcf50ceb99035cc96de8bd7b73a4df7d3dbce24e99e4c3cf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44714 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QPtjjFV7QS5meaaKG_ofhWB24Jl7BqeVkINmv5lwrufaG2_VUQNkX2WbkHUKX5hzNxlD8edYe9ckQH-1zIXguYwBgmlkgnY0gmlwhKwSa9aKbXVsdGlhZGRyc4wACgSsEmvWBh_y3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJQc0-tibEmQbZBKShZtdpAxxAFjxOPl1r0zSSzaVDH7IN0Y3CCH_GDdWRwgh_zhXdha3UyBQ --filternode=/ip4/172.18.107.214/tcp/8177/p2p/16Uiu2HAkzqiaTXmsAJ8W9dNeDHaf5aw5HtqQgXUcLGwfFqJmmaJo
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.177.187 waku 63b3d01e8d810fc15e3fa7c3fd6849c41230a3518a7fbec6cfd943786dccd485
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 63b3d01e8d81. Setting up logs at ./log/docker/node2_2024-09-10_15-09-52__7f3e4421-94cf-4586-9f82-ea7c06bbf3fa__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 44710
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44710/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44710/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.177.187/tcp/44711/p2p/16Uiu2HAmV3tzUXcamJ6HGJG314xTXWFr2dXXkTHBLNFWwDZbaH3u","/ip4/172.18.177.187/tcp/44712/ws/p2p/16Uiu2HAmV3tzUXcamJ6HGJG314xTXWFr2dXXkTHBLNFWwDZbaH3u"],"enrUri":"enr:-LO4QJlICauPX2a7t5o-HT2Nd8r5Ld7zvor0UiCr2MJCtyF6axmuzwWLSrG-3Hpov3emzI3i9nncYPoUqy4Ouj3QTioBgmlkgnY0gmlwhKwSsbuKbXVsdGlhZGRyc4wACgSsErG7Bq6o3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPzmUpGbJQQHcARPquxhbV1EFaAyBNmdOHCnPro97Z5MIN0Y3CCrqeDdWRwgq6phXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44710/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.107.214/tcp/8177/p2p/16Uiu2HAkzqiaTXmsAJ8W9dNeDHaf5aw5HtqQgXUcLGwfFqJmmaJo"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8176/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44710/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "a03c1fdf-f730-4c98-baa1-fbd2caa1df94", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"a03c1fdf-f730-4c98-baa1-fbd2caa1df94","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X PUT "http://127.0.0.1:44710/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": 1, "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:44710/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id a12d8dad590c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 63b3d01e8d81
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.