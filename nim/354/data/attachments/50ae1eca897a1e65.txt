[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_extra_field with id: 2024-09-10_15-13-24__fc46b613-00ad-4cad-ae9b-11f63b8e6a1d
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-10_15-13-24__fc46b613-00ad-4cad-ae9b-11f63b8e6a1d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.142.221
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['42544', '42545', '42546', '42547', '42548']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 42544:42544 -p 42545:42545 -p 42546:42546 -p 42547:42547 -p 42548:42548 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42546 --rest-port=42544 --tcp-port=42545 --discv5-udp-port=42547 --rest-address=0.0.0.0 --nat=extip:172.18.142.221 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cb3ea5aeaea7d39896ba1e8cf6b32e80adbcb99dbd598f2d64950fdfd9f51286 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42548 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.142.221 waku c7204ed59a85ac3655d16a564fbb6f55e4d756e629d77249433e77acef9bf8b4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID c7204ed59a85. Setting up logs at ./log/docker/receiving_node1_2024-09-10_15-13-24__fc46b613-00ad-4cad-ae9b-11f63b8e6a1d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 42544
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42544/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42544/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.142.221/tcp/42545/p2p/16Uiu2HAmRk8HLP7ZYPSLiy595THue3bFv15fZj5gueW8WbBPDd4v","/ip4/172.18.142.221/tcp/42546/ws/p2p/16Uiu2HAmRk8HLP7ZYPSLiy595THue3bFv15fZj5gueW8WbBPDd4v"],"enrUri":"enr:-LO4QOMm9EBawFWQ_ujKI_t5bv_hzcc7zAIVSAnr_2U1IOlkCWEWAog0NYA9yh0vCszGtdNs3TIzXlEbNrf-9nNFazABgmlkgnY0gmlwhKwSjt2KbXVsdGlhZGRyc4wACgSsEo7dBqYy3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPCeM14RaH1ReNzqHh4ZfAmKW3ew0YH84zm6maVO7ptc4N0Y3CCpjGDdWRwgqYzhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-10_15-13-24__fc46b613-00ad-4cad-ae9b-11f63b8e6a1d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.177.160
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['40800', '40801', '40802', '40803', '40804']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 40800:40800 -p 40801:40801 -p 40802:40802 -p 40803:40803 -p 40804:40804 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40802 --rest-port=40800 --tcp-port=40801 --discv5-udp-port=40803 --rest-address=0.0.0.0 --nat=extip:172.18.177.160 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cab0798cf7fa77f5dcbdcb2badecc3cd92affdb704cba6df10ed6cf9edb6c1cf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40804 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.177.160 waku abf155216c38524a25a7ff80713c514f8748cdf6c15b6da282b0685db02f65a1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID abf155216c38. Setting up logs at ./log/docker/receiving_node2_2024-09-10_15-13-24__fc46b613-00ad-4cad-ae9b-11f63b8e6a1d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 40800
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40800/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40800/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.177.160/tcp/40801/p2p/16Uiu2HAm4PpQwD6ryVYkeAd5ZJ45XgU93XLBq5VHujLR8j6MaFK5","/ip4/172.18.177.160/tcp/40802/ws/p2p/16Uiu2HAm4PpQwD6ryVYkeAd5ZJ45XgU93XLBq5VHujLR8j6MaFK5"],"enrUri":"enr:-LO4QIGus_IWGJHRI0QCFD0w9MVdTd2tS9auK6Cpv2YCekTyJb2nUVXSzfiV6Cyvk303q1JFDwuhrEh2MTPCkRYpKvcBgmlkgnY0gmlwhKwSsaCKbXVsdGlhZGRyc4wACgSsErGgBp9i3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKFP4517ykdxMFAw4dI8-Won1CRDrcppr-4pGl8pBQqmIN0Y3CCn2GDdWRwgp9jhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40800/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.142.221/tcp/42545/p2p/16Uiu2HAmRk8HLP7ZYPSLiy595THue3bFv15fZj5gueW8WbBPDd4v"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-10_15-13-24__fc46b613-00ad-4cad-ae9b-11f63b8e6a1d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.249.199
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['61415', '61416', '61417', '61418', '61419']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 61415:61415 -p 61416:61416 -p 61417:61417 -p 61418:61418 -p 61419:61419 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61417 --rest-port=61415 --tcp-port=61416 --discv5-udp-port=61418 --rest-address=0.0.0.0 --nat=extip:172.18.249.199 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5517d09cd873ea5bfedac51cfd953adf80708b5c0c3312792f4aecd6f7f44d07 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61419 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QOMm9EBawFWQ_ujKI_t5bv_hzcc7zAIVSAnr_2U1IOlkCWEWAog0NYA9yh0vCszGtdNs3TIzXlEbNrf-9nNFazABgmlkgnY0gmlwhKwSjt2KbXVsdGlhZGRyc4wACgSsEo7dBqYy3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPCeM14RaH1ReNzqHh4ZfAmKW3ew0YH84zm6maVO7ptc4N0Y3CCpjGDdWRwgqYzhXdha3UyCQ --lightpushnode=/ip4/172.18.142.221/tcp/42545/p2p/16Uiu2HAmRk8HLP7ZYPSLiy595THue3bFv15fZj5gueW8WbBPDd4v --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.249.199 waku 5299d2dd1a460c55ceeed552355b6d889b983a95a953eb732256ff555c583af7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 5299d2dd1a46. Setting up logs at ./log/docker/lightpush_node1_2024-09-10_15-13-24__fc46b613-00ad-4cad-ae9b-11f63b8e6a1d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 61415
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61415/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61415/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.249.199/tcp/61416/p2p/16Uiu2HAmUwnvfHp1nWwSjSmVL66pja5Zzg5DJ3qUJpxA6WrfEM7M","/ip4/172.18.249.199/tcp/61417/ws/p2p/16Uiu2HAmUwnvfHp1nWwSjSmVL66pja5Zzg5DJ3qUJpxA6WrfEM7M"],"enrUri":"enr:-LO4QFV8fvXtX86RUEo72S45JNPOYR9nxq29w3JwlN32EvENDKSTb1inE6Ba1TwI9yitp0bwANIS8zW3AEQvep2M5dkBgmlkgnY0gmlwhKwS-ceKbXVsdGlhZGRyc4wACgSsEvnHBu_p3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPyCPJa2a-QzSs7sQbxi4SflMT4IIGNJbjivljZL1qtCIN0Y3CC7-iDdWRwgu_qhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61415/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.142.221/tcp/42545/p2p/16Uiu2HAmRk8HLP7ZYPSLiy595THue3bFv15fZj5gueW8WbBPDd4v"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61415/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.177.160/tcp/40801/p2p/16Uiu2HAm4PpQwD6ryVYkeAd5ZJ45XgU93XLBq5VHujLR8j6MaFK5"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:42544/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40800/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61415/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1725981210168343296, "extraField": "extraValue"}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:61415/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id c7204ed59a85
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id abf155216c38
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 5299d2dd1a46
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.