[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_on_non_subscribed_pubsub_topic with id: 2024-09-10_15-12-32__85a48854-6a94-4a62-98a6-c9e71872e7d3
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-10_15-12-32__85a48854-6a94-4a62-98a6-c9e71872e7d3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.104.201
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['3123', '3124', '3125', '3126', '3127']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 3123:3123 -p 3124:3124 -p 3125:3125 -p 3126:3126 -p 3127:3127 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=3125 --rest-port=3123 --tcp-port=3124 --discv5-udp-port=3126 --rest-address=0.0.0.0 --nat=extip:172.18.104.201 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a6a14efb8dbea30bf1ddab9fc4e6d55b1c08a5fc1b4e89767f9a7aa62f9b1423 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=3127 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.104.201 waku b3640c30496b82affd24737540e5e50135ebe02ce32d1706a1db91b8097da2a1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID b3640c30496b. Setting up logs at ./log/docker/receiving_node1_2024-09-10_15-12-32__85a48854-6a94-4a62-98a6-c9e71872e7d3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 3123
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3123/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3123/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.104.201/tcp/3124/p2p/16Uiu2HAmTWKRqSaoQzHLwfQx4u7ycJPH1qMs6YB7L5sXWwhp6g9a","/ip4/172.18.104.201/tcp/3125/ws/p2p/16Uiu2HAmTWKRqSaoQzHLwfQx4u7ycJPH1qMs6YB7L5sXWwhp6g9a"],"enrUri":"enr:-LO4QDmdCln3wsqKnC09ExP9Yeo-aMdQWfOthoYKvq_4zkmvdIf74xXgzZZMYvvZheTK7XZ-gkg4fPFOm7ti1IqzFygBgmlkgnY0gmlwhKwSaMmKbXVsdGlhZGRyc4wACgSsEmjJBgw13QOCcnOFAAMBAACJc2VjcDI1NmsxoQPcpqYLM8BrM3GHD6fn-zRYDF6p51aOb-YqCnIk3xSIJYN0Y3CCDDSDdWRwggw2hXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-10_15-12-32__85a48854-6a94-4a62-98a6-c9e71872e7d3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.18.14
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['18803', '18804', '18805', '18806', '18807']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 18803:18803 -p 18804:18804 -p 18805:18805 -p 18806:18806 -p 18807:18807 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18805 --rest-port=18803 --tcp-port=18804 --discv5-udp-port=18806 --rest-address=0.0.0.0 --nat=extip:172.18.18.14 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ef17cd6bb18d2dac97e27afc3fc0ab9d2bbe095bf92d2c3f55bcdab64fd7edd6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18807 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.18.14 waku 70f64aca586667a3c3bb40178cc4b45dbf8cca0b06a6cbe6eae48cf9e33dc758
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 70f64aca5866. Setting up logs at ./log/docker/receiving_node2_2024-09-10_15-12-32__85a48854-6a94-4a62-98a6-c9e71872e7d3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 18803
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18803/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18803/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.18.14/tcp/18804/p2p/16Uiu2HAkwoTaFwNV4mh5r48ejg2EG2qzgBMyvkCYucqTyzKaAJiD","/ip4/172.18.18.14/tcp/18805/ws/p2p/16Uiu2HAkwoTaFwNV4mh5r48ejg2EG2qzgBMyvkCYucqTyzKaAJiD"],"enrUri":"enr:-LO4QOt4J70jkLBsx9MzxULj6Jxd5YazMM4GL1G058-i_d0Ybg0gA85uwNVPZ9jFsvXfaBohLEBOiHwmZp-1Bn52ycABgmlkgnY0gmlwhKwSEg6KbXVsdGlhZGRyc4wACgSsEhIOBkl13QOCcnOFAAMBAACJc2VjcDI1NmsxoQIjTB_YRSt7fyJI0OuZHeJa0pHDXhMvUzWRT7b7CtRusoN0Y3CCSXSDdWRwgkl2hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18803/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.104.201/tcp/3124/p2p/16Uiu2HAmTWKRqSaoQzHLwfQx4u7ycJPH1qMs6YB7L5sXWwhp6g9a"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-10_15-12-32__85a48854-6a94-4a62-98a6-c9e71872e7d3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.114.25
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['17087', '17088', '17089', '17090', '17091']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 17087:17087 -p 17088:17088 -p 17089:17089 -p 17090:17090 -p 17091:17091 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17089 --rest-port=17087 --tcp-port=17088 --discv5-udp-port=17090 --rest-address=0.0.0.0 --nat=extip:172.18.114.25 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3f58ba31bb86c01271de1dae1c5decc7fbd6d3c63c0b7bf2dc49fb3a1f05acd4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17091 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QDmdCln3wsqKnC09ExP9Yeo-aMdQWfOthoYKvq_4zkmvdIf74xXgzZZMYvvZheTK7XZ-gkg4fPFOm7ti1IqzFygBgmlkgnY0gmlwhKwSaMmKbXVsdGlhZGRyc4wACgSsEmjJBgw13QOCcnOFAAMBAACJc2VjcDI1NmsxoQPcpqYLM8BrM3GHD6fn-zRYDF6p51aOb-YqCnIk3xSIJYN0Y3CCDDSDdWRwggw2hXdha3UyCQ --lightpushnode=/ip4/172.18.104.201/tcp/3124/p2p/16Uiu2HAmTWKRqSaoQzHLwfQx4u7ycJPH1qMs6YB7L5sXWwhp6g9a --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.114.25 waku cadf6834ffe7b77f290f0ec53045eae8628a3d8ed66e2497b0c81d87dced1958
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID cadf6834ffe7. Setting up logs at ./log/docker/lightpush_node1_2024-09-10_15-12-32__85a48854-6a94-4a62-98a6-c9e71872e7d3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 17087
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17087/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17087/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.114.25/tcp/17088/p2p/16Uiu2HAkv77Sh873KULG2eiit3SoZzrCFgMkSEqt5r3BaKr8yLuw","/ip4/172.18.114.25/tcp/17089/ws/p2p/16Uiu2HAkv77Sh873KULG2eiit3SoZzrCFgMkSEqt5r3BaKr8yLuw"],"enrUri":"enr:-LO4QPBEMLUwyg4ZooSDUtqgJ121F7yNDH3IP7rKydKDUcVWWRj2BK6fEO3Cf9DpoNhirlJ2PwNGnlWz9wg4Ac6jFWEBgmlkgnY0gmlwhKwSchmKbXVsdGlhZGRyc4wACgSsEnIZBkLB3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIKGnGLuys48q_opScRFqdychiPhH9gu6DNUupx98GaeoN0Y3CCQsCDdWRwgkLChXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:17087/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.104.201/tcp/3124/p2p/16Uiu2HAmTWKRqSaoQzHLwfQx4u7ycJPH1qMs6YB7L5sXWwhp6g9a"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:17087/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.18.14/tcp/18804/p2p/16Uiu2HAkwoTaFwNV4mh5r48ejg2EG2qzgBMyvkCYucqTyzKaAJiD"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3123/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18803/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:17087/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1725981158106722304}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:17087/lightpush/v1/message. Response content: b'Failed to request a message push: Lightpush request has not been published to any peers. msg_hash: 0x263f46dd0d2323a7d8f9efb59dfe5c5c7175e370d7609e1c93986df1b9bd09ae'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id b3640c30496b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 70f64aca5866
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id cadf6834ffe7
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.