[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_lightpushed_message with id: 2024-10-27_04-31-00__58502a52-d6dc-4e1a-a4ac-466d98004601
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-10-27_04-31-00__58502a52-d6dc-4e1a-a4ac-466d98004601__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.188.163
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['17842', '17843', '17844', '17845', '17846']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 17842:17842 -p 17843:17843 -p 17844:17844 -p 17845:17845 -p 17846:17846 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17844 --rest-port=17842 --tcp-port=17843 --discv5-udp-port=17845 --rest-address=0.0.0.0 --nat=extip:172.18.188.163 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=efba53f9224b81dd8dac323c8df1dcc596e767a7c97ba7cbb1ddb21ffe16d173 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17846 --metrics-logging=true --store=true --relay=true --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.188.163 waku fc7038be163d74e3f54454c863795fb7a7944c064f4dc73172c268c432aaabd5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID fc7038be163d. Setting up logs at ./log/docker/publishing_node1_2024-10-27_04-31-00__58502a52-d6dc-4e1a-a4ac-466d98004601__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 17842
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container e7c202e7997a. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17842/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17842/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.188.163/tcp/17843/p2p/16Uiu2HAm6emefQ85Ur3H7nAVpXi5T6X45LzpmSi5EBHPDUoyhmr6","/ip4/172.18.188.163/tcp/17844/ws/p2p/16Uiu2HAm6emefQ85Ur3H7nAVpXi5T6X45LzpmSi5EBHPDUoyhmr6"],"enrUri":"enr:-LO4QBqrjI4QGYjzMe34bJoW_2ILYVcPqRECSN21XGr4bMKBd0PRdTJHFSDkGRx4t3Zx8vtmSS5nxJkAFJ84KInnANoBgmlkgnY0gmlwhKwSvKOKbXVsdGlhZGRyc4wACgSsEryjBkW03QOCcnOFAAMBAACJc2VjcDI1NmsxoQKmy4SaTYIgtKAD22b8Te1pp5E2_2nsDCl54N4kZSHuj4N0Y3CCRbODdWRwgkW1hXdha3UyCw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node2_2024-10-27_04-31-00__58502a52-d6dc-4e1a-a4ac-466d98004601__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.20.246
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['28550', '28551', '28552', '28553', '28554']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 28550:28550 -p 28551:28551 -p 28552:28552 -p 28553:28553 -p 28554:28554 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28552 --rest-port=28550 --tcp-port=28551 --discv5-udp-port=28553 --rest-address=0.0.0.0 --nat=extip:172.18.20.246 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=587cc3dfeb768441e0effbcd1ddabca915300b75b7eedee3fa86e5cbf7c24ebc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28554 --metrics-logging=true --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.20.246 waku fa1bae5f716d92d4a01b118a028c001a97d758b2e10d461885bba01ab5d66c08
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID fa1bae5f716d. Setting up logs at ./log/docker/publishing_node2_2024-10-27_04-31-00__58502a52-d6dc-4e1a-a4ac-466d98004601__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 28550
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28550/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28550/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.20.246/tcp/28551/p2p/16Uiu2HAm5YMVnrZenwYGFQmCouyHiLW1Cshxe4Hidxmj21oFwiox","/ip4/172.18.20.246/tcp/28552/ws/p2p/16Uiu2HAm5YMVnrZenwYGFQmCouyHiLW1Cshxe4Hidxmj21oFwiox"],"enrUri":"enr:-LO4QChkjeVUZPZjrE3xLXJk9ViRmzl5sONnE-V717SNCiauJ_NaPtlYvqaWzsJDsBqNEDhh6VtmhUphJ_f4rEzzMnYBgmlkgnY0gmlwhKwSFPaKbXVsdGlhZGRyc4wACgSsEhT2Bm-I3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKWSwlPKjT3QKmKKCrHBI80NSf1KMwFAqIqedSA65u794N0Y3CCb4eDdWRwgm-JhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28550/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.188.163/tcp/17843/p2p/16Uiu2HAm6emefQ85Ur3H7nAVpXi5T6X45LzpmSi5EBHPDUoyhmr6"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2024-10-27_04-31-00__58502a52-d6dc-4e1a-a4ac-466d98004601__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.23.176
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['9853', '9854', '9855', '9856', '9857']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 9853:9853 -p 9854:9854 -p 9855:9855 -p 9856:9856 -p 9857:9857 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=9855 --rest-port=9853 --tcp-port=9854 --discv5-udp-port=9856 --rest-address=0.0.0.0 --nat=extip:172.18.23.176 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f7a2fd5d9fc0e42cefd65cfff9dbcf08cdf7a500bfa21b85ffc6526a3e45d6e1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=9857 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QBqrjI4QGYjzMe34bJoW_2ILYVcPqRECSN21XGr4bMKBd0PRdTJHFSDkGRx4t3Zx8vtmSS5nxJkAFJ84KInnANoBgmlkgnY0gmlwhKwSvKOKbXVsdGlhZGRyc4wACgSsEryjBkW03QOCcnOFAAMBAACJc2VjcDI1NmsxoQKmy4SaTYIgtKAD22b8Te1pp5E2_2nsDCl54N4kZSHuj4N0Y3CCRbODdWRwgkW1hXdha3UyCw --storenode=/ip4/172.18.188.163/tcp/17843/p2p/16Uiu2HAm6emefQ85Ur3H7nAVpXi5T6X45LzpmSi5EBHPDUoyhmr6 --store=false --relay=false --lightpush=true --lightpushnode=/ip4/172.18.188.163/tcp/17843/p2p/16Uiu2HAm6emefQ85Ur3H7nAVpXi5T6X45LzpmSi5EBHPDUoyhmr6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.23.176 waku d9930779b3096c13ff848a7ad65ac09fc6fc51a57f880eb270a335faa4d4f613
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID d9930779b309. Setting up logs at ./log/docker/store_node1_2024-10-27_04-31-00__58502a52-d6dc-4e1a-a4ac-466d98004601__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 9853
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9853/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9853/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.23.176/tcp/9854/p2p/16Uiu2HAm5vPGGCWWErQSZNqkpWH6arPRjefUCmJ1WR286sXjFvvF","/ip4/172.18.23.176/tcp/9855/ws/p2p/16Uiu2HAm5vPGGCWWErQSZNqkpWH6arPRjefUCmJ1WR286sXjFvvF"],"enrUri":"enr:-LO4QPHuyCwPr1-dkKqICqGjAigN_g4TDQifsoR1x3AQB6NYAWBd2q1c3jQSssd9AFq2YAlrTPgOjSiUiWFwuLrulT8BgmlkgnY0gmlwhKwSF7CKbXVsdGlhZGRyc4wACgSsEhewBiZ_3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKb78_UUHmeamDuNTdFlICugsTDcoD7S7khPSprM6LWFIN0Y3CCJn6DdWRwgiaAhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9853/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.188.163/tcp/17843/p2p/16Uiu2HAm6emefQ85Ur3H7nAVpXi5T6X45LzpmSi5EBHPDUoyhmr6"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9853/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.20.246/tcp/28551/p2p/16Uiu2HAm5YMVnrZenwYGFQmCouyHiLW1Cshxe4Hidxmj21oFwiox"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:17842/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28550/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9853/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1730003465471068928}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17842/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"HXOnOmt1aecACM4cMVdCuOIX4gp7g8dkghIwZ4UCLtI="}]}'
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9853/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"f907cf1a63e7a26bca29","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"HXOnOmt1aecACM4cMVdCuOIX4gp7g8dkghIwZ4UCLtI="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id fc7038be163d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id fa1bae5f716d
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container fc7038be163d. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id d9930779b309
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container fa1bae5f716d. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.