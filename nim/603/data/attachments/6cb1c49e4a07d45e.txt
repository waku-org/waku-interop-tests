[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_pubsub_topics with id: 2025-01-05_04-12-37__95e2d8da-2cb7-43c3-a868-cafa3ee6b85b
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-01-05_04-12-37__95e2d8da-2cb7-43c3-a868-cafa3ee6b85b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.35.157
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['5854', '5855', '5856', '5857', '5858']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 5854:5854 -p 5855:5855 -p 5856:5856 -p 5857:5857 -p 5858:5858 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=5856 --rest-port=5854 --tcp-port=5855 --discv5-udp-port=5857 --rest-address=0.0.0.0 --nat=extip:172.18.35.157 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a4e4a45a70dbd6aaa32b4de2babcc9a9c2ba7acfc3a2ac2bcaeb5e78a0bbc0dc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=5858 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.35.157 waku b0f443db46b3137ebd98613c8b878d4dcc80c395b5849ef9b356952af68df2f5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID b0f443db46b3. Setting up logs at ./log/docker/receiving_node1_2025-01-05_04-12-37__95e2d8da-2cb7-43c3-a868-cafa3ee6b85b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 5854
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container a4fa198c528b. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5854/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5854/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.35.157/tcp/5855/p2p/16Uiu2HAm5t32AevtHToJDBpBWjzMdBfYwWQDS74hhSEJDz5LxKWC","/ip4/172.18.35.157/tcp/5856/ws/p2p/16Uiu2HAm5t32AevtHToJDBpBWjzMdBfYwWQDS74hhSEJDz5LxKWC"],"enrUri":"enr:-L24QMtR57E8LTCmvboPWnO1CqRFvgquOKSKgyP3drtrJRx9S1UUV9ftgzmLVYdkt67Z0_nKiwqyyiCCzNro9zZnBV0CgmlkgnY0gmlwhKwSI52KbXVsdGlhZGRyc5YACASsEiOdBhbfAAoErBIjnQYW4N0DgnJzhQADAQAAiXNlY3AyNTZrMaECm1XC5-f0pYg9F4x8chACbzBDs7wphM36yeRr_tFOaa2DdGNwghbfg3VkcIIW4YV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-01-05_04-12-37__95e2d8da-2cb7-43c3-a868-cafa3ee6b85b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.58.86
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['19682', '19683', '19684', '19685', '19686']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 19682:19682 -p 19683:19683 -p 19684:19684 -p 19685:19685 -p 19686:19686 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19684 --rest-port=19682 --tcp-port=19683 --discv5-udp-port=19685 --rest-address=0.0.0.0 --nat=extip:172.18.58.86 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cbfd1f7cde2c851daaceecbd8d5d6ce1cbe3a084b567e814edde2d9fae583bca --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19686 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.58.86 waku 5103d65903159c6ddbbf6fd84d0d6900a334ea13073c4712207d486b7c8894ae
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 5103d6590315. Setting up logs at ./log/docker/receiving_node2_2025-01-05_04-12-37__95e2d8da-2cb7-43c3-a868-cafa3ee6b85b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 19682
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19682/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19682/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.58.86/tcp/19683/p2p/16Uiu2HAkzKnaRM7ygFGKfr11Xvwh1hgEiaA2jn6vRNSBNQf8FWch","/ip4/172.18.58.86/tcp/19684/ws/p2p/16Uiu2HAkzKnaRM7ygFGKfr11Xvwh1hgEiaA2jn6vRNSBNQf8FWch"],"enrUri":"enr:-L24QIM6EbxZfNIrEdlw2RDUPqYeFNZ0cUnhIwFf9Aqq7OEHBwVp6zExwVjQe0HGOgOC7lhz3CLueuJ6LkUOTdzzuFICgmlkgnY0gmlwhKwSOlaKbXVsdGlhZGRyc5YACASsEjpWBkzjAAoErBI6VgZM5N0DgnJzhQADAQAAiXNlY3AyNTZrMaECSMhot37fk8d7sCtXdywW3RlJxycajs54rNwIE22HaMqDdGNwgkzjg3VkcIJM5YV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19682/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.35.157/tcp/5855/p2p/16Uiu2HAm5t32AevtHToJDBpBWjzMdBfYwWQDS74hhSEJDz5LxKWC"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-01-05_04-12-37__95e2d8da-2cb7-43c3-a868-cafa3ee6b85b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.41.135
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['39706', '39707', '39708', '39709', '39710']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 39706:39706 -p 39707:39707 -p 39708:39708 -p 39709:39709 -p 39710:39710 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39708 --rest-port=39706 --tcp-port=39707 --discv5-udp-port=39709 --rest-address=0.0.0.0 --nat=extip:172.18.41.135 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ab18dc2d0ce0e90ad80d22b8c2c71ddf3f709cdfee27bd155dfb7b6cdcb18a1b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39710 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QMtR57E8LTCmvboPWnO1CqRFvgquOKSKgyP3drtrJRx9S1UUV9ftgzmLVYdkt67Z0_nKiwqyyiCCzNro9zZnBV0CgmlkgnY0gmlwhKwSI52KbXVsdGlhZGRyc5YACASsEiOdBhbfAAoErBIjnQYW4N0DgnJzhQADAQAAiXNlY3AyNTZrMaECm1XC5-f0pYg9F4x8chACbzBDs7wphM36yeRr_tFOaa2DdGNwghbfg3VkcIIW4YV3YWt1Mgk --lightpushnode=/ip4/172.18.35.157/tcp/5855/p2p/16Uiu2HAm5t32AevtHToJDBpBWjzMdBfYwWQDS74hhSEJDz5LxKWC --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.41.135 waku 571521ac7bf3347cc4f646d509c392d2f32f3540d1a5546509c0f0f12d5acbe8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 571521ac7bf3. Setting up logs at ./log/docker/lightpush_node1_2025-01-05_04-12-37__95e2d8da-2cb7-43c3-a868-cafa3ee6b85b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 39706
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39706/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39706/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.41.135/tcp/39707/p2p/16Uiu2HAmJ4T2mPbA4xtVfKudi4wyp4BoFBKND9xyXh5Zx9gR4yHJ","/ip4/172.18.41.135/tcp/39708/ws/p2p/16Uiu2HAmJ4T2mPbA4xtVfKudi4wyp4BoFBKND9xyXh5Zx9gR4yHJ"],"enrUri":"enr:-L24QF3023FVKc3kNdKU5ovVIfGUN8HwzNVjEsnYQ4XUByNnVzSbcsuqbxgdWGWvvf0zopmgw2Xv1L35FcFGmHm3msACgmlkgnY0gmlwhKwSKYeKbXVsdGlhZGRyc5YACASsEimHBpsbAAoErBIphwabHN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDUEz2C_N06cCCCLx43LHX_LLdR_vOwIQsREGse-e7QmmDdGNwgpsbg3VkcIKbHYV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39706/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.35.157/tcp/5855/p2p/16Uiu2HAm5t32AevtHToJDBpBWjzMdBfYwWQDS74hhSEJDz5LxKWC"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39706/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.58.86/tcp/19683/p2p/16Uiu2HAkzKnaRM7ygFGKfr11Xvwh1hgEiaA2jn6vRNSBNQf8FWch"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5854/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19682/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A dictionary', 'value': {'key': 'YWFh'}}
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39706/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": {"key": "YWFh"}, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1736050361628342528}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:39706/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'An integer', 'value': 1234567890}
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39706/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": 1234567890, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1736050361636229376}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:39706/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A list', 'value': ['YWFh']}
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39706/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": ["YWFh"], "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1736050361640447232}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:39706/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A bool', 'value': True}
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39706/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": true, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1736050361643770624}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:39706/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id b0f443db46b3
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 5103d6590315
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container b0f443db46b3. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 571521ac7bf3
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 5103d6590315. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.