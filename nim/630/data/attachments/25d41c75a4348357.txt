[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_ephemeral with id: 2025-01-28_04-03-59__330d6eb1-ebb9-4400-9464-873221e0633d
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-01-28_04-03-59__330d6eb1-ebb9-4400-9464-873221e0633d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.85.10
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['25841', '25842', '25843', '25844', '25845']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 25841:25841 -p 25842:25842 -p 25843:25843 -p 25844:25844 -p 25845:25845 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25843 --rest-port=25841 --tcp-port=25842 --discv5-udp-port=25844 --rest-address=0.0.0.0 --nat=extip:172.18.85.10 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f93c6af6dcd7a430d090cd392aad18b2e4bcf6bd37bc83e4754c13dbb6fd961e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25845 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.85.10 waku ae8a7073f02c1df0ab63e1446e3fda511061ca60f50bd70d3259def97d41711a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ae8a7073f02c. Setting up logs at ./log/docker/receiving_node1_2025-01-28_04-03-59__330d6eb1-ebb9-4400-9464-873221e0633d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 25841
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 408596c9a6ea. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25841/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25841/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.85.10/tcp/25842/p2p/16Uiu2HAmR1YUNWmrcfbGu5amSrquewPzbTjsd8xuuFVchaKMhiBC","/ip4/172.18.85.10/tcp/25843/ws/p2p/16Uiu2HAmR1YUNWmrcfbGu5amSrquewPzbTjsd8xuuFVchaKMhiBC"],"enrUri":"enr:-L24QFXvjj4kRYiErZGNrhwI_al49yxokwb3oOS_Swv0k8ryQerLsg7SIrCBYX7NhSKzWW60X6SyehlE8MJzeW0ShbACgmlkgnY0gmlwhKwSVQqKbXVsdGlhZGRyc5YACASsElUKBmTyAAoErBJVCgZk890DgnJzhQADAQAAiXNlY3AyNTZrMaEDt5AuDCrX9Zxd5OfK1Q1ylee_2Xz-ERS_xWroRqLq4xODdGNwgmTyg3VkcIJk9IV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-01-28_04-03-59__330d6eb1-ebb9-4400-9464-873221e0633d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.174.101
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['27450', '27451', '27452', '27453', '27454']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 27450:27450 -p 27451:27451 -p 27452:27452 -p 27453:27453 -p 27454:27454 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27452 --rest-port=27450 --tcp-port=27451 --discv5-udp-port=27453 --rest-address=0.0.0.0 --nat=extip:172.18.174.101 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fb6df0feaa5f25b2465aa92beaf34fd5eafdf8da0533284dd5f5fdab85bd7dbd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27454 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.174.101 waku 0b7227be0baa77aef5e3a2bf5a65f829270393d876693e9dd1a72a5452ae7b55
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 0b7227be0baa. Setting up logs at ./log/docker/receiving_node2_2025-01-28_04-03-59__330d6eb1-ebb9-4400-9464-873221e0633d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 27450
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27450/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27450/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.174.101/tcp/27451/p2p/16Uiu2HAmGMeuxRRWVLuwktaJhjYZtqUgiaQaFPZ6sKbpkjJ8MD3j","/ip4/172.18.174.101/tcp/27452/ws/p2p/16Uiu2HAmGMeuxRRWVLuwktaJhjYZtqUgiaQaFPZ6sKbpkjJ8MD3j"],"enrUri":"enr:-L24QMi3ad6_KrtBysJ0GQpeCJAzBG28Jey7lFRek8Dgis3nUv6IxU2_GHIr74N14pTTgVWG1HWU_uASnU_tb7iqU2ICgmlkgnY0gmlwhKwSrmWKbXVsdGlhZGRyc5YACASsEq5lBms7AAoErBKuZQZrPN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDNv3ljq5bS9ijTUWP19-xCn9t4gNKzLhZI1ua-Mz4SX6DdGNwgms7g3VkcIJrPYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27450/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.85.10/tcp/25842/p2p/16Uiu2HAmR1YUNWmrcfbGu5amSrquewPzbTjsd8xuuFVchaKMhiBC"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-01-28_04-03-59__330d6eb1-ebb9-4400-9464-873221e0633d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.190.219
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['48227', '48228', '48229', '48230', '48231']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 48227:48227 -p 48228:48228 -p 48229:48229 -p 48230:48230 -p 48231:48231 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=48229 --rest-port=48227 --tcp-port=48228 --discv5-udp-port=48230 --rest-address=0.0.0.0 --nat=extip:172.18.190.219 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2b83eba6aeea835efb42bade6e0d5a213ed4ad2d9d45f08edb48a066e19dd3bc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=48231 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QFXvjj4kRYiErZGNrhwI_al49yxokwb3oOS_Swv0k8ryQerLsg7SIrCBYX7NhSKzWW60X6SyehlE8MJzeW0ShbACgmlkgnY0gmlwhKwSVQqKbXVsdGlhZGRyc5YACASsElUKBmTyAAoErBJVCgZk890DgnJzhQADAQAAiXNlY3AyNTZrMaEDt5AuDCrX9Zxd5OfK1Q1ylee_2Xz-ERS_xWroRqLq4xODdGNwgmTyg3VkcIJk9IV3YWt1Mgk --lightpushnode=/ip4/172.18.85.10/tcp/25842/p2p/16Uiu2HAmR1YUNWmrcfbGu5amSrquewPzbTjsd8xuuFVchaKMhiBC --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.190.219 waku e4fe06ecc92ff0bfa2044350e592b453202270b261214d60908bb127fe9b405c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID e4fe06ecc92f. Setting up logs at ./log/docker/lightpush_node1_2025-01-28_04-03-59__330d6eb1-ebb9-4400-9464-873221e0633d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 48227
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48227/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48227/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.190.219/tcp/48228/p2p/16Uiu2HAmUmvUbGqfUo4WYtopPwnpUht9G9oUyPs73h571yKwCGir","/ip4/172.18.190.219/tcp/48229/ws/p2p/16Uiu2HAmUmvUbGqfUo4WYtopPwnpUht9G9oUyPs73h571yKwCGir"],"enrUri":"enr:-L24QF1xr9qU81y6NzLpdltxKDv6uuUgdz-6iF0YwH5AZwcebfHHHj6RS6LKL7EmJKxCtYdO8gYzLVFHfqziBkxXvE4CgmlkgnY0gmlwhKwSvtuKbXVsdGlhZGRyc5YACASsEr7bBrxkAAoErBK-2wa8Zd0DgnJzhQADAQAAiXNlY3AyNTZrMaED74GtD58Z8KjPx8A50pTmNGNyY6B7167VDzEROEl58O-DdGNwgrxkg3VkcIK8ZoV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48227/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.85.10/tcp/25842/p2p/16Uiu2HAmR1YUNWmrcfbGu5amSrquewPzbTjsd8xuuFVchaKMhiBC"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48227/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.174.101/tcp/27451/p2p/16Uiu2HAmGMeuxRRWVLuwktaJhjYZtqUgiaQaFPZ6sKbpkjJ8MD3j"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25841/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27450/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:214 Running test with Ephemeral True
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48227/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738037043111302656, "ephemeral": true}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25841/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738037043111302656,"ephemeral":true}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27450/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738037043111302656,"ephemeral":true}]'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:214 Running test with Ephemeral False
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48227/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738037043232141056, "ephemeral": false}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25841/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738037043232141056,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27450/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738037043232141056,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id ae8a7073f02c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 0b7227be0baa
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container ae8a7073f02c. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id e4fe06ecc92f
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 0b7227be0baa. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.