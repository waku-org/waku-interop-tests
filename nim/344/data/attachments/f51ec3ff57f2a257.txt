[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_ping_on_unsubscribed_peer with id: 2024-09-04_04-17-03__d3d2a105-8e26-45fe-a57b-6e8953600de6
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-04_04-17-03__d3d2a105-8e26-45fe-a57b-6e8953600de6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.58.69
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['48539', '48540', '48541', '48542', '48543']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 48539:48539 -p 48540:48540 -p 48541:48541 -p 48542:48542 -p 48543:48543 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=48541 --rest-port=48539 --tcp-port=48540 --discv5-udp-port=48542 --rest-address=0.0.0.0 --nat=extip:172.18.58.69 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5afc1dbf24da02cd2f24c893ad065e0ff9b9e5bba3bde66cd7aaedd5aa9aeaaf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=48543 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.58.69 waku 70c60a8bee4174d9e1d603edb91cfcd0efb306a5367c273dd712956c0a02b692
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 70c60a8bee41. Setting up logs at ./log/docker/node1_2024-09-04_04-17-03__d3d2a105-8e26-45fe-a57b-6e8953600de6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 48539
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48539/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48539/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.58.69/tcp/48540/p2p/16Uiu2HAm65Q6MWQ5y9ckNYJ2tfvywQyRF2ut9YJ1CW5ZvJWc6w7D","/ip4/172.18.58.69/tcp/48541/ws/p2p/16Uiu2HAm65Q6MWQ5y9ckNYJ2tfvywQyRF2ut9YJ1CW5ZvJWc6w7D"],"enrUri":"enr:-LO4QCUZMXfwIVExeQWaejF-sd9d7S_bGDzQcNtQVfckNqF_KAx0pVmRNn7AiD20LaG1l-z-rgKtP0MLL2eGlwFSRdIBgmlkgnY0gmlwhKwSOkWKbXVsdGlhZGRyc4wACgSsEjpFBr2d3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKePvoGABbsXGB06-LEzDlR9kuM23AHw8tznxHTOgTw2IN0Y3CCvZyDdWRwgr2ehXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-04_04-17-03__d3d2a105-8e26-45fe-a57b-6e8953600de6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.54.18
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['31412', '31413', '31414', '31415', '31416']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 31412:31412 -p 31413:31413 -p 31414:31414 -p 31415:31415 -p 31416:31416 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=31414 --rest-port=31412 --tcp-port=31413 --discv5-udp-port=31415 --rest-address=0.0.0.0 --nat=extip:172.18.54.18 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cbb1b5dad29c23fa5ae65a445781b68ce5a5c614e42f1f2b6b4d249fb6a90082 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=31416 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QCUZMXfwIVExeQWaejF-sd9d7S_bGDzQcNtQVfckNqF_KAx0pVmRNn7AiD20LaG1l-z-rgKtP0MLL2eGlwFSRdIBgmlkgnY0gmlwhKwSOkWKbXVsdGlhZGRyc4wACgSsEjpFBr2d3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKePvoGABbsXGB06-LEzDlR9kuM23AHw8tznxHTOgTw2IN0Y3CCvZyDdWRwgr2ehXdha3UyBQ --filternode=/ip4/172.18.58.69/tcp/48540/p2p/16Uiu2HAm65Q6MWQ5y9ckNYJ2tfvywQyRF2ut9YJ1CW5ZvJWc6w7D
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.54.18 waku 173208ca071a705a588d841f3e9c83e8faae3f8ecb184fc3588276e72c62b3b3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 173208ca071a. Setting up logs at ./log/docker/node2_2024-09-04_04-17-03__d3d2a105-8e26-45fe-a57b-6e8953600de6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 31412
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31412/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31412/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.54.18/tcp/31413/p2p/16Uiu2HAmJ72WCnVWk68Ut4wEckDNjJ8YX6aDiyNUoazq8rR53tFN","/ip4/172.18.54.18/tcp/31414/ws/p2p/16Uiu2HAmJ72WCnVWk68Ut4wEckDNjJ8YX6aDiyNUoazq8rR53tFN"],"enrUri":"enr:-LO4QHlplca9s1TZaD4f0-aPKafBeYrJTqXucM-mh_2ZwpusDG8P322y3q1Kq8BY2YUDdip8YFKOrW6i1kb2OBSI4-ABgmlkgnY0gmlwhKwSNhKKbXVsdGlhZGRyc4wACgSsEjYSBnq23QOCcnOFAAMBAACJc2VjcDI1NmsxoQNQ9fiJ7rKzgyJBdmYKKkjA0nlJYxlQfQxFB86Sr7RKvYN0Y3CCerWDdWRwgnq3hXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31412/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.58.69/tcp/48540/p2p/16Uiu2HAm65Q6MWQ5y9ckNYJ2tfvywQyRF2ut9YJ1CW5ZvJWc6w7D"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48539/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31412/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "79f99073-f057-4ffc-8891-c7ab940a27bd", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"79f99073-f057-4ffc-8891-c7ab940a27bd","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31412/filter/v2/subscriptions/d1b52931-37a8-427f-8e73-41f07635e375" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"d1b52931-37a8-427f-8e73-41f07635e375","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X DELETE "http://127.0.0.1:31412/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "12345", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"12345","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31412/filter/v2/subscriptions/01bf9e65-536a-4a14-b076-68603d5ed469" -H "Content-Type: application/json" -d 'None'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:31412/filter/v2/subscriptions/01bf9e65-536a-4a14-b076-68603d5ed469. Response content: b'{"requestId":"01bf9e65-536a-4a14-b076-68603d5ed469","statusDesc":"NOT_FOUND: peer has no subscriptions"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 70c60a8bee41
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 173208ca071a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.