[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_update_subscription_with_no_request_id with id: 2024-09-04_04-18-34__ca555338-844a-4731-ac3a-c0ed90edd3c7
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-04_04-18-34__ca555338-844a-4731-ac3a-c0ed90edd3c7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.222.213
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['5308', '5309', '5310', '5311', '5312']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 5308:5308 -p 5309:5309 -p 5310:5310 -p 5311:5311 -p 5312:5312 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=5310 --rest-port=5308 --tcp-port=5309 --discv5-udp-port=5311 --rest-address=0.0.0.0 --nat=extip:172.18.222.213 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bf230ff17e411ff2e3af3d7e74b8afddedbb0fd3db6deb74e70f3ba347139edb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=5312 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.222.213 waku 52a07d0bb1cf5d44bc10e93af8554130da68f611f640166c0aff01709d1285c5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 52a07d0bb1cf. Setting up logs at ./log/docker/node1_2024-09-04_04-18-34__ca555338-844a-4731-ac3a-c0ed90edd3c7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 5308
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5308/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5308/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.222.213/tcp/5309/p2p/16Uiu2HAm9PPEx6cLwTQMXytb3gKK3b4ph5XHPM3bGKZtUJ3BZ8TM","/ip4/172.18.222.213/tcp/5310/ws/p2p/16Uiu2HAm9PPEx6cLwTQMXytb3gKK3b4ph5XHPM3bGKZtUJ3BZ8TM"],"enrUri":"enr:-LO4QGQQ1dESfcor7FNpClOnDOZvm8fPsmzMfwGmoY2NKIuwUyL7nk9gEecoO2ogVyanr_lZSAF0NUVWBAMDU8i9kPUBgmlkgnY0gmlwhKwS3tWKbXVsdGlhZGRyc4wACgSsEt7VBhS-3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLPbYdkkRrjrKKDe__mMfDFPLX112fe_IauglqGPSTtlIN0Y3CCFL2DdWRwghS_hXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-04_04-18-34__ca555338-844a-4731-ac3a-c0ed90edd3c7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.210.201
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['32117', '32118', '32119', '32120', '32121']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 32117:32117 -p 32118:32118 -p 32119:32119 -p 32120:32120 -p 32121:32121 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32119 --rest-port=32117 --tcp-port=32118 --discv5-udp-port=32120 --rest-address=0.0.0.0 --nat=extip:172.18.210.201 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=df82f5c55c7abaff21ab40cfe3759c286c7e486e5b03eafe39b195eace6bb8bc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32121 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QGQQ1dESfcor7FNpClOnDOZvm8fPsmzMfwGmoY2NKIuwUyL7nk9gEecoO2ogVyanr_lZSAF0NUVWBAMDU8i9kPUBgmlkgnY0gmlwhKwS3tWKbXVsdGlhZGRyc4wACgSsEt7VBhS-3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLPbYdkkRrjrKKDe__mMfDFPLX112fe_IauglqGPSTtlIN0Y3CCFL2DdWRwghS_hXdha3UyBQ --filternode=/ip4/172.18.222.213/tcp/5309/p2p/16Uiu2HAm9PPEx6cLwTQMXytb3gKK3b4ph5XHPM3bGKZtUJ3BZ8TM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.210.201 waku 3455166a109d53263ead5571ac43fa92dbb4f2ee8181cda1b028bed5597cfed8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 3455166a109d. Setting up logs at ./log/docker/node2_2024-09-04_04-18-34__ca555338-844a-4731-ac3a-c0ed90edd3c7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 32117
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32117/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32117/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.210.201/tcp/32118/p2p/16Uiu2HAmHS8strQPA2GJGgDdGFed7TsL1BtydhmqUJb9iXBYDGR9","/ip4/172.18.210.201/tcp/32119/ws/p2p/16Uiu2HAmHS8strQPA2GJGgDdGFed7TsL1BtydhmqUJb9iXBYDGR9"],"enrUri":"enr:-LO4QLbVS0nF6ZUaeNdngMBgson7yVGM45y-JKoz9tEJylW-SOFYB_imR5PXHDGhaNK2IQ-d8a8OSiafeqqxBSoK6PABgmlkgnY0gmlwhKwS0smKbXVsdGlhZGRyc4wACgSsEtLJBn133QOCcnOFAAMBAACJc2VjcDI1NmsxoQNG_4bBALC-tOKkymbU1Ck2bortC_OtGZI4GK7ylrozpIN0Y3CCfXaDdWRwgn14hXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32117/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.222.213/tcp/5309/p2p/16Uiu2HAm9PPEx6cLwTQMXytb3gKK3b4ph5XHPM3bGKZtUJ3BZ8TM"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5308/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32117/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "8cb524d7-16cb-4074-b1bd-4d3549962c9b", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"8cb524d7-16cb-4074-b1bd-4d3549962c9b","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X PUT "http://127.0.0.1:32117/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:32117/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 52a07d0bb1cf
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 3455166a109d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.