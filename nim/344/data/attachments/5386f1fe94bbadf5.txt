[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_on_non_subscribed_pubsub_topic with id: 2024-09-04_04-21-11__73ab7f47-4735-4218-849d-13b245d7ae5b
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-04_04-21-11__73ab7f47-4735-4218-849d-13b245d7ae5b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.74.19
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['57818', '57819', '57820', '57821', '57822']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 57818:57818 -p 57819:57819 -p 57820:57820 -p 57821:57821 -p 57822:57822 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57820 --rest-port=57818 --tcp-port=57819 --discv5-udp-port=57821 --rest-address=0.0.0.0 --nat=extip:172.18.74.19 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c9ab304d0a8ce46cc3b3edffc9f04a27df1d6e44bdfad7cd82e3fcadb462760c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57822 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.74.19 waku cc3fc2f4bc4a91521019062db0ed5cd24ed0ec7057fd3da2f10eb004252bf7b5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID cc3fc2f4bc4a. Setting up logs at ./log/docker/receiving_node1_2024-09-04_04-21-11__73ab7f47-4735-4218-849d-13b245d7ae5b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 57818
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57818/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57818/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.74.19/tcp/57819/p2p/16Uiu2HAmG9ioS4Bu41xd2bw2FU9UqDfVL8DiPmNgBSLFnDG3T1g6","/ip4/172.18.74.19/tcp/57820/ws/p2p/16Uiu2HAmG9ioS4Bu41xd2bw2FU9UqDfVL8DiPmNgBSLFnDG3T1g6"],"enrUri":"enr:-LO4QMkUmsY6Iijk5txDtO5yNi0WyWx_b-CmyXHYejLwzToeKrUABA_snvWUduFhdRGuXtECXxQcxcaV6mBZfa0esboBgmlkgnY0gmlwhKwSShOKbXVsdGlhZGRyc4wACgSsEkoTBuHc3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMz71KYZo5n_7cmVoNQqEOPGnc6Tlh5SpsQ_-D9AAOy64N0Y3CC4duDdWRwguHdhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-04_04-21-11__73ab7f47-4735-4218-849d-13b245d7ae5b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.188.223
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['41539', '41540', '41541', '41542', '41543']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 41539:41539 -p 41540:41540 -p 41541:41541 -p 41542:41542 -p 41543:41543 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=41541 --rest-port=41539 --tcp-port=41540 --discv5-udp-port=41542 --rest-address=0.0.0.0 --nat=extip:172.18.188.223 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d7ac681bcd63b6b890a0da3e9e72eacb4deccb054c2ca92d5a8fdfcd8a11b74f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=41543 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.188.223 waku 61dd4eeef0806767086ba3f9a2ffc99ca2a60bea9711a3c64ddaf4a082408710
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 61dd4eeef080. Setting up logs at ./log/docker/receiving_node2_2024-09-04_04-21-11__73ab7f47-4735-4218-849d-13b245d7ae5b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 41539
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41539/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41539/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.188.223/tcp/41540/p2p/16Uiu2HAmCnieV7T1JcwowE8hCPZHN863dD6tiYbUkGfvpjjn5yFN","/ip4/172.18.188.223/tcp/41541/ws/p2p/16Uiu2HAmCnieV7T1JcwowE8hCPZHN863dD6tiYbUkGfvpjjn5yFN"],"enrUri":"enr:-LO4QIbvCkk2AXXi1ZufSPJh90L9irCcE8jSazIFxaJRLu2iDi45qDA3LK4_iFqt7BRf2PgtnyrbkxVAgiEHpK7l5IoBgmlkgnY0gmlwhKwSvN-KbXVsdGlhZGRyc4wACgSsErzfBqJF3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMB-uPz-mD7QYlgI20fpIAbbQuBCN2GHuIgBj8b8eiM0YN0Y3CCokSDdWRwgqJGhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41539/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.74.19/tcp/57819/p2p/16Uiu2HAmG9ioS4Bu41xd2bw2FU9UqDfVL8DiPmNgBSLFnDG3T1g6"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-04_04-21-11__73ab7f47-4735-4218-849d-13b245d7ae5b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.64.164
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['34631', '34632', '34633', '34634', '34635']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 34631:34631 -p 34632:34632 -p 34633:34633 -p 34634:34634 -p 34635:34635 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34633 --rest-port=34631 --tcp-port=34632 --discv5-udp-port=34634 --rest-address=0.0.0.0 --nat=extip:172.18.64.164 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=79e2b574af9defee7ad7019bf0a447ab0ff529bccdc0adb1fd0ae4e6eb56fae8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34635 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QMkUmsY6Iijk5txDtO5yNi0WyWx_b-CmyXHYejLwzToeKrUABA_snvWUduFhdRGuXtECXxQcxcaV6mBZfa0esboBgmlkgnY0gmlwhKwSShOKbXVsdGlhZGRyc4wACgSsEkoTBuHc3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMz71KYZo5n_7cmVoNQqEOPGnc6Tlh5SpsQ_-D9AAOy64N0Y3CC4duDdWRwguHdhXdha3UyCQ --lightpushnode=/ip4/172.18.74.19/tcp/57819/p2p/16Uiu2HAmG9ioS4Bu41xd2bw2FU9UqDfVL8DiPmNgBSLFnDG3T1g6 --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.64.164 waku 3b004a6ce4d1288ed7eec1941486d8b6d8d45372a86cd4e991f539f2e54f79da
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 3b004a6ce4d1. Setting up logs at ./log/docker/lightpush_node1_2024-09-04_04-21-11__73ab7f47-4735-4218-849d-13b245d7ae5b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 34631
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34631/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34631/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.64.164/tcp/34632/p2p/16Uiu2HAmUeZfKMoeTzne4BXS4GyQKJQDiosdboH4UMGpVwRFHcRS","/ip4/172.18.64.164/tcp/34633/ws/p2p/16Uiu2HAmUeZfKMoeTzne4BXS4GyQKJQDiosdboH4UMGpVwRFHcRS"],"enrUri":"enr:-LO4QCinylAOcTc5ZL6UyuHKcqdcoezbLlka2wwqFJBjgyjdIO2bo8mK1YKj3szRB_FG5AP-oF-l0jeQxD4AG6GeYlwBgmlkgnY0gmlwhKwSQKSKbXVsdGlhZGRyc4wACgSsEkCkBodJ3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPtnxMd53UPoUjhbsL55d8qY5CNZai8s1HVWFqOS-cWVYN0Y3CCh0iDdWRwgodKhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34631/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.74.19/tcp/57819/p2p/16Uiu2HAmG9ioS4Bu41xd2bw2FU9UqDfVL8DiPmNgBSLFnDG3T1g6"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34631/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.188.223/tcp/41540/p2p/16Uiu2HAmCnieV7T1JcwowE8hCPZHN863dD6tiYbUkGfvpjjn5yFN"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57818/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41539/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34631/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1725423676804834560}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:34631/lightpush/v1/message. Response content: b'Failed to request a message push: Lightpush request has not been published to any peers. msg_hash: 0xc74550d06c83492442b9cf3e6283566aea0fbad9168547fd279b64cc71d8fd85'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id cc3fc2f4bc4a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 61dd4eeef080
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 3b004a6ce4d1
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.