[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_subscribe_to_pubsub_topics_from_multiple_clusters with id: 2024-09-04_04-17-30__0db17b78-dfa5-42a3-a8fd-00abfad848f6
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-04_04-17-30__0db17b78-dfa5-42a3-a8fd-00abfad848f6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.49.255
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['30113', '30114', '30115', '30116', '30117']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 30113:30113 -p 30114:30114 -p 30115:30115 -p 30116:30116 -p 30117:30117 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=30115 --rest-port=30113 --tcp-port=30114 --discv5-udp-port=30116 --rest-address=0.0.0.0 --nat=extip:172.18.49.255 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fffd4d2b8efb84a721cdac46dab9f54d423076af03f203fdb253c8d2ffcc7988 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=30117 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.49.255 waku e48a97da750ef2444b65b93c7a1d7d4b8a9781006602795706fc56abce1dcc40
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID e48a97da750e. Setting up logs at ./log/docker/node1_2024-09-04_04-17-30__0db17b78-dfa5-42a3-a8fd-00abfad848f6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 30113
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30113/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30113/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.49.255/tcp/30114/p2p/16Uiu2HAmRSWwtu9aRphE15eqrTcSvdVbqSM7cUwf3JuRKp9M979n","/ip4/172.18.49.255/tcp/30115/ws/p2p/16Uiu2HAmRSWwtu9aRphE15eqrTcSvdVbqSM7cUwf3JuRKp9M979n"],"enrUri":"enr:-LO4QEF9Xt-aA8sUNkt7lVlvZidnPaq_DP_5uazt0W6M7FSrfCsHtdp4Fys_xP8vH2ZTINQrd1Ob1kTMni1VyvNg388BgmlkgnY0gmlwhKwSMf-KbXVsdGlhZGRyc4wACgSsEjH_BnWj3QOCcnOFAAMBAACJc2VjcDI1NmsxoQO99fmrKyqa_sjwDaFSCBW1b_ufLE-XoafbAR7TpGLLFYN0Y3CCdaKDdWRwgnWkhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-04_04-17-30__0db17b78-dfa5-42a3-a8fd-00abfad848f6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.9.126
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['34181', '34182', '34183', '34184', '34185']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 34181:34181 -p 34182:34182 -p 34183:34183 -p 34184:34184 -p 34185:34185 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34183 --rest-port=34181 --tcp-port=34182 --discv5-udp-port=34184 --rest-address=0.0.0.0 --nat=extip:172.18.9.126 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=abe590b668b119dba793e9d1fa8efcff8fcbc9a8a7ceda7fbb4b098c5bcef5a2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34185 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QEF9Xt-aA8sUNkt7lVlvZidnPaq_DP_5uazt0W6M7FSrfCsHtdp4Fys_xP8vH2ZTINQrd1Ob1kTMni1VyvNg388BgmlkgnY0gmlwhKwSMf-KbXVsdGlhZGRyc4wACgSsEjH_BnWj3QOCcnOFAAMBAACJc2VjcDI1NmsxoQO99fmrKyqa_sjwDaFSCBW1b_ufLE-XoafbAR7TpGLLFYN0Y3CCdaKDdWRwgnWkhXdha3UyBQ --filternode=/ip4/172.18.49.255/tcp/30114/p2p/16Uiu2HAmRSWwtu9aRphE15eqrTcSvdVbqSM7cUwf3JuRKp9M979n
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.9.126 waku 23a56ec14228ee31c2b557a911a85d0165e407a8840042a2117074a4753c1b66
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 23a56ec14228. Setting up logs at ./log/docker/node2_2024-09-04_04-17-30__0db17b78-dfa5-42a3-a8fd-00abfad848f6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 34181
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34181/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34181/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.9.126/tcp/34182/p2p/16Uiu2HAmSwiRvRf8TbNK4XrBTqdZNz7vZFWADLb7SmTA7ifAApht","/ip4/172.18.9.126/tcp/34183/ws/p2p/16Uiu2HAmSwiRvRf8TbNK4XrBTqdZNz7vZFWADLb7SmTA7ifAApht"],"enrUri":"enr:-LO4QHn5Z27lvvg_gQGv2jp8bDKYg7RiOHZ9LVyTeTZOVBunOV5A0D-9UbBvpSYSUlWyw2wpGRMBv17Oq5XHAotUHbMBgmlkgnY0gmlwhKwSCX6KbXVsdGlhZGRyc4wACgSsEgl-BoWH3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPUTH1hYFj3lot-deKnxRLsTiz82OZnkXzXSgJyPTXt14N0Y3CChYaDdWRwgoWIhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34181/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.49.255/tcp/30114/p2p/16Uiu2HAmRSWwtu9aRphE15eqrTcSvdVbqSM7cUwf3JuRKp9M979n"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.filter.test_subscribe_create:test_subscribe_create.py:41 Running test with pubsub topic: /waku/2/rs/3/1
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30113/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34181/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "07ceae0d-2236-4460-842a-1ff72e1f64ee", "contentFilters": ["/waku/2/rs/3/1"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"07ceae0d-2236-4460-842a-1ff72e1f64ee","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30113/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/waku/2/rs/3/1", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34181/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/waku/2/rs/3/1","version":0,"timestamp":1725423454239531776,"ephemeral":false}]'
[35mDEBUG   [0m tests.filter.test_subscribe_create:test_subscribe_create.py:41 Running test with pubsub topic: /waku/2/rs/2/2
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30113/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/2"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34181/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "7c8ed4ef-45a6-4c18-bbaa-c03223ec3f80", "contentFilters": ["/waku/2/rs/2/2"], "pubsubTopic": "/waku/2/rs/2/2"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"7c8ed4ef-45a6-4c18-bbaa-c03223ec3f80","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30113/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/waku/2/rs/2/2", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34181/filter/v2/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/waku/2/rs/2/2","version":0,"timestamp":1725423454371225600,"ephemeral":false}]'
[35mDEBUG   [0m tests.filter.test_subscribe_create:test_subscribe_create.py:41 Running test with pubsub topic: /waku/2/rs/3/9
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30113/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/9"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34181/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "e59d1ff5-92f1-42a4-903c-84f766c1a0e2", "contentFilters": ["/waku/2/rs/3/9"], "pubsubTopic": "/waku/2/rs/3/9"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"e59d1ff5-92f1-42a4-903c-84f766c1a0e2","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30113/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F9" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/waku/2/rs/3/9", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34181/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F9" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/waku/2/rs/3/9","version":0,"timestamp":1725423454497720832,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id e48a97da750e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 23a56ec14228
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.