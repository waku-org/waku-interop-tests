[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_on_non_subscribed_pubsub_topic with id: 2024-09-11_04-22-28__fa016b41-4702-4675-bcf4-c3f15b292448
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-11_04-22-28__fa016b41-4702-4675-bcf4-c3f15b292448__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.72.29
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['64692', '64693', '64694', '64695', '64696']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 64692:64692 -p 64693:64693 -p 64694:64694 -p 64695:64695 -p 64696:64696 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64694 --rest-port=64692 --tcp-port=64693 --discv5-udp-port=64695 --rest-address=0.0.0.0 --nat=extip:172.18.72.29 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5a333ad3addceb2389ddc5b87c9aecdf44bccea216ac6cda1eb5bed20dbb1ddd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64696 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.72.29 waku 8a5abbf939a39b12f6ba00d210430ffede23c4a02e640d5789c527abde065944
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 8a5abbf939a3. Setting up logs at ./log/docker/receiving_node1_2024-09-11_04-22-28__fa016b41-4702-4675-bcf4-c3f15b292448__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 64692
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64692/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64692/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.72.29/tcp/64693/p2p/16Uiu2HAm58WXVgf3vjd2WM2rvh679KQgrKmedNwAeHdghAbuSBHC","/ip4/172.18.72.29/tcp/64694/ws/p2p/16Uiu2HAm58WXVgf3vjd2WM2rvh679KQgrKmedNwAeHdghAbuSBHC"],"enrUri":"enr:-LO4QCjQvGGh_vsmu4PKxmFH604Uurz-tdwoeSEKwe2TN9PXV-_ftlQPXOv4kj5bgK09mPZTZllRi_rdhMorkEptUfABgmlkgnY0gmlwhKwSSB2KbXVsdGlhZGRyc4wACgSsEkgdBvy23QOCcnOFAAMBAACJc2VjcDI1NmsxoQKQL052mbk62GGD3qNciKJDc7A95Rh37VOW9tcBxcV-u4N0Y3CC_LWDdWRwgvy3hXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-11_04-22-28__fa016b41-4702-4675-bcf4-c3f15b292448__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.81.239
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['28770', '28771', '28772', '28773', '28774']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 28770:28770 -p 28771:28771 -p 28772:28772 -p 28773:28773 -p 28774:28774 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28772 --rest-port=28770 --tcp-port=28771 --discv5-udp-port=28773 --rest-address=0.0.0.0 --nat=extip:172.18.81.239 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fe098ebcafe1f7bd41d34b0ece6eba8fcee8a99481dac6e2c1f8a7e806871a0e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28774 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.81.239 waku ea2e15f9761b459599776f78472f4584f8581c1f77dc8381e27cfa07a9c09983
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID ea2e15f9761b. Setting up logs at ./log/docker/receiving_node2_2024-09-11_04-22-28__fa016b41-4702-4675-bcf4-c3f15b292448__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 28770
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28770/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28770/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.81.239/tcp/28771/p2p/16Uiu2HAm4axbMtBH3hf6hL8ybAN8tNB1hySaD1uyYEZ6fPfQAubS","/ip4/172.18.81.239/tcp/28772/ws/p2p/16Uiu2HAm4axbMtBH3hf6hL8ybAN8tNB1hySaD1uyYEZ6fPfQAubS"],"enrUri":"enr:-LO4QIwSFSINtrX57Hd7XJ8xG0AnCv4pWAHvAFRfcn_Snq_qOQ4IpHy_UCOhQMqM5810mmIqz0bjyhlDZ5VPt53ONaABgmlkgnY0gmlwhKwSUe-KbXVsdGlhZGRyc4wACgSsElHvBnBk3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKIGjG64rMqgzzzdvOSGYeN2xzfQMtswsx7PFagwu4qNYN0Y3CCcGODdWRwgnBlhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28770/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.72.29/tcp/64693/p2p/16Uiu2HAm58WXVgf3vjd2WM2rvh679KQgrKmedNwAeHdghAbuSBHC"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-11_04-22-28__fa016b41-4702-4675-bcf4-c3f15b292448__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.226.28
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['3892', '3893', '3894', '3895', '3896']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 3892:3892 -p 3893:3893 -p 3894:3894 -p 3895:3895 -p 3896:3896 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=3894 --rest-port=3892 --tcp-port=3893 --discv5-udp-port=3895 --rest-address=0.0.0.0 --nat=extip:172.18.226.28 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fcad8fcf8efd5d8bec5b33ee0f8bcd745a86c0540a25a704e60e57db5e189cce --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=3896 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QCjQvGGh_vsmu4PKxmFH604Uurz-tdwoeSEKwe2TN9PXV-_ftlQPXOv4kj5bgK09mPZTZllRi_rdhMorkEptUfABgmlkgnY0gmlwhKwSSB2KbXVsdGlhZGRyc4wACgSsEkgdBvy23QOCcnOFAAMBAACJc2VjcDI1NmsxoQKQL052mbk62GGD3qNciKJDc7A95Rh37VOW9tcBxcV-u4N0Y3CC_LWDdWRwgvy3hXdha3UyCQ --lightpushnode=/ip4/172.18.72.29/tcp/64693/p2p/16Uiu2HAm58WXVgf3vjd2WM2rvh679KQgrKmedNwAeHdghAbuSBHC --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.226.28 waku 4bb00dc23fe42edfe124b0510aeae7e15b669be7e8c31f70a17dd587264b5ce0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 4bb00dc23fe4. Setting up logs at ./log/docker/lightpush_node1_2024-09-11_04-22-28__fa016b41-4702-4675-bcf4-c3f15b292448__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 3892
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3892/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3892/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.226.28/tcp/3893/p2p/16Uiu2HAkvLxpMX4aB88q8kwMS8uSFtkxdxLEFQMbb2SPQBLtsy6r","/ip4/172.18.226.28/tcp/3894/ws/p2p/16Uiu2HAkvLxpMX4aB88q8kwMS8uSFtkxdxLEFQMbb2SPQBLtsy6r"],"enrUri":"enr:-LO4QJZZUg3KtuRlchUT5NpRww-dH2PfjfhVHiOo5C51G5SVc_VcYCD6aW6nNtadXSyKMwFLG7prvQdt1-ipXBSXfOYBgmlkgnY0gmlwhKwS4hyKbXVsdGlhZGRyc4wACgSsEuIcBg823QOCcnOFAAMBAACJc2VjcDI1NmsxoQINptIh_sdfvSUepookTId6e3VJ3wwfVf4n5n4fxW8WE4N0Y3CCDzWDdWRwgg83hXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3892/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.72.29/tcp/64693/p2p/16Uiu2HAm58WXVgf3vjd2WM2rvh679KQgrKmedNwAeHdghAbuSBHC"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3892/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.81.239/tcp/28771/p2p/16Uiu2HAm4axbMtBH3hf6hL8ybAN8tNB1hySaD1uyYEZ6fPfQAubS"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64692/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28770/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3892/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1726028553264463104}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:3892/lightpush/v1/message. Response content: b'Failed to request a message push: not_published_to_any_peer'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 8a5abbf939a3
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id ea2e15f9761b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 4bb00dc23fe4
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/receiving_node2_2024-09-11_04-22-28__fa016b41-4702-4675-bcf4-c3f15b292448__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/lightpush_node1_2024-09-11_04-22-28__fa016b41-4702-4675-bcf4-c3f15b292448__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/receiving_node1_2024-09-11_04-22-28__fa016b41-4702-4675-bcf4-c3f15b292448__wakuorg_nwaku:latest.log