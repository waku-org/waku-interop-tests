[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_content_topics with id: 2024-09-11_04-22-14__9e21ddce-151d-4eb9-8658-c061c0cc4ed3
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-11_04-22-14__9e21ddce-151d-4eb9-8658-c061c0cc4ed3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.47.190
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['63034', '63035', '63036', '63037', '63038']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 63034:63034 -p 63035:63035 -p 63036:63036 -p 63037:63037 -p 63038:63038 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63036 --rest-port=63034 --tcp-port=63035 --discv5-udp-port=63037 --rest-address=0.0.0.0 --nat=extip:172.18.47.190 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8bbbb0bf99b70e4ddddf0ecfbabcab0e42b1a4206dda427cbec4e279d5636dea --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63038 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.47.190 waku c5bca3a6dba35d6737171848e5bbbd7ae9cbd5a6fab0fbe5e947b487d6992f0c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID c5bca3a6dba3. Setting up logs at ./log/docker/receiving_node1_2024-09-11_04-22-14__9e21ddce-151d-4eb9-8658-c061c0cc4ed3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 63034
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63034/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63034/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.47.190/tcp/63035/p2p/16Uiu2HAmGXXitASv7JmSspneDBkozCteWeRJfVRbmAa8P1QRBEoW","/ip4/172.18.47.190/tcp/63036/ws/p2p/16Uiu2HAmGXXitASv7JmSspneDBkozCteWeRJfVRbmAa8P1QRBEoW"],"enrUri":"enr:-LO4QKO6sHKUWbEcJmJCZOhF76DyQwTG9y6Rq7vSoLdRBZUWDS2nNbh1a6ZcPar-scP9K4ETn7tmu_QGuyfL7rDScgEBgmlkgnY0gmlwhKwSL76KbXVsdGlhZGRyc4wACgSsEi--BvY83QOCcnOFAAMBAACJc2VjcDI1NmsxoQM5hZLxltZ8kw0aqThMjZfcmUF3fFV5kF0YCARkEw8RzYN0Y3CC9juDdWRwgvY9hXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-11_04-22-14__9e21ddce-151d-4eb9-8658-c061c0cc4ed3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.3.143
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['8007', '8008', '8009', '8010', '8011']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 8007:8007 -p 8008:8008 -p 8009:8009 -p 8010:8010 -p 8011:8011 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8009 --rest-port=8007 --tcp-port=8008 --discv5-udp-port=8010 --rest-address=0.0.0.0 --nat=extip:172.18.3.143 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4ea90c186f14e1dddefbb85fa8e6d9ec5f2eeadde292f5a0d7c6de0e2d8659a4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8011 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.3.143 waku 1a79585e72ccf9996e43c971d65f9f42273825f6f2b7748419519ebfd621bc71
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 1a79585e72cc. Setting up logs at ./log/docker/receiving_node2_2024-09-11_04-22-14__9e21ddce-151d-4eb9-8658-c061c0cc4ed3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 8007
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8007/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8007/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.3.143/tcp/8008/p2p/16Uiu2HAmSVPbPcHvV7QKyhHESyYKCdmPxPa6ZnzzgWUrJAr8bQtA","/ip4/172.18.3.143/tcp/8009/ws/p2p/16Uiu2HAmSVPbPcHvV7QKyhHESyYKCdmPxPa6ZnzzgWUrJAr8bQtA"],"enrUri":"enr:-LO4QMHF3I_ZZuJvJcPY7GGd99gL26hnz5VN62-8gBanu-j9IQlkJQrX-aPH3F53WYcXmUM4eiOxnL4H4xK3D033f0oBgmlkgnY0gmlwhKwSA4-KbXVsdGlhZGRyc4wACgSsEgOPBh9J3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPNjhcHMT8lRcVcGVbjwnYB4rsub8DGOQijA4KyUvDn84N0Y3CCH0iDdWRwgh9KhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8007/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.47.190/tcp/63035/p2p/16Uiu2HAmGXXitASv7JmSspneDBkozCteWeRJfVRbmAa8P1QRBEoW"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-11_04-22-14__9e21ddce-151d-4eb9-8658-c061c0cc4ed3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.232.237
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['24900', '24901', '24902', '24903', '24904']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 24900:24900 -p 24901:24901 -p 24902:24902 -p 24903:24903 -p 24904:24904 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=24902 --rest-port=24900 --tcp-port=24901 --discv5-udp-port=24903 --rest-address=0.0.0.0 --nat=extip:172.18.232.237 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=acbaa4afa82efba2aca7e1fcec6bc96dcd46bc38e707aba4fa1693ea03c2fcf2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=24904 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QKO6sHKUWbEcJmJCZOhF76DyQwTG9y6Rq7vSoLdRBZUWDS2nNbh1a6ZcPar-scP9K4ETn7tmu_QGuyfL7rDScgEBgmlkgnY0gmlwhKwSL76KbXVsdGlhZGRyc4wACgSsEi--BvY83QOCcnOFAAMBAACJc2VjcDI1NmsxoQM5hZLxltZ8kw0aqThMjZfcmUF3fFV5kF0YCARkEw8RzYN0Y3CC9juDdWRwgvY9hXdha3UyCQ --lightpushnode=/ip4/172.18.47.190/tcp/63035/p2p/16Uiu2HAmGXXitASv7JmSspneDBkozCteWeRJfVRbmAa8P1QRBEoW --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.232.237 waku bbe1629eaa0a1a1d8ed83c8bb1f32b033210e98ddd3775fa4808f81aae552bda
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID bbe1629eaa0a. Setting up logs at ./log/docker/lightpush_node1_2024-09-11_04-22-14__9e21ddce-151d-4eb9-8658-c061c0cc4ed3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 24900
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24900/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24900/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.232.237/tcp/24901/p2p/16Uiu2HAm14EM94XCVmqkFtawdYEApXLU6aNVxG4BHQWjR4UYdLUZ","/ip4/172.18.232.237/tcp/24902/ws/p2p/16Uiu2HAm14EM94XCVmqkFtawdYEApXLU6aNVxG4BHQWjR4UYdLUZ"],"enrUri":"enr:-LO4QFop_YkqjqHEfFRihZmW6NPpIef8Sp7Wrr2bt7Qjs6D1R1Wa8JlRLIvGqYgIdhUgsWz_nj--LlZiBbhZczauwo0BgmlkgnY0gmlwhKwS6O2KbXVsdGlhZGRyc4wACgSsEujtBmFG3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJTp_FCP8UENHgabbW2CDIwi74CnnYFKGUfLzhvEu1xGoN0Y3CCYUWDdWRwgmFHhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24900/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.47.190/tcp/63035/p2p/16Uiu2HAmGXXitASv7JmSspneDBkozCteWeRJfVRbmAa8P1QRBEoW"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24900/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.3.143/tcp/8008/p2p/16Uiu2HAmSVPbPcHvV7QKyhHESyYKCdmPxPa6ZnzzgWUrJAr8bQtA"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63034/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8007/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic Empty string
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24900/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "", "timestamp": 1726028539761916416}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:24900/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A dictionary
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24900/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": {"key": "YWFh"}, "timestamp": 1726028539766786560}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:24900/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic An integer
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24900/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": 1234567890, "timestamp": 1726028539774548224}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:24900/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A list
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24900/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": ["YWFh"], "timestamp": 1726028539778870528}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:24900/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A bool
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24900/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": true, "timestamp": 1726028539782861312}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:24900/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id c5bca3a6dba3
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 1a79585e72cc
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id bbe1629eaa0a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.