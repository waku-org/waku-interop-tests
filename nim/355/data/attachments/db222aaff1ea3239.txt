[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_meta with id: 2024-09-11_04-23-44__338d885e-a34d-468e-a6e9-dcbbe33cf87e
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-11_04-23-44__338d885e-a34d-468e-a6e9-dcbbe33cf87e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.117.82
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['44092', '44093', '44094', '44095', '44096']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 44092:44092 -p 44093:44093 -p 44094:44094 -p 44095:44095 -p 44096:44096 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44094 --rest-port=44092 --tcp-port=44093 --discv5-udp-port=44095 --rest-address=0.0.0.0 --nat=extip:172.18.117.82 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=baf5b0d45cd935e0ad213be3f4229ef1bb6f7b27c4b6c0bdf48caff3ce385d8c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44096 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.117.82 waku 7d39308c3b88d2c1bbe75d75008e37a1d2aff4b5cf2447e6e29207532a95ba97
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 7d39308c3b88. Setting up logs at ./log/docker/receiving_node1_2024-09-11_04-23-44__338d885e-a34d-468e-a6e9-dcbbe33cf87e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 44092
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44092/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44092/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.117.82/tcp/44093/p2p/16Uiu2HAmLZgDytt8ffS2XjqrGRDSkNc3gT3tSKFzsvFd8tY4W3pb","/ip4/172.18.117.82/tcp/44094/ws/p2p/16Uiu2HAmLZgDytt8ffS2XjqrGRDSkNc3gT3tSKFzsvFd8tY4W3pb"],"enrUri":"enr:-LO4QKPTOn8_FcbevUiBe9VIQmC7dX-iwCkI9n-0aqZKrwqndvBTlOu3LICDoc2X23-mJ_W9cXFXtUCppiqjnKbtkNwBgmlkgnY0gmlwhKwSdVKKbXVsdGlhZGRyc4wACgSsEnVSBqw-3QOCcnOFAAMBAACJc2VjcDI1NmsxoQN1gRiigEHNuDTu4vnbhU71E1L0DatGtztr82ck1r2taIN0Y3CCrD2DdWRwgqw_hXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-11_04-23-44__338d885e-a34d-468e-a6e9-dcbbe33cf87e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.82.28
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['57949', '57950', '57951', '57952', '57953']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 57949:57949 -p 57950:57950 -p 57951:57951 -p 57952:57952 -p 57953:57953 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57951 --rest-port=57949 --tcp-port=57950 --discv5-udp-port=57952 --rest-address=0.0.0.0 --nat=extip:172.18.82.28 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d491859d5d4208bb53ca1ba44df1b2c786ccf12ba34d9faebcf0f8efdb6ad1fe --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57953 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.82.28 waku 1a7fcb109c5f089f32054c22d3484180697293038ced0712e3e59c0369996b4d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 1a7fcb109c5f. Setting up logs at ./log/docker/receiving_node2_2024-09-11_04-23-44__338d885e-a34d-468e-a6e9-dcbbe33cf87e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 57949
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57949/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57949/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.82.28/tcp/57950/p2p/16Uiu2HAmJ61Vk2e6L7yqxQr6nrAaEafZ9V1tZGVvfAEGNJKW918D","/ip4/172.18.82.28/tcp/57951/ws/p2p/16Uiu2HAmJ61Vk2e6L7yqxQr6nrAaEafZ9V1tZGVvfAEGNJKW918D"],"enrUri":"enr:-LO4QIqT8rhslsx72cuaffHMkNi6PV09MTFPrUoGh4ek3mdMEoSIVwB17WWhjlKB6Xeg-7NdJOXuE3yPJfUvS2GX_X4BgmlkgnY0gmlwhKwSUhyKbXVsdGlhZGRyc4wACgSsElIcBuJf3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNQs0AW2589DEZEFCjf4eGXuSI24dbT3gaXNHj0pZaesoN0Y3CC4l6DdWRwguJghXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57949/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.117.82/tcp/44093/p2p/16Uiu2HAmLZgDytt8ffS2XjqrGRDSkNc3gT3tSKFzsvFd8tY4W3pb"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-11_04-23-44__338d885e-a34d-468e-a6e9-dcbbe33cf87e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.226.60
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['7024', '7025', '7026', '7027', '7028']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 7024:7024 -p 7025:7025 -p 7026:7026 -p 7027:7027 -p 7028:7028 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7026 --rest-port=7024 --tcp-port=7025 --discv5-udp-port=7027 --rest-address=0.0.0.0 --nat=extip:172.18.226.60 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c9b1b7f38cabf2fa4477bd882a5bc45d7c8fa2020be0ddbfbdd6b32f2ee2c21c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7028 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QKPTOn8_FcbevUiBe9VIQmC7dX-iwCkI9n-0aqZKrwqndvBTlOu3LICDoc2X23-mJ_W9cXFXtUCppiqjnKbtkNwBgmlkgnY0gmlwhKwSdVKKbXVsdGlhZGRyc4wACgSsEnVSBqw-3QOCcnOFAAMBAACJc2VjcDI1NmsxoQN1gRiigEHNuDTu4vnbhU71E1L0DatGtztr82ck1r2taIN0Y3CCrD2DdWRwgqw_hXdha3UyCQ --lightpushnode=/ip4/172.18.117.82/tcp/44093/p2p/16Uiu2HAmLZgDytt8ffS2XjqrGRDSkNc3gT3tSKFzsvFd8tY4W3pb --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.226.60 waku 35977c56e98fad856dae827b9eee875d0a66f3537517629a48563d2d98a3427f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 35977c56e98f. Setting up logs at ./log/docker/lightpush_node1_2024-09-11_04-23-44__338d885e-a34d-468e-a6e9-dcbbe33cf87e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 7024
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7024/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7024/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.226.60/tcp/7025/p2p/16Uiu2HAkvx5Kv43XMpHti56ZN6a9ToSAw1hb6QfEMRsJvnPTtP43","/ip4/172.18.226.60/tcp/7026/ws/p2p/16Uiu2HAkvx5Kv43XMpHti56ZN6a9ToSAw1hb6QfEMRsJvnPTtP43"],"enrUri":"enr:-LO4QMJ0Exy7l47ErIjZJEI3991cD7MT8DbKj1c1aaip507oB_R6_4SdQcfy104hya3Wmn6FPB0Y3koId3tMyQYGQBsBgmlkgnY0gmlwhKwS4jyKbXVsdGlhZGRyc4wACgSsEuI8Bhty3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIWpYJ47CKxPmiKK0eJrDenWjKCAMIccFPAYfEl1sAB4IN0Y3CCG3GDdWRwghtzhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7024/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.117.82/tcp/44093/p2p/16Uiu2HAmLZgDytt8ffS2XjqrGRDSkNc3gT3tSKFzsvFd8tY4W3pb"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7024/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.82.28/tcp/57950/p2p/16Uiu2HAmJ61Vk2e6L7yqxQr6nrAaEafZ9V1tZGVvfAEGNJKW918D"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44092/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57949/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7024/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1726028629838703104, "meta": "Light push works!!"}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:7024/lightpush/v1/message. Response content: b'Invalid message: Incorrect base64 string'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 7d39308c3b88
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 1a7fcb109c5f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 35977c56e98f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.