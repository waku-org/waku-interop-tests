[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_subscribe_to_pubsub_topics_from_multiple_clusters with id: 2024-12-05_11-55-45__a7e37c57-d914-4f1c-8d94-5a60b7625ea8
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-05_11-55-45__a7e37c57-d914-4f1c-8d94-5a60b7625ea8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.106.50
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['38861', '38862', '38863', '38864', '38865']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 38861:38861 -p 38862:38862 -p 38863:38863 -p 38864:38864 -p 38865:38865 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=38863 --rest-port=38861 --tcp-port=38862 --discv5-udp-port=38864 --rest-address=0.0.0.0 --nat=extip:172.18.106.50 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=acee208f398c5d1f3feb3bef59b6a7dcedff20dddad5be1005fdb9bce88f4b6a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=38865 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.106.50 waku 4b709e68e364362d087d58c37e2e6116460b2c12e33b20e430f7dfebc62ea307
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 798446f7dbb0. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 4b709e68e364. Setting up logs at ./log/docker/node1_2024-12-05_11-55-45__a7e37c57-d914-4f1c-8d94-5a60b7625ea8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 38861
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38861/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38861/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.106.50/tcp/38862/p2p/16Uiu2HAm8LNPQKeB2FwNgPyBy4xDgKRcKeybxGMxUBS96wKc7nas","/ip4/172.18.106.50/tcp/38863/ws/p2p/16Uiu2HAm8LNPQKeB2FwNgPyBy4xDgKRcKeybxGMxUBS96wKc7nas"],"enrUri":"enr:-L24QPkT0dKEW-I1J6a3CtmY80EFbsK5aVfFDMNjw3QqJiFTGXjSn5yel5A8fRAdGG7ensx_80cX-yI_OCXSaqYBXrMCgmlkgnY0gmlwhKwSajKKbXVsdGlhZGRyc5YACASsEmoyBpfOAAoErBJqMgaXz90DgnJzhQADAQAAiXNlY3AyNTZrMaECv8wiM0UuL3USicMDcAL-w2wLrx6YUymCWP9q4yDhymCDdGNwgpfOg3VkcIKX0IV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-05_11-55-45__a7e37c57-d914-4f1c-8d94-5a60b7625ea8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.251.205
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['50991', '50992', '50993', '50994', '50995']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 50991:50991 -p 50992:50992 -p 50993:50993 -p 50994:50994 -p 50995:50995 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=50993 --rest-port=50991 --tcp-port=50992 --discv5-udp-port=50994 --rest-address=0.0.0.0 --nat=extip:172.18.251.205 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d737fd9dfabe95067cafc37bbdddca4b27fdff7e79e6cbae65bcad7ddccf5fe0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=50995 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QPkT0dKEW-I1J6a3CtmY80EFbsK5aVfFDMNjw3QqJiFTGXjSn5yel5A8fRAdGG7ensx_80cX-yI_OCXSaqYBXrMCgmlkgnY0gmlwhKwSajKKbXVsdGlhZGRyc5YACASsEmoyBpfOAAoErBJqMgaXz90DgnJzhQADAQAAiXNlY3AyNTZrMaECv8wiM0UuL3USicMDcAL-w2wLrx6YUymCWP9q4yDhymCDdGNwgpfOg3VkcIKX0IV3YWt1MgU --filternode=/ip4/172.18.106.50/tcp/38862/p2p/16Uiu2HAm8LNPQKeB2FwNgPyBy4xDgKRcKeybxGMxUBS96wKc7nas
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.251.205 waku c4c4644d61d0007ab3401b93d8628d05d1b8020af9eae7cd97b8c8da21088a71
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID c4c4644d61d0. Setting up logs at ./log/docker/node2_2024-12-05_11-55-45__a7e37c57-d914-4f1c-8d94-5a60b7625ea8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 50991
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50991/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50991/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.251.205/tcp/50992/p2p/16Uiu2HAm6tKcU8jdgAFQuc2zRj4oSAb9GuwajaisvqiJEHASNuZt","/ip4/172.18.251.205/tcp/50993/ws/p2p/16Uiu2HAm6tKcU8jdgAFQuc2zRj4oSAb9GuwajaisvqiJEHASNuZt"],"enrUri":"enr:-L24QKI8o6Fp_vAEns8r5sgYopqXhrTCIorTolhhCZavpTh_I6A0uHp2U8e_3ZT1SerSpj1ysCxQ1AKmTM0-WeuEjQICgmlkgnY0gmlwhKwS-82KbXVsdGlhZGRyc5YACASsEvvNBscwAAoErBL7zQbHMd0DgnJzhQADAQAAiXNlY3AyNTZrMaECqkQ1Tv1880iqU-rd9IjSX6udeh2NZZlRrr0061FAULuDdGNwgscwg3VkcILHMoV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:50991/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.106.50/tcp/38862/p2p/16Uiu2HAm8LNPQKeB2FwNgPyBy4xDgKRcKeybxGMxUBS96wKc7nas"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.filter.test_subscribe_create:test_subscribe_create.py:41 Running test with pubsub topic: /waku/2/rs/3/1
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38861/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:50991/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "3d869da3-3561-4bfe-98a3-2e32dc995cd4", "contentFilters": ["/waku/2/rs/3/1"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"3d869da3-3561-4bfe-98a3-2e32dc995cd4","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38861/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/waku/2/rs/3/1", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50991/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/waku/2/rs/3/1","version":0,"timestamp":1733399749096341504,"ephemeral":false}]'
[35mDEBUG   [0m tests.filter.test_subscribe_create:test_subscribe_create.py:41 Running test with pubsub topic: /waku/2/rs/2/2
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38861/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/2"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:50991/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "0107383f-2dbd-4879-a261-4e2346d0a907", "contentFilters": ["/waku/2/rs/2/2"], "pubsubTopic": "/waku/2/rs/2/2"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"0107383f-2dbd-4879-a261-4e2346d0a907","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38861/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/waku/2/rs/2/2", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50991/filter/v2/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/waku/2/rs/2/2","version":0,"timestamp":1733399749218605312,"ephemeral":false}]'
[35mDEBUG   [0m tests.filter.test_subscribe_create:test_subscribe_create.py:41 Running test with pubsub topic: /waku/2/rs/3/9
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38861/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/9"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:50991/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "d742de72-ba8f-4242-baeb-9804f1d49555", "contentFilters": ["/waku/2/rs/3/9"], "pubsubTopic": "/waku/2/rs/3/9"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"d742de72-ba8f-4242-baeb-9804f1d49555","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38861/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F9" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/waku/2/rs/3/9", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50991/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F9" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/waku/2/rs/3/9","version":0,"timestamp":1733399749350480896,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 4b709e68e364
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id c4c4644d61d0
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 4b709e68e364. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.