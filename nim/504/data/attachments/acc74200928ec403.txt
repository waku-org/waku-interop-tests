[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_node_not_connected_directly_to_lightpushing_node with id: 2024-12-05_11-48-23__e6642632-f1c1-44d9-a3b0-8c98170b9c1c
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-05_11-48-23__e6642632-f1c1-44d9-a3b0-8c98170b9c1c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-05_11-48-23__e6642632-f1c1-44d9-a3b0-8c98170b9c1c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-12-05_11-48-23__e6642632-f1c1-44d9-a3b0-8c98170b9c1c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.9.216
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['31354', '31355', '31356', '31357', '31358']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 31354:31354 -p 31355:31355 -p 31356:31356 -p 31357:31357 -p 31358:31358 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=31356 --rest-port=31354 --tcp-port=31355 --discv5-udp-port=31357 --rest-address=0.0.0.0 --nat=extip:172.18.9.216 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bc8fd0c6a25ca907910c6fd09eefa63dabeabdd9ce7bdab7263aafd1e3cefde6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=31358 --metrics-logging=true --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.9.216 waku af8d8b6c8102db259c2528d47e35eaa4af205de58825cb032e34b8647d067337
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID af8d8b6c8102. Setting up logs at ./log/docker/node1_2024-12-05_11-48-23__e6642632-f1c1-44d9-a3b0-8c98170b9c1c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 31354
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container ab6a5a6d1edd. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31354/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31354/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.9.216/tcp/31355/p2p/16Uiu2HAmMyTsntXy93SQzeqi6V6aLY1p7KWxNGW1tPkmchXk3hXa","/ip4/172.18.9.216/tcp/31356/ws/p2p/16Uiu2HAmMyTsntXy93SQzeqi6V6aLY1p7KWxNGW1tPkmchXk3hXa"],"enrUri":"enr:-L24QHsVPF-m_NEV4VT6a4UBtZcZrycImLbMico8RfC-dBRpQlGN3cmXpf8CYSU_nMe9ejr5FAcK0KNfWM5rp4-U75QCgmlkgnY0gmlwhKwSCdiKbXVsdGlhZGRyc5YACASsEgnYBnp7AAoErBIJ2AZ6fN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDinTCslBEzFjf2RmhnNabhrzjs3XJZbWSunHcOby2Rs2DdGNwgnp7g3VkcIJ6fYV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.238.155
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['41422', '41423', '41424', '41425', '41426']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 41422:41422 -p 41423:41423 -p 41424:41424 -p 41425:41425 -p 41426:41426 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=41424 --rest-port=41422 --tcp-port=41423 --discv5-udp-port=41425 --rest-address=0.0.0.0 --nat=extip:172.18.238.155 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e6fece6cf7acc9cbfed4322f2cdd76a5bfd048aea8f2a5bbcbf727e17eec9bbb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=41426 --metrics-logging=true --lightpush=true --filter=true --relay=true --discv5-bootstrap-node=enr:-L24QHsVPF-m_NEV4VT6a4UBtZcZrycImLbMico8RfC-dBRpQlGN3cmXpf8CYSU_nMe9ejr5FAcK0KNfWM5rp4-U75QCgmlkgnY0gmlwhKwSCdiKbXVsdGlhZGRyc5YACASsEgnYBnp7AAoErBIJ2AZ6fN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDinTCslBEzFjf2RmhnNabhrzjs3XJZbWSunHcOby2Rs2DdGNwgnp7g3VkcIJ6fYV3YWt1Mgk --lightpushnode=/ip4/172.18.9.216/tcp/31355/p2p/16Uiu2HAmMyTsntXy93SQzeqi6V6aLY1p7KWxNGW1tPkmchXk3hXa
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.238.155 waku 9a33138f9d1fb9a6540ea50297862d87d1ae36f532ca873d0b36563f4bc86296
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 9a33138f9d1f. Setting up logs at ./log/docker/node2_2024-12-05_11-48-23__e6642632-f1c1-44d9-a3b0-8c98170b9c1c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 41422
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41422/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41422/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.238.155/tcp/41423/p2p/16Uiu2HAmVRq3dA1PBMhRkMriM2rKDY7gNPBvoH8GUta3FgJg4kvz","/ip4/172.18.238.155/tcp/41424/ws/p2p/16Uiu2HAmVRq3dA1PBMhRkMriM2rKDY7gNPBvoH8GUta3FgJg4kvz"],"enrUri":"enr:-L24QJHUlAFVvLs6rCgvLiKr95Xh9eT6mqrI_ryUO8Wy1CBRAYPK3nR-8i23mvkdL1A3vbRUt9mFFU7xQExi_X0KJpACgmlkgnY0gmlwhKwS7puKbXVsdGlhZGRyc5YACASsEu6bBqHPAAoErBLumwah0N0DgnJzhQADAQAAiXNlY3AyNTZrMaED-TebRAhLWMa5oFR0PEs58cygBTuTUP53Fw6wi9xyc4-DdGNwgqHPg3VkcIKh0YV3YWt1Mg0"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.221.87
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['3446', '3447', '3448', '3449', '3450']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 3446:3446 -p 3447:3447 -p 3448:3448 -p 3449:3449 -p 3450:3450 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=3448 --rest-port=3446 --tcp-port=3447 --discv5-udp-port=3449 --rest-address=0.0.0.0 --nat=extip:172.18.221.87 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bd26dbc9c014cf3a5fa30ccd0b40a28d0bb86c70fb8787fc8fda88fe4dedeb42 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=3450 --metrics-logging=true --relay=false --filternode=/ip4/172.18.238.155/tcp/41423/p2p/16Uiu2HAmVRq3dA1PBMhRkMriM2rKDY7gNPBvoH8GUta3FgJg4kvz --discv5-bootstrap-node=enr:-L24QJHUlAFVvLs6rCgvLiKr95Xh9eT6mqrI_ryUO8Wy1CBRAYPK3nR-8i23mvkdL1A3vbRUt9mFFU7xQExi_X0KJpACgmlkgnY0gmlwhKwS7puKbXVsdGlhZGRyc5YACASsEu6bBqHPAAoErBLumwah0N0DgnJzhQADAQAAiXNlY3AyNTZrMaED-TebRAhLWMa5oFR0PEs58cygBTuTUP53Fw6wi9xyc4-DdGNwgqHPg3VkcIKh0YV3YWt1Mg0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.221.87 waku da45d1bf2df6f6df13c32d61840892bef1e219305ea7c4260f2ab030c7b3c218
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID da45d1bf2df6. Setting up logs at ./log/docker/node3_2024-12-05_11-48-23__e6642632-f1c1-44d9-a3b0-8c98170b9c1c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 3446
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3446/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3446/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.221.87/tcp/3447/p2p/16Uiu2HAm58uoeBrSLBwHes11YvxCzU33BBqs4rHkF6tV5yVHmoVm","/ip4/172.18.221.87/tcp/3448/ws/p2p/16Uiu2HAm58uoeBrSLBwHes11YvxCzU33BBqs4rHkF6tV5yVHmoVm"],"enrUri":"enr:-L24QKzMVHZpjX1e9QUCMqdo6esC4xiA0W_Xonewp1n5WLI0XrBtbX6bmWmwPs2JLYZWnZK4q9Yx0AY6wUlccuMLRogCgmlkgnY0gmlwhKwS3VeKbXVsdGlhZGRyc5YACASsEt1XBg13AAoErBLdVwYNeN0DgnJzhQADAQAAiXNlY3AyNTZrMaECkEmgoP0YvWklJQ2Q3wYprylb93cPdRiYZ2s6PWuq1lyDdGNwgg13g3VkcIINeYV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31354/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41422/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3446/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31354/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31354/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.238.155/tcp/41423/p2p/16Uiu2HAmVRq3dA1PBMhRkMriM2rKDY7gNPBvoH8GUta3FgJg4kvz","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":false},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":false},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":false}],"origin":"Discv5"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41422/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.9.216/tcp/31355/p2p/16Uiu2HAmMyTsntXy93SQzeqi6V6aLY1p7KWxNGW1tPkmchXk3hXa","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":false},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":false}],"origin":"Discv5"},{"multiaddr":"/ip4/172.18.221.87/tcp/3447/p2p/16Uiu2HAm58uoeBrSLBwHes11YvxCzU33BBqs4rHkF6tV5yVHmoVm","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3446/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.238.155/tcp/41423/p2p/16Uiu2HAmVRq3dA1PBMhRkMriM2rKDY7gNPBvoH8GUta3FgJg4kvz","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31354/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1733399339865446912}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3446/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1733399339865446912,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id af8d8b6c8102
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 9a33138f9d1f
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container af8d8b6c8102. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id da45d1bf2df6
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 9a33138f9d1f. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.