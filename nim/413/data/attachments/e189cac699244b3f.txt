[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_extra_field with id: 2024-10-29_09-53-30__ef85031e-f23a-4061-9b1f-b77278bf73e8
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-10-29_09-53-30__ef85031e-f23a-4061-9b1f-b77278bf73e8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.205.29
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['43073', '43074', '43075', '43076', '43077']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 43073:43073 -p 43074:43074 -p 43075:43075 -p 43076:43076 -p 43077:43077 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=43075 --rest-port=43073 --tcp-port=43074 --discv5-udp-port=43076 --rest-address=0.0.0.0 --nat=extip:172.18.205.29 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=daf73d6f5dbce4f70fccf8d997ab7cc9fe9daf4cbfbd3ebbcb5e2c17feefcb2d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=43077 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.205.29 waku 210f6179724f547f34724e13a1fc222934c44fa8c4856ff27e4e7d3198685ba6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 210f6179724f. Setting up logs at ./log/docker/receiving_node1_2024-10-29_09-53-30__ef85031e-f23a-4061-9b1f-b77278bf73e8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 43073
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 83c39268836b. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43073/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43073/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.205.29/tcp/43074/p2p/16Uiu2HAkx4jvdqdFekoN5aFTrAAmZc9Dma3k9L8uEmi3KbCLEaYq","/ip4/172.18.205.29/tcp/43075/ws/p2p/16Uiu2HAkx4jvdqdFekoN5aFTrAAmZc9Dma3k9L8uEmi3KbCLEaYq"],"enrUri":"enr:-L24QJJ3ps7171J3ecYuXPZhnvpccxeUg41ZNBoVUmOiooG4G0RNHTD4Wr5bmv_Aigg0IO1NN_gqqTi1t9kBbzTr2uQCgmlkgnY0gmlwhKwSzR2KbXVsdGlhZGRyc5YACASsEs0dBqhCAAoErBLNHQaoQ90DgnJzhQADAQAAiXNlY3AyNTZrMaECJzZTNkJ0Q2NDV8AQlbXZo9yW0u6-kRfDiMpYmNOwCHKDdGNwgqhCg3VkcIKoRIV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-10-29_09-53-30__ef85031e-f23a-4061-9b1f-b77278bf73e8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.218.33
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['61351', '61352', '61353', '61354', '61355']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 61351:61351 -p 61352:61352 -p 61353:61353 -p 61354:61354 -p 61355:61355 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61353 --rest-port=61351 --tcp-port=61352 --discv5-udp-port=61354 --rest-address=0.0.0.0 --nat=extip:172.18.218.33 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a9bbd0ec75f8cbee52ddd4be1b5461dd0afbed09caebf4c669ccd5cc09ea5b86 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61355 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.218.33 waku 62199e95dc079684a02970602405a91cb6bda3ce69b47e61e250ed7ff649440b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 62199e95dc07. Setting up logs at ./log/docker/receiving_node2_2024-10-29_09-53-30__ef85031e-f23a-4061-9b1f-b77278bf73e8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 61351
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61351/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61351/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.218.33/tcp/61352/p2p/16Uiu2HAm4b26qnj3spNnDFHnannZPaNqwFadZHqr1zjCCodi12VD","/ip4/172.18.218.33/tcp/61353/ws/p2p/16Uiu2HAm4b26qnj3spNnDFHnannZPaNqwFadZHqr1zjCCodi12VD"],"enrUri":"enr:-L24QDz0mwzWiKIiRNNBbw32hoEsuNTi-0yfeINQEDZ_JBAhaGgbUXTMb6KwqqCQXKnE3pBln_B7OhP4cOhNNtBevQsCgmlkgnY0gmlwhKwS2iGKbXVsdGlhZGRyc5YACASsEtohBu-oAAoErBLaIQbvqd0DgnJzhQADAQAAiXNlY3AyNTZrMaECiB4pPd2VXF0plhx2ooLixXlOC6Pc4G1MzsjF0IfoC5iDdGNwgu-og3VkcILvqoV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61351/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.205.29/tcp/43074/p2p/16Uiu2HAkx4jvdqdFekoN5aFTrAAmZc9Dma3k9L8uEmi3KbCLEaYq"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-10-29_09-53-30__ef85031e-f23a-4061-9b1f-b77278bf73e8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.253.124
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['65136', '65137', '65138', '65139', '65140']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 65136:65136 -p 65137:65137 -p 65138:65138 -p 65139:65139 -p 65140:65140 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=65138 --rest-port=65136 --tcp-port=65137 --discv5-udp-port=65139 --rest-address=0.0.0.0 --nat=extip:172.18.253.124 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=186dfbf0fc10ec1fb19fce8062deccb24ad0b7b0f88c0a999f9e05baf6acdd6e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=65140 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QJJ3ps7171J3ecYuXPZhnvpccxeUg41ZNBoVUmOiooG4G0RNHTD4Wr5bmv_Aigg0IO1NN_gqqTi1t9kBbzTr2uQCgmlkgnY0gmlwhKwSzR2KbXVsdGlhZGRyc5YACASsEs0dBqhCAAoErBLNHQaoQ90DgnJzhQADAQAAiXNlY3AyNTZrMaECJzZTNkJ0Q2NDV8AQlbXZo9yW0u6-kRfDiMpYmNOwCHKDdGNwgqhCg3VkcIKoRIV3YWt1Mgk --lightpushnode=/ip4/172.18.205.29/tcp/43074/p2p/16Uiu2HAkx4jvdqdFekoN5aFTrAAmZc9Dma3k9L8uEmi3KbCLEaYq --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.253.124 waku 84a8903828be0d7aaabce1a198910e3bc466649371956edb5b57d0ffef24df5f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 84a8903828be. Setting up logs at ./log/docker/lightpush_node1_2024-10-29_09-53-30__ef85031e-f23a-4061-9b1f-b77278bf73e8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 65136
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:65136/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:65136/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.253.124/tcp/65137/p2p/16Uiu2HAmTkYk2rjkZj2HU4zM724rn5ESxwte9DAUpBpxmydTsLxD","/ip4/172.18.253.124/tcp/65138/ws/p2p/16Uiu2HAmTkYk2rjkZj2HU4zM724rn5ESxwte9DAUpBpxmydTsLxD"],"enrUri":"enr:-L24QGHBuEydodN67haX9cyHhboxMagOS3TCNEIUqrg-TdjxOPCl5FvVszcbFaaIICBuQEG1Whyv4LCUotY4UpzZG-kCgmlkgnY0gmlwhKwS_XyKbXVsdGlhZGRyc5YACASsEv18Bv5xAAoErBL9fAb-ct0DgnJzhQADAQAAiXNlY3AyNTZrMaED4EvVdbp7IYi90F8pTmd2rLl4gmd5RWHcxRo9A81TuR6DdGNwgv5xg3VkcIL-c4V3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:65136/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.205.29/tcp/43074/p2p/16Uiu2HAkx4jvdqdFekoN5aFTrAAmZc9Dma3k9L8uEmi3KbCLEaYq"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:65136/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.218.33/tcp/61352/p2p/16Uiu2HAm4b26qnj3spNnDFHnannZPaNqwFadZHqr1zjCCodi12VD"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43073/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61351/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:65136/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1730195615380974080, "extraField": "extraValue"}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:65136/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 210f6179724f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 62199e95dc07
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 210f6179724f. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 84a8903828be
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 62199e95dc07. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.