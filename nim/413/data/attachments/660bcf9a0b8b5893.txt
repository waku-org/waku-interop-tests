[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_get_message_with_extra_field with id: 2024-10-29_09-47-30__e49b5cdc-2448-4458-8200-24ca5c38b751
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-29_09-47-30__e49b5cdc-2448-4458-8200-24ca5c38b751__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.135.130
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['54113', '54114', '54115', '54116', '54117']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 54113:54113 -p 54114:54114 -p 54115:54115 -p 54116:54116 -p 54117:54117 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=54115 --rest-port=54113 --tcp-port=54114 --discv5-udp-port=54116 --rest-address=0.0.0.0 --nat=extip:172.18.135.130 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=62ff2e5d34edcb82eb43d1b58e27bd32bf97c6bfd685ef5bc69d3c27c2c4a40e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=54117 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.135.130 waku 7d1defe087dd6f4d14212ff44f7b2d14476fc69147d7dd3ba9690164ba8627c8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 7d1defe087dd. Setting up logs at ./log/docker/node1_2024-10-29_09-47-30__e49b5cdc-2448-4458-8200-24ca5c38b751__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 54113
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 22b75644aec9. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54113/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54113/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.135.130/tcp/54114/p2p/16Uiu2HAkuhryEkgSQAynQbnmwAcDai79xZ4sWad8LXvGFzznMpHs","/ip4/172.18.135.130/tcp/54115/ws/p2p/16Uiu2HAkuhryEkgSQAynQbnmwAcDai79xZ4sWad8LXvGFzznMpHs"],"enrUri":"enr:-L24QFlVMbqWsVe48YEETDQcyAk1jKJh_xs8zdXYtT9ZMaLcJwwhz-vm40PoZacuc2hVApc0zDSzU3p8ZA5xLlU1XBsCgmlkgnY0gmlwhKwSh4KKbXVsdGlhZGRyc5YACASsEoeCBtNiAAoErBKHggbTY90DgnJzhQADAQAAiXNlY3AyNTZrMaECBCW4SFiqohweSdzSsmbu5Gj4PwPoOfC4lKkRLsrfvT6DdGNwgtNig3VkcILTZIV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-10-29_09-47-30__e49b5cdc-2448-4458-8200-24ca5c38b751__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.72.76
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['24830', '24831', '24832', '24833', '24834']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 24830:24830 -p 24831:24831 -p 24832:24832 -p 24833:24833 -p 24834:24834 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=24832 --rest-port=24830 --tcp-port=24831 --discv5-udp-port=24833 --rest-address=0.0.0.0 --nat=extip:172.18.72.76 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b7a0a0beaf9da17ecfe402da6c98aa680b3965ee924f18bb0fde468df34b123a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=24834 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QFlVMbqWsVe48YEETDQcyAk1jKJh_xs8zdXYtT9ZMaLcJwwhz-vm40PoZacuc2hVApc0zDSzU3p8ZA5xLlU1XBsCgmlkgnY0gmlwhKwSh4KKbXVsdGlhZGRyc5YACASsEoeCBtNiAAoErBKHggbTY90DgnJzhQADAQAAiXNlY3AyNTZrMaECBCW4SFiqohweSdzSsmbu5Gj4PwPoOfC4lKkRLsrfvT6DdGNwgtNig3VkcILTZIV3YWt1MgU --filternode=/ip4/172.18.135.130/tcp/54114/p2p/16Uiu2HAkuhryEkgSQAynQbnmwAcDai79xZ4sWad8LXvGFzznMpHs
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.72.76 waku e29cebf72eb6c3712eb6c845d94c2e1f34dd56ff6505f076e279d5617fb73aeb
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID e29cebf72eb6. Setting up logs at ./log/docker/node2_2024-10-29_09-47-30__e49b5cdc-2448-4458-8200-24ca5c38b751__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 24830
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24830/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24830/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.72.76/tcp/24831/p2p/16Uiu2HAmJRqrNXD2eqDdGCb7jVTrd9zqeSYCpuDWjJFZUWFZ2GSx","/ip4/172.18.72.76/tcp/24832/ws/p2p/16Uiu2HAmJRqrNXD2eqDdGCb7jVTrd9zqeSYCpuDWjJFZUWFZ2GSx"],"enrUri":"enr:-L24QLM-zaV1pOVXH93J9w7ADcV_UUXG45VhUqz1a2B4FJKVUFgyX9kiYaC-mUJq1xaF5s4IFalFA68iR-TpUoeoKkECgmlkgnY0gmlwhKwSSEyKbXVsdGlhZGRyc5YACASsEkhMBmD_AAoErBJITAZhAN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDVcf2LzWxyfI3JzW0hsy2GWJFxBYEP1_IDtNr4WdntqWDdGNwgmD_g3VkcIJhAYV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24830/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.135.130/tcp/54114/p2p/16Uiu2HAkuhryEkgSQAynQbnmwAcDai79xZ4sWad8LXvGFzznMpHs"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54113/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24830/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "e8f7fa0d-e7a2-4936-a1e9-e7113b7e4abc", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"e8f7fa0d-e7a2-4936-a1e9-e7113b7e4abc","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54113/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "extraField": "extraValue"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:54113/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 7d1defe087dd
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id e29cebf72eb6
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 7d1defe087dd. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.