[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_missing_payload with id: 2024-10-29_09-51-57__fab08938-e9f5-4d8f-9fcd-e3c5e224bf63
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-10-29_09-51-57__fab08938-e9f5-4d8f-9fcd-e3c5e224bf63__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.154.7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['40828', '40829', '40830', '40831', '40832']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 40828:40828 -p 40829:40829 -p 40830:40830 -p 40831:40831 -p 40832:40832 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40830 --rest-port=40828 --tcp-port=40829 --discv5-udp-port=40831 --rest-address=0.0.0.0 --nat=extip:172.18.154.7 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1ddebc1a4ac4ad4caa7ecbb6ae53d0201df2122e2519cbacdc56ad9b80b9ed5a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40832 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.154.7 waku bd4cc9e600e13574a39e43b8d26a69894682e102cbbf46898bb7ea2b31b3f9a6
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container f1c76114dbfe. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID bd4cc9e600e1. Setting up logs at ./log/docker/receiving_node1_2024-10-29_09-51-57__fab08938-e9f5-4d8f-9fcd-e3c5e224bf63__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 40828
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40828/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40828/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.154.7/tcp/40829/p2p/16Uiu2HAm2YA6Eq1okeBwy7gXCNxhQtRqqxfS3C2BuMiuSUc1auTA","/ip4/172.18.154.7/tcp/40830/ws/p2p/16Uiu2HAm2YA6Eq1okeBwy7gXCNxhQtRqqxfS3C2BuMiuSUc1auTA"],"enrUri":"enr:-L24QIORnYQPTBijsaRYlDAxd3MBVhEB74bScRCV6dkkOnVbJcY5-Y14ZPq30tvDCPShwT6hzKuzlTa0uDrLxAZcJOkCgmlkgnY0gmlwhKwSmgeKbXVsdGlhZGRyc5YACASsEpoHBp99AAoErBKaBwafft0DgnJzhQADAQAAiXNlY3AyNTZrMaECaasUJZGut3Wy33cn3l21_Q1DB3B7UrvnFhe2-dRMIoWDdGNwgp99g3VkcIKff4V3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-10-29_09-51-57__fab08938-e9f5-4d8f-9fcd-e3c5e224bf63__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.88.69
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['14213', '14214', '14215', '14216', '14217']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 14213:14213 -p 14214:14214 -p 14215:14215 -p 14216:14216 -p 14217:14217 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14215 --rest-port=14213 --tcp-port=14214 --discv5-udp-port=14216 --rest-address=0.0.0.0 --nat=extip:172.18.88.69 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=be643045fe6fbb7db13a615de6eebd1519b5ddeceef0bfe7dcc2ddfd5aa4be2a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14217 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.88.69 waku d672469051be75977ec6e8103d077abacd5abbf38f42c1c397bc739cc8e4b503
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID d672469051be. Setting up logs at ./log/docker/receiving_node2_2024-10-29_09-51-57__fab08938-e9f5-4d8f-9fcd-e3c5e224bf63__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 14213
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14213/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14213/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.88.69/tcp/14214/p2p/16Uiu2HAm5MeMjMbxDjbdyU43xEpyBRQ2ewZXQKCjzNbAe7THNhnL","/ip4/172.18.88.69/tcp/14215/ws/p2p/16Uiu2HAm5MeMjMbxDjbdyU43xEpyBRQ2ewZXQKCjzNbAe7THNhnL"],"enrUri":"enr:-L24QNUHPUnv-Nbo3rNSle8HGYyxWeY9DklbpormSBRd52pFEZxvNsHPm0n8ubArtjC6vvEpNQ_HMVQfv6V6XjeBL94CgmlkgnY0gmlwhKwSWEWKbXVsdGlhZGRyc5YACASsElhFBjeGAAoErBJYRQY3h90DgnJzhQADAQAAiXNlY3AyNTZrMaECk4y2WKk_lmDsGvD5uMMyhb_39_1G6-rzvsoRSxU3I22DdGNwgjeGg3VkcII3iIV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14213/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.154.7/tcp/40829/p2p/16Uiu2HAm2YA6Eq1okeBwy7gXCNxhQtRqqxfS3C2BuMiuSUc1auTA"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-10-29_09-51-57__fab08938-e9f5-4d8f-9fcd-e3c5e224bf63__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.115.6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['34685', '34686', '34687', '34688', '34689']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 34685:34685 -p 34686:34686 -p 34687:34687 -p 34688:34688 -p 34689:34689 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34687 --rest-port=34685 --tcp-port=34686 --discv5-udp-port=34688 --rest-address=0.0.0.0 --nat=extip:172.18.115.6 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4b75cc48ffb3c99f00dd36fa4f58cec11ecea1d209ff3b395d77a6987b3d13c6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34689 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QIORnYQPTBijsaRYlDAxd3MBVhEB74bScRCV6dkkOnVbJcY5-Y14ZPq30tvDCPShwT6hzKuzlTa0uDrLxAZcJOkCgmlkgnY0gmlwhKwSmgeKbXVsdGlhZGRyc5YACASsEpoHBp99AAoErBKaBwafft0DgnJzhQADAQAAiXNlY3AyNTZrMaECaasUJZGut3Wy33cn3l21_Q1DB3B7UrvnFhe2-dRMIoWDdGNwgp99g3VkcIKff4V3YWt1Mgk --lightpushnode=/ip4/172.18.154.7/tcp/40829/p2p/16Uiu2HAm2YA6Eq1okeBwy7gXCNxhQtRqqxfS3C2BuMiuSUc1auTA --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.115.6 waku c8ebeac32d564f32bb5f5e25fd448434dfc521d1fcf9863a70c238dc9933557a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID c8ebeac32d56. Setting up logs at ./log/docker/lightpush_node1_2024-10-29_09-51-57__fab08938-e9f5-4d8f-9fcd-e3c5e224bf63__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 34685
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34685/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34685/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.115.6/tcp/34686/p2p/16Uiu2HAmULroZtAWcZ7CwHiNS3siPJk11kDKsQ2K6s8ckaWdFFgY","/ip4/172.18.115.6/tcp/34687/ws/p2p/16Uiu2HAmULroZtAWcZ7CwHiNS3siPJk11kDKsQ2K6s8ckaWdFFgY"],"enrUri":"enr:-L24QKwDOZgRO0SIkxCdzDlkxxM_0wGkcxtWxMabIln_YV_OFqaMvGPFp6IPqqVDWlZyh_lClDxKlNa6OrDUqrbXjlMCgmlkgnY0gmlwhKwScwaKbXVsdGlhZGRyc5YACASsEnMGBod-AAoErBJzBgaHf90DgnJzhQADAQAAiXNlY3AyNTZrMaED6RYAvvPKBcHiqNGXWtHrNRnKcSYeRCbLndcWFtSAEz2DdGNwgod-g3VkcIKHgIV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34685/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.154.7/tcp/40829/p2p/16Uiu2HAm2YA6Eq1okeBwy7gXCNxhQtRqqxfS3C2BuMiuSUc1auTA"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34685/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.88.69/tcp/14214/p2p/16Uiu2HAm5MeMjMbxDjbdyU43xEpyBRQ2ewZXQKCjzNbAe7THNhnL"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40828/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14213/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34685/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"contentTopic": "/myapp/1/latest/proto", "timestamp": 1730195523312432896}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:34685/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id bd4cc9e600e1
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id d672469051be
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container bd4cc9e600e1. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id c8ebeac32d56
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container d672469051be. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.