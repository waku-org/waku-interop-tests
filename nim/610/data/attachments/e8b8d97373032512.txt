[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_pubsub_topic_also_in_docker_flags[/waku/2/rs/2/0] with id: 2025-01-08_04-04-18__3bd752f3-4fe9-4d76-a8bb-fba77e5cd689
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-08_04-04-18__3bd752f3-4fe9-4d76-a8bb-fba77e5cd689__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.57.97
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['19021', '19022', '19023', '19024', '19025']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 19021:19021 -p 19022:19022 -p 19023:19023 -p 19024:19024 -p 19025:19025 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19023 --rest-port=19021 --tcp-port=19022 --discv5-udp-port=19024 --rest-address=0.0.0.0 --nat=extip:172.18.57.97 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=a90a3e01ce5ec5f564c736fc4fc9946a5d06741ea0a60b1a15dfb82a3ceaf391 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19025 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/2/0 --content-topic=/myapp/1/latest/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.57.97 waku 0f91855ca56d470f7aa3cef27daae4ff1f5ae8e2522e44461e31030097da3190
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 0f91855ca56d. Setting up logs at ./log/docker/node1_2025-01-08_04-04-18__3bd752f3-4fe9-4d76-a8bb-fba77e5cd689__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 19021
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 523e87dbebbc. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19021/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19021/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.57.97/tcp/19022/p2p/16Uiu2HAmRDdQTU7wJdovqpCeZ8hzZhHigCrymZMMsY69roAi18Nj","/ip4/172.18.57.97/tcp/19023/ws/p2p/16Uiu2HAmRDdQTU7wJdovqpCeZ8hzZhHigCrymZMMsY69roAi18Nj"],"enrUri":"enr:-L24QMiNUhIyIsPB_u0M7FtNsaeE3mP8DeFHLH0QQBYRzoshGf9TWC8WqKDq5DmrrdvQYvW04YA2ZHBTnFmaScu1tiYCgmlkgnY0gmlwhKwSOWGKbXVsdGlhZGRyc5YACASsEjlhBkpOAAoErBI5YQZKT90DgnJzhQACAQAAiXNlY3AyNTZrMaEDuqi6DqFVd_NjPayZkzxXo3EyRZnrpE91YTJeFxWoUxiDdGNwgkpOg3VkcIJKUIV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-08_04-04-18__3bd752f3-4fe9-4d76-a8bb-fba77e5cd689__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.88.92
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['1614', '1615', '1616', '1617', '1618']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 1614:1614 -p 1615:1615 -p 1616:1616 -p 1617:1617 -p 1618:1618 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=1616 --rest-port=1614 --tcp-port=1615 --discv5-udp-port=1617 --rest-address=0.0.0.0 --nat=extip:172.18.88.92 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=429d0bb9053c20f6db65fe4b6c35dbc6bb3abe084d8a2728ed33e334cd7e5661 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=1618 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QMiNUhIyIsPB_u0M7FtNsaeE3mP8DeFHLH0QQBYRzoshGf9TWC8WqKDq5DmrrdvQYvW04YA2ZHBTnFmaScu1tiYCgmlkgnY0gmlwhKwSOWGKbXVsdGlhZGRyc5YACASsEjlhBkpOAAoErBI5YQZKT90DgnJzhQACAQAAiXNlY3AyNTZrMaEDuqi6DqFVd_NjPayZkzxXo3EyRZnrpE91YTJeFxWoUxiDdGNwgkpOg3VkcIJKUIV3YWt1MgU --pubsub-topic=/waku/2/rs/2/0 --content-topic=/myapp/1/latest/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.88.92 waku 36a2d9d51b97db1eda3185516a27af74b52c1649746f11d776562c4ea56d0324
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 36a2d9d51b97. Setting up logs at ./log/docker/node2_2025-01-08_04-04-18__3bd752f3-4fe9-4d76-a8bb-fba77e5cd689__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 1614
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1614/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1614/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.88.92/tcp/1615/p2p/16Uiu2HAmNojmXZhZFviYccuek8qj4Y25i5dJGGzSjVQteqoxCMcu","/ip4/172.18.88.92/tcp/1616/ws/p2p/16Uiu2HAmNojmXZhZFviYccuek8qj4Y25i5dJGGzSjVQteqoxCMcu"],"enrUri":"enr:-L24QKZsO0IePq4YcgHE14lC-xQ64UO5dGkWCQUiPMSW4D8EXZGs1eu_jni8P_PiK9KAkrQNDiIaR629J7eCs3WCQ-ACgmlkgnY0gmlwhKwSWFyKbXVsdGlhZGRyc5YACASsElhcBgZPAAoErBJYXAYGUN0DgnJzhQACAQAAiXNlY3AyNTZrMaEDltKbxxKU6HHArm2xuP4vDTfpaafzEMIbQKfF45_LaVqDdGNwggZPg3VkcIIGUYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1614/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.57.97/tcp/19022/p2p/16Uiu2HAmRDdQTU7wJdovqpCeZ8hzZhHigCrymZMMsY69roAi18Nj"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19021/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1614/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19021/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19021/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1736309061493215744,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1614/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1736309061493215744,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 0f91855ca56d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 36a2d9d51b97
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 0f91855ca56d. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.