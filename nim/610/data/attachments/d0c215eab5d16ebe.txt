[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_valid_version with id: 2025-01-08_04-07-29__760cf893-adbd-4e9d-a357-eda0d59c0c45
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-01-08_04-07-29__760cf893-adbd-4e9d-a357-eda0d59c0c45__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.174.187
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['58607', '58608', '58609', '58610', '58611']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 58607:58607 -p 58608:58608 -p 58609:58609 -p 58610:58610 -p 58611:58611 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=58609 --rest-port=58607 --tcp-port=58608 --discv5-udp-port=58610 --rest-address=0.0.0.0 --nat=extip:172.18.174.187 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bf2a9c9fce2edd9f60cca5d8b9b6d9c40ab5ea50d8c91708eebb4d0e15fbe7dd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=58611 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.174.187 waku 4bda1294ab0303a25ccebdd59457e507da35ac88f4d217be05c153e729025648
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 4bda1294ab03. Setting up logs at ./log/docker/receiving_node1_2025-01-08_04-07-29__760cf893-adbd-4e9d-a357-eda0d59c0c45__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 58607
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 7acbab4d54d0. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58607/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58607/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.174.187/tcp/58608/p2p/16Uiu2HAm5jqQEFmiRiGa13AnH4ngHvjQMKTbANqeoEnPR3fpkf55","/ip4/172.18.174.187/tcp/58609/ws/p2p/16Uiu2HAm5jqQEFmiRiGa13AnH4ngHvjQMKTbANqeoEnPR3fpkf55"],"enrUri":"enr:-L24QMmzG3dg07jwX-WgMkkdkfXEwgUYraYwBc_dbFxyAB4tSOjuiombCNfHfUMU75-_b-DE0apU6bnonf7KgJZRqVwCgmlkgnY0gmlwhKwSrruKbXVsdGlhZGRyc5YACASsEq67BuTwAAoErBKuuwbk8d0DgnJzhQADAQAAiXNlY3AyNTZrMaECmTv5_hKjTQhmlUaLd0mhUm8uHqytGLXlbBnXE3AG2SyDdGNwguTwg3VkcILk8oV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-01-08_04-07-29__760cf893-adbd-4e9d-a357-eda0d59c0c45__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.100.126
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['49434', '49435', '49436', '49437', '49438']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 49434:49434 -p 49435:49435 -p 49436:49436 -p 49437:49437 -p 49438:49438 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=49436 --rest-port=49434 --tcp-port=49435 --discv5-udp-port=49437 --rest-address=0.0.0.0 --nat=extip:172.18.100.126 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c9ec9aa7f09f224af1cda7b423ab1caaf87e5d99d7beef892dc0d2d35b10ff73 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=49438 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.100.126 waku 3a607a50546bce5f40d11c8c52c0d2bf471b0eb68021ff7199d8121e72de12ce
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 3a607a50546b. Setting up logs at ./log/docker/receiving_node2_2025-01-08_04-07-29__760cf893-adbd-4e9d-a357-eda0d59c0c45__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 49434
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49434/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49434/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.100.126/tcp/49435/p2p/16Uiu2HAmPTx9s3Jd1A5q7SUnSQPsht2sQLbvzHpZTkLxyUVh26in","/ip4/172.18.100.126/tcp/49436/ws/p2p/16Uiu2HAmPTx9s3Jd1A5q7SUnSQPsht2sQLbvzHpZTkLxyUVh26in"],"enrUri":"enr:-L24QKWgRJQr2ElTvEc6LXdyquQ1Dp0_UJTrjB8KC1HvV8BGRBZJFzA5k9k5OQ_rZiAkyxV7hoLoMjzebjoaPy7tbzgCgmlkgnY0gmlwhKwSZH6KbXVsdGlhZGRyc5YACASsEmR-BsEbAAoErBJkfgbBHN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDoJyu4X6FsSbFk8Syvk1w7BqSBmMiR_yQtrSS-siJoxODdGNwgsEbg3VkcILBHYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49434/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.174.187/tcp/58608/p2p/16Uiu2HAm5jqQEFmiRiGa13AnH4ngHvjQMKTbANqeoEnPR3fpkf55"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-01-08_04-07-29__760cf893-adbd-4e9d-a357-eda0d59c0c45__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.247.136
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['36495', '36496', '36497', '36498', '36499']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 36495:36495 -p 36496:36496 -p 36497:36497 -p 36498:36498 -p 36499:36499 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36497 --rest-port=36495 --tcp-port=36496 --discv5-udp-port=36498 --rest-address=0.0.0.0 --nat=extip:172.18.247.136 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=707cf1ab69abcecdffeb00d0fa6d7b9a787ddfbf8b05df9aea714e41f53ccf4e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36499 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QMmzG3dg07jwX-WgMkkdkfXEwgUYraYwBc_dbFxyAB4tSOjuiombCNfHfUMU75-_b-DE0apU6bnonf7KgJZRqVwCgmlkgnY0gmlwhKwSrruKbXVsdGlhZGRyc5YACASsEq67BuTwAAoErBKuuwbk8d0DgnJzhQADAQAAiXNlY3AyNTZrMaECmTv5_hKjTQhmlUaLd0mhUm8uHqytGLXlbBnXE3AG2SyDdGNwguTwg3VkcILk8oV3YWt1Mgk --lightpushnode=/ip4/172.18.174.187/tcp/58608/p2p/16Uiu2HAm5jqQEFmiRiGa13AnH4ngHvjQMKTbANqeoEnPR3fpkf55 --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.247.136 waku 3d6ac2e662bef23bbe0a215ba787472c4cc9157530c5559346af6891d8c497b1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 3d6ac2e662be. Setting up logs at ./log/docker/lightpush_node1_2025-01-08_04-07-29__760cf893-adbd-4e9d-a357-eda0d59c0c45__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 36495
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36495/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36495/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.247.136/tcp/36496/p2p/16Uiu2HAmPMt4mmppLh4fRd8f2zQQXdvZpDB6DvRNYGcZZFmLroua","/ip4/172.18.247.136/tcp/36497/ws/p2p/16Uiu2HAmPMt4mmppLh4fRd8f2zQQXdvZpDB6DvRNYGcZZFmLroua"],"enrUri":"enr:-L24QB91DMx526OEy-z5_wsf_K4U5SCHQt2IbJ2UUOybbrmBY-hXoYpdGP3yFThQBj5KDD4J2VXfu0cY75wEEw7nFkICgmlkgnY0gmlwhKwS94iKbXVsdGlhZGRyc5YACASsEveIBo6QAAoErBL3iAaOkd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDnw6Tgs2sIb48fUjumKZE1EEQmMyVOFX_tnwNBXe4kzmDdGNwgo6Qg3VkcIKOkoV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36495/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.174.187/tcp/58608/p2p/16Uiu2HAm5jqQEFmiRiGa13AnH4ngHvjQMKTbANqeoEnPR3fpkf55"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36495/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.100.126/tcp/49435/p2p/16Uiu2HAmPTx9s3Jd1A5q7SUnSQPsht2sQLbvzHpZTkLxyUVh26in"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:58607/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49434/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36495/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1736309253114566656, "version": 10}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58607/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":10,"timestamp":1736309253114566656,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49434/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":10,"timestamp":1736309253114566656,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 4bda1294ab03
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 3a607a50546b
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 4bda1294ab03. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 3d6ac2e662be
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 3a607a50546b. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.