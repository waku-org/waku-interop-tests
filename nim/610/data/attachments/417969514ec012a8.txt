[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_missing_pubsub_topics with id: 2025-01-08_04-04-01__5d18ae52-6f33-455d-a7bb-e0f39df24edf
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-01-08_04-04-01__5d18ae52-6f33-455d-a7bb-e0f39df24edf__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.55.239
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['43007', '43008', '43009', '43010', '43011']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 43007:43007 -p 43008:43008 -p 43009:43009 -p 43010:43010 -p 43011:43011 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=43009 --rest-port=43007 --tcp-port=43008 --discv5-udp-port=43010 --rest-address=0.0.0.0 --nat=extip:172.18.55.239 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b0e9dbf561cc1bdbf25efdeb8b8e31b95d4aef8fa8d7ad6f05a70a79350af5ef --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=43011 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.55.239 waku c1206b0cee8416a95b044e9fec03b60398aac01e796ba6d97b64eb9414d687b6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID c1206b0cee84. Setting up logs at ./log/docker/receiving_node1_2025-01-08_04-04-01__5d18ae52-6f33-455d-a7bb-e0f39df24edf__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 43007
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 8be9cd0575b9. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43007/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43007/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.55.239/tcp/43008/p2p/16Uiu2HAkwnEFFnJfAcN9ytJzFLo2jq7EHv6PKV5ry71oyj7KDBZM","/ip4/172.18.55.239/tcp/43009/ws/p2p/16Uiu2HAkwnEFFnJfAcN9ytJzFLo2jq7EHv6PKV5ry71oyj7KDBZM"],"enrUri":"enr:-L24QORhj_zPPFF38yuDmIXlfcuXxaY4jbd5r5wy0AyU2jvHV_5Fh6PNxJlhAOrytxQ53vugY3PT6RSSdtGk9KTz63QCgmlkgnY0gmlwhKwSN--KbXVsdGlhZGRyc5YACASsEjfvBqgAAAoErBI37waoAd0DgnJzhQADAQAAiXNlY3AyNTZrMaECIvt5Vuj0ES59cA--FahtX2iElRKtomPWotuljpDzWfyDdGNwgqgAg3VkcIKoAoV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-01-08_04-04-01__5d18ae52-6f33-455d-a7bb-e0f39df24edf__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.24.165
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['19511', '19512', '19513', '19514', '19515']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 19511:19511 -p 19512:19512 -p 19513:19513 -p 19514:19514 -p 19515:19515 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19513 --rest-port=19511 --tcp-port=19512 --discv5-udp-port=19514 --rest-address=0.0.0.0 --nat=extip:172.18.24.165 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cdf795cb0bdbebc0a8ebb4e22aa3a9e5a367a05eacd02e92ba7b229cf9bcc8eb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19515 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.24.165 waku 27d88e13974630caf85481d7c26673c821d5403cd8abee705d252ca21006a0d1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 27d88e139746. Setting up logs at ./log/docker/receiving_node2_2025-01-08_04-04-01__5d18ae52-6f33-455d-a7bb-e0f39df24edf__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 19511
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19511/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19511/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.24.165/tcp/19512/p2p/16Uiu2HAmRhNTtbkzH6cWN5xTA5MJCxLcpPMpF4mpww15dKZMjemq","/ip4/172.18.24.165/tcp/19513/ws/p2p/16Uiu2HAmRhNTtbkzH6cWN5xTA5MJCxLcpPMpF4mpww15dKZMjemq"],"enrUri":"enr:-L24QINvTUXfXxXuU0cPq-pUh8tqPVjgPBIXbG7ViRBj3g7AeoN8dnbJP1DcTa7s812LLy2l0jcHoyHXXmPaJK-Osj8CgmlkgnY0gmlwhKwSGKWKbXVsdGlhZGRyc5YACASsEhilBkw4AAoErBIYpQZMOd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDwcQYh4HaMgp3iXMoBkLaNc-g5aJVWsu022jC8KmDmqyDdGNwgkw4g3VkcIJMOoV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19511/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.55.239/tcp/43008/p2p/16Uiu2HAkwnEFFnJfAcN9ytJzFLo2jq7EHv6PKV5ry71oyj7KDBZM"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-01-08_04-04-01__5d18ae52-6f33-455d-a7bb-e0f39df24edf__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.157.196
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['39504', '39505', '39506', '39507', '39508']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 39504:39504 -p 39505:39505 -p 39506:39506 -p 39507:39507 -p 39508:39508 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39506 --rest-port=39504 --tcp-port=39505 --discv5-udp-port=39507 --rest-address=0.0.0.0 --nat=extip:172.18.157.196 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cc67f3dffac6db8be6ecb6af3a22ce66dfceac78c1540fc1d41ee5eb2e52b3ab --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39508 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QORhj_zPPFF38yuDmIXlfcuXxaY4jbd5r5wy0AyU2jvHV_5Fh6PNxJlhAOrytxQ53vugY3PT6RSSdtGk9KTz63QCgmlkgnY0gmlwhKwSN--KbXVsdGlhZGRyc5YACASsEjfvBqgAAAoErBI37waoAd0DgnJzhQADAQAAiXNlY3AyNTZrMaECIvt5Vuj0ES59cA--FahtX2iElRKtomPWotuljpDzWfyDdGNwgqgAg3VkcIKoAoV3YWt1Mgk --lightpushnode=/ip4/172.18.55.239/tcp/43008/p2p/16Uiu2HAkwnEFFnJfAcN9ytJzFLo2jq7EHv6PKV5ry71oyj7KDBZM --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.157.196 waku 34607596d5c7431a0f1050b026252823d45317357c902caeddcbf76b1d152b48
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 34607596d5c7. Setting up logs at ./log/docker/lightpush_node1_2025-01-08_04-04-01__5d18ae52-6f33-455d-a7bb-e0f39df24edf__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 39504
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39504/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39504/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.157.196/tcp/39505/p2p/16Uiu2HAkyFHQwcdHM54Ucqx1T5pkFB44RyrVgoKdv16FNxHmzabi","/ip4/172.18.157.196/tcp/39506/ws/p2p/16Uiu2HAkyFHQwcdHM54Ucqx1T5pkFB44RyrVgoKdv16FNxHmzabi"],"enrUri":"enr:-L24QB-QpCkxWja8PQUt11SO4dzFVxtP3eH2arDunXWBCZ76KZJCGyV4HEwA8rirCsEW0leTUJ1zdBclSb4a5s6u9hUCgmlkgnY0gmlwhKwSncSKbXVsdGlhZGRyc5YACASsEp3EBppRAAoErBKdxAaaUt0DgnJzhQADAQAAiXNlY3AyNTZrMaECOMVseBQXFMgrhKINwJWW-k3gqMO0H3lmtqFaoEU9sWmDdGNwgppRg3VkcIKaU4V3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39504/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.55.239/tcp/43008/p2p/16Uiu2HAkwnEFFnJfAcN9ytJzFLo2jq7EHv6PKV5ry71oyj7KDBZM"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39504/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.24.165/tcp/19512/p2p/16Uiu2HAmRhNTtbkzH6cWN5xTA5MJCxLcpPMpF4mpww15dKZMjemq"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43007/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19511/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39504/lightpush/v1/message" -H "Content-Type: application/json" -d '{"message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1736309045586953728}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:39504/lightpush/v1/message. Response content: b'Failed to request a message push: not_published_to_any_peer'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id c1206b0cee84
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 27d88e139746
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container c1206b0cee84. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 34607596d5c7
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 27d88e139746. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.