[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_relay_receiving_node_not_connected_directly_to_relaying_node with id: 2024-11-12_04-02-41__89c22b8c-32e8-4101-a78e-16cf4cea3f2b
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-12_04-02-41__89c22b8c-32e8-4101-a78e-16cf4cea3f2b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-11-12_04-02-41__89c22b8c-32e8-4101-a78e-16cf4cea3f2b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-11-12_04-02-41__89c22b8c-32e8-4101-a78e-16cf4cea3f2b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.101.44
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['44609', '44610', '44611', '44612', '44613']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 44609:44609 -p 44610:44610 -p 44611:44611 -p 44612:44612 -p 44613:44613 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44611 --rest-port=44609 --tcp-port=44610 --discv5-udp-port=44612 --rest-address=0.0.0.0 --nat=extip:172.18.101.44 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9d34973eebaab496d2277f0b5e6fb64a8e1ea58e9346bff2e7d82efb1a34ffad --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44613 --metrics-logging=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.101.44 waku 4cd7365fe4bcf9a97e584a41699eab7ee1ff3d065292bdc92c88979ae61a9994
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 4cd7365fe4bc. Setting up logs at ./log/docker/node1_2024-11-12_04-02-41__89c22b8c-32e8-4101-a78e-16cf4cea3f2b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 44609
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 8d29a22c0e9f. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44609/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44609/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.101.44/tcp/44610/p2p/16Uiu2HAmDGYcPCigMARDJp8Qq7WCTUUD2phHow4vHwhBhDLcGj2f","/ip4/172.18.101.44/tcp/44611/ws/p2p/16Uiu2HAmDGYcPCigMARDJp8Qq7WCTUUD2phHow4vHwhBhDLcGj2f"],"enrUri":"enr:-L24QMdrpN7Uf_CB0dtRKOvB-JTD48m9QaNXvt1AFdWlarkZFzjYj9dk0eeednzVIPEQeqSKB2_jIGqaLDMqTGSFdgUCgmlkgnY0gmlwhKwSZSyKbXVsdGlhZGRyc5YACASsEmUsBq5CAAoErBJlLAauQ90DgnJzhQADAQAAiXNlY3AyNTZrMaEDCRvOGfaCIuykaULBl9FEsdpf1vXLH_9Xwr1YcUBYBbCDdGNwgq5Cg3VkcIKuRIV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.110.67
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['21136', '21137', '21138', '21139', '21140']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 21136:21136 -p 21137:21137 -p 21138:21138 -p 21139:21139 -p 21140:21140 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=21138 --rest-port=21136 --tcp-port=21137 --discv5-udp-port=21139 --rest-address=0.0.0.0 --nat=extip:172.18.110.67 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=abd1770701dfa35d433df0d4a2dcb3bcda66fb78c99ceb9a9afaa63abf0e3f24 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=21140 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QMdrpN7Uf_CB0dtRKOvB-JTD48m9QaNXvt1AFdWlarkZFzjYj9dk0eeednzVIPEQeqSKB2_jIGqaLDMqTGSFdgUCgmlkgnY0gmlwhKwSZSyKbXVsdGlhZGRyc5YACASsEmUsBq5CAAoErBJlLAauQ90DgnJzhQADAQAAiXNlY3AyNTZrMaEDCRvOGfaCIuykaULBl9FEsdpf1vXLH_9Xwr1YcUBYBbCDdGNwgq5Cg3VkcIKuRIV3YWt1MgE
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.110.67 waku 6040276a26f35163c6ad1b727a835da5a96aff98a33fe81c6a70670a63317cdf
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 6040276a26f3. Setting up logs at ./log/docker/node2_2024-11-12_04-02-41__89c22b8c-32e8-4101-a78e-16cf4cea3f2b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 21136
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21136/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21136/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.110.67/tcp/21137/p2p/16Uiu2HAm8wrgzr3eTfez1gjmDUS3ywA6cABZ2Ahbc3ARx2QcJLMF","/ip4/172.18.110.67/tcp/21138/ws/p2p/16Uiu2HAm8wrgzr3eTfez1gjmDUS3ywA6cABZ2Ahbc3ARx2QcJLMF"],"enrUri":"enr:-L24QBxApPLBRnAwbXQDc-HTF7DxgJzxO9NqN162tntfroZkJ7B8Ww0dbDuo8ckmAVDkSNbBvc3--y7R8GrlOK1a1M4CgmlkgnY0gmlwhKwSbkOKbXVsdGlhZGRyc5YACASsEm5DBlKRAAoErBJuQwZSkt0DgnJzhQADAQAAiXNlY3AyNTZrMaECyON28gpfK3GCFDLVOdDmPJy6xjB6J4Dr-6bzjl1s3zqDdGNwglKRg3VkcIJSk4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.14.36
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['40445', '40446', '40447', '40448', '40449']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 40445:40445 -p 40446:40446 -p 40447:40447 -p 40448:40448 -p 40449:40449 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40447 --rest-port=40445 --tcp-port=40446 --discv5-udp-port=40448 --rest-address=0.0.0.0 --nat=extip:172.18.14.36 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1bddc12e8ab2f0590bd644b8729afdb55efaf47fb08dbc99fb5ed1abacdc23bc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40449 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QBxApPLBRnAwbXQDc-HTF7DxgJzxO9NqN162tntfroZkJ7B8Ww0dbDuo8ckmAVDkSNbBvc3--y7R8GrlOK1a1M4CgmlkgnY0gmlwhKwSbkOKbXVsdGlhZGRyc5YACASsEm5DBlKRAAoErBJuQwZSkt0DgnJzhQADAQAAiXNlY3AyNTZrMaECyON28gpfK3GCFDLVOdDmPJy6xjB6J4Dr-6bzjl1s3zqDdGNwglKRg3VkcIJSk4V3YWt1MgE
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.14.36 waku 9b51aa5c811044aaa46155faed714a02ed8543f114bbf402349bef22f3ae0b17
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 9b51aa5c8110. Setting up logs at ./log/docker/node3_2024-11-12_04-02-41__89c22b8c-32e8-4101-a78e-16cf4cea3f2b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 40445
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40445/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40445/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.14.36/tcp/40446/p2p/16Uiu2HAm8ccdmYdUA2naQPE1DYPrdZ8QE4pthrnur5SdrSN4HNGy","/ip4/172.18.14.36/tcp/40447/ws/p2p/16Uiu2HAm8ccdmYdUA2naQPE1DYPrdZ8QE4pthrnur5SdrSN4HNGy"],"enrUri":"enr:-L24QBCOkLNOc7kIZ4NujKaOQQH_fewkNQmRVilCsVHeJg6HYv3DxiB3PZlwvVJAxqwC9LsEv1bKOEBt4b6ze_XKbFECgmlkgnY0gmlwhKwSDiSKbXVsdGlhZGRyc5YACASsEg4kBp3-AAoErBIOJAad_90DgnJzhQADAQAAiXNlY3AyNTZrMaECw_WJVPbtA2eiss9K0wOfwBUpiW7KHDHOJAbciZLn7CKDdGNwgp3-g3VkcIKeAIV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44609/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21136/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40445/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44609/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.110.67/tcp/21137/p2p/16Uiu2HAm8wrgzr3eTfez1gjmDUS3ywA6cABZ2Ahbc3ARx2QcJLMF","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21136/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.14.36/tcp/40446/p2p/16Uiu2HAm8ccdmYdUA2naQPE1DYPrdZ8QE4pthrnur5SdrSN4HNGy","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"},{"multiaddr":"/ip4/172.18.101.44/tcp/44610/p2p/16Uiu2HAmDGYcPCigMARDJp8Qq7WCTUUD2phHow4vHwhBhDLcGj2f","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40445/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.110.67/tcp/21137/p2p/16Uiu2HAm8wrgzr3eTfez1gjmDUS3ywA6cABZ2Ahbc3ARx2QcJLMF","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44609/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.relay:relay.py:123 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40445/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1731384195976574976,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 4cd7365fe4bc
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 6040276a26f3
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 4cd7365fe4bc. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 9b51aa5c8110
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 6040276a26f3. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.