[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_meta with id: 2024-11-12_04-14-53__edf57728-9c18-4f9d-b18f-f7e602c34b29
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-11-12_04-14-53__edf57728-9c18-4f9d-b18f-f7e602c34b29__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.178.128
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['30926', '30927', '30928', '30929', '30930']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 30926:30926 -p 30927:30927 -p 30928:30928 -p 30929:30929 -p 30930:30930 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=30928 --rest-port=30926 --tcp-port=30927 --discv5-udp-port=30929 --rest-address=0.0.0.0 --nat=extip:172.18.178.128 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6e61f21c8f9fdc2d2cbc19281a2e0bb447c3dcad3acb36dd4e065ac83fbb54a0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=30930 --metrics-logging=true --lightpush=true --relay=true
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container a5b6ce49771f. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.178.128 waku afa6319a41d10f3cc7d6e8541da5e5c7b0ca64d42722bccb251781e56fec1bd8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID afa6319a41d1. Setting up logs at ./log/docker/receiving_node1_2024-11-12_04-14-53__edf57728-9c18-4f9d-b18f-f7e602c34b29__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 30926
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30926/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30926/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.178.128/tcp/30927/p2p/16Uiu2HAmKG7KuopGED7RKDCbBthxHRnqsGAJQ6fPn7UFz4fqssrG","/ip4/172.18.178.128/tcp/30928/ws/p2p/16Uiu2HAmKG7KuopGED7RKDCbBthxHRnqsGAJQ6fPn7UFz4fqssrG"],"enrUri":"enr:-L24QLYIgCDr7WvYRJzXWCbyEh-v1NNWJRJPtCneiGsnTOv9eaRF8yeRZ1GoODmYvNOcURkvreKhtIjeYOFvGYniRtQCgmlkgnY0gmlwhKwSsoCKbXVsdGlhZGRyc5YACASsErKABnjPAAoErBKygAZ40N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDYiVWgkjZ7NlxTHLazhGhVp9oUyGhHvIQ-dUYK_votgGDdGNwgnjPg3VkcIJ40YV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-11-12_04-14-53__edf57728-9c18-4f9d-b18f-f7e602c34b29__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.49.142
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['61491', '61492', '61493', '61494', '61495']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 61491:61491 -p 61492:61492 -p 61493:61493 -p 61494:61494 -p 61495:61495 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61493 --rest-port=61491 --tcp-port=61492 --discv5-udp-port=61494 --rest-address=0.0.0.0 --nat=extip:172.18.49.142 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=51cf4cf39b4913a32fd11abdbae5376aac5b881d85242fd5dbff9eab5a97ffee --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61495 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.49.142 waku d7a8c0024ba6aede056600a501b56270fa5823a6acc57466f9fba6786ab79ce8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID d7a8c0024ba6. Setting up logs at ./log/docker/receiving_node2_2024-11-12_04-14-53__edf57728-9c18-4f9d-b18f-f7e602c34b29__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 61491
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61491/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61491/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.49.142/tcp/61492/p2p/16Uiu2HAmDMkeqBmbqUW9qA9fm8gbtrJC3Mqy31YaQcJU1aPZGvFF","/ip4/172.18.49.142/tcp/61493/ws/p2p/16Uiu2HAmDMkeqBmbqUW9qA9fm8gbtrJC3Mqy31YaQcJU1aPZGvFF"],"enrUri":"enr:-L24QCYE_sR-IJ2HojQZ3lK4hP0uUXc7-bJ8TxbNfiOdocy7ERNkpWcQT5uWGTdunKguMLMmrHxOmy8oc7zrSwl3mrECgmlkgnY0gmlwhKwSMY6KbXVsdGlhZGRyc5YACASsEjGOBvA0AAoErBIxjgbwNd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDCnFTRpOL28rIs3gvj2H1c73SKuKR6g0UAB4gqKqeGQaDdGNwgvA0g3VkcILwNoV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61491/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.178.128/tcp/30927/p2p/16Uiu2HAmKG7KuopGED7RKDCbBthxHRnqsGAJQ6fPn7UFz4fqssrG"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-11-12_04-14-53__edf57728-9c18-4f9d-b18f-f7e602c34b29__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.45.205
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['8468', '8469', '8470', '8471', '8472']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 8468:8468 -p 8469:8469 -p 8470:8470 -p 8471:8471 -p 8472:8472 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8470 --rest-port=8468 --tcp-port=8469 --discv5-udp-port=8471 --rest-address=0.0.0.0 --nat=extip:172.18.45.205 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2c3eb2dae4d0f5e965faf6dfba5fd4c420b2b4ac6bc0e8bb0bae5ba6f1e6b35c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8472 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QLYIgCDr7WvYRJzXWCbyEh-v1NNWJRJPtCneiGsnTOv9eaRF8yeRZ1GoODmYvNOcURkvreKhtIjeYOFvGYniRtQCgmlkgnY0gmlwhKwSsoCKbXVsdGlhZGRyc5YACASsErKABnjPAAoErBKygAZ40N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDYiVWgkjZ7NlxTHLazhGhVp9oUyGhHvIQ-dUYK_votgGDdGNwgnjPg3VkcIJ40YV3YWt1Mgk --lightpushnode=/ip4/172.18.178.128/tcp/30927/p2p/16Uiu2HAmKG7KuopGED7RKDCbBthxHRnqsGAJQ6fPn7UFz4fqssrG --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.45.205 waku 6e279a38ca48e9177e37fe6215a43de013c11c139c2693de0117b5a2272abcdb
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 6e279a38ca48. Setting up logs at ./log/docker/lightpush_node1_2024-11-12_04-14-53__edf57728-9c18-4f9d-b18f-f7e602c34b29__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 8468
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8468/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8468/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.45.205/tcp/8469/p2p/16Uiu2HAm2rRKbze2Vbwqbx3ucAywwrb8Xq7ePJe7GsZrGtyK2Kw4","/ip4/172.18.45.205/tcp/8470/ws/p2p/16Uiu2HAm2rRKbze2Vbwqbx3ucAywwrb8Xq7ePJe7GsZrGtyK2Kw4"],"enrUri":"enr:-L24QLuCD0AVQz6mquQS9ohwHEht8Gw43xfB8nlem7t3OhTie5mrnt3VQooghYw6obBqpkmRy8hFWZQwkeqU9SjLKuECgmlkgnY0gmlwhKwSLc2KbXVsdGlhZGRyc5YACASsEi3NBiEVAAoErBItzQYhFt0DgnJzhQADAQAAiXNlY3AyNTZrMaECbljBHfeqNSOwrK8P-3xtiwTGZa8rXsX8i7eYFZRhpk-DdGNwgiEVg3VkcIIhF4V3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8468/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.178.128/tcp/30927/p2p/16Uiu2HAmKG7KuopGED7RKDCbBthxHRnqsGAJQ6fPn7UFz4fqssrG"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8468/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.49.142/tcp/61492/p2p/16Uiu2HAmDMkeqBmbqUW9qA9fm8gbtrJC3Mqy31YaQcJU1aPZGvFF"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30926/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61491/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8468/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1731384899263863040, "meta": "Light push works!!"}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:8468/lightpush/v1/message. Response content: b'Invalid message: Incorrect base64 string'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id afa6319a41d1
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id d7a8c0024ba6
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container afa6319a41d1. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 6e279a38ca48
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container d7a8c0024ba6. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.