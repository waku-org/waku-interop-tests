[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter with id: 2024-09-05_04-11-55__a1abbbc6-5ddc-41bd-ae12-c3d61b40d7de
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:28 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-05_04-11-55__a1abbbc6-5ddc-41bd-ae12-c3d61b40d7de__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.195.220
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['24894', '24895', '24896', '24897', '24898']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 24894:24894 -p 24895:24895 -p 24896:24896 -p 24897:24897 -p 24898:24898 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=24896 --rest-port=24894 --tcp-port=24895 --discv5-udp-port=24897 --rest-address=0.0.0.0 --nat=extip:172.18.195.220 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ac59a08a0cc0fabcbedbaddb9f2cbb17e16dfd353dc34d3169ac0089aed04b49 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=24898 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.195.220 waku cf3350ec188939ba826437e9aaf8cfc15e7f1562475045c0ea8c9089d9e07f25
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID cf3350ec1889. Setting up logs at ./log/docker/node1_2024-09-05_04-11-55__a1abbbc6-5ddc-41bd-ae12-c3d61b40d7de__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 24894
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24894/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24894/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.195.220/tcp/24895/p2p/16Uiu2HAmNYV7GA2RqPCTQPDQpswA6T6bv1CwJG7nahTJEAr4z5WW","/ip4/172.18.195.220/tcp/24896/ws/p2p/16Uiu2HAmNYV7GA2RqPCTQPDQpswA6T6bv1CwJG7nahTJEAr4z5WW"],"enrUri":"enr:-LO4QLwCyLRnMtq5SJvx4wvQf55pa1fVO_a54EReDitS0jwvX49QIYaFk5Hz77yTS2oIK38ZsLo50404e1ZULwBK2bwBgmlkgnY0gmlwhKwSw9yKbXVsdGlhZGRyc4wACgSsEsPcBmFA3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOS6lIOlIGvY3i6UWAVvw-HIAZmmoz4TRjIF42Q3Evmt4N0Y3CCYT-DdWRwgmFBhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-05_04-11-55__a1abbbc6-5ddc-41bd-ae12-c3d61b40d7de__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.77.216
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['44891', '44892', '44893', '44894', '44895']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 44891:44891 -p 44892:44892 -p 44893:44893 -p 44894:44894 -p 44895:44895 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44893 --rest-port=44891 --tcp-port=44892 --discv5-udp-port=44894 --rest-address=0.0.0.0 --nat=extip:172.18.77.216 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c1d7f8afe85fbdd8e7fec2e7b4bbd270df583ced7ad4d638f8cfc9ec83db4910 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44895 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QLwCyLRnMtq5SJvx4wvQf55pa1fVO_a54EReDitS0jwvX49QIYaFk5Hz77yTS2oIK38ZsLo50404e1ZULwBK2bwBgmlkgnY0gmlwhKwSw9yKbXVsdGlhZGRyc4wACgSsEsPcBmFA3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOS6lIOlIGvY3i6UWAVvw-HIAZmmoz4TRjIF42Q3Evmt4N0Y3CCYT-DdWRwgmFBhXdha3UyBQ --filternode=/ip4/172.18.195.220/tcp/24895/p2p/16Uiu2HAmNYV7GA2RqPCTQPDQpswA6T6bv1CwJG7nahTJEAr4z5WW
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.77.216 waku c0180ab6e761f4346b5795f4f907fd27bfd02614a95b69049e14acb1005146a6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID c0180ab6e761. Setting up logs at ./log/docker/node1_2024-09-05_04-11-55__a1abbbc6-5ddc-41bd-ae12-c3d61b40d7de__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 44891
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44891/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44891/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.77.216/tcp/44892/p2p/16Uiu2HAm1bSjXtQMRqRJM5VKuzS6QbPFiBVcJjy3fzVZEk8usBmm","/ip4/172.18.77.216/tcp/44893/ws/p2p/16Uiu2HAm1bSjXtQMRqRJM5VKuzS6QbPFiBVcJjy3fzVZEk8usBmm"],"enrUri":"enr:-LO4QNbw7BdASfYbQFUwshkdOzQHJycPFTbWW8YsINMu7OiEA9nDPeyQUJ8x8BlA7TW7-lQx8vwWt6bw3WaLT04H9iQBgmlkgnY0gmlwhKwSTdiKbXVsdGlhZGRyc4wACgSsEk3YBq9d3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJbpvPXIXoSg4RRhIldw2AmK5_MeXHU2jKfgYiHdpIpPIN0Y3CCr1yDdWRwgq9ehXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24894/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44891/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "b4a08b21-4743-4497-ba90-1483fcd7ed70", "contentFilters": ["/test/1/waku-relay/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"b4a08b21-4743-4497-ba90-1483fcd7ed70","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24894/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44891/filter/v2/messages/%2Ftest%2F1%2Fwaku-relay%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1725509521652730624,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id cf3350ec1889
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id c0180ab6e761
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.