[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_update_subscription_with_pubsub_topic_list_instead_of_string with id: 2024-09-05_04-17-51__ee376181-1ffd-43f4-8794-f9f2fb2a7888
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-05_04-17-51__ee376181-1ffd-43f4-8794-f9f2fb2a7888__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.211.147
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['59825', '59826', '59827', '59828', '59829']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 59825:59825 -p 59826:59826 -p 59827:59827 -p 59828:59828 -p 59829:59829 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=59827 --rest-port=59825 --tcp-port=59826 --discv5-udp-port=59828 --rest-address=0.0.0.0 --nat=extip:172.18.211.147 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2bb0f13827e3af237ecfb0f69acad8defc54ccf9271b9402fed7e5fe9402a3e4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=59829 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.211.147 waku 312c0a2d9fe63f459cf0af82235b4664f5749924402fe999a88179d9c975b8c4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 312c0a2d9fe6. Setting up logs at ./log/docker/node1_2024-09-05_04-17-51__ee376181-1ffd-43f4-8794-f9f2fb2a7888__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 59825
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59825/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59825/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.211.147/tcp/59826/p2p/16Uiu2HAkwRbjpfcEiYtm5DcMFFxbiozMZYwAAgehadxm6nGTY6ZA","/ip4/172.18.211.147/tcp/59827/ws/p2p/16Uiu2HAkwRbjpfcEiYtm5DcMFFxbiozMZYwAAgehadxm6nGTY6ZA"],"enrUri":"enr:-LO4QBNeJp0gz3S5mbUmH0Tv4Kq58fYxySA4RFVzPZGCtTJBD-2B7IdZhG2rHAKqS2UJM5aTTcSOyN6HdrioTgnzHBUBgmlkgnY0gmlwhKwS05OKbXVsdGlhZGRyc4wACgSsEtOTBumz3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIdspQkNgstcAD6oTSSxJfmcSIkiu1tsraUEkaA451TlYN0Y3CC6bKDdWRwgum0hXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-05_04-17-51__ee376181-1ffd-43f4-8794-f9f2fb2a7888__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.37.203
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['56092', '56093', '56094', '56095', '56096']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 56092:56092 -p 56093:56093 -p 56094:56094 -p 56095:56095 -p 56096:56096 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56094 --rest-port=56092 --tcp-port=56093 --discv5-udp-port=56095 --rest-address=0.0.0.0 --nat=extip:172.18.37.203 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=caca0c9f4baf5d1e0ff6fa1ca804bd095a11e90aa3f3abdfeb292bcaee30aeec --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56096 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QBNeJp0gz3S5mbUmH0Tv4Kq58fYxySA4RFVzPZGCtTJBD-2B7IdZhG2rHAKqS2UJM5aTTcSOyN6HdrioTgnzHBUBgmlkgnY0gmlwhKwS05OKbXVsdGlhZGRyc4wACgSsEtOTBumz3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIdspQkNgstcAD6oTSSxJfmcSIkiu1tsraUEkaA451TlYN0Y3CC6bKDdWRwgum0hXdha3UyBQ --filternode=/ip4/172.18.211.147/tcp/59826/p2p/16Uiu2HAkwRbjpfcEiYtm5DcMFFxbiozMZYwAAgehadxm6nGTY6ZA
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.4.59
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['37983', '37984', '37985', '37986', '37987']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 37983:37983 -p 37984:37984 -p 37985:37985 -p 37986:37986 -p 37987:37987 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37985 --rest-port=37983 --tcp-port=37984 --discv5-udp-port=37986 --rest-address=0.0.0.0 --nat=extip:172.18.4.59 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9ed1d4ee6fbd03db70aedec57197bb9fdaa0491e4711b08dcacd82fb5426d4c7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37987 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QBNeJp0gz3S5mbUmH0Tv4Kq58fYxySA4RFVzPZGCtTJBD-2B7IdZhG2rHAKqS2UJM5aTTcSOyN6HdrioTgnzHBUBgmlkgnY0gmlwhKwS05OKbXVsdGlhZGRyc4wACgSsEtOTBumz3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIdspQkNgstcAD6oTSSxJfmcSIkiu1tsraUEkaA451TlYN0Y3CC6bKDdWRwgum0hXdha3UyBQ --filternode=/ip4/172.18.211.147/tcp/59826/p2p/16Uiu2HAkwRbjpfcEiYtm5DcMFFxbiozMZYwAAgehadxm6nGTY6ZA
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.4.59 waku 1401a8ab9446c8d80045b35eda42b944e3cad96ee092e9f0d2dd18b3d7a208b3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 1401a8ab9446. Setting up logs at ./log/docker/node2_2024-09-05_04-17-51__ee376181-1ffd-43f4-8794-f9f2fb2a7888__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 37983
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37983/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37983/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.4.59/tcp/37984/p2p/16Uiu2HAm2BAkutYXmpJyXNyT5JK1gR7QsVQhiNLKv5PYtTnMXZYY","/ip4/172.18.4.59/tcp/37985/ws/p2p/16Uiu2HAm2BAkutYXmpJyXNyT5JK1gR7QsVQhiNLKv5PYtTnMXZYY"],"enrUri":"enr:-LO4QKpLdpGKzL3tq0abnzewArjg2JEfnfPQGbPLBpTiviQ1Cin0cW0sffXSSsbV4O8-yETWgMoIVHqpn8ZTZLbOAfkBgmlkgnY0gmlwhKwSBDuKbXVsdGlhZGRyc4wACgSsEgQ7BpRh3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJkSqK5eOBlnDV0N6Kum6bzZ82uY8p11xi2pK40IzZbtYN0Y3CClGCDdWRwgpRihXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37983/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.211.147/tcp/59826/p2p/16Uiu2HAkwRbjpfcEiYtm5DcMFFxbiozMZYwAAgehadxm6nGTY6ZA"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59825/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37983/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "4857e779-19c4-4263-9f18-a52bde4dcd86", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"4857e779-19c4-4263-9f18-a52bde4dcd86","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X PUT "http://127.0.0.1:37983/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": ["/waku/2/rs/3/1"]}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:37983/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 312c0a2d9fe6
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 1401a8ab9446
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.