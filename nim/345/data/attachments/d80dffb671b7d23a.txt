[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_missing_pubsub_topics with id: 2024-09-05_04-20-46__f7708fed-6cfc-4d00-b0cf-90f57d83ca30
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-05_04-20-46__f7708fed-6cfc-4d00-b0cf-90f57d83ca30__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.84.1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['48926', '48927', '48928', '48929', '48930']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 48926:48926 -p 48927:48927 -p 48928:48928 -p 48929:48929 -p 48930:48930 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=48928 --rest-port=48926 --tcp-port=48927 --discv5-udp-port=48929 --rest-address=0.0.0.0 --nat=extip:172.18.84.1 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d5de559176faacfbba81ebaea10e24430d5eadad914debadb78ffa697ea9d837 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=48930 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.84.1 waku 5376173a9616b4fbd40af5759e3734ec2f6fc343eb8d0bb377631c5c5f871014
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 5376173a9616. Setting up logs at ./log/docker/receiving_node1_2024-09-05_04-20-46__f7708fed-6cfc-4d00-b0cf-90f57d83ca30__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 48926
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48926/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48926/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.84.1/tcp/48927/p2p/16Uiu2HAm7AA5rJ6nktoFCz9PNmoB5MHboaQ4DbPU4wSS81H83xYW","/ip4/172.18.84.1/tcp/48928/ws/p2p/16Uiu2HAm7AA5rJ6nktoFCz9PNmoB5MHboaQ4DbPU4wSS81H83xYW"],"enrUri":"enr:-LO4QPJ38e47wmRhE4_iC47ow7eOYokChSjfrOI1t9NS3geyc6NIjWMPQ3S3_axI8v3QGgT6cc0jiDOITYO06jo3JF8BgmlkgnY0gmlwhKwSVAGKbXVsdGlhZGRyc4wACgSsElQBBr8g3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKuUrpbXTCUkCqymMikcNaeKADfpxT61hc4gZEFsAcwH4N0Y3CCvx-DdWRwgr8hhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-05_04-20-46__f7708fed-6cfc-4d00-b0cf-90f57d83ca30__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.157.161
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['39472', '39473', '39474', '39475', '39476']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 39472:39472 -p 39473:39473 -p 39474:39474 -p 39475:39475 -p 39476:39476 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39474 --rest-port=39472 --tcp-port=39473 --discv5-udp-port=39475 --rest-address=0.0.0.0 --nat=extip:172.18.157.161 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ab0c361cf6f6c4c3fe6ff412aebbde4caf74bce82fd2f7e1f3e1cfcbc1ccc18b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39476 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.157.161 waku 310eb664984cc3a5e2e3457520abd272038fe7862818c71fae109fbfa2aa3a23
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 310eb664984c. Setting up logs at ./log/docker/receiving_node2_2024-09-05_04-20-46__f7708fed-6cfc-4d00-b0cf-90f57d83ca30__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 39472
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39472/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39472/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.157.161/tcp/39473/p2p/16Uiu2HAmCJKBtX4PX2soRi4pturHyhrLDBcS8G9G92SQWJTDm8im","/ip4/172.18.157.161/tcp/39474/ws/p2p/16Uiu2HAmCJKBtX4PX2soRi4pturHyhrLDBcS8G9G92SQWJTDm8im"],"enrUri":"enr:-LO4QDa2XRKhN_hymm9xc7V_dtgAQ7eRHjBscFPPxO4hz9MCWVnbocVWIjSW036vvNlUs6rddW5aEVgPtZGqn8RVRxwBgmlkgnY0gmlwhKwSnaGKbXVsdGlhZGRyc4wACgSsEp2hBpoy3QOCcnOFAAMBAACJc2VjcDI1NmsxoQL6tBplbB-FOnd_uZ8yt3mlDUvqFlcwn_uKzryGJ0FDEoN0Y3CCmjGDdWRwgpozhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39472/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.84.1/tcp/48927/p2p/16Uiu2HAm7AA5rJ6nktoFCz9PNmoB5MHboaQ4DbPU4wSS81H83xYW"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-05_04-20-46__f7708fed-6cfc-4d00-b0cf-90f57d83ca30__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.227.222
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['34004', '34005', '34006', '34007', '34008']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 34004:34004 -p 34005:34005 -p 34006:34006 -p 34007:34007 -p 34008:34008 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34006 --rest-port=34004 --tcp-port=34005 --discv5-udp-port=34007 --rest-address=0.0.0.0 --nat=extip:172.18.227.222 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fedf6a0decd98ec9e5edf5685ae4640fb4d0baaa68d3e92b230c580f0a3a29fb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34008 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QPJ38e47wmRhE4_iC47ow7eOYokChSjfrOI1t9NS3geyc6NIjWMPQ3S3_axI8v3QGgT6cc0jiDOITYO06jo3JF8BgmlkgnY0gmlwhKwSVAGKbXVsdGlhZGRyc4wACgSsElQBBr8g3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKuUrpbXTCUkCqymMikcNaeKADfpxT61hc4gZEFsAcwH4N0Y3CCvx-DdWRwgr8hhXdha3UyCQ --lightpushnode=/ip4/172.18.84.1/tcp/48927/p2p/16Uiu2HAm7AA5rJ6nktoFCz9PNmoB5MHboaQ4DbPU4wSS81H83xYW --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.227.222 waku d1a797ea2b928bffcde2a245b1b1230211e4a996c85fa324c77a87f08b7f7a50
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID d1a797ea2b92. Setting up logs at ./log/docker/lightpush_node1_2024-09-05_04-20-46__f7708fed-6cfc-4d00-b0cf-90f57d83ca30__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 34004
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34004/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34004/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.227.222/tcp/34005/p2p/16Uiu2HAmDWrLMsxqshL4tvpp9oPdVfWm62itdFC4ooBeuAR4ERtY","/ip4/172.18.227.222/tcp/34006/ws/p2p/16Uiu2HAmDWrLMsxqshL4tvpp9oPdVfWm62itdFC4ooBeuAR4ERtY"],"enrUri":"enr:-LO4QABc4atFUq-S67yAg4bYg837NqYOXy9imH-7mxUwezluI_bMFd5wHauwhJOu7I6Q3TcX_N8TvdaJiLbh2ST7kxoBgmlkgnY0gmlwhKwS496KbXVsdGlhZGRyc4wACgSsEuPeBoTW3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMMxfoJ1XI1jA4TAfiqXr83C1jVzRtu0mPyZERAlfVEhYN0Y3CChNWDdWRwgoTXhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34004/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.84.1/tcp/48927/p2p/16Uiu2HAm7AA5rJ6nktoFCz9PNmoB5MHboaQ4DbPU4wSS81H83xYW"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34004/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.157.161/tcp/39473/p2p/16Uiu2HAmCJKBtX4PX2soRi4pturHyhrLDBcS8G9G92SQWJTDm8im"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48926/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39472/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34004/lightpush/v1/message" -H "Content-Type: application/json" -d '{"message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1725510052113909248}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:34004/lightpush/v1/message. Response content: b'Failed to request a message push: Lightpush request has not been published to any peers. msg_hash: 0xf700f7d0a314455b16052d6e356ad65e5704c15fe91ed29aff81c1a3349fdf35'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 5376173a9616
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 310eb664984c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id d1a797ea2b92
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.