[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_2_receiving_nodes__relay_node1_forwards_lightpushed_message_to_relay_node2 with id: 2024-12-11_04-11-42__32eded41-7c2f-4384-af89-16719e14ec36
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-12-11_04-11-42__32eded41-7c2f-4384-af89-16719e14ec36__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.103.232
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['6775', '6776', '6777', '6778', '6779']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 6775:6775 -p 6776:6776 -p 6777:6777 -p 6778:6778 -p 6779:6779 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6777 --rest-port=6775 --tcp-port=6776 --discv5-udp-port=6778 --rest-address=0.0.0.0 --nat=extip:172.18.103.232 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fe4ca35eaedef0d6f46dd5a1eecd366cb5eddadec9c8c5fc6c4f938596f3ecdb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6779 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.103.232 waku e7d750d865e5cf80ba6f97092fa76e93cd2843a4aebe649c84ec0dff118c7062
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID e7d750d865e5. Setting up logs at ./log/docker/receiving_node1_2024-12-11_04-11-42__32eded41-7c2f-4384-af89-16719e14ec36__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 6775
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container e2e255760cef. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6775/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6775/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.103.232/tcp/6776/p2p/16Uiu2HAkvqTJEUSHGJvk6Z5MLYnHmbS4owb57LkB1JCCd2UXXq8h","/ip4/172.18.103.232/tcp/6777/ws/p2p/16Uiu2HAkvqTJEUSHGJvk6Z5MLYnHmbS4owb57LkB1JCCd2UXXq8h"],"enrUri":"enr:-L24QCzIIBZTwRWGG1e6nl-zn9SoCOJNbh60UnxphK7N2grHY7yHl9D7PGxLnCwp4fk4shOGsKcTgE0ZgFzh2y9kn28CgmlkgnY0gmlwhKwSZ-iKbXVsdGlhZGRyc5YACASsEmfoBhp4AAoErBJn6AYaed0DgnJzhQADAQAAiXNlY3AyNTZrMaECFPNJY4p89mnfRh8QhUUow6Ki3iVwqXpGEGS7ajcLJi6DdGNwghp4g3VkcIIaeoV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-12-11_04-11-42__32eded41-7c2f-4384-af89-16719e14ec36__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.208.74
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['54049', '54050', '54051', '54052', '54053']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 54049:54049 -p 54050:54050 -p 54051:54051 -p 54052:54052 -p 54053:54053 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=54051 --rest-port=54049 --tcp-port=54050 --discv5-udp-port=54052 --rest-address=0.0.0.0 --nat=extip:172.18.208.74 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=adadbb70ba0ab4d5dd0ce52e70cd3faed1eec0eb24eec01ce4d0926973dea674 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=54053 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.208.74 waku 7e4b6e657ec3c13aab910fdbfa692bbd5f90e59465ea181ee1de9c0eecd9f678
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 7e4b6e657ec3. Setting up logs at ./log/docker/receiving_node2_2024-12-11_04-11-42__32eded41-7c2f-4384-af89-16719e14ec36__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 54049
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54049/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54049/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.208.74/tcp/54050/p2p/16Uiu2HAmDuGAmkztPBUA7xY73N7b6GsEKVou6eddbuP5WVwqvZyH","/ip4/172.18.208.74/tcp/54051/ws/p2p/16Uiu2HAmDuGAmkztPBUA7xY73N7b6GsEKVou6eddbuP5WVwqvZyH"],"enrUri":"enr:-L24QEpGd0NCiPBEKix39D9ucrRi4vZMDGPkHN7XeFRnuZg3Ap1rX1Ib42IqawapxPFtMgv5fIVFexdfTUuXhvyY29kCgmlkgnY0gmlwhKwS0EqKbXVsdGlhZGRyc5YACASsEtBKBtMiAAoErBLQSgbTI90DgnJzhQADAQAAiXNlY3AyNTZrMaEDEoO0WI8u_j0eoxi7NdX5LRDWW_UjrRszBcM9jkO63ciDdGNwgtMig3VkcILTJIV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54049/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.103.232/tcp/6776/p2p/16Uiu2HAkvqTJEUSHGJvk6Z5MLYnHmbS4owb57LkB1JCCd2UXXq8h"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-12-11_04-11-42__32eded41-7c2f-4384-af89-16719e14ec36__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.247.127
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['20702', '20703', '20704', '20705', '20706']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 20702:20702 -p 20703:20703 -p 20704:20704 -p 20705:20705 -p 20706:20706 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20704 --rest-port=20702 --tcp-port=20703 --discv5-udp-port=20705 --rest-address=0.0.0.0 --nat=extip:172.18.247.127 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7fbfb4eeff754d3fc24eb7f4ecb49db75443e030aeacabb0f1fec8efed9efdbf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20706 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QCzIIBZTwRWGG1e6nl-zn9SoCOJNbh60UnxphK7N2grHY7yHl9D7PGxLnCwp4fk4shOGsKcTgE0ZgFzh2y9kn28CgmlkgnY0gmlwhKwSZ-iKbXVsdGlhZGRyc5YACASsEmfoBhp4AAoErBJn6AYaed0DgnJzhQADAQAAiXNlY3AyNTZrMaECFPNJY4p89mnfRh8QhUUow6Ki3iVwqXpGEGS7ajcLJi6DdGNwghp4g3VkcIIaeoV3YWt1Mgk --lightpushnode=/ip4/172.18.103.232/tcp/6776/p2p/16Uiu2HAkvqTJEUSHGJvk6Z5MLYnHmbS4owb57LkB1JCCd2UXXq8h --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.247.127 waku 7c0bd1c244c60e05724aff02e3b5051a8d2f537c2dd0307006703accf1a6f41f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 7c0bd1c244c6. Setting up logs at ./log/docker/lightpush_node1_2024-12-11_04-11-42__32eded41-7c2f-4384-af89-16719e14ec36__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 20702
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20702/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20702/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.247.127/tcp/20703/p2p/16Uiu2HAmUW8sKWqLJ5N9rrG3Tt2h4mHsSTAMdpCK7QFCV9hgjHvS","/ip4/172.18.247.127/tcp/20704/ws/p2p/16Uiu2HAmUW8sKWqLJ5N9rrG3Tt2h4mHsSTAMdpCK7QFCV9hgjHvS"],"enrUri":"enr:-L24QLn5WlZEf_wq2_FLG4hIPjdtSQrkOBfwRAuqYHw_yDxKNhPBh955biSzBBPjMCdw_2u5RzAa3DtWDluve0O37OYCgmlkgnY0gmlwhKwS93-KbXVsdGlhZGRyc5YACASsEvd_BlDfAAoErBL3fwZQ4N0DgnJzhQADAQAAiXNlY3AyNTZrMaED63ZlBLlc_vS7bI9EButJFfPiRa1bAEXS2ivdMnNlgluDdGNwglDfg3VkcIJQ4YV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20702/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.103.232/tcp/6776/p2p/16Uiu2HAkvqTJEUSHGJvk6Z5MLYnHmbS4owb57LkB1JCCd2UXXq8h"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20702/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.208.74/tcp/54050/p2p/16Uiu2HAmDuGAmkztPBUA7xY73N7b6GsEKVou6eddbuP5WVwqvZyH"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6775/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54049/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20702/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1733890307107145728}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6775/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1733890307107145728,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54049/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1733890307107145728,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id e7d750d865e5
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 7e4b6e657ec3
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container e7d750d865e5. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 7c0bd1c244c6
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 7e4b6e657ec3. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.