[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_no_timestamp with id: 2024-12-11_04-12-59__c0666cf0-e0df-4d4a-afd4-b9cfd9cf9e29
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-12-11_04-12-59__c0666cf0-e0df-4d4a-afd4-b9cfd9cf9e29__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.213.226
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['25990', '25991', '25992', '25993', '25994']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 25990:25990 -p 25991:25991 -p 25992:25992 -p 25993:25993 -p 25994:25994 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25992 --rest-port=25990 --tcp-port=25991 --discv5-udp-port=25993 --rest-address=0.0.0.0 --nat=extip:172.18.213.226 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=db8714b0a9e7fefd3557947f36f2a942487ff16d96c41ea017f880b3f20b7129 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25994 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.213.226 waku a987c2a5dd0eed79dd395b221b4035ad90e7e67df64595e6bcf5d1bd6c1af6a3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID a987c2a5dd0e. Setting up logs at ./log/docker/receiving_node1_2024-12-11_04-12-59__c0666cf0-e0df-4d4a-afd4-b9cfd9cf9e29__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 25990
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container db64bff370c4. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25990/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25990/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.213.226/tcp/25991/p2p/16Uiu2HAmKihMbhoALQk8RLkqWxL65cu3gFCxtwpbAisMJKHcr48m","/ip4/172.18.213.226/tcp/25992/ws/p2p/16Uiu2HAmKihMbhoALQk8RLkqWxL65cu3gFCxtwpbAisMJKHcr48m"],"enrUri":"enr:-L24QJOyD_8-MKTE3usnvdrvP9WMXfk8FCsVayAI5aTIvJRSBpFRdCOndKuL1BJyTGz6UBAGR3qP3bhX-3n_uxGryZkCgmlkgnY0gmlwhKwS1eKKbXVsdGlhZGRyc5YACASsEtXiBmWHAAoErBLV4gZliN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDaPTqcSHLSxjHvbcDpIr00_xyMhq4_Lo_S-8DWNLHpQaDdGNwgmWHg3VkcIJliYV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-12-11_04-12-59__c0666cf0-e0df-4d4a-afd4-b9cfd9cf9e29__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.54.35
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['34333', '34334', '34335', '34336', '34337']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 34333:34333 -p 34334:34334 -p 34335:34335 -p 34336:34336 -p 34337:34337 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34335 --rest-port=34333 --tcp-port=34334 --discv5-udp-port=34336 --rest-address=0.0.0.0 --nat=extip:172.18.54.35 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2ef9dfa1fb1e5d48fa03e3eaf0f5c727a42d8fb1df0ec5e9f3e3920f8ffdd5b9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34337 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.54.35 waku 7098bac6a67c484d4ba4c815a23ae6996a509e6e03c0d8e5ab10d975de297a89
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 7098bac6a67c. Setting up logs at ./log/docker/receiving_node2_2024-12-11_04-12-59__c0666cf0-e0df-4d4a-afd4-b9cfd9cf9e29__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 34333
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34333/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34333/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.54.35/tcp/34334/p2p/16Uiu2HAmMzU1fT5UAdkQ8xsZHdNVoociEduYbXhx2HY85knc86Ly","/ip4/172.18.54.35/tcp/34335/ws/p2p/16Uiu2HAmMzU1fT5UAdkQ8xsZHdNVoociEduYbXhx2HY85knc86Ly"],"enrUri":"enr:-L24QH9xp9Wlo2hsG3-et3vIQkYcV7ZmNyKzOKI4ESmtoekPWpvGxe3wl1ahwp2eqMQtNkrMSLWOyVuKlI6Qd-SmEW0CgmlkgnY0gmlwhKwSNiOKbXVsdGlhZGRyc5YACASsEjYjBoYeAAoErBI2IwaGH90DgnJzhQADAQAAiXNlY3AyNTZrMaEDirZ-q0pWKK-eHO5Q1IIhTBR73HpmzdxC7tzMLgezz2KDdGNwgoYeg3VkcIKGIIV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34333/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.213.226/tcp/25991/p2p/16Uiu2HAmKihMbhoALQk8RLkqWxL65cu3gFCxtwpbAisMJKHcr48m"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-12-11_04-12-59__c0666cf0-e0df-4d4a-afd4-b9cfd9cf9e29__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.107.117
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['61651', '61652', '61653', '61654', '61655']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 61651:61651 -p 61652:61652 -p 61653:61653 -p 61654:61654 -p 61655:61655 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61653 --rest-port=61651 --tcp-port=61652 --discv5-udp-port=61654 --rest-address=0.0.0.0 --nat=extip:172.18.107.117 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=59dac89ced74f0dde24ccfdfb4eabbf233ae6d48f707b11eb00fea33b0b99e4d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61655 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QJOyD_8-MKTE3usnvdrvP9WMXfk8FCsVayAI5aTIvJRSBpFRdCOndKuL1BJyTGz6UBAGR3qP3bhX-3n_uxGryZkCgmlkgnY0gmlwhKwS1eKKbXVsdGlhZGRyc5YACASsEtXiBmWHAAoErBLV4gZliN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDaPTqcSHLSxjHvbcDpIr00_xyMhq4_Lo_S-8DWNLHpQaDdGNwgmWHg3VkcIJliYV3YWt1Mgk --lightpushnode=/ip4/172.18.213.226/tcp/25991/p2p/16Uiu2HAmKihMbhoALQk8RLkqWxL65cu3gFCxtwpbAisMJKHcr48m --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.107.117 waku 443ea86738564dab7ace418711a064fd3deee2029845df7ade5a38bfccc9fce4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 443ea8673856. Setting up logs at ./log/docker/lightpush_node1_2024-12-11_04-12-59__c0666cf0-e0df-4d4a-afd4-b9cfd9cf9e29__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 61651
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61651/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61651/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.107.117/tcp/61652/p2p/16Uiu2HAmGnWkzMKfjCvFFDwTcETXWSquX9GGDBraienUiLKeUZso","/ip4/172.18.107.117/tcp/61653/ws/p2p/16Uiu2HAmGnWkzMKfjCvFFDwTcETXWSquX9GGDBraienUiLKeUZso"],"enrUri":"enr:-L24QB8IevPqnEfzdzdNLnvFy7IfhvSemsU3CosZtBwqfjladRD9YZf5W-ESbxDZ7MkTpaW2Cv0uw7NYjtINzsKjdhUCgmlkgnY0gmlwhKwSa3WKbXVsdGlhZGRyc5YACASsEmt1BvDUAAoErBJrdQbw1d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDPVwyTeHy4_54Z9-7fkQkRRmsWG3WH2ppcU2NnD1buQqDdGNwgvDUg3VkcILw1oV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61651/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.213.226/tcp/25991/p2p/16Uiu2HAmKihMbhoALQk8RLkqWxL65cu3gFCxtwpbAisMJKHcr48m"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61651/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.54.35/tcp/34334/p2p/16Uiu2HAmMzU1fT5UAdkQ8xsZHdNVoociEduYbXhx2HY85knc86Ly"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25990/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34333/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61651/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto"}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25990/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1733890383267503360,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34333/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1733890383267503360,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id a987c2a5dd0e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 7098bac6a67c
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container a987c2a5dd0e. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 443ea8673856
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 7098bac6a67c. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.