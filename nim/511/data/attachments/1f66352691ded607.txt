[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_unsubscribe_from_some_of_the_subscribed_content_topics with id: 2024-12-11_04-11-01__07f1dacd-dbc7-44c0-b749-21747d6e41ae
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-11_04-11-01__07f1dacd-dbc7-44c0-b749-21747d6e41ae__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.163.71
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['55401', '55402', '55403', '55404', '55405']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 55401:55401 -p 55402:55402 -p 55403:55403 -p 55404:55404 -p 55405:55405 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55403 --rest-port=55401 --tcp-port=55402 --discv5-udp-port=55404 --rest-address=0.0.0.0 --nat=extip:172.18.163.71 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1fbfae78ff5a0aaebc130fce1b9f4a8c0c448ff3db0b5d2d3aec7f8727f5e3ec --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55405 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.163.71 waku a1f7f74423916ba7095ef802b3476e1992557d7ceffa55e5cad05ee13c440723
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID a1f7f7442391. Setting up logs at ./log/docker/node1_2024-12-11_04-11-01__07f1dacd-dbc7-44c0-b749-21747d6e41ae__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 55401
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 5544983fbd61. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55401/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55401/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.163.71/tcp/55402/p2p/16Uiu2HAmS4GUR5YVna79f7MEBq7GkagLgdWFXb8A9GNGyXefGi18","/ip4/172.18.163.71/tcp/55403/ws/p2p/16Uiu2HAmS4GUR5YVna79f7MEBq7GkagLgdWFXb8A9GNGyXefGi18"],"enrUri":"enr:-L24QH0fhoUYwG4SO78rFP9cNjDXiVlku1pbPKUxi692_MiAKHe9AiLP9xfy_s22MrsE3khdDQk1YTheNerq9qa6K3ACgmlkgnY0gmlwhKwSo0eKbXVsdGlhZGRyc5YACASsEqNHBthqAAoErBKjRwbYa90DgnJzhQADAQAAiXNlY3AyNTZrMaEDxx6E0h8rZ6SP5ZkQcAsCL83DEw9uxw3sXUYWh2AQuCODdGNwgthqg3VkcILYbIV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-11_04-11-01__07f1dacd-dbc7-44c0-b749-21747d6e41ae__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.11.37
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['7102', '7103', '7104', '7105', '7106']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 7102:7102 -p 7103:7103 -p 7104:7104 -p 7105:7105 -p 7106:7106 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7104 --rest-port=7102 --tcp-port=7103 --discv5-udp-port=7105 --rest-address=0.0.0.0 --nat=extip:172.18.11.37 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7e04cf15fa8f84bebe02da8fcf2abc7ac0d39bcbaad97922d9c7eabdc8e244ae --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7106 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QH0fhoUYwG4SO78rFP9cNjDXiVlku1pbPKUxi692_MiAKHe9AiLP9xfy_s22MrsE3khdDQk1YTheNerq9qa6K3ACgmlkgnY0gmlwhKwSo0eKbXVsdGlhZGRyc5YACASsEqNHBthqAAoErBKjRwbYa90DgnJzhQADAQAAiXNlY3AyNTZrMaEDxx6E0h8rZ6SP5ZkQcAsCL83DEw9uxw3sXUYWh2AQuCODdGNwgthqg3VkcILYbIV3YWt1MgU --filternode=/ip4/172.18.163.71/tcp/55402/p2p/16Uiu2HAmS4GUR5YVna79f7MEBq7GkagLgdWFXb8A9GNGyXefGi18
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.11.37 waku 481ea8199a3017478ffb66be7a21f2e52f47f41cb403dd09da78694e5d471499
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 481ea8199a30. Setting up logs at ./log/docker/node2_2024-12-11_04-11-01__07f1dacd-dbc7-44c0-b749-21747d6e41ae__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 7102
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7102/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7102/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.11.37/tcp/7103/p2p/16Uiu2HAmDmjFebjUmXUqZgX1D8y6uKjV36x9CHMsDqkZoVv6MhCN","/ip4/172.18.11.37/tcp/7104/ws/p2p/16Uiu2HAmDmjFebjUmXUqZgX1D8y6uKjV36x9CHMsDqkZoVv6MhCN"],"enrUri":"enr:-L24QPljvP3yPKMJyDZqyQaC48mUCoQRC7ZBTelcfRqRx5HUPlJFF-Wj9MYRaXXyX5_IHXexzw9HHQrlJekmdvy7q2QCgmlkgnY0gmlwhKwSCyWKbXVsdGlhZGRyc5YACASsEgslBhu_AAoErBILJQYbwN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDEJWunBI3nLQEMRqYanPTFGUXJquEbZ-M82Fvx5YuRsODdGNwghu_g3VkcIIbwYV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7102/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.163.71/tcp/55402/p2p/16Uiu2HAmS4GUR5YVna79f7MEBq7GkagLgdWFXb8A9GNGyXefGi18"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55401/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7102/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "c8b6e0a0-b9f9-4219-af63-e169b01f0caa", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"c8b6e0a0-b9f9-4219-af63-e169b01f0caa","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55401/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7102/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "036b84dd-1e70-4318-bdcc-03fa317e1573", "contentFilters": ["Hello World!", "1234567890"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"036b84dd-1e70-4318-bdcc-03fa317e1573","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55401/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "1234567890", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7102/filter/v2/messages/1234567890" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"1234567890","version":0,"timestamp":1733890264667496192,"ephemeral":false}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X DELETE "http://127.0.0.1:7102/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["Hello World!"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55401/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "1234567890", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7102/filter/v2/messages/1234567890" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"1234567890","version":0,"timestamp":1733890264784167168,"ephemeral":false}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55401/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "Hello World!", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7102/filter/v2/messages/Hello%20World%21" -H "Content-Type: application/json" -d 'None'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:7102/filter/v2/messages/Hello%20World%21. Response content: b'Not subscribed to topic: Hello World!'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id a1f7f7442391
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 481ea8199a30
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container a1f7f7442391. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.