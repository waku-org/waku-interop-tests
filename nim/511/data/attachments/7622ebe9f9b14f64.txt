[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_node_not_connected_directly_to_relaying_node with id: 2024-12-11_04-02-47__8ccdba20-3bca-4e8f-b11a-b301e5a5290a
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-11_04-02-47__8ccdba20-3bca-4e8f-b11a-b301e5a5290a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-11_04-02-47__8ccdba20-3bca-4e8f-b11a-b301e5a5290a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-12-11_04-02-47__8ccdba20-3bca-4e8f-b11a-b301e5a5290a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.235.68
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['8207', '8208', '8209', '8210', '8211']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 8207:8207 -p 8208:8208 -p 8209:8209 -p 8210:8210 -p 8211:8211 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8209 --rest-port=8207 --tcp-port=8208 --discv5-udp-port=8210 --rest-address=0.0.0.0 --nat=extip:172.18.235.68 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=feeab19fafe85aa744dcef073b44c0b8d9fed071e3bf6af5246a2265deb913a2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8211 --metrics-logging=true --filter=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.235.68 waku 531f1de8a0bc31df79bdaeac31fdb9693ca8d26f6023a79c18c86e0d61afc873
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 531f1de8a0bc. Setting up logs at ./log/docker/node1_2024-12-11_04-02-47__8ccdba20-3bca-4e8f-b11a-b301e5a5290a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 8207
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 89f78016c533. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8207/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8207/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.235.68/tcp/8208/p2p/16Uiu2HAmKE1YGWS68ZHKgFuQUsBpcFR2Mi3pDie1MF5PNujfxB7x","/ip4/172.18.235.68/tcp/8209/ws/p2p/16Uiu2HAmKE1YGWS68ZHKgFuQUsBpcFR2Mi3pDie1MF5PNujfxB7x"],"enrUri":"enr:-L24QB6_crsTU6PEPUHn-xtkM5kgkMxu_20oNYff6k0mQyTuOY_uMMB0uy8uLf5__-BpX5Eb8WnP8A9Gbof88zgdFFcCgmlkgnY0gmlwhKwS60SKbXVsdGlhZGRyc5YACASsEutEBiAQAAoErBLrRAYgEd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDYZuiCx4p9lzU4B1GYJ6H3W_bbt3yGBBTgcEKS7WFt7ODdGNwgiAQg3VkcIIgEoV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.103.235
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['24333', '24334', '24335', '24336', '24337']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 24333:24333 -p 24334:24334 -p 24335:24335 -p 24336:24336 -p 24337:24337 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=24335 --rest-port=24333 --tcp-port=24334 --discv5-udp-port=24336 --rest-address=0.0.0.0 --nat=extip:172.18.103.235 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fc642c1f3da372a1ef9fb1adca023fc1d42b6ad8ccbeb6c51ae5dbe435f25b57 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=24337 --metrics-logging=true --filter=true --relay=true --discv5-bootstrap-node=enr:-L24QB6_crsTU6PEPUHn-xtkM5kgkMxu_20oNYff6k0mQyTuOY_uMMB0uy8uLf5__-BpX5Eb8WnP8A9Gbof88zgdFFcCgmlkgnY0gmlwhKwS60SKbXVsdGlhZGRyc5YACASsEutEBiAQAAoErBLrRAYgEd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDYZuiCx4p9lzU4B1GYJ6H3W_bbt3yGBBTgcEKS7WFt7ODdGNwgiAQg3VkcIIgEoV3YWt1MgU
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.103.235 waku ff326a1d6f1f7092a8060b10ad3c4c101cef4d03dc748bc09f83681e65aa04ad
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ff326a1d6f1f. Setting up logs at ./log/docker/node2_2024-12-11_04-02-47__8ccdba20-3bca-4e8f-b11a-b301e5a5290a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 24333
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24333/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24333/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.103.235/tcp/24334/p2p/16Uiu2HAmPyJT1h5w24zv52rUXRHW3bNiSnJgMokT5dhNVKRmT7Hn","/ip4/172.18.103.235/tcp/24335/ws/p2p/16Uiu2HAmPyJT1h5w24zv52rUXRHW3bNiSnJgMokT5dhNVKRmT7Hn"],"enrUri":"enr:-L24QLxk1fo_2ngfaWtbSDxTYmWLdeEF2-FJUAD7yzjo09G6KsXXXtmyA3y5CCuuISDrXlv6o1VzDJfu-n2uG4gpE7kCgmlkgnY0gmlwhKwSZ-uKbXVsdGlhZGRyc5YACASsEmfrBl8OAAoErBJn6wZfD90DgnJzhQADAQAAiXNlY3AyNTZrMaEDqCF5mJaewoLFtQsvsVxMZuOJRofrcGrZatg7eu6Ly_WDdGNwgl8Og3VkcIJfEIV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.214.208
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['5361', '5362', '5363', '5364', '5365']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 5361:5361 -p 5362:5362 -p 5363:5363 -p 5364:5364 -p 5365:5365 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=5363 --rest-port=5361 --tcp-port=5362 --discv5-udp-port=5364 --rest-address=0.0.0.0 --nat=extip:172.18.214.208 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8c44381d6a241f3175bceaf32d4ceb51525ddcfcabb9d6d40a9a19f298df5f4e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=5365 --metrics-logging=true --relay=false --filternode=/ip4/172.18.103.235/tcp/24334/p2p/16Uiu2HAmPyJT1h5w24zv52rUXRHW3bNiSnJgMokT5dhNVKRmT7Hn --discv5-bootstrap-node=enr:-L24QLxk1fo_2ngfaWtbSDxTYmWLdeEF2-FJUAD7yzjo09G6KsXXXtmyA3y5CCuuISDrXlv6o1VzDJfu-n2uG4gpE7kCgmlkgnY0gmlwhKwSZ-uKbXVsdGlhZGRyc5YACASsEmfrBl8OAAoErBJn6wZfD90DgnJzhQADAQAAiXNlY3AyNTZrMaEDqCF5mJaewoLFtQsvsVxMZuOJRofrcGrZatg7eu6Ly_WDdGNwgl8Og3VkcIJfEIV3YWt1MgU
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.214.208 waku 136d9160f51469ef880c0f4c7cf922476dca97ef899162d48fce37558cb3c3d3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 136d9160f514. Setting up logs at ./log/docker/node3_2024-12-11_04-02-47__8ccdba20-3bca-4e8f-b11a-b301e5a5290a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 5361
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5361/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5361/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.214.208/tcp/5362/p2p/16Uiu2HAm5Qdb46ka7SGV827BA5mB1TZv2nTYAew3bf2t2To3mE8F","/ip4/172.18.214.208/tcp/5363/ws/p2p/16Uiu2HAm5Qdb46ka7SGV827BA5mB1TZv2nTYAew3bf2t2To3mE8F"],"enrUri":"enr:-L24QCgx2OCpUCaBrA5cRElnBjKGuXSatgj-6yAMOOA7y0JdD2psz76G-8ZUob6U5BQ7Psp0XcMBTKt1iSxzryzg4swCgmlkgnY0gmlwhKwS1tCKbXVsdGlhZGRyc5YACASsEtbQBhTyAAoErBLW0AYU890DgnJzhQADAQAAiXNlY3AyNTZrMaEClFCVcH3pO-dSvKUkx66-FuwKxbeThVTBIMp6ycbgCjiDdGNwghTyg3VkcIIU9IV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8207/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24333/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5361/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8207/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.103.235/tcp/24334/p2p/16Uiu2HAmPyJT1h5w24zv52rUXRHW3bNiSnJgMokT5dhNVKRmT7Hn","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24333/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.235.68/tcp/8208/p2p/16Uiu2HAmKE1YGWS68ZHKgFuQUsBpcFR2Mi3pDie1MF5PNujfxB7x","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"},{"multiaddr":"/ip4/172.18.214.208/tcp/5362/p2p/16Uiu2HAm5Qdb46ka7SGV827BA5mB1TZv2nTYAew3bf2t2To3mE8F","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5361/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.103.235/tcp/24334/p2p/16Uiu2HAmPyJT1h5w24zv52rUXRHW3bNiSnJgMokT5dhNVKRmT7Hn","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8207/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5361/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1733889801845206016,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 531f1de8a0bc
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id ff326a1d6f1f
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 531f1de8a0bc. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 136d9160f514
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.