[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_only_relay__peer_relay_and_store with id: 2024-05-06_07-25-01__23d835fa-6b8c-4d64-83d2-027433718242
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-06_07-25-01__23d835fa-6b8c-4d64-83d2-027433718242__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.235.226
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['12118', '12119', '12120', '12121', '12122']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:327 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 12118:12118 -p 12119:12119 -p 12120:12120 -p 12121:12121 -p 12122:12122 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=12120 --rest-port=12118 --tcp-port=12119 --discv5-udp-port=12121 --rest-address=0.0.0.0 --nat=extip:172.18.235.226 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=12122 --metrics-logging=true --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.235.226 waku 3af9b96a5bc8bb18fadc026409e527e7954036a1813e40c4d6e993c11d7b7cc4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 3af9b96a5bc8. Setting up logs at ./log/docker/publishing_node1_2024-05-06_07-25-01__23d835fa-6b8c-4d64-83d2-027433718242__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 12118
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12118/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.235.226/tcp/12119/p2p/16Uiu2HAmKYq4j6Ps45PopVt8JjypWGAgromAYpbHBsDkLZ6VGiZT","/ip4/172.18.235.226/tcp/12120/ws/p2p/16Uiu2HAmKYq4j6Ps45PopVt8JjypWGAgromAYpbHBsDkLZ6VGiZT"],"enrUri":"enr:-LO4QMaSIQZz5IGjHPy0w-ZTCkZwPi-jJUxXB15yYCNp57H5e-rUwMIn8oZpRpaaLLBRfL6ZmJS7Sx86y2RaF63--QYBgmlkgnY0gmlwhKwS6-KKbXVsdGlhZGRyc4wACgSsEuviBi9Y3QOCcnOFAAABAACJc2VjcDI1NmsxoQNmbdMLtx9AqCnV8bgqkafEjqhpSBk_Tf4q1QkFoGAO1oN0Y3CCL1eDdWRwgi9ZhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:193 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-06_07-25-01__23d835fa-6b8c-4d64-83d2-027433718242__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.251.159
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['35542', '35543', '35544', '35545', '35546']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:327 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 35542:35542 -p 35543:35543 -p 35544:35544 -p 35545:35545 -p 35546:35546 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=35544 --rest-port=35542 --tcp-port=35543 --discv5-udp-port=35545 --rest-address=0.0.0.0 --nat=extip:172.18.251.159 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=35546 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QMaSIQZz5IGjHPy0w-ZTCkZwPi-jJUxXB15yYCNp57H5e-rUwMIn8oZpRpaaLLBRfL6ZmJS7Sx86y2RaF63--QYBgmlkgnY0gmlwhKwS6-KKbXVsdGlhZGRyc4wACgSsEuviBi9Y3QOCcnOFAAABAACJc2VjcDI1NmsxoQNmbdMLtx9AqCnV8bgqkafEjqhpSBk_Tf4q1QkFoGAO1oN0Y3CCL1eDdWRwgi9ZhXdha3UyAQ --storenode=/ip4/172.18.235.226/tcp/12119/p2p/16Uiu2HAmKYq4j6Ps45PopVt8JjypWGAgromAYpbHBsDkLZ6VGiZT --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.251.159 waku bf49a4b3b208694059b230936e2ff88f1c182eefd8471a4d5fc18b769c8442ba
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID bf49a4b3b208. Setting up logs at ./log/docker/store_node1_2024-05-06_07-25-01__23d835fa-6b8c-4d64-83d2-027433718242__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 35542
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35542/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.251.159/tcp/35543/p2p/16Uiu2HAmTGxLYuTrguX3H7iW5iuRhY55KF4LMGoZVp4YdCwbDAbv","/ip4/172.18.251.159/tcp/35544/ws/p2p/16Uiu2HAmTGxLYuTrguX3H7iW5iuRhY55KF4LMGoZVp4YdCwbDAbv"],"enrUri":"enr:-LO4QN65fmu4X0G01o_NxRwMXPWpXxw_dssqcRNboRwAO5q5HmXwB6bbS4VlBw1MkR5ChhOMSnh6BRqW1yInwzQmx-oBgmlkgnY0gmlwhKwS-5-KbXVsdGlhZGRyc4wACgSsEvufBorY3QOCcnOFAAABAACJc2VjcDI1NmsxoQPZOkASfD0zC0IiyPk7EB9cUQZvX_G4_aAf-lzIaFgLrYN0Y3CCiteDdWRwgorZhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:193 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35542/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.235.226/tcp/12119/p2p/16Uiu2HAmKYq4j6Ps45PopVt8JjypWGAgromAYpbHBsDkLZ6VGiZT"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12118/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35542/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12118/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35542/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1714980313998416384,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 3af9b96a5bc8
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id bf49a4b3b208
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-06_07-25-01__23d835fa-6b8c-4d64-83d2-027433718242__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-06_07-25-01__23d835fa-6b8c-4d64-83d2-027433718242__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_only_relay__peer_relay_and_store with id: 2024-05-06_07-25-17__d5e1e2fe-ebb0-433b-8660-65e5ec1031ec
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-06_07-25-17__d5e1e2fe-ebb0-433b-8660-65e5ec1031ec__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.232.84
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['38620', '38621', '38622', '38623', '38624']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:327 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 38620:38620 -p 38621:38621 -p 38622:38622 -p 38623:38623 -p 38624:38624 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=38622 --rest-port=38620 --tcp-port=38621 --discv5-udp-port=38623 --rest-address=0.0.0.0 --nat=extip:172.18.232.84 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=38624 --metrics-logging=true --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.232.84 waku eb4a5d533f13e81cd7a5371b107d025c76378490e3f67df1de9782395f40d2f8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID eb4a5d533f13. Setting up logs at ./log/docker/publishing_node1_2024-05-06_07-25-17__d5e1e2fe-ebb0-433b-8660-65e5ec1031ec__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 38620
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38620/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.232.84/tcp/38621/p2p/16Uiu2HAmEmqC6eoBS3hnuHnp78AAUgn7KqQxAX6DHJcn41iQzREs","/ip4/172.18.232.84/tcp/38622/ws/p2p/16Uiu2HAmEmqC6eoBS3hnuHnp78AAUgn7KqQxAX6DHJcn41iQzREs"],"enrUri":"enr:-LO4QLa3ruAIzISXbdDmtUAbV2EUDZgXk9BKIBvW-Gpob2VxLdLE6l0CazkhObgu0XyQ6oTdV0UbIICC9I-sAzr6ycwBgmlkgnY0gmlwhKwS6FSKbXVsdGlhZGRyc4wACgSsEuhUBpbe3QOCcnOFAAABAACJc2VjcDI1NmsxoQMfeBWApTb4DqDxjl2pNARvRXwlatvT25EnCDMfBntS_IN0Y3CClt2DdWRwgpbfhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:193 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-06_07-25-17__d5e1e2fe-ebb0-433b-8660-65e5ec1031ec__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.46.253
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['44025', '44026', '44027', '44028', '44029']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:327 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 44025:44025 -p 44026:44026 -p 44027:44027 -p 44028:44028 -p 44029:44029 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44027 --rest-port=44025 --tcp-port=44026 --discv5-udp-port=44028 --rest-address=0.0.0.0 --nat=extip:172.18.46.253 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44029 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QLa3ruAIzISXbdDmtUAbV2EUDZgXk9BKIBvW-Gpob2VxLdLE6l0CazkhObgu0XyQ6oTdV0UbIICC9I-sAzr6ycwBgmlkgnY0gmlwhKwS6FSKbXVsdGlhZGRyc4wACgSsEuhUBpbe3QOCcnOFAAABAACJc2VjcDI1NmsxoQMfeBWApTb4DqDxjl2pNARvRXwlatvT25EnCDMfBntS_IN0Y3CClt2DdWRwgpbfhXdha3UyAQ --storenode=/ip4/172.18.232.84/tcp/38621/p2p/16Uiu2HAmEmqC6eoBS3hnuHnp78AAUgn7KqQxAX6DHJcn41iQzREs --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.46.253 waku 75d502825a7333817ac23a0724ab53534d79d0926ceb4830ae2441e4604668b9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 75d502825a73. Setting up logs at ./log/docker/store_node1_2024-05-06_07-25-17__d5e1e2fe-ebb0-433b-8660-65e5ec1031ec__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 44025
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44025/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.46.253/tcp/44026/p2p/16Uiu2HAmSW7eWJtJqEZJ9kYe5yKT638QY6nUm6TNsdrqiir5ARdh","/ip4/172.18.46.253/tcp/44027/ws/p2p/16Uiu2HAmSW7eWJtJqEZJ9kYe5yKT638QY6nUm6TNsdrqiir5ARdh"],"enrUri":"enr:-LO4QK-MhRAuVxbVASdA7ZT2wlVTKrJzj4uFdbLp85DzC4KockNwB2c8MdGP1nOb5em8EucvWAEID9Pf71kExjb9ONwBgmlkgnY0gmlwhKwSLv2KbXVsdGlhZGRyc4wACgSsEi79Bqv73QOCcnOFAAABAACJc2VjcDI1NmsxoQPNvaPm3kSP_WcR8eDPuZUPHilmdWc4uVxPiV_gh-qvuIN0Y3CCq_qDdWRwgqv8hXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:193 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44025/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.232.84/tcp/38621/p2p/16Uiu2HAmEmqC6eoBS3hnuHnp78AAUgn7KqQxAX6DHJcn41iQzREs"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38620/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44025/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38620/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44025/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1714980329771381504,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id eb4a5d533f13
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 75d502825a73
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-06_07-25-17__d5e1e2fe-ebb0-433b-8660-65e5ec1031ec__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-06_07-25-17__d5e1e2fe-ebb0-433b-8660-65e5ec1031ec__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_only_relay__peer_relay_and_store with id: 2024-05-06_07-25-34__c74c20ff-1ffc-4aa4-aeb9-a4fe065f1f13
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-06_07-25-34__c74c20ff-1ffc-4aa4-aeb9-a4fe065f1f13__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.180.16
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['62726', '62727', '62728', '62729', '62730']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:327 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 62726:62726 -p 62727:62727 -p 62728:62728 -p 62729:62729 -p 62730:62730 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62728 --rest-port=62726 --tcp-port=62727 --discv5-udp-port=62729 --rest-address=0.0.0.0 --nat=extip:172.18.180.16 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62730 --metrics-logging=true --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.180.16 waku ec10d4ce2e016b164a845a382b10c666e404bab457c7f9e11cf417f9c345cc3b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID ec10d4ce2e01. Setting up logs at ./log/docker/publishing_node1_2024-05-06_07-25-34__c74c20ff-1ffc-4aa4-aeb9-a4fe065f1f13__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 62726
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62726/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.180.16/tcp/62727/p2p/16Uiu2HAmUp4XyJSHmGhLzPbWMgy3nqHo2MAXoNw2MxfvZLUVG4tr","/ip4/172.18.180.16/tcp/62728/ws/p2p/16Uiu2HAmUp4XyJSHmGhLzPbWMgy3nqHo2MAXoNw2MxfvZLUVG4tr"],"enrUri":"enr:-LO4QKH65WDQXW5iWs3DESjvqwoM40wioqUVEsgUFwVWm3VJT1mwYvBaYFeFuxNuhggiHxcpzbQF7PqM0fUdPX3UEokBgmlkgnY0gmlwhKwStBCKbXVsdGlhZGRyc4wACgSsErQQBvUI3QOCcnOFAAABAACJc2VjcDI1NmsxoQPwDfL71M7ht4HkUMGA3C1IrM4YE9g85hDhFvyOew5044N0Y3CC9QeDdWRwgvUJhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:193 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-06_07-25-34__c74c20ff-1ffc-4aa4-aeb9-a4fe065f1f13__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.171.213
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['33181', '33182', '33183', '33184', '33185']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:327 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 33181:33181 -p 33182:33182 -p 33183:33183 -p 33184:33184 -p 33185:33185 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=33183 --rest-port=33181 --tcp-port=33182 --discv5-udp-port=33184 --rest-address=0.0.0.0 --nat=extip:172.18.171.213 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=33185 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QKH65WDQXW5iWs3DESjvqwoM40wioqUVEsgUFwVWm3VJT1mwYvBaYFeFuxNuhggiHxcpzbQF7PqM0fUdPX3UEokBgmlkgnY0gmlwhKwStBCKbXVsdGlhZGRyc4wACgSsErQQBvUI3QOCcnOFAAABAACJc2VjcDI1NmsxoQPwDfL71M7ht4HkUMGA3C1IrM4YE9g85hDhFvyOew5044N0Y3CC9QeDdWRwgvUJhXdha3UyAQ --storenode=/ip4/172.18.180.16/tcp/62727/p2p/16Uiu2HAmUp4XyJSHmGhLzPbWMgy3nqHo2MAXoNw2MxfvZLUVG4tr --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.171.213 waku b70b35e53815cf3a7ac5a96b84f7697c36b8360562725c1283b1873e327e1170
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID b70b35e53815. Setting up logs at ./log/docker/store_node1_2024-05-06_07-25-34__c74c20ff-1ffc-4aa4-aeb9-a4fe065f1f13__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 33181
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33181/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.171.213/tcp/33182/p2p/16Uiu2HAmPjaVZCnWd8sjyfJgozPHkfSAGxU8B24FyQpFxtiMCCUZ","/ip4/172.18.171.213/tcp/33183/ws/p2p/16Uiu2HAmPjaVZCnWd8sjyfJgozPHkfSAGxU8B24FyQpFxtiMCCUZ"],"enrUri":"enr:-LO4QNMtccONumMrmCqM-8QCpeghRyslsc92DeUc6tCtZ-qBJRXYizqIioGpSKaXQKakpFgbRXmqmXblqKVZB3B_iQMBgmlkgnY0gmlwhKwSq9WKbXVsdGlhZGRyc4wACgSsEqvVBoGf3QOCcnOFAAABAACJc2VjcDI1NmsxoQOknXwH-t-oFuNVnDJw89yAlQbSABQ2xTnoszAJCfRiooN0Y3CCgZ6DdWRwgoGghXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:193 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33181/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.180.16/tcp/62727/p2p/16Uiu2HAmUp4XyJSHmGhLzPbWMgy3nqHo2MAXoNw2MxfvZLUVG4tr"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62726/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33181/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62726/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33181/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1714980346048897792,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id ec10d4ce2e01
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id b70b35e53815
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-06_07-25-34__c74c20ff-1ffc-4aa4-aeb9-a4fe065f1f13__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-06_07-25-34__c74c20ff-1ffc-4aa4-aeb9-a4fe065f1f13__harbor.status.im_wakuorg_nwaku:latest.log