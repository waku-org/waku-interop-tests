[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_payloads with id: 2024-12-29_11-30-01__3d5dd211-70dc-4fa0-bb80-e8444e3c227b
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-12-29_11-30-01__3d5dd211-70dc-4fa0-bb80-e8444e3c227b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.204.80
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['11056', '11057', '11058', '11059', '11060']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 11056:11056 -p 11057:11057 -p 11058:11058 -p 11059:11059 -p 11060:11060 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=11058 --rest-port=11056 --tcp-port=11057 --discv5-udp-port=11059 --rest-address=0.0.0.0 --nat=extip:172.18.204.80 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c3d08ccd81268a08c36cbff7edbe7eb8a1e9677ffeb1ce4acfcfa4e53febefee --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=11060 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.204.80 waku 353c4c8368e4bb8f02e3ce2264f362010bf2f05d2e56e49b7d47e03115727f70
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 353c4c8368e4. Setting up logs at ./log/docker/receiving_node1_2024-12-29_11-30-01__3d5dd211-70dc-4fa0-bb80-e8444e3c227b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 11056
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 9b85b14f7d75. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11056/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11056/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.204.80/tcp/11057/p2p/16Uiu2HAm6EZ3QDXkrLD8y71Uh4YZMkwPUP5C3TBbdtC1t1VVeee3","/ip4/172.18.204.80/tcp/11058/ws/p2p/16Uiu2HAm6EZ3QDXkrLD8y71Uh4YZMkwPUP5C3TBbdtC1t1VVeee3"],"enrUri":"enr:-L24QAYsASkfbYja9UMzSEOS48cm_1bXhPJlhhOsTuNPBleRO4csVG1xS64-UWaZiiUZgWQNaci9TNUXeW1mwj7nBCYCgmlkgnY0gmlwhKwSzFCKbXVsdGlhZGRyc5YACASsEsxQBisxAAoErBLMUAYrMt0DgnJzhQADAQAAiXNlY3AyNTZrMaECoJdSnBTSD-TkZfwzFmT3MUuW2U9q2L-us6k_tO12QyCDdGNwgisxg3VkcIIrM4V3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-12-29_11-30-01__3d5dd211-70dc-4fa0-bb80-e8444e3c227b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.238.116
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['61524', '61525', '61526', '61527', '61528']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 61524:61524 -p 61525:61525 -p 61526:61526 -p 61527:61527 -p 61528:61528 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61526 --rest-port=61524 --tcp-port=61525 --discv5-udp-port=61527 --rest-address=0.0.0.0 --nat=extip:172.18.238.116 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9dcfebc2517cf85639bd20be89dbe253a43de8de8cec07ece4283ad25ac547ae --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61528 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.238.116 waku f7eb80e873baacd8a460b62e47791ff71f84d2503dce9dfc68d3bed48dfc32eb
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID f7eb80e873ba. Setting up logs at ./log/docker/receiving_node2_2024-12-29_11-30-01__3d5dd211-70dc-4fa0-bb80-e8444e3c227b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 61524
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61524/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61524/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.238.116/tcp/61525/p2p/16Uiu2HAmDW649bxLS6mzq7ffKEtdFBFmQuVxYBifSNCEdt85Mfyb","/ip4/172.18.238.116/tcp/61526/ws/p2p/16Uiu2HAmDW649bxLS6mzq7ffKEtdFBFmQuVxYBifSNCEdt85Mfyb"],"enrUri":"enr:-L24QE2275AYXZWCwshow8a-1xPpKP9RFvuRFJXOyyQXaLSqV5htEJ7Ld0CI6HdG8C-QXTRT3k4BpOoJL7P1GFaNC7ICgmlkgnY0gmlwhKwS7nSKbXVsdGlhZGRyc5YACASsEu50BvBVAAoErBLudAbwVt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDDJPo4rjrlXyl1Otfxd6asW_bJQfhMuv2LkQ5dePpFqqDdGNwgvBVg3VkcILwV4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61524/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.204.80/tcp/11057/p2p/16Uiu2HAm6EZ3QDXkrLD8y71Uh4YZMkwPUP5C3TBbdtC1t1VVeee3"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-12-29_11-30-01__3d5dd211-70dc-4fa0-bb80-e8444e3c227b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.42.219
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['30030', '30031', '30032', '30033', '30034']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 30030:30030 -p 30031:30031 -p 30032:30032 -p 30033:30033 -p 30034:30034 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=30032 --rest-port=30030 --tcp-port=30031 --discv5-udp-port=30033 --rest-address=0.0.0.0 --nat=extip:172.18.42.219 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0b9ad7ff834cfebfde879a7bba52fad8b6fcc8524dd847bfd8a9dc8a9ce87c41 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=30034 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QAYsASkfbYja9UMzSEOS48cm_1bXhPJlhhOsTuNPBleRO4csVG1xS64-UWaZiiUZgWQNaci9TNUXeW1mwj7nBCYCgmlkgnY0gmlwhKwSzFCKbXVsdGlhZGRyc5YACASsEsxQBisxAAoErBLMUAYrMt0DgnJzhQADAQAAiXNlY3AyNTZrMaECoJdSnBTSD-TkZfwzFmT3MUuW2U9q2L-us6k_tO12QyCDdGNwgisxg3VkcIIrM4V3YWt1Mgk --lightpushnode=/ip4/172.18.204.80/tcp/11057/p2p/16Uiu2HAm6EZ3QDXkrLD8y71Uh4YZMkwPUP5C3TBbdtC1t1VVeee3 --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.42.219 waku df3efc53dee915fab72d837b0346f5f6acdc403c8694ede1c150ba4378be69b4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID df3efc53dee9. Setting up logs at ./log/docker/lightpush_node1_2024-12-29_11-30-01__3d5dd211-70dc-4fa0-bb80-e8444e3c227b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 30030
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30030/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30030/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.42.219/tcp/30031/p2p/16Uiu2HAmHsrq1eP4YiVKmeqoZ3oSXdwxknGFQTepVxeGHYapK9N7","/ip4/172.18.42.219/tcp/30032/ws/p2p/16Uiu2HAmHsrq1eP4YiVKmeqoZ3oSXdwxknGFQTepVxeGHYapK9N7"],"enrUri":"enr:-L24QG_mXFLUognOTdWTP3Wlh6oyduIE2qbiRH7H_3J4blwhEQBusfARIsNR57YfQn3u6R-YRirGTHv6mo71ojNaw0ECgmlkgnY0gmlwhKwSKtuKbXVsdGlhZGRyc5YACASsEirbBnVPAAoErBIq2wZ1UN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDTZZ63pwHGbTKduYpLcWYPAJE4jGu4RrWG0MOZgDWuwiDdGNwgnVPg3VkcIJ1UYV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30030/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.204.80/tcp/11057/p2p/16Uiu2HAm6EZ3QDXkrLD8y71Uh4YZMkwPUP5C3TBbdtC1t1VVeee3"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30030/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.238.116/tcp/61525/p2p/16Uiu2HAmDW649bxLS6mzq7ffKEtdFBFmQuVxYBifSNCEdt85Mfyb"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11056/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61524/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload Empty string
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30030/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1735471805602541824}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:30030/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload Unecoded text
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30030/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "Hello World!", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1735471805609672448}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:30030/lightpush/v1/message. Response content: b'Invalid message: Incorrect base64 string'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload A dictionary
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30030/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": {"key": "YWFh"}, "contentTopic": "/myapp/1/latest/proto", "timestamp": 1735471805612571648}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:30030/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload An integer
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30030/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": 1234567890, "contentTopic": "/myapp/1/latest/proto", "timestamp": 1735471805619441920}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:30030/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload A list
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30030/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": ["YWFh"], "contentTopic": "/myapp/1/latest/proto", "timestamp": 1735471805624015616}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:30030/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload A bool
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30030/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": true, "contentTopic": "/myapp/1/latest/proto", "timestamp": 1735471805628371712}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:30030/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 353c4c8368e4
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id f7eb80e873ba
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 353c4c8368e4. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id df3efc53dee9
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container f7eb80e873ba. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.