[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_single_content_topic[/app/29/sometopic/someencoding] with id: 2024-12-25_20-01-13__0fde7763-92af-4e21-bc90-e3af4dd01edb
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-25_20-01-13__0fde7763-92af-4e21-bc90-e3af4dd01edb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.226.184
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['8570', '8571', '8572', '8573', '8574']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 8570:8570 -p 8571:8571 -p 8572:8572 -p 8573:8573 -p 8574:8574 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8572 --rest-port=8570 --tcp-port=8571 --discv5-udp-port=8573 --rest-address=0.0.0.0 --nat=extip:172.18.226.184 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=4ed5aac1ae8125f06691a0b6ef8c2009cf9a97dbf1e7ddaaaa27d396fbf0c8ba --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8574 --metrics-logging=true --relay=true --filter=true --content-topic=/app/29/sometopic/someencoding
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.226.184 waku b525d6843c7b0e9dd266822f75b06afa07044dae77f7a85ed739165b7320e56d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID b525d6843c7b. Setting up logs at ./log/docker/node1_2024-12-25_20-01-13__0fde7763-92af-4e21-bc90-e3af4dd01edb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 8570
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8570/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8570/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.226.184/tcp/8571/p2p/16Uiu2HAmBxwNqo68PdxCvcs4X1pinReFGN7eFHfYmFjc5pAw78TV","/ip4/172.18.226.184/tcp/8572/ws/p2p/16Uiu2HAmBxwNqo68PdxCvcs4X1pinReFGN7eFHfYmFjc5pAw78TV"],"enrUri":"enr:-L24QDcCHkPQHp0grJgCwLy0cQErCa5ZYusynWR0lsaeoxbuI7Rl6pYF8dY0Z4ffWTvj1WwPCjh-L-3-0QGF2e8m15ECgmlkgnY0gmlwhKwS4riKbXVsdGlhZGRyc5YACASsEuK4BiF7AAoErBLiuAYhfN0DgnJzhQACAQAAiXNlY3AyNTZrMaEC9b1n4aLEL1G9MgJ62gCLLQ4T1xTnshCXiZv78bbN4ayDdGNwgiF7g3VkcIIhfYV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-25_20-01-13__0fde7763-92af-4e21-bc90-e3af4dd01edb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.196.59
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['60698', '60699', '60700', '60701', '60702']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 60698:60698 -p 60699:60699 -p 60700:60700 -p 60701:60701 -p 60702:60702 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=60700 --rest-port=60698 --tcp-port=60699 --discv5-udp-port=60701 --rest-address=0.0.0.0 --nat=extip:172.18.196.59 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=ec8133627dfde8aadcd8d35eae4fbafc1bbe71efb24294503f62991722e868cc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=60702 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QDcCHkPQHp0grJgCwLy0cQErCa5ZYusynWR0lsaeoxbuI7Rl6pYF8dY0Z4ffWTvj1WwPCjh-L-3-0QGF2e8m15ECgmlkgnY0gmlwhKwS4riKbXVsdGlhZGRyc5YACASsEuK4BiF7AAoErBLiuAYhfN0DgnJzhQACAQAAiXNlY3AyNTZrMaEC9b1n4aLEL1G9MgJ62gCLLQ4T1xTnshCXiZv78bbN4ayDdGNwgiF7g3VkcIIhfYV3YWt1MgU --content-topic=/app/29/sometopic/someencoding
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.196.59 waku ed40bccd96ce595e79b034a7f34c4e37a50ebaa569dc84899ed4f0f4970464e0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ed40bccd96ce. Setting up logs at ./log/docker/node2_2024-12-25_20-01-13__0fde7763-92af-4e21-bc90-e3af4dd01edb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 60698
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60698/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60698/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.196.59/tcp/60699/p2p/16Uiu2HAmEaBqXykdFjLwJfgm91CHzUZ26gdyVxKUjTSsnQSKssTF","/ip4/172.18.196.59/tcp/60700/ws/p2p/16Uiu2HAmEaBqXykdFjLwJfgm91CHzUZ26gdyVxKUjTSsnQSKssTF"],"enrUri":"enr:-L24QOKI3t5BKiL1KA4IVOSwM4Homf2LSTDSOOr8nGkLbxNJKlWqghquFNdBe99ZUtih0CvVmTw_bKJD5pEU0-ohZR4CgmlkgnY0gmlwhKwSxDuKbXVsdGlhZGRyc5YACASsEsQ7Bu0bAAoErBLEOwbtHN0DgnJzhQACAQAAiXNlY3AyNTZrMaEDHHx1S1xHvDr9DQT1WyBnCGPEfn7idZKw2qOq5t1DhsqDdGNwgu0bg3VkcILtHYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60698/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.226.184/tcp/8571/p2p/16Uiu2HAmBxwNqo68PdxCvcs4X1pinReFGN7eFHfYmFjc5pAw78TV"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8570/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/app/29/sometopic/someencoding"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60698/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/app/29/sometopic/someencoding"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8570/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8570/relay/v1/auto/messages/%2Fapp%2F29%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/app/29/sometopic/someencoding","version":0,"timestamp":1735156880379467776,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60698/relay/v1/auto/messages/%2Fapp%2F29%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/app/29/sometopic/someencoding","version":0,"timestamp":1735156880379467776,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id b525d6843c7b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id ed40bccd96ce
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container b525d6843c7b. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.