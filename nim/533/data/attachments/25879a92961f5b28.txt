[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_content_topics with id: 2024-12-20_04-11-48__b9b3db7e-aa33-4896-9b9e-3d173fd74c21
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-12-20_04-11-48__b9b3db7e-aa33-4896-9b9e-3d173fd74c21__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.51.198
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['59664', '59665', '59666', '59667', '59668']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 59664:59664 -p 59665:59665 -p 59666:59666 -p 59667:59667 -p 59668:59668 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=59666 --rest-port=59664 --tcp-port=59665 --discv5-udp-port=59667 --rest-address=0.0.0.0 --nat=extip:172.18.51.198 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=48e2aa9fb450ecebdeac545b34c43d7be6be10ec1fe2bdc043bfbca7edcbc4f3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=59668 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.51.198 waku a6a514db84b7be942c7ae469c514948fcf3086813d95cbbaa983626b0215133d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID a6a514db84b7. Setting up logs at ./log/docker/receiving_node1_2024-12-20_04-11-48__b9b3db7e-aa33-4896-9b9e-3d173fd74c21__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 59664
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container ecd87aa0609b. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59664/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59664/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.51.198/tcp/59665/p2p/16Uiu2HAm2ibNJRCKKtyNo8dQtJfFaJwkwPNyxruEqnwRWL3HCsGR","/ip4/172.18.51.198/tcp/59666/ws/p2p/16Uiu2HAm2ibNJRCKKtyNo8dQtJfFaJwkwPNyxruEqnwRWL3HCsGR"],"enrUri":"enr:-L24QEFy7w5cTZD2TNHhCwDZxhMEPYVJg0fY_dlSyU_8G8ArbkG0zDNdd65ZmNBD4rEs-EwcS_k5HYuQlO7KVLQSNa0CgmlkgnY0gmlwhKwSM8aKbXVsdGlhZGRyc5YACASsEjPGBukRAAoErBIzxgbpEt0DgnJzhQADAQAAiXNlY3AyNTZrMaECbFd3rlRQ7Gm02HHXAW59VeCAU7PSYftiJe0Io4eu776DdGNwgukRg3VkcILpE4V3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-12-20_04-11-48__b9b3db7e-aa33-4896-9b9e-3d173fd74c21__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.246.162
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['45527', '45528', '45529', '45530', '45531']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 45527:45527 -p 45528:45528 -p 45529:45529 -p 45530:45530 -p 45531:45531 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45529 --rest-port=45527 --tcp-port=45528 --discv5-udp-port=45530 --rest-address=0.0.0.0 --nat=extip:172.18.246.162 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6a249c69fbf34738a441d7a19dacaea23ff79f7ddf543154edd2cfa678e8dbc7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45531 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.246.162 waku 33f922f1bac097f86c09c7c89b9b605939f8e2a27f3658e876c787a0d3527c10
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 33f922f1bac0. Setting up logs at ./log/docker/receiving_node2_2024-12-20_04-11-48__b9b3db7e-aa33-4896-9b9e-3d173fd74c21__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 45527
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45527/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45527/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.246.162/tcp/45528/p2p/16Uiu2HAmJN7HYTK2ppfCr4GyP6hc5LWsHbMTZgQ3kFMouLtzL2rQ","/ip4/172.18.246.162/tcp/45529/ws/p2p/16Uiu2HAmJN7HYTK2ppfCr4GyP6hc5LWsHbMTZgQ3kFMouLtzL2rQ"],"enrUri":"enr:-L24QDFmDoG-k1JsQRN0GIKNhOAEdINfyEfqt-oGyJyH7KHFas14qTYHGRUS2TVkzK_sVQC5eQi7rk584LLS-QgISJwCgmlkgnY0gmlwhKwS9qKKbXVsdGlhZGRyc5YACASsEvaiBrHYAAoErBL2ogax2d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDVNMW9bGH712nVk9TZuIPnxhX-RuW-OO7ET2dxsOkv32DdGNwgrHYg3VkcIKx2oV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45527/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.51.198/tcp/59665/p2p/16Uiu2HAm2ibNJRCKKtyNo8dQtJfFaJwkwPNyxruEqnwRWL3HCsGR"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-12-20_04-11-48__b9b3db7e-aa33-4896-9b9e-3d173fd74c21__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.226.63
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['63109', '63110', '63111', '63112', '63113']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 63109:63109 -p 63110:63110 -p 63111:63111 -p 63112:63112 -p 63113:63113 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63111 --rest-port=63109 --tcp-port=63110 --discv5-udp-port=63112 --rest-address=0.0.0.0 --nat=extip:172.18.226.63 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=adffeaaca3ca9bffe4ebefd2b60afa5ce3ae371292defa10d59b7821ebe2f0e6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63113 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QEFy7w5cTZD2TNHhCwDZxhMEPYVJg0fY_dlSyU_8G8ArbkG0zDNdd65ZmNBD4rEs-EwcS_k5HYuQlO7KVLQSNa0CgmlkgnY0gmlwhKwSM8aKbXVsdGlhZGRyc5YACASsEjPGBukRAAoErBIzxgbpEt0DgnJzhQADAQAAiXNlY3AyNTZrMaECbFd3rlRQ7Gm02HHXAW59VeCAU7PSYftiJe0Io4eu776DdGNwgukRg3VkcILpE4V3YWt1Mgk --lightpushnode=/ip4/172.18.51.198/tcp/59665/p2p/16Uiu2HAm2ibNJRCKKtyNo8dQtJfFaJwkwPNyxruEqnwRWL3HCsGR --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.226.63 waku f679099bd771045ed359ae9c087ff596035fd8a14dce3bcb67e2d173f098a466
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID f679099bd771. Setting up logs at ./log/docker/lightpush_node1_2024-12-20_04-11-48__b9b3db7e-aa33-4896-9b9e-3d173fd74c21__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 63109
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63109/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63109/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.226.63/tcp/63110/p2p/16Uiu2HAkuVyCT44VZTxJz8wxkcT1LteULhhrH58K32qWhyrD5zfi","/ip4/172.18.226.63/tcp/63111/ws/p2p/16Uiu2HAkuVyCT44VZTxJz8wxkcT1LteULhhrH58K32qWhyrD5zfi"],"enrUri":"enr:-L24QDfschHgd1uAJ7ncquinzQ0EEsRqTRDKxRnxYek6LM_cQ2jp5kSF3_AN1mbNn3atl9AXmCbEpOHCK2ME-_13uiMCgmlkgnY0gmlwhKwS4j-KbXVsdGlhZGRyc5YACASsEuI_BvaGAAoErBLiPwb2h90DgnJzhQADAQAAiXNlY3AyNTZrMaECARnKvDXMNBXSm0U4c_mKTWXbGlZj0lGvdgT-ZMhA0cmDdGNwgvaGg3VkcIL2iIV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63109/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.51.198/tcp/59665/p2p/16Uiu2HAm2ibNJRCKKtyNo8dQtJfFaJwkwPNyxruEqnwRWL3HCsGR"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63109/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.246.162/tcp/45528/p2p/16Uiu2HAmJN7HYTK2ppfCr4GyP6hc5LWsHbMTZgQ3kFMouLtzL2rQ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59664/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45527/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic Empty string
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63109/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "", "timestamp": 1734667912870547456}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:63109/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A dictionary
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63109/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": {"key": "YWFh"}, "timestamp": 1734667912877886720}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:63109/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic An integer
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63109/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": 1234567890, "timestamp": 1734667912884131328}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:63109/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A list
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63109/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": ["YWFh"], "timestamp": 1734667912888927744}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:63109/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A bool
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63109/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": true, "timestamp": 1734667912893586688}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:63109/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id a6a514db84b7
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 33f922f1bac0
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container a6a514db84b7. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id f679099bd771
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 33f922f1bac0. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.