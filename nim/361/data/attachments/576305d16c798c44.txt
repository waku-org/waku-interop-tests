[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_subscribe_with_invalid_request_id with id: 2024-09-15_04-16-38__6d8ba9a4-2ec5-4353-ba4a-3663ccb08c9f
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-15_04-16-38__6d8ba9a4-2ec5-4353-ba4a-3663ccb08c9f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.242.192
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['23286', '23287', '23288', '23289', '23290']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 23286:23286 -p 23287:23287 -p 23288:23288 -p 23289:23289 -p 23290:23290 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23288 --rest-port=23286 --tcp-port=23287 --discv5-udp-port=23289 --rest-address=0.0.0.0 --nat=extip:172.18.242.192 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e24a84be4ce27959ccc0b2b45caa66389feaffc59a0babc61f7bcc52ddf4f3cb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23290 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.242.192 waku df2b96958779668ce6645dda4bdd18ee1bb32cc480f928f1b92943fe24865784
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID df2b96958779. Setting up logs at ./log/docker/node1_2024-09-15_04-16-38__6d8ba9a4-2ec5-4353-ba4a-3663ccb08c9f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 23286
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23286/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23286/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.242.192/tcp/23287/p2p/16Uiu2HAmBSeHGKJaK2e7c1uHGG2zLYHv1Zv49nNE6omL49EZ3T3n","/ip4/172.18.242.192/tcp/23288/ws/p2p/16Uiu2HAmBSeHGKJaK2e7c1uHGG2zLYHv1Zv49nNE6omL49EZ3T3n"],"enrUri":"enr:-LO4QBj8nYUZEJ8JZICh0L7t_o2GRtJbuG_duNXDiu3Al6ezDBoiWXZDnwMpBWF7vvK53yFSD4-ropsMbQIyikNrmKYBgmlkgnY0gmlwhKwS8sCKbXVsdGlhZGRyc4wACgSsEvLABlr43QOCcnOFAAMBAACJc2VjcDI1NmsxoQLt-qachFIcgzHdnKzsYBM0VNVt9psVzqMAt-5ovIwyOYN0Y3CCWveDdWRwglr5hXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-15_04-16-38__6d8ba9a4-2ec5-4353-ba4a-3663ccb08c9f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.11.128
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['18493', '18494', '18495', '18496', '18497']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 18493:18493 -p 18494:18494 -p 18495:18495 -p 18496:18496 -p 18497:18497 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18495 --rest-port=18493 --tcp-port=18494 --discv5-udp-port=18496 --rest-address=0.0.0.0 --nat=extip:172.18.11.128 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=faba5b7957f3d1b0e71db1256b8c4ab5ceaa6ebfdeba5fed48dc3a97f74bb6b5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18497 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QBj8nYUZEJ8JZICh0L7t_o2GRtJbuG_duNXDiu3Al6ezDBoiWXZDnwMpBWF7vvK53yFSD4-ropsMbQIyikNrmKYBgmlkgnY0gmlwhKwS8sCKbXVsdGlhZGRyc4wACgSsEvLABlr43QOCcnOFAAMBAACJc2VjcDI1NmsxoQLt-qachFIcgzHdnKzsYBM0VNVt9psVzqMAt-5ovIwyOYN0Y3CCWveDdWRwglr5hXdha3UyBQ --filternode=/ip4/172.18.242.192/tcp/23287/p2p/16Uiu2HAmBSeHGKJaK2e7c1uHGG2zLYHv1Zv49nNE6omL49EZ3T3n
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.11.128 waku 873afd33a70302c0bc87c3409ec3034b113953950a73271f00f61019fe99a235
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 873afd33a703. Setting up logs at ./log/docker/node2_2024-09-15_04-16-38__6d8ba9a4-2ec5-4353-ba4a-3663ccb08c9f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 18493
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18493/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18493/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.11.128/tcp/18494/p2p/16Uiu2HAmEEX1Yk3Spsiuw2aBCzzUbZBdKz58j1FP5qN6UXEbPA4F","/ip4/172.18.11.128/tcp/18495/ws/p2p/16Uiu2HAmEEX1Yk3Spsiuw2aBCzzUbZBdKz58j1FP5qN6UXEbPA4F"],"enrUri":"enr:-LO4QPKK4qOh6eDhhgu4fVtTFLe9INywVKzeaiLNC_SBb9vyXoHCO6S-E9PZcU6WSDABBh8FmP84A_60zC8-Jl9peNABgmlkgnY0gmlwhKwSC4CKbXVsdGlhZGRyc4wACgSsEguABkg_3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMXcoVEUaJhfYRlCdAHY1lFBiXbQCwXzB7r_RWpyhnJsIN0Y3CCSD6DdWRwgkhAhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18493/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.242.192/tcp/23287/p2p/16Uiu2HAmBSeHGKJaK2e7c1uHGG2zLYHv1Zv49nNE6omL49EZ3T3n"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23286/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18493/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "d499bf1b-0b80-47f7-8986-289961669f85", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"d499bf1b-0b80-47f7-8986-289961669f85","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18493/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": 1, "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:18493/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id df2b96958779
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 873afd33a703
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.