[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_with_peerAddr with id: 2024-09-15_04-30-42__39df7554-df12-4229-ba5f-24c0ede70f17
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:28 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:36 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-09-15_04-30-42__39df7554-df12-4229-ba5f-24c0ede70f17__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.142.28
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['10218', '10219', '10220', '10221', '10222']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 10218:10218 -p 10219:10219 -p 10220:10220 -p 10221:10221 -p 10222:10222 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=10220 --rest-port=10218 --tcp-port=10219 --discv5-udp-port=10221 --rest-address=0.0.0.0 --nat=extip:172.18.142.28 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=858cbba2ad89cc0ce2a1da46ab2ede40f6f280fc853f059badd527ad13b187ca --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=10222 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.142.28 waku 79d64cdf8e0ba4f5dbd813618632d05b5dfe05474b75462f4df91d1f2050bcb0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 79d64cdf8e0b. Setting up logs at ./log/docker/publishing_node1_2024-09-15_04-30-42__39df7554-df12-4229-ba5f-24c0ede70f17__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 10218
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10218/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10218/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.142.28/tcp/10219/p2p/16Uiu2HAm2dP5b4aNHubcFTUrcraPEKWT4NEyB7XVAbgDWoAJiCJF","/ip4/172.18.142.28/tcp/10220/ws/p2p/16Uiu2HAm2dP5b4aNHubcFTUrcraPEKWT4NEyB7XVAbgDWoAJiCJF"],"enrUri":"enr:-LO4QIyfuE8r2U5p90QOF-zJ_0c-4MJiQ6UKeMSYUrGhlZWyHcx_wdyG0ogfaIINdaYTYcNUhFc7B_9jTD_gY5uV4lcBgmlkgnY0gmlwhKwSjhyKbXVsdGlhZGRyc4wACgSsEo4cBifs3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJrAatQd25osZ_MoVHSHHJYtNJ3OrZ6s80xXmVXOqKHjIN0Y3CCJ-uDdWRwgifthXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2024-09-15_04-30-42__39df7554-df12-4229-ba5f-24c0ede70f17__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.164.111
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['29014', '29015', '29016', '29017', '29018']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 29014:29014 -p 29015:29015 -p 29016:29016 -p 29017:29017 -p 29018:29018 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29016 --rest-port=29014 --tcp-port=29015 --discv5-udp-port=29017 --rest-address=0.0.0.0 --nat=extip:172.18.164.111 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3ffbfbd27acacaf98efafffdef79ce8033bfe89f80cb2d7161abd32fac2b9e5b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29018 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QIyfuE8r2U5p90QOF-zJ_0c-4MJiQ6UKeMSYUrGhlZWyHcx_wdyG0ogfaIINdaYTYcNUhFc7B_9jTD_gY5uV4lcBgmlkgnY0gmlwhKwSjhyKbXVsdGlhZGRyc4wACgSsEo4cBifs3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJrAatQd25osZ_MoVHSHHJYtNJ3OrZ6s80xXmVXOqKHjIN0Y3CCJ-uDdWRwgifthXdha3UyAw --storenode=/ip4/172.18.142.28/tcp/10219/p2p/16Uiu2HAm2dP5b4aNHubcFTUrcraPEKWT4NEyB7XVAbgDWoAJiCJF --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.164.111 waku 9a87e28e559221df46ed9ce49fed96dd95c0549990ccdac71337b263b79654bf
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 9a87e28e5592. Setting up logs at ./log/docker/store_node1_2024-09-15_04-30-42__39df7554-df12-4229-ba5f-24c0ede70f17__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 29014
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29014/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29014/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.164.111/tcp/29015/p2p/16Uiu2HAm48Cw91pL9XYcN3tQ6iXuGuaiTseF8R5u7vayqsU3FVXM","/ip4/172.18.164.111/tcp/29016/ws/p2p/16Uiu2HAm48Cw91pL9XYcN3tQ6iXuGuaiTseF8R5u7vayqsU3FVXM"],"enrUri":"enr:-LO4QB-_aS_4rGs-BDrgRCc8XMP4P8hzzA__i35u6jC3gxZ0aMiUrXCYYVKQUQSekdzUTH2PibQ6qBSsgn6eQ23zqxQBgmlkgnY0gmlwhKwSpG-KbXVsdGlhZGRyc4wACgSsEqRvBnFY3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKBP7pTc19HIbquSJjCzK-tI2ZTVCrdfYdo4bJLh5atgIN0Y3CCcVeDdWRwgnFZhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29014/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.142.28/tcp/10219/p2p/16Uiu2HAm2dP5b4aNHubcFTUrcraPEKWT4NEyB7XVAbgDWoAJiCJF"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10218/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29014/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:129 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10218/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:215 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29014/store/v3/messages?peerAddr=%2Fip4%2F172.18.142.28%2Ftcp%2F10219%2Fp2p%2F16Uiu2HAm2dP5b4aNHubcFTUrcraPEKWT4NEyB7XVAbgDWoAJiCJF&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1ecd2011c8c1986ef741","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"GuVaIWqumny0M6Sr0vMA0xSd6XmHs2uLXZuX27PG3LE="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 79d64cdf8e0b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 9a87e28e5592
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.