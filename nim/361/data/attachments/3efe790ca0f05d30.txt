[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_subscribe_with_extra_field with id: 2024-09-15_04-16-43__c3abcd20-5622-4ace-9f71-b49cb5904b28
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-15_04-16-43__c3abcd20-5622-4ace-9f71-b49cb5904b28__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.49.81
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['61007', '61008', '61009', '61010', '61011']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 61007:61007 -p 61008:61008 -p 61009:61009 -p 61010:61010 -p 61011:61011 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61009 --rest-port=61007 --tcp-port=61008 --discv5-udp-port=61010 --rest-address=0.0.0.0 --nat=extip:172.18.49.81 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=61a2d1981493222f43d2a2522bcdacacaddb24c5dddd9aca12afd88e2de2da8f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61011 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.49.81 waku c9e77004626ac0c673e88f44dfc6bb9e72e21acd17f985da40145308178a58ac
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID c9e77004626a. Setting up logs at ./log/docker/node1_2024-09-15_04-16-43__c3abcd20-5622-4ace-9f71-b49cb5904b28__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 61007
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61007/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61007/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.49.81/tcp/61008/p2p/16Uiu2HAm1DRaU5YCHkuvnLcwTtarBRbf8jvF7NuC9Hom1EHhxex4","/ip4/172.18.49.81/tcp/61009/ws/p2p/16Uiu2HAm1DRaU5YCHkuvnLcwTtarBRbf8jvF7NuC9Hom1EHhxex4"],"enrUri":"enr:-LO4QIGB4jLTLWh2trqkXslmfMJEDDSBRAZxy8vn8BQ4Tld4WueXrXqze55gTVQSJirP6vNKM-eSqBM2WkSVkPyzhxUBgmlkgnY0gmlwhKwSMVGKbXVsdGlhZGRyc4wACgSsEjFRBu5R3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJWAt4FBmyNtjF7tSs679BA_lzdkK_bDvUBRhk2KhmPBYN0Y3CC7lCDdWRwgu5ShXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-15_04-16-43__c3abcd20-5622-4ace-9f71-b49cb5904b28__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.205.98
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['39317', '39318', '39319', '39320', '39321']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 39317:39317 -p 39318:39318 -p 39319:39319 -p 39320:39320 -p 39321:39321 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39319 --rest-port=39317 --tcp-port=39318 --discv5-udp-port=39320 --rest-address=0.0.0.0 --nat=extip:172.18.205.98 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ddcd4a2dbee6022afcfc92d9a5bd683f7ec1a188e2ec2dfad7969b9f5aa82253 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39321 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QIGB4jLTLWh2trqkXslmfMJEDDSBRAZxy8vn8BQ4Tld4WueXrXqze55gTVQSJirP6vNKM-eSqBM2WkSVkPyzhxUBgmlkgnY0gmlwhKwSMVGKbXVsdGlhZGRyc4wACgSsEjFRBu5R3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJWAt4FBmyNtjF7tSs679BA_lzdkK_bDvUBRhk2KhmPBYN0Y3CC7lCDdWRwgu5ShXdha3UyBQ --filternode=/ip4/172.18.49.81/tcp/61008/p2p/16Uiu2HAm1DRaU5YCHkuvnLcwTtarBRbf8jvF7NuC9Hom1EHhxex4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.205.98 waku d792c55473f19ff9a03f63ca25c63837c74ea990ac5df95edb732090833823ef
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID d792c55473f1. Setting up logs at ./log/docker/node2_2024-09-15_04-16-43__c3abcd20-5622-4ace-9f71-b49cb5904b28__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 39317
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39317/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39317/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.205.98/tcp/39318/p2p/16Uiu2HAm4DY6bKtWjM3DUj2Ye5CjGjRYQCY7apav5TpApEx3aghE","/ip4/172.18.205.98/tcp/39319/ws/p2p/16Uiu2HAm4DY6bKtWjM3DUj2Ye5CjGjRYQCY7apav5TpApEx3aghE"],"enrUri":"enr:-LO4QIpCodGonUZYAe4Dfu79NmgiJiutgjXtNCMgfTvgSLdIKkZrEPxOTuHs0oi2AfKaWjPdfVjQ1YeQcOAAZ0VLux0BgmlkgnY0gmlwhKwSzWKKbXVsdGlhZGRyc4wACgSsEs1iBpmX3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKCnUyvJetvKaaUecAVrXE-Eeeh0FBpzEcsYSQf7XLuAYN0Y3CCmZaDdWRwgpmYhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39317/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.49.81/tcp/61008/p2p/16Uiu2HAm1DRaU5YCHkuvnLcwTtarBRbf8jvF7NuC9Hom1EHhxex4"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61007/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39317/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "918b238f-a149-4856-844e-9a44a6d82807", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"918b238f-a149-4856-844e-9a44a6d82807","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39317/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1", "extraField": "extraValue"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:39317/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id c9e77004626a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id d792c55473f1
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.