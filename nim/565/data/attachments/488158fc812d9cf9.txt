[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_pubsub_topics with id: 2024-12-25_16-55-58__e36eee50-970e-4329-8735-37b8508be804
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-12-25_16-55-58__e36eee50-970e-4329-8735-37b8508be804__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.71.7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['39227', '39228', '39229', '39230', '39231']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 39227:39227 -p 39228:39228 -p 39229:39229 -p 39230:39230 -p 39231:39231 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39229 --rest-port=39227 --tcp-port=39228 --discv5-udp-port=39230 --rest-address=0.0.0.0 --nat=extip:172.18.71.7 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b58dbced67ede7eccd0d55c3ae56a0ab34efbec5feab1cb7cfbad1b6eae66c2e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39231 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.71.7 waku fec2b55881ddb5f59dfbd354c4ece126496c6b0a5361bda0e60c114b0e9e7237
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID fec2b55881dd. Setting up logs at ./log/docker/receiving_node1_2024-12-25_16-55-58__e36eee50-970e-4329-8735-37b8508be804__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 39227
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 991bd77c7058. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39227/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39227/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.71.7/tcp/39228/p2p/16Uiu2HAkyeNdfKFTXUZ1ZvTgRmaPDiWzCYeDThUPBrDCPBvXMgHG","/ip4/172.18.71.7/tcp/39229/ws/p2p/16Uiu2HAkyeNdfKFTXUZ1ZvTgRmaPDiWzCYeDThUPBrDCPBvXMgHG"],"enrUri":"enr:-L24QNsOYIDbelc_fZ0R1x1Tajd4w5PuoavfBYUNH8ZvxOPSB-LIIlPEJhOZspyDQjs2-aZ6v81wofY1V3QSCbDa6hICgmlkgnY0gmlwhKwSRweKbXVsdGlhZGRyc5YACASsEkcHBpk8AAoErBJHBwaZPd0DgnJzhQADAQAAiXNlY3AyNTZrMaECPq-vDMs9qkf9AZSWKfFDOGil3zrTxHPVMbmPNW_I7cuDdGNwgpk8g3VkcIKZPoV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-12-25_16-55-58__e36eee50-970e-4329-8735-37b8508be804__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.206.87
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['25893', '25894', '25895', '25896', '25897']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 25893:25893 -p 25894:25894 -p 25895:25895 -p 25896:25896 -p 25897:25897 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25895 --rest-port=25893 --tcp-port=25894 --discv5-udp-port=25896 --rest-address=0.0.0.0 --nat=extip:172.18.206.87 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3eddee130deb2d77b1fc85fe1d79b4cfcedadb6aaeeffe0da1cfbfe40f0af124 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25897 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.206.87 waku 172b4479e920ae44c4f9986d0969b68d29958412022dd39e93b70ecccd6cedb9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 172b4479e920. Setting up logs at ./log/docker/receiving_node2_2024-12-25_16-55-58__e36eee50-970e-4329-8735-37b8508be804__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 25893
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25893/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25893/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.206.87/tcp/25894/p2p/16Uiu2HAm27TS6o55dKRDutgmpXDJpDJ8ca8Gw2VSC8gU6pCmtNTz","/ip4/172.18.206.87/tcp/25895/ws/p2p/16Uiu2HAm27TS6o55dKRDutgmpXDJpDJ8ca8Gw2VSC8gU6pCmtNTz"],"enrUri":"enr:-L24QJ-geU0wumN7rc1il0JBxTyLuphz96yo9TMLsHitlYUuQCBUyBGSydHtZQ3uEqfRCPvGAvSsOs98yzhGqgOrJkACgmlkgnY0gmlwhKwSzleKbXVsdGlhZGRyc5YACASsEs5XBmUmAAoErBLOVwZlJ90DgnJzhQADAQAAiXNlY3AyNTZrMaECY1cq6dDRWlMQQ0LYr5PbHFBYBq26aoYb10fFFhxoa-mDdGNwgmUmg3VkcIJlKIV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25893/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.71.7/tcp/39228/p2p/16Uiu2HAkyeNdfKFTXUZ1ZvTgRmaPDiWzCYeDThUPBrDCPBvXMgHG"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-12-25_16-55-58__e36eee50-970e-4329-8735-37b8508be804__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.51.138
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['41978', '41979', '41980', '41981', '41982']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 41978:41978 -p 41979:41979 -p 41980:41980 -p 41981:41981 -p 41982:41982 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=41980 --rest-port=41978 --tcp-port=41979 --discv5-udp-port=41981 --rest-address=0.0.0.0 --nat=extip:172.18.51.138 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=22b0fa3ecbf2e0d7cecb1da3807fbb00e5a0a82bc38da433acb02bcb80c015c2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=41982 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QNsOYIDbelc_fZ0R1x1Tajd4w5PuoavfBYUNH8ZvxOPSB-LIIlPEJhOZspyDQjs2-aZ6v81wofY1V3QSCbDa6hICgmlkgnY0gmlwhKwSRweKbXVsdGlhZGRyc5YACASsEkcHBpk8AAoErBJHBwaZPd0DgnJzhQADAQAAiXNlY3AyNTZrMaECPq-vDMs9qkf9AZSWKfFDOGil3zrTxHPVMbmPNW_I7cuDdGNwgpk8g3VkcIKZPoV3YWt1Mgk --lightpushnode=/ip4/172.18.71.7/tcp/39228/p2p/16Uiu2HAkyeNdfKFTXUZ1ZvTgRmaPDiWzCYeDThUPBrDCPBvXMgHG --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.51.138 waku e3e66e0443a25d57897e978981a308eac74ef8e2f88a6325f0e6435fc99f1726
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID e3e66e0443a2. Setting up logs at ./log/docker/lightpush_node1_2024-12-25_16-55-58__e36eee50-970e-4329-8735-37b8508be804__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 41978
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41978/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41978/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.51.138/tcp/41979/p2p/16Uiu2HAmRaosD45jnLf8Xxa4TSFNb6osSchBH8g778LH2u9UPnAQ","/ip4/172.18.51.138/tcp/41980/ws/p2p/16Uiu2HAmRaosD45jnLf8Xxa4TSFNb6osSchBH8g778LH2u9UPnAQ"],"enrUri":"enr:-L24QGRy-jtAf-Y8XnxBQHzF93v9ItQOEmwUVLoAJo5Skf5xB44ucL3n_HhrzZZ9fZQ829esgwVNIguXqUmpgw-8cekCgmlkgnY0gmlwhKwSM4qKbXVsdGlhZGRyc5YACASsEjOKBqP7AAoErBIzigaj_N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDwBXAmKkq6YwMqDAU5ksNKf6_f-EqjNT2UDMklb4jOBWDdGNwgqP7g3VkcIKj_YV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41978/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.71.7/tcp/39228/p2p/16Uiu2HAkyeNdfKFTXUZ1ZvTgRmaPDiWzCYeDThUPBrDCPBvXMgHG"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41978/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.206.87/tcp/25894/p2p/16Uiu2HAm27TS6o55dKRDutgmpXDJpDJ8ca8Gw2VSC8gU6pCmtNTz"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39227/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25893/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A dictionary', 'value': {'key': 'YWFh'}}
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41978/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": {"key": "YWFh"}, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1735145762849111040}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:41978/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'An integer', 'value': 1234567890}
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41978/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": 1234567890, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1735145762866287616}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:41978/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A list', 'value': ['YWFh']}
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41978/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": ["YWFh"], "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1735145762882857728}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:41978/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A bool', 'value': True}
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41978/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": true, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1735145762891769600}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:41978/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id fec2b55881dd
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 172b4479e920
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container fec2b55881dd. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id e3e66e0443a2
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 172b4479e920. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.