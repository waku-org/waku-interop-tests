[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_cant_publish_on_not_subscribed_shard with id: 2024-12-25_16-56-15__fbac8e5a-ea71-41e2-a1a4-bf98b731958b
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-25_16-56-15__fbac8e5a-ea71-41e2-a1a4-bf98b731958b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.210.245
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['39007', '39008', '39009', '39010', '39011']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 39007:39007 -p 39008:39008 -p 39009:39009 -p 39010:39010 -p 39011:39011 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39009 --rest-port=39007 --tcp-port=39008 --discv5-udp-port=39010 --rest-address=0.0.0.0 --nat=extip:172.18.210.245 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=fb1ee337ba4e4cbe2f45b9ca12ba3da3ec6cbba5d6ce1cadbafe4f48f428fec3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39011 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/2/0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.210.245 waku c72daf3c87b0a4914e626af47911ebf84f0a131ff628533daabb2c76c8e2bb8b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID c72daf3c87b0. Setting up logs at ./log/docker/node1_2024-12-25_16-56-15__fbac8e5a-ea71-41e2-a1a4-bf98b731958b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 39007
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 1c462ab24905. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39007/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39007/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.210.245/tcp/39008/p2p/16Uiu2HAmQdpuDmb9DxuNtvEczB7LwewhrVScARBVJrr5so5p5WJ5","/ip4/172.18.210.245/tcp/39009/ws/p2p/16Uiu2HAmQdpuDmb9DxuNtvEczB7LwewhrVScARBVJrr5so5p5WJ5"],"enrUri":"enr:-L24QEGm10m7P6nrG1kz0cneHlgdkCv8MgxP3G6kkRwc1dBpeheZDVlN6rDd_m3JLkoyYMuVLgpyfnCXbpH90Tg-U04CgmlkgnY0gmlwhKwS0vWKbXVsdGlhZGRyc5YACASsEtL1BphgAAoErBLS9QaYYd0DgnJzhQACAQAAiXNlY3AyNTZrMaEDsf_6TsFvsKM_x1uqZhdZOuZIry9cYfj6TKH-YqKLnIKDdGNwgphgg3VkcIKYYoV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-25_16-56-15__fbac8e5a-ea71-41e2-a1a4-bf98b731958b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.215.98
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['61152', '61153', '61154', '61155', '61156']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 61152:61152 -p 61153:61153 -p 61154:61154 -p 61155:61155 -p 61156:61156 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61154 --rest-port=61152 --tcp-port=61153 --discv5-udp-port=61155 --rest-address=0.0.0.0 --nat=extip:172.18.215.98 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=ec68fab5dd82fc7ffd49fc9f5a84a1115ce4b75019f51beaced2bc73ddcf7efe --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61156 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QEGm10m7P6nrG1kz0cneHlgdkCv8MgxP3G6kkRwc1dBpeheZDVlN6rDd_m3JLkoyYMuVLgpyfnCXbpH90Tg-U04CgmlkgnY0gmlwhKwS0vWKbXVsdGlhZGRyc5YACASsEtL1BphgAAoErBLS9QaYYd0DgnJzhQACAQAAiXNlY3AyNTZrMaEDsf_6TsFvsKM_x1uqZhdZOuZIry9cYfj6TKH-YqKLnIKDdGNwgphgg3VkcIKYYoV3YWt1MgU --pubsub-topic=/waku/2/rs/2/0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.215.98 waku db016d8406df679f56c693afc003f172fbe5a7d7c51c4933dcb73b7939a85d44
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID db016d8406df. Setting up logs at ./log/docker/node2_2024-12-25_16-56-15__fbac8e5a-ea71-41e2-a1a4-bf98b731958b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 61152
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61152/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61152/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.215.98/tcp/61153/p2p/16Uiu2HAm3nxqgsbkEZAQbGXXcKP3F5KR61EYXoXCoeMJqqMTepcx","/ip4/172.18.215.98/tcp/61154/ws/p2p/16Uiu2HAm3nxqgsbkEZAQbGXXcKP3F5KR61EYXoXCoeMJqqMTepcx"],"enrUri":"enr:-L24QPUXYlqpPhbLFEDU2p_Z8dg6rKrJEpd9_4loq5K3zu7fezKY1hMU_-1LEJY9F6XBJgFM2TkeKtM_wwyhVFErg8QCgmlkgnY0gmlwhKwS12KKbXVsdGlhZGRyc5YACASsEtdiBu7hAAoErBLXYgbu4t0DgnJzhQACAQAAiXNlY3AyNTZrMaECfFHBoEWolzVHAQUA9JOubP7JhIzOh_uoFU-Satm1jqmDdGNwgu7hg3VkcILu44V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61152/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.210.245/tcp/39008/p2p/16Uiu2HAmQdpuDmb9DxuNtvEczB7LwewhrVScARBVJrr5so5p5WJ5"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39007/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61152/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39007/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F1" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:39007/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F1. Response content: b'Failed to publish: Node not subscribed to topic: /waku/2/rs/2/1'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id c72daf3c87b0
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id db016d8406df
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container c72daf3c87b0. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.