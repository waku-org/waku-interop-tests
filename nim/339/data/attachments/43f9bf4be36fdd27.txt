[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_version with id: 2024-08-30_04-21-11__01113d6a-4dbe-47ef-a117-92e173ecd788
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-30_04-21-11__01113d6a-4dbe-47ef-a117-92e173ecd788__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.230.131
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['4804', '4805', '4806', '4807', '4808']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 4804:4804 -p 4805:4805 -p 4806:4806 -p 4807:4807 -p 4808:4808 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4806 --rest-port=4804 --tcp-port=4805 --discv5-udp-port=4807 --rest-address=0.0.0.0 --nat=extip:172.18.230.131 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b6ceeb6f5fcb37dbb6478589cc3f4bc66dbc0e91fac4ede2166d8762aaa45aeb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4808 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.230.131 waku 5eb928aa51e9efeae5b3b8acb6a147d557cd5243da50096057aa20c1893fec14
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 5eb928aa51e9. Setting up logs at ./log/docker/receiving_node1_2024-08-30_04-21-11__01113d6a-4dbe-47ef-a117-92e173ecd788__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 4804
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4804/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4804/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.230.131/tcp/4805/p2p/16Uiu2HAm9GLWaS3kDFhAdjG2Sh481y8SacmHZgFKDxDpzD4TR4ve","/ip4/172.18.230.131/tcp/4806/ws/p2p/16Uiu2HAm9GLWaS3kDFhAdjG2Sh481y8SacmHZgFKDxDpzD4TR4ve"],"enrUri":"enr:-LO4QK8LZ0V3QhRPg1xmCLLcz5qH2HvVLXePECUPwcaUxvVgELN5nghlKjFIRqTSw_d00yvsJMZ2IeVO_mIYZ71Q49kBgmlkgnY0gmlwhKwS5oOKbXVsdGlhZGRyc4wACgSsEuaDBhLG3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLNn2Awgpta5EAWs_jWz6W1riw__ge5pWRVETgyE7OgU4N0Y3CCEsWDdWRwghLHhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-30_04-21-11__01113d6a-4dbe-47ef-a117-92e173ecd788__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.252.33
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['51138', '51139', '51140', '51141', '51142']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 51138:51138 -p 51139:51139 -p 51140:51140 -p 51141:51141 -p 51142:51142 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=51140 --rest-port=51138 --tcp-port=51139 --discv5-udp-port=51141 --rest-address=0.0.0.0 --nat=extip:172.18.252.33 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5af0ccc15dcb1cc0f1b9e5b0e63d59ecea89b0a75f98b8ea5d06c79ed3c2a4b7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=51142 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.252.33 waku dcb294f5d190a444724c945583ff2e69fd5e9b78afca24e71ef331e7f7388f77
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID dcb294f5d190. Setting up logs at ./log/docker/receiving_node2_2024-08-30_04-21-11__01113d6a-4dbe-47ef-a117-92e173ecd788__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 51138
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51138/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51138/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.252.33/tcp/51139/p2p/16Uiu2HAmEWvKsMnzRrB5Vk2RTX2gy7y1QaAKXDGaLVvFEyDkcvP8","/ip4/172.18.252.33/tcp/51140/ws/p2p/16Uiu2HAmEWvKsMnzRrB5Vk2RTX2gy7y1QaAKXDGaLVvFEyDkcvP8"],"enrUri":"enr:-LO4QBexv56O7mOHEdh57x7M5dxVNQ_b2RZlQpovjzG2hTpgPDl0uQzCfHFebd0P4NFtLcFSSHiUvlWHaSyQ4p2OJLUBgmlkgnY0gmlwhKwS_CGKbXVsdGlhZGRyc4wACgSsEvwhBsfE3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMbpi1HKoJfgTSeDJeqSbPgpJGEy9MTu1kBBQOjKJ70n4N0Y3CCx8ODdWRwgsfFhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51138/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.230.131/tcp/4805/p2p/16Uiu2HAm9GLWaS3kDFhAdjG2Sh481y8SacmHZgFKDxDpzD4TR4ve"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-30_04-21-11__01113d6a-4dbe-47ef-a117-92e173ecd788__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.97.210
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['15309', '15310', '15311', '15312', '15313']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 15309:15309 -p 15310:15310 -p 15311:15311 -p 15312:15312 -p 15313:15313 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15311 --rest-port=15309 --tcp-port=15310 --discv5-udp-port=15312 --rest-address=0.0.0.0 --nat=extip:172.18.97.210 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=574dbd33e1798863ec120df828edece05cf9ffd32e01e0f6d21eaa1c4cfdf498 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15313 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QK8LZ0V3QhRPg1xmCLLcz5qH2HvVLXePECUPwcaUxvVgELN5nghlKjFIRqTSw_d00yvsJMZ2IeVO_mIYZ71Q49kBgmlkgnY0gmlwhKwS5oOKbXVsdGlhZGRyc4wACgSsEuaDBhLG3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLNn2Awgpta5EAWs_jWz6W1riw__ge5pWRVETgyE7OgU4N0Y3CCEsWDdWRwghLHhXdha3UyCQ --lightpushnode=/ip4/172.18.230.131/tcp/4805/p2p/16Uiu2HAm9GLWaS3kDFhAdjG2Sh481y8SacmHZgFKDxDpzD4TR4ve --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.97.210 waku db248c85ba184fdd3470daa0fc1b90df2727fea66f4643070573b5a8f5e3521e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID db248c85ba18. Setting up logs at ./log/docker/lightpush_node1_2024-08-30_04-21-11__01113d6a-4dbe-47ef-a117-92e173ecd788__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 15309
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15309/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15309/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.97.210/tcp/15310/p2p/16Uiu2HAmCBxUYqDvDCWXUBDZf7rANszdewK4HW4fNaxCTpGzK9YG","/ip4/172.18.97.210/tcp/15311/ws/p2p/16Uiu2HAmCBxUYqDvDCWXUBDZf7rANszdewK4HW4fNaxCTpGzK9YG"],"enrUri":"enr:-LO4QAb6YC0gY_8bA3rflpKjco8O2athCbf0oJSTsiyv33HoArITCcxlsAedSIut4nPpz0Y1T5RJOMwqpLaneJ3ZWTEBgmlkgnY0gmlwhKwSYdKKbXVsdGlhZGRyc4wACgSsEmHSBjvP3QOCcnOFAAMBAACJc2VjcDI1NmsxoQL5EzLCNmRtvjYruXCVaWcVbV7k2hmw2wJyRSk37D4XtYN0Y3CCO86DdWRwgjvQhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15309/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.230.131/tcp/4805/p2p/16Uiu2HAm9GLWaS3kDFhAdjG2Sh481y8SacmHZgFKDxDpzD4TR4ve"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15309/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.252.33/tcp/51139/p2p/16Uiu2HAmEWvKsMnzRrB5Vk2RTX2gy7y1QaAKXDGaLVvFEyDkcvP8"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4804/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51138/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15309/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724991676902164224, "version": 2.1}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:15309/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 5eb928aa51e9
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id dcb294f5d190
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id db248c85ba18
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.