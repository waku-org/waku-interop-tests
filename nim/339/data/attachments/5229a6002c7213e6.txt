[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_get_message_with_meta with id: 2024-08-30_04-15-02__eb9b6d20-a688-4984-8e5d-6670fa2c198f
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-08-30_04-15-02__eb9b6d20-a688-4984-8e5d-6670fa2c198f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.147.12
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['28399', '28400', '28401', '28402', '28403']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 28399:28399 -p 28400:28400 -p 28401:28401 -p 28402:28402 -p 28403:28403 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28401 --rest-port=28399 --tcp-port=28400 --discv5-udp-port=28402 --rest-address=0.0.0.0 --nat=extip:172.18.147.12 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9726bdaeace694c0c2c347c9e7dcacb4aad9ef5e77fb7fd0dfa46dddaacbc465 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28403 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.147.12 waku d1d9279308bb25adc5e35486fc661f96eb572e68ac16b4d39a1617bd5d1289f9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID d1d9279308bb. Setting up logs at ./log/docker/node1_2024-08-30_04-15-02__eb9b6d20-a688-4984-8e5d-6670fa2c198f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 28399
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28399/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28399/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.147.12/tcp/28400/p2p/16Uiu2HAm9scpys3sVe2zWMt5Zbwc5KcD2LNKFCZJzQxMxzi2tWtY","/ip4/172.18.147.12/tcp/28401/ws/p2p/16Uiu2HAm9scpys3sVe2zWMt5Zbwc5KcD2LNKFCZJzQxMxzi2tWtY"],"enrUri":"enr:-LO4QJRh7xLQHy54qmE6Zjt7XlfrfKcOYgKWRKWtNdgQ7-6yNCrtykT8t-63JzMb4gXAG-tEe4iWpXwNTo4jRn9pqI0BgmlkgnY0gmlwhKwSkwyKbXVsdGlhZGRyc4wACgSsEpMMBm7x3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLWqSdzCq-uvf6PamaKpWdmgzPC-4_13PLotXNPIQsGKYN0Y3CCbvCDdWRwgm7yhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-08-30_04-15-02__eb9b6d20-a688-4984-8e5d-6670fa2c198f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.36.141
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['60978', '60979', '60980', '60981', '60982']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 60978:60978 -p 60979:60979 -p 60980:60980 -p 60981:60981 -p 60982:60982 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=60980 --rest-port=60978 --tcp-port=60979 --discv5-udp-port=60981 --rest-address=0.0.0.0 --nat=extip:172.18.36.141 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b6adad2a7b364dfff731ec3dd34dd79da9fa68f8f5f0fdcbcbbecb1d26daa28b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=60982 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QJRh7xLQHy54qmE6Zjt7XlfrfKcOYgKWRKWtNdgQ7-6yNCrtykT8t-63JzMb4gXAG-tEe4iWpXwNTo4jRn9pqI0BgmlkgnY0gmlwhKwSkwyKbXVsdGlhZGRyc4wACgSsEpMMBm7x3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLWqSdzCq-uvf6PamaKpWdmgzPC-4_13PLotXNPIQsGKYN0Y3CCbvCDdWRwgm7yhXdha3UyBQ --filternode=/ip4/172.18.147.12/tcp/28400/p2p/16Uiu2HAm9scpys3sVe2zWMt5Zbwc5KcD2LNKFCZJzQxMxzi2tWtY
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.36.141 waku 0f68ba97b4985eb03bf1bb8132a35b52ab3f2d9bdca01080bbf3d04eb7e3bb27
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 0f68ba97b498. Setting up logs at ./log/docker/node2_2024-08-30_04-15-02__eb9b6d20-a688-4984-8e5d-6670fa2c198f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 60978
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60978/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60978/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.36.141/tcp/60979/p2p/16Uiu2HAmEA6DoL4y8ZVVe2BtzrQ3whrjGiUXs8seMY7CZUCV24E9","/ip4/172.18.36.141/tcp/60980/ws/p2p/16Uiu2HAmEA6DoL4y8ZVVe2BtzrQ3whrjGiUXs8seMY7CZUCV24E9"],"enrUri":"enr:-LO4QGO_7sUErX4ACxpzSTV3izc9cE44AzR0Ev3au1azabyLTyml2jebhj1t2Vd7K7KyrM9rZXml7fue-iHz6z1gZQIBgmlkgnY0gmlwhKwSJI2KbXVsdGlhZGRyc4wACgSsEiSNBu403QOCcnOFAAMBAACJc2VjcDI1NmsxoQMWUCsooxRznutpeK1Uqd8DEKmqilb1I8JUC-F9difL7oN0Y3CC7jODdWRwgu41hXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60978/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.147.12/tcp/28400/p2p/16Uiu2HAm9scpys3sVe2zWMt5Zbwc5KcD2LNKFCZJzQxMxzi2tWtY"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28399/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60978/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "78fe94c4-1f27-40e4-88ce-d768630c70a5", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"78fe94c4-1f27-40e4-88ce-d768630c70a5","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28399/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "meta": "RmlsdGVyIHdvcmtzISE="}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60978/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1724991305982574080,"meta":"RmlsdGVyIHdvcmtzISE=","ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id d1d9279308bb
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 0f68ba97b498
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.