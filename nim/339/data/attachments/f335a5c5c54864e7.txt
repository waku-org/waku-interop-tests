[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_content_topics with id: 2024-08-30_04-20-23__c8225dc0-8e8e-4b0c-8b61-63f3b982e69d
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-30_04-20-23__c8225dc0-8e8e-4b0c-8b61-63f3b982e69d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.162.109
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['51275', '51276', '51277', '51278', '51279']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 51275:51275 -p 51276:51276 -p 51277:51277 -p 51278:51278 -p 51279:51279 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=51277 --rest-port=51275 --tcp-port=51276 --discv5-udp-port=51278 --rest-address=0.0.0.0 --nat=extip:172.18.162.109 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7fc77ce7d4e8dfae92cb4302ddad8fd69ef91fdbe7939ace4d5e324bc69ecbf5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=51279 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.162.109 waku 23e7333b1415ab80792ce1b7ce4f9c561fae2707dc840b4c853bffbe7385b450
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 23e7333b1415. Setting up logs at ./log/docker/receiving_node1_2024-08-30_04-20-23__c8225dc0-8e8e-4b0c-8b61-63f3b982e69d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 51275
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51275/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51275/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.162.109/tcp/51276/p2p/16Uiu2HAmFXhHB9oXVrv3SrsQ8i5Df4HBrfYAoKPUGGWs7yd78vCg","/ip4/172.18.162.109/tcp/51277/ws/p2p/16Uiu2HAmFXhHB9oXVrv3SrsQ8i5Df4HBrfYAoKPUGGWs7yd78vCg"],"enrUri":"enr:-LO4QLdQgQ_Ors6t_i-iP4MAF-94pRnI7ILtMGPmnDn3BfU-Y7E40aNyOe4rHIZgaVHpW9T7eeQgL4s6QthmTaAei38BgmlkgnY0gmlwhKwSom2KbXVsdGlhZGRyc4wACgSsEqJtBshN3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMqtLFlSGthNvYEFRLfTsHTRvVW6fVrI0SxTR1b7EewEYN0Y3CCyEyDdWRwgshOhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-30_04-20-23__c8225dc0-8e8e-4b0c-8b61-63f3b982e69d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.247.28
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['44883', '44884', '44885', '44886', '44887']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 44883:44883 -p 44884:44884 -p 44885:44885 -p 44886:44886 -p 44887:44887 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44885 --rest-port=44883 --tcp-port=44884 --discv5-udp-port=44886 --rest-address=0.0.0.0 --nat=extip:172.18.247.28 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8be181fb4496bad2044cac4deabbb1c4d17f3db6f8adbbb3fb3b0c88f321eac8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44887 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.247.28 waku 3b0dcd154c6832f401a48080c00ac121f765baee1bbf3db7dbac0143f21d695e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 3b0dcd154c68. Setting up logs at ./log/docker/receiving_node2_2024-08-30_04-20-23__c8225dc0-8e8e-4b0c-8b61-63f3b982e69d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 44883
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44883/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44883/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.247.28/tcp/44884/p2p/16Uiu2HAmLXWecfu5iTT6W2TBTk9qjvVbH1ykpJ9SbEGuuEts1puq","/ip4/172.18.247.28/tcp/44885/ws/p2p/16Uiu2HAmLXWecfu5iTT6W2TBTk9qjvVbH1ykpJ9SbEGuuEts1puq"],"enrUri":"enr:-LO4QPRV__tWYotJGcfS_IZxA0vJ6H--CQl90h0SxIshJyN4HyTEHSJtivzYG2CJg_MkxYDA2Jgrm46twMuQTidZbdUBgmlkgnY0gmlwhKwS9xyKbXVsdGlhZGRyc4wACgSsEvccBq9V3QOCcnOFAAMBAACJc2VjcDI1NmsxoQN08xuZsLcPGk2wGqATeCbj7vXx3rBI1afxJZ6t3M1S1IN0Y3CCr1SDdWRwgq9WhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44883/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.162.109/tcp/51276/p2p/16Uiu2HAmFXhHB9oXVrv3SrsQ8i5Df4HBrfYAoKPUGGWs7yd78vCg"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-30_04-20-23__c8225dc0-8e8e-4b0c-8b61-63f3b982e69d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.146.129
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['39130', '39131', '39132', '39133', '39134']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 39130:39130 -p 39131:39131 -p 39132:39132 -p 39133:39133 -p 39134:39134 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39132 --rest-port=39130 --tcp-port=39131 --discv5-udp-port=39133 --rest-address=0.0.0.0 --nat=extip:172.18.146.129 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1b894dbf5c8eddf0bb85c246e7f3fffbaab4dcd2bed7fdcf90e987a9c810fc94 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39134 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QLdQgQ_Ors6t_i-iP4MAF-94pRnI7ILtMGPmnDn3BfU-Y7E40aNyOe4rHIZgaVHpW9T7eeQgL4s6QthmTaAei38BgmlkgnY0gmlwhKwSom2KbXVsdGlhZGRyc4wACgSsEqJtBshN3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMqtLFlSGthNvYEFRLfTsHTRvVW6fVrI0SxTR1b7EewEYN0Y3CCyEyDdWRwgshOhXdha3UyCQ --lightpushnode=/ip4/172.18.162.109/tcp/51276/p2p/16Uiu2HAmFXhHB9oXVrv3SrsQ8i5Df4HBrfYAoKPUGGWs7yd78vCg --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.146.129 waku b0962ed427ccc01e6b2276d4782c6b6ba2827c85b513dca7040b94f6d78b356a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID b0962ed427cc. Setting up logs at ./log/docker/lightpush_node1_2024-08-30_04-20-23__c8225dc0-8e8e-4b0c-8b61-63f3b982e69d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 39130
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39130/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39130/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.146.129/tcp/39131/p2p/16Uiu2HAkyguuqLpYPd3Mk7uRR6aAWeMDqLJ8nMkTEXW2eviNLn5z","/ip4/172.18.146.129/tcp/39132/ws/p2p/16Uiu2HAkyguuqLpYPd3Mk7uRR6aAWeMDqLJ8nMkTEXW2eviNLn5z"],"enrUri":"enr:-LO4QGej6T2pdF-hmr553HxE-a5wxcUQMQlewu-pAvqNKHIbAck1CLMX5mZfCshbp_X-llbh7bXfpC_d8jw55ntJFIEBgmlkgnY0gmlwhKwSkoGKbXVsdGlhZGRyc4wACgSsEpKBBpjc3QOCcnOFAAMBAACJc2VjcDI1NmsxoQI_VjZm4mb008oJykchqDFOnvHhLvQb0M01wLo_sSXtHYN0Y3CCmNuDdWRwgpjdhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39130/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.162.109/tcp/51276/p2p/16Uiu2HAmFXhHB9oXVrv3SrsQ8i5Df4HBrfYAoKPUGGWs7yd78vCg"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39130/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.247.28/tcp/44884/p2p/16Uiu2HAmLXWecfu5iTT6W2TBTk9qjvVbH1ykpJ9SbEGuuEts1puq"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51275/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44883/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic Empty string
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39130/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "", "timestamp": 1724991628945040640}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:39130/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A dictionary
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39130/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": {"key": "YWFh"}, "timestamp": 1724991628949148672}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:39130/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic An integer
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39130/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": 1234567890, "timestamp": 1724991628952291840}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:39130/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A list
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39130/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": ["YWFh"], "timestamp": 1724991628955394560}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:39130/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A bool
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39130/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": true, "timestamp": 1724991628958379264}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:39130/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 23e7333b1415
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 3b0dcd154c68
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id b0962ed427cc
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.