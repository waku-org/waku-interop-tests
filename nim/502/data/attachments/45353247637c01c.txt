[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_msg_stored_when_ephemeral_false with id: 2024-12-05_04-07-08__d5718e79-5da7-49b1-b0a4-77449ea468c1
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-05_04-07-08__d5718e79-5da7-49b1-b0a4-77449ea468c1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-05_04-07-08__d5718e79-5da7-49b1-b0a4-77449ea468c1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-12-05_04-07-08__d5718e79-5da7-49b1-b0a4-77449ea468c1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:413 Start 3 nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.107.203
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['11884', '11885', '11886', '11887', '11888']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 11884:11884 -p 11885:11885 -p 11886:11886 -p 11887:11887 -p 11888:11888 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=11886 --rest-port=11884 --tcp-port=11885 --discv5-udp-port=11887 --rest-address=0.0.0.0 --nat=extip:172.18.107.203 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b5aefbff710dfcbc4a00b29f383f6fc6ce3cbae4046ea03a45bf1ae6e606b86d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=11888 --metrics-logging=true --relay=true --store=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.107.203 waku fb91f3ba4c0fdad9aa2bba04938390383811cab6f0a774ba1ad616d2b4b74310
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID fb91f3ba4c0f. Setting up logs at ./log/docker/node1_2024-12-05_04-07-08__d5718e79-5da7-49b1-b0a4-77449ea468c1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 11884
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container ea7047e1849c. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11884/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11884/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.107.203/tcp/11885/p2p/16Uiu2HAmRCGLwkbQoWitL5DY7yrMdmo5jr2cgbxQZPPcV2jAgNu2","/ip4/172.18.107.203/tcp/11886/ws/p2p/16Uiu2HAmRCGLwkbQoWitL5DY7yrMdmo5jr2cgbxQZPPcV2jAgNu2"],"enrUri":"enr:-L24QLvjnnpiCusrZy-9nd0-dCnZ7-n_EGojoTIanSj_AvdVEwzOF9lcj45KhyLAJBVfeZIHPBFULNlXb5fNuy-Dq9oCgmlkgnY0gmlwhKwSa8uKbXVsdGlhZGRyc5YACASsEmvLBi5tAAoErBJrywYubt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDuk9VLazenvlpBUE6eIlaMOkUeF0IL2OkASuZqFHNUOWDdGNwgi5tg3VkcIIub4V3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.90.21
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['25506', '25507', '25508', '25509', '25510']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 25506:25506 -p 25507:25507 -p 25508:25508 -p 25509:25509 -p 25510:25510 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25508 --rest-port=25506 --tcp-port=25507 --discv5-udp-port=25509 --rest-address=0.0.0.0 --nat=extip:172.18.90.21 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=faa6e4f5020d4da7b3c6edb4fe9a1ad6ec494f3e90d25ec7e3d2adcd5fdfbc0e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25510 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-L24QLvjnnpiCusrZy-9nd0-dCnZ7-n_EGojoTIanSj_AvdVEwzOF9lcj45KhyLAJBVfeZIHPBFULNlXb5fNuy-Dq9oCgmlkgnY0gmlwhKwSa8uKbXVsdGlhZGRyc5YACASsEmvLBi5tAAoErBJrywYubt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDuk9VLazenvlpBUE6eIlaMOkUeF0IL2OkASuZqFHNUOWDdGNwgi5tg3VkcIIub4V3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.90.21 waku 2d5621454eeadf4ae5ec4a436a0cd56d9ce88b416d5c92ed20a0b8af89bb0d4a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 2d5621454eea. Setting up logs at ./log/docker/node2_2024-12-05_04-07-08__d5718e79-5da7-49b1-b0a4-77449ea468c1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 25506
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25506/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25506/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.90.21/tcp/25507/p2p/16Uiu2HAmBPKhPv6apUb9HxPyzCGQJSzzbL4fyCcY2oCjZEFKmXc4","/ip4/172.18.90.21/tcp/25508/ws/p2p/16Uiu2HAmBPKhPv6apUb9HxPyzCGQJSzzbL4fyCcY2oCjZEFKmXc4"],"enrUri":"enr:-L24QCJ6WytZt95Odo2xtR5nq5IxpIsrzMGj7I40_8zVY4s7eARMzLQgpatgn7n6gTeUjtCAquMY25q6wYeQ87S4xAsCgmlkgnY0gmlwhKwSWhWKbXVsdGlhZGRyc5YACASsEloVBmOjAAoErBJaFQZjpN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC7SDlPP0MVMhp93_3ALHRiwGOAwe02iwQI9NKMdrpxCmDdGNwgmOjg3VkcIJjpYV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.193.176
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['3801', '3802', '3803', '3804', '3805']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 3801:3801 -p 3802:3802 -p 3803:3803 -p 3804:3804 -p 3805:3805 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=3803 --rest-port=3801 --tcp-port=3802 --discv5-udp-port=3804 --rest-address=0.0.0.0 --nat=extip:172.18.193.176 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a2c2c7fa9a8eb4b3b70e63ffff4eb5d0302d216acf02bcc796deadb202b2d4a1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=3805 --metrics-logging=true --relay=false --storenode=/ip4/172.18.90.21/tcp/25507/p2p/16Uiu2HAmBPKhPv6apUb9HxPyzCGQJSzzbL4fyCcY2oCjZEFKmXc4 --discv5-bootstrap-node=enr:-L24QCJ6WytZt95Odo2xtR5nq5IxpIsrzMGj7I40_8zVY4s7eARMzLQgpatgn7n6gTeUjtCAquMY25q6wYeQ87S4xAsCgmlkgnY0gmlwhKwSWhWKbXVsdGlhZGRyc5YACASsEloVBmOjAAoErBJaFQZjpN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC7SDlPP0MVMhp93_3ALHRiwGOAwe02iwQI9NKMdrpxCmDdGNwgmOjg3VkcIJjpYV3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.193.176 waku e5d9e440f013c0f7685113c1befdf3d2429ba603a77df4222681c70d825bd827
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID e5d9e440f013. Setting up logs at ./log/docker/node3_2024-12-05_04-07-08__d5718e79-5da7-49b1-b0a4-77449ea468c1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 3801
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3801/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3801/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.193.176/tcp/3802/p2p/16Uiu2HAkuWjkHNRNGJJpQmYhAd7iJUtd69Z4g819WYEZaLtiwXKy","/ip4/172.18.193.176/tcp/3803/ws/p2p/16Uiu2HAkuWjkHNRNGJJpQmYhAd7iJUtd69Z4g819WYEZaLtiwXKy"],"enrUri":"enr:-L24QMfv_tfhhcaO5p8p8GgbKKKX93zLz7TYuzx6-S60zTZYKumNBdKW7tSVonGYMmTIdNTicZimP3UtDVjXu83OIHoCgmlkgnY0gmlwhKwSwbCKbXVsdGlhZGRyc5YACASsEsGwBg7aAAoErBLBsAYO290DgnJzhQADAQAAiXNlY3AyNTZrMaECAUwp2XmCIEr-Y0gAazW7G8qOupa3o88ujH0rZMb8AKSDdGNwgg7ag3VkcIIO3IV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:418 Subscribe node1 ,2 to pubtopic /waku/2/rs/3/1
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11884/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25506/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11884/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.90.21/tcp/25507/p2p/16Uiu2HAmBPKhPv6apUb9HxPyzCGQJSzzbL4fyCcY2oCjZEFKmXc4","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25506/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.107.203/tcp/11885/p2p/16Uiu2HAmRCGLwkbQoWitL5DY7yrMdmo5jr2cgbxQZPPcV2jAgNu2","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:423 Node1 publish message with ephemeral = false
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11884/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "ephemeral": false}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 3 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:427 Check if message is stored 
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3801/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"d6aedba2ddd35672c7bd","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"yEIQRCKHjMn4pGdyWzIriEni2J6SFda73X45kysQOq4="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id fb91f3ba4c0f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 2d5621454eea
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container fb91f3ba4c0f. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id e5d9e440f013
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 2d5621454eea. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.