[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_extra_field with id: 2024-12-05_04-15-37__93606a17-d857-448a-a47a-7eb70b681274
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-12-05_04-15-37__93606a17-d857-448a-a47a-7eb70b681274__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.35.82
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['40996', '40997', '40998', '40999', '41000']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 40996:40996 -p 40997:40997 -p 40998:40998 -p 40999:40999 -p 41000:41000 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40998 --rest-port=40996 --tcp-port=40997 --discv5-udp-port=40999 --rest-address=0.0.0.0 --nat=extip:172.18.35.82 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b2585dcceba7eac8ecf457da1c9c6f1cbc7adaf43ce7ae94eeda517ea9ddbc44 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=41000 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.35.82 waku 9b4ba8593ac575a9c76e9260013bb3bf7d2d4354245b142834bc94c9fedba58b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 9b4ba8593ac5. Setting up logs at ./log/docker/receiving_node1_2024-12-05_04-15-37__93606a17-d857-448a-a47a-7eb70b681274__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 40996
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container da04d4166e8c. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40996/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40996/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.35.82/tcp/40997/p2p/16Uiu2HAmEdip68JExLvTSwcSQhciSqZcpor5asSeLpprKTyRT64X","/ip4/172.18.35.82/tcp/40998/ws/p2p/16Uiu2HAmEdip68JExLvTSwcSQhciSqZcpor5asSeLpprKTyRT64X"],"enrUri":"enr:-L24QLjSB97gjXNArF2IfUvp6QGakYTcl-sTvb83oW3W4esIb1KSh6I12DEMInswUjV56Bl_rzxytIimzk7BR0UcQ0YCgmlkgnY0gmlwhKwSI1KKbXVsdGlhZGRyc5YACASsEiNSBqAlAAoErBIjUgagJt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDHWQ5Z4JUW8K5Z_cFCJz03uvD8RKtYp2G399P6woGuZCDdGNwgqAlg3VkcIKgJ4V3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-12-05_04-15-37__93606a17-d857-448a-a47a-7eb70b681274__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.126.19
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['1935', '1936', '1937', '1938', '1939']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 1935:1935 -p 1936:1936 -p 1937:1937 -p 1938:1938 -p 1939:1939 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=1937 --rest-port=1935 --tcp-port=1936 --discv5-udp-port=1938 --rest-address=0.0.0.0 --nat=extip:172.18.126.19 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5c1c8ce8ef1adbbbeb4fda4f9cc3bc3eecdfcee726999263fdd7edbc045c5ffa --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=1939 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.126.19 waku ee8b3459529c9a8b1c6a58809500e18168d5e406fe7cbc1da2b2e87b9c237263
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ee8b3459529c. Setting up logs at ./log/docker/receiving_node2_2024-12-05_04-15-37__93606a17-d857-448a-a47a-7eb70b681274__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 1935
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1935/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1935/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.126.19/tcp/1936/p2p/16Uiu2HAm7do9qNeL5xudUEveYdCSD8Ho69PBRQ8mpKabv1aQPMvb","/ip4/172.18.126.19/tcp/1937/ws/p2p/16Uiu2HAm7do9qNeL5xudUEveYdCSD8Ho69PBRQ8mpKabv1aQPMvb"],"enrUri":"enr:-L24QFDPwKbcgAwN4sYSuskWHBUuRdApewxE1YcEOpHF4hAmYO62wAco_dG7Nh6h7aWPvYdfJVnEYjMbtQpy0XZhQjkCgmlkgnY0gmlwhKwSfhOKbXVsdGlhZGRyc5YACASsEn4TBgeQAAoErBJ-EwYHkd0DgnJzhQADAQAAiXNlY3AyNTZrMaECtWdS0TWJ2ENW8ss0lRlovZVBY4ED195xbt3kx1SuMPSDdGNwggeQg3VkcIIHkoV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1935/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.35.82/tcp/40997/p2p/16Uiu2HAmEdip68JExLvTSwcSQhciSqZcpor5asSeLpprKTyRT64X"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-12-05_04-15-37__93606a17-d857-448a-a47a-7eb70b681274__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.218.195
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['1831', '1832', '1833', '1834', '1835']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 1831:1831 -p 1832:1832 -p 1833:1833 -p 1834:1834 -p 1835:1835 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=1833 --rest-port=1831 --tcp-port=1832 --discv5-udp-port=1834 --rest-address=0.0.0.0 --nat=extip:172.18.218.195 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4c64faebc502ce7bee2faca1ac3c824e035fa49be8678d9901cd7cfb92ecc5d3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=1835 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QLjSB97gjXNArF2IfUvp6QGakYTcl-sTvb83oW3W4esIb1KSh6I12DEMInswUjV56Bl_rzxytIimzk7BR0UcQ0YCgmlkgnY0gmlwhKwSI1KKbXVsdGlhZGRyc5YACASsEiNSBqAlAAoErBIjUgagJt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDHWQ5Z4JUW8K5Z_cFCJz03uvD8RKtYp2G399P6woGuZCDdGNwgqAlg3VkcIKgJ4V3YWt1Mgk --lightpushnode=/ip4/172.18.35.82/tcp/40997/p2p/16Uiu2HAmEdip68JExLvTSwcSQhciSqZcpor5asSeLpprKTyRT64X --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.218.195 waku 0d01ff1c7e9635e9679a80703b4ca9236002c342b7d04f8a22c5717149345f79
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 0d01ff1c7e96. Setting up logs at ./log/docker/lightpush_node1_2024-12-05_04-15-37__93606a17-d857-448a-a47a-7eb70b681274__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 1831
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1831/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1831/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.218.195/tcp/1832/p2p/16Uiu2HAmUhJFUvNZHRySzBiuE4i6Z18hwD72oiX4Xf9JM7U75cBA","/ip4/172.18.218.195/tcp/1833/ws/p2p/16Uiu2HAmUhJFUvNZHRySzBiuE4i6Z18hwD72oiX4Xf9JM7U75cBA"],"enrUri":"enr:-L24QGrZUXU5bWfFtIbenUn889klA-pnofAK41LRPx5CJCKTNPnshNuP8l9HLCc0rKOcuI_5lyTEPVfduZTN7nANk2sCgmlkgnY0gmlwhKwS2sOKbXVsdGlhZGRyc5YACASsEtrDBgcoAAoErBLawwYHKd0DgnJzhQADAQAAiXNlY3AyNTZrMaED7lJkUo16Dl3Nm-Quv8XTpBdRzVXvew8Xkz8TfPYCXZmDdGNwggcog3VkcIIHKoV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1831/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.35.82/tcp/40997/p2p/16Uiu2HAmEdip68JExLvTSwcSQhciSqZcpor5asSeLpprKTyRT64X"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1831/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.126.19/tcp/1936/p2p/16Uiu2HAm7do9qNeL5xudUEveYdCSD8Ho69PBRQ8mpKabv1aQPMvb"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40996/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1935/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1831/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1733372142785931264, "extraField": "extraValue"}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:1831/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 9b4ba8593ac5
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id ee8b3459529c
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 9b4ba8593ac5. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 0d01ff1c7e96
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container ee8b3459529c. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.