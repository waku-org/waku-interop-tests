[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_single_content_topic[/app/29/sometopic/someencoding] with id: 2024-12-05_04-22-11__c735a648-0ffa-430f-a23f-fe8a7a0e537b
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-05_04-22-11__c735a648-0ffa-430f-a23f-fe8a7a0e537b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.145.16
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['30848', '30849', '30850', '30851', '30852']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 30848:30848 -p 30849:30849 -p 30850:30850 -p 30851:30851 -p 30852:30852 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=30850 --rest-port=30848 --tcp-port=30849 --discv5-udp-port=30851 --rest-address=0.0.0.0 --nat=extip:172.18.145.16 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=6dfdeed7ca6fb5f8be3caceda9a82cef9e1f64afbbc0d7a83ef8cd2006ad9adc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=30852 --metrics-logging=true --relay=true --filter=true --content-topic=/app/29/sometopic/someencoding
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.145.16 waku fac0fc896f20ca430f403ab0c12a03e018ff0d3eab860e969d8f5a913a948bd4
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 6203cac92262. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID fac0fc896f20. Setting up logs at ./log/docker/node1_2024-12-05_04-22-11__c735a648-0ffa-430f-a23f-fe8a7a0e537b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 30848
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30848/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30848/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.145.16/tcp/30849/p2p/16Uiu2HAmBZN8Bu8CEqK5iKbR9QZJh3AT8tm4jxmmzmJtaCr7Fz62","/ip4/172.18.145.16/tcp/30850/ws/p2p/16Uiu2HAmBZN8Bu8CEqK5iKbR9QZJh3AT8tm4jxmmzmJtaCr7Fz62"],"enrUri":"enr:-L24QIT0wplqmYgsqriFdVqWL-KjXa8yWQILfP31JIW5XoQdScwzl2BmOIGuvsvCrNvRCOw5uyJyS6_9lwnZhRVDxesCgmlkgnY0gmlwhKwSkRCKbXVsdGlhZGRyc5YACASsEpEQBniBAAoErBKREAZ4gt0DgnJzhQACAQAAiXNlY3AyNTZrMaEC77Nyw1SOdmY1u5G-SZTcSPab3wdjm0mmxBNfeW3X0peDdGNwgniBg3VkcIJ4g4V3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-05_04-22-11__c735a648-0ffa-430f-a23f-fe8a7a0e537b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.112.223
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['1774', '1775', '1776', '1777', '1778']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 1774:1774 -p 1775:1775 -p 1776:1776 -p 1777:1777 -p 1778:1778 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=1776 --rest-port=1774 --tcp-port=1775 --discv5-udp-port=1777 --rest-address=0.0.0.0 --nat=extip:172.18.112.223 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=30b8f3db0ffda13e1cfcd6ef251bbdbf3bef685b1b34aee4d3abf7d9581713ed --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=1778 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QIT0wplqmYgsqriFdVqWL-KjXa8yWQILfP31JIW5XoQdScwzl2BmOIGuvsvCrNvRCOw5uyJyS6_9lwnZhRVDxesCgmlkgnY0gmlwhKwSkRCKbXVsdGlhZGRyc5YACASsEpEQBniBAAoErBKREAZ4gt0DgnJzhQACAQAAiXNlY3AyNTZrMaEC77Nyw1SOdmY1u5G-SZTcSPab3wdjm0mmxBNfeW3X0peDdGNwgniBg3VkcIJ4g4V3YWt1MgU --content-topic=/app/29/sometopic/someencoding
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.112.223 waku c21d2a9ec7cda56cd127511d954fd5bae31ce82c56ab15237d1bd8422d2b939d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID c21d2a9ec7cd. Setting up logs at ./log/docker/node2_2024-12-05_04-22-11__c735a648-0ffa-430f-a23f-fe8a7a0e537b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 1774
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1774/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1774/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.112.223/tcp/1775/p2p/16Uiu2HAkw76yLRqbZbd94Zh8zJGvZzv1s5GiDgtiitFtTvVKD29x","/ip4/172.18.112.223/tcp/1776/ws/p2p/16Uiu2HAkw76yLRqbZbd94Zh8zJGvZzv1s5GiDgtiitFtTvVKD29x"],"enrUri":"enr:-L24QDi05uaRgjMNAhyM0WT3mFn7UJzwV14qjvj15BSXJuJCaj3vSWJ8MpgIct92FvYP1jMdf8IWs2QRjuOROcythgkCgmlkgnY0gmlwhKwScN-KbXVsdGlhZGRyc5YACASsEnDfBgbvAAoErBJw3wYG8N0DgnJzhQACAQAAiXNlY3AyNTZrMaECGPWY3p_oD8b5WUbOx4bF8zQrQIDg77Vc8H7vOkDmEOuDdGNwggbvg3VkcIIG8YV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1774/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.145.16/tcp/30849/p2p/16Uiu2HAmBZN8Bu8CEqK5iKbR9QZJh3AT8tm4jxmmzmJtaCr7Fz62"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30848/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/app/29/sometopic/someencoding"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1774/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/app/29/sometopic/someencoding"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30848/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30848/relay/v1/auto/messages/%2Fapp%2F29%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/app/29/sometopic/someencoding","version":0,"timestamp":1733372534525078272,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1774/relay/v1/auto/messages/%2Fapp%2F29%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/app/29/sometopic/someencoding","version":0,"timestamp":1733372534525078272,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id fac0fc896f20
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id c21d2a9ec7cd
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container fac0fc896f20. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.