[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_get_message_with_version with id: 2025-01-11_04-03-01__2d7adee3-b0e8-4821-9d46-37b544db7e07
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-11_04-03-01__2d7adee3-b0e8-4821-9d46-37b544db7e07__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.204.176
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['51148', '51149', '51150', '51151', '51152']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 51148:51148 -p 51149:51149 -p 51150:51150 -p 51151:51151 -p 51152:51152 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=51150 --rest-port=51148 --tcp-port=51149 --discv5-udp-port=51151 --rest-address=0.0.0.0 --nat=extip:172.18.204.176 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8fb9c0abf7276c13c4ce5cae8dff7d6adf22cac9cfade84ed5dd3da23da7af7d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=51152 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.204.176 waku b4b38f27c5037541ae0299103cc194447ea56334beeb3f56e669a3c0866a687b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID b4b38f27c503. Setting up logs at ./log/docker/node1_2025-01-11_04-03-01__2d7adee3-b0e8-4821-9d46-37b544db7e07__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 51148
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 593293ccd623. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51148/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51148/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.204.176/tcp/51149/p2p/16Uiu2HAm93rrddzhNpUTyfL31CwpysENcdymWxCpFvxKx5v6Gbs4","/ip4/172.18.204.176/tcp/51150/ws/p2p/16Uiu2HAm93rrddzhNpUTyfL31CwpysENcdymWxCpFvxKx5v6Gbs4"],"enrUri":"enr:-L24QOa1MibTg1Rt4XNnzXRnw2od_HEZ5DOe46gi7RIdC2NbZY9zSnIbK_HzXA_IuMcrWpQNdooSLNdCOm6nGGIr0A4CgmlkgnY0gmlwhKwSzLCKbXVsdGlhZGRyc5YACASsEsywBsfNAAoErBLMsAbHzt0DgnJzhQADAQAAiXNlY3AyNTZrMaECym0jJnhr7ITS_mKdh7hCRDYIPtqlOliRfmlPl1jl5GeDdGNwgsfNg3VkcILHz4V3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-11_04-03-01__2d7adee3-b0e8-4821-9d46-37b544db7e07__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.121.204
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['51242', '51243', '51244', '51245', '51246']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 51242:51242 -p 51243:51243 -p 51244:51244 -p 51245:51245 -p 51246:51246 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=51244 --rest-port=51242 --tcp-port=51243 --discv5-udp-port=51245 --rest-address=0.0.0.0 --nat=extip:172.18.121.204 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2ab406c8a57871259b0c98b64dc2b1c1a22b2ac95b685baa2c43580ed28bec32 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=51246 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QOa1MibTg1Rt4XNnzXRnw2od_HEZ5DOe46gi7RIdC2NbZY9zSnIbK_HzXA_IuMcrWpQNdooSLNdCOm6nGGIr0A4CgmlkgnY0gmlwhKwSzLCKbXVsdGlhZGRyc5YACASsEsywBsfNAAoErBLMsAbHzt0DgnJzhQADAQAAiXNlY3AyNTZrMaECym0jJnhr7ITS_mKdh7hCRDYIPtqlOliRfmlPl1jl5GeDdGNwgsfNg3VkcILHz4V3YWt1MgU --filternode=/ip4/172.18.204.176/tcp/51149/p2p/16Uiu2HAm93rrddzhNpUTyfL31CwpysENcdymWxCpFvxKx5v6Gbs4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.121.204 waku cdb8afd2d8584ec1ede22c2800cddfba47579fbac1ce9b8d812576929f0a2f9c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID cdb8afd2d858. Setting up logs at ./log/docker/node2_2025-01-11_04-03-01__2d7adee3-b0e8-4821-9d46-37b544db7e07__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 51242
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51242/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51242/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.121.204/tcp/51243/p2p/16Uiu2HAm8C8R7kGNtYN2NJ9drFLzU5RLqQXuqFpWyeFVgNbtcDp9","/ip4/172.18.121.204/tcp/51244/ws/p2p/16Uiu2HAm8C8R7kGNtYN2NJ9drFLzU5RLqQXuqFpWyeFVgNbtcDp9"],"enrUri":"enr:-L24QE28niwWxkA1YWODETfuMY1c7JH7bhpaygacMc-AuZJ1Rzm-j_-QqJxF_xhoZZVYto1508DHc_0DlNsS4cSPVDECgmlkgnY0gmlwhKwSecyKbXVsdGlhZGRyc5YACASsEnnMBsgrAAoErBJ5zAbILN0DgnJzhQADAQAAiXNlY3AyNTZrMaECva-w0RLx-pUVOWYEsHQ5H19ASCVxPplWECNSYsCb_gaDdGNwgsgrg3VkcILILYV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51242/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.204.176/tcp/51149/p2p/16Uiu2HAm93rrddzhNpUTyfL31CwpysENcdymWxCpFvxKx5v6Gbs4"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51148/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51242/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "9625eb38-549c-4e91-b239-3e05c27982fc", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"9625eb38-549c-4e91-b239-3e05c27982fc","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51148/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "version": 10}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51242/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":10,"timestamp":1736568184249987328,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id b4b38f27c503
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id cdb8afd2d858
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container b4b38f27c503. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.