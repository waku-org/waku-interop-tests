[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_subscribe_with_no_request_id with id: 2024-10-30_04-06-44__017f4a7e-3c88-43f5-91d2-ac87f54ed306
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-30_04-06-44__017f4a7e-3c88-43f5-91d2-ac87f54ed306__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.21.86
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['44660', '44661', '44662', '44663', '44664']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 44660:44660 -p 44661:44661 -p 44662:44662 -p 44663:44663 -p 44664:44664 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44662 --rest-port=44660 --tcp-port=44661 --discv5-udp-port=44663 --rest-address=0.0.0.0 --nat=extip:172.18.21.86 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=adab8ae38cf76eb3a733becde3b3bdcf2a0ac7dd1a4ada7ccf636085dfc0ecf6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44664 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.21.86 waku 9983267e7340a3b90347bf26e267e8ea3f357e4416785f6c37e6ca726c1c7c2c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 9983267e7340. Setting up logs at ./log/docker/node1_2024-10-30_04-06-44__017f4a7e-3c88-43f5-91d2-ac87f54ed306__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 44660
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container b07cede44ecc. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44660/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44660/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.21.86/tcp/44661/p2p/16Uiu2HAmCfTGdXtYVnmPm6CdhgYx27jS6tMcAfKjAntbDJuJgE5h","/ip4/172.18.21.86/tcp/44662/ws/p2p/16Uiu2HAmCfTGdXtYVnmPm6CdhgYx27jS6tMcAfKjAntbDJuJgE5h"],"enrUri":"enr:-L24QFTtXIF9npvMKr-H9SnnXfLfI2SjkaCT9J5vujb9GE7wVsjg225lJ_ciUoq11t6jagx1xeYoh7okOsTuBmS2j-8CgmlkgnY0gmlwhKwSFVaKbXVsdGlhZGRyc5YACASsEhVWBq51AAoErBIVVgaudt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDAB5wK7X5bFlCP5bbTkq2Wcm8wcnKv7v-vbTN4dwSfsyDdGNwgq51g3VkcIKud4V3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-10-30_04-06-44__017f4a7e-3c88-43f5-91d2-ac87f54ed306__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.30.165
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['58464', '58465', '58466', '58467', '58468']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 58464:58464 -p 58465:58465 -p 58466:58466 -p 58467:58467 -p 58468:58468 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=58466 --rest-port=58464 --tcp-port=58465 --discv5-udp-port=58467 --rest-address=0.0.0.0 --nat=extip:172.18.30.165 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f2dbe1d1ca6a11ac451ba067bb73efe2f57c8ac31e31bbdd2e985cbb890abfb0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=58468 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QFTtXIF9npvMKr-H9SnnXfLfI2SjkaCT9J5vujb9GE7wVsjg225lJ_ciUoq11t6jagx1xeYoh7okOsTuBmS2j-8CgmlkgnY0gmlwhKwSFVaKbXVsdGlhZGRyc5YACASsEhVWBq51AAoErBIVVgaudt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDAB5wK7X5bFlCP5bbTkq2Wcm8wcnKv7v-vbTN4dwSfsyDdGNwgq51g3VkcIKud4V3YWt1MgU --filternode=/ip4/172.18.21.86/tcp/44661/p2p/16Uiu2HAmCfTGdXtYVnmPm6CdhgYx27jS6tMcAfKjAntbDJuJgE5h
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.30.165 waku 3e2c0b24afa9f98a7910a7fe82dd8c6976f3f060e6d41406c310e09652bc3d31
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 3e2c0b24afa9. Setting up logs at ./log/docker/node2_2024-10-30_04-06-44__017f4a7e-3c88-43f5-91d2-ac87f54ed306__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 58464
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58464/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58464/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.30.165/tcp/58465/p2p/16Uiu2HAmDqKzrjMFKo4Nubm2cb8Xdv2jrSwMT6HPHBWPhGJW8XfG","/ip4/172.18.30.165/tcp/58466/ws/p2p/16Uiu2HAmDqKzrjMFKo4Nubm2cb8Xdv2jrSwMT6HPHBWPhGJW8XfG"],"enrUri":"enr:-L24QH7R-lDfJcfu3zV8i65xhc_Bw0PCT1du2RDuggavVsnZWfHvb3oZ-1_mkkRkvVfYYnBNmqZk7MXWc7Q64E27ReYCgmlkgnY0gmlwhKwSHqWKbXVsdGlhZGRyc5YACASsEh6lBuRhAAoErBIepQbkYt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDEYG19XP_aYWGMo1A7QMzgAKHPbACwEf12lnooB4zpiuDdGNwguRhg3VkcILkY4V3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:58464/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.21.86/tcp/44661/p2p/16Uiu2HAmCfTGdXtYVnmPm6CdhgYx27jS6tMcAfKjAntbDJuJgE5h"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44660/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:58464/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "05d651b8-73ae-4ae8-bc03-0d660c754f11", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"05d651b8-73ae-4ae8-bc03-0d660c754f11","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:58464/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:58464/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 9983267e7340
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 3e2c0b24afa9
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 9983267e7340. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.