[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_missing_pubsub_topics with id: 2024-10-30_04-10-11__0ecc168f-92e0-49ec-b605-139f14f06a0b
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-10-30_04-10-11__0ecc168f-92e0-49ec-b605-139f14f06a0b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.199.225
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['32160', '32161', '32162', '32163', '32164']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 32160:32160 -p 32161:32161 -p 32162:32162 -p 32163:32163 -p 32164:32164 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32162 --rest-port=32160 --tcp-port=32161 --discv5-udp-port=32163 --rest-address=0.0.0.0 --nat=extip:172.18.199.225 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=efd4eadf142fbaf94e8a75cb71eb1a5daf887feed9c83e5bdccecf3671ae8e9b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32164 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.199.225 waku fe2eab03189176b83f63289a97a99fb1850786fabcfcef3d697269ced389a381
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 4234ed1d1e29. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID fe2eab031891. Setting up logs at ./log/docker/receiving_node1_2024-10-30_04-10-11__0ecc168f-92e0-49ec-b605-139f14f06a0b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 32160
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32160/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32160/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.199.225/tcp/32161/p2p/16Uiu2HAm2GmYTXgni2xLPUcCcYQmNPetqiwYrPY14JYAFCRir1Dw","/ip4/172.18.199.225/tcp/32162/ws/p2p/16Uiu2HAm2GmYTXgni2xLPUcCcYQmNPetqiwYrPY14JYAFCRir1Dw"],"enrUri":"enr:-L24QOX7RhOuv9GKQzBUYoy_H3sMiTmthVBvxFv5MZUq9d3SYbXDkrFwnjG2rOuDbu45qfVVO2_6PQvYbpLajHGO4IECgmlkgnY0gmlwhKwSx-GKbXVsdGlhZGRyc5YACASsEsfhBn2hAAoErBLH4QZ9ot0DgnJzhQADAQAAiXNlY3AyNTZrMaECZbnfG6ODi5v5jWaR8j0ySxxWoqmgT3VxJJ82hX3mxeaDdGNwgn2hg3VkcIJ9o4V3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-10-30_04-10-11__0ecc168f-92e0-49ec-b605-139f14f06a0b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.91.24
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['5482', '5483', '5484', '5485', '5486']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 5482:5482 -p 5483:5483 -p 5484:5484 -p 5485:5485 -p 5486:5486 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=5484 --rest-port=5482 --tcp-port=5483 --discv5-udp-port=5485 --rest-address=0.0.0.0 --nat=extip:172.18.91.24 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=84fb62f102fc9eaffcfcd5f1095cf97b9955c36ae00404853dfbc4597368c64d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=5486 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.91.24 waku f9f7fdc5eb41f5bc88be430e968094bcc814fcbeedd21544852c6ecffa880604
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID f9f7fdc5eb41. Setting up logs at ./log/docker/receiving_node2_2024-10-30_04-10-11__0ecc168f-92e0-49ec-b605-139f14f06a0b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 5482
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5482/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5482/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.91.24/tcp/5483/p2p/16Uiu2HAm37iPStpQ1e8rjSf3w1GKVCXjAg3XRsaWzdbhwJ78zqTj","/ip4/172.18.91.24/tcp/5484/ws/p2p/16Uiu2HAm37iPStpQ1e8rjSf3w1GKVCXjAg3XRsaWzdbhwJ78zqTj"],"enrUri":"enr:-L24QBKOh9m3-cLsFBreRrRX21LmzPB1BQMK5YUdkRJQpFJBYJPGqZK9ojncvAIuZfTaQyrSADWVsGmPeavWkaEJaIACgmlkgnY0gmlwhKwSWxiKbXVsdGlhZGRyc5YACASsElsYBhVrAAoErBJbGAYVbN0DgnJzhQADAQAAiXNlY3AyNTZrMaECckPDbPtOgkIY9pQK0fxEOHUjllRim_t1EZZBGDV18iaDdGNwghVrg3VkcIIVbYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5482/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.199.225/tcp/32161/p2p/16Uiu2HAm2GmYTXgni2xLPUcCcYQmNPetqiwYrPY14JYAFCRir1Dw"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-10-30_04-10-11__0ecc168f-92e0-49ec-b605-139f14f06a0b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.73.71
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['56765', '56766', '56767', '56768', '56769']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 56765:56765 -p 56766:56766 -p 56767:56767 -p 56768:56768 -p 56769:56769 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56767 --rest-port=56765 --tcp-port=56766 --discv5-udp-port=56768 --rest-address=0.0.0.0 --nat=extip:172.18.73.71 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9a6da0f06163cd6cb218ef4a7cdad1ade9cfe318efb4e5beea33bfb8defd6a64 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56769 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QOX7RhOuv9GKQzBUYoy_H3sMiTmthVBvxFv5MZUq9d3SYbXDkrFwnjG2rOuDbu45qfVVO2_6PQvYbpLajHGO4IECgmlkgnY0gmlwhKwSx-GKbXVsdGlhZGRyc5YACASsEsfhBn2hAAoErBLH4QZ9ot0DgnJzhQADAQAAiXNlY3AyNTZrMaECZbnfG6ODi5v5jWaR8j0ySxxWoqmgT3VxJJ82hX3mxeaDdGNwgn2hg3VkcIJ9o4V3YWt1Mgk --lightpushnode=/ip4/172.18.199.225/tcp/32161/p2p/16Uiu2HAm2GmYTXgni2xLPUcCcYQmNPetqiwYrPY14JYAFCRir1Dw --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.73.71 waku 9b41406af2e824a9605f93a3af8da981c700f83abf2978fb1140ead639cf0854
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 9b41406af2e8. Setting up logs at ./log/docker/lightpush_node1_2024-10-30_04-10-11__0ecc168f-92e0-49ec-b605-139f14f06a0b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 56765
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56765/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56765/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.73.71/tcp/56766/p2p/16Uiu2HAmRsgt2tWs824bpdZ1FY15ek7Xc4Y1GhTUmyHtTAPn553D","/ip4/172.18.73.71/tcp/56767/ws/p2p/16Uiu2HAmRsgt2tWs824bpdZ1FY15ek7Xc4Y1GhTUmyHtTAPn553D"],"enrUri":"enr:-L24QOCpaHRKy-hDze5AoCZVEJz9VUU8vQBdh2l_bHsbP2zuWBG0lLwQHdQJdgeoDIkuRG11wiPPDYEr4AjYD3_J_KoCgmlkgnY0gmlwhKwSSUeKbXVsdGlhZGRyc5YACASsEklHBt2-AAoErBJJRwbdv90DgnJzhQADAQAAiXNlY3AyNTZrMaEDxGi6LC-TnAkDDQS9EmmHh01t5zNFh6AZlLtSD1oUsYCDdGNwgt2-g3VkcILdwIV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56765/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.199.225/tcp/32161/p2p/16Uiu2HAm2GmYTXgni2xLPUcCcYQmNPetqiwYrPY14JYAFCRir1Dw"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56765/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.91.24/tcp/5483/p2p/16Uiu2HAm37iPStpQ1e8rjSf3w1GKVCXjAg3XRsaWzdbhwJ78zqTj"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32160/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5482/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56765/lightpush/v1/message" -H "Content-Type: application/json" -d '{"message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1730261416889671168}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:56765/lightpush/v1/message. Response content: b'Failed to request a message push: not_published_to_any_peer'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id fe2eab031891
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id f9f7fdc5eb41
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container fe2eab031891. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 9b41406af2e8
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container f9f7fdc5eb41. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.