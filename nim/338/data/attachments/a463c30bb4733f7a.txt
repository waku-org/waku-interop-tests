[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_content_topic_and_pubsub_topic_not_in_docker_flags with id: 2024-08-29_12-45-07__c360d54d-f161-4063-be4e-8db55b25df3c
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-08-29_12-45-07__c360d54d-f161-4063-be4e-8db55b25df3c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.74.206
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['52309', '52310', '52311', '52312', '52313']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 52309:52309 -p 52310:52310 -p 52311:52311 -p 52312:52312 -p 52313:52313 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=52311 --rest-port=52309 --tcp-port=52310 --discv5-udp-port=52312 --rest-address=0.0.0.0 --nat=extip:172.18.74.206 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=dc866ae6ddcdac6d3fdfa66ca92760a5b1dfcacd2dc2f2cb6d1c484ca14d3846 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=52313 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.74.206 waku 5751133d9663405b0be69ee390ce1c30d4d31dcfb14c0b0412494a2c3c93d773
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 5751133d9663. Setting up logs at ./log/docker/node1_2024-08-29_12-45-07__c360d54d-f161-4063-be4e-8db55b25df3c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 52309
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52309/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52309/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.74.206/tcp/52310/p2p/16Uiu2HAmVWckDhZd5P97wPw9FRAQXCzQ52PDgPjs4g8cQVChY1BK","/ip4/172.18.74.206/tcp/52311/ws/p2p/16Uiu2HAmVWckDhZd5P97wPw9FRAQXCzQ52PDgPjs4g8cQVChY1BK"],"enrUri":"enr:-LO4QAnZyNS_MiK5VnfArV2zzJjW1t6q8pd81vroQhsv5PIPPHk_1r9BokZHPVo8M-TdRdm7xvCFwKaAEXApw8W3UVEBgmlkgnY0gmlwhKwSSs6KbXVsdGlhZGRyc4wACgSsEkrOBsxX3QOCcnOFAAIBAACJc2VjcDI1NmsxoQP6cZpR4LIzsgnl_pS7HjXYmy_43AYmC82WcIW7tzVTDoN0Y3CCzFaDdWRwgsxYhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-08-29_12-45-07__c360d54d-f161-4063-be4e-8db55b25df3c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.249.121
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['5530', '5531', '5532', '5533', '5534']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 5530:5530 -p 5531:5531 -p 5532:5532 -p 5533:5533 -p 5534:5534 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=5532 --rest-port=5530 --tcp-port=5531 --discv5-udp-port=5533 --rest-address=0.0.0.0 --nat=extip:172.18.249.121 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=3ca6fe21708b03a066808b1b954ac0b09c85a9a9cafea2e6eb5abafed2d1edf8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=5534 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QAnZyNS_MiK5VnfArV2zzJjW1t6q8pd81vroQhsv5PIPPHk_1r9BokZHPVo8M-TdRdm7xvCFwKaAEXApw8W3UVEBgmlkgnY0gmlwhKwSSs6KbXVsdGlhZGRyc4wACgSsEkrOBsxX3QOCcnOFAAIBAACJc2VjcDI1NmsxoQP6cZpR4LIzsgnl_pS7HjXYmy_43AYmC82WcIW7tzVTDoN0Y3CCzFaDdWRwgsxYhXdha3UyBQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.249.121 waku 377371b5a1114771fba41eb78fc5abb5b74a223ccc58bb5764f4fee41a716c00
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 377371b5a111. Setting up logs at ./log/docker/node2_2024-08-29_12-45-07__c360d54d-f161-4063-be4e-8db55b25df3c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 5530
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5530/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5530/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.249.121/tcp/5531/p2p/16Uiu2HAmBo1fNT3PW9oWzFk6A5QAnCebMKTRwYYGo2cyxim7CS8M","/ip4/172.18.249.121/tcp/5532/ws/p2p/16Uiu2HAmBo1fNT3PW9oWzFk6A5QAnCebMKTRwYYGo2cyxim7CS8M"],"enrUri":"enr:-LO4QHVTJvNYY-ioepl7OFjTgGYFy3Xu0l7Kavu5jeBqRArtWREgeAhyg20TOL50a19bk1mDFzn0D74t_aq4x8B-8_cBgmlkgnY0gmlwhKwS-XmKbXVsdGlhZGRyc4wACgSsEvl5BhWc3QOCcnOFAAIBAACJc2VjcDI1NmsxoQLzMnFW4-QVmKppT7woM0k-a_XA1V1n-Fsc3OnG-iXbhoN0Y3CCFZuDdWRwghWdhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5530/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.74.206/tcp/52310/p2p/16Uiu2HAmVWckDhZd5P97wPw9FRAQXCzQ52PDgPjs4g8cQVChY1BK"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52309/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5530/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52309/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52309/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1724935510931773184,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5530/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1724935510931773184,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 5751133d9663
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 377371b5a111
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.