[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_subscribe_with_no_content_topic with id: 2024-08-29_12-33-10__53e5d239-c6d4-4efe-89e7-ff37045f5f31
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-08-29_12-33-10__53e5d239-c6d4-4efe-89e7-ff37045f5f31__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.96.190
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['14273', '14274', '14275', '14276', '14277']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 14273:14273 -p 14274:14274 -p 14275:14275 -p 14276:14276 -p 14277:14277 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14275 --rest-port=14273 --tcp-port=14274 --discv5-udp-port=14276 --rest-address=0.0.0.0 --nat=extip:172.18.96.190 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4e72badf1e97df26ce79bb4afbdc7ea7d1eb2ac66f6fadae8decfef0ffc09f2f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14277 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.96.190 waku 04cb7b22e7c9e6eb42df66947bc6060a7c40b031434316dcab029e10b233ba97
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 04cb7b22e7c9. Setting up logs at ./log/docker/node1_2024-08-29_12-33-10__53e5d239-c6d4-4efe-89e7-ff37045f5f31__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 14273
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14273/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14273/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.96.190/tcp/14274/p2p/16Uiu2HAmRus8fHb59GNt5iwbdXR5vmkh3CZwuc4gPd9a2wraF2xo","/ip4/172.18.96.190/tcp/14275/ws/p2p/16Uiu2HAmRus8fHb59GNt5iwbdXR5vmkh3CZwuc4gPd9a2wraF2xo"],"enrUri":"enr:-LO4QCTxjHjbP2qyn1b70UKKIa7VHGjIkEUT8TQCx7Urt26DYeGWeQ64aRHVnasvLk0FouVkM0zMytmNufqd8XjBPw8BgmlkgnY0gmlwhKwSYL6KbXVsdGlhZGRyc4wACgSsEmC-BjfD3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPE93smUCeWyL6c3PtRCI7OzjHaZWG_F-ECwV-MhCw3qIN0Y3CCN8KDdWRwgjfEhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-08-29_12-33-10__53e5d239-c6d4-4efe-89e7-ff37045f5f31__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.156.250
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['48067', '48068', '48069', '48070', '48071']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 48067:48067 -p 48068:48068 -p 48069:48069 -p 48070:48070 -p 48071:48071 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=48069 --rest-port=48067 --tcp-port=48068 --discv5-udp-port=48070 --rest-address=0.0.0.0 --nat=extip:172.18.156.250 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=af8afcb5cde4bb67af2223cd1dd02c3a68bbe1b1ac4a8b0bb71c7cefcafaaa32 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=48071 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QCTxjHjbP2qyn1b70UKKIa7VHGjIkEUT8TQCx7Urt26DYeGWeQ64aRHVnasvLk0FouVkM0zMytmNufqd8XjBPw8BgmlkgnY0gmlwhKwSYL6KbXVsdGlhZGRyc4wACgSsEmC-BjfD3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPE93smUCeWyL6c3PtRCI7OzjHaZWG_F-ECwV-MhCw3qIN0Y3CCN8KDdWRwgjfEhXdha3UyBQ --filternode=/ip4/172.18.96.190/tcp/14274/p2p/16Uiu2HAmRus8fHb59GNt5iwbdXR5vmkh3CZwuc4gPd9a2wraF2xo
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.156.250 waku 96222845c8c862c923637f7a18d7160c4ae4efa9218f86acf2ff6c728b1352ef
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 96222845c8c8. Setting up logs at ./log/docker/node2_2024-08-29_12-33-10__53e5d239-c6d4-4efe-89e7-ff37045f5f31__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 48067
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48067/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48067/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.156.250/tcp/48068/p2p/16Uiu2HAmSafVaShNm2XZMe9kM62qi5kuFtZCvywEXQSGYAZZGMFN","/ip4/172.18.156.250/tcp/48069/ws/p2p/16Uiu2HAmSafVaShNm2XZMe9kM62qi5kuFtZCvywEXQSGYAZZGMFN"],"enrUri":"enr:-LO4QPHaQfG6tA4V8oPXN4utnc4G3WTKEKORsnwFivG5J3F1Snrl3YUYvJTKi5IXjNcuoumtzd1unV_gMgk3Uw1Y3DkBgmlkgnY0gmlwhKwSnPqKbXVsdGlhZGRyc4wACgSsEpz6BrvF3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPO5_jQVTnviDxNd2hZrwUladXbPKFpIWg_RgctNJzbKYN0Y3CCu8SDdWRwgrvGhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48067/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.96.190/tcp/14274/p2p/16Uiu2HAmRus8fHb59GNt5iwbdXR5vmkh3CZwuc4gPd9a2wraF2xo"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14273/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48067/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "66b5305f-0fd8-4fb4-9a17-28bc36ea3f0c", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"66b5305f-0fd8-4fb4-9a17-28bc36ea3f0c","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48067/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:48067/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 04cb7b22e7c9
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 96222845c8c8
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.