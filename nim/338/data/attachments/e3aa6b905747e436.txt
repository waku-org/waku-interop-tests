[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_subscribe_to_pubsub_topic_from_another_cluster_id with id: 2024-08-29_12-32-37__95acca88-9ce4-449b-b390-a7fb8033fb4e
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-08-29_12-32-37__95acca88-9ce4-449b-b390-a7fb8033fb4e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.131.15
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['47294', '47295', '47296', '47297', '47298']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 47294:47294 -p 47295:47295 -p 47296:47296 -p 47297:47297 -p 47298:47298 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=47296 --rest-port=47294 --tcp-port=47295 --discv5-udp-port=47297 --rest-address=0.0.0.0 --nat=extip:172.18.131.15 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5c5a26ee82d2ffedfb41123bb994cce548da439f51fabe3098e4aee2fc31ba4f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=47298 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.131.15 waku 5b9126f401b39f047e5214c617ac8c4687f0b944a7b435b3bda913aa5126b194
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 5b9126f401b3. Setting up logs at ./log/docker/node1_2024-08-29_12-32-37__95acca88-9ce4-449b-b390-a7fb8033fb4e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 47294
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47294/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47294/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.131.15/tcp/47295/p2p/16Uiu2HAkvzzFzXFaoxGf75MF78xEKNKemzcuQhCbENqrpDTbXNez","/ip4/172.18.131.15/tcp/47296/ws/p2p/16Uiu2HAkvzzFzXFaoxGf75MF78xEKNKemzcuQhCbENqrpDTbXNez"],"enrUri":"enr:-LO4QEs6dLzbMoXByCWEZ-uBwrwHrI9wtpTL_euCx7lD3qIxBSb4MB6LC5djIRiEuSllSmEGS1UOyQU_mBeanCoqVIsBgmlkgnY0gmlwhKwSgw-KbXVsdGlhZGRyc4wACgSsEoMPBrjA3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIXZIWnpv1ELpqQYlxXEfApp461iaUV1F5kJ28rnA6hH4N0Y3CCuL-DdWRwgrjBhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-08-29_12-32-37__95acca88-9ce4-449b-b390-a7fb8033fb4e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.65.76
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['9928', '9929', '9930', '9931', '9932']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 9928:9928 -p 9929:9929 -p 9930:9930 -p 9931:9931 -p 9932:9932 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=9930 --rest-port=9928 --tcp-port=9929 --discv5-udp-port=9931 --rest-address=0.0.0.0 --nat=extip:172.18.65.76 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2e3aa6eda3eb6dd8c6c0f2eafb2ac5f0abbc2c0fd0efcf598e5bdce65ecee9fa --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=9932 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QEs6dLzbMoXByCWEZ-uBwrwHrI9wtpTL_euCx7lD3qIxBSb4MB6LC5djIRiEuSllSmEGS1UOyQU_mBeanCoqVIsBgmlkgnY0gmlwhKwSgw-KbXVsdGlhZGRyc4wACgSsEoMPBrjA3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIXZIWnpv1ELpqQYlxXEfApp461iaUV1F5kJ28rnA6hH4N0Y3CCuL-DdWRwgrjBhXdha3UyBQ --filternode=/ip4/172.18.131.15/tcp/47295/p2p/16Uiu2HAkvzzFzXFaoxGf75MF78xEKNKemzcuQhCbENqrpDTbXNez
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.65.76 waku 58b397dfb93f1daedd449982722208d98685fc1e19d0fdd5d451f1e8bfabb7bb
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 58b397dfb93f. Setting up logs at ./log/docker/node2_2024-08-29_12-32-37__95acca88-9ce4-449b-b390-a7fb8033fb4e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 9928
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9928/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9928/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.65.76/tcp/9929/p2p/16Uiu2HAmHSxWoyaQXCW6e5gV71C4r1kd6Mw63nEz7dnu6Z1vZeAh","/ip4/172.18.65.76/tcp/9930/ws/p2p/16Uiu2HAmHSxWoyaQXCW6e5gV71C4r1kd6Mw63nEz7dnu6Z1vZeAh"],"enrUri":"enr:-LO4QLaXHAyF1m-CbclGDq_2dE_jpGsI3Uh889-V5FPAyuhjS6HaTIig7dInCNeuwM61AJINSVqIfO2e07WUsEZZc4sBgmlkgnY0gmlwhKwSQUyKbXVsdGlhZGRyc4wACgSsEkFMBibK3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNHNWOdnh03AzGCpDCy_OuzRy8b5CzPeNImxXFmlEg0NoN0Y3CCJsmDdWRwgibLhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9928/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.131.15/tcp/47295/p2p/16Uiu2HAkvzzFzXFaoxGf75MF78xEKNKemzcuQhCbENqrpDTbXNez"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47294/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/2"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9928/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "dbd575e3-9883-4f98-8041-8510c71c62fd", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/2/2"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"dbd575e3-9883-4f98-8041-8510c71c62fd","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47294/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9928/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1724934761397516544,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 5b9126f401b3
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 58b397dfb93f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.