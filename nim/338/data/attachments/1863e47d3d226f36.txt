[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_lightpushed_message with id: 2024-08-29_12-52-53__1ea72a0b-6a6f-4afe-bfed-007fe9f23b3f
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:28 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-08-29_12-52-53__1ea72a0b-6a6f-4afe-bfed-007fe9f23b3f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.89.25
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['49696', '49697', '49698', '49699', '49700']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 49696:49696 -p 49697:49697 -p 49698:49698 -p 49699:49699 -p 49700:49700 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=49698 --rest-port=49696 --tcp-port=49697 --discv5-udp-port=49699 --rest-address=0.0.0.0 --nat=extip:172.18.89.25 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=db5fd950c402edf669e5d5d70a7ecd8e420fcc5d283b089527adf6a0acab4268 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=49700 --metrics-logging=true --store=true --relay=true --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.89.25 waku faa78f3de9056f5b77bb844e9ae9839056e4ffde4845ac59446379df89340e7e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID faa78f3de905. Setting up logs at ./log/docker/publishing_node1_2024-08-29_12-52-53__1ea72a0b-6a6f-4afe-bfed-007fe9f23b3f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 49696
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49696/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49696/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.89.25/tcp/49697/p2p/16Uiu2HAm5XcpPQ63dVLMSXiqPqJ4snvZefAMF61AQqDdqfUeKuXD","/ip4/172.18.89.25/tcp/49698/ws/p2p/16Uiu2HAm5XcpPQ63dVLMSXiqPqJ4snvZefAMF61AQqDdqfUeKuXD"],"enrUri":"enr:-LO4QH3pnovBZcD_Uiw3Ai6Qf3jd3HQ9Ih1tMdHSCVQxcHBlNlRSCTDcivzKX93_R7n7dmaF_NiBm-olDl20i4nqOwMBgmlkgnY0gmlwhKwSWRmKbXVsdGlhZGRyc4wACgSsElkZBsIi3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKWGsdUKT8WSwO4MEfyH5ipTUOJIXPO5pEcr-xUq50dqIN0Y3CCwiGDdWRwgsIjhXdha3UyCw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node2_2024-08-29_12-52-53__1ea72a0b-6a6f-4afe-bfed-007fe9f23b3f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.0.246
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['23686', '23687', '23688', '23689', '23690']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 23686:23686 -p 23687:23687 -p 23688:23688 -p 23689:23689 -p 23690:23690 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23688 --rest-port=23686 --tcp-port=23687 --discv5-udp-port=23689 --rest-address=0.0.0.0 --nat=extip:172.18.0.246 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=411994de5aa90eeb300d3863c50e6ccfc064233aa4300045cbab7b65dfc2cdbe --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23690 --metrics-logging=true --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.0.246 waku 2e66eef2fe4b7b2bad724ac1d1cacc5b0ea835287724a2f51237c9b6a6ee87ef
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 2e66eef2fe4b. Setting up logs at ./log/docker/publishing_node2_2024-08-29_12-52-53__1ea72a0b-6a6f-4afe-bfed-007fe9f23b3f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 23686
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23686/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23686/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.0.246/tcp/23687/p2p/16Uiu2HAkuk1HUHwoHfcj2tn289M9PWCFDhJrQyx2Kh2iAohpYuph","/ip4/172.18.0.246/tcp/23688/ws/p2p/16Uiu2HAkuk1HUHwoHfcj2tn289M9PWCFDhJrQyx2Kh2iAohpYuph"],"enrUri":"enr:-LO4QPF9Ard44CMYJOe7mchlGt31mRseyoeZ1LaSmPx7Np0lPiUkvsACBUErd2k4_eWjcS-hj1wgOmu4Ltyf9StbtrcBgmlkgnY0gmlwhKwSAPaKbXVsdGlhZGRyc4wACgSsEgD2BlyI3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIEskhV1EauFBA-WgKV22t82md1H12H__jEFTFLoj2o5oN0Y3CCXIeDdWRwglyJhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23686/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.89.25/tcp/49697/p2p/16Uiu2HAm5XcpPQ63dVLMSXiqPqJ4snvZefAMF61AQqDdqfUeKuXD"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2024-08-29_12-52-53__1ea72a0b-6a6f-4afe-bfed-007fe9f23b3f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.9.179
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['33422', '33423', '33424', '33425', '33426']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 33422:33422 -p 33423:33423 -p 33424:33424 -p 33425:33425 -p 33426:33426 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=33424 --rest-port=33422 --tcp-port=33423 --discv5-udp-port=33425 --rest-address=0.0.0.0 --nat=extip:172.18.9.179 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dbacfe1e3ed0812e6a983addbe9aacbc0b8ef5affa1e3a0b967bdd003eb1dbfc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=33426 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QH3pnovBZcD_Uiw3Ai6Qf3jd3HQ9Ih1tMdHSCVQxcHBlNlRSCTDcivzKX93_R7n7dmaF_NiBm-olDl20i4nqOwMBgmlkgnY0gmlwhKwSWRmKbXVsdGlhZGRyc4wACgSsElkZBsIi3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKWGsdUKT8WSwO4MEfyH5ipTUOJIXPO5pEcr-xUq50dqIN0Y3CCwiGDdWRwgsIjhXdha3UyCw --storenode=/ip4/172.18.89.25/tcp/49697/p2p/16Uiu2HAm5XcpPQ63dVLMSXiqPqJ4snvZefAMF61AQqDdqfUeKuXD --store=false --relay=false --lightpush=true --lightpushnode=/ip4/172.18.89.25/tcp/49697/p2p/16Uiu2HAm5XcpPQ63dVLMSXiqPqJ4snvZefAMF61AQqDdqfUeKuXD
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.9.179 waku 3abf0881f84564d82c0b05b08831f56ac03bf8cfa61c952b11e5ccc84c9a80ac
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 3abf0881f845. Setting up logs at ./log/docker/store_node1_2024-08-29_12-52-53__1ea72a0b-6a6f-4afe-bfed-007fe9f23b3f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 33422
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33422/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33422/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.9.179/tcp/33423/p2p/16Uiu2HAmBYeme359HpUwhM6SwWVcRjp51m4eoXwruJu6GKnx5Q6w","/ip4/172.18.9.179/tcp/33424/ws/p2p/16Uiu2HAmBYeme359HpUwhM6SwWVcRjp51m4eoXwruJu6GKnx5Q6w"],"enrUri":"enr:-LO4QC6WVbBo-16EUUCiNW7L3PEqd5HFBKJoX3LRzWylSuurbHjeA8P5ndUnRNfBlKp-2ZeX3d9J_0X6KwXg-WsbQbYBgmlkgnY0gmlwhKwSCbOKbXVsdGlhZGRyc4wACgSsEgmzBoKQ3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLvhLBXqmAYr9dLavEOnCz93d7QhsV7bDy0UU_yXAaixIN0Y3CCgo-DdWRwgoKRhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33422/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.89.25/tcp/49697/p2p/16Uiu2HAm5XcpPQ63dVLMSXiqPqJ4snvZefAMF61AQqDdqfUeKuXD"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33422/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.0.246/tcp/23687/p2p/16Uiu2HAkuk1HUHwoHfcj2tn289M9PWCFDhJrQyx2Kh2iAohpYuph"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49696/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23686/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33422/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724935978648632064}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:217 Checking that peer wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49696/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"FcH73rjo4yf3RfAR8eU+Oa9iARVM82ZlrRE8PWPcCdI="}]}'
[35mDEBUG   [0m src.steps.store:store.py:217 Checking that peer wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33422/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"75a3481ced24535c2b05","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"FcH73rjo4yf3RfAR8eU+Oa9iARVM82ZlrRE8PWPcCdI="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id faa78f3de905
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 2e66eef2fe4b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 3abf0881f845
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.