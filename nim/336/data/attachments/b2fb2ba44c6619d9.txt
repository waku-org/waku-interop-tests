[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_content_topic_also_in_docker_flags[/aaaaa/3/bbbbb/proto] with id: 2024-08-28_04-30-09__8d84b57c-a87d-4d59-8edb-9bfa720f17e8
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-08-28_04-30-09__8d84b57c-a87d-4d59-8edb-9bfa720f17e8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.189.229
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['32950', '32951', '32952', '32953', '32954']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 32950:32950 -p 32951:32951 -p 32952:32952 -p 32953:32953 -p 32954:32954 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32952 --rest-port=32950 --tcp-port=32951 --discv5-udp-port=32953 --rest-address=0.0.0.0 --nat=extip:172.18.189.229 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=f6e45b088ba144ab8cbff48dc5867a104d972033b440bedaea5849d5a7968cf3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32954 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/2/0 --content-topic=/aaaaa/3/bbbbb/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.189.229 waku fd9faef2ff9065a3b3ed15b760c9dd3e3fcbc5f63c68ed8452102dd0012b0cc0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID fd9faef2ff90. Setting up logs at ./log/docker/node1_2024-08-28_04-30-09__8d84b57c-a87d-4d59-8edb-9bfa720f17e8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 32950
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32950/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32950/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.189.229/tcp/32951/p2p/16Uiu2HAkywaHp152NzPodWebcHVrBHDZSufARsAA4HoxLzBujFY1","/ip4/172.18.189.229/tcp/32952/ws/p2p/16Uiu2HAkywaHp152NzPodWebcHVrBHDZSufARsAA4HoxLzBujFY1"],"enrUri":"enr:-LO4QNKDTG9sMhATYljbVtycMPLwFVPJWbDPpLlKwPo9xApmdbBjR8e_YzfDZbUaN6Rjlk_pG4znZ5XFYnjGtJzvAtsBgmlkgnY0gmlwhKwSveWKbXVsdGlhZGRyc4wACgSsEr3lBoC43QOCcnOFAAIBAACJc2VjcDI1NmsxoQJDF70vp-kHmewQ6B9Oos_zXTpTEXqCOuhCSW4ekDofzoN0Y3CCgLeDdWRwgoC5hXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-08-28_04-30-09__8d84b57c-a87d-4d59-8edb-9bfa720f17e8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.213.211
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['14474', '14475', '14476', '14477', '14478']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 14474:14474 -p 14475:14475 -p 14476:14476 -p 14477:14477 -p 14478:14478 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14476 --rest-port=14474 --tcp-port=14475 --discv5-udp-port=14477 --rest-address=0.0.0.0 --nat=extip:172.18.213.211 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=fce2aadadda3a9b18b87b2a36ba52a0d9fa4d9ff84c85ebab4cff0e9cd60cfc0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14478 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QNKDTG9sMhATYljbVtycMPLwFVPJWbDPpLlKwPo9xApmdbBjR8e_YzfDZbUaN6Rjlk_pG4znZ5XFYnjGtJzvAtsBgmlkgnY0gmlwhKwSveWKbXVsdGlhZGRyc4wACgSsEr3lBoC43QOCcnOFAAIBAACJc2VjcDI1NmsxoQJDF70vp-kHmewQ6B9Oos_zXTpTEXqCOuhCSW4ekDofzoN0Y3CCgLeDdWRwgoC5hXdha3UyBQ --pubsub-topic=/waku/2/rs/2/0 --content-topic=/aaaaa/3/bbbbb/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.213.211 waku d396659b7c444af240c880b9d0bdeff7c45d8fd614e9916ac713f0220ac2dfec
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID d396659b7c44. Setting up logs at ./log/docker/node2_2024-08-28_04-30-09__8d84b57c-a87d-4d59-8edb-9bfa720f17e8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 14474
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14474/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14474/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.213.211/tcp/14475/p2p/16Uiu2HAkwatMQJ17H6L4aXwQfSoPDLxWnkwPfLwJZSdk2yavg3GZ","/ip4/172.18.213.211/tcp/14476/ws/p2p/16Uiu2HAkwatMQJ17H6L4aXwQfSoPDLxWnkwPfLwJZSdk2yavg3GZ"],"enrUri":"enr:-LO4QG5pEb2zICvmcMxK1mjpe8MgT3rnAI2YTAuQruvq7KNLPTj6Ap81LXPCRQsOvo9AG5Wej0ARdFytABWCKT3WlgkBgmlkgnY0gmlwhKwS1dOKbXVsdGlhZGRyc4wACgSsEtXTBjiM3QOCcnOFAAIBAACJc2VjcDI1NmsxoQIgE5dBWLy0no1wZKeNevPn4l2c1ycQ5j7HTHGvzkDHVoN0Y3CCOIuDdWRwgjiNhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14474/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.189.229/tcp/32951/p2p/16Uiu2HAkywaHp152NzPodWebcHVrBHDZSufARsAA4HoxLzBujFY1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32950/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14474/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32950/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32950/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1724819412763863808,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14474/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1724819412763863808,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id fd9faef2ff90
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id d396659b7c44
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.