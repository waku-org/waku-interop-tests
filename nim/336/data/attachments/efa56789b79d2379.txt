[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_extra_field with id: 2024-08-28_04-21-54__f6a6059c-8fa6-4c71-af4e-2c2889a92369
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-28_04-21-54__f6a6059c-8fa6-4c71-af4e-2c2889a92369__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.12.64
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['59617', '59618', '59619', '59620', '59621']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 59617:59617 -p 59618:59618 -p 59619:59619 -p 59620:59620 -p 59621:59621 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=59619 --rest-port=59617 --tcp-port=59618 --discv5-udp-port=59620 --rest-address=0.0.0.0 --nat=extip:172.18.12.64 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bee94af3a99eb402b49af13a0abaf4cdd885177756fda00cad2c7cf4769cfedf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=59621 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.12.64 waku 397f8844c1eefa2700565648df6d3d86ca4f06bcaa9b00da39aaacf4d3c7a4e0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 397f8844c1ee. Setting up logs at ./log/docker/receiving_node1_2024-08-28_04-21-54__f6a6059c-8fa6-4c71-af4e-2c2889a92369__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 59617
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59617/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59617/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.12.64/tcp/59618/p2p/16Uiu2HAmQHV4drfNJQWf2gVvb4JyfnspvNeoDMha3JbWTZ69j1Y4","/ip4/172.18.12.64/tcp/59619/ws/p2p/16Uiu2HAmQHV4drfNJQWf2gVvb4JyfnspvNeoDMha3JbWTZ69j1Y4"],"enrUri":"enr:-LO4QIW5uu7HKjtaDodecibLbGxTgOY-SLa379oDgThm1iVMViQfv_r74SlHygLXp9wlvfXGxevG23muMRPzbia55V4BgmlkgnY0gmlwhKwSDECKbXVsdGlhZGRyc4wACgSsEgxABujj3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOsye5aAW1qOkpABfYip8xcid63fjkuXJY05Ck1aeJUOYN0Y3CC6OKDdWRwgujkhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-28_04-21-54__f6a6059c-8fa6-4c71-af4e-2c2889a92369__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.94.47
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['22311', '22312', '22313', '22314', '22315']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 22311:22311 -p 22312:22312 -p 22313:22313 -p 22314:22314 -p 22315:22315 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22313 --rest-port=22311 --tcp-port=22312 --discv5-udp-port=22314 --rest-address=0.0.0.0 --nat=extip:172.18.94.47 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b9c1a7758e7ade8dd1c5e1dbdce26bca249d72dbd68ea7dbe9e7e7c02e52fda1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22315 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.94.47 waku 0e81c8768d9399694cd2f4edd1db5eb974c11514f96e2946f7c2195a12520bc5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 0e81c8768d93. Setting up logs at ./log/docker/receiving_node2_2024-08-28_04-21-54__f6a6059c-8fa6-4c71-af4e-2c2889a92369__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 22311
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22311/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22311/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.94.47/tcp/22312/p2p/16Uiu2HAkzcZjki2CNPz9hx2YC5QmP52iV43Ft5YYfSnLsyq5mz1Y","/ip4/172.18.94.47/tcp/22313/ws/p2p/16Uiu2HAkzcZjki2CNPz9hx2YC5QmP52iV43Ft5YYfSnLsyq5mz1Y"],"enrUri":"enr:-LO4QHeiAq1IJHZCOT9cIeVDQ8YQmpDM8iK0qVaAS8uXRx1gWx_HbST0ZO0TYccU8qT4rDkiwxX0J1TjoXOiRNor0jEBgmlkgnY0gmlwhKwSXi-KbXVsdGlhZGRyc4wACgSsEl4vBlcp3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJNFMP_lqL4lk42MJlEf-8pCRn0av7NWlxHRul7Ad6CQ4N0Y3CCVyiDdWRwglcqhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22311/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.12.64/tcp/59618/p2p/16Uiu2HAmQHV4drfNJQWf2gVvb4JyfnspvNeoDMha3JbWTZ69j1Y4"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-28_04-21-54__f6a6059c-8fa6-4c71-af4e-2c2889a92369__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.13.167
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['4262', '4263', '4264', '4265', '4266']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 4262:4262 -p 4263:4263 -p 4264:4264 -p 4265:4265 -p 4266:4266 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4264 --rest-port=4262 --tcp-port=4263 --discv5-udp-port=4265 --rest-address=0.0.0.0 --nat=extip:172.18.13.167 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cf48b1ceab99dfd2abf2a55ad14a4945cde6df4d738c70db95102d3e80458dac --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4266 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QIW5uu7HKjtaDodecibLbGxTgOY-SLa379oDgThm1iVMViQfv_r74SlHygLXp9wlvfXGxevG23muMRPzbia55V4BgmlkgnY0gmlwhKwSDECKbXVsdGlhZGRyc4wACgSsEgxABujj3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOsye5aAW1qOkpABfYip8xcid63fjkuXJY05Ck1aeJUOYN0Y3CC6OKDdWRwgujkhXdha3UyCQ --lightpushnode=/ip4/172.18.12.64/tcp/59618/p2p/16Uiu2HAmQHV4drfNJQWf2gVvb4JyfnspvNeoDMha3JbWTZ69j1Y4 --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.13.167 waku a04f43dbc33fce3d60cd41ec03e5cf1d81b28af6a188e4fba179c2da479a6955
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID a04f43dbc33f. Setting up logs at ./log/docker/lightpush_node1_2024-08-28_04-21-54__f6a6059c-8fa6-4c71-af4e-2c2889a92369__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 4262
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4262/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4262/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.13.167/tcp/4263/p2p/16Uiu2HAmLwr5aPhvDT89hypgu1bdUdRpHbmgh9YQ9CgUv6Aqtc5v","/ip4/172.18.13.167/tcp/4264/ws/p2p/16Uiu2HAmLwr5aPhvDT89hypgu1bdUdRpHbmgh9YQ9CgUv6Aqtc5v"],"enrUri":"enr:-LO4QCCR3gM-hkR9mKgtaDv9Ix8iPCsRyXWGCAZcRimnR2HiRiRrcywjvTG6IjELCQ-sJ64X8ohO2QHZ2XxPmnQNrzIBgmlkgnY0gmlwhKwSDaeKbXVsdGlhZGRyc4wACgSsEg2nBhCo3QOCcnOFAAMBAACJc2VjcDI1NmsxoQN7LwRnom3xeukkVR63bUQ-YMn35WltlPlFOrUBN92xYYN0Y3CCEKeDdWRwghCphXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4262/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.12.64/tcp/59618/p2p/16Uiu2HAmQHV4drfNJQWf2gVvb4JyfnspvNeoDMha3JbWTZ69j1Y4"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4262/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.94.47/tcp/22312/p2p/16Uiu2HAkzcZjki2CNPz9hx2YC5QmP52iV43Ft5YYfSnLsyq5mz1Y"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59617/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22311/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4262/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724818919142129408, "extraField": "extraValue"}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:4262/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 397f8844c1ee
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 0e81c8768d93
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id a04f43dbc33f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.