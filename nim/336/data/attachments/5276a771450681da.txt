[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_with_large_meta with id: 2024-08-28_04-21-52__cc027416-f404-4dff-9597-0c57cc24e375
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-28_04-21-52__cc027416-f404-4dff-9597-0c57cc24e375__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.131.155
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['56816', '56817', '56818', '56819', '56820']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 56816:56816 -p 56817:56817 -p 56818:56818 -p 56819:56819 -p 56820:56820 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56818 --rest-port=56816 --tcp-port=56817 --discv5-udp-port=56819 --rest-address=0.0.0.0 --nat=extip:172.18.131.155 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b2b362a59cc1eafa8f44e2ccffa0dd4ecfef3d3bd8aab33c8f012be329d40eb2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56820 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.131.155 waku 4bd1f148677aa5b22ccaf0d2822bb185ddae6fe066b4622a1d4ddd812d65bd0c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 4bd1f148677a. Setting up logs at ./log/docker/receiving_node1_2024-08-28_04-21-52__cc027416-f404-4dff-9597-0c57cc24e375__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 56816
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56816/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56816/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.131.155/tcp/56817/p2p/16Uiu2HAmTbQi9pePFV4iNxELfpJ9v3xJDEf5DpsLHTazFM11MU74","/ip4/172.18.131.155/tcp/56818/ws/p2p/16Uiu2HAmTbQi9pePFV4iNxELfpJ9v3xJDEf5DpsLHTazFM11MU74"],"enrUri":"enr:-LO4QKTQKAIewimjMy2n6SRBxM_8u-cMmr5DBMny8ebkoUHrSUlc0urvwoN8mduJVIVfXgh4304ea0yIgggjpm4LCzABgmlkgnY0gmlwhKwSg5uKbXVsdGlhZGRyc4wACgSsEoObBt3y3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPd9IY2bmkY5ma_25INe3LrmxVdWvyOwdI16U7ExeMqS4N0Y3CC3fGDdWRwgt3zhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-28_04-21-52__cc027416-f404-4dff-9597-0c57cc24e375__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.223.68
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['26510', '26511', '26512', '26513', '26514']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 26510:26510 -p 26511:26511 -p 26512:26512 -p 26513:26513 -p 26514:26514 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26512 --rest-port=26510 --tcp-port=26511 --discv5-udp-port=26513 --rest-address=0.0.0.0 --nat=extip:172.18.223.68 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=34c2cdfa197d0e3e481dde7b73713febbcd9897a440ca0aaa172cec4173bcfda --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26514 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.223.68 waku 375af5694329972b30d1d5cc69117f8380bd6af0efe72890b239b8fb085f3c76
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 375af5694329. Setting up logs at ./log/docker/receiving_node2_2024-08-28_04-21-52__cc027416-f404-4dff-9597-0c57cc24e375__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 26510
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26510/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26510/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.223.68/tcp/26511/p2p/16Uiu2HAkyKftSRNem9buEtuy8NQySmvTKSa98eRittJ6ympV4Rgc","/ip4/172.18.223.68/tcp/26512/ws/p2p/16Uiu2HAkyKftSRNem9buEtuy8NQySmvTKSa98eRittJ6ympV4Rgc"],"enrUri":"enr:-LO4QDR8wX3qpMm04rIDkhC3E5UUkMDqEAVrz8f-3V6p-CKCfh8H4y4zR5ZSDE5qq1XAEYKEdENJJrW2mGQhcQx-sl0BgmlkgnY0gmlwhKwS30SKbXVsdGlhZGRyc4wACgSsEt9EBmeQ3QOCcnOFAAMBAACJc2VjcDI1NmsxoQI55SiRTQg7wJA3_jirjvOUJgShsQRFM5fbbB1H83cK8YN0Y3CCZ4-DdWRwgmeRhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26510/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.131.155/tcp/56817/p2p/16Uiu2HAmTbQi9pePFV4iNxELfpJ9v3xJDEf5DpsLHTazFM11MU74"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-28_04-21-52__cc027416-f404-4dff-9597-0c57cc24e375__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.138.74
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['7685', '7686', '7687', '7688', '7689']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 7685:7685 -p 7686:7686 -p 7687:7687 -p 7688:7688 -p 7689:7689 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7687 --rest-port=7685 --tcp-port=7686 --discv5-udp-port=7688 --rest-address=0.0.0.0 --nat=extip:172.18.138.74 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=71edc165bd88fa31d3da195dce3ca87b89e08c8f98f5aaebcd3dbbafcb1edd64 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7689 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QKTQKAIewimjMy2n6SRBxM_8u-cMmr5DBMny8ebkoUHrSUlc0urvwoN8mduJVIVfXgh4304ea0yIgggjpm4LCzABgmlkgnY0gmlwhKwSg5uKbXVsdGlhZGRyc4wACgSsEoObBt3y3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPd9IY2bmkY5ma_25INe3LrmxVdWvyOwdI16U7ExeMqS4N0Y3CC3fGDdWRwgt3zhXdha3UyCQ --lightpushnode=/ip4/172.18.131.155/tcp/56817/p2p/16Uiu2HAmTbQi9pePFV4iNxELfpJ9v3xJDEf5DpsLHTazFM11MU74 --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.138.74 waku 055ca234fc86ddb9a816f59a031fda9f25732413f10912a165f16eada67d040c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 055ca234fc86. Setting up logs at ./log/docker/lightpush_node1_2024-08-28_04-21-52__cc027416-f404-4dff-9597-0c57cc24e375__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 7685
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7685/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7685/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.138.74/tcp/7686/p2p/16Uiu2HAmK3Wge1RURniQe6xEQUiZtQx9gEe41kHewibHsiqwJs7n","/ip4/172.18.138.74/tcp/7687/ws/p2p/16Uiu2HAmK3Wge1RURniQe6xEQUiZtQx9gEe41kHewibHsiqwJs7n"],"enrUri":"enr:-LO4QBZhz42D97y1HeEK6zXWJQYT-4-2VqVNk4noYY_F0uyhdPA7uu9_ket7O2-VdEsSqoPjumH4KSCFDwXatZIJUWsBgmlkgnY0gmlwhKwSikqKbXVsdGlhZGRyc4wACgSsEopKBh4H3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNe6zKaqa0ZbhEhJdRXrWb3tNgje35Kxs-tzaxtW_Qz2YN0Y3CCHgaDdWRwgh4IhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7685/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.131.155/tcp/56817/p2p/16Uiu2HAmTbQi9pePFV4iNxELfpJ9v3xJDEf5DpsLHTazFM11MU74"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7685/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.223.68/tcp/26511/p2p/16Uiu2HAkyKftSRNem9buEtuy8NQySmvTKSa98eRittJ6ympV4Rgc"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56816/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26510/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7685/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724818917856927744, "meta": "YWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYQ=="}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:7685/lightpush/v1/message. Response content: b'Failed to request a message push: decode_rpc_failure: (kind: InvalidLengthField, field: "meta")'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 4bd1f148677a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 375af5694329
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 055ca234fc86
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.