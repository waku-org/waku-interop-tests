[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_pubsub_topics with id: 2024-08-28_04-21-13__2c75340d-1f25-4c59-895c-151f81390a53
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-28_04-21-13__2c75340d-1f25-4c59-895c-151f81390a53__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.0.173
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['19671', '19672', '19673', '19674', '19675']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 19671:19671 -p 19672:19672 -p 19673:19673 -p 19674:19674 -p 19675:19675 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19673 --rest-port=19671 --tcp-port=19672 --discv5-udp-port=19674 --rest-address=0.0.0.0 --nat=extip:172.18.0.173 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ac4c4d0dab81b5af4a2bc5f39ab8beccf2a997cca7bb3563f8d2cfee5f92fbea --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19675 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.0.173 waku 79cfcdc281fe319985445943fd5fd5572cb8802ecd77a4afa5d79a4514f19a33
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 79cfcdc281fe. Setting up logs at ./log/docker/receiving_node1_2024-08-28_04-21-13__2c75340d-1f25-4c59-895c-151f81390a53__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 19671
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19671/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19671/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.0.173/tcp/19672/p2p/16Uiu2HAkw84zfqq6FsC1p76UH4QzLzwwGei5h1xkfDkSJDFnB5XE","/ip4/172.18.0.173/tcp/19673/ws/p2p/16Uiu2HAkw84zfqq6FsC1p76UH4QzLzwwGei5h1xkfDkSJDFnB5XE"],"enrUri":"enr:-LO4QOY5XL4lgKjBE4EDLKmG9xrA0Nqp_GbjQRwRzdxxYHqXEKiCv54p5c5M77XCewB8Dht6lOU8kTgaBF4Xm4Z1CFABgmlkgnY0gmlwhKwSAK2KbXVsdGlhZGRyc4wACgSsEgCtBkzZ3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIZNPFMNCx-XVYlyAI8jlhCukLTUriXVth0aABhTHNgCYN0Y3CCTNiDdWRwgkzahXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-28_04-21-13__2c75340d-1f25-4c59-895c-151f81390a53__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.115.7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['52156', '52157', '52158', '52159', '52160']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 52156:52156 -p 52157:52157 -p 52158:52158 -p 52159:52159 -p 52160:52160 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=52158 --rest-port=52156 --tcp-port=52157 --discv5-udp-port=52159 --rest-address=0.0.0.0 --nat=extip:172.18.115.7 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b7f31cec4312fbcaf87edfdef99bf911ffbe9e6f8507afc7b03aac8ed0013862 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=52160 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.115.7 waku b46ffe964da92bcb7fadfe4abc089466fc95444786ae7eca590fa5335ace4f9f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID b46ffe964da9. Setting up logs at ./log/docker/receiving_node2_2024-08-28_04-21-13__2c75340d-1f25-4c59-895c-151f81390a53__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 52156
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52156/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52156/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.115.7/tcp/52157/p2p/16Uiu2HAkwrmqDWCK2KdhuYXpZHUmoYGXWzHWsiLR7vvWCGHw292z","/ip4/172.18.115.7/tcp/52158/ws/p2p/16Uiu2HAkwrmqDWCK2KdhuYXpZHUmoYGXWzHWsiLR7vvWCGHw292z"],"enrUri":"enr:-LO4QE57MaKOWVyeOa_Z01otSjgbjWXOX2oiSgSsWbCkaq6ZU-t9XxxJYdU5OT-lMy2RDglP65VzrnlddV9GTtdxuUQBgmlkgnY0gmlwhKwScweKbXVsdGlhZGRyc4wACgSsEnMHBsu-3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIkJYLW3bI_YJziPFr58OnqjYsojDWaaVrERBjSXarTW4N0Y3CCy72DdWRwgsu_hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52156/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.0.173/tcp/19672/p2p/16Uiu2HAkw84zfqq6FsC1p76UH4QzLzwwGei5h1xkfDkSJDFnB5XE"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-28_04-21-13__2c75340d-1f25-4c59-895c-151f81390a53__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.126.81
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['55078', '55079', '55080', '55081', '55082']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 55078:55078 -p 55079:55079 -p 55080:55080 -p 55081:55081 -p 55082:55082 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55080 --rest-port=55078 --tcp-port=55079 --discv5-udp-port=55081 --rest-address=0.0.0.0 --nat=extip:172.18.126.81 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f8abfe4fb8dffe2fcfc5d6fbfba9cdc70bbee7f5af3cc1e33ec01daafdb9a1d1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55082 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QOY5XL4lgKjBE4EDLKmG9xrA0Nqp_GbjQRwRzdxxYHqXEKiCv54p5c5M77XCewB8Dht6lOU8kTgaBF4Xm4Z1CFABgmlkgnY0gmlwhKwSAK2KbXVsdGlhZGRyc4wACgSsEgCtBkzZ3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIZNPFMNCx-XVYlyAI8jlhCukLTUriXVth0aABhTHNgCYN0Y3CCTNiDdWRwgkzahXdha3UyCQ --lightpushnode=/ip4/172.18.0.173/tcp/19672/p2p/16Uiu2HAkw84zfqq6FsC1p76UH4QzLzwwGei5h1xkfDkSJDFnB5XE --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.126.81 waku 92d52f489424a7d61bdacf90378a35ef92da16884c6cade7991d24dbc70db8c3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 92d52f489424. Setting up logs at ./log/docker/lightpush_node1_2024-08-28_04-21-13__2c75340d-1f25-4c59-895c-151f81390a53__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 55078
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55078/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55078/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.126.81/tcp/55079/p2p/16Uiu2HAmUXxYyMc3BrH4bQ1EK8bQ7HC7991KxekpfYfraW8v2DQj","/ip4/172.18.126.81/tcp/55080/ws/p2p/16Uiu2HAmUXxYyMc3BrH4bQ1EK8bQ7HC7991KxekpfYfraW8v2DQj"],"enrUri":"enr:-LO4QEjmg32sEM5XOkAd3-g4NJAebgCwDt83BAN3T0cn9j6nFqFYrdKdXsxqgNaV42VsFoDZEShgVJeRv9vOnwAJD24BgmlkgnY0gmlwhKwSflGKbXVsdGlhZGRyc4wACgSsEn5RBtco3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPr7eQ5cj7fq5AzcWHoCFeU30K812skMjP13o1clxqBqIN0Y3CC1yeDdWRwgtcphXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55078/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.0.173/tcp/19672/p2p/16Uiu2HAkw84zfqq6FsC1p76UH4QzLzwwGei5h1xkfDkSJDFnB5XE"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55078/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.115.7/tcp/52157/p2p/16Uiu2HAkwrmqDWCK2KdhuYXpZHUmoYGXWzHWsiLR7vvWCGHw292z"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19671/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52156/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A dictionary', 'value': {'key': 'YWFh'}}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55078/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": {"key": "YWFh"}, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724818878692414976}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:55078/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'An integer', 'value': 1234567890}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55078/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": 1234567890, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724818878701294336}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:55078/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A list', 'value': ['YWFh']}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55078/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": ["YWFh"], "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724818878707366656}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:55078/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A bool', 'value': True}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55078/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": true, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724818878711899136}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:55078/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 79cfcdc281fe
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id b46ffe964da9
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 92d52f489424
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.