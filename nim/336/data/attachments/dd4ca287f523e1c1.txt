[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_subscribe_with_invalid_request_id with id: 2024-08-28_04-17-47__68f5bc23-fafc-42d4-8746-7e81b9850de2
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-08-28_04-17-47__68f5bc23-fafc-42d4-8746-7e81b9850de2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.22.0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['26444', '26445', '26446', '26447', '26448']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 26444:26444 -p 26445:26445 -p 26446:26446 -p 26447:26447 -p 26448:26448 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26446 --rest-port=26444 --tcp-port=26445 --discv5-udp-port=26447 --rest-address=0.0.0.0 --nat=extip:172.18.22.0 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ae2b2fa01da5a3cafc0a7ff93bae79499e4f6c9e8a7e880addf8b77ab6aa3dc2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26448 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.22.0 waku 3dd44344e69055af5ce88b75bccb8b57d6a711718edbd08e513d2f5fa2798ffb
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 3dd44344e690. Setting up logs at ./log/docker/node1_2024-08-28_04-17-47__68f5bc23-fafc-42d4-8746-7e81b9850de2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 26444
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26444/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26444/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.22.0/tcp/26445/p2p/16Uiu2HAmLikoViKnMeBPVNpPxnq6zSeUqjSzY2uULoDYniYkAexE","/ip4/172.18.22.0/tcp/26446/ws/p2p/16Uiu2HAmLikoViKnMeBPVNpPxnq6zSeUqjSzY2uULoDYniYkAexE"],"enrUri":"enr:-LO4QPXW6PvD6oalC_1x4nojabTfce2dwZj4ls1w7VFEJAs4Msx2_Yb1EwKnGg4xILIYckZwWDfnS5vBNTzkyT0bwwwBgmlkgnY0gmlwhKwSFgCKbXVsdGlhZGRyc4wACgSsEhYABmdO3QOCcnOFAAMBAACJc2VjcDI1NmsxoQN31H_q_UrIAOR6syF3vauQixt_3A2rnGTh7hHxtyf974N0Y3CCZ02DdWRwgmdPhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-08-28_04-17-47__68f5bc23-fafc-42d4-8746-7e81b9850de2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.93.81
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['14475', '14476', '14477', '14478', '14479']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 14475:14475 -p 14476:14476 -p 14477:14477 -p 14478:14478 -p 14479:14479 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14477 --rest-port=14475 --tcp-port=14476 --discv5-udp-port=14478 --rest-address=0.0.0.0 --nat=extip:172.18.93.81 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=186d3955f434bd3efc8fe38b349d4e1a714dd5cc29cc2ba1e5eaface8a7fd9c1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14479 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QPXW6PvD6oalC_1x4nojabTfce2dwZj4ls1w7VFEJAs4Msx2_Yb1EwKnGg4xILIYckZwWDfnS5vBNTzkyT0bwwwBgmlkgnY0gmlwhKwSFgCKbXVsdGlhZGRyc4wACgSsEhYABmdO3QOCcnOFAAMBAACJc2VjcDI1NmsxoQN31H_q_UrIAOR6syF3vauQixt_3A2rnGTh7hHxtyf974N0Y3CCZ02DdWRwgmdPhXdha3UyBQ --filternode=/ip4/172.18.22.0/tcp/26445/p2p/16Uiu2HAmLikoViKnMeBPVNpPxnq6zSeUqjSzY2uULoDYniYkAexE
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.93.81 waku d87bd7956d7d257e29d324b1a28be4974dafc3664712de7dc2264207edf6082e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID d87bd7956d7d. Setting up logs at ./log/docker/node2_2024-08-28_04-17-47__68f5bc23-fafc-42d4-8746-7e81b9850de2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 14475
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14475/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14475/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.93.81/tcp/14476/p2p/16Uiu2HAm8nkiwt4ncVK2snfeReQ7Wg2gps7q2asTZDu48GUdFTb1","/ip4/172.18.93.81/tcp/14477/ws/p2p/16Uiu2HAm8nkiwt4ncVK2snfeReQ7Wg2gps7q2asTZDu48GUdFTb1"],"enrUri":"enr:-LO4QM6bvZY6Vu1LYBRZ3X7Z53xGuUidz4Y3G79ZjTHfvS5zNjVKZyL_t-lXIQQrTZ48Exn-5EZR7dw0AaCdbaac_qwBgmlkgnY0gmlwhKwSXVGKbXVsdGlhZGRyc4wACgSsEl1RBjiN3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLGjn26E9z-bIFnXvUjQCm4Z-mIJ2aKeITQkV8TF0Hr7IN0Y3CCOIyDdWRwgjiOhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14475/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.22.0/tcp/26445/p2p/16Uiu2HAmLikoViKnMeBPVNpPxnq6zSeUqjSzY2uULoDYniYkAexE"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26444/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14475/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "4ae02512-e123-4afc-bb03-7cce7127d9af", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"4ae02512-e123-4afc-bb03-7cce7127d9af","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14475/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": 1, "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:14475/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 3dd44344e690
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id d87bd7956d7d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.