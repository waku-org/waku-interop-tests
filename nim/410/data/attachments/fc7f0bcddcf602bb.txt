[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_get_message_after_node2_restarts with id: 2024-10-27_13-14-43__0d95659d-a419-4046-80f4-5bcc25fb2ca9
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-27_13-14-43__0d95659d-a419-4046-80f4-5bcc25fb2ca9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.76.55
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['62947', '62948', '62949', '62950', '62951']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 62947:62947 -p 62948:62948 -p 62949:62949 -p 62950:62950 -p 62951:62951 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62949 --rest-port=62947 --tcp-port=62948 --discv5-udp-port=62950 --rest-address=0.0.0.0 --nat=extip:172.18.76.55 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=12cc06de85c1fd52129f1af27ffd20efbd6ee7bb9f77008a6973bd662960ba35 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62951 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.76.55 waku 5525bb078c2a38656ff66d69388cfd857c9ae05752a4be0995e9e472707b0cea
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 5525bb078c2a. Setting up logs at ./log/docker/node1_2024-10-27_13-14-43__0d95659d-a419-4046-80f4-5bcc25fb2ca9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 62947
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container ada85e8768e5. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62947/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62947/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.76.55/tcp/62948/p2p/16Uiu2HAm5pyJhYEZ5odvyavdmTKG4MNiD3jKu1pp4LYrBGXqZbZG","/ip4/172.18.76.55/tcp/62949/ws/p2p/16Uiu2HAm5pyJhYEZ5odvyavdmTKG4MNiD3jKu1pp4LYrBGXqZbZG"],"enrUri":"enr:-LO4QK6Up6uKpbJL7a7sewvRtEsF_lxSbhTXHZ0dUCj3RVkSS2_880Dgh3fX_NlKfz-X-c8927IfN4e7a5xrBv7B35EBgmlkgnY0gmlwhKwSTDeKbXVsdGlhZGRyc4wACgSsEkw3BvXl3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKajNGDOYNU8ZmsFg0kuvDlIUa078mIoZfuEtRKqSs4l4N0Y3CC9eSDdWRwgvXmhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-10-27_13-14-43__0d95659d-a419-4046-80f4-5bcc25fb2ca9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.131.138
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['54154', '54155', '54156', '54157', '54158']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 54154:54154 -p 54155:54155 -p 54156:54156 -p 54157:54157 -p 54158:54158 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=54156 --rest-port=54154 --tcp-port=54155 --discv5-udp-port=54157 --rest-address=0.0.0.0 --nat=extip:172.18.131.138 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=955af2d4d75ff22f57b1d6da42c4c80ab1ae42adab6eb7c13ba42839f19b6c8f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=54158 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QK6Up6uKpbJL7a7sewvRtEsF_lxSbhTXHZ0dUCj3RVkSS2_880Dgh3fX_NlKfz-X-c8927IfN4e7a5xrBv7B35EBgmlkgnY0gmlwhKwSTDeKbXVsdGlhZGRyc4wACgSsEkw3BvXl3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKajNGDOYNU8ZmsFg0kuvDlIUa078mIoZfuEtRKqSs4l4N0Y3CC9eSDdWRwgvXmhXdha3UyBQ --filternode=/ip4/172.18.76.55/tcp/62948/p2p/16Uiu2HAm5pyJhYEZ5odvyavdmTKG4MNiD3jKu1pp4LYrBGXqZbZG
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.131.138 waku 8d0cde3f625bc78080359c188d60050e1261f3c9e6fddd3e8b5b8e60180754f2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 8d0cde3f625b. Setting up logs at ./log/docker/node2_2024-10-27_13-14-43__0d95659d-a419-4046-80f4-5bcc25fb2ca9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 54154
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54154/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54154/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.131.138/tcp/54155/p2p/16Uiu2HAmR2fddh51v91u5iaHEdCBhADTTboRykJx8RMJh8N6zKdK","/ip4/172.18.131.138/tcp/54156/ws/p2p/16Uiu2HAmR2fddh51v91u5iaHEdCBhADTTboRykJx8RMJh8N6zKdK"],"enrUri":"enr:-LO4QMnDaW0D20IRkkPK7ipC71dH8ng0SYOvjdqFTmW-z-bjIdrn3t7wAm0yJKcdHXYofswOKHonLmBH3ZMPbnet8rwBgmlkgnY0gmlwhKwSg4qKbXVsdGlhZGRyc4wACgSsEoOKBtOM3QOCcnOFAAMBAACJc2VjcDI1NmsxoQO32dstfkoo27rm8dZdmGKgvJnXi2I_FRBXK1osTEef2oN0Y3CC04uDdWRwgtONhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54154/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.76.55/tcp/62948/p2p/16Uiu2HAm5pyJhYEZ5odvyavdmTKG4MNiD3jKu1pp4LYrBGXqZbZG"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62947/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54154/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "8202daf6-e9e3-42ed-87e0-c1b305194e03", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"8202daf6-e9e3-42ed-87e0-c1b305194e03","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62947/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54154/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1730034887072653056,"ephemeral":false}]'
[35mDEBUG   [0m src.node.waku_node:waku_node.py:244 Restarting container with id 8d0cde3f625b
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54154/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54154/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54154/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.131.138/tcp/54155/p2p/16Uiu2HAmR2fddh51v91u5iaHEdCBhADTTboRykJx8RMJh8N6zKdK","/ip4/172.18.131.138/tcp/54156/ws/p2p/16Uiu2HAmR2fddh51v91u5iaHEdCBhADTTboRykJx8RMJh8N6zKdK"],"enrUri":"enr:-LO4QMnDaW0D20IRkkPK7ipC71dH8ng0SYOvjdqFTmW-z-bjIdrn3t7wAm0yJKcdHXYofswOKHonLmBH3ZMPbnet8rwBgmlkgnY0gmlwhKwSg4qKbXVsdGlhZGRyc4wACgSsEoOKBtOM3QOCcnOFAAMBAACJc2VjcDI1NmsxoQO32dstfkoo27rm8dZdmGKgvJnXi2I_FRBXK1osTEef2oN0Y3CC04uDdWRwgtONhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 2 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62947/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54154/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "31dc478f-34d6-42bc-9d3b-15b59da0744a", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"31dc478f-34d6-42bc-9d3b-15b59da0744a","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62947/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54154/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1730034891928291072,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 5525bb078c2a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 8d0cde3f625b
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 5525bb078c2a. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.