[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_subscribe_and_publish_on_another_shard with id: 2024-09-26_04-25-31__5d00cd68-392e-469f-a678-2bb4a8222d39
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-26_04-25-31__5d00cd68-392e-469f-a678-2bb4a8222d39__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.211.27
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['49080', '49081', '49082', '49083', '49084']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 49080:49080 -p 49081:49081 -p 49082:49082 -p 49083:49083 -p 49084:49084 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=49082 --rest-port=49080 --tcp-port=49081 --discv5-udp-port=49083 --rest-address=0.0.0.0 --nat=extip:172.18.211.27 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=45bd77fe9e4e5dbfaf0e195dea3a37979a1aafb664bb90c6973ad51d4db8be30 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=49084 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/2/0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.211.27 waku 633c78dd4c2715da55ea93f0ca49c6c5bdb6a90cdfac911e03d4e6a1611edd4f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 633c78dd4c27. Setting up logs at ./log/docker/node1_2024-09-26_04-25-31__5d00cd68-392e-469f-a678-2bb4a8222d39__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 49080
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49080/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49080/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.211.27/tcp/49081/p2p/16Uiu2HAmEQt4rWhjWBTviCUWjCD3y8AKWWwB7JuPeKAaZCUVfMso","/ip4/172.18.211.27/tcp/49082/ws/p2p/16Uiu2HAmEQt4rWhjWBTviCUWjCD3y8AKWWwB7JuPeKAaZCUVfMso"],"enrUri":"enr:-LO4QPQGsTi-mOD0fI2t3R5H8wWhdWyJiSWUNAMPc1fmDEK9GEYfUJnwDhDVAUidaua0BO2NL6Lf-_mijFtnzCGQKbABgmlkgnY0gmlwhKwS0xuKbXVsdGlhZGRyc4wACgSsEtMbBr-63QOCcnOFAAIBAACJc2VjcDI1NmsxoQMaGiNNQuY85Vv4VEsXt0G4y8zBhftFwPdGC_vSVM05ooN0Y3CCv7mDdWRwgr-7hXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-26_04-25-31__5d00cd68-392e-469f-a678-2bb4a8222d39__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.115.63
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['56756', '56757', '56758', '56759', '56760']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 56756:56756 -p 56757:56757 -p 56758:56758 -p 56759:56759 -p 56760:56760 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56758 --rest-port=56756 --tcp-port=56757 --discv5-udp-port=56759 --rest-address=0.0.0.0 --nat=extip:172.18.115.63 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=ddeefc5190bd46e00ce8cabb6697dec55df9b2aa2cdb5e54f6b85c0bcaac3db4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56760 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QPQGsTi-mOD0fI2t3R5H8wWhdWyJiSWUNAMPc1fmDEK9GEYfUJnwDhDVAUidaua0BO2NL6Lf-_mijFtnzCGQKbABgmlkgnY0gmlwhKwS0xuKbXVsdGlhZGRyc4wACgSsEtMbBr-63QOCcnOFAAIBAACJc2VjcDI1NmsxoQMaGiNNQuY85Vv4VEsXt0G4y8zBhftFwPdGC_vSVM05ooN0Y3CCv7mDdWRwgr-7hXdha3UyBQ --pubsub-topic=/waku/2/rs/2/0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.115.63 waku 316a471dfbc230a22837bf5bec07e5bb0b363bbac5eb6ff42916cd73acf6a88c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 316a471dfbc2. Setting up logs at ./log/docker/node2_2024-09-26_04-25-31__5d00cd68-392e-469f-a678-2bb4a8222d39__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 56756
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56756/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56756/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.115.63/tcp/56757/p2p/16Uiu2HAmE3oPKkZKDjVJ4kzE4CKqWvRpouuGgVFh4pLRr6Xq1obc","/ip4/172.18.115.63/tcp/56758/ws/p2p/16Uiu2HAmE3oPKkZKDjVJ4kzE4CKqWvRpouuGgVFh4pLRr6Xq1obc"],"enrUri":"enr:-LO4QOZzSphv9EUV5H5a27CrQyoWu2omz1qPWEA7F4T-Puu2a3mi3lgZkXOPoHC22aHMX6TgWvRo-9aXF8_ANW1zy00BgmlkgnY0gmlwhKwScz-KbXVsdGlhZGRyc4wACgSsEnM_Bt223QOCcnOFAAIBAACJc2VjcDI1NmsxoQMUs6W_c8Ei4B43oPB6Mm763JaTcdE5x_c0tOQD75f7z4N0Y3CC3bWDdWRwgt23hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56756/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.211.27/tcp/49081/p2p/16Uiu2HAmEQt4rWhjWBTviCUWjCD3y8AKWWwB7JuPeKAaZCUVfMso"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49080/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56756/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49080/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F1" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49080/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1727324734944559104,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56756/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1727324734944559104,"ephemeral":false}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49080/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49080/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1727324735088847616,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56756/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1727324735088847616,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 633c78dd4c27
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 316a471dfbc2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.