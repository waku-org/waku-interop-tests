[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_valid_version with id: 2024-09-26_04-19-29__b768bbda-9465-469c-8fca-34b137a8bad6
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-26_04-19-29__b768bbda-9465-469c-8fca-34b137a8bad6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.18.152
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['41084', '41085', '41086', '41087', '41088']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 41084:41084 -p 41085:41085 -p 41086:41086 -p 41087:41087 -p 41088:41088 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=41086 --rest-port=41084 --tcp-port=41085 --discv5-udp-port=41087 --rest-address=0.0.0.0 --nat=extip:172.18.18.152 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cffc3b1ff1beffacfa9eff7a9faaa4ee74fd6cfdafec99febadd9e58613c73ef --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=41088 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.18.152 waku 298deb2c67713169daf4ec2d642ea49165841df86e6609855e8650bf29716ea3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 298deb2c6771. Setting up logs at ./log/docker/receiving_node1_2024-09-26_04-19-29__b768bbda-9465-469c-8fca-34b137a8bad6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 41084
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41084/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41084/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.18.152/tcp/41085/p2p/16Uiu2HAmTPwkyah7yK9XqfijmqfkwErL2sLLvhhLEGkZ2H4ZHMKx","/ip4/172.18.18.152/tcp/41086/ws/p2p/16Uiu2HAmTPwkyah7yK9XqfijmqfkwErL2sLLvhhLEGkZ2H4ZHMKx"],"enrUri":"enr:-LO4QB41r6HeqXlBQ9utoWaxXAA_Aw_6iLKMIAlzpOGJ5huXbvPi_Vo7HLOocLphD-y7KRh6LE_EJN4UxO7f5-Q8KiUBgmlkgnY0gmlwhKwSEpiKbXVsdGlhZGRyc4wACgSsEhKYBqB-3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPbBKlSZZHe7xLDEE77HgMyGVUvhRSNvb7RUIEjzZHw-4N0Y3CCoH2DdWRwgqB_hXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-26_04-19-29__b768bbda-9465-469c-8fca-34b137a8bad6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.20.80
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['15221', '15222', '15223', '15224', '15225']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 15221:15221 -p 15222:15222 -p 15223:15223 -p 15224:15224 -p 15225:15225 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15223 --rest-port=15221 --tcp-port=15222 --discv5-udp-port=15224 --rest-address=0.0.0.0 --nat=extip:172.18.20.80 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fb9d7daca684fbdedeabccf38b180f486d2f793f27c6e4e8aa194c1c9fd889b8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15225 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.20.80 waku e06ccc6b41a5819eaac24614d318b82773f87f4aaddb00a4f85cd796df73f78f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID e06ccc6b41a5. Setting up logs at ./log/docker/receiving_node2_2024-09-26_04-19-29__b768bbda-9465-469c-8fca-34b137a8bad6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 15221
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15221/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15221/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.20.80/tcp/15222/p2p/16Uiu2HAmG97m6odGiLcCURGCgM8zG5MyzqjUYiiEcMwTfZDxCBX5","/ip4/172.18.20.80/tcp/15223/ws/p2p/16Uiu2HAmG97m6odGiLcCURGCgM8zG5MyzqjUYiiEcMwTfZDxCBX5"],"enrUri":"enr:-LO4QKsFcSqil-onVUpzgN9yUtUwQf5vON2r8gREXWPF3WCuGd3Yolt3ZFt57TdTQxhrJb-aNvDu2XPyaR-WZK_EHBQBgmlkgnY0gmlwhKwSFFCKbXVsdGlhZGRyc4wACgSsEhRQBjt33QOCcnOFAAMBAACJc2VjcDI1NmsxoQMzx7PaZ9Jv42m8ttzFV9_PA8zVOl2UM0gY7o7MNo-g4IN0Y3CCO3aDdWRwgjt4hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15221/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.18.152/tcp/41085/p2p/16Uiu2HAmTPwkyah7yK9XqfijmqfkwErL2sLLvhhLEGkZ2H4ZHMKx"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-26_04-19-29__b768bbda-9465-469c-8fca-34b137a8bad6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.237.76
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['49105', '49106', '49107', '49108', '49109']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 49105:49105 -p 49106:49106 -p 49107:49107 -p 49108:49108 -p 49109:49109 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=49107 --rest-port=49105 --tcp-port=49106 --discv5-udp-port=49108 --rest-address=0.0.0.0 --nat=extip:172.18.237.76 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ccb5ddd4ab7fbbfffdd41be8a1ddaac4b545a37473235acfc9ad77efaed2a4ae --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=49109 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QB41r6HeqXlBQ9utoWaxXAA_Aw_6iLKMIAlzpOGJ5huXbvPi_Vo7HLOocLphD-y7KRh6LE_EJN4UxO7f5-Q8KiUBgmlkgnY0gmlwhKwSEpiKbXVsdGlhZGRyc4wACgSsEhKYBqB-3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPbBKlSZZHe7xLDEE77HgMyGVUvhRSNvb7RUIEjzZHw-4N0Y3CCoH2DdWRwgqB_hXdha3UyCQ --lightpushnode=/ip4/172.18.18.152/tcp/41085/p2p/16Uiu2HAmTPwkyah7yK9XqfijmqfkwErL2sLLvhhLEGkZ2H4ZHMKx --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.237.76 waku 7658d89bb16d0a3e30efd8058bccee44f879eb10f342648b21df73f83788a2e8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 7658d89bb16d. Setting up logs at ./log/docker/lightpush_node1_2024-09-26_04-19-29__b768bbda-9465-469c-8fca-34b137a8bad6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 49105
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49105/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49105/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.237.76/tcp/49106/p2p/16Uiu2HAm6N1ZHjiVuU78iy5krDZBXbb1tVGn7mMEvW1Nh5FYyR3c","/ip4/172.18.237.76/tcp/49107/ws/p2p/16Uiu2HAm6N1ZHjiVuU78iy5krDZBXbb1tVGn7mMEvW1Nh5FYyR3c"],"enrUri":"enr:-LO4QI_fLWTsNiKhmge2fs4nHEh-ySsivnAvBn8xu1urcVyDdoIeAvQhFQwQeyKBDQnyef8PIvyH1QiyO5uqd9TGaoABgmlkgnY0gmlwhKwS7UyKbXVsdGlhZGRyc4wACgSsEu1MBr_T3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKigF6Lw-pTOoin3MRP-8PxFBGsDbFC5lxF0EZkNC52Z4N0Y3CCv9KDdWRwgr_UhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49105/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.18.152/tcp/41085/p2p/16Uiu2HAmTPwkyah7yK9XqfijmqfkwErL2sLLvhhLEGkZ2H4ZHMKx"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49105/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.20.80/tcp/15222/p2p/16Uiu2HAmG97m6odGiLcCURGCgM8zG5MyzqjUYiiEcMwTfZDxCBX5"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41084/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15221/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49105/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1727324373858981120, "version": 10}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41084/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":10,"timestamp":1727324373858981120,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15221/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":10,"timestamp":1727324373858981120,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 298deb2c6771
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id e06ccc6b41a5
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 7658d89bb16d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.