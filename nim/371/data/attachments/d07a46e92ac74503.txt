[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_extra_field with id: 2024-09-25_04-19-52__aead458f-2643-4a2e-9524-1788b9763b35
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-25_04-19-52__aead458f-2643-4a2e-9524-1788b9763b35__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.159.228
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['14939', '14940', '14941', '14942', '14943']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 14939:14939 -p 14940:14940 -p 14941:14941 -p 14942:14942 -p 14943:14943 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14941 --rest-port=14939 --tcp-port=14940 --discv5-udp-port=14942 --rest-address=0.0.0.0 --nat=extip:172.18.159.228 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b3483f759e9b5eb7e1b2560f4a81df193bdc21aa552ed167fdc2ecff5f94f8f3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14943 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.159.228 waku 06a944214d5f3aeb23805b55dc61893b4471704b23596d43da2795f8ac29955e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 06a944214d5f. Setting up logs at ./log/docker/receiving_node1_2024-09-25_04-19-52__aead458f-2643-4a2e-9524-1788b9763b35__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 14939
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14939/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14939/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.159.228/tcp/14940/p2p/16Uiu2HAmC4MGT9zHedFsiy7z3HU1yYi3D1P2ZKhWSsZJFcfENyty","/ip4/172.18.159.228/tcp/14941/ws/p2p/16Uiu2HAmC4MGT9zHedFsiy7z3HU1yYi3D1P2ZKhWSsZJFcfENyty"],"enrUri":"enr:-LO4QMOEX3Wu1-XlhcWsePqYadm--9iU34XjJ9-oCfEzXxvuY_g8PWz6EIn5-j2pifFlSrJeU2XdDvGhByj8iZ2ks0UBgmlkgnY0gmlwhKwSn-SKbXVsdGlhZGRyc4wACgSsEp_kBjpd3QOCcnOFAAMBAACJc2VjcDI1NmsxoQL3IFJ3vdtlpDIANihvLzLdKKmzILzXHDay-jIIVkzvPoN0Y3CCOlyDdWRwgjpehXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-25_04-19-52__aead458f-2643-4a2e-9524-1788b9763b35__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.75.223
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['17603', '17604', '17605', '17606', '17607']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 17603:17603 -p 17604:17604 -p 17605:17605 -p 17606:17606 -p 17607:17607 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17605 --rest-port=17603 --tcp-port=17604 --discv5-udp-port=17606 --rest-address=0.0.0.0 --nat=extip:172.18.75.223 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1f0aa2564caba9aef1e29f8a9fc8d9cc2d6bfccdfc4ae3e000a138b96af7e918 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17607 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.75.223 waku 55257cbab9a6ee303a64741afcac9f25459ac8b69714e9971336704f350ad320
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 55257cbab9a6. Setting up logs at ./log/docker/receiving_node2_2024-09-25_04-19-52__aead458f-2643-4a2e-9524-1788b9763b35__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 17603
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17603/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17603/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.75.223/tcp/17604/p2p/16Uiu2HAm6L2dw8tBQfBVPBK2KbnEmZ3ZCqbUWLxRFRvf8gWEfbaX","/ip4/172.18.75.223/tcp/17605/ws/p2p/16Uiu2HAm6L2dw8tBQfBVPBK2KbnEmZ3ZCqbUWLxRFRvf8gWEfbaX"],"enrUri":"enr:-LO4QAXJsXYfsqRMwBofONlnONE1vGG4u58ZePfx-4X8fic5EbuWwD_AwWdbvSA9G5Ldu2sXO19tR2zJQg3CF2T3mS4BgmlkgnY0gmlwhKwSS9-KbXVsdGlhZGRyc4wACgSsEkvfBkTF3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKh_m3QDFdT742j0PObKKsgGStaUn4W3FENPlGzZycagIN0Y3CCRMSDdWRwgkTGhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:17603/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.159.228/tcp/14940/p2p/16Uiu2HAmC4MGT9zHedFsiy7z3HU1yYi3D1P2ZKhWSsZJFcfENyty"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-25_04-19-52__aead458f-2643-4a2e-9524-1788b9763b35__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.87.132
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['27659', '27660', '27661', '27662', '27663']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 27659:27659 -p 27660:27660 -p 27661:27661 -p 27662:27662 -p 27663:27663 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27661 --rest-port=27659 --tcp-port=27660 --discv5-udp-port=27662 --rest-address=0.0.0.0 --nat=extip:172.18.87.132 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5cdedbdedc285c7ec8ce58bb2fb5ec1647a9ad4e3bcc89ebccdeb5a18e7b4fed --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27663 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QMOEX3Wu1-XlhcWsePqYadm--9iU34XjJ9-oCfEzXxvuY_g8PWz6EIn5-j2pifFlSrJeU2XdDvGhByj8iZ2ks0UBgmlkgnY0gmlwhKwSn-SKbXVsdGlhZGRyc4wACgSsEp_kBjpd3QOCcnOFAAMBAACJc2VjcDI1NmsxoQL3IFJ3vdtlpDIANihvLzLdKKmzILzXHDay-jIIVkzvPoN0Y3CCOlyDdWRwgjpehXdha3UyCQ --lightpushnode=/ip4/172.18.159.228/tcp/14940/p2p/16Uiu2HAmC4MGT9zHedFsiy7z3HU1yYi3D1P2ZKhWSsZJFcfENyty --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.87.132 waku 6cec272e11747c1f78e29a66221f35eb7ae75c374845dfad30cb8c7f699eaa0f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 6cec272e1174. Setting up logs at ./log/docker/lightpush_node1_2024-09-25_04-19-52__aead458f-2643-4a2e-9524-1788b9763b35__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 27659
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27659/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27659/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.87.132/tcp/27660/p2p/16Uiu2HAmTeycnaXPrRhezDbvo3dNGRBf8Vpto77pyN7QMhA5ZZB6","/ip4/172.18.87.132/tcp/27661/ws/p2p/16Uiu2HAmTeycnaXPrRhezDbvo3dNGRBf8Vpto77pyN7QMhA5ZZB6"],"enrUri":"enr:-LO4QMTnWrXnqzf7HpACUPXynMTPymejyTdOeZKTw9QciQw0JpMFsJgOxl237KVP5VXdURtmOqqGbyHiHFcuT2Zmz7wBgmlkgnY0gmlwhKwSV4SKbXVsdGlhZGRyc4wACgSsEleEBmwN3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPe3nmtOcNcxRhEDt6SKck4T7ZPfp_cE73i3_BKHqeFqYN0Y3CCbAyDdWRwgmwOhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27659/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.159.228/tcp/14940/p2p/16Uiu2HAmC4MGT9zHedFsiy7z3HU1yYi3D1P2ZKhWSsZJFcfENyty"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27659/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.75.223/tcp/17604/p2p/16Uiu2HAm6L2dw8tBQfBVPBK2KbnEmZ3ZCqbUWLxRFRvf8gWEfbaX"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14939/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:17603/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27659/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1727237997867821056, "extraField": "extraValue"}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:27659/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 06a944214d5f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 55257cbab9a6
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 6cec272e1174
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.