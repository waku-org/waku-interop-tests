[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_update_subscription_with_extra_field with id: 2024-09-25_04-17-13__5130f79d-72ab-4651-a2d1-de76d7e68740
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-25_04-17-13__5130f79d-72ab-4651-a2d1-de76d7e68740__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.84.198
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['63116', '63117', '63118', '63119', '63120']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 63116:63116 -p 63117:63117 -p 63118:63118 -p 63119:63119 -p 63120:63120 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63118 --rest-port=63116 --tcp-port=63117 --discv5-udp-port=63119 --rest-address=0.0.0.0 --nat=extip:172.18.84.198 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8dbcd977e4fb4cb1bcaf03ddc3ecec8ec4f896f776abec7e315be81cd5eb07c2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63120 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.84.198 waku 5a16e173e24973806fd6e7bc9efd23dc29685f4461febd3bbdffbe42227befe9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 5a16e173e249. Setting up logs at ./log/docker/node1_2024-09-25_04-17-13__5130f79d-72ab-4651-a2d1-de76d7e68740__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 63116
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63116/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63116/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.84.198/tcp/63117/p2p/16Uiu2HAm8R2xUm7hnc2E7adP5Lt9ECbytV3ov6gCtahLAPaWKJuV","/ip4/172.18.84.198/tcp/63118/ws/p2p/16Uiu2HAm8R2xUm7hnc2E7adP5Lt9ECbytV3ov6gCtahLAPaWKJuV"],"enrUri":"enr:-LO4QI672VS3Lj3c_h2KbYMfqcdoW0T9bhwktUIYvE9gMOBRR-BgVaP1q3zpt09HJF86aIy0E-w-LfrqCPkJrSWfaicBgmlkgnY0gmlwhKwSVMaKbXVsdGlhZGRyc4wACgSsElTGBvaO3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLA_hGCHBw7Uh3jOdHhgsZxR9AKQ9uhfDwYMAvAy7o9iIN0Y3CC9o2DdWRwgvaPhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-25_04-17-13__5130f79d-72ab-4651-a2d1-de76d7e68740__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.22.3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['13351', '13352', '13353', '13354', '13355']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 13351:13351 -p 13352:13352 -p 13353:13353 -p 13354:13354 -p 13355:13355 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=13353 --rest-port=13351 --tcp-port=13352 --discv5-udp-port=13354 --rest-address=0.0.0.0 --nat=extip:172.18.22.3 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ec7b0b1e281e8dfa4ebaad775ecd0cae3f50e2ddbbf1c7ccfe770be61a08bd43 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=13355 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QI672VS3Lj3c_h2KbYMfqcdoW0T9bhwktUIYvE9gMOBRR-BgVaP1q3zpt09HJF86aIy0E-w-LfrqCPkJrSWfaicBgmlkgnY0gmlwhKwSVMaKbXVsdGlhZGRyc4wACgSsElTGBvaO3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLA_hGCHBw7Uh3jOdHhgsZxR9AKQ9uhfDwYMAvAy7o9iIN0Y3CC9o2DdWRwgvaPhXdha3UyBQ --filternode=/ip4/172.18.84.198/tcp/63117/p2p/16Uiu2HAm8R2xUm7hnc2E7adP5Lt9ECbytV3ov6gCtahLAPaWKJuV
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.22.3 waku 67d52dfff920df87b57db22c135d8740fdfc90efd10d6da69b1b4acd3e3636ac
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 67d52dfff920. Setting up logs at ./log/docker/node2_2024-09-25_04-17-13__5130f79d-72ab-4651-a2d1-de76d7e68740__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 13351
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13351/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13351/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.22.3/tcp/13352/p2p/16Uiu2HAm5drWQHfe4oLVZGxuAEeFYRuhD4q4hNdfaNKvEoy9iQ2t","/ip4/172.18.22.3/tcp/13353/ws/p2p/16Uiu2HAm5drWQHfe4oLVZGxuAEeFYRuhD4q4hNdfaNKvEoy9iQ2t"],"enrUri":"enr:-LO4QNZtVShGg2kSN1K5aGrlohlPSX7mmblQn0k7Q4qgm80GKgeXKRSDI1irk59lDfQdSeEh-fMadJ0ERTBtZaJZTIcBgmlkgnY0gmlwhKwSFgOKbXVsdGlhZGRyc4wACgSsEhYDBjQp3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKXs74jJOgYSuhVeHPceaFRACOoD3gsnteVPrk4PJ2PkYN0Y3CCNCiDdWRwgjQqhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13351/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.84.198/tcp/63117/p2p/16Uiu2HAm8R2xUm7hnc2E7adP5Lt9ECbytV3ov6gCtahLAPaWKJuV"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63116/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13351/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1211a74a-5111-4142-94bc-178ee503d406", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1211a74a-5111-4142-94bc-178ee503d406","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X PUT "http://127.0.0.1:13351/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1", "extraField": "extraValue"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:13351/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 5a16e173e249
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 67d52dfff920
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.