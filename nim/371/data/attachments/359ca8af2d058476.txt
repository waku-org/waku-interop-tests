[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_subscribe_with_invalid_request_id with id: 2024-09-25_04-16-43__e1213c97-0081-4ffb-a48f-85e9f8057734
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-25_04-16-43__e1213c97-0081-4ffb-a48f-85e9f8057734__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.74.97
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['1469', '1470', '1471', '1472', '1473']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 1469:1469 -p 1470:1470 -p 1471:1471 -p 1472:1472 -p 1473:1473 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=1471 --rest-port=1469 --tcp-port=1470 --discv5-udp-port=1472 --rest-address=0.0.0.0 --nat=extip:172.18.74.97 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9f4f7f104c78ecc6d2da24fea71b8c4aeacab8598c6baeda4a7a7c1cec94d98f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=1473 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.74.97 waku 037404a7f9466324e99870f9ca3f72ed5d357b79d792777f75bab56093ab1df6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 037404a7f946. Setting up logs at ./log/docker/node1_2024-09-25_04-16-43__e1213c97-0081-4ffb-a48f-85e9f8057734__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 1469
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1469/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1469/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.74.97/tcp/1470/p2p/16Uiu2HAmSvYZj7bU2pf1DMWASzKnDXh3CS8uF2D48j8BNv3nYqUA","/ip4/172.18.74.97/tcp/1471/ws/p2p/16Uiu2HAmSvYZj7bU2pf1DMWASzKnDXh3CS8uF2D48j8BNv3nYqUA"],"enrUri":"enr:-LO4QLxmQwWhAzBBh7JhE64DdJi1qrhLoR55Q_ltYyiT5MVZCd6YaOO8E-XpaSwCrtTRRAEcIdNQPQDASFVaDFgnd9oBgmlkgnY0gmlwhKwSSmGKbXVsdGlhZGRyc4wACgSsEkphBgW_3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPT_8ELVAg4UnElN0pdYxhSh7YFimkcWai0ZToTBfgWj4N0Y3CCBb6DdWRwggXAhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-25_04-16-43__e1213c97-0081-4ffb-a48f-85e9f8057734__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.231.28
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['35452', '35453', '35454', '35455', '35456']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 35452:35452 -p 35453:35453 -p 35454:35454 -p 35455:35455 -p 35456:35456 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=35454 --rest-port=35452 --tcp-port=35453 --discv5-udp-port=35455 --rest-address=0.0.0.0 --nat=extip:172.18.231.28 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=10e2eaf3f2787833df4a7e092bd9f9d2cfcad4cb864fd383fdba8d08673d63d1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=35456 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QLxmQwWhAzBBh7JhE64DdJi1qrhLoR55Q_ltYyiT5MVZCd6YaOO8E-XpaSwCrtTRRAEcIdNQPQDASFVaDFgnd9oBgmlkgnY0gmlwhKwSSmGKbXVsdGlhZGRyc4wACgSsEkphBgW_3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPT_8ELVAg4UnElN0pdYxhSh7YFimkcWai0ZToTBfgWj4N0Y3CCBb6DdWRwggXAhXdha3UyBQ --filternode=/ip4/172.18.74.97/tcp/1470/p2p/16Uiu2HAmSvYZj7bU2pf1DMWASzKnDXh3CS8uF2D48j8BNv3nYqUA
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.231.28 waku bd1c5c43122a695edd6400e69453755b70dbd971a8d05cc6e26558fd9a912b7b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID bd1c5c43122a. Setting up logs at ./log/docker/node2_2024-09-25_04-16-43__e1213c97-0081-4ffb-a48f-85e9f8057734__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 35452
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35452/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35452/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.231.28/tcp/35453/p2p/16Uiu2HAmE4rTEFezkHu8YQSvL3fFj2BRuZyAgkkhR9jXT7kFYKVc","/ip4/172.18.231.28/tcp/35454/ws/p2p/16Uiu2HAmE4rTEFezkHu8YQSvL3fFj2BRuZyAgkkhR9jXT7kFYKVc"],"enrUri":"enr:-LO4QBa6uin1bjWlEez7FP76lX_i3-7ivINTQBuG_EYi1o7LPI-HjCJcMi4uZaVFjsaQxyKvDl2DKDKWIJ2De7nSSRoBgmlkgnY0gmlwhKwS5xyKbXVsdGlhZGRyc4wACgSsEuccBop-3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMU-LJOFQ8fy86vicFuMqEWWOOgVxJwgvIk2HNIysZPG4N0Y3CCin2DdWRwgop_hXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35452/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.74.97/tcp/1470/p2p/16Uiu2HAmSvYZj7bU2pf1DMWASzKnDXh3CS8uF2D48j8BNv3nYqUA"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1469/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35452/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "158ab7e2-5d9e-428f-b2e2-4edca1da4054", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"158ab7e2-5d9e-428f-b2e2-4edca1da4054","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35452/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": 1, "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:35452/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 037404a7f946
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id bd1c5c43122a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.