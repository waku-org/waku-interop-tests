[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_version with id: 2024-09-25_04-19-39__31312ccb-74a8-4d68-b7e2-2cc74651b289
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-25_04-19-39__31312ccb-74a8-4d68-b7e2-2cc74651b289__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.128.115
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['44056', '44057', '44058', '44059', '44060']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 44056:44056 -p 44057:44057 -p 44058:44058 -p 44059:44059 -p 44060:44060 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44058 --rest-port=44056 --tcp-port=44057 --discv5-udp-port=44059 --rest-address=0.0.0.0 --nat=extip:172.18.128.115 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=334ca76d2f6f477aea2d843db3e13d6087ab630bfaecafbabdd3081b65eac3af --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44060 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.128.115 waku 173abd2bd063b164f8e91d3ec080c91a131987c37f458992987aa6e0ec167af1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 173abd2bd063. Setting up logs at ./log/docker/receiving_node1_2024-09-25_04-19-39__31312ccb-74a8-4d68-b7e2-2cc74651b289__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 44056
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44056/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44056/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.128.115/tcp/44057/p2p/16Uiu2HAmABB1eDSLMLC8F9dkY26vK5uyMRt8L1UoDykx4HDgr3uE","/ip4/172.18.128.115/tcp/44058/ws/p2p/16Uiu2HAmABB1eDSLMLC8F9dkY26vK5uyMRt8L1UoDykx4HDgr3uE"],"enrUri":"enr:-LO4QGhPh1iB7ZgfH3kx2yan_A10kOpzrKQvqAYmOR2zl5ygFygn7e0OLpswCkD7baoh_Jr4EDfaX4udnhnZHL2g77EBgmlkgnY0gmlwhKwSgHOKbXVsdGlhZGRyc4wACgSsEoBzBqwa3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLbKGsPs40jMmTBnE1J_9X929Rho-uGbdQ2vb-91j9hNYN0Y3CCrBmDdWRwgqwbhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-25_04-19-39__31312ccb-74a8-4d68-b7e2-2cc74651b289__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.207.188
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['47387', '47388', '47389', '47390', '47391']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 47387:47387 -p 47388:47388 -p 47389:47389 -p 47390:47390 -p 47391:47391 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=47389 --rest-port=47387 --tcp-port=47388 --discv5-udp-port=47390 --rest-address=0.0.0.0 --nat=extip:172.18.207.188 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e5f4f6e4cc8e4fbd7fc49e5eccffd4c77c6e8d57a890458d8d4cbf37f7fd4ac3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=47391 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.207.188 waku 9e9fcd060f25962fd433de037e288e2f4e10e9ae5a490c15f5acfdea10123d62
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 9e9fcd060f25. Setting up logs at ./log/docker/receiving_node2_2024-09-25_04-19-39__31312ccb-74a8-4d68-b7e2-2cc74651b289__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 47387
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47387/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47387/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.207.188/tcp/47388/p2p/16Uiu2HAmGH2x8P3iuk2U3ZvQnpbvVdqHueBeHM6NSdQ3mP76fcjp","/ip4/172.18.207.188/tcp/47389/ws/p2p/16Uiu2HAmGH2x8P3iuk2U3ZvQnpbvVdqHueBeHM6NSdQ3mP76fcjp"],"enrUri":"enr:-LO4QBq9QAq-o_x_-Fm277WiaLxb-yMOsLj71os2pOXPwXNYDqqFs_72bHUyMUEGoz1egjHdBitwfc96037-FWqEgGABgmlkgnY0gmlwhKwSz7yKbXVsdGlhZGRyc4wACgSsEs-8Brkd3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM1zukVL5HBxnCEHkC2ezc_iDXGbpb39aHXUQsbubrSH4N0Y3CCuRyDdWRwgrkehXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47387/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.128.115/tcp/44057/p2p/16Uiu2HAmABB1eDSLMLC8F9dkY26vK5uyMRt8L1UoDykx4HDgr3uE"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-25_04-19-39__31312ccb-74a8-4d68-b7e2-2cc74651b289__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.181.133
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['7278', '7279', '7280', '7281', '7282']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 7278:7278 -p 7279:7279 -p 7280:7280 -p 7281:7281 -p 7282:7282 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7280 --rest-port=7278 --tcp-port=7279 --discv5-udp-port=7281 --rest-address=0.0.0.0 --nat=extip:172.18.181.133 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e4ee743af773888fb87fc3afcdd75a2e390cab457201da79098aa2d99efadcc7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7282 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QGhPh1iB7ZgfH3kx2yan_A10kOpzrKQvqAYmOR2zl5ygFygn7e0OLpswCkD7baoh_Jr4EDfaX4udnhnZHL2g77EBgmlkgnY0gmlwhKwSgHOKbXVsdGlhZGRyc4wACgSsEoBzBqwa3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLbKGsPs40jMmTBnE1J_9X929Rho-uGbdQ2vb-91j9hNYN0Y3CCrBmDdWRwgqwbhXdha3UyCQ --lightpushnode=/ip4/172.18.128.115/tcp/44057/p2p/16Uiu2HAmABB1eDSLMLC8F9dkY26vK5uyMRt8L1UoDykx4HDgr3uE --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.181.133 waku ffd0007cd03c1feb7cbf85c3bc0f9ff0ba2ba39b963985c9912d6d3514745635
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID ffd0007cd03c. Setting up logs at ./log/docker/lightpush_node1_2024-09-25_04-19-39__31312ccb-74a8-4d68-b7e2-2cc74651b289__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 7278
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7278/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7278/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.181.133/tcp/7279/p2p/16Uiu2HAmBUfHFee29SFmT1srDbDDZfhQ1t58U2dS6VmTpEtr5Dgx","/ip4/172.18.181.133/tcp/7280/ws/p2p/16Uiu2HAmBUfHFee29SFmT1srDbDDZfhQ1t58U2dS6VmTpEtr5Dgx"],"enrUri":"enr:-LO4QJOlMIXHzZ6aRKIf0QIBDiQ1A_MuR03Lb7ypdyIoTCDWFM73uzFds1fL6OQtRclxE-6Tr6TEyUb8SB0CxfdlLs4BgmlkgnY0gmlwhKwStYWKbXVsdGlhZGRyc4wACgSsErWFBhxw3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLufvFjbk5KD8gLA0IVb-XZP1FvsMoXPjy9OTmxScd3DYN0Y3CCHG-DdWRwghxxhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7278/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.128.115/tcp/44057/p2p/16Uiu2HAmABB1eDSLMLC8F9dkY26vK5uyMRt8L1UoDykx4HDgr3uE"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7278/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.207.188/tcp/47388/p2p/16Uiu2HAmGH2x8P3iuk2U3ZvQnpbvVdqHueBeHM6NSdQ3mP76fcjp"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44056/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47387/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7278/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1727237984312470528, "version": 2.1}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:7278/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 173abd2bd063
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 9e9fcd060f25
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id ffd0007cd03c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.