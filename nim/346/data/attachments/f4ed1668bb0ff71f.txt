[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_update_subscription_with_no_request_id with id: 2024-09-06_04-17-59__66553515-e5d2-4db9-818e-92210454b0a1
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-06_04-17-59__66553515-e5d2-4db9-818e-92210454b0a1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.110.162
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['62206', '62207', '62208', '62209', '62210']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 62206:62206 -p 62207:62207 -p 62208:62208 -p 62209:62209 -p 62210:62210 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62208 --rest-port=62206 --tcp-port=62207 --discv5-udp-port=62209 --rest-address=0.0.0.0 --nat=extip:172.18.110.162 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2a1e3af9819bcc6e6b266fddf7e793a1dfbabc15c386a9304af2b0fdfcce2cc3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62210 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.110.162 waku dd0c199b3d551159ba1f6a09dc1c7be576a7e1b74d6af288a5bcc12f11245c43
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID dd0c199b3d55. Setting up logs at ./log/docker/node1_2024-09-06_04-17-59__66553515-e5d2-4db9-818e-92210454b0a1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 62206
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62206/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62206/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.110.162/tcp/62207/p2p/16Uiu2HAm9K3MbCsUpMKNaiC75jGR7VCNCTXUDWMYDHWTSRYQCRMe","/ip4/172.18.110.162/tcp/62208/ws/p2p/16Uiu2HAm9K3MbCsUpMKNaiC75jGR7VCNCTXUDWMYDHWTSRYQCRMe"],"enrUri":"enr:-LO4QBSC_rGcdZ8ZWyoz5-KgkhSuOrq3F09KlFakdDkzpcoxOURP3hj1ClJh8N8rX1IYcJv7mCkkwr7LsM4Xjw2lw28BgmlkgnY0gmlwhKwSbqKKbXVsdGlhZGRyc4wACgSsEm6iBvMA3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLOULiUPGEQMKS8xX8ECy9XI8fS69YKfPl8e2ua_mVDFYN0Y3CC8v-DdWRwgvMBhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-06_04-17-59__66553515-e5d2-4db9-818e-92210454b0a1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.110.240
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['57120', '57121', '57122', '57123', '57124']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 57120:57120 -p 57121:57121 -p 57122:57122 -p 57123:57123 -p 57124:57124 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57122 --rest-port=57120 --tcp-port=57121 --discv5-udp-port=57123 --rest-address=0.0.0.0 --nat=extip:172.18.110.240 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ac0e8f4fbf88b514bf95ad8cdac8bf3ee9f4fa57cef0bde3dc5ebeeade88738c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57124 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QBSC_rGcdZ8ZWyoz5-KgkhSuOrq3F09KlFakdDkzpcoxOURP3hj1ClJh8N8rX1IYcJv7mCkkwr7LsM4Xjw2lw28BgmlkgnY0gmlwhKwSbqKKbXVsdGlhZGRyc4wACgSsEm6iBvMA3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLOULiUPGEQMKS8xX8ECy9XI8fS69YKfPl8e2ua_mVDFYN0Y3CC8v-DdWRwgvMBhXdha3UyBQ --filternode=/ip4/172.18.110.162/tcp/62207/p2p/16Uiu2HAm9K3MbCsUpMKNaiC75jGR7VCNCTXUDWMYDHWTSRYQCRMe
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.110.240 waku fc749fc97f74210b2b7dd2c002222d044c3b50808c2e4713f9e850d03dbe3548
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID fc749fc97f74. Setting up logs at ./log/docker/node2_2024-09-06_04-17-59__66553515-e5d2-4db9-818e-92210454b0a1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 57120
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57120/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57120/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.110.240/tcp/57121/p2p/16Uiu2HAmHGz11e2ugZaUEM7jsNkXfMYY7piXsGuyCr9SrsNymA7u","/ip4/172.18.110.240/tcp/57122/ws/p2p/16Uiu2HAmHGz11e2ugZaUEM7jsNkXfMYY7piXsGuyCr9SrsNymA7u"],"enrUri":"enr:-LO4QFl11QML9K6AmqtfeRM0BIkhvTzbNCAutJCMPbD34ZZYDrvIq50ua3el4sHXJdBL_UnxIq8d5ldrHv4S_g-yVNgBgmlkgnY0gmlwhKwSbvCKbXVsdGlhZGRyc4wACgSsEm7wBt8i3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNEp0LykIf46LYnj0c1fX6soDanwb7QYnxBuRqBWNY4VIN0Y3CC3yGDdWRwgt8jhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57120/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.110.162/tcp/62207/p2p/16Uiu2HAm9K3MbCsUpMKNaiC75jGR7VCNCTXUDWMYDHWTSRYQCRMe"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62206/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57120/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "87e4cc9a-0803-47f2-a38a-a2f182c0c853", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"87e4cc9a-0803-47f2-a38a-a2f182c0c853","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X PUT "http://127.0.0.1:57120/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:57120/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id dd0c199b3d55
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id fc749fc97f74
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.