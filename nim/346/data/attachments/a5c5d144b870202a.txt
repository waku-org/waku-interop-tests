[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_version with id: 2024-09-06_04-21-09__7a8c0ef7-01d5-4cc3-8ba4-8f00cbd5236c
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-06_04-21-09__7a8c0ef7-01d5-4cc3-8ba4-8f00cbd5236c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.245.110
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['37596', '37597', '37598', '37599', '37600']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 37596:37596 -p 37597:37597 -p 37598:37598 -p 37599:37599 -p 37600:37600 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37598 --rest-port=37596 --tcp-port=37597 --discv5-udp-port=37599 --rest-address=0.0.0.0 --nat=extip:172.18.245.110 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=df75f9a3fcf82c5d62ad191aeac2bfb0d65bbbbbcecba23c26c5f5dbef5baeb6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37600 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.245.110 waku b3d72e93a427f09945d95f1af68bb739109eaa73ab887ef950639b2f4648a4e6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID b3d72e93a427. Setting up logs at ./log/docker/receiving_node1_2024-09-06_04-21-09__7a8c0ef7-01d5-4cc3-8ba4-8f00cbd5236c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 37596
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37596/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37596/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.245.110/tcp/37597/p2p/16Uiu2HAmHd6VZNWgyshvVxLeTqN1JDfeitmqq29vmwTAs3mZdFTD","/ip4/172.18.245.110/tcp/37598/ws/p2p/16Uiu2HAmHd6VZNWgyshvVxLeTqN1JDfeitmqq29vmwTAs3mZdFTD"],"enrUri":"enr:-LO4QFFPGZO22NaRhuPGaC4WqeDnLzujp3M16g9WBmLzt5TRCRcmuUX3Qbyp0PGRuaT4DHzO3fYs_L9yIL0DNLHRYBcBgmlkgnY0gmlwhKwS9W6KbXVsdGlhZGRyc4wACgSsEvVuBpLe3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNJzjfrqP4cNsdkaZZpPQ2m_Rixxo9CHlpHKWChL6FziIN0Y3CCkt2DdWRwgpLfhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-06_04-21-09__7a8c0ef7-01d5-4cc3-8ba4-8f00cbd5236c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.95.161
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['28386', '28387', '28388', '28389', '28390']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 28386:28386 -p 28387:28387 -p 28388:28388 -p 28389:28389 -p 28390:28390 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28388 --rest-port=28386 --tcp-port=28387 --discv5-udp-port=28389 --rest-address=0.0.0.0 --nat=extip:172.18.95.161 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=25fcc2d2becc5db92c2c25a6f198444aaafee78c7fd9f4bedfbfc7cdd00ae364 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28390 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.95.161 waku 4042cd5062c2b2d6dd4a7aa1540193f7c6bd2de9f01ea6b1a53b347f08a58c7a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 4042cd5062c2. Setting up logs at ./log/docker/receiving_node2_2024-09-06_04-21-09__7a8c0ef7-01d5-4cc3-8ba4-8f00cbd5236c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 28386
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28386/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28386/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.95.161/tcp/28387/p2p/16Uiu2HAmTsgJxhkEN5TBcM5S8ZaWHDuLYjmi6fnpnodZ3RTQHx3k","/ip4/172.18.95.161/tcp/28388/ws/p2p/16Uiu2HAmTsgJxhkEN5TBcM5S8ZaWHDuLYjmi6fnpnodZ3RTQHx3k"],"enrUri":"enr:-LO4QGR-BD-qBrhsmngVUN9ijeF3Ehhk_MGalD94_D93yuVLEqYKbWBSMOX7TJMJtMd0kd5EoK8iPX7GqN0bilFSEKABgmlkgnY0gmlwhKwSX6GKbXVsdGlhZGRyc4wACgSsEl-hBm7k3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPiH3TTbk_6gPJSZIgLWMDH3cNoFgL4MB7MJ3Z2-0k3i4N0Y3CCbuODdWRwgm7lhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28386/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.245.110/tcp/37597/p2p/16Uiu2HAmHd6VZNWgyshvVxLeTqN1JDfeitmqq29vmwTAs3mZdFTD"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-06_04-21-09__7a8c0ef7-01d5-4cc3-8ba4-8f00cbd5236c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.235.126
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['62471', '62472', '62473', '62474', '62475']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 62471:62471 -p 62472:62472 -p 62473:62473 -p 62474:62474 -p 62475:62475 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62473 --rest-port=62471 --tcp-port=62472 --discv5-udp-port=62474 --rest-address=0.0.0.0 --nat=extip:172.18.235.126 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=792424eb2ce1aaceed573ff5fd9fb27be0f8d053c82bd3fc2a3d5f1ba9e007ae --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62475 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QFFPGZO22NaRhuPGaC4WqeDnLzujp3M16g9WBmLzt5TRCRcmuUX3Qbyp0PGRuaT4DHzO3fYs_L9yIL0DNLHRYBcBgmlkgnY0gmlwhKwS9W6KbXVsdGlhZGRyc4wACgSsEvVuBpLe3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNJzjfrqP4cNsdkaZZpPQ2m_Rixxo9CHlpHKWChL6FziIN0Y3CCkt2DdWRwgpLfhXdha3UyCQ --lightpushnode=/ip4/172.18.245.110/tcp/37597/p2p/16Uiu2HAmHd6VZNWgyshvVxLeTqN1JDfeitmqq29vmwTAs3mZdFTD --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.235.126 waku 5d5b5c31031073a43cfbba67e3159b36d6dc1eb324b55fc903f5f8cd24e229ce
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 5d5b5c310310. Setting up logs at ./log/docker/lightpush_node1_2024-09-06_04-21-09__7a8c0ef7-01d5-4cc3-8ba4-8f00cbd5236c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 62471
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62471/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62471/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.235.126/tcp/62472/p2p/16Uiu2HAm3o4XeLKKw1WNiJhSLECnsxhVgzPJ2QAbkf4HmFSvRVtY","/ip4/172.18.235.126/tcp/62473/ws/p2p/16Uiu2HAm3o4XeLKKw1WNiJhSLECnsxhVgzPJ2QAbkf4HmFSvRVtY"],"enrUri":"enr:-LO4QJOI7gFLcMpYSb6_Kir-GG6K5YgDSGkI-cjIEUsE2S7udcH8hfHGMQ8M0BVEF9bKaYthpMKvJ8EdV-gg8ipT_skBgmlkgnY0gmlwhKwS636KbXVsdGlhZGRyc4wACgSsEut-BvQJ3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJ8WDBV-ewk6fX2TnWNQVOugVaL30FN-yIQLc9QdF_zzYN0Y3CC9AiDdWRwgvQKhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62471/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.245.110/tcp/37597/p2p/16Uiu2HAmHd6VZNWgyshvVxLeTqN1JDfeitmqq29vmwTAs3mZdFTD"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62471/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.95.161/tcp/28387/p2p/16Uiu2HAmTsgJxhkEN5TBcM5S8ZaWHDuLYjmi6fnpnodZ3RTQHx3k"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37596/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28386/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62471/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1725596474854936064, "version": 2.1}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:62471/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id b3d72e93a427
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 4042cd5062c2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 5d5b5c310310
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.