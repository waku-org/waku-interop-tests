[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_messages_with_timestamps_close_to_now with id: 2024-05-22_16-10-19__8519d411-bb78-4097-b6fc-9d77b361aaf8
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-22_16-10-19__8519d411-bb78-4097-b6fc-9d77b361aaf8__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.21.23
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['52722', '52723', '52724', '52725', '52726']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:357 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 52722:52722 -p 52723:52723 -p 52724:52724 -p 52725:52725 -p 52726:52726 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=52724 --rest-port=52722 --tcp-port=52723 --discv5-udp-port=52725 --rest-address=0.0.0.0 --nat=extip:172.18.21.23 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=52726 --metrics-logging=true --store=true --relay=true --nodekey=30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.21.23 waku b9f4c20ed685040fac3bf359413165addbde8e7588f5a07e9b3d51dfdf85106c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID b9f4c20ed685. Setting up logs at ./log/docker/publishing_node1_2024-05-22_16-10-19__8519d411-bb78-4097-b6fc-9d77b361aaf8__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 52722
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52722/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:209 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52722/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.21.23/tcp/52723/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip","/ip4/172.18.21.23/tcp/52724/ws/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"],"enrUri":"enr:-LO4QBFzjbOSCr9bUFCLIagdUVsrCnu_H-m5c5mDhAbue7kMM9qlnLSRMzwTZjU9C7xnpxxdC3r4LQlrwBw0VDwf3-QBgmlkgnY0gmlwhKwSFReKbXVsdGlhZGRyc4wACgSsEhUXBs303QOCcnOFAAABAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCzfODdWRwgs31hXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-22_16-10-19__8519d411-bb78-4097-b6fc-9d77b361aaf8__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.204.144
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['52052', '52053', '52054', '52055', '52056']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:357 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 52052:52052 -p 52053:52053 -p 52054:52054 -p 52055:52055 -p 52056:52056 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=52054 --rest-port=52052 --tcp-port=52053 --discv5-udp-port=52055 --rest-address=0.0.0.0 --nat=extip:172.18.204.144 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=52056 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QBFzjbOSCr9bUFCLIagdUVsrCnu_H-m5c5mDhAbue7kMM9qlnLSRMzwTZjU9C7xnpxxdC3r4LQlrwBw0VDwf3-QBgmlkgnY0gmlwhKwSFReKbXVsdGlhZGRyc4wACgSsEhUXBs303QOCcnOFAAABAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCzfODdWRwgs31hXdha3UyAw --storenode=/ip4/172.18.21.23/tcp/52723/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.204.144 waku b129f594a4877b6f8cd6659c20627066d3fa448a846a773fbc0e3716dcaa8c12
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID b129f594a487. Setting up logs at ./log/docker/store_node1_2024-05-22_16-10-19__8519d411-bb78-4097-b6fc-9d77b361aaf8__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 52052
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52052/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:209 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52052/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.204.144/tcp/52053/p2p/16Uiu2HAmEAoc9F66Robvp1HFx8rdU7emQaSP6rgwy4jsBf2ZY83E","/ip4/172.18.204.144/tcp/52054/ws/p2p/16Uiu2HAmEAoc9F66Robvp1HFx8rdU7emQaSP6rgwy4jsBf2ZY83E"],"enrUri":"enr:-LO4QMT0vvKR-cec3jGNu6e3bmemXynGnvCFFM0gsR6d_ZGvVknpBImhBuW0g8Qk7aIjetd6nK0sojUttXjvOZU1Y2gBgmlkgnY0gmlwhKwSzJCKbXVsdGlhZGRyc4wACgSsEsyQBstW3QOCcnOFAAABAACJc2VjcDI1NmsxoQMWfvaIVAPxOrYWQyhij4NYXA0-w0RKKA27U8KBHpR3dYN0Y3CCy1WDdWRwgstXhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52052/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.21.23/tcp/52723/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52722/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52052/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.store.test_time_filter:test_time_filter.py:29 Running test with payload 3 sec Past
[35mDEBUG   [0m src.steps.store:store.py:126 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52722/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.01 seconds
[35mDEBUG   [0m src.steps.store:store.py:198 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52722/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":{"data":"nnmKhkk3S9Ni4ePINrNBsz9zdDKP3h6MujvOgtACJ5Y="}}]}'
[1m[31mERROR   [0m tests.store.test_time_filter:test_time_filter.py:35 Payload 3 sec Past failed: Message hash returned by store doesn't match the computed message hash nnmKhkk3S9Ni4ePINrNBsz9zdDKP3h6MujvOgtACJ5Y=
[35mDEBUG   [0m tests.store.test_time_filter:test_time_filter.py:29 Running test with payload 1 sec Past
[35mDEBUG   [0m src.steps.store:store.py:126 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52722/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.01 seconds
[35mDEBUG   [0m src.steps.store:store.py:198 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52722/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":{"data":"nnmKhkk3S9Ni4ePINrNBsz9zdDKP3h6MujvOgtACJ5Y="}},{"messageHash":{"data":"JY6raDUPGs2t8eU3P+BMrWArkuwAftshmDNg+yBDMPk="}}]}'
[1m[31mERROR   [0m tests.store.test_time_filter:test_time_filter.py:35 Payload 1 sec Past failed: Message hash returned by store doesn't match the computed message hash JY6raDUPGs2t8eU3P+BMrWArkuwAftshmDNg+yBDMPk=
[35mDEBUG   [0m tests.store.test_time_filter:test_time_filter.py:29 Running test with payload 0.1 sec Past
[35mDEBUG   [0m src.steps.store:store.py:126 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52722/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.01 seconds
[35mDEBUG   [0m src.steps.store:store.py:198 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52722/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":{"data":"nnmKhkk3S9Ni4ePINrNBsz9zdDKP3h6MujvOgtACJ5Y="}},{"messageHash":{"data":"JY6raDUPGs2t8eU3P+BMrWArkuwAftshmDNg+yBDMPk="}},{"messageHash":{"data":"6DcYT6qvNqsJARAyOAJjW1KCbE/m25LPqNjHpgynKSk="}}]}'
[1m[31mERROR   [0m tests.store.test_time_filter:test_time_filter.py:35 Payload 0.1 sec Past failed: Message hash returned by store doesn't match the computed message hash 6DcYT6qvNqsJARAyOAJjW1KCbE/m25LPqNjHpgynKSk=
[35mDEBUG   [0m tests.store.test_time_filter:test_time_filter.py:29 Running test with payload 0.1 sec Future
[35mDEBUG   [0m src.steps.store:store.py:126 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52722/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.01 seconds
[35mDEBUG   [0m src.steps.store:store.py:198 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52722/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":{"data":"nnmKhkk3S9Ni4ePINrNBsz9zdDKP3h6MujvOgtACJ5Y="}},{"messageHash":{"data":"JY6raDUPGs2t8eU3P+BMrWArkuwAftshmDNg+yBDMPk="}},{"messageHash":{"data":"6DcYT6qvNqsJARAyOAJjW1KCbE/m25LPqNjHpgynKSk="}},{"messageHash":{"data":"GU1lKiuGsJP2s4IZBA8lvr4c/fzddTfPe6ByEZApQ8k="}}]}'
[1m[31mERROR   [0m tests.store.test_time_filter:test_time_filter.py:35 Payload 0.1 sec Future failed: Message hash returned by store doesn't match the computed message hash GU1lKiuGsJP2s4IZBA8lvr4c/fzddTfPe6ByEZApQ8k=
[35mDEBUG   [0m tests.store.test_time_filter:test_time_filter.py:29 Running test with payload 2 sec Future
[35mDEBUG   [0m src.steps.store:store.py:126 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52722/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.01 seconds
[35mDEBUG   [0m src.steps.store:store.py:198 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52722/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":{"data":"nnmKhkk3S9Ni4ePINrNBsz9zdDKP3h6MujvOgtACJ5Y="}},{"messageHash":{"data":"JY6raDUPGs2t8eU3P+BMrWArkuwAftshmDNg+yBDMPk="}},{"messageHash":{"data":"6DcYT6qvNqsJARAyOAJjW1KCbE/m25LPqNjHpgynKSk="}},{"messageHash":{"data":"GU1lKiuGsJP2s4IZBA8lvr4c/fzddTfPe6ByEZApQ8k="}},{"messageHash":{"data":"NtNHby2xdX4ijMZx7gMFOefCiqi7s2uk1MIeGM4y45c="}}]}'
[1m[31mERROR   [0m tests.store.test_time_filter:test_time_filter.py:35 Payload 2 sec Future failed: Message hash returned by store doesn't match the computed message hash NtNHby2xdX4ijMZx7gMFOefCiqi7s2uk1MIeGM4y45c=
[35mDEBUG   [0m tests.store.test_time_filter:test_time_filter.py:29 Running test with payload 10 sec Future
[35mDEBUG   [0m src.steps.store:store.py:126 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52722/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.01 seconds
[35mDEBUG   [0m src.steps.store:store.py:198 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52722/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":{"data":"nnmKhkk3S9Ni4ePINrNBsz9zdDKP3h6MujvOgtACJ5Y="}},{"messageHash":{"data":"JY6raDUPGs2t8eU3P+BMrWArkuwAftshmDNg+yBDMPk="}},{"messageHash":{"data":"6DcYT6qvNqsJARAyOAJjW1KCbE/m25LPqNjHpgynKSk="}},{"messageHash":{"data":"GU1lKiuGsJP2s4IZBA8lvr4c/fzddTfPe6ByEZApQ8k="}},{"messageHash":{"data":"NtNHby2xdX4ijMZx7gMFOefCiqi7s2uk1MIeGM4y45c="}},{"messageHash":{"data":"3JCvd4eHPnRMX93yX1sGBeS8Yyvbv9Y7zL2JV+K/YT8="}}]}'
[1m[31mERROR   [0m tests.store.test_time_filter:test_time_filter.py:35 Payload 10 sec Future failed: Message hash returned by store doesn't match the computed message hash 3JCvd4eHPnRMX93yX1sGBeS8Yyvbv9Y7zL2JV+K/YT8=
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id b9f4c20ed685
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id b129f594a487
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-22_16-10-19__8519d411-bb78-4097-b6fc-9d77b361aaf8__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-22_16-10-19__8519d411-bb78-4097-b6fc-9d77b361aaf8__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_messages_with_timestamps_close_to_now with id: 2024-05-22_16-10-36__4a6541e8-64cd-4431-a2f3-7c99e8abbe50
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-22_16-10-36__4a6541e8-64cd-4431-a2f3-7c99e8abbe50__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.143.248
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['40475', '40476', '40477', '40478', '40479']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:357 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 40475:40475 -p 40476:40476 -p 40477:40477 -p 40478:40478 -p 40479:40479 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40477 --rest-port=40475 --tcp-port=40476 --discv5-udp-port=40478 --rest-address=0.0.0.0 --nat=extip:172.18.143.248 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40479 --metrics-logging=true --store=true --relay=true --nodekey=30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.143.248 waku 97a709a7f243b2996d7c2f4f09ec73f76ecd97b79685af9b5e5edace6dea0ae6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 97a709a7f243. Setting up logs at ./log/docker/publishing_node1_2024-05-22_16-10-36__4a6541e8-64cd-4431-a2f3-7c99e8abbe50__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 40475
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40475/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:209 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40475/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.143.248/tcp/40476/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip","/ip4/172.18.143.248/tcp/40477/ws/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"],"enrUri":"enr:-LO4QAkPsCyKNKgQCSekldDA-mnLezarZKFBiq5DpUn0x0tIVbA4JPbm8XeqCbwi46g1-gDB0EnEtUr4pc0ZAYAQVQABgmlkgnY0gmlwhKwSj_iKbXVsdGlhZGRyc4wACgSsEo_4Bp4d3QOCcnOFAAABAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCnhyDdWRwgp4ehXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-22_16-10-36__4a6541e8-64cd-4431-a2f3-7c99e8abbe50__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.202.46
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['38352', '38353', '38354', '38355', '38356']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:357 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 38352:38352 -p 38353:38353 -p 38354:38354 -p 38355:38355 -p 38356:38356 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=38354 --rest-port=38352 --tcp-port=38353 --discv5-udp-port=38355 --rest-address=0.0.0.0 --nat=extip:172.18.202.46 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=38356 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QAkPsCyKNKgQCSekldDA-mnLezarZKFBiq5DpUn0x0tIVbA4JPbm8XeqCbwi46g1-gDB0EnEtUr4pc0ZAYAQVQABgmlkgnY0gmlwhKwSj_iKbXVsdGlhZGRyc4wACgSsEo_4Bp4d3QOCcnOFAAABAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCnhyDdWRwgp4ehXdha3UyAw --storenode=/ip4/172.18.143.248/tcp/40476/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.202.46 waku 3c2d27043af1ef8f25d5364f951f8752bc21ca6c89bf7fb1c8fb3b37e1e97343
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 3c2d27043af1. Setting up logs at ./log/docker/store_node1_2024-05-22_16-10-36__4a6541e8-64cd-4431-a2f3-7c99e8abbe50__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 38352
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38352/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:209 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38352/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.202.46/tcp/38353/p2p/16Uiu2HAm1BL8cPspkMrnN8sA2HuHf6FthhSwG9zDtZPMFtjfuEvv","/ip4/172.18.202.46/tcp/38354/ws/p2p/16Uiu2HAm1BL8cPspkMrnN8sA2HuHf6FthhSwG9zDtZPMFtjfuEvv"],"enrUri":"enr:-LO4QMNAKrXjQ6h2u0ZPlFnYISlRPg5s57EA93QlKBHY80IqOzUZKEn0dR_yu2s-5bZSUsnr7m6I41IkGWjteFUYop4BgmlkgnY0gmlwhKwSyi6KbXVsdGlhZGRyc4wACgSsEsouBpXS3QOCcnOFAAABAACJc2VjcDI1NmsxoQJVeYxNZ3i_kKwnJG1M0sgnJY-4Q7bvQWqwwrJQpyhdi4N0Y3CCldGDdWRwgpXThXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38352/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.143.248/tcp/40476/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40475/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38352/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.store.test_time_filter:test_time_filter.py:29 Running test with payload 3 sec Past
[35mDEBUG   [0m src.steps.store:store.py:126 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40475/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.01 seconds
[35mDEBUG   [0m src.steps.store:store.py:198 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40475/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":{"data":"lNX7x2l0luuHYc377300O60hubb21utuNdXiVVCcP3A="}}]}'
[1m[31mERROR   [0m tests.store.test_time_filter:test_time_filter.py:35 Payload 3 sec Past failed: Message hash returned by store doesn't match the computed message hash lNX7x2l0luuHYc377300O60hubb21utuNdXiVVCcP3A=
[35mDEBUG   [0m tests.store.test_time_filter:test_time_filter.py:29 Running test with payload 1 sec Past
[35mDEBUG   [0m src.steps.store:store.py:126 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40475/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.01 seconds
[35mDEBUG   [0m src.steps.store:store.py:198 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40475/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":{"data":"lNX7x2l0luuHYc377300O60hubb21utuNdXiVVCcP3A="}},{"messageHash":{"data":"qAwEwKuG4awXkqUNx6wKMW1H8jcnGB/4HPK1l4AlOag="}}]}'
[1m[31mERROR   [0m tests.store.test_time_filter:test_time_filter.py:35 Payload 1 sec Past failed: Message hash returned by store doesn't match the computed message hash qAwEwKuG4awXkqUNx6wKMW1H8jcnGB/4HPK1l4AlOag=
[35mDEBUG   [0m tests.store.test_time_filter:test_time_filter.py:29 Running test with payload 0.1 sec Past
[35mDEBUG   [0m src.steps.store:store.py:126 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40475/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.01 seconds
[35mDEBUG   [0m src.steps.store:store.py:198 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40475/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":{"data":"lNX7x2l0luuHYc377300O60hubb21utuNdXiVVCcP3A="}},{"messageHash":{"data":"qAwEwKuG4awXkqUNx6wKMW1H8jcnGB/4HPK1l4AlOag="}},{"messageHash":{"data":"Uw9x/n+PIp6/BvoK8qftLnD3A/ompsGNuoLAYNzwANg="}}]}'
[1m[31mERROR   [0m tests.store.test_time_filter:test_time_filter.py:35 Payload 0.1 sec Past failed: Message hash returned by store doesn't match the computed message hash Uw9x/n+PIp6/BvoK8qftLnD3A/ompsGNuoLAYNzwANg=
[35mDEBUG   [0m tests.store.test_time_filter:test_time_filter.py:29 Running test with payload 0.1 sec Future
[35mDEBUG   [0m src.steps.store:store.py:126 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40475/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.01 seconds
[35mDEBUG   [0m src.steps.store:store.py:198 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40475/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":{"data":"lNX7x2l0luuHYc377300O60hubb21utuNdXiVVCcP3A="}},{"messageHash":{"data":"qAwEwKuG4awXkqUNx6wKMW1H8jcnGB/4HPK1l4AlOag="}},{"messageHash":{"data":"Uw9x/n+PIp6/BvoK8qftLnD3A/ompsGNuoLAYNzwANg="}},{"messageHash":{"data":"EVIp5s2KM2dyTSFq8gG2H0USyfFY7Wnyu2U17P2pFSw="}}]}'
[1m[31mERROR   [0m tests.store.test_time_filter:test_time_filter.py:35 Payload 0.1 sec Future failed: Message hash returned by store doesn't match the computed message hash EVIp5s2KM2dyTSFq8gG2H0USyfFY7Wnyu2U17P2pFSw=
[35mDEBUG   [0m tests.store.test_time_filter:test_time_filter.py:29 Running test with payload 2 sec Future
[35mDEBUG   [0m src.steps.store:store.py:126 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40475/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.01 seconds
[35mDEBUG   [0m src.steps.store:store.py:198 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40475/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":{"data":"lNX7x2l0luuHYc377300O60hubb21utuNdXiVVCcP3A="}},{"messageHash":{"data":"qAwEwKuG4awXkqUNx6wKMW1H8jcnGB/4HPK1l4AlOag="}},{"messageHash":{"data":"Uw9x/n+PIp6/BvoK8qftLnD3A/ompsGNuoLAYNzwANg="}},{"messageHash":{"data":"EVIp5s2KM2dyTSFq8gG2H0USyfFY7Wnyu2U17P2pFSw="}},{"messageHash":{"data":"zr1MypJ0QrUR8R3/CwytLg8trJDmqcsZ1hAZ9v3pggo="}}]}'
[1m[31mERROR   [0m tests.store.test_time_filter:test_time_filter.py:35 Payload 2 sec Future failed: Message hash returned by store doesn't match the computed message hash zr1MypJ0QrUR8R3/CwytLg8trJDmqcsZ1hAZ9v3pggo=
[35mDEBUG   [0m tests.store.test_time_filter:test_time_filter.py:29 Running test with payload 10 sec Future
[35mDEBUG   [0m src.steps.store:store.py:126 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40475/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.01 seconds
[35mDEBUG   [0m src.steps.store:store.py:198 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40475/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":{"data":"lNX7x2l0luuHYc377300O60hubb21utuNdXiVVCcP3A="}},{"messageHash":{"data":"qAwEwKuG4awXkqUNx6wKMW1H8jcnGB/4HPK1l4AlOag="}},{"messageHash":{"data":"Uw9x/n+PIp6/BvoK8qftLnD3A/ompsGNuoLAYNzwANg="}},{"messageHash":{"data":"EVIp5s2KM2dyTSFq8gG2H0USyfFY7Wnyu2U17P2pFSw="}},{"messageHash":{"data":"zr1MypJ0QrUR8R3/CwytLg8trJDmqcsZ1hAZ9v3pggo="}},{"messageHash":{"data":"d2k3IaJ/raAeZzXVxG6AgPNIPOxcEdw1fxGbATiFcho="}}]}'
[1m[31mERROR   [0m tests.store.test_time_filter:test_time_filter.py:35 Payload 10 sec Future failed: Message hash returned by store doesn't match the computed message hash d2k3IaJ/raAeZzXVxG6AgPNIPOxcEdw1fxGbATiFcho=
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 97a709a7f243
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 3c2d27043af1
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-22_16-10-36__4a6541e8-64cd-4431-a2f3-7c99e8abbe50__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-22_16-10-36__4a6541e8-64cd-4431-a2f3-7c99e8abbe50__harbor.status.im_wakuorg_nwaku:latest.log