{"uid":"bc2662749547bd1a","name":"test_passing_cursor_not_returned_in_paginationCursor","fullName":"tests.store.test_cursor.TestCursor#test_passing_cursor_not_returned_in_paginationCursor","historyId":"7ca1e68609a45e5cf56bbdfe41ff8a2e","time":{"start":1716393870521,"stop":1716393870682,"duration":161},"status":"broken","statusMessage":"TypeError: quote_from_bytes() expected bytes","statusTrace":"tests/store/test_cursor.py:55: in test_passing_cursor_not_returned_in_paginationCursor\n    store_response = node.get_store_messages(pubsub_topic=self.test_pubsub_topic, page_size=100, ascending=\"true\", cursor=cursor)\nsrc/node/waku_node.py:308: in get_store_messages\n    return self._api.get_store_messages(\nsrc/node/api_clients/rest.py:116: in get_store_messages\n    params.append(f\"cursor={quote(cursor, safe='')}\")\n/opt/hostedtoolcache/Python/3.12.3/x64/lib/python3.12/urllib/parse.py:907: in quote\n    return quote_from_bytes(string, safe)\n/opt/hostedtoolcache/Python/3.12.3/x64/lib/python3.12/urllib/parse.py:937: in quote_from_bytes\n    raise TypeError(\"quote_from_bytes() expected bytes\")\nE   TypeError: quote_from_bytes() expected bytes","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":2,"retriesStatusChange":false,"beforeStages":[{"name":"set_allure_env_variables","time":{"start":1716392960148,"stop":1716392960149,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_id","time":{"start":1716393857737,"stop":1716393857737,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail","time":{"start":1716393857737,"stop":1716393857737,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes","time":{"start":1716393857737,"stop":1716393857737,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_setup","time":{"start":1716393857737,"stop":1716393857738,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"node_setup","time":{"start":1716393857738,"stop":1716393870521,"duration":12783},"status":"passed","steps":[{"name":"setup_first_publishing_node","time":{"start":1716393857738,"stop":1716393859620,"duration":1882},"status":"passed","steps":[{"name":"start_publishing_node","time":{"start":1716393857738,"stop":1716393859620,"duration":1882},"status":"passed","steps":[{"name":"add_node_peer","time":{"start":1716393859620,"stop":1716393859620,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"args","value":"(<tests.store.test_cursor.TestCursor object at 0x7f31e71b6a20>, <src.node.waku_node.WakuNode object at 0x7f31e5ebcb00>, [])"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"image","value":"'harbor.status.im/wakuorg/nwaku:latest'"},{"name":"node_index","value":"1"},{"name":"store","value":"'true'"},{"name":"relay","value":"'true'"},{"name":"nodekey","value":"'30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68'"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"store","value":"'true'"},{"name":"relay","value":"'true'"}],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"setup_first_store_node","time":{"start":1716393859620,"stop":1716393870503,"duration":10883},"status":"passed","steps":[{"name":"setup_store_node","time":{"start":1716393859620,"stop":1716393870502,"duration":10882},"status":"passed","steps":[{"name":"add_node_peer","time":{"start":1716393861581,"stop":1716393870502,"duration":8921},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"args","value":"(<tests.store.test_cursor.TestCursor object at 0x7f31e71b6a20>, <src.node.waku_node.WakuNode object at 0x7f31e5d7a720>, ['/ip4/172.18.133.200/tcp/43778/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip'])"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"image","value":"'harbor.status.im/wakuorg/nwaku:latest'"},{"name":"node_index","value":"1"},{"name":"store","value":"'true'"},{"name":"relay","value":"'true'"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"store","value":"'true'"},{"name":"relay","value":"'true'"}],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"subscribe_to_pubsub_topics_via_relay","time":{"start":1716393870503,"stop":1716393870521,"duration":18},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node","value":"None"},{"name":"pubsub_topics","value":"None"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":7,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"common_setup","time":{"start":1716393857738,"stop":1716393857738,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"store_setup","time":{"start":1716393857738,"stop":1716393857738,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"broken","statusMessage":"TypeError: quote_from_bytes() expected bytes","statusTrace":"tests/store/test_cursor.py:55: in test_passing_cursor_not_returned_in_paginationCursor\n    store_response = node.get_store_messages(pubsub_topic=self.test_pubsub_topic, page_size=100, ascending=\"true\", cursor=cursor)\nsrc/node/waku_node.py:308: in get_store_messages\n    return self._api.get_store_messages(\nsrc/node/api_clients/rest.py:116: in get_store_messages\n    params.append(f\"cursor={quote(cursor, safe='')}\")\n/opt/hostedtoolcache/Python/3.12.3/x64/lib/python3.12/urllib/parse.py:907: in quote\n    return quote_from_bytes(string, safe)\n/opt/hostedtoolcache/Python/3.12.3/x64/lib/python3.12/urllib/parse.py:937: in quote_from_bytes\n    raise TypeError(\"quote_from_bytes() expected bytes\")\nE   TypeError: quote_from_bytes() expected bytes","steps":[{"name":"create_message","time":{"start":1716393870522,"stop":1716393870522,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"payload","value":"'TWVzc2FnZV8w'"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"publish_message","time":{"start":1716393870522,"stop":1716393870538,"duration":16},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"via","value":"'relay'"},{"name":"pubsub_topic","value":"None"},{"name":"message","value":"{'payload': 'TWVzc2FnZV8w', 'contentTopic': '/myapp/1/latest/proto', 'timestamp': 1716393870521562880}"},{"name":"message_propagation_delay","value":"0.01"},{"name":"sender","value":"None"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"create_message","time":{"start":1716393870538,"stop":1716393870538,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"payload","value":"'TWVzc2FnZV8x'"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"publish_message","time":{"start":1716393870538,"stop":1716393870553,"duration":15},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"via","value":"'relay'"},{"name":"pubsub_topic","value":"None"},{"name":"message","value":"{'payload': 'TWVzc2FnZV8x', 'contentTopic': '/myapp/1/latest/proto', 'timestamp': 1716393870537690624}"},{"name":"message_propagation_delay","value":"0.01"},{"name":"sender","value":"None"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"create_message","time":{"start":1716393870553,"stop":1716393870553,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"payload","value":"'TWVzc2FnZV8y'"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"publish_message","time":{"start":1716393870553,"stop":1716393870568,"duration":15},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"via","value":"'relay'"},{"name":"pubsub_topic","value":"None"},{"name":"message","value":"{'payload': 'TWVzc2FnZV8y', 'contentTopic': '/myapp/1/latest/proto', 'timestamp': 1716393870553181184}"},{"name":"message_propagation_delay","value":"0.01"},{"name":"sender","value":"None"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"create_message","time":{"start":1716393870568,"stop":1716393870568,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"payload","value":"'TWVzc2FnZV8z'"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"publish_message","time":{"start":1716393870568,"stop":1716393870583,"duration":15},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"via","value":"'relay'"},{"name":"pubsub_topic","value":"None"},{"name":"message","value":"{'payload': 'TWVzc2FnZV8z', 'contentTopic': '/myapp/1/latest/proto', 'timestamp': 1716393870567715584}"},{"name":"message_propagation_delay","value":"0.01"},{"name":"sender","value":"None"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"create_message","time":{"start":1716393870583,"stop":1716393870583,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"payload","value":"'TWVzc2FnZV80'"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"publish_message","time":{"start":1716393870583,"stop":1716393870598,"duration":15},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"via","value":"'relay'"},{"name":"pubsub_topic","value":"None"},{"name":"message","value":"{'payload': 'TWVzc2FnZV80', 'contentTopic': '/myapp/1/latest/proto', 'timestamp': 1716393870583141120}"},{"name":"message_propagation_delay","value":"0.01"},{"name":"sender","value":"None"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"create_message","time":{"start":1716393870598,"stop":1716393870598,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"payload","value":"'TWVzc2FnZV81'"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"publish_message","time":{"start":1716393870598,"stop":1716393870613,"duration":15},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"via","value":"'relay'"},{"name":"pubsub_topic","value":"None"},{"name":"message","value":"{'payload': 'TWVzc2FnZV81', 'contentTopic': '/myapp/1/latest/proto', 'timestamp': 1716393870598142208}"},{"name":"message_propagation_delay","value":"0.01"},{"name":"sender","value":"None"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"create_message","time":{"start":1716393870614,"stop":1716393870614,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"payload","value":"'TWVzc2FnZV82'"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"publish_message","time":{"start":1716393870614,"stop":1716393870632,"duration":18},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"via","value":"'relay'"},{"name":"pubsub_topic","value":"None"},{"name":"message","value":"{'payload': 'TWVzc2FnZV82', 'contentTopic': '/myapp/1/latest/proto', 'timestamp': 1716393870613632512}"},{"name":"message_propagation_delay","value":"0.01"},{"name":"sender","value":"None"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"create_message","time":{"start":1716393870632,"stop":1716393870632,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"payload","value":"'TWVzc2FnZV83'"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"publish_message","time":{"start":1716393870632,"stop":1716393870647,"duration":15},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"via","value":"'relay'"},{"name":"pubsub_topic","value":"None"},{"name":"message","value":"{'payload': 'TWVzc2FnZV83', 'contentTopic': '/myapp/1/latest/proto', 'timestamp': 1716393870631896576}"},{"name":"message_propagation_delay","value":"0.01"},{"name":"sender","value":"None"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"create_message","time":{"start":1716393870647,"stop":1716393870647,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"payload","value":"'TWVzc2FnZV84'"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"publish_message","time":{"start":1716393870647,"stop":1716393870662,"duration":15},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"via","value":"'relay'"},{"name":"pubsub_topic","value":"None"},{"name":"message","value":"{'payload': 'TWVzc2FnZV84', 'contentTopic': '/myapp/1/latest/proto', 'timestamp': 1716393870646657280}"},{"name":"message_propagation_delay","value":"0.01"},{"name":"sender","value":"None"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"create_message","time":{"start":1716393870662,"stop":1716393870662,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"payload","value":"'TWVzc2FnZV85'"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"publish_message","time":{"start":1716393870662,"stop":1716393870676,"duration":14},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"via","value":"'relay'"},{"name":"pubsub_topic","value":"None"},{"name":"message","value":"{'payload': 'TWVzc2FnZV85', 'contentTopic': '/myapp/1/latest/proto', 'timestamp': 1716393870661641728}"},{"name":"message_propagation_delay","value":"0.01"},{"name":"sender","value":"None"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"5bc70b6c88367219","name":"log","source":"5bc70b6c88367219.txt","type":"text/plain","size":52670}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":20,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"test_setup::0","time":{"start":1716393870721,"stop":1716393870725,"duration":4},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes::0","time":{"start":1716393870725,"stop":1716393876266,"duration":5541},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail::0","time":{"start":1716393876267,"stop":1716393876270,"duration":3},"status":"passed","steps":[],"attachments":[{"uid":"4deb94656d817f4d","name":"store_node1_2024-05-22_16-04-17__7f51eef9-bb19-4b59-bfad-3b147c076516__harbor.status.im_wakuorg_nwaku:latest.log","source":"4deb94656d817f4d.txt","type":"text/plain","size":195693},{"uid":"42bf6454f04d38ff","name":"publishing_node1_2024-05-22_16-04-17__7f51eef9-bb19-4b59-bfad-3b147c076516__harbor.status.im_wakuorg_nwaku:latest.log","source":"42bf6454f04d38ff.txt","type":"text/plain","size":178923}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"set_allure_env_variables::0","time":{"start":1716394342231,"stop":1716394342231,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"@pytest.mark.usefixtures('node_setup')"},{"name":"parentSuite","value":"tests.store"},{"name":"suite","value":"test_cursor"},{"name":"subSuite","value":"TestCursor"},{"name":"host","value":"fv-az1385-946"},{"name":"thread","value":"2040-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.store.test_cursor"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"db3608418a348234","status":"broken","statusDetails":"TypeError: quote_from_bytes() expected bytes","time":{"start":1716393852610,"stop":1716393852766,"duration":156}},{"uid":"98ab95da2370f77b","status":"broken","statusDetails":"TypeError: quote_from_bytes() expected bytes","time":{"start":1716393835599,"stop":1716393835763,"duration":164}}],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":1,"skipped":1,"passed":3,"unknown":0,"total":5},"items":[{"uid":"1e4e387c22961f9b","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/201//#testresult/1e4e387c22961f9b","status":"skipped","statusDetails":"XFAIL Bug reported: https://github.com/waku-org/nwaku/issues/2715\n\nException: Error: 400 Client Error: Bad Request for url: http://127.0.0.1:59163/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&cursor=GaZ15ujGJ7Po296Q%2BZaCm%2F8qf2Klh5fCJAfNA0pav78%3D&pageSize=100&ascending=true with response: b'waku message hash parsing error: Incorrect base64 string'","time":{"start":1716317208928,"stop":1716317209091,"duration":163}},{"uid":"dba371f7c96275b4","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/200//#testresult/dba371f7c96275b4","status":"passed","statusDetails":"XPASS Bug reported: https://github.com/waku-org/nwaku/issues/2715","time":{"start":1716302291109,"stop":1716302291298,"duration":189}},{"uid":"8d3c642bd09bc051","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/199//#testresult/8d3c642bd09bc051","status":"passed","statusDetails":"XPASS Bug reported: https://github.com/waku-org/nwaku/issues/2715","time":{"start":1716290495593,"stop":1716290495756,"duration":163}},{"uid":"86d45492233b720f","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/198//#testresult/86d45492233b720f","status":"passed","statusDetails":"XPASS Bug reported: https://github.com/waku-org/nwaku/issues/2715","time":{"start":1716289064482,"stop":1716289064667,"duration":185}}]},"tags":["@pytest.mark.usefixtures('node_setup')"]},"source":"bc2662749547bd1a.json","parameterValues":[]}