[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_get_store_message_with_version with id: 2025-02-02_04-07-14__31a4a32c-41cc-4b08-b3d9-8f8da51b6116
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-02_04-07-14__31a4a32c-41cc-4b08-b3d9-8f8da51b6116__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.217.95
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['19912', '19913', '19914', '19915', '19916']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 19912:19912 -p 19913:19913 -p 19914:19914 -p 19915:19915 -p 19916:19916 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19914 --rest-port=19912 --tcp-port=19913 --discv5-udp-port=19915 --rest-address=0.0.0.0 --nat=extip:172.18.217.95 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=330eb8a76c0cf7ffeb2cebfa1cebdc585eea6fab4df20bc3b59b6bdb0cac28bd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19916 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.217.95 waku de4adbdc4f462e0b023c9f0606710bb9670088c030888047b161151bdd52b97a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID de4adbdc4f46. Setting up logs at ./log/docker/publishing_node1_2025-02-02_04-07-14__31a4a32c-41cc-4b08-b3d9-8f8da51b6116__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 19912
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 12126ebc1c75. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19912/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19912/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.217.95/tcp/19913/p2p/16Uiu2HAmRpyERJWqNrEDaKnHZnhwzxfPJ2JCGcvQCDH6cwyjf6ma","/ip4/172.18.217.95/tcp/19914/ws/p2p/16Uiu2HAmRpyERJWqNrEDaKnHZnhwzxfPJ2JCGcvQCDH6cwyjf6ma"],"enrUri":"enr:-L24QONsND3hm8U7tLpTcEt0VZZS8fo2F9cNrhXSfQ2ldkPtWZiyvH9T4NDxeSfyHvqZkTLgD7mo4j8MiWTInuQW9GsCgmlkgnY0gmlwhKwS2V-KbXVsdGlhZGRyc5YACASsEtlfBk3JAAoErBLZXwZNyt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDw7Z5NzVT4UTJbvQMPcXunJjTifwsbPzjNZ2_pMiZ612DdGNwgk3Jg3VkcIJNy4V3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-02_04-07-14__31a4a32c-41cc-4b08-b3d9-8f8da51b6116__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.0.171
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['57581', '57582', '57583', '57584', '57585']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 57581:57581 -p 57582:57582 -p 57583:57583 -p 57584:57584 -p 57585:57585 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57583 --rest-port=57581 --tcp-port=57582 --discv5-udp-port=57584 --rest-address=0.0.0.0 --nat=extip:172.18.0.171 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a6bfdf5073017db5b37b538fefcbd7ac7ec03d661aff625ebcec1d6061f30391 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57585 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QONsND3hm8U7tLpTcEt0VZZS8fo2F9cNrhXSfQ2ldkPtWZiyvH9T4NDxeSfyHvqZkTLgD7mo4j8MiWTInuQW9GsCgmlkgnY0gmlwhKwS2V-KbXVsdGlhZGRyc5YACASsEtlfBk3JAAoErBLZXwZNyt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDw7Z5NzVT4UTJbvQMPcXunJjTifwsbPzjNZ2_pMiZ612DdGNwgk3Jg3VkcIJNy4V3YWt1MgM --storenode=/ip4/172.18.217.95/tcp/19913/p2p/16Uiu2HAmRpyERJWqNrEDaKnHZnhwzxfPJ2JCGcvQCDH6cwyjf6ma --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.0.171 waku cc121e69ca9e2bcca3ceaa7b1067a420c8a356721782d14f3474919ae0c4b079
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID cc121e69ca9e. Setting up logs at ./log/docker/store_node1_2025-02-02_04-07-14__31a4a32c-41cc-4b08-b3d9-8f8da51b6116__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 57581
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57581/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57581/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.0.171/tcp/57582/p2p/16Uiu2HAmS4okdZSSVEQj1YyXJDL9Z5PpCZ2UnEW4mmkGyNEtKiyg","/ip4/172.18.0.171/tcp/57583/ws/p2p/16Uiu2HAmS4okdZSSVEQj1YyXJDL9Z5PpCZ2UnEW4mmkGyNEtKiyg"],"enrUri":"enr:-L24QHTmRX_I-5kTN_qBVFmM8AH0JHnNPDue6XIDd95kvs3wVPfPFZr6I4fJ2szc791FIVwfQ3bNa3oQTiCNKW57ETcCgmlkgnY0gmlwhKwSAKuKbXVsdGlhZGRyc5YACASsEgCrBuDuAAoErBIAqwbg790DgnJzhQADAQAAiXNlY3AyNTZrMaEDx0HjAnV-69D3vQSCxooMbMB0Ep33arH9mi9vye-8bfuDdGNwguDug3VkcILg8IV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57581/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.217.95/tcp/19913/p2p/16Uiu2HAmRpyERJWqNrEDaKnHZnhwzxfPJ2JCGcvQCDH6cwyjf6ma"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19912/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57581/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19912/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)', "version": 10}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19912/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x800af57927fb677132547c31502f9bfa1c915af55908f5550753abf897c93cea"}]}'
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57581/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x800af57927fb677132547c31502f9bfa1c915af55908f5550753abf897c93cea"}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id de4adbdc4f46
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id cc121e69ca9e
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container de4adbdc4f46. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.