[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_get_message_duplicate_message with id: 2024-09-27_04-14-54__bb76c439-7d6d-442b-a115-abafb9b8612f
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-27_04-14-54__bb76c439-7d6d-442b-a115-abafb9b8612f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.215.7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['29649', '29650', '29651', '29652', '29653']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 29649:29649 -p 29650:29650 -p 29651:29651 -p 29652:29652 -p 29653:29653 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29651 --rest-port=29649 --tcp-port=29650 --discv5-udp-port=29652 --rest-address=0.0.0.0 --nat=extip:172.18.215.7 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a6d37c7bfd1bd21bbbd81aa249731e9233cba09c030d6dbd71c036b1efaf7536 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29653 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.215.7 waku 573ec8a3d805bbdd0bb1538170b2b3f5ec6946c6f48d9c8accf3b9dc6c2e6a25
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 573ec8a3d805. Setting up logs at ./log/docker/node1_2024-09-27_04-14-54__bb76c439-7d6d-442b-a115-abafb9b8612f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 29649
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29649/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29649/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.215.7/tcp/29650/p2p/16Uiu2HAm6p2zZkL6Qmom1fT4xT5UAiXH9BU5pjX9P3eer78HPQ1B","/ip4/172.18.215.7/tcp/29651/ws/p2p/16Uiu2HAm6p2zZkL6Qmom1fT4xT5UAiXH9BU5pjX9P3eer78HPQ1B"],"enrUri":"enr:-LO4QN9vaiPn_Ww7nafowDZveAZDbHfJ0JBTGu4MUop3ZDzeL6pNexNvbeSCWNOP5lhXE8D5g-rKlflIg6asBkzkNBEBgmlkgnY0gmlwhKwS1weKbXVsdGlhZGRyc4wACgSsEtcHBnPT3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKpKxgEJ8SUlbaA9BofvewVAM51sbMf6tb7_qM8VbRdFoN0Y3CCc9KDdWRwgnPUhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-27_04-14-54__bb76c439-7d6d-442b-a115-abafb9b8612f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.223.206
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['24976', '24977', '24978', '24979', '24980']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 24976:24976 -p 24977:24977 -p 24978:24978 -p 24979:24979 -p 24980:24980 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=24978 --rest-port=24976 --tcp-port=24977 --discv5-udp-port=24979 --rest-address=0.0.0.0 --nat=extip:172.18.223.206 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9422bcefe8c45cda98e344cf8d0fa7ef44d747b9d12ffb8cdacc4cbb0afffbcf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=24980 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QN9vaiPn_Ww7nafowDZveAZDbHfJ0JBTGu4MUop3ZDzeL6pNexNvbeSCWNOP5lhXE8D5g-rKlflIg6asBkzkNBEBgmlkgnY0gmlwhKwS1weKbXVsdGlhZGRyc4wACgSsEtcHBnPT3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKpKxgEJ8SUlbaA9BofvewVAM51sbMf6tb7_qM8VbRdFoN0Y3CCc9KDdWRwgnPUhXdha3UyBQ --filternode=/ip4/172.18.215.7/tcp/29650/p2p/16Uiu2HAm6p2zZkL6Qmom1fT4xT5UAiXH9BU5pjX9P3eer78HPQ1B
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.223.206 waku a8b35282856415558cb4e8643627e5f4ca5e15410697d975ef982a4d715d6938
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID a8b352828564. Setting up logs at ./log/docker/node2_2024-09-27_04-14-54__bb76c439-7d6d-442b-a115-abafb9b8612f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 24976
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24976/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24976/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.223.206/tcp/24977/p2p/16Uiu2HAmE9ZotjCJ52sCgFnTt2ioYCkWbSXcqqvZTDvQNMo5Fvxn","/ip4/172.18.223.206/tcp/24978/ws/p2p/16Uiu2HAmE9ZotjCJ52sCgFnTt2ioYCkWbSXcqqvZTDvQNMo5Fvxn"],"enrUri":"enr:-LO4QMsW4NP4_A_DLhhcPlUYcxHoHn917EIq5_kLtAS1QR2ideRijosUuaJzD0Up6UecgJr3xKGmqWeC9Wh2IqZ3jokBgmlkgnY0gmlwhKwS386KbXVsdGlhZGRyc4wACgSsEt_OBmGS3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMWLcgLAZKIaDz_1LXopFE6ZM5MyILfGUtyRPzCZm5cx4N0Y3CCYZGDdWRwgmGThXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24976/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.215.7/tcp/29650/p2p/16Uiu2HAm6p2zZkL6Qmom1fT4xT5UAiXH9BU5pjX9P3eer78HPQ1B"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29649/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24976/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "c218953a-ff62-4a29-8291-7c63d867aa3e", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"c218953a-ff62-4a29-8291-7c63d867aa3e","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29649/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24976/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1727410497790976256,"ephemeral":false}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29649/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24976/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 573ec8a3d805
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id a8b352828564
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.