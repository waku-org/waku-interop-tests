[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_pubsub_topics with id: 2024-09-27_04-19-14__f5417a84-b17b-49ae-bf80-f1c85f8004d1
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-27_04-19-14__f5417a84-b17b-49ae-bf80-f1c85f8004d1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.110.199
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['5144', '5145', '5146', '5147', '5148']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 5144:5144 -p 5145:5145 -p 5146:5146 -p 5147:5147 -p 5148:5148 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=5146 --rest-port=5144 --tcp-port=5145 --discv5-udp-port=5147 --rest-address=0.0.0.0 --nat=extip:172.18.110.199 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b1f4ccbb44578bbfcd9ba20fbb25dbeeed8d3f7efc7dda9d2b5bcee293ca3abd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=5148 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.110.199 waku dba640a8797fca36201fcc8fd65a0b5bd1a6b3321553612710ad37ed56c17923
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID dba640a8797f. Setting up logs at ./log/docker/receiving_node1_2024-09-27_04-19-14__f5417a84-b17b-49ae-bf80-f1c85f8004d1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 5144
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5144/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5144/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.110.199/tcp/5145/p2p/16Uiu2HAmQs7QB4QPPZdqCcyP8HksF9bkFdYv3QK6AstJmFAdyYxJ","/ip4/172.18.110.199/tcp/5146/ws/p2p/16Uiu2HAmQs7QB4QPPZdqCcyP8HksF9bkFdYv3QK6AstJmFAdyYxJ"],"enrUri":"enr:-LO4QOxyx-pfKlTb1rfD-0xufv_V2jHzX9nWcyxznqrZ1vv2V3f4Sah7nUh0_GNI5KmZikA74mb_tsxpe0ISTVVZirkBgmlkgnY0gmlwhKwSbseKbXVsdGlhZGRyc4wACgSsEm7HBhQa3QOCcnOFAAMBAACJc2VjcDI1NmsxoQO1Zy8ZXOA2x2wmgiA_CF5Azj34YYQdegwNv9yQ01C6A4N0Y3CCFBmDdWRwghQbhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-27_04-19-14__f5417a84-b17b-49ae-bf80-f1c85f8004d1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.169.119
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['19907', '19908', '19909', '19910', '19911']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 19907:19907 -p 19908:19908 -p 19909:19909 -p 19910:19910 -p 19911:19911 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19909 --rest-port=19907 --tcp-port=19908 --discv5-udp-port=19910 --rest-address=0.0.0.0 --nat=extip:172.18.169.119 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b69fca2d57d4c753364eae8c4ac9f5abe9a55e9b41decdfc6d6bdabe6bec66cf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19911 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.169.119 waku 14d51dd935fca8827228449889b4b0595fa8fd3d79000c2e1de099cbbe05a9c7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 14d51dd935fc. Setting up logs at ./log/docker/receiving_node2_2024-09-27_04-19-14__f5417a84-b17b-49ae-bf80-f1c85f8004d1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 19907
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19907/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19907/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.169.119/tcp/19908/p2p/16Uiu2HAmFBfnq16ph8gL26GgfG6nzFuQ3GpJcmiWWSiUPQGD81x7","/ip4/172.18.169.119/tcp/19909/ws/p2p/16Uiu2HAmFBfnq16ph8gL26GgfG6nzFuQ3GpJcmiWWSiUPQGD81x7"],"enrUri":"enr:-LO4QEZdAh1jKE_rx4tea1xODnWNGGjY4FW2vlHs4_As5IBZAEQH2m1L16JqSLDoy8bpDPjz9BUxuClZYxouef3fOqYBgmlkgnY0gmlwhKwSqXeKbXVsdGlhZGRyc4wACgSsEql3Bk3F3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMlk2S4R42o3EsRC5cdRS9_Lx1OzVnkuN8tUyDZPCM8dIN0Y3CCTcSDdWRwgk3GhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19907/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.110.199/tcp/5145/p2p/16Uiu2HAmQs7QB4QPPZdqCcyP8HksF9bkFdYv3QK6AstJmFAdyYxJ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-27_04-19-14__f5417a84-b17b-49ae-bf80-f1c85f8004d1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.87.251
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['7450', '7451', '7452', '7453', '7454']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 7450:7450 -p 7451:7451 -p 7452:7452 -p 7453:7453 -p 7454:7454 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7452 --rest-port=7450 --tcp-port=7451 --discv5-udp-port=7453 --rest-address=0.0.0.0 --nat=extip:172.18.87.251 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dde75954ffdecbd7bfeece6ae1ad486fab3f0fce230cbd49caeb62bab79a6af4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7454 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QOxyx-pfKlTb1rfD-0xufv_V2jHzX9nWcyxznqrZ1vv2V3f4Sah7nUh0_GNI5KmZikA74mb_tsxpe0ISTVVZirkBgmlkgnY0gmlwhKwSbseKbXVsdGlhZGRyc4wACgSsEm7HBhQa3QOCcnOFAAMBAACJc2VjcDI1NmsxoQO1Zy8ZXOA2x2wmgiA_CF5Azj34YYQdegwNv9yQ01C6A4N0Y3CCFBmDdWRwghQbhXdha3UyCQ --lightpushnode=/ip4/172.18.110.199/tcp/5145/p2p/16Uiu2HAmQs7QB4QPPZdqCcyP8HksF9bkFdYv3QK6AstJmFAdyYxJ --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.87.251 waku f42323f52a1a09d309a661e9da7cad9d97a72c96b15206caba7d21654f6b3c91
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID f42323f52a1a. Setting up logs at ./log/docker/lightpush_node1_2024-09-27_04-19-14__f5417a84-b17b-49ae-bf80-f1c85f8004d1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 7450
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7450/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7450/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.87.251/tcp/7451/p2p/16Uiu2HAm7iYXJPttGgvXrgxo1wLqnCAaX7T4PBxRze6EQEzK6gom","/ip4/172.18.87.251/tcp/7452/ws/p2p/16Uiu2HAm7iYXJPttGgvXrgxo1wLqnCAaX7T4PBxRze6EQEzK6gom"],"enrUri":"enr:-LO4QEzBCVn9e3H5dehL42ySGdr0ufRQBiImNRfMBIqJSq_kAmIifiPz9fbnqD5zna4p2JbcmOejhTXzleDE0zX7iJgBgmlkgnY0gmlwhKwSV_uKbXVsdGlhZGRyc4wACgSsElf7Bh0c3QOCcnOFAAMBAACJc2VjcDI1NmsxoQK2nq97CsaDgZesYGCyBVg32rwxvG9JfBHxZoNfE5nXXIN0Y3CCHRuDdWRwgh0dhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7450/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.110.199/tcp/5145/p2p/16Uiu2HAmQs7QB4QPPZdqCcyP8HksF9bkFdYv3QK6AstJmFAdyYxJ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7450/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.169.119/tcp/19908/p2p/16Uiu2HAmFBfnq16ph8gL26GgfG6nzFuQ3GpJcmiWWSiUPQGD81x7"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5144/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19907/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A dictionary', 'value': {'key': 'YWFh'}}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7450/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": {"key": "YWFh"}, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1727410760115013120}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:7450/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'An integer', 'value': 1234567890}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7450/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": 1234567890, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1727410760120704000}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:7450/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A list', 'value': ['YWFh']}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7450/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": ["YWFh"], "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1727410760127770112}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:7450/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A bool', 'value': True}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7450/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": true, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1727410760135684352}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:7450/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id dba640a8797f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 14d51dd935fc
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id f42323f52a1a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.