[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_pubsub_topics with id: 2024-10-01_04-19-32__b0b5edb3-0edc-4884-a523-24651025179b
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-10-01_04-19-32__b0b5edb3-0edc-4884-a523-24651025179b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.218.86
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['7806', '7807', '7808', '7809', '7810']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 7806:7806 -p 7807:7807 -p 7808:7808 -p 7809:7809 -p 7810:7810 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7808 --rest-port=7806 --tcp-port=7807 --discv5-udp-port=7809 --rest-address=0.0.0.0 --nat=extip:172.18.218.86 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=40edef5ecd49561b8e01c4cae3b1eb8aa6aebcaf7fac254df06f9c1bee8d68de --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7810 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.218.86 waku 361deaaba72d8656b54d3e60f4cc74ac650e091d9d2e6d990277a609e13aabb6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 361deaaba72d. Setting up logs at ./log/docker/receiving_node1_2024-10-01_04-19-32__b0b5edb3-0edc-4884-a523-24651025179b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 7806
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7806/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7806/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.218.86/tcp/7807/p2p/16Uiu2HAmQAhgZZicaaUht5GMfaCGPHxEJWQWs7zDrwkadnof3rNk","/ip4/172.18.218.86/tcp/7808/ws/p2p/16Uiu2HAmQAhgZZicaaUht5GMfaCGPHxEJWQWs7zDrwkadnof3rNk"],"enrUri":"enr:-LO4QP3BnagPBNb6rk7SlnIHFpf-Q-NOG8lcABFa27DS9fsJQflRrLpcPC-28CJolThrbJjjHttr2GAdP1Z_usUOXvUBgmlkgnY0gmlwhKwS2laKbXVsdGlhZGRyc4wACgSsEtpWBh6A3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOrDSJb2MM3a80-fI0QKmI3sTACaC76BDQ5CgG-Wo_igYN0Y3CCHn-DdWRwgh6BhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-10-01_04-19-32__b0b5edb3-0edc-4884-a523-24651025179b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.46.57
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['27871', '27872', '27873', '27874', '27875']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 27871:27871 -p 27872:27872 -p 27873:27873 -p 27874:27874 -p 27875:27875 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27873 --rest-port=27871 --tcp-port=27872 --discv5-udp-port=27874 --rest-address=0.0.0.0 --nat=extip:172.18.46.57 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=db8fa9173f50a4ebcbcc715998b32bf70ee55b2cafee33b152fbf5a81f6ed8b0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27875 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.46.57 waku f3fa1dbe1ef3a90390b875d61ec1152929947010d487b8fb7cd13d2b3ca9501b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID f3fa1dbe1ef3. Setting up logs at ./log/docker/receiving_node2_2024-10-01_04-19-32__b0b5edb3-0edc-4884-a523-24651025179b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 27871
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27871/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27871/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.46.57/tcp/27872/p2p/16Uiu2HAm2opGxEX81uq3ievp2uaA8ovNQMKuWVSfHyjsLykS9i5b","/ip4/172.18.46.57/tcp/27873/ws/p2p/16Uiu2HAm2opGxEX81uq3ievp2uaA8ovNQMKuWVSfHyjsLykS9i5b"],"enrUri":"enr:-LO4QGFfvkvf0fQ4GYMzeFtt8d2T2Tj3NbsxQLNwgdiFM4YNKbEdf5-bXJO7h0_4phzygFb1uPBBL0A15Thm32xtBEQBgmlkgnY0gmlwhKwSLjmKbXVsdGlhZGRyc4wACgSsEi45Bmzh3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJtrfdocCoaP8l78gx39yswz54uegayXbQKbXjoLZgw_oN0Y3CCbOCDdWRwgmzihXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27871/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.218.86/tcp/7807/p2p/16Uiu2HAmQAhgZZicaaUht5GMfaCGPHxEJWQWs7zDrwkadnof3rNk"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-10-01_04-19-32__b0b5edb3-0edc-4884-a523-24651025179b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.197.223
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['12557', '12558', '12559', '12560', '12561']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 12557:12557 -p 12558:12558 -p 12559:12559 -p 12560:12560 -p 12561:12561 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=12559 --rest-port=12557 --tcp-port=12558 --discv5-udp-port=12560 --rest-address=0.0.0.0 --nat=extip:172.18.197.223 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d1fd05c2b7feaade91b73ad5a5bf9ecfd90a6990ea2e27f0db22f5c7cce11e7d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=12561 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QP3BnagPBNb6rk7SlnIHFpf-Q-NOG8lcABFa27DS9fsJQflRrLpcPC-28CJolThrbJjjHttr2GAdP1Z_usUOXvUBgmlkgnY0gmlwhKwS2laKbXVsdGlhZGRyc4wACgSsEtpWBh6A3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOrDSJb2MM3a80-fI0QKmI3sTACaC76BDQ5CgG-Wo_igYN0Y3CCHn-DdWRwgh6BhXdha3UyCQ --lightpushnode=/ip4/172.18.218.86/tcp/7807/p2p/16Uiu2HAmQAhgZZicaaUht5GMfaCGPHxEJWQWs7zDrwkadnof3rNk --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.197.223 waku 31e41c29c01dfa3f17c7988c33f4d00a9c6935f88ea6acd5d2e61d11957053a9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 31e41c29c01d. Setting up logs at ./log/docker/lightpush_node1_2024-10-01_04-19-32__b0b5edb3-0edc-4884-a523-24651025179b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 12557
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12557/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12557/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.197.223/tcp/12558/p2p/16Uiu2HAmKiYj2j6f3GGbqhtnNKcadrh5hnUdW6rEMKs1nmgPtbxg","/ip4/172.18.197.223/tcp/12559/ws/p2p/16Uiu2HAmKiYj2j6f3GGbqhtnNKcadrh5hnUdW6rEMKs1nmgPtbxg"],"enrUri":"enr:-LO4QFo7GRUPjr7eE9NKBkYnl5k-YjhGfswN1yh3KCyAR5hEUzkJi5XgjwngdQ3o2yrRVLzKE071XEK6-oeSAn5elqMBgmlkgnY0gmlwhKwSxd-KbXVsdGlhZGRyc4wACgSsEsXfBjEP3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNo6yhCKM2g_8nUj5_F_oJ-0RhzaEyXHZkk9VsQ9ZPjnYN0Y3CCMQ6DdWRwgjEQhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12557/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.218.86/tcp/7807/p2p/16Uiu2HAmQAhgZZicaaUht5GMfaCGPHxEJWQWs7zDrwkadnof3rNk"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12557/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.46.57/tcp/27872/p2p/16Uiu2HAm2opGxEX81uq3ievp2uaA8ovNQMKuWVSfHyjsLykS9i5b"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7806/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27871/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A dictionary', 'value': {'key': 'YWFh'}}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12557/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": {"key": "YWFh"}, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1727756377499351552}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:12557/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'An integer', 'value': 1234567890}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12557/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": 1234567890, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1727756377504026112}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:12557/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A list', 'value': ['YWFh']}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12557/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": ["YWFh"], "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1727756377509646592}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:12557/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A bool', 'value': True}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12557/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": true, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1727756377513820416}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:12557/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 361deaaba72d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id f3fa1dbe1ef3
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 31e41c29c01d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.