[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_update_subscription_with_invalid_content_topic_format with id: 2024-10-01_04-17-20__e7a70b18-6430-44f5-95ec-a0ad03c686ad
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-01_04-17-20__e7a70b18-6430-44f5-95ec-a0ad03c686ad__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.179.99
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['6895', '6896', '6897', '6898', '6899']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 6895:6895 -p 6896:6896 -p 6897:6897 -p 6898:6898 -p 6899:6899 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6897 --rest-port=6895 --tcp-port=6896 --discv5-udp-port=6898 --rest-address=0.0.0.0 --nat=extip:172.18.179.99 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7ceaa81114b6b315f3e8ecacc65d2be28c1fb3fbbcbf8b5e474aec1aedbacbf5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6899 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.179.99 waku d062ffa22f0128e9e5d32661210cef8eccfd1f7dbcb4f8d6490409059e983aca
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID d062ffa22f01. Setting up logs at ./log/docker/node1_2024-10-01_04-17-20__e7a70b18-6430-44f5-95ec-a0ad03c686ad__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 6895
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6895/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6895/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.179.99/tcp/6896/p2p/16Uiu2HAmCt7ApbV4cPKEzADJxaP11YsFPh4pzxVKiipmn9dFPHhK","/ip4/172.18.179.99/tcp/6897/ws/p2p/16Uiu2HAmCt7ApbV4cPKEzADJxaP11YsFPh4pzxVKiipmn9dFPHhK"],"enrUri":"enr:-LO4QJWlJH4KbPRFs8uHxQjk7ecTUoc49zYNsLVJ5SzlKgaNNwroLVOl6ZmuPva4WJGe1-VAc1uZbwUSxw-fweXwEzIBgmlkgnY0gmlwhKwSs2OKbXVsdGlhZGRyc4wACgSsErNjBhrx3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMDXELomP0B7pMBtunkRF1NwFch_NCqcnldsuv1RXsksoN0Y3CCGvCDdWRwghryhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-10-01_04-17-20__e7a70b18-6430-44f5-95ec-a0ad03c686ad__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.50.56
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['49394', '49395', '49396', '49397', '49398']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 49394:49394 -p 49395:49395 -p 49396:49396 -p 49397:49397 -p 49398:49398 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=49396 --rest-port=49394 --tcp-port=49395 --discv5-udp-port=49397 --rest-address=0.0.0.0 --nat=extip:172.18.50.56 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d08fbbbe1acbcacf2bfb1afaef6cfc4deec41dbf7fe7b08abeac28a87764ddfd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=49398 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QJWlJH4KbPRFs8uHxQjk7ecTUoc49zYNsLVJ5SzlKgaNNwroLVOl6ZmuPva4WJGe1-VAc1uZbwUSxw-fweXwEzIBgmlkgnY0gmlwhKwSs2OKbXVsdGlhZGRyc4wACgSsErNjBhrx3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMDXELomP0B7pMBtunkRF1NwFch_NCqcnldsuv1RXsksoN0Y3CCGvCDdWRwghryhXdha3UyBQ --filternode=/ip4/172.18.179.99/tcp/6896/p2p/16Uiu2HAmCt7ApbV4cPKEzADJxaP11YsFPh4pzxVKiipmn9dFPHhK
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.50.56 waku 7e893ff761c91bd6c075d5c0f7966e515beb2a8cf907d6e42e8105fc6467c41e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 7e893ff761c9. Setting up logs at ./log/docker/node2_2024-10-01_04-17-20__e7a70b18-6430-44f5-95ec-a0ad03c686ad__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 49394
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49394/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49394/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.50.56/tcp/49395/p2p/16Uiu2HAmLoagGvZmUeHpVCfaadMUDrYhQ2pCXphjYdQpsgzGkWJL","/ip4/172.18.50.56/tcp/49396/ws/p2p/16Uiu2HAmLoagGvZmUeHpVCfaadMUDrYhQ2pCXphjYdQpsgzGkWJL"],"enrUri":"enr:-LO4QKDWtN6X13vc2bO591bZ6pfttoj2rt0QQJhG4V0xu_78YtN7BGqWqc9L2a466LOjsUeT7prosL-1YM164LTuKRgBgmlkgnY0gmlwhKwSMjiKbXVsdGlhZGRyc4wACgSsEjI4BsD03QOCcnOFAAMBAACJc2VjcDI1NmsxoQN5EPS3j0ea2q9H842TSJyF23MtA4Reiml9zAHp0J6ICYN0Y3CCwPODdWRwgsD1hXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49394/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.179.99/tcp/6896/p2p/16Uiu2HAmCt7ApbV4cPKEzADJxaP11YsFPh4pzxVKiipmn9dFPHhK"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6895/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49394/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "4c75bf63-1084-4bea-b546-1c853e0ee579", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"4c75bf63-1084-4bea-b546-1c853e0ee579","statusDesc":"OK"}'
[35mDEBUG   [0m tests.filter.test_subscribe_update:test_subscribe_update.py:87 Running test with contetn topic Empty string
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X PUT "http://127.0.0.1:49394/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": [{"description": "Empty string", "value": ""}], "pubsubTopic": "/waku/2/rs/3/1"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:49394/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.filter.test_subscribe_update:test_subscribe_update.py:87 Running test with contetn topic A dictionary
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X PUT "http://127.0.0.1:49394/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": [{"description": "A dictionary", "value": {"key": "YWFh"}}], "pubsubTopic": "/waku/2/rs/3/1"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:49394/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.filter.test_subscribe_update:test_subscribe_update.py:87 Running test with contetn topic An integer
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X PUT "http://127.0.0.1:49394/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": [{"description": "An integer", "value": 1234567890}], "pubsubTopic": "/waku/2/rs/3/1"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:49394/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.filter.test_subscribe_update:test_subscribe_update.py:87 Running test with contetn topic A list
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X PUT "http://127.0.0.1:49394/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": [{"description": "A list", "value": ["YWFh"]}], "pubsubTopic": "/waku/2/rs/3/1"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:49394/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.filter.test_subscribe_update:test_subscribe_update.py:87 Running test with contetn topic A bool
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X PUT "http://127.0.0.1:49394/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": [{"description": "A bool", "value": true}], "pubsubTopic": "/waku/2/rs/3/1"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:49394/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id d062ffa22f01
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 7e893ff761c9
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.