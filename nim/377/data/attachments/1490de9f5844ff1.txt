[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_subscribe_with_no_request_id with id: 2024-10-01_04-16-53__2ba1388f-2799-4c91-ad7d-229879ceb07b
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-01_04-16-53__2ba1388f-2799-4c91-ad7d-229879ceb07b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.78.36
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['29317', '29318', '29319', '29320', '29321']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 29317:29317 -p 29318:29318 -p 29319:29319 -p 29320:29320 -p 29321:29321 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29319 --rest-port=29317 --tcp-port=29318 --discv5-udp-port=29320 --rest-address=0.0.0.0 --nat=extip:172.18.78.36 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dbe97b5ffd1dfbfe0cecffc5aa709f6dfe251c1f55fadb9c605ca6f71866c8fa --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29321 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.78.36 waku 2de6d38d519843602e84942fc5c9548882fd57357e207a2c1cda28dab7dec2d9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 2de6d38d5198. Setting up logs at ./log/docker/node1_2024-10-01_04-16-53__2ba1388f-2799-4c91-ad7d-229879ceb07b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 29317
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29317/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29317/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.78.36/tcp/29318/p2p/16Uiu2HAm4QDWPCBFeFxdAsXcv8etP59GRSynifi42roHYCnyBSPT","/ip4/172.18.78.36/tcp/29319/ws/p2p/16Uiu2HAm4QDWPCBFeFxdAsXcv8etP59GRSynifi42roHYCnyBSPT"],"enrUri":"enr:-LO4QMCuTltd1GYH9M5omQeLBVp-W9KKGiA7oIC-ctD9b4WqKjiiej38JiyTS_aWEhZdvOqzh77c5nG9MWvIYR5aidgBgmlkgnY0gmlwhKwSTiSKbXVsdGlhZGRyc4wACgSsEk4kBnKH3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKFWas7mMBBhQ4WD3dkZz9cDeuRFTk2-Sq6n95qrNv-CoN0Y3CCcoaDdWRwgnKIhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-10-01_04-16-53__2ba1388f-2799-4c91-ad7d-229879ceb07b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.183.221
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['59975', '59976', '59977', '59978', '59979']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 59975:59975 -p 59976:59976 -p 59977:59977 -p 59978:59978 -p 59979:59979 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=59977 --rest-port=59975 --tcp-port=59976 --discv5-udp-port=59978 --rest-address=0.0.0.0 --nat=extip:172.18.183.221 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fd8cebb77fadaec373bcfe1dcbc4830e9ba9b7197291bdd0f2fdcbf7efe5c1ec --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=59979 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QMCuTltd1GYH9M5omQeLBVp-W9KKGiA7oIC-ctD9b4WqKjiiej38JiyTS_aWEhZdvOqzh77c5nG9MWvIYR5aidgBgmlkgnY0gmlwhKwSTiSKbXVsdGlhZGRyc4wACgSsEk4kBnKH3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKFWas7mMBBhQ4WD3dkZz9cDeuRFTk2-Sq6n95qrNv-CoN0Y3CCcoaDdWRwgnKIhXdha3UyBQ --filternode=/ip4/172.18.78.36/tcp/29318/p2p/16Uiu2HAm4QDWPCBFeFxdAsXcv8etP59GRSynifi42roHYCnyBSPT
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.183.221 waku 4f8f54bf16039381ede46b203a7f9f96964bfa62a056b76d9f52e1f68cc3109e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 4f8f54bf1603. Setting up logs at ./log/docker/node2_2024-10-01_04-16-53__2ba1388f-2799-4c91-ad7d-229879ceb07b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 59975
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59975/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59975/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.183.221/tcp/59976/p2p/16Uiu2HAmGBiYHSs6vtmRCzdyfRBXYPePCs7AwzdUaUFH7ZzdYfQx","/ip4/172.18.183.221/tcp/59977/ws/p2p/16Uiu2HAmGBiYHSs6vtmRCzdyfRBXYPePCs7AwzdUaUFH7ZzdYfQx"],"enrUri":"enr:-LO4QASueqvNZKzjPAZ14qQ2iem4OWWFKVtz3XLWpnRM3cQKDoZ7JOUSHB1Jxkjg9WyzKGExuQ-UrJojfITonJK-NXkBgmlkgnY0gmlwhKwSt92KbXVsdGlhZGRyc4wACgSsErfdBupJ3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM0cjBeT_6qcgpNf5_TekCo-n-v5tEVzYzXBgt39l7xfYN0Y3CC6kiDdWRwgupKhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59975/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.78.36/tcp/29318/p2p/16Uiu2HAm4QDWPCBFeFxdAsXcv8etP59GRSynifi42roHYCnyBSPT"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29317/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59975/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "a66636f2-dfb4-485c-ae1a-a8cf368829bf", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"a66636f2-dfb4-485c-ae1a-a8cf368829bf","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59975/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:59975/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 2de6d38d5198
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 4f8f54bf1603
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.