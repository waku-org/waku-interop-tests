[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_extra_field with id: 2024-10-01_04-20-07__0120e364-548f-419c-83a7-7d8cce1fc6e9
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-10-01_04-20-07__0120e364-548f-419c-83a7-7d8cce1fc6e9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.99.57
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['51220', '51221', '51222', '51223', '51224']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 51220:51220 -p 51221:51221 -p 51222:51222 -p 51223:51223 -p 51224:51224 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=51222 --rest-port=51220 --tcp-port=51221 --discv5-udp-port=51223 --rest-address=0.0.0.0 --nat=extip:172.18.99.57 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4bedb2aac7bc8ac30c2aeccfa134829becb9fa3464db399aeab0de18aae977bd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=51224 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.99.57 waku 817a8f267d18f96c6bb473dc95a7ffb9aa2690c589ac5e1ae297ad69d71f36b1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 817a8f267d18. Setting up logs at ./log/docker/receiving_node1_2024-10-01_04-20-07__0120e364-548f-419c-83a7-7d8cce1fc6e9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 51220
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51220/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51220/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.99.57/tcp/51221/p2p/16Uiu2HAm2YSpVkKVLZuJZc6VAofGbeNKwgwNkMJhHYwx2Uq8XaZj","/ip4/172.18.99.57/tcp/51222/ws/p2p/16Uiu2HAm2YSpVkKVLZuJZc6VAofGbeNKwgwNkMJhHYwx2Uq8XaZj"],"enrUri":"enr:-LO4QOsVpHqcCv0AcTJZjSAW_9qOk6TL6TEKsdviHhNv-gpfMqRyXQK3o9tlGhqjNl811VzYj4IIJ3YB1-DHoi9xpksBgmlkgnY0gmlwhKwSYzmKbXVsdGlhZGRyc4wACgSsEmM5BsgW3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJpvf5myPyNfTYLui95Fn4bFRNiDdiWh8Z9Mn59RqnVboN0Y3CCyBWDdWRwgsgXhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-10-01_04-20-07__0120e364-548f-419c-83a7-7d8cce1fc6e9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.186.28
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['37729', '37730', '37731', '37732', '37733']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 37729:37729 -p 37730:37730 -p 37731:37731 -p 37732:37732 -p 37733:37733 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37731 --rest-port=37729 --tcp-port=37730 --discv5-udp-port=37732 --rest-address=0.0.0.0 --nat=extip:172.18.186.28 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6bfadf335b3afada4f09c18d1a0c66aad7bac0dbbc97289c38c4abfd0bdabb5f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37733 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.186.28 waku 1278f8dde4338388a8013b6a13d233d07f6b8ee4afffbb7bd324b62222b18583
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 1278f8dde433. Setting up logs at ./log/docker/receiving_node2_2024-10-01_04-20-07__0120e364-548f-419c-83a7-7d8cce1fc6e9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 37729
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37729/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37729/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.186.28/tcp/37730/p2p/16Uiu2HAm6Bh5q1zjm1sZaGLDW1YY9FbjiEqLFpM4P73dYxajtVfw","/ip4/172.18.186.28/tcp/37731/ws/p2p/16Uiu2HAm6Bh5q1zjm1sZaGLDW1YY9FbjiEqLFpM4P73dYxajtVfw"],"enrUri":"enr:-LO4QM9kZCI37FjvSb8UAkOhDA9pAygSL1RYt9-tcEqU5TsrcIBhyz5Hmb0lkXs6AnKGWzZ8m1i9izSBVFhAODxX-NUBgmlkgnY0gmlwhKwSuhyKbXVsdGlhZGRyc4wACgSsErocBpNj3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKf26xYQKvTyCUM6JgsO4uApOX6jc2oAL70wVsYLPLKOoN0Y3CCk2KDdWRwgpNkhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37729/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.99.57/tcp/51221/p2p/16Uiu2HAm2YSpVkKVLZuJZc6VAofGbeNKwgwNkMJhHYwx2Uq8XaZj"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-10-01_04-20-07__0120e364-548f-419c-83a7-7d8cce1fc6e9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.249.136
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['64871', '64872', '64873', '64874', '64875']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 64871:64871 -p 64872:64872 -p 64873:64873 -p 64874:64874 -p 64875:64875 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64873 --rest-port=64871 --tcp-port=64872 --discv5-udp-port=64874 --rest-address=0.0.0.0 --nat=extip:172.18.249.136 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5a24decfca96de5bcbec84becfcbbaa9af78e2ade2da2a2a92e1aa77ebd50580 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64875 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QOsVpHqcCv0AcTJZjSAW_9qOk6TL6TEKsdviHhNv-gpfMqRyXQK3o9tlGhqjNl811VzYj4IIJ3YB1-DHoi9xpksBgmlkgnY0gmlwhKwSYzmKbXVsdGlhZGRyc4wACgSsEmM5BsgW3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJpvf5myPyNfTYLui95Fn4bFRNiDdiWh8Z9Mn59RqnVboN0Y3CCyBWDdWRwgsgXhXdha3UyCQ --lightpushnode=/ip4/172.18.99.57/tcp/51221/p2p/16Uiu2HAm2YSpVkKVLZuJZc6VAofGbeNKwgwNkMJhHYwx2Uq8XaZj --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.249.136 waku 45f319b2539ece18ea2ddbcd2adc1774b7347713d479651a26c6b35313dbf9ea
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 45f319b2539e. Setting up logs at ./log/docker/lightpush_node1_2024-10-01_04-20-07__0120e364-548f-419c-83a7-7d8cce1fc6e9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 64871
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64871/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64871/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.249.136/tcp/64872/p2p/16Uiu2HAm7QnvU8i6YSZ8G71vcw44R3cMzYQE6aqwkMEMDfg4DMLS","/ip4/172.18.249.136/tcp/64873/ws/p2p/16Uiu2HAm7QnvU8i6YSZ8G71vcw44R3cMzYQE6aqwkMEMDfg4DMLS"],"enrUri":"enr:-LO4QAfsAi9Um9LKxcgAOMGtS9iaVJtLG13wl4Pk4A-gxeC6Z2bSSg7rYcSYx-j0-zrBOI9oQBz9hzQSP3BSQSOIW7cBgmlkgnY0gmlwhKwS-YiKbXVsdGlhZGRyc4wACgSsEvmIBv1p3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKyEoMtkB4kyA3ku8S31dJE22m7cBshaAi4cPefUc4RJ4N0Y3CC_WiDdWRwgv1qhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64871/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.99.57/tcp/51221/p2p/16Uiu2HAm2YSpVkKVLZuJZc6VAofGbeNKwgwNkMJhHYwx2Uq8XaZj"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64871/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.186.28/tcp/37730/p2p/16Uiu2HAm6Bh5q1zjm1sZaGLDW1YY9FbjiEqLFpM4P73dYxajtVfw"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51220/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37729/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64871/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1727756412761765376, "extraField": "extraValue"}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:64871/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 817a8f267d18
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 1278f8dde433
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 45f319b2539e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.