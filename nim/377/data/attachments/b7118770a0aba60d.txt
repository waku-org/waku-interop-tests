[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_get_store_message_with_meta with id: 2024-10-01_04-31-11__b8455ba9-f302-4abb-ba98-10beb43664e8
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-10-01_04-31-11__b8455ba9-f302-4abb-ba98-10beb43664e8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.239.193
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['53052', '53053', '53054', '53055', '53056']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 53052:53052 -p 53053:53053 -p 53054:53054 -p 53055:53055 -p 53056:53056 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=53054 --rest-port=53052 --tcp-port=53053 --discv5-udp-port=53055 --rest-address=0.0.0.0 --nat=extip:172.18.239.193 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1acec5a5c5675d6fa6c382cefedfb5a8cdd5da7adf579c5f1fdbf2d8ad98da42 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=53056 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.239.193 waku 0530bbad1bc1e3197b67270023e5177177981802863a60315e790b317de54c80
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 0530bbad1bc1. Setting up logs at ./log/docker/publishing_node1_2024-10-01_04-31-11__b8455ba9-f302-4abb-ba98-10beb43664e8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 53052
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53052/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53052/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.239.193/tcp/53053/p2p/16Uiu2HAmFqPCAE4oLvZoTYtNoeUNkVGqgkb2QMcwZFGm3HXYkhcb","/ip4/172.18.239.193/tcp/53054/ws/p2p/16Uiu2HAmFqPCAE4oLvZoTYtNoeUNkVGqgkb2QMcwZFGm3HXYkhcb"],"enrUri":"enr:-LO4QMCSgup81C6oHAflNjWcEwLVp4v4tVRQqcGV_Fp7M9fbHPi2TobWGsfZvKo9VGWGVKBPHKVgnb-b4fAzw1CoZYYBgmlkgnY0gmlwhKwS78GKbXVsdGlhZGRyc4wACgSsEu_BBs8-3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMvPLJyznlzgvJbSWMiCEUcaNy4QsU6vGopz5ZQzkebGIN0Y3CCzz2DdWRwgs8_hXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2024-10-01_04-31-11__b8455ba9-f302-4abb-ba98-10beb43664e8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.218.179
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['53138', '53139', '53140', '53141', '53142']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 53138:53138 -p 53139:53139 -p 53140:53140 -p 53141:53141 -p 53142:53142 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=53140 --rest-port=53138 --tcp-port=53139 --discv5-udp-port=53141 --rest-address=0.0.0.0 --nat=extip:172.18.218.179 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=abfa9d97efd7f934c1ed6a2685bc7d0c69cf930e4daefa88d1ddf2fa6052f8bf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=53142 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QMCSgup81C6oHAflNjWcEwLVp4v4tVRQqcGV_Fp7M9fbHPi2TobWGsfZvKo9VGWGVKBPHKVgnb-b4fAzw1CoZYYBgmlkgnY0gmlwhKwS78GKbXVsdGlhZGRyc4wACgSsEu_BBs8-3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMvPLJyznlzgvJbSWMiCEUcaNy4QsU6vGopz5ZQzkebGIN0Y3CCzz2DdWRwgs8_hXdha3UyAw --storenode=/ip4/172.18.239.193/tcp/53053/p2p/16Uiu2HAmFqPCAE4oLvZoTYtNoeUNkVGqgkb2QMcwZFGm3HXYkhcb --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.218.179 waku cf8136f52712b51ce4206114c90eecac885271ce17ac2e78132ca8d648236144
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID cf8136f52712. Setting up logs at ./log/docker/store_node1_2024-10-01_04-31-11__b8455ba9-f302-4abb-ba98-10beb43664e8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 53138
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53138/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53138/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.218.179/tcp/53139/p2p/16Uiu2HAkyeiUqU7mvt37tRtr4wuGdJsdCNAxa5Fas3Gk7vGNEon6","/ip4/172.18.218.179/tcp/53140/ws/p2p/16Uiu2HAkyeiUqU7mvt37tRtr4wuGdJsdCNAxa5Fas3Gk7vGNEon6"],"enrUri":"enr:-LO4QKZvZPNf3nheYjSMzWoSFZY8vTlb6cChjwXVubz6mPOXf_jZJynTa7QDqZ5xBA6IDH9FZ5t3jxB1t33l9jlahzwBgmlkgnY0gmlwhKwS2rOKbXVsdGlhZGRyc4wACgSsEtqzBs-U3QOCcnOFAAMBAACJc2VjcDI1NmsxoQI-xiA1tyqmOsrkkR76eB71sIrwF4j0oCm2JxUQWbb0p4N0Y3CCz5ODdWRwgs-VhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53138/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.239.193/tcp/53053/p2p/16Uiu2HAmFqPCAE4oLvZoTYtNoeUNkVGqgkb2QMcwZFGm3HXYkhcb"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53052/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53138/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53052/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)', "meta": "U3RvcmUgd29ya3MhIQ=="}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53052/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"VdodlJCZjsx49uz6hqYeRzUGkm62nVyyp1UGH+IV/ek="}]}'
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53138/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"VdodlJCZjsx49uz6hqYeRzUGkm62nVyyp1UGH+IV/ek="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 0530bbad1bc1
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id cf8136f52712
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.