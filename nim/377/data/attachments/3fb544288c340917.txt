[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_publish_on_not_subscribed_content_topic_works with id: 2024-10-01_04-24-45__257e8fc4-f472-47a2-bbf6-34558cc637e6
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-01_04-24-45__257e8fc4-f472-47a2-bbf6-34558cc637e6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.225.22
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['18745', '18746', '18747', '18748', '18749']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 18745:18745 -p 18746:18746 -p 18747:18747 -p 18748:18748 -p 18749:18749 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18747 --rest-port=18745 --tcp-port=18746 --discv5-udp-port=18748 --rest-address=0.0.0.0 --nat=extip:172.18.225.22 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=eb8d57a70a814ad43fe2e7e78a7f5febc1f9f0bb516d36d9c0dcbcbabaa5cc21 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18749 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.225.22 waku 6489bab9272624739d04a69a48c35368edd0409ce12cf5148d2b4e375d8a1bfa
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 6489bab92726. Setting up logs at ./log/docker/node1_2024-10-01_04-24-45__257e8fc4-f472-47a2-bbf6-34558cc637e6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 18745
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18745/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18745/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.225.22/tcp/18746/p2p/16Uiu2HAmGLZcwKEFio2qW1V22UMe7VbDt4h4Sutk7icAAJyGmPW3","/ip4/172.18.225.22/tcp/18747/ws/p2p/16Uiu2HAmGLZcwKEFio2qW1V22UMe7VbDt4h4Sutk7icAAJyGmPW3"],"enrUri":"enr:-LO4QGHo3Op-XmkGxgxHftsbgVJ1kC-rPXnETOAEGgvXfQcCcwoPiSVxWlyhAp8pkVwl8okPVDiS2kGK-uPy1HhcwkcBgmlkgnY0gmlwhKwS4RaKbXVsdGlhZGRyc4wACgSsEuEWBkk73QOCcnOFAAIBAACJc2VjcDI1NmsxoQM2tlSh8w0UkQxALTeuhUaynJZ3f-D1F6vb6m3bRW4pPIN0Y3CCSTqDdWRwgkk8hXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-10-01_04-24-45__257e8fc4-f472-47a2-bbf6-34558cc637e6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.8.146
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['45354', '45355', '45356', '45357', '45358']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 45354:45354 -p 45355:45355 -p 45356:45356 -p 45357:45357 -p 45358:45358 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45356 --rest-port=45354 --tcp-port=45355 --discv5-udp-port=45357 --rest-address=0.0.0.0 --nat=extip:172.18.8.146 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=d185462f2dadac1e09b908ccace91cdddb6507ec14e9fa4c04db4d2e8f59aacc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45358 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QGHo3Op-XmkGxgxHftsbgVJ1kC-rPXnETOAEGgvXfQcCcwoPiSVxWlyhAp8pkVwl8okPVDiS2kGK-uPy1HhcwkcBgmlkgnY0gmlwhKwS4RaKbXVsdGlhZGRyc4wACgSsEuEWBkk73QOCcnOFAAIBAACJc2VjcDI1NmsxoQM2tlSh8w0UkQxALTeuhUaynJZ3f-D1F6vb6m3bRW4pPIN0Y3CCSTqDdWRwgkk8hXdha3UyBQ --content-topic=/myapp/1/latest/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.8.146 waku a794e519e9139694168d7a99e96d22ae2d30b7b2e6bbc154a901985f08566fc6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID a794e519e913. Setting up logs at ./log/docker/node2_2024-10-01_04-24-45__257e8fc4-f472-47a2-bbf6-34558cc637e6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 45354
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45354/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45354/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.8.146/tcp/45355/p2p/16Uiu2HAm6pPS8w7BfLraaUKfLHCpx5kGNH32LCYtoyb8WbjXp3fK","/ip4/172.18.8.146/tcp/45356/ws/p2p/16Uiu2HAm6pPS8w7BfLraaUKfLHCpx5kGNH32LCYtoyb8WbjXp3fK"],"enrUri":"enr:-LO4QKBC5vwLiFWP0GzA_uA8Ry9l-PUVQkUN-ErjWyJieP83eA76fvnB6vM6TDIvV-PMUVJMOfQ0XtloBAyjM8Ce7rMBgmlkgnY0gmlwhKwSCJKKbXVsdGlhZGRyc4wACgSsEgiSBrEs3QOCcnOFAAIBAACJc2VjcDI1NmsxoQKpQjTXbLtz8k1HQNL-0H_XTTRIKyRiOi2Db8iwtUcEboN0Y3CCsSuDdWRwgrEthXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45354/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.225.22/tcp/18746/p2p/16Uiu2HAmGLZcwKEFio2qW1V22UMe7VbDt4h4Sutk7icAAJyGmPW3"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18745/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45354/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18745/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45354/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 6489bab92726
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id a794e519e913
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.