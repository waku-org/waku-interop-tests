[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_content_topics with id: 2024-10-01_04-19-12__324ec683-6a62-48f2-a67a-7651f1cc9854
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-10-01_04-19-12__324ec683-6a62-48f2-a67a-7651f1cc9854__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.78.150
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['15322', '15323', '15324', '15325', '15326']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 15322:15322 -p 15323:15323 -p 15324:15324 -p 15325:15325 -p 15326:15326 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15324 --rest-port=15322 --tcp-port=15323 --discv5-udp-port=15325 --rest-address=0.0.0.0 --nat=extip:172.18.78.150 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fe0bf786c99e8a0c3ea982d6c24f295e96e866bbe5af6aa6e497e8df2d1c6dc6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15326 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.78.150 waku 3093401b4252e014c008442066bac899971d4d81afd8487d12d45a761fd7cf44
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 3093401b4252. Setting up logs at ./log/docker/receiving_node1_2024-10-01_04-19-12__324ec683-6a62-48f2-a67a-7651f1cc9854__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 15322
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15322/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15322/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.78.150/tcp/15323/p2p/16Uiu2HAm7qtcB2rtGfSwZcSFEbsXJrUJDdrNN6giYQkqtuf5kvTm","/ip4/172.18.78.150/tcp/15324/ws/p2p/16Uiu2HAm7qtcB2rtGfSwZcSFEbsXJrUJDdrNN6giYQkqtuf5kvTm"],"enrUri":"enr:-LO4QMbVTbgqisH1qEeHkQhGYxeiLOaLaRdd-9I7b1bvoeGsIffi1VmYzK9NQ_trC9CRJQTeygfbiTrNIMKjAcqZ5q4BgmlkgnY0gmlwhKwSTpaKbXVsdGlhZGRyc4wACgSsEk6WBjvc3QOCcnOFAAMBAACJc2VjcDI1NmsxoQK4gHXQGOfEHpy2KOhjyxkZei1KWjyONtwx1yD0WJkbvIN0Y3CCO9uDdWRwgjvdhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-10-01_04-19-12__324ec683-6a62-48f2-a67a-7651f1cc9854__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.178.222
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['38213', '38214', '38215', '38216', '38217']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 38213:38213 -p 38214:38214 -p 38215:38215 -p 38216:38216 -p 38217:38217 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=38215 --rest-port=38213 --tcp-port=38214 --discv5-udp-port=38216 --rest-address=0.0.0.0 --nat=extip:172.18.178.222 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=498f14e7ea2b9ed6c50acd520fb5d824176dad50b33df2d4bac5348eecba08ac --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=38217 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.178.222 waku 5e62fc77c25ba883ed0fc1899363cb5dbdae2d2c99cddb068c1e7adebbedb36e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 5e62fc77c25b. Setting up logs at ./log/docker/receiving_node2_2024-10-01_04-19-12__324ec683-6a62-48f2-a67a-7651f1cc9854__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 38213
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38213/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38213/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.178.222/tcp/38214/p2p/16Uiu2HAkvcQbk7eKue4E9kR7S1DRaMbDY9fPHU26JQgs8YJkMxcJ","/ip4/172.18.178.222/tcp/38215/ws/p2p/16Uiu2HAkvcQbk7eKue4E9kR7S1DRaMbDY9fPHU26JQgs8YJkMxcJ"],"enrUri":"enr:-LO4QBD3gMq_z8B37AEWKAzXON7ZoxOLUKp1RoxlHk8UFkCtDqxUtmPsxrpTbLu9R0hmWP4khcKH_wCfr3NrcuToPi8BgmlkgnY0gmlwhKwSst6KbXVsdGlhZGRyc4wACgSsErLeBpVH3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIRm6932dPsETuHT02OUUql1vzRtaUeZWlaSAHTehxua4N0Y3CClUaDdWRwgpVIhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38213/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.78.150/tcp/15323/p2p/16Uiu2HAm7qtcB2rtGfSwZcSFEbsXJrUJDdrNN6giYQkqtuf5kvTm"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-10-01_04-19-12__324ec683-6a62-48f2-a67a-7651f1cc9854__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.29.140
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['12400', '12401', '12402', '12403', '12404']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 12400:12400 -p 12401:12401 -p 12402:12402 -p 12403:12403 -p 12404:12404 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=12402 --rest-port=12400 --tcp-port=12401 --discv5-udp-port=12403 --rest-address=0.0.0.0 --nat=extip:172.18.29.140 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7891def1efaebd92fc64ebcdb6af0cd2a027ad0642eb8ef438d0b1bb989e45de --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=12404 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QMbVTbgqisH1qEeHkQhGYxeiLOaLaRdd-9I7b1bvoeGsIffi1VmYzK9NQ_trC9CRJQTeygfbiTrNIMKjAcqZ5q4BgmlkgnY0gmlwhKwSTpaKbXVsdGlhZGRyc4wACgSsEk6WBjvc3QOCcnOFAAMBAACJc2VjcDI1NmsxoQK4gHXQGOfEHpy2KOhjyxkZei1KWjyONtwx1yD0WJkbvIN0Y3CCO9uDdWRwgjvdhXdha3UyCQ --lightpushnode=/ip4/172.18.78.150/tcp/15323/p2p/16Uiu2HAm7qtcB2rtGfSwZcSFEbsXJrUJDdrNN6giYQkqtuf5kvTm --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.29.140 waku 323750e3390dab07a2a5e44e8aafe2fe956323556bfffd66896f1890f1f10e75
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 323750e3390d. Setting up logs at ./log/docker/lightpush_node1_2024-10-01_04-19-12__324ec683-6a62-48f2-a67a-7651f1cc9854__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 12400
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12400/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12400/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.29.140/tcp/12401/p2p/16Uiu2HAm415Wfo3FhmQYLghucJ4Ehu8GazZk3ScMHXB1q8G1iEXX","/ip4/172.18.29.140/tcp/12402/ws/p2p/16Uiu2HAm415Wfo3FhmQYLghucJ4Ehu8GazZk3ScMHXB1q8G1iEXX"],"enrUri":"enr:-LO4QCl0ScuQqT6gkadNR5XtmBw9KO7LdaA9Sp44B4lWkK3LCppJcpApo5OEB2frrpe7c81KsGZ-Mo6SskECgpOURJYBgmlkgnY0gmlwhKwSHYyKbXVsdGlhZGRyc4wACgSsEh2MBjBy3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJ_bEUtK4u4B3jtZwgMt5fxWiQq-dxEp15oGdAS37DGRoN0Y3CCMHGDdWRwgjBzhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12400/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.78.150/tcp/15323/p2p/16Uiu2HAm7qtcB2rtGfSwZcSFEbsXJrUJDdrNN6giYQkqtuf5kvTm"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12400/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.178.222/tcp/38214/p2p/16Uiu2HAkvcQbk7eKue4E9kR7S1DRaMbDY9fPHU26JQgs8YJkMxcJ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15322/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38213/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic Empty string
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12400/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "", "timestamp": 1727756357046035712}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:12400/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A dictionary
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12400/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": {"key": "YWFh"}, "timestamp": 1727756357051274240}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:12400/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic An integer
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12400/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": 1234567890, "timestamp": 1727756357057229056}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:12400/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A list
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12400/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": ["YWFh"], "timestamp": 1727756357061277440}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:12400/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A bool
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12400/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": true, "timestamp": 1727756357064506368}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:12400/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 3093401b4252
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 5e62fc77c25b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 323750e3390d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.