[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_valid_meta with id: 2025-01-23_04-07-49__b93ca0f5-c951-4608-ba29-1a23f022282e
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-01-23_04-07-49__b93ca0f5-c951-4608-ba29-1a23f022282e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.172.121
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['65098', '65099', '65100', '65101', '65102']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 65098:65098 -p 65099:65099 -p 65100:65100 -p 65101:65101 -p 65102:65102 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=65100 --rest-port=65098 --tcp-port=65099 --discv5-udp-port=65101 --rest-address=0.0.0.0 --nat=extip:172.18.172.121 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=feb482a3a9cd99d4c794d2c9f1ab4a7d7d59bcdab70f3e03e6ba3ac9baac3eee --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=65102 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.172.121 waku 3536a65be9180a6160b1334fa9adc51c7e6669b08877bc3774c8a788b4912337
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 3536a65be918. Setting up logs at ./log/docker/receiving_node1_2025-01-23_04-07-49__b93ca0f5-c951-4608-ba29-1a23f022282e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 65098
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 113b87db3bde. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:65098/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:65098/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.172.121/tcp/65099/p2p/16Uiu2HAmJ5cyrhC1ZUkogK24W7NuDBqQuwgi29YUfzVEif5HpMTm","/ip4/172.18.172.121/tcp/65100/ws/p2p/16Uiu2HAmJ5cyrhC1ZUkogK24W7NuDBqQuwgi29YUfzVEif5HpMTm"],"enrUri":"enr:-L24QH4hCuJfkU_gIfzh2j3opEXeWvbIKxbWG-iBZKbpbqOyX1G9oNlMA3UQyxPclhr9mXpIquOl5FzOx6SCRwmH3eACgmlkgnY0gmlwhKwSrHmKbXVsdGlhZGRyc5YACASsEqx5Bv5LAAoErBKseQb-TN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDUJnK0b3i4LHlMOvGwGr9u7E7d19Acya--dQegSJ1JriDdGNwgv5Lg3VkcIL-TYV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-01-23_04-07-49__b93ca0f5-c951-4608-ba29-1a23f022282e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.206.199
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['2551', '2552', '2553', '2554', '2555']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 2551:2551 -p 2552:2552 -p 2553:2553 -p 2554:2554 -p 2555:2555 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2553 --rest-port=2551 --tcp-port=2552 --discv5-udp-port=2554 --rest-address=0.0.0.0 --nat=extip:172.18.206.199 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0e593cffa69f3589acf255f1030c0905facae3e66ffae1f3a3eeb12b16eeafcd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2555 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.206.199 waku b7a7852376e36f70837cf4cc283c12276e8eaeeef3bfca9e0e1e1cd3cb9126a7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID b7a7852376e3. Setting up logs at ./log/docker/receiving_node2_2025-01-23_04-07-49__b93ca0f5-c951-4608-ba29-1a23f022282e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 2551
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2551/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2551/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.206.199/tcp/2552/p2p/16Uiu2HAmJEkc4nrxvycpb6ALX4YyEfdJ6s7td42v65Mx3jqdMeca","/ip4/172.18.206.199/tcp/2553/ws/p2p/16Uiu2HAmJEkc4nrxvycpb6ALX4YyEfdJ6s7td42v65Mx3jqdMeca"],"enrUri":"enr:-L24QLK7XeC2ypSBexr0CIVwg8-NKecE5vY1MNac4Mp-hHggDG0HRPEjor9gQWj12A5m77MmiSPr-_imY4Y8Z1e45VECgmlkgnY0gmlwhKwSzseKbXVsdGlhZGRyc5YACASsEs7HBgn4AAoErBLOxwYJ-d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDUvCj7h4gp_RiCc4GLIC5C725gLQOgF-mkya7-7yDoCODdGNwggn4g3VkcIIJ-oV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2551/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.172.121/tcp/65099/p2p/16Uiu2HAmJ5cyrhC1ZUkogK24W7NuDBqQuwgi29YUfzVEif5HpMTm"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-01-23_04-07-49__b93ca0f5-c951-4608-ba29-1a23f022282e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.194.209
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['25520', '25521', '25522', '25523', '25524']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 25520:25520 -p 25521:25521 -p 25522:25522 -p 25523:25523 -p 25524:25524 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25522 --rest-port=25520 --tcp-port=25521 --discv5-udp-port=25523 --rest-address=0.0.0.0 --nat=extip:172.18.194.209 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=efe3baecf746a8aa4796f28befcf352a89cab5eb11b3ceac3d8ac50dddaebcfc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25524 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QH4hCuJfkU_gIfzh2j3opEXeWvbIKxbWG-iBZKbpbqOyX1G9oNlMA3UQyxPclhr9mXpIquOl5FzOx6SCRwmH3eACgmlkgnY0gmlwhKwSrHmKbXVsdGlhZGRyc5YACASsEqx5Bv5LAAoErBKseQb-TN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDUJnK0b3i4LHlMOvGwGr9u7E7d19Acya--dQegSJ1JriDdGNwgv5Lg3VkcIL-TYV3YWt1Mgk --lightpushnode=/ip4/172.18.172.121/tcp/65099/p2p/16Uiu2HAmJ5cyrhC1ZUkogK24W7NuDBqQuwgi29YUfzVEif5HpMTm --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.194.209 waku cc78fec5daa94e6bfcc3641a4d1dec394a1789232d66931801dd3533cf36dfaf
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID cc78fec5daa9. Setting up logs at ./log/docker/lightpush_node1_2025-01-23_04-07-49__b93ca0f5-c951-4608-ba29-1a23f022282e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 25520
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25520/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25520/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.194.209/tcp/25521/p2p/16Uiu2HAmDqbJ6F2LP2pxNkQPcneEVBEd2SyuzHwAsnWHr48ZRvFD","/ip4/172.18.194.209/tcp/25522/ws/p2p/16Uiu2HAmDqbJ6F2LP2pxNkQPcneEVBEd2SyuzHwAsnWHr48ZRvFD"],"enrUri":"enr:-L24QI_0Isu7qo8o4qhbq7qzmVAjbZVPxcW2cck-SZZnzCGLYsJ1OgiWJ8MTzWXJ2ox-5tBHozFoA6SuYyv0_MZw57MCgmlkgnY0gmlwhKwSwtGKbXVsdGlhZGRyc5YACASsEsLRBmOxAAoErBLC0QZjst0DgnJzhQADAQAAiXNlY3AyNTZrMaEDEZMB3XKZmyTc9cYz6sOuzxMskhBpTpT2aXfjNFKgtAyDdGNwgmOxg3VkcIJjs4V3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25520/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.172.121/tcp/65099/p2p/16Uiu2HAmJ5cyrhC1ZUkogK24W7NuDBqQuwgi29YUfzVEif5HpMTm"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25520/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.206.199/tcp/2552/p2p/16Uiu2HAmJEkc4nrxvycpb6ALX4YyEfdJ6s7td42v65Mx3jqdMeca"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:65098/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2551/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25520/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1737605273691032064, "meta": "TGlnaHQgcHVzaCB3b3JrcyEh"}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:65098/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1737605273691032064,"meta":"TGlnaHQgcHVzaCB3b3JrcyEh","ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2551/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1737605273691032064,"meta":"TGlnaHQgcHVzaCB3b3JrcyEh","ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 3536a65be918
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id b7a7852376e3
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 3536a65be918. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id cc78fec5daa9
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container b7a7852376e3. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.