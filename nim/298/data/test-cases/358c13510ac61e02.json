{"uid":"358c13510ac61e02","name":"test_light_push_and_retrieve_100_messages","fullName":"tests.light_push.test_publish.TestLightPushPublish#test_light_push_and_retrieve_100_messages","historyId":"5c0b6e9b2ea6543640c209e9335b5286","time":{"start":1722745135370,"stop":1722745135379,"duration":9},"status":"broken","statusMessage":"Exception: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:56323/lightpush/v1/message with response: b'Failed to request a message push: Lightpush request has not been published to any peers. msg_hash: 0x085d99ceb0c22f48f18bdfb9d08e86331ece8bf37148e32967551fd9e70cdafc'","statusTrace":"src/node/api_clients/base_client.py:14: in make_request\n    response.raise_for_status()\n/opt/hostedtoolcache/Python/3.12.4/x64/lib/python3.12/site-packages/requests/models.py:1021: in raise_for_status\n    raise HTTPError(http_error_msg, response=self)\nE   requests.exceptions.HTTPError: 503 Server Error: Service Unavailable for url: http://127.0.0.1:56323/lightpush/v1/message\n\nDuring handling of the above exception, another exception occurred:\ntests/light_push/test_publish.py:275: in test_light_push_and_retrieve_100_messages\n    self.light_push_node1.send_light_push_message(self.create_payload(message=message))\nsrc/node/waku_node.py:338: in send_light_push_message\n    return self._api.send_light_push_message(payload)\nsrc/node/api_clients/rest.py:57: in send_light_push_message\n    return self.rest_call(\"post\", \"lightpush/v1/message\", json.dumps(payload))\nsrc/node/api_clients/rest.py:16: in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\nsrc/node/api_clients/base_client.py:17: in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\nE   Exception: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:56323/lightpush/v1/message with response: b'Failed to request a message push: Lightpush request has not been published to any peers. msg_hash: 0x085d99ceb0c22f48f18bdfb9d08e86331ece8bf37148e32967551fd9e70cdafc'","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":2,"retriesStatusChange":false,"beforeStages":[{"name":"set_allure_env_variables","time":{"start":1722744746524,"stop":1722744746524,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes","time":{"start":1722745132212,"stop":1722745132212,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_setup","time":{"start":1722745132212,"stop":1722745132212,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail","time":{"start":1722745132212,"stop":1722745132212,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_id","time":{"start":1722745132212,"stop":1722745132212,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"light_push_publish_setup","time":{"start":1722745132213,"stop":1722745135369,"duration":3156},"status":"passed","steps":[{"name":"setup_first_receiving_node","time":{"start":1722745132213,"stop":1722745133754,"duration":1541},"status":"passed","steps":[{"name":"start_receiving_node","time":{"start":1722745132213,"stop":1722745133753,"duration":1540},"status":"passed","steps":[{"name":"add_node_peer","time":{"start":1722745133753,"stop":1722745133753,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"args","value":"(<tests.light_push.test_publish.TestLightPushPublish object at 0x7fc86f49f620>, <src.node.waku_node.WakuNode object at 0x7fc86edb63c0>, [])"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"image","value":"'wakuorg/nwaku:latest'"},{"name":"node_index","value":"1"},{"name":"lightpush","value":"'true'"},{"name":"relay","value":"'true'"},{"name":"nodekey","value":"'30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68'"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"lightpush","value":"'true'"},{"name":"relay","value":"'true'"}],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"setup_first_lightpush_node","time":{"start":1722745133754,"stop":1722745135357,"duration":1603},"status":"passed","steps":[{"name":"setup_lightpush_node","time":{"start":1722745133754,"stop":1722745135357,"duration":1603},"status":"passed","steps":[{"name":"add_node_peer","time":{"start":1722745135325,"stop":1722745135357,"duration":32},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"args","value":"(<tests.light_push.test_publish.TestLightPushPublish object at 0x7fc86f49f620>, <src.node.waku_node.WakuNode object at 0x7fc86ee52a50>, ['/ip4/172.18.55.173/tcp/10510/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip'])"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"image","value":"'wakuorg/nwaku:latest'"},{"name":"node_index","value":"1"},{"name":"lightpush","value":"'true'"},{"name":"relay","value":"'false'"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"lightpush","value":"'true'"},{"name":"relay","value":"'false'"}],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"subscribe_to_pubsub_topics_via_relay","time":{"start":1722745135357,"stop":1722745135369,"duration":12},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node","value":"None"},{"name":"pubsub_topics","value":"None"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":7,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"common_setup","time":{"start":1722745132213,"stop":1722745132213,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"light_push_setup","time":{"start":1722745132213,"stop":1722745132213,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"broken","statusMessage":"Exception: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:56323/lightpush/v1/message with response: b'Failed to request a message push: Lightpush request has not been published to any peers. msg_hash: 0x085d99ceb0c22f48f18bdfb9d08e86331ece8bf37148e32967551fd9e70cdafc'","statusTrace":"src/node/api_clients/base_client.py:14: in make_request\n    response.raise_for_status()\n/opt/hostedtoolcache/Python/3.12.4/x64/lib/python3.12/site-packages/requests/models.py:1021: in raise_for_status\n    raise HTTPError(http_error_msg, response=self)\nE   requests.exceptions.HTTPError: 503 Server Error: Service Unavailable for url: http://127.0.0.1:56323/lightpush/v1/message\n\nDuring handling of the above exception, another exception occurred:\ntests/light_push/test_publish.py:275: in test_light_push_and_retrieve_100_messages\n    self.light_push_node1.send_light_push_message(self.create_payload(message=message))\nsrc/node/waku_node.py:338: in send_light_push_message\n    return self._api.send_light_push_message(payload)\nsrc/node/api_clients/rest.py:57: in send_light_push_message\n    return self.rest_call(\"post\", \"lightpush/v1/message\", json.dumps(payload))\nsrc/node/api_clients/rest.py:16: in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\nsrc/node/api_clients/base_client.py:17: in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\nE   Exception: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:56323/lightpush/v1/message with response: b'Failed to request a message push: Lightpush request has not been published to any peers. msg_hash: 0x085d99ceb0c22f48f18bdfb9d08e86331ece8bf37148e32967551fd9e70cdafc'","steps":[{"name":"create_message","time":{"start":1722745135370,"stop":1722745135370,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"payload","value":"'TV8w'"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"create_payload","time":{"start":1722745135371,"stop":1722745135371,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"pubsub_topic","value":"None"},{"name":"message","value":"{'payload': 'TV8w', 'contentTopic': '/myapp/1/latest/proto', 'timestamp': 1722745135370383104}"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"882d8333c9a09bb1","name":"log","source":"882d8333c9a09bb1.txt","type":"text/plain","size":31608}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":2,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"test_setup::0","time":{"start":1722745135417,"stop":1722745135420,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes::0","time":{"start":1722745135420,"stop":1722745140617,"duration":5197},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail::0","time":{"start":1722745140617,"stop":1722745140621,"duration":4},"status":"passed","steps":[],"attachments":[{"uid":"193008f17779b692","name":"lightpush_node1_2024-08-04_04-18-52__32d830a0-a8bc-4938-afc9-1aa7f22295e2__wakuorg_nwaku:latest.log","source":"193008f17779b692.txt","type":"text/plain","size":93909},{"uid":"a213986454a6c0b1","name":"receiving_node1_2024-08-04_04-18-52__32d830a0-a8bc-4938-afc9-1aa7f22295e2__wakuorg_nwaku:latest.log","source":"a213986454a6c0b1.txt","type":"text/plain","size":96805}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"set_allure_env_variables::0","time":{"start":1722745942796,"stop":1722745942797,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"tests.light_push"},{"name":"suite","value":"test_publish"},{"name":"subSuite","value":"TestLightPushPublish"},{"name":"host","value":"fv-az564-635"},{"name":"thread","value":"2099-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.light_push.test_publish"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"f0171eec40d4c5c6","status":"broken","statusDetails":"Exception: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:49652/lightpush/v1/message with response: b'Failed to request a message push: Lightpush request has not been published to any peers. msg_hash: 0x2aa32a160e163c150bdfdedfec3a0ccfeaeb9eb41e63e7710a0f07fbd6f298ad'","time":{"start":1722745127207,"stop":1722745127216,"duration":9}},{"uid":"55b4c5d562913f3e","status":"broken","statusDetails":"Exception: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:39849/lightpush/v1/message with response: b'Failed to request a message push: Lightpush request has not been published to any peers. msg_hash: 0xd39945d7012c7f807b6080eeedd7ae2e9587d154b8c9d0cf4ecd0c67cec74235'","time":{"start":1722745120070,"stop":1722745120077,"duration":7}}],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":2,"skipped":0,"passed":54,"unknown":0,"total":56},"items":[{"uid":"6a1ada358f1d07eb","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/297//#testresult/6a1ada358f1d07eb","status":"broken","statusDetails":"Exception: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:43770/lightpush/v1/message with response: b'Failed to request a message push: Lightpush request has not been published to any peers. msg_hash: 0x6735d94ce6081f58ac6e771c15a0061a32839f07e4896eb259295235d822e0cd'","time":{"start":1722658647396,"stop":1722658647403,"duration":7}},{"uid":"c232c39f8b1fcecd","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/296//#testresult/c232c39f8b1fcecd","status":"passed","time":{"start":1722572171333,"stop":1722572172992,"duration":1659}},{"uid":"21d86d96061db0ce","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/295//#testresult/21d86d96061db0ce","status":"passed","time":{"start":1722485787939,"stop":1722485789603,"duration":1664}},{"uid":"e68c69b7d0fcbc59","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/294//#testresult/e68c69b7d0fcbc59","status":"passed","time":{"start":1722399247549,"stop":1722399249226,"duration":1677}},{"uid":"b5d0203c0d5f6567","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/293//#testresult/b5d0203c0d5f6567","status":"passed","time":{"start":1722312971064,"stop":1722312972674,"duration":1610}},{"uid":"ee8caf35ede62833","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/292//#testresult/ee8caf35ede62833","status":"passed","time":{"start":1722235805401,"stop":1722235807024,"duration":1623}},{"uid":"5ac80639ea72c7cd","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/290//#testresult/5ac80639ea72c7cd","status":"passed","time":{"start":1722140136475,"stop":1722140138091,"duration":1616}},{"uid":"917d6435cc746e46","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/289//#testresult/917d6435cc746e46","status":"passed","time":{"start":1722053741105,"stop":1722053742773,"duration":1668}},{"uid":"ddcb831b7bdb3d83","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/288//#testresult/ddcb831b7bdb3d83","status":"passed","time":{"start":1721967410459,"stop":1721967412068,"duration":1609}},{"uid":"bc5cb9bf02e96cee","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/287//#testresult/bc5cb9bf02e96cee","status":"passed","time":{"start":1721880973004,"stop":1721880974651,"duration":1647}},{"uid":"9f47cb13454d4e0c","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/286//#testresult/9f47cb13454d4e0c","status":"passed","time":{"start":1721794545327,"stop":1721794546963,"duration":1636}},{"uid":"25b8d4e700c04f1e","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/285//#testresult/25b8d4e700c04f1e","status":"passed","time":{"start":1721708184237,"stop":1721708185806,"duration":1569}},{"uid":"991b731346614182","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/284//#testresult/991b731346614182","status":"passed","time":{"start":1721621799573,"stop":1721621801198,"duration":1625}},{"uid":"9061bc9f742c0f0e","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/283//#testresult/9061bc9f742c0f0e","status":"passed","time":{"start":1721535367700,"stop":1721535369325,"duration":1625}},{"uid":"5b9f705baf902a32","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/282//#testresult/5b9f705baf902a32","status":"passed","time":{"start":1721449046442,"stop":1721449048059,"duration":1617}},{"uid":"427bf835e3f55d1e","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/281//#testresult/427bf835e3f55d1e","status":"passed","time":{"start":1721362620666,"stop":1721362622249,"duration":1583}},{"uid":"ab96660c257335d7","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/280//#testresult/ab96660c257335d7","status":"passed","time":{"start":1721277346361,"stop":1721277347892,"duration":1531}},{"uid":"777e73ccc5a3d09e","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/279//#testresult/777e73ccc5a3d09e","status":"passed","time":{"start":1721276109299,"stop":1721276110958,"duration":1659}},{"uid":"cda3bd1d572a29c5","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/278//#testresult/cda3bd1d572a29c5","status":"passed","time":{"start":1721189768222,"stop":1721189769888,"duration":1666}},{"uid":"5ec4332ac2f37663","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/277//#testresult/5ec4332ac2f37663","status":"passed","time":{"start":1721103416013,"stop":1721103417665,"duration":1652}}]},"tags":[]},"source":"358c13510ac61e02.json","parameterValues":[]}