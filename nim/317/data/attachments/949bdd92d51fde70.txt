[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_version with id: 2024-08-15_04-17-36__5a4e4c90-56e9-423a-aa0b-1a511fb0e4d9
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-15_04-17-36__5a4e4c90-56e9-423a-aa0b-1a511fb0e4d9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.38.79
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['11970', '11971', '11972', '11973', '11974']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:429 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:161 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:163 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 11970:11970 -p 11971:11971 -p 11972:11972 -p 11973:11973 -p 11974:11974 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=11972 --rest-port=11970 --tcp-port=11971 --discv5-udp-port=11973 --rest-address=0.0.0.0 --nat=extip:172.18.38.79 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=11974 --metrics-logging=true --lightpush=true --relay=true --nodekey=30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.38.79 waku a0bc4ace5d2a6f6d0c0d2c3ed689aaba50ea1dc8aaedc3206a100352685db908
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID a0bc4ace5d2a. Setting up logs at ./log/docker/receiving_node1_2024-08-15_04-17-36__5a4e4c90-56e9-423a-aa0b-1a511fb0e4d9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:175 Started container from image wakuorg/nwaku:latest. REST: 11970
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11970/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:275 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11970/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.38.79/tcp/11971/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip","/ip4/172.18.38.79/tcp/11972/ws/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"],"enrUri":"enr:-LO4QItGxCTiSZDO6cx_WzI2ZB-bl4IaKVQkrBOtsrsrRcotIyy1CPJyYeaKtgbINCw3lxoWV8HsWyn1voULbDUdNAEBgmlkgnY0gmlwhKwSJk-KbXVsdGlhZGRyc4wACgSsEiZPBi7E3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCLsODdWRwgi7FhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:280 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-15_04-17-36__5a4e4c90-56e9-423a-aa0b-1a511fb0e4d9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.75.243
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['9063', '9064', '9065', '9066', '9067']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:429 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:161 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:163 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 9063:9063 -p 9064:9064 -p 9065:9065 -p 9066:9066 -p 9067:9067 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=9065 --rest-port=9063 --tcp-port=9064 --discv5-udp-port=9066 --rest-address=0.0.0.0 --nat=extip:172.18.75.243 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=9067 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.75.243 waku eb455aae4b43a2d4555944959883413c37c608b67829ec5b3b42d67074091c73
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID eb455aae4b43. Setting up logs at ./log/docker/receiving_node2_2024-08-15_04-17-36__5a4e4c90-56e9-423a-aa0b-1a511fb0e4d9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:175 Started container from image wakuorg/nwaku:latest. REST: 9063
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9063/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:275 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9063/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.75.243/tcp/9064/p2p/16Uiu2HAmCJpDSccEpjHf2x7WnYmh76Km473VABKBUX8zDN9tbzrn","/ip4/172.18.75.243/tcp/9065/ws/p2p/16Uiu2HAmCJpDSccEpjHf2x7WnYmh76Km473VABKBUX8zDN9tbzrn"],"enrUri":"enr:-LO4QM05WAvWMdnQFPh6e5NPcxJ3xVZluOYW0r9MANM-3KEnDjNPslKKA_JIN59Ta4aJJLsSDh2g72hY50jFGbti9Z8BgmlkgnY0gmlwhKwSS_OKbXVsdGlhZGRyc4wACgSsEkvzBiNp3QOCcnOFAAMBAACJc2VjcDI1NmsxoQL61Ox9_a0wIuGLBCAeatb9_W5bIJkivZbXv9GlHOX5C4N0Y3CCI2iDdWRwgiNqhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:280 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9063/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.38.79/tcp/11971/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-15_04-17-36__5a4e4c90-56e9-423a-aa0b-1a511fb0e4d9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.24.34
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['37010', '37011', '37012', '37013', '37014']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:429 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:161 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:163 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 37010:37010 -p 37011:37011 -p 37012:37012 -p 37013:37013 -p 37014:37014 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37012 --rest-port=37010 --tcp-port=37011 --discv5-udp-port=37013 --rest-address=0.0.0.0 --nat=extip:172.18.24.34 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37014 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QItGxCTiSZDO6cx_WzI2ZB-bl4IaKVQkrBOtsrsrRcotIyy1CPJyYeaKtgbINCw3lxoWV8HsWyn1voULbDUdNAEBgmlkgnY0gmlwhKwSJk-KbXVsdGlhZGRyc4wACgSsEiZPBi7E3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCLsODdWRwgi7FhXdha3UyCQ --lightpushnode=/ip4/172.18.38.79/tcp/11971/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.24.34 waku 04ec22cfb32f50ba04f115496931313ca5f0b176e2d86f7e976340e35eca8331
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 04ec22cfb32f. Setting up logs at ./log/docker/lightpush_node1_2024-08-15_04-17-36__5a4e4c90-56e9-423a-aa0b-1a511fb0e4d9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:175 Started container from image wakuorg/nwaku:latest. REST: 37010
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37010/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:275 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37010/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.24.34/tcp/37011/p2p/16Uiu2HAkwFRvvcEVBsxm4iFP7bqmZMkDnHVTnT82mf3ozYniqoej","/ip4/172.18.24.34/tcp/37012/ws/p2p/16Uiu2HAkwFRvvcEVBsxm4iFP7bqmZMkDnHVTnT82mf3ozYniqoej"],"enrUri":"enr:-LO4QEPrZ8xSy_0dTEwDMWm-ueL2w-kj21ROpo0zQVgsOaovA6jCzpiJZIGdAhpBHlERMPZ4HwO38rnISeCtlF5-4fkBgmlkgnY0gmlwhKwSGCKKbXVsdGlhZGRyc4wACgSsEhgiBpCU3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIbF64T709dLP9bnPJx1YiRgsLnUXhiVYQgAWCZ-fCTdIN0Y3CCkJODdWRwgpCVhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:280 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37010/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.38.79/tcp/11971/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37010/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.75.243/tcp/9064/p2p/16Uiu2HAmCJpDSccEpjHf2x7WnYmh76Km473VABKBUX8zDN9tbzrn"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11970/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9063/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37010/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1723695461163786496, "version": 2.1}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:37010/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:219 Stopping container with id a0bc4ace5d2a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:219 Stopping container with id eb455aae4b43
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:219 Stopping container with id 04ec22cfb32f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Container stopped.