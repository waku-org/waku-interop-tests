[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_meta with id: 2024-08-15_04-17-48__02616ce2-519c-490f-b557-6d0e793db8af
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-15_04-17-48__02616ce2-519c-490f-b557-6d0e793db8af__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.15.227
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['56092', '56093', '56094', '56095', '56096']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:429 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:161 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:163 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 56092:56092 -p 56093:56093 -p 56094:56094 -p 56095:56095 -p 56096:56096 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56094 --rest-port=56092 --tcp-port=56093 --discv5-udp-port=56095 --rest-address=0.0.0.0 --nat=extip:172.18.15.227 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56096 --metrics-logging=true --lightpush=true --relay=true --nodekey=30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.15.227 waku dd161090c0d759d944b6e4f426658a91dfd1b675fa03abc5e5ff8c200b5cc135
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID dd161090c0d7. Setting up logs at ./log/docker/receiving_node1_2024-08-15_04-17-48__02616ce2-519c-490f-b557-6d0e793db8af__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:175 Started container from image wakuorg/nwaku:latest. REST: 56092
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56092/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:275 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56092/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.15.227/tcp/56093/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip","/ip4/172.18.15.227/tcp/56094/ws/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"],"enrUri":"enr:-LO4QI7_-g6Gsdqc6NBCqralbYccxh1qdjoguXIH5KS80eNIR1ZpriaNp3h4G5FevbZDcCpui4ry4Ub9H80O3pFsnuQBgmlkgnY0gmlwhKwSD-OKbXVsdGlhZGRyc4wACgSsEg_jBtse3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CC2x2DdWRwgtsfhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:280 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-15_04-17-48__02616ce2-519c-490f-b557-6d0e793db8af__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.160.191
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['41783', '41784', '41785', '41786', '41787']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:429 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:161 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:163 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 41783:41783 -p 41784:41784 -p 41785:41785 -p 41786:41786 -p 41787:41787 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=41785 --rest-port=41783 --tcp-port=41784 --discv5-udp-port=41786 --rest-address=0.0.0.0 --nat=extip:172.18.160.191 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=41787 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.160.191 waku 44312a485ff9a0244bcf928008dccb314407437e0952a8641b302fe54d9f6acc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 44312a485ff9. Setting up logs at ./log/docker/receiving_node2_2024-08-15_04-17-48__02616ce2-519c-490f-b557-6d0e793db8af__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:175 Started container from image wakuorg/nwaku:latest. REST: 41783
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41783/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:275 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41783/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.160.191/tcp/41784/p2p/16Uiu2HAmHZofVHjLmAHbaKxte3QaRmQ491xXoM7o6q9rcuxUFy4K","/ip4/172.18.160.191/tcp/41785/ws/p2p/16Uiu2HAmHZofVHjLmAHbaKxte3QaRmQ491xXoM7o6q9rcuxUFy4K"],"enrUri":"enr:-LO4QOhVD9v_djf08KRTanOMkENwk8bUEOc-zimFEC1gm8l2FY6-aZhUY1xi8JWTsV4IstUo3iU9iMcuTltxwQDf18MBgmlkgnY0gmlwhKwSoL-KbXVsdGlhZGRyc4wACgSsEqC_BqM53QOCcnOFAAMBAACJc2VjcDI1NmsxoQNI9nKXvQJbx13_X_U1_F8bDmmm-z2reP9Vo4rVdnQyYIN0Y3CCoziDdWRwgqM6hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:280 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41783/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.15.227/tcp/56093/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-15_04-17-48__02616ce2-519c-490f-b557-6d0e793db8af__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.194.226
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['17802', '17803', '17804', '17805', '17806']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:429 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:161 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:163 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 17802:17802 -p 17803:17803 -p 17804:17804 -p 17805:17805 -p 17806:17806 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17804 --rest-port=17802 --tcp-port=17803 --discv5-udp-port=17805 --rest-address=0.0.0.0 --nat=extip:172.18.194.226 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17806 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QI7_-g6Gsdqc6NBCqralbYccxh1qdjoguXIH5KS80eNIR1ZpriaNp3h4G5FevbZDcCpui4ry4Ub9H80O3pFsnuQBgmlkgnY0gmlwhKwSD-OKbXVsdGlhZGRyc4wACgSsEg_jBtse3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CC2x2DdWRwgtsfhXdha3UyCQ --lightpushnode=/ip4/172.18.15.227/tcp/56093/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.194.226 waku 4cc57b7cde137cf788fd1d9e3bf76ad0da1aaa28711b3293a18a8b72450017d8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 4cc57b7cde13. Setting up logs at ./log/docker/lightpush_node1_2024-08-15_04-17-48__02616ce2-519c-490f-b557-6d0e793db8af__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:175 Started container from image wakuorg/nwaku:latest. REST: 17802
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17802/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:275 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17802/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.194.226/tcp/17803/p2p/16Uiu2HAkxjSJKNQCsRJwuw5ePLtpBX2SsCvkJX7gyspVcA4NDaKF","/ip4/172.18.194.226/tcp/17804/ws/p2p/16Uiu2HAkxjSJKNQCsRJwuw5ePLtpBX2SsCvkJX7gyspVcA4NDaKF"],"enrUri":"enr:-LO4QPiazqpgcmfUpYF3zz3kYIobzH887NgcnMdJ1MiSpKCVYjsI4qB_pbHmLW9zSQBIdMi7M-7DxWyDPnm6IgPXROQBgmlkgnY0gmlwhKwSwuKKbXVsdGlhZGRyc4wACgSsEsLiBkWM3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIxIAvu_He-hs6hWMBQvIvnasjHo6S3rr21vAlxuhbkloN0Y3CCRYuDdWRwgkWNhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:280 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:17802/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.15.227/tcp/56093/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:17802/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.160.191/tcp/41784/p2p/16Uiu2HAmHZofVHjLmAHbaKxte3QaRmQ491xXoM7o6q9rcuxUFy4K"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56092/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41783/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:17802/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1723695473853705728, "meta": "Light push works!!"}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:17802/lightpush/v1/message. Response content: b'Invalid message: Incorrect base64 string'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:219 Stopping container with id dd161090c0d7
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:219 Stopping container with id 44312a485ff9
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:219 Stopping container with id 4cc57b7cde13
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Container stopped.