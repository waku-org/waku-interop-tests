[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_version with id: 2024-11-27_04-15-37__82dc9259-d84e-4137-96a2-ff6433d0d8c1
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-11-27_04-15-37__82dc9259-d84e-4137-96a2-ff6433d0d8c1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.38.158
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['21286', '21287', '21288', '21289', '21290']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 21286:21286 -p 21287:21287 -p 21288:21288 -p 21289:21289 -p 21290:21290 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=21288 --rest-port=21286 --tcp-port=21287 --discv5-udp-port=21289 --rest-address=0.0.0.0 --nat=extip:172.18.38.158 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b1bec9b7bfe3a96d748c622222ff7cdfa6915e8d9beb4d0fdee9325e7df47af7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=21290 --metrics-logging=true --lightpush=true --relay=true
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 3dec6b634259. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.38.158 waku b770d5a67fa2ee94bede79e2bec7285a07d379167f51ec1e2cffacfcafd7542c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID b770d5a67fa2. Setting up logs at ./log/docker/receiving_node1_2024-11-27_04-15-37__82dc9259-d84e-4137-96a2-ff6433d0d8c1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 21286
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21286/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21286/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.38.158/tcp/21287/p2p/16Uiu2HAmNS3z7QVpe66RPegJ55zvzj8bgSpJaD7W3TAsZ2xs26pJ","/ip4/172.18.38.158/tcp/21288/ws/p2p/16Uiu2HAmNS3z7QVpe66RPegJ55zvzj8bgSpJaD7W3TAsZ2xs26pJ"],"enrUri":"enr:-L24QIycHCzOd7IrVxENbdjKTngQ4PSGwea_bCCq6pIg2qbAC7RaCvJz7cJK_9lTuMMQ6ksvQ84cql7YCtCUCOpaHjICgmlkgnY0gmlwhKwSJp6KbXVsdGlhZGRyc5YACASsEiaeBlMnAAoErBImngZTKN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDkURtvkx4DOTLKDsOic11RXcKNCCAL3H3FIYPfTD801ODdGNwglMng3VkcIJTKYV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-11-27_04-15-37__82dc9259-d84e-4137-96a2-ff6433d0d8c1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.9.196
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['49769', '49770', '49771', '49772', '49773']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 49769:49769 -p 49770:49770 -p 49771:49771 -p 49772:49772 -p 49773:49773 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=49771 --rest-port=49769 --tcp-port=49770 --discv5-udp-port=49772 --rest-address=0.0.0.0 --nat=extip:172.18.9.196 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ccaba1bd210e8249e1ebdf8b9f8a3b7d38f62ce1ded80cd78eb524377deb7472 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=49773 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.9.196 waku 78e604dd39fe60146a78e75c2481b9ae5698a1f4810e17d8984c0560790acc58
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 78e604dd39fe. Setting up logs at ./log/docker/receiving_node2_2024-11-27_04-15-37__82dc9259-d84e-4137-96a2-ff6433d0d8c1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 49769
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49769/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49769/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.9.196/tcp/49770/p2p/16Uiu2HAkv8JwWpjTdCqXRZb7zTpbsXij5GNr4QEzWRZDMYXdYZ9Q","/ip4/172.18.9.196/tcp/49771/ws/p2p/16Uiu2HAkv8JwWpjTdCqXRZb7zTpbsXij5GNr4QEzWRZDMYXdYZ9Q"],"enrUri":"enr:-L24QC7L55rzn1ggC-mysmH503MIw1u7V_Qs7I8NA_1FR68RO_r0MM_98V6AJp8OsV1yhh8FgMQvh4fAJFdeTO6VezECgmlkgnY0gmlwhKwSCcSKbXVsdGlhZGRyc5YACASsEgnEBsJqAAoErBIJxAbCa90DgnJzhQADAQAAiXNlY3AyNTZrMaECCmkGI1wS3AdsFBwP3Rk2cEzU7wiNe0RbC_iLQnJGJ_-DdGNwgsJqg3VkcILCbIV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49769/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.38.158/tcp/21287/p2p/16Uiu2HAmNS3z7QVpe66RPegJ55zvzj8bgSpJaD7W3TAsZ2xs26pJ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-11-27_04-15-37__82dc9259-d84e-4137-96a2-ff6433d0d8c1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.225.191
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['26277', '26278', '26279', '26280', '26281']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 26277:26277 -p 26278:26278 -p 26279:26279 -p 26280:26280 -p 26281:26281 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26279 --rest-port=26277 --tcp-port=26278 --discv5-udp-port=26280 --rest-address=0.0.0.0 --nat=extip:172.18.225.191 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=df39e6ac1353af222f3ceaa4fdc2a80d24ef7ead6d2aadfdab90fb4b8bbcfa7f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26281 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QIycHCzOd7IrVxENbdjKTngQ4PSGwea_bCCq6pIg2qbAC7RaCvJz7cJK_9lTuMMQ6ksvQ84cql7YCtCUCOpaHjICgmlkgnY0gmlwhKwSJp6KbXVsdGlhZGRyc5YACASsEiaeBlMnAAoErBImngZTKN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDkURtvkx4DOTLKDsOic11RXcKNCCAL3H3FIYPfTD801ODdGNwglMng3VkcIJTKYV3YWt1Mgk --lightpushnode=/ip4/172.18.38.158/tcp/21287/p2p/16Uiu2HAmNS3z7QVpe66RPegJ55zvzj8bgSpJaD7W3TAsZ2xs26pJ --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.225.191 waku 1ed4498fbfb7030e342990214e84f8541466c01a3d7bda591a5a64befceddb24
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 1ed4498fbfb7. Setting up logs at ./log/docker/lightpush_node1_2024-11-27_04-15-37__82dc9259-d84e-4137-96a2-ff6433d0d8c1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 26277
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26277/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26277/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.225.191/tcp/26278/p2p/16Uiu2HAmRN9a9CW1QSH7EJJZ4HsNZAmtDzADuMAtzDoLrNXAqjLU","/ip4/172.18.225.191/tcp/26279/ws/p2p/16Uiu2HAmRN9a9CW1QSH7EJJZ4HsNZAmtDzADuMAtzDoLrNXAqjLU"],"enrUri":"enr:-L24QPBoHyheFBVmreinVmMMRu0nouM5Ar33VbpCSUfY4W2QNF0dohrNVAjjoyZ2U0nI8447pA0vjVYiyqCCgVkAsx0CgmlkgnY0gmlwhKwS4b-KbXVsdGlhZGRyc5YACASsEuG_BmamAAoErBLhvwZmp90DgnJzhQADAQAAiXNlY3AyNTZrMaEDvNd7sVa1OtFGZDoiBAJ65th9Il72ztIAZim7v1QIfuGDdGNwgmamg3VkcIJmqIV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26277/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.38.158/tcp/21287/p2p/16Uiu2HAmNS3z7QVpe66RPegJ55zvzj8bgSpJaD7W3TAsZ2xs26pJ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26277/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.9.196/tcp/49770/p2p/16Uiu2HAkv8JwWpjTdCqXRZb7zTpbsXij5GNr4QEzWRZDMYXdYZ9Q"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21286/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49769/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26277/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1732680942744310784, "version": 2.1}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:26277/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id b770d5a67fa2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 78e604dd39fe
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container b770d5a67fa2. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 1ed4498fbfb7
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 78e604dd39fe. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.