[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_valid_meta with id: 2024-11-27_04-15-40__29598afc-812d-46cd-a5a7-cdccdcb6b882
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-11-27_04-15-40__29598afc-812d-46cd-a5a7-cdccdcb6b882__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.146.38
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['55009', '55010', '55011', '55012', '55013']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 55009:55009 -p 55010:55010 -p 55011:55011 -p 55012:55012 -p 55013:55013 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55011 --rest-port=55009 --tcp-port=55010 --discv5-udp-port=55012 --rest-address=0.0.0.0 --nat=extip:172.18.146.38 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=34891ee3cb6cabe6bff5b4d85f5cb74a0a9e5a2b844beddc87c541029decd5ba --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55013 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.146.38 waku 3416e477bc12678beb0d178fce39f3001854db8c9db014bfe0226bec30a76966
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 3416e477bc12. Setting up logs at ./log/docker/receiving_node1_2024-11-27_04-15-40__29598afc-812d-46cd-a5a7-cdccdcb6b882__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 55009
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 4256beda13eb. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55009/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55009/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.146.38/tcp/55010/p2p/16Uiu2HAmNiw7jraCfDmZf1oPa1WUu3mHYQo8dJW5hvjaoahRdZv6","/ip4/172.18.146.38/tcp/55011/ws/p2p/16Uiu2HAmNiw7jraCfDmZf1oPa1WUu3mHYQo8dJW5hvjaoahRdZv6"],"enrUri":"enr:-L24QFXZslh8IRIgAa6Fj1GWgiAzCywoPmYxnjiVYKywV7OdF5c35rkRBChMVpHmzX1_pdhlsWxh7PCyNXvQu3xw57wCgmlkgnY0gmlwhKwSkiaKbXVsdGlhZGRyc5YACASsEpImBtbiAAoErBKSJgbW490DgnJzhQADAQAAiXNlY3AyNTZrMaEDlZeJRlhvio2Uj6rLH1T6h4RiJ5FB7draYz9nAq1voueDdGNwgtbig3VkcILW5IV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-11-27_04-15-40__29598afc-812d-46cd-a5a7-cdccdcb6b882__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.151.163
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['61854', '61855', '61856', '61857', '61858']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 61854:61854 -p 61855:61855 -p 61856:61856 -p 61857:61857 -p 61858:61858 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61856 --rest-port=61854 --tcp-port=61855 --discv5-udp-port=61857 --rest-address=0.0.0.0 --nat=extip:172.18.151.163 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=819bd0cee5fde9517f643f01c22ea36cdd94927fdd7ef020bdbd22f9ec1ce0eb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61858 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.151.163 waku 91246688627faa4109da10acb055d178ceff737ea3fbe982c39a3e036d9474fd
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 91246688627f. Setting up logs at ./log/docker/receiving_node2_2024-11-27_04-15-40__29598afc-812d-46cd-a5a7-cdccdcb6b882__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 61854
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61854/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61854/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.151.163/tcp/61855/p2p/16Uiu2HAmQyKGNfsjukJSExMkz6rifzjrvuk2NzvfXbFWUixzQoSA","/ip4/172.18.151.163/tcp/61856/ws/p2p/16Uiu2HAmQyKGNfsjukJSExMkz6rifzjrvuk2NzvfXbFWUixzQoSA"],"enrUri":"enr:-L24QIP0dSbv61nsWgzvsTWJcZpi8vqb4QITGhL5FZ1RcuieNBz2HGT5P-hckXd_elP3bdvLLBhRTttHkVRsW01z-VwCgmlkgnY0gmlwhKwSl6OKbXVsdGlhZGRyc5YACASsEpejBvGfAAoErBKXowbxoN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDtv4V0R-B0gNzQ0hTMtfGUaJ6GJCnqSRCwcThD3KfpnODdGNwgvGfg3VkcILxoYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61854/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.146.38/tcp/55010/p2p/16Uiu2HAmNiw7jraCfDmZf1oPa1WUu3mHYQo8dJW5hvjaoahRdZv6"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-11-27_04-15-40__29598afc-812d-46cd-a5a7-cdccdcb6b882__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.75.34
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['47170', '47171', '47172', '47173', '47174']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 47170:47170 -p 47171:47171 -p 47172:47172 -p 47173:47173 -p 47174:47174 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=47172 --rest-port=47170 --tcp-port=47171 --discv5-udp-port=47173 --rest-address=0.0.0.0 --nat=extip:172.18.75.34 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d58e3abf6cc92eb5bba5e3ea8e2045f68cb8ddc5666cce1d367f62702a56dc93 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=47174 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QFXZslh8IRIgAa6Fj1GWgiAzCywoPmYxnjiVYKywV7OdF5c35rkRBChMVpHmzX1_pdhlsWxh7PCyNXvQu3xw57wCgmlkgnY0gmlwhKwSkiaKbXVsdGlhZGRyc5YACASsEpImBtbiAAoErBKSJgbW490DgnJzhQADAQAAiXNlY3AyNTZrMaEDlZeJRlhvio2Uj6rLH1T6h4RiJ5FB7draYz9nAq1voueDdGNwgtbig3VkcILW5IV3YWt1Mgk --lightpushnode=/ip4/172.18.146.38/tcp/55010/p2p/16Uiu2HAmNiw7jraCfDmZf1oPa1WUu3mHYQo8dJW5hvjaoahRdZv6 --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.75.34 waku 1c4ec4ba2e05331f7fea6ba7216c9d0d1ffc5591863e9d9c758a535449c66642
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 1c4ec4ba2e05. Setting up logs at ./log/docker/lightpush_node1_2024-11-27_04-15-40__29598afc-812d-46cd-a5a7-cdccdcb6b882__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 47170
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47170/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47170/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.75.34/tcp/47171/p2p/16Uiu2HAmRrDAUeuFyjJZiiAJuqwmyU4NTQT6onGRsHjMXmWZwLgG","/ip4/172.18.75.34/tcp/47172/ws/p2p/16Uiu2HAmRrDAUeuFyjJZiiAJuqwmyU4NTQT6onGRsHjMXmWZwLgG"],"enrUri":"enr:-L24QDTyKMdVQtydKC0Qf7xshEy_ZeKnd58RLU6uy1-4ecXKDxjXD9_UQKCbFoho6VyFXxBSFAT02XtzA6AgxR9D5aICgmlkgnY0gmlwhKwSSyKKbXVsdGlhZGRyc5YACASsEksiBrhDAAoErBJLIga4RN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDxAfOq4zJEW3WolRyNKMcVHlKwsUDuTuBbjoHeY6e0iGDdGNwgrhDg3VkcIK4RYV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47170/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.146.38/tcp/55010/p2p/16Uiu2HAmNiw7jraCfDmZf1oPa1WUu3mHYQo8dJW5hvjaoahRdZv6"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47170/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.151.163/tcp/61855/p2p/16Uiu2HAmQyKGNfsjukJSExMkz6rifzjrvuk2NzvfXbFWUixzQoSA"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55009/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61854/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47170/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1732680945270520320, "meta": "TGlnaHQgcHVzaCB3b3JrcyEh"}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55009/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1732680945270520320,"meta":"TGlnaHQgcHVzaCB3b3JrcyEh","ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61854/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1732680945270520320,"meta":"TGlnaHQgcHVzaCB3b3JrcyEh","ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 3416e477bc12
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 91246688627f
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 3416e477bc12. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 1c4ec4ba2e05
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 91246688627f. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.