[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_valid_version with id: 2024-11-27_04-15-29__9a2f81e2-553c-440b-9258-e5b4e537b6b7
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-11-27_04-15-29__9a2f81e2-553c-440b-9258-e5b4e537b6b7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.178.231
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['50870', '50871', '50872', '50873', '50874']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 50870:50870 -p 50871:50871 -p 50872:50872 -p 50873:50873 -p 50874:50874 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=50872 --rest-port=50870 --tcp-port=50871 --discv5-udp-port=50873 --rest-address=0.0.0.0 --nat=extip:172.18.178.231 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9dedeeea0ebe1c64899dda8badf077ea8cd02ad4dafa4c32a730c2e4eefd9bd1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=50874 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.178.231 waku c60419eabfab23af4441dfa2428d21575c2843f915582f0d8308b8e910930f98
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID c60419eabfab. Setting up logs at ./log/docker/receiving_node1_2024-11-27_04-15-29__9a2f81e2-553c-440b-9258-e5b4e537b6b7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 50870
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 1ab04be41460. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50870/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50870/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.178.231/tcp/50871/p2p/16Uiu2HAkyh1dEnAsiLQgSt4XEwHHBKTr3LANSvAQTTF9E8gVr6gq","/ip4/172.18.178.231/tcp/50872/ws/p2p/16Uiu2HAkyh1dEnAsiLQgSt4XEwHHBKTr3LANSvAQTTF9E8gVr6gq"],"enrUri":"enr:-L24QDGF9te51oflGMOr_1fsh_OfWdpm8GtVy2D4BuIBQ633RtGxTfDant_bXnALXuRvB2BbXKatHoSb2Wzy3keCn9wCgmlkgnY0gmlwhKwSsueKbXVsdGlhZGRyc5YACASsErLnBsa3AAoErBKy5wbGuN0DgnJzhQADAQAAiXNlY3AyNTZrMaECP1ysVmlfcvdJA6qP6YS66uDbuqg1IzrQerZar0s0NcKDdGNwgsa3g3VkcILGuYV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-11-27_04-15-29__9a2f81e2-553c-440b-9258-e5b4e537b6b7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.223.18
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['11632', '11633', '11634', '11635', '11636']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 11632:11632 -p 11633:11633 -p 11634:11634 -p 11635:11635 -p 11636:11636 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=11634 --rest-port=11632 --tcp-port=11633 --discv5-udp-port=11635 --rest-address=0.0.0.0 --nat=extip:172.18.223.18 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=afd8e9eda9c41fd3d4d0bd23ccca65cbcbabfb5ef54ea8fdf7cfc9e2c7adeefe --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=11636 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.223.18 waku aa059a178f6b99e987ca266ea4431e8559866d7c096cb798702c5390f69ce23a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID aa059a178f6b. Setting up logs at ./log/docker/receiving_node2_2024-11-27_04-15-29__9a2f81e2-553c-440b-9258-e5b4e537b6b7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 11632
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11632/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11632/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.223.18/tcp/11633/p2p/16Uiu2HAm4DQKgr7TSvp8A1MURP2KvmAfgxGu3K8abYfWg6SHPYVM","/ip4/172.18.223.18/tcp/11634/ws/p2p/16Uiu2HAm4DQKgr7TSvp8A1MURP2KvmAfgxGu3K8abYfWg6SHPYVM"],"enrUri":"enr:-L24QJ9q4zUchu_pqTNbJXxt5sp8Mm7C-W0il246symySnHnMMg9rNA4t1ZxadxCPru0EaSy59o3qtcyWjh5Mo4_tAcCgmlkgnY0gmlwhKwS3xKKbXVsdGlhZGRyc5YACASsEt8SBi1xAAoErBLfEgYtct0DgnJzhQADAQAAiXNlY3AyNTZrMaECgpSCW3TrBY5aTlAa6l-b1XuaB7zpRcZKurQL_AQRWJiDdGNwgi1xg3VkcIItc4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11632/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.178.231/tcp/50871/p2p/16Uiu2HAkyh1dEnAsiLQgSt4XEwHHBKTr3LANSvAQTTF9E8gVr6gq"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-11-27_04-15-29__9a2f81e2-553c-440b-9258-e5b4e537b6b7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.116.54
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['34853', '34854', '34855', '34856', '34857']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 34853:34853 -p 34854:34854 -p 34855:34855 -p 34856:34856 -p 34857:34857 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34855 --rest-port=34853 --tcp-port=34854 --discv5-udp-port=34856 --rest-address=0.0.0.0 --nat=extip:172.18.116.54 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=68eb4ef778e93fbccafbd2fade33fa7d1c87bfa2e7eefc67fc46892abed5aeab --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34857 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QDGF9te51oflGMOr_1fsh_OfWdpm8GtVy2D4BuIBQ633RtGxTfDant_bXnALXuRvB2BbXKatHoSb2Wzy3keCn9wCgmlkgnY0gmlwhKwSsueKbXVsdGlhZGRyc5YACASsErLnBsa3AAoErBKy5wbGuN0DgnJzhQADAQAAiXNlY3AyNTZrMaECP1ysVmlfcvdJA6qP6YS66uDbuqg1IzrQerZar0s0NcKDdGNwgsa3g3VkcILGuYV3YWt1Mgk --lightpushnode=/ip4/172.18.178.231/tcp/50871/p2p/16Uiu2HAkyh1dEnAsiLQgSt4XEwHHBKTr3LANSvAQTTF9E8gVr6gq --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.116.54 waku ec9d8e95a06e31e1bbf36cadfa73c33d13bcec4927832d15b911c686b9006ea1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ec9d8e95a06e. Setting up logs at ./log/docker/lightpush_node1_2024-11-27_04-15-29__9a2f81e2-553c-440b-9258-e5b4e537b6b7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 34853
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34853/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34853/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.116.54/tcp/34854/p2p/16Uiu2HAm8WfvycxKuJNs6zXda6wgS2GNVC8Y3wG7gzKkjPaaG1Mz","/ip4/172.18.116.54/tcp/34855/ws/p2p/16Uiu2HAm8WfvycxKuJNs6zXda6wgS2GNVC8Y3wG7gzKkjPaaG1Mz"],"enrUri":"enr:-L24QG23y78sojw3uWlkveWxSCXFc8vdd4lM4CI9_f3sTkFhI1L680kTQ7U9uwwN4LCFuX0V7VhPbqOXeQzA8v7TGnsCgmlkgnY0gmlwhKwSdDaKbXVsdGlhZGRyc5YACASsEnQ2BogmAAoErBJ0NgaIJ90DgnJzhQADAQAAiXNlY3AyNTZrMaECwm_HeGKr8utR_wWnNLyJLatdr3HCtMGrGMq0B-sao0mDdGNwgogmg3VkcIKIKIV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34853/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.178.231/tcp/50871/p2p/16Uiu2HAkyh1dEnAsiLQgSt4XEwHHBKTr3LANSvAQTTF9E8gVr6gq"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34853/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.223.18/tcp/11633/p2p/16Uiu2HAm4DQKgr7TSvp8A1MURP2KvmAfgxGu3K8abYfWg6SHPYVM"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:50870/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11632/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34853/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1732680934917542144, "version": 10}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50870/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":10,"timestamp":1732680934917542144,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11632/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":10,"timestamp":1732680934917542144,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id c60419eabfab
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id aa059a178f6b
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container c60419eabfab. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id ec9d8e95a06e
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container aa059a178f6b. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.