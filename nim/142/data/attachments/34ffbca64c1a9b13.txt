[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_filter_get_message_after_node2_restarts with id: 2024-04-11_04-11-10__a075f3d0-9f83-4455-ae29-be6900b1f5c4
[35mDEBUG   [0m src.steps.filter:filter.py:27 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:33 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:50 WakuNode instance initialized with log path ./log/docker/node1_2024-04-11_04-11-10__a075f3d0-9f83-4455-ae29-be6900b1f5c4__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:54 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.37.202
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['51798', '51799', '51800', '51801', '51802']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:294 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:115 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 51798:51798 -p 51799:51799 -p 51800:51800 -p 51801:51801 -p 51802:51802 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=51800 --rest-port=51798 --tcp-port=51799 --discv5-udp-port=51801 --rest-address=0.0.0.0 --nat=extip:172.18.37.202 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=51802 --metrics-logging=true --relay=true --filter=true --nodekey=30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.37.202 waku e5683ffaa3b860111386df66d012cc79f83069f78ac4fee2cdfe3fa9e151ff06
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID e5683ffaa3b8. Setting up logs at ./log/docker/node1_2024-04-11_04-11-10__a075f3d0-9f83-4455-ae29-be6900b1f5c4__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:121 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 51798
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:38 curl -v -X GET "http://127.0.0.1:51798/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:23 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.37.202/tcp/51799/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip","/ip4/172.18.37.202/tcp/51800/ws/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"],"enrUri":"enr:-LO4QAVN2y2YrdaoF-1YHsbz1Ap8ulSKxDajGClkrlf9bdUfDEg9SaFobpVh-sYJX6BesELP5rnVZ7Gew8oBpJ3jTHYBgmlkgnY0gmlwhKwSJcqKbXVsdGlhZGRyc4wACgSsEiXKBspY3QOCcnOFAAABAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCyleDdWRwgspZhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:191 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:38 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:50 WakuNode instance initialized with log path ./log/docker/node2_2024-04-11_04-11-10__a075f3d0-9f83-4455-ae29-be6900b1f5c4__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:54 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.132.79
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['19726', '19727', '19728', '19729', '19730']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:294 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:115 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 19726:19726 -p 19727:19727 -p 19728:19728 -p 19729:19729 -p 19730:19730 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19728 --rest-port=19726 --tcp-port=19727 --discv5-udp-port=19729 --rest-address=0.0.0.0 --nat=extip:172.18.132.79 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19730 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QAVN2y2YrdaoF-1YHsbz1Ap8ulSKxDajGClkrlf9bdUfDEg9SaFobpVh-sYJX6BesELP5rnVZ7Gew8oBpJ3jTHYBgmlkgnY0gmlwhKwSJcqKbXVsdGlhZGRyc4wACgSsEiXKBspY3QOCcnOFAAABAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCyleDdWRwgspZhXdha3UyBQ --filternode=/ip4/172.18.37.202/tcp/51799/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.132.79 waku e14f070dfbe48d1075d006de296547e99d35139e1185f2e0ae659768ff738534
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID e14f070dfbe4. Setting up logs at ./log/docker/node2_2024-04-11_04-11-10__a075f3d0-9f83-4455-ae29-be6900b1f5c4__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:121 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 19726
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:38 curl -v -X GET "http://127.0.0.1:19726/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:23 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.132.79/tcp/19727/p2p/16Uiu2HAm75mDN6JhMRAc1uBjKNid3DRCyyVTRgfwsiMVS55wE12L","/ip4/172.18.132.79/tcp/19728/ws/p2p/16Uiu2HAm75mDN6JhMRAc1uBjKNid3DRCyyVTRgfwsiMVS55wE12L"],"enrUri":"enr:-LO4QFHQYtpGONtmv4K5M0GzRTTI9AFKkl8IKC-NZJhtfZDcK80l5_ZzJEyD2CkJ2wBiooX9fu2HUsUrmAGCkMHCuBMBgmlkgnY0gmlwhKwShE-KbXVsdGlhZGRyc4wACgSsEoRPBk0Q3QOCcnOFAAABAACJc2VjcDI1NmsxoQKtMouGOSk7VUlhDIEWf_OXGP-f5ViFyt4Byphl8shjtYN0Y3CCTQ-DdWRwgk0RhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:191 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:38 curl -v -X POST "http://127.0.0.1:19726/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.37.202/tcp/51799/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:23 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:38 curl -v -X POST "http://127.0.0.1:51798/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:23 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:38 curl -v -X POST "http://127.0.0.1:19726/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "627c3eaa-e370-441c-86f5-db3acac5a0b2", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/0/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:23 Response status code: 200. Response content: b'{"requestId":"627c3eaa-e370-441c-86f5-db3acac5a0b2","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:38 curl -v -X POST "http://127.0.0.1:51798/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:23 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:harbor.status.im/wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:38 curl -v -X GET "http://127.0.0.1:19726/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:23 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1712808674013208064,"ephemeral":false}]'
[35mDEBUG   [0m src.node.waku_node:waku_node.py:175 Restarting container with id e14f070dfbe4
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:38 curl -v -X GET "http://127.0.0.1:19726/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:38 curl -v -X GET "http://127.0.0.1:19726/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:23 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.132.79/tcp/19727/p2p/16Uiu2HAmKf61Fve7L9novSMSrw6sG3EWUUrYYB29cZv7ANmF3tN3","/ip4/172.18.132.79/tcp/19728/ws/p2p/16Uiu2HAmKf61Fve7L9novSMSrw6sG3EWUUrYYB29cZv7ANmF3tN3"],"enrUri":"enr:-LO4QAtOYyy2EIhasi4RPUfIw8C_IjE5gxv6YQM3rsbxupkKRGMVctaOEWnMd0Ku9LdylnCXlNVYu0GuMGXbFZoQpCwBgmlkgnY0gmlwhKwShE-KbXVsdGlhZGRyc4wACgSsEoRPBk0Q3QOCcnOFAAABAACJc2VjcDI1NmsxoQNoCDPCsxGHadaxjATUJhQK2Gf8zHcK0VR3N3vFHv2HYIN0Y3CCTQ-DdWRwgk0RhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:191 REST service is ready !!
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 2 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:38 curl -v -X POST "http://127.0.0.1:51798/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:23 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:38 curl -v -X POST "http://127.0.0.1:19726/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "0212d2a4-5805-4549-81dc-eaced1309446", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/0/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:23 Response status code: 200. Response content: b'{"requestId":"0212d2a4-5805-4549-81dc-eaced1309446","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:38 curl -v -X POST "http://127.0.0.1:51798/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:23 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:harbor.status.im/wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:38 curl -v -X GET "http://127.0.0.1:19726/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:23 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1712808678821673984,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:168 Stopping container with id e5683ffaa3b8
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:168 Stopping container with id e14f070dfbe4
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Container stopped.