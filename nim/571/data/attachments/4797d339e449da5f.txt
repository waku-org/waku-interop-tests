[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_single_pubsub_topic[/waku/2/rs/5/1] with id: 2024-12-25_18-04-30__b896e593-2464-4eb6-99d3-6fb73b345859
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-25_18-04-30__b896e593-2464-4eb6-99d3-6fb73b345859__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.97.134
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['17180', '17181', '17182', '17183', '17184']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 5
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 17180:17180 -p 17181:17181 -p 17182:17182 -p 17183:17183 -p 17184:17184 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17182 --rest-port=17180 --tcp-port=17181 --discv5-udp-port=17183 --rest-address=0.0.0.0 --nat=extip:172.18.97.134 --peer-exchange=true --discv5-discovery=true --cluster-id=5 --nodekey=6afafe3c5a2dbe6c44a06c5fa2fb5f0dd4ad6bb59bc8c516fec7cb7e8890fa61 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17184 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/5/1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.97.134 waku 1996708ebf4ebbb3c4df288241f674ee2682308a5136a52b17f516c32b56e6d1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 1996708ebf4e. Setting up logs at ./log/docker/node1_2024-12-25_18-04-30__b896e593-2464-4eb6-99d3-6fb73b345859__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 17180
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17180/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17180/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.97.134/tcp/17181/p2p/16Uiu2HAmVPj53ogFoSmmjQvRDWDKBKPYrw8V2ueZ7k9NcZTP7vgz","/ip4/172.18.97.134/tcp/17182/ws/p2p/16Uiu2HAmVPj53ogFoSmmjQvRDWDKBKPYrw8V2ueZ7k9NcZTP7vgz"],"enrUri":"enr:-L24QANoBduFBury4BX_dmkMPZTcZiGxXdyRBiM3DN2E5818FxQtSpxK7WwhZdjTJSQV0ItK7zWVEI-i4cp9HqKFfyECgmlkgnY0gmlwhKwSYYaKbXVsdGlhZGRyc5YACASsEmGGBkMdAAoErBJhhgZDHt0DgnJzhQAFAQABiXNlY3AyNTZrMaED-K2wPhHZU6gWAB5Kp63hnTH5Bus4rUvnf9euEcu9KJODdGNwgkMdg3VkcIJDH4V3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-25_18-04-30__b896e593-2464-4eb6-99d3-6fb73b345859__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.76.34
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['18001', '18002', '18003', '18004', '18005']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 5
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 18001:18001 -p 18002:18002 -p 18003:18003 -p 18004:18004 -p 18005:18005 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18003 --rest-port=18001 --tcp-port=18002 --discv5-udp-port=18004 --rest-address=0.0.0.0 --nat=extip:172.18.76.34 --peer-exchange=true --discv5-discovery=true --cluster-id=5 --nodekey=a3ca9efa936ddd0ddcf58e3e1adb82d4a1ea8df8b2c7cfdcfcaa4311f7c927de --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18005 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QANoBduFBury4BX_dmkMPZTcZiGxXdyRBiM3DN2E5818FxQtSpxK7WwhZdjTJSQV0ItK7zWVEI-i4cp9HqKFfyECgmlkgnY0gmlwhKwSYYaKbXVsdGlhZGRyc5YACASsEmGGBkMdAAoErBJhhgZDHt0DgnJzhQAFAQABiXNlY3AyNTZrMaED-K2wPhHZU6gWAB5Kp63hnTH5Bus4rUvnf9euEcu9KJODdGNwgkMdg3VkcIJDH4V3YWt1MgU --pubsub-topic=/waku/2/rs/5/1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.76.34 waku 07ec9f3e8852b4a1682b277c446de6220eff19964d42df518ac200cc8d2f341c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 07ec9f3e8852. Setting up logs at ./log/docker/node2_2024-12-25_18-04-30__b896e593-2464-4eb6-99d3-6fb73b345859__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 18001
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18001/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18001/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.76.34/tcp/18002/p2p/16Uiu2HAmKRg1AAudmLrEQytH45NVaW5DhRozEh2WQdt8tAJc5HtE","/ip4/172.18.76.34/tcp/18003/ws/p2p/16Uiu2HAmKRg1AAudmLrEQytH45NVaW5DhRozEh2WQdt8tAJc5HtE"],"enrUri":"enr:-L24QNt3Bd3cJg0_meVQeUl9KflRhNQ2PpyJfId2NdsDO25HK9Fa725OXYSqnjqqp0NR2GuETLqyJMM-c2zDxaz1bNUCgmlkgnY0gmlwhKwSTCKKbXVsdGlhZGRyc5YACASsEkwiBkZSAAoErBJMIgZGU90DgnJzhQAFAQABiXNlY3AyNTZrMaEDZJiDSjXXgb5S1BVnB3jznccoA3KE2nR4JHIruupMnAuDdGNwgkZSg3VkcIJGVIV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18001/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.97.134/tcp/17181/p2p/16Uiu2HAmVPj53ogFoSmmjQvRDWDKBKPYrw8V2ueZ7k9NcZTP7vgz"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:17180/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/5/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18001/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/5/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:17180/relay/v1/messages/%2Fwaku%2F2%2Frs%2F5%2F1" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17180/relay/v1/messages/%2Fwaku%2F2%2Frs%2F5%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1735149875972104704,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18001/relay/v1/messages/%2Fwaku%2F2%2Frs%2F5%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1735149875972104704,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 1996708ebf4e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 07ec9f3e8852
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.