[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_only_lightpush__peer_full with id: 2024-11-06_23-51-19__87426e58-f742-4291-830e-569e9b9bcb5f
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-11-06_23-51-19__87426e58-f742-4291-830e-569e9b9bcb5f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.9.95
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['47267', '47268', '47269', '47270', '47271']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:435 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:164 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:166 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 47267:47267 -p 47268:47268 -p 47269:47269 -p 47270:47270 -p 47271:47271 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=47269 --rest-port=47267 --tcp-port=47268 --discv5-udp-port=47270 --rest-address=0.0.0.0 --nat=extip:172.18.9.95 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=89bc1a7ee5db16c39e68ddf8b4665c9da4fcaf47fc1927128ecccdbc4572642f --max-connections=1000 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=47271 --metrics-logging=true --lightpush=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.9.95 waku 0a88a45c5d7187a4287d65f08185957e77b070ffaeef7166f7385fe32999b54d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 0a88a45c5d71. Setting up logs at ./log/docker/receiving_node1_2024-11-06_23-51-19__87426e58-f742-4291-830e-569e9b9bcb5f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:178 Started container from image wakuorg/nwaku:latest. REST: 47267
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container ba65a5c177b9. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47267/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:278 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47267/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.9.95/tcp/47268/p2p/16Uiu2HAmUksU5h6xv7ayeB5Ke6nsvq7iG21MgP5RnwjQ9cFvaK96","/ip4/172.18.9.95/tcp/47269/ws/p2p/16Uiu2HAmUksU5h6xv7ayeB5Ke6nsvq7iG21MgP5RnwjQ9cFvaK96"],"enrUri":"enr:-L24QKOiGvMUMexYI--aNYFnc-fQwxS2DHN1Vfg7K91gP3T6YVyw5ykLpAdE_N3Dj8YCXTJIGA3PQ0RepnNfG1yauzQCgmlkgnY0gmlwhKwSCV-KbXVsdGlhZGRyc5YACASsEglfBrikAAoErBIJXwa4pd0DgnJzhQADAQAAiXNlY3AyNTZrMaED7zyxcrjthfKW5x5Z78yt_r8XZu73IBybmz7D4QLCmlWDdGNwgrikg3VkcIK4poV3YWt1Mg0"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:283 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-11-06_23-51-19__87426e58-f742-4291-830e-569e9b9bcb5f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.186.175
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['63733', '63734', '63735', '63736', '63737']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:435 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:164 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:166 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 63733:63733 -p 63734:63734 -p 63735:63735 -p 63736:63736 -p 63737:63737 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63735 --rest-port=63733 --tcp-port=63734 --discv5-udp-port=63736 --rest-address=0.0.0.0 --nat=extip:172.18.186.175 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bf3ab0b0398ec51ea3267cdca04eca4be67c0896f105fe89bce9c5b17d88e3f4 --max-connections=1000 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63737 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.186.175 waku 673c12442d741f8642ba7b4db9d6646160698ea50ed8ab25bc642e8c24c8a6a7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 673c12442d74. Setting up logs at ./log/docker/receiving_node2_2024-11-06_23-51-19__87426e58-f742-4291-830e-569e9b9bcb5f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:178 Started container from image wakuorg/nwaku:latest. REST: 63733
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63733/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:278 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63733/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.186.175/tcp/63734/p2p/16Uiu2HAmLkCTauMdeZxvR3GicngcC8cYyJS6bYBKpYGGpY8G7HJc","/ip4/172.18.186.175/tcp/63735/ws/p2p/16Uiu2HAmLkCTauMdeZxvR3GicngcC8cYyJS6bYBKpYGGpY8G7HJc"],"enrUri":"enr:-L24QBG56Ut_5f0970uk0z9wIilPL-OgEAIgGKcYIJAFLhWxf0J2uCNhWI9QPbWoxwFVBRM126acCWFywGUmzl0FZIQCgmlkgnY0gmlwhKwSuq-KbXVsdGlhZGRyc5YACASsErqvBvj2AAoErBK6rwb4990DgnJzhQADAQAAiXNlY3AyNTZrMaEDeDMXM3UvlXjCwofkXJcbRzDZfVIB5F0QPfshL3CSJr2DdGNwgvj2g3VkcIL4-IV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:283 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63733/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.9.95/tcp/47268/p2p/16Uiu2HAmUksU5h6xv7ayeB5Ke6nsvq7iG21MgP5RnwjQ9cFvaK96"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-11-06_23-51-19__87426e58-f742-4291-830e-569e9b9bcb5f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.238.37
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['35181', '35182', '35183', '35184', '35185']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:435 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:164 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:166 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 35181:35181 -p 35182:35182 -p 35183:35183 -p 35184:35184 -p 35185:35185 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=35183 --rest-port=35181 --tcp-port=35182 --discv5-udp-port=35184 --rest-address=0.0.0.0 --nat=extip:172.18.238.37 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=82f204c8c787ac2ee52ecb199e16cff2794b93c5dfebafd12d0ccbdf41eb9a21 --max-connections=1000 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=35185 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QKOiGvMUMexYI--aNYFnc-fQwxS2DHN1Vfg7K91gP3T6YVyw5ykLpAdE_N3Dj8YCXTJIGA3PQ0RepnNfG1yauzQCgmlkgnY0gmlwhKwSCV-KbXVsdGlhZGRyc5YACASsEglfBrikAAoErBIJXwa4pd0DgnJzhQADAQAAiXNlY3AyNTZrMaED7zyxcrjthfKW5x5Z78yt_r8XZu73IBybmz7D4QLCmlWDdGNwgrikg3VkcIK4poV3YWt1Mg0 --lightpushnode=/ip4/172.18.9.95/tcp/47268/p2p/16Uiu2HAmUksU5h6xv7ayeB5Ke6nsvq7iG21MgP5RnwjQ9cFvaK96 --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.238.37 waku 69af181b6a06ea9b6b8d28c682b65e12cd73c9bf9ba9c6386b7a0169e85e7c0a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 69af181b6a06. Setting up logs at ./log/docker/lightpush_node1_2024-11-06_23-51-19__87426e58-f742-4291-830e-569e9b9bcb5f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:178 Started container from image wakuorg/nwaku:latest. REST: 35181
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35181/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:278 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35181/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.238.37/tcp/35182/p2p/16Uiu2HAkvaZzCsdk5yF9phoPhg2Xh5BBJDxvEaYg5FGfDGn2rTha","/ip4/172.18.238.37/tcp/35183/ws/p2p/16Uiu2HAkvaZzCsdk5yF9phoPhg2Xh5BBJDxvEaYg5FGfDGn2rTha"],"enrUri":"enr:-L24QCVki5Bo794jOiPZEzEDZugUBSkMog_-w1cDbfpeF-AACZ4-uf0C21dNtYi0Se20AQL0Gyu8qTCGLh_VtHh756cCgmlkgnY0gmlwhKwS7iWKbXVsdGlhZGRyc5YACASsEu4lBoluAAoErBLuJQaJb90DgnJzhQADAQAAiXNlY3AyNTZrMaECESMjVSy6x61IUizY2YD6pcExsn9hkyGrO-1gav6mynGDdGNwgolug3VkcIKJcIV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:283 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35181/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.9.95/tcp/47268/p2p/16Uiu2HAmUksU5h6xv7ayeB5Ke6nsvq7iG21MgP5RnwjQ9cFvaK96"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35181/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.186.175/tcp/63734/p2p/16Uiu2HAmLkCTauMdeZxvR3GicngcC8cYyJS6bYBKpYGGpY8G7HJc"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47267/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63733/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35181/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1730937084332224000}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47267/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1730937084332224000,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63733/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1730937084332224000,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:222 Stopping container with id 0a88a45c5d71
[35mDEBUG   [0m src.node.waku_node:waku_node.py:229 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:222 Stopping container with id 673c12442d74
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 0a88a45c5d71. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:229 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:222 Stopping container with id 69af181b6a06
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 673c12442d74. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:229 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.