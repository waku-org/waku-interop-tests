[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_missing_payload with id: 2024-11-06_23-48-50__7152e465-dac3-42f0-b54c-bc214121ef4f
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-11-06_23-48-50__7152e465-dac3-42f0-b54c-bc214121ef4f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.168.254
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['3066', '3067', '3068', '3069', '3070']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:435 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:164 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:166 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 3066:3066 -p 3067:3067 -p 3068:3068 -p 3069:3069 -p 3070:3070 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=3068 --rest-port=3066 --tcp-port=3067 --discv5-udp-port=3069 --rest-address=0.0.0.0 --nat=extip:172.18.168.254 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=befe2b25abb9c64cdb2f4399bb6e54af0e149d0f5406a74c923305f9e21b566e --max-connections=1000 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=3070 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.168.254 waku 3b6dd405a69a9db0d9b9991310957a4efbd52e9d9487434bdb743cdf9b594040
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 3b6dd405a69a. Setting up logs at ./log/docker/receiving_node1_2024-11-06_23-48-50__7152e465-dac3-42f0-b54c-bc214121ef4f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:178 Started container from image wakuorg/nwaku:latest. REST: 3066
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 3de7c73c27d6. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3066/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:278 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3066/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.168.254/tcp/3067/p2p/16Uiu2HAkxbLjsgD1t9VUTif2tQCBDXEFYeKUpLEjJDLT7Lu8F8G5","/ip4/172.18.168.254/tcp/3068/ws/p2p/16Uiu2HAkxbLjsgD1t9VUTif2tQCBDXEFYeKUpLEjJDLT7Lu8F8G5"],"enrUri":"enr:-L24QJ5jIDEQ9z8SA79y3sF4sMBu6Z3OseiyPaQhKtka7SD7YU3YTrRZA-iR0sWSaZW1vUJUkTuzGniA4VWiithNBvgCgmlkgnY0gmlwhKwSqP6KbXVsdGlhZGRyc5YACASsEqj-Bgv7AAoErBKo_gYL_N0DgnJzhQADAQAAiXNlY3AyNTZrMaECLw0dORd7hkwEpqjJ3KtsyVPELZsAJ6e43_5ylqEyQ0aDdGNwggv7g3VkcIIL_YV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:283 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-11-06_23-48-50__7152e465-dac3-42f0-b54c-bc214121ef4f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.120.66
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['17831', '17832', '17833', '17834', '17835']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:435 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:164 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:166 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 17831:17831 -p 17832:17832 -p 17833:17833 -p 17834:17834 -p 17835:17835 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17833 --rest-port=17831 --tcp-port=17832 --discv5-udp-port=17834 --rest-address=0.0.0.0 --nat=extip:172.18.120.66 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=98a25febb44ced0071de1d54ee2cebe865d76f2a8ca8f36baabfdfa98abd2b7c --max-connections=1000 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17835 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.120.66 waku 228dbcd92e99510903e954f7abf96310ea112ade3b21f9ece6e01a3afc5ac08d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 228dbcd92e99. Setting up logs at ./log/docker/receiving_node2_2024-11-06_23-48-50__7152e465-dac3-42f0-b54c-bc214121ef4f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:178 Started container from image wakuorg/nwaku:latest. REST: 17831
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17831/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:278 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17831/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.120.66/tcp/17832/p2p/16Uiu2HAm9wnZETfXrQKcMLvqPjo9hSmyAUHig2Yp4Q2GztF4px4m","/ip4/172.18.120.66/tcp/17833/ws/p2p/16Uiu2HAm9wnZETfXrQKcMLvqPjo9hSmyAUHig2Yp4Q2GztF4px4m"],"enrUri":"enr:-L24QKcu9E49c966xKZ9_9JU5nQlYGKdoVL4jvyAqpzTTeLzJOwhMfpTidMsUgbYqTmq2makVbeK10VbgNyaHZvD7m4CgmlkgnY0gmlwhKwSeEKKbXVsdGlhZGRyc5YACASsEnhCBkWoAAoErBJ4QgZFqd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC17p6NDvKaFRlrVaciu9ARMJ0fOcnMBYVLFJ2id9VeR6DdGNwgkWog3VkcIJFqoV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:283 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:17831/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.168.254/tcp/3067/p2p/16Uiu2HAkxbLjsgD1t9VUTif2tQCBDXEFYeKUpLEjJDLT7Lu8F8G5"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-11-06_23-48-50__7152e465-dac3-42f0-b54c-bc214121ef4f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.208.232
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['46707', '46708', '46709', '46710', '46711']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:435 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:164 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:166 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 46707:46707 -p 46708:46708 -p 46709:46709 -p 46710:46710 -p 46711:46711 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=46709 --rest-port=46707 --tcp-port=46708 --discv5-udp-port=46710 --rest-address=0.0.0.0 --nat=extip:172.18.208.232 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=24ce9b860cdcf8c0eac23d02cd399ebc2e96ea459efa82412fd0dcaabbaa8cfb --max-connections=1000 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=46711 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QJ5jIDEQ9z8SA79y3sF4sMBu6Z3OseiyPaQhKtka7SD7YU3YTrRZA-iR0sWSaZW1vUJUkTuzGniA4VWiithNBvgCgmlkgnY0gmlwhKwSqP6KbXVsdGlhZGRyc5YACASsEqj-Bgv7AAoErBKo_gYL_N0DgnJzhQADAQAAiXNlY3AyNTZrMaECLw0dORd7hkwEpqjJ3KtsyVPELZsAJ6e43_5ylqEyQ0aDdGNwggv7g3VkcIIL_YV3YWt1Mgk --lightpushnode=/ip4/172.18.168.254/tcp/3067/p2p/16Uiu2HAkxbLjsgD1t9VUTif2tQCBDXEFYeKUpLEjJDLT7Lu8F8G5 --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.208.232 waku 5b25819725446e31ad67dba3e2ef6bdb19cc6bcf77c9d72f136108c221099910
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 5b2581972544. Setting up logs at ./log/docker/lightpush_node1_2024-11-06_23-48-50__7152e465-dac3-42f0-b54c-bc214121ef4f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:178 Started container from image wakuorg/nwaku:latest. REST: 46707
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46707/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:278 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46707/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.208.232/tcp/46708/p2p/16Uiu2HAmEAJDqTsoso5EDEB4t8vLVhDnN3NnKqNHogjZASeLL4aS","/ip4/172.18.208.232/tcp/46709/ws/p2p/16Uiu2HAmEAJDqTsoso5EDEB4t8vLVhDnN3NnKqNHogjZASeLL4aS"],"enrUri":"enr:-L24QDCgKlGr3hg16barMNuGJJoE_XelYjhnxIAz99Ary4aGfReIkETmqaZxjX0rKAfdz2U0QkifXT23hzX4loCVkrACgmlkgnY0gmlwhKwS0OiKbXVsdGlhZGRyc5YACASsEtDoBrZ0AAoErBLQ6Aa2dd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDFl283SfDzRIaO6YOaK6pmKX5QLb-8P-HcHCptinGgweDdGNwgrZ0g3VkcIK2doV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:283 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:46707/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.168.254/tcp/3067/p2p/16Uiu2HAkxbLjsgD1t9VUTif2tQCBDXEFYeKUpLEjJDLT7Lu8F8G5"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:46707/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.120.66/tcp/17832/p2p/16Uiu2HAm9wnZETfXrQKcMLvqPjo9hSmyAUHig2Yp4Q2GztF4px4m"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3066/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:17831/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:46707/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"contentTopic": "/myapp/1/latest/proto", "timestamp": 1730936935332290304}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:46707/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:222 Stopping container with id 3b6dd405a69a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:229 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:222 Stopping container with id 228dbcd92e99
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 3b6dd405a69a. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:229 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:222 Stopping container with id 5b2581972544
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 228dbcd92e99. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:229 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.