[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_subscribe_with_extra_field with id: 2024-11-06_23-45-29__1920cb0e-e0ad-47f1-832c-01d53283df59
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-06_23-45-29__1920cb0e-e0ad-47f1-832c-01d53283df59__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.156.106
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['24939', '24940', '24941', '24942', '24943']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:435 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:164 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:166 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 24939:24939 -p 24940:24940 -p 24941:24941 -p 24942:24942 -p 24943:24943 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=24941 --rest-port=24939 --tcp-port=24940 --discv5-udp-port=24942 --rest-address=0.0.0.0 --nat=extip:172.18.156.106 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cc4fcbd0427fcf0d08da57afc25e1f2b79a1cfff64bd949a4ad88d8a91d3ac3d --max-connections=1000 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=24943 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.156.106 waku b371387129ff9cd6a2fc90cc411a2fef2876ae3a712fca2f1c068bfffede5ab2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID b371387129ff. Setting up logs at ./log/docker/node1_2024-11-06_23-45-29__1920cb0e-e0ad-47f1-832c-01d53283df59__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:178 Started container from image wakuorg/nwaku:latest. REST: 24939
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 72be35ecae18. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24939/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:278 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24939/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.156.106/tcp/24940/p2p/16Uiu2HAkymA1kGNoDTVJxoACWcuUn2Tpd5hkWJDZyW6ndZftD279","/ip4/172.18.156.106/tcp/24941/ws/p2p/16Uiu2HAkymA1kGNoDTVJxoACWcuUn2Tpd5hkWJDZyW6ndZftD279"],"enrUri":"enr:-L24QLIlDUN8rO6R4fzBVCIjhVMcvz-Otk2tRK3--PEd_wW6AY-tEbcGHDpQTgdEP_7Zmd96pjDg_pETdYxHfw4ergQCgmlkgnY0gmlwhKwSnGqKbXVsdGlhZGRyc5YACASsEpxqBmFsAAoErBKcagZhbd0DgnJzhQADAQAAiXNlY3AyNTZrMaECQGx7GXRCDBqoOuh1sdqkL0_oS9B3gXrmVZC7Bx4jPViDdGNwgmFsg3VkcIJhboV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:283 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-11-06_23-45-29__1920cb0e-e0ad-47f1-832c-01d53283df59__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.222.155
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['11683', '11684', '11685', '11686', '11687']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:435 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:164 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:166 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 11683:11683 -p 11684:11684 -p 11685:11685 -p 11686:11686 -p 11687:11687 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=11685 --rest-port=11683 --tcp-port=11684 --discv5-udp-port=11686 --rest-address=0.0.0.0 --nat=extip:172.18.222.155 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cad05cbf939ebde31b5ea24e9cfb87b2addffefbebda8b78dcccabb92c3fd8b8 --max-connections=1000 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=11687 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QLIlDUN8rO6R4fzBVCIjhVMcvz-Otk2tRK3--PEd_wW6AY-tEbcGHDpQTgdEP_7Zmd96pjDg_pETdYxHfw4ergQCgmlkgnY0gmlwhKwSnGqKbXVsdGlhZGRyc5YACASsEpxqBmFsAAoErBKcagZhbd0DgnJzhQADAQAAiXNlY3AyNTZrMaECQGx7GXRCDBqoOuh1sdqkL0_oS9B3gXrmVZC7Bx4jPViDdGNwgmFsg3VkcIJhboV3YWt1MgU --filternode=/ip4/172.18.156.106/tcp/24940/p2p/16Uiu2HAkymA1kGNoDTVJxoACWcuUn2Tpd5hkWJDZyW6ndZftD279
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.222.155 waku 94f44ee6d21a1ec6fad1f1c2d1e5215c7b639f66ce02c36832b259c6c636392b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 94f44ee6d21a. Setting up logs at ./log/docker/node2_2024-11-06_23-45-29__1920cb0e-e0ad-47f1-832c-01d53283df59__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:178 Started container from image wakuorg/nwaku:latest. REST: 11683
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11683/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:278 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11683/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.222.155/tcp/11684/p2p/16Uiu2HAmCc6knpqmgq6sfFGgNvh2pAcNvw8UJNyeTNGWe4Ltz8mM","/ip4/172.18.222.155/tcp/11685/ws/p2p/16Uiu2HAmCc6knpqmgq6sfFGgNvh2pAcNvw8UJNyeTNGWe4Ltz8mM"],"enrUri":"enr:-L24QMXZ709ZPb55HMpFz2FtKm2TdQwv5rOhBiO9Y5p4KHzuVS7L-YZjh_HhCfl8-789eEQfnw8kZSsTEbPhTezxiX0CgmlkgnY0gmlwhKwS3puKbXVsdGlhZGRyc5YACASsEt6bBi2kAAoErBLemwYtpd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC_0J__FkKI86soa4Di3jM6s1DjmRJWaIyyKvPXW7BnECDdGNwgi2kg3VkcIItpoV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:283 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11683/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.156.106/tcp/24940/p2p/16Uiu2HAkymA1kGNoDTVJxoACWcuUn2Tpd5hkWJDZyW6ndZftD279"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24939/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11683/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "0058eca3-7750-41a1-8249-1b9f6e82cd43", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"0058eca3-7750-41a1-8249-1b9f6e82cd43","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11683/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1", "extraField": "extraValue"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:11683/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:222 Stopping container with id b371387129ff
[35mDEBUG   [0m src.node.waku_node:waku_node.py:229 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:222 Stopping container with id 94f44ee6d21a
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container b371387129ff. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:229 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.