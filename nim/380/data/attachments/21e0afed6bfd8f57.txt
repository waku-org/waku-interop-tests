[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_unsubscribe_with_extra_field with id: 2024-10-03_07-43-12__da5d4c0e-550b-41f3-95a3-9c578640bc7e
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-03_07-43-12__da5d4c0e-550b-41f3-95a3-9c578640bc7e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.19.3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['19948', '19949', '19950', '19951', '19952']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 19948:19948 -p 19949:19949 -p 19950:19950 -p 19951:19951 -p 19952:19952 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19950 --rest-port=19948 --tcp-port=19949 --discv5-udp-port=19951 --rest-address=0.0.0.0 --nat=extip:172.18.19.3 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=334a13d50bfbbf8d9a334fce5a884edbd69533cebe9fcdfa44cafb4b67fabf1e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19952 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.19.3 waku 351a72ff44c70bdec6feee740d9dcb62f5de3d3f7bb6cd0c99f5a48bf65be26a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 351a72ff44c7. Setting up logs at ./log/docker/node1_2024-10-03_07-43-12__da5d4c0e-550b-41f3-95a3-9c578640bc7e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 19948
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19948/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19948/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.19.3/tcp/19949/p2p/16Uiu2HAmBzTE94ZKa7Nit5bWQhvGuC9Lou2xXptZZx99Q9TWuoE6","/ip4/172.18.19.3/tcp/19950/ws/p2p/16Uiu2HAmBzTE94ZKa7Nit5bWQhvGuC9Lou2xXptZZx99Q9TWuoE6"],"enrUri":"enr:-LO4QL7Cn5FNosIR9Qd4uMjQwAHgs57v71zMf_vPhgAN8DKMQ4BkUqoXKtjOGbrhTsJwfdscb8Vhj2-fWNt4LLkh7gwBgmlkgnY0gmlwhKwSEwOKbXVsdGlhZGRyc4wACgSsEhMDBk3u3QOCcnOFAAMBAACJc2VjcDI1NmsxoQL2ILzxE97IINqpi1uHV0wPebVWDs8Z5L6wZxzr3qF0H4N0Y3CCTe2DdWRwgk3vhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-10-03_07-43-12__da5d4c0e-550b-41f3-95a3-9c578640bc7e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.107.133
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['22508', '22509', '22510', '22511', '22512']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 22508:22508 -p 22509:22509 -p 22510:22510 -p 22511:22511 -p 22512:22512 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22510 --rest-port=22508 --tcp-port=22509 --discv5-udp-port=22511 --rest-address=0.0.0.0 --nat=extip:172.18.107.133 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3f3fea286fffcd0fff4cde966d5fae52bb1be6fecebececdece1a3d68d32ca7d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22512 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QL7Cn5FNosIR9Qd4uMjQwAHgs57v71zMf_vPhgAN8DKMQ4BkUqoXKtjOGbrhTsJwfdscb8Vhj2-fWNt4LLkh7gwBgmlkgnY0gmlwhKwSEwOKbXVsdGlhZGRyc4wACgSsEhMDBk3u3QOCcnOFAAMBAACJc2VjcDI1NmsxoQL2ILzxE97IINqpi1uHV0wPebVWDs8Z5L6wZxzr3qF0H4N0Y3CCTe2DdWRwgk3vhXdha3UyBQ --filternode=/ip4/172.18.19.3/tcp/19949/p2p/16Uiu2HAmBzTE94ZKa7Nit5bWQhvGuC9Lou2xXptZZx99Q9TWuoE6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.107.133 waku 856a08af04aa3a51d7460bf9d2f7bdcdfb0beb4f33a02b284e904bcd6c75d230
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 856a08af04aa. Setting up logs at ./log/docker/node2_2024-10-03_07-43-12__da5d4c0e-550b-41f3-95a3-9c578640bc7e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 22508
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22508/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22508/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.107.133/tcp/22509/p2p/16Uiu2HAmVPgNDnEQ9E3E1DDaGzB8cEu5MKd7h4WqtQpdz4NgiidA","/ip4/172.18.107.133/tcp/22510/ws/p2p/16Uiu2HAmVPgNDnEQ9E3E1DDaGzB8cEu5MKd7h4WqtQpdz4NgiidA"],"enrUri":"enr:-LO4QKpNIkfjTVLCwXVhF3WijE1hI5rtyJptKYoWydPsyyJDLsqqiMQK9NJh6sglplnvLTCyv7dTT2K8Bwa93x8n3EQBgmlkgnY0gmlwhKwSa4WKbXVsdGlhZGRyc4wACgSsEmuFBlfu3QOCcnOFAAMBAACJc2VjcDI1NmsxoQP4qqGP6mueEcCf_-FtHE5Sym1ZU7tKrfG3wYcsQiL-LYN0Y3CCV-2DdWRwglfvhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22508/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.19.3/tcp/19949/p2p/16Uiu2HAmBzTE94ZKa7Nit5bWQhvGuC9Lou2xXptZZx99Q9TWuoE6"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19948/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22508/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "19325183-6226-49a9-87a3-2b1e8890a38f", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"19325183-6226-49a9-87a3-2b1e8890a38f","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X DELETE "http://127.0.0.1:22508/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1", "extraField": "extraValue"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:22508/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 351a72ff44c7
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 856a08af04aa
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.