[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_2_receiving_nodes__relay_node1_forwards_lightpushed_message_to_relay_node2 with id: 2024-10-03_07-43-27__65314564-053f-41d5-a032-c45b355aadfb
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-10-03_07-43-27__65314564-053f-41d5-a032-c45b355aadfb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.2.45
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['1920', '1921', '1922', '1923', '1924']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 1920:1920 -p 1921:1921 -p 1922:1922 -p 1923:1923 -p 1924:1924 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=1922 --rest-port=1920 --tcp-port=1921 --discv5-udp-port=1923 --rest-address=0.0.0.0 --nat=extip:172.18.2.45 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b18dcef8fcb9b7aaa5fabfb99fd8daeaba4cfc741c93bb06c8c7dd5ea5e6ed2b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=1924 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.2.45 waku 60607c6d89bd851efb4d323e7e953910acfed27080186d4cc16904727fe71d06
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 60607c6d89bd. Setting up logs at ./log/docker/receiving_node1_2024-10-03_07-43-27__65314564-053f-41d5-a032-c45b355aadfb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 1920
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1920/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1920/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.2.45/tcp/1921/p2p/16Uiu2HAmHmn2YuvKEkghADjbPfRhvWSEogQ7RCU8j5QpS9z5RnPn","/ip4/172.18.2.45/tcp/1922/ws/p2p/16Uiu2HAmHmn2YuvKEkghADjbPfRhvWSEogQ7RCU8j5QpS9z5RnPn"],"enrUri":"enr:-LO4QAetJkahydVXbwJbDGFZAexL0e258WxqW59vXNueiCrjPZJeUiZ7J35fnYrzoomScyNb-O-4ez_7S2DtJE02AaEBgmlkgnY0gmlwhKwSAi2KbXVsdGlhZGRyc4wACgSsEgItBgeC3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNMB5EIyO5WZQQWMfajYCHr9bl-PCFHwWaxZazlEmD6nYN0Y3CCB4GDdWRwggeDhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-10-03_07-43-27__65314564-053f-41d5-a032-c45b355aadfb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.94.222
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['54246', '54247', '54248', '54249', '54250']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 54246:54246 -p 54247:54247 -p 54248:54248 -p 54249:54249 -p 54250:54250 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=54248 --rest-port=54246 --tcp-port=54247 --discv5-udp-port=54249 --rest-address=0.0.0.0 --nat=extip:172.18.94.222 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=22ec491fdf3aa8c6908b9c7bf72dfaefec6e10f512c3401f5545002a261bacaf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=54250 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.94.222 waku 8acf2198c5790a1789562ba53d1a64d07ed754282ce904c45bbae6226a82e8ef
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 8acf2198c579. Setting up logs at ./log/docker/receiving_node2_2024-10-03_07-43-27__65314564-053f-41d5-a032-c45b355aadfb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 54246
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54246/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54246/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.94.222/tcp/54247/p2p/16Uiu2HAmH6xsyDW7m92RmBJkygWZD1qSFykqg6ERRu6Mk3zDNtdJ","/ip4/172.18.94.222/tcp/54248/ws/p2p/16Uiu2HAmH6xsyDW7m92RmBJkygWZD1qSFykqg6ERRu6Mk3zDNtdJ"],"enrUri":"enr:-LO4QFHYnph12--5hgMVxK-R0fp3exRUXTAxViPfrBZ50RgIQS6bmRGEt1-Ys3ptMSfjEH8j-EIPaYTD_DsK2ljL2WkBgmlkgnY0gmlwhKwSXt6KbXVsdGlhZGRyc4wACgSsEl7eBtPo3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNCFi95C7HvIhr1Nk9mlZdsUUZw3PLkUxcr5QMA-RaPDYN0Y3CC0-eDdWRwgtPphXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54246/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.2.45/tcp/1921/p2p/16Uiu2HAmHmn2YuvKEkghADjbPfRhvWSEogQ7RCU8j5QpS9z5RnPn"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-10-03_07-43-27__65314564-053f-41d5-a032-c45b355aadfb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.176.22
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['50300', '50301', '50302', '50303', '50304']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 50300:50300 -p 50301:50301 -p 50302:50302 -p 50303:50303 -p 50304:50304 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=50302 --rest-port=50300 --tcp-port=50301 --discv5-udp-port=50303 --rest-address=0.0.0.0 --nat=extip:172.18.176.22 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=adff7ffb9f511bebadbe884e19772db7dd67d5ba7af6ac7feff6f162dbe476dc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=50304 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QAetJkahydVXbwJbDGFZAexL0e258WxqW59vXNueiCrjPZJeUiZ7J35fnYrzoomScyNb-O-4ez_7S2DtJE02AaEBgmlkgnY0gmlwhKwSAi2KbXVsdGlhZGRyc4wACgSsEgItBgeC3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNMB5EIyO5WZQQWMfajYCHr9bl-PCFHwWaxZazlEmD6nYN0Y3CCB4GDdWRwggeDhXdha3UyCQ --lightpushnode=/ip4/172.18.2.45/tcp/1921/p2p/16Uiu2HAmHmn2YuvKEkghADjbPfRhvWSEogQ7RCU8j5QpS9z5RnPn --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.176.22 waku 46a50b43a98370e66833b42b02dbc5421533df93c3d411868c86a3fed0b40503
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 46a50b43a983. Setting up logs at ./log/docker/lightpush_node1_2024-10-03_07-43-27__65314564-053f-41d5-a032-c45b355aadfb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 50300
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50300/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50300/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.176.22/tcp/50301/p2p/16Uiu2HAmKT91DS5dUaZMvK66ppjNRaNGUvaYu8jh5fdYdMxaVtvn","/ip4/172.18.176.22/tcp/50302/ws/p2p/16Uiu2HAmKT91DS5dUaZMvK66ppjNRaNGUvaYu8jh5fdYdMxaVtvn"],"enrUri":"enr:-LO4QLNqtG20jRC4BId0OBG_WetuFm4A6TkK19UCAdnPw8IXVw89e5Pem8FYJr7cknwukSrll_NDDpXl6nKku-6hePYBgmlkgnY0gmlwhKwSsBaKbXVsdGlhZGRyc4wACgSsErAWBsR-3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNk-J-uVCZC3zXyFR7H4e5tIolT2r3oGUxoRQih1HbxK4N0Y3CCxH2DdWRwgsR_hXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:50300/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.2.45/tcp/1921/p2p/16Uiu2HAmHmn2YuvKEkghADjbPfRhvWSEogQ7RCU8j5QpS9z5RnPn"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:50300/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.94.222/tcp/54247/p2p/16Uiu2HAmH6xsyDW7m92RmBJkygWZD1qSFykqg6ERRu6Mk3zDNtdJ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1920/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54246/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:50300/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1727941412312705792}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1920/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1727941412312705792,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54246/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1727941412312705792,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 60607c6d89bd
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 8acf2198c579
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 46a50b43a983
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.