[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_missing_payload with id: 2024-10-03_07-44-02__bd995b4c-8249-4bcb-8b05-518a92dc76ae
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-10-03_07-44-02__bd995b4c-8249-4bcb-8b05-518a92dc76ae__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.136.169
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['37332', '37333', '37334', '37335', '37336']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 37332:37332 -p 37333:37333 -p 37334:37334 -p 37335:37335 -p 37336:37336 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37334 --rest-port=37332 --tcp-port=37333 --discv5-udp-port=37335 --rest-address=0.0.0.0 --nat=extip:172.18.136.169 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9fbb6bfe0d4cbedaab2a14bec6d7bee0bc516d22c51c82e6aeb2bf5cdb11f8ff --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37336 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.136.169 waku 7a8bd1b7cc30b7c31c4ab46bb8f18cd341aeb0a08ac8968258ebdc3639c4584c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 7a8bd1b7cc30. Setting up logs at ./log/docker/receiving_node1_2024-10-03_07-44-02__bd995b4c-8249-4bcb-8b05-518a92dc76ae__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 37332
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37332/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37332/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.136.169/tcp/37333/p2p/16Uiu2HAmATJCadCjBYemQ9DsJJkFD9Tj5eK1z8Gi3MEK7J3GNLvL","/ip4/172.18.136.169/tcp/37334/ws/p2p/16Uiu2HAmATJCadCjBYemQ9DsJJkFD9Tj5eK1z8Gi3MEK7J3GNLvL"],"enrUri":"enr:-LO4QPPNsi8X3nlDDTUu8_hCuFeIIM8XgxSqt-xSse_MeSOeFi6v0yfunaSQqJ9ENTo8KYBhzi1gDmKt4mv73mWWw1IBgmlkgnY0gmlwhKwSiKmKbXVsdGlhZGRyc4wACgSsEoipBpHW3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLfSdbdZoih-BPruwSrBUVJYV0QtaGA6AG-v78ufi13eYN0Y3CCkdWDdWRwgpHXhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-10-03_07-44-02__bd995b4c-8249-4bcb-8b05-518a92dc76ae__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.110.64
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['38704', '38705', '38706', '38707', '38708']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 38704:38704 -p 38705:38705 -p 38706:38706 -p 38707:38707 -p 38708:38708 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=38706 --rest-port=38704 --tcp-port=38705 --discv5-udp-port=38707 --rest-address=0.0.0.0 --nat=extip:172.18.110.64 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eb5f3d17c75d8d6643769bdb4bd8cb2f5e171d1e23d54ffecc84eef74be80ade --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=38708 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.110.64 waku 63f566b016d72dceaeb417ca50a806976ed918e91e28b772ca492957d90c1bbf
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 63f566b016d7. Setting up logs at ./log/docker/receiving_node2_2024-10-03_07-44-02__bd995b4c-8249-4bcb-8b05-518a92dc76ae__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 38704
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38704/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38704/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.110.64/tcp/38705/p2p/16Uiu2HAmEUaSeYdotfKvVoKYMAvrpYwxhTdHVjKb43p7RkDmut5Y","/ip4/172.18.110.64/tcp/38706/ws/p2p/16Uiu2HAmEUaSeYdotfKvVoKYMAvrpYwxhTdHVjKb43p7RkDmut5Y"],"enrUri":"enr:-LO4QKuPfR64iWgw1QKZE5nF98SYYnstMuMDlrVObNW1LGdUDPz0xJkcyPj6mGtriEYNUq1spqW9XQHf8K19-NBrW7UBgmlkgnY0gmlwhKwSbkCKbXVsdGlhZGRyc4wACgSsEm5ABpcy3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMbDIiImt2ZPkxvWVxPbFVx8-5W8sTchQauTGFwoAbmU4N0Y3CClzGDdWRwgpczhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38704/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.136.169/tcp/37333/p2p/16Uiu2HAmATJCadCjBYemQ9DsJJkFD9Tj5eK1z8Gi3MEK7J3GNLvL"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-10-03_07-44-02__bd995b4c-8249-4bcb-8b05-518a92dc76ae__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.188.134
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['34633', '34634', '34635', '34636', '34637']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 34633:34633 -p 34634:34634 -p 34635:34635 -p 34636:34636 -p 34637:34637 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34635 --rest-port=34633 --tcp-port=34634 --discv5-udp-port=34636 --rest-address=0.0.0.0 --nat=extip:172.18.188.134 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ecf065f5da7ae4e47785cfd39a948cc5ecf3f88d5cadf46d280d96ec4efc3456 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34637 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QPPNsi8X3nlDDTUu8_hCuFeIIM8XgxSqt-xSse_MeSOeFi6v0yfunaSQqJ9ENTo8KYBhzi1gDmKt4mv73mWWw1IBgmlkgnY0gmlwhKwSiKmKbXVsdGlhZGRyc4wACgSsEoipBpHW3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLfSdbdZoih-BPruwSrBUVJYV0QtaGA6AG-v78ufi13eYN0Y3CCkdWDdWRwgpHXhXdha3UyCQ --lightpushnode=/ip4/172.18.136.169/tcp/37333/p2p/16Uiu2HAmATJCadCjBYemQ9DsJJkFD9Tj5eK1z8Gi3MEK7J3GNLvL --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.188.134 waku e11a3aa79f1c380b756716d20c422ac598409573518c265fa6411e29b1a5d08d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID e11a3aa79f1c. Setting up logs at ./log/docker/lightpush_node1_2024-10-03_07-44-02__bd995b4c-8249-4bcb-8b05-518a92dc76ae__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 34633
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34633/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34633/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.188.134/tcp/34634/p2p/16Uiu2HAmPJbpRvmGxWHKVXy7LEJPXSHYg9rutLE4vRK5Buj2E8cU","/ip4/172.18.188.134/tcp/34635/ws/p2p/16Uiu2HAmPJbpRvmGxWHKVXy7LEJPXSHYg9rutLE4vRK5Buj2E8cU"],"enrUri":"enr:-LO4QGOv_VXtPbBWCe6xdb3rTw222IFBGlhbO9Eey8Dnlw-7I2K9jysvP6XP9vDGWJd22jzHC2G3piA8XlVheN-E__YBgmlkgnY0gmlwhKwSvIaKbXVsdGlhZGRyc4wACgSsEryGBodL3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOeN3aCoLNU3nXL_M6exfElkKSFB49Apj-JYhpWZyFPXYN0Y3CCh0qDdWRwgodMhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34633/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.136.169/tcp/37333/p2p/16Uiu2HAmATJCadCjBYemQ9DsJJkFD9Tj5eK1z8Gi3MEK7J3GNLvL"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34633/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.110.64/tcp/38705/p2p/16Uiu2HAmEUaSeYdotfKvVoKYMAvrpYwxhTdHVjKb43p7RkDmut5Y"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37332/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38704/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34633/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"contentTopic": "/myapp/1/latest/proto", "timestamp": 1727941446868073728}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:34633/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 7a8bd1b7cc30
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 63f566b016d7
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id e11a3aa79f1c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.