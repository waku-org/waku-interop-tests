[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_subscribe_to_pubsub_topics_from_multiple_clusters with id: 2024-08-27_06-54-38__e96b574e-04af-47be-8ddd-d29988fbb5c3
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-08-27_06-54-38__e96b574e-04af-47be-8ddd-d29988fbb5c3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.3.79
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['64162', '64163', '64164', '64165', '64166']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 64162:64162 -p 64163:64163 -p 64164:64164 -p 64165:64165 -p 64166:64166 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64164 --rest-port=64162 --tcp-port=64163 --discv5-udp-port=64165 --rest-address=0.0.0.0 --nat=extip:172.18.3.79 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=91aaeea3cb736450edd4ff9069c1d8a028baa1cbbcff0f0d47ab9e84b3bdc3bb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64166 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.3.79 waku 66c405602473adc8bf4312e0aacad281bc5ce9ed6f7ddc44ee135864fa1b71d9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 66c405602473. Setting up logs at ./log/docker/node1_2024-08-27_06-54-38__e96b574e-04af-47be-8ddd-d29988fbb5c3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 64162
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64162/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64162/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.3.79/tcp/64163/p2p/16Uiu2HAmHEtk4uBko6fzbnNRZPqqsnzGhJrVhyHMpNjW8Zv9sbsV","/ip4/172.18.3.79/tcp/64164/ws/p2p/16Uiu2HAmHEtk4uBko6fzbnNRZPqqsnzGhJrVhyHMpNjW8Zv9sbsV"],"enrUri":"enr:-LO4QNsKZclfJm3GVAvgplwniKLI0NaMfVOgeo27nRE-91BIdwbOLkQflfXidkj-VDTvlLLkAFqONs72ZwBF0l4w18UBgmlkgnY0gmlwhKwSA0-KbXVsdGlhZGRyc4wACgSsEgNPBvqk3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNEHiexYd-_yewYnSxiVBDeu_CAD-9fXPghJhSYcVfnKIN0Y3CC-qODdWRwgvqlhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-08-27_06-54-38__e96b574e-04af-47be-8ddd-d29988fbb5c3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.111.203
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['56796', '56797', '56798', '56799', '56800']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 56796:56796 -p 56797:56797 -p 56798:56798 -p 56799:56799 -p 56800:56800 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56798 --rest-port=56796 --tcp-port=56797 --discv5-udp-port=56799 --rest-address=0.0.0.0 --nat=extip:172.18.111.203 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2b549b09cb4cc0c7ab1d2843edaeeddc710f8292a647b0f37393edcea4ab061d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56800 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QNsKZclfJm3GVAvgplwniKLI0NaMfVOgeo27nRE-91BIdwbOLkQflfXidkj-VDTvlLLkAFqONs72ZwBF0l4w18UBgmlkgnY0gmlwhKwSA0-KbXVsdGlhZGRyc4wACgSsEgNPBvqk3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNEHiexYd-_yewYnSxiVBDeu_CAD-9fXPghJhSYcVfnKIN0Y3CC-qODdWRwgvqlhXdha3UyBQ --filternode=/ip4/172.18.3.79/tcp/64163/p2p/16Uiu2HAmHEtk4uBko6fzbnNRZPqqsnzGhJrVhyHMpNjW8Zv9sbsV
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.130.192
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['42233', '42234', '42235', '42236', '42237']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 42233:42233 -p 42234:42234 -p 42235:42235 -p 42236:42236 -p 42237:42237 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42235 --rest-port=42233 --tcp-port=42234 --discv5-udp-port=42236 --rest-address=0.0.0.0 --nat=extip:172.18.130.192 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d29d4007d332a68e724b5ace24d18fe9968bbe1fd5dfcdc08cc554ace4b24ceb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42237 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QNsKZclfJm3GVAvgplwniKLI0NaMfVOgeo27nRE-91BIdwbOLkQflfXidkj-VDTvlLLkAFqONs72ZwBF0l4w18UBgmlkgnY0gmlwhKwSA0-KbXVsdGlhZGRyc4wACgSsEgNPBvqk3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNEHiexYd-_yewYnSxiVBDeu_CAD-9fXPghJhSYcVfnKIN0Y3CC-qODdWRwgvqlhXdha3UyBQ --filternode=/ip4/172.18.3.79/tcp/64163/p2p/16Uiu2HAmHEtk4uBko6fzbnNRZPqqsnzGhJrVhyHMpNjW8Zv9sbsV
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.130.192 waku d53008bbaf52702f5392915a20e13b812db8dc272f002d8b0aaf55dbc7e21e83
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID d53008bbaf52. Setting up logs at ./log/docker/node2_2024-08-27_06-54-38__e96b574e-04af-47be-8ddd-d29988fbb5c3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 42233
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42233/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42233/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.130.192/tcp/42234/p2p/16Uiu2HAm2GpFp6Dyj4g4xiaBHjdhKMDbFjVzzWdqmSYvhH7B5LTC","/ip4/172.18.130.192/tcp/42235/ws/p2p/16Uiu2HAm2GpFp6Dyj4g4xiaBHjdhKMDbFjVzzWdqmSYvhH7B5LTC"],"enrUri":"enr:-LO4QHcaTrGVIKy3CV-ViceYksYzuuIQTIYlatdhNOD-9DTsAlGJYkPu7RKiXm75K-FL-4KmLqHMd2ZYECdAjBfoZSkBgmlkgnY0gmlwhKwSgsCKbXVsdGlhZGRyc4wACgSsEoLABqT73QOCcnOFAAMBAACJc2VjcDI1NmsxoQJlvPBqcAfi5pprJzj725jlNWWjn8_BelTnKd8glfIzm4N0Y3CCpPqDdWRwgqT8hXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:42233/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.3.79/tcp/64163/p2p/16Uiu2HAmHEtk4uBko6fzbnNRZPqqsnzGhJrVhyHMpNjW8Zv9sbsV"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.filter.test_subscribe_create:test_subscribe_create.py:41 Running test with pubsub topic: /waku/2/rs/3/1
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64162/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:42233/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1b287015-9659-4f7b-b00a-e1fb8d24c7aa", "contentFilters": ["/waku/2/rs/3/1"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1b287015-9659-4f7b-b00a-e1fb8d24c7aa","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64162/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/waku/2/rs/3/1", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42233/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/waku/2/rs/3/1","version":0,"timestamp":1724741682320018944,"ephemeral":false}]'
[35mDEBUG   [0m tests.filter.test_subscribe_create:test_subscribe_create.py:41 Running test with pubsub topic: /waku/2/rs/2/2
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64162/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/2"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:42233/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "0e91d95c-e24e-4c4e-95f8-3f00a47960c6", "contentFilters": ["/waku/2/rs/2/2"], "pubsubTopic": "/waku/2/rs/2/2"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"0e91d95c-e24e-4c4e-95f8-3f00a47960c6","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64162/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/waku/2/rs/2/2", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42233/filter/v2/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/waku/2/rs/2/2","version":0,"timestamp":1724741682445548032,"ephemeral":false}]'
[35mDEBUG   [0m tests.filter.test_subscribe_create:test_subscribe_create.py:41 Running test with pubsub topic: /waku/2/rs/3/9
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64162/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/9"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:42233/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "bc155b9e-486d-4e45-a269-0a97c12a6c94", "contentFilters": ["/waku/2/rs/3/9"], "pubsubTopic": "/waku/2/rs/3/9"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"bc155b9e-486d-4e45-a269-0a97c12a6c94","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64162/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F9" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/waku/2/rs/3/9", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42233/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F9" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/waku/2/rs/3/9","version":0,"timestamp":1724741682574559488,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 66c405602473
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id d53008bbaf52
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.