[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_lightpush_with_a_single_receiving_node with id: 2024-08-27_07-00-37__ffa5d2a4-75e3-4e72-8939-a25f4412a8d0
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-27_07-00-37__ffa5d2a4-75e3-4e72-8939-a25f4412a8d0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.81.163
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['40693', '40694', '40695', '40696', '40697']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 40693:40693 -p 40694:40694 -p 40695:40695 -p 40696:40696 -p 40697:40697 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40695 --rest-port=40693 --tcp-port=40694 --discv5-udp-port=40696 --rest-address=0.0.0.0 --nat=extip:172.18.81.163 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a6ef4ddcfdb5602f1aa5d63de619b4535bac152c0bb8abb25f4bcaacdb9628b4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40697 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.81.163 waku 855535ce1cf6769e4b7ecf702077a0b6df90c9ab9728f8bff43b51363f61108f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 855535ce1cf6. Setting up logs at ./log/docker/receiving_node1_2024-08-27_07-00-37__ffa5d2a4-75e3-4e72-8939-a25f4412a8d0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 40693
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40693/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40693/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.81.163/tcp/40694/p2p/16Uiu2HAmUDeJsc83Mad4N19LiJhULqvzNARw5pRtoGwyTHeGt4Kw","/ip4/172.18.81.163/tcp/40695/ws/p2p/16Uiu2HAmUDeJsc83Mad4N19LiJhULqvzNARw5pRtoGwyTHeGt4Kw"],"enrUri":"enr:-LO4QD7fggm1_ovelvTYyTUoxeOL9q15fq6tw6iH5IuQILYXPcRnIdp9kk2DuGMR1lErgHuY1PsY1ZXMZKSdJdIzryABgmlkgnY0gmlwhKwSUaOKbXVsdGlhZGRyc4wACgSsElGjBp733QOCcnOFAAMBAACJc2VjcDI1NmsxoQPnPM81pL5csIwWVQChPcXvZ4CpxMsbjtn_vTYtBkpKvoN0Y3CCnvaDdWRwgp74hXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-27_07-00-37__ffa5d2a4-75e3-4e72-8939-a25f4412a8d0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.42.11
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['46130', '46131', '46132', '46133', '46134']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 46130:46130 -p 46131:46131 -p 46132:46132 -p 46133:46133 -p 46134:46134 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=46132 --rest-port=46130 --tcp-port=46131 --discv5-udp-port=46133 --rest-address=0.0.0.0 --nat=extip:172.18.42.11 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ebfbce0268aea32cbbae01ddd2d4262e9ccea436cb033fa8f0dd3ebb4d6c9c13 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=46134 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QD7fggm1_ovelvTYyTUoxeOL9q15fq6tw6iH5IuQILYXPcRnIdp9kk2DuGMR1lErgHuY1PsY1ZXMZKSdJdIzryABgmlkgnY0gmlwhKwSUaOKbXVsdGlhZGRyc4wACgSsElGjBp733QOCcnOFAAMBAACJc2VjcDI1NmsxoQPnPM81pL5csIwWVQChPcXvZ4CpxMsbjtn_vTYtBkpKvoN0Y3CCnvaDdWRwgp74hXdha3UyCQ --lightpushnode=/ip4/172.18.81.163/tcp/40694/p2p/16Uiu2HAmUDeJsc83Mad4N19LiJhULqvzNARw5pRtoGwyTHeGt4Kw --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.42.11 waku e20c4368acc6893a51f8bf59d7a3683c7fefad4539d6a3acd04a76848b13bed6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID e20c4368acc6. Setting up logs at ./log/docker/lightpush_node1_2024-08-27_07-00-37__ffa5d2a4-75e3-4e72-8939-a25f4412a8d0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 46130
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46130/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46130/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.42.11/tcp/46131/p2p/16Uiu2HAkuwJXuU8mRjZipJZMWeBByNq8VwSwZ2vTBX6vZm3MS1m6","/ip4/172.18.42.11/tcp/46132/ws/p2p/16Uiu2HAkuwJXuU8mRjZipJZMWeBByNq8VwSwZ2vTBX6vZm3MS1m6"],"enrUri":"enr:-LO4QI1xJw7dA7FSvhfWecQx2E1s1x3q88tPPVCdAaedjy6KRCiz4VWTKuNi5zI-Ih_Yw4XpOvobIRlsw_dxLT2cVm0BgmlkgnY0gmlwhKwSKguKbXVsdGlhZGRyc4wACgSsEioLBrQ03QOCcnOFAAMBAACJc2VjcDI1NmsxoQIHlyzAbcBh2oUPwISvxNlLnBxrO-h65P29WN0KpizKZYN0Y3CCtDODdWRwgrQ1hXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:46130/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.81.163/tcp/40694/p2p/16Uiu2HAmUDeJsc83Mad4N19LiJhULqvzNARw5pRtoGwyTHeGt4Kw"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40693/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:46130/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724742040954282240}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:46130/lightpush/v1/message. Response content: b'Failed to request a message push: Lightpush request has not been published to any peers. msg_hash: 0x1bbae844b22f9071317da36de19f9fd2dddcaa5f3340d0aeedbefa85513743b6'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 855535ce1cf6
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id e20c4368acc6
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.