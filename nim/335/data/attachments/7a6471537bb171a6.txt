[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_single_pubsub_topic[/waku/2/rs/5/1] with id: 2024-08-27_07-07-25__0cc3ce76-cb24-4055-bf02-40f6b1a08936
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-08-27_07-07-25__0cc3ce76-cb24-4055-bf02-40f6b1a08936__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.170.244
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['1340', '1341', '1342', '1343', '1344']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 5
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 1340:1340 -p 1341:1341 -p 1342:1342 -p 1343:1343 -p 1344:1344 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=1342 --rest-port=1340 --tcp-port=1341 --discv5-udp-port=1343 --rest-address=0.0.0.0 --nat=extip:172.18.170.244 --peer-exchange=true --discv5-discovery=true --cluster-id=5 --nodekey=bed2406c6bbbda0f75f1ab9f9ddfdcaae55eb24bc3eafbbe6f5cbed10636a4de --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=1344 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/5/1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.170.244 waku ed7c9a5e6be73848be3899d1afb1f24ccffa035673c723e891ac69ad764e3f50
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID ed7c9a5e6be7. Setting up logs at ./log/docker/node1_2024-08-27_07-07-25__0cc3ce76-cb24-4055-bf02-40f6b1a08936__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 1340
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1340/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1340/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.170.244/tcp/1341/p2p/16Uiu2HAm6FmUBaF4bcGAErbM5EDwTiYNi6SYkRqQJskqmUN2vHD1","/ip4/172.18.170.244/tcp/1342/ws/p2p/16Uiu2HAm6FmUBaF4bcGAErbM5EDwTiYNi6SYkRqQJskqmUN2vHD1"],"enrUri":"enr:-LO4QGbPaDXWFFZkKKVmD4ZPuFQjxYf1LH6LnnYc6MBjhdXZSHG80WcNd79XzAJSSmOmUTiYnShlQBNl0s2GDAB6SkYBgmlkgnY0gmlwhKwSqvSKbXVsdGlhZGRyc4wACgSsEqr0BgU-3QOCcnOFAAUBAAGJc2VjcDI1NmsxoQKg5vR_adEeXwbhQHWZ64dExcMvIY_zoWj_vCH6JO9XMIN0Y3CCBT2DdWRwggU_hXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-08-27_07-07-25__0cc3ce76-cb24-4055-bf02-40f6b1a08936__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.54.32
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['30730', '30731', '30732', '30733', '30734']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 5
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 30730:30730 -p 30731:30731 -p 30732:30732 -p 30733:30733 -p 30734:30734 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=30732 --rest-port=30730 --tcp-port=30731 --discv5-udp-port=30733 --rest-address=0.0.0.0 --nat=extip:172.18.54.32 --peer-exchange=true --discv5-discovery=true --cluster-id=5 --nodekey=4d6ccb186dba311ade06cc1f09d9595cfc52e52223b7bd7eac8fffefaeedc0f2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=30734 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QGbPaDXWFFZkKKVmD4ZPuFQjxYf1LH6LnnYc6MBjhdXZSHG80WcNd79XzAJSSmOmUTiYnShlQBNl0s2GDAB6SkYBgmlkgnY0gmlwhKwSqvSKbXVsdGlhZGRyc4wACgSsEqr0BgU-3QOCcnOFAAUBAAGJc2VjcDI1NmsxoQKg5vR_adEeXwbhQHWZ64dExcMvIY_zoWj_vCH6JO9XMIN0Y3CCBT2DdWRwggU_hXdha3UyBQ --pubsub-topic=/waku/2/rs/5/1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.54.32 waku ba3e37fc17da876a9f7de624a53008f439132e9751e3e68f00429cbcc2941e25
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID ba3e37fc17da. Setting up logs at ./log/docker/node2_2024-08-27_07-07-25__0cc3ce76-cb24-4055-bf02-40f6b1a08936__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 30730
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30730/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30730/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.54.32/tcp/30731/p2p/16Uiu2HAkvV55iHNQQf1oGjSDFdppohDu9XyZcgnrERarMpBzy4uL","/ip4/172.18.54.32/tcp/30732/ws/p2p/16Uiu2HAkvV55iHNQQf1oGjSDFdppohDu9XyZcgnrERarMpBzy4uL"],"enrUri":"enr:-LO4QP7DkOV3lrvrt7YHb2I8b_GgmqFtwH4tfi_fwBLq-mfQXIgbwHQcCOTa1Za6CAp8miDjxyl5a4gTesaWwDfRg_4BgmlkgnY0gmlwhKwSNiCKbXVsdGlhZGRyc4wACgSsEjYgBngM3QOCcnOFAAUBAAGJc2VjcDI1NmsxoQIPuo0JnSImtVFbed3BoJ8x2Zb4dHAFVW7RHstTz79Hl4N0Y3CCeAuDdWRwgngNhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30730/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.170.244/tcp/1341/p2p/16Uiu2HAm6FmUBaF4bcGAErbM5EDwTiYNi6SYkRqQJskqmUN2vHD1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1340/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/5/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30730/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/5/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1340/relay/v1/messages/%2Fwaku%2F2%2Frs%2F5%2F1" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1340/relay/v1/messages/%2Fwaku%2F2%2Frs%2F5%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1724742448842219008,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30730/relay/v1/messages/%2Fwaku%2F2%2Frs%2F5%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1724742448842219008,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id ed7c9a5e6be7
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id ba3e37fc17da
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.