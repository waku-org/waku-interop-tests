[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_valid_payloads_lightpush_at_spam_rate with id: 2024-08-27_06-49-14__8a56835b-ffc8-40f7-a9a5-df3860ce40ae
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.rln:rln.py:130 Registering RLN credentials for single node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node_2024-08-27_06-49-14__eb949613-8027-4e06-a692-8c421c85766f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:188 Registering RLN credentials...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:32 Network waku created
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.187.188
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['58756', '58757', '58758', '58759', '58760']
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 58756:58756 -p 58757:58757 -p 58758:58758 -p 58759:58759 -p 58760:58760 wakuorg/nwaku:latest generateRlnKeystore --execute --rln-relay-user-message-limit=100 --rln-relay-cred-path=/keystore/keystore.json --rln-relay-cred-password=password --rln-relay-eth-client-address=https://sepolia.infura.io/v3/0fbc961f49944da4b8fde35715e2171b --rln-relay-eth-contract-address=0xCB33Aa5B38d79E3D9Fa8B10afF38AA201399a7e3 --rln-relay-eth-private-key=d5f76ef141a96d916f99c72878a92cc6fb479af8441670d103e307d1184ab367
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.187.188 waku e851d0f882d8d06ae4455cfce7b3052fa1e4db636f6e16d0e7c1ab4208474a80
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID e851d0f882d8. Setting up logs at ./log/docker/node_2024-08-27_06-49-14__eb949613-8027-4e06-a692-8c421c85766f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:207 Executed container from image wakuorg/nwaku:latest. REST: 58756 to register RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:209 Waiting for keystore /home/runner/work/waku-interop-tests/waku-interop-tests/keystore_jpxw_1/keystore.json
[35mDEBUG   [0m src.steps.rln:rln.py:130 Registering RLN credentials for single node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node_2024-08-27_06-49-24__38357eda-c222-40a4-b57c-407d5e7a3a8e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:188 Registering RLN credentials...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.18.28
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['27412', '27413', '27414', '27415', '27416']
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 27412:27412 -p 27413:27413 -p 27414:27414 -p 27415:27415 -p 27416:27416 wakuorg/nwaku:latest generateRlnKeystore --execute --rln-relay-user-message-limit=100 --rln-relay-cred-path=/keystore/keystore.json --rln-relay-cred-password=password --rln-relay-eth-client-address=https://sepolia.infura.io/v3/0fbc961f49944da4b8fde35715e2171b --rln-relay-eth-contract-address=0xCB33Aa5B38d79E3D9Fa8B10afF38AA201399a7e3 --rln-relay-eth-private-key=6bafcb0228b6b369b2de376bd9e37cdd3f5d30ce0787992b235acfacfa5de52e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.18.28 waku 7e4bd11d28d0f0d4656b051bad20e6b0b8e98650e20bd10102a683bf9ab6b38c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 7e4bd11d28d0. Setting up logs at ./log/docker/node_2024-08-27_06-49-24__38357eda-c222-40a4-b57c-407d5e7a3a8e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:207 Executed container from image wakuorg/nwaku:latest. REST: 27412 to register RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:209 Waiting for keystore /home/runner/work/waku-interop-tests/waku-interop-tests/keystore_vtfc_2/keystore.json
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-08-27_06-49-14__8a56835b-ffc8-40f7-a9a5-df3860ce40ae__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.56.45
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['26294', '26295', '26296', '26297', '26298']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes ['/home/runner/work/waku-interop-tests/waku-interop-tests/rln_tree_jpxw_1:/etc/rln_tree', '/home/runner/work/waku-interop-tests/waku-interop-tests/keystore_jpxw_1:/keystore']
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 26294:26294 -p 26295:26295 -p 26296:26296 -p 26297:26297 -p 26298:26298 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26296 --rest-port=26294 --tcp-port=26295 --discv5-udp-port=26297 --rest-address=0.0.0.0 --nat=extip:172.18.56.45 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b86cd37136aac5b8865ac2ca6cbfdcddd49fc8bfb7af7c1f653cd52f22db90a1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26298 --metrics-logging=true --relay=true --rln-relay-membership-index=1 --lightpush=true --rln-relay-user-message-limit=1 --rln-relay-epoch-sec=1 --rln-relay=true --rln-relay-cred-path=/keystore/keystore.json --rln-relay-cred-password=password
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.56.45 waku f3369925691ff358710b650d64051755d0c91ab3e39f606c12419b8528b15917
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID f3369925691f. Setting up logs at ./log/docker/node1_2024-08-27_06-49-14__8a56835b-ffc8-40f7-a9a5-df3860ce40ae__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 26294
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26294/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Initializing","protocolsHealth":[{"Rln Relay":"Ready"}]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26294/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[{"Rln Relay":"Ready"}]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26294/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.56.45/tcp/26295/p2p/16Uiu2HAmDMSE3DdDda4ZgtHfoNhnHXYhJ8WUPrNHHVBd6WBdgJrZ","/ip4/172.18.56.45/tcp/26296/ws/p2p/16Uiu2HAmDMSE3DdDda4ZgtHfoNhnHXYhJ8WUPrNHHVBd6WBdgJrZ"],"enrUri":"enr:-LO4QCot7QV0J5x6XEyLZQIOiS2uL0bChHil4wFp6jzjUa_IfqY7ej-I4tQxXoBVr0RXRKJS3SAGqzTnK8EucO_MwJsBgmlkgnY0gmlwhKwSOC2KbXVsdGlhZGRyc4wACgSsEjgtBma43QOCcnOFAAMBAACJc2VjcDI1NmsxoQMKXH1C8T1ZR_Dyfui7taZFCyLba0Y6sLmOrkllK5xW9oN0Y3CCZreDdWRwgma5hXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node2_2024-08-27_06-49-14__8a56835b-ffc8-40f7-a9a5-df3860ce40ae__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.188.136
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['25431', '25432', '25433', '25434', '25435']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes ['/home/runner/work/waku-interop-tests/waku-interop-tests/rln_tree_vtfc_2:/etc/rln_tree', '/home/runner/work/waku-interop-tests/waku-interop-tests/keystore_vtfc_2:/keystore']
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 25431:25431 -p 25432:25432 -p 25433:25433 -p 25434:25434 -p 25435:25435 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25433 --rest-port=25431 --tcp-port=25432 --discv5-udp-port=25434 --rest-address=0.0.0.0 --nat=extip:172.18.188.136 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3536a983ecab1deccb30e11d883b0ebd18a2aece3825bbb75b9fc6c4ada8c2d2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25435 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QCot7QV0J5x6XEyLZQIOiS2uL0bChHil4wFp6jzjUa_IfqY7ej-I4tQxXoBVr0RXRKJS3SAGqzTnK8EucO_MwJsBgmlkgnY0gmlwhKwSOC2KbXVsdGlhZGRyc4wACgSsEjgtBma43QOCcnOFAAMBAACJc2VjcDI1NmsxoQMKXH1C8T1ZR_Dyfui7taZFCyLba0Y6sLmOrkllK5xW9oN0Y3CCZreDdWRwgma5hXdha3UyCQ --lightpush=true --lightpushnode=/ip4/172.18.56.45/tcp/26295/p2p/16Uiu2HAmDMSE3DdDda4ZgtHfoNhnHXYhJ8WUPrNHHVBd6WBdgJrZ --rln-relay-membership-index=1 --rln-relay-user-message-limit=1 --rln-relay-epoch-sec=1 --rln-relay=true --rln-relay-cred-path=/keystore/keystore.json --rln-relay-cred-password=password
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.188.136 waku cf577da743496cc89b782b7e79ff73e0966a23160a2f9af18553c0b1ba065c65
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID cf577da74349. Setting up logs at ./log/docker/lightpush_node2_2024-08-27_06-49-14__8a56835b-ffc8-40f7-a9a5-df3860ce40ae__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 25431
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25431/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Initializing","protocolsHealth":[{"Rln Relay":"Ready"}]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25431/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[{"Rln Relay":"Ready"}]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25431/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.188.136/tcp/25432/p2p/16Uiu2HAmSBxhzjdAd1iPaWcPMctmq5F7srYSFa7FkXCFNaMq2Hqw","/ip4/172.18.188.136/tcp/25433/ws/p2p/16Uiu2HAmSBxhzjdAd1iPaWcPMctmq5F7srYSFa7FkXCFNaMq2Hqw"],"enrUri":"enr:-LO4QI7NycGYfopGXCAahy25caG0c58MhPE7QFwrm_zNtdJOUvdAh9z7EbjDgh9K1pyT42wXAqJ3o0q45Hi_JatSzK4BgmlkgnY0gmlwhKwSvIiKbXVsdGlhZGRyc4wACgSsEryIBmNZ3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPJFxPPglPM4rMzFUaCLixOfiI208LFC-OdyLxORiVBvoN0Y3CCY1iDdWRwgmNahXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25431/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.56.45/tcp/26295/p2p/16Uiu2HAmDMSE3DdDda4ZgtHfoNhnHXYhJ8WUPrNHHVBd6WBdgJrZ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26294/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/1/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25431/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/1/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.relay.test_rln:test_rln.py:30 Running test with payload A simple string
[35mDEBUG   [0m tests.relay.test_rln:test_rln.py:33 Sending message No. #1
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25431/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/1/0", "message": {"payload": "SGVsbG8gV29ybGQh", "contentTopic": "/test/1/waku-rln-relay/proto", "timestamp": 1724741388647606016}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.relay.test_rln:test_rln.py:30 Running test with payload An integer
[35mDEBUG   [0m tests.relay.test_rln:test_rln.py:33 Sending message No. #2
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25431/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/1/0", "message": {"payload": "MTIzNDU2Nzg5MA==", "contentTopic": "/test/1/waku-rln-relay/proto", "timestamp": 1724741388943364352}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:25431/lightpush/v1/message. Response content: b'Failed to request a message push: could not get new message id to generate an rln proof: NonceLimitReached: Nonce limit reached. Please wait for the next epoch. requested nonce: 1 & nonceLimit: 1'
[35mDEBUG   [0m tests.relay.test_rln:test_rln.py:30 Running test with payload A dictionary
[35mDEBUG   [0m tests.relay.test_rln:test_rln.py:33 Sending message No. #3
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25431/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/1/0", "message": {"payload": "eyJrZXkiOiAidmFsdWUifQ==", "contentTopic": "/test/1/waku-rln-relay/proto", "timestamp": 1724741388952469760}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:25431/lightpush/v1/message. Response content: b'Failed to request a message push: could not get new message id to generate an rln proof: NonceLimitReached: Nonce limit reached. Please wait for the next epoch. requested nonce: 2 & nonceLimit: 1'
[35mDEBUG   [0m tests.relay.test_rln:test_rln.py:30 Running test with payload Chinese characters
[35mDEBUG   [0m tests.relay.test_rln:test_rln.py:33 Sending message No. #4
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25431/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/1/0", "message": {"payload": "6L+Z5piv5LiA5Lqb5Lit5paH", "contentTopic": "/test/1/waku-rln-relay/proto", "timestamp": 1724741388958160128}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:25431/lightpush/v1/message. Response content: b'Failed to request a message push: could not get new message id to generate an rln proof: NonceLimitReached: Nonce limit reached. Please wait for the next epoch. requested nonce: 3 & nonceLimit: 1'
[35mDEBUG   [0m tests.relay.test_rln:test_rln.py:30 Running test with payload Emojis
[35mDEBUG   [0m tests.relay.test_rln:test_rln.py:33 Sending message No. #5
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25431/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/1/0", "message": {"payload": "8J+agPCfjJ/inKg=", "contentTopic": "/test/1/waku-rln-relay/proto", "timestamp": 1724741388963783936}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:25431/lightpush/v1/message. Response content: b'Failed to request a message push: could not get new message id to generate an rln proof: NonceLimitReached: Nonce limit reached. Please wait for the next epoch. requested nonce: 4 & nonceLimit: 1'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id f3369925691f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id cf577da74349
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.