2025-02-14 04:05:07.758 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-14 04:05:07.759 DEBUG [tests.conftest] Running test: test_time_filter_end_time_now with id: 2025-02-14_04-05-07__f54200a4-2e67-48d2-bf6d-6b07afdef825
2025-02-14 04:05:07.759 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-14 04:05:07.759 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-14 04:05:07.760 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-14 04:05:07.766 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:05:07.767 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-14_04-05-07__f54200a4-2e67-48d2-bf6d-6b07afdef825__wakuorg_nwaku:latest.log
2025-02-14 04:05:07.767 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:05:07.767 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:05:07.769 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:05:07.769 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.11.101
2025-02-14 04:05:07.769 DEBUG [src.node.docker_mananger] Generated ports ['40124', '40125', '40126', '40127', '40128']
2025-02-14 04:05:07.769 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:05:07.769 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:05:07.769 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:05:07.769 DEBUG [src.node.docker_mananger] docker run -i -t -p 40124:40124 -p 40125:40125 -p 40126:40126 -p 40127:40127 -p 40128:40128 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40126 --rest-port=40124 --tcp-port=40125 --discv5-udp-port=40127 --rest-address=0.0.0.0 --nat=extip:172.18.11.101 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=adcefdad5b647f8e2faeffca7e281c7adeaa57dba458b87e5a6dfcdc41ba0ae8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40128 --metrics-logging=true --store=true --relay=true
2025-02-14 04:05:08.005 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.11.101 waku 6eff80112404c2cd07dbd149e607c454b28e2c07f6b5e41c266285e9cdf83c2c
2025-02-14 04:05:08.056 DEBUG [src.node.docker_mananger] Container started with ID 6eff80112404. Setting up logs at ./log/docker/publishing_node1_2025-02-14_04-05-07__f54200a4-2e67-48d2-bf6d-6b07afdef825__wakuorg_nwaku:latest.log
2025-02-14 04:05:08.059 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 40124
2025-02-14 04:05:08.059 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:05:08.547 ERROR [src.node.docker_mananger] Max retries reached for container 10c7ef9fcb53. Exiting log stream.
2025-02-14 04:05:09.060 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40124/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:05:09.063 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:05:09.063 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:05:09.063 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40124/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:05:09.065 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.11.101/tcp/40125/p2p/16Uiu2HAm8QGo3WkihA42tfg14WRkBANXxcPYWM9tTF995oV72Utx","/ip4/172.18.11.101/tcp/40126/ws/p2p/16Uiu2HAm8QGo3WkihA42tfg14WRkBANXxcPYWM9tTF995oV72Utx"],"enrUri":"enr:-L24QGlHDLHTcIunHJkGjUvWlTqA0fd418B4q1QmQ5rQVu8Zb1QnOImDxhYD6cWH4Y4thzrDKcr5K3KH3a2f-r0dZrMCgmlkgnY0gmlwhKwSC2WKbXVsdGlhZGRyc5YACASsEgtlBpy9AAoErBILZQacvt0DgnJzhQADAQAAiXNlY3AyNTZrMaECwMwiLJTBlQY4VenD4cWzy_UK5PmXYKvr8aEwf-tfbhmDdGNwgpy9g3VkcIKcv4V3YWt1MgM"}'
2025-02-14 04:05:09.066 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:05:09.072 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:05:09.073 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-14_04-05-07__f54200a4-2e67-48d2-bf6d-6b07afdef825__wakuorg_nwaku:latest.log
2025-02-14 04:05:09.073 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:05:09.073 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:05:09.074 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:05:09.075 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.11.163
2025-02-14 04:05:09.075 DEBUG [src.node.docker_mananger] Generated ports ['41632', '41633', '41634', '41635', '41636']
2025-02-14 04:05:09.075 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:05:09.075 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:05:09.075 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:05:09.075 DEBUG [src.node.docker_mananger] docker run -i -t -p 41632:41632 -p 41633:41633 -p 41634:41634 -p 41635:41635 -p 41636:41636 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=41634 --rest-port=41632 --tcp-port=41633 --discv5-udp-port=41635 --rest-address=0.0.0.0 --nat=extip:172.18.11.163 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=993c238e4f84fc3808fc2bb4676aee347e6ec80c5d22f15b0bdac272da627fc3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=41636 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QGlHDLHTcIunHJkGjUvWlTqA0fd418B4q1QmQ5rQVu8Zb1QnOImDxhYD6cWH4Y4thzrDKcr5K3KH3a2f-r0dZrMCgmlkgnY0gmlwhKwSC2WKbXVsdGlhZGRyc5YACASsEgtlBpy9AAoErBILZQacvt0DgnJzhQADAQAAiXNlY3AyNTZrMaECwMwiLJTBlQY4VenD4cWzy_UK5PmXYKvr8aEwf-tfbhmDdGNwgpy9g3VkcIKcv4V3YWt1MgM --storenode=/ip4/172.18.11.101/tcp/40125/p2p/16Uiu2HAm8QGo3WkihA42tfg14WRkBANXxcPYWM9tTF995oV72Utx --store=true --relay=true
2025-02-14 04:05:09.311 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.11.163 waku 703457d21706f1f5770991891124ea00df9f5792b1f8b994c946144f8fa745c3
2025-02-14 04:05:09.362 DEBUG [src.node.docker_mananger] Container started with ID 703457d21706. Setting up logs at ./log/docker/store_node1_2025-02-14_04-05-07__f54200a4-2e67-48d2-bf6d-6b07afdef825__wakuorg_nwaku:latest.log
2025-02-14 04:05:09.363 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 41632
2025-02-14 04:05:09.364 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:05:10.364 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:41632/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:05:10.367 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:05:10.367 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:05:10.367 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:41632/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:05:10.370 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.11.163/tcp/41633/p2p/16Uiu2HAm5vvBoypBap2t9kYtys7Auf8UAbB9spnqffLetpJUHnXo","/ip4/172.18.11.163/tcp/41634/ws/p2p/16Uiu2HAm5vvBoypBap2t9kYtys7Auf8UAbB9spnqffLetpJUHnXo"],"enrUri":"enr:-L24QJiOHDslGamnn8FD8_PYhtHADA1a01deuMC_bKY5w7aXKKhJFcjV_0lDDVDcKOuq_pin0u9podHEnxZnS9sp0H4CgmlkgnY0gmlwhKwSC6OKbXVsdGlhZGRyc5YACASsEgujBqKhAAoErBILowaiot0DgnJzhQADAQAAiXNlY3AyNTZrMaECnBLG39WObCzqb6e5bzfT-6yN4aiXWdihYxqFbsIJQV6DdGNwgqKhg3VkcIKio4V3YWt1MgM"}'
2025-02-14 04:05:10.370 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:05:10.371 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:41632/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.11.101/tcp/40125/p2p/16Uiu2HAm8QGo3WkihA42tfg14WRkBANXxcPYWM9tTF995oV72Utx"]'
2025-02-14 04:05:10.373 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:05:10.374 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40124/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-14 04:05:10.376 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:05:10.376 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:41632/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-14 04:05:10.378 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:05:10.379 DEBUG [src.steps.store] Relaying message
2025-02-14 04:05:10.379 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40124/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:05:10.390 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:05:10.391 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 04:05:10.592 DEBUG [src.steps.store] Relaying message
2025-02-14 04:05:10.592 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40124/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:05:10.599 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:05:10.600 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 04:05:10.801 DEBUG [src.steps.store] Relaying message
2025-02-14 04:05:10.801 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40124/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:05:10.807 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:05:10.808 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 04:05:11.009 DEBUG [src.steps.store] Relaying message
2025-02-14 04:05:11.009 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40124/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:05:11.015 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:05:11.015 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 04:05:11.216 DEBUG [src.steps.store] Relaying message
2025-02-14 04:05:11.216 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40124/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:05:11.223 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:05:11.223 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 04:05:11.424 DEBUG [src.steps.store] Relaying message
2025-02-14 04:05:11.424 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40124/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:05:11.430 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:05:11.430 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 04:05:11.631 DEBUG [tests.store.test_time_filter] inquering stored messages with start time 1739505907379535872 after end time 1739505911631171840
2025-02-14 04:05:11.631 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40124/store/v3/messages?includeData=True&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=1739505907379535872&endTime=1739505911631171840&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:05:11.635 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x0c981846d36d73ec2660edee09a335c9c8e465d7b6656e2a68d0ffb5e4a51b63","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739505907379535872,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0x1934c33e071df88525ad5922666d44eb04c5834c16f5e9134281d4e134c60432","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739505909379544064,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0x6e23b707217e64a29a93ac9ff1eab8675046a1e87dcadbbca91cc56159ff6d39","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739505910279546112,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"}]}'
2025-02-14 04:05:11.635 DEBUG [tests.store.test_time_filter] number of messages stored for start time 1739505907379535872 and end time = 1739505911631171840 is  3
2025-02-14 04:05:11.636 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:41632/store/v3/messages?includeData=True&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=1739505907379535872&endTime=1739505911631171840&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:05:11.639 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x0c981846d36d73ec2660edee09a335c9c8e465d7b6656e2a68d0ffb5e4a51b63","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739505907379535872,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0x1934c33e071df88525ad5922666d44eb04c5834c16f5e9134281d4e134c60432","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739505909379544064,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0x6e23b707217e64a29a93ac9ff1eab8675046a1e87dcadbbca91cc56159ff6d39","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739505910279546112,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"}]}'
2025-02-14 04:05:11.639 DEBUG [tests.store.test_time_filter] number of messages stored for start time 1739505907379535872 and end time = 1739505911631171840 is  3
2025-02-14 04:05:11.641 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-14 04:05:11.642 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-14 04:05:11.642 DEBUG [src.node.waku_node] Stopping container with id 6eff80112404
2025-02-14 04:05:12.597 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:05:12.597 DEBUG [src.node.waku_node] Stopping container with id 703457d21706
2025-02-14 04:05:13.410 ERROR [src.node.docker_mananger] Max retries reached for container 6eff80112404. Exiting log stream.
2025-02-14 04:05:14.115 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:05:14.115 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-14 04:05:14.123 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-14 04:05:14.130 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
