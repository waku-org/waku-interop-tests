2025-02-14 04:08:51.726 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-14 04:08:51.726 DEBUG [tests.conftest] Running test: test_store_lightpushed_message with id: 2025-02-14_04-08-51__b1b7978b-ac7d-418d-87be-dc16096bcf18
2025-02-14 04:08:51.726 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-14 04:08:51.727 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-14 04:08:51.733 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:08:51.734 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-14_04-08-51__b1b7978b-ac7d-418d-87be-dc16096bcf18__wakuorg_nwaku:latest.log
2025-02-14 04:08:51.734 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:08:51.734 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:08:51.735 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:08:51.735 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.147.30
2025-02-14 04:08:51.735 DEBUG [src.node.docker_mananger] Generated ports ['7904', '7905', '7906', '7907', '7908']
2025-02-14 04:08:51.736 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:08:51.736 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:08:51.736 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:08:51.736 DEBUG [src.node.docker_mananger] docker run -i -t -p 7904:7904 -p 7905:7905 -p 7906:7906 -p 7907:7907 -p 7908:7908 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7906 --rest-port=7904 --tcp-port=7905 --discv5-udp-port=7907 --rest-address=0.0.0.0 --nat=extip:172.18.147.30 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5178015aabda0b4c2706c81c1a0d4c70cb4ea40f377f1bbedb2fdc3f11d5e0ad --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7908 --metrics-logging=true --store=true --relay=true --lightpush=true
2025-02-14 04:08:51.967 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.147.30 waku 8049329fa3f284d90ba5e5530ffac09adcef972f4ecb1b26c84baf91323f7e80
2025-02-14 04:08:52.036 DEBUG [src.node.docker_mananger] Container started with ID 8049329fa3f2. Setting up logs at ./log/docker/publishing_node1_2025-02-14_04-08-51__b1b7978b-ac7d-418d-87be-dc16096bcf18__wakuorg_nwaku:latest.log
2025-02-14 04:08:52.036 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 7904
2025-02-14 04:08:52.036 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:08:52.533 ERROR [src.node.docker_mananger] Max retries reached for container 68e585c347b5. Exiting log stream.
2025-02-14 04:08:53.038 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7904/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:08:53.041 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:08:53.041 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:08:53.041 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7904/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:08:53.043 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.147.30/tcp/7905/p2p/16Uiu2HAm3ZAVRYBAzmr5f4XPogPbBnxEwtsQwNyiPVozf2tMfAkr","/ip4/172.18.147.30/tcp/7906/ws/p2p/16Uiu2HAm3ZAVRYBAzmr5f4XPogPbBnxEwtsQwNyiPVozf2tMfAkr"],"enrUri":"enr:-L24QGvl8cpfSr0d8ENtlaYP3fqwaMV1b5yZ50VxDgRX6882BaM7Ohy5h2GnLXW4QKYbSkREhV75ASn70a6Os6mhZFECgmlkgnY0gmlwhKwSkx6KbXVsdGlhZGRyc5YACASsEpMeBh7hAAoErBKTHgYe4t0DgnJzhQADAQAAiXNlY3AyNTZrMaECeMjMZPuXHg6TRZTZDvxxknkGADFqq59bpRI2-_9TQIODdGNwgh7hg3VkcIIe44V3YWt1Mgs"}'
2025-02-14 04:08:53.043 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:08:53.049 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:08:53.050 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node2_2025-02-14_04-08-51__b1b7978b-ac7d-418d-87be-dc16096bcf18__wakuorg_nwaku:latest.log
2025-02-14 04:08:53.050 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:08:53.050 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:08:53.051 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:08:53.051 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.207.120
2025-02-14 04:08:53.052 DEBUG [src.node.docker_mananger] Generated ports ['7872', '7873', '7874', '7875', '7876']
2025-02-14 04:08:53.052 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:08:53.052 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:08:53.052 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:08:53.052 DEBUG [src.node.docker_mananger] docker run -i -t -p 7872:7872 -p 7873:7873 -p 7874:7874 -p 7875:7875 -p 7876:7876 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7874 --rest-port=7872 --tcp-port=7873 --discv5-udp-port=7875 --rest-address=0.0.0.0 --nat=extip:172.18.207.120 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5f4913e500fe03a2fdddc01dcf7cb98eacf6b0c69dd192ae8d3c1b6f4a743b90 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7876 --metrics-logging=true --store=false --relay=true
2025-02-14 04:08:53.222 ERROR [src.node.docker_mananger] Max retries reached for container faeec32b4324. Exiting log stream.
2025-02-14 04:08:53.275 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.207.120 waku 33dd448af9d4cdc3b03c6493ba3872f9a55cff6e13fc714bb375e67357a92c96
2025-02-14 04:08:53.319 DEBUG [src.node.docker_mananger] Container started with ID 33dd448af9d4. Setting up logs at ./log/docker/publishing_node2_2025-02-14_04-08-51__b1b7978b-ac7d-418d-87be-dc16096bcf18__wakuorg_nwaku:latest.log
2025-02-14 04:08:53.319 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 7872
2025-02-14 04:08:53.319 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:08:54.320 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7872/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:08:54.322 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:08:54.322 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:08:54.323 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7872/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:08:54.325 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.207.120/tcp/7873/p2p/16Uiu2HAm19xWKULRkEdQEpSYz1YjpMbjH3vDL7E8GeVsnX5T8S8q","/ip4/172.18.207.120/tcp/7874/ws/p2p/16Uiu2HAm19xWKULRkEdQEpSYz1YjpMbjH3vDL7E8GeVsnX5T8S8q"],"enrUri":"enr:-L24QOEihNBJ7D__wt5w33MUyx8fCon9fe_njbqmZxSZQK_iHJKXYbqFxqD9cgnzUd6Ws4P6FgGqSRCgRcVmgutVxawCgmlkgnY0gmlwhKwSz3iKbXVsdGlhZGRyc5YACASsEs94Bh7BAAoErBLPeAYewt0DgnJzhQADAQAAiXNlY3AyNTZrMaECVR-D1OJouNpPNnlVW726U5xXN66Xn-dWnlwEzFZvZYKDdGNwgh7Bg3VkcIIew4V3YWt1MgE"}'
2025-02-14 04:08:54.325 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:08:54.325 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7872/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.147.30/tcp/7905/p2p/16Uiu2HAm3ZAVRYBAzmr5f4XPogPbBnxEwtsQwNyiPVozf2tMfAkr"]'
2025-02-14 04:08:54.368 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:08:54.376 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:08:54.376 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-14_04-08-51__b1b7978b-ac7d-418d-87be-dc16096bcf18__wakuorg_nwaku:latest.log
2025-02-14 04:08:54.376 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:08:54.377 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:08:54.378 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:08:54.378 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.246.253
2025-02-14 04:08:54.378 DEBUG [src.node.docker_mananger] Generated ports ['2892', '2893', '2894', '2895', '2896']
2025-02-14 04:08:54.378 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:08:54.378 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:08:54.379 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:08:54.379 DEBUG [src.node.docker_mananger] docker run -i -t -p 2892:2892 -p 2893:2893 -p 2894:2894 -p 2895:2895 -p 2896:2896 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2894 --rest-port=2892 --tcp-port=2893 --discv5-udp-port=2895 --rest-address=0.0.0.0 --nat=extip:172.18.246.253 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=92ca3627aafeef6ae727c3b89e5599b3cd1efaa9e627f04eb4dd8e3b20cbbf7b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2896 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QGvl8cpfSr0d8ENtlaYP3fqwaMV1b5yZ50VxDgRX6882BaM7Ohy5h2GnLXW4QKYbSkREhV75ASn70a6Os6mhZFECgmlkgnY0gmlwhKwSkx6KbXVsdGlhZGRyc5YACASsEpMeBh7hAAoErBKTHgYe4t0DgnJzhQADAQAAiXNlY3AyNTZrMaECeMjMZPuXHg6TRZTZDvxxknkGADFqq59bpRI2-_9TQIODdGNwgh7hg3VkcIIe44V3YWt1Mgs --storenode=/ip4/172.18.147.30/tcp/7905/p2p/16Uiu2HAm3ZAVRYBAzmr5f4XPogPbBnxEwtsQwNyiPVozf2tMfAkr --store=false --relay=false --lightpush=true --lightpushnode=/ip4/172.18.147.30/tcp/7905/p2p/16Uiu2HAm3ZAVRYBAzmr5f4XPogPbBnxEwtsQwNyiPVozf2tMfAkr
2025-02-14 04:08:54.617 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.246.253 waku 2b2ccb757e56d5c351becc7fb41df6b54e6ef3143bbdba85433177a15badff44
2025-02-14 04:08:54.662 DEBUG [src.node.docker_mananger] Container started with ID 2b2ccb757e56. Setting up logs at ./log/docker/store_node1_2025-02-14_04-08-51__b1b7978b-ac7d-418d-87be-dc16096bcf18__wakuorg_nwaku:latest.log
2025-02-14 04:08:54.662 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 2892
2025-02-14 04:08:54.662 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:08:55.663 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2892/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:08:55.665 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:08:55.665 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:08:55.666 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2892/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:08:55.668 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.246.253/tcp/2893/p2p/16Uiu2HAmV1K44AMy3a92kQT5kay1hbq4z12rNgyvfeBdPrXdbM6U","/ip4/172.18.246.253/tcp/2894/ws/p2p/16Uiu2HAmV1K44AMy3a92kQT5kay1hbq4z12rNgyvfeBdPrXdbM6U"],"enrUri":"enr:-L24QIEC6AYtHqr60bAymc2fkcxgRtVlaqgFuzpLXegZVQl3KKCnaFBJ8ZvdEUziX3LeYy6XDyBWGBmIsAkZYUchOG0CgmlkgnY0gmlwhKwS9v2KbXVsdGlhZGRyc5YACASsEvb9BgtNAAoErBL2_QYLTt0DgnJzhQADAQAAiXNlY3AyNTZrMaED8u_BH2-dLs2iuONXlOJkFv-LvOIYBHQHZ7VQtO6NdZ2DdGNwggtNg3VkcIILT4V3YWt1Mgg"}'
2025-02-14 04:08:55.668 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:08:55.668 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2892/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.147.30/tcp/7905/p2p/16Uiu2HAm3ZAVRYBAzmr5f4XPogPbBnxEwtsQwNyiPVozf2tMfAkr"]'
2025-02-14 04:08:55.707 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:08:55.708 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2892/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.207.120/tcp/7873/p2p/16Uiu2HAm19xWKULRkEdQEpSYz1YjpMbjH3vDL7E8GeVsnX5T8S8q"]'
2025-02-14 04:08:55.732 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:08:55.733 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7904/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-14 04:08:55.743 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:08:55.743 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7872/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-14 04:08:55.749 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:08:55.753 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2892/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739506135753641984}}'
2025-02-14 04:08:55.766 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:08:55.766 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 04:08:55.966 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-14 04:08:55.967 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7904/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:08:55.970 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x569e2d2da94d80d1757c4eb3ba7216830d8146fb2b1fc54f41618cee0dede96b"}]}'
2025-02-14 04:08:55.970 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-14 04:08:55.970 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2892/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:08:55.978 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"ff72d0899808fee70324","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x569e2d2da94d80d1757c4eb3ba7216830d8146fb2b1fc54f41618cee0dede96b"}]}'
2025-02-14 04:08:55.979 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-14 04:08:55.980 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-14 04:08:55.980 DEBUG [src.node.waku_node] Stopping container with id 8049329fa3f2
2025-02-14 04:08:56.534 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:08:56.534 DEBUG [src.node.waku_node] Stopping container with id 33dd448af9d4
2025-02-14 04:08:57.345 ERROR [src.node.docker_mananger] Max retries reached for container 8049329fa3f2. Exiting log stream.
2025-02-14 04:08:57.972 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:08:57.972 DEBUG [src.node.waku_node] Stopping container with id 2b2ccb757e56
2025-02-14 04:08:58.783 ERROR [src.node.docker_mananger] Max retries reached for container 33dd448af9d4. Exiting log stream.
2025-02-14 04:08:59.467 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:08:59.469 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-14 04:08:59.478 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-14 04:08:59.486 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-14 04:08:59.492 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
