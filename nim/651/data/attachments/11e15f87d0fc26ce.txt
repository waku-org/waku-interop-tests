2025-02-14 04:02:26.236 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-14 04:02:26.236 DEBUG [tests.conftest] Running test: test_lightpush with id: 2025-02-14_04-02-26__97756580-7f43-426e-83b8-6ac339dfbbac
2025-02-14 04:02:26.236 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-14 04:02:26.237 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-14 04:02:26.237 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-14 04:02:26.237 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-14 04:02:26.238 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-14 04:02:26.244 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:02:26.244 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-14_04-02-26__97756580-7f43-426e-83b8-6ac339dfbbac__wakuorg_nwaku:latest.log
2025-02-14 04:02:26.244 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:02:26.245 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:02:26.246 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:02:26.246 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.51.232
2025-02-14 04:02:26.246 DEBUG [src.node.docker_mananger] Generated ports ['45850', '45851', '45852', '45853', '45854']
2025-02-14 04:02:26.246 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:02:26.247 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:02:26.247 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:02:26.247 DEBUG [src.node.docker_mananger] docker run -i -t -p 45850:45850 -p 45851:45851 -p 45852:45852 -p 45853:45853 -p 45854:45854 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45852 --rest-port=45850 --tcp-port=45851 --discv5-udp-port=45853 --rest-address=0.0.0.0 --nat=extip:172.18.51.232 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9f4ceef2bddddbdcbaf0b64ad148379e65eecfcfd6ddbf7dca20fedeeac2ae4a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45854 --metrics-logging=true --lightpush=true --relay=true
2025-02-14 04:02:26.476 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.51.232 waku 8f97aabc397f3ce16faabdacf3af1ea381b8778cb61dcf4a8b474d010861cb52
2025-02-14 04:02:26.524 DEBUG [src.node.docker_mananger] Container started with ID 8f97aabc397f. Setting up logs at ./log/docker/node1_2025-02-14_04-02-26__97756580-7f43-426e-83b8-6ac339dfbbac__wakuorg_nwaku:latest.log
2025-02-14 04:02:26.524 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 45850
2025-02-14 04:02:26.524 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:02:27.034 ERROR [src.node.docker_mananger] Max retries reached for container 3d37d096636d. Exiting log stream.
2025-02-14 04:02:27.525 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45850/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:02:27.528 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:02:27.528 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:02:27.529 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45850/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:02:27.531 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.51.232/tcp/45851/p2p/16Uiu2HAkvfHV8nYrFs6BUsJ9tQuVugmzEPzuTrmiB9fXZt6Go5kc","/ip4/172.18.51.232/tcp/45852/ws/p2p/16Uiu2HAkvfHV8nYrFs6BUsJ9tQuVugmzEPzuTrmiB9fXZt6Go5kc"],"enrUri":"enr:-L24QEqnad6wT53U92hULLxuIAUotkMfUHlbHrwkqXmqtohzBJKo56UhnBLEVcnifmZx4wHzqF4Km2hcQAp9YP-PDY0CgmlkgnY0gmlwhKwSM-iKbXVsdGlhZGRyc5YACASsEjPoBrMbAAoErBIz6AazHN0DgnJzhQADAQAAiXNlY3AyNTZrMaECElhiUxdVTJ6wG0BCKcNfyCTqgVqZRRZkMp9ULB9uSnGDdGNwgrMbg3VkcIKzHYV3YWt1Mgk"}'
2025-02-14 04:02:27.531 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:02:27.537 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:02:27.537 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-14_04-02-26__97756580-7f43-426e-83b8-6ac339dfbbac__wakuorg_nwaku:latest.log
2025-02-14 04:02:27.537 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:02:27.538 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:02:27.539 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:02:27.539 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.229.142
2025-02-14 04:02:27.539 DEBUG [src.node.docker_mananger] Generated ports ['2021', '2022', '2023', '2024', '2025']
2025-02-14 04:02:27.539 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:02:27.539 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:02:27.540 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:02:27.540 DEBUG [src.node.docker_mananger] docker run -i -t -p 2021:2021 -p 2022:2022 -p 2023:2023 -p 2024:2024 -p 2025:2025 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2023 --rest-port=2021 --tcp-port=2022 --discv5-udp-port=2024 --rest-address=0.0.0.0 --nat=extip:172.18.229.142 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1aac6bd96e1d9ede1760ce1bab04b6c0facfb3bc38ad0dae8b46085dbde1fb47 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2025 --metrics-logging=true --lightpush=false --relay=true --discv5-bootstrap-node=enr:-L24QEqnad6wT53U92hULLxuIAUotkMfUHlbHrwkqXmqtohzBJKo56UhnBLEVcnifmZx4wHzqF4Km2hcQAp9YP-PDY0CgmlkgnY0gmlwhKwSM-iKbXVsdGlhZGRyc5YACASsEjPoBrMbAAoErBIz6AazHN0DgnJzhQADAQAAiXNlY3AyNTZrMaECElhiUxdVTJ6wG0BCKcNfyCTqgVqZRRZkMp9ULB9uSnGDdGNwgrMbg3VkcIKzHYV3YWt1Mgk
2025-02-14 04:02:27.762 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.229.142 waku 0084f1e1a2a9b4e1f8f7cea273e23dd344c0d3d7036126b3de08eaaf9bfdb357
2025-02-14 04:02:27.813 DEBUG [src.node.docker_mananger] Container started with ID 0084f1e1a2a9. Setting up logs at ./log/docker/node1_2025-02-14_04-02-26__97756580-7f43-426e-83b8-6ac339dfbbac__wakuorg_nwaku:latest.log
2025-02-14 04:02:27.813 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 2021
2025-02-14 04:02:27.814 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:02:28.814 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2021/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:02:28.827 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:02:28.828 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:02:28.828 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2021/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:02:28.830 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.229.142/tcp/2022/p2p/16Uiu2HAm1CPcn8LXh1wJCm5ep3XxGxaswgJkdRPtAxrwAZhu5hAN","/ip4/172.18.229.142/tcp/2023/ws/p2p/16Uiu2HAm1CPcn8LXh1wJCm5ep3XxGxaswgJkdRPtAxrwAZhu5hAN"],"enrUri":"enr:-L24QOeEDBAgujLN_j9mKTpu6wEyOcdXE__tmYRPVYggu9FmIjJtzk1nB4gxsaTe3MhnqMUCrQIb0ewzaAPwWZjoG58CgmlkgnY0gmlwhKwS5Y6KbXVsdGlhZGRyc5YACASsEuWOBgfmAAoErBLljgYH590DgnJzhQADAQAAiXNlY3AyNTZrMaECVb8R8lZznJRtEQdzbu5B2P_CW8Tmm3MkX1_os7mfKx-DdGNwggfmg3VkcIIH6IV3YWt1MgE"}'
2025-02-14 04:02:28.830 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:02:28.837 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:02:28.837 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-14_04-02-26__97756580-7f43-426e-83b8-6ac339dfbbac__wakuorg_nwaku:latest.log
2025-02-14 04:02:28.837 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:02:28.837 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:02:28.838 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:02:28.838 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.55.177
2025-02-14 04:02:28.838 DEBUG [src.node.docker_mananger] Generated ports ['19015', '19016', '19017', '19018', '19019']
2025-02-14 04:02:28.839 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:02:28.839 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:02:28.839 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:02:28.839 DEBUG [src.node.docker_mananger] docker run -i -t -p 19015:19015 -p 19016:19016 -p 19017:19017 -p 19018:19018 -p 19019:19019 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19017 --rest-port=19015 --tcp-port=19016 --discv5-udp-port=19018 --rest-address=0.0.0.0 --nat=extip:172.18.55.177 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b0cd96bcacc3ede577b102c1a657df13e19ef8e7834fddfb6610dacf80e9bedc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19019 --metrics-logging=true --lightpush=true --relay=false --discv5-bootstrap-node=enr:-L24QEqnad6wT53U92hULLxuIAUotkMfUHlbHrwkqXmqtohzBJKo56UhnBLEVcnifmZx4wHzqF4Km2hcQAp9YP-PDY0CgmlkgnY0gmlwhKwSM-iKbXVsdGlhZGRyc5YACASsEjPoBrMbAAoErBIz6AazHN0DgnJzhQADAQAAiXNlY3AyNTZrMaECElhiUxdVTJ6wG0BCKcNfyCTqgVqZRRZkMp9ULB9uSnGDdGNwgrMbg3VkcIKzHYV3YWt1Mgk --lightpushnode=/ip4/172.18.51.232/tcp/45851/p2p/16Uiu2HAkvfHV8nYrFs6BUsJ9tQuVugmzEPzuTrmiB9fXZt6Go5kc
2025-02-14 04:02:29.074 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.55.177 waku 77b2f8dc838439f4f34866181f5edc0de2c1f4ec838c280b2535ed0a2ef93e65
2025-02-14 04:02:29.124 DEBUG [src.node.docker_mananger] Container started with ID 77b2f8dc8384. Setting up logs at ./log/docker/node1_2025-02-14_04-02-26__97756580-7f43-426e-83b8-6ac339dfbbac__wakuorg_nwaku:latest.log
2025-02-14 04:02:29.124 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 19015
2025-02-14 04:02:29.124 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:02:30.125 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19015/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:02:30.128 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:02:30.128 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:02:30.128 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19015/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:02:30.130 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.55.177/tcp/19016/p2p/16Uiu2HAmPi2hsTnmPrBm2xb3zgc7tdwAi9AiDay8v5zcqF1YP529","/ip4/172.18.55.177/tcp/19017/ws/p2p/16Uiu2HAmPi2hsTnmPrBm2xb3zgc7tdwAi9AiDay8v5zcqF1YP529"],"enrUri":"enr:-L24QKKtwI2sdlAIC1OlKUgDHCGLmYWdxsVHv6xZeeg61oivOmXgVWTt2-3iUJjDzmmy4sOOrhgia5TMFEpUaMQt_n8CgmlkgnY0gmlwhKwSN7GKbXVsdGlhZGRyc5YACASsEjexBkpIAAoErBI3sQZKSd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDpDf2FFsZcKOjdBXXXTGrn4ElcNj7y0CXAriXWGa1bbKDdGNwgkpIg3VkcIJKSoV3YWt1Mgg"}'
2025-02-14 04:02:30.130 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:02:30.131 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:45850/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-14 04:02:30.135 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:02:30.135 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2021/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-14 04:02:30.140 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:02:30.141 DEBUG [src.steps.light_push] Lightpushing message
2025-02-14 04:02:30.142 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19015/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": 1739505750141711360}}'
2025-02-14 04:02:30.189 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:02:30.190 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-14 04:02:30.290 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-14 04:02:30.291 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45850/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:02:30.293 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739505750141711360,"ephemeral":false}]'
2025-02-14 04:02:30.295 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-14 04:02:30.295 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2021/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:02:30.297 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739505750141711360,"ephemeral":false}]'
2025-02-14 04:02:30.300 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-14 04:02:30.301 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-14 04:02:30.301 DEBUG [src.node.waku_node] Stopping container with id 8f97aabc397f
2025-02-14 04:02:31.006 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:02:31.006 DEBUG [src.node.waku_node] Stopping container with id 0084f1e1a2a9
2025-02-14 04:02:31.818 ERROR [src.node.docker_mananger] Max retries reached for container 8f97aabc397f. Exiting log stream.
2025-02-14 04:02:32.539 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:02:32.540 DEBUG [src.node.waku_node] Stopping container with id 77b2f8dc8384
2025-02-14 04:02:33.367 ERROR [src.node.docker_mananger] Max retries reached for container 0084f1e1a2a9. Exiting log stream.
2025-02-14 04:02:34.061 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:02:34.062 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-14 04:02:34.073 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-14 04:02:34.083 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-14 04:02:34.092 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
