2025-02-14 04:05:01.369 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-14 04:05:01.369 DEBUG [tests.conftest] Running test: test_time_filter_matches_one_message with id: 2025-02-14_04-05-01__0c8a2ec7-cdde-4976-8cb6-93ecd26f60eb
2025-02-14 04:05:01.370 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-14 04:05:01.370 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-14 04:05:01.370 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-14 04:05:01.376 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:05:01.377 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-14_04-05-01__0c8a2ec7-cdde-4976-8cb6-93ecd26f60eb__wakuorg_nwaku:latest.log
2025-02-14 04:05:01.377 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:05:01.377 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:05:01.378 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:05:01.378 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.19.199
2025-02-14 04:05:01.379 DEBUG [src.node.docker_mananger] Generated ports ['45410', '45411', '45412', '45413', '45414']
2025-02-14 04:05:01.379 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:05:01.379 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:05:01.379 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:05:01.379 DEBUG [src.node.docker_mananger] docker run -i -t -p 45410:45410 -p 45411:45411 -p 45412:45412 -p 45413:45413 -p 45414:45414 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45412 --rest-port=45410 --tcp-port=45411 --discv5-udp-port=45413 --rest-address=0.0.0.0 --nat=extip:172.18.19.199 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d5e01ab0e99fa0cd8fd53a06c8b9a9bbfccd0cbf4cbdbaa28cb3e4cd4acf5a59 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45414 --metrics-logging=true --store=true --relay=true
2025-02-14 04:05:01.616 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.19.199 waku 5e644473f48f930331f816e3989e22fb943df6568345f0daa69eb2e86b304215
2025-02-14 04:05:01.666 DEBUG [src.node.docker_mananger] Container started with ID 5e644473f48f. Setting up logs at ./log/docker/publishing_node1_2025-02-14_04-05-01__0c8a2ec7-cdde-4976-8cb6-93ecd26f60eb__wakuorg_nwaku:latest.log
2025-02-14 04:05:01.668 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 45410
2025-02-14 04:05:01.668 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:05:02.176 ERROR [src.node.docker_mananger] Max retries reached for container d03226cdd96b. Exiting log stream.
2025-02-14 04:05:02.669 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45410/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:05:02.672 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:05:02.672 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:05:02.672 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45410/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:05:02.674 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.19.199/tcp/45411/p2p/16Uiu2HAmJVDi5JoG7zc4JmbLFo6oRWVdFcEPK68cvLeUmJGm8mJZ","/ip4/172.18.19.199/tcp/45412/ws/p2p/16Uiu2HAmJVDi5JoG7zc4JmbLFo6oRWVdFcEPK68cvLeUmJGm8mJZ"],"enrUri":"enr:-L24QGzsPtnMKzSR0JS2GMVFn62DmuC-L-x8QkjZu6Mh2W4tCbihNii3GKEGGx9yyRSL8V4e0Xa-KsZSarQq354mIxYCgmlkgnY0gmlwhKwSE8eKbXVsdGlhZGRyc5YACASsEhPHBrFjAAoErBITxwaxZN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDVqVq9jVM6snPUeDNH0qCpqoVUv4VPjv1tBMZFohOuaKDdGNwgrFjg3VkcIKxZYV3YWt1MgM"}'
2025-02-14 04:05:02.675 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:05:02.682 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:05:02.682 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-14_04-05-01__0c8a2ec7-cdde-4976-8cb6-93ecd26f60eb__wakuorg_nwaku:latest.log
2025-02-14 04:05:02.682 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:05:02.682 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:05:02.684 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:05:02.684 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.251.211
2025-02-14 04:05:02.684 DEBUG [src.node.docker_mananger] Generated ports ['61472', '61473', '61474', '61475', '61476']
2025-02-14 04:05:02.684 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:05:02.684 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:05:02.684 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:05:02.685 DEBUG [src.node.docker_mananger] docker run -i -t -p 61472:61472 -p 61473:61473 -p 61474:61474 -p 61475:61475 -p 61476:61476 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61474 --rest-port=61472 --tcp-port=61473 --discv5-udp-port=61475 --rest-address=0.0.0.0 --nat=extip:172.18.251.211 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cbe7aa5e230a8fcabf66ef9a8376e6ba8cd481ee9cc2c4186f70d83d9cfc872f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61476 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QGzsPtnMKzSR0JS2GMVFn62DmuC-L-x8QkjZu6Mh2W4tCbihNii3GKEGGx9yyRSL8V4e0Xa-KsZSarQq354mIxYCgmlkgnY0gmlwhKwSE8eKbXVsdGlhZGRyc5YACASsEhPHBrFjAAoErBITxwaxZN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDVqVq9jVM6snPUeDNH0qCpqoVUv4VPjv1tBMZFohOuaKDdGNwgrFjg3VkcIKxZYV3YWt1MgM --storenode=/ip4/172.18.19.199/tcp/45411/p2p/16Uiu2HAmJVDi5JoG7zc4JmbLFo6oRWVdFcEPK68cvLeUmJGm8mJZ --store=true --relay=true
2025-02-14 04:05:02.911 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.251.211 waku 10c7ef9fcb531312a4ff38745c7f50a8870be81738581e787af79e16a0f96972
2025-02-14 04:05:02.958 DEBUG [src.node.docker_mananger] Container started with ID 10c7ef9fcb53. Setting up logs at ./log/docker/store_node1_2025-02-14_04-05-01__0c8a2ec7-cdde-4976-8cb6-93ecd26f60eb__wakuorg_nwaku:latest.log
2025-02-14 04:05:02.959 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 61472
2025-02-14 04:05:02.959 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:05:03.959 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61472/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:05:03.962 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:05:03.962 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:05:03.962 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61472/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:05:03.964 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.251.211/tcp/61473/p2p/16Uiu2HAmK57Pkan1TEtrMLy2q3dvtRqPAAzizAftVJwqGhS5Pdrq","/ip4/172.18.251.211/tcp/61474/ws/p2p/16Uiu2HAmK57Pkan1TEtrMLy2q3dvtRqPAAzizAftVJwqGhS5Pdrq"],"enrUri":"enr:-L24QMjkaZB69VyNK5JqIcH3D6H28i5GagRkXe7zV2X6odZWFb-sEKN4ujLi-VuBzSU4mtBh2GVPv-CkGI7g4fZvYzsCgmlkgnY0gmlwhKwS-9OKbXVsdGlhZGRyc5YACASsEvvTBvAhAAoErBL70wbwIt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDX1QGHpxrX3Hj8Tiy1RC2nLS74zulPrvK0qLV8bl4LCqDdGNwgvAhg3VkcILwI4V3YWt1MgM"}'
2025-02-14 04:05:03.965 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:05:03.965 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61472/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.19.199/tcp/45411/p2p/16Uiu2HAmJVDi5JoG7zc4JmbLFo6oRWVdFcEPK68cvLeUmJGm8mJZ"]'
2025-02-14 04:05:03.968 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:05:03.968 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:45410/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-14 04:05:03.971 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:05:03.971 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61472/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-14 04:05:03.973 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:05:03.974 DEBUG [src.steps.store] Relaying message
2025-02-14 04:05:03.975 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:45410/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:05:03.980 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:05:03.981 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 04:05:04.182 DEBUG [src.steps.store] Relaying message
2025-02-14 04:05:04.182 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:45410/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:05:04.188 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:05:04.188 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 04:05:04.389 DEBUG [src.steps.store] Relaying message
2025-02-14 04:05:04.389 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:45410/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:05:04.396 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:05:04.396 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 04:05:04.597 DEBUG [src.steps.store] Relaying message
2025-02-14 04:05:04.598 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:45410/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:05:04.604 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:05:04.604 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 04:05:04.805 DEBUG [src.steps.store] Relaying message
2025-02-14 04:05:04.805 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:45410/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:05:04.812 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:05:04.812 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 04:05:05.013 DEBUG [src.steps.store] Relaying message
2025-02-14 04:05:05.013 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:45410/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:05:05.019 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:05:05.020 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 04:05:05.221 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45410/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=1739505900974542944&endTime=1739505900974742944&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:05:05.225 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xd4f1a99bb7cb8f133a343db7ff9a37494aa0f6b38eb2dd03bad7e9e1fa5d6625"}]}'
2025-02-14 04:05:05.225 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61472/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=1739505900974542944&endTime=1739505900974742944&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:05:05.228 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xd4f1a99bb7cb8f133a343db7ff9a37494aa0f6b38eb2dd03bad7e9e1fa5d6625"}]}'
2025-02-14 04:05:05.230 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-14 04:05:05.231 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-14 04:05:05.231 DEBUG [src.node.waku_node] Stopping container with id 5e644473f48f
2025-02-14 04:05:06.214 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:05:06.215 DEBUG [src.node.waku_node] Stopping container with id 10c7ef9fcb53
2025-02-14 04:05:07.047 ERROR [src.node.docker_mananger] Max retries reached for container 5e644473f48f. Exiting log stream.
2025-02-14 04:05:07.734 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:05:07.736 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-14 04:05:07.748 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-14 04:05:07.755 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
