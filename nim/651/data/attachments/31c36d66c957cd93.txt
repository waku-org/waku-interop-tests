2025-02-14 04:06:57.105 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-14 04:06:57.105 DEBUG [tests.conftest] Running test: test_light_push_with_invalid_version with id: 2025-02-14_04-06-57__ba9147d8-8643-4174-b935-704c4cc1c067
2025-02-14 04:06:57.106 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-14 04:06:57.106 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-14 04:06:57.113 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:06:57.113 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-14_04-06-57__ba9147d8-8643-4174-b935-704c4cc1c067__wakuorg_nwaku:latest.log
2025-02-14 04:06:57.113 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:06:57.113 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:06:57.115 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:06:57.115 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.53.82
2025-02-14 04:06:57.115 DEBUG [src.node.docker_mananger] Generated ports ['47763', '47764', '47765', '47766', '47767']
2025-02-14 04:06:57.116 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:06:57.116 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:06:57.116 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:06:57.116 DEBUG [src.node.docker_mananger] docker run -i -t -p 47763:47763 -p 47764:47764 -p 47765:47765 -p 47766:47766 -p 47767:47767 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=47765 --rest-port=47763 --tcp-port=47764 --discv5-udp-port=47766 --rest-address=0.0.0.0 --nat=extip:172.18.53.82 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9eadc2d29a2cffc9ce1b93042624bcbeabb0df53ed5e33d2a67d5c8de3a8f8ae --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=47767 --metrics-logging=true --lightpush=true --relay=true
2025-02-14 04:06:57.350 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.53.82 waku 6edf7ce2c9bcd3f468363bc88e342a557b677743641438a9dfcc595c9fa2acc2
2025-02-14 04:06:57.403 DEBUG [src.node.docker_mananger] Container started with ID 6edf7ce2c9bc. Setting up logs at ./log/docker/receiving_node1_2025-02-14_04-06-57__ba9147d8-8643-4174-b935-704c4cc1c067__wakuorg_nwaku:latest.log
2025-02-14 04:06:57.404 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 47763
2025-02-14 04:06:57.404 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:06:57.901 ERROR [src.node.docker_mananger] Max retries reached for container ca954e1237d9. Exiting log stream.
2025-02-14 04:06:58.406 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47763/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:06:58.409 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:06:58.409 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:06:58.409 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47763/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:06:58.411 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.53.82/tcp/47764/p2p/16Uiu2HAmS8Qzb2SePxXDQmc1kyRrf9X6b4PcADGL5ZkrrJTwyRo8","/ip4/172.18.53.82/tcp/47765/ws/p2p/16Uiu2HAmS8Qzb2SePxXDQmc1kyRrf9X6b4PcADGL5ZkrrJTwyRo8"],"enrUri":"enr:-L24QFSxYyFqlnPiTX2ETVEKJUYQx0aAH6AK2QcelH3ucu1BQQDPdbflmT_KFvB6OIRov-7JdyyZIL8Q2CyG00NsnQQCgmlkgnY0gmlwhKwSNVKKbXVsdGlhZGRyc5YACASsEjVSBrqUAAoErBI1Uga6ld0DgnJzhQADAQAAiXNlY3AyNTZrMaEDyC55065u7IsiY04ZhJmhuM7wgvNB--MIdjkF2XNunfODdGNwgrqUg3VkcIK6loV3YWt1Mgk"}'
2025-02-14 04:06:58.412 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:06:58.419 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:06:58.419 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-14_04-06-57__ba9147d8-8643-4174-b935-704c4cc1c067__wakuorg_nwaku:latest.log
2025-02-14 04:06:58.419 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:06:58.419 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:06:58.421 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:06:58.421 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.113.247
2025-02-14 04:06:58.421 DEBUG [src.node.docker_mananger] Generated ports ['21370', '21371', '21372', '21373', '21374']
2025-02-14 04:06:58.421 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:06:58.421 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:06:58.421 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:06:58.421 DEBUG [src.node.docker_mananger] docker run -i -t -p 21370:21370 -p 21371:21371 -p 21372:21372 -p 21373:21373 -p 21374:21374 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=21372 --rest-port=21370 --tcp-port=21371 --discv5-udp-port=21373 --rest-address=0.0.0.0 --nat=extip:172.18.113.247 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cb4acafafe3fbadda62dceeee19268e9ed3dbd0fdaf5a5d8be5ff60cffd1b97a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=21374 --metrics-logging=true --lightpush=false --relay=true
2025-02-14 04:06:58.671 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.113.247 waku e8451d4b739dce41aec02205779c5fb5bc68c948f7b1b661fe05fd93831b4a38
2025-02-14 04:06:58.723 DEBUG [src.node.docker_mananger] Container started with ID e8451d4b739d. Setting up logs at ./log/docker/receiving_node2_2025-02-14_04-06-57__ba9147d8-8643-4174-b935-704c4cc1c067__wakuorg_nwaku:latest.log
2025-02-14 04:06:58.723 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 21370
2025-02-14 04:06:58.724 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:06:59.725 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:21370/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:06:59.728 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:06:59.728 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:06:59.728 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:21370/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:06:59.730 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.113.247/tcp/21371/p2p/16Uiu2HAmRgijUNJfH2ye1kTBtYJ4fDy1euwfCvs7QShe1uE6WiP5","/ip4/172.18.113.247/tcp/21372/ws/p2p/16Uiu2HAmRgijUNJfH2ye1kTBtYJ4fDy1euwfCvs7QShe1uE6WiP5"],"enrUri":"enr:-L24QCLXRIslpBLAW6b6RUL28XTpFIi3isfhjYyyG_QxgfTwFmIqwa9EYLpM1xNTHoiVC9mD4_xtHC7bIQSs0DtYWt4CgmlkgnY0gmlwhKwScfeKbXVsdGlhZGRyc5YACASsEnH3BlN7AAoErBJx9wZTfN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDwZluz4b1Qd26EqlVMd-5Ley0vOiA6LF0qeXq19-1pryDdGNwglN7g3VkcIJTfYV3YWt1MgE"}'
2025-02-14 04:06:59.731 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:06:59.731 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:21370/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.53.82/tcp/47764/p2p/16Uiu2HAmS8Qzb2SePxXDQmc1kyRrf9X6b4PcADGL5ZkrrJTwyRo8"]'
2025-02-14 04:06:59.773 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:06:59.782 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:06:59.783 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-14_04-06-57__ba9147d8-8643-4174-b935-704c4cc1c067__wakuorg_nwaku:latest.log
2025-02-14 04:06:59.783 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:06:59.783 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:06:59.785 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:06:59.785 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.24.209
2025-02-14 04:06:59.785 DEBUG [src.node.docker_mananger] Generated ports ['7541', '7542', '7543', '7544', '7545']
2025-02-14 04:06:59.785 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:06:59.785 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:06:59.785 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:06:59.785 DEBUG [src.node.docker_mananger] docker run -i -t -p 7541:7541 -p 7542:7542 -p 7543:7543 -p 7544:7544 -p 7545:7545 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7543 --rest-port=7541 --tcp-port=7542 --discv5-udp-port=7544 --rest-address=0.0.0.0 --nat=extip:172.18.24.209 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=73aaf38eb738a85eeae57aa0a1d9c5a1709b15b1e0eb499afdd58aee8e659ac9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7545 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QFSxYyFqlnPiTX2ETVEKJUYQx0aAH6AK2QcelH3ucu1BQQDPdbflmT_KFvB6OIRov-7JdyyZIL8Q2CyG00NsnQQCgmlkgnY0gmlwhKwSNVKKbXVsdGlhZGRyc5YACASsEjVSBrqUAAoErBI1Uga6ld0DgnJzhQADAQAAiXNlY3AyNTZrMaEDyC55065u7IsiY04ZhJmhuM7wgvNB--MIdjkF2XNunfODdGNwgrqUg3VkcIK6loV3YWt1Mgk --lightpushnode=/ip4/172.18.53.82/tcp/47764/p2p/16Uiu2HAmS8Qzb2SePxXDQmc1kyRrf9X6b4PcADGL5ZkrrJTwyRo8 --lightpush=true --relay=false
2025-02-14 04:07:00.027 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.24.209 waku c5784720041a0edd64975f382d20968db90cdc2d5aadc00696ac30bfa2d4ec01
2025-02-14 04:07:00.077 DEBUG [src.node.docker_mananger] Container started with ID c5784720041a. Setting up logs at ./log/docker/lightpush_node1_2025-02-14_04-06-57__ba9147d8-8643-4174-b935-704c4cc1c067__wakuorg_nwaku:latest.log
2025-02-14 04:07:00.077 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 7541
2025-02-14 04:07:00.077 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:07:01.078 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7541/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:07:01.081 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:07:01.081 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:07:01.081 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7541/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:07:01.083 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.24.209/tcp/7542/p2p/16Uiu2HAmC8gW6tvi6eP7BZtWYbsQX8fwZdXai3NFmp2ruv93vYK5","/ip4/172.18.24.209/tcp/7543/ws/p2p/16Uiu2HAmC8gW6tvi6eP7BZtWYbsQX8fwZdXai3NFmp2ruv93vYK5"],"enrUri":"enr:-L24QGpEp0VRFdY2roG6dxzWRqwggT9GxhAiKhaCaElsPk-UNRstPOZb8et1AyoFV5QzSf9zPXvLwlYUVoC0FzXu_nECgmlkgnY0gmlwhKwSGNGKbXVsdGlhZGRyc5YACASsEhjRBh12AAoErBIY0QYdd90DgnJzhQADAQAAiXNlY3AyNTZrMaEC-DxlFcEq3Tp1ihJLrW7cVWucHrKlAC-_K0TaMl3HQRyDdGNwgh12g3VkcIIdeIV3YWt1Mgg"}'
2025-02-14 04:07:01.083 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:07:01.084 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7541/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.53.82/tcp/47764/p2p/16Uiu2HAmS8Qzb2SePxXDQmc1kyRrf9X6b4PcADGL5ZkrrJTwyRo8"]'
2025-02-14 04:07:01.125 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:07:01.126 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7541/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.113.247/tcp/21371/p2p/16Uiu2HAmRgijUNJfH2ye1kTBtYJ4fDy1euwfCvs7QShe1uE6WiP5"]'
2025-02-14 04:07:01.152 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:07:01.154 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47763/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-14 04:07:01.163 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:07:01.163 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:21370/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-14 04:07:01.168 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:07:01.172 DEBUG [src.steps.light_push] Lightpushing message
2025-02-14 04:07:01.173 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7541/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739506021172678912, "version": 2.1}}'
2025-02-14 04:07:01.177 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:7541/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
2025-02-14 04:07:01.179 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-14 04:07:01.180 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-14 04:07:01.180 DEBUG [src.node.waku_node] Stopping container with id 6edf7ce2c9bc
2025-02-14 04:07:01.913 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:07:01.913 DEBUG [src.node.waku_node] Stopping container with id e8451d4b739d
2025-02-14 04:07:02.726 ERROR [src.node.docker_mananger] Max retries reached for container 6edf7ce2c9bc. Exiting log stream.
2025-02-14 04:07:03.437 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:07:03.438 DEBUG [src.node.waku_node] Stopping container with id c5784720041a
2025-02-14 04:07:04.251 ERROR [src.node.docker_mananger] Max retries reached for container e8451d4b739d. Exiting log stream.
2025-02-14 04:07:04.986 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:07:04.987 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-14 04:07:04.994 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-14 04:07:05.002 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-14 04:07:05.008 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
