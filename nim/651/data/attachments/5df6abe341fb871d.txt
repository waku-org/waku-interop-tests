2025-02-14 04:04:45.699 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-14 04:04:45.700 DEBUG [tests.conftest] Running test: test_light_push_with_missing_pubsub_topics with id: 2025-02-14_04-04-45__a7bcb361-5fe8-435a-b124-7d7b94def2a1
2025-02-14 04:04:45.700 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-14 04:04:45.700 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-14 04:04:45.707 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:04:45.707 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-14_04-04-45__a7bcb361-5fe8-435a-b124-7d7b94def2a1__wakuorg_nwaku:latest.log
2025-02-14 04:04:45.707 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:04:45.707 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:04:45.709 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:04:45.709 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.225.107
2025-02-14 04:04:45.709 DEBUG [src.node.docker_mananger] Generated ports ['29356', '29357', '29358', '29359', '29360']
2025-02-14 04:04:45.709 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:04:45.709 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:04:45.709 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:04:45.710 DEBUG [src.node.docker_mananger] docker run -i -t -p 29356:29356 -p 29357:29357 -p 29358:29358 -p 29359:29359 -p 29360:29360 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29358 --rest-port=29356 --tcp-port=29357 --discv5-udp-port=29359 --rest-address=0.0.0.0 --nat=extip:172.18.225.107 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=baab9d0d3eaba01ea429f4ffbef5ae23e2df62f7a027a2259e595da97a5c97c0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29360 --metrics-logging=true --lightpush=true --relay=true
2025-02-14 04:04:45.939 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.225.107 waku 574d4e645737816d78aadcac85cda289073e4ff02886fe659a1e30c7bd776f9c
2025-02-14 04:04:45.988 DEBUG [src.node.docker_mananger] Container started with ID 574d4e645737. Setting up logs at ./log/docker/receiving_node1_2025-02-14_04-04-45__a7bcb361-5fe8-435a-b124-7d7b94def2a1__wakuorg_nwaku:latest.log
2025-02-14 04:04:45.988 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 29356
2025-02-14 04:04:45.989 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:04:46.360 ERROR [src.node.docker_mananger] Max retries reached for container d80c3a8aed66. Exiting log stream.
2025-02-14 04:04:46.989 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29356/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:46.993 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:04:46.993 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:04:46.993 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29356/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:46.995 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.225.107/tcp/29357/p2p/16Uiu2HAmPk9WiRNEkQBY7jr3TvBL5CDUSkwDjAks9nem6jby4Q9z","/ip4/172.18.225.107/tcp/29358/ws/p2p/16Uiu2HAmPk9WiRNEkQBY7jr3TvBL5CDUSkwDjAks9nem6jby4Q9z"],"enrUri":"enr:-L24QASp15BXHi4fKTRNbF7rEDuG6U2wXi-cOgPOcYL_R2AgOVLlIZTMGycTvIWDRsWBJ9nWmwAwoV8z_tylmLO0TpcCgmlkgnY0gmlwhKwS4WuKbXVsdGlhZGRyc5YACASsEuFrBnKtAAoErBLhawZyrt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDpMLR_75uBg_BOUZ3PWIoOFNMnl7T1ZHhYny0bdkNVn2DdGNwgnKtg3VkcIJyr4V3YWt1Mgk"}'
2025-02-14 04:04:46.996 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:04:47.002 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:04:47.002 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-14_04-04-45__a7bcb361-5fe8-435a-b124-7d7b94def2a1__wakuorg_nwaku:latest.log
2025-02-14 04:04:47.002 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:04:47.002 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:04:47.004 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:04:47.004 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.128.185
2025-02-14 04:04:47.004 DEBUG [src.node.docker_mananger] Generated ports ['36041', '36042', '36043', '36044', '36045']
2025-02-14 04:04:47.004 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:04:47.004 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:04:47.004 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:04:47.004 DEBUG [src.node.docker_mananger] docker run -i -t -p 36041:36041 -p 36042:36042 -p 36043:36043 -p 36044:36044 -p 36045:36045 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36043 --rest-port=36041 --tcp-port=36042 --discv5-udp-port=36044 --rest-address=0.0.0.0 --nat=extip:172.18.128.185 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e0d419b8ae5c0cb07e1c05baaf3dda9fb5b1b8471628d8f7fcb5bae6c1a5dd87 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36045 --metrics-logging=true --lightpush=false --relay=true
2025-02-14 04:04:47.228 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.128.185 waku 54a8fedd7385b03026fe3bb85de403bed5d829924094f1eba363b89a15c26c74
2025-02-14 04:04:47.274 DEBUG [src.node.docker_mananger] Container started with ID 54a8fedd7385. Setting up logs at ./log/docker/receiving_node2_2025-02-14_04-04-45__a7bcb361-5fe8-435a-b124-7d7b94def2a1__wakuorg_nwaku:latest.log
2025-02-14 04:04:47.275 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 36041
2025-02-14 04:04:47.275 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:04:48.275 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36041/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:48.278 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:04:48.278 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:04:48.278 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36041/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:48.280 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.128.185/tcp/36042/p2p/16Uiu2HAmFzZunwKKLBYQ1ZAp8jT6pbbrLgpdj5z3ipHTFGntXk98","/ip4/172.18.128.185/tcp/36043/ws/p2p/16Uiu2HAmFzZunwKKLBYQ1ZAp8jT6pbbrLgpdj5z3ipHTFGntXk98"],"enrUri":"enr:-L24QH_1BsDV0o2lDTrhhUOu9PRh9NbRO03Ggb6N1UB00_28BMJkRnC9jIhPY04Pc5la9IOrzuDd2qjOCtLk22QUtQYCgmlkgnY0gmlwhKwSgLmKbXVsdGlhZGRyc5YACASsEoC5BozKAAoErBKAuQaMy90DgnJzhQADAQAAiXNlY3AyNTZrMaEDMZcLAtLpVY1sxhF30VRN1j2MVPvrLDhtJAal-JjbPaODdGNwgozKg3VkcIKMzIV3YWt1MgE"}'
2025-02-14 04:04:48.281 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:04:48.281 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36041/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.225.107/tcp/29357/p2p/16Uiu2HAmPk9WiRNEkQBY7jr3TvBL5CDUSkwDjAks9nem6jby4Q9z"]'
2025-02-14 04:04:48.321 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:04:48.338 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:04:48.338 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-14_04-04-45__a7bcb361-5fe8-435a-b124-7d7b94def2a1__wakuorg_nwaku:latest.log
2025-02-14 04:04:48.338 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:04:48.338 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:04:48.340 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:04:48.340 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.73.131
2025-02-14 04:04:48.340 DEBUG [src.node.docker_mananger] Generated ports ['27330', '27331', '27332', '27333', '27334']
2025-02-14 04:04:48.341 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:04:48.341 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:04:48.341 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:04:48.341 DEBUG [src.node.docker_mananger] docker run -i -t -p 27330:27330 -p 27331:27331 -p 27332:27332 -p 27333:27333 -p 27334:27334 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27332 --rest-port=27330 --tcp-port=27331 --discv5-udp-port=27333 --rest-address=0.0.0.0 --nat=extip:172.18.73.131 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f7a9a7acdafcab0aabecaeecdeddb5dfd6a297982bfc2540a24c3136d09ea6bf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27334 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QASp15BXHi4fKTRNbF7rEDuG6U2wXi-cOgPOcYL_R2AgOVLlIZTMGycTvIWDRsWBJ9nWmwAwoV8z_tylmLO0TpcCgmlkgnY0gmlwhKwS4WuKbXVsdGlhZGRyc5YACASsEuFrBnKtAAoErBLhawZyrt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDpMLR_75uBg_BOUZ3PWIoOFNMnl7T1ZHhYny0bdkNVn2DdGNwgnKtg3VkcIJyr4V3YWt1Mgk --lightpushnode=/ip4/172.18.225.107/tcp/29357/p2p/16Uiu2HAmPk9WiRNEkQBY7jr3TvBL5CDUSkwDjAks9nem6jby4Q9z --lightpush=true --relay=false
2025-02-14 04:04:48.576 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.73.131 waku eebd11a0a7b0023974eae5ceb1e4228d8bce0365424db6f66247e367fa396f99
2025-02-14 04:04:48.622 DEBUG [src.node.docker_mananger] Container started with ID eebd11a0a7b0. Setting up logs at ./log/docker/lightpush_node1_2025-02-14_04-04-45__a7bcb361-5fe8-435a-b124-7d7b94def2a1__wakuorg_nwaku:latest.log
2025-02-14 04:04:48.623 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 27330
2025-02-14 04:04:48.623 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:04:49.624 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27330/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:49.627 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:04:49.627 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:04:49.627 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27330/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:49.629 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.73.131/tcp/27331/p2p/16Uiu2HAmFmVH8hohD8BM8EjanvX626wTwWUFwqoZiKNR9YCKga3b","/ip4/172.18.73.131/tcp/27332/ws/p2p/16Uiu2HAmFmVH8hohD8BM8EjanvX626wTwWUFwqoZiKNR9YCKga3b"],"enrUri":"enr:-L24QB4LMcS24a1j1PuOTOGM-SNNbEWGCscSpBl8sqbK6ekGPJ16Gy6zKlj24_tSqWzOujKPFdMZ1frEgV9rmcd8f1UCgmlkgnY0gmlwhKwSSYOKbXVsdGlhZGRyc5YACASsEkmDBmrDAAoErBJJgwZqxN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDLj1BSIGGb6ULGpe5Em04H22a4zoVerbSAsZbfk4lBxKDdGNwgmrDg3VkcIJqxYV3YWt1Mgg"}'
2025-02-14 04:04:49.630 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:04:49.630 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27330/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.225.107/tcp/29357/p2p/16Uiu2HAmPk9WiRNEkQBY7jr3TvBL5CDUSkwDjAks9nem6jby4Q9z"]'
2025-02-14 04:04:49.668 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:04:49.668 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27330/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.128.185/tcp/36042/p2p/16Uiu2HAmFzZunwKKLBYQ1ZAp8jT6pbbrLgpdj5z3ipHTFGntXk98"]'
2025-02-14 04:04:49.692 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:04:49.694 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29356/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-14 04:04:49.703 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:04:49.704 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36041/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-14 04:04:49.709 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:04:49.711 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27330/lightpush/v1/message" -H "Content-Type: application/json" -d '{"message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739505889711819008}}'
2025-02-14 04:04:49.720 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:27330/lightpush/v1/message. Response content: b'Failed to request a message push: not_published_to_any_peer'
2025-02-14 04:04:49.722 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-14 04:04:49.722 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-14 04:04:49.723 DEBUG [src.node.waku_node] Stopping container with id 574d4e645737
2025-02-14 04:04:50.477 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:04:50.477 DEBUG [src.node.waku_node] Stopping container with id 54a8fedd7385
2025-02-14 04:04:51.290 ERROR [src.node.docker_mananger] Max retries reached for container 574d4e645737. Exiting log stream.
2025-02-14 04:04:51.996 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:04:51.997 DEBUG [src.node.waku_node] Stopping container with id eebd11a0a7b0
2025-02-14 04:04:52.809 ERROR [src.node.docker_mananger] Max retries reached for container 54a8fedd7385. Exiting log stream.
2025-02-14 04:04:53.500 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:04:53.501 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-14 04:04:53.509 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-14 04:04:53.516 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-14 04:04:53.522 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
