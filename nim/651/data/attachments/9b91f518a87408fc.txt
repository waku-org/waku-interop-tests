2025-02-14 04:06:03.108 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-14 04:06:03.109 DEBUG [tests.conftest] Running test: test_store_with_unknown_content_topic with id: 2025-02-14_04-06-03__b25206f6-7cfe-4fb4-abb9-23610535c4b0
2025-02-14 04:06:03.109 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-14 04:06:03.109 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-14 04:06:03.109 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-14 04:06:03.115 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:06:03.116 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-14_04-06-03__b25206f6-7cfe-4fb4-abb9-23610535c4b0__wakuorg_nwaku:latest.log
2025-02-14 04:06:03.116 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:06:03.116 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:06:03.117 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:06:03.117 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.2.165
2025-02-14 04:06:03.118 DEBUG [src.node.docker_mananger] Generated ports ['7494', '7495', '7496', '7497', '7498']
2025-02-14 04:06:03.118 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:06:03.118 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:06:03.118 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:06:03.118 DEBUG [src.node.docker_mananger] docker run -i -t -p 7494:7494 -p 7495:7495 -p 7496:7496 -p 7497:7497 -p 7498:7498 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7496 --rest-port=7494 --tcp-port=7495 --discv5-udp-port=7497 --rest-address=0.0.0.0 --nat=extip:172.18.2.165 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=495bf4fd289e7ceb67fafadbdcddff9e9edb15cbad24149f4cdde30cd2e24a9f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7498 --metrics-logging=true --store=true --relay=true
2025-02-14 04:06:03.343 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.2.165 waku fdd24e358eec53080c57d4b66a6bb4f033e792c2f9ab31e5f2fa2341ed3a5091
2025-02-14 04:06:03.391 DEBUG [src.node.docker_mananger] Container started with ID fdd24e358eec. Setting up logs at ./log/docker/publishing_node1_2025-02-14_04-06-03__b25206f6-7cfe-4fb4-abb9-23610535c4b0__wakuorg_nwaku:latest.log
2025-02-14 04:06:03.392 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 7494
2025-02-14 04:06:03.392 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:06:03.915 ERROR [src.node.docker_mananger] Max retries reached for container 007108ae3afe. Exiting log stream.
2025-02-14 04:06:04.393 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7494/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:06:04.395 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:06:04.396 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:06:04.396 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7494/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:06:04.398 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.2.165/tcp/7495/p2p/16Uiu2HAmQ6bUNatnj1scHcko8dLkJAFcJQLguZsvCufNCuCfWLgB","/ip4/172.18.2.165/tcp/7496/ws/p2p/16Uiu2HAmQ6bUNatnj1scHcko8dLkJAFcJQLguZsvCufNCuCfWLgB"],"enrUri":"enr:-L24QK7efmMZvHSUFQHs_oUTGKBXuNws95DC-l4iwSiuFXClM6TU7wJGSxfNFt1kwl7aArhdoMSHGf9FqCPU3CIEycsCgmlkgnY0gmlwhKwSAqWKbXVsdGlhZGRyc5YACASsEgKlBh1HAAoErBICpQYdSN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDqf_KBDfw-2KMxuoTozJAix7f094i7lQP-VDCMQ-rWNSDdGNwgh1Hg3VkcIIdSYV3YWt1MgM"}'
2025-02-14 04:06:04.398 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:06:04.406 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:06:04.406 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-14_04-06-03__b25206f6-7cfe-4fb4-abb9-23610535c4b0__wakuorg_nwaku:latest.log
2025-02-14 04:06:04.406 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:06:04.407 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:06:04.408 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:06:04.408 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.136.50
2025-02-14 04:06:04.408 DEBUG [src.node.docker_mananger] Generated ports ['31586', '31587', '31588', '31589', '31590']
2025-02-14 04:06:04.408 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:06:04.408 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:06:04.409 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:06:04.409 DEBUG [src.node.docker_mananger] docker run -i -t -p 31586:31586 -p 31587:31587 -p 31588:31588 -p 31589:31589 -p 31590:31590 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=31588 --rest-port=31586 --tcp-port=31587 --discv5-udp-port=31589 --rest-address=0.0.0.0 --nat=extip:172.18.136.50 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=802afdfad65e9b3d514a7c0ec4fb1f7a2da19bae48f3edb53d7baaebfca2abd0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=31590 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QK7efmMZvHSUFQHs_oUTGKBXuNws95DC-l4iwSiuFXClM6TU7wJGSxfNFt1kwl7aArhdoMSHGf9FqCPU3CIEycsCgmlkgnY0gmlwhKwSAqWKbXVsdGlhZGRyc5YACASsEgKlBh1HAAoErBICpQYdSN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDqf_KBDfw-2KMxuoTozJAix7f094i7lQP-VDCMQ-rWNSDdGNwgh1Hg3VkcIIdSYV3YWt1MgM --storenode=/ip4/172.18.2.165/tcp/7495/p2p/16Uiu2HAmQ6bUNatnj1scHcko8dLkJAFcJQLguZsvCufNCuCfWLgB --store=true --relay=true
2025-02-14 04:06:04.643 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.136.50 waku bbf14a29a000995da0535407717e40187d0b23e8be6182e76590c0d2f012fdf2
2025-02-14 04:06:04.687 DEBUG [src.node.docker_mananger] Container started with ID bbf14a29a000. Setting up logs at ./log/docker/store_node1_2025-02-14_04-06-03__b25206f6-7cfe-4fb4-abb9-23610535c4b0__wakuorg_nwaku:latest.log
2025-02-14 04:06:04.687 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 31586
2025-02-14 04:06:04.687 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:06:05.688 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31586/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:06:05.691 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:06:05.691 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:06:05.691 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31586/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:06:05.694 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.136.50/tcp/31587/p2p/16Uiu2HAmMj4tStuRrhY5qDjkyY7XRJNU2GLLAd4V2TNzqh4aVheE","/ip4/172.18.136.50/tcp/31588/ws/p2p/16Uiu2HAmMj4tStuRrhY5qDjkyY7XRJNU2GLLAd4V2TNzqh4aVheE"],"enrUri":"enr:-L24QLlo8r6_RVak-Kt9-EKo0oAHW5hEBuYNAmz8I20sAJrgSQZVhPiUKEm5SV_YNPSQp4lKnuLwTh2QpV6079kdrbgCgmlkgnY0gmlwhKwSiDKKbXVsdGlhZGRyc5YACASsEogyBntjAAoErBKIMgZ7ZN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDhsSiw6ksnIWhvKLVJQRGW76jlVtfTXRblNK7nnjgH1-DdGNwgntjg3VkcIJ7ZYV3YWt1MgM"}'
2025-02-14 04:06:05.694 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:06:05.695 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31586/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.2.165/tcp/7495/p2p/16Uiu2HAmQ6bUNatnj1scHcko8dLkJAFcJQLguZsvCufNCuCfWLgB"]'
2025-02-14 04:06:05.697 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:06:05.698 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7494/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-14 04:06:05.700 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:06:05.700 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31586/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-14 04:06:05.702 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:06:05.703 DEBUG [src.steps.store] Relaying message
2025-02-14 04:06:05.703 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7494/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:06:05.708 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:06:05.709 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 04:06:05.910 DEBUG [src.steps.store] Relaying message
2025-02-14 04:06:05.910 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7494/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:06:05.916 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:06:05.917 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 04:06:06.118 DEBUG [src.steps.store] Relaying message
2025-02-14 04:06:06.119 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7494/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:06:06.125 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:06:06.126 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 04:06:06.328 DEBUG [src.steps.store] Relaying message
2025-02-14 04:06:06.328 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7494/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:06:06.334 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:06:06.335 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 04:06:06.536 DEBUG [src.steps.store] Relaying message
2025-02-14 04:06:06.536 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7494/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:06:06.542 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:06:06.542 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 04:06:06.743 DEBUG [src.steps.store] Relaying message
2025-02-14 04:06:06.744 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7494/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:06:06.750 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:06:06.751 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 04:06:06.952 DEBUG [src.steps.store] Relaying message
2025-02-14 04:06:06.952 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7494/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:06:06.958 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:06:06.958 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 04:06:07.159 DEBUG [src.steps.store] Relaying message
2025-02-14 04:06:07.159 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7494/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:06:07.166 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:06:07.167 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 04:06:07.368 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7494/store/v3/messages?contentTopics=test&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:06:07.371 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
2025-02-14 04:06:07.372 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31586/store/v3/messages?contentTopics=test&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:06:07.374 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
2025-02-14 04:06:07.377 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-14 04:06:07.378 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-14 04:06:07.378 DEBUG [src.node.waku_node] Stopping container with id fdd24e358eec
2025-02-14 04:06:07.936 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:06:07.936 DEBUG [src.node.waku_node] Stopping container with id bbf14a29a000
2025-02-14 04:06:08.767 ERROR [src.node.docker_mananger] Max retries reached for container fdd24e358eec. Exiting log stream.
2025-02-14 04:06:09.147 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:06:09.148 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-14 04:06:09.162 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-14 04:06:09.168 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
