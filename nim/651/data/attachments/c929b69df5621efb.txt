2025-02-14 04:06:59.851 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-14 04:06:59.852 DEBUG [tests.conftest] Running test: test_store_with_wrong_url_pubsub_topic with id: 2025-02-14_04-06-59__0be64ca6-d45f-4fe5-92ca-ef032c8ce857
2025-02-14 04:06:59.852 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-14 04:06:59.852 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-14 04:06:59.853 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-14 04:06:59.862 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:06:59.862 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-14_04-06-59__0be64ca6-d45f-4fe5-92ca-ef032c8ce857__wakuorg_nwaku:latest.log
2025-02-14 04:06:59.862 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:06:59.863 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:06:59.865 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:06:59.866 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.125.50
2025-02-14 04:06:59.866 DEBUG [src.node.docker_mananger] Generated ports ['13780', '13781', '13782', '13783', '13784']
2025-02-14 04:06:59.867 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:06:59.867 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:06:59.867 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:06:59.867 DEBUG [src.node.docker_mananger] docker run -i -t -p 13780:13780 -p 13781:13781 -p 13782:13782 -p 13783:13783 -p 13784:13784 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=13782 --rest-port=13780 --tcp-port=13781 --discv5-udp-port=13783 --rest-address=0.0.0.0 --nat=extip:172.18.125.50 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ecba3cc4948d096c9eacdefd3fb9fdc4abbd4c76af28ba47bdbfadaa8257aa6b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=13784 --metrics-logging=true --store=true --relay=true
2025-02-14 04:07:00.103 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.125.50 waku 08ad8206d2a40840b606430c29ab8a16808b4f3c84552efddcfc2007e08190bd
2025-02-14 04:07:00.155 DEBUG [src.node.docker_mananger] Container started with ID 08ad8206d2a4. Setting up logs at ./log/docker/publishing_node1_2025-02-14_04-06-59__0be64ca6-d45f-4fe5-92ca-ef032c8ce857__wakuorg_nwaku:latest.log
2025-02-14 04:07:00.155 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 13780
2025-02-14 04:07:00.156 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:07:00.684 ERROR [src.node.docker_mananger] Max retries reached for container 4123a950549c. Exiting log stream.
2025-02-14 04:07:01.156 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:13780/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:07:01.159 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:07:01.159 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:07:01.159 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:13780/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:07:01.162 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.125.50/tcp/13781/p2p/16Uiu2HAmTfZETM9FD1x7FwbUbcm72JV16V7WEQR6MejSpA39dTEw","/ip4/172.18.125.50/tcp/13782/ws/p2p/16Uiu2HAmTfZETM9FD1x7FwbUbcm72JV16V7WEQR6MejSpA39dTEw"],"enrUri":"enr:-L24QLJ32_Cil-X4v0_kilbhXucknykC2HqTjYCaT8q3mllSajMA92uLUSdz58oBFTsAuuswMy8jzpy5tmi2hKzrTpACgmlkgnY0gmlwhKwSfTKKbXVsdGlhZGRyc5YACASsEn0yBjXVAAoErBJ9MgY11t0DgnJzhQADAQAAiXNlY3AyNTZrMaED3wR73vJNM99DbP1GXk1C99fa1VvumpOelKWsTU9SIPCDdGNwgjXVg3VkcII114V3YWt1MgM"}'
2025-02-14 04:07:01.162 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:07:01.168 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:07:01.168 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-14_04-06-59__0be64ca6-d45f-4fe5-92ca-ef032c8ce857__wakuorg_nwaku:latest.log
2025-02-14 04:07:01.169 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:07:01.169 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:07:01.170 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:07:01.170 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.80.253
2025-02-14 04:07:01.170 DEBUG [src.node.docker_mananger] Generated ports ['59468', '59469', '59470', '59471', '59472']
2025-02-14 04:07:01.171 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:07:01.171 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:07:01.171 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:07:01.171 DEBUG [src.node.docker_mananger] docker run -i -t -p 59468:59468 -p 59469:59469 -p 59470:59470 -p 59471:59471 -p 59472:59472 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=59470 --rest-port=59468 --tcp-port=59469 --discv5-udp-port=59471 --rest-address=0.0.0.0 --nat=extip:172.18.80.253 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3ed3ee84ac50b0a0837bfb92ae9514da26f26c6aecf2bbfa4ddb4ecfec7ce5f9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=59472 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QLJ32_Cil-X4v0_kilbhXucknykC2HqTjYCaT8q3mllSajMA92uLUSdz58oBFTsAuuswMy8jzpy5tmi2hKzrTpACgmlkgnY0gmlwhKwSfTKKbXVsdGlhZGRyc5YACASsEn0yBjXVAAoErBJ9MgY11t0DgnJzhQADAQAAiXNlY3AyNTZrMaED3wR73vJNM99DbP1GXk1C99fa1VvumpOelKWsTU9SIPCDdGNwgjXVg3VkcII114V3YWt1MgM --storenode=/ip4/172.18.125.50/tcp/13781/p2p/16Uiu2HAmTfZETM9FD1x7FwbUbcm72JV16V7WEQR6MejSpA39dTEw --store=true --relay=true
2025-02-14 04:07:01.397 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.80.253 waku 834e9deba41f6e7cad65f0765ad21616f7cbbcf7b71b28834c5bf07e49f80a58
2025-02-14 04:07:01.450 DEBUG [src.node.docker_mananger] Container started with ID 834e9deba41f. Setting up logs at ./log/docker/store_node1_2025-02-14_04-06-59__0be64ca6-d45f-4fe5-92ca-ef032c8ce857__wakuorg_nwaku:latest.log
2025-02-14 04:07:01.451 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 59468
2025-02-14 04:07:01.452 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:07:02.452 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:59468/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:07:02.455 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:07:02.455 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:07:02.455 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:59468/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:07:02.457 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.80.253/tcp/59469/p2p/16Uiu2HAmA83CrQUcKQ8c4dwGwEc94cfE3pXyywH4siWA1yMPso7V","/ip4/172.18.80.253/tcp/59470/ws/p2p/16Uiu2HAmA83CrQUcKQ8c4dwGwEc94cfE3pXyywH4siWA1yMPso7V"],"enrUri":"enr:-L24QJR9Y1t9ptoxau0kGFU19jR951gssR1oBA545g8TQTr0YBBXqFUufebLtCHkamUOHDduWHWzvVgS-vqxV0LOO5sCgmlkgnY0gmlwhKwSUP2KbXVsdGlhZGRyc5YACASsElD9BuhNAAoErBJQ_QboTt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC2lrZQ_l0DGAa59G1aC1vDyKZawoLUBWFGq3WVWd_5qCDdGNwguhNg3VkcILoT4V3YWt1MgM"}'
2025-02-14 04:07:02.457 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:07:02.458 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:59468/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.125.50/tcp/13781/p2p/16Uiu2HAmTfZETM9FD1x7FwbUbcm72JV16V7WEQR6MejSpA39dTEw"]'
2025-02-14 04:07:02.460 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:07:02.461 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:13780/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-14 04:07:02.463 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:07:02.463 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:59468/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-14 04:07:02.465 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:07:02.466 DEBUG [src.steps.store] Relaying message
2025-02-14 04:07:02.466 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:13780/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:07:02.471 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:07:02.472 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 04:07:02.674 DEBUG [src.steps.store] Relaying message
2025-02-14 04:07:02.674 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:13780/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:07:02.680 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:07:02.680 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 04:07:02.881 DEBUG [src.steps.store] Relaying message
2025-02-14 04:07:02.881 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:13780/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:07:02.888 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:07:02.888 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 04:07:03.089 DEBUG [src.steps.store] Relaying message
2025-02-14 04:07:03.089 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:13780/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:07:03.095 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:07:03.096 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 04:07:03.297 DEBUG [src.steps.store] Relaying message
2025-02-14 04:07:03.298 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:13780/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:07:03.304 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:07:03.305 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 04:07:03.506 DEBUG [src.steps.store] Relaying message
2025-02-14 04:07:03.506 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:13780/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:07:03.512 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:07:03.513 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 04:07:03.714 DEBUG [src.steps.store] Relaying message
2025-02-14 04:07:03.714 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:13780/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:07:03.720 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:07:03.720 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 04:07:03.921 DEBUG [src.steps.store] Relaying message
2025-02-14 04:07:03.922 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:13780/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:07:03.927 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:07:03.928 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 04:07:04.130 DEBUG [tests.store.test_topics] Trying to get stored msg with wrong url topic waku/2/rs/3/0
2025-02-14 04:07:04.130 DEBUG [src.steps.store] Relaying message
2025-02-14 04:07:04.130 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:13780/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:07:04.136 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:07:04.137 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 04:07:04.337 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-14 04:07:04.338 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:13780/store/v3/messages?pubsubTopic=waku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:07:04.341 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
2025-02-14 04:07:04.342 ERROR [tests.store.test_topics] Topic waku/2/rs/3/0 is wrong ''n: Peer wakuorg/nwaku:latest couldn't find any messages. Actual response: {'requestId': '', 'statusCode': 200, 'statusDesc': 'OK', 'messages': []}
2025-02-14 04:07:04.344 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-14 04:07:04.345 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-14 04:07:04.346 DEBUG [src.node.waku_node] Stopping container with id 08ad8206d2a4
2025-02-14 04:07:05.696 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:07:05.697 DEBUG [src.node.waku_node] Stopping container with id 834e9deba41f
2025-02-14 04:07:06.510 ERROR [src.node.docker_mananger] Max retries reached for container 08ad8206d2a4. Exiting log stream.
2025-02-14 04:07:07.203 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:07:07.203 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-14 04:07:07.211 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-14 04:07:07.219 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
