2025-02-14 04:07:47.325 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-14 04:07:47.326 DEBUG [tests.conftest] Running test: test_sender_uses_auto_api_receiver_uses_regular_api with id: 2025-02-14_04-07-47__f805ebcb-9680-4dd9-a500-97c15734234f
2025-02-14 04:07:47.326 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-14 04:07:47.326 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-14 04:07:47.326 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2025-02-14 04:07:47.334 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:07:47.334 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-14_04-07-47__f805ebcb-9680-4dd9-a500-97c15734234f__wakuorg_nwaku:latest.log
2025-02-14 04:07:47.334 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:07:47.334 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:07:47.335 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:07:47.336 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.212.54
2025-02-14 04:07:47.336 DEBUG [src.node.docker_mananger] Generated ports ['10088', '10089', '10090', '10091', '10092']
2025-02-14 04:07:47.336 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:07:47.336 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:07:47.336 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:07:47.336 DEBUG [src.node.docker_mananger] docker run -i -t -p 10088:10088 -p 10089:10089 -p 10090:10090 -p 10091:10091 -p 10092:10092 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=10090 --rest-port=10088 --tcp-port=10089 --discv5-udp-port=10091 --rest-address=0.0.0.0 --nat=extip:172.18.212.54 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=edc43aee48c2af3cd6aef576a764d7cdcbeb18ad5138ae55ec9edcf959d54dd6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=10092 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/2/0 --num-shards-in-network=1
2025-02-14 04:07:47.566 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.212.54 waku 22005cc95f90ece2e94607a2189ed4b590ea883e376081e1907603c48c9fc6ab
2025-02-14 04:07:47.615 DEBUG [src.node.docker_mananger] Container started with ID 22005cc95f90. Setting up logs at ./log/docker/node1_2025-02-14_04-07-47__f805ebcb-9680-4dd9-a500-97c15734234f__wakuorg_nwaku:latest.log
2025-02-14 04:07:47.615 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 10088
2025-02-14 04:07:47.616 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:07:48.130 ERROR [src.node.docker_mananger] Max retries reached for container 179155473ff1. Exiting log stream.
2025-02-14 04:07:48.616 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:10088/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:07:48.619 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:07:48.619 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:07:48.620 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:10088/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:07:48.622 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.212.54/tcp/10089/p2p/16Uiu2HAmPmXVVWWuoLcyMKGJCHdUjQ8PPkyXGKcDgAy3L5oh3ESa","/ip4/172.18.212.54/tcp/10090/ws/p2p/16Uiu2HAmPmXVVWWuoLcyMKGJCHdUjQ8PPkyXGKcDgAy3L5oh3ESa"],"enrUri":"enr:-L24QP3OZoxAtUK6L2PnKIP3kh3Rza2H_MkIWutdoWY3_6TYRs2CYzv8XjbXVg_q7CAyfYNsn4CCsTBkB2Esl7fnuBMCgmlkgnY0gmlwhKwS1DaKbXVsdGlhZGRyc5YACASsEtQ2BidpAAoErBLUNgYnat0DgnJzhQACAQAAiXNlY3AyNTZrMaEDpR1AtQkJZdEHpHAOTP0EFaDLDDlljdqKoXyxYdXgAK-DdGNwgidpg3VkcIIna4V3YWt1MgU"}'
2025-02-14 04:07:48.622 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:07:48.628 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:07:48.629 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-14_04-07-47__f805ebcb-9680-4dd9-a500-97c15734234f__wakuorg_nwaku:latest.log
2025-02-14 04:07:48.629 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:07:48.629 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:07:48.630 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:07:48.630 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.0.1
2025-02-14 04:07:48.630 DEBUG [src.node.docker_mananger] Generated ports ['5870', '5871', '5872', '5873', '5874']
2025-02-14 04:07:48.631 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:07:48.631 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:07:48.631 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:07:48.631 DEBUG [src.node.docker_mananger] docker run -i -t -p 5870:5870 -p 5871:5871 -p 5872:5872 -p 5873:5873 -p 5874:5874 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=5872 --rest-port=5870 --tcp-port=5871 --discv5-udp-port=5873 --rest-address=0.0.0.0 --nat=extip:172.18.0.1 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=5e5cc377b8eaf584de88d50d951124bfca6b48cecccfcfe70deedeb61c049ceb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=5874 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QP3OZoxAtUK6L2PnKIP3kh3Rza2H_MkIWutdoWY3_6TYRs2CYzv8XjbXVg_q7CAyfYNsn4CCsTBkB2Esl7fnuBMCgmlkgnY0gmlwhKwS1DaKbXVsdGlhZGRyc5YACASsEtQ2BidpAAoErBLUNgYnat0DgnJzhQACAQAAiXNlY3AyNTZrMaEDpR1AtQkJZdEHpHAOTP0EFaDLDDlljdqKoXyxYdXgAK-DdGNwgidpg3VkcIIna4V3YWt1MgU --pubsub-topic=/waku/2/rs/2/0 --num-shards-in-network=1
2025-02-14 04:07:48.861 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.0.1 waku f9b2239a8a1e2bce9158663d17d203e99dc89cbbe9716acab749e7c90476c623
2025-02-14 04:07:48.963 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:07:48.964 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:07:48.965 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:07:48.965 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.56.108
2025-02-14 04:07:48.966 DEBUG [src.node.docker_mananger] Generated ports ['63649', '63650', '63651', '63652', '63653']
2025-02-14 04:07:48.966 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:07:48.966 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:07:48.966 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:07:48.966 DEBUG [src.node.docker_mananger] docker run -i -t -p 63649:63649 -p 63650:63650 -p 63651:63651 -p 63652:63652 -p 63653:63653 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63651 --rest-port=63649 --tcp-port=63650 --discv5-udp-port=63652 --rest-address=0.0.0.0 --nat=extip:172.18.56.108 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=e5aa3777ec0b15a4c24fdd20feb2fa4d50d51e9e55a6258a18afd45a4bc79ee2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63653 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QP3OZoxAtUK6L2PnKIP3kh3Rza2H_MkIWutdoWY3_6TYRs2CYzv8XjbXVg_q7CAyfYNsn4CCsTBkB2Esl7fnuBMCgmlkgnY0gmlwhKwS1DaKbXVsdGlhZGRyc5YACASsEtQ2BidpAAoErBLUNgYnat0DgnJzhQACAQAAiXNlY3AyNTZrMaEDpR1AtQkJZdEHpHAOTP0EFaDLDDlljdqKoXyxYdXgAK-DdGNwgidpg3VkcIIna4V3YWt1MgU --pubsub-topic=/waku/2/rs/2/0 --num-shards-in-network=1
2025-02-14 04:07:49.200 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.56.108 waku b5cef7bb78831603849b666e4b15b272b903a8cb3a1624639b78fc11abd9a5a4
2025-02-14 04:07:49.250 DEBUG [src.node.docker_mananger] Container started with ID b5cef7bb7883. Setting up logs at ./log/docker/node2_2025-02-14_04-07-47__f805ebcb-9680-4dd9-a500-97c15734234f__wakuorg_nwaku:latest.log
2025-02-14 04:07:49.250 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 63649
2025-02-14 04:07:49.251 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:07:50.252 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63649/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:07:50.260 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:07:50.261 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:07:50.262 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63649/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:07:50.264 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.56.108/tcp/63650/p2p/16Uiu2HAmKiv6HndhMyWcisWUisKvRheiJt9nzbQ5AaerALt2DkXB","/ip4/172.18.56.108/tcp/63651/ws/p2p/16Uiu2HAmKiv6HndhMyWcisWUisKvRheiJt9nzbQ5AaerALt2DkXB"],"enrUri":"enr:-L24QBrR-lXSW9lj-e59yR3Y4LQiPzlrIxnBCqWi863KG7b6Df3q9pyabBUHxioDyW1Mxgn45N0nK1JkYhdFKXmVUpcCgmlkgnY0gmlwhKwSOGyKbXVsdGlhZGRyc5YACASsEjhsBviiAAoErBI4bAb4o90DgnJzhQACAQAAiXNlY3AyNTZrMaEDaQNRBX_buGa_aHMvpnFnbC9Yo9p32kIddPfDv_clxfKDdGNwgviig3VkcIL4pIV3YWt1MgE"}'
2025-02-14 04:07:50.265 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:07:50.265 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63649/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.212.54/tcp/10089/p2p/16Uiu2HAmPmXVVWWuoLcyMKGJCHdUjQ8PPkyXGKcDgAy3L5oh3ESa"]'
2025-02-14 04:07:50.268 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:07:50.268 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:10088/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
2025-02-14 04:07:50.271 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:07:50.271 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63649/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0"]'
2025-02-14 04:07:50.274 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:07:50.274 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:10088/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:07:50.279 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:07:50.280 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-14 04:07:50.380 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63649/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:07:50.383 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739506070274496256,"ephemeral":false}]'
2025-02-14 04:07:50.384 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-14 04:07:50.386 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-14 04:07:50.386 DEBUG [src.node.waku_node] Stopping container with id 22005cc95f90
2025-02-14 04:07:51.180 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:07:51.181 DEBUG [src.node.waku_node] Stopping container with id b5cef7bb7883
2025-02-14 04:07:51.994 ERROR [src.node.docker_mananger] Max retries reached for container 22005cc95f90. Exiting log stream.
2025-02-14 04:07:52.218 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:07:52.219 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-14 04:07:52.224 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-14 04:07:52.229 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
