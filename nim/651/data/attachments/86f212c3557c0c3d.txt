2025-02-14 04:02:34.096 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-14 04:02:34.096 DEBUG [tests.conftest] Running test: test_filter_get_message_after_node_pauses_and_pauses with id: 2025-02-14_04-02-34__c4055378-fdfd-4b93-a922-e1fa855ac3c6
2025-02-14 04:02:34.096 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-14 04:02:34.097 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-14 04:02:34.097 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-14 04:02:34.103 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:02:34.103 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-14_04-02-34__c4055378-fdfd-4b93-a922-e1fa855ac3c6__wakuorg_nwaku:latest.log
2025-02-14 04:02:34.103 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:02:34.104 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:02:34.105 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:02:34.105 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.49.32
2025-02-14 04:02:34.105 DEBUG [src.node.docker_mananger] Generated ports ['32891', '32892', '32893', '32894', '32895']
2025-02-14 04:02:34.105 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:02:34.106 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:02:34.106 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:02:34.106 DEBUG [src.node.docker_mananger] docker run -i -t -p 32891:32891 -p 32892:32892 -p 32893:32893 -p 32894:32894 -p 32895:32895 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32893 --rest-port=32891 --tcp-port=32892 --discv5-udp-port=32894 --rest-address=0.0.0.0 --nat=extip:172.18.49.32 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b568d5beed1dd817dadd9c792cfde9daeafbae4a5ba7bfa611f7bdd628debcb7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32895 --metrics-logging=true --relay=true --filter=true
2025-02-14 04:02:34.338 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.49.32 waku 4fafa663b3440c282889975d693716192aae786741b97e793b32b6e33c5c17ab
2025-02-14 04:02:34.391 DEBUG [src.node.docker_mananger] Container started with ID 4fafa663b344. Setting up logs at ./log/docker/node1_2025-02-14_04-02-34__c4055378-fdfd-4b93-a922-e1fa855ac3c6__wakuorg_nwaku:latest.log
2025-02-14 04:02:34.391 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 32891
2025-02-14 04:02:34.392 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:02:34.883 ERROR [src.node.docker_mananger] Max retries reached for container 77b2f8dc8384. Exiting log stream.
2025-02-14 04:02:35.393 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32891/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:02:35.396 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:02:35.396 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:02:35.397 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32891/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:02:35.399 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.49.32/tcp/32892/p2p/16Uiu2HAkxmfUao2XceGsaLf9TtgeLqQKgv7fhhwsBPb9f9F2z4HB","/ip4/172.18.49.32/tcp/32893/ws/p2p/16Uiu2HAkxmfUao2XceGsaLf9TtgeLqQKgv7fhhwsBPb9f9F2z4HB"],"enrUri":"enr:-L24QP2tSLlDba6uUiqC2yiAcEISz0kylogeQyuTwzmmnP59cYp8YJVe059hAc6K9HyfJIq2yac0fNkoSbeW4S6ysXICgmlkgnY0gmlwhKwSMSCKbXVsdGlhZGRyc5YACASsEjEgBoB8AAoErBIxIAaAfd0DgnJzhQADAQAAiXNlY3AyNTZrMaECMbIbhgYkpLx-R_QY594JVTGcZzXeLJy2fyD9w2RXvs6DdGNwgoB8g3VkcIKAfoV3YWt1MgU"}'
2025-02-14 04:02:35.399 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:02:35.399 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-14 04:02:35.406 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:02:35.406 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-14_04-02-34__c4055378-fdfd-4b93-a922-e1fa855ac3c6__wakuorg_nwaku:latest.log
2025-02-14 04:02:35.406 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:02:35.406 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:02:35.407 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:02:35.408 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.45.183
2025-02-14 04:02:35.408 DEBUG [src.node.docker_mananger] Generated ports ['57093', '57094', '57095', '57096', '57097']
2025-02-14 04:02:35.408 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:02:35.408 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:02:35.408 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:02:35.408 DEBUG [src.node.docker_mananger] docker run -i -t -p 57093:57093 -p 57094:57094 -p 57095:57095 -p 57096:57096 -p 57097:57097 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57095 --rest-port=57093 --tcp-port=57094 --discv5-udp-port=57096 --rest-address=0.0.0.0 --nat=extip:172.18.45.183 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c77dabdeff1d1b4ccd2ab7b2fc8d0ed5db3f2d7cd00c2e6219fee9f3aff4fbf7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57097 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QP2tSLlDba6uUiqC2yiAcEISz0kylogeQyuTwzmmnP59cYp8YJVe059hAc6K9HyfJIq2yac0fNkoSbeW4S6ysXICgmlkgnY0gmlwhKwSMSCKbXVsdGlhZGRyc5YACASsEjEgBoB8AAoErBIxIAaAfd0DgnJzhQADAQAAiXNlY3AyNTZrMaECMbIbhgYkpLx-R_QY594JVTGcZzXeLJy2fyD9w2RXvs6DdGNwgoB8g3VkcIKAfoV3YWt1MgU --filternode=/ip4/172.18.49.32/tcp/32892/p2p/16Uiu2HAkxmfUao2XceGsaLf9TtgeLqQKgv7fhhwsBPb9f9F2z4HB
2025-02-14 04:02:35.634 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.45.183 waku 94b0547b9706c478e1e75d6c0dd79fd3849951d089445e2d897daa272d7d7329
2025-02-14 04:02:35.684 DEBUG [src.node.docker_mananger] Container started with ID 94b0547b9706. Setting up logs at ./log/docker/node2_2025-02-14_04-02-34__c4055378-fdfd-4b93-a922-e1fa855ac3c6__wakuorg_nwaku:latest.log
2025-02-14 04:02:35.684 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 57093
2025-02-14 04:02:35.685 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:02:36.685 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57093/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:02:36.688 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:02:36.688 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:02:36.688 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57093/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:02:36.691 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.45.183/tcp/57094/p2p/16Uiu2HAmD29mvLBB29gWSgskiwuELnYon7dBvtj4eGjWwhPD5y3z","/ip4/172.18.45.183/tcp/57095/ws/p2p/16Uiu2HAmD29mvLBB29gWSgskiwuELnYon7dBvtj4eGjWwhPD5y3z"],"enrUri":"enr:-L24QLlnmwJ7HHsc2XjQ6iJKSJP7v-Ncl_CeYR4aUbnujRjvGOjuJMavyIjcMmnvhOo_EGPEo_XWIuNOcMTX6_4YG2QCgmlkgnY0gmlwhKwSLbeKbXVsdGlhZGRyc5YACASsEi23Bt8GAAoErBIttwbfB90DgnJzhQADAQAAiXNlY3AyNTZrMaEDBWvaflxCTSS1QiNrspWOISJ_VqkiGCAf9j64bUlVx62DdGNwgt8Gg3VkcILfCIV3YWt1MgA"}'
2025-02-14 04:02:36.691 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:02:36.691 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57093/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.49.32/tcp/32892/p2p/16Uiu2HAkxmfUao2XceGsaLf9TtgeLqQKgv7fhhwsBPb9f9F2z4HB"]'
2025-02-14 04:02:36.729 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:02:36.729 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-14 04:02:36.729 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32891/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-14 04:02:36.748 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:02:36.749 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57093/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "2f7f4d5d-3832-4450-af69-6f03b6c90c46", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-14 04:02:36.760 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"2f7f4d5d-3832-4450-af69-6f03b6c90c46","statusDesc":"OK"}'
2025-02-14 04:02:36.762 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32891/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:02:36.769 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:02:36.770 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-14 04:02:36.870 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-14 04:02:36.870 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57093/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:02:36.873 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1739505756761947136,"ephemeral":false}]'
2025-02-14 04:02:36.875 DEBUG [src.node.waku_node] Pausing container with id 4fafa663b344
2025-02-14 04:02:36.884 DEBUG [src.node.waku_node] Unpause container with id 4fafa663b344
2025-02-14 04:02:36.893 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32891/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "TTE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:02:36.897 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:02:36.897 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-14 04:02:36.997 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-14 04:02:36.998 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57093/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:02:37.000 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TTE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1739505756892923648,"ephemeral":false}]'
2025-02-14 04:02:37.002 DEBUG [src.node.waku_node] Pausing container with id 94b0547b9706
2025-02-14 04:02:37.011 DEBUG [src.node.waku_node] Unpause container with id 94b0547b9706
2025-02-14 04:02:37.020 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32891/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "TTI=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:02:37.024 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:02:37.024 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-14 04:02:37.125 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-14 04:02:37.125 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57093/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:02:37.128 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TTI=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1739505757020208896,"ephemeral":false}]'
2025-02-14 04:02:37.131 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-14 04:02:37.132 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-14 04:02:37.132 DEBUG [src.node.waku_node] Stopping container with id 4fafa663b344
2025-02-14 04:02:37.972 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:02:37.972 DEBUG [src.node.waku_node] Stopping container with id 94b0547b9706
2025-02-14 04:02:38.784 ERROR [src.node.docker_mananger] Max retries reached for container 4fafa663b344. Exiting log stream.
2025-02-14 04:02:39.372 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:02:39.372 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-14 04:02:39.378 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-14 04:02:39.383 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
