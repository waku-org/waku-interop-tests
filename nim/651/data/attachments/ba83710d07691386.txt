2025-02-14 04:04:16.950 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-14 04:04:16.950 DEBUG [tests.conftest] Running test: test_filter_subscribe_with_multiple_overlapping_content_topics with id: 2025-02-14_04-04-16__6a4ed663-8763-4404-87db-3f5309b1d7ce
2025-02-14 04:04:16.950 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-14 04:04:16.951 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-14 04:04:16.951 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-14 04:04:16.957 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:04:16.957 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-14_04-04-16__6a4ed663-8763-4404-87db-3f5309b1d7ce__wakuorg_nwaku:latest.log
2025-02-14 04:04:16.957 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:04:16.957 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:04:16.958 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:04:16.959 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.99.96
2025-02-14 04:04:16.959 DEBUG [src.node.docker_mananger] Generated ports ['2484', '2485', '2486', '2487', '2488']
2025-02-14 04:04:16.959 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:04:16.959 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:04:16.959 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:04:16.959 DEBUG [src.node.docker_mananger] docker run -i -t -p 2484:2484 -p 2485:2485 -p 2486:2486 -p 2487:2487 -p 2488:2488 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2486 --rest-port=2484 --tcp-port=2485 --discv5-udp-port=2487 --rest-address=0.0.0.0 --nat=extip:172.18.99.96 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0cf44d3ff4eac9feeda91bc534ec2b9cdbbe7586aaa39db2ec82cf6baaba5e1c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2488 --metrics-logging=true --relay=true --filter=true
2025-02-14 04:04:17.187 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.99.96 waku c46f2d01a5d6cc466f22a55edc15dc1e075e29efabed2a7faf6a312dc32dc681
2025-02-14 04:04:17.237 DEBUG [src.node.docker_mananger] Container started with ID c46f2d01a5d6. Setting up logs at ./log/docker/node1_2025-02-14_04-04-16__6a4ed663-8763-4404-87db-3f5309b1d7ce__wakuorg_nwaku:latest.log
2025-02-14 04:04:17.237 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 2484
2025-02-14 04:04:17.237 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:04:17.751 ERROR [src.node.docker_mananger] Max retries reached for container ae8376cc6710. Exiting log stream.
2025-02-14 04:04:18.238 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2484/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:18.241 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:04:18.241 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:04:18.241 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2484/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:18.243 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.99.96/tcp/2485/p2p/16Uiu2HAmLJtTiWVom6CRMwycFV8nspKgDzuLbjtp21dKspjEeXnq","/ip4/172.18.99.96/tcp/2486/ws/p2p/16Uiu2HAmLJtTiWVom6CRMwycFV8nspKgDzuLbjtp21dKspjEeXnq"],"enrUri":"enr:-L24QFnpfCdn0A1TKbJ1Ucr6-s_8ZpP2hOPw6B36TmAoDHhBegOw0OCaoHWRYop5fzoHCZkA89jvkZkpcNVzqB_XmyECgmlkgnY0gmlwhKwSY2CKbXVsdGlhZGRyc5YACASsEmNgBgm1AAoErBJjYAYJtt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDcbc4ZSonYDO8b5UaGCZZZIMv1kwbuEMblet9DV7elzKDdGNwggm1g3VkcIIJt4V3YWt1MgU"}'
2025-02-14 04:04:18.243 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:04:18.244 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-14 04:04:18.250 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:04:18.250 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-14_04-04-16__6a4ed663-8763-4404-87db-3f5309b1d7ce__wakuorg_nwaku:latest.log
2025-02-14 04:04:18.250 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:04:18.250 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:04:18.252 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:04:18.252 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.49.98
2025-02-14 04:04:18.252 DEBUG [src.node.docker_mananger] Generated ports ['31626', '31627', '31628', '31629', '31630']
2025-02-14 04:04:18.252 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:04:18.252 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:04:18.252 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:04:18.252 DEBUG [src.node.docker_mananger] docker run -i -t -p 31626:31626 -p 31627:31627 -p 31628:31628 -p 31629:31629 -p 31630:31630 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=31628 --rest-port=31626 --tcp-port=31627 --discv5-udp-port=31629 --rest-address=0.0.0.0 --nat=extip:172.18.49.98 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cead27bc81ab02883d7df59b67cdbc1ee85adcb599f93172d3ff41f1ffe7ecf2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=31630 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QFnpfCdn0A1TKbJ1Ucr6-s_8ZpP2hOPw6B36TmAoDHhBegOw0OCaoHWRYop5fzoHCZkA89jvkZkpcNVzqB_XmyECgmlkgnY0gmlwhKwSY2CKbXVsdGlhZGRyc5YACASsEmNgBgm1AAoErBJjYAYJtt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDcbc4ZSonYDO8b5UaGCZZZIMv1kwbuEMblet9DV7elzKDdGNwggm1g3VkcIIJt4V3YWt1MgU --filternode=/ip4/172.18.99.96/tcp/2485/p2p/16Uiu2HAmLJtTiWVom6CRMwycFV8nspKgDzuLbjtp21dKspjEeXnq
2025-02-14 04:04:18.475 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.49.98 waku 31fec61f770b43c6a0b42168d0060be834c1b8a5b7ec35b58d7d793693079bb1
2025-02-14 04:04:18.521 DEBUG [src.node.docker_mananger] Container started with ID 31fec61f770b. Setting up logs at ./log/docker/node2_2025-02-14_04-04-16__6a4ed663-8763-4404-87db-3f5309b1d7ce__wakuorg_nwaku:latest.log
2025-02-14 04:04:18.522 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 31626
2025-02-14 04:04:18.522 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:04:19.522 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31626/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:19.525 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:04:19.525 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:04:19.525 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31626/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:19.528 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.49.98/tcp/31627/p2p/16Uiu2HAkv4MjDVKsxv6wF5kXpxsBanovnruRAdNhcdcMAK27yxBt","/ip4/172.18.49.98/tcp/31628/ws/p2p/16Uiu2HAkv4MjDVKsxv6wF5kXpxsBanovnruRAdNhcdcMAK27yxBt"],"enrUri":"enr:-L24QAsN_hyjdGoJdZMbjIhTaQxbDxsRRmkCqfyg46W78OpTFJ5B8GOhlhQMA1Aqitl1KmWU3kawaQ-TLpaDus4F2B8CgmlkgnY0gmlwhKwSMWKKbXVsdGlhZGRyc5YACASsEjFiBnuLAAoErBIxYgZ7jN0DgnJzhQADAQAAiXNlY3AyNTZrMaECCWXaY97KiweVxyeX1sI_pg5_W71fMZZw91Db5_k0avODdGNwgnuLg3VkcIJ7jYV3YWt1MgA"}'
2025-02-14 04:04:19.528 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:04:19.528 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31626/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.99.96/tcp/2485/p2p/16Uiu2HAmLJtTiWVom6CRMwycFV8nspKgDzuLbjtp21dKspjEeXnq"]'
2025-02-14 04:04:19.564 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:04:19.567 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2484/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-14 04:04:19.586 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:04:19.588 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31626/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "434d99bc-a4a6-49c9-a594-714888301776", "contentFilters": ["Hello World!", "1234567890", "{\"key\": \"value\"}"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-14 04:04:19.600 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"434d99bc-a4a6-49c9-a594-714888301776","statusDesc":"OK"}'
2025-02-14 04:04:19.600 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2484/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-14 04:04:19.602 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:04:19.603 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31626/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "fbf99e6f-7fa7-4d62-9692-773da32d31ce", "contentFilters": ["1234567890", "{\"key\": \"value\"}", "\u8fd9\u662f\u4e00\u4e9b\u4e2d\u6587"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-14 04:04:19.611 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"fbf99e6f-7fa7-4d62-9692-773da32d31ce","statusDesc":"OK"}'
2025-02-14 04:04:19.611 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2484/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "Hello World!", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:04:19.619 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:04:19.619 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-14 04:04:19.719 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-14 04:04:19.720 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31626/filter/v2/messages/Hello%20World%21" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:19.722 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"Hello World!","version":0,"timestamp":1739505859611713536,"ephemeral":false}]'
2025-02-14 04:04:19.724 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2484/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "1234567890", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:04:19.728 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:04:19.729 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-14 04:04:19.829 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-14 04:04:19.829 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31626/filter/v2/messages/1234567890" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:19.832 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"1234567890","version":0,"timestamp":1739505859724354816,"ephemeral":false}]'
2025-02-14 04:04:19.833 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2484/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "{\"key\": \"value\"}", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:04:19.838 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:04:19.838 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-14 04:04:19.938 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-14 04:04:19.939 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31626/filter/v2/messages/%7B%22key%22%3A%20%22value%22%7D" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:19.941 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"{\\"key\\": \\"value\\"}","version":0,"timestamp":1739505859833822208,"ephemeral":false}]'
2025-02-14 04:04:19.943 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2484/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "\u8fd9\u662f\u4e00\u4e9b\u4e2d\u6587", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:04:19.947 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:04:19.948 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-14 04:04:20.048 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-14 04:04:20.048 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31626/filter/v2/messages/%E8%BF%99%E6%98%AF%E4%B8%80%E4%BA%9B%E4%B8%AD%E6%96%87" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:20.051 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"\xe8\xbf\x99\xe6\x98\xaf\xe4\xb8\x80\xe4\xba\x9b\xe4\xb8\xad\xe6\x96\x87","version":0,"timestamp":1739505859943019264,"ephemeral":false}]'
2025-02-14 04:04:20.053 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-14 04:04:20.054 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-14 04:04:20.054 DEBUG [src.node.waku_node] Stopping container with id c46f2d01a5d6
2025-02-14 04:04:20.795 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:04:20.795 DEBUG [src.node.waku_node] Stopping container with id 31fec61f770b
2025-02-14 04:04:21.607 ERROR [src.node.docker_mananger] Max retries reached for container c46f2d01a5d6. Exiting log stream.
2025-02-14 04:04:22.321 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:04:22.322 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-14 04:04:22.329 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-14 04:04:22.334 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
