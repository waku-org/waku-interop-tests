2025-02-14 04:04:09.797 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-14 04:04:09.797 DEBUG [tests.conftest] Running test: test_light_push_with_invalid_meta with id: 2025-02-14_04-04-09__54a6fb15-2e9a-4833-9d7b-99fda66c0c7a
2025-02-14 04:04:09.798 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-14 04:04:09.798 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-14 04:04:09.804 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:04:09.805 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-14_04-04-09__54a6fb15-2e9a-4833-9d7b-99fda66c0c7a__wakuorg_nwaku:latest.log
2025-02-14 04:04:09.805 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:04:09.805 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:04:09.806 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:04:09.806 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.183.101
2025-02-14 04:04:09.806 DEBUG [src.node.docker_mananger] Generated ports ['44696', '44697', '44698', '44699', '44700']
2025-02-14 04:04:09.807 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:04:09.807 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:04:09.807 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:04:09.807 DEBUG [src.node.docker_mananger] docker run -i -t -p 44696:44696 -p 44697:44697 -p 44698:44698 -p 44699:44699 -p 44700:44700 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44698 --rest-port=44696 --tcp-port=44697 --discv5-udp-port=44699 --rest-address=0.0.0.0 --nat=extip:172.18.183.101 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dec4319edc0c6ea26b85ecddb216dbee3de1a0bf864c6ba5be238117fc9e409a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44700 --metrics-logging=true --lightpush=true --relay=true
2025-02-14 04:04:10.034 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.183.101 waku 1146b2c6726793417828b729f68196e48d8fe8c119d08508cda3690a34b6d0ba
2025-02-14 04:04:10.085 DEBUG [src.node.docker_mananger] Container started with ID 1146b2c67267. Setting up logs at ./log/docker/receiving_node1_2025-02-14_04-04-09__54a6fb15-2e9a-4833-9d7b-99fda66c0c7a__wakuorg_nwaku:latest.log
2025-02-14 04:04:10.086 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 44696
2025-02-14 04:04:10.086 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:04:10.598 ERROR [src.node.docker_mananger] Max retries reached for container 993e92ff603e. Exiting log stream.
2025-02-14 04:04:11.086 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44696/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:11.090 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:04:11.090 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:04:11.090 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44696/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:11.092 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.183.101/tcp/44697/p2p/16Uiu2HAmTTtDqdXuYeJAGi9u394jZLCPHHdFf73xnxriUJ5Hm9iz","/ip4/172.18.183.101/tcp/44698/ws/p2p/16Uiu2HAmTTtDqdXuYeJAGi9u394jZLCPHHdFf73xnxriUJ5Hm9iz"],"enrUri":"enr:-L24QJ6gKPg__qagm5P9vMEIemBb65ps_ar8cAnPcC4O4GT6CZ-4tl9dicLaZ8We7_cbDfwRWyVA06oHWgf0lAZOzXMCgmlkgnY0gmlwhKwSt2WKbXVsdGlhZGRyc5YACASsErdlBq6ZAAoErBK3ZQaumt0DgnJzhQADAQAAiXNlY3AyNTZrMaED3Ab8S1zY9TMMcHNrDeLbUXGuom7d2RzipIJzdax1NcODdGNwgq6Zg3VkcIKum4V3YWt1Mgk"}'
2025-02-14 04:04:11.093 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:04:11.099 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:04:11.099 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-14_04-04-09__54a6fb15-2e9a-4833-9d7b-99fda66c0c7a__wakuorg_nwaku:latest.log
2025-02-14 04:04:11.099 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:04:11.099 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:04:11.101 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:04:11.101 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.114.30
2025-02-14 04:04:11.101 DEBUG [src.node.docker_mananger] Generated ports ['50596', '50597', '50598', '50599', '50600']
2025-02-14 04:04:11.101 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:04:11.101 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:04:11.101 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:04:11.102 DEBUG [src.node.docker_mananger] docker run -i -t -p 50596:50596 -p 50597:50597 -p 50598:50598 -p 50599:50599 -p 50600:50600 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=50598 --rest-port=50596 --tcp-port=50597 --discv5-udp-port=50599 --rest-address=0.0.0.0 --nat=extip:172.18.114.30 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a3bbca2089ddcbd6dbb4bab2d1b202a3d5a8c9de1bc9f6dbeefbc7272cf993f6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=50600 --metrics-logging=true --lightpush=false --relay=true
2025-02-14 04:04:11.336 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.114.30 waku 0312c8d7f64e37c72e1dd2b7579293483e6a299d22497911a58287ab3f40dba7
2025-02-14 04:04:11.381 DEBUG [src.node.docker_mananger] Container started with ID 0312c8d7f64e. Setting up logs at ./log/docker/receiving_node2_2025-02-14_04-04-09__54a6fb15-2e9a-4833-9d7b-99fda66c0c7a__wakuorg_nwaku:latest.log
2025-02-14 04:04:11.382 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 50596
2025-02-14 04:04:11.382 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:04:12.382 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50596/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:12.385 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:04:12.385 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:04:12.385 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50596/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:12.387 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.114.30/tcp/50597/p2p/16Uiu2HAm5VKggUHE61MnsAqSKskDf4wcPSMuheNg6TwtpRTKnqn5","/ip4/172.18.114.30/tcp/50598/ws/p2p/16Uiu2HAm5VKggUHE61MnsAqSKskDf4wcPSMuheNg6TwtpRTKnqn5"],"enrUri":"enr:-L24QNznNLyDwIGVDfvZYgdX1pHefhNvwyC7a17Kp2lMB0IybRgyr6QTh8gkvOg_YWKUDhllp8gU4M8aibsW_FgWVPwCgmlkgnY0gmlwhKwSch6KbXVsdGlhZGRyc5YACASsEnIeBsWlAAoErBJyHgbFpt0DgnJzhQADAQAAiXNlY3AyNTZrMaEClYQ-rQd2QeBPihQ30-Cr4gKht4f6EGxinhcwYrbSCd6DdGNwgsWlg3VkcILFp4V3YWt1MgE"}'
2025-02-14 04:04:12.387 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:04:12.388 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50596/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.183.101/tcp/44697/p2p/16Uiu2HAmTTtDqdXuYeJAGi9u394jZLCPHHdFf73xnxriUJ5Hm9iz"]'
2025-02-14 04:04:12.428 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:04:12.438 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:04:12.439 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-14_04-04-09__54a6fb15-2e9a-4833-9d7b-99fda66c0c7a__wakuorg_nwaku:latest.log
2025-02-14 04:04:12.439 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:04:12.439 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:04:12.440 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:04:12.440 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.115.68
2025-02-14 04:04:12.440 DEBUG [src.node.docker_mananger] Generated ports ['21645', '21646', '21647', '21648', '21649']
2025-02-14 04:04:12.441 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:04:12.441 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:04:12.441 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:04:12.441 DEBUG [src.node.docker_mananger] docker run -i -t -p 21645:21645 -p 21646:21646 -p 21647:21647 -p 21648:21648 -p 21649:21649 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=21647 --rest-port=21645 --tcp-port=21646 --discv5-udp-port=21648 --rest-address=0.0.0.0 --nat=extip:172.18.115.68 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=df25ab01f4dae71ebb8f96da5aac935d3fac2feb8bf510f8afd8d3f11c0488c6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=21649 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QJ6gKPg__qagm5P9vMEIemBb65ps_ar8cAnPcC4O4GT6CZ-4tl9dicLaZ8We7_cbDfwRWyVA06oHWgf0lAZOzXMCgmlkgnY0gmlwhKwSt2WKbXVsdGlhZGRyc5YACASsErdlBq6ZAAoErBK3ZQaumt0DgnJzhQADAQAAiXNlY3AyNTZrMaED3Ab8S1zY9TMMcHNrDeLbUXGuom7d2RzipIJzdax1NcODdGNwgq6Zg3VkcIKum4V3YWt1Mgk --lightpushnode=/ip4/172.18.183.101/tcp/44697/p2p/16Uiu2HAmTTtDqdXuYeJAGi9u394jZLCPHHdFf73xnxriUJ5Hm9iz --lightpush=true --relay=false
2025-02-14 04:04:12.682 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.115.68 waku 5cd470be8570c7ec6002f755273473150bc45fd53bff0db9d8b3988bdf9a28f8
2025-02-14 04:04:12.728 DEBUG [src.node.docker_mananger] Container started with ID 5cd470be8570. Setting up logs at ./log/docker/lightpush_node1_2025-02-14_04-04-09__54a6fb15-2e9a-4833-9d7b-99fda66c0c7a__wakuorg_nwaku:latest.log
2025-02-14 04:04:12.729 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 21645
2025-02-14 04:04:12.730 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:04:13.730 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:21645/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:13.733 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:04:13.733 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:04:13.734 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:21645/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:13.736 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.115.68/tcp/21646/p2p/16Uiu2HAmSu27Sa79AHQqYSAcwNw2Wbhf1QgLjGmQyGnoYgrDEH83","/ip4/172.18.115.68/tcp/21647/ws/p2p/16Uiu2HAmSu27Sa79AHQqYSAcwNw2Wbhf1QgLjGmQyGnoYgrDEH83"],"enrUri":"enr:-L24QOmKlo0B11v51Gz-GCgtTBKDEZz6Weonw9s9zZz1vFLBLD4nHUMZRC0NtZm35axuw1W2p97tHnX1S-xYxNNlHxQCgmlkgnY0gmlwhKwSc0SKbXVsdGlhZGRyc5YACASsEnNEBlSOAAoErBJzRAZUj90DgnJzhQADAQAAiXNlY3AyNTZrMaED05u9Xzth7pP31JubQLGROjDKpje31BAPwa34Q0u4zYCDdGNwglSOg3VkcIJUkIV3YWt1Mgg"}'
2025-02-14 04:04:13.736 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:04:13.736 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:21645/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.183.101/tcp/44697/p2p/16Uiu2HAmTTtDqdXuYeJAGi9u394jZLCPHHdFf73xnxriUJ5Hm9iz"]'
2025-02-14 04:04:13.771 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:04:13.772 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:21645/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.114.30/tcp/50597/p2p/16Uiu2HAm5VKggUHE61MnsAqSKskDf4wcPSMuheNg6TwtpRTKnqn5"]'
2025-02-14 04:04:13.800 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:04:13.801 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44696/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-14 04:04:13.806 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:04:13.807 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50596/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-14 04:04:13.817 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:04:13.819 DEBUG [src.steps.light_push] Lightpushing message
2025-02-14 04:04:13.819 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:21645/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739505853818832128, "meta": "Light push works!!"}}'
2025-02-14 04:04:13.821 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:21645/lightpush/v1/message. Response content: b'Invalid message: Incorrect base64 string'
2025-02-14 04:04:13.823 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-14 04:04:13.824 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-14 04:04:13.824 DEBUG [src.node.waku_node] Stopping container with id 1146b2c67267
2025-02-14 04:04:14.603 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:04:14.603 DEBUG [src.node.waku_node] Stopping container with id 0312c8d7f64e
2025-02-14 04:04:15.416 ERROR [src.node.docker_mananger] Max retries reached for container 1146b2c67267. Exiting log stream.
2025-02-14 04:04:16.118 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:04:16.118 DEBUG [src.node.waku_node] Stopping container with id 5cd470be8570
2025-02-14 04:04:16.931 ERROR [src.node.docker_mananger] Max retries reached for container 0312c8d7f64e. Exiting log stream.
2025-02-14 04:04:17.637 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:04:17.638 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-14 04:04:17.646 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-14 04:04:17.653 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-14 04:04:17.659 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
