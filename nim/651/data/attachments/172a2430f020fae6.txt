2025-02-14 04:04:41.953 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-14 04:04:41.953 DEBUG [tests.conftest] Running test: test_single_content_topic[/statusim/1/community/cbor] with id: 2025-02-14_04-04-41__6398442c-2bcc-417c-b243-df860d2fd056
2025-02-14 04:04:41.953 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-14 04:04:41.953 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-14 04:04:41.954 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2025-02-14 04:04:41.961 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:04:41.961 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-14_04-04-41__6398442c-2bcc-417c-b243-df860d2fd056__wakuorg_nwaku:latest.log
2025-02-14 04:04:41.961 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:04:41.961 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:04:41.962 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:04:41.963 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.63.114
2025-02-14 04:04:41.963 DEBUG [src.node.docker_mananger] Generated ports ['25725', '25726', '25727', '25728', '25729']
2025-02-14 04:04:41.963 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:04:41.963 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:04:41.963 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:04:41.963 DEBUG [src.node.docker_mananger] docker run -i -t -p 25725:25725 -p 25726:25726 -p 25727:25727 -p 25728:25728 -p 25729:25729 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25727 --rest-port=25725 --tcp-port=25726 --discv5-udp-port=25728 --rest-address=0.0.0.0 --nat=extip:172.18.63.114 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=b8451daad9cadb5d8c946a405b26fd01d6db52ce91ba47d6f79901bdde8d2f5e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25729 --metrics-logging=true --relay=true --filter=true --content-topic=/statusim/1/community/cbor
2025-02-14 04:04:42.197 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.63.114 waku 35cdf1b0e91175c59cbe18500c5c9bf968ed7f44d854a0cf3fc5a6cc5c9a57a9
2025-02-14 04:04:42.254 DEBUG [src.node.docker_mananger] Container started with ID 35cdf1b0e911. Setting up logs at ./log/docker/node1_2025-02-14_04-04-41__6398442c-2bcc-417c-b243-df860d2fd056__wakuorg_nwaku:latest.log
2025-02-14 04:04:42.255 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 25725
2025-02-14 04:04:42.255 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:04:42.757 ERROR [src.node.docker_mananger] Max retries reached for container 84bc0aeebd4e. Exiting log stream.
2025-02-14 04:04:43.256 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25725/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:43.259 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:04:43.259 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:04:43.260 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25725/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:43.262 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.63.114/tcp/25726/p2p/16Uiu2HAmJ8BcWXZXksNRHRB1wApXahEnhYYyokLXkSHEcgjS5Gcz","/ip4/172.18.63.114/tcp/25727/ws/p2p/16Uiu2HAmJ8BcWXZXksNRHRB1wApXahEnhYYyokLXkSHEcgjS5Gcz"],"enrUri":"enr:-L24QLY5Xm6F_uDLygT53be8bic4zmXl505-HXusCt69-eWBMFhvIQy5vYtlAikVLTIUlZ9LSS4HgeP_eGPNumJjnMACgmlkgnY0gmlwhKwSP3KKbXVsdGlhZGRyc5YACASsEj9yBmR-AAoErBI_cgZkf90DgnJzhQACAQAAiXNlY3AyNTZrMaEDUUHZ1n4m15o997d6QvNukiHxjs4cPU6vdBHmTdn0lPODdGNwgmR-g3VkcIJkgIV3YWt1MgU"}'
2025-02-14 04:04:43.262 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:04:43.269 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:04:43.269 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-14_04-04-41__6398442c-2bcc-417c-b243-df860d2fd056__wakuorg_nwaku:latest.log
2025-02-14 04:04:43.269 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:04:43.269 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:04:43.271 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:04:43.271 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.110.142
2025-02-14 04:04:43.271 DEBUG [src.node.docker_mananger] Generated ports ['23707', '23708', '23709', '23710', '23711']
2025-02-14 04:04:43.271 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:04:43.271 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:04:43.271 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:04:43.271 DEBUG [src.node.docker_mananger] docker run -i -t -p 23707:23707 -p 23708:23708 -p 23709:23709 -p 23710:23710 -p 23711:23711 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23709 --rest-port=23707 --tcp-port=23708 --discv5-udp-port=23710 --rest-address=0.0.0.0 --nat=extip:172.18.110.142 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=ebf4f5f824cf10006fabacdc53af1263e94ccd04ddcb6a43afedd35f62edcaef --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23711 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QLY5Xm6F_uDLygT53be8bic4zmXl505-HXusCt69-eWBMFhvIQy5vYtlAikVLTIUlZ9LSS4HgeP_eGPNumJjnMACgmlkgnY0gmlwhKwSP3KKbXVsdGlhZGRyc5YACASsEj9yBmR-AAoErBI_cgZkf90DgnJzhQACAQAAiXNlY3AyNTZrMaEDUUHZ1n4m15o997d6QvNukiHxjs4cPU6vdBHmTdn0lPODdGNwgmR-g3VkcIJkgIV3YWt1MgU --content-topic=/statusim/1/community/cbor
2025-02-14 04:04:43.506 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.110.142 waku e487958ba2e678382aefb1dab9ffe226acbf987aa0bcd811d7b7ef437b93367c
2025-02-14 04:04:43.561 DEBUG [src.node.docker_mananger] Container started with ID e487958ba2e6. Setting up logs at ./log/docker/node2_2025-02-14_04-04-41__6398442c-2bcc-417c-b243-df860d2fd056__wakuorg_nwaku:latest.log
2025-02-14 04:04:43.561 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 23707
2025-02-14 04:04:43.562 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:04:44.563 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23707/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:44.570 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:04:44.570 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:04:44.570 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23707/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:44.573 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.110.142/tcp/23708/p2p/16Uiu2HAmQCuTEggMJcLQ6mh6sPQjRK6s3yjmRobqBuN2tfbqeU6U","/ip4/172.18.110.142/tcp/23709/ws/p2p/16Uiu2HAmQCuTEggMJcLQ6mh6sPQjRK6s3yjmRobqBuN2tfbqeU6U"],"enrUri":"enr:-L24QGBSaH7Rn4njDJsr1CeExH_pcKbWUeL0cDvF_xxi9c7lBkxHz9bUfOsAhq0jtoxSaE9nrirkdRjg9t9snQrgVFkCgmlkgnY0gmlwhKwSbo6KbXVsdGlhZGRyc5YACASsEm6OBlycAAoErBJujgZcnd0DgnJzhQACAQAAiXNlY3AyNTZrMaEDq52awD4r2Yf5vITxMPC7Sivl5fcD6pRMR_jEEGa4BhGDdGNwglycg3VkcIJcnoV3YWt1MgE"}'
2025-02-14 04:04:44.573 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:04:44.573 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23707/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.63.114/tcp/25726/p2p/16Uiu2HAmJ8BcWXZXksNRHRB1wApXahEnhYYyokLXkSHEcgjS5Gcz"]'
2025-02-14 04:04:44.575 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:04:44.576 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25725/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/statusim/1/community/cbor"]'
2025-02-14 04:04:44.578 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:04:44.579 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23707/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/statusim/1/community/cbor"]'
2025-02-14 04:04:44.581 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:04:44.581 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25725/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:04:44.586 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:04:44.587 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-14 04:04:44.687 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-14 04:04:44.688 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25725/relay/v1/auto/messages/%2Fstatusim%2F1%2Fcommunity%2Fcbor" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:44.691 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/statusim/1/community/cbor","version":0,"timestamp":1739505884581754624,"ephemeral":false}]'
2025-02-14 04:04:44.692 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-14 04:04:44.693 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23707/relay/v1/auto/messages/%2Fstatusim%2F1%2Fcommunity%2Fcbor" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:44.695 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/statusim/1/community/cbor","version":0,"timestamp":1739505884581754624,"ephemeral":false}]'
2025-02-14 04:04:44.698 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-14 04:04:44.699 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-14 04:04:44.699 DEBUG [src.node.waku_node] Stopping container with id 35cdf1b0e911
2025-02-14 04:04:45.751 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:04:45.751 DEBUG [src.node.waku_node] Stopping container with id e487958ba2e6
2025-02-14 04:04:46.565 ERROR [src.node.docker_mananger] Max retries reached for container 35cdf1b0e911. Exiting log stream.
2025-02-14 04:04:47.235 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:04:47.238 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-14 04:04:47.243 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-14 04:04:47.248 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
