2025-02-14 04:07:05.012 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-14 04:07:05.013 DEBUG [tests.conftest] Running test: test_main_node_only_lightpush__peer_only_lightpush with id: 2025-02-14_04-07-05__89531358-d04a-45d7-8726-8111065d2b2b
2025-02-14 04:07:05.013 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-14 04:07:05.013 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-14 04:07:05.021 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:07:05.022 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-14_04-07-05__89531358-d04a-45d7-8726-8111065d2b2b__wakuorg_nwaku:latest.log
2025-02-14 04:07:05.022 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:07:05.022 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:07:05.024 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:07:05.024 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.100.73
2025-02-14 04:07:05.024 DEBUG [src.node.docker_mananger] Generated ports ['17222', '17223', '17224', '17225', '17226']
2025-02-14 04:07:05.024 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:07:05.024 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:07:05.024 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:07:05.024 DEBUG [src.node.docker_mananger] docker run -i -t -p 17222:17222 -p 17223:17223 -p 17224:17224 -p 17225:17225 -p 17226:17226 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17224 --rest-port=17222 --tcp-port=17223 --discv5-udp-port=17225 --rest-address=0.0.0.0 --nat=extip:172.18.100.73 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eebeffec6aeaa6e54b6eed74a07fc0648c93df66fe2d0df399c6ac789e33fefd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17226 --metrics-logging=true --lightpush=true --relay=false
2025-02-14 04:07:05.262 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.100.73 waku c9873ad93a1f10c5720d90537b90c0fbdd27c58068080c50ed145f0c1c6ae225
2025-02-14 04:07:05.313 DEBUG [src.node.docker_mananger] Container started with ID c9873ad93a1f. Setting up logs at ./log/docker/receiving_node1_2025-02-14_04-07-05__89531358-d04a-45d7-8726-8111065d2b2b__wakuorg_nwaku:latest.log
2025-02-14 04:07:05.314 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 17222
2025-02-14 04:07:05.314 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:07:05.813 ERROR [src.node.docker_mananger] Max retries reached for container c5784720041a. Exiting log stream.
2025-02-14 04:07:06.314 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17222/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:07:06.317 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:07:06.317 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:07:06.318 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17222/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:07:06.320 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.100.73/tcp/17223/p2p/16Uiu2HAm1r7C5MVwdKPGd5ZLfsd9Edt2uoBxHsbxDDe71jsvWTqK","/ip4/172.18.100.73/tcp/17224/ws/p2p/16Uiu2HAm1r7C5MVwdKPGd5ZLfsd9Edt2uoBxHsbxDDe71jsvWTqK"],"enrUri":"enr:-L24QFsjiTtc-FsdH7GzW6vBI77hVfOEt6J10XY0ZVhWMZnwTIK6cOr_RPoZRfzFv4nM8eh9NLZMqmtdxdqn61fHAVYCgmlkgnY0gmlwhKwSZEmKbXVsdGlhZGRyc5YACASsEmRJBkNHAAoErBJkSQZDSN0DgnJzhQADAQAAiXNlY3AyNTZrMaECX2iRaQ4HLkJoSdnQmdK2Q3xrf6ZUKYhpx8fcVD7EczKDdGNwgkNHg3VkcIJDSYV3YWt1Mgg"}'
2025-02-14 04:07:06.320 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:07:06.327 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:07:06.327 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-14_04-07-05__89531358-d04a-45d7-8726-8111065d2b2b__wakuorg_nwaku:latest.log
2025-02-14 04:07:06.327 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:07:06.327 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:07:06.329 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:07:06.329 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.208.188
2025-02-14 04:07:06.329 DEBUG [src.node.docker_mananger] Generated ports ['40484', '40485', '40486', '40487', '40488']
2025-02-14 04:07:06.330 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:07:06.330 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:07:06.330 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:07:06.330 DEBUG [src.node.docker_mananger] docker run -i -t -p 40484:40484 -p 40485:40485 -p 40486:40486 -p 40487:40487 -p 40488:40488 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40486 --rest-port=40484 --tcp-port=40485 --discv5-udp-port=40487 --rest-address=0.0.0.0 --nat=extip:172.18.208.188 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b935cf4e0efe7fd6e4e54c97ba12dcbd077e4fbe3eae7a0f2cc76c0499aedbfa --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40488 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QFsjiTtc-FsdH7GzW6vBI77hVfOEt6J10XY0ZVhWMZnwTIK6cOr_RPoZRfzFv4nM8eh9NLZMqmtdxdqn61fHAVYCgmlkgnY0gmlwhKwSZEmKbXVsdGlhZGRyc5YACASsEmRJBkNHAAoErBJkSQZDSN0DgnJzhQADAQAAiXNlY3AyNTZrMaECX2iRaQ4HLkJoSdnQmdK2Q3xrf6ZUKYhpx8fcVD7EczKDdGNwgkNHg3VkcIJDSYV3YWt1Mgg --lightpushnode=/ip4/172.18.100.73/tcp/17223/p2p/16Uiu2HAm1r7C5MVwdKPGd5ZLfsd9Edt2uoBxHsbxDDe71jsvWTqK --lightpush=true --relay=false
2025-02-14 04:07:06.563 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.208.188 waku b05137df3b4c19edc5ced2fab65fe53e403ff46f0ae5c17a51a21b76191e6420
2025-02-14 04:07:06.611 DEBUG [src.node.docker_mananger] Container started with ID b05137df3b4c. Setting up logs at ./log/docker/lightpush_node1_2025-02-14_04-07-05__89531358-d04a-45d7-8726-8111065d2b2b__wakuorg_nwaku:latest.log
2025-02-14 04:07:06.611 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 40484
2025-02-14 04:07:06.611 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:07:07.612 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40484/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:07:07.615 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:07:07.615 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:07:07.615 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40484/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:07:07.617 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.208.188/tcp/40485/p2p/16Uiu2HAm64ATCPDpzFbHM4W8uaG8SqxLA2zgzX6HqUByLN7fyiTT","/ip4/172.18.208.188/tcp/40486/ws/p2p/16Uiu2HAm64ATCPDpzFbHM4W8uaG8SqxLA2zgzX6HqUByLN7fyiTT"],"enrUri":"enr:-L24QI9HgzhU6NPJF-p13Dcy86_XRUZoQWmyG0yGJepePjYVUsctoOwF7If837LzXxrjJZh5XM0dSOzc8jnjxd5G2N4CgmlkgnY0gmlwhKwS0LyKbXVsdGlhZGRyc5YACASsEtC8Bp4lAAoErBLQvAaeJt0DgnJzhQADAQAAiXNlY3AyNTZrMaECne346f-8xTNFk1MKBwuvfeb4mIrhTvtH6I8VxcHNfmKDdGNwgp4lg3VkcIKeJ4V3YWt1Mgg"}'
2025-02-14 04:07:07.618 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:07:07.618 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40484/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.100.73/tcp/17223/p2p/16Uiu2HAm1r7C5MVwdKPGd5ZLfsd9Edt2uoBxHsbxDDe71jsvWTqK"]'
2025-02-14 04:07:07.655 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:07:07.655 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40484/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739506027655790848}}'
2025-02-14 04:07:07.681 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:40484/lightpush/v1/message. Response content: b'Failed to request a message push: no waku relay found'
2025-02-14 04:07:07.683 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-14 04:07:07.684 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-14 04:07:07.684 DEBUG [src.node.waku_node] Stopping container with id c9873ad93a1f
2025-02-14 04:07:08.785 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:07:08.785 DEBUG [src.node.waku_node] Stopping container with id b05137df3b4c
2025-02-14 04:07:09.598 ERROR [src.node.docker_mananger] Max retries reached for container c9873ad93a1f. Exiting log stream.
2025-02-14 04:07:10.293 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:07:10.294 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-14 04:07:10.298 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-14 04:07:10.302 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
