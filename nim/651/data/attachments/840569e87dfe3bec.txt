2025-02-14 04:05:52.364 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-14 04:05:52.364 DEBUG [tests.conftest] Running test: test_store_sort_ascending[false] with id: 2025-02-14_04-05-52__3729f97a-69a3-469d-89b2-1757e2d776eb
2025-02-14 04:05:52.364 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-14 04:05:52.365 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-14 04:05:52.365 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-14 04:05:52.371 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:05:52.371 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-14_04-05-52__3729f97a-69a3-469d-89b2-1757e2d776eb__wakuorg_nwaku:latest.log
2025-02-14 04:05:52.371 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:05:52.372 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:05:52.373 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:05:52.373 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.174.224
2025-02-14 04:05:52.373 DEBUG [src.node.docker_mananger] Generated ports ['7961', '7962', '7963', '7964', '7965']
2025-02-14 04:05:52.373 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:05:52.373 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:05:52.374 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:05:52.374 DEBUG [src.node.docker_mananger] docker run -i -t -p 7961:7961 -p 7962:7962 -p 7963:7963 -p 7964:7964 -p 7965:7965 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7963 --rest-port=7961 --tcp-port=7962 --discv5-udp-port=7964 --rest-address=0.0.0.0 --nat=extip:172.18.174.224 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=81dd096ff83dbdedcb5bde13392aa96b2d48031d4e8ccb6fee7beba54dabcf29 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7965 --metrics-logging=true --store=true --relay=true
2025-02-14 04:05:52.595 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.174.224 waku bdaf76538130a3dab1d2d90c1fa4ffe304acf652480d30b574a58caa8a8cacaf
2025-02-14 04:05:52.642 DEBUG [src.node.docker_mananger] Container started with ID bdaf76538130. Setting up logs at ./log/docker/publishing_node1_2025-02-14_04-05-52__3729f97a-69a3-469d-89b2-1757e2d776eb__wakuorg_nwaku:latest.log
2025-02-14 04:05:52.644 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 7961
2025-02-14 04:05:52.646 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:05:53.158 ERROR [src.node.docker_mananger] Max retries reached for container c8df1b9491e9. Exiting log stream.
2025-02-14 04:05:53.646 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7961/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:05:53.649 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:05:53.649 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:05:53.650 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7961/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:05:53.652 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.174.224/tcp/7962/p2p/16Uiu2HAmSjmRfiH4cK6PstAknp9AKcUW6G2K1LR1365Hq5oVkvVn","/ip4/172.18.174.224/tcp/7963/ws/p2p/16Uiu2HAmSjmRfiH4cK6PstAknp9AKcUW6G2K1LR1365Hq5oVkvVn"],"enrUri":"enr:-L24QMkCFRC7EV-jchV8-GRPuAXIjkAJsSeogWdS_ZWeIJCvIHEA_asAuqyWXVA2HgzUdqPcT-95z_PzXRjZj6vnhmoCgmlkgnY0gmlwhKwSruCKbXVsdGlhZGRyc5YACASsEq7gBh8aAAoErBKu4AYfG90DgnJzhQADAQAAiXNlY3AyNTZrMaED0TzoP81KaZuuY3qxzBy2TeOkRE-KcirPt2kn7JHcITGDdGNwgh8ag3VkcIIfHIV3YWt1MgM"}'
2025-02-14 04:05:53.652 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:05:53.658 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:05:53.659 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-14_04-05-52__3729f97a-69a3-469d-89b2-1757e2d776eb__wakuorg_nwaku:latest.log
2025-02-14 04:05:53.659 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:05:53.659 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:05:53.660 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:05:53.660 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.40.150
2025-02-14 04:05:53.660 DEBUG [src.node.docker_mananger] Generated ports ['27815', '27816', '27817', '27818', '27819']
2025-02-14 04:05:53.661 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:05:53.661 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:05:53.661 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:05:53.661 DEBUG [src.node.docker_mananger] docker run -i -t -p 27815:27815 -p 27816:27816 -p 27817:27817 -p 27818:27818 -p 27819:27819 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27817 --rest-port=27815 --tcp-port=27816 --discv5-udp-port=27818 --rest-address=0.0.0.0 --nat=extip:172.18.40.150 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a5d35dfdc26dccee66252c2dbacffedb80b9396a55709cbceb8d12cd5b91efc9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27819 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QMkCFRC7EV-jchV8-GRPuAXIjkAJsSeogWdS_ZWeIJCvIHEA_asAuqyWXVA2HgzUdqPcT-95z_PzXRjZj6vnhmoCgmlkgnY0gmlwhKwSruCKbXVsdGlhZGRyc5YACASsEq7gBh8aAAoErBKu4AYfG90DgnJzhQADAQAAiXNlY3AyNTZrMaED0TzoP81KaZuuY3qxzBy2TeOkRE-KcirPt2kn7JHcITGDdGNwgh8ag3VkcIIfHIV3YWt1MgM --storenode=/ip4/172.18.174.224/tcp/7962/p2p/16Uiu2HAmSjmRfiH4cK6PstAknp9AKcUW6G2K1LR1365Hq5oVkvVn --store=true --relay=true
2025-02-14 04:05:53.893 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.40.150 waku ab110e94a35a5b43ed4f64084a65fa8b95189f74eb79c87b41e1092effb86cb3
2025-02-14 04:05:53.942 DEBUG [src.node.docker_mananger] Container started with ID ab110e94a35a. Setting up logs at ./log/docker/store_node1_2025-02-14_04-05-52__3729f97a-69a3-469d-89b2-1757e2d776eb__wakuorg_nwaku:latest.log
2025-02-14 04:05:53.942 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 27815
2025-02-14 04:05:53.944 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:05:54.944 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27815/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:05:54.948 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:05:54.948 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:05:54.948 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27815/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:05:54.950 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.40.150/tcp/27816/p2p/16Uiu2HAmBTa8ePxRL6uZLQLG8zHixTSTjBZHipfyXdAYRW96hDpY","/ip4/172.18.40.150/tcp/27817/ws/p2p/16Uiu2HAmBTa8ePxRL6uZLQLG8zHixTSTjBZHipfyXdAYRW96hDpY"],"enrUri":"enr:-L24QOUWkKZ5il9vakgafUowYm86NQA1nH-dZyDnnQHQEUXkE71vtb3OEakSos-0qY7d7g-fmtepBKF6mMzG5l185yUCgmlkgnY0gmlwhKwSKJaKbXVsdGlhZGRyc5YACASsEiiWBmyoAAoErBIolgZsqd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC7jeKcRTHxnjHE1JJoRt3CazDj_ySA1PhRxLbX6j4J0WDdGNwgmyog3VkcIJsqoV3YWt1MgM"}'
2025-02-14 04:05:54.950 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:05:54.951 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27815/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.174.224/tcp/7962/p2p/16Uiu2HAmSjmRfiH4cK6PstAknp9AKcUW6G2K1LR1365Hq5oVkvVn"]'
2025-02-14 04:05:54.953 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:05:54.954 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7961/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-14 04:05:54.956 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:05:54.956 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27815/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-14 04:05:54.959 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:05:54.960 DEBUG [src.steps.store] Relaying message
2025-02-14 04:05:54.960 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7961/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:05:54.967 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:05:54.967 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 04:05:55.168 DEBUG [src.steps.store] Relaying message
2025-02-14 04:05:55.168 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7961/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8x", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:05:55.175 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:05:55.175 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 04:05:55.377 DEBUG [src.steps.store] Relaying message
2025-02-14 04:05:55.377 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7961/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8y", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:05:55.382 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:05:55.383 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 04:05:55.584 DEBUG [src.steps.store] Relaying message
2025-02-14 04:05:55.585 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7961/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8z", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:05:55.591 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:05:55.591 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 04:05:55.792 DEBUG [src.steps.store] Relaying message
2025-02-14 04:05:55.792 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7961/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV80", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:05:55.797 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:05:55.797 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 04:05:55.998 DEBUG [src.steps.store] Relaying message
2025-02-14 04:05:55.998 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7961/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV81", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:05:56.004 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:05:56.004 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 04:05:56.206 DEBUG [src.steps.store] Relaying message
2025-02-14 04:05:56.206 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7961/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV82", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:05:56.212 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:05:56.212 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 04:05:56.413 DEBUG [src.steps.store] Relaying message
2025-02-14 04:05:56.413 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7961/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV83", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:05:56.419 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:05:56.420 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 04:05:56.620 DEBUG [src.steps.store] Relaying message
2025-02-14 04:05:56.621 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7961/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV84", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:05:56.627 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:05:56.627 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 04:05:56.828 DEBUG [src.steps.store] Relaying message
2025-02-14 04:05:56.828 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7961/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV85", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:05:56.834 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:05:56.834 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 04:05:57.035 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7961/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=false" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:05:57.038 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xf71fccaeebdad5d23420b9e1bdaebc0f94db023681466077b0db2eeb36750414"},{"messageHash":"0x9c142a47ecf5f58d869a57f82e865da6a93b16ace77024be0d35dcabfb1755aa"},{"messageHash":"0x24158dbc37b535a0ca2fe9378fe2c0a60d0b24bba0beaece9bf73f512ab737ed"},{"messageHash":"0xb2b88a38be8385a0a5f9eec4853aa1c73dc25469d2b9c5dad0d88301e1a4f58a"},{"messageHash":"0xcb2347c6c0424ce5b1d9d483f5e0a5734d4e44fbef1f550cf7370781635fd181"}],"paginationCursor":"0xf71fccaeebdad5d23420b9e1bdaebc0f94db023681466077b0db2eeb36750414"}'
2025-02-14 04:05:57.039 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27815/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=false" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:05:57.041 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xf71fccaeebdad5d23420b9e1bdaebc0f94db023681466077b0db2eeb36750414"},{"messageHash":"0x9c142a47ecf5f58d869a57f82e865da6a93b16ace77024be0d35dcabfb1755aa"},{"messageHash":"0x24158dbc37b535a0ca2fe9378fe2c0a60d0b24bba0beaece9bf73f512ab737ed"},{"messageHash":"0xb2b88a38be8385a0a5f9eec4853aa1c73dc25469d2b9c5dad0d88301e1a4f58a"},{"messageHash":"0xcb2347c6c0424ce5b1d9d483f5e0a5734d4e44fbef1f550cf7370781635fd181"}],"paginationCursor":"0xf71fccaeebdad5d23420b9e1bdaebc0f94db023681466077b0db2eeb36750414"}'
2025-02-14 04:05:57.043 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-14 04:05:57.044 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-14 04:05:57.044 DEBUG [src.node.waku_node] Stopping container with id bdaf76538130
2025-02-14 04:05:58.168 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:05:58.168 DEBUG [src.node.waku_node] Stopping container with id ab110e94a35a
2025-02-14 04:05:59.001 ERROR [src.node.docker_mananger] Max retries reached for container bdaf76538130. Exiting log stream.
2025-02-14 04:05:59.506 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:05:59.507 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-14 04:05:59.520 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-14 04:05:59.528 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
