2025-02-14 04:02:16.871 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-14 04:02:16.871 DEBUG [tests.conftest] Running test: test_store_node_not_connected_directly_to_relaying_node with id: 2025-02-14_04-02-16__b59e6799-be17-4302-a984-8168f7470e81
2025-02-14 04:02:16.872 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-14 04:02:16.872 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-14 04:02:16.872 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-14 04:02:16.880 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:02:16.880 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-14_04-02-16__b59e6799-be17-4302-a984-8168f7470e81__wakuorg_nwaku:latest.log
2025-02-14 04:02:16.885 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:02:16.885 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-14_04-02-16__b59e6799-be17-4302-a984-8168f7470e81__wakuorg_nwaku:latest.log
2025-02-14 04:02:16.891 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:02:16.891 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node3_2025-02-14_04-02-16__b59e6799-be17-4302-a984-8168f7470e81__wakuorg_nwaku:latest.log
2025-02-14 04:02:16.891 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-14 04:02:16.891 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-14 04:02:16.892 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:02:16.892 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:02:16.962 DEBUG [src.node.docker_mananger] Network waku created
2025-02-14 04:02:16.963 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.123.18
2025-02-14 04:02:16.963 DEBUG [src.node.docker_mananger] Generated ports ['47229', '47230', '47231', '47232', '47233']
2025-02-14 04:02:16.963 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:02:16.963 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:02:16.963 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:02:16.963 DEBUG [src.node.docker_mananger] docker run -i -t -p 47229:47229 -p 47230:47230 -p 47231:47231 -p 47232:47232 -p 47233:47233 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=47231 --rest-port=47229 --tcp-port=47230 --discv5-udp-port=47232 --rest-address=0.0.0.0 --nat=extip:172.18.123.18 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=db114eec75942db8ad19bfb99f7a2f5d6d12961ae956cffd9358df3e5faf01ee --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=47233 --metrics-logging=true --relay=true
2025-02-14 04:02:18.958 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.123.18 waku 4b5d76e32ac7d3c6bbb9f7637702304b92ab38a35eb08247c7025889fbc52b8e
2025-02-14 04:02:19.017 DEBUG [src.node.docker_mananger] Container started with ID 4b5d76e32ac7. Setting up logs at ./log/docker/node1_2025-02-14_04-02-16__b59e6799-be17-4302-a984-8168f7470e81__wakuorg_nwaku:latest.log
2025-02-14 04:02:19.017 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 47229
2025-02-14 04:02:19.018 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:02:20.018 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47229/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:02:20.021 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:02:20.021 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:02:20.021 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47229/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:02:20.023 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.123.18/tcp/47230/p2p/16Uiu2HAmUiYL6HaMAowyaegGWGyAQ9jEqVHGRRkcefhthnmVMkdR","/ip4/172.18.123.18/tcp/47231/ws/p2p/16Uiu2HAmUiYL6HaMAowyaegGWGyAQ9jEqVHGRRkcefhthnmVMkdR"],"enrUri":"enr:-L24QJn1bDx45j-WjoaRVnY48gtuuI0s6mbytN8OZUNoSyfxXUIfDpOxykVq8VD5w5MeviizEa6Az3jWuZO9Bs4s-pMCgmlkgnY0gmlwhKwSexKKbXVsdGlhZGRyc5YACASsEnsSBrh-AAoErBJ7Ega4f90DgnJzhQADAQAAiXNlY3AyNTZrMaED7qPkdQiLnXICcahtT99raGL5_Lkz44T7j9lwRUB7neyDdGNwgrh-g3VkcIK4gIV3YWt1MgE"}'
2025-02-14 04:02:20.024 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:02:20.024 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:02:20.024 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:02:20.025 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:02:20.025 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.60.2
2025-02-14 04:02:20.025 DEBUG [src.node.docker_mananger] Generated ports ['53073', '53074', '53075', '53076', '53077']
2025-02-14 04:02:20.026 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:02:20.026 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:02:20.026 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:02:20.026 DEBUG [src.node.docker_mananger] docker run -i -t -p 53073:53073 -p 53074:53074 -p 53075:53075 -p 53076:53076 -p 53077:53077 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=53075 --rest-port=53073 --tcp-port=53074 --discv5-udp-port=53076 --rest-address=0.0.0.0 --nat=extip:172.18.60.2 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0eb4c8af9b510dbebeab5535b451a50f13b1cc32e86aaf4ee10808968362c04f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=53077 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-L24QJn1bDx45j-WjoaRVnY48gtuuI0s6mbytN8OZUNoSyfxXUIfDpOxykVq8VD5w5MeviizEa6Az3jWuZO9Bs4s-pMCgmlkgnY0gmlwhKwSexKKbXVsdGlhZGRyc5YACASsEnsSBrh-AAoErBJ7Ega4f90DgnJzhQADAQAAiXNlY3AyNTZrMaED7qPkdQiLnXICcahtT99raGL5_Lkz44T7j9lwRUB7neyDdGNwgrh-g3VkcIK4gIV3YWt1MgE
2025-02-14 04:02:20.247 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.60.2 waku f2f579bbbf60411817a9ec801b45bc335639c5cf728c40c13212d48d70d2d741
2025-02-14 04:02:20.298 DEBUG [src.node.docker_mananger] Container started with ID f2f579bbbf60. Setting up logs at ./log/docker/node2_2025-02-14_04-02-16__b59e6799-be17-4302-a984-8168f7470e81__wakuorg_nwaku:latest.log
2025-02-14 04:02:20.298 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 53073
2025-02-14 04:02:20.299 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:02:21.299 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53073/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:02:21.307 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:02:21.307 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:02:21.308 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53073/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:02:21.316 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.60.2/tcp/53074/p2p/16Uiu2HAmJ3brjnYdPEwadtiuRJq2Et6a5WghKEzrbXJ3hr1HfFPE","/ip4/172.18.60.2/tcp/53075/ws/p2p/16Uiu2HAmJ3brjnYdPEwadtiuRJq2Et6a5WghKEzrbXJ3hr1HfFPE"],"enrUri":"enr:-L24QIfa3OGqcRSrJ-1ZTQ4a-EtKmrdsEuWRpROhg34wvw0tXEZZdrD1_KDIQHrTVa8OHbvsZLXHyAIL5pWTrqi05vwCgmlkgnY0gmlwhKwSPAKKbXVsdGlhZGRyc5YACASsEjwCBs9SAAoErBI8AgbPU90DgnJzhQADAQAAiXNlY3AyNTZrMaEDUBVcdKmQSzS3PFPbTEF6uX3XCq5Gubb37v-LN-jlejGDdGNwgs9Sg3VkcILPVIV3YWt1MgM"}'
2025-02-14 04:02:21.316 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:02:21.316 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:02:21.318 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:02:21.322 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:02:21.322 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.205.163
2025-02-14 04:02:21.323 DEBUG [src.node.docker_mananger] Generated ports ['45676', '45677', '45678', '45679', '45680']
2025-02-14 04:02:21.323 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:02:21.323 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:02:21.325 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:02:21.326 DEBUG [src.node.docker_mananger] docker run -i -t -p 45676:45676 -p 45677:45677 -p 45678:45678 -p 45679:45679 -p 45680:45680 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45678 --rest-port=45676 --tcp-port=45677 --discv5-udp-port=45679 --rest-address=0.0.0.0 --nat=extip:172.18.205.163 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cccf0175aaa9a72ba069b102da8105a08db62d03fcc6faa0ff92fdf5bbc7abfb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45680 --metrics-logging=true --relay=false --storenode=/ip4/172.18.60.2/tcp/53074/p2p/16Uiu2HAmJ3brjnYdPEwadtiuRJq2Et6a5WghKEzrbXJ3hr1HfFPE --discv5-bootstrap-node=enr:-L24QIfa3OGqcRSrJ-1ZTQ4a-EtKmrdsEuWRpROhg34wvw0tXEZZdrD1_KDIQHrTVa8OHbvsZLXHyAIL5pWTrqi05vwCgmlkgnY0gmlwhKwSPAKKbXVsdGlhZGRyc5YACASsEjwCBs9SAAoErBI8AgbPU90DgnJzhQADAQAAiXNlY3AyNTZrMaEDUBVcdKmQSzS3PFPbTEF6uX3XCq5Gubb37v-LN-jlejGDdGNwgs9Sg3VkcILPVIV3YWt1MgM
2025-02-14 04:02:21.561 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.205.163 waku f648ef4e021fbb2147c0f2144a0ffdc2d9569aee4a950e0aa9566cdc3df2891e
2025-02-14 04:02:21.605 DEBUG [src.node.docker_mananger] Container started with ID f648ef4e021f. Setting up logs at ./log/docker/node3_2025-02-14_04-02-16__b59e6799-be17-4302-a984-8168f7470e81__wakuorg_nwaku:latest.log
2025-02-14 04:02:21.606 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 45676
2025-02-14 04:02:21.606 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:02:22.606 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45676/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:02:22.609 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:02:22.609 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:02:22.609 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45676/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:02:22.611 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.205.163/tcp/45677/p2p/16Uiu2HAm1PjjWQ7EUCUyz7aWUKx1zn1LM3CcJPFTFXLnwck3DKw7","/ip4/172.18.205.163/tcp/45678/ws/p2p/16Uiu2HAm1PjjWQ7EUCUyz7aWUKx1zn1LM3CcJPFTFXLnwck3DKw7"],"enrUri":"enr:-L24QEn2elyDYPIFg_GVWhI4ipaGH-cAucRe8xnmQ1pGg2KbBE8Cx3lPESllebsu4qROpEiCCF8Bb7zWLuax_OVCe-YCgmlkgnY0gmlwhKwSzaOKbXVsdGlhZGRyc5YACASsEs2jBrJtAAoErBLNowaybt0DgnJzhQADAQAAiXNlY3AyNTZrMaECWKc0Sff3Y-s42fIRbjHr3OjLr49xQhvVeK_54O7bY2qDdGNwgrJtg3VkcIKyb4V3YWt1MgA"}'
2025-02-14 04:02:22.611 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:02:22.612 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47229/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-14 04:02:22.616 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:02:22.616 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53073/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-14 04:02:22.622 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:02:22.622 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47229/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:02:22.626 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.60.2/tcp/53074/p2p/16Uiu2HAmJ3brjnYdPEwadtiuRJq2Et6a5WghKEzrbXJ3hr1HfFPE","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
2025-02-14 04:02:22.626 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53073/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:02:22.629 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.123.18/tcp/47230/p2p/16Uiu2HAmUiYL6HaMAowyaegGWGyAQ9jEqVHGRRkcefhthnmVMkdR","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
2025-02-14 04:02:22.629 DEBUG [src.libs.common] Sleeping for 30 seconds
2025-02-14 04:02:52.630 DEBUG [src.steps.store] Relaying message
2025-02-14 04:02:52.630 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47229/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:02:52.636 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:02:52.636 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 04:02:52.837 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-14 04:02:52.837 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45676/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:02:52.881 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"267e988ba7e7456e0154","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xa62b6212f5cd475f00944dc33cca5ac58a5099429babb84bfe3963a2ea20a081"}]}'
2025-02-14 04:02:52.888 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-14 04:02:52.889 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-14 04:02:52.889 DEBUG [src.node.waku_node] Stopping container with id 4b5d76e32ac7
2025-02-14 04:02:53.737 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:02:53.737 DEBUG [src.node.waku_node] Stopping container with id f2f579bbbf60
2025-02-14 04:02:54.548 ERROR [src.node.docker_mananger] Max retries reached for container 4b5d76e32ac7. Exiting log stream.
2025-02-14 04:02:55.166 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:02:55.168 DEBUG [src.node.waku_node] Stopping container with id f648ef4e021f
2025-02-14 04:02:56.019 ERROR [src.node.docker_mananger] Max retries reached for container f2f579bbbf60. Exiting log stream.
2025-02-14 04:02:56.553 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:02:56.554 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-14 04:02:56.564 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-14 04:02:56.589 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-14 04:02:56.592 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
