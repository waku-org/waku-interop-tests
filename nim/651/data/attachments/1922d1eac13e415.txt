2025-02-14 04:04:10.300 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-14 04:04:10.300 DEBUG [tests.conftest] Running test: test_publish_after_node1_restarts with id: 2025-02-14_04-04-10__968d5ac7-7e7f-4a59-a7a3-4124246b1660
2025-02-14 04:04:10.301 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-14 04:04:10.301 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-14 04:04:10.301 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2025-02-14 04:04:10.307 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:04:10.307 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-14_04-04-10__968d5ac7-7e7f-4a59-a7a3-4124246b1660__wakuorg_nwaku:latest.log
2025-02-14 04:04:10.307 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:04:10.307 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:04:10.309 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:04:10.309 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.250.5
2025-02-14 04:04:10.309 DEBUG [src.node.docker_mananger] Generated ports ['3617', '3618', '3619', '3620', '3621']
2025-02-14 04:04:10.309 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:04:10.309 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:04:10.309 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:04:10.310 DEBUG [src.node.docker_mananger] docker run -i -t -p 3617:3617 -p 3618:3618 -p 3619:3619 -p 3620:3620 -p 3621:3621 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=3619 --rest-port=3617 --tcp-port=3618 --discv5-udp-port=3620 --rest-address=0.0.0.0 --nat=extip:172.18.250.5 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=623dc4fbb7783fcdfc20d4cb52fce46b4a4a444b2321b76492e311bfe0f7df53 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=3621 --metrics-logging=true --relay=true
2025-02-14 04:04:10.547 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.250.5 waku 4bf8e6d479720a5fb3ec30e76c546f906b2d702f96363231f986a4b75f5c22d1
2025-02-14 04:04:10.593 DEBUG [src.node.docker_mananger] Container started with ID 4bf8e6d47972. Setting up logs at ./log/docker/node1_2025-02-14_04-04-10__968d5ac7-7e7f-4a59-a7a3-4124246b1660__wakuorg_nwaku:latest.log
2025-02-14 04:04:10.593 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 3617
2025-02-14 04:04:10.594 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:04:11.108 ERROR [src.node.docker_mananger] Max retries reached for container fd26585f6bdb. Exiting log stream.
2025-02-14 04:04:11.595 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3617/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:11.597 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:04:11.598 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:04:11.598 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3617/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:11.600 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.250.5/tcp/3618/p2p/16Uiu2HAmUt1wmfthVpm249dY4ab5S3dEWWLtbDBqpQVcdPsd1ALg","/ip4/172.18.250.5/tcp/3619/ws/p2p/16Uiu2HAmUt1wmfthVpm249dY4ab5S3dEWWLtbDBqpQVcdPsd1ALg"],"enrUri":"enr:-L24QCiYUVumWqiyzVPIdyQDIYant81Jm1V9SJX0vykd8C1KO6-Nf1V0NJwUKj2uR7ZZx4fLFtLbuur55DbFiRelUK4CgmlkgnY0gmlwhKwS-gWKbXVsdGlhZGRyc5YACASsEvoFBg4iAAoErBL6BQYOI90DgnJzhQADAQAAiXNlY3AyNTZrMaED8RFYILIChRbDt-o17FWSzRbu6tTwABllFIDmyo72PLmDdGNwgg4ig3VkcIIOJIV3YWt1MgE"}'
2025-02-14 04:04:11.600 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:04:11.606 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:04:11.606 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-14_04-04-10__968d5ac7-7e7f-4a59-a7a3-4124246b1660__wakuorg_nwaku:latest.log
2025-02-14 04:04:11.606 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:04:11.607 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:04:11.608 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:04:11.608 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.24.17
2025-02-14 04:04:11.608 DEBUG [src.node.docker_mananger] Generated ports ['44051', '44052', '44053', '44054', '44055']
2025-02-14 04:04:11.608 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:04:11.608 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:04:11.608 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:04:11.609 DEBUG [src.node.docker_mananger] docker run -i -t -p 44051:44051 -p 44052:44052 -p 44053:44053 -p 44054:44054 -p 44055:44055 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44053 --rest-port=44051 --tcp-port=44052 --discv5-udp-port=44054 --rest-address=0.0.0.0 --nat=extip:172.18.24.17 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ec307c01aeccff30c1f7e1f77da8be7ac34f3c52c4e783b1ecef460fa92bbbf8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44055 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QCiYUVumWqiyzVPIdyQDIYant81Jm1V9SJX0vykd8C1KO6-Nf1V0NJwUKj2uR7ZZx4fLFtLbuur55DbFiRelUK4CgmlkgnY0gmlwhKwS-gWKbXVsdGlhZGRyc5YACASsEvoFBg4iAAoErBL6BQYOI90DgnJzhQADAQAAiXNlY3AyNTZrMaED8RFYILIChRbDt-o17FWSzRbu6tTwABllFIDmyo72PLmDdGNwgg4ig3VkcIIOJIV3YWt1MgE
2025-02-14 04:04:11.831 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.24.17 waku d2e7d906dacfd990a3b225e5794935ad4973b6248ffac2ea09792a42e8f6d48b
2025-02-14 04:04:11.875 DEBUG [src.node.docker_mananger] Container started with ID d2e7d906dacf. Setting up logs at ./log/docker/node2_2025-02-14_04-04-10__968d5ac7-7e7f-4a59-a7a3-4124246b1660__wakuorg_nwaku:latest.log
2025-02-14 04:04:11.875 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 44051
2025-02-14 04:04:11.877 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:04:12.877 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44051/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:12.882 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:04:12.884 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:04:12.885 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44051/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:12.890 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.24.17/tcp/44052/p2p/16Uiu2HAm67cjfZr62HkVNuSb2Xe8p8xgLzQf9F4tfgKDx97NriyT","/ip4/172.18.24.17/tcp/44053/ws/p2p/16Uiu2HAm67cjfZr62HkVNuSb2Xe8p8xgLzQf9F4tfgKDx97NriyT"],"enrUri":"enr:-L24QB2e-8LQ35P-tOvG8_WUc2FQGRbSj624EcHhW2NQxjT4EzW3Vxt96_SEcHtzuqKnJjmv6VjyX8PLO6NlNIsT8D8CgmlkgnY0gmlwhKwSGBGKbXVsdGlhZGRyc5YACASsEhgRBqwUAAoErBIYEQasFd0DgnJzhQADAQAAiXNlY3AyNTZrMaECntBvIPLcao_6JbL7km_IteWmUidGEOy5Ja_sfb9B7MaDdGNwgqwUg3VkcIKsFoV3YWt1MgE"}'
2025-02-14 04:04:12.890 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:04:12.891 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44051/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.250.5/tcp/3618/p2p/16Uiu2HAmUt1wmfthVpm249dY4ab5S3dEWWLtbDBqpQVcdPsd1ALg"]'
2025-02-14 04:04:12.895 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:04:12.896 DEBUG [src.steps.relay] Running fixture setup: subscribe_main_relay_nodes
2025-02-14 04:04:12.896 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3617/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-14 04:04:12.900 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:04:12.900 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44051/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-14 04:04:12.906 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:04:12.907 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3617/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:04:12.912 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:04:12.912 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-14 04:04:13.013 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-14 04:04:13.013 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3617/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:13.015 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739505852907415040,"ephemeral":false}]'
2025-02-14 04:04:13.017 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-14 04:04:13.017 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44051/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:13.019 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739505852907415040,"ephemeral":false}]'
2025-02-14 04:04:13.020 INFO [src.steps.relay] WARM UP successful!!
2025-02-14 04:04:13.021 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3617/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:04:13.026 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:04:13.026 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-14 04:04:13.127 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-14 04:04:13.127 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3617/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:13.129 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739505853021677824,"ephemeral":false}]'
2025-02-14 04:04:13.131 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-14 04:04:13.131 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44051/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:13.133 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739505853021677824,"ephemeral":false}]'
2025-02-14 04:04:13.134 DEBUG [src.node.waku_node] Restarting container with id 4bf8e6d47972
2025-02-14 04:04:14.320 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3617/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:14.425 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3617/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:14.428 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:04:14.428 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:04:14.428 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3617/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:14.430 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.250.5/tcp/3618/p2p/16Uiu2HAmUt1wmfthVpm249dY4ab5S3dEWWLtbDBqpQVcdPsd1ALg","/ip4/172.18.250.5/tcp/3619/ws/p2p/16Uiu2HAmUt1wmfthVpm249dY4ab5S3dEWWLtbDBqpQVcdPsd1ALg"],"enrUri":"enr:-L24QCiYUVumWqiyzVPIdyQDIYant81Jm1V9SJX0vykd8C1KO6-Nf1V0NJwUKj2uR7ZZx4fLFtLbuur55DbFiRelUK4CgmlkgnY0gmlwhKwS-gWKbXVsdGlhZGRyc5YACASsEvoFBg4iAAoErBL6BQYOI90DgnJzhQADAQAAiXNlY3AyNTZrMaED8RFYILIChRbDt-o17FWSzRbu6tTwABllFIDmyo72PLmDdGNwgg4ig3VkcIIOJIV3YWt1MgE"}'
2025-02-14 04:04:14.431 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:04:14.431 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3617/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-14 04:04:14.449 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:04:14.450 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44051/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-14 04:04:14.452 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:04:14.453 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3617/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:04:14.455 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:04:14.456 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-14 04:04:14.556 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-14 04:04:14.556 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3617/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:14.558 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739505854453143040,"ephemeral":false}]'
2025-02-14 04:04:14.560 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-14 04:04:14.560 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44051/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:14.562 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[]'
2025-02-14 04:04:15.563 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3617/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-14 04:04:15.566 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:04:15.566 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44051/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-14 04:04:15.569 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:04:15.569 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3617/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:04:15.572 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:04:15.572 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-14 04:04:15.672 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-14 04:04:15.672 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3617/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:15.675 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739505855569583104,"ephemeral":false}]'
2025-02-14 04:04:15.676 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-14 04:04:15.676 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44051/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:15.678 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[]'
2025-02-14 04:04:16.679 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3617/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-14 04:04:16.682 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:04:16.682 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44051/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-14 04:04:16.685 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:04:16.685 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3617/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:04:16.688 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:04:16.688 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-14 04:04:16.788 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-14 04:04:16.788 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3617/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:16.791 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739505856685520896,"ephemeral":false}]'
2025-02-14 04:04:16.792 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-14 04:04:16.792 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44051/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:16.794 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[]'
2025-02-14 04:04:17.795 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3617/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-14 04:04:17.798 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:04:17.798 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44051/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-14 04:04:17.800 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:04:17.801 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3617/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:04:17.804 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:04:17.804 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-14 04:04:17.904 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-14 04:04:17.905 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3617/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:17.907 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739505857801445376,"ephemeral":false}]'
2025-02-14 04:04:17.908 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-14 04:04:17.909 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44051/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:17.911 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[]'
2025-02-14 04:04:18.911 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3617/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-14 04:04:18.917 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:04:18.917 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:44051/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-14 04:04:18.919 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:04:18.919 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3617/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:04:18.924 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:04:18.924 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-14 04:04:19.024 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-14 04:04:19.024 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3617/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:19.026 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739505858919852288,"ephemeral":false}]'
2025-02-14 04:04:19.028 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-14 04:04:19.028 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:44051/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:19.030 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739505858919852288,"ephemeral":false}]'
2025-02-14 04:04:19.033 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-14 04:04:19.034 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-14 04:04:19.034 DEBUG [src.node.waku_node] Stopping container with id 4bf8e6d47972
2025-02-14 04:04:19.852 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:04:19.853 DEBUG [src.node.waku_node] Stopping container with id d2e7d906dacf
2025-02-14 04:04:20.665 ERROR [src.node.docker_mananger] Max retries reached for container 4bf8e6d47972. Exiting log stream.
2025-02-14 04:04:20.880 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:04:20.881 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-14 04:04:20.901 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-14 04:04:20.911 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
