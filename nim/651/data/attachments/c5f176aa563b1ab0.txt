2025-02-14 04:05:23.508 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-14 04:05:23.508 DEBUG [tests.conftest] Running test: test_valid_payloads_random_user_message_limit with id: 2025-02-14_04-05-23__657d2b83-68f0-4c81-9b5e-44163f4da335
2025-02-14 04:05:23.509 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-14 04:05:23.509 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-14 04:05:23.521 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:05:23.521 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-14_04-05-23__657d2b83-68f0-4c81-9b5e-44163f4da335__wakuorg_nwaku:latest.log
2025-02-14 04:05:23.522 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:05:23.522 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:05:23.523 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:05:23.523 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.116.16
2025-02-14 04:05:23.524 DEBUG [src.node.docker_mananger] Generated ports ['60770', '60771', '60772', '60773', '60774']
2025-02-14 04:05:23.524 DEBUG [src.node.waku_node] Using volumes ['/home/runner/work/waku-interop-tests/waku-interop-tests/rln_tree_smke_1:/etc/rln_tree', '/home/runner/work/waku-interop-tests/waku-interop-tests/keystore_smke_1:/keystore']
2025-02-14 04:05:23.524 DEBUG [src.node.docker_mananger] docker run -i -t -p 60770:60770 -p 60771:60771 -p 60772:60772 -p 60773:60773 -p 60774:60774 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=60772 --rest-port=60770 --tcp-port=60771 --discv5-udp-port=60773 --rest-address=0.0.0.0 --nat=extip:172.18.116.16 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6d3d4faea997ff18b30de4d3bd8860cdaece9cceefbe6b68f1eb7e6e6bf0b7cd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=60774 --metrics-logging=true --relay=true --rln-relay-membership-index=1 --rln-relay-user-message-limit=2 --rln-relay-epoch-sec=1 --rln-relay=true --rln-relay-cred-path=/keystore/keystore.json --rln-relay-cred-password=password
2025-02-14 04:05:23.538 ERROR [src.node.docker_mananger] Max retries reached for container 4598df308ede. Exiting log stream.
2025-02-14 04:05:23.757 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.116.16 waku ac326a3857d55f1aec9af0e2244be3d9c10feeb8ae3364241fc216d0ed59ce1f
2025-02-14 04:05:23.812 DEBUG [src.node.docker_mananger] Container started with ID ac326a3857d5. Setting up logs at ./log/docker/node1_2025-02-14_04-05-23__657d2b83-68f0-4c81-9b5e-44163f4da335__wakuorg_nwaku:latest.log
2025-02-14 04:05:23.812 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 60770
2025-02-14 04:05:23.812 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:05:24.365 ERROR [src.node.docker_mananger] Max retries reached for container aa1cc46352b0. Exiting log stream.
2025-02-14 04:05:24.813 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60770/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:05:30.181 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Initializing","protocolsHealth":[{"Rln Relay":"Ready"}]}'
2025-02-14 04:05:30.282 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60770/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:05:30.284 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[{"Rln Relay":"Ready"}]}'
2025-02-14 04:05:30.284 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:05:30.284 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60770/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:05:30.286 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.116.16/tcp/60771/p2p/16Uiu2HAmNCCZSGx7yyKaZzhZS6oJ9CmG3ByyGJxq3GULERB31MH8","/ip4/172.18.116.16/tcp/60772/ws/p2p/16Uiu2HAmNCCZSGx7yyKaZzhZS6oJ9CmG3ByyGJxq3GULERB31MH8"],"enrUri":"enr:-L24QBjVTKLAA91sZETqCZK4COYfHkyvYlJV8Y9xlSw6UKboOFxo90cx_QAYtS0s8uvkmchKtITpEbgoJuq0q77AMhQCgmlkgnY0gmlwhKwSdBCKbXVsdGlhZGRyc5YACASsEnQQBu1jAAoErBJ0EAbtZN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDjbf-HwIjsqGyg3TunFoReEcnb9Zs4lqlGxlJITammFeDdGNwgu1jg3VkcILtZYV3YWt1MgE"}'
2025-02-14 04:05:30.286 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:05:30.293 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:05:30.293 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-14_04-05-23__657d2b83-68f0-4c81-9b5e-44163f4da335__wakuorg_nwaku:latest.log
2025-02-14 04:05:30.293 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:05:30.293 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:05:30.295 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:05:30.295 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.60.238
2025-02-14 04:05:30.295 DEBUG [src.node.docker_mananger] Generated ports ['13055', '13056', '13057', '13058', '13059']
2025-02-14 04:05:30.295 DEBUG [src.node.waku_node] Using volumes ['/home/runner/work/waku-interop-tests/waku-interop-tests/rln_tree_awna_2:/etc/rln_tree', '/home/runner/work/waku-interop-tests/waku-interop-tests/keystore_awna_2:/keystore']
2025-02-14 04:05:30.295 DEBUG [src.node.docker_mananger] docker run -i -t -p 13055:13055 -p 13056:13056 -p 13057:13057 -p 13058:13058 -p 13059:13059 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=13057 --rest-port=13055 --tcp-port=13056 --discv5-udp-port=13058 --rest-address=0.0.0.0 --nat=extip:172.18.60.238 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dfce77c3de59e914cf9e5c99427d346fbc2d95ebbfaca2feda01a47a104925bb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=13059 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QBjVTKLAA91sZETqCZK4COYfHkyvYlJV8Y9xlSw6UKboOFxo90cx_QAYtS0s8uvkmchKtITpEbgoJuq0q77AMhQCgmlkgnY0gmlwhKwSdBCKbXVsdGlhZGRyc5YACASsEnQQBu1jAAoErBJ0EAbtZN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDjbf-HwIjsqGyg3TunFoReEcnb9Zs4lqlGxlJITammFeDdGNwgu1jg3VkcILtZYV3YWt1MgE --rln-relay-membership-index=1 --rln-relay-user-message-limit=2 --rln-relay-epoch-sec=1 --rln-relay=true --rln-relay-cred-path=/keystore/keystore.json --rln-relay-cred-password=password
2025-02-14 04:05:30.534 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.60.238 waku 206ae40e126861e26c772f6334fb024830436186f63e641da8df16b97659ff05
2025-02-14 04:05:30.581 DEBUG [src.node.docker_mananger] Container started with ID 206ae40e1268. Setting up logs at ./log/docker/node2_2025-02-14_04-05-23__657d2b83-68f0-4c81-9b5e-44163f4da335__wakuorg_nwaku:latest.log
2025-02-14 04:05:30.583 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 13055
2025-02-14 04:05:30.583 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:05:31.585 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:13055/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:05:37.018 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Initializing","protocolsHealth":[{"Rln Relay":"Ready"}]}'
2025-02-14 04:05:37.118 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:13055/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:05:37.121 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[{"Rln Relay":"Ready"}]}'
2025-02-14 04:05:37.121 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:05:37.121 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:13055/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:05:37.123 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.60.238/tcp/13056/p2p/16Uiu2HAmBqZ4KVbo7eN88Lx9hDKWuEF3Pvbj2Ny6UiopF8WeMp8r","/ip4/172.18.60.238/tcp/13057/ws/p2p/16Uiu2HAmBqZ4KVbo7eN88Lx9hDKWuEF3Pvbj2Ny6UiopF8WeMp8r"],"enrUri":"enr:-L24QCHQZB51yWhL7_8Uhh6Ux7jOVZsiF_-YEJ6AlSOaAFHJU8QZim9Vc1DKvh5M_TFLg25_uuednZt5o_OldKyJ2MECgmlkgnY0gmlwhKwSPO6KbXVsdGlhZGRyc5YACASsEjzuBjMAAAoErBI87gYzAd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC89kaglAwSoBU5PLzxNS8kle5dA0l_6YTsIdsY6TacrODdGNwgjMAg3VkcIIzAoV3YWt1MgE"}'
2025-02-14 04:05:37.123 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:05:37.124 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:13055/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.116.16/tcp/60771/p2p/16Uiu2HAmNCCZSGx7yyKaZzhZS6oJ9CmG3ByyGJxq3GULERB31MH8"]'
2025-02-14 04:05:37.162 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:05:37.164 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:60770/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/1/0"]'
2025-02-14 04:05:37.187 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:05:37.188 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:13055/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/1/0"]'
2025-02-14 04:05:37.194 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:05:37.194 DEBUG [tests.relay.test_rln] Running test with payload A simple string
2025-02-14 04:05:37.194 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:60770/relay/v1/messages/%2Fwaku%2F2%2Frs%2F1%2F0" -H "Content-Type: application/json" -d '{"payload": "SGVsbG8gV29ybGQh", "contentTopic": "/test/1/waku-rln-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:05:37.469 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:05:37.469 DEBUG [tests.relay.test_rln] Running test with payload An integer
2025-02-14 04:05:37.470 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:60770/relay/v1/messages/%2Fwaku%2F2%2Frs%2F1%2F0" -H "Content-Type: application/json" -d '{"payload": "MTIzNDU2Nzg5MA==", "contentTopic": "/test/1/waku-rln-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:05:37.706 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:05:37.709 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-14 04:05:37.710 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-14 04:05:37.710 DEBUG [src.node.waku_node] Stopping container with id ac326a3857d5
2025-02-14 04:05:38.449 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:05:38.449 DEBUG [src.node.waku_node] Stopping container with id 206ae40e1268
2025-02-14 04:05:39.277 ERROR [src.node.docker_mananger] Max retries reached for container ac326a3857d5. Exiting log stream.
2025-02-14 04:05:39.929 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:05:39.930 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-14 04:05:39.942 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-14 04:05:39.949 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
