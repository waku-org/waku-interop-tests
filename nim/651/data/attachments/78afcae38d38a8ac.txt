2025-02-14 04:03:27.996 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-14 04:03:27.997 DEBUG [tests.conftest] Running test: test_light_push_with_missing_content_topic with id: 2025-02-14_04-03-27__d5e8c270-8bd2-41ac-b58e-78e398f7656a
2025-02-14 04:03:27.998 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-14 04:03:27.998 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-14 04:03:28.007 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:03:28.007 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-14_04-03-27__d5e8c270-8bd2-41ac-b58e-78e398f7656a__wakuorg_nwaku:latest.log
2025-02-14 04:03:28.008 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:03:28.008 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:03:28.010 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:03:28.010 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.145.163
2025-02-14 04:03:28.010 DEBUG [src.node.docker_mananger] Generated ports ['36764', '36765', '36766', '36767', '36768']
2025-02-14 04:03:28.010 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:03:28.010 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:03:28.010 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:03:28.011 DEBUG [src.node.docker_mananger] docker run -i -t -p 36764:36764 -p 36765:36765 -p 36766:36766 -p 36767:36767 -p 36768:36768 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36766 --rest-port=36764 --tcp-port=36765 --discv5-udp-port=36767 --rest-address=0.0.0.0 --nat=extip:172.18.145.163 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=aceec878b91d6c76bf81060b1ddce2cbaa1e119e157aea19b48f1690d06cf851 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36768 --metrics-logging=true --lightpush=true --relay=true
2025-02-14 04:03:28.253 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.145.163 waku 77d4fc47c229a06eb5ba406a1e209b307b7d700e446d65dded8ddabf1d883593
2025-02-14 04:03:28.308 DEBUG [src.node.docker_mananger] Container started with ID 77d4fc47c229. Setting up logs at ./log/docker/receiving_node1_2025-02-14_04-03-27__d5e8c270-8bd2-41ac-b58e-78e398f7656a__wakuorg_nwaku:latest.log
2025-02-14 04:03:28.308 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 36764
2025-02-14 04:03:28.308 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:03:28.865 ERROR [src.node.docker_mananger] Max retries reached for container 694e30021acb. Exiting log stream.
2025-02-14 04:03:29.309 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36764/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:03:29.312 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:03:29.312 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:03:29.312 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36764/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:03:29.315 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.145.163/tcp/36765/p2p/16Uiu2HAmHFdV2w6bVwemHVVxpMWnCDvtz5jesJQ9dDde7G2MgP29","/ip4/172.18.145.163/tcp/36766/ws/p2p/16Uiu2HAmHFdV2w6bVwemHVVxpMWnCDvtz5jesJQ9dDde7G2MgP29"],"enrUri":"enr:-L24QB-qnksOgOrGaGps6KWMeyA0BWR6YJucvA0XQOmdU2FVZNuwT2f3-8NtG8JzFrYdW0ESTSTwrUPRpUxK5qLgD8MCgmlkgnY0gmlwhKwSkaOKbXVsdGlhZGRyc5YACASsEpGjBo-dAAoErBKRowaPnt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDRE57ctPv7d38Ie3T6r4JIWLHlyHVGqSsLEASGKDgEhKDdGNwgo-dg3VkcIKPn4V3YWt1Mgk"}'
2025-02-14 04:03:29.315 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:03:29.322 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:03:29.322 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-14_04-03-27__d5e8c270-8bd2-41ac-b58e-78e398f7656a__wakuorg_nwaku:latest.log
2025-02-14 04:03:29.322 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:03:29.322 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:03:29.324 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:03:29.324 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.86.193
2025-02-14 04:03:29.324 DEBUG [src.node.docker_mananger] Generated ports ['54524', '54525', '54526', '54527', '54528']
2025-02-14 04:03:29.324 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:03:29.324 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:03:29.324 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:03:29.324 DEBUG [src.node.docker_mananger] docker run -i -t -p 54524:54524 -p 54525:54525 -p 54526:54526 -p 54527:54527 -p 54528:54528 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=54526 --rest-port=54524 --tcp-port=54525 --discv5-udp-port=54527 --rest-address=0.0.0.0 --nat=extip:172.18.86.193 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4f64e3af0fab850ab0afe3ab8dc0cff8e4daf83a9c0fa43abb38c1baaaff33fc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=54528 --metrics-logging=true --lightpush=false --relay=true
2025-02-14 04:03:29.559 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.86.193 waku ab9955787ba5c598bc844a069a52ece97ad67fcd605fcdd4375a92ce93989f00
2025-02-14 04:03:29.610 DEBUG [src.node.docker_mananger] Container started with ID ab9955787ba5. Setting up logs at ./log/docker/receiving_node2_2025-02-14_04-03-27__d5e8c270-8bd2-41ac-b58e-78e398f7656a__wakuorg_nwaku:latest.log
2025-02-14 04:03:29.610 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 54524
2025-02-14 04:03:29.611 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:03:30.611 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54524/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:03:30.614 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:03:30.614 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:03:30.614 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54524/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:03:30.616 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.86.193/tcp/54525/p2p/16Uiu2HAkxLNT4mbcc1LnMtr7cRJGKQyQR69svTjNbVseJ3uae7ju","/ip4/172.18.86.193/tcp/54526/ws/p2p/16Uiu2HAkxLNT4mbcc1LnMtr7cRJGKQyQR69svTjNbVseJ3uae7ju"],"enrUri":"enr:-L24QD7BXa_0Db1dHy9BiTzMrEpFo15U8eE71yyLqZwAwdTPDFEZbhN-TSSQjBsS8Lz_xpY1IXxcTassfwxxA9Yk2xkCgmlkgnY0gmlwhKwSVsGKbXVsdGlhZGRyc5YACASsElbBBtT9AAoErBJWwQbU_t0DgnJzhQADAQAAiXNlY3AyNTZrMaECKzdV8vwI47Kt_8hF0DHJ3WJUOoyruLO7EWZkIo13O-iDdGNwgtT9g3VkcILU_4V3YWt1MgE"}'
2025-02-14 04:03:30.617 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:03:30.617 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54524/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.145.163/tcp/36765/p2p/16Uiu2HAmHFdV2w6bVwemHVVxpMWnCDvtz5jesJQ9dDde7G2MgP29"]'
2025-02-14 04:03:30.655 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:03:30.665 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:03:30.665 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-14_04-03-27__d5e8c270-8bd2-41ac-b58e-78e398f7656a__wakuorg_nwaku:latest.log
2025-02-14 04:03:30.665 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:03:30.665 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:03:30.667 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:03:30.667 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.92.188
2025-02-14 04:03:30.668 DEBUG [src.node.docker_mananger] Generated ports ['6969', '6970', '6971', '6972', '6973']
2025-02-14 04:03:30.668 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:03:30.668 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:03:30.668 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:03:30.668 DEBUG [src.node.docker_mananger] docker run -i -t -p 6969:6969 -p 6970:6970 -p 6971:6971 -p 6972:6972 -p 6973:6973 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6971 --rest-port=6969 --tcp-port=6970 --discv5-udp-port=6972 --rest-address=0.0.0.0 --nat=extip:172.18.92.188 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=aecca03f3f8afafd0d158b4edea13bf58d83f7c0b0bc4cfb5eb6f9ef401bf24b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6973 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QB-qnksOgOrGaGps6KWMeyA0BWR6YJucvA0XQOmdU2FVZNuwT2f3-8NtG8JzFrYdW0ESTSTwrUPRpUxK5qLgD8MCgmlkgnY0gmlwhKwSkaOKbXVsdGlhZGRyc5YACASsEpGjBo-dAAoErBKRowaPnt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDRE57ctPv7d38Ie3T6r4JIWLHlyHVGqSsLEASGKDgEhKDdGNwgo-dg3VkcIKPn4V3YWt1Mgk --lightpushnode=/ip4/172.18.145.163/tcp/36765/p2p/16Uiu2HAmHFdV2w6bVwemHVVxpMWnCDvtz5jesJQ9dDde7G2MgP29 --lightpush=true --relay=false
2025-02-14 04:03:30.902 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.92.188 waku 962e506563d2b3b7eb01eedcf4325c645d2896aa696f26a4753441aaa6c87602
2025-02-14 04:03:30.949 DEBUG [src.node.docker_mananger] Container started with ID 962e506563d2. Setting up logs at ./log/docker/lightpush_node1_2025-02-14_04-03-27__d5e8c270-8bd2-41ac-b58e-78e398f7656a__wakuorg_nwaku:latest.log
2025-02-14 04:03:30.949 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 6969
2025-02-14 04:03:30.949 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:03:31.950 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6969/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:03:31.953 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:03:31.953 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:03:31.953 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6969/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:03:31.955 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.92.188/tcp/6970/p2p/16Uiu2HAmSHMVn1V5UDLYEdWPixdHuZ5JGgmiWeVxcYe3H2puPJGn","/ip4/172.18.92.188/tcp/6971/ws/p2p/16Uiu2HAmSHMVn1V5UDLYEdWPixdHuZ5JGgmiWeVxcYe3H2puPJGn"],"enrUri":"enr:-L24QNuIg73E7CU_rdmqBiyNdMKP_XICrXNDmz2o9MvXZURdGOS354Gd6ugG5uyZJqLtlEAXiEu2c2aVOIy96m8f0k8CgmlkgnY0gmlwhKwSXLyKbXVsdGlhZGRyc5YACASsEly8Bhs6AAoErBJcvAYbO90DgnJzhQADAQAAiXNlY3AyNTZrMaEDyni_2HxtPSV6iqiDYa5Fgn-f4cr83vlBv2iSWBjqGEeDdGNwghs6g3VkcIIbPIV3YWt1Mgg"}'
2025-02-14 04:03:31.956 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:03:31.956 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6969/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.145.163/tcp/36765/p2p/16Uiu2HAmHFdV2w6bVwemHVVxpMWnCDvtz5jesJQ9dDde7G2MgP29"]'
2025-02-14 04:03:31.992 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:03:31.993 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6969/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.86.193/tcp/54525/p2p/16Uiu2HAkxLNT4mbcc1LnMtr7cRJGKQyQR69svTjNbVseJ3uae7ju"]'
2025-02-14 04:03:32.025 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:03:32.027 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36764/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-14 04:03:32.032 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:03:32.033 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54524/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-14 04:03:32.040 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:03:32.041 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6969/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "timestamp": 1739505812041705472}}'
2025-02-14 04:03:32.044 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:6969/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
2025-02-14 04:03:32.045 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-14 04:03:32.046 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-14 04:03:32.047 DEBUG [src.node.waku_node] Stopping container with id 77d4fc47c229
2025-02-14 04:03:32.566 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:03:32.567 DEBUG [src.node.waku_node] Stopping container with id ab9955787ba5
2025-02-14 04:03:33.378 ERROR [src.node.docker_mananger] Max retries reached for container 77d4fc47c229. Exiting log stream.
2025-02-14 04:03:34.089 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:03:34.090 DEBUG [src.node.waku_node] Stopping container with id 962e506563d2
2025-02-14 04:03:34.901 ERROR [src.node.docker_mananger] Max retries reached for container ab9955787ba5. Exiting log stream.
2025-02-14 04:03:35.223 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:03:35.224 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-14 04:03:35.231 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-14 04:03:35.239 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-14 04:03:35.244 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
