2025-02-14 04:07:55.643 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-14 04:07:55.644 DEBUG [tests.conftest] Running test: test_store_with_non_hex_characters_in_hash with id: 2025-02-14_04-07-55__56396a53-bf32-4f3b-a637-6b9b0af70802
2025-02-14 04:07:55.645 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-14 04:07:55.645 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-14 04:07:55.646 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-14 04:07:55.654 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:07:55.654 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-14_04-07-55__56396a53-bf32-4f3b-a637-6b9b0af70802__wakuorg_nwaku:latest.log
2025-02-14 04:07:55.654 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:07:55.655 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:07:55.657 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:07:55.658 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.49.17
2025-02-14 04:07:55.658 DEBUG [src.node.docker_mananger] Generated ports ['16364', '16365', '16366', '16367', '16368']
2025-02-14 04:07:55.658 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:07:55.659 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:07:55.659 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:07:55.659 DEBUG [src.node.docker_mananger] docker run -i -t -p 16364:16364 -p 16365:16365 -p 16366:16366 -p 16367:16367 -p 16368:16368 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=16366 --rest-port=16364 --tcp-port=16365 --discv5-udp-port=16367 --rest-address=0.0.0.0 --nat=extip:172.18.49.17 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9feaddd0a90bbf9f1508aef4bded1aece6a8d8fa83c74cfff61609a2eb5b3ab7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=16368 --metrics-logging=true --store=true --relay=true
2025-02-14 04:07:55.875 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.49.17 waku f31efb355506f7624b7943f4cb559ad7e4af5f9e34e483105749deeb94f8aba2
2025-02-14 04:07:55.930 DEBUG [src.node.docker_mananger] Container started with ID f31efb355506. Setting up logs at ./log/docker/publishing_node1_2025-02-14_04-07-55__56396a53-bf32-4f3b-a637-6b9b0af70802__wakuorg_nwaku:latest.log
2025-02-14 04:07:55.931 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 16364
2025-02-14 04:07:55.931 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:07:56.477 ERROR [src.node.docker_mananger] Max retries reached for container a63e20ccbf1e. Exiting log stream.
2025-02-14 04:07:56.931 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16364/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:07:56.934 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:07:56.934 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:07:56.934 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16364/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:07:56.936 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.49.17/tcp/16365/p2p/16Uiu2HAm2dHpbvCAyoTz7B2iDfT8JGdLbUSEmCkBCv4Jo9GXabjV","/ip4/172.18.49.17/tcp/16366/ws/p2p/16Uiu2HAm2dHpbvCAyoTz7B2iDfT8JGdLbUSEmCkBCv4Jo9GXabjV"],"enrUri":"enr:-L24QBYsRIOP9y_1128n6svmfyvoxeT8wDMttdVMHjloGRzbcjMtFkX37bnbmjG7Xkoq-J10O2Yy-fjgreTQ5p7_sxECgmlkgnY0gmlwhKwSMRGKbXVsdGlhZGRyc5YACASsEjERBj_tAAoErBIxEQY_7t0DgnJzhQADAQAAiXNlY3AyNTZrMaECavu5Ohjd7KRU_D4SEB0OeNp_UJpP3_eqiDtbHvskU9CDdGNwgj_tg3VkcII_74V3YWt1MgM"}'
2025-02-14 04:07:56.936 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:07:56.942 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:07:56.943 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-14_04-07-55__56396a53-bf32-4f3b-a637-6b9b0af70802__wakuorg_nwaku:latest.log
2025-02-14 04:07:56.943 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:07:56.943 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:07:56.944 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:07:56.944 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.109.112
2025-02-14 04:07:56.944 DEBUG [src.node.docker_mananger] Generated ports ['36940', '36941', '36942', '36943', '36944']
2025-02-14 04:07:56.945 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:07:56.945 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:07:56.945 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:07:56.945 DEBUG [src.node.docker_mananger] docker run -i -t -p 36940:36940 -p 36941:36941 -p 36942:36942 -p 36943:36943 -p 36944:36944 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36942 --rest-port=36940 --tcp-port=36941 --discv5-udp-port=36943 --rest-address=0.0.0.0 --nat=extip:172.18.109.112 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8345a4be4ea0161c95cf712d5a04db932b0cab8613ad39e333d828fe96f20fa9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36944 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QBYsRIOP9y_1128n6svmfyvoxeT8wDMttdVMHjloGRzbcjMtFkX37bnbmjG7Xkoq-J10O2Yy-fjgreTQ5p7_sxECgmlkgnY0gmlwhKwSMRGKbXVsdGlhZGRyc5YACASsEjERBj_tAAoErBIxEQY_7t0DgnJzhQADAQAAiXNlY3AyNTZrMaECavu5Ohjd7KRU_D4SEB0OeNp_UJpP3_eqiDtbHvskU9CDdGNwgj_tg3VkcII_74V3YWt1MgM --storenode=/ip4/172.18.49.17/tcp/16365/p2p/16Uiu2HAm2dHpbvCAyoTz7B2iDfT8JGdLbUSEmCkBCv4Jo9GXabjV --store=true --relay=true
2025-02-14 04:07:57.180 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.109.112 waku 0df94b2fe3cfc6171da2b8efbe3e7b450c513e1adbead4964c19116df2b7dace
2025-02-14 04:07:57.226 DEBUG [src.node.docker_mananger] Container started with ID 0df94b2fe3cf. Setting up logs at ./log/docker/store_node1_2025-02-14_04-07-55__56396a53-bf32-4f3b-a637-6b9b0af70802__wakuorg_nwaku:latest.log
2025-02-14 04:07:57.228 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 36940
2025-02-14 04:07:57.228 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:07:58.228 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36940/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:07:58.231 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:07:58.231 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:07:58.231 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36940/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:07:58.233 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.109.112/tcp/36941/p2p/16Uiu2HAkyG9HphSp7uoJ6C4Kdr2cZNTps2mg2V2d3nDHBxqRaXAB","/ip4/172.18.109.112/tcp/36942/ws/p2p/16Uiu2HAkyG9HphSp7uoJ6C4Kdr2cZNTps2mg2V2d3nDHBxqRaXAB"],"enrUri":"enr:-L24QHMq4sauETgdeBmyKcNFpKsOmXRU2Gg0DE-Ttmwa3tqPSST-eQHt0jlva9dYCZJAm-97z6LS_4CZcjiR3mONhL4CgmlkgnY0gmlwhKwSbXCKbXVsdGlhZGRyc5YACASsEm1wBpBNAAoErBJtcAaQTt0DgnJzhQADAQAAiXNlY3AyNTZrMaECOP3R8fdQkXnzoHAyeGxmjTkmi2Mt3bINbE9hPkApP7SDdGNwgpBNg3VkcIKQT4V3YWt1MgM"}'
2025-02-14 04:07:58.233 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:07:58.234 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36940/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.49.17/tcp/16365/p2p/16Uiu2HAm2dHpbvCAyoTz7B2iDfT8JGdLbUSEmCkBCv4Jo9GXabjV"]'
2025-02-14 04:07:58.236 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:07:58.237 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16364/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-14 04:07:58.239 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:07:58.239 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36940/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-14 04:07:58.241 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:07:58.242 DEBUG [src.steps.store] Relaying message
2025-02-14 04:07:58.243 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16364/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:07:58.249 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:07:58.250 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 04:07:58.450 DEBUG [src.steps.store] Relaying message
2025-02-14 04:07:58.451 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16364/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8x", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:07:58.456 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:07:58.457 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 04:07:58.657 DEBUG [src.steps.store] Relaying message
2025-02-14 04:07:58.658 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16364/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8y", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:07:58.663 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:07:58.663 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 04:07:58.864 DEBUG [src.steps.store] Relaying message
2025-02-14 04:07:58.864 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16364/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8z", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:07:58.870 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:07:58.870 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 04:07:59.071 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16364/store/v3/messages?hashes=%23%23%23%20INVALID%20HASH%20%23%23%23&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:07:59.074 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:16364/store/v3/messages?hashes=%23%23%23%20INVALID%20HASH%20%23%23%23&pageSize=50&ascending=true. Response content: b'Exception converting hex string to bytes: # is not a hexadecimal character'
2025-02-14 04:07:59.074 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36940/store/v3/messages?hashes=%23%23%23%20INVALID%20HASH%20%23%23%23&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:07:59.076 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:36940/store/v3/messages?hashes=%23%23%23%20INVALID%20HASH%20%23%23%23&pageSize=50&ascending=true. Response content: b'Exception converting hex string to bytes: # is not a hexadecimal character'
2025-02-14 04:07:59.078 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-14 04:07:59.079 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-14 04:07:59.079 DEBUG [src.node.waku_node] Stopping container with id f31efb355506
2025-02-14 04:07:59.756 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:07:59.756 DEBUG [src.node.waku_node] Stopping container with id 0df94b2fe3cf
2025-02-14 04:08:00.567 ERROR [src.node.docker_mananger] Max retries reached for container f31efb355506. Exiting log stream.
2025-02-14 04:08:01.099 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:08:01.100 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-14 04:08:01.107 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-14 04:08:01.112 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
