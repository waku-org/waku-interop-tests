2025-02-14 04:04:12.444 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-14 04:04:12.445 DEBUG [tests.conftest] Running test: test_light_push_while_peer_is_paused with id: 2025-02-14_04-04-12__ab33e6bf-6a82-46cc-b4c1-d5a49dd5ea01
2025-02-14 04:04:12.445 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-14 04:04:12.446 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-14 04:04:12.454 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:04:12.454 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-14_04-04-12__ab33e6bf-6a82-46cc-b4c1-d5a49dd5ea01__wakuorg_nwaku:latest.log
2025-02-14 04:04:12.455 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:04:12.455 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:04:12.457 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:04:12.457 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.109.210
2025-02-14 04:04:12.457 DEBUG [src.node.docker_mananger] Generated ports ['60213', '60214', '60215', '60216', '60217']
2025-02-14 04:04:12.458 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:04:12.458 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:04:12.458 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:04:12.458 DEBUG [src.node.docker_mananger] docker run -i -t -p 60213:60213 -p 60214:60214 -p 60215:60215 -p 60216:60216 -p 60217:60217 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=60215 --rest-port=60213 --tcp-port=60214 --discv5-udp-port=60216 --rest-address=0.0.0.0 --nat=extip:172.18.109.210 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fa8629ac93cbf6cafbbf8f9a5198bda4a23c4ae1cbdf5b76c8efd2bfceab0dab --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=60217 --metrics-logging=true --lightpush=true --relay=true
2025-02-14 04:04:12.685 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.109.210 waku b59a41685e9446dc600868613a2fc0c75da3c254be0cb8a6b2d0948ac7e3cf89
2025-02-14 04:04:12.735 DEBUG [src.node.docker_mananger] Container started with ID b59a41685e94. Setting up logs at ./log/docker/receiving_node1_2025-02-14_04-04-12__ab33e6bf-6a82-46cc-b4c1-d5a49dd5ea01__wakuorg_nwaku:latest.log
2025-02-14 04:04:12.736 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 60213
2025-02-14 04:04:12.737 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:04:13.266 ERROR [src.node.docker_mananger] Max retries reached for container 297cf51fd777. Exiting log stream.
2025-02-14 04:04:13.737 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60213/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:13.740 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:04:13.740 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:04:13.740 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60213/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:13.742 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.109.210/tcp/60214/p2p/16Uiu2HAkvp1noNcSMB9BZs19ykyktMpu9bKVKQYY6tLyFMomJH13","/ip4/172.18.109.210/tcp/60215/ws/p2p/16Uiu2HAkvp1noNcSMB9BZs19ykyktMpu9bKVKQYY6tLyFMomJH13"],"enrUri":"enr:-L24QK92LLHAtbkHF7KJzp4eW77QSKhG9cX06M6JZXce6DY-AGnxTx3lQzx14SADa5NJCHqJLGhcbsf52kSBoTYTSgcCgmlkgnY0gmlwhKwSbdKKbXVsdGlhZGRyc5YACASsEm3SBus2AAoErBJt0gbrN90DgnJzhQADAQAAiXNlY3AyNTZrMaECFJTdTwvjKut3uW8ymGsp2U4LLc_7WjdWiZTDLHKY6mqDdGNwgus2g3VkcILrOIV3YWt1Mgk"}'
2025-02-14 04:04:13.743 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:04:13.749 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:04:13.749 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-14_04-04-12__ab33e6bf-6a82-46cc-b4c1-d5a49dd5ea01__wakuorg_nwaku:latest.log
2025-02-14 04:04:13.749 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:04:13.749 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:04:13.750 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:04:13.750 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.85.193
2025-02-14 04:04:13.751 DEBUG [src.node.docker_mananger] Generated ports ['21877', '21878', '21879', '21880', '21881']
2025-02-14 04:04:13.751 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:04:13.751 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:04:13.751 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:04:13.751 DEBUG [src.node.docker_mananger] docker run -i -t -p 21877:21877 -p 21878:21878 -p 21879:21879 -p 21880:21880 -p 21881:21881 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=21879 --rest-port=21877 --tcp-port=21878 --discv5-udp-port=21880 --rest-address=0.0.0.0 --nat=extip:172.18.85.193 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d319c0f2772a86d15dcbfd17cec127bbbed01eaa388ada21b09f676307e01df2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=21881 --metrics-logging=true --lightpush=false --relay=true
2025-02-14 04:04:13.970 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.85.193 waku f4d0609e23b13128fcc1759d16edd3e8aeaff5050d23284a11e62ab95b0277e0
2025-02-14 04:04:14.015 DEBUG [src.node.docker_mananger] Container started with ID f4d0609e23b1. Setting up logs at ./log/docker/receiving_node2_2025-02-14_04-04-12__ab33e6bf-6a82-46cc-b4c1-d5a49dd5ea01__wakuorg_nwaku:latest.log
2025-02-14 04:04:14.016 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 21877
2025-02-14 04:04:14.016 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:04:15.016 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:21877/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:15.019 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:04:15.019 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:04:15.019 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:21877/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:15.021 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.85.193/tcp/21878/p2p/16Uiu2HAm4JWkK1vCS6zBeFsE4bxEmVS9XDtqgRLXmN2WNHNRpo2B","/ip4/172.18.85.193/tcp/21879/ws/p2p/16Uiu2HAm4JWkK1vCS6zBeFsE4bxEmVS9XDtqgRLXmN2WNHNRpo2B"],"enrUri":"enr:-L24QB2pTSugoiXuyC8BAVpymJ9GXvIePmK55V8DKioUaq9yIcw6hbuXU3VqtURNcg64nScgXrfVc8QcW2fz5Udqbq8CgmlkgnY0gmlwhKwSVcGKbXVsdGlhZGRyc5YACASsElXBBlV2AAoErBJVwQZVd90DgnJzhQADAQAAiXNlY3AyNTZrMaECg-OtcULe40_NC5nr8DyXVgUBuuAIPSavd3IXard6lTSDdGNwglV2g3VkcIJVeIV3YWt1MgE"}'
2025-02-14 04:04:15.021 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:04:15.022 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:21877/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.109.210/tcp/60214/p2p/16Uiu2HAkvp1noNcSMB9BZs19ykyktMpu9bKVKQYY6tLyFMomJH13"]'
2025-02-14 04:04:15.065 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:04:15.071 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:04:15.071 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-14_04-04-12__ab33e6bf-6a82-46cc-b4c1-d5a49dd5ea01__wakuorg_nwaku:latest.log
2025-02-14 04:04:15.072 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:04:15.072 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:04:15.073 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:04:15.073 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.109.17
2025-02-14 04:04:15.073 DEBUG [src.node.docker_mananger] Generated ports ['18235', '18236', '18237', '18238', '18239']
2025-02-14 04:04:15.074 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:04:15.074 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:04:15.074 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:04:15.074 DEBUG [src.node.docker_mananger] docker run -i -t -p 18235:18235 -p 18236:18236 -p 18237:18237 -p 18238:18238 -p 18239:18239 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18237 --rest-port=18235 --tcp-port=18236 --discv5-udp-port=18238 --rest-address=0.0.0.0 --nat=extip:172.18.109.17 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c65d81ab4db804d46dceb71c1f8ba599ee0376acd07c0250f6cfb4ecde8d5aea --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18239 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QK92LLHAtbkHF7KJzp4eW77QSKhG9cX06M6JZXce6DY-AGnxTx3lQzx14SADa5NJCHqJLGhcbsf52kSBoTYTSgcCgmlkgnY0gmlwhKwSbdKKbXVsdGlhZGRyc5YACASsEm3SBus2AAoErBJt0gbrN90DgnJzhQADAQAAiXNlY3AyNTZrMaECFJTdTwvjKut3uW8ymGsp2U4LLc_7WjdWiZTDLHKY6mqDdGNwgus2g3VkcILrOIV3YWt1Mgk --lightpushnode=/ip4/172.18.109.210/tcp/60214/p2p/16Uiu2HAkvp1noNcSMB9BZs19ykyktMpu9bKVKQYY6tLyFMomJH13 --lightpush=true --relay=false
2025-02-14 04:04:15.298 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.109.17 waku 690ca4c6b20d282e8bf768a8a0de6ea74ce3b0bd3d70356c6da2fa66f21a39da
2025-02-14 04:04:15.346 DEBUG [src.node.docker_mananger] Container started with ID 690ca4c6b20d. Setting up logs at ./log/docker/lightpush_node1_2025-02-14_04-04-12__ab33e6bf-6a82-46cc-b4c1-d5a49dd5ea01__wakuorg_nwaku:latest.log
2025-02-14 04:04:15.346 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 18235
2025-02-14 04:04:15.346 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:04:16.347 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18235/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:16.349 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:04:16.350 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:04:16.350 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18235/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:16.352 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.109.17/tcp/18236/p2p/16Uiu2HAm7uXsCo857bQhbr69YH9Vbwsu6dYuUibrK6ofKy1trnrz","/ip4/172.18.109.17/tcp/18237/ws/p2p/16Uiu2HAm7uXsCo857bQhbr69YH9Vbwsu6dYuUibrK6ofKy1trnrz"],"enrUri":"enr:-L24QLeg00dVCh81sq6Ptl9BwwASh3tJ3QePMPl2rwI2DrbcZIZFcFcVB3YWAIAz5Tm6bxdthNZvUVW2m7HHbFdDGlECgmlkgnY0gmlwhKwSbRGKbXVsdGlhZGRyc5YACASsEm0RBkc8AAoErBJtEQZHPd0DgnJzhQADAQAAiXNlY3AyNTZrMaECuW9U6S-NEXzUUzgx3lPIRoffGSrqk-ryBq2_AQFS93-DdGNwgkc8g3VkcIJHPoV3YWt1Mgg"}'
2025-02-14 04:04:16.352 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:04:16.352 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18235/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.109.210/tcp/60214/p2p/16Uiu2HAkvp1noNcSMB9BZs19ykyktMpu9bKVKQYY6tLyFMomJH13"]'
2025-02-14 04:04:16.387 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:04:16.388 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18235/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.85.193/tcp/21878/p2p/16Uiu2HAm4JWkK1vCS6zBeFsE4bxEmVS9XDtqgRLXmN2WNHNRpo2B"]'
2025-02-14 04:04:16.417 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:04:16.418 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:60213/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-14 04:04:16.429 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:04:16.430 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:21877/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-14 04:04:16.434 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:04:16.435 DEBUG [src.node.waku_node] Stopping container with id b59a41685e94
2025-02-14 04:04:17.221 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:04:17.222 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18235/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739505856435090944}}'
2025-02-14 04:04:18.033 ERROR [src.node.docker_mananger] Max retries reached for container b59a41685e94. Exiting log stream.
2025-02-14 04:04:22.230 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:18235/lightpush/v1/message. Response content: b'Failed to request a message push: dial_failure'
2025-02-14 04:04:22.232 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-14 04:04:22.233 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-14 04:04:22.233 DEBUG [src.node.waku_node] Stopping container with id f4d0609e23b1
2025-02-14 04:04:23.719 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:04:23.719 DEBUG [src.node.waku_node] Stopping container with id 690ca4c6b20d
2025-02-14 04:04:24.530 ERROR [src.node.docker_mananger] Max retries reached for container f4d0609e23b1. Exiting log stream.
2025-02-14 04:04:25.221 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:04:25.221 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-14 04:04:25.229 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-14 04:04:25.236 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-14 04:04:25.242 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
