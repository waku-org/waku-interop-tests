2025-02-14 04:02:12.735 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-14 04:02:12.736 DEBUG [tests.conftest] Running test: test_store_node_not_connected_directly_to_lightpushing_node with id: 2025-02-14_04-02-12__9aa32ce2-368e-4660-a9c4-d6d44d2c15c5
2025-02-14 04:02:12.736 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-14 04:02:12.736 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-14 04:02:12.736 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-14 04:02:12.744 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:02:12.744 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-14_04-02-12__9aa32ce2-368e-4660-a9c4-d6d44d2c15c5__wakuorg_nwaku:latest.log
2025-02-14 04:02:12.750 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:02:12.750 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-14_04-02-12__9aa32ce2-368e-4660-a9c4-d6d44d2c15c5__wakuorg_nwaku:latest.log
2025-02-14 04:02:12.755 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:02:12.755 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node3_2025-02-14_04-02-12__9aa32ce2-368e-4660-a9c4-d6d44d2c15c5__wakuorg_nwaku:latest.log
2025-02-14 04:02:12.755 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-14 04:02:12.756 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-14 04:02:12.757 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:02:12.757 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:02:12.819 DEBUG [src.node.docker_mananger] Network waku created
2025-02-14 04:02:12.820 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.31.159
2025-02-14 04:02:12.820 DEBUG [src.node.docker_mananger] Generated ports ['11026', '11027', '11028', '11029', '11030']
2025-02-14 04:02:12.820 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:02:12.820 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:02:12.820 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:02:12.820 DEBUG [src.node.docker_mananger] docker run -i -t -p 11026:11026 -p 11027:11027 -p 11028:11028 -p 11029:11029 -p 11030:11030 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=11028 --rest-port=11026 --tcp-port=11027 --discv5-udp-port=11029 --rest-address=0.0.0.0 --nat=extip:172.18.31.159 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8bf67eed8e357c46e9f4d1ccb89463cc5cc5acd94ba3abfccee8dcbf4bc13c0f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=11030 --metrics-logging=true --lightpush=true
2025-02-14 04:02:15.254 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.31.159 waku ec5aa39a1fd6d82b4c6e3d2291a4901f43b361895ccb4ba2b0f1dd2a45f84de9
2025-02-14 04:02:15.299 DEBUG [src.node.docker_mananger] Container started with ID ec5aa39a1fd6. Setting up logs at ./log/docker/node1_2025-02-14_04-02-12__9aa32ce2-368e-4660-a9c4-d6d44d2c15c5__wakuorg_nwaku:latest.log
2025-02-14 04:02:15.300 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 11026
2025-02-14 04:02:15.300 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:02:16.300 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11026/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:02:16.303 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:02:16.303 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:02:16.303 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11026/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:02:16.306 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.31.159/tcp/11027/p2p/16Uiu2HAmPRUEYLax9VB7Af3NpJpbsXMyiVQUWNuqatkpvzMsK4c6","/ip4/172.18.31.159/tcp/11028/ws/p2p/16Uiu2HAmPRUEYLax9VB7Af3NpJpbsXMyiVQUWNuqatkpvzMsK4c6"],"enrUri":"enr:-L24QDFWWw_sWyj3q01edFi-11fqdozgIzlfN9a38wMhG1IwDj6WfLGWszWrvic5efuYXYyItNFB9phGvPJ2QmMlgg8CgmlkgnY0gmlwhKwSH5-KbXVsdGlhZGRyc5YACASsEh-fBisTAAoErBIfnwYrFN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDn_nz96VbP-QtL8H3iW3VIqOkpcYFtrEjjLtq7aSDtY-DdGNwgisTg3VkcIIrFYV3YWt1Mgk"}'
2025-02-14 04:02:16.306 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:02:16.306 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:02:16.306 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:02:16.307 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:02:16.308 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.132.180
2025-02-14 04:02:16.308 DEBUG [src.node.docker_mananger] Generated ports ['1629', '1630', '1631', '1632', '1633']
2025-02-14 04:02:16.308 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:02:16.308 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:02:16.308 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:02:16.308 DEBUG [src.node.docker_mananger] docker run -i -t -p 1629:1629 -p 1630:1630 -p 1631:1631 -p 1632:1632 -p 1633:1633 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=1631 --rest-port=1629 --tcp-port=1630 --discv5-udp-port=1632 --rest-address=0.0.0.0 --nat=extip:172.18.132.180 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=09ce9c660c716cdeaefb48e8ebc1a9cade51d349eb7b40b966cfafd4721df5ee --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=1633 --metrics-logging=true --lightpush=true --store=true --relay=true --discv5-bootstrap-node=enr:-L24QDFWWw_sWyj3q01edFi-11fqdozgIzlfN9a38wMhG1IwDj6WfLGWszWrvic5efuYXYyItNFB9phGvPJ2QmMlgg8CgmlkgnY0gmlwhKwSH5-KbXVsdGlhZGRyc5YACASsEh-fBisTAAoErBIfnwYrFN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDn_nz96VbP-QtL8H3iW3VIqOkpcYFtrEjjLtq7aSDtY-DdGNwgisTg3VkcIIrFYV3YWt1Mgk --lightpushnode=/ip4/172.18.31.159/tcp/11027/p2p/16Uiu2HAmPRUEYLax9VB7Af3NpJpbsXMyiVQUWNuqatkpvzMsK4c6
2025-02-14 04:02:16.532 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.132.180 waku c99aff51425abafc8dd390ddd199300a7d2fd3ba12390e666b93b1e2b35e0c7c
2025-02-14 04:02:16.584 DEBUG [src.node.docker_mananger] Container started with ID c99aff51425a. Setting up logs at ./log/docker/node2_2025-02-14_04-02-12__9aa32ce2-368e-4660-a9c4-d6d44d2c15c5__wakuorg_nwaku:latest.log
2025-02-14 04:02:16.585 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 1629
2025-02-14 04:02:16.585 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:02:17.586 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1629/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:02:17.589 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:02:17.589 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:02:17.589 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1629/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:02:17.591 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.132.180/tcp/1630/p2p/16Uiu2HAmHH3Us8KMB1fcoN5Ynbuo6nEHU4bj2ZaX7r7EQnaXUoLZ","/ip4/172.18.132.180/tcp/1631/ws/p2p/16Uiu2HAmHH3Us8KMB1fcoN5Ynbuo6nEHU4bj2ZaX7r7EQnaXUoLZ"],"enrUri":"enr:-L24QGRY2QgN2vGLjMUrPjnTCtILh24tgkwAibGp-hu7GENQWEYcBsKdYRtpFOGssEanp4bwItBOKLfkJicmowP3Y1oCgmlkgnY0gmlwhKwShLSKbXVsdGlhZGRyc5YACASsEoS0BgZeAAoErBKEtAYGX90DgnJzhQADAQAAiXNlY3AyNTZrMaEDRKsyVbVZH06gIaUKBj2w9uEPzuc6cmwYnxufr5otXF6DdGNwggZeg3VkcIIGYIV3YWt1Mgs"}'
2025-02-14 04:02:17.591 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:02:17.591 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:02:17.592 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:02:17.593 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:02:17.593 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.197.156
2025-02-14 04:02:17.593 DEBUG [src.node.docker_mananger] Generated ports ['45234', '45235', '45236', '45237', '45238']
2025-02-14 04:02:17.593 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:02:17.593 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:02:17.594 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:02:17.594 DEBUG [src.node.docker_mananger] docker run -i -t -p 45234:45234 -p 45235:45235 -p 45236:45236 -p 45237:45237 -p 45238:45238 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45236 --rest-port=45234 --tcp-port=45235 --discv5-udp-port=45237 --rest-address=0.0.0.0 --nat=extip:172.18.197.156 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e72500af0ea2b57eccf7b296e879b2f20d12caceddc790469e44ed875faabd7c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45238 --metrics-logging=true --relay=false --storenode=/ip4/172.18.132.180/tcp/1630/p2p/16Uiu2HAmHH3Us8KMB1fcoN5Ynbuo6nEHU4bj2ZaX7r7EQnaXUoLZ --discv5-bootstrap-node=enr:-L24QGRY2QgN2vGLjMUrPjnTCtILh24tgkwAibGp-hu7GENQWEYcBsKdYRtpFOGssEanp4bwItBOKLfkJicmowP3Y1oCgmlkgnY0gmlwhKwShLSKbXVsdGlhZGRyc5YACASsEoS0BgZeAAoErBKEtAYGX90DgnJzhQADAQAAiXNlY3AyNTZrMaEDRKsyVbVZH06gIaUKBj2w9uEPzuc6cmwYnxufr5otXF6DdGNwggZeg3VkcIIGYIV3YWt1Mgs
2025-02-14 04:02:17.833 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.197.156 waku 46b21a93328e41f76f4c5360d48e7a9e8546126759567b0d64882a517e1af71b
2025-02-14 04:02:17.881 DEBUG [src.node.docker_mananger] Container started with ID 46b21a93328e. Setting up logs at ./log/docker/node3_2025-02-14_04-02-12__9aa32ce2-368e-4660-a9c4-d6d44d2c15c5__wakuorg_nwaku:latest.log
2025-02-14 04:02:17.881 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 45234
2025-02-14 04:02:17.882 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:02:18.882 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45234/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:02:18.885 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:02:18.885 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:02:18.885 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45234/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:02:18.887 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.197.156/tcp/45235/p2p/16Uiu2HAkxRCRMNPG9tmiVZNP6aSaS44djTPL2vUmc7EKSGNBFjPo","/ip4/172.18.197.156/tcp/45236/ws/p2p/16Uiu2HAkxRCRMNPG9tmiVZNP6aSaS44djTPL2vUmc7EKSGNBFjPo"],"enrUri":"enr:-L24QF-cpKTjiDBaSQ61AoL3UnK92HnPlGhy-tfB4X2h2H0PXBH9m3T_rgHb3wWy_rIkv-K8JGU0pF8GcMYvvOIM5owCgmlkgnY0gmlwhKwSxZyKbXVsdGlhZGRyc5YACASsEsWcBrCzAAoErBLFnAawtN0DgnJzhQADAQAAiXNlY3AyNTZrMaECLHPmOwLzPUp3hSVgpvY6XGkJ8DLA7rCjTIEx2QXoHEKDdGNwgrCzg3VkcIKwtYV3YWt1MgA"}'
2025-02-14 04:02:18.887 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:02:18.888 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11026/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-14 04:02:18.903 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:02:18.903 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:1629/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-14 04:02:18.921 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:02:18.922 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11026/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:02:18.924 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[]'
2025-02-14 04:02:19.925 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11026/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:02:19.927 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[]'
2025-02-14 04:02:20.927 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11026/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:02:20.930 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.132.180/tcp/1630/p2p/16Uiu2HAmHH3Us8KMB1fcoN5Ynbuo6nEHU4bj2ZaX7r7EQnaXUoLZ","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":false},{"protocol":"/vac/waku/store-query/3.0.0","connected":false},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":false}],"origin":"Discv5"}]'
2025-02-14 04:02:20.930 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1629/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:02:20.933 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.31.159/tcp/11027/p2p/16Uiu2HAmPRUEYLax9VB7Af3NpJpbsXMyiVQUWNuqatkpvzMsK4c6","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":false},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":false}],"origin":"Discv5"}]'
2025-02-14 04:02:20.933 DEBUG [src.libs.common] Sleeping for 30 seconds
2025-02-14 04:02:50.934 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11026/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1739505770934034944}}'
2025-02-14 04:02:50.946 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:02:50.946 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:02:51.947 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-14 04:02:51.947 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45234/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:02:51.995 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"692d765537a918b56066","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x6d1f7190032642075a7ba27be53f4528c795d14cf0d79a609d1cfef83b1cad56"}]}'
2025-02-14 04:02:52.002 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-14 04:02:52.002 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-14 04:02:52.003 DEBUG [src.node.waku_node] Stopping container with id ec5aa39a1fd6
2025-02-14 04:02:52.902 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:02:52.904 DEBUG [src.node.waku_node] Stopping container with id c99aff51425a
2025-02-14 04:02:53.714 ERROR [src.node.docker_mananger] Max retries reached for container ec5aa39a1fd6. Exiting log stream.
2025-02-14 04:02:54.350 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:02:54.350 DEBUG [src.node.waku_node] Stopping container with id 46b21a93328e
2025-02-14 04:02:55.161 ERROR [src.node.docker_mananger] Max retries reached for container c99aff51425a. Exiting log stream.
2025-02-14 04:02:55.807 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:02:55.810 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-14 04:02:55.820 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-14 04:02:55.833 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-14 04:02:55.837 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
