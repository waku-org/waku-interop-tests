2025-02-14 04:04:20.915 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-14 04:04:20.915 DEBUG [tests.conftest] Running test: test_relay_unsubscribe_from_non_existing_pubsub_topic with id: 2025-02-14_04-04-20__0b916d0c-3b6e-42bb-a763-b868790f36d7
2025-02-14 04:04:20.915 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-14 04:04:20.916 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-14 04:04:20.916 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2025-02-14 04:04:20.922 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:04:20.922 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-14_04-04-20__0b916d0c-3b6e-42bb-a763-b868790f36d7__wakuorg_nwaku:latest.log
2025-02-14 04:04:20.922 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:04:20.922 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:04:20.923 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:04:20.923 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.24.94
2025-02-14 04:04:20.924 DEBUG [src.node.docker_mananger] Generated ports ['27935', '27936', '27937', '27938', '27939']
2025-02-14 04:04:20.924 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:04:20.924 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:04:20.924 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:04:20.924 DEBUG [src.node.docker_mananger] docker run -i -t -p 27935:27935 -p 27936:27936 -p 27937:27937 -p 27938:27938 -p 27939:27939 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27937 --rest-port=27935 --tcp-port=27936 --discv5-udp-port=27938 --rest-address=0.0.0.0 --nat=extip:172.18.24.94 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fffaffcb6d5bca2c8bb4ce9faaedd23f82b8ad605fd9bfddc3a3e28e62eee413 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27939 --metrics-logging=true --relay=true
2025-02-14 04:04:21.148 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.24.94 waku 68875701a1ea382eecca3f31529a8ca3bfe7e54569540bc06c1beb039592e805
2025-02-14 04:04:21.199 DEBUG [src.node.docker_mananger] Container started with ID 68875701a1ea. Setting up logs at ./log/docker/node1_2025-02-14_04-04-20__0b916d0c-3b6e-42bb-a763-b868790f36d7__wakuorg_nwaku:latest.log
2025-02-14 04:04:21.199 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 27935
2025-02-14 04:04:21.199 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:04:21.721 ERROR [src.node.docker_mananger] Max retries reached for container d2e7d906dacf. Exiting log stream.
2025-02-14 04:04:22.201 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27935/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:22.203 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:04:22.204 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:04:22.204 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27935/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:22.206 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.24.94/tcp/27936/p2p/16Uiu2HAkvniidpsw7bPeyr8VdbfUGwcPkvhh9kNtC6u1UszNUsQv","/ip4/172.18.24.94/tcp/27937/ws/p2p/16Uiu2HAkvniidpsw7bPeyr8VdbfUGwcPkvhh9kNtC6u1UszNUsQv"],"enrUri":"enr:-L24QLkMmBq7HkrUqeUUqhiVfbGQcq_-DC9GhLRTZoEHhUbocop_9_592Q8Ny7mlduCLdeEGlklUO_Dm6dZMj35TMnICgmlkgnY0gmlwhKwSGF6KbXVsdGlhZGRyc5YACASsEhheBm0gAAoErBIYXgZtId0DgnJzhQADAQAAiXNlY3AyNTZrMaECFD_7A-rRfQZcVZFfmFoT4ZqZ6fNR9oZIk7m1wD-2U5uDdGNwgm0gg3VkcIJtIoV3YWt1MgE"}'
2025-02-14 04:04:22.206 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:04:22.212 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:04:22.213 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-14_04-04-20__0b916d0c-3b6e-42bb-a763-b868790f36d7__wakuorg_nwaku:latest.log
2025-02-14 04:04:22.213 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:04:22.213 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:04:22.214 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:04:22.214 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.148.175
2025-02-14 04:04:22.214 DEBUG [src.node.docker_mananger] Generated ports ['3042', '3043', '3044', '3045', '3046']
2025-02-14 04:04:22.215 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:04:22.215 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:04:22.215 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:04:22.215 DEBUG [src.node.docker_mananger] docker run -i -t -p 3042:3042 -p 3043:3043 -p 3044:3044 -p 3045:3045 -p 3046:3046 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=3044 --rest-port=3042 --tcp-port=3043 --discv5-udp-port=3045 --rest-address=0.0.0.0 --nat=extip:172.18.148.175 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=caf7077b3d4fbc9950f9d4db3ee7bb5dfda2af2b1052a6e969d5d81c9fea8612 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=3046 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QLkMmBq7HkrUqeUUqhiVfbGQcq_-DC9GhLRTZoEHhUbocop_9_592Q8Ny7mlduCLdeEGlklUO_Dm6dZMj35TMnICgmlkgnY0gmlwhKwSGF6KbXVsdGlhZGRyc5YACASsEhheBm0gAAoErBIYXgZtId0DgnJzhQADAQAAiXNlY3AyNTZrMaECFD_7A-rRfQZcVZFfmFoT4ZqZ6fNR9oZIk7m1wD-2U5uDdGNwgm0gg3VkcIJtIoV3YWt1MgE
2025-02-14 04:04:22.447 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.148.175 waku d068b0abfd5d55a1b42dc1c1d696b6cdbf311e4740e44f6e3bf1bcb49f10e59a
2025-02-14 04:04:22.495 DEBUG [src.node.docker_mananger] Container started with ID d068b0abfd5d. Setting up logs at ./log/docker/node2_2025-02-14_04-04-20__0b916d0c-3b6e-42bb-a763-b868790f36d7__wakuorg_nwaku:latest.log
2025-02-14 04:04:22.496 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 3042
2025-02-14 04:04:22.496 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:04:23.496 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3042/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:23.501 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:04:23.502 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:04:23.503 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3042/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:23.510 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.148.175/tcp/3043/p2p/16Uiu2HAmDHEHHv9MxqWesTWjSxZDjtQJpCgE1YTjyWsBQuKkj72V","/ip4/172.18.148.175/tcp/3044/ws/p2p/16Uiu2HAmDHEHHv9MxqWesTWjSxZDjtQJpCgE1YTjyWsBQuKkj72V"],"enrUri":"enr:-L24QDr1ZfF2cwnJVUVF6RYmg0G42R6cCvg4OiKNpt_apYz6O6T6I_8KDL_yUZI0H31dfq5QxWzT_iY3E_gh3AjetI8CgmlkgnY0gmlwhKwSlK-KbXVsdGlhZGRyc5YACASsEpSvBgvjAAoErBKUrwYL5N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDCUipOnYm5dgKTIVE7YRC7qQrYc_t4LiSVZ9uOBzjWS6DdGNwggvjg3VkcIIL5YV3YWt1MgE"}'
2025-02-14 04:04:23.510 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:04:23.511 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3042/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.24.94/tcp/27936/p2p/16Uiu2HAkvniidpsw7bPeyr8VdbfUGwcPkvhh9kNtC6u1UszNUsQv"]'
2025-02-14 04:04:23.515 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:04:23.516 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27935/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-14 04:04:23.520 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:04:23.520 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3042/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-14 04:04:23.525 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:04:23.526 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27935/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:04:23.533 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:04:23.534 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-14 04:04:23.634 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-14 04:04:23.634 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27935/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:23.637 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739505863526577408,"ephemeral":false}]'
2025-02-14 04:04:23.638 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-14 04:04:23.638 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3042/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:23.641 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739505863526577408,"ephemeral":false}]'
2025-02-14 04:04:23.642 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:27935/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1000"]'
2025-02-14 04:04:23.644 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:04:23.645 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:3042/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1000"]'
2025-02-14 04:04:23.647 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:04:23.647 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27935/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:04:23.651 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:04:23.652 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-14 04:04:23.752 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-14 04:04:23.752 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27935/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:23.754 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739505863647692544,"ephemeral":false}]'
2025-02-14 04:04:23.756 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-14 04:04:23.756 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3042/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:23.758 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739505863647692544,"ephemeral":false}]'
2025-02-14 04:04:23.760 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-14 04:04:23.761 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-14 04:04:23.761 DEBUG [src.node.waku_node] Stopping container with id 68875701a1ea
2025-02-14 04:04:24.688 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:04:24.688 DEBUG [src.node.waku_node] Stopping container with id d068b0abfd5d
2025-02-14 04:04:25.501 ERROR [src.node.docker_mananger] Max retries reached for container 68875701a1ea. Exiting log stream.
2025-02-14 04:04:26.180 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:04:26.181 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-14 04:04:26.190 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-14 04:04:26.195 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
