2025-02-14 04:03:35.247 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-14 04:03:35.247 DEBUG [tests.conftest] Running test: test_light_push_on_non_subscribed_pubsub_topic with id: 2025-02-14_04-03-35__1b25de9a-6702-4429-96e4-11e7264e2c8c
2025-02-14 04:03:35.248 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-14 04:03:35.248 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-14 04:03:35.254 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:03:35.254 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-14_04-03-35__1b25de9a-6702-4429-96e4-11e7264e2c8c__wakuorg_nwaku:latest.log
2025-02-14 04:03:35.254 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:03:35.254 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:03:35.256 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:03:35.256 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.97.123
2025-02-14 04:03:35.256 DEBUG [src.node.docker_mananger] Generated ports ['23999', '24000', '24001', '24002', '24003']
2025-02-14 04:03:35.256 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:03:35.256 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:03:35.256 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:03:35.256 DEBUG [src.node.docker_mananger] docker run -i -t -p 23999:23999 -p 24000:24000 -p 24001:24001 -p 24002:24002 -p 24003:24003 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=24001 --rest-port=23999 --tcp-port=24000 --discv5-udp-port=24002 --rest-address=0.0.0.0 --nat=extip:172.18.97.123 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d9c3ef28d5df5fab577b31a9acc7704baf8f51ada3fe2fd41d8011deb51ad8cb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=24003 --metrics-logging=true --lightpush=true --relay=true
2025-02-14 04:03:35.482 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.97.123 waku c62aa224cfe1240774618ce417b46aa06016bc49b79ebe2e6fd6336a90975a33
2025-02-14 04:03:35.528 DEBUG [src.node.docker_mananger] Container started with ID c62aa224cfe1. Setting up logs at ./log/docker/receiving_node1_2025-02-14_04-03-35__1b25de9a-6702-4429-96e4-11e7264e2c8c__wakuorg_nwaku:latest.log
2025-02-14 04:03:35.528 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 23999
2025-02-14 04:03:35.529 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:03:36.042 ERROR [src.node.docker_mananger] Max retries reached for container 962e506563d2. Exiting log stream.
2025-02-14 04:03:36.530 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23999/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:03:36.533 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:03:36.533 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:03:36.533 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23999/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:03:36.536 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.97.123/tcp/24000/p2p/16Uiu2HAm1A3hBRZihrPthQ8cfxztW7vPLhb1GaGDBuaYFTHkGcro","/ip4/172.18.97.123/tcp/24001/ws/p2p/16Uiu2HAm1A3hBRZihrPthQ8cfxztW7vPLhb1GaGDBuaYFTHkGcro"],"enrUri":"enr:-L24QMnXAHWrkOcgXTRaO0QKSuaKUeNEH7edI-4crMvw-BcrWrakzbTgXPjnK02zul5daEtEFU-Cc7NLajwkOj-nqU4CgmlkgnY0gmlwhKwSYXuKbXVsdGlhZGRyc5YACASsEmF7Bl3AAAoErBJhewZdwd0DgnJzhQADAQAAiXNlY3AyNTZrMaECVSVhVlqxB6Fb9zfZogv9-skYq2OUXX0cRT4hkfMjGbyDdGNwgl3Ag3VkcIJdwoV3YWt1Mgk"}'
2025-02-14 04:03:36.536 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:03:36.543 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:03:36.543 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-14_04-03-35__1b25de9a-6702-4429-96e4-11e7264e2c8c__wakuorg_nwaku:latest.log
2025-02-14 04:03:36.543 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:03:36.543 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:03:36.545 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:03:36.545 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.190.71
2025-02-14 04:03:36.545 DEBUG [src.node.docker_mananger] Generated ports ['42129', '42130', '42131', '42132', '42133']
2025-02-14 04:03:36.545 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:03:36.545 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:03:36.545 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:03:36.545 DEBUG [src.node.docker_mananger] docker run -i -t -p 42129:42129 -p 42130:42130 -p 42131:42131 -p 42132:42132 -p 42133:42133 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42131 --rest-port=42129 --tcp-port=42130 --discv5-udp-port=42132 --rest-address=0.0.0.0 --nat=extip:172.18.190.71 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cb15bc36dcbfae9145fced7a6dda1cbbeefe1d8bed3abb225b9de2ff79c23917 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42133 --metrics-logging=true --lightpush=false --relay=true
2025-02-14 04:03:36.770 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.190.71 waku a85a66eff03aa6d4999b76dee90f2b908dc1cb57db672cb4a6fc22a2f9d9ac80
2025-02-14 04:03:36.820 DEBUG [src.node.docker_mananger] Container started with ID a85a66eff03a. Setting up logs at ./log/docker/receiving_node2_2025-02-14_04-03-35__1b25de9a-6702-4429-96e4-11e7264e2c8c__wakuorg_nwaku:latest.log
2025-02-14 04:03:36.821 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 42129
2025-02-14 04:03:36.822 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:03:37.822 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42129/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:03:37.825 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:03:37.825 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:03:37.825 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42129/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:03:37.827 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.190.71/tcp/42130/p2p/16Uiu2HAmPoBgqWqYeKYnT6NEbmo7UzGrbYJ6D53v3KrjAAmZNVyB","/ip4/172.18.190.71/tcp/42131/ws/p2p/16Uiu2HAmPoBgqWqYeKYnT6NEbmo7UzGrbYJ6D53v3KrjAAmZNVyB"],"enrUri":"enr:-L24QIOKNLNpU3-20ujWn-h2l4qsUkEwJMCG3XZtKQjQzFRLD_NwTcIaxQaTFUySck9OE1UjNHSlD612LmvyVLqdUwACgmlkgnY0gmlwhKwSvkeKbXVsdGlhZGRyc5YACASsEr5HBqSSAAoErBK-Rwakk90DgnJzhQADAQAAiXNlY3AyNTZrMaEDpYoFf3szVnQn2MB_zOG7uJcNdQJuf_Q_Qc0cichpXjKDdGNwgqSSg3VkcIKklIV3YWt1MgE"}'
2025-02-14 04:03:37.827 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:03:37.828 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42129/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.97.123/tcp/24000/p2p/16Uiu2HAm1A3hBRZihrPthQ8cfxztW7vPLhb1GaGDBuaYFTHkGcro"]'
2025-02-14 04:03:37.867 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:03:37.876 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:03:37.876 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-14_04-03-35__1b25de9a-6702-4429-96e4-11e7264e2c8c__wakuorg_nwaku:latest.log
2025-02-14 04:03:37.876 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:03:37.876 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:03:37.878 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:03:37.878 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.147.118
2025-02-14 04:03:37.878 DEBUG [src.node.docker_mananger] Generated ports ['26251', '26252', '26253', '26254', '26255']
2025-02-14 04:03:37.878 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:03:37.879 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:03:37.879 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:03:37.879 DEBUG [src.node.docker_mananger] docker run -i -t -p 26251:26251 -p 26252:26252 -p 26253:26253 -p 26254:26254 -p 26255:26255 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26253 --rest-port=26251 --tcp-port=26252 --discv5-udp-port=26254 --rest-address=0.0.0.0 --nat=extip:172.18.147.118 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5413dcfd0de3ae3abb0aae5c3fbd5e32809fe7dd91840feeaf9df3a71a3aed24 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26255 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QMnXAHWrkOcgXTRaO0QKSuaKUeNEH7edI-4crMvw-BcrWrakzbTgXPjnK02zul5daEtEFU-Cc7NLajwkOj-nqU4CgmlkgnY0gmlwhKwSYXuKbXVsdGlhZGRyc5YACASsEmF7Bl3AAAoErBJhewZdwd0DgnJzhQADAQAAiXNlY3AyNTZrMaECVSVhVlqxB6Fb9zfZogv9-skYq2OUXX0cRT4hkfMjGbyDdGNwgl3Ag3VkcIJdwoV3YWt1Mgk --lightpushnode=/ip4/172.18.97.123/tcp/24000/p2p/16Uiu2HAm1A3hBRZihrPthQ8cfxztW7vPLhb1GaGDBuaYFTHkGcro --lightpush=true --relay=false
2025-02-14 04:03:38.119 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.147.118 waku 8b88c84485bbb8430485441abd4123902b08167116057b9d978f0f31832e13cd
2025-02-14 04:03:38.176 DEBUG [src.node.docker_mananger] Container started with ID 8b88c84485bb. Setting up logs at ./log/docker/lightpush_node1_2025-02-14_04-03-35__1b25de9a-6702-4429-96e4-11e7264e2c8c__wakuorg_nwaku:latest.log
2025-02-14 04:03:38.176 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 26251
2025-02-14 04:03:38.177 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:03:39.178 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26251/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:03:39.181 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:03:39.181 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:03:39.181 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26251/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:03:39.183 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.147.118/tcp/26252/p2p/16Uiu2HAmPVE2qJS9nEpZ23UN8PbXPS5gGu8TRUgw2wuxX41wAeG4","/ip4/172.18.147.118/tcp/26253/ws/p2p/16Uiu2HAmPVE2qJS9nEpZ23UN8PbXPS5gGu8TRUgw2wuxX41wAeG4"],"enrUri":"enr:-L24QDW_o4MJWZgAckQjHbHa0kipoHbMeDWdIC1ttZoM5nGKYfkbrCcfPusb4B_-9aTvcQVY3ywIRzaK68LfKaXj7-cCgmlkgnY0gmlwhKwSk3aKbXVsdGlhZGRyc5YACASsEpN2BmaMAAoErBKTdgZmjd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDoPA32G57prUPl8C9iScmGx7pN1yGkL1uwByx3zpqQyWDdGNwgmaMg3VkcIJmjoV3YWt1Mgg"}'
2025-02-14 04:03:39.183 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:03:39.184 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:26251/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.97.123/tcp/24000/p2p/16Uiu2HAm1A3hBRZihrPthQ8cfxztW7vPLhb1GaGDBuaYFTHkGcro"]'
2025-02-14 04:03:39.226 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:03:39.227 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:26251/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.190.71/tcp/42130/p2p/16Uiu2HAmPoBgqWqYeKYnT6NEbmo7UzGrbYJ6D53v3KrjAAmZNVyB"]'
2025-02-14 04:03:39.259 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:03:39.261 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23999/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-14 04:03:39.266 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:03:39.267 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42129/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-14 04:03:39.270 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:03:39.272 DEBUG [src.steps.light_push] Lightpushing message
2025-02-14 04:03:39.273 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:26251/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739505819272758528}}'
2025-02-14 04:03:39.281 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:26251/lightpush/v1/message. Response content: b'Failed to request a message push: not_published_to_any_peer'
2025-02-14 04:03:39.283 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-14 04:03:39.284 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-14 04:03:39.284 DEBUG [src.node.waku_node] Stopping container with id c62aa224cfe1
2025-02-14 04:03:40.033 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:03:40.033 DEBUG [src.node.waku_node] Stopping container with id a85a66eff03a
2025-02-14 04:03:40.847 ERROR [src.node.docker_mananger] Max retries reached for container c62aa224cfe1. Exiting log stream.
2025-02-14 04:03:41.566 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:03:41.567 DEBUG [src.node.waku_node] Stopping container with id 8b88c84485bb
2025-02-14 04:03:42.379 ERROR [src.node.docker_mananger] Max retries reached for container a85a66eff03a. Exiting log stream.
2025-02-14 04:03:43.076 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:03:43.077 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-14 04:03:43.086 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-14 04:03:43.093 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-14 04:03:43.099 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
