2025-02-14 04:02:52.373 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-14 04:02:52.373 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_all_with_invalid_request_id with id: 2025-02-14_04-02-52__c9812367-2b42-4706-b9a6-e5827228f151
2025-02-14 04:02:52.375 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-14 04:02:52.375 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-14 04:02:52.376 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-14 04:02:52.384 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:02:52.384 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-14_04-02-52__c9812367-2b42-4706-b9a6-e5827228f151__wakuorg_nwaku:latest.log
2025-02-14 04:02:52.385 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:02:52.385 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:02:52.386 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:02:52.386 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.21.21
2025-02-14 04:02:52.386 DEBUG [src.node.docker_mananger] Generated ports ['50266', '50267', '50268', '50269', '50270']
2025-02-14 04:02:52.387 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:02:52.387 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:02:52.387 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:02:52.387 DEBUG [src.node.docker_mananger] docker run -i -t -p 50266:50266 -p 50267:50267 -p 50268:50268 -p 50269:50269 -p 50270:50270 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=50268 --rest-port=50266 --tcp-port=50267 --discv5-udp-port=50269 --rest-address=0.0.0.0 --nat=extip:172.18.21.21 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5fba9ab2c634dbe155d30122e0afdcfee8df9e57cd4d68d2ab4f163b8f2acfa7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=50270 --metrics-logging=true --relay=true --filter=true
2025-02-14 04:02:52.623 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.21.21 waku 309d125ad996f4e13e184df24ea9eeae98472d72a420f2ed48723922bef5a88c
2025-02-14 04:02:52.673 DEBUG [src.node.docker_mananger] Container started with ID 309d125ad996. Setting up logs at ./log/docker/node1_2025-02-14_04-02-52__c9812367-2b42-4706-b9a6-e5827228f151__wakuorg_nwaku:latest.log
2025-02-14 04:02:52.674 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 50266
2025-02-14 04:02:52.674 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:02:53.194 ERROR [src.node.docker_mananger] Max retries reached for container 7c31966061f1. Exiting log stream.
2025-02-14 04:02:53.674 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50266/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:02:53.677 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:02:53.678 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:02:53.678 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50266/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:02:53.680 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.21.21/tcp/50267/p2p/16Uiu2HAm9B7VnwVzNrZbd1osr6jvTh5CQ7FR7cRqNFkR5SfpTbKy","/ip4/172.18.21.21/tcp/50268/ws/p2p/16Uiu2HAm9B7VnwVzNrZbd1osr6jvTh5CQ7FR7cRqNFkR5SfpTbKy"],"enrUri":"enr:-L24QFmgTVttRyJkeMLEu9p64AeIhS2zppwNJLmkqHV_ioEqPg5ng8iTV--xBDmb0q5IQjLIR_YJOQgA7q4SL4ea6LMCgmlkgnY0gmlwhKwSFRWKbXVsdGlhZGRyc5YACASsEhUVBsRbAAoErBIVFQbEXN0DgnJzhQADAQAAiXNlY3AyNTZrMaECzEjB25tldhqSfWYrkZ2i8gOGqeRRa6XxCm4_1X7V4xSDdGNwgsRbg3VkcILEXYV3YWt1MgU"}'
2025-02-14 04:02:53.681 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:02:53.681 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-14 04:02:53.687 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:02:53.687 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-14_04-02-52__c9812367-2b42-4706-b9a6-e5827228f151__wakuorg_nwaku:latest.log
2025-02-14 04:02:53.687 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:02:53.688 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:02:53.689 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:02:53.689 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.90.123
2025-02-14 04:02:53.689 DEBUG [src.node.docker_mananger] Generated ports ['58583', '58584', '58585', '58586', '58587']
2025-02-14 04:02:53.689 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:02:53.689 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:02:53.690 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:02:53.690 DEBUG [src.node.docker_mananger] docker run -i -t -p 58583:58583 -p 58584:58584 -p 58585:58585 -p 58586:58586 -p 58587:58587 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=58585 --rest-port=58583 --tcp-port=58584 --discv5-udp-port=58586 --rest-address=0.0.0.0 --nat=extip:172.18.90.123 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bfaf95b9f61d3413f8cff23b997ba8f2c5fccde703bbbea90939a5f5e9f2b62f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=58587 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QFmgTVttRyJkeMLEu9p64AeIhS2zppwNJLmkqHV_ioEqPg5ng8iTV--xBDmb0q5IQjLIR_YJOQgA7q4SL4ea6LMCgmlkgnY0gmlwhKwSFRWKbXVsdGlhZGRyc5YACASsEhUVBsRbAAoErBIVFQbEXN0DgnJzhQADAQAAiXNlY3AyNTZrMaECzEjB25tldhqSfWYrkZ2i8gOGqeRRa6XxCm4_1X7V4xSDdGNwgsRbg3VkcILEXYV3YWt1MgU --filternode=/ip4/172.18.21.21/tcp/50267/p2p/16Uiu2HAm9B7VnwVzNrZbd1osr6jvTh5CQ7FR7cRqNFkR5SfpTbKy
2025-02-14 04:02:53.919 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.90.123 waku 7dd104bd3795cab724fe7d5a8d152c6f65131a0b0d4ca3add4e0c29644e2bb12
2025-02-14 04:02:53.969 DEBUG [src.node.docker_mananger] Container started with ID 7dd104bd3795. Setting up logs at ./log/docker/node2_2025-02-14_04-02-52__c9812367-2b42-4706-b9a6-e5827228f151__wakuorg_nwaku:latest.log
2025-02-14 04:02:53.970 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 58583
2025-02-14 04:02:53.970 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:02:54.971 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58583/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:02:54.974 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:02:54.974 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:02:54.974 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58583/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:02:54.977 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.90.123/tcp/58584/p2p/16Uiu2HAmB8UxVVTFFZMexh1V6XKNNo5eGtPUBXzhGjsa8AentoLq","/ip4/172.18.90.123/tcp/58585/ws/p2p/16Uiu2HAmB8UxVVTFFZMexh1V6XKNNo5eGtPUBXzhGjsa8AentoLq"],"enrUri":"enr:-L24QItfCvD4is3lO_5pstnsLWGe6jwyY7tP0-HAce5tQwh0d7FYs2kUG7uectOW-Qpup5uhO1uV_r3xEaE7nSIEuBgCgmlkgnY0gmlwhKwSWnuKbXVsdGlhZGRyc5YACASsElp7BuTYAAoErBJaewbk2d0DgnJzhQADAQAAiXNlY3AyNTZrMaEC6VOnaZ9dngQwP0ldWmOAN3gpHkHVkhn1dlHKzw302Z6DdGNwguTYg3VkcILk2oV3YWt1MgA"}'
2025-02-14 04:02:54.977 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:02:54.977 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58583/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.21.21/tcp/50267/p2p/16Uiu2HAm9B7VnwVzNrZbd1osr6jvTh5CQ7FR7cRqNFkR5SfpTbKy"]'
2025-02-14 04:02:55.015 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:02:55.015 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-14 04:02:55.016 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50266/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-14 04:02:55.031 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:02:55.032 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58583/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "db7fd33e-2ad1-40e3-bcf9-16f740a8a939", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-14 04:02:55.044 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"db7fd33e-2ad1-40e3-bcf9-16f740a8a939","statusDesc":"OK"}'
2025-02-14 04:02:55.045 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:58583/filter/v2/subscriptions/all" -H "Content-Type: application/json" -d '{"requestId": 1}'
2025-02-14 04:02:55.048 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:58583/filter/v2/subscriptions/all. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
2025-02-14 04:02:55.051 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-14 04:02:55.052 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-14 04:02:55.052 DEBUG [src.node.waku_node] Stopping container with id 309d125ad996
2025-02-14 04:02:56.143 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:02:56.143 DEBUG [src.node.waku_node] Stopping container with id 7dd104bd3795
2025-02-14 04:02:56.956 ERROR [src.node.docker_mananger] Max retries reached for container 309d125ad996. Exiting log stream.
2025-02-14 04:02:57.633 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:02:57.634 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-14 04:02:57.638 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-14 04:02:57.643 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
