2025-02-14 04:05:22.714 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-14 04:05:22.714 DEBUG [tests.conftest] Running test: test_time_filter_invalid_start_time with id: 2025-02-14_04-05-22__a40ef140-f1c7-42de-9afe-9061a7a24133
2025-02-14 04:05:22.714 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-14 04:05:22.714 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-14 04:05:22.715 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-14 04:05:22.721 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:05:22.721 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-14_04-05-22__a40ef140-f1c7-42de-9afe-9061a7a24133__wakuorg_nwaku:latest.log
2025-02-14 04:05:22.721 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:05:22.722 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:05:22.723 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:05:22.723 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.181.212
2025-02-14 04:05:22.723 DEBUG [src.node.docker_mananger] Generated ports ['9647', '9648', '9649', '9650', '9651']
2025-02-14 04:05:22.723 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:05:22.724 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:05:22.724 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:05:22.724 DEBUG [src.node.docker_mananger] docker run -i -t -p 9647:9647 -p 9648:9648 -p 9649:9649 -p 9650:9650 -p 9651:9651 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=9649 --rest-port=9647 --tcp-port=9648 --discv5-udp-port=9650 --rest-address=0.0.0.0 --nat=extip:172.18.181.212 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9e0653d7dcfb4f92eedc30325cbaa2e671b100d1ea3fccad3dfa8ed7099cf9a9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=9651 --metrics-logging=true --store=true --relay=true
2025-02-14 04:05:22.964 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.181.212 waku 8b65a31b06e282119e8bd7755dfc24bf1ed333e99aee79b296557bdb6aae6ade
2025-02-14 04:05:23.009 DEBUG [src.node.docker_mananger] Container started with ID 8b65a31b06e2. Setting up logs at ./log/docker/publishing_node1_2025-02-14_04-05-22__a40ef140-f1c7-42de-9afe-9061a7a24133__wakuorg_nwaku:latest.log
2025-02-14 04:05:23.011 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 9647
2025-02-14 04:05:23.011 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:05:23.520 ERROR [src.node.docker_mananger] Max retries reached for container 80e1eeb4ea12. Exiting log stream.
2025-02-14 04:05:24.011 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9647/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:05:24.014 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:05:24.014 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:05:24.014 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9647/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:05:24.017 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.181.212/tcp/9648/p2p/16Uiu2HAkwfcQ4TJkbgnp4EBgQ4VvC8mkCzXxRRvXKYUAtzWpYGUi","/ip4/172.18.181.212/tcp/9649/ws/p2p/16Uiu2HAkwfcQ4TJkbgnp4EBgQ4VvC8mkCzXxRRvXKYUAtzWpYGUi"],"enrUri":"enr:-L24QOUyd8b79zWk-6YmD6Cw1i_ClnYvX9RYvXJ8K0ax17qJBGu9hrd_CQTG_l6pX3vBfMb_sjHkV-jKjEerezWROMcCgmlkgnY0gmlwhKwStdSKbXVsdGlhZGRyc5YACASsErXUBiWwAAoErBK11AYlsd0DgnJzhQADAQAAiXNlY3AyNTZrMaECIUl0mAdSw2El3gJ9nujHs95CUgTvVpxEPHcMncx_nguDdGNwgiWwg3VkcIIlsoV3YWt1MgM"}'
2025-02-14 04:05:24.017 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:05:24.023 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:05:24.023 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-14_04-05-22__a40ef140-f1c7-42de-9afe-9061a7a24133__wakuorg_nwaku:latest.log
2025-02-14 04:05:24.024 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:05:24.024 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:05:24.025 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:05:24.025 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.212.49
2025-02-14 04:05:24.025 DEBUG [src.node.docker_mananger] Generated ports ['60024', '60025', '60026', '60027', '60028']
2025-02-14 04:05:24.025 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:05:24.025 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:05:24.026 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:05:24.026 DEBUG [src.node.docker_mananger] docker run -i -t -p 60024:60024 -p 60025:60025 -p 60026:60026 -p 60027:60027 -p 60028:60028 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=60026 --rest-port=60024 --tcp-port=60025 --discv5-udp-port=60027 --rest-address=0.0.0.0 --nat=extip:172.18.212.49 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e3a65e0cc982df518abc38966ce8aff58ff09cffa15ea65d1c18cef69feec83d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=60028 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QOUyd8b79zWk-6YmD6Cw1i_ClnYvX9RYvXJ8K0ax17qJBGu9hrd_CQTG_l6pX3vBfMb_sjHkV-jKjEerezWROMcCgmlkgnY0gmlwhKwStdSKbXVsdGlhZGRyc5YACASsErXUBiWwAAoErBK11AYlsd0DgnJzhQADAQAAiXNlY3AyNTZrMaECIUl0mAdSw2El3gJ9nujHs95CUgTvVpxEPHcMncx_nguDdGNwgiWwg3VkcIIlsoV3YWt1MgM --storenode=/ip4/172.18.181.212/tcp/9648/p2p/16Uiu2HAkwfcQ4TJkbgnp4EBgQ4VvC8mkCzXxRRvXKYUAtzWpYGUi --store=true --relay=true
2025-02-14 04:05:24.253 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.212.49 waku be7811b0625f7c8c2dcae86c2ce47de1b35c9c3a4f93fe403ab7448525865239
2025-02-14 04:05:24.303 DEBUG [src.node.docker_mananger] Container started with ID be7811b0625f. Setting up logs at ./log/docker/store_node1_2025-02-14_04-05-22__a40ef140-f1c7-42de-9afe-9061a7a24133__wakuorg_nwaku:latest.log
2025-02-14 04:05:24.303 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 60024
2025-02-14 04:05:24.303 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:05:25.305 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60024/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:05:25.307 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:05:25.308 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:05:25.308 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60024/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:05:25.310 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.212.49/tcp/60025/p2p/16Uiu2HAmTCr3DX4eABEYYBaSj8nYvT8nLTpGVMwontMprPqDbJjh","/ip4/172.18.212.49/tcp/60026/ws/p2p/16Uiu2HAmTCr3DX4eABEYYBaSj8nYvT8nLTpGVMwontMprPqDbJjh"],"enrUri":"enr:-L24QIBDIWHkhFxqwr_DtzAWaS0SxY0aaZoiT2LCAoq1dR6KA1hUWRTU9tcFmDcNknqG37njecQt0vyDvXhQ46ucyrECgmlkgnY0gmlwhKwS1DGKbXVsdGlhZGRyc5YACASsEtQxBup5AAoErBLUMQbqet0DgnJzhQADAQAAiXNlY3AyNTZrMaED2CzODZhBCBfE00lWutIAK6KFedi3CBbz-CCSirfxpCCDdGNwgup5g3VkcILqe4V3YWt1MgM"}'
2025-02-14 04:05:25.310 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:05:25.311 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:60024/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.181.212/tcp/9648/p2p/16Uiu2HAkwfcQ4TJkbgnp4EBgQ4VvC8mkCzXxRRvXKYUAtzWpYGUi"]'
2025-02-14 04:05:25.313 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:05:25.313 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9647/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-14 04:05:25.316 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:05:25.316 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:60024/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-14 04:05:25.318 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:05:25.319 DEBUG [src.steps.store] Relaying message
2025-02-14 04:05:25.319 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9647/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:05:25.325 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:05:25.326 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 04:05:25.527 DEBUG [src.steps.store] Relaying message
2025-02-14 04:05:25.527 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9647/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:05:25.534 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:05:25.534 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 04:05:25.735 DEBUG [src.steps.store] Relaying message
2025-02-14 04:05:25.735 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9647/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:05:25.742 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:05:25.742 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 04:05:25.943 DEBUG [src.steps.store] Relaying message
2025-02-14 04:05:25.943 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9647/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:05:25.950 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:05:25.950 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 04:05:26.151 DEBUG [src.steps.store] Relaying message
2025-02-14 04:05:26.151 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9647/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:05:26.158 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:05:26.158 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 04:05:26.359 DEBUG [src.steps.store] Relaying message
2025-02-14 04:05:26.359 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9647/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-14 04:05:26.364 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:05:26.365 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-14 04:05:26.566 DEBUG [tests.store.test_time_filter] inquering stored messages with start time abc
2025-02-14 04:05:26.566 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9647/store/v3/messages?includeData=True&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=abc&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:05:26.569 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:9647/store/v3/messages?includeData=True&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=abc&pageSize=20&ascending=true. Response content: b'time parsing error: invalid integer: abc'
2025-02-14 04:05:26.570 DEBUG [tests.store.test_time_filter] invalid start_time cause error Error: 400 Client Error: Bad Request for url: http://127.0.0.1:9647/store/v3/messages?includeData=True&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=abc&pageSize=20&ascending=true with response: b'time parsing error: invalid integer: abc'
2025-02-14 04:05:26.572 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-14 04:05:26.573 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-14 04:05:26.573 DEBUG [src.node.waku_node] Stopping container with id 8b65a31b06e2
2025-02-14 04:05:27.546 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:05:27.547 DEBUG [src.node.waku_node] Stopping container with id be7811b0625f
2025-02-14 04:05:28.376 ERROR [src.node.docker_mananger] Max retries reached for container 8b65a31b06e2. Exiting log stream.
2025-02-14 04:05:29.009 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:05:29.011 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-14 04:05:29.028 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-14 04:05:29.038 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
