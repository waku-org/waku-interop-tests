2025-02-14 04:02:48.004 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-14 04:02:48.005 DEBUG [tests.conftest] Running test: test_light_push_with_with_large_meta with id: 2025-02-14_04-02-48__3254c37d-15ca-49d2-b407-97f50b8a9426
2025-02-14 04:02:48.005 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-14 04:02:48.005 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-14 04:02:48.012 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:02:48.013 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-14_04-02-48__3254c37d-15ca-49d2-b407-97f50b8a9426__wakuorg_nwaku:latest.log
2025-02-14 04:02:48.013 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:02:48.013 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:02:48.014 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:02:48.015 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.244.229
2025-02-14 04:02:48.015 DEBUG [src.node.docker_mananger] Generated ports ['57066', '57067', '57068', '57069', '57070']
2025-02-14 04:02:48.015 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:02:48.015 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:02:48.015 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:02:48.015 DEBUG [src.node.docker_mananger] docker run -i -t -p 57066:57066 -p 57067:57067 -p 57068:57068 -p 57069:57069 -p 57070:57070 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57068 --rest-port=57066 --tcp-port=57067 --discv5-udp-port=57069 --rest-address=0.0.0.0 --nat=extip:172.18.244.229 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2cd9dbff7edd711f07ca808e0c4dacd401a2dba0fd0710cfb1deee6a09afec0b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57070 --metrics-logging=true --lightpush=true --relay=true
2025-02-14 04:02:48.250 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.244.229 waku a6409c0058b1b2b8cc8a4c3b60ea31b0297d66c4521796c33d1b11d36d826096
2025-02-14 04:02:48.300 DEBUG [src.node.docker_mananger] Container started with ID a6409c0058b1. Setting up logs at ./log/docker/receiving_node1_2025-02-14_04-02-48__3254c37d-15ca-49d2-b407-97f50b8a9426__wakuorg_nwaku:latest.log
2025-02-14 04:02:48.301 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 57066
2025-02-14 04:02:48.301 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:02:48.770 ERROR [src.node.docker_mananger] Max retries reached for container 43eae28e22ac. Exiting log stream.
2025-02-14 04:02:49.302 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57066/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:02:49.305 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:02:49.305 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:02:49.305 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57066/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:02:49.307 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.244.229/tcp/57067/p2p/16Uiu2HAky25Mi5fSa3xnKuShQKKw7rooqZD3qzkMrGEkHPYjS3bQ","/ip4/172.18.244.229/tcp/57068/ws/p2p/16Uiu2HAky25Mi5fSa3xnKuShQKKw7rooqZD3qzkMrGEkHPYjS3bQ"],"enrUri":"enr:-L24QEOyT5UjDX4FBQ-D187_fZZbECKyt31zHzOHiAmWMxP1ErGLqYPrIeCmt6c07DJdU_lGc7GDW8xGLck3Iu07ggsCgmlkgnY0gmlwhKwS9OWKbXVsdGlhZGRyc5YACASsEvTlBt7rAAoErBL05Qbe7N0DgnJzhQADAQAAiXNlY3AyNTZrMaECNWM94Nyt-yM6jgoqKMQq37sNt_Y-fwlPzEeaJ03ORXuDdGNwgt7rg3VkcILe7YV3YWt1Mgk"}'
2025-02-14 04:02:49.308 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:02:49.315 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:02:49.315 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-14_04-02-48__3254c37d-15ca-49d2-b407-97f50b8a9426__wakuorg_nwaku:latest.log
2025-02-14 04:02:49.315 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:02:49.315 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:02:49.316 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:02:49.317 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.23.223
2025-02-14 04:02:49.317 DEBUG [src.node.docker_mananger] Generated ports ['57763', '57764', '57765', '57766', '57767']
2025-02-14 04:02:49.317 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:02:49.317 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:02:49.317 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:02:49.317 DEBUG [src.node.docker_mananger] docker run -i -t -p 57763:57763 -p 57764:57764 -p 57765:57765 -p 57766:57766 -p 57767:57767 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57765 --rest-port=57763 --tcp-port=57764 --discv5-udp-port=57766 --rest-address=0.0.0.0 --nat=extip:172.18.23.223 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fe2e0d76bfacdf1b9d5464db6abb93cd8b688de02eabda433a31baba2c6c666e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57767 --metrics-logging=true --lightpush=false --relay=true
2025-02-14 04:02:49.552 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.23.223 waku 305bd1289e75f34c5e36c88c98cfd4cad88b7bf10643b7257420fa15fbd04c06
2025-02-14 04:02:49.601 DEBUG [src.node.docker_mananger] Container started with ID 305bd1289e75. Setting up logs at ./log/docker/receiving_node2_2025-02-14_04-02-48__3254c37d-15ca-49d2-b407-97f50b8a9426__wakuorg_nwaku:latest.log
2025-02-14 04:02:49.602 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 57763
2025-02-14 04:02:49.602 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:02:50.602 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57763/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:02:50.605 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:02:50.605 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:02:50.605 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57763/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:02:50.608 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.23.223/tcp/57764/p2p/16Uiu2HAmGCeJBGGJ78hjqjNpvPhYwBxxNVvVKBpEGJhaJ76v8kAR","/ip4/172.18.23.223/tcp/57765/ws/p2p/16Uiu2HAmGCeJBGGJ78hjqjNpvPhYwBxxNVvVKBpEGJhaJ76v8kAR"],"enrUri":"enr:-L24QDsaUjyVxAy4SD4FnRPBPgQvS4X9HvcCcgOsOmvaYju_KGVPMrkIB9xzIGyhILv6IruU0ut-F_y-rYvSHMdujJACgmlkgnY0gmlwhKwSF9-KbXVsdGlhZGRyc5YACASsEhffBuGkAAoErBIX3wbhpd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDNK740DfDmLTsFvQIqWsDjP98CVw0HXhXRozBAUYD47aDdGNwguGkg3VkcILhpoV3YWt1MgE"}'
2025-02-14 04:02:50.608 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:02:50.608 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57763/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.244.229/tcp/57067/p2p/16Uiu2HAky25Mi5fSa3xnKuShQKKw7rooqZD3qzkMrGEkHPYjS3bQ"]'
2025-02-14 04:02:50.655 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:02:50.663 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:02:50.663 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-14_04-02-48__3254c37d-15ca-49d2-b407-97f50b8a9426__wakuorg_nwaku:latest.log
2025-02-14 04:02:50.663 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:02:50.663 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:02:50.665 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:02:50.665 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.82.191
2025-02-14 04:02:50.665 DEBUG [src.node.docker_mananger] Generated ports ['58334', '58335', '58336', '58337', '58338']
2025-02-14 04:02:50.665 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:02:50.665 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:02:50.665 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:02:50.665 DEBUG [src.node.docker_mananger] docker run -i -t -p 58334:58334 -p 58335:58335 -p 58336:58336 -p 58337:58337 -p 58338:58338 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=58336 --rest-port=58334 --tcp-port=58335 --discv5-udp-port=58337 --rest-address=0.0.0.0 --nat=extip:172.18.82.191 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cead62bc1ee7044d3ec683af65bb6a75aaab6f41ddd16abd1bbd9ffabc3584cc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=58338 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QEOyT5UjDX4FBQ-D187_fZZbECKyt31zHzOHiAmWMxP1ErGLqYPrIeCmt6c07DJdU_lGc7GDW8xGLck3Iu07ggsCgmlkgnY0gmlwhKwS9OWKbXVsdGlhZGRyc5YACASsEvTlBt7rAAoErBL05Qbe7N0DgnJzhQADAQAAiXNlY3AyNTZrMaECNWM94Nyt-yM6jgoqKMQq37sNt_Y-fwlPzEeaJ03ORXuDdGNwgt7rg3VkcILe7YV3YWt1Mgk --lightpushnode=/ip4/172.18.244.229/tcp/57067/p2p/16Uiu2HAky25Mi5fSa3xnKuShQKKw7rooqZD3qzkMrGEkHPYjS3bQ --lightpush=true --relay=false
2025-02-14 04:02:50.911 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.82.191 waku 15b9b7a941370a46260539746ace37001ec66f9f8db5a9361451c78af19090d4
2025-02-14 04:02:50.956 DEBUG [src.node.docker_mananger] Container started with ID 15b9b7a94137. Setting up logs at ./log/docker/lightpush_node1_2025-02-14_04-02-48__3254c37d-15ca-49d2-b407-97f50b8a9426__wakuorg_nwaku:latest.log
2025-02-14 04:02:50.956 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 58334
2025-02-14 04:02:50.956 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:02:51.957 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58334/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:02:51.960 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:02:51.960 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:02:51.960 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58334/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:02:51.962 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.82.191/tcp/58335/p2p/16Uiu2HAmSe3TkU714wLrcnXvWTPb5aW5Ktb2Su9F16jRvCossN7M","/ip4/172.18.82.191/tcp/58336/ws/p2p/16Uiu2HAmSe3TkU714wLrcnXvWTPb5aW5Ktb2Su9F16jRvCossN7M"],"enrUri":"enr:-L24QNuHJBtmXHq3Z-wtEDhDmqo4jPvujtDBOPcH74CxVQCiTqAE28GGMPgy1Je7l_Y2BWuOJwCX-Hn_PS1q4c87uqwCgmlkgnY0gmlwhKwSUr-KbXVsdGlhZGRyc5YACASsElK_BuPfAAoErBJSvwbj4N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDz8WN4QjLB1P-qC0-UgNvvyXHM21zqcrubLE2vlBcAlSDdGNwguPfg3VkcILj4YV3YWt1Mgg"}'
2025-02-14 04:02:51.963 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:02:51.963 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58334/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.244.229/tcp/57067/p2p/16Uiu2HAky25Mi5fSa3xnKuShQKKw7rooqZD3qzkMrGEkHPYjS3bQ"]'
2025-02-14 04:02:52.000 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:02:52.000 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58334/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.23.223/tcp/57764/p2p/16Uiu2HAmGCeJBGGJ78hjqjNpvPhYwBxxNVvVKBpEGJhaJ76v8kAR"]'
2025-02-14 04:02:52.027 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:02:52.029 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57066/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-14 04:02:52.037 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:02:52.039 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57763/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-14 04:02:52.042 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:02:52.045 DEBUG [src.steps.light_push] Lightpushing message
2025-02-14 04:02:52.045 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58334/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739505772044793088, "meta": "YWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYQ=="}}'
2025-02-14 04:02:52.053 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:58334/lightpush/v1/message. Response content: b'Failed to request a message push: decode_rpc_failure: (kind: InvalidLengthField, field: "meta")'
2025-02-14 04:02:52.056 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-14 04:02:52.056 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-14 04:02:52.056 DEBUG [src.node.waku_node] Stopping container with id a6409c0058b1
2025-02-14 04:02:52.773 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:02:52.773 DEBUG [src.node.waku_node] Stopping container with id 305bd1289e75
2025-02-14 04:02:53.608 ERROR [src.node.docker_mananger] Max retries reached for container a6409c0058b1. Exiting log stream.
2025-02-14 04:02:54.295 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:02:54.295 DEBUG [src.node.waku_node] Stopping container with id 15b9b7a94137
2025-02-14 04:02:55.107 ERROR [src.node.docker_mananger] Max retries reached for container 305bd1289e75. Exiting log stream.
2025-02-14 04:02:55.784 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:02:55.784 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-14 04:02:55.798 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-14 04:02:55.806 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-14 04:02:55.812 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
