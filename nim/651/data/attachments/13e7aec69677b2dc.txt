2025-02-14 04:03:21.466 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-14 04:03:21.466 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_with_no_request_id with id: 2025-02-14_04-03-21__11afd1ca-5478-4dd3-89ca-d94964792db0
2025-02-14 04:03:21.467 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-14 04:03:21.467 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-14 04:03:21.467 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-14 04:03:21.473 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:03:21.473 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-14_04-03-21__11afd1ca-5478-4dd3-89ca-d94964792db0__wakuorg_nwaku:latest.log
2025-02-14 04:03:21.473 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:03:21.473 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:03:21.475 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:03:21.475 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.176.32
2025-02-14 04:03:21.475 DEBUG [src.node.docker_mananger] Generated ports ['37673', '37674', '37675', '37676', '37677']
2025-02-14 04:03:21.475 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:03:21.475 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:03:21.475 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:03:21.475 DEBUG [src.node.docker_mananger] docker run -i -t -p 37673:37673 -p 37674:37674 -p 37675:37675 -p 37676:37676 -p 37677:37677 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37675 --rest-port=37673 --tcp-port=37674 --discv5-udp-port=37676 --rest-address=0.0.0.0 --nat=extip:172.18.176.32 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f75ba7bf4bb670c0f2e3efd36aed144c67b2dc3c3eafeff961e15e6adbad920e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37677 --metrics-logging=true --relay=true --filter=true
2025-02-14 04:03:21.709 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.176.32 waku edf8fd7e63b0739f20c88eae98e6dfa1f11ebcfddda6265a3f2d0cfa43ad2546
2025-02-14 04:03:21.768 DEBUG [src.node.docker_mananger] Container started with ID edf8fd7e63b0. Setting up logs at ./log/docker/node1_2025-02-14_04-03-21__11afd1ca-5478-4dd3-89ca-d94964792db0__wakuorg_nwaku:latest.log
2025-02-14 04:03:21.769 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 37673
2025-02-14 04:03:21.769 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:03:22.171 ERROR [src.node.docker_mananger] Max retries reached for container 201652b4a724. Exiting log stream.
2025-02-14 04:03:22.769 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37673/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:03:22.772 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:03:22.773 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:03:22.773 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37673/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:03:22.775 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.176.32/tcp/37674/p2p/16Uiu2HAmGFdGcX9Jc8GZPF2A7TjqNg86YgwkzQ5xjKfce8dvFEEk","/ip4/172.18.176.32/tcp/37675/ws/p2p/16Uiu2HAmGFdGcX9Jc8GZPF2A7TjqNg86YgwkzQ5xjKfce8dvFEEk"],"enrUri":"enr:-L24QBofDPWPICdNCV1fU-f1VLhvjF06dL93MCXoSaNo-OWFM2pKNJPNFWemyaYBkUJeng2bzyTOpnwFMq6LqMqS1_ICgmlkgnY0gmlwhKwSsCCKbXVsdGlhZGRyc5YACASsErAgBpMqAAoErBKwIAaTK90DgnJzhQADAQAAiXNlY3AyNTZrMaEDNXKNm0A9PrTq3vGQtTkIyWpjKeAu9HBcCzrw1Uod0jGDdGNwgpMqg3VkcIKTLIV3YWt1MgU"}'
2025-02-14 04:03:22.775 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:03:22.776 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-14 04:03:22.782 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:03:22.782 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-14_04-03-21__11afd1ca-5478-4dd3-89ca-d94964792db0__wakuorg_nwaku:latest.log
2025-02-14 04:03:22.782 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:03:22.782 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:03:22.783 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:03:22.784 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.65.151
2025-02-14 04:03:22.784 DEBUG [src.node.docker_mananger] Generated ports ['19324', '19325', '19326', '19327', '19328']
2025-02-14 04:03:22.784 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:03:22.784 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:03:22.784 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:03:22.784 DEBUG [src.node.docker_mananger] docker run -i -t -p 19324:19324 -p 19325:19325 -p 19326:19326 -p 19327:19327 -p 19328:19328 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19326 --rest-port=19324 --tcp-port=19325 --discv5-udp-port=19327 --rest-address=0.0.0.0 --nat=extip:172.18.65.151 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3e9cfbc8cb8ff91bbb0105117cccea715f419dc9fb9ecf74792bbeb9ddbcca75 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19328 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QBofDPWPICdNCV1fU-f1VLhvjF06dL93MCXoSaNo-OWFM2pKNJPNFWemyaYBkUJeng2bzyTOpnwFMq6LqMqS1_ICgmlkgnY0gmlwhKwSsCCKbXVsdGlhZGRyc5YACASsErAgBpMqAAoErBKwIAaTK90DgnJzhQADAQAAiXNlY3AyNTZrMaEDNXKNm0A9PrTq3vGQtTkIyWpjKeAu9HBcCzrw1Uod0jGDdGNwgpMqg3VkcIKTLIV3YWt1MgU --filternode=/ip4/172.18.176.32/tcp/37674/p2p/16Uiu2HAmGFdGcX9Jc8GZPF2A7TjqNg86YgwkzQ5xjKfce8dvFEEk
2025-02-14 04:03:23.008 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.65.151 waku 2545be284e3ba0f0f77d61f16c43216ea7dfb63d41ae552369ae63050f285783
2025-02-14 04:03:23.058 DEBUG [src.node.docker_mananger] Container started with ID 2545be284e3b. Setting up logs at ./log/docker/node2_2025-02-14_04-03-21__11afd1ca-5478-4dd3-89ca-d94964792db0__wakuorg_nwaku:latest.log
2025-02-14 04:03:23.058 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 19324
2025-02-14 04:03:23.058 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:03:24.059 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19324/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:03:24.062 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:03:24.062 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:03:24.062 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19324/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:03:24.065 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.65.151/tcp/19325/p2p/16Uiu2HAm2g55v6qciG5jEYxhjWdfNUQyVZwviHUqrqndkQt6wxj3","/ip4/172.18.65.151/tcp/19326/ws/p2p/16Uiu2HAm2g55v6qciG5jEYxhjWdfNUQyVZwviHUqrqndkQt6wxj3"],"enrUri":"enr:-L24QM_nV160BHRDgQ7ijO-8Rn8YiI60S_yhcBa0VESQLeQDA_pMfG0xqM7fxlNaKNGbpAqcfxZfEzT8yEZYik-a5nQCgmlkgnY0gmlwhKwSQZeKbXVsdGlhZGRyc5YACASsEkGXBkt9AAoErBJBlwZLft0DgnJzhQADAQAAiXNlY3AyNTZrMaECa7IQu1IFhzRsyhromKfE4-gV4x3rHUQhnsRu_MNkoiKDdGNwgkt9g3VkcIJLf4V3YWt1MgA"}'
2025-02-14 04:03:24.065 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:03:24.065 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19324/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.176.32/tcp/37674/p2p/16Uiu2HAmGFdGcX9Jc8GZPF2A7TjqNg86YgwkzQ5xjKfce8dvFEEk"]'
2025-02-14 04:03:24.105 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:03:24.107 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-14 04:03:24.107 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37673/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-14 04:03:24.128 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:03:24.128 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19324/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "03d464a2-3d82-42a7-8d0c-503f521655df", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-14 04:03:24.143 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"03d464a2-3d82-42a7-8d0c-503f521655df","statusDesc":"OK"}'
2025-02-14 04:03:24.144 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:19324/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-14 04:03:24.147 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:19324/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
2025-02-14 04:03:24.151 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-14 04:03:24.151 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-14 04:03:24.152 DEBUG [src.node.waku_node] Stopping container with id edf8fd7e63b0
2025-02-14 04:03:25.221 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:03:25.221 DEBUG [src.node.waku_node] Stopping container with id 2545be284e3b
2025-02-14 04:03:26.034 ERROR [src.node.docker_mananger] Max retries reached for container edf8fd7e63b0. Exiting log stream.
2025-02-14 04:03:26.741 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:03:26.742 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-14 04:03:26.747 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-14 04:03:26.751 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
