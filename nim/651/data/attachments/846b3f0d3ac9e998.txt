2025-02-14 04:04:34.195 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-14 04:04:34.196 DEBUG [tests.conftest] Running test: test_filter_get_message_with_extra_field with id: 2025-02-14_04-04-34__d8c4c741-7f64-46a8-873e-2e45336d7cd2
2025-02-14 04:04:34.196 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-14 04:04:34.196 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-14 04:04:34.196 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-14 04:04:34.202 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:04:34.202 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-14_04-04-34__d8c4c741-7f64-46a8-873e-2e45336d7cd2__wakuorg_nwaku:latest.log
2025-02-14 04:04:34.202 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:04:34.202 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:04:34.204 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:04:34.204 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.206.39
2025-02-14 04:04:34.204 DEBUG [src.node.docker_mananger] Generated ports ['25175', '25176', '25177', '25178', '25179']
2025-02-14 04:04:34.204 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:04:34.205 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:04:34.205 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:04:34.205 DEBUG [src.node.docker_mananger] docker run -i -t -p 25175:25175 -p 25176:25176 -p 25177:25177 -p 25178:25178 -p 25179:25179 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25177 --rest-port=25175 --tcp-port=25176 --discv5-udp-port=25178 --rest-address=0.0.0.0 --nat=extip:172.18.206.39 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c2d79afed2298fe1f2aa771e6baaa6a8da5e1d9363f25ac3dea321af0124c3b8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25179 --metrics-logging=true --relay=true --filter=true
2025-02-14 04:04:34.436 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.206.39 waku 82ebb0100eccc6e9945c9a3cb58e9a223dc36121bb9925f0fb29842e4ed97fd3
2025-02-14 04:04:34.492 DEBUG [src.node.docker_mananger] Container started with ID 82ebb0100ecc. Setting up logs at ./log/docker/node1_2025-02-14_04-04-34__d8c4c741-7f64-46a8-873e-2e45336d7cd2__wakuorg_nwaku:latest.log
2025-02-14 04:04:34.493 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 25175
2025-02-14 04:04:34.493 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:04:34.866 ERROR [src.node.docker_mananger] Max retries reached for container 0dffa9eb141a. Exiting log stream.
2025-02-14 04:04:35.493 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25175/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:35.496 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:04:35.497 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:04:35.497 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25175/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:35.499 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.206.39/tcp/25176/p2p/16Uiu2HAmECLof7XLCga61LZT3ivcA5U7Xt21i5zoMXdZqjZBepJR","/ip4/172.18.206.39/tcp/25177/ws/p2p/16Uiu2HAmECLof7XLCga61LZT3ivcA5U7Xt21i5zoMXdZqjZBepJR"],"enrUri":"enr:-L24QGyeL3zQ0xqudSO7XTi051oEZawncqri1_Pga4Nb1laALHAk62gjdo5krqvalrw_O0hmtrx8h83gjE9oDTttBhQCgmlkgnY0gmlwhKwSzieKbXVsdGlhZGRyc5YACASsEs4nBmJYAAoErBLOJwZiWd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDFuPR84SMciiWAmTEbL8lYygUx33Y1zoMF0DU8Em46naDdGNwgmJYg3VkcIJiWoV3YWt1MgU"}'
2025-02-14 04:04:35.499 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:04:35.500 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-14 04:04:35.506 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-14 04:04:35.506 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-14_04-04-34__d8c4c741-7f64-46a8-873e-2e45336d7cd2__wakuorg_nwaku:latest.log
2025-02-14 04:04:35.506 DEBUG [src.node.waku_node] Starting Node...
2025-02-14 04:04:35.506 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-14 04:04:35.508 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-14 04:04:35.508 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.80.45
2025-02-14 04:04:35.508 DEBUG [src.node.docker_mananger] Generated ports ['48183', '48184', '48185', '48186', '48187']
2025-02-14 04:04:35.508 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-14 04:04:35.508 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-14 04:04:35.509 DEBUG [src.node.waku_node] Using volumes []
2025-02-14 04:04:35.509 DEBUG [src.node.docker_mananger] docker run -i -t -p 48183:48183 -p 48184:48184 -p 48185:48185 -p 48186:48186 -p 48187:48187 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=48185 --rest-port=48183 --tcp-port=48184 --discv5-udp-port=48186 --rest-address=0.0.0.0 --nat=extip:172.18.80.45 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=993478ee8fe0adbaaab36ab9ebc3e72d842dab53f9cda76ebd26af4b6e0d060a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=48187 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QGyeL3zQ0xqudSO7XTi051oEZawncqri1_Pga4Nb1laALHAk62gjdo5krqvalrw_O0hmtrx8h83gjE9oDTttBhQCgmlkgnY0gmlwhKwSzieKbXVsdGlhZGRyc5YACASsEs4nBmJYAAoErBLOJwZiWd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDFuPR84SMciiWAmTEbL8lYygUx33Y1zoMF0DU8Em46naDdGNwgmJYg3VkcIJiWoV3YWt1MgU --filternode=/ip4/172.18.206.39/tcp/25176/p2p/16Uiu2HAmECLof7XLCga61LZT3ivcA5U7Xt21i5zoMXdZqjZBepJR
2025-02-14 04:04:35.734 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.80.45 waku 6c5477f12f9c05e412d9da0387e27bdd4e131296182c5f15bbb966799f5459ba
2025-02-14 04:04:35.784 DEBUG [src.node.docker_mananger] Container started with ID 6c5477f12f9c. Setting up logs at ./log/docker/node2_2025-02-14_04-04-34__d8c4c741-7f64-46a8-873e-2e45336d7cd2__wakuorg_nwaku:latest.log
2025-02-14 04:04:35.785 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 48183
2025-02-14 04:04:35.785 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-14 04:04:36.786 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:48183/health" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:36.789 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-14 04:04:36.789 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-14 04:04:36.789 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:48183/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-14 04:04:36.791 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.80.45/tcp/48184/p2p/16Uiu2HAmD9J6Ct2XBzF8TxfzX6xGHtpEkR3Px49qtqmz4bBLLKJE","/ip4/172.18.80.45/tcp/48185/ws/p2p/16Uiu2HAmD9J6Ct2XBzF8TxfzX6xGHtpEkR3Px49qtqmz4bBLLKJE"],"enrUri":"enr:-L24QOqXkh3syPMDw9tRnWUt4Eq5jomRP8HW4qeW6x31NoiPBgMUiOvPIZFiFK8mg8wUdxNjEcOuEqj4loMhfTSe6lACgmlkgnY0gmlwhKwSUC2KbXVsdGlhZGRyc5YACASsElAtBrw4AAoErBJQLQa8Od0DgnJzhQADAQAAiXNlY3AyNTZrMaEDB0BSParJ7xF1kdfb96cG7jI8Dwq5263H8LLgj0bGTteDdGNwgrw4g3VkcIK8OoV3YWt1MgA"}'
2025-02-14 04:04:36.792 INFO [src.node.waku_node] REST service is ready !!
2025-02-14 04:04:36.792 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:48183/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.206.39/tcp/25176/p2p/16Uiu2HAmECLof7XLCga61LZT3ivcA5U7Xt21i5zoMXdZqjZBepJR"]'
2025-02-14 04:04:36.824 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:04:36.827 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-14 04:04:36.827 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25175/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-14 04:04:36.846 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-14 04:04:36.847 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:48183/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "b7d91dc1-2610-47db-8ed4-c887eaca60a3", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-14 04:04:36.860 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"b7d91dc1-2610-47db-8ed4-c887eaca60a3","statusDesc":"OK"}'
2025-02-14 04:04:36.861 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25175/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "extraField": "extraValue"}'
2025-02-14 04:04:36.864 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:25175/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
2025-02-14 04:04:36.866 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-14 04:04:36.867 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-14 04:04:36.867 DEBUG [src.node.waku_node] Stopping container with id 82ebb0100ecc
2025-02-14 04:04:37.797 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:04:37.797 DEBUG [src.node.waku_node] Stopping container with id 6c5477f12f9c
2025-02-14 04:04:38.608 ERROR [src.node.docker_mananger] Max retries reached for container 82ebb0100ecc. Exiting log stream.
2025-02-14 04:04:39.264 DEBUG [src.node.waku_node] Container stopped.
2025-02-14 04:04:39.265 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-14 04:04:39.270 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-14 04:04:39.274 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
