[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_msg_stored_when_ephemeral_false with id: 2025-02-14_04-02-55__3c530189-b5e2-4176-91e5-2ec762ccbbe2
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-02-14_04-02-55__3c530189-b5e2-4176-91e5-2ec762ccbbe2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-02-14_04-02-55__3c530189-b5e2-4176-91e5-2ec762ccbbe2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2025-02-14_04-02-55__3c530189-b5e2-4176-91e5-2ec762ccbbe2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:414 Start 3 nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.128.17
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['12535', '12536', '12537', '12538', '12539']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 12535:12535 -p 12536:12536 -p 12537:12537 -p 12538:12538 -p 12539:12539 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=12537 --rest-port=12535 --tcp-port=12536 --discv5-udp-port=12538 --rest-address=0.0.0.0 --nat=extip:172.18.128.17 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1adf183dcf5e3cdce76aeeb4e79efdfa3da3dc1dcda4d0a5c9ddbe2f39cb76f9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=12539 --metrics-logging=true --relay=true --store=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.128.17 waku cbd18f75c63cff76780a828a00eb5140529869735dceac8d95cfc78323afa0db
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID cbd18f75c63c. Setting up logs at ./log/docker/node1_2025-02-14_04-02-55__3c530189-b5e2-4176-91e5-2ec762ccbbe2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 12535
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 46b21a93328e. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12535/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12535/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.128.17/tcp/12536/p2p/16Uiu2HAm25CNNgAeHfXVN9PuUjcVU8e7zqkZ4CfiVipzHUdSvbGq","/ip4/172.18.128.17/tcp/12537/ws/p2p/16Uiu2HAm25CNNgAeHfXVN9PuUjcVU8e7zqkZ4CfiVipzHUdSvbGq"],"enrUri":"enr:-L24QO0gYdByX9sQtEJIKH-QNi-WziRjU37eZT_UILV-esu6XLSP-b979oGyLrQTuJNbLOxjt45KyDBZQZu1exejmvgCgmlkgnY0gmlwhKwSgBGKbXVsdGlhZGRyc5YACASsEoARBjD4AAoErBKAEQYw-d0DgnJzhQADAQAAiXNlY3AyNTZrMaECYsL5Cn4cCfBr8JSwuftudGgve9YjBKxCVGGnppjEIXaDdGNwgjD4g3VkcIIw-oV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.209.224
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['15744', '15745', '15746', '15747', '15748']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 15744:15744 -p 15745:15745 -p 15746:15746 -p 15747:15747 -p 15748:15748 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15746 --rest-port=15744 --tcp-port=15745 --discv5-udp-port=15747 --rest-address=0.0.0.0 --nat=extip:172.18.209.224 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=577e1fa1b70a01efd4dbbeb705b1ec2b3af6a26ea8acc1f4cdeb4a871b5a20be --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15748 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-L24QO0gYdByX9sQtEJIKH-QNi-WziRjU37eZT_UILV-esu6XLSP-b979oGyLrQTuJNbLOxjt45KyDBZQZu1exejmvgCgmlkgnY0gmlwhKwSgBGKbXVsdGlhZGRyc5YACASsEoARBjD4AAoErBKAEQYw-d0DgnJzhQADAQAAiXNlY3AyNTZrMaECYsL5Cn4cCfBr8JSwuftudGgve9YjBKxCVGGnppjEIXaDdGNwgjD4g3VkcIIw-oV3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.209.224 waku 45d8770554730c31ae7858bcf3b2abf25af5290fc0d55151fc8bffeb046ebe4e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 45d877055473. Setting up logs at ./log/docker/node2_2025-02-14_04-02-55__3c530189-b5e2-4176-91e5-2ec762ccbbe2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 15744
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15744/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15744/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.209.224/tcp/15745/p2p/16Uiu2HAmBVLGir5RG4ZA8XMQn4tbopDbscqqqAWuCGd1oCd27LtX","/ip4/172.18.209.224/tcp/15746/ws/p2p/16Uiu2HAmBVLGir5RG4ZA8XMQn4tbopDbscqqqAWuCGd1oCd27LtX"],"enrUri":"enr:-L24QBTalDPuJh3yABGpf5QGr-LfYxnh31qmGB6Z5zagrL-aG32wCP3qppL7uFxmVmxtg_0aKDMWsS38ArMaiqjryJwCgmlkgnY0gmlwhKwS0eCKbXVsdGlhZGRyc5YACASsEtHgBj2BAAoErBLR4AY9gt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC7qsHrsbZ45BT4I9ll7eizIjHViasy2QkL60zgibefZiDdGNwgj2Bg3VkcII9g4V3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.10.84
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['8964', '8965', '8966', '8967', '8968']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 8964:8964 -p 8965:8965 -p 8966:8966 -p 8967:8967 -p 8968:8968 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8966 --rest-port=8964 --tcp-port=8965 --discv5-udp-port=8967 --rest-address=0.0.0.0 --nat=extip:172.18.10.84 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0cd1097f2ebb5b1de6dbc8a1c103c3663b3e12bade64a38eda2bb3ebbfeff31d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8968 --metrics-logging=true --relay=false --storenode=/ip4/172.18.209.224/tcp/15745/p2p/16Uiu2HAmBVLGir5RG4ZA8XMQn4tbopDbscqqqAWuCGd1oCd27LtX --discv5-bootstrap-node=enr:-L24QBTalDPuJh3yABGpf5QGr-LfYxnh31qmGB6Z5zagrL-aG32wCP3qppL7uFxmVmxtg_0aKDMWsS38ArMaiqjryJwCgmlkgnY0gmlwhKwS0eCKbXVsdGlhZGRyc5YACASsEtHgBj2BAAoErBLR4AY9gt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC7qsHrsbZ45BT4I9ll7eizIjHViasy2QkL60zgibefZiDdGNwgj2Bg3VkcII9g4V3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.10.84 waku dbbabc7bc5c2727c0456bb4af9a6d990f474cd0b7f383f8e8bdf89b10434839c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID dbbabc7bc5c2. Setting up logs at ./log/docker/node3_2025-02-14_04-02-55__3c530189-b5e2-4176-91e5-2ec762ccbbe2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 8964
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8964/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8964/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.10.84/tcp/8965/p2p/16Uiu2HAmALaRFfrVrM5jwUyas5DLJBMwmpXkbxztsiZVMSewi9ma","/ip4/172.18.10.84/tcp/8966/ws/p2p/16Uiu2HAmALaRFfrVrM5jwUyas5DLJBMwmpXkbxztsiZVMSewi9ma"],"enrUri":"enr:-L24QO3lMDKeUKZhcLFuY4x4if6JK3RrVrrK60c67kBvKfaSIEyQn-J7iSILosOT5TB6lhkjT7hBhzH6WnsZkE4FsvMCgmlkgnY0gmlwhKwSClSKbXVsdGlhZGRyc5YACASsEgpUBiMFAAoErBIKVAYjBt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC3ZEcqjz4OeTsPBu-ouPM-UrVkzv5CE_DI7hMJ1g1U2GDdGNwgiMFg3VkcIIjB4V3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:419 Subscribe node1 ,2 to pubtopic /waku/2/rs/3/1
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12535/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15744/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12535/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.209.224/tcp/15745/p2p/16Uiu2HAmBVLGir5RG4ZA8XMQn4tbopDbscqqqAWuCGd1oCd27LtX","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15744/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.128.17/tcp/12536/p2p/16Uiu2HAm25CNNgAeHfXVN9PuUjcVU8e7zqkZ4CfiVipzHUdSvbGq","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 30 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:424 Node1 publish message with ephemeral = false
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12535/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "ephemeral": false}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 3 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:428 Check if message is stored 
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8964/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"21de338280ef57f8f404","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x5b0aba8e79d7384c1b592a255934442771166e7497d5b9a82799cf4247b40477"}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id cbd18f75c63c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 45d877055473
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container cbd18f75c63c. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id dbbabc7bc5c2
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 45d877055473. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.