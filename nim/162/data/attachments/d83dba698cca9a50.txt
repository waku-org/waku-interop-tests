[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_publish_with_no_timestamp with id: 2024-04-22_15-25-16__5457caae-233b-4ad6-82e6-8b065fd398be
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:32 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.relay:relay.py:38 Running fixture setup: setup_main_relay_nodes
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/node1_2024-04-22_15-25-16__5457caae-233b-4ad6-82e6-8b065fd398be__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.161.239
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['45054', '45055', '45056', '45057', '45058']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:313 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:113 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 45054:45054 -p 45055:45055 -p 45056:45056 -p 45057:45057 -p 45058:45058 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45056 --rest-port=45054 --tcp-port=45055 --discv5-udp-port=45057 --rest-address=0.0.0.0 --nat=extip:172.18.161.239 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45058 --metrics-logging=true --relay=true --nodekey=30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.45.202
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['27821', '27822', '27823', '27824', '27825']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:313 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:113 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 27821:27821 -p 27822:27822 -p 27823:27823 -p 27824:27824 -p 27825:27825 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27823 --rest-port=27821 --tcp-port=27822 --discv5-udp-port=27824 --rest-address=0.0.0.0 --nat=extip:172.18.45.202 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27825 --metrics-logging=true --relay=true --nodekey=30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.45.202 waku b5d5b3f8e514d1c21abf51012e8a6ff9f267608b70c7e00a78b6b42f814d5ade
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID b5d5b3f8e514. Setting up logs at ./log/docker/node1_2024-04-22_15-25-16__5457caae-233b-4ad6-82e6-8b065fd398be__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:119 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 27821
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27821/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.45.202/tcp/27822/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip","/ip4/172.18.45.202/tcp/27823/ws/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"],"enrUri":"enr:-LO4QF1g_qqYJMQjRAX4xqKu8r6eKCWg63IwSTwmcO4Uwk37R4Ry27y0Lwq5VRfAB6L8L66cwN7nWhrY3LcWxXwuzG4BgmlkgnY0gmlwhKwSLcqKbXVsdGlhZGRyc4wACgSsEi3KBmyv3QOCcnOFAAABAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCbK6DdWRwgmywhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:189 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/node2_2024-04-22_15-25-16__5457caae-233b-4ad6-82e6-8b065fd398be__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.152.175
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['34211', '34212', '34213', '34214', '34215']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:313 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:113 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 34211:34211 -p 34212:34212 -p 34213:34213 -p 34214:34214 -p 34215:34215 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34213 --rest-port=34211 --tcp-port=34212 --discv5-udp-port=34214 --rest-address=0.0.0.0 --nat=extip:172.18.152.175 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34215 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QF1g_qqYJMQjRAX4xqKu8r6eKCWg63IwSTwmcO4Uwk37R4Ry27y0Lwq5VRfAB6L8L66cwN7nWhrY3LcWxXwuzG4BgmlkgnY0gmlwhKwSLcqKbXVsdGlhZGRyc4wACgSsEi3KBmyv3QOCcnOFAAABAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCbK6DdWRwgmywhXdha3UyAQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.152.175 waku a369edd9b61513fb9bfc5612bf895edbc68db1a239543dd8eeb474a65ad67e3f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID a369edd9b615. Setting up logs at ./log/docker/node2_2024-04-22_15-25-16__5457caae-233b-4ad6-82e6-8b065fd398be__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:119 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 34211
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34211/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.152.175/tcp/34212/p2p/16Uiu2HAmJ5H2QNy1Y4Yatbe5oULeuTuo4888pyaqD8jkRqSwFGox","/ip4/172.18.152.175/tcp/34213/ws/p2p/16Uiu2HAmJ5H2QNy1Y4Yatbe5oULeuTuo4888pyaqD8jkRqSwFGox"],"enrUri":"enr:-LO4QGb0cLFCXvO6Ep04vToxAZPmkkeAYTktvELR2JcW8OQVEg3ubgIkCNO94KzT4vbZpdJrGOGDbQ8soWuWEqwoLo0BgmlkgnY0gmlwhKwSmK-KbXVsdGlhZGRyc4wACgSsEpivBoWl3QOCcnOFAAABAACJc2VjcDI1NmsxoQNQgzpTHjGvFhk0n4EHJuIAWxmh7aHYUD9WZxWsAgfu74N0Y3CChaSDdWRwgoWmhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:189 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34211/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.45.202/tcp/27822/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.relay:relay.py:85 Running fixture setup: subscribe_main_relay_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27821/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34211/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27821/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.relay:relay.py:117 Checking that peer NODE_1:harbor.status.im/wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27821/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1713799519864374272,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.relay:relay.py:117 Checking that peer NODE_2:harbor.status.im/wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34211/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1713799519864374272,"ephemeral":false}]'
[32mINFO    [0m src.steps.relay:relay.py:97 WARM UP successful!!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27821/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.relay:relay.py:117 Checking that peer NODE_1:harbor.status.im/wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27821/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1713799519978804480,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.relay:relay.py:117 Checking that peer NODE_2:harbor.status.im/wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34211/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1713799519978804480,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:166 Stopping container with id b5d5b3f8e514
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:166 Stopping container with id a369edd9b615
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Container stopped.