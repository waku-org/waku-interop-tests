[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_filter_subscribe_with_extra_field with id: 2024-04-04_04-12-56__2d5a9bb3-5b7d-4812-8041-491946ec3eaf
[35mDEBUG   [0m src.steps.filter:filter.py:27 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:33 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:50 WakuNode instance initialized with log path ./log/docker/node1_2024-04-04_04-12-56__2d5a9bb3-5b7d-4812-8041-491946ec3eaf__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:54 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.228.63
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['2126', '2127', '2128', '2129', '2130']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:294 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:115 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 2126:2126 -p 2127:2127 -p 2128:2128 -p 2129:2129 -p 2130:2130 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2128 --rest-port=2126 --tcp-port=2127 --discv5-udp-port=2129 --rest-address=0.0.0.0 --nat=extip:172.18.228.63 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2130 --metrics-logging=true --relay=true --filter=true --nodekey=30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.228.63 waku 31d3a92279adf6c630ccbff3e804d1c487a202f5083331b6d4bb3b1d53a02dc1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 31d3a92279ad. Setting up logs at ./log/docker/node1_2024-04-04_04-12-56__2d5a9bb3-5b7d-4812-8041-491946ec3eaf__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:121 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 2126
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:38 curl -v -X GET "http://127.0.0.1:2126/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:23 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.228.63/tcp/2127/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip","/ip4/172.18.228.63/tcp/2128/ws/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"],"enrUri":"enr:-LG4QFpmQ68ncGYEeCic3jVEBgO6tgUrwpekYQKvvCbwhHmlCkwLTeL3EL1CAvBznyhTiALVrIJ1hPbhOy5_hGdJO8ABgmlkgnY0gmlwhKwS5D-KbXVsdGlhZGRyc4wACgSsEuQ_BghQ3QOCcnODAAAAiXNlY3AyNTZrMaEDN06qX-XhZ-Cc7ZuIAdGNCVUicscmbFvEEfkFOQ2W_j2DdGNwgghPg3VkcIIIUYV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:191 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:38 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:50 WakuNode instance initialized with log path ./log/docker/node2_2024-04-04_04-12-56__2d5a9bb3-5b7d-4812-8041-491946ec3eaf__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:54 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.1.153
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['20103', '20104', '20105', '20106', '20107']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:294 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:115 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 20103:20103 -p 20104:20104 -p 20105:20105 -p 20106:20106 -p 20107:20107 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20105 --rest-port=20103 --tcp-port=20104 --discv5-udp-port=20106 --rest-address=0.0.0.0 --nat=extip:172.18.1.153 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20107 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LG4QFpmQ68ncGYEeCic3jVEBgO6tgUrwpekYQKvvCbwhHmlCkwLTeL3EL1CAvBznyhTiALVrIJ1hPbhOy5_hGdJO8ABgmlkgnY0gmlwhKwS5D-KbXVsdGlhZGRyc4wACgSsEuQ_BghQ3QOCcnODAAAAiXNlY3AyNTZrMaEDN06qX-XhZ-Cc7ZuIAdGNCVUicscmbFvEEfkFOQ2W_j2DdGNwgghPg3VkcIIIUYV3YWt1MgU --filternode=/ip4/172.18.228.63/tcp/2127/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.1.153 waku 966fcada18e049068fbaa107fd9b4fc11a89765b6a8f83c61fe472c02d8bb134
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 966fcada18e0. Setting up logs at ./log/docker/node2_2024-04-04_04-12-56__2d5a9bb3-5b7d-4812-8041-491946ec3eaf__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:121 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 20103
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:38 curl -v -X GET "http://127.0.0.1:20103/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:23 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.1.153/tcp/20104/p2p/16Uiu2HAmSY55XRkD4didRknste4xyFKm4swb3SVDkgGuSsov95Ju","/ip4/172.18.1.153/tcp/20105/ws/p2p/16Uiu2HAmSY55XRkD4didRknste4xyFKm4swb3SVDkgGuSsov95Ju"],"enrUri":"enr:-LG4QHeU5IsHDufKVe4ri9zSbwAhXUusJOcopYSPeYkXM5I9HUsZe_w8WQ596WyzxLe7JzFIXEg32Fq60UjmRkYonk0BgmlkgnY0gmlwhKwSAZmKbXVsdGlhZGRyc4wACgSsEgGZBk6J3QOCcnODAAAAiXNlY3AyNTZrMaEDzj3lwlyZ5gsbNYuWSVcXeW3w4Bo2ZiPkmz0CtuXSre6DdGNwgk6Ig3VkcIJOioV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:191 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:38 curl -v -X POST "http://127.0.0.1:20103/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.228.63/tcp/2127/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:23 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:38 curl -v -X POST "http://127.0.0.1:2126/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:23 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:38 curl -v -X POST "http://127.0.0.1:20103/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "96a3f49a-06d9-44de-956b-af4f10c587f7", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/0/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:23 Response status code: 200. Response content: b'{"requestId":"96a3f49a-06d9-44de-956b-af4f10c587f7","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:38 curl -v -X POST "http://127.0.0.1:20103/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/0/1", "extraField": "extraValue"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:17 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:20103/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:168 Stopping container with id 31d3a92279ad
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:168 Stopping container with id 966fcada18e0
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Container stopped.