[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_only_lightpush__peer_full with id: 2024-08-25_04-21-24__1008613f-b46a-4fcd-b747-7f323f1d5cb1
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-25_04-21-24__1008613f-b46a-4fcd-b747-7f323f1d5cb1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.126.214
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['19718', '19719', '19720', '19721', '19722']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 19718:19718 -p 19719:19719 -p 19720:19720 -p 19721:19721 -p 19722:19722 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19720 --rest-port=19718 --tcp-port=19719 --discv5-udp-port=19721 --rest-address=0.0.0.0 --nat=extip:172.18.126.214 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e294de1d5b4c74b02adf3c0bee87e23fdf9cfb9d5ad65b0270bb1e3906800b2b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19722 --metrics-logging=true --lightpush=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.126.214 waku 505c6151d42962fad0b649ee04f5a403c04c84a97c63c8130eb83b5111569383
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 505c6151d429. Setting up logs at ./log/docker/receiving_node1_2024-08-25_04-21-24__1008613f-b46a-4fcd-b747-7f323f1d5cb1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 19718
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19718/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19718/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.126.214/tcp/19719/p2p/16Uiu2HAmHa2NTGJWFVBX5s7vA7nGFYCC3igjjizxgTVJAKaFHM2x","/ip4/172.18.126.214/tcp/19720/ws/p2p/16Uiu2HAmHa2NTGJWFVBX5s7vA7nGFYCC3igjjizxgTVJAKaFHM2x"],"enrUri":"enr:-LO4QBh2bQKgKACPT4j4f9LIEgcb-8-Ilku70lOVaIAsD5uEOF5WasI4uvDX1A-jUnGA167H9l3HFLGbzcAzuTu44LwBgmlkgnY0gmlwhKwSftaKbXVsdGlhZGRyc4wACgSsEn7WBk0I3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNJBNCO8DH-KcyjENmcEi9SFcUOqy0bCocb6b_tGN7SQYN0Y3CCTQeDdWRwgk0JhXdha3UyDQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-25_04-21-24__1008613f-b46a-4fcd-b747-7f323f1d5cb1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.203.85
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['59624', '59625', '59626', '59627', '59628']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 59624:59624 -p 59625:59625 -p 59626:59626 -p 59627:59627 -p 59628:59628 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=59626 --rest-port=59624 --tcp-port=59625 --discv5-udp-port=59627 --rest-address=0.0.0.0 --nat=extip:172.18.203.85 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a69bc2a14de2a8e4b43519ebfbcbadea68daecbc6cd762d8dfbc781c56e272c5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=59628 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.203.85 waku e00e6c22360df5cf66ecf67c159e2bb1db143b5d3a26e78673263ccf86da452b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID e00e6c22360d. Setting up logs at ./log/docker/receiving_node2_2024-08-25_04-21-24__1008613f-b46a-4fcd-b747-7f323f1d5cb1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 59624
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59624/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59624/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.203.85/tcp/59625/p2p/16Uiu2HAmAgkHFw6E8auCn4VjHYFjzMc2mXkYXu9QN9azy98mMWFt","/ip4/172.18.203.85/tcp/59626/ws/p2p/16Uiu2HAmAgkHFw6E8auCn4VjHYFjzMc2mXkYXu9QN9azy98mMWFt"],"enrUri":"enr:-LO4QDsN9RVd4ugnqwYBPInYm_seEvNJ-HZ6LCDHyd4GivigCz1Ysa0R3o1DDzHnVXAaHCsMXC4XPEenWgKNrrLVOPUBgmlkgnY0gmlwhKwSy1WKbXVsdGlhZGRyc4wACgSsEstVBujq3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLiu-EbEsuMKYXUrTNG3CzUq5fEiKfi4YRvMGcGYVEqs4N0Y3CC6OmDdWRwgujrhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59624/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.126.214/tcp/19719/p2p/16Uiu2HAmHa2NTGJWFVBX5s7vA7nGFYCC3igjjizxgTVJAKaFHM2x"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-25_04-21-24__1008613f-b46a-4fcd-b747-7f323f1d5cb1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.118.65
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['61465', '61466', '61467', '61468', '61469']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 61465:61465 -p 61466:61466 -p 61467:61467 -p 61468:61468 -p 61469:61469 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61467 --rest-port=61465 --tcp-port=61466 --discv5-udp-port=61468 --rest-address=0.0.0.0 --nat=extip:172.18.118.65 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e9fc62c6b21fabd32615ceae41ba2958cfa3d512b0fb3e2fc8aac054d9cdd2b7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61469 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QBh2bQKgKACPT4j4f9LIEgcb-8-Ilku70lOVaIAsD5uEOF5WasI4uvDX1A-jUnGA167H9l3HFLGbzcAzuTu44LwBgmlkgnY0gmlwhKwSftaKbXVsdGlhZGRyc4wACgSsEn7WBk0I3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNJBNCO8DH-KcyjENmcEi9SFcUOqy0bCocb6b_tGN7SQYN0Y3CCTQeDdWRwgk0JhXdha3UyDQ --lightpushnode=/ip4/172.18.126.214/tcp/19719/p2p/16Uiu2HAmHa2NTGJWFVBX5s7vA7nGFYCC3igjjizxgTVJAKaFHM2x --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.118.65 waku e85df951d126d2bd0067b80c3182b1a4044f661a3f2bdd2bc903af594798b3c8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID e85df951d126. Setting up logs at ./log/docker/lightpush_node1_2024-08-25_04-21-24__1008613f-b46a-4fcd-b747-7f323f1d5cb1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 61465
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61465/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61465/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.118.65/tcp/61466/p2p/16Uiu2HAmTShz7cn9uhArzzbbmxmZ4uPpmJL4L7nPRyFYdoaYw2jA","/ip4/172.18.118.65/tcp/61467/ws/p2p/16Uiu2HAmTShz7cn9uhArzzbbmxmZ4uPpmJL4L7nPRyFYdoaYw2jA"],"enrUri":"enr:-LO4QJ6IxFpNdgEJv5-tPniS-LviGbL1O8ItgvqBGlKTuHr9V__lT_viwQdIpk3AW7aCZFl8_DkgXwY2beEysYVOjmYBgmlkgnY0gmlwhKwSdkGKbXVsdGlhZGRyc4wACgSsEnZBBvAb3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPbudSDEKWGWrGFiezmDA2UiTVZ58oyYNkPXY5OfPzeMYN0Y3CC8BqDdWRwgvAchXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61465/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.126.214/tcp/19719/p2p/16Uiu2HAmHa2NTGJWFVBX5s7vA7nGFYCC3igjjizxgTVJAKaFHM2x"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61465/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.203.85/tcp/59625/p2p/16Uiu2HAmAgkHFw6E8auCn4VjHYFjzMc2mXkYXu9QN9azy98mMWFt"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19718/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59624/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61465/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724559689408957952}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19718/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1724559689408957952,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59624/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1724559689408957952,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 505c6151d429
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id e00e6c22360d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id e85df951d126
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.