[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_missing_pubsub_topics with id: 2024-08-25_04-19-58__468d23fa-8c6f-44a2-89a8-c198d6a8c69b
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-25_04-19-58__468d23fa-8c6f-44a2-89a8-c198d6a8c69b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.4.242
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['29481', '29482', '29483', '29484', '29485']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 29481:29481 -p 29482:29482 -p 29483:29483 -p 29484:29484 -p 29485:29485 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29483 --rest-port=29481 --tcp-port=29482 --discv5-udp-port=29484 --rest-address=0.0.0.0 --nat=extip:172.18.4.242 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2183f8de8be9fbb79e4f6b0b2d6b6b00ffed6b99f65b1ab1e49c2f45ca6b3be0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29485 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.4.242 waku a3328f71a81cbde4436b06fce5bcf6b7675b28931f5182d7c336746b286d526f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID a3328f71a81c. Setting up logs at ./log/docker/receiving_node1_2024-08-25_04-19-58__468d23fa-8c6f-44a2-89a8-c198d6a8c69b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 29481
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29481/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29481/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.4.242/tcp/29482/p2p/16Uiu2HAm63QMZ8LekkoK3DVuBmZHq8JWN4edBjSan51bYs7K5KLL","/ip4/172.18.4.242/tcp/29483/ws/p2p/16Uiu2HAm63QMZ8LekkoK3DVuBmZHq8JWN4edBjSan51bYs7K5KLL"],"enrUri":"enr:-LO4QE0s5sWgocNCef988Kb6McN6-504CPSF9p6eZQvnTkHEfswMBJIUSdt9x5qLIw_PF0dy-R3lysKwysbB1_4JeaUBgmlkgnY0gmlwhKwSBPKKbXVsdGlhZGRyc4wACgSsEgTyBnMr3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKdvByCaAaO7Y-WQdbfsI5zr-UJQ0xoZea2HGKB-EGOaYN0Y3CCcyqDdWRwgnMshXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-25_04-19-58__468d23fa-8c6f-44a2-89a8-c198d6a8c69b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.104.127
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['13117', '13118', '13119', '13120', '13121']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 13117:13117 -p 13118:13118 -p 13119:13119 -p 13120:13120 -p 13121:13121 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=13119 --rest-port=13117 --tcp-port=13118 --discv5-udp-port=13120 --rest-address=0.0.0.0 --nat=extip:172.18.104.127 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a2e6a8aff77bacc9df2bfcfa5ec28c87fafd17df94b03af1d0d04a8d3aa3be2f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=13121 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.104.127 waku af6399d8aa09dee221e1f1c9689ec88f588d379092fd5b387f6079f5cb14295d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID af6399d8aa09. Setting up logs at ./log/docker/receiving_node2_2024-08-25_04-19-58__468d23fa-8c6f-44a2-89a8-c198d6a8c69b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 13117
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13117/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13117/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.104.127/tcp/13118/p2p/16Uiu2HAm4YX1jYvjaaiq7GQcgyU2K36hMj2e6ZzGutnSivmDdLqW","/ip4/172.18.104.127/tcp/13119/ws/p2p/16Uiu2HAm4YX1jYvjaaiq7GQcgyU2K36hMj2e6ZzGutnSivmDdLqW"],"enrUri":"enr:-LO4QF-W9Ms_PL9Ked0jq5zkCV9QQ8-at5Ajtmq8MrQBGcItMgSq02QZvaFdkH_t_n7cDYDBzUxhVTl6XTqU90EfoLQBgmlkgnY0gmlwhKwSaH-KbXVsdGlhZGRyc4wACgSsEmh_BjM_3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKHehwInQcAFzdt4hu2b_kfS_MgTRGMwpdXpeXnL2XHSYN0Y3CCMz6DdWRwgjNAhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13117/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.4.242/tcp/29482/p2p/16Uiu2HAm63QMZ8LekkoK3DVuBmZHq8JWN4edBjSan51bYs7K5KLL"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-25_04-19-58__468d23fa-8c6f-44a2-89a8-c198d6a8c69b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.79.230
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['23815', '23816', '23817', '23818', '23819']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 23815:23815 -p 23816:23816 -p 23817:23817 -p 23818:23818 -p 23819:23819 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23817 --rest-port=23815 --tcp-port=23816 --discv5-udp-port=23818 --rest-address=0.0.0.0 --nat=extip:172.18.79.230 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=abc74aabd4a5feb86064a9d8fd1efac4fdf4b6cffb905f6cedcbe9bc5ad9d4cc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23819 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QE0s5sWgocNCef988Kb6McN6-504CPSF9p6eZQvnTkHEfswMBJIUSdt9x5qLIw_PF0dy-R3lysKwysbB1_4JeaUBgmlkgnY0gmlwhKwSBPKKbXVsdGlhZGRyc4wACgSsEgTyBnMr3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKdvByCaAaO7Y-WQdbfsI5zr-UJQ0xoZea2HGKB-EGOaYN0Y3CCcyqDdWRwgnMshXdha3UyCQ --lightpushnode=/ip4/172.18.4.242/tcp/29482/p2p/16Uiu2HAm63QMZ8LekkoK3DVuBmZHq8JWN4edBjSan51bYs7K5KLL --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.79.230 waku 1823fe33df931a31b61813ff6ab9ba7bea7777c063c9f992b32294dcd20020c2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 1823fe33df93. Setting up logs at ./log/docker/lightpush_node1_2024-08-25_04-19-58__468d23fa-8c6f-44a2-89a8-c198d6a8c69b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 23815
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23815/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23815/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.79.230/tcp/23816/p2p/16Uiu2HAkwRQzBKwBczMj3MV389qayc2YG5woHn5awCjWTMw1aw3Z","/ip4/172.18.79.230/tcp/23817/ws/p2p/16Uiu2HAkwRQzBKwBczMj3MV389qayc2YG5woHn5awCjWTMw1aw3Z"],"enrUri":"enr:-LO4QCDuy_NCbVdv9hkL9WyvNz79FhKbyUyLs-5irnbLbZcCV1HhX726u7iVIHM6VgnXLHqJd2iev-jO_Lfixmk0gUABgmlkgnY0gmlwhKwST-aKbXVsdGlhZGRyc4wACgSsEk_mBl0J3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIdpmu6QiFIcH0CC83qYs6aXR3RzoV1gef_KZNFtGAwFIN0Y3CCXQiDdWRwgl0KhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23815/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.4.242/tcp/29482/p2p/16Uiu2HAm63QMZ8LekkoK3DVuBmZHq8JWN4edBjSan51bYs7K5KLL"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23815/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.104.127/tcp/13118/p2p/16Uiu2HAm4YX1jYvjaaiq7GQcgyU2K36hMj2e6ZzGutnSivmDdLqW"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29481/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13117/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23815/lightpush/v1/message" -H "Content-Type: application/json" -d '{"message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724559603997862656}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:23815/lightpush/v1/message. Response content: b'Failed to request a message push: Lightpush request has not been published to any peers. msg_hash: 0x7eb75f83dc90610813989ca5104581f94d2afe0047fc8a4862bd1b62f272558e'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id a3328f71a81c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id af6399d8aa09
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 1823fe33df93
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.