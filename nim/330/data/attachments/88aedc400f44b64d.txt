[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_subscribe_and_publish_on_another_content_topic_from_another_shard with id: 2024-08-25_04-25-45__b0de88df-e854-4a00-9e33-72e422ea2d53
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node1_2024-08-25_04-25-45__b0de88df-e854-4a00-9e33-72e422ea2d53__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.19.113
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['45257', '45258', '45259', '45260', '45261']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 45257:45257 -p 45258:45258 -p 45259:45259 -p 45260:45260 -p 45261:45261 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45259 --rest-port=45257 --tcp-port=45258 --discv5-udp-port=45260 --rest-address=0.0.0.0 --nat=extip:172.18.19.113 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=5c80b2dc76c9a2edef9a9ecf98b66ee371bce0dbdacf6725d66dafead2fdb89d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45261 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.70.141
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['19377', '19378', '19379', '19380', '19381']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 19377:19377 -p 19378:19378 -p 19379:19379 -p 19380:19380 -p 19381:19381 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19379 --rest-port=19377 --tcp-port=19378 --discv5-udp-port=19380 --rest-address=0.0.0.0 --nat=extip:172.18.70.141 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=cc7452cea4ef6301bece6f37c1fd88b1ff69cfe6df97485d71d0c720d66b1e6d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19381 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.70.141 waku e95170120a39f0ac32e5291147b5e893180f25d7e7f7c6092669e6e0f6f6dd88
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID e95170120a39. Setting up logs at ./log/docker/node1_2024-08-25_04-25-45__b0de88df-e854-4a00-9e33-72e422ea2d53__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 19377
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19377/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19377/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.70.141/tcp/19378/p2p/16Uiu2HAmG5boLE2hqzZCebCwStotCAa2W8wbKLSwupzvULKvJ5oM","/ip4/172.18.70.141/tcp/19379/ws/p2p/16Uiu2HAmG5boLE2hqzZCebCwStotCAa2W8wbKLSwupzvULKvJ5oM"],"enrUri":"enr:-LO4QD_L9HO5nh0zp6SlVWmgAyGPrk5Cip2oLcrEuu45Y-b-bGq-s-3uGFgsh1HReQqtNSP2SRXxvumwvnO63IgpUVUBgmlkgnY0gmlwhKwSRo2KbXVsdGlhZGRyc4wACgSsEkaNBkuz3QOCcnOFAAIBAACJc2VjcDI1NmsxoQMy4RUf0Rjw7wAOH-BPtsm4IfMozh6WiAfXOGZYqNjCiIN0Y3CCS7KDdWRwgku0hXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node2_2024-08-25_04-25-45__b0de88df-e854-4a00-9e33-72e422ea2d53__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.206.161
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['41948', '41949', '41950', '41951', '41952']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 41948:41948 -p 41949:41949 -p 41950:41950 -p 41951:41951 -p 41952:41952 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=41950 --rest-port=41948 --tcp-port=41949 --discv5-udp-port=41951 --rest-address=0.0.0.0 --nat=extip:172.18.206.161 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=d0d1c3b4ff2bbe3ac02b1d66edde1ee20b32dde6cdd0794cdc28aaa35aa3dfcc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=41952 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QD_L9HO5nh0zp6SlVWmgAyGPrk5Cip2oLcrEuu45Y-b-bGq-s-3uGFgsh1HReQqtNSP2SRXxvumwvnO63IgpUVUBgmlkgnY0gmlwhKwSRo2KbXVsdGlhZGRyc4wACgSsEkaNBkuz3QOCcnOFAAIBAACJc2VjcDI1NmsxoQMy4RUf0Rjw7wAOH-BPtsm4IfMozh6WiAfXOGZYqNjCiIN0Y3CCS7KDdWRwgku0hXdha3UyBQ --content-topic=/myapp/1/latest/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.206.161 waku db07a655bf82722107cd5459f22225fe8252f62c3a24e9f91e9952ad4f2523c2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID db07a655bf82. Setting up logs at ./log/docker/node2_2024-08-25_04-25-45__b0de88df-e854-4a00-9e33-72e422ea2d53__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 41948
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41948/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41948/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.206.161/tcp/41949/p2p/16Uiu2HAmNyNU9gdWNrxaD9VpXm3K1wVgsWo6siKLgPNuhrdtVTCU","/ip4/172.18.206.161/tcp/41950/ws/p2p/16Uiu2HAmNyNU9gdWNrxaD9VpXm3K1wVgsWo6siKLgPNuhrdtVTCU"],"enrUri":"enr:-LO4QPxTLmFpwUcEIBujcn5gp4opsBiPKPiP3vO3wyTItwOySC2k3TvOfx5lt96EPubuMcolWK8n_87WFozUOjxX9ZUBgmlkgnY0gmlwhKwSzqGKbXVsdGlhZGRyc4wACgSsEs6hBqPe3QOCcnOFAAIBAACJc2VjcDI1NmsxoQOZSlVDBAt8MBcpVUqfszy26EfV9Fake8_zzro5ir5FkYN0Y3CCo92DdWRwgqPfhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41948/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.70.141/tcp/19378/p2p/16Uiu2HAmG5boLE2hqzZCebCwStotCAa2W8wbKLSwupzvULKvJ5oM"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19377/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/toychat/2/huilong/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41948/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/toychat/2/huilong/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19377/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19377/relay/v1/auto/messages/%2Ftoychat%2F2%2Fhuilong%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/toychat/2/huilong/proto","version":0,"timestamp":1724559949268145408,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41948/relay/v1/auto/messages/%2Ftoychat%2F2%2Fhuilong%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/toychat/2/huilong/proto","version":0,"timestamp":1724559949268145408,"ephemeral":false}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19377/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19377/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1724559949384410880,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41948/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1724559949384410880,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id e95170120a39
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id db07a655bf82
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.