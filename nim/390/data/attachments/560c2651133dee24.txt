[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_valid_payloads_random_user_message_limit with id: 2024-10-13_04-15-29__539ebb8e-3204-402d-ba16-f4c6837933fb
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-13_04-15-29__539ebb8e-3204-402d-ba16-f4c6837933fb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.91.169
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['30758', '30759', '30760', '30761', '30762']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes ['/home/runner/work/waku-interop-tests/waku-interop-tests/rln_tree_jqao_1:/etc/rln_tree', '/home/runner/work/waku-interop-tests/waku-interop-tests/keystore_jqao_1:/keystore']
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 30758:30758 -p 30759:30759 -p 30760:30760 -p 30761:30761 -p 30762:30762 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=30760 --rest-port=30758 --tcp-port=30759 --discv5-udp-port=30761 --rest-address=0.0.0.0 --nat=extip:172.18.91.169 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4edb181fac74c681dcca5bbee54c1bed22e4be1e4feeacfb29eebf1dacc0e01a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=30762 --metrics-logging=true --relay=true --rln-relay-membership-index=1 --rln-relay-user-message-limit=3 --rln-relay-epoch-sec=1 --rln-relay=true --rln-relay-cred-path=/keystore/keystore.json --rln-relay-cred-password=password
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.91.169 waku 2a1f9e9f57d35ee70ae7b2830294b861a7adb84e7be81a664eb5782b87be461b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 2a1f9e9f57d3. Setting up logs at ./log/docker/node1_2024-10-13_04-15-29__539ebb8e-3204-402d-ba16-f4c6837933fb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 30758
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30758/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Initializing","protocolsHealth":[{"Rln Relay":"Ready"}]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30758/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[{"Rln Relay":"Ready"}]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30758/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.91.169/tcp/30759/p2p/16Uiu2HAmJbjzif2X5YY87Nwy9Y1gh1nFn8ikP33PDLHBhTBFXXdn","/ip4/172.18.91.169/tcp/30760/ws/p2p/16Uiu2HAmJbjzif2X5YY87Nwy9Y1gh1nFn8ikP33PDLHBhTBFXXdn"],"enrUri":"enr:-LO4QLR8E-Q4t91sZKZqzpCIOwn8b3V3444TvG9OmzWsDmw4LGd1J50glANTrd5BLkSUAqmpaLadoSVnwj5t67naLWEBgmlkgnY0gmlwhKwSW6mKbXVsdGlhZGRyc4wACgSsElupBngo3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNYUSXz9dyj8vptRoAjnWPtthPXoJqIwQx4QYJdlK8O3YN0Y3CCeCeDdWRwgngphXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-10-13_04-15-29__539ebb8e-3204-402d-ba16-f4c6837933fb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.39.192
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['60084', '60085', '60086', '60087', '60088']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes ['/home/runner/work/waku-interop-tests/waku-interop-tests/rln_tree_mkdd_2:/etc/rln_tree', '/home/runner/work/waku-interop-tests/waku-interop-tests/keystore_mkdd_2:/keystore']
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 60084:60084 -p 60085:60085 -p 60086:60086 -p 60087:60087 -p 60088:60088 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=60086 --rest-port=60084 --tcp-port=60085 --discv5-udp-port=60087 --rest-address=0.0.0.0 --nat=extip:172.18.39.192 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=af11fc1fb8fa2cb8c24ba5ef2fba02d990ebb168ea2bab46e9ed320aa3cc8a94 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=60088 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QLR8E-Q4t91sZKZqzpCIOwn8b3V3444TvG9OmzWsDmw4LGd1J50glANTrd5BLkSUAqmpaLadoSVnwj5t67naLWEBgmlkgnY0gmlwhKwSW6mKbXVsdGlhZGRyc4wACgSsElupBngo3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNYUSXz9dyj8vptRoAjnWPtthPXoJqIwQx4QYJdlK8O3YN0Y3CCeCeDdWRwgngphXdha3UyAQ --rln-relay-membership-index=1 --rln-relay-user-message-limit=3 --rln-relay-epoch-sec=1 --rln-relay=true --rln-relay-cred-path=/keystore/keystore.json --rln-relay-cred-password=password
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.39.192 waku 432503cf0be81d1b508a0011714e433b285563889e001f23e3fec49043fd0e86
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 432503cf0be8. Setting up logs at ./log/docker/node2_2024-10-13_04-15-29__539ebb8e-3204-402d-ba16-f4c6837933fb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 60084
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60084/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Initializing","protocolsHealth":[{"Rln Relay":"Ready"}]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60084/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[{"Rln Relay":"Ready"}]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60084/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.39.192/tcp/60085/p2p/16Uiu2HAmRsR4BGKfRHxr7hkPsoxtPj1PgjT3rrjEq8Hd4Uk2oz8R","/ip4/172.18.39.192/tcp/60086/ws/p2p/16Uiu2HAmRsR4BGKfRHxr7hkPsoxtPj1PgjT3rrjEq8Hd4Uk2oz8R"],"enrUri":"enr:-LO4QIqt4bUxAfhNw5QoF81J7RJ8YD-bx4fNVjD58VyYNTAtcCsohgOeVGPcb-hweRNJSbxvUKLnFiJxfjcRIvLOLOMBgmlkgnY0gmlwhKwSJ8CKbXVsdGlhZGRyc4wACgSsEifABuq23QOCcnOFAAMBAACJc2VjcDI1NmsxoQPEVtVwMucNhTyzrZNwtQBUdFo-xEMDVt7ke2WddfipEoN0Y3CC6rWDdWRwguq3hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60084/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.91.169/tcp/30759/p2p/16Uiu2HAmJbjzif2X5YY87Nwy9Y1gh1nFn8ikP33PDLHBhTBFXXdn"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30758/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/1/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60084/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/1/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.relay.test_rln:test_rln.py:128 Running test with payload A simple string
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30758/relay/v1/messages/%2Fwaku%2F2%2Frs%2F1%2F0" -H "Content-Type: application/json" -d '{"payload": "SGVsbG8gV29ybGQh", "contentTopic": "/test/1/waku-rln-relay/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.relay.test_rln:test_rln.py:128 Running test with payload An integer
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30758/relay/v1/messages/%2Fwaku%2F2%2Frs%2F1%2F0" -H "Content-Type: application/json" -d '{"payload": "MTIzNDU2Nzg5MA==", "contentTopic": "/test/1/waku-rln-relay/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.relay.test_rln:test_rln.py:128 Running test with payload A dictionary
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30758/relay/v1/messages/%2Fwaku%2F2%2Frs%2F1%2F0" -H "Content-Type: application/json" -d '{"payload": "eyJrZXkiOiAidmFsdWUifQ==", "contentTopic": "/test/1/waku-rln-relay/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 2a1f9e9f57d3
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 432503cf0be8
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.