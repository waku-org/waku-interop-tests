{"uid":"d8e54531cf25b1ed","name":"test_publish_after_node1_restarts","fullName":"tests.relay.test_publish.TestRelayPublish#test_publish_after_node1_restarts","historyId":"ac4c595ebfa5f8d963dda5d51f886384","time":{"start":1728793515809,"stop":1728793520983,"duration":5174},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"set_allure_env_variables","time":{"start":1728792718630,"stop":1728792718630,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"check_waku_log_errors","time":{"start":1728793511333,"stop":1728793511333,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_id","time":{"start":1728793511333,"stop":1728793511334,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes","time":{"start":1728793511333,"stop":1728793511333,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail","time":{"start":1728793511333,"stop":1728793511333,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_setup","time":{"start":1728793511334,"stop":1728793511334,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"common_setup","time":{"start":1728793511334,"stop":1728793511334,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"relay_setup","time":{"start":1728793511334,"stop":1728793511335,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_main_relay_nodes","time":{"start":1728793511335,"stop":1728793515652,"duration":4317},"status":"passed","steps":[{"name":"add_node_peer","time":{"start":1728793515581,"stop":1728793515652,"duration":71},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"args","value":"(<tests.relay.test_publish.TestRelayPublish object at 0x7f15c4220170>, <src.node.waku_node.WakuNode object at 0x7f15c4220440>, ['/ip4/172.18.4.228/tcp/64793/p2p/16Uiu2HAmRsX9fr7MWYQiVSFFabS4ddCVMkeRBXbJLe1PyqS9n3kW'])"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"subscribe_main_relay_nodes","time":{"start":1728793515652,"stop":1728793515682,"duration":30},"status":"passed","steps":[{"name":"ensure_relay_subscriptions_on_nodes","time":{"start":1728793515653,"stop":1728793515682,"duration":29},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node_list","value":"[<src.node.waku_node.WakuNode object at 0x7f15bf7adb80>, <src.node.waku_node.WakuNode object at 0x7f15c4220440>]"},{"name":"pubsub_topic_list","value":"['/waku/2/rs/3/1']"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"relay_warm_up","time":{"start":1728793515682,"stop":1728793515809,"duration":127},"status":"passed","steps":[{"name":"wait_for_published_message_to_reach_relay_peer","time":{"start":1728793515684,"stop":1728793515809,"duration":125},"status":"passed","steps":[{"name":"check_published_message_reaches_relay_peer","time":{"start":1728793515685,"stop":1728793515808,"duration":123},"status":"passed","steps":[{"name":"assert_received_message","time":{"start":1728793515798,"stop":1728793515798,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1728793515684331008}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"assert_received_message","time":{"start":1728793515808,"stop":1728793515808,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1728793515684331008}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1728793515684331008}"},{"name":"pubsub_topic","value":"None"},{"name":"message_propagation_delay","value":"0.1"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"timeout_duration","value":"120"},{"name":"time_between_retries","value":"1"},{"name":"pubsub_topic","value":"None"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":4,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"testStage":{"status":"passed","steps":[{"name":"check_published_message_reaches_relay_peer","time":{"start":1728793515810,"stop":1728793515953,"duration":143},"status":"passed","steps":[{"name":"create_message","time":{"start":1728793515810,"stop":1728793515810,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"assert_received_message","time":{"start":1728793515944,"stop":1728793515944,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1728793515809819136}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"assert_received_message","time":{"start":1728793515952,"stop":1728793515953,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1728793515809819136}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"message","value":"None"},{"name":"pubsub_topic","value":"None"},{"name":"message_propagation_delay","value":"0.1"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"subscribe_and_publish_with_retry","time":{"start":1728793519680,"stop":1728793520982,"duration":1302},"status":"passed","steps":[{"name":"ensure_relay_subscriptions_on_nodes","time":{"start":1728793519680,"stop":1728793519727,"duration":47},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node_list","value":"[<src.node.waku_node.WakuNode object at 0x7f15bf7adb80>, <src.node.waku_node.WakuNode object at 0x7f15c4220440>]"},{"name":"pubsub_topic_list","value":"['/waku/2/rs/3/1']"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"check_published_message_reaches_relay_peer","time":{"start":1728793519727,"stop":1728793519851,"duration":124},"status":"failed","statusMessage":"AssertionError: Peer NODE_2:wakuorg/nwaku:latest couldn't find any messages\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.7/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/relay.py\", line 125, in check_published_message_reaches_relay_peer\n    assert get_messages_response, f\"Peer NODE_{index + 1}:{peer.image} couldn't find any messages\"\n           ^^^^^^^^^^^^^^^^^^^^^\n","steps":[{"name":"create_message","time":{"start":1728793519727,"stop":1728793519727,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"assert_received_message","time":{"start":1728793519846,"stop":1728793519846,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1728793519726949376}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"message","value":"None"},{"name":"pubsub_topic","value":"None"},{"name":"message_propagation_delay","value":"0.1"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":true,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"ensure_relay_subscriptions_on_nodes","time":{"start":1728793520851,"stop":1728793520860,"duration":9},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node_list","value":"[<src.node.waku_node.WakuNode object at 0x7f15bf7adb80>, <src.node.waku_node.WakuNode object at 0x7f15c4220440>]"},{"name":"pubsub_topic_list","value":"['/waku/2/rs/3/1']"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"check_published_message_reaches_relay_peer","time":{"start":1728793520861,"stop":1728793520982,"duration":121},"status":"passed","steps":[{"name":"create_message","time":{"start":1728793520868,"stop":1728793520868,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"assert_received_message","time":{"start":1728793520977,"stop":1728793520977,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1728793520868041728}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"assert_received_message","time":{"start":1728793520982,"stop":1728793520982,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1728793520868041728}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"message","value":"None"},{"name":"pubsub_topic","value":"None"},{"name":"message_propagation_delay","value":"0.1"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<tests.relay.test_publish.TestRelayPublish object at 0x7f15c4220170>, [<src.node.waku_node.WakuNode object at 0x7f15bf7adb80>, <src.node.waku_node.WakuNode object at 0x7f15c4220440>], ['/waku/2/rs/3/1'])"}],"shouldDisplayMessage":false,"stepsCount":9,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"c1322a72e6858c42","name":"log","source":"c1322a72e6858c42.txt","type":"text/plain","size":19276}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":14,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"test_setup::0","time":{"start":1728793520985,"stop":1728793520990,"duration":5},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes::0","time":{"start":1728793520990,"stop":1728793526207,"duration":5217},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"check_waku_log_errors::0","time":{"start":1728793526207,"stop":1728793526229,"duration":22},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail::0","time":{"start":1728793526230,"stop":1728793526230,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"set_allure_env_variables::0","time":{"start":1728794751683,"stop":1728794751683,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"flaky(reruns=5)"},{"name":"tag","value":"@pytest.mark.usefixtures('setup_main_relay_nodes', 'subscribe_main_relay_nodes', 'relay_warm_up')"},{"name":"parentSuite","value":"tests.relay"},{"name":"suite","value":"test_publish"},{"name":"subSuite","value":"TestRelayPublish"},{"name":"host","value":"fv-az1215-890"},{"name":"thread","value":"2249-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.relay.test_publish"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":0,"broken":0,"skipped":0,"passed":82,"unknown":0,"total":82},"items":[{"uid":"7ce80ef80182b4c8","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/389//#testresult/7ce80ef80182b4c8","status":"passed","time":{"start":1728707131880,"stop":1728707137311,"duration":5431}},{"uid":"14e80eb57cd1bbc","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/388//#testresult/14e80eb57cd1bbc","status":"passed","time":{"start":1728620744313,"stop":1728620749863,"duration":5550}},{"uid":"bb7ae19b8dffda4a","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/387//#testresult/bb7ae19b8dffda4a","status":"passed","time":{"start":1728534344782,"stop":1728534350223,"duration":5441}},{"uid":"5e905902de30f398","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/385//#testresult/5e905902de30f398","status":"passed","time":{"start":1728361549234,"stop":1728361554472,"duration":5238}},{"uid":"661ea87a894ef21d","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/384//#testresult/661ea87a894ef21d","status":"passed","time":{"start":1728275003563,"stop":1728275009677,"duration":6114}},{"uid":"218b509030101ba3","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/383//#testresult/218b509030101ba3","status":"passed","time":{"start":1728188536117,"stop":1728188542085,"duration":5968}},{"uid":"771a5ce8604b6860","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/382//#testresult/771a5ce8604b6860","status":"passed","time":{"start":1728102169211,"stop":1728102174479,"duration":5268}},{"uid":"5e77c76ecfc757e","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/381//#testresult/5e77c76ecfc757e","status":"passed","time":{"start":1728015789563,"stop":1728015794912,"duration":5349}},{"uid":"6037a3780a21a54f","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/380//#testresult/6037a3780a21a54f","status":"passed","time":{"start":1727941702927,"stop":1727941708288,"duration":5361}},{"uid":"904b0b3182ab7b8f","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/379//#testresult/904b0b3182ab7b8f","status":"passed","time":{"start":1727929420301,"stop":1727929426307,"duration":6006}},{"uid":"d86a46e1bbd56a5e","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/378//#testresult/d86a46e1bbd56a5e","status":"passed","time":{"start":1727842972365,"stop":1727842978181,"duration":5816}},{"uid":"85980149fd603bd8","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/377//#testresult/85980149fd603bd8","status":"passed","time":{"start":1727756598964,"stop":1727756604081,"duration":5117}},{"uid":"f6708c41f7542845","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/376//#testresult/f6708c41f7542845","status":"passed","time":{"start":1727670222826,"stop":1727670228835,"duration":6009}},{"uid":"2635006b6bb1a7ec","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/375//#testresult/2635006b6bb1a7ec","status":"passed","time":{"start":1727583745932,"stop":1727583751106,"duration":5174}},{"uid":"8437bb3736e55444","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/374//#testresult/8437bb3736e55444","status":"passed","time":{"start":1727497323670,"stop":1727497329223,"duration":5553}},{"uid":"39b58a0a51ee1ace","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/373//#testresult/39b58a0a51ee1ace","status":"passed","time":{"start":1727410977763,"stop":1727410983458,"duration":5695}},{"uid":"9e1c14643bd086e1","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/372//#testresult/9e1c14643bd086e1","status":"passed","time":{"start":1727324592668,"stop":1727324598680,"duration":6012}},{"uid":"37e95d49d40b1c7c","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/371//#testresult/37e95d49d40b1c7c","status":"passed","time":{"start":1727238187920,"stop":1727238193081,"duration":5161}},{"uid":"6b80887eb0f55281","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/370//#testresult/6b80887eb0f55281","status":"passed","time":{"start":1727151765457,"stop":1727151770707,"duration":5250}},{"uid":"ccda281e6de49644","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/369//#testresult/ccda281e6de49644","status":"passed","time":{"start":1727065373862,"stop":1727065379900,"duration":6038}}]},"tags":["@pytest.mark.usefixtures('setup_main_relay_nodes', 'subscribe_main_relay_nodes', 'relay_warm_up')","flaky(reruns=5)"]},"source":"d8e54531cf25b1ed.json","parameterValues":[]}