[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_cant_retrieve_messages_on_not_subscribed_content_topic with id: 2024-09-12_04-29-11__dd546954-04ee-4093-8210-b52ca2d8820b
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-12_04-29-11__dd546954-04ee-4093-8210-b52ca2d8820b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.97.178
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['49106', '49107', '49108', '49109', '49110']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 49106:49106 -p 49107:49107 -p 49108:49108 -p 49109:49109 -p 49110:49110 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=49108 --rest-port=49106 --tcp-port=49107 --discv5-udp-port=49109 --rest-address=0.0.0.0 --nat=extip:172.18.97.178 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=c667fe8da1bbe7bd4cc7399a1cb95aed1c47c40d13c3fa9ac3e9de8fe5bfd7dc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=49110 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.97.178 waku 327a3639cc1924e9e7578de0a261da838df3ecc95f6b906b290ce4d04ffeb2d3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 327a3639cc19. Setting up logs at ./log/docker/node1_2024-09-12_04-29-11__dd546954-04ee-4093-8210-b52ca2d8820b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 49106
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49106/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49106/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.97.178/tcp/49107/p2p/16Uiu2HAmAbMXWjzPa1P8qsGrBGKNjn7mGfey6oa1jgqPcvUytLTd","/ip4/172.18.97.178/tcp/49108/ws/p2p/16Uiu2HAmAbMXWjzPa1P8qsGrBGKNjn7mGfey6oa1jgqPcvUytLTd"],"enrUri":"enr:-LO4QBxGWiDAzQUVycyUSv6_BTM-7t9rEIbwuwzuMxGy-aCBAkOJe7etMwMZVS9MSPRzquQqheOqCio2OO3SipOW1KcBgmlkgnY0gmlwhKwSYbKKbXVsdGlhZGRyc4wACgSsEmGyBr_U3QOCcnOFAAIBAACJc2VjcDI1NmsxoQLhWj87MbX00ayPoqhxb_JGHHnlbvW_pY6z0FCdnxV1zIN0Y3CCv9ODdWRwgr_VhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-12_04-29-11__dd546954-04ee-4093-8210-b52ca2d8820b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.138.0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['16095', '16096', '16097', '16098', '16099']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 16095:16095 -p 16096:16096 -p 16097:16097 -p 16098:16098 -p 16099:16099 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=16097 --rest-port=16095 --tcp-port=16096 --discv5-udp-port=16098 --rest-address=0.0.0.0 --nat=extip:172.18.138.0 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=79ded7ea64b26f6826a6cad7fb341d91c00a4a72ac8aef63d58efccb1d3c322e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=16099 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QBxGWiDAzQUVycyUSv6_BTM-7t9rEIbwuwzuMxGy-aCBAkOJe7etMwMZVS9MSPRzquQqheOqCio2OO3SipOW1KcBgmlkgnY0gmlwhKwSYbKKbXVsdGlhZGRyc4wACgSsEmGyBr_U3QOCcnOFAAIBAACJc2VjcDI1NmsxoQLhWj87MbX00ayPoqhxb_JGHHnlbvW_pY6z0FCdnxV1zIN0Y3CCv9ODdWRwgr_VhXdha3UyBQ --content-topic=/myapp/1/latest/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.138.0 waku f6a002c1d3c21a3473fa5b4d923f1bbacc173c49f2fb29e6bd1f17a457e7805b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID f6a002c1d3c2. Setting up logs at ./log/docker/node2_2024-09-12_04-29-11__dd546954-04ee-4093-8210-b52ca2d8820b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 16095
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16095/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16095/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.138.0/tcp/16096/p2p/16Uiu2HAmEwKR6kYheYh69ziwv1qgCUw3cKJCQyadR9MZVzE2UqqB","/ip4/172.18.138.0/tcp/16097/ws/p2p/16Uiu2HAmEwKR6kYheYh69ziwv1qgCUw3cKJCQyadR9MZVzE2UqqB"],"enrUri":"enr:-LO4QA7M83QaeqXS9DBXmI8XXil4uNWwhnRyUCG1YRIph1mxPqk3tO-R8l1AcsTpaf0HfLADgpMaBhB61obfN2Q7qg0BgmlkgnY0gmlwhKwSigCKbXVsdGlhZGRyc4wACgSsEooABj7h3QOCcnOFAAIBAACJc2VjcDI1NmsxoQMh5jl1JMuqlW_EnDhZHUzwYa9CXcYWC_guS7NuR5lcUoN0Y3CCPuCDdWRwgj7ihXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16095/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.97.178/tcp/49107/p2p/16Uiu2HAmAbMXWjzPa1P8qsGrBGKNjn7mGfey6oa1jgqPcvUytLTd"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49106/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16095/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49106/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49106/relay/v1/auto/messages/%2Ftoychat%2F2%2Fhuilong%2Fproto" -H "Content-Type: application/json" -d 'None'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:49106/relay/v1/auto/messages/%2Ftoychat%2F2%2Fhuilong%2Fproto. Response content: b'/toychat/2/huilong/proto'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 327a3639cc19
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id f6a002c1d3c2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.