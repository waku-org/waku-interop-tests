[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_lightpush_with_a_single_receiving_node with id: 2024-09-12_04-23-58__0b52d557-5044-43ef-85d0-a691c20a20df
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-12_04-23-58__0b52d557-5044-43ef-85d0-a691c20a20df__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.178.122
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['59715', '59716', '59717', '59718', '59719']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 59715:59715 -p 59716:59716 -p 59717:59717 -p 59718:59718 -p 59719:59719 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=59717 --rest-port=59715 --tcp-port=59716 --discv5-udp-port=59718 --rest-address=0.0.0.0 --nat=extip:172.18.178.122 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=98f9c2e1f104fd2a56addb3a1d65fc3efedd732feddbdc5fd4cebf18e8f3c5fc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=59719 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.178.122 waku bdfe066a702b9b3d6421108506953228848d674d785c61e911cb21d5e1f65a60
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID bdfe066a702b. Setting up logs at ./log/docker/receiving_node1_2024-09-12_04-23-58__0b52d557-5044-43ef-85d0-a691c20a20df__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 59715
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59715/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59715/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.178.122/tcp/59716/p2p/16Uiu2HAm2XRt3kbTr8K6nra17g5kcx69ZtHK7qicrzP2CAp3Nw9d","/ip4/172.18.178.122/tcp/59717/ws/p2p/16Uiu2HAm2XRt3kbTr8K6nra17g5kcx69ZtHK7qicrzP2CAp3Nw9d"],"enrUri":"enr:-LO4QAGpWz51nOXLFl4lCRWa4OOWbNWckaMvawNLRRnqmv9fAfViJObXxG44Hd2NRtnZMB1rsbGO3WOLUqIIdQEFuzUBgmlkgnY0gmlwhKwSsnqKbXVsdGlhZGRyc4wACgSsErJ6BulF3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJpe1n68C198a8GEPG4HkTQDfKdW0GvP03Ll2cJdEpEFIN0Y3CC6USDdWRwgulGhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-12_04-23-58__0b52d557-5044-43ef-85d0-a691c20a20df__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.126.57
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['6701', '6702', '6703', '6704', '6705']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 6701:6701 -p 6702:6702 -p 6703:6703 -p 6704:6704 -p 6705:6705 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6703 --rest-port=6701 --tcp-port=6702 --discv5-udp-port=6704 --rest-address=0.0.0.0 --nat=extip:172.18.126.57 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ff82bea24ba545b0cacb8ea733b355e02cd7f92f41acabc3ab307e1dedc7cdb3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6705 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QAGpWz51nOXLFl4lCRWa4OOWbNWckaMvawNLRRnqmv9fAfViJObXxG44Hd2NRtnZMB1rsbGO3WOLUqIIdQEFuzUBgmlkgnY0gmlwhKwSsnqKbXVsdGlhZGRyc4wACgSsErJ6BulF3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJpe1n68C198a8GEPG4HkTQDfKdW0GvP03Ll2cJdEpEFIN0Y3CC6USDdWRwgulGhXdha3UyCQ --lightpushnode=/ip4/172.18.178.122/tcp/59716/p2p/16Uiu2HAm2XRt3kbTr8K6nra17g5kcx69ZtHK7qicrzP2CAp3Nw9d --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.126.57 waku 7c173d3c47b6170acb8d10b02425689c4f1c546b6fc57e84c8e6f95cce93ad17
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 7c173d3c47b6. Setting up logs at ./log/docker/lightpush_node1_2024-09-12_04-23-58__0b52d557-5044-43ef-85d0-a691c20a20df__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 6701
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6701/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6701/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.126.57/tcp/6702/p2p/16Uiu2HAmDziomTn5Bv6r3kaPA1PnZEA74fAjBB1WjbtUhvaDduvM","/ip4/172.18.126.57/tcp/6703/ws/p2p/16Uiu2HAmDziomTn5Bv6r3kaPA1PnZEA74fAjBB1WjbtUhvaDduvM"],"enrUri":"enr:-LO4QJzrKALVkOQN_A69ryWfTKVYcAMWdib0R5MvpHJy9i87TkjCqE_syzR4CcO_VdFFfCT1TIcYjay5B1KXMFFv760BgmlkgnY0gmlwhKwSfjmKbXVsdGlhZGRyc4wACgSsEn45Bhov3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMT6bpf8lOJBLL5ut9HVdztC_19wgdA3FfRXzmehhRrpoN0Y3CCGi6DdWRwghowhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6701/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.178.122/tcp/59716/p2p/16Uiu2HAm2XRt3kbTr8K6nra17g5kcx69ZtHK7qicrzP2CAp3Nw9d"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59715/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6701/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1726115041654622464}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:6701/lightpush/v1/message. Response content: b'Failed to request a message push: not_published_to_any_peer'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id bdfe066a702b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 7c173d3c47b6
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/lightpush_node1_2024-09-12_04-23-58__0b52d557-5044-43ef-85d0-a691c20a20df__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/receiving_node1_2024-09-12_04-23-58__0b52d557-5044-43ef-85d0-a691c20a20df__wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_lightpush_with_a_single_receiving_node with id: 2024-09-12_04-24-05__18f57a0d-cd69-4f6a-8ee9-e6555dfd29f2
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-12_04-24-05__18f57a0d-cd69-4f6a-8ee9-e6555dfd29f2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.228.20
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['52796', '52797', '52798', '52799', '52800']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 52796:52796 -p 52797:52797 -p 52798:52798 -p 52799:52799 -p 52800:52800 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=52798 --rest-port=52796 --tcp-port=52797 --discv5-udp-port=52799 --rest-address=0.0.0.0 --nat=extip:172.18.228.20 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3e9cdcbd339e1a6ffdd7ee6fbc4eec75ebb8c9120a83cc4572ce0c3c49f30aeb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=52800 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.228.20 waku 4dd173c764498598acb4263c7c910326da8128cbf20b3e29da7d78fc4e8d8a8c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 4dd173c76449. Setting up logs at ./log/docker/receiving_node1_2024-09-12_04-24-05__18f57a0d-cd69-4f6a-8ee9-e6555dfd29f2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 52796
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52796/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52796/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.228.20/tcp/52797/p2p/16Uiu2HAmMmtTcmdTDZQRMHwSdeSjgZ3KL9qtxXupJZGDv6PGCPCh","/ip4/172.18.228.20/tcp/52798/ws/p2p/16Uiu2HAmMmtTcmdTDZQRMHwSdeSjgZ3KL9qtxXupJZGDv6PGCPCh"],"enrUri":"enr:-LO4QB-kGIPWb0rWB00SRkO_9bGFScf_21HX2OaGmmLfLcdOMKicbRnbieoT0yRB3_5R-vxB5yGe-4KzczaU2UC1ClQBgmlkgnY0gmlwhKwS5BSKbXVsdGlhZGRyc4wACgSsEuQUBs4-3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOHfZZOi51TKpKleVHMeJPnf_II64VdTLkPY29JH4H45oN0Y3CCzj2DdWRwgs4_hXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-12_04-24-05__18f57a0d-cd69-4f6a-8ee9-e6555dfd29f2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.38.122
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['10038', '10039', '10040', '10041', '10042']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 10038:10038 -p 10039:10039 -p 10040:10040 -p 10041:10041 -p 10042:10042 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=10040 --rest-port=10038 --tcp-port=10039 --discv5-udp-port=10041 --rest-address=0.0.0.0 --nat=extip:172.18.38.122 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a4d25b26d106ed2e1cedeb5ffa4db5a91f8efafccefd5cff66e15e292950a9af --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=10042 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QB-kGIPWb0rWB00SRkO_9bGFScf_21HX2OaGmmLfLcdOMKicbRnbieoT0yRB3_5R-vxB5yGe-4KzczaU2UC1ClQBgmlkgnY0gmlwhKwS5BSKbXVsdGlhZGRyc4wACgSsEuQUBs4-3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOHfZZOi51TKpKleVHMeJPnf_II64VdTLkPY29JH4H45oN0Y3CCzj2DdWRwgs4_hXdha3UyCQ --lightpushnode=/ip4/172.18.228.20/tcp/52797/p2p/16Uiu2HAmMmtTcmdTDZQRMHwSdeSjgZ3KL9qtxXupJZGDv6PGCPCh --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.38.122 waku 46ccac186e777d76af02b6fdef4ddc6de0a2dd4d8eeb549a52ba86231f7a2ae0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 46ccac186e77. Setting up logs at ./log/docker/lightpush_node1_2024-09-12_04-24-05__18f57a0d-cd69-4f6a-8ee9-e6555dfd29f2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 10038
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10038/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10038/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.38.122/tcp/10039/p2p/16Uiu2HAmUmxpPsPXJiD9pz6AxabJYDvJVCHCJWJKXbo6ksWN9PHh","/ip4/172.18.38.122/tcp/10040/ws/p2p/16Uiu2HAmUmxpPsPXJiD9pz6AxabJYDvJVCHCJWJKXbo6ksWN9PHh"],"enrUri":"enr:-LO4QIo675cBxXu9n9xBgugB845TwdYX4KzO_P8pREwqvk9gAICd44WBgqcQTcMiJvm1aT7Duf-upWPKzAEyR27XtjkBgmlkgnY0gmlwhKwSJnqKbXVsdGlhZGRyc4wACgSsEiZ6Bic43QOCcnOFAAMBAACJc2VjcDI1NmsxoQPvhFLQVUvOhY2l2blbo6VhRIJK97Z3v_ESYo2EpxtgkIN0Y3CCJzeDdWRwgic5hXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10038/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.228.20/tcp/52797/p2p/16Uiu2HAmMmtTcmdTDZQRMHwSdeSjgZ3KL9qtxXupJZGDv6PGCPCh"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52796/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10038/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1726115048896863232}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:10038/lightpush/v1/message. Response content: b'Failed to request a message push: not_published_to_any_peer'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 4dd173c76449
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 46ccac186e77
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/receiving_node1_2024-09-12_04-24-05__18f57a0d-cd69-4f6a-8ee9-e6555dfd29f2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/lightpush_node1_2024-09-12_04-24-05__18f57a0d-cd69-4f6a-8ee9-e6555dfd29f2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_lightpush_with_a_single_receiving_node with id: 2024-09-12_04-24-13__38caa407-51f8-4172-8d47-e408cfbd14f3
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-12_04-24-13__38caa407-51f8-4172-8d47-e408cfbd14f3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.231.219
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['13589', '13590', '13591', '13592', '13593']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 13589:13589 -p 13590:13590 -p 13591:13591 -p 13592:13592 -p 13593:13593 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=13591 --rest-port=13589 --tcp-port=13590 --discv5-udp-port=13592 --rest-address=0.0.0.0 --nat=extip:172.18.231.219 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4fe8e77067fc7d5bdbc24efa1ca54a9ea5e7ff2df46d24b9ac5af6bacf26bffc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=13593 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.231.219 waku 4bb4f9a5471008cd81e91b30a7f2524b0db8d4815c98b285ea3442f295aefccc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 4bb4f9a54710. Setting up logs at ./log/docker/receiving_node1_2024-09-12_04-24-13__38caa407-51f8-4172-8d47-e408cfbd14f3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 13589
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13589/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13589/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.231.219/tcp/13590/p2p/16Uiu2HAmUkCSTr9tfrdNyrpCBTZ9su5cUU94577a2dipywGAP2rf","/ip4/172.18.231.219/tcp/13591/ws/p2p/16Uiu2HAmUkCSTr9tfrdNyrpCBTZ9su5cUU94577a2dipywGAP2rf"],"enrUri":"enr:-LO4QN_xE33MfBSd440EiqAYV2ziD82L8kcG2bDLUHtZVAZ0V3DSUJgLOkFU25nK03ms7G45gIM4uN3K0FhHkzrDnkYBgmlkgnY0gmlwhKwS59uKbXVsdGlhZGRyc4wACgSsEufbBjUX3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPvEJBtrDSNT7uUnE7Dt9SM4GSg6ZQPS4Yzk-JKYyPQRIN0Y3CCNRaDdWRwgjUYhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-12_04-24-13__38caa407-51f8-4172-8d47-e408cfbd14f3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.215.225
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['59492', '59493', '59494', '59495', '59496']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 59492:59492 -p 59493:59493 -p 59494:59494 -p 59495:59495 -p 59496:59496 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=59494 --rest-port=59492 --tcp-port=59493 --discv5-udp-port=59495 --rest-address=0.0.0.0 --nat=extip:172.18.215.225 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dabd9dbdce79a5e53fb17f1b71b76c6fa6a0fd2d8e9cce9acc8e1cfa368d306c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=59496 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QN_xE33MfBSd440EiqAYV2ziD82L8kcG2bDLUHtZVAZ0V3DSUJgLOkFU25nK03ms7G45gIM4uN3K0FhHkzrDnkYBgmlkgnY0gmlwhKwS59uKbXVsdGlhZGRyc4wACgSsEufbBjUX3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPvEJBtrDSNT7uUnE7Dt9SM4GSg6ZQPS4Yzk-JKYyPQRIN0Y3CCNRaDdWRwgjUYhXdha3UyCQ --lightpushnode=/ip4/172.18.231.219/tcp/13590/p2p/16Uiu2HAmUkCSTr9tfrdNyrpCBTZ9su5cUU94577a2dipywGAP2rf --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.215.225 waku 0a64939fad24442c64534fea78dc4ad1f8a00ebac8f690105e8efb1df32ec44b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 0a64939fad24. Setting up logs at ./log/docker/lightpush_node1_2024-09-12_04-24-13__38caa407-51f8-4172-8d47-e408cfbd14f3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 59492
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59492/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59492/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.215.225/tcp/59493/p2p/16Uiu2HAm1rmZptFCeQKU4dYP7VbtDYU5CyapVXiQBfvP5DpTxDVE","/ip4/172.18.215.225/tcp/59494/ws/p2p/16Uiu2HAm1rmZptFCeQKU4dYP7VbtDYU5CyapVXiQBfvP5DpTxDVE"],"enrUri":"enr:-LO4QKuRyWSM2yI0dr2OaU1yqSntfk3vugwC5iSS1dBTxRitMVdAypnVkgMNCZ8dHVBLcpG1igOzWN0qr3DfRpZ-UdgBgmlkgnY0gmlwhKwS1-GKbXVsdGlhZGRyc4wACgSsEtfhBuhm3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJfk_Vx9uFwPun9b74Uv8qBXVq52B0BLH6Id0dUCnnTrYN0Y3CC6GWDdWRwguhnhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59492/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.231.219/tcp/13590/p2p/16Uiu2HAmUkCSTr9tfrdNyrpCBTZ9su5cUU94577a2dipywGAP2rf"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13589/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59492/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1726115057181378048}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:59492/lightpush/v1/message. Response content: b'Failed to request a message push: not_published_to_any_peer'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 4bb4f9a54710
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 0a64939fad24
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/receiving_node1_2024-09-12_04-24-13__38caa407-51f8-4172-8d47-e408cfbd14f3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/lightpush_node1_2024-09-12_04-24-13__38caa407-51f8-4172-8d47-e408cfbd14f3__wakuorg_nwaku:latest.log