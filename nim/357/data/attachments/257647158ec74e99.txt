[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_subscribe_to_pubsub_topic_from_another_cluster_id with id: 2024-09-12_04-17-49__bd7de297-cdd0-40c1-9495-a14b6ed8209f
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-12_04-17-49__bd7de297-cdd0-40c1-9495-a14b6ed8209f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.25.160
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['22401', '22402', '22403', '22404', '22405']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 22401:22401 -p 22402:22402 -p 22403:22403 -p 22404:22404 -p 22405:22405 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22403 --rest-port=22401 --tcp-port=22402 --discv5-udp-port=22404 --rest-address=0.0.0.0 --nat=extip:172.18.25.160 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8c0ef358b0493fcbb107c58fa8eb5ebf7eab2b2c632fc12be1dfaf27ffc76f97 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22405 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.25.160 waku 02c0b089ea594150e1303e9942b8c453c5329d427faf43fe50787fc9093f8df5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 02c0b089ea59. Setting up logs at ./log/docker/node1_2024-09-12_04-17-49__bd7de297-cdd0-40c1-9495-a14b6ed8209f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 22401
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22401/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22401/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.25.160/tcp/22402/p2p/16Uiu2HAm28ZPWE4MHEiW2YcK9aQuUbAE71k4jkVCDRiFHg9yi58k","/ip4/172.18.25.160/tcp/22403/ws/p2p/16Uiu2HAm28ZPWE4MHEiW2YcK9aQuUbAE71k4jkVCDRiFHg9yi58k"],"enrUri":"enr:-LO4QFy1XUN8kATsn6M6v4tDXsDLKHtAAvcmNhSDszi64XalCZ3eCMAAzibr4rxCLcGDzb2aFq4drI0BLQHBlEkCAGkBgmlkgnY0gmlwhKwSGaCKbXVsdGlhZGRyc4wACgSsEhmgBleD3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJjn3tnv3Nb2APo0DTypRIm30p181IgdBv50bmMg7_S-YN0Y3CCV4KDdWRwgleEhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-12_04-17-49__bd7de297-cdd0-40c1-9495-a14b6ed8209f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.27.155
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['19752', '19753', '19754', '19755', '19756']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 19752:19752 -p 19753:19753 -p 19754:19754 -p 19755:19755 -p 19756:19756 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19754 --rest-port=19752 --tcp-port=19753 --discv5-udp-port=19755 --rest-address=0.0.0.0 --nat=extip:172.18.27.155 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=31db5d66ef0be5e7c00d4d6f468e074b95c0ffb2b88afae10c284b3a0b3bfc55 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19756 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QFy1XUN8kATsn6M6v4tDXsDLKHtAAvcmNhSDszi64XalCZ3eCMAAzibr4rxCLcGDzb2aFq4drI0BLQHBlEkCAGkBgmlkgnY0gmlwhKwSGaCKbXVsdGlhZGRyc4wACgSsEhmgBleD3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJjn3tnv3Nb2APo0DTypRIm30p181IgdBv50bmMg7_S-YN0Y3CCV4KDdWRwgleEhXdha3UyBQ --filternode=/ip4/172.18.25.160/tcp/22402/p2p/16Uiu2HAm28ZPWE4MHEiW2YcK9aQuUbAE71k4jkVCDRiFHg9yi58k
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.27.155 waku 0e993fa03da779b9f202f525f7da245f76f7da6cdefeeef77e106e2e8319fd21
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 0e993fa03da7. Setting up logs at ./log/docker/node2_2024-09-12_04-17-49__bd7de297-cdd0-40c1-9495-a14b6ed8209f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 19752
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19752/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19752/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.27.155/tcp/19753/p2p/16Uiu2HAm3xXA6ttAPE7yV4QGNYD6DdaQXzQWN9UfX1Tr5t2HqP5y","/ip4/172.18.27.155/tcp/19754/ws/p2p/16Uiu2HAm3xXA6ttAPE7yV4QGNYD6DdaQXzQWN9UfX1Tr5t2HqP5y"],"enrUri":"enr:-LO4QPLAOIOFNPF1lQPSxMuujMyj2xaVDuKzN1qZZ5yg9FNyeNp68uoDjDqcpq-UJd4nv7oojVPUpAJ79tU3xhMe9boBgmlkgnY0gmlwhKwSG5uKbXVsdGlhZGRyc4wACgSsEhubBk0q3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJ-xIZu_oNLBQsoROI7dRhNnjzQerGYjcQI9W-6CCf-GIN0Y3CCTSmDdWRwgk0rhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19752/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.25.160/tcp/22402/p2p/16Uiu2HAm28ZPWE4MHEiW2YcK9aQuUbAE71k4jkVCDRiFHg9yi58k"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22401/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/2"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19752/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "096a4957-90d0-4e12-bec2-3ca6f9bb469d", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/2/2"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"096a4957-90d0-4e12-bec2-3ca6f9bb469d","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22401/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19752/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1726114672704646144,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 02c0b089ea59
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 0e993fa03da7
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.