[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_single_content_topic[/app/27/sometopic/someencoding] with id: 2024-12-27_04-16-46__55a95e4a-8d0d-413a-8d2a-40e6d1fa638e
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-27_04-16-46__55a95e4a-8d0d-413a-8d2a-40e6d1fa638e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.207.51
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['18736', '18737', '18738', '18739', '18740']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 18736:18736 -p 18737:18737 -p 18738:18738 -p 18739:18739 -p 18740:18740 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18738 --rest-port=18736 --tcp-port=18737 --discv5-udp-port=18739 --rest-address=0.0.0.0 --nat=extip:172.18.207.51 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=2cc5d98de167ae2d2f2629b9a694efd9bb04a8a3d2c09178056c0d6bd1b9adab --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18740 --metrics-logging=true --relay=true --filter=true --content-topic=/app/27/sometopic/someencoding
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.207.51 waku 2842bef5de8ed020fc55a1cd331aaf3a0ebd34fa9e78377422813ca2e4f6ec6e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 2842bef5de8e. Setting up logs at ./log/docker/node1_2024-12-27_04-16-46__55a95e4a-8d0d-413a-8d2a-40e6d1fa638e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 18736
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 3ca8744443af. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18736/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18736/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.207.51/tcp/18737/p2p/16Uiu2HAmBPZ54nzcWjESdGZSHBgygmYurhyemSn5eSfRjPZFWWR9","/ip4/172.18.207.51/tcp/18738/ws/p2p/16Uiu2HAmBPZ54nzcWjESdGZSHBgygmYurhyemSn5eSfRjPZFWWR9"],"enrUri":"enr:-L24QHkO7Rs0J7Vj0Weyyr8jhTHJP84VdZBBBylSvc035_bpR4fXqJTl20zokUToghydwwn_nO0yYhizJoXfdwOR6w4CgmlkgnY0gmlwhKwSzzOKbXVsdGlhZGRyc5YACASsEs8zBkkxAAoErBLPMwZJMt0DgnJzhQACAQAAiXNlY3AyNTZrMaEC7TAEXqA6B2LetiD_xHdbx15BXq__7bCicDVWzg245nSDdGNwgkkxg3VkcIJJM4V3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-27_04-16-46__55a95e4a-8d0d-413a-8d2a-40e6d1fa638e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.220.101
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['21811', '21812', '21813', '21814', '21815']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 21811:21811 -p 21812:21812 -p 21813:21813 -p 21814:21814 -p 21815:21815 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=21813 --rest-port=21811 --tcp-port=21812 --discv5-udp-port=21814 --rest-address=0.0.0.0 --nat=extip:172.18.220.101 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=bcd7fbca21da2ec98eabf596e70e0bc2cf4d34ac9d50cbdf3457fbb611ff7118 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=21815 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QHkO7Rs0J7Vj0Weyyr8jhTHJP84VdZBBBylSvc035_bpR4fXqJTl20zokUToghydwwn_nO0yYhizJoXfdwOR6w4CgmlkgnY0gmlwhKwSzzOKbXVsdGlhZGRyc5YACASsEs8zBkkxAAoErBLPMwZJMt0DgnJzhQACAQAAiXNlY3AyNTZrMaEC7TAEXqA6B2LetiD_xHdbx15BXq__7bCicDVWzg245nSDdGNwgkkxg3VkcIJJM4V3YWt1MgU --content-topic=/app/27/sometopic/someencoding
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.220.101 waku 208e5b8a7e92b283dafb31ebd12db1d8384dfa6f2c930d0d89a9702208646cbc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 208e5b8a7e92. Setting up logs at ./log/docker/node2_2024-12-27_04-16-46__55a95e4a-8d0d-413a-8d2a-40e6d1fa638e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 21811
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21811/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21811/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.220.101/tcp/21812/p2p/16Uiu2HAmPseySnDbg61PviYwehXBUEEjTmpo1roNg2TZbA16JEtf","/ip4/172.18.220.101/tcp/21813/ws/p2p/16Uiu2HAmPseySnDbg61PviYwehXBUEEjTmpo1roNg2TZbA16JEtf"],"enrUri":"enr:-L24QPp35ZR-9b15Qp-B16rFlAp_kBA2zeCn8eahdqWnyYK4Jjz02Ifq3i3I_6aGbN5o2PS3HH-YUveST8uRKPdVqCQCgmlkgnY0gmlwhKwS3GWKbXVsdGlhZGRyc5YACASsEtxlBlU0AAoErBLcZQZVNd0DgnJzhQACAQAAiXNlY3AyNTZrMaEDpq8yjieoKLOZaCyEDjnXopw_vBamYpzA-GX_JvPpQcCDdGNwglU0g3VkcIJVNoV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21811/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.207.51/tcp/18737/p2p/16Uiu2HAmBPZ54nzcWjESdGZSHBgygmYurhyemSn5eSfRjPZFWWR9"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18736/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/app/27/sometopic/someencoding"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21811/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/app/27/sometopic/someencoding"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18736/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18736/relay/v1/auto/messages/%2Fapp%2F27%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/app/27/sometopic/someencoding","version":0,"timestamp":1735273009824053760,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21811/relay/v1/auto/messages/%2Fapp%2F27%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/app/27/sometopic/someencoding","version":0,"timestamp":1735273009824053760,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 2842bef5de8e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 208e5b8a7e92
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 2842bef5de8e. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.