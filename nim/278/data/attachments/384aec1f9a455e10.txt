[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_publish_on_multiple_content_topics_and_only_after_fetch_them[content_topic_list0] with id: 2024-07-17_04-19-51__fa40772b-6d10-420f-a91d-9de4ac7ff82a
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:29 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:31 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:81 WakuNode instance initialized with log path ./log/docker/node1_2024-07-17_04-19-51__fa40772b-6d10-420f-a91d-9de4ac7ff82a__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.165.153
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['29441', '29442', '29443', '29444', '29445']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:428 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:157 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:159 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 29441:29441 -p 29442:29442 -p 29443:29443 -p 29444:29444 -p 29445:29445 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29443 --rest-port=29441 --tcp-port=29442 --discv5-udp-port=29444 --rest-address=0.0.0.0 --nat=extip:172.18.165.153 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29445 --metrics-logging=true --relay=true --nodekey=30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68 --filter=true --content-topic=/myapp/1/latest/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.165.153 waku 93dc16d3a34c2d027d317e5b5aa4f2dbc29c02468952abdff8ef067e6592e5ff
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 93dc16d3a34c. Setting up logs at ./log/docker/node1_2024-07-17_04-19-51__fa40772b-6d10-420f-a91d-9de4ac7ff82a__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 29441
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29441/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:274 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29441/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.165.153/tcp/29442/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip","/ip4/172.18.165.153/tcp/29443/ws/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"],"enrUri":"enr:-LO4QCMZTrKryxnkEf306XQm3C4GOM13G-cOwjpS06wMwLxgay82nJGpbLEoHeA4AKtfvFR6ogJUvpwJYEAn51W2zGYBgmlkgnY0gmlwhKwSpZmKbXVsdGlhZGRyc4wACgSsEqWZBnMD3QOCcnOFAAIBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCcwKDdWRwgnMEhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:81 WakuNode instance initialized with log path ./log/docker/node2_2024-07-17_04-19-51__fa40772b-6d10-420f-a91d-9de4ac7ff82a__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.15.88
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['37578', '37579', '37580', '37581', '37582']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:428 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:157 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:159 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 37578:37578 -p 37579:37579 -p 37580:37580 -p 37581:37581 -p 37582:37582 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37580 --rest-port=37578 --tcp-port=37579 --discv5-udp-port=37581 --rest-address=0.0.0.0 --nat=extip:172.18.15.88 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37582 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QCMZTrKryxnkEf306XQm3C4GOM13G-cOwjpS06wMwLxgay82nJGpbLEoHeA4AKtfvFR6ogJUvpwJYEAn51W2zGYBgmlkgnY0gmlwhKwSpZmKbXVsdGlhZGRyc4wACgSsEqWZBnMD3QOCcnOFAAIBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCcwKDdWRwgnMEhXdha3UyBQ --content-topic=/myapp/1/latest/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.15.88 waku c047e54326ae89825ff240abc133f4f1115b0b0fc45bc362254bc3286a066479
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID c047e54326ae. Setting up logs at ./log/docker/node2_2024-07-17_04-19-51__fa40772b-6d10-420f-a91d-9de4ac7ff82a__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 37578
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37578/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:274 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37578/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.15.88/tcp/37579/p2p/16Uiu2HAmKg5Bxo8LZMhQtizAxeGpazjQz9iYp3jjdJYPrfrExDwQ","/ip4/172.18.15.88/tcp/37580/ws/p2p/16Uiu2HAmKg5Bxo8LZMhQtizAxeGpazjQz9iYp3jjdJYPrfrExDwQ"],"enrUri":"enr:-LO4QAJRvzMDXKEHmFuaiGF5tkwqsMLoY3l5hHJDp0_QI6mPAdIQ7w1VFe7Z6V1_cMZwG4iaX4QhnLFPBpJ6Ibq1_kABgmlkgnY0gmlwhKwSD1iKbXVsdGlhZGRyc4wACgSsEg9YBpLM3QOCcnOFAAIBAACJc2VjcDI1NmsxoQNoSNxpRawGX60vRS-ecoyuelDqjHY0eEgoQ-6XDfDGC4N0Y3CCksuDdWRwgpLNhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37578/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.165.153/tcp/29442/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29441/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/newsService/1.0/weekly/protobuf", "/newsService/1.0/alerts/xml", "/newsService/1.0/updates/json", "/newsService/2.0/alerts/json", "/newsService/2.0/summaries/xml", "/newsService/2.0/highlights/yaml", "/newsService/3.0/weekly/json", "/newsService/3.0/summaries/xml"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37578/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/newsService/1.0/weekly/protobuf", "/newsService/1.0/alerts/xml", "/newsService/1.0/updates/json", "/newsService/2.0/alerts/json", "/newsService/2.0/summaries/xml", "/newsService/2.0/highlights/yaml", "/newsService/3.0/weekly/json", "/newsService/3.0/summaries/xml"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29441/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L25ld3NTZXJ2aWNlLzEuMC93ZWVrbHkvcHJvdG9idWY=", "contentTopic": "/newsService/1.0/weekly/protobuf", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29441/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L25ld3NTZXJ2aWNlLzEuMC9hbGVydHMveG1s", "contentTopic": "/newsService/1.0/alerts/xml", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29441/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L25ld3NTZXJ2aWNlLzEuMC91cGRhdGVzL2pzb24=", "contentTopic": "/newsService/1.0/updates/json", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29441/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L25ld3NTZXJ2aWNlLzIuMC9hbGVydHMvanNvbg==", "contentTopic": "/newsService/2.0/alerts/json", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29441/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L25ld3NTZXJ2aWNlLzIuMC9zdW1tYXJpZXMveG1s", "contentTopic": "/newsService/2.0/summaries/xml", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29441/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L25ld3NTZXJ2aWNlLzIuMC9oaWdobGlnaHRzL3lhbWw=", "contentTopic": "/newsService/2.0/highlights/yaml", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29441/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L25ld3NTZXJ2aWNlLzMuMC93ZWVrbHkvanNvbg==", "contentTopic": "/newsService/3.0/weekly/json", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29441/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L25ld3NTZXJ2aWNlLzMuMC9zdW1tYXJpZXMveG1s", "contentTopic": "/newsService/3.0/summaries/xml", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37578/relay/v1/auto/messages/%2FnewsService%2F1.0%2Fweekly%2Fprotobuf" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"L25ld3NTZXJ2aWNlLzEuMC93ZWVrbHkvcHJvdG9idWY=","contentTopic":"/newsService/1.0/weekly/protobuf","version":0,"timestamp":1721189994718006528,"ephemeral":false}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37578/relay/v1/auto/messages/%2FnewsService%2F1.0%2Falerts%2Fxml" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"L25ld3NTZXJ2aWNlLzEuMC9hbGVydHMveG1s","contentTopic":"/newsService/1.0/alerts/xml","version":0,"timestamp":1721189994727403776,"ephemeral":false}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37578/relay/v1/auto/messages/%2FnewsService%2F1.0%2Fupdates%2Fjson" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"L25ld3NTZXJ2aWNlLzEuMC91cGRhdGVzL2pzb24=","contentTopic":"/newsService/1.0/updates/json","version":0,"timestamp":1721189994733457152,"ephemeral":false}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37578/relay/v1/auto/messages/%2FnewsService%2F2.0%2Falerts%2Fjson" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"L25ld3NTZXJ2aWNlLzIuMC9hbGVydHMvanNvbg==","contentTopic":"/newsService/2.0/alerts/json","version":0,"timestamp":1721189994739066368,"ephemeral":false}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37578/relay/v1/auto/messages/%2FnewsService%2F2.0%2Fsummaries%2Fxml" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"L25ld3NTZXJ2aWNlLzIuMC9zdW1tYXJpZXMveG1s","contentTopic":"/newsService/2.0/summaries/xml","version":0,"timestamp":1721189994744578560,"ephemeral":false}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37578/relay/v1/auto/messages/%2FnewsService%2F2.0%2Fhighlights%2Fyaml" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"L25ld3NTZXJ2aWNlLzIuMC9oaWdobGlnaHRzL3lhbWw=","contentTopic":"/newsService/2.0/highlights/yaml","version":0,"timestamp":1721189994749843200,"ephemeral":false}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37578/relay/v1/auto/messages/%2FnewsService%2F3.0%2Fweekly%2Fjson" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"L25ld3NTZXJ2aWNlLzMuMC93ZWVrbHkvanNvbg==","contentTopic":"/newsService/3.0/weekly/json","version":0,"timestamp":1721189994755237376,"ephemeral":false}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37578/relay/v1/auto/messages/%2FnewsService%2F3.0%2Fsummaries%2Fxml" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"L25ld3NTZXJ2aWNlLzMuMC9zdW1tYXJpZXMveG1s","contentTopic":"/newsService/3.0/summaries/xml","version":0,"timestamp":1721189994762364672,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:218 Stopping container with id 93dc16d3a34c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:225 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:218 Stopping container with id c047e54326ae
[35mDEBUG   [0m src.node.waku_node:waku_node.py:225 Container stopped.