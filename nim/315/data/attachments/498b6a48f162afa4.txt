[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_missing_pubsub_topics with id: 2024-08-13_04-17-36__0e38a17d-e95a-4a1b-83f6-65a0288c20a3
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-13_04-17-36__0e38a17d-e95a-4a1b-83f6-65a0288c20a3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.59.57
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['44871', '44872', '44873', '44874', '44875']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:429 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:161 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:163 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 44871:44871 -p 44872:44872 -p 44873:44873 -p 44874:44874 -p 44875:44875 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44873 --rest-port=44871 --tcp-port=44872 --discv5-udp-port=44874 --rest-address=0.0.0.0 --nat=extip:172.18.59.57 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44875 --metrics-logging=true --lightpush=true --relay=true --nodekey=30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.59.57 waku e03f76f9eaccf238ad72f2cd853acfdbcd4ed61f89a9b3dad0393dc484a522f0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID e03f76f9eacc. Setting up logs at ./log/docker/receiving_node1_2024-08-13_04-17-36__0e38a17d-e95a-4a1b-83f6-65a0288c20a3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:175 Started container from image wakuorg/nwaku:latest. REST: 44871
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44871/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:275 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44871/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.59.57/tcp/44872/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip","/ip4/172.18.59.57/tcp/44873/ws/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"],"enrUri":"enr:-LO4QNUpZ0M2MzXxQKN-s6dEvHCuf2rS5sgzN8J3CE8wYa3YIXv6c_5IjXGSqWuOvMdlUXfFiyT51zQyUyj11XsNyuEBgmlkgnY0gmlwhKwSOzmKbXVsdGlhZGRyc4wACgSsEjs5Bq9J3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCr0iDdWRwgq9KhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:280 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-13_04-17-36__0e38a17d-e95a-4a1b-83f6-65a0288c20a3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.200.101
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['64091', '64092', '64093', '64094', '64095']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:429 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:161 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:163 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 64091:64091 -p 64092:64092 -p 64093:64093 -p 64094:64094 -p 64095:64095 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64093 --rest-port=64091 --tcp-port=64092 --discv5-udp-port=64094 --rest-address=0.0.0.0 --nat=extip:172.18.200.101 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64095 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.200.101 waku 22c9efb38b87af690c01cfb710c3213228f3e7809c5067f9ecbea48952dd3f3f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 22c9efb38b87. Setting up logs at ./log/docker/receiving_node2_2024-08-13_04-17-36__0e38a17d-e95a-4a1b-83f6-65a0288c20a3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:175 Started container from image wakuorg/nwaku:latest. REST: 64091
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64091/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:275 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64091/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.200.101/tcp/64092/p2p/16Uiu2HAmFr54sqgK72dZBiLAHnabbw8GfHm9rCkx59kwBXprRoCv","/ip4/172.18.200.101/tcp/64093/ws/p2p/16Uiu2HAmFr54sqgK72dZBiLAHnabbw8GfHm9rCkx59kwBXprRoCv"],"enrUri":"enr:-LO4QExT0tmjil8bp1S7OzixP7kn6w8zLkuo7CwOwaKtC47_EDXvouuuKT4UHQ4iYOxQuffkajdcZ7G-lBBAug_32AABgmlkgnY0gmlwhKwSyGWKbXVsdGlhZGRyc4wACgSsEshlBvpd3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMvaciCMhz1JeA-O7yJ6wDLLmDfgHjjyWJKkw6ilKaz24N0Y3CC-lyDdWRwgvpehXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:280 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64091/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.59.57/tcp/44872/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-13_04-17-36__0e38a17d-e95a-4a1b-83f6-65a0288c20a3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.9.246
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['64604', '64605', '64606', '64607', '64608']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:429 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:161 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:163 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 64604:64604 -p 64605:64605 -p 64606:64606 -p 64607:64607 -p 64608:64608 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64606 --rest-port=64604 --tcp-port=64605 --discv5-udp-port=64607 --rest-address=0.0.0.0 --nat=extip:172.18.9.246 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64608 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QNUpZ0M2MzXxQKN-s6dEvHCuf2rS5sgzN8J3CE8wYa3YIXv6c_5IjXGSqWuOvMdlUXfFiyT51zQyUyj11XsNyuEBgmlkgnY0gmlwhKwSOzmKbXVsdGlhZGRyc4wACgSsEjs5Bq9J3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCr0iDdWRwgq9KhXdha3UyCQ --lightpushnode=/ip4/172.18.59.57/tcp/44872/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.9.246 waku 97923cdb15a7f4a0bd63134e8d43af224047c9fc5296a690b0fcc5f56c8d01bf
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 97923cdb15a7. Setting up logs at ./log/docker/lightpush_node1_2024-08-13_04-17-36__0e38a17d-e95a-4a1b-83f6-65a0288c20a3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:175 Started container from image wakuorg/nwaku:latest. REST: 64604
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64604/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:275 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64604/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.9.246/tcp/64605/p2p/16Uiu2HAmBD9dNouu2XzJ2WQhvUDY4YYeB1o2E7tMC18EygmFtzMR","/ip4/172.18.9.246/tcp/64606/ws/p2p/16Uiu2HAmBD9dNouu2XzJ2WQhvUDY4YYeB1o2E7tMC18EygmFtzMR"],"enrUri":"enr:-LO4QFF5U-VGHobOg9haGO5eRkuBDeJ78n3G0G0VZrnjJjHtUOlx99En_3i4pRcQqy5vpQ0vkMtayTJSeCn9b8yzxo4BgmlkgnY0gmlwhKwSCfaKbXVsdGlhZGRyc4wACgSsEgn2Bvxe3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLqhbO1MZRmr3wC2Cu8GVYTBE_CrmXv-JY8ASLog9nwvIN0Y3CC_F2DdWRwgvxfhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:280 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64604/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.59.57/tcp/44872/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64604/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.200.101/tcp/64092/p2p/16Uiu2HAmFr54sqgK72dZBiLAHnabbw8GfHm9rCkx59kwBXprRoCv"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44871/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64091/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64604/lightpush/v1/message" -H "Content-Type: application/json" -d '{"message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1723522661900684288}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:64604/lightpush/v1/message. Response content: b'Failed to request a message push: Lightpush request has not been published to any peers. msg_hash: 0x5ad04ce6c116b61e0b90902da062ce77dcf1e0aa446bd3671e9ef1c3c5b82e65'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:219 Stopping container with id e03f76f9eacc
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:219 Stopping container with id 22c9efb38b87
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:219 Stopping container with id 97923cdb15a7
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Container stopped.