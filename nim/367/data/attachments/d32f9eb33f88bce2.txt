[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_subscribe_to_pubsub_topics_from_multiple_clusters with id: 2024-09-21_04-15-22__7b0a982b-329d-4992-9da7-b41ae1f746e2
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-21_04-15-22__7b0a982b-329d-4992-9da7-b41ae1f746e2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.94.185
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['59023', '59024', '59025', '59026', '59027']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 59023:59023 -p 59024:59024 -p 59025:59025 -p 59026:59026 -p 59027:59027 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=59025 --rest-port=59023 --tcp-port=59024 --discv5-udp-port=59026 --rest-address=0.0.0.0 --nat=extip:172.18.94.185 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cea7ba02ddb9d9e8a6dffd9ea6db2d9ccedaa53fbdfff87031fe3f8ec6b8dcda --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=59027 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.94.185 waku 298cea6acdd205a0b718c4d776cec8d64abed6acf530db889ef3350a64cb1771
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 298cea6acdd2. Setting up logs at ./log/docker/node1_2024-09-21_04-15-22__7b0a982b-329d-4992-9da7-b41ae1f746e2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 59023
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59023/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59023/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.94.185/tcp/59024/p2p/16Uiu2HAm69pnwthdvPcJHuYcFHmjXyffJPcWiJ2LpV1CfCTBatR5","/ip4/172.18.94.185/tcp/59025/ws/p2p/16Uiu2HAm69pnwthdvPcJHuYcFHmjXyffJPcWiJ2LpV1CfCTBatR5"],"enrUri":"enr:-LO4QGcNIsFTSv4qE2LAQtZF9pyE0jQhI06g6nRug0nQm7UhI59chCum6zEzQ4XKBU81fQX6znUuCeS2LIQdblgXLxUBgmlkgnY0gmlwhKwSXrmKbXVsdGlhZGRyc4wACgSsEl65BuaR3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKfYTpmtgvcCENxhwPBOo4_e1ujxsTjPBKEFPhteG7OaIN0Y3CC5pCDdWRwguaShXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-21_04-15-22__7b0a982b-329d-4992-9da7-b41ae1f746e2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.221.31
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['53282', '53283', '53284', '53285', '53286']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 53282:53282 -p 53283:53283 -p 53284:53284 -p 53285:53285 -p 53286:53286 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=53284 --rest-port=53282 --tcp-port=53283 --discv5-udp-port=53285 --rest-address=0.0.0.0 --nat=extip:172.18.221.31 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=596c9f7dff3f2a1bbb7cc82a31dfee6f88466caf592be76cd02dc3ed0e40bbc6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=53286 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QGcNIsFTSv4qE2LAQtZF9pyE0jQhI06g6nRug0nQm7UhI59chCum6zEzQ4XKBU81fQX6znUuCeS2LIQdblgXLxUBgmlkgnY0gmlwhKwSXrmKbXVsdGlhZGRyc4wACgSsEl65BuaR3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKfYTpmtgvcCENxhwPBOo4_e1ujxsTjPBKEFPhteG7OaIN0Y3CC5pCDdWRwguaShXdha3UyBQ --filternode=/ip4/172.18.94.185/tcp/59024/p2p/16Uiu2HAm69pnwthdvPcJHuYcFHmjXyffJPcWiJ2LpV1CfCTBatR5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.221.31 waku ca2a87f76d1a5ae1303425344a936c341258f17f11f93cfaac6d4f7dd7f0c10b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID ca2a87f76d1a. Setting up logs at ./log/docker/node2_2024-09-21_04-15-22__7b0a982b-329d-4992-9da7-b41ae1f746e2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 53282
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53282/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53282/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.221.31/tcp/53283/p2p/16Uiu2HAmUbWdz1sCRbDBt1QhVKdHz7diPYZk7bRR6E8Sw1V9yjye","/ip4/172.18.221.31/tcp/53284/ws/p2p/16Uiu2HAmUbWdz1sCRbDBt1QhVKdHz7diPYZk7bRR6E8Sw1V9yjye"],"enrUri":"enr:-LO4QMoJ4sbaHvEkqkaTRbyAmLty7EqaKpHibAojZfwWpdhUca3XAXjAdNKWdtnr6Bo8waxX-h0Mvowvfs7TMlF7oREBgmlkgnY0gmlwhKwS3R-KbXVsdGlhZGRyc4wACgSsEt0fBtAk3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPs1uoFGYtj7jqYhN-meMrQ5-xAYC4UKYf4sBChEWdVfYN0Y3CC0CODdWRwgtAlhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53282/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.94.185/tcp/59024/p2p/16Uiu2HAm69pnwthdvPcJHuYcFHmjXyffJPcWiJ2LpV1CfCTBatR5"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.filter.test_subscribe_create:test_subscribe_create.py:41 Running test with pubsub topic: /waku/2/rs/3/1
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59023/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53282/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1666b3ea-33be-441d-a0b6-c6145f321806", "contentFilters": ["/waku/2/rs/3/1"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1666b3ea-33be-441d-a0b6-c6145f321806","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59023/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/waku/2/rs/3/1", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53282/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/waku/2/rs/3/1","version":0,"timestamp":1726892124977239296,"ephemeral":false}]'
[35mDEBUG   [0m tests.filter.test_subscribe_create:test_subscribe_create.py:41 Running test with pubsub topic: /waku/2/rs/2/2
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59023/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/2"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53282/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "28eae698-7010-4958-bbbd-34e53e8eaf62", "contentFilters": ["/waku/2/rs/2/2"], "pubsubTopic": "/waku/2/rs/2/2"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"28eae698-7010-4958-bbbd-34e53e8eaf62","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59023/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/waku/2/rs/2/2", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53282/filter/v2/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/waku/2/rs/2/2","version":0,"timestamp":1726892125112169472,"ephemeral":false}]'
[35mDEBUG   [0m tests.filter.test_subscribe_create:test_subscribe_create.py:41 Running test with pubsub topic: /waku/2/rs/3/9
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59023/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/9"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53282/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "0da30cfe-f16b-4ae2-9c32-711af70f9674", "contentFilters": ["/waku/2/rs/3/9"], "pubsubTopic": "/waku/2/rs/3/9"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"0da30cfe-f16b-4ae2-9c32-711af70f9674","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59023/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F9" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/waku/2/rs/3/9", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53282/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F9" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/waku/2/rs/3/9","version":0,"timestamp":1726892125252524800,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 298cea6acdd2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id ca2a87f76d1a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.