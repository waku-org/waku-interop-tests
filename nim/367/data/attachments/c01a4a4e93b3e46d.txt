[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_lightpushed_message with id: 2024-09-21_04-36-15__cd3b5962-ca20-44e3-9b11-30d45222ae3a
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-09-21_04-36-15__cd3b5962-ca20-44e3-9b11-30d45222ae3a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.8.182
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['42563', '42564', '42565', '42566', '42567']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 42563:42563 -p 42564:42564 -p 42565:42565 -p 42566:42566 -p 42567:42567 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42565 --rest-port=42563 --tcp-port=42564 --discv5-udp-port=42566 --rest-address=0.0.0.0 --nat=extip:172.18.8.182 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b9e1aeaf8f96beef5b6dc2bc3acb6d8dc65b326bcb49a9bf8ae18da6fff6dace --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42567 --metrics-logging=true --store=true --relay=true --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.8.182 waku 2536ec7568413e898be9c6de29b359017bdbf0328cb83df933e7c39cfbe1b55d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 2536ec756841. Setting up logs at ./log/docker/publishing_node1_2024-09-21_04-36-15__cd3b5962-ca20-44e3-9b11-30d45222ae3a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 42563
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42563/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42563/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.8.182/tcp/42564/p2p/16Uiu2HAmNiKM1uXskxj8FTA2x5M8dtXBZw6WoDutk3dCoCygC6Hr","/ip4/172.18.8.182/tcp/42565/ws/p2p/16Uiu2HAmNiKM1uXskxj8FTA2x5M8dtXBZw6WoDutk3dCoCygC6Hr"],"enrUri":"enr:-LO4QP2hZAeEvU2AydUiVOFK69Zg2Yoljr1AXzpbNpdIZDXBLNP_O4DXd4Z9qPhGvuwg1BtOCMfvgnnJ5zShT0aPJREBgmlkgnY0gmlwhKwSCLaKbXVsdGlhZGRyc4wACgSsEgi2BqZF3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOVbxb4cjCz50lSzZBDEjaSJbdrInTGAudQ9-FwtAQobYN0Y3CCpkSDdWRwgqZGhXdha3UyCw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node2_2024-09-21_04-36-15__cd3b5962-ca20-44e3-9b11-30d45222ae3a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.36.47
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['31093', '31094', '31095', '31096', '31097']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 31093:31093 -p 31094:31094 -p 31095:31095 -p 31096:31096 -p 31097:31097 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=31095 --rest-port=31093 --tcp-port=31094 --discv5-udp-port=31096 --rest-address=0.0.0.0 --nat=extip:172.18.36.47 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dcab5ebf89f1efbb7bcdca6cce1c19edaf9ac200b3af0cd9384fcdf6effbb93c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=31097 --metrics-logging=true --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.36.47 waku 3b5c8fe3ac8c0fa9c0ab9e0ad2f53bff581f79f7c83f7d9499669d3854c6a8db
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 3b5c8fe3ac8c. Setting up logs at ./log/docker/publishing_node2_2024-09-21_04-36-15__cd3b5962-ca20-44e3-9b11-30d45222ae3a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 31093
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31093/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31093/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.36.47/tcp/31094/p2p/16Uiu2HAm248Eg8EDi4Wp6Jp7Xbrbd5ENEW3c3j5Bow575ghHfRAP","/ip4/172.18.36.47/tcp/31095/ws/p2p/16Uiu2HAm248Eg8EDi4Wp6Jp7Xbrbd5ENEW3c3j5Bow575ghHfRAP"],"enrUri":"enr:-LO4QKB6VPfNXP2TvAQKIbKrdAPXcI6yxGCwsTS_Y7M6t3JlDypc7oyDMzqUtUnjfFMBINCwGMKUIzXX-WTB_OjvMIgBgmlkgnY0gmlwhKwSJC-KbXVsdGlhZGRyc4wACgSsEiQvBnl33QOCcnOFAAMBAACJc2VjcDI1NmsxoQJifLgW28gbVgN6zfvuUmd8SmYvLGcdrHgORScyKG8lMIN0Y3CCeXaDdWRwgnl4hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31093/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.8.182/tcp/42564/p2p/16Uiu2HAmNiKM1uXskxj8FTA2x5M8dtXBZw6WoDutk3dCoCygC6Hr"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2024-09-21_04-36-15__cd3b5962-ca20-44e3-9b11-30d45222ae3a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.181.214
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['16914', '16915', '16916', '16917', '16918']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 16914:16914 -p 16915:16915 -p 16916:16916 -p 16917:16917 -p 16918:16918 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=16916 --rest-port=16914 --tcp-port=16915 --discv5-udp-port=16917 --rest-address=0.0.0.0 --nat=extip:172.18.181.214 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4f1e9a6a5d8e56461d8ca1a8da2eafa7eee71f63315bfe31837047db64d3273e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=16918 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QP2hZAeEvU2AydUiVOFK69Zg2Yoljr1AXzpbNpdIZDXBLNP_O4DXd4Z9qPhGvuwg1BtOCMfvgnnJ5zShT0aPJREBgmlkgnY0gmlwhKwSCLaKbXVsdGlhZGRyc4wACgSsEgi2BqZF3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOVbxb4cjCz50lSzZBDEjaSJbdrInTGAudQ9-FwtAQobYN0Y3CCpkSDdWRwgqZGhXdha3UyCw --storenode=/ip4/172.18.8.182/tcp/42564/p2p/16Uiu2HAmNiKM1uXskxj8FTA2x5M8dtXBZw6WoDutk3dCoCygC6Hr --store=false --relay=false --lightpush=true --lightpushnode=/ip4/172.18.8.182/tcp/42564/p2p/16Uiu2HAmNiKM1uXskxj8FTA2x5M8dtXBZw6WoDutk3dCoCygC6Hr
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.181.214 waku 6ae39417e5a149bbe8bddcd6d19488a321984ae568e1fd15999f01a17dd746d8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 6ae39417e5a1. Setting up logs at ./log/docker/store_node1_2024-09-21_04-36-15__cd3b5962-ca20-44e3-9b11-30d45222ae3a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 16914
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16914/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16914/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.181.214/tcp/16915/p2p/16Uiu2HAkwRBK3NAFuLd4wJNcA1D1ugZ7Q8DNTnPp3y9GQeXRXdQg","/ip4/172.18.181.214/tcp/16916/ws/p2p/16Uiu2HAkwRBK3NAFuLd4wJNcA1D1ugZ7Q8DNTnPp3y9GQeXRXdQg"],"enrUri":"enr:-LO4QLGxpq-A0_6duCo2yFx51ghxjoqJMzfC_OvUtUhityjSV4eAnYLW5hFL9GTKCzNsTfKRDCvZdqIGzrqJNcoH3QUBgmlkgnY0gmlwhKwStdaKbXVsdGlhZGRyc4wACgSsErXWBkIU3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIdlvVshmu0eY9Dix4NjwIkfzlKZ2xruTWhaPWiICrpHYN0Y3CCQhODdWRwgkIVhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16914/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.8.182/tcp/42564/p2p/16Uiu2HAmNiKM1uXskxj8FTA2x5M8dtXBZw6WoDutk3dCoCygC6Hr"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16914/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.36.47/tcp/31094/p2p/16Uiu2HAm248Eg8EDi4Wp6Jp7Xbrbd5ENEW3c3j5Bow575ghHfRAP"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:42563/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31093/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16914/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1726893380102563328}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42563/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"2VqTn6lkkUsNxofrVAPZE/Ie82zE+PwVfZXFRAdLD5c="}]}'
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16914/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"217a4cbb157c40efd78f","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"2VqTn6lkkUsNxofrVAPZE/Ie82zE+PwVfZXFRAdLD5c="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 2536ec756841
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 3b5c8fe3ac8c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 6ae39417e5a1
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.