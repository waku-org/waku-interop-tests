[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_content_topic_and_pubsub_topic_not_in_docker_flags with id: 2024-09-21_04-25-39__6d1129bc-3879-4bd4-bffb-542391a36d65
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-21_04-25-39__6d1129bc-3879-4bd4-bffb-542391a36d65__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.99.213
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['33218', '33219', '33220', '33221', '33222']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 33218:33218 -p 33219:33219 -p 33220:33220 -p 33221:33221 -p 33222:33222 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=33220 --rest-port=33218 --tcp-port=33219 --discv5-udp-port=33221 --rest-address=0.0.0.0 --nat=extip:172.18.99.213 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=9d73493cafb3adc1e7ba93a2d3ec03b0bf599cfea8ed5bd2f4daa96a2ec63f18 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=33222 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.99.213 waku f9d715e9017ad61e0c272634f95dd267187d333b77f7cec072c50efad53f9064
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID f9d715e9017a. Setting up logs at ./log/docker/node1_2024-09-21_04-25-39__6d1129bc-3879-4bd4-bffb-542391a36d65__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 33218
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33218/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33218/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.99.213/tcp/33219/p2p/16Uiu2HAm7BiWFTMi3pWeT6xwbMdvh46t1tmdmBDfxVQP4bS8ED6X","/ip4/172.18.99.213/tcp/33220/ws/p2p/16Uiu2HAm7BiWFTMi3pWeT6xwbMdvh46t1tmdmBDfxVQP4bS8ED6X"],"enrUri":"enr:-LO4QKmxQZ_8itgRD-6nCZ2TcgZpe13f8eSkhQHVc0xvEKxPSZLHmPyH8V_tsxeLSBkUw9OhQthUOocF2j2O88BDkD0BgmlkgnY0gmlwhKwSY9WKbXVsdGlhZGRyc4wACgSsEmPVBoHE3QOCcnOFAAIBAACJc2VjcDI1NmsxoQKuuPeJj5xNiEPl6WolP7aDSUEKSqXww1o6WM394HATCIN0Y3CCgcODdWRwgoHFhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-21_04-25-39__6d1129bc-3879-4bd4-bffb-542391a36d65__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.115.239
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['63111', '63112', '63113', '63114', '63115']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 63111:63111 -p 63112:63112 -p 63113:63113 -p 63114:63114 -p 63115:63115 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63113 --rest-port=63111 --tcp-port=63112 --discv5-udp-port=63114 --rest-address=0.0.0.0 --nat=extip:172.18.115.239 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=f4cdfac11d87dd1fcdbdc4ec8cfbbabbe4aaeec5ca3c351ff05d7bccc3fdd0fd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63115 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QKmxQZ_8itgRD-6nCZ2TcgZpe13f8eSkhQHVc0xvEKxPSZLHmPyH8V_tsxeLSBkUw9OhQthUOocF2j2O88BDkD0BgmlkgnY0gmlwhKwSY9WKbXVsdGlhZGRyc4wACgSsEmPVBoHE3QOCcnOFAAIBAACJc2VjcDI1NmsxoQKuuPeJj5xNiEPl6WolP7aDSUEKSqXww1o6WM394HATCIN0Y3CCgcODdWRwgoHFhXdha3UyBQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.115.239 waku b3e2f4bcc050e745d65d603b5a8795599c642b592e5b7c93b2cf884be2d2ee19
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID b3e2f4bcc050. Setting up logs at ./log/docker/node2_2024-09-21_04-25-39__6d1129bc-3879-4bd4-bffb-542391a36d65__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 63111
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63111/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63111/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.115.239/tcp/63112/p2p/16Uiu2HAm9Xr7cwGvsPPv68woQLcEEwt8izvCz5QwEtcray5Fc5KR","/ip4/172.18.115.239/tcp/63113/ws/p2p/16Uiu2HAm9Xr7cwGvsPPv68woQLcEEwt8izvCz5QwEtcray5Fc5KR"],"enrUri":"enr:-LO4QFZYBHAELRvV3UOUnNhpQSIqmUw2Kku5KPo1mOWEMQHmL-WtgHLbddWSxz2CiJ2aajMnbNv5zXsC7i2eRgjyWLcBgmlkgnY0gmlwhKwSc--KbXVsdGlhZGRyc4wACgSsEnPvBvaJ3QOCcnOFAAIBAACJc2VjcDI1NmsxoQLRmI-6xPcol-jzqi49oNgo7xOwhikBIun1JaaUTnyFFIN0Y3CC9oiDdWRwgvaKhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63111/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.99.213/tcp/33219/p2p/16Uiu2HAm7BiWFTMi3pWeT6xwbMdvh46t1tmdmBDfxVQP4bS8ED6X"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33218/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63111/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33218/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33218/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1726892743698578176,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63111/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1726892743698578176,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id f9d715e9017a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id b3e2f4bcc050
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.