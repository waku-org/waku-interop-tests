[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_relay_and_store__peer_neither_relay_nor_store with id: 2024-05-09_09-20-51__29dafb1c-f88b-4d90-80f1-9b350e741582
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-09_09-20-51__29dafb1c-f88b-4d90-80f1-9b350e741582__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.99.243
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['39528', '39529', '39530', '39531', '39532']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:344 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 39528:39528 -p 39529:39529 -p 39530:39530 -p 39531:39531 -p 39532:39532 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39530 --rest-port=39528 --tcp-port=39529 --discv5-udp-port=39531 --rest-address=0.0.0.0 --nat=extip:172.18.99.243 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39532 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.99.243 waku 6f79bcc8495b9cf8c44a28feed021bb431c9e57fdd17899cb1c692a2d065a71a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 6f79bcc8495b. Setting up logs at ./log/docker/publishing_node1_2024-05-09_09-20-51__29dafb1c-f88b-4d90-80f1-9b350e741582__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 39528
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39528/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:209 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39528/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.99.243/tcp/39529/p2p/16Uiu2HAmHPrHas5CcVLhqBRyvAJgtR8NWKin7h6sqcZC3JZYn2GL","/ip4/172.18.99.243/tcp/39530/ws/p2p/16Uiu2HAmHPrHas5CcVLhqBRyvAJgtR8NWKin7h6sqcZC3JZYn2GL"],"enrUri":"enr:-LO4QEGIvJoJ3MZ5ut1sWkj109kf7BAJJ1u5rixl0V9tVJYIGcAnnNa4_Uq8y73dOFfNgxBWtvG5W2q7bm68QayqHgMBgmlkgnY0gmlwhKwSY_OKbXVsdGlhZGRyc4wACgSsEmPzBppq3QOCcnOFAAABAACJc2VjcDI1NmsxoQNGaZrJTb_H-uNyAnsa-wLW7pyvNw-yb6UFy1_bGXPo1YN0Y3CCmmmDdWRwgpprhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-09_09-20-51__29dafb1c-f88b-4d90-80f1-9b350e741582__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.128.85
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['1936', '1937', '1938', '1939', '1940']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:344 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 1936:1936 -p 1937:1937 -p 1938:1938 -p 1939:1939 -p 1940:1940 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=1938 --rest-port=1936 --tcp-port=1937 --discv5-udp-port=1939 --rest-address=0.0.0.0 --nat=extip:172.18.128.85 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=1940 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QEGIvJoJ3MZ5ut1sWkj109kf7BAJJ1u5rixl0V9tVJYIGcAnnNa4_Uq8y73dOFfNgxBWtvG5W2q7bm68QayqHgMBgmlkgnY0gmlwhKwSY_OKbXVsdGlhZGRyc4wACgSsEmPzBppq3QOCcnOFAAABAACJc2VjcDI1NmsxoQNGaZrJTb_H-uNyAnsa-wLW7pyvNw-yb6UFy1_bGXPo1YN0Y3CCmmmDdWRwgpprhXdha3UyAw --storenode=/ip4/172.18.99.243/tcp/39529/p2p/16Uiu2HAmHPrHas5CcVLhqBRyvAJgtR8NWKin7h6sqcZC3JZYn2GL --store=false --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.128.85 waku f722bb41a3486757135e6a6a46d27d753cd0606ce47457c362c5bf2e04c402d7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID f722bb41a348. Setting up logs at ./log/docker/store_node1_2024-05-09_09-20-51__29dafb1c-f88b-4d90-80f1-9b350e741582__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 1936
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1936/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:209 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1936/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.128.85/tcp/1937/p2p/16Uiu2HAkw47PVUa4PeZNhYVrN3WD2nxqo4w1LyzbCfPZNMkTSdyP","/ip4/172.18.128.85/tcp/1938/ws/p2p/16Uiu2HAkw47PVUa4PeZNhYVrN3WD2nxqo4w1LyzbCfPZNMkTSdyP"],"enrUri":"enr:-LO4QAxTK22R0N0YjPEyqqj3hvGVLFrb6fEzT_M6fNGWo7r6c31JLTCOrEP-SjKApHaL5o71fn5Jh1WkcZ1zg0S42vsBgmlkgnY0gmlwhKwSgFWKbXVsdGlhZGRyc4wACgSsEoBVBgeS3QOCcnOFAAABAACJc2VjcDI1NmsxoQIYMVNdA0g38oEP-U8IHz4NAYaIAU5J8DmZT_EJEibOvoN0Y3CCB5GDdWRwggeThXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1936/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.99.243/tcp/39529/p2p/16Uiu2HAmHPrHas5CcVLhqBRyvAJgtR8NWKin7h6sqcZC3JZYn2GL"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39528/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39528/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39528/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1715246454278300928,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 6f79bcc8495b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id f722bb41a348
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-09_09-20-51__29dafb1c-f88b-4d90-80f1-9b350e741582__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-09_09-20-51__29dafb1c-f88b-4d90-80f1-9b350e741582__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_relay_and_store__peer_neither_relay_nor_store with id: 2024-05-09_09-20-58__de5d2fb3-6e87-4565-a57a-f90261d4b9f1
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-09_09-20-58__de5d2fb3-6e87-4565-a57a-f90261d4b9f1__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.40.131
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['54971', '54972', '54973', '54974', '54975']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:344 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 54971:54971 -p 54972:54972 -p 54973:54973 -p 54974:54974 -p 54975:54975 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=54973 --rest-port=54971 --tcp-port=54972 --discv5-udp-port=54974 --rest-address=0.0.0.0 --nat=extip:172.18.40.131 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=54975 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.40.131 waku 6f8309e586e1d2d7d0e7da0c8c681be06ec3d1013a129f22cd3ba01aa383beb5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 6f8309e586e1. Setting up logs at ./log/docker/publishing_node1_2024-05-09_09-20-58__de5d2fb3-6e87-4565-a57a-f90261d4b9f1__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 54971
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54971/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:209 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54971/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.40.131/tcp/54972/p2p/16Uiu2HAmGwMxedq52ifN1RTtpQY9WqFokJB1Yyc8AwgTmjDfe37v","/ip4/172.18.40.131/tcp/54973/ws/p2p/16Uiu2HAmGwMxedq52ifN1RTtpQY9WqFokJB1Yyc8AwgTmjDfe37v"],"enrUri":"enr:-LO4QOya1eTgPvRV9oXBNb2EpyN4SB7H7yRoh03Emfn7iTkXZdom_EInmScvdIksxc4YYNPwHqSxHBHTfK_glXjZZtIBgmlkgnY0gmlwhKwSKIOKbXVsdGlhZGRyc4wACgSsEiiDBta93QOCcnOFAAABAACJc2VjcDI1NmsxoQM_oHmKAhp0aKETeGEYoqxmMRbAiFIN1kvzkZPUOrPMAYN0Y3CC1ryDdWRwgta-hXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-09_09-20-58__de5d2fb3-6e87-4565-a57a-f90261d4b9f1__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.84.190
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['60462', '60463', '60464', '60465', '60466']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:344 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 60462:60462 -p 60463:60463 -p 60464:60464 -p 60465:60465 -p 60466:60466 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=60464 --rest-port=60462 --tcp-port=60463 --discv5-udp-port=60465 --rest-address=0.0.0.0 --nat=extip:172.18.84.190 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=60466 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QOya1eTgPvRV9oXBNb2EpyN4SB7H7yRoh03Emfn7iTkXZdom_EInmScvdIksxc4YYNPwHqSxHBHTfK_glXjZZtIBgmlkgnY0gmlwhKwSKIOKbXVsdGlhZGRyc4wACgSsEiiDBta93QOCcnOFAAABAACJc2VjcDI1NmsxoQM_oHmKAhp0aKETeGEYoqxmMRbAiFIN1kvzkZPUOrPMAYN0Y3CC1ryDdWRwgta-hXdha3UyAw --storenode=/ip4/172.18.40.131/tcp/54972/p2p/16Uiu2HAmGwMxedq52ifN1RTtpQY9WqFokJB1Yyc8AwgTmjDfe37v --store=false --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.84.190 waku 05c5a7486f640f7aa0157f316fe5d5b9613a229fe33bdaa16176a8f767df86c2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 05c5a7486f64. Setting up logs at ./log/docker/store_node1_2024-05-09_09-20-58__de5d2fb3-6e87-4565-a57a-f90261d4b9f1__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 60462
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60462/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:209 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60462/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.84.190/tcp/60463/p2p/16Uiu2HAmDKocjmXFZP54vCJZKp9uau5cAGjhFoYEJKu8Hun2mUMn","/ip4/172.18.84.190/tcp/60464/ws/p2p/16Uiu2HAmDKocjmXFZP54vCJZKp9uau5cAGjhFoYEJKu8Hun2mUMn"],"enrUri":"enr:-LO4QJfE3KtL4JXULh3uqz5TQE4pqcU7K0B8Pmi20hF9gUOPGX_xCNY9QHm4XQiI7IBugwTwoDg4X6b4oCi48xaXX84BgmlkgnY0gmlwhKwSVL6KbXVsdGlhZGRyc4wACgSsElS-Buww3QOCcnOFAAABAACJc2VjcDI1NmsxoQMJ8YPVj6D0ls5ItuLJVvX0i-wbS16128iXa660QIb8kYN0Y3CC7C-DdWRwguwxhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60462/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.40.131/tcp/54972/p2p/16Uiu2HAmGwMxedq52ifN1RTtpQY9WqFokJB1Yyc8AwgTmjDfe37v"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54971/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54971/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54971/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1715246461292019456,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 6f8309e586e1
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 05c5a7486f64
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-09_09-20-58__de5d2fb3-6e87-4565-a57a-f90261d4b9f1__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-09_09-20-58__de5d2fb3-6e87-4565-a57a-f90261d4b9f1__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_relay_and_store__peer_neither_relay_nor_store with id: 2024-05-09_09-21-05__a16ed0b8-503c-445d-8029-49b36b9ceb1b
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-09_09-21-05__a16ed0b8-503c-445d-8029-49b36b9ceb1b__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.19.225
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['16665', '16666', '16667', '16668', '16669']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:344 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 16665:16665 -p 16666:16666 -p 16667:16667 -p 16668:16668 -p 16669:16669 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=16667 --rest-port=16665 --tcp-port=16666 --discv5-udp-port=16668 --rest-address=0.0.0.0 --nat=extip:172.18.19.225 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=16669 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.19.225 waku fe42a884b0c330606ec669519986f5f46b9582b9684304bee8256106b5504620
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID fe42a884b0c3. Setting up logs at ./log/docker/publishing_node1_2024-05-09_09-21-05__a16ed0b8-503c-445d-8029-49b36b9ceb1b__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 16665
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16665/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:209 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16665/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.19.225/tcp/16666/p2p/16Uiu2HAm73kDKQnxPmo19WUp3tTyqGQ2ghy2aj3HgXsRtVHKgSYq","/ip4/172.18.19.225/tcp/16667/ws/p2p/16Uiu2HAm73kDKQnxPmo19WUp3tTyqGQ2ghy2aj3HgXsRtVHKgSYq"],"enrUri":"enr:-LO4QBgLGyTXuiQNmUcPjJX6nUuHVdf170PkBAGHzlQ2vfvFErwnyZqHncOBgFWuITBdYGuo8lKuazJaEzTWRoBynUIBgmlkgnY0gmlwhKwSE-GKbXVsdGlhZGRyc4wACgSsEhPhBkEb3QOCcnOFAAABAACJc2VjcDI1NmsxoQKsrkB1j_miAa6WAdvAKgA4GqeeFLwOpWXXEhaMBqyTcoN0Y3CCQRqDdWRwgkEchXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-09_09-21-05__a16ed0b8-503c-445d-8029-49b36b9ceb1b__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.129.164
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['39415', '39416', '39417', '39418', '39419']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:344 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 39415:39415 -p 39416:39416 -p 39417:39417 -p 39418:39418 -p 39419:39419 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39417 --rest-port=39415 --tcp-port=39416 --discv5-udp-port=39418 --rest-address=0.0.0.0 --nat=extip:172.18.129.164 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39419 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QBgLGyTXuiQNmUcPjJX6nUuHVdf170PkBAGHzlQ2vfvFErwnyZqHncOBgFWuITBdYGuo8lKuazJaEzTWRoBynUIBgmlkgnY0gmlwhKwSE-GKbXVsdGlhZGRyc4wACgSsEhPhBkEb3QOCcnOFAAABAACJc2VjcDI1NmsxoQKsrkB1j_miAa6WAdvAKgA4GqeeFLwOpWXXEhaMBqyTcoN0Y3CCQRqDdWRwgkEchXdha3UyAw --storenode=/ip4/172.18.19.225/tcp/16666/p2p/16Uiu2HAm73kDKQnxPmo19WUp3tTyqGQ2ghy2aj3HgXsRtVHKgSYq --store=false --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.129.164 waku 028039df6e2c7612401559070fa1bd2a3aa039f0ccda9c6f723676311fee5414
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 028039df6e2c. Setting up logs at ./log/docker/store_node1_2024-05-09_09-21-05__a16ed0b8-503c-445d-8029-49b36b9ceb1b__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 39415
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39415/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:209 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39415/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.129.164/tcp/39416/p2p/16Uiu2HAmCQXmQauhSeYBo7mCHqCnwoZcp2mwCWpzjEhNqE845j5C","/ip4/172.18.129.164/tcp/39417/ws/p2p/16Uiu2HAmCQXmQauhSeYBo7mCHqCnwoZcp2mwCWpzjEhNqE845j5C"],"enrUri":"enr:-LO4QCHTFSuI4RVSTAeIlS6-gCqBxfPgT4qMv1xjKyKBLGNqD2q3fvA4O6ci9EyTyXt-cnyXe0XraHzxBR3xB_8nV4oBgmlkgnY0gmlwhKwSgaSKbXVsdGlhZGRyc4wACgSsEoGkBpn53QOCcnOFAAABAACJc2VjcDI1NmsxoQL8S89SAPCAYUAa0_7F77ruNMUclBadb31R6G-sBw5SS4N0Y3CCmfiDdWRwgpn6hXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39415/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.19.225/tcp/16666/p2p/16Uiu2HAm73kDKQnxPmo19WUp3tTyqGQ2ghy2aj3HgXsRtVHKgSYq"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16665/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16665/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16665/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1715246468196503296,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id fe42a884b0c3
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 028039df6e2c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-09_09-21-05__a16ed0b8-503c-445d-8029-49b36b9ceb1b__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-09_09-21-05__a16ed0b8-503c-445d-8029-49b36b9ceb1b__harbor.status.im_wakuorg_nwaku:latest.log