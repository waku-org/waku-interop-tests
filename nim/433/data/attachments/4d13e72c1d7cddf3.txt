[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_2_receiving_nodes__relay_node1_forwards_lightpushed_message_to_relay_node2 with id: 2024-11-07_04-43-26__f5bcc36e-8e1a-47d0-88d3-8c15479e378c
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-11-07_04-43-26__f5bcc36e-8e1a-47d0-88d3-8c15479e378c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.90.101
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['64125', '64126', '64127', '64128', '64129']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 64125:64125 -p 64126:64126 -p 64127:64127 -p 64128:64128 -p 64129:64129 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64127 --rest-port=64125 --tcp-port=64126 --discv5-udp-port=64128 --rest-address=0.0.0.0 --nat=extip:172.18.90.101 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3ab0ff51a7444df2dacd7ae1ceda1d6de1afe705fecc5b2d4be65b9e7027ccc3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64129 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.90.101 waku 964b43a7dbf8d18eab441d6d907c2ce5b2c885cf3fc2f49ea4683f80387a17dd
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 964b43a7dbf8. Setting up logs at ./log/docker/receiving_node1_2024-11-07_04-43-26__f5bcc36e-8e1a-47d0-88d3-8c15479e378c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 64125
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 4a9aa800bdc3. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64125/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64125/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.90.101/tcp/64126/p2p/16Uiu2HAmLBpy2uQFWpCZZmrKGyvDdPt1tWb3UWBTodkS33EoigcH","/ip4/172.18.90.101/tcp/64127/ws/p2p/16Uiu2HAmLBpy2uQFWpCZZmrKGyvDdPt1tWb3UWBTodkS33EoigcH"],"enrUri":"enr:-L24QI_rlJ4v9HdMCXK-a3WHyye9kIDUOuHr-7Ay_VXRo0wUEHeXugeUeo-dev1fx9BXof7K8BtGPy0K5t7VMNHXnckCgmlkgnY0gmlwhKwSWmWKbXVsdGlhZGRyc5YACASsElplBvp-AAoErBJaZQb6f90DgnJzhQADAQAAiXNlY3AyNTZrMaEDb-g0DsU_ZBGn9xrUTL0YO_sJik77COdeMiM8o8ivo2KDdGNwgvp-g3VkcIL6gIV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-11-07_04-43-26__f5bcc36e-8e1a-47d0-88d3-8c15479e378c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.126.89
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['10682', '10683', '10684', '10685', '10686']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 10682:10682 -p 10683:10683 -p 10684:10684 -p 10685:10685 -p 10686:10686 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=10684 --rest-port=10682 --tcp-port=10683 --discv5-udp-port=10685 --rest-address=0.0.0.0 --nat=extip:172.18.126.89 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c73ec6eea9c85eacfbec8d30a7e3d8dffa4dbdf84b9e380bb8af3afc0a8be30a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=10686 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.126.89 waku 27d68af9a0ec51c1a4c0399b5f3705ed26e89c85f101d5da7204559bdd395738
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 27d68af9a0ec. Setting up logs at ./log/docker/receiving_node2_2024-11-07_04-43-26__f5bcc36e-8e1a-47d0-88d3-8c15479e378c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 10682
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10682/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10682/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.126.89/tcp/10683/p2p/16Uiu2HAkxhGv5YcCnQDdsPvbivUdtynPyVEnoPdSaCgo37wRfcjh","/ip4/172.18.126.89/tcp/10684/ws/p2p/16Uiu2HAkxhGv5YcCnQDdsPvbivUdtynPyVEnoPdSaCgo37wRfcjh"],"enrUri":"enr:-L24QLRjWNixbbngXG1OZ4nPhZAR6NQmsM5Tj6aAs-dSPZ1JNRpdpAsylxiBctcOLLuJxbGx-B0C7nQoTVuec4IyLPgCgmlkgnY0gmlwhKwSflmKbXVsdGlhZGRyc5YACASsEn5ZBim7AAoErBJ-WQYpvN0DgnJzhQADAQAAiXNlY3AyNTZrMaECMJJGbvdbSDT69oBU6r9tj8VrHjmeCstu3SbXe10BA0iDdGNwgim7g3VkcIIpvYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10682/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.90.101/tcp/64126/p2p/16Uiu2HAmLBpy2uQFWpCZZmrKGyvDdPt1tWb3UWBTodkS33EoigcH"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-11-07_04-43-26__f5bcc36e-8e1a-47d0-88d3-8c15479e378c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.251.101
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['38238', '38239', '38240', '38241', '38242']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 38238:38238 -p 38239:38239 -p 38240:38240 -p 38241:38241 -p 38242:38242 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=38240 --rest-port=38238 --tcp-port=38239 --discv5-udp-port=38241 --rest-address=0.0.0.0 --nat=extip:172.18.251.101 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fb5062cbb8dffb4edeeab2178f8a58ffa6ad2adaa27abfec6fe0ef5e6bd5eff5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=38242 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QI_rlJ4v9HdMCXK-a3WHyye9kIDUOuHr-7Ay_VXRo0wUEHeXugeUeo-dev1fx9BXof7K8BtGPy0K5t7VMNHXnckCgmlkgnY0gmlwhKwSWmWKbXVsdGlhZGRyc5YACASsElplBvp-AAoErBJaZQb6f90DgnJzhQADAQAAiXNlY3AyNTZrMaEDb-g0DsU_ZBGn9xrUTL0YO_sJik77COdeMiM8o8ivo2KDdGNwgvp-g3VkcIL6gIV3YWt1Mgk --lightpushnode=/ip4/172.18.90.101/tcp/64126/p2p/16Uiu2HAmLBpy2uQFWpCZZmrKGyvDdPt1tWb3UWBTodkS33EoigcH --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.251.101 waku 32f3c2683f8afed6050eef71bf12d50f0ada968039c6f112655c0461cff9a1e1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 32f3c2683f8a. Setting up logs at ./log/docker/lightpush_node1_2024-11-07_04-43-26__f5bcc36e-8e1a-47d0-88d3-8c15479e378c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 38238
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38238/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38238/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.251.101/tcp/38239/p2p/16Uiu2HAmUbsuKCmg6wj65iWRnonQgcKQrPsh6iGtdwyc3xCZ4ULu","/ip4/172.18.251.101/tcp/38240/ws/p2p/16Uiu2HAmUbsuKCmg6wj65iWRnonQgcKQrPsh6iGtdwyc3xCZ4ULu"],"enrUri":"enr:-L24QCv1AQz3D7B6N5LzhYC3TpL7IWYz8ULzcMfLH-w0n5OMFQTDmNbD1AVe4ERsDDbdmCwZspozn9n0wlvda4ZQPGkCgmlkgnY0gmlwhKwS-2WKbXVsdGlhZGRyc5YACASsEvtlBpVfAAoErBL7ZQaVYN0DgnJzhQADAQAAiXNlY3AyNTZrMaED7O71MaXQi9Nd5P5fojhCFGCvGil-bhVfNoP_pKw5DWaDdGNwgpVfg3VkcIKVYYV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38238/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.90.101/tcp/64126/p2p/16Uiu2HAmLBpy2uQFWpCZZmrKGyvDdPt1tWb3UWBTodkS33EoigcH"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38238/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.126.89/tcp/10683/p2p/16Uiu2HAkxhGv5YcCnQDdsPvbivUdtynPyVEnoPdSaCgo37wRfcjh"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64125/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10682/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38238/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1730954611604066048}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64125/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1730954611604066048,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10682/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1730954611604066048,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 964b43a7dbf8
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 27d68af9a0ec
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 964b43a7dbf8. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 32f3c2683f8a
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 27d68af9a0ec. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.