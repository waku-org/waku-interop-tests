[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_extra_field with id: 2024-11-07_04-45-43__bf007b0e-1b35-4013-86be-0c4c49b943d3
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-11-07_04-45-43__bf007b0e-1b35-4013-86be-0c4c49b943d3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.40.125
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['25713', '25714', '25715', '25716', '25717']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 25713:25713 -p 25714:25714 -p 25715:25715 -p 25716:25716 -p 25717:25717 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25715 --rest-port=25713 --tcp-port=25714 --discv5-udp-port=25716 --rest-address=0.0.0.0 --nat=extip:172.18.40.125 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b35c213daf348b4b25f9a618f0e40fa5c9a52e7205128f39eb1fd4af52cd6c9d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25717 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.40.125 waku 53a8ce9c3aca93ef484c57bdaa21e7caaf997adb4bdd898975d2c7a638917d56
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 53a8ce9c3aca. Setting up logs at ./log/docker/receiving_node1_2024-11-07_04-45-43__bf007b0e-1b35-4013-86be-0c4c49b943d3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 25713
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container ea7257f1acbb. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25713/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25713/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.40.125/tcp/25714/p2p/16Uiu2HAm8pw5Efhg51Xt8RbbWGNKex1JEcrSgu9HwrpXvUeSLKuk","/ip4/172.18.40.125/tcp/25715/ws/p2p/16Uiu2HAm8pw5Efhg51Xt8RbbWGNKex1JEcrSgu9HwrpXvUeSLKuk"],"enrUri":"enr:-L24QOtC43G8I0x10OenaEvF-cpBu4aFukuAThIJGCOxF-xVam8mtlzKxUkP2b0afTLdKvPi4OUHsw8XZbT7l-FQtSECgmlkgnY0gmlwhKwSKH2KbXVsdGlhZGRyc5YACASsEih9BmRyAAoErBIofQZkc90DgnJzhQADAQAAiXNlY3AyNTZrMaECxx1a9etP7Rs1LhZsF3WYEt6InLVdG9ovJFWYZpvIHWODdGNwgmRyg3VkcIJkdIV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-11-07_04-45-43__bf007b0e-1b35-4013-86be-0c4c49b943d3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.0.8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['8490', '8491', '8492', '8493', '8494']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 8490:8490 -p 8491:8491 -p 8492:8492 -p 8493:8493 -p 8494:8494 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8492 --rest-port=8490 --tcp-port=8491 --discv5-udp-port=8493 --rest-address=0.0.0.0 --nat=extip:172.18.0.8 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4dbfda3f2476ce15a24eb8da57c1de60b07bfdec87bd43c55c5fbb5ddcfbbcca --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8494 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.0.8 waku 9d393bf40f0c161259ebdedc46691bad23d90b4e9bae18425ad3eb9753dd8bae
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 9d393bf40f0c. Setting up logs at ./log/docker/receiving_node2_2024-11-07_04-45-43__bf007b0e-1b35-4013-86be-0c4c49b943d3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 8490
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8490/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8490/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.0.8/tcp/8491/p2p/16Uiu2HAm1H38rbf5rzAxaUCYi2SNHnzag9f6qLQcJjwCq1yrea1K","/ip4/172.18.0.8/tcp/8492/ws/p2p/16Uiu2HAm1H38rbf5rzAxaUCYi2SNHnzag9f6qLQcJjwCq1yrea1K"],"enrUri":"enr:-L24QAWAbTYO3tjVOT4dztQ9LwAfgrTXLgKE2uVTs6rXbqNgFkgPga2MEuOJ1smLE7rQ5j-bY2C3CRnBCPh5QJcxkuYCgmlkgnY0gmlwhKwSAAiKbXVsdGlhZGRyc5YACASsEgAIBiErAAoErBIACAYhLN0DgnJzhQADAQAAiXNlY3AyNTZrMaECVu_Q0zxAY7SFHTfROQzHVX8sKKzbVpvg9xksN09eM46DdGNwgiErg3VkcIIhLYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8490/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.40.125/tcp/25714/p2p/16Uiu2HAm8pw5Efhg51Xt8RbbWGNKex1JEcrSgu9HwrpXvUeSLKuk"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-11-07_04-45-43__bf007b0e-1b35-4013-86be-0c4c49b943d3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.36.198
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['13058', '13059', '13060', '13061', '13062']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 13058:13058 -p 13059:13059 -p 13060:13060 -p 13061:13061 -p 13062:13062 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=13060 --rest-port=13058 --tcp-port=13059 --discv5-udp-port=13061 --rest-address=0.0.0.0 --nat=extip:172.18.36.198 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fe0ebbcccb02dd93183e1bf6ce9e1f0dfde05f266f5adbb93c0b0c081fe6bfa6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=13062 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QOtC43G8I0x10OenaEvF-cpBu4aFukuAThIJGCOxF-xVam8mtlzKxUkP2b0afTLdKvPi4OUHsw8XZbT7l-FQtSECgmlkgnY0gmlwhKwSKH2KbXVsdGlhZGRyc5YACASsEih9BmRyAAoErBIofQZkc90DgnJzhQADAQAAiXNlY3AyNTZrMaECxx1a9etP7Rs1LhZsF3WYEt6InLVdG9ovJFWYZpvIHWODdGNwgmRyg3VkcIJkdIV3YWt1Mgk --lightpushnode=/ip4/172.18.40.125/tcp/25714/p2p/16Uiu2HAm8pw5Efhg51Xt8RbbWGNKex1JEcrSgu9HwrpXvUeSLKuk --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.36.198 waku 4eaf27792b7f5e3ab6f5c8e3e4c8ec44d06eaed4a0ad559405336a0ea7637459
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 4eaf27792b7f. Setting up logs at ./log/docker/lightpush_node1_2024-11-07_04-45-43__bf007b0e-1b35-4013-86be-0c4c49b943d3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 13058
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13058/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13058/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.36.198/tcp/13059/p2p/16Uiu2HAm95YnzZgp9sxAzcCLPUNaUJoP4nvmXDvg8nCDujY5YWxg","/ip4/172.18.36.198/tcp/13060/ws/p2p/16Uiu2HAm95YnzZgp9sxAzcCLPUNaUJoP4nvmXDvg8nCDujY5YWxg"],"enrUri":"enr:-L24QFnqrXJ6ANDPNvAKtM2E_NE1oFQtuoPO-hWatRpbeWxIbnOgk4Ye3l0CPUL4_v-zzxju-pZ4SE9RrYV7-P6uyhoCgmlkgnY0gmlwhKwSJMaKbXVsdGlhZGRyc5YACASsEiTGBjMDAAoErBIkxgYzBN0DgnJzhQADAQAAiXNlY3AyNTZrMaECytvgFIMte4iaVdcVaE8777ta_PQD8tkAfchqROdtNamDdGNwgjMDg3VkcIIzBYV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13058/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.40.125/tcp/25714/p2p/16Uiu2HAm8pw5Efhg51Xt8RbbWGNKex1JEcrSgu9HwrpXvUeSLKuk"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13058/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.0.8/tcp/8491/p2p/16Uiu2HAm1H38rbf5rzAxaUCYi2SNHnzag9f6qLQcJjwCq1yrea1K"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25713/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8490/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13058/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1730954749222927616, "extraField": "extraValue"}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:13058/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 53a8ce9c3aca
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 9d393bf40f0c
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 53a8ce9c3aca. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 4eaf27792b7f
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 9d393bf40f0c. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.