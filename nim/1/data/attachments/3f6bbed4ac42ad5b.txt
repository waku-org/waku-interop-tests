[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_relay_and_store__peer_neither_relay_nor_store with id: 2024-05-06_05-56-43__bfe9ee74-48f4-406e-b991-c2ee93d23277
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-06_05-56-43__bfe9ee74-48f4-406e-b991-c2ee93d23277__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.45.79
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['13196', '13197', '13198', '13199', '13200']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:327 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 13196:13196 -p 13197:13197 -p 13198:13198 -p 13199:13199 -p 13200:13200 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=13198 --rest-port=13196 --tcp-port=13197 --discv5-udp-port=13199 --rest-address=0.0.0.0 --nat=extip:172.18.45.79 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=13200 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.45.79 waku f91797fc4b97378a377fe55436adfa764033f98a38b92523428b8dd389a1d0b2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID f91797fc4b97. Setting up logs at ./log/docker/publishing_node1_2024-05-06_05-56-43__bfe9ee74-48f4-406e-b991-c2ee93d23277__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 13196
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13196/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.45.79/tcp/13197/p2p/16Uiu2HAkupiiC1uVTXD2uYC71zAeC1LB2eDdGPniEPboM9ro7WT9","/ip4/172.18.45.79/tcp/13198/ws/p2p/16Uiu2HAkupiiC1uVTXD2uYC71zAeC1LB2eDdGPniEPboM9ro7WT9"],"enrUri":"enr:-LO4QD3blcjcQuMVECKBOcg3FBm0rMQjQjCLDRy22DUSNHgWEZQiIDwrkt_cN2zvy9MVUvABZXrfqg3EjwYOQ8YO4UoBgmlkgnY0gmlwhKwSLU-KbXVsdGlhZGRyc4wACgSsEi1PBjOO3QOCcnOFAAABAACJc2VjcDI1NmsxoQIF53JQyCtLHyLJ_5hGpKCuObKoe0s6Gs0sEXZezm4ycIN0Y3CCM42DdWRwgjOPhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:193 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-06_05-56-43__bfe9ee74-48f4-406e-b991-c2ee93d23277__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.180.192
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['19424', '19425', '19426', '19427', '19428']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:327 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 19424:19424 -p 19425:19425 -p 19426:19426 -p 19427:19427 -p 19428:19428 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19426 --rest-port=19424 --tcp-port=19425 --discv5-udp-port=19427 --rest-address=0.0.0.0 --nat=extip:172.18.180.192 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19428 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QD3blcjcQuMVECKBOcg3FBm0rMQjQjCLDRy22DUSNHgWEZQiIDwrkt_cN2zvy9MVUvABZXrfqg3EjwYOQ8YO4UoBgmlkgnY0gmlwhKwSLU-KbXVsdGlhZGRyc4wACgSsEi1PBjOO3QOCcnOFAAABAACJc2VjcDI1NmsxoQIF53JQyCtLHyLJ_5hGpKCuObKoe0s6Gs0sEXZezm4ycIN0Y3CCM42DdWRwgjOPhXdha3UyAw --storenode=/ip4/172.18.45.79/tcp/13197/p2p/16Uiu2HAkupiiC1uVTXD2uYC71zAeC1LB2eDdGPniEPboM9ro7WT9 --store=false --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.180.192 waku 02934b9ec93c4534db58970135f3c9dbe4cf4a5219b34516475b57f39a3a65ef
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 02934b9ec93c. Setting up logs at ./log/docker/store_node1_2024-05-06_05-56-43__bfe9ee74-48f4-406e-b991-c2ee93d23277__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 19424
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19424/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.180.192/tcp/19425/p2p/16Uiu2HAmKRhRTn4SK5MJN83Q9uSrQHFqseE4aZQabNcSXjHPE6MV","/ip4/172.18.180.192/tcp/19426/ws/p2p/16Uiu2HAmKRhRTn4SK5MJN83Q9uSrQHFqseE4aZQabNcSXjHPE6MV"],"enrUri":"enr:-LO4QJYByKal9Ok7PnI7inL67rZSpcrCsUVeY6U6NG9Rcrj5HiY3TfEIqihCJGNP5w0JcFV2gOwoUJlOsVuCBkAeg5cBgmlkgnY0gmlwhKwStMCKbXVsdGlhZGRyc4wACgSsErTABkvi3QOCcnOFAAABAACJc2VjcDI1NmsxoQNkmh4KouV2KECxGhtuAHTxfqXVi3HuF8jKALbaLyeQQIN0Y3CCS-GDdWRwgkvjhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:193 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19424/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.45.79/tcp/13197/p2p/16Uiu2HAkupiiC1uVTXD2uYC71zAeC1LB2eDdGPniEPboM9ro7WT9"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13196/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13196/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13196/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1714975006284838912,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id f91797fc4b97
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 02934b9ec93c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-06_05-56-43__bfe9ee74-48f4-406e-b991-c2ee93d23277__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-06_05-56-43__bfe9ee74-48f4-406e-b991-c2ee93d23277__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_relay_and_store__peer_neither_relay_nor_store with id: 2024-05-06_05-56-50__2c940a30-2b27-4f6d-a024-83487679012e
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-06_05-56-50__2c940a30-2b27-4f6d-a024-83487679012e__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.3.122
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['8950', '8951', '8952', '8953', '8954']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:327 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 8950:8950 -p 8951:8951 -p 8952:8952 -p 8953:8953 -p 8954:8954 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8952 --rest-port=8950 --tcp-port=8951 --discv5-udp-port=8953 --rest-address=0.0.0.0 --nat=extip:172.18.3.122 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8954 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.3.122 waku 177f077a88943c09607cf14da6fc17b638a0e6527f31f8ab5f367a2386b2df11
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 177f077a8894. Setting up logs at ./log/docker/publishing_node1_2024-05-06_05-56-50__2c940a30-2b27-4f6d-a024-83487679012e__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 8950
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8950/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.3.122/tcp/8951/p2p/16Uiu2HAm63S5h3rC4Px7UjBm5GF2QYEEiYWEb2AiMoFDFZR9yDT8","/ip4/172.18.3.122/tcp/8952/ws/p2p/16Uiu2HAm63S5h3rC4Px7UjBm5GF2QYEEiYWEb2AiMoFDFZR9yDT8"],"enrUri":"enr:-LO4QMb-JXe-FDwgC7zzKrONAuft-SpQCXy0Y6XChZKMfJPaO6Asd536NsOVSJ9oVh8pHPEJbg41I3W4is4dmkec0z4BgmlkgnY0gmlwhKwSA3qKbXVsdGlhZGRyc4wACgSsEgN6BiL43QOCcnOFAAABAACJc2VjcDI1NmsxoQKdvhBCohzMR_xCVSXiUQbIevqeOvy_4X-63jnIPxsm24N0Y3CCIveDdWRwgiL5hXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:193 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-06_05-56-50__2c940a30-2b27-4f6d-a024-83487679012e__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.225.102
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['29248', '29249', '29250', '29251', '29252']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:327 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 29248:29248 -p 29249:29249 -p 29250:29250 -p 29251:29251 -p 29252:29252 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29250 --rest-port=29248 --tcp-port=29249 --discv5-udp-port=29251 --rest-address=0.0.0.0 --nat=extip:172.18.225.102 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29252 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QMb-JXe-FDwgC7zzKrONAuft-SpQCXy0Y6XChZKMfJPaO6Asd536NsOVSJ9oVh8pHPEJbg41I3W4is4dmkec0z4BgmlkgnY0gmlwhKwSA3qKbXVsdGlhZGRyc4wACgSsEgN6BiL43QOCcnOFAAABAACJc2VjcDI1NmsxoQKdvhBCohzMR_xCVSXiUQbIevqeOvy_4X-63jnIPxsm24N0Y3CCIveDdWRwgiL5hXdha3UyAw --storenode=/ip4/172.18.3.122/tcp/8951/p2p/16Uiu2HAm63S5h3rC4Px7UjBm5GF2QYEEiYWEb2AiMoFDFZR9yDT8 --store=false --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.225.102 waku 87f04d9aacadf3fdb19950d5a350db2e136cd15c75f9bffaa4804010da286518
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 87f04d9aacad. Setting up logs at ./log/docker/store_node1_2024-05-06_05-56-50__2c940a30-2b27-4f6d-a024-83487679012e__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 29248
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29248/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.225.102/tcp/29249/p2p/16Uiu2HAmGgEK8e3RsTnaqSxVXVYaeGRYuNxeC9pTggodPwmj4yxt","/ip4/172.18.225.102/tcp/29250/ws/p2p/16Uiu2HAmGgEK8e3RsTnaqSxVXVYaeGRYuNxeC9pTggodPwmj4yxt"],"enrUri":"enr:-LO4QFXIVkzTkv6FKmzLqv-_kxakkBWocoBLQs_f2K8B6iDLFNaXInjle4vcVmsjU2KZGbEhYnCTADNyTLOr8fmLKqoBgmlkgnY0gmlwhKwS4WaKbXVsdGlhZGRyc4wACgSsEuFmBnJC3QOCcnOFAAABAACJc2VjcDI1NmsxoQM7wB3GU7i0_4L4beswb3A56CsBtqDFp-rulo7rid5ToYN0Y3CCckGDdWRwgnJDhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:193 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29248/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.3.122/tcp/8951/p2p/16Uiu2HAm63S5h3rC4Px7UjBm5GF2QYEEiYWEb2AiMoFDFZR9yDT8"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8950/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8950/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8950/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1714975014756674560,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 177f077a8894
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 87f04d9aacad
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-06_05-56-50__2c940a30-2b27-4f6d-a024-83487679012e__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-06_05-56-50__2c940a30-2b27-4f6d-a024-83487679012e__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_relay_and_store__peer_neither_relay_nor_store with id: 2024-05-06_05-56-58__844bd51b-a28b-40d7-93d2-a1d1796df537
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-06_05-56-58__844bd51b-a28b-40d7-93d2-a1d1796df537__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.102.46
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['24700', '24701', '24702', '24703', '24704']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:327 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 24700:24700 -p 24701:24701 -p 24702:24702 -p 24703:24703 -p 24704:24704 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=24702 --rest-port=24700 --tcp-port=24701 --discv5-udp-port=24703 --rest-address=0.0.0.0 --nat=extip:172.18.102.46 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=24704 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.102.46 waku e3d13884c7d617ec0cedeb21a61bdf6fa7a7eeffcfb3d135fc0974f27c05a504
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID e3d13884c7d6. Setting up logs at ./log/docker/publishing_node1_2024-05-06_05-56-58__844bd51b-a28b-40d7-93d2-a1d1796df537__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 24700
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24700/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.102.46/tcp/24701/p2p/16Uiu2HAmCNhbvjS2vYH4JfMJ7TPP4PNxvFvGaFFhKAPnabgJufqe","/ip4/172.18.102.46/tcp/24702/ws/p2p/16Uiu2HAmCNhbvjS2vYH4JfMJ7TPP4PNxvFvGaFFhKAPnabgJufqe"],"enrUri":"enr:-LO4QJfj9MPksqC3rHidg7B9-KTkevhKaYlvUf_y1jncD89xYYTiv7WN7yMpxucWuLYU0_7CGC3jPrbRB8T9kGe-r5sBgmlkgnY0gmlwhKwSZi6KbXVsdGlhZGRyc4wACgSsEmYuBmB-3QOCcnOFAAABAACJc2VjcDI1NmsxoQL708U8A3GGkiZUw5J3r4221JiSl8CqO8lV06a8PSMj7YN0Y3CCYH2DdWRwgmB_hXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:193 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-06_05-56-58__844bd51b-a28b-40d7-93d2-a1d1796df537__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.198.255
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['53910', '53911', '53912', '53913', '53914']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:327 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 53910:53910 -p 53911:53911 -p 53912:53912 -p 53913:53913 -p 53914:53914 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=53912 --rest-port=53910 --tcp-port=53911 --discv5-udp-port=53913 --rest-address=0.0.0.0 --nat=extip:172.18.198.255 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=53914 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QJfj9MPksqC3rHidg7B9-KTkevhKaYlvUf_y1jncD89xYYTiv7WN7yMpxucWuLYU0_7CGC3jPrbRB8T9kGe-r5sBgmlkgnY0gmlwhKwSZi6KbXVsdGlhZGRyc4wACgSsEmYuBmB-3QOCcnOFAAABAACJc2VjcDI1NmsxoQL708U8A3GGkiZUw5J3r4221JiSl8CqO8lV06a8PSMj7YN0Y3CCYH2DdWRwgmB_hXdha3UyAw --storenode=/ip4/172.18.102.46/tcp/24701/p2p/16Uiu2HAmCNhbvjS2vYH4JfMJ7TPP4PNxvFvGaFFhKAPnabgJufqe --store=false --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.198.255 waku 46ab4da576c0bc2aed84cbb202ae42b86d400849d5a8a8189280ed95c1ad7528
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 46ab4da576c0. Setting up logs at ./log/docker/store_node1_2024-05-06_05-56-58__844bd51b-a28b-40d7-93d2-a1d1796df537__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 53910
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53910/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.198.255/tcp/53911/p2p/16Uiu2HAmFL2NnQFH4iTeeX2ncT48qCkn12iSpphgSVvXx9t5qikr","/ip4/172.18.198.255/tcp/53912/ws/p2p/16Uiu2HAmFL2NnQFH4iTeeX2ncT48qCkn12iSpphgSVvXx9t5qikr"],"enrUri":"enr:-LO4QK6SBc66uCyJWKlWPyB3CIp-0HnLS8krYDPwXEJ6yXggTOWX6OptcBeb4ThfwzIcGZKiP7ahM7-Ra1EH-_G_ca0BgmlkgnY0gmlwhKwSxv-KbXVsdGlhZGRyc4wACgSsEsb_BtKY3QOCcnOFAAABAACJc2VjcDI1NmsxoQMnt1DhBlYSM52OOiHw-EgjZPmATEr90x9byo_cruDq04N0Y3CC0peDdWRwgtKZhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:193 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53910/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.102.46/tcp/24701/p2p/16Uiu2HAmCNhbvjS2vYH4JfMJ7TPP4PNxvFvGaFFhKAPnabgJufqe"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24700/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24700/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24700/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1714975021649308672,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id e3d13884c7d6
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 46ab4da576c0
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-06_05-56-58__844bd51b-a28b-40d7-93d2-a1d1796df537__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-06_05-56-58__844bd51b-a28b-40d7-93d2-a1d1796df537__harbor.status.im_wakuorg_nwaku:latest.log