[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_update_subscription_with_pubsub_topic_list_instead_of_string with id: 2024-12-24_04-10-19__cc5a92d7-c7d9-443c-8a87-b89234d29b3d
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-24_04-10-19__cc5a92d7-c7d9-443c-8a87-b89234d29b3d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.227.65
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['11914', '11915', '11916', '11917', '11918']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 11914:11914 -p 11915:11915 -p 11916:11916 -p 11917:11917 -p 11918:11918 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=11916 --rest-port=11914 --tcp-port=11915 --discv5-udp-port=11917 --rest-address=0.0.0.0 --nat=extip:172.18.227.65 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bebcdcf1fedbcf77a4e68cae5e921acf8e0d3abe6930eecacdad2b5badeaddaf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=11918 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.227.65 waku 75bb0b5bc128d99e1b4cbb19bb37789c06f318a5b14f22cb5936f0f9414fcb5d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 75bb0b5bc128. Setting up logs at ./log/docker/node1_2024-12-24_04-10-19__cc5a92d7-c7d9-443c-8a87-b89234d29b3d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 11914
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container be2274b8eda4. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11914/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11914/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.227.65/tcp/11915/p2p/16Uiu2HAkx5cxpzHsj1k8TZueh3Y9doot163GfUE1uGH5HvspBRCE","/ip4/172.18.227.65/tcp/11916/ws/p2p/16Uiu2HAkx5cxpzHsj1k8TZueh3Y9doot163GfUE1uGH5HvspBRCE"],"enrUri":"enr:-L24QIUxQzaDUknqZ34FXRFv4TeDjkaffso02AHPm6GujVtycE-Gd3VoWwwsoiG0aytREM-u2dVWoAJ6gWUA8NJerIkCgmlkgnY0gmlwhKwS40GKbXVsdGlhZGRyc5YACASsEuNBBi6LAAoErBLjQQYujN0DgnJzhQADAQAAiXNlY3AyNTZrMaECJ3AInnSE7Ep1T3ynlE8nQwgytqxVg3knSrXcPw0gleuDdGNwgi6Lg3VkcIIujYV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-24_04-10-19__cc5a92d7-c7d9-443c-8a87-b89234d29b3d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.2.236
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['40735', '40736', '40737', '40738', '40739']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 40735:40735 -p 40736:40736 -p 40737:40737 -p 40738:40738 -p 40739:40739 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40737 --rest-port=40735 --tcp-port=40736 --discv5-udp-port=40738 --rest-address=0.0.0.0 --nat=extip:172.18.2.236 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eeb4caecba0ccaf8da7b4cd2bd48fb6bcec3bad0cf318fbb3eb2b2c2d579bc11 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40739 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QIUxQzaDUknqZ34FXRFv4TeDjkaffso02AHPm6GujVtycE-Gd3VoWwwsoiG0aytREM-u2dVWoAJ6gWUA8NJerIkCgmlkgnY0gmlwhKwS40GKbXVsdGlhZGRyc5YACASsEuNBBi6LAAoErBLjQQYujN0DgnJzhQADAQAAiXNlY3AyNTZrMaECJ3AInnSE7Ep1T3ynlE8nQwgytqxVg3knSrXcPw0gleuDdGNwgi6Lg3VkcIIujYV3YWt1MgU --filternode=/ip4/172.18.227.65/tcp/11915/p2p/16Uiu2HAkx5cxpzHsj1k8TZueh3Y9doot163GfUE1uGH5HvspBRCE
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.2.236 waku cf9058b10d532114a8cf672dcfb031d0be9e07a1fdf5c66a0232bb54c720e907
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID cf9058b10d53. Setting up logs at ./log/docker/node2_2024-12-24_04-10-19__cc5a92d7-c7d9-443c-8a87-b89234d29b3d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 40735
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40735/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40735/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.2.236/tcp/40736/p2p/16Uiu2HAmCjAYxBUD9W9zNje8QtkmtyzYky98QrPSFC3thEjtbeTd","/ip4/172.18.2.236/tcp/40737/ws/p2p/16Uiu2HAmCjAYxBUD9W9zNje8QtkmtyzYky98QrPSFC3thEjtbeTd"],"enrUri":"enr:-L24QFQH2_XDsiPJoTgHakDHmoA3WYtRY0bJ70g0nDcXzc8ZYLNpiph_3Owe6NG-gP1Q6dqVZ09jxL-Eyi5zR5erdf0CgmlkgnY0gmlwhKwSAuyKbXVsdGlhZGRyc5YACASsEgLsBp8gAAoErBIC7AafId0DgnJzhQADAQAAiXNlY3AyNTZrMaEDARHbjYTCuHMqMzHNnuiaq83lnGqNtE_gm8n5uvD5VDyDdGNwgp8gg3VkcIKfIoV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40735/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.227.65/tcp/11915/p2p/16Uiu2HAkx5cxpzHsj1k8TZueh3Y9doot163GfUE1uGH5HvspBRCE"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11914/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40735/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "4a5f9d60-505a-45f1-bfe1-0c412eaa843a", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"4a5f9d60-505a-45f1-bfe1-0c412eaa843a","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X PUT "http://127.0.0.1:40735/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": ["/waku/2/rs/3/1"]}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:40735/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 75bb0b5bc128
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id cf9058b10d53
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 75bb0b5bc128. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.