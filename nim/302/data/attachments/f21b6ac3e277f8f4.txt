[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_missing_pubsub_topics with id: 2024-08-06_04-16-41__7b96d448-00bd-4990-942f-9cc0ac09ff42
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:81 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-06_04-16-41__7b96d448-00bd-4990-942f-9cc0ac09ff42__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.19.24
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['34830', '34831', '34832', '34833', '34834']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:428 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:157 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:159 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 34830:34830 -p 34831:34831 -p 34832:34832 -p 34833:34833 -p 34834:34834 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34832 --rest-port=34830 --tcp-port=34831 --discv5-udp-port=34833 --rest-address=0.0.0.0 --nat=extip:172.18.19.24 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34834 --metrics-logging=true --lightpush=true --relay=true --nodekey=30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.19.24 waku 60752f9cfaedb1cb4c8808d0d4da01700b40dae4141be147c7153ec53ad2da56
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 60752f9cfaed. Setting up logs at ./log/docker/receiving_node1_2024-08-06_04-16-41__7b96d448-00bd-4990-942f-9cc0ac09ff42__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Started container from image wakuorg/nwaku:latest. REST: 34830
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34830/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:274 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34830/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.19.24/tcp/34831/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip","/ip4/172.18.19.24/tcp/34832/ws/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"],"enrUri":"enr:-LO4QBGH8JI9LZX6t00k1kHw-hGUcLeBl7y6UNbACExfOjC-ezKXXvwwrNT9-vniWxpy9SYHZchcIjOVfd4Hr0mfTm0BgmlkgnY0gmlwhKwSExiKbXVsdGlhZGRyc4wACgSsEhMYBogQ3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCiA-DdWRwgogRhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:81 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-06_04-16-41__7b96d448-00bd-4990-942f-9cc0ac09ff42__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.29.92
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['2126', '2127', '2128', '2129', '2130']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:428 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:157 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:159 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 2126:2126 -p 2127:2127 -p 2128:2128 -p 2129:2129 -p 2130:2130 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2128 --rest-port=2126 --tcp-port=2127 --discv5-udp-port=2129 --rest-address=0.0.0.0 --nat=extip:172.18.29.92 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2130 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.29.92 waku cc468b663066d8143458b36e509833ba0849cbd842212a96a7917406db93ffa2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID cc468b663066. Setting up logs at ./log/docker/receiving_node2_2024-08-06_04-16-41__7b96d448-00bd-4990-942f-9cc0ac09ff42__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Started container from image wakuorg/nwaku:latest. REST: 2126
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2126/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:274 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2126/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.29.92/tcp/2127/p2p/16Uiu2HAm6q7s9N5LV8E1CRhTeHhgMQxpx1UCCC4TS8hkWfLb1Ejj","/ip4/172.18.29.92/tcp/2128/ws/p2p/16Uiu2HAm6q7s9N5LV8E1CRhTeHhgMQxpx1UCCC4TS8hkWfLb1Ejj"],"enrUri":"enr:-LO4QBNyL2CYGGYrqN36YgLVAZVwVKr59TVZbaMa7bXKe-s1IU2Rs_GlJg4crbNAdvE5J9Wu-Z1zAiLCmFWm1bHcZ24BgmlkgnY0gmlwhKwSHVyKbXVsdGlhZGRyc4wACgSsEh1cBghQ3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKpci74k0O9F6KS4-7IhloxycPDBZbcxQu03qrByO_ogoN0Y3CCCE-DdWRwgghRhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2126/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.19.24/tcp/34831/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:81 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-06_04-16-41__7b96d448-00bd-4990-942f-9cc0ac09ff42__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.54.6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['10791', '10792', '10793', '10794', '10795']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:428 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:157 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:159 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 10791:10791 -p 10792:10792 -p 10793:10793 -p 10794:10794 -p 10795:10795 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=10793 --rest-port=10791 --tcp-port=10792 --discv5-udp-port=10794 --rest-address=0.0.0.0 --nat=extip:172.18.54.6 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=10795 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QBGH8JI9LZX6t00k1kHw-hGUcLeBl7y6UNbACExfOjC-ezKXXvwwrNT9-vniWxpy9SYHZchcIjOVfd4Hr0mfTm0BgmlkgnY0gmlwhKwSExiKbXVsdGlhZGRyc4wACgSsEhMYBogQ3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCiA-DdWRwgogRhXdha3UyCQ --lightpushnode=/ip4/172.18.19.24/tcp/34831/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.54.6 waku 251e6343f6b0b451e0f3fa875a088e16e3eaadc0a8037ceeec73b33a11de66ba
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 251e6343f6b0. Setting up logs at ./log/docker/lightpush_node1_2024-08-06_04-16-41__7b96d448-00bd-4990-942f-9cc0ac09ff42__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Started container from image wakuorg/nwaku:latest. REST: 10791
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10791/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:274 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10791/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.54.6/tcp/10792/p2p/16Uiu2HAm1Np6NCCVXf12LtzbR2dcMU3pgLppevNRwkDKA1tfLtTX","/ip4/172.18.54.6/tcp/10793/ws/p2p/16Uiu2HAm1Np6NCCVXf12LtzbR2dcMU3pgLppevNRwkDKA1tfLtTX"],"enrUri":"enr:-LO4QHN0EVF6K6zWD-IYRuzkH_czN0qiFEEnTlVO8Om_B8s0NEaOmb4sJUuL5WVDHRb6H4XwAQtewVarEn9pgMXydD8BgmlkgnY0gmlwhKwSNgaKbXVsdGlhZGRyc4wACgSsEjYGBiop3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJYao2KcZbm8ZZuPbijFE1ctwF7Ipe-1HUd7Zkh_wb45oN0Y3CCKiiDdWRwgioqhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10791/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.19.24/tcp/34831/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10791/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.29.92/tcp/2127/p2p/16Uiu2HAm6q7s9N5LV8E1CRhTeHhgMQxpx1UCCC4TS8hkWfLb1Ejj"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34830/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2126/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10791/lightpush/v1/message" -H "Content-Type: application/json" -d '{"message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1722917805943665920}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:10791/lightpush/v1/message. Response content: b'Failed to request a message push: Lightpush request has not been published to any peers. msg_hash: 0xc9099ad7c2ed4996f8ef45c73046ef6a0a82f3abff99aa2e0231bdf1e806554b'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:218 Stopping container with id 60752f9cfaed
[35mDEBUG   [0m src.node.waku_node:waku_node.py:225 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:218 Stopping container with id cc468b663066
[35mDEBUG   [0m src.node.waku_node:waku_node.py:225 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:218 Stopping container with id 251e6343f6b0
[35mDEBUG   [0m src.node.waku_node:waku_node.py:225 Container stopped.