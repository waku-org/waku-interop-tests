[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_content_topics with id: 2024-12-21_04-12-22__f30d74d9-0876-454b-be88-236983e3e4d7
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-12-21_04-12-22__f30d74d9-0876-454b-be88-236983e3e4d7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.66.140
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['53160', '53161', '53162', '53163', '53164']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 53160:53160 -p 53161:53161 -p 53162:53162 -p 53163:53163 -p 53164:53164 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=53162 --rest-port=53160 --tcp-port=53161 --discv5-udp-port=53163 --rest-address=0.0.0.0 --nat=extip:172.18.66.140 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4c4cfb2732bdca23cac54cb9b76ffad9d9f2e7e6a05b020df3fd5a1a3ee26d22 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=53164 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.66.140 waku c5a1774c010c4f2ccb6685388e4034e79f79a470c444c71b28a97a877b2dcba0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID c5a1774c010c. Setting up logs at ./log/docker/receiving_node1_2024-12-21_04-12-22__f30d74d9-0876-454b-be88-236983e3e4d7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 53160
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container ef6155d5fc7e. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53160/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53160/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.66.140/tcp/53161/p2p/16Uiu2HAmBk24izRE62V55NK1xwV1qkc4zC3pJw95wmmm5qF1E7uz","/ip4/172.18.66.140/tcp/53162/ws/p2p/16Uiu2HAmBk24izRE62V55NK1xwV1qkc4zC3pJw95wmmm5qF1E7uz"],"enrUri":"enr:-L24QLtu5Ji3UfF7CmR2Yd7PF9o3eBa1-WuF-hXcHmMJ6e_JGtwzD-m_scfHTHjlI6NDaD3OzGGH1FF-5fvCDId7Ck8CgmlkgnY0gmlwhKwSQoyKbXVsdGlhZGRyc5YACASsEkKMBs-pAAoErBJCjAbPqt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC8m4n1NjMT0kgcyEOBu9-8oJ9MUokHevzWq-KhWvtV6GDdGNwgs-pg3VkcILPq4V3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-12-21_04-12-22__f30d74d9-0876-454b-be88-236983e3e4d7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.248.51
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['23778', '23779', '23780', '23781', '23782']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 23778:23778 -p 23779:23779 -p 23780:23780 -p 23781:23781 -p 23782:23782 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23780 --rest-port=23778 --tcp-port=23779 --discv5-udp-port=23781 --rest-address=0.0.0.0 --nat=extip:172.18.248.51 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cc8f349dbbf8a0f2dddaccdedbe031ccb5c2d5eba9bcdf9d1be7590dfddbbb5d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23782 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.248.51 waku 2aa774b6e20dd5c655d2607b7975d916218187cd844ae97630b540420d884f6e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 2aa774b6e20d. Setting up logs at ./log/docker/receiving_node2_2024-12-21_04-12-22__f30d74d9-0876-454b-be88-236983e3e4d7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 23778
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23778/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23778/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.248.51/tcp/23779/p2p/16Uiu2HAm2W3zDppHE9L7JGqCPvfpWZ8jCu7N2sbk8FZwSQSBHgWr","/ip4/172.18.248.51/tcp/23780/ws/p2p/16Uiu2HAm2W3zDppHE9L7JGqCPvfpWZ8jCu7N2sbk8FZwSQSBHgWr"],"enrUri":"enr:-L24QKLbn4Dllh-KiP-IB3ecjGCEXWVvg3aoxCsq9iWvHcAuV4hBbdWhx4aJ3dgJHSm4wwuPM4IzCtWs6Ekfu_8ISZkCgmlkgnY0gmlwhKwS-DOKbXVsdGlhZGRyc5YACASsEvgzBlzjAAoErBL4MwZc5N0DgnJzhQADAQAAiXNlY3AyNTZrMaECaSED-zUZ7CR-HmdqNBamfcRU5WirtMRV91aUO74r9T-DdGNwglzjg3VkcIJc5YV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23778/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.66.140/tcp/53161/p2p/16Uiu2HAmBk24izRE62V55NK1xwV1qkc4zC3pJw95wmmm5qF1E7uz"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-12-21_04-12-22__f30d74d9-0876-454b-be88-236983e3e4d7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.72.79
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['29141', '29142', '29143', '29144', '29145']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 29141:29141 -p 29142:29142 -p 29143:29143 -p 29144:29144 -p 29145:29145 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29143 --rest-port=29141 --tcp-port=29142 --discv5-udp-port=29144 --rest-address=0.0.0.0 --nat=extip:172.18.72.79 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a62bd5c1edecb561f95c4ecd5a5e62daef2f8b524a7376e8d1ef1afcca99714a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29145 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QLtu5Ji3UfF7CmR2Yd7PF9o3eBa1-WuF-hXcHmMJ6e_JGtwzD-m_scfHTHjlI6NDaD3OzGGH1FF-5fvCDId7Ck8CgmlkgnY0gmlwhKwSQoyKbXVsdGlhZGRyc5YACASsEkKMBs-pAAoErBJCjAbPqt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC8m4n1NjMT0kgcyEOBu9-8oJ9MUokHevzWq-KhWvtV6GDdGNwgs-pg3VkcILPq4V3YWt1Mgk --lightpushnode=/ip4/172.18.66.140/tcp/53161/p2p/16Uiu2HAmBk24izRE62V55NK1xwV1qkc4zC3pJw95wmmm5qF1E7uz --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.72.79 waku b19b431c547d747f57eed80204e99a37ce3b62ae8c133227852f982b947c300d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID b19b431c547d. Setting up logs at ./log/docker/lightpush_node1_2024-12-21_04-12-22__f30d74d9-0876-454b-be88-236983e3e4d7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 29141
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29141/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29141/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.72.79/tcp/29142/p2p/16Uiu2HAmAxMC4vFPoh9GxiUqHiekt15iZcKfBNrfgWCr2eTFWfGK","/ip4/172.18.72.79/tcp/29143/ws/p2p/16Uiu2HAmAxMC4vFPoh9GxiUqHiekt15iZcKfBNrfgWCr2eTFWfGK"],"enrUri":"enr:-L24QB_rZ6CKRj3rBCYWtEdv3J-aCzDEIw9wug8RADUxJp6nYmTyNps_7LX6eSNvZayA7E5T6vtdKP-rv16jiSJjNOACgmlkgnY0gmlwhKwSSE-KbXVsdGlhZGRyc5YACASsEkhPBnHWAAoErBJITwZx190DgnJzhQADAQAAiXNlY3AyNTZrMaEC5rsQnZ1y7azaoaGjqZ9SFuq_pyWjjBDGn-KYDI0eYziDdGNwgnHWg3VkcIJx2IV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29141/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.66.140/tcp/53161/p2p/16Uiu2HAmBk24izRE62V55NK1xwV1qkc4zC3pJw95wmmm5qF1E7uz"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29141/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.248.51/tcp/23779/p2p/16Uiu2HAm2W3zDppHE9L7JGqCPvfpWZ8jCu7N2sbk8FZwSQSBHgWr"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53160/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23778/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic Empty string
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29141/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "", "timestamp": 1734754347284918784}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:29141/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A dictionary
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29141/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": {"key": "YWFh"}, "timestamp": 1734754347290849024}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:29141/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic An integer
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29141/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": 1234567890, "timestamp": 1734754347295372288}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:29141/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A list
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29141/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": ["YWFh"], "timestamp": 1734754347301844224}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:29141/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A bool
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29141/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": true, "timestamp": 1734754347310056960}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:29141/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id c5a1774c010c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 2aa774b6e20d
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container c5a1774c010c. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id b19b431c547d
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 2aa774b6e20d. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.