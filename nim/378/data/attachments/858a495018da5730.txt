[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_only_lightpush__peer_full with id: 2024-10-02_04-20-14__897826e0-2416-4459-845c-4e59c3aead1f
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-10-02_04-20-14__897826e0-2416-4459-845c-4e59c3aead1f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.241.149
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['20434', '20435', '20436', '20437', '20438']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 20434:20434 -p 20435:20435 -p 20436:20436 -p 20437:20437 -p 20438:20438 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20436 --rest-port=20434 --tcp-port=20435 --discv5-udp-port=20437 --rest-address=0.0.0.0 --nat=extip:172.18.241.149 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c3463bc4bc19f7d223fcc5ec4dfe6010fbeca1938cecaaf914fad158afb74fb0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20438 --metrics-logging=true --lightpush=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.241.149 waku 043de6b2251909e83eb5d3170eca8cb403903d839b3e046522a569e08aa01d74
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 043de6b22519. Setting up logs at ./log/docker/receiving_node1_2024-10-02_04-20-14__897826e0-2416-4459-845c-4e59c3aead1f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 20434
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20434/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20434/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.241.149/tcp/20435/p2p/16Uiu2HAmH76p8L5DqZaw6RhDUQnrd9gK57jRasN5PYwsti55Ao23","/ip4/172.18.241.149/tcp/20436/ws/p2p/16Uiu2HAmH76p8L5DqZaw6RhDUQnrd9gK57jRasN5PYwsti55Ao23"],"enrUri":"enr:-LO4QLmfS6LrrQs_o4nq3pcrcTbB1VInbxXnYUwcg6nHGSIqfv-KzGMxqebvgAMFLTpyaE0_hsBDcOe43cadSKDJS9kBgmlkgnY0gmlwhKwS8ZWKbXVsdGlhZGRyc4wACgSsEvGVBk_U3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNCHyf5p8BzCLhAQO6MBBT0j3Spmy_Hp5rCY67u81uknIN0Y3CCT9ODdWRwgk_VhXdha3UyDQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-10-02_04-20-14__897826e0-2416-4459-845c-4e59c3aead1f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.237.20
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['24715', '24716', '24717', '24718', '24719']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 24715:24715 -p 24716:24716 -p 24717:24717 -p 24718:24718 -p 24719:24719 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=24717 --rest-port=24715 --tcp-port=24716 --discv5-udp-port=24718 --rest-address=0.0.0.0 --nat=extip:172.18.237.20 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d3fb0ee05bc0f4e9bd2467ccaf1c1bbd9d69b24a3d8f0f1e8a3b37d20ee03b8d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=24719 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.237.20 waku ca7b33a59ec793588076b2cd95ef26ca906ddeb1c3fd5612e127e70105b63896
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID ca7b33a59ec7. Setting up logs at ./log/docker/receiving_node2_2024-10-02_04-20-14__897826e0-2416-4459-845c-4e59c3aead1f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 24715
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24715/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24715/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.237.20/tcp/24716/p2p/16Uiu2HAkxVHkEQkVov4ta8ULVznYJe3CGkRGYfctC2CUbpPKRBmK","/ip4/172.18.237.20/tcp/24717/ws/p2p/16Uiu2HAkxVHkEQkVov4ta8ULVznYJe3CGkRGYfctC2CUbpPKRBmK"],"enrUri":"enr:-LO4QCDWmGCCsQ5iDV7ludyY4SSTzSFG4ArRI3ICZBgzs6FcVEJcvb7qCMN3aF-oyT0xbkcHxStvNmb71zTHDPlXrkgBgmlkgnY0gmlwhKwS7RSKbXVsdGlhZGRyc4wACgSsEu0UBmCN3QOCcnOFAAMBAACJc2VjcDI1NmsxoQItgD6BAtpNGOMxs1FzV0AAoEO5ZlWFwqh11eQBmewX0oN0Y3CCYIyDdWRwgmCOhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24715/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.241.149/tcp/20435/p2p/16Uiu2HAmH76p8L5DqZaw6RhDUQnrd9gK57jRasN5PYwsti55Ao23"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-10-02_04-20-14__897826e0-2416-4459-845c-4e59c3aead1f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.116.188
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['22266', '22267', '22268', '22269', '22270']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 22266:22266 -p 22267:22267 -p 22268:22268 -p 22269:22269 -p 22270:22270 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22268 --rest-port=22266 --tcp-port=22267 --discv5-udp-port=22269 --rest-address=0.0.0.0 --nat=extip:172.18.116.188 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e5a2e500ce1b65cb7e43ccc3e3f16cfdcd8bebcc2595c28d5a4538c332f7cc1a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22270 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QLmfS6LrrQs_o4nq3pcrcTbB1VInbxXnYUwcg6nHGSIqfv-KzGMxqebvgAMFLTpyaE0_hsBDcOe43cadSKDJS9kBgmlkgnY0gmlwhKwS8ZWKbXVsdGlhZGRyc4wACgSsEvGVBk_U3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNCHyf5p8BzCLhAQO6MBBT0j3Spmy_Hp5rCY67u81uknIN0Y3CCT9ODdWRwgk_VhXdha3UyDQ --lightpushnode=/ip4/172.18.241.149/tcp/20435/p2p/16Uiu2HAmH76p8L5DqZaw6RhDUQnrd9gK57jRasN5PYwsti55Ao23 --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.116.188 waku a8cbb8433f6dc3b937a5fac749641d0c62e743356d161160216b177aa2f5cb58
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID a8cbb8433f6d. Setting up logs at ./log/docker/lightpush_node1_2024-10-02_04-20-14__897826e0-2416-4459-845c-4e59c3aead1f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 22266
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22266/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22266/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.116.188/tcp/22267/p2p/16Uiu2HAm8pJX183c7dNfkhgeQ9hj1u9EwHRdaLKiKvtwPseDzu4U","/ip4/172.18.116.188/tcp/22268/ws/p2p/16Uiu2HAm8pJX183c7dNfkhgeQ9hj1u9EwHRdaLKiKvtwPseDzu4U"],"enrUri":"enr:-LO4QHFW_1PNq2oUkoDxiZihqbD6zwTJmONnebyXZDUmhtTvFO39QZp6pFMFCpSlmQp9VjABCNY4uQn22ZHJnVJj890BgmlkgnY0gmlwhKwSdLyKbXVsdGlhZGRyc4wACgSsEnS8Blb83QOCcnOFAAMBAACJc2VjcDI1NmsxoQLG9AWHS4qWL6s08-qUsl84LKHpAk93wSMuqXynh4VzYYN0Y3CCVvuDdWRwglb9hXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22266/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.241.149/tcp/20435/p2p/16Uiu2HAmH76p8L5DqZaw6RhDUQnrd9gK57jRasN5PYwsti55Ao23"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22266/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.237.20/tcp/24716/p2p/16Uiu2HAkxVHkEQkVov4ta8ULVznYJe3CGkRGYfctC2CUbpPKRBmK"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20434/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24715/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22266/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1727842819316018432}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20434/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1727842819316018432,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24715/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1727842819316018432,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 043de6b22519
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id ca7b33a59ec7
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id a8cbb8433f6d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.