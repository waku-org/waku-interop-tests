[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_on_non_subscribed_pubsub_topic with id: 2024-10-02_04-18-55__ca8e5727-e92a-4b20-812f-ebd59b2609ed
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-10-02_04-18-55__ca8e5727-e92a-4b20-812f-ebd59b2609ed__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.138.214
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['39061', '39062', '39063', '39064', '39065']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 39061:39061 -p 39062:39062 -p 39063:39063 -p 39064:39064 -p 39065:39065 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39063 --rest-port=39061 --tcp-port=39062 --discv5-udp-port=39064 --rest-address=0.0.0.0 --nat=extip:172.18.138.214 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dad9fcbe94ee155f11dc57fb5ced21bfde9d7faa4029e7299c312f8e8bb7b5dc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39065 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.138.214 waku 3f825a15aa4a829118c000a6edc387cf832c23bbc2495f82d411c4ba3b42989e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 3f825a15aa4a. Setting up logs at ./log/docker/receiving_node1_2024-10-02_04-18-55__ca8e5727-e92a-4b20-812f-ebd59b2609ed__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 39061
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39061/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39061/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.138.214/tcp/39062/p2p/16Uiu2HAmDAe5ewJawiHeSg5PaH1QqJJXyBXj9KDFq9gb5ZvB5KAx","/ip4/172.18.138.214/tcp/39063/ws/p2p/16Uiu2HAmDAe5ewJawiHeSg5PaH1QqJJXyBXj9KDFq9gb5ZvB5KAx"],"enrUri":"enr:-LO4QOqFDkEBUp2EerQ8LiGna3xzdiHeJ9n4DMIcHGTiugxZcYAVPUBi8waXf-BedIIiCwMkmSabjtgp2RVvd40-fZgBgmlkgnY0gmlwhKwSitaKbXVsdGlhZGRyc4wACgSsEorWBpiX3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMHmIFhwHqUa3AqrgXomWtAltBZq5q-K3i4P33wAgqeKYN0Y3CCmJaDdWRwgpiYhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-10-02_04-18-55__ca8e5727-e92a-4b20-812f-ebd59b2609ed__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.110.38
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['55082', '55083', '55084', '55085', '55086']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 55082:55082 -p 55083:55083 -p 55084:55084 -p 55085:55085 -p 55086:55086 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55084 --rest-port=55082 --tcp-port=55083 --discv5-udp-port=55085 --rest-address=0.0.0.0 --nat=extip:172.18.110.38 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bebe67a476f8cac3aad04afc0ff2a558bde7bfe4ff266e11c7e0e6f6cdd52ba9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55086 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.110.38 waku 76bfe0effbc1b633495cc9ddabce2712f90b50ae1a5230c116abcf19d71d5aaa
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 76bfe0effbc1. Setting up logs at ./log/docker/receiving_node2_2024-10-02_04-18-55__ca8e5727-e92a-4b20-812f-ebd59b2609ed__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 55082
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55082/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55082/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.110.38/tcp/55083/p2p/16Uiu2HAm4R25KcCjjrAwWk63DsjnrkiyJTYPo3cPir3qVompoYaW","/ip4/172.18.110.38/tcp/55084/ws/p2p/16Uiu2HAm4R25KcCjjrAwWk63DsjnrkiyJTYPo3cPir3qVompoYaW"],"enrUri":"enr:-LO4QGCyWv0si-mZEdANd2I7RZz_yPzUKbYAVEyMC7J9Q_iAATro7IWEinftKUIicxP-6E82rT11MxiL5yHof7-RmP0BgmlkgnY0gmlwhKwSbiaKbXVsdGlhZGRyc4wACgSsEm4mBtcs3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKFjlLIYVX3jS2_iSbuR3NAJ8_xxb5Ktk_C5TfCTZPFE4N0Y3CC1yuDdWRwgtcthXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55082/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.138.214/tcp/39062/p2p/16Uiu2HAmDAe5ewJawiHeSg5PaH1QqJJXyBXj9KDFq9gb5ZvB5KAx"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-10-02_04-18-55__ca8e5727-e92a-4b20-812f-ebd59b2609ed__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.220.60
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['55733', '55734', '55735', '55736', '55737']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 55733:55733 -p 55734:55734 -p 55735:55735 -p 55736:55736 -p 55737:55737 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55735 --rest-port=55733 --tcp-port=55734 --discv5-udp-port=55736 --rest-address=0.0.0.0 --nat=extip:172.18.220.60 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2fe21a729e0c8cf8dbd3d9f5bff8eadacdee69aabedaecddc1f1c91f6affbaa7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55737 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QOqFDkEBUp2EerQ8LiGna3xzdiHeJ9n4DMIcHGTiugxZcYAVPUBi8waXf-BedIIiCwMkmSabjtgp2RVvd40-fZgBgmlkgnY0gmlwhKwSitaKbXVsdGlhZGRyc4wACgSsEorWBpiX3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMHmIFhwHqUa3AqrgXomWtAltBZq5q-K3i4P33wAgqeKYN0Y3CCmJaDdWRwgpiYhXdha3UyCQ --lightpushnode=/ip4/172.18.138.214/tcp/39062/p2p/16Uiu2HAmDAe5ewJawiHeSg5PaH1QqJJXyBXj9KDFq9gb5ZvB5KAx --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.220.60 waku 56ae2d7d601d54f0e6b3aff37eb100ddc933274b9b2ceb9376b03d02b9499726
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 56ae2d7d601d. Setting up logs at ./log/docker/lightpush_node1_2024-10-02_04-18-55__ca8e5727-e92a-4b20-812f-ebd59b2609ed__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 55733
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55733/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55733/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.220.60/tcp/55734/p2p/16Uiu2HAmFYrWfHMc3XvSLNXgqDVcViRc7x52NvAkLMXQw4xdWXZF","/ip4/172.18.220.60/tcp/55735/ws/p2p/16Uiu2HAmFYrWfHMc3XvSLNXgqDVcViRc7x52NvAkLMXQw4xdWXZF"],"enrUri":"enr:-LO4QMcwKJLU_OMUj4URbOqE34_Ld5AfhnHHi4QBX3pvP8CrArNneD7uXrhS779v-0gpORXZ9sijwfbSmop0jLPkHHEBgmlkgnY0gmlwhKwS3DyKbXVsdGlhZGRyc4wACgSsEtw8Btm33QOCcnOFAAMBAACJc2VjcDI1NmsxoQMrALaF-xpFg5aYr3h2sRwqPw_j5Apy0GJ9vDwSRBXIboN0Y3CC2baDdWRwgtm4hXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55733/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.138.214/tcp/39062/p2p/16Uiu2HAmDAe5ewJawiHeSg5PaH1QqJJXyBXj9KDFq9gb5ZvB5KAx"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55733/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.110.38/tcp/55083/p2p/16Uiu2HAm4R25KcCjjrAwWk63DsjnrkiyJTYPo3cPir3qVompoYaW"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39061/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55082/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55733/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1727842739833591040}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:55733/lightpush/v1/message. Response content: b'Failed to request a message push: not_published_to_any_peer'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 3f825a15aa4a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 76bfe0effbc1
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 56ae2d7d601d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.