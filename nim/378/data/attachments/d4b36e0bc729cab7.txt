[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_missing_pubsub_topics with id: 2024-10-02_04-19-03__17936f6f-ff88-4b19-a844-0c9668b10ebd
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-10-02_04-19-03__17936f6f-ff88-4b19-a844-0c9668b10ebd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.61.167
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['47304', '47305', '47306', '47307', '47308']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 47304:47304 -p 47305:47305 -p 47306:47306 -p 47307:47307 -p 47308:47308 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=47306 --rest-port=47304 --tcp-port=47305 --discv5-udp-port=47307 --rest-address=0.0.0.0 --nat=extip:172.18.61.167 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0bc845c62a7bd7fc38aada5a04de8db9248bfea05fffc22fa2b90f9dd8ef9db6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=47308 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.61.167 waku bfb4dbedb78c98e710e96e94dc416822c3a677b417ed8bbdeb4d9878722639c1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID bfb4dbedb78c. Setting up logs at ./log/docker/receiving_node1_2024-10-02_04-19-03__17936f6f-ff88-4b19-a844-0c9668b10ebd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 47304
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47304/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47304/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.61.167/tcp/47305/p2p/16Uiu2HAm3DKeDvpHLDVBrdnvprv7WNTew39Quy7Zjt4xXENjPwdq","/ip4/172.18.61.167/tcp/47306/ws/p2p/16Uiu2HAm3DKeDvpHLDVBrdnvprv7WNTew39Quy7Zjt4xXENjPwdq"],"enrUri":"enr:-LO4QDZvCj4O3u8LpgUtYMN4ug88EmP5z74aMBQIe_3NUxIsQAHATjqyVm7ZCT5sZPZyraEXysgcDpxLyFI4j9ngbIsBgmlkgnY0gmlwhKwSPaeKbXVsdGlhZGRyc4wACgSsEj2nBrjK3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJzs4e12kIsfR5ohJf5O9vPSSkBVpODSnnUu3DfV8cFYIN0Y3CCuMmDdWRwgrjLhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-10-02_04-19-03__17936f6f-ff88-4b19-a844-0c9668b10ebd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.115.178
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['21809', '21810', '21811', '21812', '21813']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 21809:21809 -p 21810:21810 -p 21811:21811 -p 21812:21812 -p 21813:21813 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=21811 --rest-port=21809 --tcp-port=21810 --discv5-udp-port=21812 --rest-address=0.0.0.0 --nat=extip:172.18.115.178 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ccc23d7b09e1b508e5b92dabd8eeaeba007ae674ac85bf65027be9615af2e16f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=21813 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.115.178 waku 66139a949f4f23d4ac30d52a7c525e6803de9e0d0ca7c62d97c7e2f9cc70d29e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 66139a949f4f. Setting up logs at ./log/docker/receiving_node2_2024-10-02_04-19-03__17936f6f-ff88-4b19-a844-0c9668b10ebd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 21809
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21809/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21809/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.115.178/tcp/21810/p2p/16Uiu2HAmSxfHZzsyV4ssgsL8xnahD7KhdDKR69YsWbZ6ukj5pbHS","/ip4/172.18.115.178/tcp/21811/ws/p2p/16Uiu2HAmSxfHZzsyV4ssgsL8xnahD7KhdDKR69YsWbZ6ukj5pbHS"],"enrUri":"enr:-LO4QBIf546w1ldrze7KgO3rfwKJGu0t1850u4Qe-jEiMnMaFul6GbeQb784vciHox4Xg6XsQSPar5aq9zsaHrdUtSUBgmlkgnY0gmlwhKwSc7KKbXVsdGlhZGRyc4wACgSsEnOyBlUz3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPUioQBACO-4y6sQzpefpn4715NA25hCUrTyuBBYFv0GYN0Y3CCVTKDdWRwglU0hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21809/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.61.167/tcp/47305/p2p/16Uiu2HAm3DKeDvpHLDVBrdnvprv7WNTew39Quy7Zjt4xXENjPwdq"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-10-02_04-19-03__17936f6f-ff88-4b19-a844-0c9668b10ebd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.120.214
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['9001', '9002', '9003', '9004', '9005']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 9001:9001 -p 9002:9002 -p 9003:9003 -p 9004:9004 -p 9005:9005 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=9003 --rest-port=9001 --tcp-port=9002 --discv5-udp-port=9004 --rest-address=0.0.0.0 --nat=extip:172.18.120.214 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7aae6a4c8eb7bacda7c524fcfbe5e6d95fabd83453daa07cf5bf9d1eff3dd2fc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=9005 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QDZvCj4O3u8LpgUtYMN4ug88EmP5z74aMBQIe_3NUxIsQAHATjqyVm7ZCT5sZPZyraEXysgcDpxLyFI4j9ngbIsBgmlkgnY0gmlwhKwSPaeKbXVsdGlhZGRyc4wACgSsEj2nBrjK3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJzs4e12kIsfR5ohJf5O9vPSSkBVpODSnnUu3DfV8cFYIN0Y3CCuMmDdWRwgrjLhXdha3UyCQ --lightpushnode=/ip4/172.18.61.167/tcp/47305/p2p/16Uiu2HAm3DKeDvpHLDVBrdnvprv7WNTew39Quy7Zjt4xXENjPwdq --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.120.214 waku 7de0f39c3fee9088f1507799f5efaa3ffc19d5557af6c33cd1ee13412a3829e8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 7de0f39c3fee. Setting up logs at ./log/docker/lightpush_node1_2024-10-02_04-19-03__17936f6f-ff88-4b19-a844-0c9668b10ebd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 9001
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9001/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9001/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.120.214/tcp/9002/p2p/16Uiu2HAkzk6gmdLXwhicXXkjGMZCCnFJ8WNva1sCLrVeQ9yR8t6M","/ip4/172.18.120.214/tcp/9003/ws/p2p/16Uiu2HAkzk6gmdLXwhicXXkjGMZCCnFJ8WNva1sCLrVeQ9yR8t6M"],"enrUri":"enr:-LO4QDbEP_ov8J8rVFFpOMZJYYvB6XNfJYTjYhlv0qzXf9MmZ6jnuBqowtofS7AfFBgteK4i9IokEwQ2nASt6zfgAMgBgmlkgnY0gmlwhKwSeNaKbXVsdGlhZGRyc4wACgSsEnjWBiMr3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJPAtMt2HiNrmf439H_gjr7d9g-Agwv5JMmLKGGct1XeoN0Y3CCIyqDdWRwgiMshXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9001/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.61.167/tcp/47305/p2p/16Uiu2HAm3DKeDvpHLDVBrdnvprv7WNTew39Quy7Zjt4xXENjPwdq"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9001/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.115.178/tcp/21810/p2p/16Uiu2HAmSxfHZzsyV4ssgsL8xnahD7KhdDKR69YsWbZ6ukj5pbHS"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47304/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21809/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9001/lightpush/v1/message" -H "Content-Type: application/json" -d '{"message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1727842748521096192}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:9001/lightpush/v1/message. Response content: b'Failed to request a message push: not_published_to_any_peer'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id bfb4dbedb78c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 66139a949f4f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 7de0f39c3fee
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.