[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_content_topics with id: 2024-08-22_04-20-02__2aa6dc51-1911-4161-bcbe-acb6b7392b09
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-22_04-20-02__2aa6dc51-1911-4161-bcbe-acb6b7392b09__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.23.119
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['45626', '45627', '45628', '45629', '45630']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 45626:45626 -p 45627:45627 -p 45628:45628 -p 45629:45629 -p 45630:45630 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45628 --rest-port=45626 --tcp-port=45627 --discv5-udp-port=45629 --rest-address=0.0.0.0 --nat=extip:172.18.23.119 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d8eeb3869d1ecfd997a5ae62d133d8df5c933d7fb07a81b866f8bca54a5047ca --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45630 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.23.119 waku ef290ab7fcfa933c42ab81018fb8fd770c53ec6920a8b4e266d1ffc874d3c6c4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID ef290ab7fcfa. Setting up logs at ./log/docker/receiving_node1_2024-08-22_04-20-02__2aa6dc51-1911-4161-bcbe-acb6b7392b09__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 45626
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45626/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45626/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.23.119/tcp/45627/p2p/16Uiu2HAmMZ4FmxLqiR24LHQYj7GmFMhfpLnTN9XTWDamEKgqN1Gj","/ip4/172.18.23.119/tcp/45628/ws/p2p/16Uiu2HAmMZ4FmxLqiR24LHQYj7GmFMhfpLnTN9XTWDamEKgqN1Gj"],"enrUri":"enr:-LO4QMNnkJVlLABlbZkEyboXksaXCOS4jTxfIE_eaqfGz5CjRZB_QdddXPgZj6NXQPYG1z_7HOj2O2TAUY5thL4g1Z4BgmlkgnY0gmlwhKwSF3eKbXVsdGlhZGRyc4wACgSsEhd3BrI83QOCcnOFAAMBAACJc2VjcDI1NmsxoQOENBzgoOJpwEeDt0D6nWemkOF-8eZUIjVrnEIXv4z-OIN0Y3CCsjuDdWRwgrI9hXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-22_04-20-02__2aa6dc51-1911-4161-bcbe-acb6b7392b09__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.63.15
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['23120', '23121', '23122', '23123', '23124']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 23120:23120 -p 23121:23121 -p 23122:23122 -p 23123:23123 -p 23124:23124 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23122 --rest-port=23120 --tcp-port=23121 --discv5-udp-port=23123 --rest-address=0.0.0.0 --nat=extip:172.18.63.15 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ddb5ea8f68c0ddf76f6cee6fcca560a033fe5dfb2797e4132f58fcf69deaf6a4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23124 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.63.15 waku b3f13706c611d70f9d8cd2cf601746eb2df753d55126bdf4a2efa10d1f0f0514
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID b3f13706c611. Setting up logs at ./log/docker/receiving_node2_2024-08-22_04-20-02__2aa6dc51-1911-4161-bcbe-acb6b7392b09__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 23120
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23120/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23120/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.63.15/tcp/23121/p2p/16Uiu2HAmBR1PY76tFLi63CkGFczUXm2CpRT2vv27nyWwWo1Ft3Yq","/ip4/172.18.63.15/tcp/23122/ws/p2p/16Uiu2HAmBR1PY76tFLi63CkGFczUXm2CpRT2vv27nyWwWo1Ft3Yq"],"enrUri":"enr:-LO4QND1Yp0bWqh4iuDq6nFet2PVVApcRXo_FLWhDEHObQ5jG0KB8sueWHgsDctU9XkAYVI5u_o3cKNhXOnnoPr6dKwBgmlkgnY0gmlwhKwSPw-KbXVsdGlhZGRyc4wACgSsEj8PBlpS3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLtj1sz2DtJbQbcfp4Ewx7qfWg0Rimr3n3jsnD_n1oOVoN0Y3CCWlGDdWRwglpThXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23120/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.23.119/tcp/45627/p2p/16Uiu2HAmMZ4FmxLqiR24LHQYj7GmFMhfpLnTN9XTWDamEKgqN1Gj"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-22_04-20-02__2aa6dc51-1911-4161-bcbe-acb6b7392b09__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.224.7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['33206', '33207', '33208', '33209', '33210']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 33206:33206 -p 33207:33207 -p 33208:33208 -p 33209:33209 -p 33210:33210 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=33208 --rest-port=33206 --tcp-port=33207 --discv5-udp-port=33209 --rest-address=0.0.0.0 --nat=extip:172.18.224.7 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=babc82baee33c3a1c0f308bd9c5cdc47ffe7bff692dfeaafbf5d4c5c1a1da00f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=33210 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QMNnkJVlLABlbZkEyboXksaXCOS4jTxfIE_eaqfGz5CjRZB_QdddXPgZj6NXQPYG1z_7HOj2O2TAUY5thL4g1Z4BgmlkgnY0gmlwhKwSF3eKbXVsdGlhZGRyc4wACgSsEhd3BrI83QOCcnOFAAMBAACJc2VjcDI1NmsxoQOENBzgoOJpwEeDt0D6nWemkOF-8eZUIjVrnEIXv4z-OIN0Y3CCsjuDdWRwgrI9hXdha3UyCQ --lightpushnode=/ip4/172.18.23.119/tcp/45627/p2p/16Uiu2HAmMZ4FmxLqiR24LHQYj7GmFMhfpLnTN9XTWDamEKgqN1Gj --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.224.7 waku e4a00b305eaac8ea921c3568a06f6313b730e0d712e5587e7dedb629673958da
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID e4a00b305eaa. Setting up logs at ./log/docker/lightpush_node1_2024-08-22_04-20-02__2aa6dc51-1911-4161-bcbe-acb6b7392b09__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 33206
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33206/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33206/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.224.7/tcp/33207/p2p/16Uiu2HAmBU6mpGFrgGroUioYQDSFMakSmJ5KQb87jB7CgmQ34nj1","/ip4/172.18.224.7/tcp/33208/ws/p2p/16Uiu2HAmBU6mpGFrgGroUioYQDSFMakSmJ5KQb87jB7CgmQ34nj1"],"enrUri":"enr:-LO4QDLO1QVayQiBp4d_RH1pFBiIl63If_PfKqi4qOsgTYsdDV9fhomAu9kvktCeYssHzafHstwlCYn1qS0Z0ksYPr8BgmlkgnY0gmlwhKwS4AeKbXVsdGlhZGRyc4wACgSsEuAHBoG43QOCcnOFAAMBAACJc2VjcDI1NmsxoQLuWi_AAvK0zCVXOHSa_3NykNZECSt44D_yv3UQCM1-UIN0Y3CCgbeDdWRwgoG5hXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33206/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.23.119/tcp/45627/p2p/16Uiu2HAmMZ4FmxLqiR24LHQYj7GmFMhfpLnTN9XTWDamEKgqN1Gj"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33206/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.63.15/tcp/23121/p2p/16Uiu2HAmBR1PY76tFLi63CkGFczUXm2CpRT2vv27nyWwWo1Ft3Yq"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45626/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23120/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic Empty string
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33206/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "", "timestamp": 1724300408071005440}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:33206/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A dictionary
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33206/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": {"key": "YWFh"}, "timestamp": 1724300408079607552}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:33206/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic An integer
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33206/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": 1234567890, "timestamp": 1724300408083402752}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:33206/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A list
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33206/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": ["YWFh"], "timestamp": 1724300408086924032}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:33206/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A bool
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33206/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": true, "timestamp": 1724300408090083584}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:33206/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id ef290ab7fcfa
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id b3f13706c611
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id e4a00b305eaa
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.