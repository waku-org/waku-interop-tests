[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_only_lightpush__peer_full with id: 2024-08-22_04-21-55__c8e64209-ca5c-41f4-83eb-d70911d3e303
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-22_04-21-55__c8e64209-ca5c-41f4-83eb-d70911d3e303__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.178.197
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['30879', '30880', '30881', '30882', '30883']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 30879:30879 -p 30880:30880 -p 30881:30881 -p 30882:30882 -p 30883:30883 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=30881 --rest-port=30879 --tcp-port=30880 --discv5-udp-port=30882 --rest-address=0.0.0.0 --nat=extip:172.18.178.197 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1e00beb197bbae656868eebdfbadfae976d3bcef2dac3cfdc639cdff0ddbabb1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=30883 --metrics-logging=true --lightpush=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.178.197 waku 54f190b4e1feef85a0a6e5f3c9711e94f4c120edb4726c7d4a8d95369b03509b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 54f190b4e1fe. Setting up logs at ./log/docker/receiving_node1_2024-08-22_04-21-55__c8e64209-ca5c-41f4-83eb-d70911d3e303__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 30879
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30879/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30879/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.178.197/tcp/30880/p2p/16Uiu2HAmGu9rRX1sTT3JySp68svLV9BUGt5m5sSqmkzE9LicH9SG","/ip4/172.18.178.197/tcp/30881/ws/p2p/16Uiu2HAmGu9rRX1sTT3JySp68svLV9BUGt5m5sSqmkzE9LicH9SG"],"enrUri":"enr:-LO4QNobDC3d_kI7hWxFju73dBy0BrUdyhP6RBjRSwylrQyLYjUAYXHILeE2LdUZMzBUWJX1XYVrRdGR_3zEQGXJkGIBgmlkgnY0gmlwhKwSssWKbXVsdGlhZGRyc4wACgSsErLFBnih3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM_D5-SDQ-J7EAhs84yNuCCGWev1IpCFaXipmzuegBe6YN0Y3CCeKCDdWRwgniihXdha3UyDQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-22_04-21-55__c8e64209-ca5c-41f4-83eb-d70911d3e303__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.210.123
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['2423', '2424', '2425', '2426', '2427']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 2423:2423 -p 2424:2424 -p 2425:2425 -p 2426:2426 -p 2427:2427 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2425 --rest-port=2423 --tcp-port=2424 --discv5-udp-port=2426 --rest-address=0.0.0.0 --nat=extip:172.18.210.123 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=07ddf5a20d4f692ee016bb03789d60ac950ebde5a0bce13f9a980fb6aec77d31 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2427 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.210.123 waku 1d6405b67e06cfd829c99c3b2a449da2a524d545ad5c2c9b970c5aa82e807c56
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 1d6405b67e06. Setting up logs at ./log/docker/receiving_node2_2024-08-22_04-21-55__c8e64209-ca5c-41f4-83eb-d70911d3e303__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 2423
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2423/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2423/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.210.123/tcp/2424/p2p/16Uiu2HAmAtZrU7zCYzTX32QCYkNV7xcfGXpKoxPnuQDpuzCeqsuQ","/ip4/172.18.210.123/tcp/2425/ws/p2p/16Uiu2HAmAtZrU7zCYzTX32QCYkNV7xcfGXpKoxPnuQDpuzCeqsuQ"],"enrUri":"enr:-LO4QD8dSVb0XLMvKHF6-PHvTNjcZEV4D-nL2QXZIoa57iW5IJRyNu5WBFtHb4k-BMi3-G1kRO9MtiBZoDnQaHip_CMBgmlkgnY0gmlwhKwS0nuKbXVsdGlhZGRyc4wACgSsEtJ7Bgl53QOCcnOFAAMBAACJc2VjcDI1NmsxoQLlww8IDAa-gMP_KtWvQQcYwo528HNO3bOaRPUkbHxu14N0Y3CCCXiDdWRwggl6hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2423/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.178.197/tcp/30880/p2p/16Uiu2HAmGu9rRX1sTT3JySp68svLV9BUGt5m5sSqmkzE9LicH9SG"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-22_04-21-55__c8e64209-ca5c-41f4-83eb-d70911d3e303__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.157.48
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['7628', '7629', '7630', '7631', '7632']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 7628:7628 -p 7629:7629 -p 7630:7630 -p 7631:7631 -p 7632:7632 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7630 --rest-port=7628 --tcp-port=7629 --discv5-udp-port=7631 --rest-address=0.0.0.0 --nat=extip:172.18.157.48 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=419bdb95fce3c99a25dbdcbdda5dfe4d536e0c52c39a725c7fefebaa2c269ab7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7632 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QNobDC3d_kI7hWxFju73dBy0BrUdyhP6RBjRSwylrQyLYjUAYXHILeE2LdUZMzBUWJX1XYVrRdGR_3zEQGXJkGIBgmlkgnY0gmlwhKwSssWKbXVsdGlhZGRyc4wACgSsErLFBnih3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM_D5-SDQ-J7EAhs84yNuCCGWev1IpCFaXipmzuegBe6YN0Y3CCeKCDdWRwgniihXdha3UyDQ --lightpushnode=/ip4/172.18.178.197/tcp/30880/p2p/16Uiu2HAmGu9rRX1sTT3JySp68svLV9BUGt5m5sSqmkzE9LicH9SG --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.157.48 waku 6ff767364fbce38d6623ffa6149e9619ed45bee8ae83f86631953696ec74178a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 6ff767364fbc. Setting up logs at ./log/docker/lightpush_node1_2024-08-22_04-21-55__c8e64209-ca5c-41f4-83eb-d70911d3e303__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 7628
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7628/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7628/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.157.48/tcp/7629/p2p/16Uiu2HAmGTrARJFmJ1jWgFWwiPzues6t9EHBtyKERmxYSCJaW3PD","/ip4/172.18.157.48/tcp/7630/ws/p2p/16Uiu2HAmGTrARJFmJ1jWgFWwiPzues6t9EHBtyKERmxYSCJaW3PD"],"enrUri":"enr:-LO4QIH-bhuS28Qr2YTtZkKFWNle7QK8TNg3t6Tma8xeBtXZR-RYYT7jJPmtupSa9JyjncaUUxuaX-CE0Cn5sEgx_gcBgmlkgnY0gmlwhKwSnTCKbXVsdGlhZGRyc4wACgSsEp0wBh3O3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM4lBnsellulRMB2QihUVj2PvGyAbyItQCIcdH8aDfUyIN0Y3CCHc2DdWRwgh3PhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7628/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.178.197/tcp/30880/p2p/16Uiu2HAmGu9rRX1sTT3JySp68svLV9BUGt5m5sSqmkzE9LicH9SG"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7628/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.210.123/tcp/2424/p2p/16Uiu2HAmAtZrU7zCYzTX32QCYkNV7xcfGXpKoxPnuQDpuzCeqsuQ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30879/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2423/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7628/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724300520441947904}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30879/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1724300520441947904,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2423/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1724300520441947904,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 54f190b4e1fe
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 1d6405b67e06
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 6ff767364fbc
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.