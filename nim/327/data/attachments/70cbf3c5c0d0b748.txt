[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_pubsub_topics with id: 2024-08-22_04-20-27__d863cd09-2975-4289-a95c-d4500677ab7c
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-22_04-20-27__d863cd09-2975-4289-a95c-d4500677ab7c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.2.207
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['15404', '15405', '15406', '15407', '15408']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 15404:15404 -p 15405:15405 -p 15406:15406 -p 15407:15407 -p 15408:15408 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15406 --rest-port=15404 --tcp-port=15405 --discv5-udp-port=15407 --rest-address=0.0.0.0 --nat=extip:172.18.2.207 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=42cb09f78fed6cd6a1bc567dac70f7dedc6295b3d69f9b837faa66312a4a0a8d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15408 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.2.207 waku 163a769f46e2c0b7a11b4ab5f684fc3bc420ea4db0d35015fa18bde95915bbbd
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 163a769f46e2. Setting up logs at ./log/docker/receiving_node1_2024-08-22_04-20-27__d863cd09-2975-4289-a95c-d4500677ab7c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 15404
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15404/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15404/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.2.207/tcp/15405/p2p/16Uiu2HAmRPPg72YyWiBM4eQ4dnuJTiQdHfdvr9Db2iYfwNVzhB5G","/ip4/172.18.2.207/tcp/15406/ws/p2p/16Uiu2HAmRPPg72YyWiBM4eQ4dnuJTiQdHfdvr9Db2iYfwNVzhB5G"],"enrUri":"enr:-LO4QKW17plAvHCcw7yk_2g53R77w7YzexcL5z-8DzHlkYaGU7efnNxVRhSUDKB-tQ191kOry0EhPpYzRZKMfIMcOwEBgmlkgnY0gmlwhKwSAs-KbXVsdGlhZGRyc4wACgSsEgLPBjwu3QOCcnOFAAMBAACJc2VjcDI1NmsxoQO9KQKUMNPDEnP6jjoHa1odPhvKJHyiXoTkeA_Jk1VS74N0Y3CCPC2DdWRwgjwvhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-22_04-20-27__d863cd09-2975-4289-a95c-d4500677ab7c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.223.172
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['39838', '39839', '39840', '39841', '39842']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 39838:39838 -p 39839:39839 -p 39840:39840 -p 39841:39841 -p 39842:39842 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39840 --rest-port=39838 --tcp-port=39839 --discv5-udp-port=39841 --rest-address=0.0.0.0 --nat=extip:172.18.223.172 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ce398fe9f01cdf6bdcba63ba697e2cddf0fb33afe141f6b6dc73311fff612c6b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39842 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.223.172 waku 2333e42242f6fff449c697b420eeb8817b4a1e61deba6f8aee2d3c889606cd5f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 2333e42242f6. Setting up logs at ./log/docker/receiving_node2_2024-08-22_04-20-27__d863cd09-2975-4289-a95c-d4500677ab7c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 39838
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39838/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39838/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.223.172/tcp/39839/p2p/16Uiu2HAm1bztnV7wUreztMaM9tgwUL1XrtWM7djAU6PLgCjRZgon","/ip4/172.18.223.172/tcp/39840/ws/p2p/16Uiu2HAm1bztnV7wUreztMaM9tgwUL1XrtWM7djAU6PLgCjRZgon"],"enrUri":"enr:-LO4QE34j2vy6d6CHdsPqk1lCFH-lgDUZf0NLrKGBEOaR7_BPimzu5TX312RM-_ljv0x_vlfNIHuhVaDDAlmjN82LEQBgmlkgnY0gmlwhKwS36yKbXVsdGlhZGRyc4wACgSsEt-sBpug3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJby1C8lhSQ_XeQEsLA2ru9WBADexbDMt3FSgCWBoOfFYN0Y3CCm5-DdWRwgpuhhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39838/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.2.207/tcp/15405/p2p/16Uiu2HAmRPPg72YyWiBM4eQ4dnuJTiQdHfdvr9Db2iYfwNVzhB5G"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-22_04-20-27__d863cd09-2975-4289-a95c-d4500677ab7c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.185.182
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['61933', '61934', '61935', '61936', '61937']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 61933:61933 -p 61934:61934 -p 61935:61935 -p 61936:61936 -p 61937:61937 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61935 --rest-port=61933 --tcp-port=61934 --discv5-udp-port=61936 --rest-address=0.0.0.0 --nat=extip:172.18.185.182 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ab9e5db82b7cee60aadcd3edee6feb7ffabbbcdb8be623be9e94feebf34ecd86 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61937 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QKW17plAvHCcw7yk_2g53R77w7YzexcL5z-8DzHlkYaGU7efnNxVRhSUDKB-tQ191kOry0EhPpYzRZKMfIMcOwEBgmlkgnY0gmlwhKwSAs-KbXVsdGlhZGRyc4wACgSsEgLPBjwu3QOCcnOFAAMBAACJc2VjcDI1NmsxoQO9KQKUMNPDEnP6jjoHa1odPhvKJHyiXoTkeA_Jk1VS74N0Y3CCPC2DdWRwgjwvhXdha3UyCQ --lightpushnode=/ip4/172.18.2.207/tcp/15405/p2p/16Uiu2HAmRPPg72YyWiBM4eQ4dnuJTiQdHfdvr9Db2iYfwNVzhB5G --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.185.182 waku 5519ffb6eaf7bb51ac68c5e7ad826029b0a14c935dc2dba731729ceab1812b28
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 5519ffb6eaf7. Setting up logs at ./log/docker/lightpush_node1_2024-08-22_04-20-27__d863cd09-2975-4289-a95c-d4500677ab7c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 61933
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61933/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61933/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.185.182/tcp/61934/p2p/16Uiu2HAm4iFKXvrgTdKg43qxn8EZNjdHYRtFeKqDacHgwdrRhcM8","/ip4/172.18.185.182/tcp/61935/ws/p2p/16Uiu2HAm4iFKXvrgTdKg43qxn8EZNjdHYRtFeKqDacHgwdrRhcM8"],"enrUri":"enr:-LO4QEaeWKbUNBjzNQyG5dFRFk39j7jPvl69Qf6MM5_11vVoDTYaa1sJlwpOQWuAvtkkv3sMAyZ7x6STtQqNXnHv-gABgmlkgnY0gmlwhKwSubaKbXVsdGlhZGRyc4wACgSsErm2BvHv3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKJ-CxgFnXmrtm-0gdJjPNcSHvAvqSRDG9aPLKZTok224N0Y3CC8e6DdWRwgvHwhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61933/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.2.207/tcp/15405/p2p/16Uiu2HAmRPPg72YyWiBM4eQ4dnuJTiQdHfdvr9Db2iYfwNVzhB5G"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61933/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.223.172/tcp/39839/p2p/16Uiu2HAm1bztnV7wUreztMaM9tgwUL1XrtWM7djAU6PLgCjRZgon"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15404/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39838/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A dictionary', 'value': {'key': 'YWFh'}}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61933/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": {"key": "YWFh"}, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724300432999934720}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:61933/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'An integer', 'value': 1234567890}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61933/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": 1234567890, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724300433004835072}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:61933/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A list', 'value': ['YWFh']}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61933/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": ["YWFh"], "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724300433009601536}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:61933/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A bool', 'value': True}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61933/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": true, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1724300433014361344}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:61933/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 163a769f46e2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 2333e42242f6
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 5519ffb6eaf7
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.