[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_with_non_base64_hash with id: 2024-08-22_04-33-00__8df7f69e-48ec-4d01-9f64-ffeefcdb89dd
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:28 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-08-22_04-33-00__8df7f69e-48ec-4d01-9f64-ffeefcdb89dd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.27.147
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['8715', '8716', '8717', '8718', '8719']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 8715:8715 -p 8716:8716 -p 8717:8717 -p 8718:8718 -p 8719:8719 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8717 --rest-port=8715 --tcp-port=8716 --discv5-udp-port=8718 --rest-address=0.0.0.0 --nat=extip:172.18.27.147 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a17efd376dc6eeffaddb159ffc101ecc86a427d2f1ccc0606f6e82c4f5c01ccc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8719 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.27.147 waku 82519bac233d51d35eb6544bcd96de320bacd45b617c7712149dae104ecaa187
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 82519bac233d. Setting up logs at ./log/docker/publishing_node1_2024-08-22_04-33-00__8df7f69e-48ec-4d01-9f64-ffeefcdb89dd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 8715
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8715/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8715/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.27.147/tcp/8716/p2p/16Uiu2HAkxxy42s2467LrGLrN4aYDkYaYCfFBy7aFa8Zam4Sruamd","/ip4/172.18.27.147/tcp/8717/ws/p2p/16Uiu2HAkxxy42s2467LrGLrN4aYDkYaYCfFBy7aFa8Zam4Sruamd"],"enrUri":"enr:-LO4QCHPnThxeAc-eO-1edhnVFHUcrBG79dYy8MRji2xfcQ-Ly4IkTdWvUGhLb2y5u08LTsyqe_-Z03ZngOXOCYUiOIBgmlkgnY0gmlwhKwSG5OKbXVsdGlhZGRyc4wACgSsEhuTBiIN3QOCcnOFAAMBAACJc2VjcDI1NmsxoQI0l17XBcKL1LWiJebC9oNT9g11O-KvWuTGbQj0u-1OUIN0Y3CCIgyDdWRwgiIOhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/store_node1_2024-08-22_04-33-00__8df7f69e-48ec-4d01-9f64-ffeefcdb89dd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.120.164
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['20420', '20421', '20422', '20423', '20424']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 20420:20420 -p 20421:20421 -p 20422:20422 -p 20423:20423 -p 20424:20424 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20422 --rest-port=20420 --tcp-port=20421 --discv5-udp-port=20423 --rest-address=0.0.0.0 --nat=extip:172.18.120.164 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cd9fba0e3fb5d6c0affeadecd1ba8ad6d04168e6dbd4a4bc80681c99c8ce7b66 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20424 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QCHPnThxeAc-eO-1edhnVFHUcrBG79dYy8MRji2xfcQ-Ly4IkTdWvUGhLb2y5u08LTsyqe_-Z03ZngOXOCYUiOIBgmlkgnY0gmlwhKwSG5OKbXVsdGlhZGRyc4wACgSsEhuTBiIN3QOCcnOFAAMBAACJc2VjcDI1NmsxoQI0l17XBcKL1LWiJebC9oNT9g11O-KvWuTGbQj0u-1OUIN0Y3CCIgyDdWRwgiIOhXdha3UyAw --storenode=/ip4/172.18.27.147/tcp/8716/p2p/16Uiu2HAkxxy42s2467LrGLrN4aYDkYaYCfFBy7aFa8Zam4Sruamd --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.120.164 waku c651496e4c77e9865d7624efe4b2c088c3293365f7cde1e04669b2566ab54d79
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID c651496e4c77. Setting up logs at ./log/docker/store_node1_2024-08-22_04-33-00__8df7f69e-48ec-4d01-9f64-ffeefcdb89dd__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 20420
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20420/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20420/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.120.164/tcp/20421/p2p/16Uiu2HAm7uKHSkK29dTLWjtX251ihmNpm1MWxT99Bdk4Ws1R4pRh","/ip4/172.18.120.164/tcp/20422/ws/p2p/16Uiu2HAm7uKHSkK29dTLWjtX251ihmNpm1MWxT99Bdk4Ws1R4pRh"],"enrUri":"enr:-LO4QFhnVVD81mkA8zXvUvEu-n1WwMV7Rn0Td4qZfdf1HTkYEEpAV33wphVV5A_gpd-Y2UF_Y7AOsaYd-9N6lbAZOv4BgmlkgnY0gmlwhKwSeKSKbXVsdGlhZGRyc4wACgSsEnikBk_G3QOCcnOFAAMBAACJc2VjcDI1NmsxoQK5YRroB6lL0jbHD6SMNHZMyYtEc9DVPkA_ROMgeAfhLIN0Y3CCT8WDdWRwgk_HhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20420/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.27.147/tcp/8716/p2p/16Uiu2HAkxxy42s2467LrGLrN4aYDkYaYCfFBy7aFa8Zam4Sruamd"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8715/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20420/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:128 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8715/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:128 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8715/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8x", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:128 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8715/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8y", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:128 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8715/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8z", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8715/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&hashes=test&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:8715/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&hashes=test&pageSize=50&ascending=true. Response content: b'waku message hash parsing error: invalid hash length: 3'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20420/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&hashes=test&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:20420/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&hashes=test&pageSize=50&ascending=true. Response content: b'waku message hash parsing error: invalid hash length: 3'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 82519bac233d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id c651496e4c77
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.