2025-02-08 04:05:11.187 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-08 04:05:11.187 DEBUG [tests.conftest] Running test: test_valid_payloads_random_user_message_limit with id: 2025-02-08_04-05-11__5fa33604-5a56-490e-891a-61cd82440dbc
2025-02-08 04:05:11.188 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-08 04:05:11.188 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-08 04:05:11.194 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:05:11.195 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-08_04-05-11__5fa33604-5a56-490e-891a-61cd82440dbc__wakuorg_nwaku:latest.log
2025-02-08 04:05:11.195 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:05:11.195 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:05:11.196 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:05:11.196 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.244.82
2025-02-08 04:05:11.196 DEBUG [src.node.docker_mananger] Generated ports ['61995', '61996', '61997', '61998', '61999']
2025-02-08 04:05:11.197 DEBUG [src.node.waku_node] Using volumes ['/home/runner/work/waku-interop-tests/waku-interop-tests/rln_tree_raye_1:/etc/rln_tree', '/home/runner/work/waku-interop-tests/waku-interop-tests/keystore_raye_1:/keystore']
2025-02-08 04:05:11.197 DEBUG [src.node.docker_mananger] docker run -i -t -p 61995:61995 -p 61996:61996 -p 61997:61997 -p 61998:61998 -p 61999:61999 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61997 --rest-port=61995 --tcp-port=61996 --discv5-udp-port=61998 --rest-address=0.0.0.0 --nat=extip:172.18.244.82 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=29ddd79cfdb3a8c5d205eae847dbd0eed5519de8537f78c62ec0fdfb2beaaf3a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61999 --metrics-logging=true --relay=true --rln-relay-membership-index=1 --rln-relay-user-message-limit=3 --rln-relay-epoch-sec=1 --rln-relay=true --rln-relay-cred-path=/keystore/keystore.json --rln-relay-cred-password=password
2025-02-08 04:05:11.415 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.244.82 waku 9158ff123a34335f96907c0e1a54b7d6288e8008e06b5a9abd66bbd4d8c2ebed
2025-02-08 04:05:11.472 DEBUG [src.node.docker_mananger] Container started with ID 9158ff123a34. Setting up logs at ./log/docker/node1_2025-02-08_04-05-11__5fa33604-5a56-490e-891a-61cd82440dbc__wakuorg_nwaku:latest.log
2025-02-08 04:05:11.474 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 61995
2025-02-08 04:05:11.474 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:05:11.993 ERROR [src.node.docker_mananger] Max retries reached for container 7e24929b69fb. Exiting log stream.
2025-02-08 04:05:12.477 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61995/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:05:17.886 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Initializing","protocolsHealth":[{"Rln Relay":"Ready"}]}'
2025-02-08 04:05:17.987 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61995/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:05:17.989 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[{"Rln Relay":"Ready"}]}'
2025-02-08 04:05:17.989 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:05:17.990 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61995/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:05:17.992 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.244.82/tcp/61996/p2p/16Uiu2HAkzvisrhsRKZ4VdrFzbpLqV1Hu6mn1vYQQxb6FezCAAcfe","/ip4/172.18.244.82/tcp/61997/ws/p2p/16Uiu2HAkzvisrhsRKZ4VdrFzbpLqV1Hu6mn1vYQQxb6FezCAAcfe"],"enrUri":"enr:-L24QGDGrpbUnY0CVRGR31k54qtvMsSh8XXqdvgbQE_0XyhzPpBKVsLfws3PPJcVObEg8WXuCyh-Zvwq6yKn2G6WSLYCgmlkgnY0gmlwhKwS9FKKbXVsdGlhZGRyc5YACASsEvRSBvIsAAoErBL0UgbyLd0DgnJzhQADAQAAiXNlY3AyNTZrMaECUbuN8wWOj-njpiMjCBdejdjkOftqkOm2rsJ-wobNzEWDdGNwgvIsg3VkcILyLoV3YWt1MgE"}'
2025-02-08 04:05:17.992 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:05:17.998 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:05:17.998 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-08_04-05-11__5fa33604-5a56-490e-891a-61cd82440dbc__wakuorg_nwaku:latest.log
2025-02-08 04:05:17.998 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:05:17.998 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:05:18.000 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:05:18.000 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.201.121
2025-02-08 04:05:18.000 DEBUG [src.node.docker_mananger] Generated ports ['14590', '14591', '14592', '14593', '14594']
2025-02-08 04:05:18.000 DEBUG [src.node.waku_node] Using volumes ['/home/runner/work/waku-interop-tests/waku-interop-tests/rln_tree_evjp_2:/etc/rln_tree', '/home/runner/work/waku-interop-tests/waku-interop-tests/keystore_evjp_2:/keystore']
2025-02-08 04:05:18.000 DEBUG [src.node.docker_mananger] docker run -i -t -p 14590:14590 -p 14591:14591 -p 14592:14592 -p 14593:14593 -p 14594:14594 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14592 --rest-port=14590 --tcp-port=14591 --discv5-udp-port=14593 --rest-address=0.0.0.0 --nat=extip:172.18.201.121 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3cb3dd3ea2c633ab2ad3e859adc68e616dbbd78aacb86fe7d8b2b8b340295c33 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14594 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QGDGrpbUnY0CVRGR31k54qtvMsSh8XXqdvgbQE_0XyhzPpBKVsLfws3PPJcVObEg8WXuCyh-Zvwq6yKn2G6WSLYCgmlkgnY0gmlwhKwS9FKKbXVsdGlhZGRyc5YACASsEvRSBvIsAAoErBL0UgbyLd0DgnJzhQADAQAAiXNlY3AyNTZrMaECUbuN8wWOj-njpiMjCBdejdjkOftqkOm2rsJ-wobNzEWDdGNwgvIsg3VkcILyLoV3YWt1MgE --rln-relay-membership-index=1 --rln-relay-user-message-limit=3 --rln-relay-epoch-sec=1 --rln-relay=true --rln-relay-cred-path=/keystore/keystore.json --rln-relay-cred-password=password
2025-02-08 04:05:18.240 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.201.121 waku a0a10b45a71706ee7280d98e087950239861ec302a9e0329e6e76b856923af72
2025-02-08 04:05:18.291 DEBUG [src.node.docker_mananger] Container started with ID a0a10b45a717. Setting up logs at ./log/docker/node2_2025-02-08_04-05-11__5fa33604-5a56-490e-891a-61cd82440dbc__wakuorg_nwaku:latest.log
2025-02-08 04:05:18.293 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 14590
2025-02-08 04:05:18.294 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:05:19.294 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14590/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:05:24.692 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Initializing","protocolsHealth":[{"Rln Relay":"Ready"}]}'
2025-02-08 04:05:24.793 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14590/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:05:24.795 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[{"Rln Relay":"Ready"}]}'
2025-02-08 04:05:24.796 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:05:24.796 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14590/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:05:24.798 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.201.121/tcp/14591/p2p/16Uiu2HAm3pFnSkDyi4ndM8GW81MYov9fzi84i6rWeCmYyMRSY4kp","/ip4/172.18.201.121/tcp/14592/ws/p2p/16Uiu2HAm3pFnSkDyi4ndM8GW81MYov9fzi84i6rWeCmYyMRSY4kp"],"enrUri":"enr:-L24QEfafB-fkZMjTlpVSDgyPk2a1wNGhieFzyyTH134HWSIUelpWFOwdIAm8f7smGX7-tSk_ticR96Cy_4nTyMWmXoCgmlkgnY0gmlwhKwSyXmKbXVsdGlhZGRyc5YACASsEsl5Bjj_AAoErBLJeQY5AN0DgnJzhQADAQAAiXNlY3AyNTZrMaECfKZ-8pZip7phZSlOvs85Ys-n8rxDuRWUMMp90X0VLcGDdGNwgjj_g3VkcII5AYV3YWt1MgE"}'
2025-02-08 04:05:24.798 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:05:24.799 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14590/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.244.82/tcp/61996/p2p/16Uiu2HAkzvisrhsRKZ4VdrFzbpLqV1Hu6mn1vYQQxb6FezCAAcfe"]'
2025-02-08 04:05:24.837 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:05:24.838 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61995/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/1/0"]'
2025-02-08 04:05:24.859 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:05:24.859 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14590/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/1/0"]'
2025-02-08 04:05:24.867 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:05:24.868 DEBUG [tests.relay.test_rln] Running test with payload A simple string
2025-02-08 04:05:24.869 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61995/relay/v1/messages/%2Fwaku%2F2%2Frs%2F1%2F0" -H "Content-Type: application/json" -d '{"payload": "SGVsbG8gV29ybGQh", "contentTopic": "/test/1/waku-rln-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:05:25.147 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:05:25.148 DEBUG [tests.relay.test_rln] Running test with payload An integer
2025-02-08 04:05:25.149 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61995/relay/v1/messages/%2Fwaku%2F2%2Frs%2F1%2F0" -H "Content-Type: application/json" -d '{"payload": "MTIzNDU2Nzg5MA==", "contentTopic": "/test/1/waku-rln-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:05:25.387 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:05:25.388 DEBUG [tests.relay.test_rln] Running test with payload A dictionary
2025-02-08 04:05:25.389 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61995/relay/v1/messages/%2Fwaku%2F2%2Frs%2F1%2F0" -H "Content-Type: application/json" -d '{"payload": "eyJrZXkiOiAidmFsdWUifQ==", "contentTopic": "/test/1/waku-rln-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:05:25.626 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:05:25.628 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-08 04:05:25.629 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-08 04:05:25.629 DEBUG [src.node.waku_node] Stopping container with id 9158ff123a34
2025-02-08 04:05:26.398 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:05:26.398 DEBUG [src.node.waku_node] Stopping container with id a0a10b45a717
2025-02-08 04:05:27.228 ERROR [src.node.docker_mananger] Max retries reached for container 9158ff123a34. Exiting log stream.
2025-02-08 04:05:27.731 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:05:27.732 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-08 04:05:27.746 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 04:05:27.751 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
