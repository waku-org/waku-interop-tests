2025-02-08 04:06:58.772 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-08 04:06:58.773 DEBUG [tests.conftest] Running test: test_main_node_only_lightpush__peer_only_relay with id: 2025-02-08_04-06-58__5e333aec-44ff-4fe0-9ed6-39bed5ea6d32
2025-02-08 04:06:58.774 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-08 04:06:58.774 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-08 04:06:58.784 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:06:58.784 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-08_04-06-58__5e333aec-44ff-4fe0-9ed6-39bed5ea6d32__wakuorg_nwaku:latest.log
2025-02-08 04:06:58.785 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:06:58.785 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:06:58.786 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:06:58.786 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.37.208
2025-02-08 04:06:58.786 DEBUG [src.node.docker_mananger] Generated ports ['58290', '58291', '58292', '58293', '58294']
2025-02-08 04:06:58.786 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:06:58.787 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:06:58.787 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:06:58.787 DEBUG [src.node.docker_mananger] docker run -i -t -p 58290:58290 -p 58291:58291 -p 58292:58292 -p 58293:58293 -p 58294:58294 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=58292 --rest-port=58290 --tcp-port=58291 --discv5-udp-port=58293 --rest-address=0.0.0.0 --nat=extip:172.18.37.208 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b44c91bf06ba05fbafb20aca890bbffad152b26bd010fb2d6f4c96f9c2f84c3a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=58294 --metrics-logging=true --lightpush=false --relay=true
2025-02-08 04:06:59.021 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.37.208 waku 602a7e652b364b00e63a995f7687357edc111217c0a5e5b74fe6dc5926a730b2
2025-02-08 04:06:59.072 DEBUG [src.node.docker_mananger] Container started with ID 602a7e652b36. Setting up logs at ./log/docker/receiving_node1_2025-02-08_04-06-58__5e333aec-44ff-4fe0-9ed6-39bed5ea6d32__wakuorg_nwaku:latest.log
2025-02-08 04:06:59.072 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 58290
2025-02-08 04:06:59.072 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:06:59.593 ERROR [src.node.docker_mananger] Max retries reached for container aed36f1669db. Exiting log stream.
2025-02-08 04:07:00.074 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58290/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:07:00.077 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:07:00.077 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:07:00.077 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58290/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:07:00.079 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.37.208/tcp/58291/p2p/16Uiu2HAmRmP9aUyA1eEsWB8YT2Kbr7TZnah952uC7nru3FYUkBfK","/ip4/172.18.37.208/tcp/58292/ws/p2p/16Uiu2HAmRmP9aUyA1eEsWB8YT2Kbr7TZnah952uC7nru3FYUkBfK"],"enrUri":"enr:-L24QDn1-Juy5iBzKC0z8hGBxY-yx-__eUDHWWHVybc5_vGwJXN12hr70Bt_pyu0DrxmENTDoBYrBXeCkgOizXuhPB8CgmlkgnY0gmlwhKwSJdCKbXVsdGlhZGRyc5YACASsEiXQBuOzAAoErBIl0AbjtN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDwssxWLl0vCXoIrES4CzE0K5442Hu4Ow2wQR89iOS_l6DdGNwguOzg3VkcILjtYV3YWt1MgE"}'
2025-02-08 04:07:00.079 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:07:00.080 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58290/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-08 04:07:00.098 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:07:00.104 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:07:00.104 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-08_04-06-58__5e333aec-44ff-4fe0-9ed6-39bed5ea6d32__wakuorg_nwaku:latest.log
2025-02-08 04:07:00.105 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:07:00.105 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:07:00.106 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:07:00.106 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.228.243
2025-02-08 04:07:00.106 DEBUG [src.node.docker_mananger] Generated ports ['52421', '52422', '52423', '52424', '52425']
2025-02-08 04:07:00.106 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:07:00.107 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:07:00.107 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:07:00.107 DEBUG [src.node.docker_mananger] docker run -i -t -p 52421:52421 -p 52422:52422 -p 52423:52423 -p 52424:52424 -p 52425:52425 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=52423 --rest-port=52421 --tcp-port=52422 --discv5-udp-port=52424 --rest-address=0.0.0.0 --nat=extip:172.18.228.243 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4bce9a903cad5e3aad1a96fb95e2e3a0cfd6bfdffc2edbaa0b45c0ec7b438c85 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=52425 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QDn1-Juy5iBzKC0z8hGBxY-yx-__eUDHWWHVybc5_vGwJXN12hr70Bt_pyu0DrxmENTDoBYrBXeCkgOizXuhPB8CgmlkgnY0gmlwhKwSJdCKbXVsdGlhZGRyc5YACASsEiXQBuOzAAoErBIl0AbjtN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDwssxWLl0vCXoIrES4CzE0K5442Hu4Ow2wQR89iOS_l6DdGNwguOzg3VkcILjtYV3YWt1MgE --lightpushnode=/ip4/172.18.37.208/tcp/58291/p2p/16Uiu2HAmRmP9aUyA1eEsWB8YT2Kbr7TZnah952uC7nru3FYUkBfK --lightpush=true --relay=false
2025-02-08 04:07:00.329 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.228.243 waku 9399dc9b9e22fe482c8f516b479ba51e5ad6b44b80dd31e2e8aeb7f134853abf
2025-02-08 04:07:00.378 DEBUG [src.node.docker_mananger] Container started with ID 9399dc9b9e22. Setting up logs at ./log/docker/lightpush_node1_2025-02-08_04-06-58__5e333aec-44ff-4fe0-9ed6-39bed5ea6d32__wakuorg_nwaku:latest.log
2025-02-08 04:07:00.378 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 52421
2025-02-08 04:07:00.378 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:07:01.379 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52421/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:07:01.382 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:07:01.382 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:07:01.382 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52421/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:07:01.385 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.228.243/tcp/52422/p2p/16Uiu2HAkvNW9KJHqzVvbjEXJb6f8FbX7ocVVY7btnEVtXC7BeihG","/ip4/172.18.228.243/tcp/52423/ws/p2p/16Uiu2HAkvNW9KJHqzVvbjEXJb6f8FbX7ocVVY7btnEVtXC7BeihG"],"enrUri":"enr:-L24QOfCDk4MLCPPtk_b9IYimjesS9HwIDdStHFT1yHzjARVNkuXVZ1-FLqfTHCSPjFu-Vc1P6zxoxGZZL_v1eeYW70CgmlkgnY0gmlwhKwS5POKbXVsdGlhZGRyc5YACASsEuTzBszGAAoErBLk8wbMx90DgnJzhQADAQAAiXNlY3AyNTZrMaECDgvSt0CHvb-vuU4QNoV1fg-XDCVQR1wPr_MRe_UlJsuDdGNwgszGg3VkcILMyIV3YWt1Mgg"}'
2025-02-08 04:07:01.385 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:07:01.385 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52421/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.37.208/tcp/58291/p2p/16Uiu2HAmRmP9aUyA1eEsWB8YT2Kbr7TZnah952uC7nru3FYUkBfK"]'
2025-02-08 04:07:01.423 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:07:01.424 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52421/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738987621424543488}}'
2025-02-08 04:07:01.441 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:52421/lightpush/v1/message. Response content: b'Failed to request a message push: dial_failure'
2025-02-08 04:07:01.443 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-08 04:07:01.444 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-08 04:07:01.445 DEBUG [src.node.waku_node] Stopping container with id 602a7e652b36
2025-02-08 04:07:02.557 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:07:02.557 DEBUG [src.node.waku_node] Stopping container with id 9399dc9b9e22
2025-02-08 04:07:03.370 ERROR [src.node.docker_mananger] Max retries reached for container 602a7e652b36. Exiting log stream.
2025-02-08 04:07:04.071 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:07:04.072 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-08 04:07:04.076 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 04:07:04.080 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
