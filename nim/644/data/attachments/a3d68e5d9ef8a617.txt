2025-02-08 04:03:07.122 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-08 04:03:07.123 DEBUG [tests.conftest] Running test: test_lightpush with id: 2025-02-08_04-03-07__586634c3-6f5e-4975-949c-72cb6dd5b591
2025-02-08 04:03:07.123 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-08 04:03:07.123 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-08 04:03:07.124 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-08 04:03:07.124 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-08 04:03:07.124 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-08 04:03:07.131 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:03:07.131 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-08_04-03-07__586634c3-6f5e-4975-949c-72cb6dd5b591__wakuorg_nwaku:latest.log
2025-02-08 04:03:07.131 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:03:07.131 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:03:07.132 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:03:07.133 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.104.155
2025-02-08 04:03:07.133 DEBUG [src.node.docker_mananger] Generated ports ['19111', '19112', '19113', '19114', '19115']
2025-02-08 04:03:07.133 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:03:07.133 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:03:07.133 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:03:07.133 DEBUG [src.node.docker_mananger] docker run -i -t -p 19111:19111 -p 19112:19112 -p 19113:19113 -p 19114:19114 -p 19115:19115 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19113 --rest-port=19111 --tcp-port=19112 --discv5-udp-port=19114 --rest-address=0.0.0.0 --nat=extip:172.18.104.155 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=abee64a5c8be0ca0fdc0d6e3fda9ddf1c090f508ff2bdca74c5b5c569ccf69fc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19115 --metrics-logging=true --lightpush=true --relay=true
2025-02-08 04:03:07.363 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.104.155 waku 01eeb2f96f221e8b73492aa3e7b73af5197e1769337215d93039db9aa55b1c03
2025-02-08 04:03:07.408 DEBUG [src.node.docker_mananger] Container started with ID 01eeb2f96f22. Setting up logs at ./log/docker/node1_2025-02-08_04-03-07__586634c3-6f5e-4975-949c-72cb6dd5b591__wakuorg_nwaku:latest.log
2025-02-08 04:03:07.410 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 19111
2025-02-08 04:03:07.410 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:03:07.922 ERROR [src.node.docker_mananger] Max retries reached for container 3e2e5af1885e. Exiting log stream.
2025-02-08 04:03:08.411 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19111/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:08.414 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:03:08.414 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:03:08.414 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19111/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:08.416 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.104.155/tcp/19112/p2p/16Uiu2HAkx1ZStFW3hzVGM598oXupmHRzSemZqwbN1dH4nime42FZ","/ip4/172.18.104.155/tcp/19113/ws/p2p/16Uiu2HAkx1ZStFW3hzVGM598oXupmHRzSemZqwbN1dH4nime42FZ"],"enrUri":"enr:-L24QHkBjp0YpSXO5osUiK65wgwlnm3k0gNdzRYBHpdnUMgcVEMItO64qgKcnJ7ETsiNBPk8L84V51m2vhxQ4Yt-T5ECgmlkgnY0gmlwhKwSaJuKbXVsdGlhZGRyc5YACASsEmibBkqoAAoErBJomwZKqd0DgnJzhQADAQAAiXNlY3AyNTZrMaECJmW8DNBmeIx_Ilx3dQlyYDPRXUzUgmC-DZiVY6Ec9XiDdGNwgkqog3VkcIJKqoV3YWt1Mgk"}'
2025-02-08 04:03:08.417 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:03:08.423 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:03:08.423 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-08_04-03-07__586634c3-6f5e-4975-949c-72cb6dd5b591__wakuorg_nwaku:latest.log
2025-02-08 04:03:08.423 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:03:08.423 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:03:08.425 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:03:08.425 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.149.114
2025-02-08 04:03:08.425 DEBUG [src.node.docker_mananger] Generated ports ['36360', '36361', '36362', '36363', '36364']
2025-02-08 04:03:08.425 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:03:08.425 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:03:08.425 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:03:08.426 DEBUG [src.node.docker_mananger] docker run -i -t -p 36360:36360 -p 36361:36361 -p 36362:36362 -p 36363:36363 -p 36364:36364 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36362 --rest-port=36360 --tcp-port=36361 --discv5-udp-port=36363 --rest-address=0.0.0.0 --nat=extip:172.18.149.114 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0e1affb3a8fa8fe90eb51af114c6bd534dac8a3e7ea2fad3ce2adcbf1ac8c11a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36364 --metrics-logging=true --lightpush=false --relay=true --discv5-bootstrap-node=enr:-L24QHkBjp0YpSXO5osUiK65wgwlnm3k0gNdzRYBHpdnUMgcVEMItO64qgKcnJ7ETsiNBPk8L84V51m2vhxQ4Yt-T5ECgmlkgnY0gmlwhKwSaJuKbXVsdGlhZGRyc5YACASsEmibBkqoAAoErBJomwZKqd0DgnJzhQADAQAAiXNlY3AyNTZrMaECJmW8DNBmeIx_Ilx3dQlyYDPRXUzUgmC-DZiVY6Ec9XiDdGNwgkqog3VkcIJKqoV3YWt1Mgk
2025-02-08 04:03:08.671 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.149.114 waku 8b57fc93b803c79ce7ec558a8f0a4388ae475998cafaae64bedf79ab5aa3a84e
2025-02-08 04:03:08.723 DEBUG [src.node.docker_mananger] Container started with ID 8b57fc93b803. Setting up logs at ./log/docker/node1_2025-02-08_04-03-07__586634c3-6f5e-4975-949c-72cb6dd5b591__wakuorg_nwaku:latest.log
2025-02-08 04:03:08.723 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 36360
2025-02-08 04:03:08.723 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:03:09.724 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36360/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:09.732 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:03:09.734 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:03:09.734 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36360/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:09.739 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.149.114/tcp/36361/p2p/16Uiu2HAm9ZvPWY6Rh47RaCpfZkTgf9Wm7fY6zN4Pp5vci9LS5j76","/ip4/172.18.149.114/tcp/36362/ws/p2p/16Uiu2HAm9ZvPWY6Rh47RaCpfZkTgf9Wm7fY6zN4Pp5vci9LS5j76"],"enrUri":"enr:-L24QGDsBxfkeedtoYFakq6LOXfvNpnWfr-XVn_bW0A-zIgLf-dgGGRziMMAKvyui3SUCeg8KvoZqorbt_1UbuX1QfUCgmlkgnY0gmlwhKwSlXKKbXVsdGlhZGRyc5YACASsEpVyBo4JAAoErBKVcgaOCt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC0iCOPqT9HplvGmngTjuW9B1rACAt7MeVo69LnjmNoNmDdGNwgo4Jg3VkcIKOC4V3YWt1MgE"}'
2025-02-08 04:03:09.739 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:03:09.745 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:03:09.745 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-08_04-03-07__586634c3-6f5e-4975-949c-72cb6dd5b591__wakuorg_nwaku:latest.log
2025-02-08 04:03:09.745 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:03:09.746 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:03:09.747 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:03:09.747 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.142.119
2025-02-08 04:03:09.748 DEBUG [src.node.docker_mananger] Generated ports ['54624', '54625', '54626', '54627', '54628']
2025-02-08 04:03:09.748 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:03:09.748 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:03:09.748 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:03:09.748 DEBUG [src.node.docker_mananger] docker run -i -t -p 54624:54624 -p 54625:54625 -p 54626:54626 -p 54627:54627 -p 54628:54628 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=54626 --rest-port=54624 --tcp-port=54625 --discv5-udp-port=54627 --rest-address=0.0.0.0 --nat=extip:172.18.142.119 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ca0afae4acd1113ace937ebb522ce4462cc7dd03c8980c4ee2fa3cbbc1dc13f9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=54628 --metrics-logging=true --lightpush=true --relay=false --discv5-bootstrap-node=enr:-L24QHkBjp0YpSXO5osUiK65wgwlnm3k0gNdzRYBHpdnUMgcVEMItO64qgKcnJ7ETsiNBPk8L84V51m2vhxQ4Yt-T5ECgmlkgnY0gmlwhKwSaJuKbXVsdGlhZGRyc5YACASsEmibBkqoAAoErBJomwZKqd0DgnJzhQADAQAAiXNlY3AyNTZrMaECJmW8DNBmeIx_Ilx3dQlyYDPRXUzUgmC-DZiVY6Ec9XiDdGNwgkqog3VkcIJKqoV3YWt1Mgk --lightpushnode=/ip4/172.18.104.155/tcp/19112/p2p/16Uiu2HAkx1ZStFW3hzVGM598oXupmHRzSemZqwbN1dH4nime42FZ
2025-02-08 04:03:09.985 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.142.119 waku 8414c4823a1b76d289181666011c0142df7f895a6466b09dca9d92f607e39a89
2025-02-08 04:03:10.041 DEBUG [src.node.docker_mananger] Container started with ID 8414c4823a1b. Setting up logs at ./log/docker/node1_2025-02-08_04-03-07__586634c3-6f5e-4975-949c-72cb6dd5b591__wakuorg_nwaku:latest.log
2025-02-08 04:03:10.041 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 54624
2025-02-08 04:03:10.042 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:03:11.043 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54624/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:11.047 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:03:11.047 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:03:11.047 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54624/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:11.050 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.142.119/tcp/54625/p2p/16Uiu2HAm1qs6eecNJAAt4WogqZL1SC1Lv8py2tGW6ejX693CuLbm","/ip4/172.18.142.119/tcp/54626/ws/p2p/16Uiu2HAm1qs6eecNJAAt4WogqZL1SC1Lv8py2tGW6ejX693CuLbm"],"enrUri":"enr:-L24QI-7tQQ6bfvtxtAaC2iU7q7urLQgNLu4C7NH2SP_7zE-ZJPK1sBWAss3vqCDboxEPUsqNw7GEoK_1pg_kiegv4ICgmlkgnY0gmlwhKwSjneKbXVsdGlhZGRyc5YACASsEo53BtVhAAoErBKOdwbVYt0DgnJzhQADAQAAiXNlY3AyNTZrMaECX1ih47DPLs4iF3mOYx8Af4uKzUzFvEvP_b0vEVsgARyDdGNwgtVhg3VkcILVY4V3YWt1Mgg"}'
2025-02-08 04:03:11.050 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:03:11.050 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19111/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-08 04:03:11.055 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:11.055 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36360/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-08 04:03:11.062 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:11.062 DEBUG [src.steps.light_push] Lightpushing message
2025-02-08 04:03:11.063 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54624/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": 1738987391062747904}}'
2025-02-08 04:03:11.113 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:11.113 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 04:03:11.215 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-08 04:03:11.215 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19111/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:11.218 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738987391062747904,"ephemeral":false}]'
2025-02-08 04:03:11.221 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-08 04:03:11.221 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36360/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:11.223 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738987391062747904,"ephemeral":false}]'
2025-02-08 04:03:11.227 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-08 04:03:11.227 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-08 04:03:11.228 DEBUG [src.node.waku_node] Stopping container with id 01eeb2f96f22
2025-02-08 04:03:11.898 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:03:11.900 DEBUG [src.node.waku_node] Stopping container with id 8b57fc93b803
2025-02-08 04:03:12.713 ERROR [src.node.docker_mananger] Max retries reached for container 01eeb2f96f22. Exiting log stream.
2025-02-08 04:03:13.413 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:03:13.413 DEBUG [src.node.waku_node] Stopping container with id 8414c4823a1b
2025-02-08 04:03:14.227 ERROR [src.node.docker_mananger] Max retries reached for container 8b57fc93b803. Exiting log stream.
2025-02-08 04:03:14.958 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:03:14.959 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-08 04:03:14.967 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 04:03:14.975 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 04:03:14.983 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
