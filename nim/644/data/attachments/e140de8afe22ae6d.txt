2025-02-08 04:03:27.537 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-08 04:03:27.538 DEBUG [tests.conftest] Running test: test_light_push_with_missing_content_topic with id: 2025-02-08_04-03-27__9c483f24-a791-493b-bd0c-ebee90fd82a4
2025-02-08 04:03:27.538 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-08 04:03:27.538 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-08 04:03:27.544 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:03:27.544 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-08_04-03-27__9c483f24-a791-493b-bd0c-ebee90fd82a4__wakuorg_nwaku:latest.log
2025-02-08 04:03:27.545 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:03:27.545 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:03:27.546 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:03:27.546 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.210.65
2025-02-08 04:03:27.546 DEBUG [src.node.docker_mananger] Generated ports ['10383', '10384', '10385', '10386', '10387']
2025-02-08 04:03:27.547 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:03:27.547 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:03:27.547 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:03:27.547 DEBUG [src.node.docker_mananger] docker run -i -t -p 10383:10383 -p 10384:10384 -p 10385:10385 -p 10386:10386 -p 10387:10387 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=10385 --rest-port=10383 --tcp-port=10384 --discv5-udp-port=10386 --rest-address=0.0.0.0 --nat=extip:172.18.210.65 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ba15a3efdd7f104aae7e1c4a89c634f0b0010cbed98bbbffa36e5f451c51bf22 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=10387 --metrics-logging=true --lightpush=true --relay=true
2025-02-08 04:03:27.775 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.210.65 waku fe9c8820098de9134ded429eb5872bd33799ce4ac84ac05b4678c119640cc34f
2025-02-08 04:03:27.826 DEBUG [src.node.docker_mananger] Container started with ID fe9c8820098d. Setting up logs at ./log/docker/receiving_node1_2025-02-08_04-03-27__9c483f24-a791-493b-bd0c-ebee90fd82a4__wakuorg_nwaku:latest.log
2025-02-08 04:03:27.826 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 10383
2025-02-08 04:03:27.828 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:03:28.301 ERROR [src.node.docker_mananger] Max retries reached for container 18ceebd954b2. Exiting log stream.
2025-02-08 04:03:28.828 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:10383/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:28.831 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:03:28.831 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:03:28.832 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:10383/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:28.834 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.210.65/tcp/10384/p2p/16Uiu2HAkwHXjzWQdvVfQfLT5xSxpq4HjjLa6ggVHB49z1PDPASTn","/ip4/172.18.210.65/tcp/10385/ws/p2p/16Uiu2HAkwHXjzWQdvVfQfLT5xSxpq4HjjLa6ggVHB49z1PDPASTn"],"enrUri":"enr:-L24QN-uv6RbHxJdGQBu26rBFjPfSDSM5MMw_5LtuiGyQb3DQMxYsBzRte5iDLrrLfChIoj8MQ-UWtr9gJ7gRVFC0GsCgmlkgnY0gmlwhKwS0kGKbXVsdGlhZGRyc5YACASsEtJBBiiQAAoErBLSQQYokd0DgnJzhQADAQAAiXNlY3AyNTZrMaECG6FpppoL4N932kyc9goQRalxTuJNZmbv654hVknvq12DdGNwgiiQg3VkcIIokoV3YWt1Mgk"}'
2025-02-08 04:03:28.834 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:03:28.841 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:03:28.841 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-08_04-03-27__9c483f24-a791-493b-bd0c-ebee90fd82a4__wakuorg_nwaku:latest.log
2025-02-08 04:03:28.841 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:03:28.841 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:03:28.842 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:03:28.842 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.13.119
2025-02-08 04:03:28.843 DEBUG [src.node.docker_mananger] Generated ports ['33792', '33793', '33794', '33795', '33796']
2025-02-08 04:03:28.843 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:03:28.843 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:03:28.843 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:03:28.843 DEBUG [src.node.docker_mananger] docker run -i -t -p 33792:33792 -p 33793:33793 -p 33794:33794 -p 33795:33795 -p 33796:33796 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=33794 --rest-port=33792 --tcp-port=33793 --discv5-udp-port=33795 --rest-address=0.0.0.0 --nat=extip:172.18.13.119 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7a55e63d42efefb8f7b769f18e2ce70c2145fdfa612e1bf5f2faef02d5cde9a8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=33796 --metrics-logging=true --lightpush=false --relay=true
2025-02-08 04:03:29.073 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.13.119 waku 79b5a3beb94cf815f03d749f0ab0b0e0db883bb0d7309750d56fff4dc90b3ecd
2025-02-08 04:03:29.121 DEBUG [src.node.docker_mananger] Container started with ID 79b5a3beb94c. Setting up logs at ./log/docker/receiving_node2_2025-02-08_04-03-27__9c483f24-a791-493b-bd0c-ebee90fd82a4__wakuorg_nwaku:latest.log
2025-02-08 04:03:29.122 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 33792
2025-02-08 04:03:29.122 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:03:30.123 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33792/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:30.125 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:03:30.125 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:03:30.126 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33792/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:30.128 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.13.119/tcp/33793/p2p/16Uiu2HAkvGct1CwD4ERi8ZTUe3ijBKiZ1mKi7ZEVSjaTTpw5G2G7","/ip4/172.18.13.119/tcp/33794/ws/p2p/16Uiu2HAkvGct1CwD4ERi8ZTUe3ijBKiZ1mKi7ZEVSjaTTpw5G2G7"],"enrUri":"enr:-L24QKUysQaqxn6BNAfcFkUWdlKzQNiTS8TzfbRANdte8fobJ1qUlOaqAMoO5aBUqRsQfu4GRzpOet355vv4lvwxfuICgmlkgnY0gmlwhKwSDXeKbXVsdGlhZGRyc5YACASsEg13BoQBAAoErBINdwaEAt0DgnJzhQADAQAAiXNlY3AyNTZrMaECDIn0ZZQb7tBCsFOpaezXZdAb_MYNzKbze9QjxwYN16iDdGNwgoQBg3VkcIKEA4V3YWt1MgE"}'
2025-02-08 04:03:30.128 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:03:30.128 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33792/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.210.65/tcp/10384/p2p/16Uiu2HAkwHXjzWQdvVfQfLT5xSxpq4HjjLa6ggVHB49z1PDPASTn"]'
2025-02-08 04:03:30.168 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:30.178 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:03:30.178 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-08_04-03-27__9c483f24-a791-493b-bd0c-ebee90fd82a4__wakuorg_nwaku:latest.log
2025-02-08 04:03:30.178 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:03:30.178 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:03:30.180 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:03:30.180 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.25.51
2025-02-08 04:03:30.180 DEBUG [src.node.docker_mananger] Generated ports ['6724', '6725', '6726', '6727', '6728']
2025-02-08 04:03:30.180 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:03:30.180 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:03:30.180 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:03:30.180 DEBUG [src.node.docker_mananger] docker run -i -t -p 6724:6724 -p 6725:6725 -p 6726:6726 -p 6727:6727 -p 6728:6728 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6726 --rest-port=6724 --tcp-port=6725 --discv5-udp-port=6727 --rest-address=0.0.0.0 --nat=extip:172.18.25.51 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d2e6afbf0b2fbe85faf2babe3beb6d6a720eaeac3bd9f17fd1ebbebb4acfdde4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6728 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QN-uv6RbHxJdGQBu26rBFjPfSDSM5MMw_5LtuiGyQb3DQMxYsBzRte5iDLrrLfChIoj8MQ-UWtr9gJ7gRVFC0GsCgmlkgnY0gmlwhKwS0kGKbXVsdGlhZGRyc5YACASsEtJBBiiQAAoErBLSQQYokd0DgnJzhQADAQAAiXNlY3AyNTZrMaECG6FpppoL4N932kyc9goQRalxTuJNZmbv654hVknvq12DdGNwgiiQg3VkcIIokoV3YWt1Mgk --lightpushnode=/ip4/172.18.210.65/tcp/10384/p2p/16Uiu2HAkwHXjzWQdvVfQfLT5xSxpq4HjjLa6ggVHB49z1PDPASTn --lightpush=true --relay=false
2025-02-08 04:03:30.426 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.25.51 waku 6ee9bf2a81c56a40d76cb96d46209c7afed8ed1c3f5b52f432b0d2bbfe69c5ef
2025-02-08 04:03:30.472 DEBUG [src.node.docker_mananger] Container started with ID 6ee9bf2a81c5. Setting up logs at ./log/docker/lightpush_node1_2025-02-08_04-03-27__9c483f24-a791-493b-bd0c-ebee90fd82a4__wakuorg_nwaku:latest.log
2025-02-08 04:03:30.473 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 6724
2025-02-08 04:03:30.473 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:03:31.474 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6724/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:31.477 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:03:31.477 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:03:31.477 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6724/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:31.479 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.25.51/tcp/6725/p2p/16Uiu2HAm323Xv7dQA3zjXhDHQrCuiqkk3dvDRdUvS3f4N3z3NB6f","/ip4/172.18.25.51/tcp/6726/ws/p2p/16Uiu2HAm323Xv7dQA3zjXhDHQrCuiqkk3dvDRdUvS3f4N3z3NB6f"],"enrUri":"enr:-L24QJH38I5Gc4gC2bYGt-oKHApNBMOb-mejbDHAbPhC5eCDIZl3ptUluXoIXPOC41SoXyXLM2SwiugDpac4smZEqe8CgmlkgnY0gmlwhKwSGTOKbXVsdGlhZGRyc5YACASsEhkzBhpFAAoErBIZMwYaRt0DgnJzhQADAQAAiXNlY3AyNTZrMaECcM_tUCcQDXvL8D5qA0Y_SIMR1l1jPDcYheZa23My_LiDdGNwghpFg3VkcIIaR4V3YWt1Mgg"}'
2025-02-08 04:03:31.480 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:03:31.480 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6724/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.210.65/tcp/10384/p2p/16Uiu2HAkwHXjzWQdvVfQfLT5xSxpq4HjjLa6ggVHB49z1PDPASTn"]'
2025-02-08 04:03:31.517 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:31.518 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6724/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.13.119/tcp/33793/p2p/16Uiu2HAkvGct1CwD4ERi8ZTUe3ijBKiZ1mKi7ZEVSjaTTpw5G2G7"]'
2025-02-08 04:03:31.552 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:31.553 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:10383/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-08 04:03:31.559 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:31.559 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33792/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-08 04:03:31.563 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:31.565 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6724/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "timestamp": 1738987411564884992}}'
2025-02-08 04:03:31.568 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:6724/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
2025-02-08 04:03:31.570 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-08 04:03:31.571 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-08 04:03:31.571 DEBUG [src.node.waku_node] Stopping container with id fe9c8820098d
2025-02-08 04:03:32.347 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:03:32.349 DEBUG [src.node.waku_node] Stopping container with id 79b5a3beb94c
2025-02-08 04:03:33.160 ERROR [src.node.docker_mananger] Max retries reached for container fe9c8820098d. Exiting log stream.
2025-02-08 04:03:33.873 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:03:33.873 DEBUG [src.node.waku_node] Stopping container with id 6ee9bf2a81c5
2025-02-08 04:03:34.707 ERROR [src.node.docker_mananger] Max retries reached for container 79b5a3beb94c. Exiting log stream.
2025-02-08 04:03:35.379 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:03:35.380 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-08 04:03:35.387 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 04:03:35.399 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 04:03:35.404 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
