2025-02-08 04:04:07.450 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-08 04:04:07.450 DEBUG [tests.conftest] Running test: test_relay_unsubscribe_from_non_existing_pubsub_topic with id: 2025-02-08_04-04-07__01bc076b-af78-4c88-80b3-1bc78101f26c
2025-02-08 04:04:07.451 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-08 04:04:07.451 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-08 04:04:07.451 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2025-02-08 04:04:07.457 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:04:07.457 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-08_04-04-07__01bc076b-af78-4c88-80b3-1bc78101f26c__wakuorg_nwaku:latest.log
2025-02-08 04:04:07.457 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:04:07.457 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:04:07.458 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:04:07.458 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.107.148
2025-02-08 04:04:07.459 DEBUG [src.node.docker_mananger] Generated ports ['20295', '20296', '20297', '20298', '20299']
2025-02-08 04:04:07.459 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:04:07.459 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:04:07.459 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:04:07.459 DEBUG [src.node.docker_mananger] docker run -i -t -p 20295:20295 -p 20296:20296 -p 20297:20297 -p 20298:20298 -p 20299:20299 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20297 --rest-port=20295 --tcp-port=20296 --discv5-udp-port=20298 --rest-address=0.0.0.0 --nat=extip:172.18.107.148 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7ac768deb6c6e04d56fe07b9f1dcb7040a407e20ddeb2eca5fa3cafa3b32edc5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20299 --metrics-logging=true --relay=true
2025-02-08 04:04:07.683 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.107.148 waku 6beb0e6d4e98f3c5b13e5a4be2c1f8948f1de4203b992c3e281ad4edca97f490
2025-02-08 04:04:07.733 DEBUG [src.node.docker_mananger] Container started with ID 6beb0e6d4e98. Setting up logs at ./log/docker/node1_2025-02-08_04-04-07__01bc076b-af78-4c88-80b3-1bc78101f26c__wakuorg_nwaku:latest.log
2025-02-08 04:04:07.733 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 20295
2025-02-08 04:04:07.734 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:04:08.247 ERROR [src.node.docker_mananger] Max retries reached for container ac12ad1ad974. Exiting log stream.
2025-02-08 04:04:08.735 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20295/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:08.737 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:04:08.738 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:04:08.738 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20295/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:08.740 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.107.148/tcp/20296/p2p/16Uiu2HAkxBtfQ9bKdXZWqrKaPsx1gpKR7VmGcptfg4GifypBfVWZ","/ip4/172.18.107.148/tcp/20297/ws/p2p/16Uiu2HAkxBtfQ9bKdXZWqrKaPsx1gpKR7VmGcptfg4GifypBfVWZ"],"enrUri":"enr:-L24QLXIJKiTevVnZwS6Uwa2tjsWmakfAlIjtXQq4X7HbWxyJpM3Q5tHougMZja0pLYUSWMQrvvGMpY0X7u3B42rxq4CgmlkgnY0gmlwhKwSa5SKbXVsdGlhZGRyc5YACASsEmuUBk9IAAoErBJrlAZPSd0DgnJzhQADAQAAiXNlY3AyNTZrMaECKQtFH-JamrpLJ10hjEHHeRgOIDlwSnFf3H5ajHFeU5KDdGNwgk9Ig3VkcIJPSoV3YWt1MgE"}'
2025-02-08 04:04:08.740 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:04:08.746 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:04:08.746 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-08_04-04-07__01bc076b-af78-4c88-80b3-1bc78101f26c__wakuorg_nwaku:latest.log
2025-02-08 04:04:08.746 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:04:08.746 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:04:08.747 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:04:08.747 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.2.6
2025-02-08 04:04:08.748 DEBUG [src.node.docker_mananger] Generated ports ['45922', '45923', '45924', '45925', '45926']
2025-02-08 04:04:08.748 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:04:08.748 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:04:08.748 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:04:08.748 DEBUG [src.node.docker_mananger] docker run -i -t -p 45922:45922 -p 45923:45923 -p 45924:45924 -p 45925:45925 -p 45926:45926 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45924 --rest-port=45922 --tcp-port=45923 --discv5-udp-port=45925 --rest-address=0.0.0.0 --nat=extip:172.18.2.6 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a41d2eccda4cf2b589ea3ef99bb9b831ab2b4e34c6f35fcbf1ad0d7a6aadf42f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45926 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QLXIJKiTevVnZwS6Uwa2tjsWmakfAlIjtXQq4X7HbWxyJpM3Q5tHougMZja0pLYUSWMQrvvGMpY0X7u3B42rxq4CgmlkgnY0gmlwhKwSa5SKbXVsdGlhZGRyc5YACASsEmuUBk9IAAoErBJrlAZPSd0DgnJzhQADAQAAiXNlY3AyNTZrMaECKQtFH-JamrpLJ10hjEHHeRgOIDlwSnFf3H5ajHFeU5KDdGNwgk9Ig3VkcIJPSoV3YWt1MgE
2025-02-08 04:04:08.975 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.2.6 waku 89ec6078f1120edcfee00c9185991daedcd695371dbfdd5f0c0f5b6e186dbc57
2025-02-08 04:04:09.017 DEBUG [src.node.docker_mananger] Container started with ID 89ec6078f112. Setting up logs at ./log/docker/node2_2025-02-08_04-04-07__01bc076b-af78-4c88-80b3-1bc78101f26c__wakuorg_nwaku:latest.log
2025-02-08 04:04:09.017 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 45922
2025-02-08 04:04:09.018 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:04:10.018 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45922/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:10.025 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:04:10.025 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:04:10.025 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45922/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:10.030 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.2.6/tcp/45923/p2p/16Uiu2HAm1Uf5ahuHye3XhQ1jMYwtMUG18you1Q8Pm4KFkWxXJiSh","/ip4/172.18.2.6/tcp/45924/ws/p2p/16Uiu2HAm1Uf5ahuHye3XhQ1jMYwtMUG18you1Q8Pm4KFkWxXJiSh"],"enrUri":"enr:-L24QGDdzzpB_RinEsmfneNaLJ4kg4aeXrBX2h6yfTvHyJoIFt6aInKj2afA-KDkKrrpzuW3ML6iw89boLYv7QEjv_0CgmlkgnY0gmlwhKwSAgaKbXVsdGlhZGRyc5YACASsEgIGBrNjAAoErBICBgazZN0DgnJzhQADAQAAiXNlY3AyNTZrMaECWenYm72W3k1V9WNi4LFmMZ3WqahPD-B939k4RE1mMT6DdGNwgrNjg3VkcIKzZYV3YWt1MgE"}'
2025-02-08 04:04:10.033 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:04:10.033 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:45922/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.107.148/tcp/20296/p2p/16Uiu2HAkxBtfQ9bKdXZWqrKaPsx1gpKR7VmGcptfg4GifypBfVWZ"]'
2025-02-08 04:04:10.037 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:10.040 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20295/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-08 04:04:10.044 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:10.044 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:45922/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-08 04:04:10.050 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:10.052 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20295/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:04:10.056 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:10.057 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 04:04:10.157 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-08 04:04:10.157 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20295/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:10.159 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738987450051925504,"ephemeral":false}]'
2025-02-08 04:04:10.161 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-08 04:04:10.161 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45922/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:10.163 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738987450051925504,"ephemeral":false}]'
2025-02-08 04:04:10.165 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:20295/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1000"]'
2025-02-08 04:04:10.167 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:10.167 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:45922/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1000"]'
2025-02-08 04:04:10.170 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:10.170 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20295/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:04:10.174 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:10.175 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 04:04:10.275 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-08 04:04:10.275 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20295/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:10.278 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738987450170420224,"ephemeral":false}]'
2025-02-08 04:04:10.279 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-08 04:04:10.279 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45922/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:10.281 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738987450170420224,"ephemeral":false}]'
2025-02-08 04:04:10.284 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-08 04:04:10.285 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-08 04:04:10.285 DEBUG [src.node.waku_node] Stopping container with id 6beb0e6d4e98
2025-02-08 04:04:10.885 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:04:10.886 DEBUG [src.node.waku_node] Stopping container with id 89ec6078f112
2025-02-08 04:04:11.714 ERROR [src.node.docker_mananger] Max retries reached for container 6beb0e6d4e98. Exiting log stream.
2025-02-08 04:04:11.965 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:04:11.966 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-08 04:04:11.975 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 04:04:11.980 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
