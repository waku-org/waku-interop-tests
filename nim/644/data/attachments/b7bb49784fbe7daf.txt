2025-02-08 04:04:12.219 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-08 04:04:12.220 DEBUG [tests.conftest] Running test: test_publish_on_multiple_content_topics_and_only_after_fetch_them[content_topic_list0] with id: 2025-02-08_04-04-12__824ae3df-b48d-462f-b26c-b702bff423e1
2025-02-08 04:04:12.220 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-08 04:04:12.220 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-08 04:04:12.221 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2025-02-08 04:04:12.229 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:04:12.229 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-08_04-04-12__824ae3df-b48d-462f-b26c-b702bff423e1__wakuorg_nwaku:latest.log
2025-02-08 04:04:12.230 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:04:12.230 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:04:12.232 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:04:12.232 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.4.209
2025-02-08 04:04:12.232 DEBUG [src.node.docker_mananger] Generated ports ['61413', '61414', '61415', '61416', '61417']
2025-02-08 04:04:12.233 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:04:12.233 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:04:12.233 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:04:12.233 DEBUG [src.node.docker_mananger] docker run -i -t -p 61413:61413 -p 61414:61414 -p 61415:61415 -p 61416:61416 -p 61417:61417 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61415 --rest-port=61413 --tcp-port=61414 --discv5-udp-port=61416 --rest-address=0.0.0.0 --nat=extip:172.18.4.209 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=8a6df3868bcd77b6562fa21b55aaafbbd47fb940c0be7fec1a680d7dcf9492aa --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61417 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto
2025-02-08 04:04:12.469 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.4.209 waku 72b4df65bb5c76759efcdc38741747c0dab3bea8a9863a2c0d44c189e8744cbd
2025-02-08 04:04:12.523 DEBUG [src.node.docker_mananger] Container started with ID 72b4df65bb5c. Setting up logs at ./log/docker/node1_2025-02-08_04-04-12__824ae3df-b48d-462f-b26c-b702bff423e1__wakuorg_nwaku:latest.log
2025-02-08 04:04:12.523 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 61413
2025-02-08 04:04:12.524 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:04:13.080 ERROR [src.node.docker_mananger] Max retries reached for container b53e237f5df8. Exiting log stream.
2025-02-08 04:04:13.525 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61413/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:13.527 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:04:13.527 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:04:13.528 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61413/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:13.530 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.4.209/tcp/61414/p2p/16Uiu2HAkzfysvRyBwLTNfQxsXkD7ZUHw1PPgSJGQ6zu6Nu8aVmTz","/ip4/172.18.4.209/tcp/61415/ws/p2p/16Uiu2HAkzfysvRyBwLTNfQxsXkD7ZUHw1PPgSJGQ6zu6Nu8aVmTz"],"enrUri":"enr:-L24QJd7xHZRMDoD_5-fTB3bUvHoaQsrkQ9wF-abNHkNXWpwckRBrsBdoLfLrLNaxYt5MyAEEjJPcnkQ78tneGUO1WoCgmlkgnY0gmlwhKwSBNGKbXVsdGlhZGRyc5YACASsEgTRBu_mAAoErBIE0Qbv590DgnJzhQACAQAAiXNlY3AyNTZrMaECTfTN3WmvI8CjgweuMzbMsNhFePoHLwtudUYVfNO79Z2DdGNwgu_mg3VkcILv6IV3YWt1MgU"}'
2025-02-08 04:04:13.530 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:04:13.536 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:04:13.536 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-08_04-04-12__824ae3df-b48d-462f-b26c-b702bff423e1__wakuorg_nwaku:latest.log
2025-02-08 04:04:13.536 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:04:13.536 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:04:13.537 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:04:13.538 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.59.238
2025-02-08 04:04:13.538 DEBUG [src.node.docker_mananger] Generated ports ['17655', '17656', '17657', '17658', '17659']
2025-02-08 04:04:13.538 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:04:13.538 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:04:13.538 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:04:13.538 DEBUG [src.node.docker_mananger] docker run -i -t -p 17655:17655 -p 17656:17656 -p 17657:17657 -p 17658:17658 -p 17659:17659 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17657 --rest-port=17655 --tcp-port=17656 --discv5-udp-port=17658 --rest-address=0.0.0.0 --nat=extip:172.18.59.238 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=39a64d78c00cab04ca31922ecffcfdfaebec12a97adbbbd5ac5bfb14f4bef0cd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17659 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QJd7xHZRMDoD_5-fTB3bUvHoaQsrkQ9wF-abNHkNXWpwckRBrsBdoLfLrLNaxYt5MyAEEjJPcnkQ78tneGUO1WoCgmlkgnY0gmlwhKwSBNGKbXVsdGlhZGRyc5YACASsEgTRBu_mAAoErBIE0Qbv590DgnJzhQACAQAAiXNlY3AyNTZrMaECTfTN3WmvI8CjgweuMzbMsNhFePoHLwtudUYVfNO79Z2DdGNwgu_mg3VkcILv6IV3YWt1MgU --content-topic=/myapp/1/latest/proto
2025-02-08 04:04:13.761 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.59.238 waku c83b3fdda606232b91513bf71fc419d2b70b314f4220369468b4415a4a2811e2
2025-02-08 04:04:13.809 DEBUG [src.node.docker_mananger] Container started with ID c83b3fdda606. Setting up logs at ./log/docker/node2_2025-02-08_04-04-12__824ae3df-b48d-462f-b26c-b702bff423e1__wakuorg_nwaku:latest.log
2025-02-08 04:04:13.810 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 17655
2025-02-08 04:04:13.811 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:04:14.811 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17655/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:14.815 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:04:14.815 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:04:14.815 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17655/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:14.824 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.59.238/tcp/17656/p2p/16Uiu2HAkySCeiwm5DtGLUd2AcDRkhWW8axWZoge1KfY5aGNMhZAb","/ip4/172.18.59.238/tcp/17657/ws/p2p/16Uiu2HAkySCeiwm5DtGLUd2AcDRkhWW8axWZoge1KfY5aGNMhZAb"],"enrUri":"enr:-L24QOss8Ot39XXJEHfWqD8jxdSIMULF7YM6M5jPKLwbedIzMH3h8RpPVkhPKBE4sVg9XWsqg1cJecUGaq8CGroTuPgCgmlkgnY0gmlwhKwSO-6KbXVsdGlhZGRyc5YACASsEjvuBkT4AAoErBI77gZE-d0DgnJzhQACAQAAiXNlY3AyNTZrMaECO5FtgZqpIyj7T8MnWu5I48GRk3k3mctpYxBL4gLdMoyDdGNwgkT4g3VkcIJE-oV3YWt1MgE"}'
2025-02-08 04:04:14.824 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:04:14.824 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17655/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.4.209/tcp/61414/p2p/16Uiu2HAkzfysvRyBwLTNfQxsXkD7ZUHw1PPgSJGQ6zu6Nu8aVmTz"]'
2025-02-08 04:04:14.829 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:14.829 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61413/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/newsService/1.0/weekly/protobuf", "/newsService/1.0/alerts/xml", "/newsService/1.0/updates/json", "/newsService/2.0/alerts/json", "/newsService/2.0/summaries/xml", "/newsService/2.0/highlights/yaml", "/newsService/3.0/weekly/json", "/newsService/3.0/summaries/xml"]'
2025-02-08 04:04:14.835 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:14.836 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17655/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/newsService/1.0/weekly/protobuf", "/newsService/1.0/alerts/xml", "/newsService/1.0/updates/json", "/newsService/2.0/alerts/json", "/newsService/2.0/summaries/xml", "/newsService/2.0/highlights/yaml", "/newsService/3.0/weekly/json", "/newsService/3.0/summaries/xml"]'
2025-02-08 04:04:14.845 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:14.845 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61413/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L25ld3NTZXJ2aWNlLzEuMC93ZWVrbHkvcHJvdG9idWY=", "contentTopic": "/newsService/1.0/weekly/protobuf", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:04:14.852 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:14.853 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61413/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L25ld3NTZXJ2aWNlLzEuMC9hbGVydHMveG1s", "contentTopic": "/newsService/1.0/alerts/xml", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:04:14.859 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:14.860 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61413/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L25ld3NTZXJ2aWNlLzEuMC91cGRhdGVzL2pzb24=", "contentTopic": "/newsService/1.0/updates/json", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:04:14.864 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:14.864 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61413/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L25ld3NTZXJ2aWNlLzIuMC9hbGVydHMvanNvbg==", "contentTopic": "/newsService/2.0/alerts/json", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:04:14.870 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:14.871 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61413/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L25ld3NTZXJ2aWNlLzIuMC9zdW1tYXJpZXMveG1s", "contentTopic": "/newsService/2.0/summaries/xml", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:04:14.875 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:14.876 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61413/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L25ld3NTZXJ2aWNlLzIuMC9oaWdobGlnaHRzL3lhbWw=", "contentTopic": "/newsService/2.0/highlights/yaml", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:04:14.881 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:14.881 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61413/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L25ld3NTZXJ2aWNlLzMuMC93ZWVrbHkvanNvbg==", "contentTopic": "/newsService/3.0/weekly/json", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:04:14.887 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:14.888 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61413/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "L25ld3NTZXJ2aWNlLzMuMC9zdW1tYXJpZXMveG1s", "contentTopic": "/newsService/3.0/summaries/xml", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:04:14.892 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:14.892 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 04:04:14.993 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17655/relay/v1/auto/messages/%2FnewsService%2F1.0%2Fweekly%2Fprotobuf" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:14.995 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L25ld3NTZXJ2aWNlLzEuMC93ZWVrbHkvcHJvdG9idWY=","contentTopic":"/newsService/1.0/weekly/protobuf","version":0,"timestamp":1738987454845533440,"ephemeral":false}]'
2025-02-08 04:04:14.996 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17655/relay/v1/auto/messages/%2FnewsService%2F1.0%2Falerts%2Fxml" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:14.998 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L25ld3NTZXJ2aWNlLzEuMC9hbGVydHMveG1s","contentTopic":"/newsService/1.0/alerts/xml","version":0,"timestamp":1738987454853371392,"ephemeral":false}]'
2025-02-08 04:04:14.998 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17655/relay/v1/auto/messages/%2FnewsService%2F1.0%2Fupdates%2Fjson" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:15.000 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L25ld3NTZXJ2aWNlLzEuMC91cGRhdGVzL2pzb24=","contentTopic":"/newsService/1.0/updates/json","version":0,"timestamp":1738987454859895040,"ephemeral":false}]'
2025-02-08 04:04:15.000 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17655/relay/v1/auto/messages/%2FnewsService%2F2.0%2Falerts%2Fjson" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:15.003 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L25ld3NTZXJ2aWNlLzIuMC9hbGVydHMvanNvbg==","contentTopic":"/newsService/2.0/alerts/json","version":0,"timestamp":1738987454864788736,"ephemeral":false}]'
2025-02-08 04:04:15.003 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17655/relay/v1/auto/messages/%2FnewsService%2F2.0%2Fsummaries%2Fxml" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:15.005 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L25ld3NTZXJ2aWNlLzIuMC9zdW1tYXJpZXMveG1s","contentTopic":"/newsService/2.0/summaries/xml","version":0,"timestamp":1738987454870853632,"ephemeral":false}]'
2025-02-08 04:04:15.005 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17655/relay/v1/auto/messages/%2FnewsService%2F2.0%2Fhighlights%2Fyaml" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:15.008 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L25ld3NTZXJ2aWNlLzIuMC9oaWdobGlnaHRzL3lhbWw=","contentTopic":"/newsService/2.0/highlights/yaml","version":0,"timestamp":1738987454875964672,"ephemeral":false}]'
2025-02-08 04:04:15.008 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17655/relay/v1/auto/messages/%2FnewsService%2F3.0%2Fweekly%2Fjson" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:15.010 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L25ld3NTZXJ2aWNlLzMuMC93ZWVrbHkvanNvbg==","contentTopic":"/newsService/3.0/weekly/json","version":0,"timestamp":1738987454881509632,"ephemeral":false}]'
2025-02-08 04:04:15.011 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17655/relay/v1/auto/messages/%2FnewsService%2F3.0%2Fsummaries%2Fxml" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:15.013 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L25ld3NTZXJ2aWNlLzMuMC9zdW1tYXJpZXMveG1s","contentTopic":"/newsService/3.0/summaries/xml","version":0,"timestamp":1738987454887949312,"ephemeral":false}]'
2025-02-08 04:04:15.014 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-08 04:04:15.015 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-08 04:04:15.015 DEBUG [src.node.waku_node] Stopping container with id 72b4df65bb5c
2025-02-08 04:04:16.125 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:04:16.125 DEBUG [src.node.waku_node] Stopping container with id c83b3fdda606
2025-02-08 04:04:16.936 ERROR [src.node.docker_mananger] Max retries reached for container 72b4df65bb5c. Exiting log stream.
2025-02-08 04:04:17.629 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:04:17.631 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-08 04:04:17.637 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 04:04:17.646 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
