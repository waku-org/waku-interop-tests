2025-02-08 04:03:11.048 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-08 04:03:11.049 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_with_no_request_id with id: 2025-02-08_04-03-11__580db6cf-12c3-4586-8ac0-1d78e5bafa6d
2025-02-08 04:03:11.049 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-08 04:03:11.049 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-08 04:03:11.050 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-08 04:03:11.056 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:03:11.056 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-08_04-03-11__580db6cf-12c3-4586-8ac0-1d78e5bafa6d__wakuorg_nwaku:latest.log
2025-02-08 04:03:11.056 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:03:11.056 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:03:11.057 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:03:11.058 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.222.17
2025-02-08 04:03:11.058 DEBUG [src.node.docker_mananger] Generated ports ['51643', '51644', '51645', '51646', '51647']
2025-02-08 04:03:11.058 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:03:11.058 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:03:11.058 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:03:11.058 DEBUG [src.node.docker_mananger] docker run -i -t -p 51643:51643 -p 51644:51644 -p 51645:51645 -p 51646:51646 -p 51647:51647 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=51645 --rest-port=51643 --tcp-port=51644 --discv5-udp-port=51646 --rest-address=0.0.0.0 --nat=extip:172.18.222.17 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=deccd2ce7aed2a477daf0cb0ea0113edccf42b9abfbba23ec2b0da44d77e0ac1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=51647 --metrics-logging=true --relay=true --filter=true
2025-02-08 04:03:11.279 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.222.17 waku 84f26a9a94beb596ef004b0bceaab0bb56aa14fee2f3843d85819c58490720c5
2025-02-08 04:03:11.326 DEBUG [src.node.docker_mananger] Container started with ID 84f26a9a94be. Setting up logs at ./log/docker/node1_2025-02-08_04-03-11__580db6cf-12c3-4586-8ac0-1d78e5bafa6d__wakuorg_nwaku:latest.log
2025-02-08 04:03:11.328 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 51643
2025-02-08 04:03:11.328 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:03:11.813 ERROR [src.node.docker_mananger] Max retries reached for container ea9c270f58ae. Exiting log stream.
2025-02-08 04:03:12.329 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51643/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:12.331 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:03:12.332 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:03:12.332 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51643/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:12.334 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.222.17/tcp/51644/p2p/16Uiu2HAmHZHTFdSGwLdV67Za9hMdYWLNsqruHbMkCTHKA7x7JLSt","/ip4/172.18.222.17/tcp/51645/ws/p2p/16Uiu2HAmHZHTFdSGwLdV67Za9hMdYWLNsqruHbMkCTHKA7x7JLSt"],"enrUri":"enr:-L24QCkE1u_zyKZWBJLbOJxbsNguvRuzFygYP1HOKqmLf6vDcxzQKA7HjQQAMTcgN0FidCDbaVSSM22Pzv1cam-yKOICgmlkgnY0gmlwhKwS3hGKbXVsdGlhZGRyc5YACASsEt4RBsm8AAoErBLeEQbJvd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDSNRJua8ILOuJkN6pkHo_uEV9o3CSzLm-qUvzu_AeFfGDdGNwgsm8g3VkcILJvoV3YWt1MgU"}'
2025-02-08 04:03:12.334 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:03:12.335 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-08 04:03:12.340 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:03:12.340 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-08_04-03-11__580db6cf-12c3-4586-8ac0-1d78e5bafa6d__wakuorg_nwaku:latest.log
2025-02-08 04:03:12.341 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:03:12.341 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:03:12.342 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:03:12.342 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.163.62
2025-02-08 04:03:12.342 DEBUG [src.node.docker_mananger] Generated ports ['11629', '11630', '11631', '11632', '11633']
2025-02-08 04:03:12.342 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:03:12.343 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:03:12.343 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:03:12.343 DEBUG [src.node.docker_mananger] docker run -i -t -p 11629:11629 -p 11630:11630 -p 11631:11631 -p 11632:11632 -p 11633:11633 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=11631 --rest-port=11629 --tcp-port=11630 --discv5-udp-port=11632 --rest-address=0.0.0.0 --nat=extip:172.18.163.62 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f661658bf80832ccfcc0fbfb2d4e82b476caf40b3b3b2a54ed1dec8bbefcadaf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=11633 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QCkE1u_zyKZWBJLbOJxbsNguvRuzFygYP1HOKqmLf6vDcxzQKA7HjQQAMTcgN0FidCDbaVSSM22Pzv1cam-yKOICgmlkgnY0gmlwhKwS3hGKbXVsdGlhZGRyc5YACASsEt4RBsm8AAoErBLeEQbJvd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDSNRJua8ILOuJkN6pkHo_uEV9o3CSzLm-qUvzu_AeFfGDdGNwgsm8g3VkcILJvoV3YWt1MgU --filternode=/ip4/172.18.222.17/tcp/51644/p2p/16Uiu2HAmHZHTFdSGwLdV67Za9hMdYWLNsqruHbMkCTHKA7x7JLSt
2025-02-08 04:03:12.561 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.163.62 waku 3020b0a1db63d2fd4ad6bc74f55180f1657bc3d7a70236b1ec9b00b499bad8b3
2025-02-08 04:03:12.606 DEBUG [src.node.docker_mananger] Container started with ID 3020b0a1db63. Setting up logs at ./log/docker/node2_2025-02-08_04-03-11__580db6cf-12c3-4586-8ac0-1d78e5bafa6d__wakuorg_nwaku:latest.log
2025-02-08 04:03:12.607 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 11629
2025-02-08 04:03:12.607 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:03:13.607 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11629/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:13.610 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:03:13.610 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:03:13.610 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11629/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:13.612 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.163.62/tcp/11630/p2p/16Uiu2HAmUcw3suepEZAB92XQPRZidixR7wKS5mMdxi9c3CZTnRee","/ip4/172.18.163.62/tcp/11631/ws/p2p/16Uiu2HAmUcw3suepEZAB92XQPRZidixR7wKS5mMdxi9c3CZTnRee"],"enrUri":"enr:-L24QBiIjT5sElHhKXM--evNrvr9ZJLhTddyyFCaEHOL5ZzAbUQX7AVl0rIgZM7u1npBKVwy0j4P_Cht3ptSenf3UCUCgmlkgnY0gmlwhKwSoz6KbXVsdGlhZGRyc5YACASsEqM-Bi1uAAoErBKjPgYtb90DgnJzhQADAQAAiXNlY3AyNTZrMaED7TQZAEfxoUbZwpP1gp9kNSqJceSyr3kR3StxNu937U-DdGNwgi1ug3VkcIItcIV3YWt1MgA"}'
2025-02-08 04:03:13.613 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:03:13.613 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11629/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.222.17/tcp/51644/p2p/16Uiu2HAmHZHTFdSGwLdV67Za9hMdYWLNsqruHbMkCTHKA7x7JLSt"]'
2025-02-08 04:03:13.650 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:13.652 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-08 04:03:13.653 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:51643/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-08 04:03:13.668 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:13.669 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11629/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "773d7de9-7496-49f2-aef1-4c872b6112e6", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-08 04:03:13.680 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"773d7de9-7496-49f2-aef1-4c872b6112e6","statusDesc":"OK"}'
2025-02-08 04:03:13.681 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:11629/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-08 04:03:13.683 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:11629/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
2025-02-08 04:03:13.686 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-08 04:03:13.686 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-08 04:03:13.687 DEBUG [src.node.waku_node] Stopping container with id 84f26a9a94be
2025-02-08 04:03:14.789 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:03:14.790 DEBUG [src.node.waku_node] Stopping container with id 3020b0a1db63
2025-02-08 04:03:15.601 ERROR [src.node.docker_mananger] Max retries reached for container 84f26a9a94be. Exiting log stream.
2025-02-08 04:03:16.260 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:03:16.261 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-08 04:03:16.265 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 04:03:16.269 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
