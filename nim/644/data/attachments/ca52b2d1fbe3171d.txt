2025-02-08 04:06:45.586 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-08 04:06:45.587 DEBUG [tests.conftest] Running test: test_light_push_with_invalid_version with id: 2025-02-08_04-06-45__7185616a-b71d-437e-afda-cd9488653778
2025-02-08 04:06:45.587 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-08 04:06:45.587 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-08 04:06:45.594 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:06:45.594 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-08_04-06-45__7185616a-b71d-437e-afda-cd9488653778__wakuorg_nwaku:latest.log
2025-02-08 04:06:45.594 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:06:45.594 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:06:45.596 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:06:45.596 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.191.201
2025-02-08 04:06:45.596 DEBUG [src.node.docker_mananger] Generated ports ['39836', '39837', '39838', '39839', '39840']
2025-02-08 04:06:45.596 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:06:45.596 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:06:45.597 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:06:45.597 DEBUG [src.node.docker_mananger] docker run -i -t -p 39836:39836 -p 39837:39837 -p 39838:39838 -p 39839:39839 -p 39840:39840 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39838 --rest-port=39836 --tcp-port=39837 --discv5-udp-port=39839 --rest-address=0.0.0.0 --nat=extip:172.18.191.201 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bc7bafcb8bec9bdc093cfef3afc9ecad8510b953aa0d3e1d013d1f422aef04d1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39840 --metrics-logging=true --lightpush=true --relay=true
2025-02-08 04:06:45.832 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.191.201 waku 784c3d4d3ac2859d2312941acedc2cd1f2f59b1709f7dcc0c3f4f9ae6ee00654
2025-02-08 04:06:45.879 DEBUG [src.node.docker_mananger] Container started with ID 784c3d4d3ac2. Setting up logs at ./log/docker/receiving_node1_2025-02-08_04-06-45__7185616a-b71d-437e-afda-cd9488653778__wakuorg_nwaku:latest.log
2025-02-08 04:06:45.879 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 39836
2025-02-08 04:06:45.880 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:06:46.383 ERROR [src.node.docker_mananger] Max retries reached for container 0bf0acf8da69. Exiting log stream.
2025-02-08 04:06:46.880 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39836/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:06:46.883 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:06:46.883 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:06:46.884 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39836/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:06:46.886 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.191.201/tcp/39837/p2p/16Uiu2HAmEffvjK5G6QzHbSVCLQmKWSkBrHummCdAiMBBfjovRrWm","/ip4/172.18.191.201/tcp/39838/ws/p2p/16Uiu2HAmEffvjK5G6QzHbSVCLQmKWSkBrHummCdAiMBBfjovRrWm"],"enrUri":"enr:-L24QBn5DN_4Ey3VGxONlBaGIAxthMIUMZTP2BW-kYC4JQWfIuwYVynH6b8y-Ado_jBGGpqL0V_Nd84JI7F-hxlNjQICgmlkgnY0gmlwhKwSv8mKbXVsdGlhZGRyc5YACASsEr_JBpudAAoErBK_yQabnt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDHeQfisTLGVpoyD-fMrn6Xg3_GQTJJdV1iWbvecqzIPKDdGNwgpudg3VkcIKbn4V3YWt1Mgk"}'
2025-02-08 04:06:46.886 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:06:46.893 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:06:46.893 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-08_04-06-45__7185616a-b71d-437e-afda-cd9488653778__wakuorg_nwaku:latest.log
2025-02-08 04:06:46.893 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:06:46.893 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:06:46.895 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:06:46.895 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.85.191
2025-02-08 04:06:46.895 DEBUG [src.node.docker_mananger] Generated ports ['35049', '35050', '35051', '35052', '35053']
2025-02-08 04:06:46.895 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:06:46.895 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:06:46.895 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:06:46.896 DEBUG [src.node.docker_mananger] docker run -i -t -p 35049:35049 -p 35050:35050 -p 35051:35051 -p 35052:35052 -p 35053:35053 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=35051 --rest-port=35049 --tcp-port=35050 --discv5-udp-port=35052 --rest-address=0.0.0.0 --nat=extip:172.18.85.191 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=257ef6b0fa9dad0bbc161c1e9a54fcdeabc64cce04cad67ee8f6bedfe9fa5c12 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=35053 --metrics-logging=true --lightpush=false --relay=true
2025-02-08 04:06:47.117 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.85.191 waku a2341c537362062ccd1c0408581d6eed05f30ac585e24f2c30422f8d216dab70
2025-02-08 04:06:47.171 DEBUG [src.node.docker_mananger] Container started with ID a2341c537362. Setting up logs at ./log/docker/receiving_node2_2025-02-08_04-06-45__7185616a-b71d-437e-afda-cd9488653778__wakuorg_nwaku:latest.log
2025-02-08 04:06:47.171 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 35049
2025-02-08 04:06:47.171 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:06:48.172 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35049/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:06:48.174 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:06:48.175 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:06:48.175 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35049/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:06:48.177 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.85.191/tcp/35050/p2p/16Uiu2HAm9b14eXh2Ksqs4bPsqeqojca9uey79waYQGLXAc6wnkDf","/ip4/172.18.85.191/tcp/35051/ws/p2p/16Uiu2HAm9b14eXh2Ksqs4bPsqeqojca9uey79waYQGLXAc6wnkDf"],"enrUri":"enr:-L24QLpKdaxGdwX-QGfvv5xe5RV6CCn4XFOfkIJv7DT4vuBoIs156sBxJJ-4LwIDsYAmIxOue0_zKwjmpzUu8yJD_XYCgmlkgnY0gmlwhKwSVb-KbXVsdGlhZGRyc5YACASsElW_BojqAAoErBJVvwaI690DgnJzhQADAQAAiXNlY3AyNTZrMaEC0mdsGNmqFuu-bZ0F3WeTOK7_WiPBQUriIZR0_sQdJ7KDdGNwgojqg3VkcIKI7IV3YWt1MgE"}'
2025-02-08 04:06:48.177 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:06:48.178 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35049/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.191.201/tcp/39837/p2p/16Uiu2HAmEffvjK5G6QzHbSVCLQmKWSkBrHummCdAiMBBfjovRrWm"]'
2025-02-08 04:06:48.217 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:06:48.227 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:06:48.227 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-08_04-06-45__7185616a-b71d-437e-afda-cd9488653778__wakuorg_nwaku:latest.log
2025-02-08 04:06:48.228 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:06:48.228 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:06:48.229 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:06:48.229 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.247.151
2025-02-08 04:06:48.230 DEBUG [src.node.docker_mananger] Generated ports ['40055', '40056', '40057', '40058', '40059']
2025-02-08 04:06:48.230 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:06:48.230 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:06:48.230 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:06:48.230 DEBUG [src.node.docker_mananger] docker run -i -t -p 40055:40055 -p 40056:40056 -p 40057:40057 -p 40058:40058 -p 40059:40059 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40057 --rest-port=40055 --tcp-port=40056 --discv5-udp-port=40058 --rest-address=0.0.0.0 --nat=extip:172.18.247.151 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bdf6fafcbedfddd142b493afbccbf8d9b70bf1a3f3f035ace9eefb2ecd0eca12 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40059 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QBn5DN_4Ey3VGxONlBaGIAxthMIUMZTP2BW-kYC4JQWfIuwYVynH6b8y-Ado_jBGGpqL0V_Nd84JI7F-hxlNjQICgmlkgnY0gmlwhKwSv8mKbXVsdGlhZGRyc5YACASsEr_JBpudAAoErBK_yQabnt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDHeQfisTLGVpoyD-fMrn6Xg3_GQTJJdV1iWbvecqzIPKDdGNwgpudg3VkcIKbn4V3YWt1Mgk --lightpushnode=/ip4/172.18.191.201/tcp/39837/p2p/16Uiu2HAmEffvjK5G6QzHbSVCLQmKWSkBrHummCdAiMBBfjovRrWm --lightpush=true --relay=false
2025-02-08 04:06:48.469 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.247.151 waku 2837c082d683357aa074a2e2e3651ca142bcd7e472a22b462baf0a869b00f0bb
2025-02-08 04:06:48.519 DEBUG [src.node.docker_mananger] Container started with ID 2837c082d683. Setting up logs at ./log/docker/lightpush_node1_2025-02-08_04-06-45__7185616a-b71d-437e-afda-cd9488653778__wakuorg_nwaku:latest.log
2025-02-08 04:06:48.519 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 40055
2025-02-08 04:06:48.519 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:06:49.520 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40055/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:06:49.523 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:06:49.523 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:06:49.524 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40055/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:06:49.526 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.247.151/tcp/40056/p2p/16Uiu2HAmG4PcnmRcgLY5re77wTKkQa9VisJwrhMjwL2iGx7nyQFx","/ip4/172.18.247.151/tcp/40057/ws/p2p/16Uiu2HAmG4PcnmRcgLY5re77wTKkQa9VisJwrhMjwL2iGx7nyQFx"],"enrUri":"enr:-L24QPJ-1WRPUV2pnLQKh_t8yXyVKZqYIaPcrWo9nkcqgcGFaB1hB1HvDF9pFoeZyhMJ0CeZuzHrpLwGL96ScRmDfr4CgmlkgnY0gmlwhKwS95eKbXVsdGlhZGRyc5YACASsEveXBpx4AAoErBL3lwaced0DgnJzhQADAQAAiXNlY3AyNTZrMaEDMpG6TUbAwuEwEnJLqUkZhyWZq_WPAH9oLPSnZWeXTC-DdGNwgpx4g3VkcIKceoV3YWt1Mgg"}'
2025-02-08 04:06:49.526 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:06:49.526 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40055/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.191.201/tcp/39837/p2p/16Uiu2HAmEffvjK5G6QzHbSVCLQmKWSkBrHummCdAiMBBfjovRrWm"]'
2025-02-08 04:06:49.562 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:06:49.563 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40055/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.85.191/tcp/35050/p2p/16Uiu2HAm9b14eXh2Ksqs4bPsqeqojca9uey79waYQGLXAc6wnkDf"]'
2025-02-08 04:06:49.592 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:06:49.594 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:39836/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-08 04:06:49.602 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:06:49.606 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35049/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-08 04:06:49.612 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:06:49.615 DEBUG [src.steps.light_push] Lightpushing message
2025-02-08 04:06:49.616 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40055/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738987609614908672, "version": 2.1}}'
2025-02-08 04:06:49.620 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:40055/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
2025-02-08 04:06:49.622 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-08 04:06:49.623 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-08 04:06:49.623 DEBUG [src.node.waku_node] Stopping container with id 784c3d4d3ac2
2025-02-08 04:06:50.414 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:06:50.415 DEBUG [src.node.waku_node] Stopping container with id a2341c537362
2025-02-08 04:06:51.228 ERROR [src.node.docker_mananger] Max retries reached for container 784c3d4d3ac2. Exiting log stream.
2025-02-08 04:06:51.943 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:06:51.943 DEBUG [src.node.waku_node] Stopping container with id 2837c082d683
2025-02-08 04:06:52.756 ERROR [src.node.docker_mananger] Max retries reached for container a2341c537362. Exiting log stream.
2025-02-08 04:06:53.442 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:06:53.443 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-08 04:06:53.449 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 04:06:53.455 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 04:06:53.460 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
