2025-02-08 04:04:36.637 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-08 04:04:36.637 DEBUG [tests.conftest] Running test: test_main_node_only_lightpush__peer_only_filter with id: 2025-02-08_04-04-36__ccb64e26-c2ab-4442-a905-afda507c4091
2025-02-08 04:04:36.638 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-08 04:04:36.638 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-08 04:04:36.644 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:04:36.645 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-08_04-04-36__ccb64e26-c2ab-4442-a905-afda507c4091__wakuorg_nwaku:latest.log
2025-02-08 04:04:36.645 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:04:36.645 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:04:36.646 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:04:36.646 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.195.18
2025-02-08 04:04:36.646 DEBUG [src.node.docker_mananger] Generated ports ['16578', '16579', '16580', '16581', '16582']
2025-02-08 04:04:36.647 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:04:36.647 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:04:36.647 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:04:36.647 DEBUG [src.node.docker_mananger] docker run -i -t -p 16578:16578 -p 16579:16579 -p 16580:16580 -p 16581:16581 -p 16582:16582 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=16580 --rest-port=16578 --tcp-port=16579 --discv5-udp-port=16581 --rest-address=0.0.0.0 --nat=extip:172.18.195.18 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dde28e67a460f86eeec895ba996db54e9172ba2d544eaf8fae23a47c9bd189dd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=16582 --metrics-logging=true --lightpush=false --relay=false --filter=true
2025-02-08 04:04:36.876 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.195.18 waku acb3e06e0ad1e9092061d8ac6f1716680c6197178e23265e18de6bf6ccce6190
2025-02-08 04:04:36.924 DEBUG [src.node.docker_mananger] Container started with ID acb3e06e0ad1. Setting up logs at ./log/docker/receiving_node1_2025-02-08_04-04-36__ccb64e26-c2ab-4442-a905-afda507c4091__wakuorg_nwaku:latest.log
2025-02-08 04:04:36.926 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 16578
2025-02-08 04:04:36.926 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:04:37.437 ERROR [src.node.docker_mananger] Max retries reached for container 596201aaac14. Exiting log stream.
2025-02-08 04:04:37.926 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16578/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:37.929 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:04:37.929 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:04:37.929 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16578/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:37.931 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.195.18/tcp/16579/p2p/16Uiu2HAmAxkUwCxpYX1FxKLPUEuHpex8JrEuTmsp3p7RF5uyBKrS","/ip4/172.18.195.18/tcp/16580/ws/p2p/16Uiu2HAmAxkUwCxpYX1FxKLPUEuHpex8JrEuTmsp3p7RF5uyBKrS"],"enrUri":"enr:-L24QMNP_-vzLe2wWQSlIuWLbb05lTIhNUxhsysBxx7AN0mqa6CEU19andwXZJqvoWjxGOGw481lVFziT4pl7GDJSj8CgmlkgnY0gmlwhKwSwxKKbXVsdGlhZGRyc5YACASsEsMSBkDDAAoErBLDEgZAxN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC5tVmYG8CmraGv-dcF8a_8XnQQhsg6FzUwEFwcwLT-UuDdGNwgkDDg3VkcIJAxYV3YWt1MgQ"}'
2025-02-08 04:04:37.932 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:04:37.938 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:04:37.938 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-08_04-04-36__ccb64e26-c2ab-4442-a905-afda507c4091__wakuorg_nwaku:latest.log
2025-02-08 04:04:37.938 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:04:37.938 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:04:37.940 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:04:37.940 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.188.95
2025-02-08 04:04:37.940 DEBUG [src.node.docker_mananger] Generated ports ['17783', '17784', '17785', '17786', '17787']
2025-02-08 04:04:37.940 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:04:37.940 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:04:37.940 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:04:37.940 DEBUG [src.node.docker_mananger] docker run -i -t -p 17783:17783 -p 17784:17784 -p 17785:17785 -p 17786:17786 -p 17787:17787 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17785 --rest-port=17783 --tcp-port=17784 --discv5-udp-port=17786 --rest-address=0.0.0.0 --nat=extip:172.18.188.95 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6fb8cf7eabcbcecacfe10d12030a02d013b55b9d6ec6c963f1daaaaeb1bea4e9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17787 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QMNP_-vzLe2wWQSlIuWLbb05lTIhNUxhsysBxx7AN0mqa6CEU19andwXZJqvoWjxGOGw481lVFziT4pl7GDJSj8CgmlkgnY0gmlwhKwSwxKKbXVsdGlhZGRyc5YACASsEsMSBkDDAAoErBLDEgZAxN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC5tVmYG8CmraGv-dcF8a_8XnQQhsg6FzUwEFwcwLT-UuDdGNwgkDDg3VkcIJAxYV3YWt1MgQ --lightpushnode=/ip4/172.18.195.18/tcp/16579/p2p/16Uiu2HAmAxkUwCxpYX1FxKLPUEuHpex8JrEuTmsp3p7RF5uyBKrS --lightpush=true --relay=false
2025-02-08 04:04:38.172 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.188.95 waku 78a389cb31bf0c640a53a6e88be0706d7b17c33393c70db7b75c6f0a3cadb6d6
2025-02-08 04:04:38.218 DEBUG [src.node.docker_mananger] Container started with ID 78a389cb31bf. Setting up logs at ./log/docker/lightpush_node1_2025-02-08_04-04-36__ccb64e26-c2ab-4442-a905-afda507c4091__wakuorg_nwaku:latest.log
2025-02-08 04:04:38.218 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 17783
2025-02-08 04:04:38.218 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:04:39.219 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17783/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:39.222 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:04:39.222 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:04:39.222 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17783/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:39.224 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.188.95/tcp/17784/p2p/16Uiu2HAmECCcpvM5TXRwDd2eVXb4xpH1JmkvtM9uP8RMLXy61dn6","/ip4/172.18.188.95/tcp/17785/ws/p2p/16Uiu2HAmECCcpvM5TXRwDd2eVXb4xpH1JmkvtM9uP8RMLXy61dn6"],"enrUri":"enr:-L24QOrHynouHQfByTSuzcKSaQSNCojsovtW9m1cbP9T_NT8NnvrJf8ihTJ2wJnsSz25HlvSxR9YoPiz9AknqyW8d6sCgmlkgnY0gmlwhKwSvF-KbXVsdGlhZGRyc5YACASsErxfBkV4AAoErBK8XwZFed0DgnJzhQADAQAAiXNlY3AyNTZrMaEDFtqQN26jB5-EhsT_ek4BB2y_sF_NPZo9kcI_nLOY0peDdGNwgkV4g3VkcIJFeoV3YWt1Mgg"}'
2025-02-08 04:04:39.224 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:04:39.225 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17783/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.195.18/tcp/16579/p2p/16Uiu2HAmAxkUwCxpYX1FxKLPUEuHpex8JrEuTmsp3p7RF5uyBKrS"]'
2025-02-08 04:04:39.262 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:39.263 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17783/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738987479262946560}}'
2025-02-08 04:04:39.284 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:17783/lightpush/v1/message. Response content: b'Failed to request a message push: dial_failure'
2025-02-08 04:04:39.285 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-08 04:04:39.286 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-08 04:04:39.286 DEBUG [src.node.waku_node] Stopping container with id acb3e06e0ad1
2025-02-08 04:04:40.363 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:04:40.363 DEBUG [src.node.waku_node] Stopping container with id 78a389cb31bf
2025-02-08 04:04:41.174 ERROR [src.node.docker_mananger] Max retries reached for container acb3e06e0ad1. Exiting log stream.
2025-02-08 04:04:41.832 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:04:41.833 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-08 04:04:41.837 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 04:04:41.840 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
