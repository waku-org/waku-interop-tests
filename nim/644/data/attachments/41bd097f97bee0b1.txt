2025-02-08 04:06:31.273 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-08 04:06:31.273 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_all_from_90_content_topics with id: 2025-02-08_04-06-31__3d3e37bd-9594-481a-9e9b-2c4f2f31ebda
2025-02-08 04:06:31.273 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-08 04:06:31.274 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-08 04:06:31.274 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-08 04:06:31.280 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:06:31.281 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-08_04-06-31__3d3e37bd-9594-481a-9e9b-2c4f2f31ebda__wakuorg_nwaku:latest.log
2025-02-08 04:06:31.281 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:06:31.281 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:06:31.282 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:06:31.282 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.93.125
2025-02-08 04:06:31.283 DEBUG [src.node.docker_mananger] Generated ports ['50377', '50378', '50379', '50380', '50381']
2025-02-08 04:06:31.283 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:06:31.283 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:06:31.283 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:06:31.283 DEBUG [src.node.docker_mananger] docker run -i -t -p 50377:50377 -p 50378:50378 -p 50379:50379 -p 50380:50380 -p 50381:50381 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=50379 --rest-port=50377 --tcp-port=50378 --discv5-udp-port=50380 --rest-address=0.0.0.0 --nat=extip:172.18.93.125 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eaefe28dcdb98febc3e2ae3bf43eda03fa11e605770d1c573a086c1cfa990d8a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=50381 --metrics-logging=true --relay=true --filter=true
2025-02-08 04:06:31.517 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.93.125 waku 7c0e31c3ded375dfc2240ebaaa153f12357c6d874035ec99807e3e85bf9f39d7
2025-02-08 04:06:31.567 DEBUG [src.node.docker_mananger] Container started with ID 7c0e31c3ded3. Setting up logs at ./log/docker/node1_2025-02-08_04-06-31__3d3e37bd-9594-481a-9e9b-2c4f2f31ebda__wakuorg_nwaku:latest.log
2025-02-08 04:06:31.567 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 50377
2025-02-08 04:06:31.567 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:06:32.080 ERROR [src.node.docker_mananger] Max retries reached for container c56c485601d7. Exiting log stream.
2025-02-08 04:06:32.568 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50377/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:06:32.570 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:06:32.571 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:06:32.571 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50377/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:06:32.573 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.93.125/tcp/50378/p2p/16Uiu2HAm7aNUGwvxsumeLe6JC6LK6MRNQVLE8uRYgRgwExQhW6ns","/ip4/172.18.93.125/tcp/50379/ws/p2p/16Uiu2HAm7aNUGwvxsumeLe6JC6LK6MRNQVLE8uRYgRgwExQhW6ns"],"enrUri":"enr:-L24QLoBohs61xS0SvZxG4AqDBn5QbA0y4UtwGI26XHdP4KwXtA-9NIvWG_uMHDbOE3qVjWobZWcabkKXB9Ed3Yq2KICgmlkgnY0gmlwhKwSXX2KbXVsdGlhZGRyc5YACASsEl19BsTKAAoErBJdfQbEy90DgnJzhQADAQAAiXNlY3AyNTZrMaECtIasSSjD60QrUQUP04Lpquf3JkjgulUERbesvGCo0sCDdGNwgsTKg3VkcILEzIV3YWt1MgU"}'
2025-02-08 04:06:32.573 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:06:32.574 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-08 04:06:32.580 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:06:32.580 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-08_04-06-31__3d3e37bd-9594-481a-9e9b-2c4f2f31ebda__wakuorg_nwaku:latest.log
2025-02-08 04:06:32.580 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:06:32.580 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:06:32.581 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:06:32.582 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.166.211
2025-02-08 04:06:32.582 DEBUG [src.node.docker_mananger] Generated ports ['3307', '3308', '3309', '3310', '3311']
2025-02-08 04:06:32.582 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:06:32.582 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:06:32.582 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:06:32.582 DEBUG [src.node.docker_mananger] docker run -i -t -p 3307:3307 -p 3308:3308 -p 3309:3309 -p 3310:3310 -p 3311:3311 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=3309 --rest-port=3307 --tcp-port=3308 --discv5-udp-port=3310 --rest-address=0.0.0.0 --nat=extip:172.18.166.211 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6ffc96bad502b4aac1d8c77f17fdf77bad832d66c6f02abdd25a0572bc9ddaae --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=3311 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QLoBohs61xS0SvZxG4AqDBn5QbA0y4UtwGI26XHdP4KwXtA-9NIvWG_uMHDbOE3qVjWobZWcabkKXB9Ed3Yq2KICgmlkgnY0gmlwhKwSXX2KbXVsdGlhZGRyc5YACASsEl19BsTKAAoErBJdfQbEy90DgnJzhQADAQAAiXNlY3AyNTZrMaECtIasSSjD60QrUQUP04Lpquf3JkjgulUERbesvGCo0sCDdGNwgsTKg3VkcILEzIV3YWt1MgU --filternode=/ip4/172.18.93.125/tcp/50378/p2p/16Uiu2HAm7aNUGwvxsumeLe6JC6LK6MRNQVLE8uRYgRgwExQhW6ns
2025-02-08 04:06:32.815 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.166.211 waku 5d7dcf5072e0c30b5f79707937692dda4f2dc30459e2bb4be6bc8bb42f09e82a
2025-02-08 04:06:32.862 DEBUG [src.node.docker_mananger] Container started with ID 5d7dcf5072e0. Setting up logs at ./log/docker/node2_2025-02-08_04-06-31__3d3e37bd-9594-481a-9e9b-2c4f2f31ebda__wakuorg_nwaku:latest.log
2025-02-08 04:06:32.863 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 3307
2025-02-08 04:06:32.863 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:06:33.864 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3307/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:06:33.867 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:06:33.867 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:06:33.867 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3307/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:06:33.869 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.166.211/tcp/3308/p2p/16Uiu2HAkv1W7nqMHyuaghW7zGy5gt3LXBYvbvi9zSMt7y29md96E","/ip4/172.18.166.211/tcp/3309/ws/p2p/16Uiu2HAkv1W7nqMHyuaghW7zGy5gt3LXBYvbvi9zSMt7y29md96E"],"enrUri":"enr:-L24QG882wTygElUp5JWVgdi0UA7gUgra1UPSGnDRYr-LxDWSDqL8xYsKT35PJ3llmId1lAmcZ-fQ8IBT9Jrt5_VLK8CgmlkgnY0gmlwhKwSptOKbXVsdGlhZGRyc5YACASsEqbTBgzsAAoErBKm0wYM7d0DgnJzhQADAQAAiXNlY3AyNTZrMaECCKqYrJem40f64Q9qD0HfIuPpmTkgjwuFt93La_rGke-DdGNwggzsg3VkcIIM7oV3YWt1MgA"}'
2025-02-08 04:06:33.869 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:06:33.870 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3307/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.93.125/tcp/50378/p2p/16Uiu2HAm7aNUGwvxsumeLe6JC6LK6MRNQVLE8uRYgRgwExQhW6ns"]'
2025-02-08 04:06:33.909 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:06:33.911 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50377/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-08 04:06:33.928 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:06:33.930 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3307/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "b4877740-8ceb-46ca-b7b1-3af57b1f87be", "contentFilters": ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "30"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-08 04:06:33.944 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"b4877740-8ceb-46ca-b7b1-3af57b1f87be","statusDesc":"OK"}'
2025-02-08 04:06:33.945 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50377/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-08 04:06:33.947 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:06:33.948 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3307/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "0e1726f9-a356-42dd-85d2-1053845286ff", "contentFilters": ["31", "32", "33", "34", "35", "36", "37", "38", "39", "40", "41", "42", "43", "44", "45", "46", "47", "48", "49", "50", "51", "52", "53", "54", "55", "56", "57", "58", "59", "60"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-08 04:06:33.964 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"0e1726f9-a356-42dd-85d2-1053845286ff","statusDesc":"OK"}'
2025-02-08 04:06:33.965 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50377/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-08 04:06:33.967 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:06:33.968 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3307/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "c1270a2d-b11e-4439-bebb-06a08b6536ef", "contentFilters": ["61", "62", "63", "64", "65", "66", "67", "68", "69", "70", "71", "72", "73", "74", "75", "76", "77", "78", "79", "80", "81", "82", "83", "84", "85", "86", "87", "88", "89", "90"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-08 04:06:33.989 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"c1270a2d-b11e-4439-bebb-06a08b6536ef","statusDesc":"OK"}'
2025-02-08 04:06:33.989 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50377/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "14", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:06:34.014 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:06:34.015 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 04:06:34.115 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-08 04:06:34.116 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3307/filter/v2/messages/14" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:06:34.119 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"14","version":0,"timestamp":1738987593989820928,"ephemeral":false}]'
2025-02-08 04:06:34.120 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50377/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "45", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:06:34.143 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:06:34.143 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 04:06:34.243 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-08 04:06:34.244 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3307/filter/v2/messages/45" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:06:34.246 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"45","version":0,"timestamp":1738987594120608512,"ephemeral":false}]'
2025-02-08 04:06:34.248 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50377/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "67", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:06:34.270 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:06:34.270 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 04:06:34.370 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-08 04:06:34.371 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3307/filter/v2/messages/67" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:06:34.374 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"67","version":0,"timestamp":1738987594248335360,"ephemeral":false}]'
2025-02-08 04:06:34.375 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:3307/filter/v2/subscriptions/all" -H "Content-Type: application/json" -d '{"requestId": "1"}'
2025-02-08 04:06:34.385 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
2025-02-08 04:06:34.386 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50377/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "25", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:06:34.390 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:06:34.390 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 04:06:34.490 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-08 04:06:34.490 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3307/filter/v2/messages/25" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:06:34.493 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:3307/filter/v2/messages/25. Response content: b'Not subscribed to topic: 25'
2025-02-08 04:06:34.494 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50377/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "55", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:06:34.498 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:06:34.499 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 04:06:34.599 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-08 04:06:34.600 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3307/filter/v2/messages/55" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:06:34.602 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:3307/filter/v2/messages/55. Response content: b'Not subscribed to topic: 55'
2025-02-08 04:06:34.604 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50377/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "88", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:06:34.608 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:06:34.608 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 04:06:34.709 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-08 04:06:34.709 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3307/filter/v2/messages/88" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:06:34.712 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:3307/filter/v2/messages/88. Response content: b'Not subscribed to topic: 88'
2025-02-08 04:06:34.715 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-08 04:06:34.716 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-08 04:06:34.716 DEBUG [src.node.waku_node] Stopping container with id 7c0e31c3ded3
2025-02-08 04:06:36.153 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:06:36.153 DEBUG [src.node.waku_node] Stopping container with id 5d7dcf5072e0
2025-02-08 04:06:36.966 ERROR [src.node.docker_mananger] Max retries reached for container 7c0e31c3ded3. Exiting log stream.
2025-02-08 04:06:37.686 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:06:37.689 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-08 04:06:37.695 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 04:06:37.701 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
