2025-02-08 04:04:00.385 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-08 04:04:00.385 DEBUG [tests.conftest] Running test: test_light_push_with_invalid_meta with id: 2025-02-08_04-04-00__fc600dcd-12ee-4198-accc-16031e3d65f6
2025-02-08 04:04:00.385 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-08 04:04:00.385 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-08 04:04:00.391 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:04:00.391 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-08_04-04-00__fc600dcd-12ee-4198-accc-16031e3d65f6__wakuorg_nwaku:latest.log
2025-02-08 04:04:00.392 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:04:00.392 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:04:00.393 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:04:00.393 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.20.112
2025-02-08 04:04:00.393 DEBUG [src.node.docker_mananger] Generated ports ['29321', '29322', '29323', '29324', '29325']
2025-02-08 04:04:00.394 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:04:00.394 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:04:00.394 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:04:00.394 DEBUG [src.node.docker_mananger] docker run -i -t -p 29321:29321 -p 29322:29322 -p 29323:29323 -p 29324:29324 -p 29325:29325 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29323 --rest-port=29321 --tcp-port=29322 --discv5-udp-port=29324 --rest-address=0.0.0.0 --nat=extip:172.18.20.112 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cfb0134fba7eeaa365f3dc3beecb01f2fcdee8de6e0ebce0280efe0106c5534b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29325 --metrics-logging=true --lightpush=true --relay=true
2025-02-08 04:04:00.618 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.20.112 waku e8f5fb9e039b75a9bd3e2b6a5506ede258c07db4ae288efa1f83f59153e24bdf
2025-02-08 04:04:00.665 DEBUG [src.node.docker_mananger] Container started with ID e8f5fb9e039b. Setting up logs at ./log/docker/receiving_node1_2025-02-08_04-04-00__fc600dcd-12ee-4198-accc-16031e3d65f6__wakuorg_nwaku:latest.log
2025-02-08 04:04:00.667 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 29321
2025-02-08 04:04:00.667 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:04:01.185 ERROR [src.node.docker_mananger] Max retries reached for container f2444016418d. Exiting log stream.
2025-02-08 04:04:01.667 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29321/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:01.670 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:04:01.671 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:04:01.671 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29321/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:01.673 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.20.112/tcp/29322/p2p/16Uiu2HAmL6Uv15uKWcdTpyLnZbEAZ9HHmHeQHUhHVxH9qTZaGLTb","/ip4/172.18.20.112/tcp/29323/ws/p2p/16Uiu2HAmL6Uv15uKWcdTpyLnZbEAZ9HHmHeQHUhHVxH9qTZaGLTb"],"enrUri":"enr:-L24QNO1MvQRPiUueDorUx4jlH6uCYY0ohmwqOzJhPG-jqowLz2AJHWB_WdrcdRMGAowD9FFdQkUD0ISpoh8XfY1P2sCgmlkgnY0gmlwhKwSFHCKbXVsdGlhZGRyc5YACASsEhRwBnKKAAoErBIUcAZyi90DgnJzhQADAQAAiXNlY3AyNTZrMaEDbomgSoFUfotaheMhQ3Z3SsHV8qVtofApNFrUXu7niZqDdGNwgnKKg3VkcIJyjIV3YWt1Mgk"}'
2025-02-08 04:04:01.673 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:04:01.679 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:04:01.680 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-08_04-04-00__fc600dcd-12ee-4198-accc-16031e3d65f6__wakuorg_nwaku:latest.log
2025-02-08 04:04:01.680 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:04:01.680 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:04:01.681 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:04:01.681 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.80.94
2025-02-08 04:04:01.681 DEBUG [src.node.docker_mananger] Generated ports ['37900', '37901', '37902', '37903', '37904']
2025-02-08 04:04:01.682 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:04:01.682 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:04:01.682 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:04:01.682 DEBUG [src.node.docker_mananger] docker run -i -t -p 37900:37900 -p 37901:37901 -p 37902:37902 -p 37903:37903 -p 37904:37904 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37902 --rest-port=37900 --tcp-port=37901 --discv5-udp-port=37903 --rest-address=0.0.0.0 --nat=extip:172.18.80.94 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=db28aac51ede1f0ecee56fabd5264a89d91b06a9eca1d52d35d40ccccae3caaa --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37904 --metrics-logging=true --lightpush=false --relay=true
2025-02-08 04:04:01.902 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.80.94 waku f2f8e9ec882f88e8019f2b40c185762ba0568dd7f19219f44a0251296a9ad92b
2025-02-08 04:04:01.948 DEBUG [src.node.docker_mananger] Container started with ID f2f8e9ec882f. Setting up logs at ./log/docker/receiving_node2_2025-02-08_04-04-00__fc600dcd-12ee-4198-accc-16031e3d65f6__wakuorg_nwaku:latest.log
2025-02-08 04:04:01.949 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 37900
2025-02-08 04:04:01.949 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:04:02.949 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37900/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:02.952 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:04:02.952 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:04:02.952 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37900/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:02.954 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.80.94/tcp/37901/p2p/16Uiu2HAkvefxv1irUxeoTHmWkP9vT1CiNU1enSJqfwsuDAAsrusi","/ip4/172.18.80.94/tcp/37902/ws/p2p/16Uiu2HAkvefxv1irUxeoTHmWkP9vT1CiNU1enSJqfwsuDAAsrusi"],"enrUri":"enr:-L24QPPgDLkGa6VNRgvQrcG-5S8QPFp8lWhM-vGlIjiCa5bpPDkuIwFe5FZjLZkNwRWD6TuLSaNPpECJwsOnJt2caD8CgmlkgnY0gmlwhKwSUF6KbXVsdGlhZGRyc5YACASsElBeBpQNAAoErBJQXgaUDt0DgnJzhQADAQAAiXNlY3AyNTZrMaECEjA4ZoSsc_kUz21qTpfqFnuoeLrrJdZ10mr-Q-ycDnWDdGNwgpQNg3VkcIKUD4V3YWt1MgE"}'
2025-02-08 04:04:02.954 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:04:02.955 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37900/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.20.112/tcp/29322/p2p/16Uiu2HAmL6Uv15uKWcdTpyLnZbEAZ9HHmHeQHUhHVxH9qTZaGLTb"]'
2025-02-08 04:04:02.994 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:03.002 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:04:03.002 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-08_04-04-00__fc600dcd-12ee-4198-accc-16031e3d65f6__wakuorg_nwaku:latest.log
2025-02-08 04:04:03.002 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:04:03.002 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:04:03.004 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:04:03.004 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.116.82
2025-02-08 04:04:03.004 DEBUG [src.node.docker_mananger] Generated ports ['28741', '28742', '28743', '28744', '28745']
2025-02-08 04:04:03.004 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:04:03.004 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:04:03.004 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:04:03.004 DEBUG [src.node.docker_mananger] docker run -i -t -p 28741:28741 -p 28742:28742 -p 28743:28743 -p 28744:28744 -p 28745:28745 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28743 --rest-port=28741 --tcp-port=28742 --discv5-udp-port=28744 --rest-address=0.0.0.0 --nat=extip:172.18.116.82 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=aaabc6755bd1acd69c7b6e8662e68cbfdbb574f411c9fe3561daa4fde384d85e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28745 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QNO1MvQRPiUueDorUx4jlH6uCYY0ohmwqOzJhPG-jqowLz2AJHWB_WdrcdRMGAowD9FFdQkUD0ISpoh8XfY1P2sCgmlkgnY0gmlwhKwSFHCKbXVsdGlhZGRyc5YACASsEhRwBnKKAAoErBIUcAZyi90DgnJzhQADAQAAiXNlY3AyNTZrMaEDbomgSoFUfotaheMhQ3Z3SsHV8qVtofApNFrUXu7niZqDdGNwgnKKg3VkcIJyjIV3YWt1Mgk --lightpushnode=/ip4/172.18.20.112/tcp/29322/p2p/16Uiu2HAmL6Uv15uKWcdTpyLnZbEAZ9HHmHeQHUhHVxH9qTZaGLTb --lightpush=true --relay=false
2025-02-08 04:04:03.244 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.116.82 waku 88194c227817edbe6e0536daf943128de892140823febbbedf22b4515b523427
2025-02-08 04:04:03.287 DEBUG [src.node.docker_mananger] Container started with ID 88194c227817. Setting up logs at ./log/docker/lightpush_node1_2025-02-08_04-04-00__fc600dcd-12ee-4198-accc-16031e3d65f6__wakuorg_nwaku:latest.log
2025-02-08 04:04:03.287 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 28741
2025-02-08 04:04:03.287 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:04:04.288 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28741/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:04.290 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:04:04.291 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:04:04.291 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28741/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:04.293 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.116.82/tcp/28742/p2p/16Uiu2HAmRZwD6ggVnNBX8bFkF93H8JaLfwbomHmwCs65xgTad9ZZ","/ip4/172.18.116.82/tcp/28743/ws/p2p/16Uiu2HAmRZwD6ggVnNBX8bFkF93H8JaLfwbomHmwCs65xgTad9ZZ"],"enrUri":"enr:-L24QMzGGuCRGddfGKslUjWKcD_881HDe8qyVgf7wpclTCswJ3O7EXcJT1rq2aZiXlOXQrUwDpRuV2x-8_exvTgPgPwCgmlkgnY0gmlwhKwSdFKKbXVsdGlhZGRyc5YACASsEnRSBnBGAAoErBJ0UgZwR90DgnJzhQADAQAAiXNlY3AyNTZrMaEDv9x5ZVgZvra7pelLr1IIplkehGeHvYZstIRxR4dsWrCDdGNwgnBGg3VkcIJwSIV3YWt1Mgg"}'
2025-02-08 04:04:04.293 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:04:04.293 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28741/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.20.112/tcp/29322/p2p/16Uiu2HAmL6Uv15uKWcdTpyLnZbEAZ9HHmHeQHUhHVxH9qTZaGLTb"]'
2025-02-08 04:04:04.330 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:04.330 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28741/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.80.94/tcp/37901/p2p/16Uiu2HAkvefxv1irUxeoTHmWkP9vT1CiNU1enSJqfwsuDAAsrusi"]'
2025-02-08 04:04:04.360 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:04.361 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29321/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-08 04:04:04.370 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:04.371 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37900/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-08 04:04:04.376 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:04.377 DEBUG [src.steps.light_push] Lightpushing message
2025-02-08 04:04:04.377 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28741/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738987444377528320, "meta": "Light push works!!"}}'
2025-02-08 04:04:04.380 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:28741/lightpush/v1/message. Response content: b'Invalid message: Incorrect base64 string'
2025-02-08 04:04:04.382 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-08 04:04:04.383 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-08 04:04:04.383 DEBUG [src.node.waku_node] Stopping container with id e8f5fb9e039b
2025-02-08 04:04:05.171 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:04:05.173 DEBUG [src.node.waku_node] Stopping container with id f2f8e9ec882f
2025-02-08 04:04:05.964 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:04:05.964 DEBUG [src.node.waku_node] Stopping container with id 88194c227817
2025-02-08 04:04:05.984 ERROR [src.node.docker_mananger] Max retries reached for container e8f5fb9e039b. Exiting log stream.
2025-02-08 04:04:06.775 ERROR [src.node.docker_mananger] Max retries reached for container f2f8e9ec882f. Exiting log stream.
2025-02-08 04:04:07.223 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:04:07.224 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-08 04:04:07.232 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 04:04:07.238 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 04:04:07.243 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
