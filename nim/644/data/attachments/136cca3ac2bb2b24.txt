2025-02-08 04:04:52.438 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-08 04:04:52.438 DEBUG [tests.conftest] Running test: test_light_push_while_peer_is_paused with id: 2025-02-08_04-04-52__393535a7-ab3d-4da6-b1fa-9ca004493602
2025-02-08 04:04:52.439 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-08 04:04:52.439 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-08 04:04:52.445 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:04:52.445 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-08_04-04-52__393535a7-ab3d-4da6-b1fa-9ca004493602__wakuorg_nwaku:latest.log
2025-02-08 04:04:52.445 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:04:52.445 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:04:52.446 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:04:52.447 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.223.21
2025-02-08 04:04:52.447 DEBUG [src.node.docker_mananger] Generated ports ['48129', '48130', '48131', '48132', '48133']
2025-02-08 04:04:52.447 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:04:52.447 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:04:52.447 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:04:52.447 DEBUG [src.node.docker_mananger] docker run -i -t -p 48129:48129 -p 48130:48130 -p 48131:48131 -p 48132:48132 -p 48133:48133 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=48131 --rest-port=48129 --tcp-port=48130 --discv5-udp-port=48132 --rest-address=0.0.0.0 --nat=extip:172.18.223.21 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a38c6578e62b4eae9dceea2459bdbc7a997c764fb8cbedec58bef5cddd79c350 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=48133 --metrics-logging=true --lightpush=true --relay=true
2025-02-08 04:04:52.666 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.223.21 waku c04252eefc8d87bffa0c147822f796a4b5a66d8435b37f9df2cbd5c25b378533
2025-02-08 04:04:52.717 DEBUG [src.node.docker_mananger] Container started with ID c04252eefc8d. Setting up logs at ./log/docker/receiving_node1_2025-02-08_04-04-52__393535a7-ab3d-4da6-b1fa-9ca004493602__wakuorg_nwaku:latest.log
2025-02-08 04:04:52.717 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 48129
2025-02-08 04:04:52.718 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:04:53.242 ERROR [src.node.docker_mananger] Max retries reached for container 887d0cd38fa1. Exiting log stream.
2025-02-08 04:04:53.719 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:48129/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:53.721 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:04:53.722 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:04:53.722 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:48129/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:53.724 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.223.21/tcp/48130/p2p/16Uiu2HAmMu9XEDKjqYJUawx2WDccn25YfwPzZ98VZosG5CnbiVeH","/ip4/172.18.223.21/tcp/48131/ws/p2p/16Uiu2HAmMu9XEDKjqYJUawx2WDccn25YfwPzZ98VZosG5CnbiVeH"],"enrUri":"enr:-L24QI-Uc4D3coRtxwJw_ZIn3_q88YUiTxJI3yxdnAsahybFf-acF-VgG7KAPLZeMhAYijFtUZADAG7oLIBCxnSSn2kCgmlkgnY0gmlwhKwS3xWKbXVsdGlhZGRyc5YACASsEt8VBrwCAAoErBLfFQa8A90DgnJzhQADAQAAiXNlY3AyNTZrMaEDiVmvClPUZFdeqFRp7gKUPqGP-ULMJ930WR3qk9XpG8qDdGNwgrwCg3VkcIK8BIV3YWt1Mgk"}'
2025-02-08 04:04:53.724 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:04:53.730 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:04:53.731 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-08_04-04-52__393535a7-ab3d-4da6-b1fa-9ca004493602__wakuorg_nwaku:latest.log
2025-02-08 04:04:53.731 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:04:53.731 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:04:53.732 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:04:53.732 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.191.75
2025-02-08 04:04:53.732 DEBUG [src.node.docker_mananger] Generated ports ['64010', '64011', '64012', '64013', '64014']
2025-02-08 04:04:53.732 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:04:53.733 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:04:53.733 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:04:53.733 DEBUG [src.node.docker_mananger] docker run -i -t -p 64010:64010 -p 64011:64011 -p 64012:64012 -p 64013:64013 -p 64014:64014 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64012 --rest-port=64010 --tcp-port=64011 --discv5-udp-port=64013 --rest-address=0.0.0.0 --nat=extip:172.18.191.75 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1a8ff7f8b909cf96cd03e12ffd8df4c0dbcb291e5e855ef711bc3ec5f108d874 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64014 --metrics-logging=true --lightpush=false --relay=true
2025-02-08 04:04:53.956 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.191.75 waku c1471f7f6ec515614470e79de6a1d3e843532a489ea14755edee3bc61670a3a6
2025-02-08 04:04:54.003 DEBUG [src.node.docker_mananger] Container started with ID c1471f7f6ec5. Setting up logs at ./log/docker/receiving_node2_2025-02-08_04-04-52__393535a7-ab3d-4da6-b1fa-9ca004493602__wakuorg_nwaku:latest.log
2025-02-08 04:04:54.005 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 64010
2025-02-08 04:04:54.007 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:04:55.007 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64010/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:55.010 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:04:55.010 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:04:55.010 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64010/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:55.012 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.191.75/tcp/64011/p2p/16Uiu2HAmCPFuKNqcZeszzAQurYDR72z4XNZnMATHx58kBUkQkDEC","/ip4/172.18.191.75/tcp/64012/ws/p2p/16Uiu2HAmCPFuKNqcZeszzAQurYDR72z4XNZnMATHx58kBUkQkDEC"],"enrUri":"enr:-L24QIZ3OnQogIkjsFZfqKuNcjzjKrkkkG2f4r9zRHKkGMfmLGxHFIunOzN9uufmj32uHtpNJzKsp1k4Q5n3LvJBFX0CgmlkgnY0gmlwhKwSv0uKbXVsdGlhZGRyc5YACASsEr9LBvoLAAoErBK_Swb6DN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC-_hKv6Zy9cNfJMUEgN_PE113vpkuXnYQz2sVSuC97nWDdGNwgvoLg3VkcIL6DYV3YWt1MgE"}'
2025-02-08 04:04:55.012 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:04:55.013 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64010/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.223.21/tcp/48130/p2p/16Uiu2HAmMu9XEDKjqYJUawx2WDccn25YfwPzZ98VZosG5CnbiVeH"]'
2025-02-08 04:04:55.048 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:55.058 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:04:55.059 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-08_04-04-52__393535a7-ab3d-4da6-b1fa-9ca004493602__wakuorg_nwaku:latest.log
2025-02-08 04:04:55.059 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:04:55.059 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:04:55.060 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:04:55.060 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.29.120
2025-02-08 04:04:55.061 DEBUG [src.node.docker_mananger] Generated ports ['23071', '23072', '23073', '23074', '23075']
2025-02-08 04:04:55.061 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:04:55.061 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:04:55.061 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:04:55.061 DEBUG [src.node.docker_mananger] docker run -i -t -p 23071:23071 -p 23072:23072 -p 23073:23073 -p 23074:23074 -p 23075:23075 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23073 --rest-port=23071 --tcp-port=23072 --discv5-udp-port=23074 --rest-address=0.0.0.0 --nat=extip:172.18.29.120 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=50ee64b19a7dbda8257c0feee13ff6f4fa2be7f5a2fffa42cafda8a2dfd2fd3c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23075 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QI-Uc4D3coRtxwJw_ZIn3_q88YUiTxJI3yxdnAsahybFf-acF-VgG7KAPLZeMhAYijFtUZADAG7oLIBCxnSSn2kCgmlkgnY0gmlwhKwS3xWKbXVsdGlhZGRyc5YACASsEt8VBrwCAAoErBLfFQa8A90DgnJzhQADAQAAiXNlY3AyNTZrMaEDiVmvClPUZFdeqFRp7gKUPqGP-ULMJ930WR3qk9XpG8qDdGNwgrwCg3VkcIK8BIV3YWt1Mgk --lightpushnode=/ip4/172.18.223.21/tcp/48130/p2p/16Uiu2HAmMu9XEDKjqYJUawx2WDccn25YfwPzZ98VZosG5CnbiVeH --lightpush=true --relay=false
2025-02-08 04:04:55.292 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.29.120 waku e68ee600bec63bf3ae2e07e7a8924997b16d243ddb53fe59ed5fde09af0e0cb8
2025-02-08 04:04:55.338 DEBUG [src.node.docker_mananger] Container started with ID e68ee600bec6. Setting up logs at ./log/docker/lightpush_node1_2025-02-08_04-04-52__393535a7-ab3d-4da6-b1fa-9ca004493602__wakuorg_nwaku:latest.log
2025-02-08 04:04:55.338 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 23071
2025-02-08 04:04:55.338 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:04:56.339 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23071/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:56.341 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:04:56.341 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:04:56.342 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23071/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:56.344 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.29.120/tcp/23072/p2p/16Uiu2HAmHNiiMcssuuhDSjdLuutRFUgdYKh9DZgRk4nnEoanw9uF","/ip4/172.18.29.120/tcp/23073/ws/p2p/16Uiu2HAmHNiiMcssuuhDSjdLuutRFUgdYKh9DZgRk4nnEoanw9uF"],"enrUri":"enr:-L24QFKWK5IzXP4OWbuhkrcTjI2gv94x_6K0Qyvl3k1qFitHfSl4l31-S3b-aFnWVEEjCOAjSFFBDga8lZH9i7Xxq7YCgmlkgnY0gmlwhKwSHXiKbXVsdGlhZGRyc5YACASsEh14BlogAAoErBIdeAZaId0DgnJzhQADAQAAiXNlY3AyNTZrMaEDRh92C74ItfqrA4lu2F7d87GoZij0eqRDSx53ozSKWdaDdGNwglogg3VkcIJaIoV3YWt1Mgg"}'
2025-02-08 04:04:56.344 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:04:56.344 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23071/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.223.21/tcp/48130/p2p/16Uiu2HAmMu9XEDKjqYJUawx2WDccn25YfwPzZ98VZosG5CnbiVeH"]'
2025-02-08 04:04:56.380 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:56.381 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23071/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.191.75/tcp/64011/p2p/16Uiu2HAmCPFuKNqcZeszzAQurYDR72z4XNZnMATHx58kBUkQkDEC"]'
2025-02-08 04:04:56.410 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:56.414 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:48129/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-08 04:04:56.419 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:56.420 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64010/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-08 04:04:56.424 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:56.427 DEBUG [src.node.waku_node] Stopping container with id c04252eefc8d
2025-02-08 04:04:57.208 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:04:57.208 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23071/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738987496427938048}}'
2025-02-08 04:04:58.020 ERROR [src.node.docker_mananger] Max retries reached for container c04252eefc8d. Exiting log stream.
2025-02-08 04:05:02.216 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:23071/lightpush/v1/message. Response content: b'Failed to request a message push: dial_failure'
2025-02-08 04:05:02.218 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-08 04:05:02.219 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-08 04:05:02.219 DEBUG [src.node.waku_node] Stopping container with id c1471f7f6ec5
2025-02-08 04:05:03.725 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:05:03.725 DEBUG [src.node.waku_node] Stopping container with id e68ee600bec6
2025-02-08 04:05:04.536 ERROR [src.node.docker_mananger] Max retries reached for container c1471f7f6ec5. Exiting log stream.
2025-02-08 04:05:05.210 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:05:05.212 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-08 04:05:05.221 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 04:05:05.229 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 04:05:05.235 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
