2025-02-08 04:03:16.272 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-08 04:03:16.272 DEBUG [tests.conftest] Running test: test_light_push_with_no_timestamp with id: 2025-02-08_04-03-16__d2afcadc-8180-45d8-8610-f564cc31aa56
2025-02-08 04:03:16.273 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-08 04:03:16.273 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-08 04:03:16.279 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:03:16.279 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-08_04-03-16__d2afcadc-8180-45d8-8610-f564cc31aa56__wakuorg_nwaku:latest.log
2025-02-08 04:03:16.279 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:03:16.279 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:03:16.280 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:03:16.280 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.53.139
2025-02-08 04:03:16.280 DEBUG [src.node.docker_mananger] Generated ports ['28592', '28593', '28594', '28595', '28596']
2025-02-08 04:03:16.281 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:03:16.281 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:03:16.281 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:03:16.281 DEBUG [src.node.docker_mananger] docker run -i -t -p 28592:28592 -p 28593:28593 -p 28594:28594 -p 28595:28595 -p 28596:28596 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28594 --rest-port=28592 --tcp-port=28593 --discv5-udp-port=28595 --rest-address=0.0.0.0 --nat=extip:172.18.53.139 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a9fffbd03daffce8ec3afd8db9afeaef0fe2aa78fcd3f9c3ac8afb1c26ab7ab2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28596 --metrics-logging=true --lightpush=true --relay=true
2025-02-08 04:03:16.509 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.53.139 waku 19280c0ebb09238cb4d25dd0236751566336ac5f06e01b6df6d38042039dacba
2025-02-08 04:03:16.556 DEBUG [src.node.docker_mananger] Container started with ID 19280c0ebb09. Setting up logs at ./log/docker/receiving_node1_2025-02-08_04-03-16__d2afcadc-8180-45d8-8610-f564cc31aa56__wakuorg_nwaku:latest.log
2025-02-08 04:03:16.557 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 28592
2025-02-08 04:03:16.557 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:03:17.078 ERROR [src.node.docker_mananger] Max retries reached for container 3020b0a1db63. Exiting log stream.
2025-02-08 04:03:17.558 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28592/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:17.560 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:03:17.560 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:03:17.561 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28592/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:17.563 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.53.139/tcp/28593/p2p/16Uiu2HAmMo9FpsiWjsH3cwb9dqdaWVB1n4rAPHEf7tjq4zVFpUs2","/ip4/172.18.53.139/tcp/28594/ws/p2p/16Uiu2HAmMo9FpsiWjsH3cwb9dqdaWVB1n4rAPHEf7tjq4zVFpUs2"],"enrUri":"enr:-L24QAI2qUcCO_W8hfhg2bEqmRrMtVEwE2duwBNe2_C5JILXbPeNbqzfr4J8MR_QO39oFyDL3Ag5mORVPR_8ivUXwpMCgmlkgnY0gmlwhKwSNYuKbXVsdGlhZGRyc5YACASsEjWLBm-xAAoErBI1iwZvst0DgnJzhQADAQAAiXNlY3AyNTZrMaEDh8_mDI_VNM2KAIHvLlzZM5W2noNhlQH49FdGdHwLg5mDdGNwgm-xg3VkcIJvs4V3YWt1Mgk"}'
2025-02-08 04:03:17.563 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:03:17.569 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:03:17.569 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-08_04-03-16__d2afcadc-8180-45d8-8610-f564cc31aa56__wakuorg_nwaku:latest.log
2025-02-08 04:03:17.570 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:03:17.570 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:03:17.571 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:03:17.571 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.206.77
2025-02-08 04:03:17.571 DEBUG [src.node.docker_mananger] Generated ports ['45390', '45391', '45392', '45393', '45394']
2025-02-08 04:03:17.571 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:03:17.572 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:03:17.572 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:03:17.572 DEBUG [src.node.docker_mananger] docker run -i -t -p 45390:45390 -p 45391:45391 -p 45392:45392 -p 45393:45393 -p 45394:45394 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45392 --rest-port=45390 --tcp-port=45391 --discv5-udp-port=45393 --rest-address=0.0.0.0 --nat=extip:172.18.206.77 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e12b5bb8b112ac2d59dbde558dc34aec13cccfbcb5faa78f6e5fe5eaa1add0ea --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45394 --metrics-logging=true --lightpush=false --relay=true
2025-02-08 04:03:17.785 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.206.77 waku b5720276a6aa5c31dc26fed9c4be499b97adb87b9a0989b2650cfac1295c9067
2025-02-08 04:03:17.831 DEBUG [src.node.docker_mananger] Container started with ID b5720276a6aa. Setting up logs at ./log/docker/receiving_node2_2025-02-08_04-03-16__d2afcadc-8180-45d8-8610-f564cc31aa56__wakuorg_nwaku:latest.log
2025-02-08 04:03:17.832 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 45390
2025-02-08 04:03:17.832 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:03:18.832 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45390/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:18.835 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:03:18.835 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:03:18.835 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45390/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:18.837 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.206.77/tcp/45391/p2p/16Uiu2HAkw49oaFhyPGMaV9BB7a2H42ohi1YMuVFxUAJhK2wVVaEd","/ip4/172.18.206.77/tcp/45392/ws/p2p/16Uiu2HAkw49oaFhyPGMaV9BB7a2H42ohi1YMuVFxUAJhK2wVVaEd"],"enrUri":"enr:-L24QGzPbIEr6UZoifnO5pYlbieKQvmj2BuD6iAv_lWnbvD4dyJ8Vd0DtHVrn9_fsiZ8mZ7u28CDgbs5H3eobEpW1k4CgmlkgnY0gmlwhKwSzk2KbXVsdGlhZGRyc5YACASsEs5NBrFPAAoErBLOTQaxUN0DgnJzhQADAQAAiXNlY3AyNTZrMaECGDQOeKjuxb_bGNs7NzTKwNK8CNj_fuEylCZIKDQA39qDdGNwgrFPg3VkcIKxUYV3YWt1MgE"}'
2025-02-08 04:03:18.837 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:03:18.838 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:45390/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.53.139/tcp/28593/p2p/16Uiu2HAmMo9FpsiWjsH3cwb9dqdaWVB1n4rAPHEf7tjq4zVFpUs2"]'
2025-02-08 04:03:18.875 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:18.886 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:03:18.887 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-08_04-03-16__d2afcadc-8180-45d8-8610-f564cc31aa56__wakuorg_nwaku:latest.log
2025-02-08 04:03:18.887 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:03:18.887 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:03:18.888 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:03:18.888 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.245.90
2025-02-08 04:03:18.889 DEBUG [src.node.docker_mananger] Generated ports ['57295', '57296', '57297', '57298', '57299']
2025-02-08 04:03:18.889 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:03:18.889 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:03:18.889 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:03:18.889 DEBUG [src.node.docker_mananger] docker run -i -t -p 57295:57295 -p 57296:57296 -p 57297:57297 -p 57298:57298 -p 57299:57299 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57297 --rest-port=57295 --tcp-port=57296 --discv5-udp-port=57298 --rest-address=0.0.0.0 --nat=extip:172.18.245.90 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ba6130f8eaffa8bccbbbfb07b1f8a520cbf9842ec68debcaf017eafbfd2c8aca --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57299 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QAI2qUcCO_W8hfhg2bEqmRrMtVEwE2duwBNe2_C5JILXbPeNbqzfr4J8MR_QO39oFyDL3Ag5mORVPR_8ivUXwpMCgmlkgnY0gmlwhKwSNYuKbXVsdGlhZGRyc5YACASsEjWLBm-xAAoErBI1iwZvst0DgnJzhQADAQAAiXNlY3AyNTZrMaEDh8_mDI_VNM2KAIHvLlzZM5W2noNhlQH49FdGdHwLg5mDdGNwgm-xg3VkcIJvs4V3YWt1Mgk --lightpushnode=/ip4/172.18.53.139/tcp/28593/p2p/16Uiu2HAmMo9FpsiWjsH3cwb9dqdaWVB1n4rAPHEf7tjq4zVFpUs2 --lightpush=true --relay=false
2025-02-08 04:03:19.118 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.245.90 waku efe7721f683b782fa086ab1a678895b604e52e65b0f22189017aadc7b2cae37a
2025-02-08 04:03:19.169 DEBUG [src.node.docker_mananger] Container started with ID efe7721f683b. Setting up logs at ./log/docker/lightpush_node1_2025-02-08_04-03-16__d2afcadc-8180-45d8-8610-f564cc31aa56__wakuorg_nwaku:latest.log
2025-02-08 04:03:19.170 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 57295
2025-02-08 04:03:19.170 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:03:20.170 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57295/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:20.173 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:03:20.173 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:03:20.173 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57295/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:20.175 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.245.90/tcp/57296/p2p/16Uiu2HAmFeYV96HtjfA9LTh54VUnKLf7cBsswUeziMkkkNX6gNJg","/ip4/172.18.245.90/tcp/57297/ws/p2p/16Uiu2HAmFeYV96HtjfA9LTh54VUnKLf7cBsswUeziMkkkNX6gNJg"],"enrUri":"enr:-L24QBNXrJmF-dJmmhCwVEwGVkd09hxUBnVrLIgTA51Ip4ylB-n9InIKBssSG5vOWsdFDRPQ5PgsaQ8pNDjFZsvlKZACgmlkgnY0gmlwhKwS9VqKbXVsdGlhZGRyc5YACASsEvVaBt_QAAoErBL1Wgbf0d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDLHXQxoArcnx9ipP9ryIG6HuYhWfoOJeiY5o3QzdS1d2DdGNwgt_Qg3VkcILf0oV3YWt1Mgg"}'
2025-02-08 04:03:20.175 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:03:20.176 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57295/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.53.139/tcp/28593/p2p/16Uiu2HAmMo9FpsiWjsH3cwb9dqdaWVB1n4rAPHEf7tjq4zVFpUs2"]'
2025-02-08 04:03:20.214 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:20.214 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57295/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.206.77/tcp/45391/p2p/16Uiu2HAkw49oaFhyPGMaV9BB7a2H42ohi1YMuVFxUAJhK2wVVaEd"]'
2025-02-08 04:03:20.241 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:20.243 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28592/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-08 04:03:20.252 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:20.253 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:45390/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-08 04:03:20.259 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:20.263 DEBUG [src.steps.light_push] Lightpushing message
2025-02-08 04:03:20.264 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57295/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto"}}'
2025-02-08 04:03:20.276 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:20.276 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 04:03:20.376 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-08 04:03:20.377 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28592/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:20.379 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738987400268762112,"ephemeral":false}]'
2025-02-08 04:03:20.380 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-08 04:03:20.380 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45390/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:20.382 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738987400268762112,"ephemeral":false}]'
2025-02-08 04:03:20.386 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-08 04:03:20.387 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-08 04:03:20.387 DEBUG [src.node.waku_node] Stopping container with id 19280c0ebb09
2025-02-08 04:03:21.066 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:03:21.067 DEBUG [src.node.waku_node] Stopping container with id b5720276a6aa
2025-02-08 04:03:21.878 ERROR [src.node.docker_mananger] Max retries reached for container 19280c0ebb09. Exiting log stream.
2025-02-08 04:03:22.567 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:03:22.568 DEBUG [src.node.waku_node] Stopping container with id efe7721f683b
2025-02-08 04:03:23.379 ERROR [src.node.docker_mananger] Max retries reached for container b5720276a6aa. Exiting log stream.
2025-02-08 04:03:24.042 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:03:24.043 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-08 04:03:24.051 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 04:03:24.057 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 04:03:24.063 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
