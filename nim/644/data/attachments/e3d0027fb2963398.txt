2025-02-08 04:03:14.101 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-08 04:03:14.101 DEBUG [tests.conftest] Running test: test_light_push_with_extra_field with id: 2025-02-08_04-03-14__71a349a0-1158-4262-bbd2-c1898af5e30b
2025-02-08 04:03:14.101 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-08 04:03:14.102 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-08 04:03:14.108 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:03:14.108 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-08_04-03-14__71a349a0-1158-4262-bbd2-c1898af5e30b__wakuorg_nwaku:latest.log
2025-02-08 04:03:14.108 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:03:14.108 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:03:14.110 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:03:14.110 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.14.193
2025-02-08 04:03:14.110 DEBUG [src.node.docker_mananger] Generated ports ['11481', '11482', '11483', '11484', '11485']
2025-02-08 04:03:14.110 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:03:14.110 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:03:14.110 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:03:14.111 DEBUG [src.node.docker_mananger] docker run -i -t -p 11481:11481 -p 11482:11482 -p 11483:11483 -p 11484:11484 -p 11485:11485 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=11483 --rest-port=11481 --tcp-port=11482 --discv5-udp-port=11484 --rest-address=0.0.0.0 --nat=extip:172.18.14.193 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7ea9ce1df412c5fea1e17cb104dd6d4bcaca7bfa4dc125ecc245ef5ebd6bf587 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=11485 --metrics-logging=true --lightpush=true --relay=true
2025-02-08 04:03:14.333 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.14.193 waku 9b651db7ddd2e754f239fd390c2ecad28512828f017ba8113e3f16fce8f74ed3
2025-02-08 04:03:14.378 DEBUG [src.node.docker_mananger] Container started with ID 9b651db7ddd2. Setting up logs at ./log/docker/receiving_node1_2025-02-08_04-03-14__71a349a0-1158-4262-bbd2-c1898af5e30b__wakuorg_nwaku:latest.log
2025-02-08 04:03:14.379 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 11481
2025-02-08 04:03:14.380 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:03:14.908 ERROR [src.node.docker_mananger] Max retries reached for container a72f2550de8b. Exiting log stream.
2025-02-08 04:03:15.380 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11481/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:15.383 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:03:15.384 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:03:15.384 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11481/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:15.386 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.14.193/tcp/11482/p2p/16Uiu2HAmBZgX6HLWwsCwGcM2W8jGg2DbQcmPPNhHcC6M9v5VZr8E","/ip4/172.18.14.193/tcp/11483/ws/p2p/16Uiu2HAmBZgX6HLWwsCwGcM2W8jGg2DbQcmPPNhHcC6M9v5VZr8E"],"enrUri":"enr:-L24QCuua7zzgMDYZX0v9zDeoc6gRU11VldKenUnMVXkOWxgO1Hda33A6WMjR65t9VFw5fLlrq6-lIq_79fOJsMIXiUCgmlkgnY0gmlwhKwSDsGKbXVsdGlhZGRyc5YACASsEg7BBizaAAoErBIOwQYs290DgnJzhQADAQAAiXNlY3AyNTZrMaEC78g_WQnG0oa3PTDNFLWH7_x05hK41RDABEP8SpiUiAeDdGNwgizag3VkcIIs3IV3YWt1Mgk"}'
2025-02-08 04:03:15.386 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:03:15.393 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:03:15.393 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-08_04-03-14__71a349a0-1158-4262-bbd2-c1898af5e30b__wakuorg_nwaku:latest.log
2025-02-08 04:03:15.393 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:03:15.393 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:03:15.395 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:03:15.395 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.0.68
2025-02-08 04:03:15.395 DEBUG [src.node.docker_mananger] Generated ports ['11311', '11312', '11313', '11314', '11315']
2025-02-08 04:03:15.395 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:03:15.395 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:03:15.396 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:03:15.396 DEBUG [src.node.docker_mananger] docker run -i -t -p 11311:11311 -p 11312:11312 -p 11313:11313 -p 11314:11314 -p 11315:11315 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=11313 --rest-port=11311 --tcp-port=11312 --discv5-udp-port=11314 --rest-address=0.0.0.0 --nat=extip:172.18.0.68 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b1dda2adfd1eaf50dc89fd2fa9be3fe20b2c4f7040b2a51aa41a666420d1ea37 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=11315 --metrics-logging=true --lightpush=false --relay=true
2025-02-08 04:03:15.620 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.0.68 waku 5660ca48947e6833068c4fa664e92d22d836d391ff15b9ff988f6c8457917d19
2025-02-08 04:03:15.666 DEBUG [src.node.docker_mananger] Container started with ID 5660ca48947e. Setting up logs at ./log/docker/receiving_node2_2025-02-08_04-03-14__71a349a0-1158-4262-bbd2-c1898af5e30b__wakuorg_nwaku:latest.log
2025-02-08 04:03:15.667 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 11311
2025-02-08 04:03:15.667 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:03:16.667 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11311/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:16.670 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:03:16.671 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:03:16.671 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11311/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:16.673 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.0.68/tcp/11312/p2p/16Uiu2HAmNAer9aTYhyMUKQ3y43qJgS2cQwsC6wHA6nDetZbV56EU","/ip4/172.18.0.68/tcp/11313/ws/p2p/16Uiu2HAmNAer9aTYhyMUKQ3y43qJgS2cQwsC6wHA6nDetZbV56EU"],"enrUri":"enr:-L24QHt8YDODJA8Js6Q3Awa1g-t8f1MGq_kNckhhiFmkYJ-yde71Wy_DhobFMvLbrRKqmcnBEwhSQ-qlL9ESZIkkL5kCgmlkgnY0gmlwhKwSAESKbXVsdGlhZGRyc5YACASsEgBEBiwwAAoErBIARAYsMd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDjVKOHXHJOuNkVGBiUnM3Gzaa22LWJ1n7lmO5VUf8IuGDdGNwgiwwg3VkcIIsMoV3YWt1MgE"}'
2025-02-08 04:03:16.673 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:03:16.673 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11311/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.14.193/tcp/11482/p2p/16Uiu2HAmBZgX6HLWwsCwGcM2W8jGg2DbQcmPPNhHcC6M9v5VZr8E"]'
2025-02-08 04:03:16.713 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:16.722 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:03:16.722 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-08_04-03-14__71a349a0-1158-4262-bbd2-c1898af5e30b__wakuorg_nwaku:latest.log
2025-02-08 04:03:16.722 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:03:16.722 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:03:16.724 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:03:16.724 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.197.227
2025-02-08 04:03:16.724 DEBUG [src.node.docker_mananger] Generated ports ['35323', '35324', '35325', '35326', '35327']
2025-02-08 04:03:16.724 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:03:16.724 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:03:16.724 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:03:16.724 DEBUG [src.node.docker_mananger] docker run -i -t -p 35323:35323 -p 35324:35324 -p 35325:35325 -p 35326:35326 -p 35327:35327 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=35325 --rest-port=35323 --tcp-port=35324 --discv5-udp-port=35326 --rest-address=0.0.0.0 --nat=extip:172.18.197.227 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=aae2baeac7eddf8f387bcddbcd273b353dd4bb4c621c7a20cfcefddeb43a552c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=35327 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QCuua7zzgMDYZX0v9zDeoc6gRU11VldKenUnMVXkOWxgO1Hda33A6WMjR65t9VFw5fLlrq6-lIq_79fOJsMIXiUCgmlkgnY0gmlwhKwSDsGKbXVsdGlhZGRyc5YACASsEg7BBizaAAoErBIOwQYs290DgnJzhQADAQAAiXNlY3AyNTZrMaEC78g_WQnG0oa3PTDNFLWH7_x05hK41RDABEP8SpiUiAeDdGNwgizag3VkcIIs3IV3YWt1Mgk --lightpushnode=/ip4/172.18.14.193/tcp/11482/p2p/16Uiu2HAmBZgX6HLWwsCwGcM2W8jGg2DbQcmPPNhHcC6M9v5VZr8E --lightpush=true --relay=false
2025-02-08 04:03:16.957 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.197.227 waku 050cc2c71df6e79890e0dcfec5fac2859071f33488501639dd2825803da54107
2025-02-08 04:03:17.004 DEBUG [src.node.docker_mananger] Container started with ID 050cc2c71df6. Setting up logs at ./log/docker/lightpush_node1_2025-02-08_04-03-14__71a349a0-1158-4262-bbd2-c1898af5e30b__wakuorg_nwaku:latest.log
2025-02-08 04:03:17.005 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 35323
2025-02-08 04:03:17.005 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:03:18.005 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35323/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:18.008 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:03:18.008 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:03:18.009 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35323/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:18.011 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.197.227/tcp/35324/p2p/16Uiu2HAm1ZjGPwMZjd2fxfggEfa1cHtdaf6gC1m4TNNmfZrQDqjD","/ip4/172.18.197.227/tcp/35325/ws/p2p/16Uiu2HAm1ZjGPwMZjd2fxfggEfa1cHtdaf6gC1m4TNNmfZrQDqjD"],"enrUri":"enr:-L24QHpSRLjK6VhHFgXI4BsCWOez0fuJApbVOz_PN5as8Q0xGWficMyZzf5oAxeiaLaFJTBJI_tuoakfKEBPPTLTEVkCgmlkgnY0gmlwhKwSxeOKbXVsdGlhZGRyc5YACASsEsXjBon8AAoErBLF4waJ_d0DgnJzhQADAQAAiXNlY3AyNTZrMaECWzZ72wPEBLRi84zJ7hyX6gaQD_-PvpMMt8jyafiWg0CDdGNwgon8g3VkcIKJ_oV3YWt1Mgg"}'
2025-02-08 04:03:18.011 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:03:18.011 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35323/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.14.193/tcp/11482/p2p/16Uiu2HAmBZgX6HLWwsCwGcM2W8jGg2DbQcmPPNhHcC6M9v5VZr8E"]'
2025-02-08 04:03:18.048 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:18.051 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35323/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.0.68/tcp/11312/p2p/16Uiu2HAmNAer9aTYhyMUKQ3y43qJgS2cQwsC6wHA6nDetZbV56EU"]'
2025-02-08 04:03:18.076 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:18.076 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11481/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-08 04:03:18.085 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:18.085 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11311/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-08 04:03:18.090 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:18.093 DEBUG [src.steps.light_push] Lightpushing message
2025-02-08 04:03:18.094 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35323/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738987398093178624, "extraField": "extraValue"}}'
2025-02-08 04:03:18.098 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:35323/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
2025-02-08 04:03:18.100 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-08 04:03:18.101 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-08 04:03:18.101 DEBUG [src.node.waku_node] Stopping container with id 9b651db7ddd2
2025-02-08 04:03:18.879 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:03:18.879 DEBUG [src.node.waku_node] Stopping container with id 5660ca48947e
2025-02-08 04:03:19.693 ERROR [src.node.docker_mananger] Max retries reached for container 9b651db7ddd2. Exiting log stream.
2025-02-08 04:03:20.374 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:03:20.375 DEBUG [src.node.waku_node] Stopping container with id 050cc2c71df6
2025-02-08 04:03:21.210 ERROR [src.node.docker_mananger] Max retries reached for container 5660ca48947e. Exiting log stream.
2025-02-08 04:03:21.884 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:03:21.885 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-08 04:03:21.892 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 04:03:21.904 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 04:03:21.909 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
