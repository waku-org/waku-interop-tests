2025-02-08 04:03:35.407 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-08 04:03:35.407 DEBUG [tests.conftest] Running test: test_light_push_on_non_subscribed_pubsub_topic with id: 2025-02-08_04-03-35__c1709bad-fd15-475d-8712-805f2c692448
2025-02-08 04:03:35.408 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-08 04:03:35.408 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-08 04:03:35.414 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:03:35.414 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-08_04-03-35__c1709bad-fd15-475d-8712-805f2c692448__wakuorg_nwaku:latest.log
2025-02-08 04:03:35.414 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:03:35.414 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:03:35.416 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:03:35.416 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.38.221
2025-02-08 04:03:35.416 DEBUG [src.node.docker_mananger] Generated ports ['41322', '41323', '41324', '41325', '41326']
2025-02-08 04:03:35.416 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:03:35.416 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:03:35.416 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:03:35.416 DEBUG [src.node.docker_mananger] docker run -i -t -p 41322:41322 -p 41323:41323 -p 41324:41324 -p 41325:41325 -p 41326:41326 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=41324 --rest-port=41322 --tcp-port=41323 --discv5-udp-port=41325 --rest-address=0.0.0.0 --nat=extip:172.18.38.221 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9ab787acbc6159ad5cca26a8ccfdbdb41b46ef03efdb93b525b14f04cbaf8fc4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=41326 --metrics-logging=true --lightpush=true --relay=true
2025-02-08 04:03:35.654 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.38.221 waku bbc0cff3a515acdeb160a2cf316a81e7e09f26cca926e91268ae3890f7ec8c06
2025-02-08 04:03:35.702 DEBUG [src.node.docker_mananger] Container started with ID bbc0cff3a515. Setting up logs at ./log/docker/receiving_node1_2025-02-08_04-03-35__c1709bad-fd15-475d-8712-805f2c692448__wakuorg_nwaku:latest.log
2025-02-08 04:03:35.702 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 41322
2025-02-08 04:03:35.702 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:03:36.209 ERROR [src.node.docker_mananger] Max retries reached for container 6ee9bf2a81c5. Exiting log stream.
2025-02-08 04:03:36.703 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:41322/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:36.706 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:03:36.706 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:03:36.706 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:41322/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:36.709 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.38.221/tcp/41323/p2p/16Uiu2HAm181uuDU5mXa3BykS34x3e1L1Qo6Meo7vXB44HmmoiHTL","/ip4/172.18.38.221/tcp/41324/ws/p2p/16Uiu2HAm181uuDU5mXa3BykS34x3e1L1Qo6Meo7vXB44HmmoiHTL"],"enrUri":"enr:-L24QNru51RoWQbgvaPfDiq8yONPgV4yUjYbzgHr7pngOB5pXB8U4PLI5U1RpDHehh51zwHg4XzrRwUjkqKooECDyxECgmlkgnY0gmlwhKwSJt2KbXVsdGlhZGRyc5YACASsEibdBqFrAAoErBIm3QahbN0DgnJzhQADAQAAiXNlY3AyNTZrMaECVKA0hvIuZfNsnPNkMLnIkwXuVNFveI9YzhYbeKZy7P-DdGNwgqFrg3VkcIKhbYV3YWt1Mgk"}'
2025-02-08 04:03:36.709 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:03:36.715 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:03:36.716 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-08_04-03-35__c1709bad-fd15-475d-8712-805f2c692448__wakuorg_nwaku:latest.log
2025-02-08 04:03:36.716 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:03:36.716 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:03:36.717 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:03:36.717 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.154.82
2025-02-08 04:03:36.717 DEBUG [src.node.docker_mananger] Generated ports ['28924', '28925', '28926', '28927', '28928']
2025-02-08 04:03:36.718 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:03:36.718 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:03:36.718 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:03:36.718 DEBUG [src.node.docker_mananger] docker run -i -t -p 28924:28924 -p 28925:28925 -p 28926:28926 -p 28927:28927 -p 28928:28928 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28926 --rest-port=28924 --tcp-port=28925 --discv5-udp-port=28927 --rest-address=0.0.0.0 --nat=extip:172.18.154.82 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f4b4bb3a5844fbbc379f5a8a5aeb72c1ce6fe2dd0c7969ddb14b28f2bbb7e595 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28928 --metrics-logging=true --lightpush=false --relay=true
2025-02-08 04:03:36.937 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.154.82 waku 49d15c42c27f686a2e3f8dc054687d2a80959c2fd952636ad4b205924528a49b
2025-02-08 04:03:36.984 DEBUG [src.node.docker_mananger] Container started with ID 49d15c42c27f. Setting up logs at ./log/docker/receiving_node2_2025-02-08_04-03-35__c1709bad-fd15-475d-8712-805f2c692448__wakuorg_nwaku:latest.log
2025-02-08 04:03:36.985 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 28924
2025-02-08 04:03:36.985 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:03:37.985 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28924/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:37.988 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:03:37.988 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:03:37.988 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28924/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:37.990 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.154.82/tcp/28925/p2p/16Uiu2HAmUeZFbvDdu84FVWUU5hgHtZSe34q4FbshyQzwqDKBuWEi","/ip4/172.18.154.82/tcp/28926/ws/p2p/16Uiu2HAmUeZFbvDdu84FVWUU5hgHtZSe34q4FbshyQzwqDKBuWEi"],"enrUri":"enr:-L24QHaXJoZCuZAWG5-OzFFNqXnjl5pc0KZcrl77qOhM4mC_IdMxib9RY8EZnCKRENgaIWYAXbnI7QdJxbxVN5A3GmICgmlkgnY0gmlwhKwSmlKKbXVsdGlhZGRyc5YACASsEppSBnD9AAoErBKaUgZw_t0DgnJzhQADAQAAiXNlY3AyNTZrMaED7Z6cw9myYe8ZsB5FZ2MBdTSsbo1gyd0KHe2T-GFWdy-DdGNwgnD9g3VkcIJw_4V3YWt1MgE"}'
2025-02-08 04:03:37.991 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:03:37.991 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28924/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.38.221/tcp/41323/p2p/16Uiu2HAm181uuDU5mXa3BykS34x3e1L1Qo6Meo7vXB44HmmoiHTL"]'
2025-02-08 04:03:38.029 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:38.039 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:03:38.039 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-08_04-03-35__c1709bad-fd15-475d-8712-805f2c692448__wakuorg_nwaku:latest.log
2025-02-08 04:03:38.040 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:03:38.040 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:03:38.041 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:03:38.041 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.226.94
2025-02-08 04:03:38.042 DEBUG [src.node.docker_mananger] Generated ports ['22273', '22274', '22275', '22276', '22277']
2025-02-08 04:03:38.042 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:03:38.042 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:03:38.042 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:03:38.042 DEBUG [src.node.docker_mananger] docker run -i -t -p 22273:22273 -p 22274:22274 -p 22275:22275 -p 22276:22276 -p 22277:22277 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22275 --rest-port=22273 --tcp-port=22274 --discv5-udp-port=22276 --rest-address=0.0.0.0 --nat=extip:172.18.226.94 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=af0f2602acbce3f75a9af7a2f2d1041dfdeaeabdf6bb39f11d39f39c8764a337 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22277 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QNru51RoWQbgvaPfDiq8yONPgV4yUjYbzgHr7pngOB5pXB8U4PLI5U1RpDHehh51zwHg4XzrRwUjkqKooECDyxECgmlkgnY0gmlwhKwSJt2KbXVsdGlhZGRyc5YACASsEibdBqFrAAoErBIm3QahbN0DgnJzhQADAQAAiXNlY3AyNTZrMaECVKA0hvIuZfNsnPNkMLnIkwXuVNFveI9YzhYbeKZy7P-DdGNwgqFrg3VkcIKhbYV3YWt1Mgk --lightpushnode=/ip4/172.18.38.221/tcp/41323/p2p/16Uiu2HAm181uuDU5mXa3BykS34x3e1L1Qo6Meo7vXB44HmmoiHTL --lightpush=true --relay=false
2025-02-08 04:03:38.277 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.226.94 waku 2fc6a3ffabb7810b2fa42242871b27441446d654f26b521329be92654de276a1
2025-02-08 04:03:38.326 DEBUG [src.node.docker_mananger] Container started with ID 2fc6a3ffabb7. Setting up logs at ./log/docker/lightpush_node1_2025-02-08_04-03-35__c1709bad-fd15-475d-8712-805f2c692448__wakuorg_nwaku:latest.log
2025-02-08 04:03:38.327 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 22273
2025-02-08 04:03:38.327 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:03:39.327 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22273/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:39.330 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:03:39.331 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:03:39.331 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22273/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:39.333 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.226.94/tcp/22274/p2p/16Uiu2HAmDtAjEE3MqbbS57X8ZJnC21kDV1pHxPMmidYYb7gtSz4C","/ip4/172.18.226.94/tcp/22275/ws/p2p/16Uiu2HAmDtAjEE3MqbbS57X8ZJnC21kDV1pHxPMmidYYb7gtSz4C"],"enrUri":"enr:-L24QPhQxIuwki0gVFJNmeEeB1fp9nNUYguwoV8POFrNoXGZIEMVnNfTb848kkDoB7p6ypt7ZMfMPhBEaYUePel_XlECgmlkgnY0gmlwhKwS4l6KbXVsdGlhZGRyc5YACASsEuJeBlcCAAoErBLiXgZXA90DgnJzhQADAQAAiXNlY3AyNTZrMaEDEjv44KZLT5ZLN0VIRGljIj7iTKWtVEf6iRxlmR7BiLWDdGNwglcCg3VkcIJXBIV3YWt1Mgg"}'
2025-02-08 04:03:39.333 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:03:39.334 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22273/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.38.221/tcp/41323/p2p/16Uiu2HAm181uuDU5mXa3BykS34x3e1L1Qo6Meo7vXB44HmmoiHTL"]'
2025-02-08 04:03:39.373 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:39.375 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22273/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.154.82/tcp/28925/p2p/16Uiu2HAmUeZFbvDdu84FVWUU5hgHtZSe34q4FbshyQzwqDKBuWEi"]'
2025-02-08 04:03:39.411 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:39.413 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:41322/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-08 04:03:39.420 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:39.421 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28924/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-08 04:03:39.427 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:39.429 DEBUG [src.steps.light_push] Lightpushing message
2025-02-08 04:03:39.430 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22273/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738987419429585664}}'
2025-02-08 04:03:39.438 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:22273/lightpush/v1/message. Response content: b'Failed to request a message push: not_published_to_any_peer'
2025-02-08 04:03:39.440 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-08 04:03:39.441 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-08 04:03:39.441 DEBUG [src.node.waku_node] Stopping container with id bbc0cff3a515
2025-02-08 04:03:40.158 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:03:40.160 DEBUG [src.node.waku_node] Stopping container with id 49d15c42c27f
2025-02-08 04:03:40.970 ERROR [src.node.docker_mananger] Max retries reached for container bbc0cff3a515. Exiting log stream.
2025-02-08 04:03:41.666 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:03:41.666 DEBUG [src.node.waku_node] Stopping container with id 2fc6a3ffabb7
2025-02-08 04:03:42.501 ERROR [src.node.docker_mananger] Max retries reached for container 49d15c42c27f. Exiting log stream.
2025-02-08 04:03:43.179 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:03:43.180 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-08 04:03:43.186 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 04:03:43.198 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 04:03:43.204 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
