2025-02-08 04:02:09.865 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-08 04:02:09.866 DEBUG [tests.conftest] Running test: test_filter_node_not_connected_directly_to_relaying_node with id: 2025-02-08_04-02-09__280b49ab-6c2a-46f7-8c74-05a2a376966a
2025-02-08 04:02:09.866 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-08 04:02:09.866 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-08 04:02:09.867 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-08 04:02:09.875 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:02:09.875 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-08_04-02-09__280b49ab-6c2a-46f7-8c74-05a2a376966a__wakuorg_nwaku:latest.log
2025-02-08 04:02:09.880 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:02:09.881 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-08_04-02-09__280b49ab-6c2a-46f7-8c74-05a2a376966a__wakuorg_nwaku:latest.log
2025-02-08 04:02:09.886 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:02:09.886 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node3_2025-02-08_04-02-09__280b49ab-6c2a-46f7-8c74-05a2a376966a__wakuorg_nwaku:latest.log
2025-02-08 04:02:09.886 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-08 04:02:09.887 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-08 04:02:09.887 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:02:09.888 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:02:09.952 DEBUG [src.node.docker_mananger] Network waku created
2025-02-08 04:02:09.952 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.148.180
2025-02-08 04:02:09.952 DEBUG [src.node.docker_mananger] Generated ports ['32828', '32829', '32830', '32831', '32832']
2025-02-08 04:02:09.952 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:02:09.952 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:02:09.953 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:02:09.953 DEBUG [src.node.docker_mananger] docker run -i -t -p 32828:32828 -p 32829:32829 -p 32830:32830 -p 32831:32831 -p 32832:32832 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32830 --rest-port=32828 --tcp-port=32829 --discv5-udp-port=32831 --rest-address=0.0.0.0 --nat=extip:172.18.148.180 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fa7af029787c7a4cd3e6bdda23f61be29a46fa2932defb6eca8a299f655decdf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32832 --metrics-logging=true --filter=true --relay=true
2025-02-08 04:02:12.190 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.148.180 waku 76d504164956bd3cd0ff200ea33405ab0408691fe274fcc28a5df14f98d192fe
2025-02-08 04:02:12.241 DEBUG [src.node.docker_mananger] Container started with ID 76d504164956. Setting up logs at ./log/docker/node1_2025-02-08_04-02-09__280b49ab-6c2a-46f7-8c74-05a2a376966a__wakuorg_nwaku:latest.log
2025-02-08 04:02:12.242 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 32828
2025-02-08 04:02:12.242 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:02:13.243 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32828/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:02:13.246 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:02:13.246 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:02:13.246 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32828/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:02:13.248 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.148.180/tcp/32829/p2p/16Uiu2HAmLrRLaa1B9kW7UuWVonAXdqeDJqAztrJt9nZiPDocFFJK","/ip4/172.18.148.180/tcp/32830/ws/p2p/16Uiu2HAmLrRLaa1B9kW7UuWVonAXdqeDJqAztrJt9nZiPDocFFJK"],"enrUri":"enr:-L24QBDq5eZrpRdqCtxK1X-35ZmfPuEdjZ2gO2NUZsTGxNXmXbNnCpIHUotpvhpeg8ikySPPiCB8AQ9TXOrh4Qv1t3ICgmlkgnY0gmlwhKwSlLSKbXVsdGlhZGRyc5YACASsEpS0BoA9AAoErBKUtAaAPt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDecsjV3-DB1B7I3Utl_XQLp8TSanmNjTvsfynY44W1QSDdGNwgoA9g3VkcIKAP4V3YWt1MgU"}'
2025-02-08 04:02:13.249 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:02:13.249 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:02:13.249 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:02:13.250 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:02:13.251 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.30.14
2025-02-08 04:02:13.251 DEBUG [src.node.docker_mananger] Generated ports ['26948', '26949', '26950', '26951', '26952']
2025-02-08 04:02:13.251 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:02:13.251 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:02:13.251 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:02:13.251 DEBUG [src.node.docker_mananger] docker run -i -t -p 26948:26948 -p 26949:26949 -p 26950:26950 -p 26951:26951 -p 26952:26952 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26950 --rest-port=26948 --tcp-port=26949 --discv5-udp-port=26951 --rest-address=0.0.0.0 --nat=extip:172.18.30.14 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=634a43e3d9da112ed19dadef7da8b0d233d9bedfddbef6a54fcc3384f9a213cd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26952 --metrics-logging=true --filter=true --relay=true --discv5-bootstrap-node=enr:-L24QBDq5eZrpRdqCtxK1X-35ZmfPuEdjZ2gO2NUZsTGxNXmXbNnCpIHUotpvhpeg8ikySPPiCB8AQ9TXOrh4Qv1t3ICgmlkgnY0gmlwhKwSlLSKbXVsdGlhZGRyc5YACASsEpS0BoA9AAoErBKUtAaAPt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDecsjV3-DB1B7I3Utl_XQLp8TSanmNjTvsfynY44W1QSDdGNwgoA9g3VkcIKAP4V3YWt1MgU
2025-02-08 04:02:13.479 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.30.14 waku d0c99dc6c353dea74cc6ef1555d3c05c1f607e419640bb6db352a18165f383ac
2025-02-08 04:02:13.527 DEBUG [src.node.docker_mananger] Container started with ID d0c99dc6c353. Setting up logs at ./log/docker/node2_2025-02-08_04-02-09__280b49ab-6c2a-46f7-8c74-05a2a376966a__wakuorg_nwaku:latest.log
2025-02-08 04:02:13.528 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 26948
2025-02-08 04:02:13.528 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:02:14.529 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26948/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:02:14.538 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:02:14.541 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:02:14.542 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26948/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:02:14.547 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.30.14/tcp/26949/p2p/16Uiu2HAmP1pfUz37GsAiZtnnHhKwL3SfeCFk8KJ39P1nRnRCqaq8","/ip4/172.18.30.14/tcp/26950/ws/p2p/16Uiu2HAmP1pfUz37GsAiZtnnHhKwL3SfeCFk8KJ39P1nRnRCqaq8"],"enrUri":"enr:-L24QNktOtlP4rKA2pXzNPBYe9xSsCTpvayFlyziKvFSxljPfza63qfUj28Q2ZTkA_9-tlzL0EkozhgY-qH2ebKTcYYCgmlkgnY0gmlwhKwSHg6KbXVsdGlhZGRyc5YACASsEh4OBmlFAAoErBIeDgZpRt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDmesdKFQ_vuhZNM3NDIdXfpCowwIYokhE9uZqNwRMNPuDdGNwgmlFg3VkcIJpR4V3YWt1MgU"}'
2025-02-08 04:02:14.547 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:02:14.549 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:02:14.549 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:02:14.552 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:02:14.552 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.32.61
2025-02-08 04:02:14.553 DEBUG [src.node.docker_mananger] Generated ports ['42628', '42629', '42630', '42631', '42632']
2025-02-08 04:02:14.553 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:02:14.553 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:02:14.553 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:02:14.553 DEBUG [src.node.docker_mananger] docker run -i -t -p 42628:42628 -p 42629:42629 -p 42630:42630 -p 42631:42631 -p 42632:42632 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42630 --rest-port=42628 --tcp-port=42629 --discv5-udp-port=42631 --rest-address=0.0.0.0 --nat=extip:172.18.32.61 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=20f5ce620eeb87be2e918ddddba23cbe750c82bd2d3dff32c9ed13ae9fb8b1ef --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42632 --metrics-logging=true --relay=false --filternode=/ip4/172.18.30.14/tcp/26949/p2p/16Uiu2HAmP1pfUz37GsAiZtnnHhKwL3SfeCFk8KJ39P1nRnRCqaq8 --discv5-bootstrap-node=enr:-L24QNktOtlP4rKA2pXzNPBYe9xSsCTpvayFlyziKvFSxljPfza63qfUj28Q2ZTkA_9-tlzL0EkozhgY-qH2ebKTcYYCgmlkgnY0gmlwhKwSHg6KbXVsdGlhZGRyc5YACASsEh4OBmlFAAoErBIeDgZpRt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDmesdKFQ_vuhZNM3NDIdXfpCowwIYokhE9uZqNwRMNPuDdGNwgmlFg3VkcIJpR4V3YWt1MgU
2025-02-08 04:02:14.786 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.32.61 waku f01023dce1cb7cc4e8b340f6a8fc836f15398381d00ae37fd091d2d9d7e19383
2025-02-08 04:02:14.828 DEBUG [src.node.docker_mananger] Container started with ID f01023dce1cb. Setting up logs at ./log/docker/node3_2025-02-08_04-02-09__280b49ab-6c2a-46f7-8c74-05a2a376966a__wakuorg_nwaku:latest.log
2025-02-08 04:02:14.828 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 42628
2025-02-08 04:02:14.828 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:02:15.829 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42628/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:02:15.831 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:02:15.832 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:02:15.832 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42628/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:02:15.834 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.32.61/tcp/42629/p2p/16Uiu2HAmQNwFvYEsWrQVc2DWmKFURGKP6GckeHF5zpXdk7mzzGct","/ip4/172.18.32.61/tcp/42630/ws/p2p/16Uiu2HAmQNwFvYEsWrQVc2DWmKFURGKP6GckeHF5zpXdk7mzzGct"],"enrUri":"enr:-L24QJ5nfGVZzW8lYUSt_pDKCc33BcRcjgU2mP52lz1e2FbcEFwy-MHDd-NTOk52laFa8dfSOVeHYTbJ_5LVIEHdp4gCgmlkgnY0gmlwhKwSID2KbXVsdGlhZGRyc5YACASsEiA9BqaFAAoErBIgPQamht0DgnJzhQADAQAAiXNlY3AyNTZrMaEDri90FV24qMx95ovkIXMNZzbc69yil3OAowCWh2eUPTWDdGNwgqaFg3VkcIKmh4V3YWt1MgA"}'
2025-02-08 04:02:15.834 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:02:15.834 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32828/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-08 04:02:15.839 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:02:15.839 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:26948/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-08 04:02:15.845 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:02:15.847 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42628/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-08 04:02:15.890 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
2025-02-08 04:02:15.892 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32828/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:02:15.897 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.30.14/tcp/26949/p2p/16Uiu2HAmP1pfUz37GsAiZtnnHhKwL3SfeCFk8KJ39P1nRnRCqaq8","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
2025-02-08 04:02:15.898 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26948/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:02:15.902 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.148.180/tcp/32829/p2p/16Uiu2HAmLrRLaa1B9kW7UuWVonAXdqeDJqAztrJt9nZiPDocFFJK","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"},{"multiaddr":"/ip4/172.18.32.61/tcp/42629/p2p/16Uiu2HAmQNwFvYEsWrQVc2DWmKFURGKP6GckeHF5zpXdk7mzzGct","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
2025-02-08 04:02:15.902 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42628/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:02:15.905 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.30.14/tcp/26949/p2p/16Uiu2HAmP1pfUz37GsAiZtnnHhKwL3SfeCFk8KJ39P1nRnRCqaq8","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
2025-02-08 04:02:15.905 DEBUG [src.libs.common] Sleeping for 30 seconds
2025-02-08 04:02:45.906 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32828/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:02:45.911 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:02:45.911 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:02:46.912 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-08 04:02:46.912 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42628/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:02:46.915 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1738987365906016256,"ephemeral":false}]'
2025-02-08 04:02:46.919 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-08 04:02:46.920 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-08 04:02:46.920 DEBUG [src.node.waku_node] Stopping container with id 76d504164956
2025-02-08 04:02:48.002 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:02:48.007 DEBUG [src.node.waku_node] Stopping container with id d0c99dc6c353
2025-02-08 04:02:48.819 ERROR [src.node.docker_mananger] Max retries reached for container 76d504164956. Exiting log stream.
2025-02-08 04:02:49.306 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:02:49.306 DEBUG [src.node.waku_node] Stopping container with id f01023dce1cb
2025-02-08 04:02:50.118 ERROR [src.node.docker_mananger] Max retries reached for container d0c99dc6c353. Exiting log stream.
2025-02-08 04:02:50.716 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:02:50.717 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-08 04:02:50.726 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 04:02:50.740 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 04:02:50.745 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
