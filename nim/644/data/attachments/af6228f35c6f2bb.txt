2025-02-08 04:07:24.989 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-08 04:07:24.989 DEBUG [tests.conftest] Running test: test_store_with_long_string_pubsub_topic with id: 2025-02-08_04-07-24__a2b8d4be-c715-4a68-8f6e-8f44b8060285
2025-02-08 04:07:24.989 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-08 04:07:24.989 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-08 04:07:24.990 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-08 04:07:24.996 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:07:24.996 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-08_04-07-24__a2b8d4be-c715-4a68-8f6e-8f44b8060285__wakuorg_nwaku:latest.log
2025-02-08 04:07:24.996 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:07:24.997 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:07:24.998 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:07:24.998 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.44.2
2025-02-08 04:07:24.998 DEBUG [src.node.docker_mananger] Generated ports ['17407', '17408', '17409', '17410', '17411']
2025-02-08 04:07:24.998 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:07:24.998 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:07:24.999 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:07:24.999 DEBUG [src.node.docker_mananger] docker run -i -t -p 17407:17407 -p 17408:17408 -p 17409:17409 -p 17410:17410 -p 17411:17411 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17409 --rest-port=17407 --tcp-port=17408 --discv5-udp-port=17410 --rest-address=0.0.0.0 --nat=extip:172.18.44.2 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4eddb117eed884e5c9182d960dec0f7c2f73ab8cb1afbb7d309edcffaa576ac6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17411 --metrics-logging=true --store=true --relay=true
2025-02-08 04:07:25.228 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.44.2 waku d803caadec6ff534d8419d8a2371227ca0dce379e007541a8534b3ad0979dc39
2025-02-08 04:07:25.279 DEBUG [src.node.docker_mananger] Container started with ID d803caadec6f. Setting up logs at ./log/docker/publishing_node1_2025-02-08_04-07-24__a2b8d4be-c715-4a68-8f6e-8f44b8060285__wakuorg_nwaku:latest.log
2025-02-08 04:07:25.280 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 17407
2025-02-08 04:07:25.281 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:07:25.795 ERROR [src.node.docker_mananger] Max retries reached for container 93f97f823bbd. Exiting log stream.
2025-02-08 04:07:26.282 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17407/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:07:26.284 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:07:26.285 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:07:26.285 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17407/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:07:26.287 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.44.2/tcp/17408/p2p/16Uiu2HAmQCEzMvYDnPeEo4MJFBwKfPFJLDrcm5xEpjimWJkwGg3g","/ip4/172.18.44.2/tcp/17409/ws/p2p/16Uiu2HAmQCEzMvYDnPeEo4MJFBwKfPFJLDrcm5xEpjimWJkwGg3g"],"enrUri":"enr:-L24QBKIJe0dAtmJIkLtB2ZdjUWZDzGx8KHOrvrZGHPzQhOVWplak2NyTg9Ximf8FB1sFvmRN2tHtI0hd8eZJFB9S78CgmlkgnY0gmlwhKwSLAKKbXVsdGlhZGRyc5YACASsEiwCBkQAAAoErBIsAgZEAd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDq3IdI_cxWcOZ7oP5MhI3TgERd41a59k_4qQuTiVarW-DdGNwgkQAg3VkcIJEAoV3YWt1MgM"}'
2025-02-08 04:07:26.287 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:07:26.294 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:07:26.294 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-08_04-07-24__a2b8d4be-c715-4a68-8f6e-8f44b8060285__wakuorg_nwaku:latest.log
2025-02-08 04:07:26.294 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:07:26.294 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:07:26.295 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:07:26.296 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.237.92
2025-02-08 04:07:26.296 DEBUG [src.node.docker_mananger] Generated ports ['12583', '12584', '12585', '12586', '12587']
2025-02-08 04:07:26.296 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:07:26.296 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:07:26.296 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:07:26.296 DEBUG [src.node.docker_mananger] docker run -i -t -p 12583:12583 -p 12584:12584 -p 12585:12585 -p 12586:12586 -p 12587:12587 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=12585 --rest-port=12583 --tcp-port=12584 --discv5-udp-port=12586 --rest-address=0.0.0.0 --nat=extip:172.18.237.92 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dfc2d8aebefe1a7ced9416e8c1401f13ac74edaf0e9d368ba9e016f1a883d63c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=12587 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QBKIJe0dAtmJIkLtB2ZdjUWZDzGx8KHOrvrZGHPzQhOVWplak2NyTg9Ximf8FB1sFvmRN2tHtI0hd8eZJFB9S78CgmlkgnY0gmlwhKwSLAKKbXVsdGlhZGRyc5YACASsEiwCBkQAAAoErBIsAgZEAd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDq3IdI_cxWcOZ7oP5MhI3TgERd41a59k_4qQuTiVarW-DdGNwgkQAg3VkcIJEAoV3YWt1MgM --storenode=/ip4/172.18.44.2/tcp/17408/p2p/16Uiu2HAmQCEzMvYDnPeEo4MJFBwKfPFJLDrcm5xEpjimWJkwGg3g --store=true --relay=true
2025-02-08 04:07:26.531 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.237.92 waku e79b73e5f77bd7a01d429267e0152a8ae7b890ed69de61d74840003978392f7d
2025-02-08 04:07:26.578 DEBUG [src.node.docker_mananger] Container started with ID e79b73e5f77b. Setting up logs at ./log/docker/store_node1_2025-02-08_04-07-24__a2b8d4be-c715-4a68-8f6e-8f44b8060285__wakuorg_nwaku:latest.log
2025-02-08 04:07:26.578 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 12583
2025-02-08 04:07:26.579 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:07:27.580 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:12583/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:07:27.584 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:07:27.584 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:07:27.584 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:12583/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:07:27.586 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.237.92/tcp/12584/p2p/16Uiu2HAkvUkeRGx2GWs2MvwWwatQuVpQZjLKZJ4HrWZcJnVE4asE","/ip4/172.18.237.92/tcp/12585/ws/p2p/16Uiu2HAkvUkeRGx2GWs2MvwWwatQuVpQZjLKZJ4HrWZcJnVE4asE"],"enrUri":"enr:-L24QC5r_wD44g6ktjmoUH-ziexmaIq_zKFh7YU6uyUZ5V1xdapoXu6nympz6kFPtlvH7E_pMZPCc4rx215_mRj8NgMCgmlkgnY0gmlwhKwS7VyKbXVsdGlhZGRyc5YACASsEu1cBjEoAAoErBLtXAYxKd0DgnJzhQADAQAAiXNlY3AyNTZrMaECD6W0hk6RBCYDL3MHUqC0jYh0uO1VjVxkbCwTi-CE_Y2DdGNwgjEog3VkcIIxKoV3YWt1MgM"}'
2025-02-08 04:07:27.587 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:07:27.587 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:12583/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.44.2/tcp/17408/p2p/16Uiu2HAmQCEzMvYDnPeEo4MJFBwKfPFJLDrcm5xEpjimWJkwGg3g"]'
2025-02-08 04:07:27.589 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:07:27.590 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17407/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-08 04:07:27.592 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:07:27.592 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:12583/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-08 04:07:27.594 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:07:27.595 DEBUG [src.steps.store] Relaying message
2025-02-08 04:07:27.595 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17407/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:07:27.601 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:07:27.602 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-08 04:07:27.803 DEBUG [src.steps.store] Relaying message
2025-02-08 04:07:27.803 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17407/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:07:27.810 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:07:27.811 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-08 04:07:28.011 DEBUG [src.steps.store] Relaying message
2025-02-08 04:07:28.012 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17407/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:07:28.018 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:07:28.018 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-08 04:07:28.219 DEBUG [src.steps.store] Relaying message
2025-02-08 04:07:28.220 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17407/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:07:28.226 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:07:28.226 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-08 04:07:28.427 DEBUG [src.steps.store] Relaying message
2025-02-08 04:07:28.427 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17407/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:07:28.433 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:07:28.434 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-08 04:07:28.635 DEBUG [src.steps.store] Relaying message
2025-02-08 04:07:28.635 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17407/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:07:28.641 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:07:28.641 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-08 04:07:28.843 DEBUG [src.steps.store] Relaying message
2025-02-08 04:07:28.843 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17407/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:07:28.849 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:07:28.850 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-08 04:07:29.051 DEBUG [src.steps.store] Relaying message
2025-02-08 04:07:29.051 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17407/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:07:29.058 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:07:29.058 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-08 04:07:29.370 DEBUG [tests.store.test_topics] Trying to get stored msg with url topic size million 
2025-02-08 04:07:29.371 DEBUG [src.steps.store] Relaying message
2025-02-08 04:07:29.371 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17407/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:07:29.377 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:07:29.378 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-08 04:07:29.580 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-08 04:07:29.790 INFO [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2025-02-08 04:07:35.123 ERROR [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2025-02-08 04:07:35.127 ERROR [tests.store.test_topics] store request with very long pubsub topic wasn't accepted 
2025-02-08 04:07:35.130 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-08 04:07:35.131 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-08 04:07:35.132 DEBUG [src.node.waku_node] Stopping container with id d803caadec6f
2025-02-08 04:07:35.812 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:07:35.813 DEBUG [src.node.waku_node] Stopping container with id e79b73e5f77b
2025-02-08 04:07:36.646 ERROR [src.node.docker_mananger] Max retries reached for container d803caadec6f. Exiting log stream.
2025-02-08 04:07:36.970 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:07:36.971 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-08 04:07:36.984 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 04:07:36.990 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
