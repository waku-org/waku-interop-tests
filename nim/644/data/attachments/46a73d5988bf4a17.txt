2025-02-08 04:05:47.807 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-08 04:05:47.807 DEBUG [tests.conftest] Running test: test_relay_subscribe_with_multiple_overlapping_pubsub_topics with id: 2025-02-08_04-05-47__0e10fadf-5ad0-4562-91c2-219dd2b147fc
2025-02-08 04:05:47.807 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-08 04:05:47.807 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-08 04:05:47.808 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2025-02-08 04:05:47.816 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:05:47.816 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-08_04-05-47__0e10fadf-5ad0-4562-91c2-219dd2b147fc__wakuorg_nwaku:latest.log
2025-02-08 04:05:47.816 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:05:47.816 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:05:47.818 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:05:47.818 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.201.231
2025-02-08 04:05:47.818 DEBUG [src.node.docker_mananger] Generated ports ['47198', '47199', '47200', '47201', '47202']
2025-02-08 04:05:47.818 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:05:47.818 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:05:47.819 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:05:47.819 DEBUG [src.node.docker_mananger] docker run -i -t -p 47198:47198 -p 47199:47199 -p 47200:47200 -p 47201:47201 -p 47202:47202 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=47200 --rest-port=47198 --tcp-port=47199 --discv5-udp-port=47201 --rest-address=0.0.0.0 --nat=extip:172.18.201.231 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9c0e61a85735cdd3edb4d5f63be89c1f326dfdc0d87ef352ab27f99cf106da0f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=47202 --metrics-logging=true --relay=true
2025-02-08 04:05:48.051 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.201.231 waku 3920c8e87245a728c4942654c31f00477854bc3bb4c988e2f0ece77425880dbe
2025-02-08 04:05:48.097 DEBUG [src.node.docker_mananger] Container started with ID 3920c8e87245. Setting up logs at ./log/docker/node1_2025-02-08_04-05-47__0e10fadf-5ad0-4562-91c2-219dd2b147fc__wakuorg_nwaku:latest.log
2025-02-08 04:05:48.098 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 47198
2025-02-08 04:05:48.098 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:05:48.609 ERROR [src.node.docker_mananger] Max retries reached for container 16ed41bc9b3d. Exiting log stream.
2025-02-08 04:05:49.098 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47198/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:05:49.101 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:05:49.101 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:05:49.102 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47198/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:05:49.104 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.201.231/tcp/47199/p2p/16Uiu2HAm7A3qDX234uVj3dH9sFUSfFQpvegADdhEjZQAokoU8HUs","/ip4/172.18.201.231/tcp/47200/ws/p2p/16Uiu2HAm7A3qDX234uVj3dH9sFUSfFQpvegADdhEjZQAokoU8HUs"],"enrUri":"enr:-L24QI5seUEyK5SoQ6j3iJh8jyObocaGrEQaoNkh5CfnqpTUfw1FqyA4SwHrqrSP2xHqNKT4pZmNxDHDdka-rSFC53ECgmlkgnY0gmlwhKwSyeeKbXVsdGlhZGRyc5YACASsEsnnBrhfAAoErBLJ5wa4YN0DgnJzhQADAQAAiXNlY3AyNTZrMaECrkuoj9nC-2DzAAMD9jhN6ojHkan100q26OPfMcJZIdiDdGNwgrhfg3VkcIK4YYV3YWt1MgE"}'
2025-02-08 04:05:49.104 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:05:49.110 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:05:49.110 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-08_04-05-47__0e10fadf-5ad0-4562-91c2-219dd2b147fc__wakuorg_nwaku:latest.log
2025-02-08 04:05:49.111 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:05:49.111 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:05:49.112 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:05:49.112 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.70.45
2025-02-08 04:05:49.112 DEBUG [src.node.docker_mananger] Generated ports ['27539', '27540', '27541', '27542', '27543']
2025-02-08 04:05:49.112 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:05:49.113 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:05:49.113 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:05:49.113 DEBUG [src.node.docker_mananger] docker run -i -t -p 27539:27539 -p 27540:27540 -p 27541:27541 -p 27542:27542 -p 27543:27543 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27541 --rest-port=27539 --tcp-port=27540 --discv5-udp-port=27542 --rest-address=0.0.0.0 --nat=extip:172.18.70.45 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=edffc9b080b0db955329a27c4a8ac101f1c6b1c5e8bc0aeb2aa0b0cfdf20dde6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27543 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QI5seUEyK5SoQ6j3iJh8jyObocaGrEQaoNkh5CfnqpTUfw1FqyA4SwHrqrSP2xHqNKT4pZmNxDHDdka-rSFC53ECgmlkgnY0gmlwhKwSyeeKbXVsdGlhZGRyc5YACASsEsnnBrhfAAoErBLJ5wa4YN0DgnJzhQADAQAAiXNlY3AyNTZrMaECrkuoj9nC-2DzAAMD9jhN6ojHkan100q26OPfMcJZIdiDdGNwgrhfg3VkcIK4YYV3YWt1MgE
2025-02-08 04:05:49.343 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.70.45 waku 0a6b014116dd6201d2bdf65d792fbddf867e47adcabb162e629d90a9c2a1aa8b
2025-02-08 04:05:49.398 DEBUG [src.node.docker_mananger] Container started with ID 0a6b014116dd. Setting up logs at ./log/docker/node2_2025-02-08_04-05-47__0e10fadf-5ad0-4562-91c2-219dd2b147fc__wakuorg_nwaku:latest.log
2025-02-08 04:05:49.398 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 27539
2025-02-08 04:05:49.399 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:05:50.399 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27539/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:05:50.402 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:05:50.402 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:05:50.402 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27539/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:05:50.404 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.70.45/tcp/27540/p2p/16Uiu2HAkyiVJmVo7YJb16Xnakv1rCf2GmhTcfpha664TFU5N281g","/ip4/172.18.70.45/tcp/27541/ws/p2p/16Uiu2HAkyiVJmVo7YJb16Xnakv1rCf2GmhTcfpha664TFU5N281g"],"enrUri":"enr:-L24QMHyRmT4tpOCWdBvcnykOIOUJgAlEfBDcGAFRFnqvl4GUm0Fv20gQymclBUJi_72QFWWDsm8iWAKh40GM5DB6V0CgmlkgnY0gmlwhKwSRi2KbXVsdGlhZGRyc5YACASsEkYtBmuUAAoErBJGLQZrld0DgnJzhQADAQAAiXNlY3AyNTZrMaECP72NumVW5vYGcCZDlWk0RByIG4pqZVncNwWqDshLTtuDdGNwgmuUg3VkcIJrloV3YWt1MgE"}'
2025-02-08 04:05:50.404 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:05:50.405 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27539/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.201.231/tcp/47199/p2p/16Uiu2HAm7A3qDX234uVj3dH9sFUSfFQpvegADdhEjZQAokoU8HUs"]'
2025-02-08 04:05:50.407 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:05:50.408 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47198/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0", "/waku/2/rs/3/1", "/waku/2/rs/3/9"]'
2025-02-08 04:05:50.413 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:05:50.413 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27539/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0", "/waku/2/rs/3/1", "/waku/2/rs/3/9"]'
2025-02-08 04:05:50.422 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:05:50.422 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47198/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1", "/waku/2/rs/3/9", "/waku/2/rs/3/25"]'
2025-02-08 04:05:50.427 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:05:50.428 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27539/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1", "/waku/2/rs/3/9", "/waku/2/rs/3/25"]'
2025-02-08 04:05:50.434 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:05:50.434 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47198/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:05:50.441 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:05:50.441 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 04:05:50.542 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-08 04:05:50.543 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47198/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:05:50.547 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738987550434804736,"ephemeral":false}]'
2025-02-08 04:05:50.549 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-08 04:05:50.549 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27539/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:05:50.551 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738987550434804736,"ephemeral":false}]'
2025-02-08 04:05:50.553 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47198/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:05:50.558 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:05:50.558 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 04:05:50.658 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-08 04:05:50.659 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47198/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:05:50.661 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738987550553511936,"ephemeral":false}]'
2025-02-08 04:05:50.662 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-08 04:05:50.662 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27539/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:05:50.664 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738987550553511936,"ephemeral":false}]'
2025-02-08 04:05:50.666 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47198/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F9" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:05:50.670 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:05:50.670 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 04:05:50.770 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-08 04:05:50.770 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47198/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F9" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:05:50.773 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738987550666239488,"ephemeral":false}]'
2025-02-08 04:05:50.774 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-08 04:05:50.774 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27539/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F9" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:05:50.777 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738987550666239488,"ephemeral":false}]'
2025-02-08 04:05:50.778 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47198/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F25" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:05:50.783 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:05:50.783 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 04:05:50.883 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-08 04:05:50.883 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47198/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F25" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:05:50.886 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738987550778480128,"ephemeral":false}]'
2025-02-08 04:05:50.887 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-08 04:05:50.887 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27539/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F25" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:05:50.889 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738987550778480128,"ephemeral":false}]'
2025-02-08 04:05:50.892 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-08 04:05:50.893 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-08 04:05:50.893 DEBUG [src.node.waku_node] Stopping container with id 3920c8e87245
2025-02-08 04:05:51.602 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:05:51.602 DEBUG [src.node.waku_node] Stopping container with id 0a6b014116dd
2025-02-08 04:05:52.415 ERROR [src.node.docker_mananger] Max retries reached for container 3920c8e87245. Exiting log stream.
2025-02-08 04:05:53.099 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:05:53.101 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-08 04:05:53.107 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 04:05:53.113 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
