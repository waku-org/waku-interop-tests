2025-02-08 04:04:23.439 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-08 04:04:23.439 DEBUG [tests.conftest] Running test: test_unsubscribe_from_non_subscribed_content_topics with id: 2025-02-08_04-04-23__c74f1a15-34cd-44bb-b613-5087952e88bd
2025-02-08 04:04:23.440 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-08 04:04:23.440 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-08 04:04:23.440 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2025-02-08 04:04:23.447 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:04:23.447 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-08_04-04-23__c74f1a15-34cd-44bb-b613-5087952e88bd__wakuorg_nwaku:latest.log
2025-02-08 04:04:23.447 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:04:23.447 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:04:23.450 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:04:23.450 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.0.141
2025-02-08 04:04:23.450 DEBUG [src.node.docker_mananger] Generated ports ['37483', '37484', '37485', '37486', '37487']
2025-02-08 04:04:23.450 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:04:23.450 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:04:23.451 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:04:23.451 DEBUG [src.node.docker_mananger] docker run -i -t -p 37483:37483 -p 37484:37484 -p 37485:37485 -p 37486:37486 -p 37487:37487 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37485 --rest-port=37483 --tcp-port=37484 --discv5-udp-port=37486 --rest-address=0.0.0.0 --nat=extip:172.18.0.141 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=8c05eb5b799edaa36aad9ababfe2ddedd1727bffd32bca6cafaedec24dca7bfd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37487 --metrics-logging=true --relay=true --filter=true --content-topic=/myapp/1/latest/proto
2025-02-08 04:04:23.688 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.0.141 waku 78ec01c49fc308ad5f3e789b3d31e5622f4d7b061a72f1c793b72b0627b6e575
2025-02-08 04:04:23.737 DEBUG [src.node.docker_mananger] Container started with ID 78ec01c49fc3. Setting up logs at ./log/docker/node1_2025-02-08_04-04-23__c74f1a15-34cd-44bb-b613-5087952e88bd__wakuorg_nwaku:latest.log
2025-02-08 04:04:23.737 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 37483
2025-02-08 04:04:23.737 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:04:24.242 ERROR [src.node.docker_mananger] Max retries reached for container 99dfcad0f48b. Exiting log stream.
2025-02-08 04:04:24.738 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37483/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:24.741 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:04:24.741 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:04:24.741 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37483/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:24.743 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.0.141/tcp/37484/p2p/16Uiu2HAmMZfU9Jwwtjdb3e649da6aEw1wYkvTZrqr52gnyPV5GMV","/ip4/172.18.0.141/tcp/37485/ws/p2p/16Uiu2HAmMZfU9Jwwtjdb3e649da6aEw1wYkvTZrqr52gnyPV5GMV"],"enrUri":"enr:-L24QH4mX0nhbNRVWz1JVvJ6yBO_eqWPZCb9BvxsAbOPvAzWJZCWO3emv3-z6pQBcHdVgXEAvDTx4WiW6QykoX7GRlUCgmlkgnY0gmlwhKwSAI2KbXVsdGlhZGRyc5YACASsEgCNBpJsAAoErBIAjQaSbd0DgnJzhQACAQAAiXNlY3AyNTZrMaEDhFvttSUrjZJHC7Is82_aYNKTgGA0yDTpYyiXZYl3a2CDdGNwgpJsg3VkcIKSboV3YWt1MgU"}'
2025-02-08 04:04:24.744 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:04:24.750 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:04:24.750 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-08_04-04-23__c74f1a15-34cd-44bb-b613-5087952e88bd__wakuorg_nwaku:latest.log
2025-02-08 04:04:24.750 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:04:24.751 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:04:24.752 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:04:24.752 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.84.135
2025-02-08 04:04:24.752 DEBUG [src.node.docker_mananger] Generated ports ['1359', '1360', '1361', '1362', '1363']
2025-02-08 04:04:24.752 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:04:24.752 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:04:24.752 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:04:24.753 DEBUG [src.node.docker_mananger] docker run -i -t -p 1359:1359 -p 1360:1360 -p 1361:1361 -p 1362:1362 -p 1363:1363 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=1361 --rest-port=1359 --tcp-port=1360 --discv5-udp-port=1362 --rest-address=0.0.0.0 --nat=extip:172.18.84.135 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=0e9c181f53b28ad1aa9b097f32b53f7f8bfb9b6b841958d5dfacfac5e8faa020 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=1363 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QH4mX0nhbNRVWz1JVvJ6yBO_eqWPZCb9BvxsAbOPvAzWJZCWO3emv3-z6pQBcHdVgXEAvDTx4WiW6QykoX7GRlUCgmlkgnY0gmlwhKwSAI2KbXVsdGlhZGRyc5YACASsEgCNBpJsAAoErBIAjQaSbd0DgnJzhQACAQAAiXNlY3AyNTZrMaEDhFvttSUrjZJHC7Is82_aYNKTgGA0yDTpYyiXZYl3a2CDdGNwgpJsg3VkcIKSboV3YWt1MgU --content-topic=/myapp/1/latest/proto
2025-02-08 04:04:24.984 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.84.135 waku 36f61976315b35a9bac029fd75f8b200606b200dacc21a065d58fd887f8c6809
2025-02-08 04:04:25.029 DEBUG [src.node.docker_mananger] Container started with ID 36f61976315b. Setting up logs at ./log/docker/node2_2025-02-08_04-04-23__c74f1a15-34cd-44bb-b613-5087952e88bd__wakuorg_nwaku:latest.log
2025-02-08 04:04:25.030 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 1359
2025-02-08 04:04:25.030 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:04:26.031 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1359/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:26.043 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:04:26.044 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:04:26.044 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1359/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:26.053 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.84.135/tcp/1360/p2p/16Uiu2HAmA2D4rprTEs4msMs1BH8z8cGSJZEh3iUqhSsH3s993r1t","/ip4/172.18.84.135/tcp/1361/ws/p2p/16Uiu2HAmA2D4rprTEs4msMs1BH8z8cGSJZEh3iUqhSsH3s993r1t"],"enrUri":"enr:-L24QJN1oOgZJBGfCtoAmMBjmJHExFXUKd-Af2vZ_ud02g81PQCDSrP77D3QdY33ubJMARlrfBEKJDNRTtWkxJ5SUZ0CgmlkgnY0gmlwhKwSVIeKbXVsdGlhZGRyc5YACASsElSHBgVQAAoErBJUhwYFUd0DgnJzhQACAQAAiXNlY3AyNTZrMaEC2NyD2snx8goLXcNlAo8IKYlqWaLXFnAXbfcK7Pn1o2eDdGNwggVQg3VkcIIFUoV3YWt1MgE"}'
2025-02-08 04:04:26.053 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:04:26.054 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:1359/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.0.141/tcp/37484/p2p/16Uiu2HAmMZfU9Jwwtjdb3e649da6aEw1wYkvTZrqr52gnyPV5GMV"]'
2025-02-08 04:04:26.060 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:26.061 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:37483/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto", "/waku/2/content/test.js", "/app/22/sometopic/someencoding", "/toychat/2/huilong/proto", "/statusim/1/community/cbor", "/app/27/sometopic/someencoding", "/app/29/sometopic/someencoding", "/app/20/sometopic/someencoding"]'
2025-02-08 04:04:26.066 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:26.067 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:1359/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/myapp/1/latest/proto", "/waku/2/content/test.js", "/app/22/sometopic/someencoding", "/toychat/2/huilong/proto", "/statusim/1/community/cbor", "/app/27/sometopic/someencoding", "/app/29/sometopic/someencoding", "/app/20/sometopic/someencoding"]'
2025-02-08 04:04:26.071 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:26.072 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37483/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:04:26.075 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:26.075 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 04:04:26.176 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-08 04:04:26.176 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37483/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:26.179 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:37483/relay/v1/auto/messages/%2Fmyapp%2F1%2Flatest%2Fproto. Response content: b'/myapp/1/latest/proto'
2025-02-08 04:04:26.181 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37483/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:04:26.183 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:26.184 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 04:04:26.284 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-08 04:04:26.285 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37483/relay/v1/auto/messages/%2Fwaku%2F2%2Fcontent%2Ftest.js" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:26.288 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:37483/relay/v1/auto/messages/%2Fwaku%2F2%2Fcontent%2Ftest.js. Response content: b'/waku/2/content/test.js'
2025-02-08 04:04:26.289 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37483/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:04:26.292 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:26.292 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 04:04:26.392 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-08 04:04:26.393 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37483/relay/v1/auto/messages/%2Fapp%2F22%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:26.396 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:37483/relay/v1/auto/messages/%2Fapp%2F22%2Fsometopic%2Fsomeencoding. Response content: b'/app/22/sometopic/someencoding'
2025-02-08 04:04:26.397 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37483/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:04:26.400 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:26.400 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 04:04:26.500 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-08 04:04:26.501 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37483/relay/v1/auto/messages/%2Ftoychat%2F2%2Fhuilong%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:26.504 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:37483/relay/v1/auto/messages/%2Ftoychat%2F2%2Fhuilong%2Fproto. Response content: b'/toychat/2/huilong/proto'
2025-02-08 04:04:26.506 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37483/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:04:26.508 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:26.509 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 04:04:26.609 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-08 04:04:26.609 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37483/relay/v1/auto/messages/%2Fstatusim%2F1%2Fcommunity%2Fcbor" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:26.612 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:37483/relay/v1/auto/messages/%2Fstatusim%2F1%2Fcommunity%2Fcbor. Response content: b'/statusim/1/community/cbor'
2025-02-08 04:04:26.614 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37483/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:04:26.617 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:26.617 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 04:04:26.717 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-08 04:04:26.718 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37483/relay/v1/auto/messages/%2Fapp%2F27%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:26.720 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:37483/relay/v1/auto/messages/%2Fapp%2F27%2Fsometopic%2Fsomeencoding. Response content: b'/app/27/sometopic/someencoding'
2025-02-08 04:04:26.722 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37483/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:04:26.724 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:26.725 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 04:04:26.825 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-08 04:04:26.825 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37483/relay/v1/auto/messages/%2Fapp%2F29%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:26.828 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:37483/relay/v1/auto/messages/%2Fapp%2F29%2Fsometopic%2Fsomeencoding. Response content: b'/app/29/sometopic/someencoding'
2025-02-08 04:04:26.830 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37483/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:04:26.832 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:26.833 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 04:04:26.933 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-08 04:04:26.933 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37483/relay/v1/auto/messages/%2Fapp%2F20%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:26.936 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:37483/relay/v1/auto/messages/%2Fapp%2F20%2Fsometopic%2Fsomeencoding. Response content: b'/app/20/sometopic/someencoding'
2025-02-08 04:04:26.939 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-08 04:04:26.940 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-08 04:04:26.940 DEBUG [src.node.waku_node] Stopping container with id 78ec01c49fc3
2025-02-08 04:04:28.242 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:04:28.242 DEBUG [src.node.waku_node] Stopping container with id 36f61976315b
2025-02-08 04:04:29.055 ERROR [src.node.docker_mananger] Max retries reached for container 78ec01c49fc3. Exiting log stream.
2025-02-08 04:04:29.727 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:04:29.728 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-08 04:04:29.734 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 04:04:29.739 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
