2025-02-08 04:05:52.045 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-08 04:05:52.046 DEBUG [tests.conftest] Running test: test_messages_with_timestamps_far_from_now with id: 2025-02-08_04-05-52__e9e5c58b-66fe-44ff-bca1-7a01ccb36568
2025-02-08 04:05:52.046 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-08 04:05:52.046 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-08 04:05:52.047 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-08 04:05:52.053 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:05:52.053 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-08_04-05-52__e9e5c58b-66fe-44ff-bca1-7a01ccb36568__wakuorg_nwaku:latest.log
2025-02-08 04:05:52.053 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:05:52.053 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:05:52.054 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:05:52.055 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.35.247
2025-02-08 04:05:52.055 DEBUG [src.node.docker_mananger] Generated ports ['29540', '29541', '29542', '29543', '29544']
2025-02-08 04:05:52.055 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:05:52.055 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:05:52.055 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:05:52.055 DEBUG [src.node.docker_mananger] docker run -i -t -p 29540:29540 -p 29541:29541 -p 29542:29542 -p 29543:29543 -p 29544:29544 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29542 --rest-port=29540 --tcp-port=29541 --discv5-udp-port=29543 --rest-address=0.0.0.0 --nat=extip:172.18.35.247 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1db98aaf39632ebdc20e5ace721ca311e9b2998c8998e6338bbeb75df0d5f4a8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29544 --metrics-logging=true --store=true --relay=true
2025-02-08 04:05:52.278 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.35.247 waku b11d05c992e7e5dab0771a49c7a06988630afed371a0613ffaeb031f603118db
2025-02-08 04:05:52.326 DEBUG [src.node.docker_mananger] Container started with ID b11d05c992e7. Setting up logs at ./log/docker/publishing_node1_2025-02-08_04-05-52__e9e5c58b-66fe-44ff-bca1-7a01ccb36568__wakuorg_nwaku:latest.log
2025-02-08 04:05:52.328 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 29540
2025-02-08 04:05:52.328 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:05:52.844 ERROR [src.node.docker_mananger] Max retries reached for container 95d8dad9e184. Exiting log stream.
2025-02-08 04:05:53.328 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29540/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:05:53.331 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:05:53.331 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:05:53.331 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29540/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:05:53.333 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.35.247/tcp/29541/p2p/16Uiu2HAm6C6gSYo1rN4pJ4YPr16gmcsgdjbSiEuFqevUgP5Jhhrw","/ip4/172.18.35.247/tcp/29542/ws/p2p/16Uiu2HAm6C6gSYo1rN4pJ4YPr16gmcsgdjbSiEuFqevUgP5Jhhrw"],"enrUri":"enr:-L24QOgskdmc0yTjpqvsrY3V8HNs8vfRrX6YL3TL94wzgyb2fn8IBhvFKHInA7OZ0w0_Fnn4IF8dqZzIg3QX6-L9LdoCgmlkgnY0gmlwhKwSI_eKbXVsdGlhZGRyc5YACASsEiP3BnNlAAoErBIj9wZzZt0DgnJzhQADAQAAiXNlY3AyNTZrMaECn_ZaqxwKbUajPLSHWQ-cAvFhMHDWwPxaq_4dsACJV8CDdGNwgnNlg3VkcIJzZ4V3YWt1MgM"}'
2025-02-08 04:05:53.333 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:05:53.340 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:05:53.340 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-08_04-05-52__e9e5c58b-66fe-44ff-bca1-7a01ccb36568__wakuorg_nwaku:latest.log
2025-02-08 04:05:53.340 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:05:53.340 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:05:53.341 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:05:53.341 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.190.153
2025-02-08 04:05:53.341 DEBUG [src.node.docker_mananger] Generated ports ['24174', '24175', '24176', '24177', '24178']
2025-02-08 04:05:53.342 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:05:53.342 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:05:53.342 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:05:53.342 DEBUG [src.node.docker_mananger] docker run -i -t -p 24174:24174 -p 24175:24175 -p 24176:24176 -p 24177:24177 -p 24178:24178 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=24176 --rest-port=24174 --tcp-port=24175 --discv5-udp-port=24177 --rest-address=0.0.0.0 --nat=extip:172.18.190.153 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7cfdc5bbde6d0aca3aba75b7a4e0fa3dc4d1c6287ba0bfc3e5e9ebaf488d3ce1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=24178 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QOgskdmc0yTjpqvsrY3V8HNs8vfRrX6YL3TL94wzgyb2fn8IBhvFKHInA7OZ0w0_Fnn4IF8dqZzIg3QX6-L9LdoCgmlkgnY0gmlwhKwSI_eKbXVsdGlhZGRyc5YACASsEiP3BnNlAAoErBIj9wZzZt0DgnJzhQADAQAAiXNlY3AyNTZrMaECn_ZaqxwKbUajPLSHWQ-cAvFhMHDWwPxaq_4dsACJV8CDdGNwgnNlg3VkcIJzZ4V3YWt1MgM --storenode=/ip4/172.18.35.247/tcp/29541/p2p/16Uiu2HAm6C6gSYo1rN4pJ4YPr16gmcsgdjbSiEuFqevUgP5Jhhrw --store=true --relay=true
2025-02-08 04:05:53.567 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.190.153 waku 9b60d9d248ee7ca43da14e477d736c3bba0d7977e8322d5f8aa87b29f310e0d0
2025-02-08 04:05:53.615 DEBUG [src.node.docker_mananger] Container started with ID 9b60d9d248ee. Setting up logs at ./log/docker/store_node1_2025-02-08_04-05-52__e9e5c58b-66fe-44ff-bca1-7a01ccb36568__wakuorg_nwaku:latest.log
2025-02-08 04:05:53.616 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 24174
2025-02-08 04:05:53.616 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:05:54.617 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:24174/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:05:54.620 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:05:54.620 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:05:54.620 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:24174/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:05:54.622 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.190.153/tcp/24175/p2p/16Uiu2HAmFzQ6BPaPRp6e8j5xpxeKTggRY36GZPpKhrDYN2K5fMzb","/ip4/172.18.190.153/tcp/24176/ws/p2p/16Uiu2HAmFzQ6BPaPRp6e8j5xpxeKTggRY36GZPpKhrDYN2K5fMzb"],"enrUri":"enr:-L24QGXm5EEk550YXLKWvfpcCH4Xt9y2RPCu_-tk4YLFNRHHYoGK2UAxBUTE9fNgIHK4Z2Xkoofhl-TlSdPcXcZ2juYCgmlkgnY0gmlwhKwSvpmKbXVsdGlhZGRyc5YACASsEr6ZBl5vAAoErBK-mQZecN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDMYvwP6rDFQSd_QTKf1GrYhygiSlIfaWg6UKMzub0rQyDdGNwgl5vg3VkcIJecYV3YWt1MgM"}'
2025-02-08 04:05:54.622 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:05:54.623 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24174/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.35.247/tcp/29541/p2p/16Uiu2HAm6C6gSYo1rN4pJ4YPr16gmcsgdjbSiEuFqevUgP5Jhhrw"]'
2025-02-08 04:05:54.625 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:05:54.625 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29540/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-08 04:05:54.628 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:05:54.628 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24174/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-08 04:05:54.630 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:05:54.631 DEBUG [tests.store.test_time_filter] Running test with payload 20 sec Past
2025-02-08 04:05:54.631 DEBUG [src.steps.store] Relaying message
2025-02-08 04:05:54.631 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29540/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:05:54.636 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:05:54.636 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-08 04:05:54.837 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-08 04:05:54.837 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29540/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:05:54.840 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
2025-02-08 04:05:54.840 DEBUG [tests.store.test_time_filter] Running test with payload 40 sec Future
2025-02-08 04:05:54.841 DEBUG [src.steps.store] Relaying message
2025-02-08 04:05:54.841 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29540/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:05:54.847 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:05:54.847 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-08 04:05:55.048 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-08 04:05:55.048 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29540/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:05:55.051 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
2025-02-08 04:05:55.053 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-08 04:05:55.054 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-08 04:05:55.054 DEBUG [src.node.waku_node] Stopping container with id b11d05c992e7
2025-02-08 04:05:55.829 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:05:55.829 DEBUG [src.node.waku_node] Stopping container with id 9b60d9d248ee
2025-02-08 04:05:56.640 ERROR [src.node.docker_mananger] Max retries reached for container b11d05c992e7. Exiting log stream.
2025-02-08 04:05:57.319 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:05:57.320 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-08 04:05:57.326 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 04:05:57.331 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
