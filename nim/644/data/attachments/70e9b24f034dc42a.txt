2025-02-08 04:03:54.033 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-08 04:03:54.033 DEBUG [tests.conftest] Running test: test_subscribe_one_by_one_to_different_pubsub_topics_and_send_messages with id: 2025-02-08_04-03-54__57228209-cf34-483c-a76e-db02d3d13703
2025-02-08 04:03:54.034 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-08 04:03:54.034 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-08 04:03:54.034 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2025-02-08 04:03:54.041 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:03:54.041 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-08_04-03-54__57228209-cf34-483c-a76e-db02d3d13703__wakuorg_nwaku:latest.log
2025-02-08 04:03:54.042 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:03:54.042 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:03:54.043 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:03:54.043 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.91.217
2025-02-08 04:03:54.043 DEBUG [src.node.docker_mananger] Generated ports ['56439', '56440', '56441', '56442', '56443']
2025-02-08 04:03:54.043 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:03:54.044 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:03:54.044 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:03:54.044 DEBUG [src.node.docker_mananger] docker run -i -t -p 56439:56439 -p 56440:56440 -p 56441:56441 -p 56442:56442 -p 56443:56443 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56441 --rest-port=56439 --tcp-port=56440 --discv5-udp-port=56442 --rest-address=0.0.0.0 --nat=extip:172.18.91.217 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=6caa0deb78c82cbdd22aca0d29e7f637490a9aba5b152a9f16fde6ed5d0feff8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56443 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/2/0
2025-02-08 04:03:54.279 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.91.217 waku 4b209f9742c0bd7f6c2a3c8f32a73b6c9b8a4eed1ed0b5e9be2c386de4033187
2025-02-08 04:03:54.328 DEBUG [src.node.docker_mananger] Container started with ID 4b209f9742c0. Setting up logs at ./log/docker/node1_2025-02-08_04-03-54__57228209-cf34-483c-a76e-db02d3d13703__wakuorg_nwaku:latest.log
2025-02-08 04:03:54.328 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 56439
2025-02-08 04:03:54.329 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:03:54.812 ERROR [src.node.docker_mananger] Max retries reached for container 00a3ad2b6b19. Exiting log stream.
2025-02-08 04:03:55.330 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56439/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:55.333 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:03:55.333 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:03:55.333 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56439/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:55.335 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.91.217/tcp/56440/p2p/16Uiu2HAm4H6BX1v6anXw3djHUp5WuSEAQt1gqbDf3xtftqJAHJoT","/ip4/172.18.91.217/tcp/56441/ws/p2p/16Uiu2HAm4H6BX1v6anXw3djHUp5WuSEAQt1gqbDf3xtftqJAHJoT"],"enrUri":"enr:-L24QGtzd23cxid-2f2L6th6iP229CTjTgANfrr-_tiq1qUfHQ6J_50Vsf8v2aESFWuClXRsMVu8Rc3muLFVu_9hVf0CgmlkgnY0gmlwhKwSW9mKbXVsdGlhZGRyc5YACASsElvZBtx4AAoErBJb2Qbced0DgnJzhQACAQAAiXNlY3AyNTZrMaECg4ZSDVU6GgbiVnjqPw0RWimXV9T6ZMBEbMR_Z0nUdRqDdGNwgtx4g3VkcILceoV3YWt1MgU"}'
2025-02-08 04:03:55.335 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:03:55.342 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:03:55.342 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-08_04-03-54__57228209-cf34-483c-a76e-db02d3d13703__wakuorg_nwaku:latest.log
2025-02-08 04:03:55.343 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:03:55.343 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:03:55.344 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:03:55.344 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.139.189
2025-02-08 04:03:55.344 DEBUG [src.node.docker_mananger] Generated ports ['14748', '14749', '14750', '14751', '14752']
2025-02-08 04:03:55.344 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:03:55.345 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:03:55.345 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:03:55.345 DEBUG [src.node.docker_mananger] docker run -i -t -p 14748:14748 -p 14749:14749 -p 14750:14750 -p 14751:14751 -p 14752:14752 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14750 --rest-port=14748 --tcp-port=14749 --discv5-udp-port=14751 --rest-address=0.0.0.0 --nat=extip:172.18.139.189 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=ff7b3ffbc64849b262ffb05463bf8e2ec75ca0fefaf6423d899aa43b9ceba200 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14752 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QGtzd23cxid-2f2L6th6iP229CTjTgANfrr-_tiq1qUfHQ6J_50Vsf8v2aESFWuClXRsMVu8Rc3muLFVu_9hVf0CgmlkgnY0gmlwhKwSW9mKbXVsdGlhZGRyc5YACASsElvZBtx4AAoErBJb2Qbced0DgnJzhQACAQAAiXNlY3AyNTZrMaECg4ZSDVU6GgbiVnjqPw0RWimXV9T6ZMBEbMR_Z0nUdRqDdGNwgtx4g3VkcILceoV3YWt1MgU --pubsub-topic=/waku/2/rs/2/0
2025-02-08 04:03:55.575 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.139.189 waku cb7762e752f0c5c931aa9145b619a1cb1d4b2dae7f5b451bcf1e338e3e97de92
2025-02-08 04:03:55.632 DEBUG [src.node.docker_mananger] Container started with ID cb7762e752f0. Setting up logs at ./log/docker/node2_2025-02-08_04-03-54__57228209-cf34-483c-a76e-db02d3d13703__wakuorg_nwaku:latest.log
2025-02-08 04:03:55.632 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 14748
2025-02-08 04:03:55.632 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:03:56.632 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14748/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:56.640 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:03:56.640 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:03:56.641 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14748/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:56.644 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.139.189/tcp/14749/p2p/16Uiu2HAmSxZSFsDB9hwyhtnrGBsuMAWTdFScmZoKcv4Dv8hfR1aE","/ip4/172.18.139.189/tcp/14750/ws/p2p/16Uiu2HAmSxZSFsDB9hwyhtnrGBsuMAWTdFScmZoKcv4Dv8hfR1aE"],"enrUri":"enr:-L24QHRGMOLFlP-GcGF1niG7xJqGYySm7SKB2yBoA-5TAsTAMotJ1odim_k8b95K-X4bzL5MQS2ujtC-UnxgblqsHrsCgmlkgnY0gmlwhKwSi72KbXVsdGlhZGRyc5YACASsEou9BjmdAAoErBKLvQY5nt0DgnJzhQACAQAAiXNlY3AyNTZrMaED1IPmmWQr0n_hIRQf8zH5TJNtHkT3mQiB17qNCzX1KueDdGNwgjmdg3VkcII5n4V3YWt1MgE"}'
2025-02-08 04:03:56.644 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:03:56.644 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14748/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.91.217/tcp/56440/p2p/16Uiu2HAm4H6BX1v6anXw3djHUp5WuSEAQt1gqbDf3xtftqJAHJoT"]'
2025-02-08 04:03:56.647 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:56.647 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56439/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0"]'
2025-02-08 04:03:56.650 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:56.650 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14748/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0"]'
2025-02-08 04:03:56.652 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:56.652 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56439/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:03:56.657 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:56.657 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 04:03:56.757 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-08 04:03:56.758 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56439/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:56.760 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738987436652787968,"ephemeral":false}]'
2025-02-08 04:03:56.762 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-08 04:03:56.762 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14748/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:56.764 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738987436652787968,"ephemeral":false}]'
2025-02-08 04:03:56.766 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56439/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/1"]'
2025-02-08 04:03:56.770 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:56.770 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14748/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/1"]'
2025-02-08 04:03:56.780 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:56.780 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56439/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F1" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:03:56.787 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:56.787 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 04:03:56.888 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-08 04:03:56.889 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56439/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:56.891 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738987436780581120,"ephemeral":false}]'
2025-02-08 04:03:56.893 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-08 04:03:56.893 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14748/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:56.895 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738987436780581120,"ephemeral":false}]'
2025-02-08 04:03:56.897 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56439/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/2"]'
2025-02-08 04:03:56.900 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:56.901 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14748/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/2"]'
2025-02-08 04:03:56.907 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:56.909 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56439/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:03:56.913 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:56.914 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 04:03:57.015 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-08 04:03:57.015 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56439/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:57.017 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738987436909008640,"ephemeral":false}]'
2025-02-08 04:03:57.019 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-08 04:03:57.019 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14748/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:57.021 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738987436909008640,"ephemeral":false}]'
2025-02-08 04:03:57.022 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56439/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/3"]'
2025-02-08 04:03:57.026 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:57.027 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14748/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/3"]'
2025-02-08 04:03:57.032 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:57.033 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56439/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F3" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:03:57.040 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:57.040 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 04:03:57.141 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-08 04:03:57.141 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56439/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F3" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:57.144 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738987437033793280,"ephemeral":false}]'
2025-02-08 04:03:57.145 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-08 04:03:57.146 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14748/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F3" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:57.148 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738987437033793280,"ephemeral":false}]'
2025-02-08 04:03:57.149 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56439/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/4"]'
2025-02-08 04:03:57.153 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:57.154 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14748/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/4"]'
2025-02-08 04:03:57.160 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:57.161 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56439/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F4" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:03:57.167 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:57.167 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 04:03:57.267 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-08 04:03:57.268 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56439/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F4" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:57.270 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738987437161503744,"ephemeral":false}]'
2025-02-08 04:03:57.272 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-08 04:03:57.272 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14748/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F4" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:57.275 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738987437161503744,"ephemeral":false}]'
2025-02-08 04:03:57.276 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56439/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/5"]'
2025-02-08 04:03:57.280 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:57.281 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14748/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/5"]'
2025-02-08 04:03:57.288 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:57.288 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56439/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F5" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:03:57.295 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:57.295 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 04:03:57.395 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-08 04:03:57.396 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56439/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F5" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:57.398 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738987437288778752,"ephemeral":false}]'
2025-02-08 04:03:57.400 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-08 04:03:57.400 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14748/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F5" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:57.402 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738987437288778752,"ephemeral":false}]'
2025-02-08 04:03:57.404 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56439/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/6"]'
2025-02-08 04:03:57.408 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:57.408 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14748/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/6"]'
2025-02-08 04:03:57.415 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:57.415 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56439/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F6" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:03:57.421 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:57.421 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 04:03:57.522 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-08 04:03:57.522 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56439/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F6" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:57.525 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738987437415571456,"ephemeral":false}]'
2025-02-08 04:03:57.526 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-08 04:03:57.526 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14748/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F6" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:57.528 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738987437415571456,"ephemeral":false}]'
2025-02-08 04:03:57.530 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56439/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/7"]'
2025-02-08 04:03:57.534 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:57.535 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14748/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/7"]'
2025-02-08 04:03:57.540 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:57.543 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56439/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F7" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:03:57.547 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:57.548 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 04:03:57.648 DEBUG [src.steps.sharding] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-08 04:03:57.648 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56439/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F7" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:57.651 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738987437542949120,"ephemeral":false}]'
2025-02-08 04:03:57.652 DEBUG [src.steps.sharding] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-08 04:03:57.652 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14748/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F7" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:57.654 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738987437542949120,"ephemeral":false}]'
2025-02-08 04:03:57.657 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-08 04:03:57.658 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-08 04:03:57.658 DEBUG [src.node.waku_node] Stopping container with id 4b209f9742c0
2025-02-08 04:03:58.813 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:03:58.814 DEBUG [src.node.waku_node] Stopping container with id cb7762e752f0
2025-02-08 04:03:59.626 ERROR [src.node.docker_mananger] Max retries reached for container 4b209f9742c0. Exiting log stream.
2025-02-08 04:04:00.296 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:04:00.297 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-08 04:04:00.307 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 04:04:00.316 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
