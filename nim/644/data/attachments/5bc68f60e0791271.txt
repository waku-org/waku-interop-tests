2025-02-08 04:03:14.987 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-08 04:03:14.987 DEBUG [tests.conftest] Running test: test_filter_get_message_after_node_pauses_and_pauses with id: 2025-02-08_04-03-14__d0143660-53c4-49f2-8935-60e859e5c1b1
2025-02-08 04:03:14.987 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-08 04:03:14.987 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-08 04:03:14.988 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-08 04:03:14.994 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:03:14.994 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-08_04-03-14__d0143660-53c4-49f2-8935-60e859e5c1b1__wakuorg_nwaku:latest.log
2025-02-08 04:03:14.994 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:03:14.994 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:03:14.995 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:03:14.996 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.216.35
2025-02-08 04:03:14.996 DEBUG [src.node.docker_mananger] Generated ports ['48186', '48187', '48188', '48189', '48190']
2025-02-08 04:03:14.996 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:03:14.996 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:03:14.996 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:03:14.996 DEBUG [src.node.docker_mananger] docker run -i -t -p 48186:48186 -p 48187:48187 -p 48188:48188 -p 48189:48189 -p 48190:48190 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=48188 --rest-port=48186 --tcp-port=48187 --discv5-udp-port=48189 --rest-address=0.0.0.0 --nat=extip:172.18.216.35 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d74b1d1a02f0153f694ef6a4ce434b26d1712eafea0f45b84ed6c68ea0a7aaac --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=48190 --metrics-logging=true --relay=true --filter=true
2025-02-08 04:03:15.229 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.216.35 waku ad954d6c00f4d24a5a64a13d1dd8a2f1bf27e9853c7bc25f5ba451f6068acd5d
2025-02-08 04:03:15.280 DEBUG [src.node.docker_mananger] Container started with ID ad954d6c00f4. Setting up logs at ./log/docker/node1_2025-02-08_04-03-14__d0143660-53c4-49f2-8935-60e859e5c1b1__wakuorg_nwaku:latest.log
2025-02-08 04:03:15.281 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 48186
2025-02-08 04:03:15.281 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:03:15.794 ERROR [src.node.docker_mananger] Max retries reached for container 8414c4823a1b. Exiting log stream.
2025-02-08 04:03:16.282 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:48186/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:16.285 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:03:16.285 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:03:16.285 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:48186/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:16.287 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.216.35/tcp/48187/p2p/16Uiu2HAky5ZYXh2xo84GdT6AQdEQATFYqeP1HZ4YQsNU7peXCNmQ","/ip4/172.18.216.35/tcp/48188/ws/p2p/16Uiu2HAky5ZYXh2xo84GdT6AQdEQATFYqeP1HZ4YQsNU7peXCNmQ"],"enrUri":"enr:-L24QBCI5Kc8Z-6KS2n456SBUnjgqLRbhMabp2daVqynyfhrFCUyx5W3esn-HGRh8hkaf4KITzjWJibqDcSO5gNQEDYCgmlkgnY0gmlwhKwS2COKbXVsdGlhZGRyc5YACASsEtgjBrw7AAoErBLYIwa8PN0DgnJzhQADAQAAiXNlY3AyNTZrMaECNkfa06XfN5B1ZH2fiu7xJwfNaSS3EqgZD9fPtkeNV3uDdGNwgrw7g3VkcIK8PYV3YWt1MgU"}'
2025-02-08 04:03:16.288 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:03:16.288 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-08 04:03:16.294 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:03:16.294 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-08_04-03-14__d0143660-53c4-49f2-8935-60e859e5c1b1__wakuorg_nwaku:latest.log
2025-02-08 04:03:16.294 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:03:16.294 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:03:16.296 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:03:16.296 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.169.76
2025-02-08 04:03:16.296 DEBUG [src.node.docker_mananger] Generated ports ['57838', '57839', '57840', '57841', '57842']
2025-02-08 04:03:16.296 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:03:16.297 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:03:16.297 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:03:16.297 DEBUG [src.node.docker_mananger] docker run -i -t -p 57838:57838 -p 57839:57839 -p 57840:57840 -p 57841:57841 -p 57842:57842 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57840 --rest-port=57838 --tcp-port=57839 --discv5-udp-port=57841 --rest-address=0.0.0.0 --nat=extip:172.18.169.76 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fded5219a4b2ba4535fafbddeba2fabd03a7ad0b66ef0cfaa652b8d4c6da344d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57842 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QBCI5Kc8Z-6KS2n456SBUnjgqLRbhMabp2daVqynyfhrFCUyx5W3esn-HGRh8hkaf4KITzjWJibqDcSO5gNQEDYCgmlkgnY0gmlwhKwS2COKbXVsdGlhZGRyc5YACASsEtgjBrw7AAoErBLYIwa8PN0DgnJzhQADAQAAiXNlY3AyNTZrMaECNkfa06XfN5B1ZH2fiu7xJwfNaSS3EqgZD9fPtkeNV3uDdGNwgrw7g3VkcIK8PYV3YWt1MgU --filternode=/ip4/172.18.216.35/tcp/48187/p2p/16Uiu2HAky5ZYXh2xo84GdT6AQdEQATFYqeP1HZ4YQsNU7peXCNmQ
2025-02-08 04:03:16.522 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.169.76 waku ccf73513c7245a65474fb7024a5558b925ce0cdfc40890cad019d11f579cee2b
2025-02-08 04:03:16.575 DEBUG [src.node.docker_mananger] Container started with ID ccf73513c724. Setting up logs at ./log/docker/node2_2025-02-08_04-03-14__d0143660-53c4-49f2-8935-60e859e5c1b1__wakuorg_nwaku:latest.log
2025-02-08 04:03:16.575 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 57838
2025-02-08 04:03:16.575 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:03:17.576 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57838/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:17.580 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:03:17.580 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:03:17.580 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57838/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:17.583 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.169.76/tcp/57839/p2p/16Uiu2HAm76jYbRoqKyFao4Zh29ZSHRT1gd8wMQoo5aBYKc9LQveT","/ip4/172.18.169.76/tcp/57840/ws/p2p/16Uiu2HAm76jYbRoqKyFao4Zh29ZSHRT1gd8wMQoo5aBYKc9LQveT"],"enrUri":"enr:-L24QDReIcgpvzO5-2X2svtDZoddvqQn7_xP6M_zINkQ3GjUfF8OfHcZ9_1nofLXjNwEZFI3jYXVn51c_ABJ1RN7fNUCgmlkgnY0gmlwhKwSqUyKbXVsdGlhZGRyc5YACASsEqlMBuHvAAoErBKpTAbh8N0DgnJzhQADAQAAiXNlY3AyNTZrMaECrXI9Qwm6zYdETQP3zFJi12SNuc3zzRuwS34kg9OVXniDdGNwguHvg3VkcILh8YV3YWt1MgA"}'
2025-02-08 04:03:17.583 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:03:17.583 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57838/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.216.35/tcp/48187/p2p/16Uiu2HAky5ZYXh2xo84GdT6AQdEQATFYqeP1HZ4YQsNU7peXCNmQ"]'
2025-02-08 04:03:17.622 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:17.622 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-08 04:03:17.623 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:48186/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-08 04:03:17.641 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:17.642 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57838/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "9c145f98-4779-4de7-8b91-e0ba7ca329c7", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-08 04:03:17.654 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"9c145f98-4779-4de7-8b91-e0ba7ca329c7","statusDesc":"OK"}'
2025-02-08 04:03:17.656 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:48186/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:03:17.665 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:17.665 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 04:03:17.765 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-08 04:03:17.766 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57838/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:17.769 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1738987397656336640,"ephemeral":false}]'
2025-02-08 04:03:17.770 DEBUG [src.node.waku_node] Pausing container with id ad954d6c00f4
2025-02-08 04:03:17.780 DEBUG [src.node.waku_node] Unpause container with id ad954d6c00f4
2025-02-08 04:03:17.789 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:48186/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "TTE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:03:17.794 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:17.794 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 04:03:17.894 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-08 04:03:17.894 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57838/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:17.897 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TTE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1738987397789284352,"ephemeral":false}]'
2025-02-08 04:03:17.899 DEBUG [src.node.waku_node] Pausing container with id ccf73513c724
2025-02-08 04:03:17.908 DEBUG [src.node.waku_node] Unpause container with id ccf73513c724
2025-02-08 04:03:17.917 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:48186/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "TTI=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:03:17.922 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:17.922 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 04:03:18.023 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-08 04:03:18.023 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57838/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:18.027 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TTI=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1738987397917423104,"ephemeral":false}]'
2025-02-08 04:03:18.030 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-08 04:03:18.031 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-08 04:03:18.031 DEBUG [src.node.waku_node] Stopping container with id ad954d6c00f4
2025-02-08 04:03:18.891 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:03:18.892 DEBUG [src.node.waku_node] Stopping container with id ccf73513c724
2025-02-08 04:03:19.707 ERROR [src.node.docker_mananger] Max retries reached for container ad954d6c00f4. Exiting log stream.
2025-02-08 04:03:20.440 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:03:20.440 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-08 04:03:20.446 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 04:03:20.451 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
