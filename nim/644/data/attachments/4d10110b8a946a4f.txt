2025-02-08 04:04:50.082 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-08 04:04:50.082 DEBUG [tests.conftest] Running test: test_invalid_page_size with id: 2025-02-08_04-04-50__196b0d0d-9568-4a5c-969a-5fd0203a1a31
2025-02-08 04:04:50.082 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-08 04:04:50.083 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-08 04:04:50.083 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-08 04:04:50.089 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:04:50.090 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-08_04-04-50__196b0d0d-9568-4a5c-969a-5fd0203a1a31__wakuorg_nwaku:latest.log
2025-02-08 04:04:50.090 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:04:50.090 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:04:50.091 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:04:50.091 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.162.59
2025-02-08 04:04:50.092 DEBUG [src.node.docker_mananger] Generated ports ['28045', '28046', '28047', '28048', '28049']
2025-02-08 04:04:50.092 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:04:50.092 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:04:50.092 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:04:50.092 DEBUG [src.node.docker_mananger] docker run -i -t -p 28045:28045 -p 28046:28046 -p 28047:28047 -p 28048:28048 -p 28049:28049 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28047 --rest-port=28045 --tcp-port=28046 --discv5-udp-port=28048 --rest-address=0.0.0.0 --nat=extip:172.18.162.59 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c7ed0c24befbe6acddb29308fce9a17dedf0566b7ce2aa1bfc31276d84f80184 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28049 --metrics-logging=true --store=true --relay=true
2025-02-08 04:04:50.323 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.162.59 waku 7812cbc9134dfb7b5bb637578f5bef3ffbd15a9f3041942feffa0852b9ea3a7b
2025-02-08 04:04:50.371 DEBUG [src.node.docker_mananger] Container started with ID 7812cbc9134d. Setting up logs at ./log/docker/publishing_node1_2025-02-08_04-04-50__196b0d0d-9568-4a5c-969a-5fd0203a1a31__wakuorg_nwaku:latest.log
2025-02-08 04:04:50.374 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 28045
2025-02-08 04:04:50.374 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:04:50.887 ERROR [src.node.docker_mananger] Max retries reached for container 531ee922e862. Exiting log stream.
2025-02-08 04:04:51.375 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28045/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:51.377 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:04:51.377 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:04:51.377 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28045/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:51.379 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.162.59/tcp/28046/p2p/16Uiu2HAmFipsTdtcywRU9DyTgYutj398xyS3sBe9N3muYV4FgDL8","/ip4/172.18.162.59/tcp/28047/ws/p2p/16Uiu2HAmFipsTdtcywRU9DyTgYutj398xyS3sBe9N3muYV4FgDL8"],"enrUri":"enr:-L24QHwB6_VyFA1Vd5cekxEiXLP1_J3QNoBikqu8yWhCZHMgVcTJ7xlrVruqjLQrmpc6lVU6YFDTGYysy_ERt3FmawACgmlkgnY0gmlwhKwSojuKbXVsdGlhZGRyc5YACASsEqI7Bm2OAAoErBKiOwZtj90DgnJzhQADAQAAiXNlY3AyNTZrMaEDLY6qRttSVUboSMzzjN9_v9dQ8tboCoEx9vdpV1dcBl2DdGNwgm2Og3VkcIJtkIV3YWt1MgM"}'
2025-02-08 04:04:51.380 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:04:51.386 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:04:51.386 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-08_04-04-50__196b0d0d-9568-4a5c-969a-5fd0203a1a31__wakuorg_nwaku:latest.log
2025-02-08 04:04:51.386 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:04:51.386 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:04:51.387 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:04:51.387 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.163.101
2025-02-08 04:04:51.387 DEBUG [src.node.docker_mananger] Generated ports ['61020', '61021', '61022', '61023', '61024']
2025-02-08 04:04:51.388 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:04:51.388 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:04:51.388 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:04:51.388 DEBUG [src.node.docker_mananger] docker run -i -t -p 61020:61020 -p 61021:61021 -p 61022:61022 -p 61023:61023 -p 61024:61024 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61022 --rest-port=61020 --tcp-port=61021 --discv5-udp-port=61023 --rest-address=0.0.0.0 --nat=extip:172.18.163.101 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=da0bea0762a7a30dbb5c2dcd6424600ccebb8dae70d4faf866edea55af29c024 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61024 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QHwB6_VyFA1Vd5cekxEiXLP1_J3QNoBikqu8yWhCZHMgVcTJ7xlrVruqjLQrmpc6lVU6YFDTGYysy_ERt3FmawACgmlkgnY0gmlwhKwSojuKbXVsdGlhZGRyc5YACASsEqI7Bm2OAAoErBKiOwZtj90DgnJzhQADAQAAiXNlY3AyNTZrMaEDLY6qRttSVUboSMzzjN9_v9dQ8tboCoEx9vdpV1dcBl2DdGNwgm2Og3VkcIJtkIV3YWt1MgM --storenode=/ip4/172.18.162.59/tcp/28046/p2p/16Uiu2HAmFipsTdtcywRU9DyTgYutj398xyS3sBe9N3muYV4FgDL8 --store=true --relay=true
2025-02-08 04:04:51.615 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.163.101 waku 2f3f2b9c36f3fad78a4b6e1d868916f9e6909b5865b58b4d144ca0d2d2ef68e9
2025-02-08 04:04:51.668 DEBUG [src.node.docker_mananger] Container started with ID 2f3f2b9c36f3. Setting up logs at ./log/docker/store_node1_2025-02-08_04-04-50__196b0d0d-9568-4a5c-969a-5fd0203a1a31__wakuorg_nwaku:latest.log
2025-02-08 04:04:51.669 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 61020
2025-02-08 04:04:51.669 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:04:52.670 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61020/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:52.672 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:04:52.672 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:04:52.673 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61020/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:52.675 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.163.101/tcp/61021/p2p/16Uiu2HAmQQ3grJp6v2bk3GB4ndPobcfXg1r9SCmfR2PLWTWkn2nD","/ip4/172.18.163.101/tcp/61022/ws/p2p/16Uiu2HAmQQ3grJp6v2bk3GB4ndPobcfXg1r9SCmfR2PLWTWkn2nD"],"enrUri":"enr:-L24QEs3W7I8MjoxE-rM6nOe6J7WqbKYNzprpFZtqi2oeKofcIu-oKHaHpQlIF8WCtb7jAR9foJ_579QzBV6xAr0tHUCgmlkgnY0gmlwhKwSo2WKbXVsdGlhZGRyc5YACASsEqNlBu5dAAoErBKjZQbuXt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDrnhN7zwQvdjAUmmoodeB7V681-gEpJ4BUBz-W0QAWzqDdGNwgu5dg3VkcILuX4V3YWt1MgM"}'
2025-02-08 04:04:52.675 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:04:52.675 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61020/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.162.59/tcp/28046/p2p/16Uiu2HAmFipsTdtcywRU9DyTgYutj398xyS3sBe9N3muYV4FgDL8"]'
2025-02-08 04:04:52.678 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:52.678 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28045/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-08 04:04:52.680 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:52.680 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61020/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-08 04:04:52.682 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:52.683 DEBUG [src.steps.store] Relaying message
2025-02-08 04:04:52.684 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28045/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:04:52.689 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:52.689 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-08 04:04:52.890 DEBUG [src.steps.store] Relaying message
2025-02-08 04:04:52.890 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28045/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8x", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:04:52.896 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:52.896 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-08 04:04:53.097 DEBUG [src.steps.store] Relaying message
2025-02-08 04:04:53.097 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28045/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8y", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:04:53.103 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:53.103 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-08 04:04:53.304 DEBUG [src.steps.store] Relaying message
2025-02-08 04:04:53.304 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28045/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8z", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:04:53.310 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:53.310 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-08 04:04:53.511 DEBUG [src.steps.store] Relaying message
2025-02-08 04:04:53.511 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28045/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV80", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:04:53.517 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:53.518 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-08 04:04:53.718 DEBUG [src.steps.store] Relaying message
2025-02-08 04:04:53.718 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28045/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV81", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:04:53.724 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:53.725 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-08 04:04:53.925 DEBUG [src.steps.store] Relaying message
2025-02-08 04:04:53.925 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28045/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV82", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:04:53.931 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:53.931 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-08 04:04:54.132 DEBUG [src.steps.store] Relaying message
2025-02-08 04:04:54.132 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28045/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV83", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:04:54.137 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:54.138 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-08 04:04:54.338 DEBUG [src.steps.store] Relaying message
2025-02-08 04:04:54.338 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28045/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV84", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:04:54.343 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:54.344 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-08 04:04:54.544 DEBUG [src.steps.store] Relaying message
2025-02-08 04:04:54.544 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28045/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV85", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:04:54.549 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:54.550 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-08 04:04:54.750 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28045/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=$2&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:54.753 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:28045/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=$2&ascending=true. Response content: b'page size parsing error: invalid integer: $2'
2025-02-08 04:04:54.754 DEBUG [tests.store.test_page_size] the invalid page_size $2 wasn't accepted 
2025-02-08 04:04:54.754 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61020/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=$2&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:54.756 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:61020/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=$2&ascending=true. Response content: b'page size parsing error: invalid integer: $2'
2025-02-08 04:04:54.757 DEBUG [tests.store.test_page_size] the invalid page_size $2 wasn't accepted 
2025-02-08 04:04:54.758 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-08 04:04:54.759 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-08 04:04:54.759 DEBUG [src.node.waku_node] Stopping container with id 7812cbc9134d
2025-02-08 04:04:55.883 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:04:55.884 DEBUG [src.node.waku_node] Stopping container with id 2f3f2b9c36f3
2025-02-08 04:04:56.714 ERROR [src.node.docker_mananger] Max retries reached for container 7812cbc9134d. Exiting log stream.
2025-02-08 04:04:57.354 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:04:57.356 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-08 04:04:57.369 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 04:04:57.375 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
