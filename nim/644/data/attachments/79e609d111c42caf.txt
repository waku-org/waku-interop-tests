2025-02-08 04:09:14.530 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-08 04:09:14.530 DEBUG [tests.conftest] Running test: test_store_with_unknown_pubsub_topic_but_known_content_topic with id: 2025-02-08_04-09-14__96195f6a-5358-4f46-bbf2-fff1504a3357
2025-02-08 04:09:14.531 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-08 04:09:14.531 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-08 04:09:14.531 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-08 04:09:14.537 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:09:14.537 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-08_04-09-14__96195f6a-5358-4f46-bbf2-fff1504a3357__wakuorg_nwaku:latest.log
2025-02-08 04:09:14.538 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:09:14.538 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:09:14.539 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:09:14.539 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.59.98
2025-02-08 04:09:14.539 DEBUG [src.node.docker_mananger] Generated ports ['61922', '61923', '61924', '61925', '61926']
2025-02-08 04:09:14.539 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:09:14.540 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:09:14.540 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:09:14.540 DEBUG [src.node.docker_mananger] docker run -i -t -p 61922:61922 -p 61923:61923 -p 61924:61924 -p 61925:61925 -p 61926:61926 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61924 --rest-port=61922 --tcp-port=61923 --discv5-udp-port=61925 --rest-address=0.0.0.0 --nat=extip:172.18.59.98 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dc247e9cd9b5a4eeace3de3d560a1af1a710db52dd6d743ab1a66ceea0debfb4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61926 --metrics-logging=true --store=true --relay=true
2025-02-08 04:09:14.773 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.59.98 waku f1dcec88adb3fad2d0d7eff1a0172811a35dd0d38abe8f269e8d018f31335a82
2025-02-08 04:09:14.825 DEBUG [src.node.docker_mananger] Container started with ID f1dcec88adb3. Setting up logs at ./log/docker/publishing_node1_2025-02-08_04-09-14__96195f6a-5358-4f46-bbf2-fff1504a3357__wakuorg_nwaku:latest.log
2025-02-08 04:09:14.827 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 61922
2025-02-08 04:09:14.828 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:09:15.332 ERROR [src.node.docker_mananger] Max retries reached for container bc88229291e7. Exiting log stream.
2025-02-08 04:09:15.828 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61922/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:09:15.831 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:09:15.831 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:09:15.831 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61922/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:09:15.833 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.59.98/tcp/61923/p2p/16Uiu2HAmRwnFvREV8n1rWA5xSZe7DNXL7vNu1pSFL8KhwvvVzdSW","/ip4/172.18.59.98/tcp/61924/ws/p2p/16Uiu2HAmRwnFvREV8n1rWA5xSZe7DNXL7vNu1pSFL8KhwvvVzdSW"],"enrUri":"enr:-L24QFQl_WPIGEdfIC0-bs8y_a1lk-wbyShEaQYdQeEPv8mmArlGey10-li1mIid8pUh3831lxJuVyVdsorh4l7vaOoCgmlkgnY0gmlwhKwSO2KKbXVsdGlhZGRyc5YACASsEjtiBvHjAAoErBI7Ygbx5N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDxXUhdc3sClctlnKXm-0oqcWLqa_4JCqXI6iHq34s69-DdGNwgvHjg3VkcILx5YV3YWt1MgM"}'
2025-02-08 04:09:15.834 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:09:15.840 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:09:15.840 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-08_04-09-14__96195f6a-5358-4f46-bbf2-fff1504a3357__wakuorg_nwaku:latest.log
2025-02-08 04:09:15.840 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:09:15.841 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:09:15.842 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:09:15.842 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.162.96
2025-02-08 04:09:15.842 DEBUG [src.node.docker_mananger] Generated ports ['8623', '8624', '8625', '8626', '8627']
2025-02-08 04:09:15.842 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:09:15.843 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:09:15.843 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:09:15.843 DEBUG [src.node.docker_mananger] docker run -i -t -p 8623:8623 -p 8624:8624 -p 8625:8625 -p 8626:8626 -p 8627:8627 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8625 --rest-port=8623 --tcp-port=8624 --discv5-udp-port=8626 --rest-address=0.0.0.0 --nat=extip:172.18.162.96 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4cd75111290616d4dddf14c258e24623dbecbd7ff0c23b6ab3cdbad5fcbf28fd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8627 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QFQl_WPIGEdfIC0-bs8y_a1lk-wbyShEaQYdQeEPv8mmArlGey10-li1mIid8pUh3831lxJuVyVdsorh4l7vaOoCgmlkgnY0gmlwhKwSO2KKbXVsdGlhZGRyc5YACASsEjtiBvHjAAoErBI7Ygbx5N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDxXUhdc3sClctlnKXm-0oqcWLqa_4JCqXI6iHq34s69-DdGNwgvHjg3VkcILx5YV3YWt1MgM --storenode=/ip4/172.18.59.98/tcp/61923/p2p/16Uiu2HAmRwnFvREV8n1rWA5xSZe7DNXL7vNu1pSFL8KhwvvVzdSW --store=true --relay=true
2025-02-08 04:09:16.081 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.162.96 waku 8924cad3d81fc2b77ad7de1e7bf3426df5bff4d944e6e4b9acc47a0f60dc3a7e
2025-02-08 04:09:16.126 DEBUG [src.node.docker_mananger] Container started with ID 8924cad3d81f. Setting up logs at ./log/docker/store_node1_2025-02-08_04-09-14__96195f6a-5358-4f46-bbf2-fff1504a3357__wakuorg_nwaku:latest.log
2025-02-08 04:09:16.126 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 8623
2025-02-08 04:09:16.127 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:09:17.128 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:8623/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:09:17.130 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:09:17.131 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:09:17.131 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:8623/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:09:17.133 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.162.96/tcp/8624/p2p/16Uiu2HAmPNNGvW7B51dTWfPyYBkVULYDki3EB6mWKHz8DvxtYscx","/ip4/172.18.162.96/tcp/8625/ws/p2p/16Uiu2HAmPNNGvW7B51dTWfPyYBkVULYDki3EB6mWKHz8DvxtYscx"],"enrUri":"enr:-L24QOdPC2E5chP0SaqJFcxiIYj4J-hW51o_JnuaKyD_ZntbTiko3eB0UmubdI9H_Tg2qliK-huLsHnMRDb_1yEI_HQCgmlkgnY0gmlwhKwSomCKbXVsdGlhZGRyc5YACASsEqJgBiGwAAoErBKiYAYhsd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDny55CKZ2gbh0Pt0SIm8aH0PjVgIHCeUszEW84qiZ_dWDdGNwgiGwg3VkcIIhsoV3YWt1MgM"}'
2025-02-08 04:09:17.133 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:09:17.133 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:8623/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.59.98/tcp/61923/p2p/16Uiu2HAmRwnFvREV8n1rWA5xSZe7DNXL7vNu1pSFL8KhwvvVzdSW"]'
2025-02-08 04:09:17.136 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:09:17.137 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61922/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-08 04:09:17.139 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:09:17.139 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:8623/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-08 04:09:17.141 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:09:17.142 DEBUG [src.steps.store] Relaying message
2025-02-08 04:09:17.142 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61922/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:09:17.148 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:09:17.148 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-08 04:09:17.349 DEBUG [src.steps.store] Relaying message
2025-02-08 04:09:17.349 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61922/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:09:17.355 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:09:17.356 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-08 04:09:17.557 DEBUG [src.steps.store] Relaying message
2025-02-08 04:09:17.557 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61922/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:09:17.563 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:09:17.563 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-08 04:09:17.764 DEBUG [src.steps.store] Relaying message
2025-02-08 04:09:17.764 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61922/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:09:17.769 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:09:17.769 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-08 04:09:17.970 DEBUG [src.steps.store] Relaying message
2025-02-08 04:09:17.970 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61922/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:09:17.976 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:09:17.976 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-08 04:09:18.177 DEBUG [src.steps.store] Relaying message
2025-02-08 04:09:18.177 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61922/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:09:18.183 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:09:18.184 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-08 04:09:18.384 DEBUG [src.steps.store] Relaying message
2025-02-08 04:09:18.385 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61922/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:09:18.391 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:09:18.391 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-08 04:09:18.592 DEBUG [src.steps.store] Relaying message
2025-02-08 04:09:18.592 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61922/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:09:18.598 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:09:18.599 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-08 04:09:18.800 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61922/store/v3/messages?pubsubTopic=test&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:09:18.803 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
2025-02-08 04:09:18.803 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:8623/store/v3/messages?pubsubTopic=test&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:09:18.806 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
2025-02-08 04:09:18.809 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-08 04:09:18.810 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-08 04:09:18.810 DEBUG [src.node.waku_node] Stopping container with id f1dcec88adb3
2025-02-08 04:09:19.354 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:09:19.355 DEBUG [src.node.waku_node] Stopping container with id 8924cad3d81f
2025-02-08 04:09:20.185 ERROR [src.node.docker_mananger] Max retries reached for container f1dcec88adb3. Exiting log stream.
2025-02-08 04:09:20.860 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:09:20.862 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-08 04:09:20.873 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 04:09:20.878 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
