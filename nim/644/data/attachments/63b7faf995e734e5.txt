2025-02-08 04:04:23.803 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-08 04:04:23.804 DEBUG [tests.conftest] Running test: test_store_is_empty with id: 2025-02-08_04-04-23__3c6d54e7-fcd3-4ac8-98ca-7451430cf4f0
2025-02-08 04:04:23.804 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-08 04:04:23.804 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-08 04:04:23.804 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-08 04:04:23.810 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:04:23.811 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-08_04-04-23__3c6d54e7-fcd3-4ac8-98ca-7451430cf4f0__wakuorg_nwaku:latest.log
2025-02-08 04:04:23.811 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:04:23.811 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:04:23.812 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:04:23.812 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.7.96
2025-02-08 04:04:23.813 DEBUG [src.node.docker_mananger] Generated ports ['51118', '51119', '51120', '51121', '51122']
2025-02-08 04:04:23.813 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:04:23.813 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:04:23.813 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:04:23.813 DEBUG [src.node.docker_mananger] docker run -i -t -p 51118:51118 -p 51119:51119 -p 51120:51120 -p 51121:51121 -p 51122:51122 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=51120 --rest-port=51118 --tcp-port=51119 --discv5-udp-port=51121 --rest-address=0.0.0.0 --nat=extip:172.18.7.96 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4581b081dabb454c61b4dfb5bb09df553b34cdd3bbc2f6efbffcace3e6c31edd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=51122 --metrics-logging=true --store=true --relay=true
2025-02-08 04:04:24.038 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.7.96 waku 903c723d423834349b54fd6371a5352e8fb218bf694b3b61a7e5e9ce5f9daa8d
2025-02-08 04:04:24.086 DEBUG [src.node.docker_mananger] Container started with ID 903c723d4238. Setting up logs at ./log/docker/publishing_node1_2025-02-08_04-04-23__3c6d54e7-fcd3-4ac8-98ca-7451430cf4f0__wakuorg_nwaku:latest.log
2025-02-08 04:04:24.088 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 51118
2025-02-08 04:04:24.088 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:04:24.609 ERROR [src.node.docker_mananger] Max retries reached for container 173fca3f0832. Exiting log stream.
2025-02-08 04:04:25.090 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51118/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:25.093 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:04:25.093 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:04:25.093 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51118/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:25.096 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.7.96/tcp/51119/p2p/16Uiu2HAmAJodijCTZQgSRaLBZDHADFn56kHnKmvXGRfpVT5UPuE2","/ip4/172.18.7.96/tcp/51120/ws/p2p/16Uiu2HAmAJodijCTZQgSRaLBZDHADFn56kHnKmvXGRfpVT5UPuE2"],"enrUri":"enr:-L24QF0Nw3cFuLzeTg_aTrascxrerKHzVB2e2BShqJ7HvXBuN8U2K4mkHQqNNJhxiNqlH-pBpcmg2xRosAmTpDMusY8CgmlkgnY0gmlwhKwSB2CKbXVsdGlhZGRyc5YACASsEgdgBsevAAoErBIHYAbHsN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC3RzkfSXVpT6QMD3fefixOJzBBCl0dwobOLBXAjMdMGODdGNwgsevg3VkcILHsYV3YWt1MgM"}'
2025-02-08 04:04:25.096 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:04:25.102 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:04:25.102 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-08_04-04-23__3c6d54e7-fcd3-4ac8-98ca-7451430cf4f0__wakuorg_nwaku:latest.log
2025-02-08 04:04:25.102 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:04:25.103 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:04:25.104 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:04:25.104 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.1.152
2025-02-08 04:04:25.104 DEBUG [src.node.docker_mananger] Generated ports ['52146', '52147', '52148', '52149', '52150']
2025-02-08 04:04:25.104 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:04:25.104 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:04:25.104 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:04:25.104 DEBUG [src.node.docker_mananger] docker run -i -t -p 52146:52146 -p 52147:52147 -p 52148:52148 -p 52149:52149 -p 52150:52150 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=52148 --rest-port=52146 --tcp-port=52147 --discv5-udp-port=52149 --rest-address=0.0.0.0 --nat=extip:172.18.1.152 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ad1fc13ca3aadfedc13cebb022650fa7d05b3cbb363cd6f6adc1dfba1c7d690f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=52150 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QF0Nw3cFuLzeTg_aTrascxrerKHzVB2e2BShqJ7HvXBuN8U2K4mkHQqNNJhxiNqlH-pBpcmg2xRosAmTpDMusY8CgmlkgnY0gmlwhKwSB2CKbXVsdGlhZGRyc5YACASsEgdgBsevAAoErBIHYAbHsN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC3RzkfSXVpT6QMD3fefixOJzBBCl0dwobOLBXAjMdMGODdGNwgsevg3VkcILHsYV3YWt1MgM --storenode=/ip4/172.18.7.96/tcp/51119/p2p/16Uiu2HAmAJodijCTZQgSRaLBZDHADFn56kHnKmvXGRfpVT5UPuE2 --store=true --relay=true
2025-02-08 04:04:25.333 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.1.152 waku ece6e7893f4622d9bd641d46ce3f7cb4d49768e542867f92a2e0baf344fc2e99
2025-02-08 04:04:25.379 DEBUG [src.node.docker_mananger] Container started with ID ece6e7893f46. Setting up logs at ./log/docker/store_node1_2025-02-08_04-04-23__3c6d54e7-fcd3-4ac8-98ca-7451430cf4f0__wakuorg_nwaku:latest.log
2025-02-08 04:04:25.381 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 52146
2025-02-08 04:04:25.381 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:04:26.382 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52146/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:26.385 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:04:26.385 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:04:26.385 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52146/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:26.388 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.1.152/tcp/52147/p2p/16Uiu2HAmPkdGmpKxRhkswWAmYPs1fbYNRJNqRe7gjztkmpZpeD4U","/ip4/172.18.1.152/tcp/52148/ws/p2p/16Uiu2HAmPkdGmpKxRhkswWAmYPs1fbYNRJNqRe7gjztkmpZpeD4U"],"enrUri":"enr:-L24QKeMk0YszmhFlId1Gyu3u7Ft2jfg0uuYrBoxN4XFNZDmcimJylNRC_fxHtyXlU1yq7ULD4usRvJO4LXdzMu2bVYCgmlkgnY0gmlwhKwSAZiKbXVsdGlhZGRyc5YACASsEgGYBsuzAAoErBIBmAbLtN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDpOI1ThGbrDSXuU6_xq1EJlPdW5fHlUHFRTx3q2zTcPGDdGNwgsuzg3VkcILLtYV3YWt1MgM"}'
2025-02-08 04:04:26.388 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:04:26.388 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52146/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.7.96/tcp/51119/p2p/16Uiu2HAmAJodijCTZQgSRaLBZDHADFn56kHnKmvXGRfpVT5UPuE2"]'
2025-02-08 04:04:26.391 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:26.391 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:51118/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-08 04:04:26.394 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:26.394 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52146/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-08 04:04:26.396 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:26.397 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51118/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:26.399 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
2025-02-08 04:04:26.400 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52146/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:26.402 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
2025-02-08 04:04:26.404 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-08 04:04:26.404 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-08 04:04:26.405 DEBUG [src.node.waku_node] Stopping container with id 903c723d4238
2025-02-08 04:04:27.598 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:04:27.598 DEBUG [src.node.waku_node] Stopping container with id ece6e7893f46
2025-02-08 04:04:28.409 ERROR [src.node.docker_mananger] Max retries reached for container 903c723d4238. Exiting log stream.
2025-02-08 04:04:29.115 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:04:29.117 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-08 04:04:29.122 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 04:04:29.126 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
