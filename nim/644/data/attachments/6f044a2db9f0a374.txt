2025-02-08 04:06:02.832 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-08 04:06:02.833 DEBUG [tests.conftest] Running test: test_publish_on_multiple_pubsub_topics_and_only_after_fetch_them with id: 2025-02-08_04-06-02__4165f758-617e-4947-894b-948769f45db1
2025-02-08 04:06:02.833 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-08 04:06:02.833 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-08 04:06:02.834 DEBUG [src.steps.sharding] Running fixture setup: sharding_setup
2025-02-08 04:06:02.840 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:06:02.840 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-08_04-06-02__4165f758-617e-4947-894b-948769f45db1__wakuorg_nwaku:latest.log
2025-02-08 04:06:02.840 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:06:02.840 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:06:02.842 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:06:02.842 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.62.28
2025-02-08 04:06:02.842 DEBUG [src.node.docker_mananger] Generated ports ['20487', '20488', '20489', '20490', '20491']
2025-02-08 04:06:02.842 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:06:02.842 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:06:02.842 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:06:02.842 DEBUG [src.node.docker_mananger] docker run -i -t -p 20487:20487 -p 20488:20488 -p 20489:20489 -p 20490:20490 -p 20491:20491 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20489 --rest-port=20487 --tcp-port=20488 --discv5-udp-port=20490 --rest-address=0.0.0.0 --nat=extip:172.18.62.28 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=869c6dc6ea49f843fd21fd4aa41e45c92ccec1d2135c2e60cee8c2512296fca1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20491 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/2/0
2025-02-08 04:06:03.067 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.62.28 waku 9846e2010135885752d6994bc4bae02a39596cabb32554d453f0fcb52fd92b49
2025-02-08 04:06:03.118 DEBUG [src.node.docker_mananger] Container started with ID 9846e2010135. Setting up logs at ./log/docker/node1_2025-02-08_04-06-02__4165f758-617e-4947-894b-948769f45db1__wakuorg_nwaku:latest.log
2025-02-08 04:06:03.118 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 20487
2025-02-08 04:06:03.119 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:06:03.631 ERROR [src.node.docker_mananger] Max retries reached for container a2651bd36057. Exiting log stream.
2025-02-08 04:06:04.119 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20487/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:06:04.122 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:06:04.122 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:06:04.122 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20487/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:06:04.124 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.62.28/tcp/20488/p2p/16Uiu2HAmAg3RTJWhHExmA7tqHz3FqF6FMLNogz1siN8j1jSNr8KT","/ip4/172.18.62.28/tcp/20489/ws/p2p/16Uiu2HAmAg3RTJWhHExmA7tqHz3FqF6FMLNogz1siN8j1jSNr8KT"],"enrUri":"enr:-L24QEQmejL8MgfKUdTKAG1rTvPuH_jDUmDs3AMj-6xgPUfZIbmi8JMYPs8lr0fj1kapebVh2LJ4e3VOo5HU5svAR6cCgmlkgnY0gmlwhKwSPhyKbXVsdGlhZGRyc5YACASsEj4cBlAIAAoErBI-HAZQCd0DgnJzhQACAQAAiXNlY3AyNTZrMaEC4o2uJQDuQ2YPYHYDkPaBg21inRhMuhYdnD04tssVc0KDdGNwglAIg3VkcIJQCoV3YWt1MgU"}'
2025-02-08 04:06:04.125 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:06:04.131 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:06:04.131 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-08_04-06-02__4165f758-617e-4947-894b-948769f45db1__wakuorg_nwaku:latest.log
2025-02-08 04:06:04.131 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:06:04.131 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:06:04.132 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:06:04.132 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.156.239
2025-02-08 04:06:04.133 DEBUG [src.node.docker_mananger] Generated ports ['14739', '14740', '14741', '14742', '14743']
2025-02-08 04:06:04.133 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:06:04.133 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:06:04.133 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:06:04.133 DEBUG [src.node.docker_mananger] docker run -i -t -p 14739:14739 -p 14740:14740 -p 14741:14741 -p 14742:14742 -p 14743:14743 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14741 --rest-port=14739 --tcp-port=14740 --discv5-udp-port=14742 --rest-address=0.0.0.0 --nat=extip:172.18.156.239 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=db4ce2102b076ef4de17d094b6d54a159bd74bbc7e4db10ad60ee16abba6afce --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14743 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QEQmejL8MgfKUdTKAG1rTvPuH_jDUmDs3AMj-6xgPUfZIbmi8JMYPs8lr0fj1kapebVh2LJ4e3VOo5HU5svAR6cCgmlkgnY0gmlwhKwSPhyKbXVsdGlhZGRyc5YACASsEj4cBlAIAAoErBI-HAZQCd0DgnJzhQACAQAAiXNlY3AyNTZrMaEC4o2uJQDuQ2YPYHYDkPaBg21inRhMuhYdnD04tssVc0KDdGNwglAIg3VkcIJQCoV3YWt1MgU --pubsub-topic=/waku/2/rs/2/0
2025-02-08 04:06:04.359 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.156.239 waku e0180c30286544becfbc54048f4deb2dd54c5e3ac21c5ebdfd8c87a6c56fbf8c
2025-02-08 04:06:04.413 DEBUG [src.node.docker_mananger] Container started with ID e0180c302865. Setting up logs at ./log/docker/node2_2025-02-08_04-06-02__4165f758-617e-4947-894b-948769f45db1__wakuorg_nwaku:latest.log
2025-02-08 04:06:04.414 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 14739
2025-02-08 04:06:04.414 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:06:05.414 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14739/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:06:05.422 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:06:05.422 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:06:05.422 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14739/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:06:05.426 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.156.239/tcp/14740/p2p/16Uiu2HAmCDsfEx5D13bW7i4XzFsH3J9AWtPSPShFRxzTddmXbR37","/ip4/172.18.156.239/tcp/14741/ws/p2p/16Uiu2HAmCDsfEx5D13bW7i4XzFsH3J9AWtPSPShFRxzTddmXbR37"],"enrUri":"enr:-L24QLEzPLzWqG-B0iuIbyg6GNP6b0RY4GCUI6kTZKPgZVrNQmx9flTZCw-7_qbqESbE1ONtTn-ubWjBYpLMHKR5UhQCgmlkgnY0gmlwhKwSnO-KbXVsdGlhZGRyc5YACASsEpzvBjmUAAoErBKc7wY5ld0DgnJzhQACAQAAiXNlY3AyNTZrMaEC-ZDqMPM09IIGxgLgfBEOG1FKrKb18Km6fIPNT2Pg74qDdGNwgjmUg3VkcII5loV3YWt1MgE"}'
2025-02-08 04:06:05.426 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:06:05.427 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14739/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.62.28/tcp/20488/p2p/16Uiu2HAmAg3RTJWhHExmA7tqHz3FqF6FMLNogz1siN8j1jSNr8KT"]'
2025-02-08 04:06:05.429 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:06:05.430 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20487/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0", "/waku/2/rs/2/1", "/waku/2/rs/2/2", "/waku/2/rs/2/3", "/waku/2/rs/2/4", "/waku/2/rs/2/5", "/waku/2/rs/2/6", "/waku/2/rs/2/7"]'
2025-02-08 04:06:05.439 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:06:05.440 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14739/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0", "/waku/2/rs/2/1", "/waku/2/rs/2/2", "/waku/2/rs/2/3", "/waku/2/rs/2/4", "/waku/2/rs/2/5", "/waku/2/rs/2/6", "/waku/2/rs/2/7"]'
2025-02-08 04:06:05.460 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:06:05.461 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20487/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d '{"payload": "L3dha3UvMi9ycy8yLzA=", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:06:05.469 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:06:05.470 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20487/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F1" -H "Content-Type: application/json" -d '{"payload": "L3dha3UvMi9ycy8yLzE=", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:06:05.475 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:06:05.476 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20487/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d '{"payload": "L3dha3UvMi9ycy8yLzI=", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:06:05.481 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:06:05.482 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20487/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F3" -H "Content-Type: application/json" -d '{"payload": "L3dha3UvMi9ycy8yLzM=", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:06:05.488 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:06:05.488 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20487/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F4" -H "Content-Type: application/json" -d '{"payload": "L3dha3UvMi9ycy8yLzQ=", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:06:05.494 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:06:05.495 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20487/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F5" -H "Content-Type: application/json" -d '{"payload": "L3dha3UvMi9ycy8yLzU=", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:06:05.500 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:06:05.501 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20487/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F6" -H "Content-Type: application/json" -d '{"payload": "L3dha3UvMi9ycy8yLzY=", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:06:05.507 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:06:05.508 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20487/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F7" -H "Content-Type: application/json" -d '{"payload": "L3dha3UvMi9ycy8yLzc=", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:06:05.512 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:06:05.513 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 04:06:05.614 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14739/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:06:05.616 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3dha3UvMi9ycy8yLzA=","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738987565460899072,"ephemeral":false}]'
2025-02-08 04:06:05.617 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14739/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:06:05.619 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3dha3UvMi9ycy8yLzE=","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738987565470420736,"ephemeral":false}]'
2025-02-08 04:06:05.619 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14739/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:06:05.621 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3dha3UvMi9ycy8yLzI=","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738987565476220672,"ephemeral":false}]'
2025-02-08 04:06:05.622 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14739/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F3" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:06:05.623 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3dha3UvMi9ycy8yLzM=","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738987565482595072,"ephemeral":false}]'
2025-02-08 04:06:05.624 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14739/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F4" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:06:05.626 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3dha3UvMi9ycy8yLzQ=","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738987565488650752,"ephemeral":false}]'
2025-02-08 04:06:05.626 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14739/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F5" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:06:05.628 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3dha3UvMi9ycy8yLzU=","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738987565495331584,"ephemeral":false}]'
2025-02-08 04:06:05.628 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14739/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F6" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:06:05.631 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3dha3UvMi9ycy8yLzY=","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738987565501721856,"ephemeral":false}]'
2025-02-08 04:06:05.631 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14739/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F7" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:06:05.633 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"L3dha3UvMi9ycy8yLzc=","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738987565508003072,"ephemeral":false}]'
2025-02-08 04:06:05.634 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-08 04:06:05.635 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-08 04:06:05.635 DEBUG [src.node.waku_node] Stopping container with id 9846e2010135
2025-02-08 04:06:06.720 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:06:06.722 DEBUG [src.node.waku_node] Stopping container with id e0180c302865
2025-02-08 04:06:07.531 ERROR [src.node.docker_mananger] Max retries reached for container 9846e2010135. Exiting log stream.
2025-02-08 04:06:08.230 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:06:08.230 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-08 04:06:08.239 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 04:06:08.247 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
