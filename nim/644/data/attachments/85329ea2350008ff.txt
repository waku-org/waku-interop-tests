2025-02-08 04:02:54.605 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-08 04:02:54.606 DEBUG [tests.conftest] Running test: test_store_node_not_connected_directly_to_lightpushing_node with id: 2025-02-08_04-02-54__cd77ebfc-64f0-42b2-894b-ae4a30ff8d32
2025-02-08 04:02:54.606 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-08 04:02:54.606 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-08 04:02:54.606 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-08 04:02:54.614 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:02:54.615 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-08_04-02-54__cd77ebfc-64f0-42b2-894b-ae4a30ff8d32__wakuorg_nwaku:latest.log
2025-02-08 04:02:54.620 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:02:54.620 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-08_04-02-54__cd77ebfc-64f0-42b2-894b-ae4a30ff8d32__wakuorg_nwaku:latest.log
2025-02-08 04:02:54.625 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:02:54.625 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node3_2025-02-08_04-02-54__cd77ebfc-64f0-42b2-894b-ae4a30ff8d32__wakuorg_nwaku:latest.log
2025-02-08 04:02:54.625 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-08 04:02:54.626 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-08 04:02:54.626 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:02:54.626 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:02:54.692 DEBUG [src.node.docker_mananger] Network waku created
2025-02-08 04:02:54.692 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.212.246
2025-02-08 04:02:54.692 DEBUG [src.node.docker_mananger] Generated ports ['25062', '25063', '25064', '25065', '25066']
2025-02-08 04:02:54.693 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:02:54.693 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:02:54.693 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:02:54.693 DEBUG [src.node.docker_mananger] docker run -i -t -p 25062:25062 -p 25063:25063 -p 25064:25064 -p 25065:25065 -p 25066:25066 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25064 --rest-port=25062 --tcp-port=25063 --discv5-udp-port=25065 --rest-address=0.0.0.0 --nat=extip:172.18.212.246 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5b3d1b16a480ffa6716e52dfd8bec5fbc565c71f913cc4fb5f1a9cab2dec99e9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25066 --metrics-logging=true --lightpush=true
2025-02-08 04:02:57.847 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.212.246 waku de29a337726af4451d36e6bfdd2cd02c239f92f5c85a00e4553586a150482569
2025-02-08 04:02:57.893 DEBUG [src.node.docker_mananger] Container started with ID de29a337726a. Setting up logs at ./log/docker/node1_2025-02-08_04-02-54__cd77ebfc-64f0-42b2-894b-ae4a30ff8d32__wakuorg_nwaku:latest.log
2025-02-08 04:02:57.893 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 25062
2025-02-08 04:02:57.893 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:02:58.894 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25062/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:02:58.897 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:02:58.897 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:02:58.897 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25062/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:02:58.899 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.212.246/tcp/25063/p2p/16Uiu2HAkvAo2xjrrrsfcqiAntNo6HKXtcfU33r6x1FqoEaWd2Pmz","/ip4/172.18.212.246/tcp/25064/ws/p2p/16Uiu2HAkvAo2xjrrrsfcqiAntNo6HKXtcfU33r6x1FqoEaWd2Pmz"],"enrUri":"enr:-L24QFxjtK3dMANTi8gE08Y-b0XL_vcO8fKfJPDvb3Gqsi21IZXhK9hnL7NFFQTMY-IHBVObyVVqAOfV7ors2YfFBh0CgmlkgnY0gmlwhKwS1PaKbXVsdGlhZGRyc5YACASsEtT2BmHnAAoErBLU9gZh6N0DgnJzhQADAQAAiXNlY3AyNTZrMaECCwvzlEl146h3nrP24YyYgFvQZBDsdACtO4TsFO__u5GDdGNwgmHng3VkcIJh6YV3YWt1Mgk"}'
2025-02-08 04:02:58.900 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:02:58.900 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:02:58.900 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:02:58.901 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:02:58.901 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.117.7
2025-02-08 04:02:58.901 DEBUG [src.node.docker_mananger] Generated ports ['14147', '14148', '14149', '14150', '14151']
2025-02-08 04:02:58.902 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:02:58.902 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:02:58.902 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:02:58.902 DEBUG [src.node.docker_mananger] docker run -i -t -p 14147:14147 -p 14148:14148 -p 14149:14149 -p 14150:14150 -p 14151:14151 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14149 --rest-port=14147 --tcp-port=14148 --discv5-udp-port=14150 --rest-address=0.0.0.0 --nat=extip:172.18.117.7 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ef4d1341b49be5c4d0fc08c495e89eb2d5cccf37dccbeeeec0fbeb35c34bc38a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14151 --metrics-logging=true --lightpush=true --store=true --relay=true --discv5-bootstrap-node=enr:-L24QFxjtK3dMANTi8gE08Y-b0XL_vcO8fKfJPDvb3Gqsi21IZXhK9hnL7NFFQTMY-IHBVObyVVqAOfV7ors2YfFBh0CgmlkgnY0gmlwhKwS1PaKbXVsdGlhZGRyc5YACASsEtT2BmHnAAoErBLU9gZh6N0DgnJzhQADAQAAiXNlY3AyNTZrMaECCwvzlEl146h3nrP24YyYgFvQZBDsdACtO4TsFO__u5GDdGNwgmHng3VkcIJh6YV3YWt1Mgk --lightpushnode=/ip4/172.18.212.246/tcp/25063/p2p/16Uiu2HAkvAo2xjrrrsfcqiAntNo6HKXtcfU33r6x1FqoEaWd2Pmz
2025-02-08 04:02:59.132 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.117.7 waku dedd3d03f8ad9ec6a084fa10625d5d1cb1c83222eea6afe770d4567e954f6f9c
2025-02-08 04:02:59.179 DEBUG [src.node.docker_mananger] Container started with ID dedd3d03f8ad. Setting up logs at ./log/docker/node2_2025-02-08_04-02-54__cd77ebfc-64f0-42b2-894b-ae4a30ff8d32__wakuorg_nwaku:latest.log
2025-02-08 04:02:59.181 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 14147
2025-02-08 04:02:59.181 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:03:00.181 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14147/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:00.184 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:03:00.184 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:03:00.184 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14147/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:00.186 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.117.7/tcp/14148/p2p/16Uiu2HAmUBdF2miftTuMeQwoRmf9ZJ3kssN4LtR6YBWzVDWDrxY2","/ip4/172.18.117.7/tcp/14149/ws/p2p/16Uiu2HAmUBdF2miftTuMeQwoRmf9ZJ3kssN4LtR6YBWzVDWDrxY2"],"enrUri":"enr:-L24QM376S3ey_8R8seHuabFiU0BBHt0OmSaeygQI74M3VmSA2VR3GG3AmK5dzGnMGzam9hJaoPmW1QbHRmYD90vKWsCgmlkgnY0gmlwhKwSdQeKbXVsdGlhZGRyc5YACASsEnUHBjdEAAoErBJ1BwY3Rd0DgnJzhQADAQAAiXNlY3AyNTZrMaED5rhxM3jxvwL02CfwYubOUiTJeUxTrqY1M1i7SnJN10uDdGNwgjdEg3VkcII3RoV3YWt1Mgs"}'
2025-02-08 04:03:00.187 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:03:00.187 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:03:00.187 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:03:00.188 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:03:00.188 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.84.104
2025-02-08 04:03:00.188 DEBUG [src.node.docker_mananger] Generated ports ['52122', '52123', '52124', '52125', '52126']
2025-02-08 04:03:00.189 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:03:00.189 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:03:00.189 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:03:00.189 DEBUG [src.node.docker_mananger] docker run -i -t -p 52122:52122 -p 52123:52123 -p 52124:52124 -p 52125:52125 -p 52126:52126 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=52124 --rest-port=52122 --tcp-port=52123 --discv5-udp-port=52125 --rest-address=0.0.0.0 --nat=extip:172.18.84.104 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c4bcaef390dcffb2bfbdc2fc6b8f4a90db32a0fa718490c0359fdb45cbaaf6f3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=52126 --metrics-logging=true --relay=false --storenode=/ip4/172.18.117.7/tcp/14148/p2p/16Uiu2HAmUBdF2miftTuMeQwoRmf9ZJ3kssN4LtR6YBWzVDWDrxY2 --discv5-bootstrap-node=enr:-L24QM376S3ey_8R8seHuabFiU0BBHt0OmSaeygQI74M3VmSA2VR3GG3AmK5dzGnMGzam9hJaoPmW1QbHRmYD90vKWsCgmlkgnY0gmlwhKwSdQeKbXVsdGlhZGRyc5YACASsEnUHBjdEAAoErBJ1BwY3Rd0DgnJzhQADAQAAiXNlY3AyNTZrMaED5rhxM3jxvwL02CfwYubOUiTJeUxTrqY1M1i7SnJN10uDdGNwgjdEg3VkcII3RoV3YWt1Mgs
2025-02-08 04:03:00.416 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.84.104 waku d6c88d2293cf33309dae455fca37563e430fd3fec29a7d665255ffe9f966d7be
2025-02-08 04:03:00.462 DEBUG [src.node.docker_mananger] Container started with ID d6c88d2293cf. Setting up logs at ./log/docker/node3_2025-02-08_04-02-54__cd77ebfc-64f0-42b2-894b-ae4a30ff8d32__wakuorg_nwaku:latest.log
2025-02-08 04:03:00.463 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 52122
2025-02-08 04:03:00.463 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:03:01.464 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52122/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:01.467 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:03:01.467 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:03:01.467 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52122/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:01.469 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.84.104/tcp/52123/p2p/16Uiu2HAmFbUy9SYsjSk973KwaVNQjWMujS3tW1vbSHSd6FtLu2DS","/ip4/172.18.84.104/tcp/52124/ws/p2p/16Uiu2HAmFbUy9SYsjSk973KwaVNQjWMujS3tW1vbSHSd6FtLu2DS"],"enrUri":"enr:-L24QAQtgI4qL5Q9IAvjUwySoSvEi4LdQS3djoXZuMePD7qjFnXkbixsZhVWe5XZtVXfRY5W7Fpt2y_O_AqlOpsMgDoCgmlkgnY0gmlwhKwSVGiKbXVsdGlhZGRyc5YACASsElRoBsubAAoErBJUaAbLnN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDK60YpJjJ9kSdL6AyTZDo3UuBfN-nM53q8P5jFDveSSWDdGNwgsubg3VkcILLnYV3YWt1MgA"}'
2025-02-08 04:03:01.469 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:03:01.470 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25062/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-08 04:03:01.474 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:01.474 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14147/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-08 04:03:01.480 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:01.481 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25062/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:01.484 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.117.7/tcp/14148/p2p/16Uiu2HAmUBdF2miftTuMeQwoRmf9ZJ3kssN4LtR6YBWzVDWDrxY2","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
2025-02-08 04:03:01.484 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14147/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:01.487 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.212.246/tcp/25063/p2p/16Uiu2HAkvAo2xjrrrsfcqiAntNo6HKXtcfU33r6x1FqoEaWd2Pmz","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
2025-02-08 04:03:01.487 DEBUG [src.libs.common] Sleeping for 30 seconds
2025-02-08 04:03:31.488 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25062/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1738987411488198144}}'
2025-02-08 04:03:31.500 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:31.500 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:03:32.500 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-08 04:03:32.501 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52122/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:32.543 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"5ef681dbafef3fab6e61","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x85b231dffbb3bf52fbc26e0c1836c0c20dab89fbe3c007ee14b13c5bfc83750a"}]}'
2025-02-08 04:03:32.551 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-08 04:03:32.552 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-08 04:03:32.552 DEBUG [src.node.waku_node] Stopping container with id de29a337726a
2025-02-08 04:03:33.707 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:03:33.707 DEBUG [src.node.waku_node] Stopping container with id dedd3d03f8ad
2025-02-08 04:03:34.520 ERROR [src.node.docker_mananger] Max retries reached for container de29a337726a. Exiting log stream.
2025-02-08 04:03:34.944 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:03:34.944 DEBUG [src.node.waku_node] Stopping container with id d6c88d2293cf
2025-02-08 04:03:35.755 ERROR [src.node.docker_mananger] Max retries reached for container dedd3d03f8ad. Exiting log stream.
2025-02-08 04:03:36.368 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:03:36.370 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-08 04:03:36.379 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 04:03:36.390 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 04:03:36.393 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
