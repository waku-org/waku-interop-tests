2025-02-08 04:04:29.453 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-08 04:04:29.453 DEBUG [tests.conftest] Running test: test_filter_get_message_with_150_kb_payload with id: 2025-02-08_04-04-29__f7aeafde-3def-4611-a7b1-88a1c5b74c3c
2025-02-08 04:04:29.453 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-08 04:04:29.454 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-08 04:04:29.454 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-08 04:04:29.460 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:04:29.460 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-08_04-04-29__f7aeafde-3def-4611-a7b1-88a1c5b74c3c__wakuorg_nwaku:latest.log
2025-02-08 04:04:29.460 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:04:29.460 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:04:29.461 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:04:29.462 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.97.199
2025-02-08 04:04:29.462 DEBUG [src.node.docker_mananger] Generated ports ['16756', '16757', '16758', '16759', '16760']
2025-02-08 04:04:29.462 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:04:29.462 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:04:29.462 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:04:29.462 DEBUG [src.node.docker_mananger] docker run -i -t -p 16756:16756 -p 16757:16757 -p 16758:16758 -p 16759:16759 -p 16760:16760 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=16758 --rest-port=16756 --tcp-port=16757 --discv5-udp-port=16759 --rest-address=0.0.0.0 --nat=extip:172.18.97.199 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9a1cdaf2fbeef7ea219f603e4fee0fee69fc47de0fadcd13cf3def903cb2c030 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=16760 --metrics-logging=true --relay=true --filter=true
2025-02-08 04:04:29.687 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.97.199 waku 71d3d96f800969c5e74656c3dca42f61a1d235db213596402a8560165d246f30
2025-02-08 04:04:29.735 DEBUG [src.node.docker_mananger] Container started with ID 71d3d96f8009. Setting up logs at ./log/docker/node1_2025-02-08_04-04-29__f7aeafde-3def-4611-a7b1-88a1c5b74c3c__wakuorg_nwaku:latest.log
2025-02-08 04:04:29.736 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 16756
2025-02-08 04:04:29.736 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:04:30.260 ERROR [src.node.docker_mananger] Max retries reached for container d97cba05f550. Exiting log stream.
2025-02-08 04:04:30.737 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16756/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:30.740 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:04:30.741 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:04:30.741 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16756/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:30.743 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.97.199/tcp/16757/p2p/16Uiu2HAkv2Kon2rZs5sbgCHie87UoxP9umDUAuLTevQXGoBGucyd","/ip4/172.18.97.199/tcp/16758/ws/p2p/16Uiu2HAkv2Kon2rZs5sbgCHie87UoxP9umDUAuLTevQXGoBGucyd"],"enrUri":"enr:-L24QK1U52i5veRVCIsUG9QWDFv52RxYNbY9X3b-yNi00VB4VbHJPeE3ena5ndHy4i4XHRORnuCA9hcj7Q_goxaDWggCgmlkgnY0gmlwhKwSYceKbXVsdGlhZGRyc5YACASsEmHHBkF1AAoErBJhxwZBdt0DgnJzhQADAQAAiXNlY3AyNTZrMaECCOCE29C6uhH2ztjDXeqVhLGCvHvox_yswvAhgLqYUhCDdGNwgkF1g3VkcIJBd4V3YWt1MgU"}'
2025-02-08 04:04:30.743 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:04:30.744 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-08 04:04:30.750 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:04:30.750 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-08_04-04-29__f7aeafde-3def-4611-a7b1-88a1c5b74c3c__wakuorg_nwaku:latest.log
2025-02-08 04:04:30.750 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:04:30.750 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:04:30.752 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:04:30.752 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.140.81
2025-02-08 04:04:30.752 DEBUG [src.node.docker_mananger] Generated ports ['4267', '4268', '4269', '4270', '4271']
2025-02-08 04:04:30.752 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:04:30.752 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:04:30.753 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:04:30.753 DEBUG [src.node.docker_mananger] docker run -i -t -p 4267:4267 -p 4268:4268 -p 4269:4269 -p 4270:4270 -p 4271:4271 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4269 --rest-port=4267 --tcp-port=4268 --discv5-udp-port=4270 --rest-address=0.0.0.0 --nat=extip:172.18.140.81 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cd20f5b08dcafb8abbcffedf00f9e1aebeadcdef91f1cecaa7a2e5ac1104db85 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4271 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QK1U52i5veRVCIsUG9QWDFv52RxYNbY9X3b-yNi00VB4VbHJPeE3ena5ndHy4i4XHRORnuCA9hcj7Q_goxaDWggCgmlkgnY0gmlwhKwSYceKbXVsdGlhZGRyc5YACASsEmHHBkF1AAoErBJhxwZBdt0DgnJzhQADAQAAiXNlY3AyNTZrMaECCOCE29C6uhH2ztjDXeqVhLGCvHvox_yswvAhgLqYUhCDdGNwgkF1g3VkcIJBd4V3YWt1MgU --filternode=/ip4/172.18.97.199/tcp/16757/p2p/16Uiu2HAkv2Kon2rZs5sbgCHie87UoxP9umDUAuLTevQXGoBGucyd
2025-02-08 04:04:30.983 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.140.81 waku 2b0c1da7e5462b55bbefb548f44cb5f3a14fc06ece4c25a5ab7bd764f1cdebc8
2025-02-08 04:04:31.028 DEBUG [src.node.docker_mananger] Container started with ID 2b0c1da7e546. Setting up logs at ./log/docker/node2_2025-02-08_04-04-29__f7aeafde-3def-4611-a7b1-88a1c5b74c3c__wakuorg_nwaku:latest.log
2025-02-08 04:04:31.028 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 4267
2025-02-08 04:04:31.029 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:04:32.030 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4267/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:32.033 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:04:32.033 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:04:32.033 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4267/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:32.035 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.140.81/tcp/4268/p2p/16Uiu2HAmQqetLCXNFaFVskkTP2vKwTTMHcH2RovW7VZaJkoMYp8K","/ip4/172.18.140.81/tcp/4269/ws/p2p/16Uiu2HAmQqetLCXNFaFVskkTP2vKwTTMHcH2RovW7VZaJkoMYp8K"],"enrUri":"enr:-L24QJHvq69DTzjtV5LYQqUfUx7EyuyYLLDQeRKzFGldmT3RZvq5VHyvpzeIVZo7Q0tBpho5Hlz9WlVBJHM4CB276B4CgmlkgnY0gmlwhKwSjFGKbXVsdGlhZGRyc5YACASsEoxRBhCsAAoErBKMUQYQrd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDtQefg7Q2cONYqvzkNSWK02uIobS3lZGiJuq4V3ap7lyDdGNwghCsg3VkcIIQroV3YWt1MgA"}'
2025-02-08 04:04:32.035 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:04:32.036 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4267/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.97.199/tcp/16757/p2p/16Uiu2HAkv2Kon2rZs5sbgCHie87UoxP9umDUAuLTevQXGoBGucyd"]'
2025-02-08 04:04:32.069 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:32.070 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-08 04:04:32.070 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16756/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-08 04:04:32.089 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:32.090 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4267/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "5d7ba4cf-3a9d-498b-b155-ae9625de877f", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-08 04:04:32.102 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"5d7ba4cf-3a9d-498b-b155-ae9625de877f","statusDesc":"OK"}'
2025-02-08 04:04:32.105 INFO [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2025-02-08 04:04:32.126 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:32.126 DEBUG [src.libs.common] Sleeping for 2 seconds
2025-02-08 04:04:34.126 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-08 04:04:34.127 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4267/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:34.131 INFO [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2025-02-08 04:04:34.135 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-08 04:04:34.136 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-08 04:04:34.136 DEBUG [src.node.waku_node] Stopping container with id 71d3d96f8009
2025-02-08 04:04:35.449 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:04:35.449 DEBUG [src.node.waku_node] Stopping container with id 2b0c1da7e546
2025-02-08 04:04:36.261 ERROR [src.node.docker_mananger] Max retries reached for container 71d3d96f8009. Exiting log stream.
2025-02-08 04:04:36.936 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:04:36.937 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-08 04:04:36.941 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 04:04:36.946 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
