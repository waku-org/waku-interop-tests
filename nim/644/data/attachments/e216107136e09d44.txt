2025-02-08 04:03:55.870 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-08 04:03:55.870 DEBUG [tests.conftest] Running test: test_publish_after_node1_restarts with id: 2025-02-08_04-03-55__ef688aa7-14db-47bf-98b5-3c9bdab550ff
2025-02-08 04:03:55.870 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-08 04:03:55.870 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-08 04:03:55.871 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2025-02-08 04:03:55.876 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:03:55.876 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-08_04-03-55__ef688aa7-14db-47bf-98b5-3c9bdab550ff__wakuorg_nwaku:latest.log
2025-02-08 04:03:55.877 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:03:55.877 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:03:55.878 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:03:55.878 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.197.90
2025-02-08 04:03:55.878 DEBUG [src.node.docker_mananger] Generated ports ['7540', '7541', '7542', '7543', '7544']
2025-02-08 04:03:55.878 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:03:55.879 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:03:55.879 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:03:55.879 DEBUG [src.node.docker_mananger] docker run -i -t -p 7540:7540 -p 7541:7541 -p 7542:7542 -p 7543:7543 -p 7544:7544 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7542 --rest-port=7540 --tcp-port=7541 --discv5-udp-port=7543 --rest-address=0.0.0.0 --nat=extip:172.18.197.90 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dfcb1bf82d6d0fbcf0abdfa9c69ddf7fba4fbcceae410da1877fcad6b2db16d0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7544 --metrics-logging=true --relay=true
2025-02-08 04:03:56.097 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.197.90 waku 44a02f735602bea2325b366b61544e6b230fab646b7a2e20aa7cd19d5ba5f32c
2025-02-08 04:03:56.147 DEBUG [src.node.docker_mananger] Container started with ID 44a02f735602. Setting up logs at ./log/docker/node1_2025-02-08_04-03-55__ef688aa7-14db-47bf-98b5-3c9bdab550ff__wakuorg_nwaku:latest.log
2025-02-08 04:03:56.148 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 7540
2025-02-08 04:03:56.149 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:03:56.677 ERROR [src.node.docker_mananger] Max retries reached for container 9d30fe589ae3. Exiting log stream.
2025-02-08 04:03:57.149 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7540/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:57.152 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:03:57.152 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:03:57.152 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7540/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:57.154 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.197.90/tcp/7541/p2p/16Uiu2HAm36a63ME6w7W6pkEXXzAseTsU5NvNXzfxunvUFmjgvTjQ","/ip4/172.18.197.90/tcp/7542/ws/p2p/16Uiu2HAm36a63ME6w7W6pkEXXzAseTsU5NvNXzfxunvUFmjgvTjQ"],"enrUri":"enr:-L24QEkVK6wwDHQNlz52wnz2PD5hmt_m0gz1Ck0sm66T9Uq0SSToqQBGeAndSEf620YYz_Opx7S6coNpwQh_e_pv9lUCgmlkgnY0gmlwhKwSxVqKbXVsdGlhZGRyc5YACASsEsVaBh11AAoErBLFWgYddt0DgnJzhQADAQAAiXNlY3AyNTZrMaECcfjMMJ3dXpPgAK--qOi3DKElUHZPAMvbjn07aLrE2juDdGNwgh11g3VkcIIdd4V3YWt1MgE"}'
2025-02-08 04:03:57.154 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:03:57.160 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:03:57.160 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-08_04-03-55__ef688aa7-14db-47bf-98b5-3c9bdab550ff__wakuorg_nwaku:latest.log
2025-02-08 04:03:57.161 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:03:57.161 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:03:57.162 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:03:57.162 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.42.184
2025-02-08 04:03:57.162 DEBUG [src.node.docker_mananger] Generated ports ['19635', '19636', '19637', '19638', '19639']
2025-02-08 04:03:57.163 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:03:57.163 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:03:57.163 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:03:57.163 DEBUG [src.node.docker_mananger] docker run -i -t -p 19635:19635 -p 19636:19636 -p 19637:19637 -p 19638:19638 -p 19639:19639 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19637 --rest-port=19635 --tcp-port=19636 --discv5-udp-port=19638 --rest-address=0.0.0.0 --nat=extip:172.18.42.184 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d7ac2c611b8c1ecbd7c3ebb95b36565cdd5eda0cbc079f5539f1e7eb96a311f8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19639 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QEkVK6wwDHQNlz52wnz2PD5hmt_m0gz1Ck0sm66T9Uq0SSToqQBGeAndSEf620YYz_Opx7S6coNpwQh_e_pv9lUCgmlkgnY0gmlwhKwSxVqKbXVsdGlhZGRyc5YACASsEsVaBh11AAoErBLFWgYddt0DgnJzhQADAQAAiXNlY3AyNTZrMaECcfjMMJ3dXpPgAK--qOi3DKElUHZPAMvbjn07aLrE2juDdGNwgh11g3VkcIIdd4V3YWt1MgE
2025-02-08 04:03:57.388 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.42.184 waku ac12ad1ad9741a079ceab0cee9b13fff28f1eb889c69000e0626e9e13ce1b55a
2025-02-08 04:03:57.437 DEBUG [src.node.docker_mananger] Container started with ID ac12ad1ad974. Setting up logs at ./log/docker/node2_2025-02-08_04-03-55__ef688aa7-14db-47bf-98b5-3c9bdab550ff__wakuorg_nwaku:latest.log
2025-02-08 04:03:57.437 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 19635
2025-02-08 04:03:57.437 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:03:58.438 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19635/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:58.441 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:03:58.442 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:03:58.444 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19635/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:58.449 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.42.184/tcp/19636/p2p/16Uiu2HAmFHey44jRwPVqzHKHKMnFBk5FD8sDaf1Kg3g7mz4cYUdY","/ip4/172.18.42.184/tcp/19637/ws/p2p/16Uiu2HAmFHey44jRwPVqzHKHKMnFBk5FD8sDaf1Kg3g7mz4cYUdY"],"enrUri":"enr:-L24QN_z3RAp9ZWy4qoCvN4yBjcPgGWleqjBCnhwfOSR7LkJQ-rkq7r-nQPoKyqTUrMYfTDcdARJcDyK_z3RiE5E3L0CgmlkgnY0gmlwhKwSKriKbXVsdGlhZGRyc5YACASsEiq4Bky0AAoErBIquAZMtd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDJxvyadJg5WuyxZoQEUNRPL1pusQ48m1T_1GLS_N-rjuDdGNwgky0g3VkcIJMtoV3YWt1MgE"}'
2025-02-08 04:03:58.450 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:03:58.451 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19635/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.197.90/tcp/7541/p2p/16Uiu2HAm36a63ME6w7W6pkEXXzAseTsU5NvNXzfxunvUFmjgvTjQ"]'
2025-02-08 04:03:58.454 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:58.454 DEBUG [src.steps.relay] Running fixture setup: subscribe_main_relay_nodes
2025-02-08 04:03:58.455 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7540/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-08 04:03:58.458 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:58.458 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19635/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-08 04:03:58.464 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:58.465 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7540/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:03:58.470 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:58.471 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 04:03:58.571 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-08 04:03:58.571 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7540/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:58.573 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738987438465466368,"ephemeral":false}]'
2025-02-08 04:03:58.575 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-08 04:03:58.575 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19635/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:58.577 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738987438465466368,"ephemeral":false}]'
2025-02-08 04:03:58.579 INFO [src.steps.relay] WARM UP successful!!
2025-02-08 04:03:58.580 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7540/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:03:58.584 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:58.585 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 04:03:58.685 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-08 04:03:58.685 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7540/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:58.688 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738987438580221184,"ephemeral":false}]'
2025-02-08 04:03:58.689 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-08 04:03:58.689 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19635/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:58.691 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738987438580221184,"ephemeral":false}]'
2025-02-08 04:03:58.692 DEBUG [src.node.waku_node] Restarting container with id 44a02f735602
2025-02-08 04:03:59.851 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7540/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:59.955 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7540/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:59.958 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:03:59.958 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:03:59.958 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7540/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:59.960 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.197.90/tcp/7541/p2p/16Uiu2HAm36a63ME6w7W6pkEXXzAseTsU5NvNXzfxunvUFmjgvTjQ","/ip4/172.18.197.90/tcp/7542/ws/p2p/16Uiu2HAm36a63ME6w7W6pkEXXzAseTsU5NvNXzfxunvUFmjgvTjQ"],"enrUri":"enr:-L24QEkVK6wwDHQNlz52wnz2PD5hmt_m0gz1Ck0sm66T9Uq0SSToqQBGeAndSEf620YYz_Opx7S6coNpwQh_e_pv9lUCgmlkgnY0gmlwhKwSxVqKbXVsdGlhZGRyc5YACASsEsVaBh11AAoErBLFWgYddt0DgnJzhQADAQAAiXNlY3AyNTZrMaECcfjMMJ3dXpPgAK--qOi3DKElUHZPAMvbjn07aLrE2juDdGNwgh11g3VkcIIdd4V3YWt1MgE"}'
2025-02-08 04:03:59.960 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:03:59.961 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7540/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-08 04:03:59.979 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:59.979 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19635/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-08 04:03:59.981 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:59.982 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7540/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:03:59.984 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:59.985 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 04:04:00.085 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-08 04:04:00.085 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7540/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:00.087 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738987439982110464,"ephemeral":false}]'
2025-02-08 04:04:00.089 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-08 04:04:00.089 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19635/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:00.091 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[]'
2025-02-08 04:04:01.092 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7540/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-08 04:04:01.094 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:01.094 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19635/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-08 04:04:01.096 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:01.097 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7540/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:04:01.099 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:01.099 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 04:04:01.200 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-08 04:04:01.200 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7540/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:01.202 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738987441097170432,"ephemeral":false}]'
2025-02-08 04:04:01.203 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-08 04:04:01.204 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19635/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:01.206 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[]'
2025-02-08 04:04:02.206 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7540/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-08 04:04:02.209 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:02.209 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19635/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-08 04:04:02.211 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:02.212 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7540/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:04:02.214 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:02.214 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 04:04:02.315 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-08 04:04:02.315 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7540/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:02.317 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738987442211982848,"ephemeral":false}]'
2025-02-08 04:04:02.318 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-08 04:04:02.319 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19635/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:02.321 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[]'
2025-02-08 04:04:03.321 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7540/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-08 04:04:03.324 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:03.324 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19635/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-08 04:04:03.326 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:03.327 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7540/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:04:03.329 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:03.330 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 04:04:03.430 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-08 04:04:03.430 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7540/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:03.432 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738987443327254272,"ephemeral":false}]'
2025-02-08 04:04:03.434 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-08 04:04:03.434 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19635/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:03.436 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[]'
2025-02-08 04:04:04.437 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7540/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-08 04:04:04.439 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:04.439 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19635/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-08 04:04:04.441 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:04.442 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7540/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:04:04.444 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:04.446 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 04:04:04.546 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-08 04:04:04.546 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7540/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:04.549 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738987444442067712,"ephemeral":false}]'
2025-02-08 04:04:04.550 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-08 04:04:04.550 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19635/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:04.552 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[]'
2025-02-08 04:04:05.553 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7540/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-08 04:04:05.555 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:05.556 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19635/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-08 04:04:05.557 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:05.558 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7540/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:04:05.563 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:05.563 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 04:04:05.663 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-08 04:04:05.664 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7540/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:05.666 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738987445558360320,"ephemeral":false}]'
2025-02-08 04:04:05.667 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-08 04:04:05.668 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19635/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:05.670 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738987445558360320,"ephemeral":false}]'
2025-02-08 04:04:05.673 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-08 04:04:05.674 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-08 04:04:05.674 DEBUG [src.node.waku_node] Stopping container with id 44a02f735602
2025-02-08 04:04:06.384 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:04:06.385 DEBUG [src.node.waku_node] Stopping container with id ac12ad1ad974
2025-02-08 04:04:07.228 ERROR [src.node.docker_mananger] Max retries reached for container 44a02f735602. Exiting log stream.
2025-02-08 04:04:07.409 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:04:07.412 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-08 04:04:07.439 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 04:04:07.446 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
