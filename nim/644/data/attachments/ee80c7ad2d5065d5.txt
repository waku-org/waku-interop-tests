2025-02-08 04:02:58.813 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-08 04:02:58.814 DEBUG [tests.conftest] Running test: test_filter_subscribe_to_pubsub_topics_from_multiple_clusters with id: 2025-02-08_04-02-58__9b005fbf-3317-4372-a6f8-2815d6831ffb
2025-02-08 04:02:58.814 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-08 04:02:58.814 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-08 04:02:58.815 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-08 04:02:58.820 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:02:58.821 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-08_04-02-58__9b005fbf-3317-4372-a6f8-2815d6831ffb__wakuorg_nwaku:latest.log
2025-02-08 04:02:58.821 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:02:58.821 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:02:58.822 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:02:58.822 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.53.33
2025-02-08 04:02:58.823 DEBUG [src.node.docker_mananger] Generated ports ['15756', '15757', '15758', '15759', '15760']
2025-02-08 04:02:58.823 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:02:58.823 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:02:58.823 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:02:58.823 DEBUG [src.node.docker_mananger] docker run -i -t -p 15756:15756 -p 15757:15757 -p 15758:15758 -p 15759:15759 -p 15760:15760 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15758 --rest-port=15756 --tcp-port=15757 --discv5-udp-port=15759 --rest-address=0.0.0.0 --nat=extip:172.18.53.33 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ccec7b23aa1f6cd03f19bdc89583eaddf39bca36f2eba13d5847bc47fbfa9c2f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15760 --metrics-logging=true --relay=true --filter=true
2025-02-08 04:02:59.048 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.53.33 waku 8d7ba69888347a6e3f10d642d6b8623e2ba81bfb49c0e681b0200903cf3c7d3f
2025-02-08 04:02:59.094 DEBUG [src.node.docker_mananger] Container started with ID 8d7ba6988834. Setting up logs at ./log/docker/node1_2025-02-08_04-02-58__9b005fbf-3317-4372-a6f8-2815d6831ffb__wakuorg_nwaku:latest.log
2025-02-08 04:02:59.095 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 15756
2025-02-08 04:02:59.095 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:02:59.617 ERROR [src.node.docker_mananger] Max retries reached for container f75f769b442c. Exiting log stream.
2025-02-08 04:03:00.096 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15756/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:00.099 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:03:00.099 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:03:00.099 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15756/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:00.101 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.53.33/tcp/15757/p2p/16Uiu2HAmFyWarpup8VJSNsV2xfVPUQjqi5wGf8Dd9qk6SNu77Uxo","/ip4/172.18.53.33/tcp/15758/ws/p2p/16Uiu2HAmFyWarpup8VJSNsV2xfVPUQjqi5wGf8Dd9qk6SNu77Uxo"],"enrUri":"enr:-L24QBd0zmaJ-76nM27uIj2NTfcQRtwxgeXSt3c3wpa9vaSCMl-FvQqQBnirtnW3JS6ZiAm7vkAD9Ny9UEfb48teOpkCgmlkgnY0gmlwhKwSNSGKbXVsdGlhZGRyc5YACASsEjUhBj2NAAoErBI1IQY9jt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDMVGzdIAGpn4oIu5f7gtkfW7UulVZoJV_LFyhrOetLACDdGNwgj2Ng3VkcII9j4V3YWt1MgU"}'
2025-02-08 04:03:00.101 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:03:00.102 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-08 04:03:00.108 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:03:00.108 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-08_04-02-58__9b005fbf-3317-4372-a6f8-2815d6831ffb__wakuorg_nwaku:latest.log
2025-02-08 04:03:00.108 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:03:00.108 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:03:00.109 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:03:00.109 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.28.79
2025-02-08 04:03:00.110 DEBUG [src.node.docker_mananger] Generated ports ['59209', '59210', '59211', '59212', '59213']
2025-02-08 04:03:00.110 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:03:00.110 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:03:00.110 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:03:00.110 DEBUG [src.node.docker_mananger] docker run -i -t -p 59209:59209 -p 59210:59210 -p 59211:59211 -p 59212:59212 -p 59213:59213 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=59211 --rest-port=59209 --tcp-port=59210 --discv5-udp-port=59212 --rest-address=0.0.0.0 --nat=extip:172.18.28.79 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ba0adb26c3d24edb8beda592d845e9b8ffe43a574db578dacbedfeada0ea1898 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=59213 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QBd0zmaJ-76nM27uIj2NTfcQRtwxgeXSt3c3wpa9vaSCMl-FvQqQBnirtnW3JS6ZiAm7vkAD9Ny9UEfb48teOpkCgmlkgnY0gmlwhKwSNSGKbXVsdGlhZGRyc5YACASsEjUhBj2NAAoErBI1IQY9jt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDMVGzdIAGpn4oIu5f7gtkfW7UulVZoJV_LFyhrOetLACDdGNwgj2Ng3VkcII9j4V3YWt1MgU --filternode=/ip4/172.18.53.33/tcp/15757/p2p/16Uiu2HAmFyWarpup8VJSNsV2xfVPUQjqi5wGf8Dd9qk6SNu77Uxo
2025-02-08 04:03:00.337 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.28.79 waku 5a002e8c74f1851259a9dfcd21665a273dcc9e0e63039b43488a590e9f0907d9
2025-02-08 04:03:00.386 DEBUG [src.node.docker_mananger] Container started with ID 5a002e8c74f1. Setting up logs at ./log/docker/node2_2025-02-08_04-02-58__9b005fbf-3317-4372-a6f8-2815d6831ffb__wakuorg_nwaku:latest.log
2025-02-08 04:03:00.386 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 59209
2025-02-08 04:03:00.386 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:03:01.386 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:59209/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:01.389 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:03:01.389 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:03:01.389 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:59209/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:01.392 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.28.79/tcp/59210/p2p/16Uiu2HAkv3LLAQEjTkuXg61qBqEBC33CvDC4ckWRjEP4JdQiHt6w","/ip4/172.18.28.79/tcp/59211/ws/p2p/16Uiu2HAkv3LLAQEjTkuXg61qBqEBC33CvDC4ckWRjEP4JdQiHt6w"],"enrUri":"enr:-L24QBGXEUB4Tz3tZyiBogIFOQeaPgP9zHoHGnTB6kKYYtbWIBQvIrIxkDggcZmpFHpM8ModzyEKtVzKTOiAs0OfS-UCgmlkgnY0gmlwhKwSHE-KbXVsdGlhZGRyc5YACASsEhxPBudKAAoErBIcTwbnS90DgnJzhQADAQAAiXNlY3AyNTZrMaECCSKxMPdBR0R57yvf1oLklG3lmYzeEo1fzu69hEyMoXSDdGNwgudKg3VkcILnTIV3YWt1MgA"}'
2025-02-08 04:03:01.392 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:03:01.392 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:59209/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.53.33/tcp/15757/p2p/16Uiu2HAmFyWarpup8VJSNsV2xfVPUQjqi5wGf8Dd9qk6SNu77Uxo"]'
2025-02-08 04:03:01.428 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:01.433 DEBUG [tests.filter.test_subscribe_create] Running test with pubsub topic: /waku/2/rs/3/1
2025-02-08 04:03:01.433 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15756/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-08 04:03:01.448 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:01.449 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:59209/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "7c8d568e-99b8-467c-8c56-50b325c6cd3a", "contentFilters": ["/waku/2/rs/3/1"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-08 04:03:01.462 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"7c8d568e-99b8-467c-8c56-50b325c6cd3a","statusDesc":"OK"}'
2025-02-08 04:03:01.463 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15756/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/waku/2/rs/3/1", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:03:01.471 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:01.471 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 04:03:01.571 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-08 04:03:01.572 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:59209/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:01.574 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/waku/2/rs/3/1","version":0,"timestamp":1738987381463497216,"ephemeral":false}]'
2025-02-08 04:03:01.576 DEBUG [tests.filter.test_subscribe_create] Running test with pubsub topic: /waku/2/rs/2/2
2025-02-08 04:03:01.576 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15756/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/2"]'
2025-02-08 04:03:01.579 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:01.579 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:59209/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "bb6dc38d-24a4-4b1b-8251-20dd08c9d889", "contentFilters": ["/waku/2/rs/2/2"], "pubsubTopic": "/waku/2/rs/2/2"}'
2025-02-08 04:03:01.586 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"bb6dc38d-24a4-4b1b-8251-20dd08c9d889","statusDesc":"OK"}'
2025-02-08 04:03:01.587 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15756/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/waku/2/rs/2/2", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:03:01.591 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:01.591 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 04:03:01.691 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-08 04:03:01.691 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:59209/filter/v2/messages/%2Fwaku%2F2%2Frs%2F2%2F2" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:01.694 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/waku/2/rs/2/2","version":0,"timestamp":1738987381587257088,"ephemeral":false}]'
2025-02-08 04:03:01.695 DEBUG [tests.filter.test_subscribe_create] Running test with pubsub topic: /waku/2/rs/3/9
2025-02-08 04:03:01.696 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15756/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/9"]'
2025-02-08 04:03:01.698 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:01.699 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:59209/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "a13b1d2a-7105-4f59-bc57-7fe6a03f9008", "contentFilters": ["/waku/2/rs/3/9"], "pubsubTopic": "/waku/2/rs/3/9"}'
2025-02-08 04:03:01.707 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"a13b1d2a-7105-4f59-bc57-7fe6a03f9008","statusDesc":"OK"}'
2025-02-08 04:03:01.707 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15756/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F9" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/waku/2/rs/3/9", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:03:01.712 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:01.712 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 04:03:01.812 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
2025-02-08 04:03:01.812 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:59209/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F9" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:01.815 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/waku/2/rs/3/9","version":0,"timestamp":1738987381707805184,"ephemeral":false}]'
2025-02-08 04:03:01.817 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-08 04:03:01.818 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-08 04:03:01.818 DEBUG [src.node.waku_node] Stopping container with id 8d7ba6988834
2025-02-08 04:03:02.662 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:03:02.663 DEBUG [src.node.waku_node] Stopping container with id 5a002e8c74f1
2025-02-08 04:03:03.491 ERROR [src.node.docker_mananger] Max retries reached for container 8d7ba6988834. Exiting log stream.
2025-02-08 04:03:04.157 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:03:04.159 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-08 04:03:04.170 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 04:03:04.174 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
