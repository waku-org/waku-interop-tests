2025-02-08 04:03:25.146 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-08 04:03:25.146 DEBUG [tests.conftest] Running test: test_light_push_with_with_large_meta with id: 2025-02-08_04-03-25__2d5626de-715e-46ae-9c73-fb47a112bd83
2025-02-08 04:03:25.147 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-08 04:03:25.147 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-08 04:03:25.153 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:03:25.153 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-08_04-03-25__2d5626de-715e-46ae-9c73-fb47a112bd83__wakuorg_nwaku:latest.log
2025-02-08 04:03:25.154 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:03:25.154 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:03:25.155 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:03:25.155 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.223.7
2025-02-08 04:03:25.155 DEBUG [src.node.docker_mananger] Generated ports ['39290', '39291', '39292', '39293', '39294']
2025-02-08 04:03:25.156 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:03:25.156 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:03:25.156 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:03:25.156 DEBUG [src.node.docker_mananger] docker run -i -t -p 39290:39290 -p 39291:39291 -p 39292:39292 -p 39293:39293 -p 39294:39294 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39292 --rest-port=39290 --tcp-port=39291 --discv5-udp-port=39293 --rest-address=0.0.0.0 --nat=extip:172.18.223.7 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c00cdc65b8aafd35fba6f55b026d7b1adfeefd4dcec5ecb0ad4ff2de3dfaf5b5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39294 --metrics-logging=true --lightpush=true --relay=true
2025-02-08 04:03:25.380 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.223.7 waku e223c9da68a05d80c84dae61896095956824ef6a644d4cc2c0bf417ac7812302
2025-02-08 04:03:25.430 DEBUG [src.node.docker_mananger] Container started with ID e223c9da68a0. Setting up logs at ./log/docker/receiving_node1_2025-02-08_04-03-25__2d5626de-715e-46ae-9c73-fb47a112bd83__wakuorg_nwaku:latest.log
2025-02-08 04:03:25.430 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 39290
2025-02-08 04:03:25.430 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:03:25.898 ERROR [src.node.docker_mananger] Max retries reached for container 9ca2e723b2d4. Exiting log stream.
2025-02-08 04:03:26.431 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39290/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:26.434 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:03:26.434 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:03:26.434 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39290/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:26.436 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.223.7/tcp/39291/p2p/16Uiu2HAkvpuiZB1RgjEKcQnosNUgbjip2HZo9mdVxn94qwn6R1Me","/ip4/172.18.223.7/tcp/39292/ws/p2p/16Uiu2HAkvpuiZB1RgjEKcQnosNUgbjip2HZo9mdVxn94qwn6R1Me"],"enrUri":"enr:-L24QBF9Eve-UGxEys12F-XOI-KjyXUFI5Yy8mEOPMkvViX_Y3dAKYWm7VRchNeRXYrRdPasfHVJyZCJOfKGOvaTzwsCgmlkgnY0gmlwhKwS3weKbXVsdGlhZGRyc5YACASsEt8HBpl7AAoErBLfBwaZfN0DgnJzhQADAQAAiXNlY3AyNTZrMaECFM-UDO-Hy-9SWO6r49mcKr_LX14yyWHi9DvjreUNr12DdGNwgpl7g3VkcIKZfYV3YWt1Mgk"}'
2025-02-08 04:03:26.436 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:03:26.443 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:03:26.443 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-08_04-03-25__2d5626de-715e-46ae-9c73-fb47a112bd83__wakuorg_nwaku:latest.log
2025-02-08 04:03:26.443 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:03:26.444 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:03:26.445 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:03:26.445 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.101.114
2025-02-08 04:03:26.445 DEBUG [src.node.docker_mananger] Generated ports ['18678', '18679', '18680', '18681', '18682']
2025-02-08 04:03:26.445 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:03:26.445 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:03:26.446 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:03:26.446 DEBUG [src.node.docker_mananger] docker run -i -t -p 18678:18678 -p 18679:18679 -p 18680:18680 -p 18681:18681 -p 18682:18682 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18680 --rest-port=18678 --tcp-port=18679 --discv5-udp-port=18681 --rest-address=0.0.0.0 --nat=extip:172.18.101.114 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3e13441bbfb24ce19ebf46cd9064cabdb2117af99fd60cbebfb0c4b80bcd5b93 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18682 --metrics-logging=true --lightpush=false --relay=true
2025-02-08 04:03:26.673 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.101.114 waku ad129ece23fbd72f24bbf74c6117c4f13a7860a2ab69e254250d352300d25c32
2025-02-08 04:03:26.733 DEBUG [src.node.docker_mananger] Container started with ID ad129ece23fb. Setting up logs at ./log/docker/receiving_node2_2025-02-08_04-03-25__2d5626de-715e-46ae-9c73-fb47a112bd83__wakuorg_nwaku:latest.log
2025-02-08 04:03:26.733 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 18678
2025-02-08 04:03:26.733 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:03:27.734 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18678/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:27.736 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:03:27.736 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:03:27.737 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18678/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:27.739 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.101.114/tcp/18679/p2p/16Uiu2HAmK5Kija1i1UjnRrv8yf3J6NeeibKc33MyrKDqJ7n8PKsE","/ip4/172.18.101.114/tcp/18680/ws/p2p/16Uiu2HAmK5Kija1i1UjnRrv8yf3J6NeeibKc33MyrKDqJ7n8PKsE"],"enrUri":"enr:-L24QPsDGOsU4LS7ol6wClKr7CLIjDjfYqrgtOc3ObitlGvaXN3PJfscYQCgCsNjYYrVyfbTBdkNcjIUjboMnlpByIUCgmlkgnY0gmlwhKwSZXKKbXVsdGlhZGRyc5YACASsEmVyBkj3AAoErBJlcgZI-N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDX2H2YIPeaAYGRVfAslaqbMrYISGgCcgd5LlwkniQb-mDdGNwgkj3g3VkcIJI-YV3YWt1MgE"}'
2025-02-08 04:03:27.739 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:03:27.739 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18678/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.223.7/tcp/39291/p2p/16Uiu2HAkvpuiZB1RgjEKcQnosNUgbjip2HZo9mdVxn94qwn6R1Me"]'
2025-02-08 04:03:27.782 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:27.790 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:03:27.790 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-08_04-03-25__2d5626de-715e-46ae-9c73-fb47a112bd83__wakuorg_nwaku:latest.log
2025-02-08 04:03:27.790 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:03:27.791 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:03:27.792 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:03:27.793 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.112.41
2025-02-08 04:03:27.793 DEBUG [src.node.docker_mananger] Generated ports ['27896', '27897', '27898', '27899', '27900']
2025-02-08 04:03:27.793 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:03:27.793 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:03:27.793 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:03:27.793 DEBUG [src.node.docker_mananger] docker run -i -t -p 27896:27896 -p 27897:27897 -p 27898:27898 -p 27899:27899 -p 27900:27900 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27898 --rest-port=27896 --tcp-port=27897 --discv5-udp-port=27899 --rest-address=0.0.0.0 --nat=extip:172.18.112.41 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=37a7c5aafee3b5d0ebc1adc23ed3bdd3fb133abcb8eef7e90ffbecab832d6b24 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27900 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QBF9Eve-UGxEys12F-XOI-KjyXUFI5Yy8mEOPMkvViX_Y3dAKYWm7VRchNeRXYrRdPasfHVJyZCJOfKGOvaTzwsCgmlkgnY0gmlwhKwS3weKbXVsdGlhZGRyc5YACASsEt8HBpl7AAoErBLfBwaZfN0DgnJzhQADAQAAiXNlY3AyNTZrMaECFM-UDO-Hy-9SWO6r49mcKr_LX14yyWHi9DvjreUNr12DdGNwgpl7g3VkcIKZfYV3YWt1Mgk --lightpushnode=/ip4/172.18.223.7/tcp/39291/p2p/16Uiu2HAkvpuiZB1RgjEKcQnosNUgbjip2HZo9mdVxn94qwn6R1Me --lightpush=true --relay=false
2025-02-08 04:03:28.036 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.112.41 waku 014a8fdcf59af75e4554e271552d41f3b921592115ae68f2de90aefb6ae78291
2025-02-08 04:03:28.088 DEBUG [src.node.docker_mananger] Container started with ID 014a8fdcf59a. Setting up logs at ./log/docker/lightpush_node1_2025-02-08_04-03-25__2d5626de-715e-46ae-9c73-fb47a112bd83__wakuorg_nwaku:latest.log
2025-02-08 04:03:28.088 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 27896
2025-02-08 04:03:28.088 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:03:29.089 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27896/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:29.092 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:03:29.092 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:03:29.092 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27896/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:29.094 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.112.41/tcp/27897/p2p/16Uiu2HAmSdHPPNvmJBiRLx9A3igH9brjcfm6AGxqtm6pPTqDpCXt","/ip4/172.18.112.41/tcp/27898/ws/p2p/16Uiu2HAmSdHPPNvmJBiRLx9A3igH9brjcfm6AGxqtm6pPTqDpCXt"],"enrUri":"enr:-L24QIrNjT5dlHNDQCHpCBAPC0An-56P-nNv5_ZAVeR1T20JShUce-43d5TxZLKQsEU98rWHEF3nf2akYG3Sb8cqfYUCgmlkgnY0gmlwhKwScCmKbXVsdGlhZGRyc5YACASsEnApBmz5AAoErBJwKQZs-t0DgnJzhQADAQAAiXNlY3AyNTZrMaEDz5O32zDsSRFCDZAE5YlGGMt-JYHzCDM7W9D5DgkF8iODdGNwgmz5g3VkcIJs-4V3YWt1Mgg"}'
2025-02-08 04:03:29.094 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:03:29.095 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27896/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.223.7/tcp/39291/p2p/16Uiu2HAkvpuiZB1RgjEKcQnosNUgbjip2HZo9mdVxn94qwn6R1Me"]'
2025-02-08 04:03:29.130 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:29.131 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27896/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.101.114/tcp/18679/p2p/16Uiu2HAmK5Kija1i1UjnRrv8yf3J6NeeibKc33MyrKDqJ7n8PKsE"]'
2025-02-08 04:03:29.160 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:29.160 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:39290/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-08 04:03:29.168 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:29.169 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18678/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-08 04:03:29.174 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:29.176 DEBUG [src.steps.light_push] Lightpushing message
2025-02-08 04:03:29.177 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27896/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738987409176594688, "meta": "YWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYQ=="}}'
2025-02-08 04:03:29.187 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:27896/lightpush/v1/message. Response content: b'Failed to request a message push: decode_rpc_failure: (kind: InvalidLengthField, field: "meta")'
2025-02-08 04:03:29.190 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-08 04:03:29.191 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-08 04:03:29.191 DEBUG [src.node.waku_node] Stopping container with id e223c9da68a0
2025-02-08 04:03:29.912 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:03:29.912 DEBUG [src.node.waku_node] Stopping container with id ad129ece23fb
2025-02-08 04:03:30.724 ERROR [src.node.docker_mananger] Max retries reached for container e223c9da68a0. Exiting log stream.
2025-02-08 04:03:31.407 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:03:31.407 DEBUG [src.node.waku_node] Stopping container with id 014a8fdcf59a
2025-02-08 04:03:32.220 ERROR [src.node.docker_mananger] Max retries reached for container ad129ece23fb. Exiting log stream.
2025-02-08 04:03:32.898 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:03:32.900 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-08 04:03:32.908 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 04:03:32.914 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 04:03:32.919 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
