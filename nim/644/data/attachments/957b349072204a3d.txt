2025-02-08 04:03:04.652 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-08 04:03:04.652 DEBUG [tests.conftest] Running test: test_filter_ping_on_subscribed_peer with id: 2025-02-08_04-03-04__8ed810c8-246a-4939-b9a9-6222bf1866b8
2025-02-08 04:03:04.653 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-08 04:03:04.653 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-08 04:03:04.653 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-08 04:03:04.659 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:03:04.659 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-08_04-03-04__8ed810c8-246a-4939-b9a9-6222bf1866b8__wakuorg_nwaku:latest.log
2025-02-08 04:03:04.659 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:03:04.659 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:03:04.661 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:03:04.661 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.44.246
2025-02-08 04:03:04.661 DEBUG [src.node.docker_mananger] Generated ports ['10623', '10624', '10625', '10626', '10627']
2025-02-08 04:03:04.661 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:03:04.661 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:03:04.661 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:03:04.661 DEBUG [src.node.docker_mananger] docker run -i -t -p 10623:10623 -p 10624:10624 -p 10625:10625 -p 10626:10626 -p 10627:10627 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=10625 --rest-port=10623 --tcp-port=10624 --discv5-udp-port=10626 --rest-address=0.0.0.0 --nat=extip:172.18.44.246 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=da5fabdc6d05be45ea9deecf1d143fe51ac8d4ea3afb0ccebe593711a97fbc8c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=10627 --metrics-logging=true --relay=true --filter=true
2025-02-08 04:03:04.874 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.44.246 waku 7ed0f507f9d519dbf071919d6f745bddebe865ae055a8da4d2d68879bd73fb22
2025-02-08 04:03:04.921 DEBUG [src.node.docker_mananger] Container started with ID 7ed0f507f9d5. Setting up logs at ./log/docker/node1_2025-02-08_04-03-04__8ed810c8-246a-4939-b9a9-6222bf1866b8__wakuorg_nwaku:latest.log
2025-02-08 04:03:04.921 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 10623
2025-02-08 04:03:04.921 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:03:05.447 ERROR [src.node.docker_mananger] Max retries reached for container 8e38ae52f464. Exiting log stream.
2025-02-08 04:03:05.922 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:10623/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:05.924 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:03:05.925 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:03:05.925 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:10623/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:05.927 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.44.246/tcp/10624/p2p/16Uiu2HAmJJEjDwtjvUzTYRNP3SZUZ11WA6HaNbSBoFoCezX2Uva4","/ip4/172.18.44.246/tcp/10625/ws/p2p/16Uiu2HAmJJEjDwtjvUzTYRNP3SZUZ11WA6HaNbSBoFoCezX2Uva4"],"enrUri":"enr:-L24QKEZLfU6jCrwSvv0QqyPsEv51T4QU2wPZ13fQMcIi-alPZRwlj2OTW7442Ncw2XmP6d0vAElEy5OgwOITRgMj5ACgmlkgnY0gmlwhKwSLPaKbXVsdGlhZGRyc5YACASsEiz2BimAAAoErBIs9gYpgd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDU9UumP0tZpjdpbE67uL41SNtG-fjGbr8zpNC9Vn3f7mDdGNwgimAg3VkcIIpgoV3YWt1MgU"}'
2025-02-08 04:03:05.927 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:03:05.927 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-08 04:03:05.933 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:03:05.933 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-08_04-03-04__8ed810c8-246a-4939-b9a9-6222bf1866b8__wakuorg_nwaku:latest.log
2025-02-08 04:03:05.933 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:03:05.933 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:03:05.934 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:03:05.935 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.17.164
2025-02-08 04:03:05.935 DEBUG [src.node.docker_mananger] Generated ports ['45578', '45579', '45580', '45581', '45582']
2025-02-08 04:03:05.935 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:03:05.935 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:03:05.935 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:03:05.935 DEBUG [src.node.docker_mananger] docker run -i -t -p 45578:45578 -p 45579:45579 -p 45580:45580 -p 45581:45581 -p 45582:45582 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45580 --rest-port=45578 --tcp-port=45579 --discv5-udp-port=45581 --rest-address=0.0.0.0 --nat=extip:172.18.17.164 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=941e6d15ceb4fa53f5b7cce815a80df823ca09ed31ecf4a188604ddef00bce00 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45582 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QKEZLfU6jCrwSvv0QqyPsEv51T4QU2wPZ13fQMcIi-alPZRwlj2OTW7442Ncw2XmP6d0vAElEy5OgwOITRgMj5ACgmlkgnY0gmlwhKwSLPaKbXVsdGlhZGRyc5YACASsEiz2BimAAAoErBIs9gYpgd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDU9UumP0tZpjdpbE67uL41SNtG-fjGbr8zpNC9Vn3f7mDdGNwgimAg3VkcIIpgoV3YWt1MgU --filternode=/ip4/172.18.44.246/tcp/10624/p2p/16Uiu2HAmJJEjDwtjvUzTYRNP3SZUZ11WA6HaNbSBoFoCezX2Uva4
2025-02-08 04:03:06.157 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.17.164 waku 23ace15e2b763ade9137304567bba6aeedf9b34e4b3c649702de646a653647e6
2025-02-08 04:03:06.208 DEBUG [src.node.docker_mananger] Container started with ID 23ace15e2b76. Setting up logs at ./log/docker/node2_2025-02-08_04-03-04__8ed810c8-246a-4939-b9a9-6222bf1866b8__wakuorg_nwaku:latest.log
2025-02-08 04:03:06.208 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 45578
2025-02-08 04:03:06.209 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:03:07.209 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45578/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:07.212 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:03:07.212 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:03:07.212 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45578/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:07.214 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.17.164/tcp/45579/p2p/16Uiu2HAmRiBhPboZadbFZx7Fpag1sepZaaGRGmkYa57PgEzKcAkC","/ip4/172.18.17.164/tcp/45580/ws/p2p/16Uiu2HAmRiBhPboZadbFZx7Fpag1sepZaaGRGmkYa57PgEzKcAkC"],"enrUri":"enr:-L24QDmhNOQBQ6RRLXU1HCUhxQOv2cso5p6LkNobbKrmfS8sapBtvw9BzWNqznfyDrYBAdcv9tOGkJmz3bl5_y7EwoMCgmlkgnY0gmlwhKwSEaSKbXVsdGlhZGRyc5YACASsEhGkBrILAAoErBIRpAayDN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDwfmAh410SnFEihIhVEOxPruhUTq4kqe7JrL84EAIdAWDdGNwgrILg3VkcIKyDYV3YWt1MgA"}'
2025-02-08 04:03:07.214 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:03:07.215 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:45578/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.44.246/tcp/10624/p2p/16Uiu2HAmJJEjDwtjvUzTYRNP3SZUZ11WA6HaNbSBoFoCezX2Uva4"]'
2025-02-08 04:03:07.248 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:07.249 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-08 04:03:07.249 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:10623/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-08 04:03:07.267 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:03:07.268 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:45578/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "e7302d75-b395-4d93-b158-c7d920806117", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-08 04:03:07.279 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"e7302d75-b395-4d93-b158-c7d920806117","statusDesc":"OK"}'
2025-02-08 04:03:07.280 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45578/filter/v2/subscriptions/d779b2dd-d470-4e96-84dc-7d5a404d62e4" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:03:07.287 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"d779b2dd-d470-4e96-84dc-7d5a404d62e4","statusDesc":"OK"}'
2025-02-08 04:03:07.289 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-08 04:03:07.290 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-08 04:03:07.290 DEBUG [src.node.waku_node] Stopping container with id 7ed0f507f9d5
2025-02-08 04:03:08.398 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:03:08.398 DEBUG [src.node.waku_node] Stopping container with id 23ace15e2b76
2025-02-08 04:03:09.225 ERROR [src.node.docker_mananger] Max retries reached for container 7ed0f507f9d5. Exiting log stream.
2025-02-08 04:03:09.877 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:03:09.878 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-08 04:03:09.887 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 04:03:09.890 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
