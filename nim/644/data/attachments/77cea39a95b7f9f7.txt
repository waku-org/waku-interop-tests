2025-02-08 04:04:57.379 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-08 04:04:57.379 DEBUG [tests.conftest] Running test: test_time_filter_big_timestamp with id: 2025-02-08_04-04-57__15f55087-7be9-49ac-8e21-bda35668456a
2025-02-08 04:04:57.379 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-08 04:04:57.380 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-08 04:04:57.380 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-08 04:04:57.386 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:04:57.386 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-08_04-04-57__15f55087-7be9-49ac-8e21-bda35668456a__wakuorg_nwaku:latest.log
2025-02-08 04:04:57.386 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:04:57.386 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:04:57.388 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:04:57.388 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.111.200
2025-02-08 04:04:57.388 DEBUG [src.node.docker_mananger] Generated ports ['22105', '22106', '22107', '22108', '22109']
2025-02-08 04:04:57.388 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:04:57.388 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:04:57.389 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:04:57.389 DEBUG [src.node.docker_mananger] docker run -i -t -p 22105:22105 -p 22106:22106 -p 22107:22107 -p 22108:22108 -p 22109:22109 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22107 --rest-port=22105 --tcp-port=22106 --discv5-udp-port=22108 --rest-address=0.0.0.0 --nat=extip:172.18.111.200 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1283f4a596aeb7caebd1c00322d0509dbdc4d88cac7f1042b8dddaf8a5360a6e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22109 --metrics-logging=true --store=true --relay=true
2025-02-08 04:04:57.615 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.111.200 waku 669740d60ad67d169e47874f715164edba7c83298c1a769a2d382679f51de526
2025-02-08 04:04:57.667 DEBUG [src.node.docker_mananger] Container started with ID 669740d60ad6. Setting up logs at ./log/docker/publishing_node1_2025-02-08_04-04-57__15f55087-7be9-49ac-8e21-bda35668456a__wakuorg_nwaku:latest.log
2025-02-08 04:04:57.668 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 22105
2025-02-08 04:04:57.668 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:04:58.166 ERROR [src.node.docker_mananger] Max retries reached for container 2f3f2b9c36f3. Exiting log stream.
2025-02-08 04:04:58.668 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22105/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:58.671 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:04:58.671 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:04:58.671 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22105/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:58.673 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.111.200/tcp/22106/p2p/16Uiu2HAmPP6iCzfyxaJGaSCBmgGt6hpNiVuXZL9ySwsQF1S9iJbC","/ip4/172.18.111.200/tcp/22107/ws/p2p/16Uiu2HAmPP6iCzfyxaJGaSCBmgGt6hpNiVuXZL9ySwsQF1S9iJbC"],"enrUri":"enr:-L24QAsWz1tCmMDZMo6paLrIeEJYvYEHIt4e4J9TXd7jxOIqfBnt7lwS26h_uT31UqlmbpjCTeCm3tpZQLAk6-nG3rwCgmlkgnY0gmlwhKwSb8iKbXVsdGlhZGRyc5YACASsEm_IBlZaAAoErBJvyAZWW90DgnJzhQADAQAAiXNlY3AyNTZrMaEDn150i5z4WJACanyo_GLgLD3PatWbKazbhHriYvBe-quDdGNwglZag3VkcIJWXIV3YWt1MgM"}'
2025-02-08 04:04:58.673 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:04:58.680 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 04:04:58.680 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-08_04-04-57__15f55087-7be9-49ac-8e21-bda35668456a__wakuorg_nwaku:latest.log
2025-02-08 04:04:58.680 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 04:04:58.680 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 04:04:58.681 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 04:04:58.681 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.172.239
2025-02-08 04:04:58.682 DEBUG [src.node.docker_mananger] Generated ports ['35762', '35763', '35764', '35765', '35766']
2025-02-08 04:04:58.682 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 04:04:58.682 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 04:04:58.682 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 04:04:58.682 DEBUG [src.node.docker_mananger] docker run -i -t -p 35762:35762 -p 35763:35763 -p 35764:35764 -p 35765:35765 -p 35766:35766 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=35764 --rest-port=35762 --tcp-port=35763 --discv5-udp-port=35765 --rest-address=0.0.0.0 --nat=extip:172.18.172.239 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c90169bd6af38bccfacfd9a931d833df85f43f5ab0c91b521a23c7abafb254dd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=35766 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QAsWz1tCmMDZMo6paLrIeEJYvYEHIt4e4J9TXd7jxOIqfBnt7lwS26h_uT31UqlmbpjCTeCm3tpZQLAk6-nG3rwCgmlkgnY0gmlwhKwSb8iKbXVsdGlhZGRyc5YACASsEm_IBlZaAAoErBJvyAZWW90DgnJzhQADAQAAiXNlY3AyNTZrMaEDn150i5z4WJACanyo_GLgLD3PatWbKazbhHriYvBe-quDdGNwglZag3VkcIJWXIV3YWt1MgM --storenode=/ip4/172.18.111.200/tcp/22106/p2p/16Uiu2HAmPP6iCzfyxaJGaSCBmgGt6hpNiVuXZL9ySwsQF1S9iJbC --store=true --relay=true
2025-02-08 04:04:58.905 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.172.239 waku 90edec5ee47c2662adaed93ed90b10971c087a6cea06f28af8ba928add4b798b
2025-02-08 04:04:58.957 DEBUG [src.node.docker_mananger] Container started with ID 90edec5ee47c. Setting up logs at ./log/docker/store_node1_2025-02-08_04-04-57__15f55087-7be9-49ac-8e21-bda35668456a__wakuorg_nwaku:latest.log
2025-02-08 04:04:58.959 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 35762
2025-02-08 04:04:58.959 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 04:04:59.960 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35762/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:59.963 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 04:04:59.963 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 04:04:59.963 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35762/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:04:59.965 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.172.239/tcp/35763/p2p/16Uiu2HAmFKJaW3xwRh45abLTGKTjnNTZyapiTCJH7Pcmc96i6sGU","/ip4/172.18.172.239/tcp/35764/ws/p2p/16Uiu2HAmFKJaW3xwRh45abLTGKTjnNTZyapiTCJH7Pcmc96i6sGU"],"enrUri":"enr:-L24QKE-guSQ3qTm40F7_CGyHU8MRqNKUj63gLNpPvc9wZpIGouB7PWJ3-yYP8OxiXQmRkMqkQ8j87UB-ThvXwtb-lICgmlkgnY0gmlwhKwSrO-KbXVsdGlhZGRyc5YACASsEqzvBouzAAoErBKs7waLtN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDJ4gOCQpcvkX-IoDc-c1zbm18GokKKS0DsYUrOUfufoGDdGNwgouzg3VkcIKLtYV3YWt1MgM"}'
2025-02-08 04:04:59.965 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 04:04:59.966 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35762/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.111.200/tcp/22106/p2p/16Uiu2HAmPP6iCzfyxaJGaSCBmgGt6hpNiVuXZL9ySwsQF1S9iJbC"]'
2025-02-08 04:04:59.968 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:59.968 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22105/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-08 04:04:59.971 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:59.971 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35762/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-08 04:04:59.973 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:59.974 DEBUG [src.steps.store] Relaying message
2025-02-08 04:04:59.975 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22105/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:04:59.980 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:04:59.981 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-08 04:05:00.182 DEBUG [src.steps.store] Relaying message
2025-02-08 04:05:00.182 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22105/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:05:00.188 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:05:00.189 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-08 04:05:00.389 DEBUG [src.steps.store] Relaying message
2025-02-08 04:05:00.390 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22105/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:05:00.395 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:05:00.395 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-08 04:05:00.596 DEBUG [src.steps.store] Relaying message
2025-02-08 04:05:00.596 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22105/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:05:00.602 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:05:00.602 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-08 04:05:00.803 DEBUG [src.steps.store] Relaying message
2025-02-08 04:05:00.803 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22105/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:05:00.809 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:05:00.809 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-08 04:05:01.010 DEBUG [src.steps.store] Relaying message
2025-02-08 04:05:01.010 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22105/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 04:05:01.016 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 04:05:01.017 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-08 04:05:01.217 DEBUG [tests.store.test_time_filter] inquering stored messages with start time 1738987496974624000 after end time 2430187501217325056
2025-02-08 04:05:01.217 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22105/store/v3/messages?includeData=True&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=1738987496974624000&endTime=2430187501217325056&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-08 04:05:01.220 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x402c091972884843c9b77643c527d7ddc0af77c011a0f7c7418ba20c5eef5928","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738987496974624000,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0xe53e968e376e0e727e7f36636c0c730fbebfb10f7f1cb9a7d5a3e8c8540c9761","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738987498974631168,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0x5bbe4d41a712fcdc5d1fda6d811768af6fa85040ffb9c6904ddf12184c44a82a","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738987499874632960,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0xf4b0da53cc8ef428dd9f501d579e0fb778c060fcaa614acc0f8a3b40ae2bad11","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738987500074635008,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0xb11aed092b22f8ab550d336e1e3dbe86ee5eb3133345dcfc22acec44acee0691","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738987501974636032,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0x85f53bd300f1a788a40d6c0f86035f11ee7ee7565ea224e37e4ffb874a9c27f9","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738987509974638080,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"}]}'
2025-02-08 04:05:01.262 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-08 04:05:01.263 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-08 04:05:01.263 DEBUG [src.node.waku_node] Stopping container with id 669740d60ad6
2025-02-08 04:05:02.246 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:05:02.247 DEBUG [src.node.waku_node] Stopping container with id 90edec5ee47c
2025-02-08 04:05:03.059 ERROR [src.node.docker_mananger] Max retries reached for container 669740d60ad6. Exiting log stream.
2025-02-08 04:05:03.752 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 04:05:03.753 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-08 04:05:03.760 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 04:05:03.765 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 04:05:03.766 DEBUG [tests.conftest] Running fixture teardown: attach_logs_on_fail
2025-02-08 04:05:03.766 DEBUG [tests.conftest] Test failed, attempting to attach logs to the allure reports
2025-02-08 04:05:03.766 DEBUG [src.libs.common] Attaching file ./log/docker/store_node1_2025-02-08_04-04-57__15f55087-7be9-49ac-8e21-bda35668456a__wakuorg_nwaku:latest.log
2025-02-08 04:05:03.767 DEBUG [src.libs.common] Attaching file ./log/docker/publishing_node1_2025-02-08_04-04-57__15f55087-7be9-49ac-8e21-bda35668456a__wakuorg_nwaku:latest.log
