[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_with_large_meta with id: 2024-11-11_04-16-24__bec5d7ab-7d47-4453-827d-00fc4060fed9
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-11-11_04-16-24__bec5d7ab-7d47-4453-827d-00fc4060fed9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.54.101
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['34883', '34884', '34885', '34886', '34887']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 34883:34883 -p 34884:34884 -p 34885:34885 -p 34886:34886 -p 34887:34887 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34885 --rest-port=34883 --tcp-port=34884 --discv5-udp-port=34886 --rest-address=0.0.0.0 --nat=extip:172.18.54.101 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=62a11ed935bd578f1607675c0ff6a057deb9edaf6bd1f1bafbf4ee0411a9fd2b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34887 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.54.101 waku 245c03600e583a65e0178667a15ea44a082d07047d5bc4d107b17b10374577d0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 245c03600e58. Setting up logs at ./log/docker/receiving_node1_2024-11-11_04-16-24__bec5d7ab-7d47-4453-827d-00fc4060fed9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 34883
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 1f3b5a195e48. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34883/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34883/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.54.101/tcp/34884/p2p/16Uiu2HAmTaADmLCJVsV4CmQYTvJF9rYi2PHmWxskoa5XW2sAq4vZ","/ip4/172.18.54.101/tcp/34885/ws/p2p/16Uiu2HAmTaADmLCJVsV4CmQYTvJF9rYi2PHmWxskoa5XW2sAq4vZ"],"enrUri":"enr:-L24QM6Zu74J_nrAzsOgFKlKCnLrP6_lvxs4azyEeQMJK8psNcc9yk8V9WG-BjQhU4TKL8XOYX6gbyHRGfJ3Rcgie50CgmlkgnY0gmlwhKwSNmWKbXVsdGlhZGRyc5YACASsEjZlBohEAAoErBI2ZQaIRd0DgnJzhQADAQAAiXNlY3AyNTZrMaED3aKPaMAp85y9UP5g0GRoQrmuMy0KZS0TvxfUp0-Sap6DdGNwgohEg3VkcIKIRoV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-11-11_04-16-24__bec5d7ab-7d47-4453-827d-00fc4060fed9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.247.208
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['62123', '62124', '62125', '62126', '62127']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 62123:62123 -p 62124:62124 -p 62125:62125 -p 62126:62126 -p 62127:62127 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62125 --rest-port=62123 --tcp-port=62124 --discv5-udp-port=62126 --rest-address=0.0.0.0 --nat=extip:172.18.247.208 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=aecd4aa4acfa02dbb738cf2eabdaadceecfdd739e097dc9e4ee77e944acb9bff --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62127 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.247.208 waku f83c569bd96a0f3b8dd9d92b6b0d9b174748c84fa71100623b58bb29a371f03c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID f83c569bd96a. Setting up logs at ./log/docker/receiving_node2_2024-11-11_04-16-24__bec5d7ab-7d47-4453-827d-00fc4060fed9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 62123
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62123/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62123/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.247.208/tcp/62124/p2p/16Uiu2HAmK4R864UNqYB3BWfxwkfZK5dBRbZ87rjNQpArPkppnE6h","/ip4/172.18.247.208/tcp/62125/ws/p2p/16Uiu2HAmK4R864UNqYB3BWfxwkfZK5dBRbZ87rjNQpArPkppnE6h"],"enrUri":"enr:-L24QHcJmGgi9sachgD7TdMSL7TZzqwd4orW6_c6mXa66phTL_w6ekME4UxTN_Rhhf8dP8g87r0jvaEQAOHrtqaxg2ACgmlkgnY0gmlwhKwS99CKbXVsdGlhZGRyc5YACASsEvfQBvKsAAoErBL30Abyrd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDXyZ9iiDaaAmyR-9Bvk_MUiyAgbHh-xibL1HrnRCl9jaDdGNwgvKsg3VkcILyroV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62123/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.54.101/tcp/34884/p2p/16Uiu2HAmTaADmLCJVsV4CmQYTvJF9rYi2PHmWxskoa5XW2sAq4vZ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-11-11_04-16-24__bec5d7ab-7d47-4453-827d-00fc4060fed9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.106.251
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['44173', '44174', '44175', '44176', '44177']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 44173:44173 -p 44174:44174 -p 44175:44175 -p 44176:44176 -p 44177:44177 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44175 --rest-port=44173 --tcp-port=44174 --discv5-udp-port=44176 --rest-address=0.0.0.0 --nat=extip:172.18.106.251 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f49f3c980e93f094b1b4c3df27b282cab4bce1a04eb92d8de47df0bee7b5ede6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44177 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QM6Zu74J_nrAzsOgFKlKCnLrP6_lvxs4azyEeQMJK8psNcc9yk8V9WG-BjQhU4TKL8XOYX6gbyHRGfJ3Rcgie50CgmlkgnY0gmlwhKwSNmWKbXVsdGlhZGRyc5YACASsEjZlBohEAAoErBI2ZQaIRd0DgnJzhQADAQAAiXNlY3AyNTZrMaED3aKPaMAp85y9UP5g0GRoQrmuMy0KZS0TvxfUp0-Sap6DdGNwgohEg3VkcIKIRoV3YWt1Mgk --lightpushnode=/ip4/172.18.54.101/tcp/34884/p2p/16Uiu2HAmTaADmLCJVsV4CmQYTvJF9rYi2PHmWxskoa5XW2sAq4vZ --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.106.251 waku 01212ed729efb152e54c33cf2b9c11152a6c3226ac535b5d8dbf50c092fc39d2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 01212ed729ef. Setting up logs at ./log/docker/lightpush_node1_2024-11-11_04-16-24__bec5d7ab-7d47-4453-827d-00fc4060fed9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 44173
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44173/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44173/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.106.251/tcp/44174/p2p/16Uiu2HAmU4Hj8F64sEPL3rH1zVTdak2iUjP4WkHaU7B1YWDcLP1n","/ip4/172.18.106.251/tcp/44175/ws/p2p/16Uiu2HAmU4Hj8F64sEPL3rH1zVTdak2iUjP4WkHaU7B1YWDcLP1n"],"enrUri":"enr:-L24QBdox2zmCUljP7u-18dGAp_e-O39mb74p14MNuvCy434XVhqign6bsVrnxOTEF16iGIOl9ktvccQcpA3xZdZfwUCgmlkgnY0gmlwhKwSavuKbXVsdGlhZGRyc5YACASsEmr7BqyOAAoErBJq-wasj90DgnJzhQADAQAAiXNlY3AyNTZrMaED5NdPZiGe_R4RUgiZJliGujfxlPQnHsbWxzwRZ0T5_a2DdGNwgqyOg3VkcIKskIV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44173/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.54.101/tcp/34884/p2p/16Uiu2HAmTaADmLCJVsV4CmQYTvJF9rYi2PHmWxskoa5XW2sAq4vZ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44173/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.247.208/tcp/62124/p2p/16Uiu2HAmK4R864UNqYB3BWfxwkfZK5dBRbZ87rjNQpArPkppnE6h"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34883/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62123/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44173/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1731298590194209280, "meta": "YWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYQ=="}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:44173/lightpush/v1/message. Response content: b'Failed to request a message push: decode_rpc_failure: (kind: InvalidLengthField, field: "meta")'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 245c03600e58
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id f83c569bd96a
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 245c03600e58. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 01212ed729ef
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container f83c569bd96a. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.