[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_cant_publish_on_not_subscribed_shard with id: 2024-11-11_04-24-12__861dff1a-09e8-4da7-a9cd-02214b156e53
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-11_04-24-12__861dff1a-09e8-4da7-a9cd-02214b156e53__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.44.98
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['23624', '23625', '23626', '23627', '23628']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 23624:23624 -p 23625:23625 -p 23626:23626 -p 23627:23627 -p 23628:23628 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23626 --rest-port=23624 --tcp-port=23625 --discv5-udp-port=23627 --rest-address=0.0.0.0 --nat=extip:172.18.44.98 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=fdde32d5273af8d73b9ae7b6780a33d6294bd50c6d5e131e96643db00abe830b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23628 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/2/0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.44.98 waku d6ddd37237e156d7b379c2314c6af14353fecdf9c7b8813f0fabadbdbf40f237
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID d6ddd37237e1. Setting up logs at ./log/docker/node1_2024-11-11_04-24-12__861dff1a-09e8-4da7-a9cd-02214b156e53__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 23624
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 58a380a90b95. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23624/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23624/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.44.98/tcp/23625/p2p/16Uiu2HAmSysxr59Pyzpd2wzS3paqFdVP12J1xzY2i51BsqmkQzuR","/ip4/172.18.44.98/tcp/23626/ws/p2p/16Uiu2HAmSysxr59Pyzpd2wzS3paqFdVP12J1xzY2i51BsqmkQzuR"],"enrUri":"enr:-L24QBE-iCJTTna0KF7k6_mkZnwDX7qj9H-0ZKibliDkV8EAe4nstUDqrWMsaKEm-IuD31o3DhoZoHmCTFN9e5an9NkCgmlkgnY0gmlwhKwSLGKKbXVsdGlhZGRyc5YACASsEixiBlxJAAoErBIsYgZcSt0DgnJzhQACAQAAiXNlY3AyNTZrMaED1NpuO4jGXPDwVYLupwNhuCnJApoBA1AE8E4tMSkVpqyDdGNwglxJg3VkcIJcS4V3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-11-11_04-24-12__861dff1a-09e8-4da7-a9cd-02214b156e53__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.218.221
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['59030', '59031', '59032', '59033', '59034']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 59030:59030 -p 59031:59031 -p 59032:59032 -p 59033:59033 -p 59034:59034 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=59032 --rest-port=59030 --tcp-port=59031 --discv5-udp-port=59033 --rest-address=0.0.0.0 --nat=extip:172.18.218.221 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=fef41cddf2d677a6e9d25b7f2a39c2adf9bebfa8cb69eed12ef0162a051fc65d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=59034 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QBE-iCJTTna0KF7k6_mkZnwDX7qj9H-0ZKibliDkV8EAe4nstUDqrWMsaKEm-IuD31o3DhoZoHmCTFN9e5an9NkCgmlkgnY0gmlwhKwSLGKKbXVsdGlhZGRyc5YACASsEixiBlxJAAoErBIsYgZcSt0DgnJzhQACAQAAiXNlY3AyNTZrMaED1NpuO4jGXPDwVYLupwNhuCnJApoBA1AE8E4tMSkVpqyDdGNwglxJg3VkcIJcS4V3YWt1MgU --pubsub-topic=/waku/2/rs/2/0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.218.221 waku 691a9cb1f88c7cdb03e32409ce6570259e21635f9953f3417df7c6394d553211
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 691a9cb1f88c. Setting up logs at ./log/docker/node2_2024-11-11_04-24-12__861dff1a-09e8-4da7-a9cd-02214b156e53__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 59030
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59030/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59030/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.218.221/tcp/59031/p2p/16Uiu2HAmQ5bEySQQBqQSx6AYHrJfyYacChJYzgh4H3VjEULhwtvG","/ip4/172.18.218.221/tcp/59032/ws/p2p/16Uiu2HAmQ5bEySQQBqQSx6AYHrJfyYacChJYzgh4H3VjEULhwtvG"],"enrUri":"enr:-L24QAqg10XKheyqV_UwUkBUU1lW_yuxrG9aPHb7vDphzxUwBhQhJ6g_VkxtW-21r1famsEvCo1hTR1u2Q_dvlwvyiECgmlkgnY0gmlwhKwS2t2KbXVsdGlhZGRyc5YACASsEtrdBuaXAAoErBLa3QbmmN0DgnJzhQACAQAAiXNlY3AyNTZrMaEDqb3ydW1iFpblXWKMG1PObn03yIx71-aJ6HIc7U2FH02DdGNwguaXg3VkcILmmYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59030/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.44.98/tcp/23625/p2p/16Uiu2HAmSysxr59Pyzpd2wzS3paqFdVP12J1xzY2i51BsqmkQzuR"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23624/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59030/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23624/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F1" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:23624/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F1. Response content: b'Failed to publish: Node not subscribed to topic: /waku/2/rs/2/1'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id d6ddd37237e1
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 691a9cb1f88c
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container d6ddd37237e1. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.