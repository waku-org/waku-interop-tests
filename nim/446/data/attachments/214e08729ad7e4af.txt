[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_msg_stored_when_ephemeral_false with id: 2024-11-11_04-08-22__06ab4d53-1d06-4668-afe6-bc8d5e4a00a9
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-11_04-08-22__06ab4d53-1d06-4668-afe6-bc8d5e4a00a9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-11-11_04-08-22__06ab4d53-1d06-4668-afe6-bc8d5e4a00a9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-11-11_04-08-22__06ab4d53-1d06-4668-afe6-bc8d5e4a00a9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:407 Start 3 nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.88.233
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['33643', '33644', '33645', '33646', '33647']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 33643:33643 -p 33644:33644 -p 33645:33645 -p 33646:33646 -p 33647:33647 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=33645 --rest-port=33643 --tcp-port=33644 --discv5-udp-port=33646 --rest-address=0.0.0.0 --nat=extip:172.18.88.233 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=addb2cddc64da0065fc7dfcda25bdc1f297c74cdf16bbcda6bd106bfaac9054b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=33647 --metrics-logging=true --relay=true --store=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.88.233 waku be1cfa4ab67e99cb4b917fce51e25726a864f1ee63811500484f5e8a2318e91e
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container a4790fb9fa34. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID be1cfa4ab67e. Setting up logs at ./log/docker/node1_2024-11-11_04-08-22__06ab4d53-1d06-4668-afe6-bc8d5e4a00a9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 33643
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33643/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33643/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.88.233/tcp/33644/p2p/16Uiu2HAmAEDXW35VytS9KdGAD8zHDMryGSxkyPzKa6zCaGJPMTLz","/ip4/172.18.88.233/tcp/33645/ws/p2p/16Uiu2HAmAEDXW35VytS9KdGAD8zHDMryGSxkyPzKa6zCaGJPMTLz"],"enrUri":"enr:-L24QB2eSRO-z3oJAFJm_gcCkN3KxfJHKa394EbpcI6d44c6O8VWsLwGXz4DxRhqeKJ1W76QUDa7B_eFBgIkhCWjrNECgmlkgnY0gmlwhKwSWOmKbXVsdGlhZGRyc5YACASsEljpBoNsAAoErBJY6QaDbd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC2_ABD1muA7cr7ONPfUrYeZG0U4Buf8F4YVEelNnNPY-DdGNwgoNsg3VkcIKDboV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.28.239
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['46249', '46250', '46251', '46252', '46253']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 46249:46249 -p 46250:46250 -p 46251:46251 -p 46252:46252 -p 46253:46253 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=46251 --rest-port=46249 --tcp-port=46250 --discv5-udp-port=46252 --rest-address=0.0.0.0 --nat=extip:172.18.28.239 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1c3572aea559d74ff80cafafd35e2b6a0451fbcdbcdbcad4a6b29cc40bd11190 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=46253 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-L24QB2eSRO-z3oJAFJm_gcCkN3KxfJHKa394EbpcI6d44c6O8VWsLwGXz4DxRhqeKJ1W76QUDa7B_eFBgIkhCWjrNECgmlkgnY0gmlwhKwSWOmKbXVsdGlhZGRyc5YACASsEljpBoNsAAoErBJY6QaDbd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC2_ABD1muA7cr7ONPfUrYeZG0U4Buf8F4YVEelNnNPY-DdGNwgoNsg3VkcIKDboV3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.28.239 waku 7570e07e1c5237a56735825844ac43f0d114ce433a8588ac98224dd02f4dfc0f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 7570e07e1c52. Setting up logs at ./log/docker/node2_2024-11-11_04-08-22__06ab4d53-1d06-4668-afe6-bc8d5e4a00a9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 46249
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46249/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46249/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.28.239/tcp/46250/p2p/16Uiu2HAmASZswynBjkrurUgQmnvnTA8WLu3WEa33bcsMio9iQyz2","/ip4/172.18.28.239/tcp/46251/ws/p2p/16Uiu2HAmASZswynBjkrurUgQmnvnTA8WLu3WEa33bcsMio9iQyz2"],"enrUri":"enr:-L24QB6mBulhHOyjU8cNluSP3TGVOgIlYvRgL9XBAcvSQ_48OPEGnqww8qQmO_TrG4_oGxjjJGWTv_AOs6gLyzMnJIwCgmlkgnY0gmlwhKwSHO-KbXVsdGlhZGRyc5YACASsEhzvBrSqAAoErBIc7wa0q90DgnJzhQADAQAAiXNlY3AyNTZrMaEC3xn8jdXtNzJyzu0h_tFbQOwdgtV-hapAo18qKj4rPPODdGNwgrSqg3VkcIK0rIV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.79.173
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['6850', '6851', '6852', '6853', '6854']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 6850:6850 -p 6851:6851 -p 6852:6852 -p 6853:6853 -p 6854:6854 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6852 --rest-port=6850 --tcp-port=6851 --discv5-udp-port=6853 --rest-address=0.0.0.0 --nat=extip:172.18.79.173 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=71f1db21fd8e6b4a3640b087ec5fe7ed50a1bcbfe5e82c9d001c4822dbfc3ebd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6854 --metrics-logging=true --relay=false --storenode=/ip4/172.18.28.239/tcp/46250/p2p/16Uiu2HAmASZswynBjkrurUgQmnvnTA8WLu3WEa33bcsMio9iQyz2 --discv5-bootstrap-node=enr:-L24QB6mBulhHOyjU8cNluSP3TGVOgIlYvRgL9XBAcvSQ_48OPEGnqww8qQmO_TrG4_oGxjjJGWTv_AOs6gLyzMnJIwCgmlkgnY0gmlwhKwSHO-KbXVsdGlhZGRyc5YACASsEhzvBrSqAAoErBIc7wa0q90DgnJzhQADAQAAiXNlY3AyNTZrMaEC3xn8jdXtNzJyzu0h_tFbQOwdgtV-hapAo18qKj4rPPODdGNwgrSqg3VkcIK0rIV3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.79.173 waku 8f1c9a713f43dffd3c0d892a291c01ffbf5f0810baac27fac21f583ef3566d5d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 8f1c9a713f43. Setting up logs at ./log/docker/node3_2024-11-11_04-08-22__06ab4d53-1d06-4668-afe6-bc8d5e4a00a9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 6850
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6850/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6850/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.79.173/tcp/6851/p2p/16Uiu2HAmNtwdyPvdHam1ugU677JxRmTHsj5uU9jb6D8nM6N9VZPy","/ip4/172.18.79.173/tcp/6852/ws/p2p/16Uiu2HAmNtwdyPvdHam1ugU677JxRmTHsj5uU9jb6D8nM6N9VZPy"],"enrUri":"enr:-L24QKZXPEzWTHweww6gB6RfCVhNLqLcIST6MfM7ZwscjtxZTdpM3hGXYiDEhTJVt_IK-EshOtl_IsL8pkpLDr3QhDsCgmlkgnY0gmlwhKwST62KbXVsdGlhZGRyc5YACASsEk-tBhrDAAoErBJPrQYaxN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDmCfvCCnUulfatSfixG2U2JukFxwU4099Ygxie_LI4PSDdGNwghrDg3VkcIIaxYV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:412 Subscribe node1 ,2 to pubtopic /waku/2/rs/3/1
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33643/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:46249/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33643/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.28.239/tcp/46250/p2p/16Uiu2HAmASZswynBjkrurUgQmnvnTA8WLu3WEa33bcsMio9iQyz2","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46249/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.88.233/tcp/33644/p2p/16Uiu2HAmAEDXW35VytS9KdGAD8zHDMryGSxkyPzKa6zCaGJPMTLz","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:417 Node1 publish message with ephemeral = false
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33643/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "ephemeral": false}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 3 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:421 Check if message is stored 
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6850/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"ed3fb988e1df3787a302","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"y+qQ7ujz7sm5K4wSwFAHXxRjA6rcN9vfKEHHLLyX0yg="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id be1cfa4ab67e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 7570e07e1c52
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container be1cfa4ab67e. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 8f1c9a713f43
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 7570e07e1c52. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.