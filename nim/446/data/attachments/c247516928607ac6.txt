[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_content_topics with id: 2024-11-11_04-15-23__d55d086f-1926-4773-830b-c3b967c00258
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-11-11_04-15-23__d55d086f-1926-4773-830b-c3b967c00258__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.118.187
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['27799', '27800', '27801', '27802', '27803']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 27799:27799 -p 27800:27800 -p 27801:27801 -p 27802:27802 -p 27803:27803 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27801 --rest-port=27799 --tcp-port=27800 --discv5-udp-port=27802 --rest-address=0.0.0.0 --nat=extip:172.18.118.187 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c3bfab5b2322aaba8eb9c9b5ebefca4d3e9d25fa7777e7c44f1ebd17c36ee6ee --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27803 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.118.187 waku cba338c89e43a77b0b1c9287f9a052e87fc3eda33ef174820b73dafcbd91ba4b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID cba338c89e43. Setting up logs at ./log/docker/receiving_node1_2024-11-11_04-15-23__d55d086f-1926-4773-830b-c3b967c00258__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 27799
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 501b123e7a95. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27799/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27799/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.118.187/tcp/27800/p2p/16Uiu2HAmMzXYDfsqWFMpMs48z5HQeZj2nEESx49ugnk6JHnBfgUJ","/ip4/172.18.118.187/tcp/27801/ws/p2p/16Uiu2HAmMzXYDfsqWFMpMs48z5HQeZj2nEESx49ugnk6JHnBfgUJ"],"enrUri":"enr:-L24QMMyJuokgMp-dowoQ0Sm5SrZHg9fUuJYmvRe0S6JqOxMYbFcQnDu0kgD_GkMaHCbxL_eErz3lkGzlgtzTwUSLC0CgmlkgnY0gmlwhKwSdruKbXVsdGlhZGRyc5YACASsEna7BmyYAAoErBJ2uwZsmd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDirp7iu5KCcG30pP8NZXhNJ4rT0nH2pwUBTngzLg8HduDdGNwgmyYg3VkcIJsmoV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-11-11_04-15-23__d55d086f-1926-4773-830b-c3b967c00258__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.249.180
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['36746', '36747', '36748', '36749', '36750']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 36746:36746 -p 36747:36747 -p 36748:36748 -p 36749:36749 -p 36750:36750 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36748 --rest-port=36746 --tcp-port=36747 --discv5-udp-port=36749 --rest-address=0.0.0.0 --nat=extip:172.18.249.180 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=69edcae4ca4dffeec6ecdbb2b1f9bbe4a8c0bcdc4cda8ddb3edae9aa027242c4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36750 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.249.180 waku d5e10084af7f16925c7fdf09b0a2eb7657810640b7aad53fca0acb8c1d48299f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID d5e10084af7f. Setting up logs at ./log/docker/receiving_node2_2024-11-11_04-15-23__d55d086f-1926-4773-830b-c3b967c00258__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 36746
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36746/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36746/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.249.180/tcp/36747/p2p/16Uiu2HAm4Kbx9a3RMaqryMMG2dE1bdnwHiX6sNNH4tmXdWNSnFwQ","/ip4/172.18.249.180/tcp/36748/ws/p2p/16Uiu2HAm4Kbx9a3RMaqryMMG2dE1bdnwHiX6sNNH4tmXdWNSnFwQ"],"enrUri":"enr:-L24QETbjbYPbmH1VfrHBXwl7JhjFXq8QI2D0CXlSRv1NGW_C-as5xdZgVXZSl_plODz_h12EIKCw4E_QphPrBnjQwcCgmlkgnY0gmlwhKwS-bSKbXVsdGlhZGRyc5YACASsEvm0Bo-LAAoErBL5tAaPjN0DgnJzhQADAQAAiXNlY3AyNTZrMaEChCskgXLp_hHH9VjygyJog5Lc2m4hk_6I20p8oYK4s0ODdGNwgo-Lg3VkcIKPjYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36746/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.118.187/tcp/27800/p2p/16Uiu2HAmMzXYDfsqWFMpMs48z5HQeZj2nEESx49ugnk6JHnBfgUJ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-11-11_04-15-23__d55d086f-1926-4773-830b-c3b967c00258__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.80.72
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['3314', '3315', '3316', '3317', '3318']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 3314:3314 -p 3315:3315 -p 3316:3316 -p 3317:3317 -p 3318:3318 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=3316 --rest-port=3314 --tcp-port=3315 --discv5-udp-port=3317 --rest-address=0.0.0.0 --nat=extip:172.18.80.72 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bdd0cfc616f221be8bf3b3f14db79209cddf9cf95c10d4eccdcf11835ddbe144 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=3318 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QMMyJuokgMp-dowoQ0Sm5SrZHg9fUuJYmvRe0S6JqOxMYbFcQnDu0kgD_GkMaHCbxL_eErz3lkGzlgtzTwUSLC0CgmlkgnY0gmlwhKwSdruKbXVsdGlhZGRyc5YACASsEna7BmyYAAoErBJ2uwZsmd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDirp7iu5KCcG30pP8NZXhNJ4rT0nH2pwUBTngzLg8HduDdGNwgmyYg3VkcIJsmoV3YWt1Mgk --lightpushnode=/ip4/172.18.118.187/tcp/27800/p2p/16Uiu2HAmMzXYDfsqWFMpMs48z5HQeZj2nEESx49ugnk6JHnBfgUJ --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.80.72 waku 26598d0a7a2b1a5adfd7ba8cdf5f7e3546e45a3c40b2085be25cd320da2b4ba2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 26598d0a7a2b. Setting up logs at ./log/docker/lightpush_node1_2024-11-11_04-15-23__d55d086f-1926-4773-830b-c3b967c00258__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 3314
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3314/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3314/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.80.72/tcp/3315/p2p/16Uiu2HAkuW7inSpymuH3qGMpa4afmgrfqWRWDZvoapRMd9HkUAPv","/ip4/172.18.80.72/tcp/3316/ws/p2p/16Uiu2HAkuW7inSpymuH3qGMpa4afmgrfqWRWDZvoapRMd9HkUAPv"],"enrUri":"enr:-L24QLe7K3Gn5FJNW9ACwcj3AVGhnwgab4qYmaHRa3C1Uh75HylgF_EKWGcVUae24za4gABu9qruHeFUgWITDNH4UYwCgmlkgnY0gmlwhKwSUEiKbXVsdGlhZGRyc5YACASsElBIBgzzAAoErBJQSAYM9N0DgnJzhQADAQAAiXNlY3AyNTZrMaECASNtzjseElsljDWHdh4hhAaZ-WPx2KKeze9yHD2jvV2DdGNwggzzg3VkcIIM9YV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3314/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.118.187/tcp/27800/p2p/16Uiu2HAmMzXYDfsqWFMpMs48z5HQeZj2nEESx49ugnk6JHnBfgUJ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3314/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.249.180/tcp/36747/p2p/16Uiu2HAm4Kbx9a3RMaqryMMG2dE1bdnwHiX6sNNH4tmXdWNSnFwQ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27799/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36746/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic Empty string
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3314/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "", "timestamp": 1731298528092601344}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:3314/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A dictionary
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3314/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": {"key": "YWFh"}, "timestamp": 1731298528100042496}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:3314/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic An integer
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3314/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": 1234567890, "timestamp": 1731298528104480512}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:3314/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A list
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3314/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": ["YWFh"], "timestamp": 1731298528108369920}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:3314/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A bool
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3314/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": true, "timestamp": 1731298528113267200}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:3314/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id cba338c89e43
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id d5e10084af7f
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container cba338c89e43. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 26598d0a7a2b
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container d5e10084af7f. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.