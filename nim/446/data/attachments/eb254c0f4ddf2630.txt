[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_repeated_filter_requestID with id: 2024-11-11_04-07-36__d3e3eeff-29da-4b1d-8e36-4372b8e38089
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-11_04-07-36__d3e3eeff-29da-4b1d-8e36-4372b8e38089__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-11-11_04-07-36__d3e3eeff-29da-4b1d-8e36-4372b8e38089__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-11-11_04-07-36__d3e3eeff-29da-4b1d-8e36-4372b8e38089__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:347 Create 3 nodes
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:348 Start 3 nodes with their corresponding config
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.143.111
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['10487', '10488', '10489', '10490', '10491']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 10487:10487 -p 10488:10488 -p 10489:10489 -p 10490:10490 -p 10491:10491 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=10489 --rest-port=10487 --tcp-port=10488 --discv5-udp-port=10490 --rest-address=0.0.0.0 --nat=extip:172.18.143.111 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0b10bebc2b3bcb19ec2cdbbdd9248fceb04589b58b2dbb5d07c5b4cfeafae4f4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=10491 --metrics-logging=true --relay=true --store=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.143.111 waku f2fce7a63be2e1bc399bbfcca86741ac0990de81b4e87c025dca6466c8334a1f
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 6f4415bd88c0. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID f2fce7a63be2. Setting up logs at ./log/docker/node1_2024-11-11_04-07-36__d3e3eeff-29da-4b1d-8e36-4372b8e38089__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 10487
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10487/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10487/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.143.111/tcp/10488/p2p/16Uiu2HAmF5s83awECY5SVDJ4SatGv85iefAPs3wiKRHmRQXcPha8","/ip4/172.18.143.111/tcp/10489/ws/p2p/16Uiu2HAmF5s83awECY5SVDJ4SatGv85iefAPs3wiKRHmRQXcPha8"],"enrUri":"enr:-L24QG7af4US1p9QQ0uBlfZ0skWfmn0Es_148lirOPxgff3leSivOYQVhNtAu0Zj9NUXEGwvcXX0FZGqsOn7E9eQZcICgmlkgnY0gmlwhKwSj2-KbXVsdGlhZGRyc5YACASsEo9vBij4AAoErBKPbwYo-d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDJBa4kHk4mTZ7Og_j6Q91AUkIsUG5eY4vDJPyIhmHPkGDdGNwgij4g3VkcIIo-oV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.176.37
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['61175', '61176', '61177', '61178', '61179']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 61175:61175 -p 61176:61176 -p 61177:61177 -p 61178:61178 -p 61179:61179 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61177 --rest-port=61175 --tcp-port=61176 --discv5-udp-port=61178 --rest-address=0.0.0.0 --nat=extip:172.18.176.37 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8f3dbe6703b88fc4ee808b2eeaa91daed7b2b8f7f1517bccecd9b50e1f2a9a2c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61179 --metrics-logging=true --relay=true --store=true --filter=true --discv5-bootstrap-node=enr:-L24QG7af4US1p9QQ0uBlfZ0skWfmn0Es_148lirOPxgff3leSivOYQVhNtAu0Zj9NUXEGwvcXX0FZGqsOn7E9eQZcICgmlkgnY0gmlwhKwSj2-KbXVsdGlhZGRyc5YACASsEo9vBij4AAoErBKPbwYo-d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDJBa4kHk4mTZ7Og_j6Q91AUkIsUG5eY4vDJPyIhmHPkGDdGNwgij4g3VkcIIo-oV3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.176.37 waku 51961958a95284e4b839106bbcddb555d0142ca264469fb535951d615b09e686
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 51961958a952. Setting up logs at ./log/docker/node2_2024-11-11_04-07-36__d3e3eeff-29da-4b1d-8e36-4372b8e38089__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 61175
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61175/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61175/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.176.37/tcp/61176/p2p/16Uiu2HAmAVz47iHvJKAfi79CvudtF12F2NBehoVp2RYJ4wD7DK6a","/ip4/172.18.176.37/tcp/61177/ws/p2p/16Uiu2HAmAVz47iHvJKAfi79CvudtF12F2NBehoVp2RYJ4wD7DK6a"],"enrUri":"enr:-L24QEZT0zd897QYd8YpvSYovUHPYN3CiLxR1KMiklq4iTt8Ykdepaaa6jlCPHpqSkGhaEXmsz5x5azkr7qLx0hXPOoCgmlkgnY0gmlwhKwSsCWKbXVsdGlhZGRyc5YACASsErAlBu74AAoErBKwJQbu-d0DgnJzhQADAQAAiXNlY3AyNTZrMaEC3_oQZxvPnTBAJCkVedC560gMJutDx6C_6zQpNxMVOYuDdGNwgu74g3VkcILu-oV3YWt1Mgc"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.159.169
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['36992', '36993', '36994', '36995', '36996']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 36992:36992 -p 36993:36993 -p 36994:36994 -p 36995:36995 -p 36996:36996 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36994 --rest-port=36992 --tcp-port=36993 --discv5-udp-port=36995 --rest-address=0.0.0.0 --nat=extip:172.18.159.169 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cd32bc3df78416f372051bb68331def5eef32e6b5fb8efd879aeee936fdf1aaa --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36996 --metrics-logging=true --relay=true --filternode=/ip4/172.18.176.37/tcp/61176/p2p/16Uiu2HAmAVz47iHvJKAfi79CvudtF12F2NBehoVp2RYJ4wD7DK6a --store=false --discv5-bootstrap-node=enr:-L24QEZT0zd897QYd8YpvSYovUHPYN3CiLxR1KMiklq4iTt8Ykdepaaa6jlCPHpqSkGhaEXmsz5x5azkr7qLx0hXPOoCgmlkgnY0gmlwhKwSsCWKbXVsdGlhZGRyc5YACASsErAlBu74AAoErBKwJQbu-d0DgnJzhQADAQAAiXNlY3AyNTZrMaEC3_oQZxvPnTBAJCkVedC560gMJutDx6C_6zQpNxMVOYuDdGNwgu74g3VkcILu-oV3YWt1Mgc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.159.169 waku a4790fb9fa34277dd4936fd1bdae9d8c455fbed8dd7dab0fd26a385478f27304
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID a4790fb9fa34. Setting up logs at ./log/docker/node3_2024-11-11_04-07-36__d3e3eeff-29da-4b1d-8e36-4372b8e38089__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 36992
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36992/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36992/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.159.169/tcp/36993/p2p/16Uiu2HAmTSMiTJKGKhdQtTumQuWwkpq8PCb2ivJmYJ5rQ4xZiZNL","/ip4/172.18.159.169/tcp/36994/ws/p2p/16Uiu2HAmTSMiTJKGKhdQtTumQuWwkpq8PCb2ivJmYJ5rQ4xZiZNL"],"enrUri":"enr:-L24QIedFTudsVdySjgBgKZ1u-gx_06h7ySydknX0qesYsamGJzoM4oIrjZCDboB3fqa8Z31FqXWO6ieZUDBiVYWsS0CgmlkgnY0gmlwhKwSn6mKbXVsdGlhZGRyc5YACASsEp-pBpCBAAoErBKfqQaQgt0DgnJzhQADAQAAiXNlY3AyNTZrMaED26LpJuh0HsKzvNqkNEKRmjfIsltF4DLyTZoH0EmjOl2DdGNwgpCBg3VkcIKQg4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:353 Subscribe nodes to relay  pubsub topics
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10487/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61175/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:357 Wait for all nodes auto connection
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10487/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.176.37/tcp/61176/p2p/16Uiu2HAmAVz47iHvJKAfi79CvudtF12F2NBehoVp2RYJ4wD7DK6a","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61175/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.143.111/tcp/10488/p2p/16Uiu2HAmF5s83awECY5SVDJ4SatGv85iefAPs3wiKRHmRQXcPha8","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:361 Node3 subscribe to filter for pubsubtopic  /waku/2/rs/3/1 2 times with same request id
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36992/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36992/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:370 Node1 publish message for topic /waku/2/rs/3/1
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10487/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 5 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36992/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:374 Response for node 3 is []
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36992/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:378 Response for node3 using same request ID is []
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id f2fce7a63be2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 51961958a952
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container f2fce7a63be2. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id a4790fb9fa34
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 51961958a952. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.