[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_relay_and_store__peer_only_store with id: 2024-05-12_04-23-14__615eba2d-1ca6-47c6-a150-78427db677d7
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-12_04-23-14__615eba2d-1ca6-47c6-a150-78427db677d7__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.245.191
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['30747', '30748', '30749', '30750', '30751']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:345 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 30747:30747 -p 30748:30748 -p 30749:30749 -p 30750:30750 -p 30751:30751 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=30749 --rest-port=30747 --tcp-port=30748 --discv5-udp-port=30750 --rest-address=0.0.0.0 --nat=extip:172.18.245.191 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=30751 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.245.191 waku e418b11b8c31a575e8e9f8b5793b197dfd61fabb54c0742786eab9a5925eaeef
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID e418b11b8c31. Setting up logs at ./log/docker/publishing_node1_2024-05-12_04-23-14__615eba2d-1ca6-47c6-a150-78427db677d7__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 30747
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30747/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:209 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30747/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.245.191/tcp/30748/p2p/16Uiu2HAmBx96iTLouMG2tJ7EpDAss4UsFuK24NZK4yBCE1aejmcL","/ip4/172.18.245.191/tcp/30749/ws/p2p/16Uiu2HAmBx96iTLouMG2tJ7EpDAss4UsFuK24NZK4yBCE1aejmcL"],"enrUri":"enr:-LO4QI-B9w3GJQ99duZha_ISz9TebNVHfOdtTKHYTHcXn9UNRlyIIv_sCEomhV5Czuhkf8k_QJffFyBZ-EIydGtIOSkBgmlkgnY0gmlwhKwS9b-KbXVsdGlhZGRyc4wACgSsEvW_Bngd3QOCcnOFAAABAACJc2VjcDI1NmsxoQL1iRQ7qUQS6MZDpcfLU4Vykyu1VltSJfv0Wtbv7lzRMYN0Y3CCeByDdWRwgngehXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-12_04-23-14__615eba2d-1ca6-47c6-a150-78427db677d7__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.247.222
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['61547', '61548', '61549', '61550', '61551']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:345 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 61547:61547 -p 61548:61548 -p 61549:61549 -p 61550:61550 -p 61551:61551 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61549 --rest-port=61547 --tcp-port=61548 --discv5-udp-port=61550 --rest-address=0.0.0.0 --nat=extip:172.18.247.222 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61551 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QI-B9w3GJQ99duZha_ISz9TebNVHfOdtTKHYTHcXn9UNRlyIIv_sCEomhV5Czuhkf8k_QJffFyBZ-EIydGtIOSkBgmlkgnY0gmlwhKwS9b-KbXVsdGlhZGRyc4wACgSsEvW_Bngd3QOCcnOFAAABAACJc2VjcDI1NmsxoQL1iRQ7qUQS6MZDpcfLU4Vykyu1VltSJfv0Wtbv7lzRMYN0Y3CCeByDdWRwgngehXdha3UyAw --storenode=/ip4/172.18.245.191/tcp/30748/p2p/16Uiu2HAmBx96iTLouMG2tJ7EpDAss4UsFuK24NZK4yBCE1aejmcL --store=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.247.222 waku 285f741ba74af36021b9b9d96812e07da4e289ac19b0cfcd0cff72057509ed44
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 285f741ba74a. Setting up logs at ./log/docker/store_node1_2024-05-12_04-23-14__615eba2d-1ca6-47c6-a150-78427db677d7__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 61547
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61547/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:209 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61547/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.247.222/tcp/61548/p2p/16Uiu2HAm7QaRENs7cieHLzp2MbeMifQyBs5KXpwhzDqUTtvsDcUR","/ip4/172.18.247.222/tcp/61549/ws/p2p/16Uiu2HAm7QaRENs7cieHLzp2MbeMifQyBs5KXpwhzDqUTtvsDcUR"],"enrUri":"enr:-LO4QHAdz_UjWGR0BZGRjYk5xcKL9c0nyrgXjXC3AApiEX5kbrd89NyF-kTsIwFf9Rra8W6w1g4E-7zjGHE8DwJkOsQBgmlkgnY0gmlwhKwS996KbXVsdGlhZGRyc4wACgSsEvfeBvBt3QOCcnOFAAABAACJc2VjcDI1NmsxoQKyBF--J99Q2MPCcnoYjTviKh4WwKlc8s3Pw4cI4frWAoN0Y3CC8GyDdWRwgvBuhXdha3UyAg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61547/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.245.191/tcp/30748/p2p/16Uiu2HAmBx96iTLouMG2tJ7EpDAss4UsFuK24NZK4yBCE1aejmcL"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30747/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30747/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30747/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1715487797468918272,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id e418b11b8c31
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 285f741ba74a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-12_04-23-14__615eba2d-1ca6-47c6-a150-78427db677d7__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-12_04-23-14__615eba2d-1ca6-47c6-a150-78427db677d7__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_relay_and_store__peer_only_store with id: 2024-05-12_04-23-21__61f2cfa0-6de3-47c9-87d3-b89a75387a00
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-12_04-23-21__61f2cfa0-6de3-47c9-87d3-b89a75387a00__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.201.1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['34006', '34007', '34008', '34009', '34010']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:345 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 34006:34006 -p 34007:34007 -p 34008:34008 -p 34009:34009 -p 34010:34010 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34008 --rest-port=34006 --tcp-port=34007 --discv5-udp-port=34009 --rest-address=0.0.0.0 --nat=extip:172.18.201.1 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34010 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.201.1 waku 2a91ab205e68e03759a3d4485bacf1217b3e366724f45743efa59725e4401b32
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 2a91ab205e68. Setting up logs at ./log/docker/publishing_node1_2024-05-12_04-23-21__61f2cfa0-6de3-47c9-87d3-b89a75387a00__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 34006
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34006/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:209 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34006/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.201.1/tcp/34007/p2p/16Uiu2HAm1stLKEDfzpdbHA1CZJAgBWCBoTMf8fdJP4n17C7fDdch","/ip4/172.18.201.1/tcp/34008/ws/p2p/16Uiu2HAm1stLKEDfzpdbHA1CZJAgBWCBoTMf8fdJP4n17C7fDdch"],"enrUri":"enr:-LO4QEPKlFIvsfmHMDOwOGf-cEAcpfHUZDM-a2av7hJFP6KHM3sKrzO1gdzX_80vn3Bz8ZChj-87As_KOqGxoM8bYLsBgmlkgnY0gmlwhKwSyQGKbXVsdGlhZGRyc4wACgSsEskBBoTY3QOCcnOFAAABAACJc2VjcDI1NmsxoQJf3TDsIppWTu1mCBZo4Mp6ifZU86Vw33sD6ZzsTPOO5oN0Y3CChNeDdWRwgoTZhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-12_04-23-21__61f2cfa0-6de3-47c9-87d3-b89a75387a00__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.204.197
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['8806', '8807', '8808', '8809', '8810']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:345 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 8806:8806 -p 8807:8807 -p 8808:8808 -p 8809:8809 -p 8810:8810 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8808 --rest-port=8806 --tcp-port=8807 --discv5-udp-port=8809 --rest-address=0.0.0.0 --nat=extip:172.18.204.197 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8810 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QEPKlFIvsfmHMDOwOGf-cEAcpfHUZDM-a2av7hJFP6KHM3sKrzO1gdzX_80vn3Bz8ZChj-87As_KOqGxoM8bYLsBgmlkgnY0gmlwhKwSyQGKbXVsdGlhZGRyc4wACgSsEskBBoTY3QOCcnOFAAABAACJc2VjcDI1NmsxoQJf3TDsIppWTu1mCBZo4Mp6ifZU86Vw33sD6ZzsTPOO5oN0Y3CChNeDdWRwgoTZhXdha3UyAw --storenode=/ip4/172.18.201.1/tcp/34007/p2p/16Uiu2HAm1stLKEDfzpdbHA1CZJAgBWCBoTMf8fdJP4n17C7fDdch --store=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.204.197 waku 316e8e1fffa124177f341c4ec76aa34c3ac83d51a770e96fc0150abf4938c053
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 316e8e1fffa1. Setting up logs at ./log/docker/store_node1_2024-05-12_04-23-21__61f2cfa0-6de3-47c9-87d3-b89a75387a00__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 8806
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8806/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:209 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8806/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.204.197/tcp/8807/p2p/16Uiu2HAmFaU5HZMLjmnP6MYgNc9gFFR26CuTd4f277JFBfvhWnS6","/ip4/172.18.204.197/tcp/8808/ws/p2p/16Uiu2HAmFaU5HZMLjmnP6MYgNc9gFFR26CuTd4f277JFBfvhWnS6"],"enrUri":"enr:-LO4QHv-IoaVT8dxAENZZZu4YJcwl_uLqgnB9M-HlppK938aUdHxJNAqa2Hp99Hl5ge-FfYPVOhdei5l7VGbRvTNtS4BgmlkgnY0gmlwhKwSzMWKbXVsdGlhZGRyc4wACgSsEszFBiJo3QOCcnOFAAABAACJc2VjcDI1NmsxoQMraoEjaRR10yqCbUg3Py9rMQXpkuFcaCY0ajsD2ydmq4N0Y3CCImeDdWRwgiJphXdha3UyAg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8806/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.201.1/tcp/34007/p2p/16Uiu2HAm1stLKEDfzpdbHA1CZJAgBWCBoTMf8fdJP4n17C7fDdch"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34006/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34006/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34006/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1715487804435494400,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 2a91ab205e68
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 316e8e1fffa1
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-12_04-23-21__61f2cfa0-6de3-47c9-87d3-b89a75387a00__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-12_04-23-21__61f2cfa0-6de3-47c9-87d3-b89a75387a00__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_relay_and_store__peer_only_store with id: 2024-05-12_04-23-29__a9971b91-c6f5-404b-a8ba-bd47e010b0fd
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-12_04-23-29__a9971b91-c6f5-404b-a8ba-bd47e010b0fd__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.7.198
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['19750', '19751', '19752', '19753', '19754']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:345 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 19750:19750 -p 19751:19751 -p 19752:19752 -p 19753:19753 -p 19754:19754 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19752 --rest-port=19750 --tcp-port=19751 --discv5-udp-port=19753 --rest-address=0.0.0.0 --nat=extip:172.18.7.198 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19754 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.7.198 waku 567b46c8583a1656293ed50ce87e0f1fe141c0bccec35b94c34952df1274daf1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 567b46c8583a. Setting up logs at ./log/docker/publishing_node1_2024-05-12_04-23-29__a9971b91-c6f5-404b-a8ba-bd47e010b0fd__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 19750
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19750/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:209 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19750/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.7.198/tcp/19751/p2p/16Uiu2HAmK2CAYaTq42WZd46v46faxECsxczPy8EcbB8X57B6XK2c","/ip4/172.18.7.198/tcp/19752/ws/p2p/16Uiu2HAmK2CAYaTq42WZd46v46faxECsxczPy8EcbB8X57B6XK2c"],"enrUri":"enr:-LO4QIFRGK10hKQTPBAfsT6HojMdHaN1Z_wrJIXcv5u-49TFNTu9uIEk0jLGHxRyFycj0bDA9qAlF300czp3Zx6VH1wBgmlkgnY0gmlwhKwSB8aKbXVsdGlhZGRyc4wACgSsEgfGBk0o3QOCcnOFAAABAACJc2VjcDI1NmsxoQNelK1yYbrwmoV7VB6SuWt0Xdi_83WE68BQKnLPMONCpYN0Y3CCTSeDdWRwgk0phXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-12_04-23-29__a9971b91-c6f5-404b-a8ba-bd47e010b0fd__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.23.103
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['64765', '64766', '64767', '64768', '64769']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:345 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 64765:64765 -p 64766:64766 -p 64767:64767 -p 64768:64768 -p 64769:64769 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64767 --rest-port=64765 --tcp-port=64766 --discv5-udp-port=64768 --rest-address=0.0.0.0 --nat=extip:172.18.23.103 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64769 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QIFRGK10hKQTPBAfsT6HojMdHaN1Z_wrJIXcv5u-49TFNTu9uIEk0jLGHxRyFycj0bDA9qAlF300czp3Zx6VH1wBgmlkgnY0gmlwhKwSB8aKbXVsdGlhZGRyc4wACgSsEgfGBk0o3QOCcnOFAAABAACJc2VjcDI1NmsxoQNelK1yYbrwmoV7VB6SuWt0Xdi_83WE68BQKnLPMONCpYN0Y3CCTSeDdWRwgk0phXdha3UyAw --storenode=/ip4/172.18.7.198/tcp/19751/p2p/16Uiu2HAmK2CAYaTq42WZd46v46faxECsxczPy8EcbB8X57B6XK2c --store=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.23.103 waku 142f3089e286f2ca84e6a6ca9e31acf80d5f4cf00e08dccc002b6e8a00df2d1e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 142f3089e286. Setting up logs at ./log/docker/store_node1_2024-05-12_04-23-29__a9971b91-c6f5-404b-a8ba-bd47e010b0fd__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 64765
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64765/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:209 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64765/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.23.103/tcp/64766/p2p/16Uiu2HAmTjVwfC1pu9L2rX6L5X1Yt3dmggG9wjvvdkcVZV5TWNUe","/ip4/172.18.23.103/tcp/64767/ws/p2p/16Uiu2HAmTjVwfC1pu9L2rX6L5X1Yt3dmggG9wjvvdkcVZV5TWNUe"],"enrUri":"enr:-LO4QAsL2ANolD1_cafMGpwbqdwhkK3zsv7gINHtexrKTpEledN7Mpu1JrGdAeVcTKSUYeP_NCCv3B8B39U-YOnWp3wBgmlkgnY0gmlwhKwSF2eKbXVsdGlhZGRyc4wACgSsEhdnBvz_3QOCcnOFAAABAACJc2VjcDI1NmsxoQPgBxZqkEjtsEAkLdtuaCJiJmNZcuxAbo-8MbRxICO_34N0Y3CC_P6DdWRwgv0AhXdha3UyAg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64765/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.7.198/tcp/19751/p2p/16Uiu2HAmK2CAYaTq42WZd46v46faxECsxczPy8EcbB8X57B6XK2c"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19750/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19750/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19750/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1715487812683245312,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 567b46c8583a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 142f3089e286
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-12_04-23-29__a9971b91-c6f5-404b-a8ba-bd47e010b0fd__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-12_04-23-29__a9971b91-c6f5-404b-a8ba-bd47e010b0fd__harbor.status.im_wakuorg_nwaku:latest.log