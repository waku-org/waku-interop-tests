[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_only_relay__peer_relay_and_store with id: 2024-05-12_04-23-57__5e8f209e-54a6-469c-a81f-e9046558e715
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-12_04-23-57__5e8f209e-54a6-469c-a81f-e9046558e715__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.157.160
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['52104', '52105', '52106', '52107', '52108']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:345 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 52104:52104 -p 52105:52105 -p 52106:52106 -p 52107:52107 -p 52108:52108 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=52106 --rest-port=52104 --tcp-port=52105 --discv5-udp-port=52107 --rest-address=0.0.0.0 --nat=extip:172.18.157.160 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=52108 --metrics-logging=true --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.157.160 waku 47b51d95361cc55ce8d903d660b08414c7896e952608a29a496e8c86db5d0188
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 47b51d95361c. Setting up logs at ./log/docker/publishing_node1_2024-05-12_04-23-57__5e8f209e-54a6-469c-a81f-e9046558e715__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 52104
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52104/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:209 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52104/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.157.160/tcp/52105/p2p/16Uiu2HAkvXGuLk4UCdSkeWe5u7u9ikBZmDxNXUqoZf1BuaZpKeYp","/ip4/172.18.157.160/tcp/52106/ws/p2p/16Uiu2HAkvXGuLk4UCdSkeWe5u7u9ikBZmDxNXUqoZf1BuaZpKeYp"],"enrUri":"enr:-LO4QMZd44KAQR7MhBHXG5Mqehk2Lq9f4nVJhpqneACmewD-dCB1P4weBAnTvqpE4wgNjGCfd-VZVoarxnL7lFFeiFkBgmlkgnY0gmlwhKwSnaCKbXVsdGlhZGRyc4wACgSsEp2gBsuK3QOCcnOFAAABAACJc2VjcDI1NmsxoQIQSxQsRVFaitS3yyWPx6gzHdCnKjUdUoBlb1IPbpbQaYN0Y3CCy4mDdWRwgsuLhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-12_04-23-57__5e8f209e-54a6-469c-a81f-e9046558e715__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.242.254
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['2191', '2192', '2193', '2194', '2195']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:345 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 2191:2191 -p 2192:2192 -p 2193:2193 -p 2194:2194 -p 2195:2195 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2193 --rest-port=2191 --tcp-port=2192 --discv5-udp-port=2194 --rest-address=0.0.0.0 --nat=extip:172.18.242.254 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2195 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QMZd44KAQR7MhBHXG5Mqehk2Lq9f4nVJhpqneACmewD-dCB1P4weBAnTvqpE4wgNjGCfd-VZVoarxnL7lFFeiFkBgmlkgnY0gmlwhKwSnaCKbXVsdGlhZGRyc4wACgSsEp2gBsuK3QOCcnOFAAABAACJc2VjcDI1NmsxoQIQSxQsRVFaitS3yyWPx6gzHdCnKjUdUoBlb1IPbpbQaYN0Y3CCy4mDdWRwgsuLhXdha3UyAQ --storenode=/ip4/172.18.157.160/tcp/52105/p2p/16Uiu2HAkvXGuLk4UCdSkeWe5u7u9ikBZmDxNXUqoZf1BuaZpKeYp --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.242.254 waku 262fe61526fc5233b4ed8d8caff9165b688ff8b5610049922ffd9db2afb56bfe
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 262fe61526fc. Setting up logs at ./log/docker/store_node1_2024-05-12_04-23-57__5e8f209e-54a6-469c-a81f-e9046558e715__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 2191
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2191/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:209 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2191/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.242.254/tcp/2192/p2p/16Uiu2HAmVW8k2XszrZGEou8yE2xpUBmVBFmLw8xft5sbvxwxZAU7","/ip4/172.18.242.254/tcp/2193/ws/p2p/16Uiu2HAmVW8k2XszrZGEou8yE2xpUBmVBFmLw8xft5sbvxwxZAU7"],"enrUri":"enr:-LO4QEbFZd3_wu1TJZdYfcYhNd_H4kdJ0X6hBLzOOB69IS2aeRxnJ-xYAv6y8c8STSUPY81950M5avN-Dp0QCjqCD1IBgmlkgnY0gmlwhKwS8v6KbXVsdGlhZGRyc4wACgSsEvL-BgiR3QOCcnOFAAABAACJc2VjcDI1NmsxoQP6UfB5u61I5t9_UAV-cpxAhyPzK_P1qSF6vLi8QNgB2IN0Y3CCCJCDdWRwggiShXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2191/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.157.160/tcp/52105/p2p/16Uiu2HAkvXGuLk4UCdSkeWe5u7u9ikBZmDxNXUqoZf1BuaZpKeYp"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52104/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2191/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52104/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2191/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1715487849114817536,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 47b51d95361c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 262fe61526fc
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-12_04-23-57__5e8f209e-54a6-469c-a81f-e9046558e715__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-12_04-23-57__5e8f209e-54a6-469c-a81f-e9046558e715__harbor.status.im_wakuorg_nwaku:latest.log