[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_only_relay__peer_relay_and_store with id: 2024-05-12_04-23-57__5e8f209e-54a6-469c-a81f-e9046558e715
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-12_04-23-57__5e8f209e-54a6-469c-a81f-e9046558e715__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.157.160
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['52104', '52105', '52106', '52107', '52108']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:345 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 52104:52104 -p 52105:52105 -p 52106:52106 -p 52107:52107 -p 52108:52108 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=52106 --rest-port=52104 --tcp-port=52105 --discv5-udp-port=52107 --rest-address=0.0.0.0 --nat=extip:172.18.157.160 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=52108 --metrics-logging=true --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.157.160 waku 47b51d95361cc55ce8d903d660b08414c7896e952608a29a496e8c86db5d0188
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 47b51d95361c. Setting up logs at ./log/docker/publishing_node1_2024-05-12_04-23-57__5e8f209e-54a6-469c-a81f-e9046558e715__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 52104
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52104/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:209 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52104/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.157.160/tcp/52105/p2p/16Uiu2HAkvXGuLk4UCdSkeWe5u7u9ikBZmDxNXUqoZf1BuaZpKeYp","/ip4/172.18.157.160/tcp/52106/ws/p2p/16Uiu2HAkvXGuLk4UCdSkeWe5u7u9ikBZmDxNXUqoZf1BuaZpKeYp"],"enrUri":"enr:-LO4QMZd44KAQR7MhBHXG5Mqehk2Lq9f4nVJhpqneACmewD-dCB1P4weBAnTvqpE4wgNjGCfd-VZVoarxnL7lFFeiFkBgmlkgnY0gmlwhKwSnaCKbXVsdGlhZGRyc4wACgSsEp2gBsuK3QOCcnOFAAABAACJc2VjcDI1NmsxoQIQSxQsRVFaitS3yyWPx6gzHdCnKjUdUoBlb1IPbpbQaYN0Y3CCy4mDdWRwgsuLhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-12_04-23-57__5e8f209e-54a6-469c-a81f-e9046558e715__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.242.254
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['2191', '2192', '2193', '2194', '2195']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:345 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 2191:2191 -p 2192:2192 -p 2193:2193 -p 2194:2194 -p 2195:2195 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2193 --rest-port=2191 --tcp-port=2192 --discv5-udp-port=2194 --rest-address=0.0.0.0 --nat=extip:172.18.242.254 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2195 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QMZd44KAQR7MhBHXG5Mqehk2Lq9f4nVJhpqneACmewD-dCB1P4weBAnTvqpE4wgNjGCfd-VZVoarxnL7lFFeiFkBgmlkgnY0gmlwhKwSnaCKbXVsdGlhZGRyc4wACgSsEp2gBsuK3QOCcnOFAAABAACJc2VjcDI1NmsxoQIQSxQsRVFaitS3yyWPx6gzHdCnKjUdUoBlb1IPbpbQaYN0Y3CCy4mDdWRwgsuLhXdha3UyAQ --storenode=/ip4/172.18.157.160/tcp/52105/p2p/16Uiu2HAkvXGuLk4UCdSkeWe5u7u9ikBZmDxNXUqoZf1BuaZpKeYp --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.242.254 waku 262fe61526fc5233b4ed8d8caff9165b688ff8b5610049922ffd9db2afb56bfe
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 262fe61526fc. Setting up logs at ./log/docker/store_node1_2024-05-12_04-23-57__5e8f209e-54a6-469c-a81f-e9046558e715__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 2191
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2191/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:209 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2191/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.242.254/tcp/2192/p2p/16Uiu2HAmVW8k2XszrZGEou8yE2xpUBmVBFmLw8xft5sbvxwxZAU7","/ip4/172.18.242.254/tcp/2193/ws/p2p/16Uiu2HAmVW8k2XszrZGEou8yE2xpUBmVBFmLw8xft5sbvxwxZAU7"],"enrUri":"enr:-LO4QEbFZd3_wu1TJZdYfcYhNd_H4kdJ0X6hBLzOOB69IS2aeRxnJ-xYAv6y8c8STSUPY81950M5avN-Dp0QCjqCD1IBgmlkgnY0gmlwhKwS8v6KbXVsdGlhZGRyc4wACgSsEvL-BgiR3QOCcnOFAAABAACJc2VjcDI1NmsxoQP6UfB5u61I5t9_UAV-cpxAhyPzK_P1qSF6vLi8QNgB2IN0Y3CCCJCDdWRwggiShXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2191/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.157.160/tcp/52105/p2p/16Uiu2HAkvXGuLk4UCdSkeWe5u7u9ikBZmDxNXUqoZf1BuaZpKeYp"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52104/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2191/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52104/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2191/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1715487849114817536,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 47b51d95361c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 262fe61526fc
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-12_04-23-57__5e8f209e-54a6-469c-a81f-e9046558e715__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-12_04-23-57__5e8f209e-54a6-469c-a81f-e9046558e715__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_only_relay__peer_relay_and_store with id: 2024-05-12_04-24-13__36da7549-966d-410c-9b8f-be1307afc093
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-12_04-24-13__36da7549-966d-410c-9b8f-be1307afc093__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.136.0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['48108', '48109', '48110', '48111', '48112']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:345 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 48108:48108 -p 48109:48109 -p 48110:48110 -p 48111:48111 -p 48112:48112 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=48110 --rest-port=48108 --tcp-port=48109 --discv5-udp-port=48111 --rest-address=0.0.0.0 --nat=extip:172.18.136.0 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=48112 --metrics-logging=true --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.136.0 waku ba2f150d9179c4934bed1765c7e847f62393c0d587351a6ea16448cd7bad371e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID ba2f150d9179. Setting up logs at ./log/docker/publishing_node1_2024-05-12_04-24-13__36da7549-966d-410c-9b8f-be1307afc093__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 48108
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48108/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:209 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48108/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.136.0/tcp/48109/p2p/16Uiu2HAm4sy18KtCYkXAncSSbERspPjAEVTmwVGjuS3mZP3SmPBY","/ip4/172.18.136.0/tcp/48110/ws/p2p/16Uiu2HAm4sy18KtCYkXAncSSbERspPjAEVTmwVGjuS3mZP3SmPBY"],"enrUri":"enr:-LO4QLoLTU_cv23dFXz_1-OJISZMMim5vfoM-32n0_U_-aU8Wl3UxY15UgkmE0V-XCFkBZK6VUA_bNOJ24EbLH5IZtsBgmlkgnY0gmlwhKwSiACKbXVsdGlhZGRyc4wACgSsEogABrvu3QOCcnOFAAABAACJc2VjcDI1NmsxoQKMdYgFbazLn9Gp0ouVxOUyPeRV_mr_2bxD7o1brQbRq4N0Y3CCu-2DdWRwgrvvhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-12_04-24-13__36da7549-966d-410c-9b8f-be1307afc093__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.204.136
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['13921', '13922', '13923', '13924', '13925']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:345 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 13921:13921 -p 13922:13922 -p 13923:13923 -p 13924:13924 -p 13925:13925 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=13923 --rest-port=13921 --tcp-port=13922 --discv5-udp-port=13924 --rest-address=0.0.0.0 --nat=extip:172.18.204.136 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=13925 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QLoLTU_cv23dFXz_1-OJISZMMim5vfoM-32n0_U_-aU8Wl3UxY15UgkmE0V-XCFkBZK6VUA_bNOJ24EbLH5IZtsBgmlkgnY0gmlwhKwSiACKbXVsdGlhZGRyc4wACgSsEogABrvu3QOCcnOFAAABAACJc2VjcDI1NmsxoQKMdYgFbazLn9Gp0ouVxOUyPeRV_mr_2bxD7o1brQbRq4N0Y3CCu-2DdWRwgrvvhXdha3UyAQ --storenode=/ip4/172.18.136.0/tcp/48109/p2p/16Uiu2HAm4sy18KtCYkXAncSSbERspPjAEVTmwVGjuS3mZP3SmPBY --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.204.136 waku 078adbea8b2e75935b5ef2a74f3d8a3698068b3944e1fe5696158acc2068a821
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 078adbea8b2e. Setting up logs at ./log/docker/store_node1_2024-05-12_04-24-13__36da7549-966d-410c-9b8f-be1307afc093__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 13921
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13921/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:209 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13921/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.204.136/tcp/13922/p2p/16Uiu2HAmJT1uRUiHWiZEc2siPADrsDajCtjPspoKE6mLGto9MDPi","/ip4/172.18.204.136/tcp/13923/ws/p2p/16Uiu2HAmJT1uRUiHWiZEc2siPADrsDajCtjPspoKE6mLGto9MDPi"],"enrUri":"enr:-LO4QDQegaXKRzqfa7beyKRn8RktiZ6mUOfMBTD2MHc10eJYeWQKU_VRxv7sJClMU3k0QZM9ZuNOVzYtUV_C_d2q-E4BgmlkgnY0gmlwhKwSzIiKbXVsdGlhZGRyc4wACgSsEsyIBjZj3QOCcnOFAAABAACJc2VjcDI1NmsxoQNWFOizA8rZgW_kEsNhDtew-7-nlKcl3jxyFVIH9dmcdYN0Y3CCNmKDdWRwgjZkhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13921/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.136.0/tcp/48109/p2p/16Uiu2HAm4sy18KtCYkXAncSSbERspPjAEVTmwVGjuS3mZP3SmPBY"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48108/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13921/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48108/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13921/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1715487865849737984,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id ba2f150d9179
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 078adbea8b2e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-12_04-24-13__36da7549-966d-410c-9b8f-be1307afc093__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-12_04-24-13__36da7549-966d-410c-9b8f-be1307afc093__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_only_relay__peer_relay_and_store with id: 2024-05-12_04-24-30__a03a4a9e-8c6d-4b89-a1b1-5d4a4ac4602a
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-12_04-24-30__a03a4a9e-8c6d-4b89-a1b1-5d4a4ac4602a__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.93.18
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['46926', '46927', '46928', '46929', '46930']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:345 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 46926:46926 -p 46927:46927 -p 46928:46928 -p 46929:46929 -p 46930:46930 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=46928 --rest-port=46926 --tcp-port=46927 --discv5-udp-port=46929 --rest-address=0.0.0.0 --nat=extip:172.18.93.18 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=46930 --metrics-logging=true --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.93.18 waku 6c7ecb4168fcce9c191fc3e76cd37b7293deea094a5755b64bc498140ea538b0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 6c7ecb4168fc. Setting up logs at ./log/docker/publishing_node1_2024-05-12_04-24-30__a03a4a9e-8c6d-4b89-a1b1-5d4a4ac4602a__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 46926
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46926/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:209 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46926/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.93.18/tcp/46927/p2p/16Uiu2HAkyo6d8CxmLRsryXFBw86hqxCtDwRfGahqCzQ7jQayYFEL","/ip4/172.18.93.18/tcp/46928/ws/p2p/16Uiu2HAkyo6d8CxmLRsryXFBw86hqxCtDwRfGahqCzQ7jQayYFEL"],"enrUri":"enr:-LO4QPpGpESYh4DAuE54SOI9awj9KZ1_nb77bQu34ILjoD-zN0LoDHnKzSzympnqVih_FEDHPhoV4g2SPNubJ3Io-P0BgmlkgnY0gmlwhKwSXRKKbXVsdGlhZGRyc4wACgSsEl0SBrdQ3QOCcnOFAAABAACJc2VjcDI1NmsxoQJA688yAqgkohq_Up16dPGXFVcdd9j_qKI4a8ImD_DrtYN0Y3CCt0-DdWRwgrdRhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-12_04-24-30__a03a4a9e-8c6d-4b89-a1b1-5d4a4ac4602a__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.77.81
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['43613', '43614', '43615', '43616', '43617']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:345 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 43613:43613 -p 43614:43614 -p 43615:43615 -p 43616:43616 -p 43617:43617 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=43615 --rest-port=43613 --tcp-port=43614 --discv5-udp-port=43616 --rest-address=0.0.0.0 --nat=extip:172.18.77.81 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=43617 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QPpGpESYh4DAuE54SOI9awj9KZ1_nb77bQu34ILjoD-zN0LoDHnKzSzympnqVih_FEDHPhoV4g2SPNubJ3Io-P0BgmlkgnY0gmlwhKwSXRKKbXVsdGlhZGRyc4wACgSsEl0SBrdQ3QOCcnOFAAABAACJc2VjcDI1NmsxoQJA688yAqgkohq_Up16dPGXFVcdd9j_qKI4a8ImD_DrtYN0Y3CCt0-DdWRwgrdRhXdha3UyAQ --storenode=/ip4/172.18.93.18/tcp/46927/p2p/16Uiu2HAkyo6d8CxmLRsryXFBw86hqxCtDwRfGahqCzQ7jQayYFEL --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.77.81 waku 011c23c8fe4b9769843f04e8458fd1e9c0e4a93abe722c5d888e7bbb51537f6c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 011c23c8fe4b. Setting up logs at ./log/docker/store_node1_2024-05-12_04-24-30__a03a4a9e-8c6d-4b89-a1b1-5d4a4ac4602a__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 43613
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43613/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:209 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43613/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.77.81/tcp/43614/p2p/16Uiu2HAmFXCFLJMdTWda1cjmS5MxP7yrLcEDQV8mMpEjUc7hdQU1","/ip4/172.18.77.81/tcp/43615/ws/p2p/16Uiu2HAmFXCFLJMdTWda1cjmS5MxP7yrLcEDQV8mMpEjUc7hdQU1"],"enrUri":"enr:-LO4QDlpaMfm77dDeYkNfZiuGsCtxJHzVsiZOll-MT8iYN2eRac2RGC-3WdYdvycjExeQP5h_-2VQfPuAIa3pyo9EJQBgmlkgnY0gmlwhKwSTVGKbXVsdGlhZGRyc4wACgSsEk1RBqpf3QOCcnOFAAABAACJc2VjcDI1NmsxoQMqk93bmK2hnMIJQhNE_bTAFKtZYP1Ok7x7-5q7M19ceoN0Y3CCql6DdWRwgqpghXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43613/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.93.18/tcp/46927/p2p/16Uiu2HAkyo6d8CxmLRsryXFBw86hqxCtDwRfGahqCzQ7jQayYFEL"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:46926/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43613/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:46926/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43613/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1715487883124143104,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 6c7ecb4168fc
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 011c23c8fe4b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-12_04-24-30__a03a4a9e-8c6d-4b89-a1b1-5d4a4ac4602a__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-12_04-24-30__a03a4a9e-8c6d-4b89-a1b1-5d4a4ac4602a__harbor.status.im_wakuorg_nwaku:latest.log