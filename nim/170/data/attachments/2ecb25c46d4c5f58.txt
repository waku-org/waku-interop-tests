[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_only_relay__peer_relay_and_store with id: 2024-04-29_07-59-59__6946168b-6b34-4086-950a-e936f4f72b80
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-04-29_07-59-59__6946168b-6b34-4086-950a-e936f4f72b80__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.214.126
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['51161', '51162', '51163', '51164', '51165']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:314 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 51161:51161 -p 51162:51162 -p 51163:51163 -p 51164:51164 -p 51165:51165 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=51163 --rest-port=51161 --tcp-port=51162 --discv5-udp-port=51164 --rest-address=0.0.0.0 --nat=extip:172.18.214.126 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=51165 --metrics-logging=true --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.214.126 waku fa9ecfa1c0324a1505de6257d23a4ce07a76e57efa336754eb0bc5b6b3ac8273
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID fa9ecfa1c032. Setting up logs at ./log/docker/publishing_node1_2024-04-29_07-59-59__6946168b-6b34-4086-950a-e936f4f72b80__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:120 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 51161
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51161/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.214.126/tcp/51162/p2p/16Uiu2HAmHj9thysnVabiNeAqrQupmLQz4f4VY6hRDgNo3XMr2jhU","/ip4/172.18.214.126/tcp/51163/ws/p2p/16Uiu2HAmHj9thysnVabiNeAqrQupmLQz4f4VY6hRDgNo3XMr2jhU"],"enrUri":"enr:-LO4QF7TjU0ofjRosUwVU75CzTR0VVUeonAfPQlbrqA-OW8MdScHpbWBM8WXrfy0p47zyt-jFXs2JDIFy71tsJAehj0BgmlkgnY0gmlwhKwS1n6KbXVsdGlhZGRyc4wACgSsEtZ-Bsfb3QOCcnOFAAABAACJc2VjcDI1NmsxoQNLW4vzTX9W9_T2XDx8mkVVIbFoO0Kpw677CccW3mRYS4N0Y3CCx9qDdWRwgsfchXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:190 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-04-29_07-59-59__6946168b-6b34-4086-950a-e936f4f72b80__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.87.51
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['2833', '2834', '2835', '2836', '2837']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:314 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 2833:2833 -p 2834:2834 -p 2835:2835 -p 2836:2836 -p 2837:2837 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2835 --rest-port=2833 --tcp-port=2834 --discv5-udp-port=2836 --rest-address=0.0.0.0 --nat=extip:172.18.87.51 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2837 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QF7TjU0ofjRosUwVU75CzTR0VVUeonAfPQlbrqA-OW8MdScHpbWBM8WXrfy0p47zyt-jFXs2JDIFy71tsJAehj0BgmlkgnY0gmlwhKwS1n6KbXVsdGlhZGRyc4wACgSsEtZ-Bsfb3QOCcnOFAAABAACJc2VjcDI1NmsxoQNLW4vzTX9W9_T2XDx8mkVVIbFoO0Kpw677CccW3mRYS4N0Y3CCx9qDdWRwgsfchXdha3UyAQ --storenode=/ip4/172.18.214.126/tcp/51162/p2p/16Uiu2HAmHj9thysnVabiNeAqrQupmLQz4f4VY6hRDgNo3XMr2jhU --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.87.51 waku d7c64d8e331a02ebf35b261d77c407621be69d9e3d76207fbad215bb813bdfd2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID d7c64d8e331a. Setting up logs at ./log/docker/store_node1_2024-04-29_07-59-59__6946168b-6b34-4086-950a-e936f4f72b80__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:120 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 2833
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2833/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.87.51/tcp/2834/p2p/16Uiu2HAm5JPxH3JeykTvzhueRWbjHrwDAG6ogCDGDNnnKtg5SRvz","/ip4/172.18.87.51/tcp/2835/ws/p2p/16Uiu2HAm5JPxH3JeykTvzhueRWbjHrwDAG6ogCDGDNnnKtg5SRvz"],"enrUri":"enr:-LO4QKWetQaAturgoLl2QKI1ZRi-oxikfQgz5tF9gLO7ui19IxXAPfOBxxIuGWiqqqTGLjxTKNLZpRc8c8x8XdASQO8BgmlkgnY0gmlwhKwSVzOKbXVsdGlhZGRyc4wACgSsElczBgsT3QOCcnOFAAABAACJc2VjcDI1NmsxoQKSt67LALWS7CrovOVP37zmPNdWIjV8fUcHOD9DUnrz44N0Y3CCCxKDdWRwggsUhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:190 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2833/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.214.126/tcp/51162/p2p/16Uiu2HAmHj9thysnVabiNeAqrQupmLQz4f4VY6hRDgNo3XMr2jhU"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51161/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2833/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51161/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2833/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1714377611124350208,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Stopping container with id fa9ecfa1c032
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Stopping container with id d7c64d8e331a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-04-29_07-59-59__6946168b-6b34-4086-950a-e936f4f72b80__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-04-29_07-59-59__6946168b-6b34-4086-950a-e936f4f72b80__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_only_relay__peer_relay_and_store with id: 2024-04-29_08-00-15__2b2d4373-8287-444b-92f7-f1f05caf4b5f
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-04-29_08-00-15__2b2d4373-8287-444b-92f7-f1f05caf4b5f__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.172.127
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['3995', '3996', '3997', '3998', '3999']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:314 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 3995:3995 -p 3996:3996 -p 3997:3997 -p 3998:3998 -p 3999:3999 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=3997 --rest-port=3995 --tcp-port=3996 --discv5-udp-port=3998 --rest-address=0.0.0.0 --nat=extip:172.18.172.127 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=3999 --metrics-logging=true --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.172.127 waku a0831da221ec24884e585cb1c06ab26eef3221908f84d5c4f6c7697493d8a304
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID a0831da221ec. Setting up logs at ./log/docker/publishing_node1_2024-04-29_08-00-15__2b2d4373-8287-444b-92f7-f1f05caf4b5f__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:120 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 3995
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3995/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.172.127/tcp/3996/p2p/16Uiu2HAm5kTNgCQTwWS8J7PXFgZswX7m4A55q4ZtzqRdo1eEgTNW","/ip4/172.18.172.127/tcp/3997/ws/p2p/16Uiu2HAm5kTNgCQTwWS8J7PXFgZswX7m4A55q4ZtzqRdo1eEgTNW"],"enrUri":"enr:-LO4QHsDSUStcgEEqViRWa-fccciE0g1vitAgcjr-X1zKPgFFLrn33u_B0kBQRf1kayKLOtg3WWt2qRBdqLh904AptIBgmlkgnY0gmlwhKwSrH-KbXVsdGlhZGRyc4wACgSsEqx_Bg-d3QOCcnOFAAABAACJc2VjcDI1NmsxoQKZZKbOxt_7VBX_aVJsC31n6yOYT0ERcVTnPdpznRdPj4N0Y3CCD5yDdWRwgg-ehXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:190 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-04-29_08-00-15__2b2d4373-8287-444b-92f7-f1f05caf4b5f__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.45.83
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['8148', '8149', '8150', '8151', '8152']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:314 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 8148:8148 -p 8149:8149 -p 8150:8150 -p 8151:8151 -p 8152:8152 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8150 --rest-port=8148 --tcp-port=8149 --discv5-udp-port=8151 --rest-address=0.0.0.0 --nat=extip:172.18.45.83 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8152 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QHsDSUStcgEEqViRWa-fccciE0g1vitAgcjr-X1zKPgFFLrn33u_B0kBQRf1kayKLOtg3WWt2qRBdqLh904AptIBgmlkgnY0gmlwhKwSrH-KbXVsdGlhZGRyc4wACgSsEqx_Bg-d3QOCcnOFAAABAACJc2VjcDI1NmsxoQKZZKbOxt_7VBX_aVJsC31n6yOYT0ERcVTnPdpznRdPj4N0Y3CCD5yDdWRwgg-ehXdha3UyAQ --storenode=/ip4/172.18.172.127/tcp/3996/p2p/16Uiu2HAm5kTNgCQTwWS8J7PXFgZswX7m4A55q4ZtzqRdo1eEgTNW --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.45.83 waku cc82b29ed7d7cfa86fab8fc7e623cb319242f273a925de2fbc1153957f8597d5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID cc82b29ed7d7. Setting up logs at ./log/docker/store_node1_2024-04-29_08-00-15__2b2d4373-8287-444b-92f7-f1f05caf4b5f__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:120 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 8148
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8148/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.45.83/tcp/8149/p2p/16Uiu2HAmV4Kezd2aEsZK64J72USnhWyfWGa44NjrFrCEoND9krfs","/ip4/172.18.45.83/tcp/8150/ws/p2p/16Uiu2HAmV4Kezd2aEsZK64J72USnhWyfWGa44NjrFrCEoND9krfs"],"enrUri":"enr:-LO4QIAGgIz7_lGo5hcNHtxYi-YGWOBFjqe2xAwWnKRRoNH5Ty609E27ITKVePHJlc4pcfYXtVAGXcSGXDSLOlT8d2wBgmlkgnY0gmlwhKwSLVOKbXVsdGlhZGRyc4wACgSsEi1TBh_W3QOCcnOFAAABAACJc2VjcDI1NmsxoQPztS2NwsBIBQj2QrOmfkOvQZiNDEtP2Ar1VuyQnrZSqoN0Y3CCH9WDdWRwgh_XhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:190 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8148/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.172.127/tcp/3996/p2p/16Uiu2HAm5kTNgCQTwWS8J7PXFgZswX7m4A55q4ZtzqRdo1eEgTNW"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3995/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8148/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3995/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8148/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1714377627617048576,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Stopping container with id a0831da221ec
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Stopping container with id cc82b29ed7d7
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-04-29_08-00-15__2b2d4373-8287-444b-92f7-f1f05caf4b5f__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-04-29_08-00-15__2b2d4373-8287-444b-92f7-f1f05caf4b5f__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_only_relay__peer_relay_and_store with id: 2024-04-29_08-00-31__e0f6de5f-8f8c-4958-a54e-9e53f089d167
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-04-29_08-00-31__e0f6de5f-8f8c-4958-a54e-9e53f089d167__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.122.22
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['17827', '17828', '17829', '17830', '17831']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:314 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 17827:17827 -p 17828:17828 -p 17829:17829 -p 17830:17830 -p 17831:17831 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17829 --rest-port=17827 --tcp-port=17828 --discv5-udp-port=17830 --rest-address=0.0.0.0 --nat=extip:172.18.122.22 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17831 --metrics-logging=true --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.122.22 waku 2a913b1099c2e7d0ee851d8353c4a67ecb77b2250fc7a971bc0a6fe42193ddf9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 2a913b1099c2. Setting up logs at ./log/docker/publishing_node1_2024-04-29_08-00-31__e0f6de5f-8f8c-4958-a54e-9e53f089d167__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:120 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 17827
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17827/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.122.22/tcp/17828/p2p/16Uiu2HAmE626dnuc8WLkRCRJpwKAEKh3G7Qj1X3FZ1XfMnAVUN7u","/ip4/172.18.122.22/tcp/17829/ws/p2p/16Uiu2HAmE626dnuc8WLkRCRJpwKAEKh3G7Qj1X3FZ1XfMnAVUN7u"],"enrUri":"enr:-LO4QHeeV7K0Qxm3IGhBsY11Gd_S7jaof_O3fktWPCjdxOlPG8_pLkAedryR4S0UW7KhfmdMiFE3kmPP_gl8FPX5SocBgmlkgnY0gmlwhKwSehaKbXVsdGlhZGRyc4wACgSsEnoWBkWl3QOCcnOFAAABAACJc2VjcDI1NmsxoQMVRS7Qc6H32MHNUEqNttSIq8gQ8N7moTld8G2xxuwlXIN0Y3CCRaSDdWRwgkWmhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:190 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-04-29_08-00-31__e0f6de5f-8f8c-4958-a54e-9e53f089d167__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.137.155
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['19220', '19221', '19222', '19223', '19224']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:314 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 19220:19220 -p 19221:19221 -p 19222:19222 -p 19223:19223 -p 19224:19224 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19222 --rest-port=19220 --tcp-port=19221 --discv5-udp-port=19223 --rest-address=0.0.0.0 --nat=extip:172.18.137.155 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19224 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QHeeV7K0Qxm3IGhBsY11Gd_S7jaof_O3fktWPCjdxOlPG8_pLkAedryR4S0UW7KhfmdMiFE3kmPP_gl8FPX5SocBgmlkgnY0gmlwhKwSehaKbXVsdGlhZGRyc4wACgSsEnoWBkWl3QOCcnOFAAABAACJc2VjcDI1NmsxoQMVRS7Qc6H32MHNUEqNttSIq8gQ8N7moTld8G2xxuwlXIN0Y3CCRaSDdWRwgkWmhXdha3UyAQ --storenode=/ip4/172.18.122.22/tcp/17828/p2p/16Uiu2HAmE626dnuc8WLkRCRJpwKAEKh3G7Qj1X3FZ1XfMnAVUN7u --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.137.155 waku e3d28c29aefc8c0ef06c88f5b33b3f551de6c1080ea761936b76b591a2fe7380
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID e3d28c29aefc. Setting up logs at ./log/docker/store_node1_2024-04-29_08-00-31__e0f6de5f-8f8c-4958-a54e-9e53f089d167__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:120 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 19220
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19220/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.137.155/tcp/19221/p2p/16Uiu2HAm16HLz3dsJTwDFUXgWXHhv5ouNmkqBbQm9uYzhYE3LnCU","/ip4/172.18.137.155/tcp/19222/ws/p2p/16Uiu2HAm16HLz3dsJTwDFUXgWXHhv5ouNmkqBbQm9uYzhYE3LnCU"],"enrUri":"enr:-LO4QF0PyuHSIbxigufaXG_NhWKR_l8-Nnln6DQhMnkNqG80aq2yjB1PlsMmez1g62dNwfHLwZXmOzv0Vn6e_zt_oSgBgmlkgnY0gmlwhKwSiZuKbXVsdGlhZGRyc4wACgSsEombBksW3QOCcnOFAAABAACJc2VjcDI1NmsxoQJULn481-yu5ABZvLFAY95qhp63hML5Ut6KfZeCQ5YK5YN0Y3CCSxWDdWRwgksXhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:190 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19220/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.122.22/tcp/17828/p2p/16Uiu2HAmE626dnuc8WLkRCRJpwKAEKh3G7Qj1X3FZ1XfMnAVUN7u"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:17827/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19220/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:17827/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19220/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1714377643186631168,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Stopping container with id 2a913b1099c2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Stopping container with id e3d28c29aefc
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-04-29_08-00-31__e0f6de5f-8f8c-4958-a54e-9e53f089d167__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-04-29_08-00-31__e0f6de5f-8f8c-4958-a54e-9e53f089d167__harbor.status.im_wakuorg_nwaku:latest.log