[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_node_not_connected_directly_to_lightpushing_node with id: 2024-11-07_12-32-12__e0f644ec-8d8c-4eba-a72e-b2c2288670dc
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-07_12-32-12__e0f644ec-8d8c-4eba-a72e-b2c2288670dc__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-11-07_12-32-12__e0f644ec-8d8c-4eba-a72e-b2c2288670dc__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-11-07_12-32-12__e0f644ec-8d8c-4eba-a72e-b2c2288670dc__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.112.254
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['32108', '32109', '32110', '32111', '32112']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 32108:32108 -p 32109:32109 -p 32110:32110 -p 32111:32111 -p 32112:32112 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32110 --rest-port=32108 --tcp-port=32109 --discv5-udp-port=32111 --rest-address=0.0.0.0 --nat=extip:172.18.112.254 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=81bd2ad6c6a6ccdaec1c7067abf0caa44a9ff1ff6cc9467b6eacdac2163b96b0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32112 --metrics-logging=true --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.112.254 waku 0b4b3ad6e709d7090e0c60f0b14774b244b6a004c31f098ff0ff11520ec6efb8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 0b4b3ad6e709. Setting up logs at ./log/docker/node1_2024-11-07_12-32-12__e0f644ec-8d8c-4eba-a72e-b2c2288670dc__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 32108
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 321cfdbe58ef. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32108/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32108/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.112.254/tcp/32109/p2p/16Uiu2HAmV4cKBYXZtX3pn394Z2GKgXH7uvmRhn35hNiF3FkzeoJQ","/ip4/172.18.112.254/tcp/32110/ws/p2p/16Uiu2HAmV4cKBYXZtX3pn394Z2GKgXH7uvmRhn35hNiF3FkzeoJQ"],"enrUri":"enr:-L24QD3ggpVLkrnyDDQNAfF9Vcc63_JOhLxV4iJxF-K-YGOweNcys4KDp1koZSyyQ_etgfxwHhtHDRk-9NIByd3OiogCgmlkgnY0gmlwhKwScP6KbXVsdGlhZGRyc5YACASsEnD-Bn1tAAoErBJw_gZ9bt0DgnJzhQADAQAAiXNlY3AyNTZrMaED88gDgHiQCErNLxqclOGvTGrtGOhJ5lh4W97tHJ2kSyGDdGNwgn1tg3VkcIJ9b4V3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.151.175
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['52218', '52219', '52220', '52221', '52222']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 52218:52218 -p 52219:52219 -p 52220:52220 -p 52221:52221 -p 52222:52222 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=52220 --rest-port=52218 --tcp-port=52219 --discv5-udp-port=52221 --rest-address=0.0.0.0 --nat=extip:172.18.151.175 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=75cbb278bcaaaf9ce6906db85f9cb1ca9a433c09db1beecfcb5defb0acae0cfb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=52222 --metrics-logging=true --lightpush=true --store=true --relay=true --discv5-bootstrap-node=enr:-L24QD3ggpVLkrnyDDQNAfF9Vcc63_JOhLxV4iJxF-K-YGOweNcys4KDp1koZSyyQ_etgfxwHhtHDRk-9NIByd3OiogCgmlkgnY0gmlwhKwScP6KbXVsdGlhZGRyc5YACASsEnD-Bn1tAAoErBJw_gZ9bt0DgnJzhQADAQAAiXNlY3AyNTZrMaED88gDgHiQCErNLxqclOGvTGrtGOhJ5lh4W97tHJ2kSyGDdGNwgn1tg3VkcIJ9b4V3YWt1Mgk --lightpushnode=/ip4/172.18.112.254/tcp/32109/p2p/16Uiu2HAmV4cKBYXZtX3pn394Z2GKgXH7uvmRhn35hNiF3FkzeoJQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.151.175 waku adbcb7b6a733300d946d1201aa382584798898ba4115d2d34c303956077cb967
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID adbcb7b6a733. Setting up logs at ./log/docker/node2_2024-11-07_12-32-12__e0f644ec-8d8c-4eba-a72e-b2c2288670dc__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 52218
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52218/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52218/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.151.175/tcp/52219/p2p/16Uiu2HAmCqz4hcVCRbR94idifCoLjacgqmxhqzaQ7cshvikCzfkv","/ip4/172.18.151.175/tcp/52220/ws/p2p/16Uiu2HAmCqz4hcVCRbR94idifCoLjacgqmxhqzaQ7cshvikCzfkv"],"enrUri":"enr:-L24QAFmbHcHWWtW7cuaYalMLJc6fHHfr3N3PeDnu7kXxmsSWSOvE_tZSJXQKDr8UlHrPq0gJRnabn_0uKalgmjS4DcCgmlkgnY0gmlwhKwSl6-KbXVsdGlhZGRyc5YACASsEpevBsv7AAoErBKXrwbL_N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDAtEQxLu_Uu025wy0Z7Xjb9sg80fWB0FExbRIbg0KNoODdGNwgsv7g3VkcILL_YV3YWt1Mgs"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.207.141
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['27780', '27781', '27782', '27783', '27784']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 27780:27780 -p 27781:27781 -p 27782:27782 -p 27783:27783 -p 27784:27784 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27782 --rest-port=27780 --tcp-port=27781 --discv5-udp-port=27783 --rest-address=0.0.0.0 --nat=extip:172.18.207.141 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4fd4a5c48c0bcbc1e5dc056302f551d4dfebdbcbfeee5edfcc087cb513edd299 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27784 --metrics-logging=true --relay=false --storenode=/ip4/172.18.151.175/tcp/52219/p2p/16Uiu2HAmCqz4hcVCRbR94idifCoLjacgqmxhqzaQ7cshvikCzfkv --discv5-bootstrap-node=enr:-L24QAFmbHcHWWtW7cuaYalMLJc6fHHfr3N3PeDnu7kXxmsSWSOvE_tZSJXQKDr8UlHrPq0gJRnabn_0uKalgmjS4DcCgmlkgnY0gmlwhKwSl6-KbXVsdGlhZGRyc5YACASsEpevBsv7AAoErBKXrwbL_N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDAtEQxLu_Uu025wy0Z7Xjb9sg80fWB0FExbRIbg0KNoODdGNwgsv7g3VkcILL_YV3YWt1Mgs
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.207.141 waku dc3f76b0d8cdec9723db28aa0e2168c7a086b1e5421e265fcdb666daa19a3a68
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID dc3f76b0d8cd. Setting up logs at ./log/docker/node3_2024-11-07_12-32-12__e0f644ec-8d8c-4eba-a72e-b2c2288670dc__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 27780
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27780/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27780/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.207.141/tcp/27781/p2p/16Uiu2HAmLQHAWtnZUWdPtg7XmykJZ7ddpemSo1tEWv7u7EyHqdbr","/ip4/172.18.207.141/tcp/27782/ws/p2p/16Uiu2HAmLQHAWtnZUWdPtg7XmykJZ7ddpemSo1tEWv7u7EyHqdbr"],"enrUri":"enr:-L24QDKWngbMo8pMFYheglcVAdnBMMOilhHnPLaiPUn9t3r-aacsqCGlj_5cXMi1cmnTPo0si_p9TtWPiyRKEMWofe4CgmlkgnY0gmlwhKwSz42KbXVsdGlhZGRyc5YACASsEs-NBmyFAAoErBLPjQZsht0DgnJzhQADAQAAiXNlY3AyNTZrMaEDcxjLkoaDf_h_XrcWWiE1vdeubEKZL9CztakvQ2U-ALWDdGNwgmyFg3VkcIJsh4V3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32108/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52218/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32108/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32108/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.151.175/tcp/52219/p2p/16Uiu2HAmCqz4hcVCRbR94idifCoLjacgqmxhqzaQ7cshvikCzfkv","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52218/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.112.254/tcp/32109/p2p/16Uiu2HAmV4cKBYXZtX3pn394Z2GKgXH7uvmRhn35hNiF3FkzeoJQ","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32108/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1730982767781641216}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27780/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"913878601d57fba12337","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"bwf9/iDy96HuEwFyfyEXMgN7fduQzQSiGO67Il6GQ0Y="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 0b4b3ad6e709
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id adbcb7b6a733
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 0b4b3ad6e709. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id dc3f76b0d8cd
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container adbcb7b6a733. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.