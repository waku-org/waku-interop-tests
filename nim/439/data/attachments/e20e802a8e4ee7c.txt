[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_lightpushed_message with id: 2024-11-07_13-01-58__92a8cdba-0c1a-4b60-88f2-c556bf42aca1
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-11-07_13-01-58__92a8cdba-0c1a-4b60-88f2-c556bf42aca1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.136.192
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['10418', '10419', '10420', '10421', '10422']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 10418:10418 -p 10419:10419 -p 10420:10420 -p 10421:10421 -p 10422:10422 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=10420 --rest-port=10418 --tcp-port=10419 --discv5-udp-port=10421 --rest-address=0.0.0.0 --nat=extip:172.18.136.192 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3e0fa101c1b4decebf3854cc5fffcbccdeeaccdd1f2ddfe26defa385dee55b75 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=10422 --metrics-logging=true --store=true --relay=true --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.136.192 waku 7dcac5dc96b0f23e181d4542daeec7bbfa34e039a24ba23dca928f9087203be8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 7dcac5dc96b0. Setting up logs at ./log/docker/publishing_node1_2024-11-07_13-01-58__92a8cdba-0c1a-4b60-88f2-c556bf42aca1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 10418
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 59056333c13f. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10418/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10418/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.136.192/tcp/10419/p2p/16Uiu2HAmJRpgWB4DSf9gJZTmLFLPSXgsmrWFL1JT5HXCALkxrUaA","/ip4/172.18.136.192/tcp/10420/ws/p2p/16Uiu2HAmJRpgWB4DSf9gJZTmLFLPSXgsmrWFL1JT5HXCALkxrUaA"],"enrUri":"enr:-L24QNaRsuMGUHOLmPRSarIRUD5r8B9_csEP1oxGh5Q4kl6fAVUi15QkdvlDfcY69JHksg-ok6BnRjhpEivzch8kPOgCgmlkgnY0gmlwhKwSiMCKbXVsdGlhZGRyc5YACASsEojABiizAAoErBKIwAYotN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDVcajedEe3abmVagm2iruIUoM7QsyD4LO9lO7CQ4SKIeDdGNwgiizg3VkcIIotYV3YWt1Mgs"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node2_2024-11-07_13-01-58__92a8cdba-0c1a-4b60-88f2-c556bf42aca1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.229.5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['9775', '9776', '9777', '9778', '9779']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 9775:9775 -p 9776:9776 -p 9777:9777 -p 9778:9778 -p 9779:9779 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=9777 --rest-port=9775 --tcp-port=9776 --discv5-udp-port=9778 --rest-address=0.0.0.0 --nat=extip:172.18.229.5 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=10a2ca46f49e78b2e9e94baf0cb3a2fb55ba027ecd01adde3ca2386b954d5f8e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=9779 --metrics-logging=true --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.229.5 waku b070dafb5f6f17a38b6673669c5299aa3d172a94d6c7f24c4112cb7bcbdbaea1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID b070dafb5f6f. Setting up logs at ./log/docker/publishing_node2_2024-11-07_13-01-58__92a8cdba-0c1a-4b60-88f2-c556bf42aca1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 9775
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9775/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9775/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.229.5/tcp/9776/p2p/16Uiu2HAm6EiQgWYbk8ZGwBLpoDdKuR7MMcw1XJzD5nKaNEKKHVkj","/ip4/172.18.229.5/tcp/9777/ws/p2p/16Uiu2HAm6EiQgWYbk8ZGwBLpoDdKuR7MMcw1XJzD5nKaNEKKHVkj"],"enrUri":"enr:-L24QGHkCjy-i0qlWIcyQqqwCCaQ2WEVaC_6qUnVryDQfezHGD4z2PYwqBOSk57mDQqsyB5Ef2zciScP2CZET6wyEx8CgmlkgnY0gmlwhKwS5QWKbXVsdGlhZGRyc5YACASsEuUFBiYwAAoErBLlBQYmMd0DgnJzhQADAQAAiXNlY3AyNTZrMaECoKHp9RJCbh4NfkIVbbS0kx-m5_9cTv0iltsEfWEPY3iDdGNwgiYwg3VkcIImMoV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9775/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.136.192/tcp/10419/p2p/16Uiu2HAmJRpgWB4DSf9gJZTmLFLPSXgsmrWFL1JT5HXCALkxrUaA"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2024-11-07_13-01-58__92a8cdba-0c1a-4b60-88f2-c556bf42aca1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.53.114
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['63431', '63432', '63433', '63434', '63435']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 63431:63431 -p 63432:63432 -p 63433:63433 -p 63434:63434 -p 63435:63435 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63433 --rest-port=63431 --tcp-port=63432 --discv5-udp-port=63434 --rest-address=0.0.0.0 --nat=extip:172.18.53.114 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bf0adeedde4bab7eb6dbe1c6f1c0bcf24f4e4f1d9fcc15ddfb2d2347ff68eb66 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63435 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QNaRsuMGUHOLmPRSarIRUD5r8B9_csEP1oxGh5Q4kl6fAVUi15QkdvlDfcY69JHksg-ok6BnRjhpEivzch8kPOgCgmlkgnY0gmlwhKwSiMCKbXVsdGlhZGRyc5YACASsEojABiizAAoErBKIwAYotN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDVcajedEe3abmVagm2iruIUoM7QsyD4LO9lO7CQ4SKIeDdGNwgiizg3VkcIIotYV3YWt1Mgs --storenode=/ip4/172.18.136.192/tcp/10419/p2p/16Uiu2HAmJRpgWB4DSf9gJZTmLFLPSXgsmrWFL1JT5HXCALkxrUaA --store=false --relay=false --lightpush=true --lightpushnode=/ip4/172.18.136.192/tcp/10419/p2p/16Uiu2HAmJRpgWB4DSf9gJZTmLFLPSXgsmrWFL1JT5HXCALkxrUaA
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.53.114 waku e99a389e8e6faafcbb55fdb5760cb1fe183802b60c8d2cc6b077bd9077d0528a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID e99a389e8e6f. Setting up logs at ./log/docker/store_node1_2024-11-07_13-01-58__92a8cdba-0c1a-4b60-88f2-c556bf42aca1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 63431
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63431/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63431/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.53.114/tcp/63432/p2p/16Uiu2HAmDL532mqcdQGuSQWco3TsNWwcrywS3zSk13E5KvMTBZ6D","/ip4/172.18.53.114/tcp/63433/ws/p2p/16Uiu2HAmDL532mqcdQGuSQWco3TsNWwcrywS3zSk13E5KvMTBZ6D"],"enrUri":"enr:-L24QNIP1ycBpPP1joEYqm7vNknyXYFWOwlirulSqlEDzQI8ESBOKU0GwWnrbVCPBCXOq1WHX-mbC0Bye8cOM3EWqLACgmlkgnY0gmlwhKwSNXKKbXVsdGlhZGRyc5YACASsEjVyBvfIAAoErBI1cgb3yd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDCgLy-dZN-IgLxd7vn0w1Kz-nSuGx9_BhAS5ZG49VpZ6DdGNwgvfIg3VkcIL3yoV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63431/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.136.192/tcp/10419/p2p/16Uiu2HAmJRpgWB4DSf9gJZTmLFLPSXgsmrWFL1JT5HXCALkxrUaA"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63431/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.229.5/tcp/9776/p2p/16Uiu2HAm6EiQgWYbk8ZGwBLpoDdKuR7MMcw1XJzD5nKaNEKKHVkj"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10418/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9775/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63431/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1730984523196600320}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10418/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"Xdofk2mEK4aDilmYVOX2ODahoYq+lpkXjpK9rmVSbh8="}]}'
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63431/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"b35bc21a21ef872eeb39","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"Xdofk2mEK4aDilmYVOX2ODahoYq+lpkXjpK9rmVSbh8="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 7dcac5dc96b0
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id b070dafb5f6f
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 7dcac5dc96b0. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id e99a389e8e6f
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container b070dafb5f6f. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.