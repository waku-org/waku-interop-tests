[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_relay_and_store__peer_neither_relay_nor_store with id: 2024-10-14_04-42-12__ff559786-8c59-4251-8105-3122b5a6efdb
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-10-14_04-42-12__ff559786-8c59-4251-8105-3122b5a6efdb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.59.193
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['18295', '18296', '18297', '18298', '18299']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 18295:18295 -p 18296:18296 -p 18297:18297 -p 18298:18298 -p 18299:18299 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18297 --rest-port=18295 --tcp-port=18296 --discv5-udp-port=18298 --rest-address=0.0.0.0 --nat=extip:172.18.59.193 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dfbb981ad90dffa59acedec5eadf28bcecc1d92a86ded4cf9cfdad7c5a5ff5b0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18299 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.59.193 waku 2f6f8fa31cee95f25fb69a7cafd057407c60e95e28619a9353f3263bd7b6a950
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 2f6f8fa31cee. Setting up logs at ./log/docker/publishing_node1_2024-10-14_04-42-12__ff559786-8c59-4251-8105-3122b5a6efdb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 18295
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18295/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18295/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.59.193/tcp/18296/p2p/16Uiu2HAm3Hmwpf9R4VAioFxRHtPHdNamrJyYZ8p4ckdKu1Utvy2i","/ip4/172.18.59.193/tcp/18297/ws/p2p/16Uiu2HAm3Hmwpf9R4VAioFxRHtPHdNamrJyYZ8p4ckdKu1Utvy2i"],"enrUri":"enr:-LO4QCA6S_qA9qpa1G74ItgC4PnIrAVOJRmSG8tZM87ku3k4BLwo-UpsgY2HvoCJTJeLdjT4Q51n5EfV2bWG0J1HLREBgmlkgnY0gmlwhKwSO8GKbXVsdGlhZGRyc4wACgSsEjvBBkd53QOCcnOFAAMBAACJc2VjcDI1NmsxoQJ015hAjyrK5EUX6vVILb38twmyU3spk-di1RWuPHg8m4N0Y3CCR3iDdWRwgkd6hXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2024-10-14_04-42-12__ff559786-8c59-4251-8105-3122b5a6efdb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.164.90
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['30142', '30143', '30144', '30145', '30146']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 30142:30142 -p 30143:30143 -p 30144:30144 -p 30145:30145 -p 30146:30146 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=30144 --rest-port=30142 --tcp-port=30143 --discv5-udp-port=30145 --rest-address=0.0.0.0 --nat=extip:172.18.164.90 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d83fc3fb109faca544df03e5611afabad57cd41ced1dad02afa6f37ded71fefc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=30146 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QCA6S_qA9qpa1G74ItgC4PnIrAVOJRmSG8tZM87ku3k4BLwo-UpsgY2HvoCJTJeLdjT4Q51n5EfV2bWG0J1HLREBgmlkgnY0gmlwhKwSO8GKbXVsdGlhZGRyc4wACgSsEjvBBkd53QOCcnOFAAMBAACJc2VjcDI1NmsxoQJ015hAjyrK5EUX6vVILb38twmyU3spk-di1RWuPHg8m4N0Y3CCR3iDdWRwgkd6hXdha3UyAw --storenode=/ip4/172.18.59.193/tcp/18296/p2p/16Uiu2HAm3Hmwpf9R4VAioFxRHtPHdNamrJyYZ8p4ckdKu1Utvy2i --store=false --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.164.90 waku bce1e828a73a9598f9d55db445ca689b2162be739b8c6518910d180a95f2deab
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID bce1e828a73a. Setting up logs at ./log/docker/store_node1_2024-10-14_04-42-12__ff559786-8c59-4251-8105-3122b5a6efdb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 30142
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30142/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30142/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.164.90/tcp/30143/p2p/16Uiu2HAmCbMFy68Cs4K5iqZQGhcXF8R1wv6HB7gF8cxSijH6d9aU","/ip4/172.18.164.90/tcp/30144/ws/p2p/16Uiu2HAmCbMFy68Cs4K5iqZQGhcXF8R1wv6HB7gF8cxSijH6d9aU"],"enrUri":"enr:-LO4QJ4RaUF3iv64Z6zwIwQjp7BoMsbF08nDTyCVZpmHtFrYE9c4YapTDfK9LDTn99hE4sDNtHFqZHaKKkk5avHiUY8BgmlkgnY0gmlwhKwSpFqKbXVsdGlhZGRyc4wACgSsEqRaBnXA3QOCcnOFAAMBAACJc2VjcDI1NmsxoQL_EVFagOGRsOtAnr0uotQQXiJlLF-oYXvXkDtZmJQhpYN0Y3CCdb-DdWRwgnXBhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30142/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.59.193/tcp/18296/p2p/16Uiu2HAm3Hmwpf9R4VAioFxRHtPHdNamrJyYZ8p4ckdKu1Utvy2i"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18295/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18295/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18295/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"IApCNRvyjexs4PsLYE5zDs3jrHXT8FNkMm2DwyVIKnY="}]}'
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30142/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"75e4ef924ee09b6b146a","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"IApCNRvyjexs4PsLYE5zDs3jrHXT8FNkMm2DwyVIKnY="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 2f6f8fa31cee
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id bce1e828a73a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.