[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_unsubscribe_all_with_extra_field with id: 2024-10-14_04-19-15__acd0fe61-e85a-4d82-b76f-ac6660f671d6
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-14_04-19-15__acd0fe61-e85a-4d82-b76f-ac6660f671d6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.3.206
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['5987', '5988', '5989', '5990', '5991']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 5987:5987 -p 5988:5988 -p 5989:5989 -p 5990:5990 -p 5991:5991 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=5989 --rest-port=5987 --tcp-port=5988 --discv5-udp-port=5990 --rest-address=0.0.0.0 --nat=extip:172.18.3.206 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8b9eda66fcf2f60e1f3562c98de7452e26f31b1ce57e0bcfc94dfe49e2abe458 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=5991 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.3.206 waku 5f4307c1bafa9ec4a84e49c15cc8e1f1c7eb9d1f76ce1bc4fc8c1bafab7a01a8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 5f4307c1bafa. Setting up logs at ./log/docker/node1_2024-10-14_04-19-15__acd0fe61-e85a-4d82-b76f-ac6660f671d6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 5987
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5987/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5987/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.3.206/tcp/5988/p2p/16Uiu2HAmScm2anKhrPp6nzncLz57RwkyfR7XuaYzvamtB5BRhb1j","/ip4/172.18.3.206/tcp/5989/ws/p2p/16Uiu2HAmScm2anKhrPp6nzncLz57RwkyfR7XuaYzvamtB5BRhb1j"],"enrUri":"enr:-LO4QC_k8K6XjxIr5qRAjeHQ-hhglGgnqEU_KWSdhurFelZ9ZiulI8GkKf-YX4a5CQEDi4oc4ubiU5uoQIyvwy3eHgUBgmlkgnY0gmlwhKwSA86KbXVsdGlhZGRyc4wACgSsEgPOBhdl3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPPcWQ6rlfCAjo0PQtlUBdJcaQyvVU0AW5c_Jvjrc4P8oN0Y3CCF2SDdWRwghdmhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-10-14_04-19-15__acd0fe61-e85a-4d82-b76f-ac6660f671d6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.18.100
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['3172', '3173', '3174', '3175', '3176']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 3172:3172 -p 3173:3173 -p 3174:3174 -p 3175:3175 -p 3176:3176 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=3174 --rest-port=3172 --tcp-port=3173 --discv5-udp-port=3175 --rest-address=0.0.0.0 --nat=extip:172.18.18.100 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7f24032ef5b409eacb9c6ed28315aba461b086589b08905e2ee8acdd8f1bd3bd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=3176 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QC_k8K6XjxIr5qRAjeHQ-hhglGgnqEU_KWSdhurFelZ9ZiulI8GkKf-YX4a5CQEDi4oc4ubiU5uoQIyvwy3eHgUBgmlkgnY0gmlwhKwSA86KbXVsdGlhZGRyc4wACgSsEgPOBhdl3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPPcWQ6rlfCAjo0PQtlUBdJcaQyvVU0AW5c_Jvjrc4P8oN0Y3CCF2SDdWRwghdmhXdha3UyBQ --filternode=/ip4/172.18.3.206/tcp/5988/p2p/16Uiu2HAmScm2anKhrPp6nzncLz57RwkyfR7XuaYzvamtB5BRhb1j
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.18.100 waku 748c764bf1c9f175b62a6b4468cc4cd335f17252cab03e134441e0713741d3d7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 748c764bf1c9. Setting up logs at ./log/docker/node2_2024-10-14_04-19-15__acd0fe61-e85a-4d82-b76f-ac6660f671d6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 3172
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3172/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3172/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.18.100/tcp/3173/p2p/16Uiu2HAmTy5okiVPxLwEKY1BiJBf9L4zc8NAjjmpZV6kWKKv1HsQ","/ip4/172.18.18.100/tcp/3174/ws/p2p/16Uiu2HAmTy5okiVPxLwEKY1BiJBf9L4zc8NAjjmpZV6kWKKv1HsQ"],"enrUri":"enr:-LO4QB4bLPyx4v4dacBhqPILo8nZ9GiJ7p6eK9lmNyLxFl-LMwrRR9ECmXpvSCD71OQBZ3bg6yuGTcPJ9wIJn5wdVW0BgmlkgnY0gmlwhKwSEmSKbXVsdGlhZGRyc4wACgSsEhJkBgxm3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPjge2K_twr6zEc18yt_i9jwXoEGBlYGqvic7Ppe7zFO4N0Y3CCDGWDdWRwggxnhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3172/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.3.206/tcp/5988/p2p/16Uiu2HAmScm2anKhrPp6nzncLz57RwkyfR7XuaYzvamtB5BRhb1j"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5987/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3172/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "2008c8d5-b0c1-4c5f-a42e-6623d53f5ed4", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"2008c8d5-b0c1-4c5f-a42e-6623d53f5ed4","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X DELETE "http://127.0.0.1:3172/filter/v2/subscriptions/all" -H "Content-Type: application/json" -d '{"requestId": 1, "extraField": "extraValue"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:3172/filter/v2/subscriptions/all. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 5f4307c1bafa
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 748c764bf1c9
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.