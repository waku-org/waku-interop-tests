[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_unsubscribe_with_content_topic_string_instead_of_list with id: 2024-10-14_04-18-36__1858c2b2-ae76-4001-b2b3-bb31f53ce5ee
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-14_04-18-36__1858c2b2-ae76-4001-b2b3-bb31f53ce5ee__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.20.138
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['47517', '47518', '47519', '47520', '47521']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 47517:47517 -p 47518:47518 -p 47519:47519 -p 47520:47520 -p 47521:47521 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=47519 --rest-port=47517 --tcp-port=47518 --discv5-udp-port=47520 --rest-address=0.0.0.0 --nat=extip:172.18.20.138 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ced494d7e91143d6dbb401e7add1153398f2dd8be67d196b6fb4d12e44fa2a6c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=47521 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.20.138 waku 05e26b573c9bfe25838476c90503f1bb338605fa39c30c675bdc15ee927a96a8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 05e26b573c9b. Setting up logs at ./log/docker/node1_2024-10-14_04-18-36__1858c2b2-ae76-4001-b2b3-bb31f53ce5ee__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 47517
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47517/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47517/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.20.138/tcp/47518/p2p/16Uiu2HAkw4gBJuEAdVUu9arpGYLTJAPWMX72U6nfj9QBUArLSzkB","/ip4/172.18.20.138/tcp/47519/ws/p2p/16Uiu2HAkw4gBJuEAdVUu9arpGYLTJAPWMX72U6nfj9QBUArLSzkB"],"enrUri":"enr:-LO4QD2lyF3pk1H3a78Ekvaz-BbFD1MyDnG-nZjLvytHXXcjXRAVr3vySNhRxYDUXV0qTfLUOTs8pBnZc241TzN1yPQBgmlkgnY0gmlwhKwSFIqKbXVsdGlhZGRyc4wACgSsEhSKBrmf3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIYVma_yHZT7lt7IiE_KHjdRUjU6_aKWdGimRETc7UERIN0Y3CCuZ6DdWRwgrmghXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-10-14_04-18-36__1858c2b2-ae76-4001-b2b3-bb31f53ce5ee__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.160.75
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['33695', '33696', '33697', '33698', '33699']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 33695:33695 -p 33696:33696 -p 33697:33697 -p 33698:33698 -p 33699:33699 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=33697 --rest-port=33695 --tcp-port=33696 --discv5-udp-port=33698 --rest-address=0.0.0.0 --nat=extip:172.18.160.75 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b37fdd9419df0d90d71e1be3dcee075d728385dca8e857dbcdeaff78f5b23ea9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=33699 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QD2lyF3pk1H3a78Ekvaz-BbFD1MyDnG-nZjLvytHXXcjXRAVr3vySNhRxYDUXV0qTfLUOTs8pBnZc241TzN1yPQBgmlkgnY0gmlwhKwSFIqKbXVsdGlhZGRyc4wACgSsEhSKBrmf3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIYVma_yHZT7lt7IiE_KHjdRUjU6_aKWdGimRETc7UERIN0Y3CCuZ6DdWRwgrmghXdha3UyBQ --filternode=/ip4/172.18.20.138/tcp/47518/p2p/16Uiu2HAkw4gBJuEAdVUu9arpGYLTJAPWMX72U6nfj9QBUArLSzkB
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.160.75 waku fc221a68fd17d0859e834baea0c445a85b5a758c8e80f5a838d1a921136e19aa
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID fc221a68fd17. Setting up logs at ./log/docker/node2_2024-10-14_04-18-36__1858c2b2-ae76-4001-b2b3-bb31f53ce5ee__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 33695
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33695/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33695/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.160.75/tcp/33696/p2p/16Uiu2HAm9Ab4sNK4hZgAw3v6yTcy68A8WwTDdC1SsPR93HQaiqQP","/ip4/172.18.160.75/tcp/33697/ws/p2p/16Uiu2HAm9Ab4sNK4hZgAw3v6yTcy68A8WwTDdC1SsPR93HQaiqQP"],"enrUri":"enr:-LO4QIXUGb_LGhp4Be5_76mdthtYNzlPS0q9GURBDZ5bNMTGSQPphCV_LTo8d1Gmju0p0hJPpLqQEZyv9CDANxxQj-cBgmlkgnY0gmlwhKwSoEuKbXVsdGlhZGRyc4wACgSsEqBLBoOh3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLMJlmq-KHTYXMVDSmBS9S1iia8gC2xAtj2xfVk7j4V5IN0Y3CCg6CDdWRwgoOihXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33695/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.20.138/tcp/47518/p2p/16Uiu2HAkw4gBJuEAdVUu9arpGYLTJAPWMX72U6nfj9QBUArLSzkB"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47517/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33695/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "ab8bf545-53bc-4a02-888a-a281b44d1349", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"ab8bf545-53bc-4a02-888a-a281b44d1349","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X DELETE "http://127.0.0.1:33695/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": "/test/1/waku-filter/proto", "pubsubTopic": "/waku/2/rs/3/1"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:33695/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 05e26b573c9b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id fc221a68fd17
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.