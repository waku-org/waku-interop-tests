[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_node_not_connected_directly_to_lightpushing_node with id: 2024-10-14_04-14-11__d54412eb-1e6d-40e9-8231-70d2e8c41f66
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-14_04-14-11__d54412eb-1e6d-40e9-8231-70d2e8c41f66__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-10-14_04-14-11__d54412eb-1e6d-40e9-8231-70d2e8c41f66__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-10-14_04-14-11__d54412eb-1e6d-40e9-8231-70d2e8c41f66__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.71.134
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['36498', '36499', '36500', '36501', '36502']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 36498:36498 -p 36499:36499 -p 36500:36500 -p 36501:36501 -p 36502:36502 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36500 --rest-port=36498 --tcp-port=36499 --discv5-udp-port=36501 --rest-address=0.0.0.0 --nat=extip:172.18.71.134 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eaabe356d7865fa9595b8eaee3f2b226da1cc643a6efddd0b38c374cf84b8a02 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36502 --metrics-logging=true --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.71.134 waku 3ad40e3a6fca559c5476f58ed018ad9d2d40c6918d73df9c2be51e21c487954b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 3ad40e3a6fca. Setting up logs at ./log/docker/node1_2024-10-14_04-14-11__d54412eb-1e6d-40e9-8231-70d2e8c41f66__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 36498
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36498/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36498/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.71.134/tcp/36499/p2p/16Uiu2HAmRKy9gmhMJK2cyjBpzA3pN156m9NaUoFPBqV83sm7AKdC","/ip4/172.18.71.134/tcp/36500/ws/p2p/16Uiu2HAmRKy9gmhMJK2cyjBpzA3pN156m9NaUoFPBqV83sm7AKdC"],"enrUri":"enr:-LO4QFTQxK1o8U3PMvnaBHoHiVkg1e429HddExd-dszJXWZpM6N-ErLaqTmNlAF3AvXW4-sop7yjPQU14Nree4K2OtgBgmlkgnY0gmlwhKwSR4aKbXVsdGlhZGRyc4wACgSsEkeGBo6U3QOCcnOFAAMBAACJc2VjcDI1NmsxoQO8SImqqVvwShxjzLkd2sg9dQAnlEDex07y7EesLWwCg4N0Y3CCjpODdWRwgo6VhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.127.188
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['7432', '7433', '7434', '7435', '7436']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 7432:7432 -p 7433:7433 -p 7434:7434 -p 7435:7435 -p 7436:7436 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7434 --rest-port=7432 --tcp-port=7433 --discv5-udp-port=7435 --rest-address=0.0.0.0 --nat=extip:172.18.127.188 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=355a7cefb69eded222bb74c723cab17a0ddaeb3ead1fedcdf3cd5ea345adc4c0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7436 --metrics-logging=true --lightpush=true --store=true --relay=true --discv5-bootstrap-node=enr:-LO4QFTQxK1o8U3PMvnaBHoHiVkg1e429HddExd-dszJXWZpM6N-ErLaqTmNlAF3AvXW4-sop7yjPQU14Nree4K2OtgBgmlkgnY0gmlwhKwSR4aKbXVsdGlhZGRyc4wACgSsEkeGBo6U3QOCcnOFAAMBAACJc2VjcDI1NmsxoQO8SImqqVvwShxjzLkd2sg9dQAnlEDex07y7EesLWwCg4N0Y3CCjpODdWRwgo6VhXdha3UyCQ --lightpushnode=/ip4/172.18.71.134/tcp/36499/p2p/16Uiu2HAmRKy9gmhMJK2cyjBpzA3pN156m9NaUoFPBqV83sm7AKdC
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.127.188 waku 43b160442d36ec2927c1fb584cd7cc043eff9c6d46eea7b6bee83786304644bf
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 43b160442d36. Setting up logs at ./log/docker/node2_2024-10-14_04-14-11__d54412eb-1e6d-40e9-8231-70d2e8c41f66__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 7432
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7432/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7432/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.127.188/tcp/7433/p2p/16Uiu2HAkx72gYfsxBU8eb4FDdA1Y4K257zq1HFa26xovayKMaQaV","/ip4/172.18.127.188/tcp/7434/ws/p2p/16Uiu2HAkx72gYfsxBU8eb4FDdA1Y4K257zq1HFa26xovayKMaQaV"],"enrUri":"enr:-LO4QG2LR2XAzxRZCCaUbpd15LqA1dAwuUD2Wvyz78iFAms6cRrq3PfP7fIvkJ0z_Y9pi4cCZzDcl8zl3jrDhCD_sQ8BgmlkgnY0gmlwhKwSf7yKbXVsdGlhZGRyc4wACgSsEn-8Bh0K3QOCcnOFAAMBAACJc2VjcDI1NmsxoQInzG8YCnBqL0hUrcS8NUlWoW-2sEJc5nshVHPgmVKM-oN0Y3CCHQmDdWRwgh0LhXdha3UyCw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.65.253
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['36975', '36976', '36977', '36978', '36979']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 36975:36975 -p 36976:36976 -p 36977:36977 -p 36978:36978 -p 36979:36979 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36977 --rest-port=36975 --tcp-port=36976 --discv5-udp-port=36978 --rest-address=0.0.0.0 --nat=extip:172.18.65.253 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=df4af6cbd8dbfd64729e7edc18ceec77ec7ce9075d482bfcc0bc6fe7af99edee --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36979 --metrics-logging=true --relay=false --storenode=/ip4/172.18.127.188/tcp/7433/p2p/16Uiu2HAkx72gYfsxBU8eb4FDdA1Y4K257zq1HFa26xovayKMaQaV --discv5-bootstrap-node=enr:-LO4QG2LR2XAzxRZCCaUbpd15LqA1dAwuUD2Wvyz78iFAms6cRrq3PfP7fIvkJ0z_Y9pi4cCZzDcl8zl3jrDhCD_sQ8BgmlkgnY0gmlwhKwSf7yKbXVsdGlhZGRyc4wACgSsEn-8Bh0K3QOCcnOFAAMBAACJc2VjcDI1NmsxoQInzG8YCnBqL0hUrcS8NUlWoW-2sEJc5nshVHPgmVKM-oN0Y3CCHQmDdWRwgh0LhXdha3UyCw
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.65.253 waku 6b91c92be99bb21b8e9df6bd31e07afde5cbeea7dac4bebdb1ae4d332a952996
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 6b91c92be99b. Setting up logs at ./log/docker/node3_2024-10-14_04-14-11__d54412eb-1e6d-40e9-8231-70d2e8c41f66__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 36975
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36975/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36975/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.65.253/tcp/36976/p2p/16Uiu2HAmH3cNZHxCUxEie5RF2yemm4R1vsBScTiUGF9XRZdm1wzD","/ip4/172.18.65.253/tcp/36977/ws/p2p/16Uiu2HAmH3cNZHxCUxEie5RF2yemm4R1vsBScTiUGF9XRZdm1wzD"],"enrUri":"enr:-LO4QK7XtrGKs3CavYv5riXM_XIkCmdD8u4Pbyl0waSEELqbKkxkzLfFMEu_8wZZu3pDT3BBjmvwW58iFG89uS8w08ABgmlkgnY0gmlwhKwSQf2KbXVsdGlhZGRyc4wACgSsEkH9BpBx3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNBOkFroZ9E8-60u5y9h5-1dh5VTMixwGZntTUVDD4tzoN0Y3CCkHCDdWRwgpByhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36498/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7432/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36498/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36498/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36498/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36498/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36498/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36498/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.127.188/tcp/7433/p2p/16Uiu2HAkx72gYfsxBU8eb4FDdA1Y4K257zq1HFa26xovayKMaQaV","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7432/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.71.134/tcp/36499/p2p/16Uiu2HAmRKy9gmhMJK2cyjBpzA3pN156m9NaUoFPBqV83sm7AKdC","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36498/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1728879292178542592}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36975/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"d24e9322bc944925d8d8","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"3656Jy0tjXXW7S7ILpmC1IZhSUqiR+p1CrxoR8GReCc="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 3ad40e3a6fca
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 43b160442d36
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 6b91c92be99b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.