[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_pubsub_topics with id: 2024-10-14_04-20-54__8175930f-a29c-4d54-8bd0-70d9e615c6eb
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-10-14_04-20-54__8175930f-a29c-4d54-8bd0-70d9e615c6eb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.41.199
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['57491', '57492', '57493', '57494', '57495']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 57491:57491 -p 57492:57492 -p 57493:57493 -p 57494:57494 -p 57495:57495 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57493 --rest-port=57491 --tcp-port=57492 --discv5-udp-port=57494 --rest-address=0.0.0.0 --nat=extip:172.18.41.199 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=65c12acc2e7dff8f58f91b1696fa77ba40b3d50ba6fbc0c4d2f6d3cfd2f8fdf1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57495 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.41.199 waku 73844a9af5909e43dd61d34f29e659b1f2c0b8024a837202937b70d8f6c3edc3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 73844a9af590. Setting up logs at ./log/docker/receiving_node1_2024-10-14_04-20-54__8175930f-a29c-4d54-8bd0-70d9e615c6eb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 57491
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57491/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57491/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.41.199/tcp/57492/p2p/16Uiu2HAmCbFZWLnkL1AKGS4jo55x5ommbtUAmLwxdVSwAhVL4hu8","/ip4/172.18.41.199/tcp/57493/ws/p2p/16Uiu2HAmCbFZWLnkL1AKGS4jo55x5ommbtUAmLwxdVSwAhVL4hu8"],"enrUri":"enr:-LO4QEO4Em5k4S7AcUyrfyoY4RPy2lk9-ArffH4Nz71ROkq0T95XVYEdApHEQHs42S01ICUqpj6hmHOPDqU3EpXCV3IBgmlkgnY0gmlwhKwSKceKbXVsdGlhZGRyc4wACgSsEinHBuCV3QOCcnOFAAMBAACJc2VjcDI1NmsxoQL_CuAfrd1XCf4Qw9Yq55xRgku_EGpUphrnFR5lLsMWF4N0Y3CC4JSDdWRwguCWhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-10-14_04-20-54__8175930f-a29c-4d54-8bd0-70d9e615c6eb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.163.156
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['39681', '39682', '39683', '39684', '39685']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 39681:39681 -p 39682:39682 -p 39683:39683 -p 39684:39684 -p 39685:39685 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39683 --rest-port=39681 --tcp-port=39682 --discv5-udp-port=39684 --rest-address=0.0.0.0 --nat=extip:172.18.163.156 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f6f36bf3ae7cecafb77d86dfeacab5894dedfb92e22d1ee11260ee741ed5c6be --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39685 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.163.156 waku e99ba195530f1f3e5334aac948e527ff7148c8651c3e5db244f301a9e55512d4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID e99ba195530f. Setting up logs at ./log/docker/receiving_node2_2024-10-14_04-20-54__8175930f-a29c-4d54-8bd0-70d9e615c6eb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 39681
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39681/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39681/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.163.156/tcp/39682/p2p/16Uiu2HAmQdH3tbx6e4E27DLRZB6rEKFPpqhLWsYc8dcXt7xYQv4r","/ip4/172.18.163.156/tcp/39683/ws/p2p/16Uiu2HAmQdH3tbx6e4E27DLRZB6rEKFPpqhLWsYc8dcXt7xYQv4r"],"enrUri":"enr:-LO4QEA20CmkBcuwet2iNdXlqzBy0oSVHSSqZIeZtkLgETl0L2nGJdVzNmE8l13F7w-sdo2leSLXNyz_ehYtq8l0Un4BgmlkgnY0gmlwhKwSo5yKbXVsdGlhZGRyc4wACgSsEqOcBpsD3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOx2_bZyv2sZqUZj5C6TIPHtdwtkE33S9dnmSDrOr3OO4N0Y3CCmwKDdWRwgpsEhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39681/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.41.199/tcp/57492/p2p/16Uiu2HAmCbFZWLnkL1AKGS4jo55x5ommbtUAmLwxdVSwAhVL4hu8"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-10-14_04-20-54__8175930f-a29c-4d54-8bd0-70d9e615c6eb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.5.84
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['6547', '6548', '6549', '6550', '6551']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 6547:6547 -p 6548:6548 -p 6549:6549 -p 6550:6550 -p 6551:6551 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6549 --rest-port=6547 --tcp-port=6548 --discv5-udp-port=6550 --rest-address=0.0.0.0 --nat=extip:172.18.5.84 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e1e5dc4e0a37ddef2b74cdbdbbdfe5bc3e11fc6e941c3614a89b8b5d51c4ff90 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6551 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QEO4Em5k4S7AcUyrfyoY4RPy2lk9-ArffH4Nz71ROkq0T95XVYEdApHEQHs42S01ICUqpj6hmHOPDqU3EpXCV3IBgmlkgnY0gmlwhKwSKceKbXVsdGlhZGRyc4wACgSsEinHBuCV3QOCcnOFAAMBAACJc2VjcDI1NmsxoQL_CuAfrd1XCf4Qw9Yq55xRgku_EGpUphrnFR5lLsMWF4N0Y3CC4JSDdWRwguCWhXdha3UyCQ --lightpushnode=/ip4/172.18.41.199/tcp/57492/p2p/16Uiu2HAmCbFZWLnkL1AKGS4jo55x5ommbtUAmLwxdVSwAhVL4hu8 --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.5.84 waku 002e7e8512bb0905f23cd29436d8fe96bff2d6c9c4f3d341a4c81e04c5dea367
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 002e7e8512bb. Setting up logs at ./log/docker/lightpush_node1_2024-10-14_04-20-54__8175930f-a29c-4d54-8bd0-70d9e615c6eb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 6547
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6547/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6547/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.5.84/tcp/6548/p2p/16Uiu2HAm9Uavx6P7ifsWfMTEYP8qPMoy1TrKMTe8oGnFqVwMMudx","/ip4/172.18.5.84/tcp/6549/ws/p2p/16Uiu2HAm9Uavx6P7ifsWfMTEYP8qPMoy1TrKMTe8oGnFqVwMMudx"],"enrUri":"enr:-LO4QNkh4G7voAlu3Vit07uvj7SFaIcPETC7npToS5AD7JpYL4f5aqazomFvfzkKSRBLHXgHt5HNteTJgb-lhRiLsWUBgmlkgnY0gmlwhKwSBVSKbXVsdGlhZGRyc4wACgSsEgVUBhmV3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLQwqaEYzN1moCOmJHQ7Uix1eNERxK2Ria8OeF9hp1Wz4N0Y3CCGZSDdWRwghmWhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6547/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.41.199/tcp/57492/p2p/16Uiu2HAmCbFZWLnkL1AKGS4jo55x5ommbtUAmLwxdVSwAhVL4hu8"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6547/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.163.156/tcp/39682/p2p/16Uiu2HAmQdH3tbx6e4E27DLRZB6rEKFPpqhLWsYc8dcXt7xYQv4r"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57491/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39681/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A dictionary', 'value': {'key': 'YWFh'}}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6547/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": {"key": "YWFh"}, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1728879660594444032}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:6547/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'An integer', 'value': 1234567890}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6547/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": 1234567890, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1728879660610372608}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:6547/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A list', 'value': ['YWFh']}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6547/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": ["YWFh"], "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1728879660618865152}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:6547/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A bool', 'value': True}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6547/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": true, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1728879660623644160}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:6547/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 73844a9af590
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id e99ba195530f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 002e7e8512bb
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.