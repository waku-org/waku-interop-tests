[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_only_lightpush__peer_full with id: 2024-10-14_04-22-30__280a8cb1-b511-40c3-9039-c1aa133007ac
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-10-14_04-22-30__280a8cb1-b511-40c3-9039-c1aa133007ac__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.251.160
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['29374', '29375', '29376', '29377', '29378']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 29374:29374 -p 29375:29375 -p 29376:29376 -p 29377:29377 -p 29378:29378 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29376 --rest-port=29374 --tcp-port=29375 --discv5-udp-port=29377 --rest-address=0.0.0.0 --nat=extip:172.18.251.160 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d9f2deded95602e302f98be9c8bdecdc6ff3f77e1cad9d5e4f775b5a8d1672cb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29378 --metrics-logging=true --lightpush=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.251.160 waku b780af874860db364a687c1b9882c84412c1d41406be4668755743fc54c05802
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID b780af874860. Setting up logs at ./log/docker/receiving_node1_2024-10-14_04-22-30__280a8cb1-b511-40c3-9039-c1aa133007ac__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 29374
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29374/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29374/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.251.160/tcp/29375/p2p/16Uiu2HAmGcFxK9wanueBnpCtSEk1kSrbcFVdEf2BLYR4N2J14nBe","/ip4/172.18.251.160/tcp/29376/ws/p2p/16Uiu2HAmGcFxK9wanueBnpCtSEk1kSrbcFVdEf2BLYR4N2J14nBe"],"enrUri":"enr:-LO4QNorMrVTu8P9zc6KZytgGZOoirZ_qEHjCdMSZewwxBlIB0BpmmSF3gmlScLnm36kwctTrrpO-1EETvtpPzTlhZEBgmlkgnY0gmlwhKwS-6CKbXVsdGlhZGRyc4wACgSsEvugBnLA3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM6u6YL-JYRiGue6iamM7SW1Lhf0ylloyrAfDHcDmhZlYN0Y3CCcr-DdWRwgnLBhXdha3UyDQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-10-14_04-22-30__280a8cb1-b511-40c3-9039-c1aa133007ac__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.39.182
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['12008', '12009', '12010', '12011', '12012']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 12008:12008 -p 12009:12009 -p 12010:12010 -p 12011:12011 -p 12012:12012 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=12010 --rest-port=12008 --tcp-port=12009 --discv5-udp-port=12011 --rest-address=0.0.0.0 --nat=extip:172.18.39.182 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8a38fe9333e8adfbee790fafde6f35df7a6ecb3eb3c192c5b8bc468de3fc40f0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=12012 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.39.182 waku 862342bdfc1d2f47e80b1a0479be88e1de7ca7867f3e09d07ee24eb239bc8dbe
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 862342bdfc1d. Setting up logs at ./log/docker/receiving_node2_2024-10-14_04-22-30__280a8cb1-b511-40c3-9039-c1aa133007ac__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 12008
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12008/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12008/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.39.182/tcp/12009/p2p/16Uiu2HAmH4f9a1t5WDfkFBqFLciL1hCPUENaeUQDoXQAk4gASpf6","/ip4/172.18.39.182/tcp/12010/ws/p2p/16Uiu2HAmH4f9a1t5WDfkFBqFLciL1hCPUENaeUQDoXQAk4gASpf6"],"enrUri":"enr:-LO4QAKjeBzlGI-pkjCeHd3DKeHTpx7kvEQ56iI9sV3OOmpKdTitm0Y4azXLAaWtpkMrEYyg-jN11VBTLfpwB1waNPsBgmlkgnY0gmlwhKwSJ7aKbXVsdGlhZGRyc4wACgSsEie2Bi7q3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNBfvmrz6xfNcsb82fiP6vSfWRcP8m7d-XCDb0kZmqeVYN0Y3CCLumDdWRwgi7rhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12008/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.251.160/tcp/29375/p2p/16Uiu2HAmGcFxK9wanueBnpCtSEk1kSrbcFVdEf2BLYR4N2J14nBe"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-10-14_04-22-30__280a8cb1-b511-40c3-9039-c1aa133007ac__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.13.67
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['38533', '38534', '38535', '38536', '38537']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 38533:38533 -p 38534:38534 -p 38535:38535 -p 38536:38536 -p 38537:38537 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=38535 --rest-port=38533 --tcp-port=38534 --discv5-udp-port=38536 --rest-address=0.0.0.0 --nat=extip:172.18.13.67 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=059ccbe8bdafbce4d9cdb40d9ed3ae8a39126f1eecdafe03dabdccba14cf3dcc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=38537 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QNorMrVTu8P9zc6KZytgGZOoirZ_qEHjCdMSZewwxBlIB0BpmmSF3gmlScLnm36kwctTrrpO-1EETvtpPzTlhZEBgmlkgnY0gmlwhKwS-6CKbXVsdGlhZGRyc4wACgSsEvugBnLA3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM6u6YL-JYRiGue6iamM7SW1Lhf0ylloyrAfDHcDmhZlYN0Y3CCcr-DdWRwgnLBhXdha3UyDQ --lightpushnode=/ip4/172.18.251.160/tcp/29375/p2p/16Uiu2HAmGcFxK9wanueBnpCtSEk1kSrbcFVdEf2BLYR4N2J14nBe --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.13.67 waku 28f32e1ba816af43f30b3f1046012c3964d22be213ab790a4fbe57e79ea7f64a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 28f32e1ba816. Setting up logs at ./log/docker/lightpush_node1_2024-10-14_04-22-30__280a8cb1-b511-40c3-9039-c1aa133007ac__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 38533
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38533/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38533/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.13.67/tcp/38534/p2p/16Uiu2HAmV5HgVb6voo9uJhfTVHC6SWu3TgGXs88rSKWpMXRjwpsi","/ip4/172.18.13.67/tcp/38535/ws/p2p/16Uiu2HAmV5HgVb6voo9uJhfTVHC6SWu3TgGXs88rSKWpMXRjwpsi"],"enrUri":"enr:-LO4QDysKrf6tzF5zLhT4r_CMBQQoXlNhC0ufOFf7XP1WIZ2R5YobA9pYW0c9faunr_R5o4HIinI-VE1oRTy_c-UR-0BgmlkgnY0gmlwhKwSDUOKbXVsdGlhZGRyc4wACgSsEg1DBpaH3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPz9IbNxqasvz261hpjTCn3LxVsDG6FdKqn3rmr7Z5zqYN0Y3CCloaDdWRwgpaIhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38533/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.251.160/tcp/29375/p2p/16Uiu2HAmGcFxK9wanueBnpCtSEk1kSrbcFVdEf2BLYR4N2J14nBe"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38533/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.39.182/tcp/12009/p2p/16Uiu2HAmH4f9a1t5WDfkFBqFLciL1hCPUENaeUQDoXQAk4gASpf6"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29374/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12008/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38533/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1728879756044261120}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29374/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1728879756044261120,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12008/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1728879756044261120,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id b780af874860
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 862342bdfc1d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 28f32e1ba816
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.