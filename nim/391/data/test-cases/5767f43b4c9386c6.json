{"uid":"5767f43b4c9386c6","name":"test_publish_after_node1_restarts","fullName":"tests.relay.test_publish.TestRelayPublish#test_publish_after_node1_restarts","historyId":"ac4c595ebfa5f8d963dda5d51f886384","time":{"start":1728879964359,"stop":1728879969496,"duration":5137},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"set_allure_env_variables","time":{"start":1728879175140,"stop":1728879175140,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail","time":{"start":1728879959911,"stop":1728879959911,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes","time":{"start":1728879959911,"stop":1728879959911,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"check_waku_log_errors","time":{"start":1728879959911,"stop":1728879959911,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_id","time":{"start":1728879959911,"stop":1728879959912,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"relay_setup","time":{"start":1728879959912,"stop":1728879959912,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_setup","time":{"start":1728879959912,"stop":1728879959912,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"common_setup","time":{"start":1728879959912,"stop":1728879959912,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_main_relay_nodes","time":{"start":1728879959913,"stop":1728879964172,"duration":4259},"status":"passed","steps":[{"name":"add_node_peer","time":{"start":1728879964090,"stop":1728879964172,"duration":82},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"args","value":"(<tests.relay.test_publish.TestRelayPublish object at 0x7f81aaca7ce0>, <src.node.waku_node.WakuNode object at 0x7f81aaca7fb0>, ['/ip4/172.18.242.40/tcp/53965/p2p/16Uiu2HAkueVgtdDXJm4hiHnsDPDxthdWMcf8dyhb5yZJun51poV5'])"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"subscribe_main_relay_nodes","time":{"start":1728879964173,"stop":1728879964209,"duration":36},"status":"passed","steps":[{"name":"ensure_relay_subscriptions_on_nodes","time":{"start":1728879964178,"stop":1728879964209,"duration":31},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node_list","value":"[<src.node.waku_node.WakuNode object at 0x7f81a9074ec0>, <src.node.waku_node.WakuNode object at 0x7f81aaca7fb0>]"},{"name":"pubsub_topic_list","value":"['/waku/2/rs/3/1']"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"relay_warm_up","time":{"start":1728879964209,"stop":1728879964358,"duration":149},"status":"passed","steps":[{"name":"wait_for_published_message_to_reach_relay_peer","time":{"start":1728879964209,"stop":1728879964358,"duration":149},"status":"passed","steps":[{"name":"check_published_message_reaches_relay_peer","time":{"start":1728879964210,"stop":1728879964358,"duration":148},"status":"passed","steps":[{"name":"assert_received_message","time":{"start":1728879964349,"stop":1728879964349,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1728879964209382400}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"assert_received_message","time":{"start":1728879964358,"stop":1728879964358,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1728879964209382400}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1728879964209382400}"},{"name":"pubsub_topic","value":"None"},{"name":"message_propagation_delay","value":"0.1"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"timeout_duration","value":"120"},{"name":"time_between_retries","value":"1"},{"name":"pubsub_topic","value":"None"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":4,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"testStage":{"status":"passed","steps":[{"name":"check_published_message_reaches_relay_peer","time":{"start":1728879964359,"stop":1728879964487,"duration":128},"status":"passed","steps":[{"name":"create_message","time":{"start":1728879964359,"stop":1728879964360,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"assert_received_message","time":{"start":1728879964480,"stop":1728879964481,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1728879964359504128}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"assert_received_message","time":{"start":1728879964486,"stop":1728879964487,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1728879964359504128}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"message","value":"None"},{"name":"pubsub_topic","value":"None"},{"name":"message_propagation_delay","value":"0.1"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"subscribe_and_publish_with_retry","time":{"start":1728879968179,"stop":1728879969496,"duration":1317},"status":"passed","steps":[{"name":"ensure_relay_subscriptions_on_nodes","time":{"start":1728879968179,"stop":1728879968220,"duration":41},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node_list","value":"[<src.node.waku_node.WakuNode object at 0x7f81a9074ec0>, <src.node.waku_node.WakuNode object at 0x7f81aaca7fb0>]"},{"name":"pubsub_topic_list","value":"['/waku/2/rs/3/1']"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"check_published_message_reaches_relay_peer","time":{"start":1728879968220,"stop":1728879968354,"duration":134},"status":"failed","statusMessage":"AssertionError: Peer NODE_2:wakuorg/nwaku:latest couldn't find any messages\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.7/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/relay.py\", line 125, in check_published_message_reaches_relay_peer\n    assert get_messages_response, f\"Peer NODE_{index + 1}:{peer.image} couldn't find any messages\"\n           ^^^^^^^^^^^^^^^^^^^^^\n","steps":[{"name":"create_message","time":{"start":1728879968220,"stop":1728879968220,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"assert_received_message","time":{"start":1728879968338,"stop":1728879968339,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1728879968220188160}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"message","value":"None"},{"name":"pubsub_topic","value":"None"},{"name":"message_propagation_delay","value":"0.1"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":true,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"ensure_relay_subscriptions_on_nodes","time":{"start":1728879969364,"stop":1728879969375,"duration":11},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node_list","value":"[<src.node.waku_node.WakuNode object at 0x7f81a9074ec0>, <src.node.waku_node.WakuNode object at 0x7f81aaca7fb0>]"},{"name":"pubsub_topic_list","value":"['/waku/2/rs/3/1']"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"check_published_message_reaches_relay_peer","time":{"start":1728879969375,"stop":1728879969496,"duration":121},"status":"passed","steps":[{"name":"create_message","time":{"start":1728879969375,"stop":1728879969375,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"assert_received_message","time":{"start":1728879969490,"stop":1728879969490,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1728879969375153664}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"assert_received_message","time":{"start":1728879969496,"stop":1728879969496,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1728879969375153664}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"message","value":"None"},{"name":"pubsub_topic","value":"None"},{"name":"message_propagation_delay","value":"0.1"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"args","value":"(<tests.relay.test_publish.TestRelayPublish object at 0x7f81aaca7ce0>, [<src.node.waku_node.WakuNode object at 0x7f81a9074ec0>, <src.node.waku_node.WakuNode object at 0x7f81aaca7fb0>], ['/waku/2/rs/3/1'])"}],"shouldDisplayMessage":false,"stepsCount":9,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"254c38865c8336f3","name":"log","source":"254c38865c8336f3.txt","type":"text/plain","size":19457}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":14,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"test_setup::0","time":{"start":1728879969499,"stop":1728879969504,"duration":5},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes::0","time":{"start":1728879969504,"stop":1728879974428,"duration":4924},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"check_waku_log_errors::0","time":{"start":1728879974429,"stop":1728879974446,"duration":17},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail::0","time":{"start":1728879974446,"stop":1728879974446,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"set_allure_env_variables::0","time":{"start":1728881198723,"stop":1728881198723,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"flaky(reruns=5)"},{"name":"tag","value":"@pytest.mark.usefixtures('setup_main_relay_nodes', 'subscribe_main_relay_nodes', 'relay_warm_up')"},{"name":"parentSuite","value":"tests.relay"},{"name":"suite","value":"test_publish"},{"name":"subSuite","value":"TestRelayPublish"},{"name":"host","value":"fv-az1382-240"},{"name":"thread","value":"2186-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.relay.test_publish"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":0,"broken":0,"skipped":0,"passed":83,"unknown":0,"total":83},"items":[{"uid":"d8e54531cf25b1ed","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/390//#testresult/d8e54531cf25b1ed","status":"passed","time":{"start":1728793515809,"stop":1728793520983,"duration":5174}},{"uid":"7ce80ef80182b4c8","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/389//#testresult/7ce80ef80182b4c8","status":"passed","time":{"start":1728707131880,"stop":1728707137311,"duration":5431}},{"uid":"14e80eb57cd1bbc","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/388//#testresult/14e80eb57cd1bbc","status":"passed","time":{"start":1728620744313,"stop":1728620749863,"duration":5550}},{"uid":"bb7ae19b8dffda4a","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/387//#testresult/bb7ae19b8dffda4a","status":"passed","time":{"start":1728534344782,"stop":1728534350223,"duration":5441}},{"uid":"5e905902de30f398","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/385//#testresult/5e905902de30f398","status":"passed","time":{"start":1728361549234,"stop":1728361554472,"duration":5238}},{"uid":"661ea87a894ef21d","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/384//#testresult/661ea87a894ef21d","status":"passed","time":{"start":1728275003563,"stop":1728275009677,"duration":6114}},{"uid":"218b509030101ba3","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/383//#testresult/218b509030101ba3","status":"passed","time":{"start":1728188536117,"stop":1728188542085,"duration":5968}},{"uid":"771a5ce8604b6860","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/382//#testresult/771a5ce8604b6860","status":"passed","time":{"start":1728102169211,"stop":1728102174479,"duration":5268}},{"uid":"5e77c76ecfc757e","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/381//#testresult/5e77c76ecfc757e","status":"passed","time":{"start":1728015789563,"stop":1728015794912,"duration":5349}},{"uid":"6037a3780a21a54f","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/380//#testresult/6037a3780a21a54f","status":"passed","time":{"start":1727941702927,"stop":1727941708288,"duration":5361}},{"uid":"904b0b3182ab7b8f","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/379//#testresult/904b0b3182ab7b8f","status":"passed","time":{"start":1727929420301,"stop":1727929426307,"duration":6006}},{"uid":"d86a46e1bbd56a5e","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/378//#testresult/d86a46e1bbd56a5e","status":"passed","time":{"start":1727842972365,"stop":1727842978181,"duration":5816}},{"uid":"85980149fd603bd8","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/377//#testresult/85980149fd603bd8","status":"passed","time":{"start":1727756598964,"stop":1727756604081,"duration":5117}},{"uid":"f6708c41f7542845","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/376//#testresult/f6708c41f7542845","status":"passed","time":{"start":1727670222826,"stop":1727670228835,"duration":6009}},{"uid":"2635006b6bb1a7ec","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/375//#testresult/2635006b6bb1a7ec","status":"passed","time":{"start":1727583745932,"stop":1727583751106,"duration":5174}},{"uid":"8437bb3736e55444","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/374//#testresult/8437bb3736e55444","status":"passed","time":{"start":1727497323670,"stop":1727497329223,"duration":5553}},{"uid":"39b58a0a51ee1ace","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/373//#testresult/39b58a0a51ee1ace","status":"passed","time":{"start":1727410977763,"stop":1727410983458,"duration":5695}},{"uid":"9e1c14643bd086e1","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/372//#testresult/9e1c14643bd086e1","status":"passed","time":{"start":1727324592668,"stop":1727324598680,"duration":6012}},{"uid":"37e95d49d40b1c7c","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/371//#testresult/37e95d49d40b1c7c","status":"passed","time":{"start":1727238187920,"stop":1727238193081,"duration":5161}},{"uid":"6b80887eb0f55281","reportUrl":"https://waku-org.github.io/waku-interop-tests/nim/370//#testresult/6b80887eb0f55281","status":"passed","time":{"start":1727151765457,"stop":1727151770707,"duration":5250}}]},"tags":["@pytest.mark.usefixtures('setup_main_relay_nodes', 'subscribe_main_relay_nodes', 'relay_warm_up')","flaky(reruns=5)"]},"source":"5767f43b4c9386c6.json","parameterValues":[]}