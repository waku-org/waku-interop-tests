[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_only_relay__peer_relay_and_store with id: 2024-05-06_06-16-55__1db9e6fb-e427-4a94-bfa8-8cc8624db3bd
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-06_06-16-55__1db9e6fb-e427-4a94-bfa8-8cc8624db3bd__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.208.59
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['40475', '40476', '40477', '40478', '40479']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:327 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 40475:40475 -p 40476:40476 -p 40477:40477 -p 40478:40478 -p 40479:40479 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40477 --rest-port=40475 --tcp-port=40476 --discv5-udp-port=40478 --rest-address=0.0.0.0 --nat=extip:172.18.208.59 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40479 --metrics-logging=true --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.208.59 waku 215f71941a865c4071279687b136206eeb3e7ae86d72374b9af65a78826f4089
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 215f71941a86. Setting up logs at ./log/docker/publishing_node1_2024-05-06_06-16-55__1db9e6fb-e427-4a94-bfa8-8cc8624db3bd__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 40475
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40475/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.208.59/tcp/40476/p2p/16Uiu2HAmJ92FkSz7Y4p4WY3iAgZoUCa8QN2ge2dQbHjyz9uvsLt1","/ip4/172.18.208.59/tcp/40477/ws/p2p/16Uiu2HAmJ92FkSz7Y4p4WY3iAgZoUCa8QN2ge2dQbHjyz9uvsLt1"],"enrUri":"enr:-LO4QKnZcOVAhJ3XFcuDd9Szzqdgo4d4iH0lm_vxqjNJwJygNaFQjFpOtCSuB15ONV6pffZBdw-VvjRh3R2J2H5y9Q4BgmlkgnY0gmlwhKwS0DuKbXVsdGlhZGRyc4wACgSsEtA7Bp4d3QOCcnOFAAABAACJc2VjcDI1NmsxoQNReNnG93v0sqkypewLjwvV3WM-IYhS79FdLxJr03k-WoN0Y3CCnhyDdWRwgp4ehXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:193 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-06_06-16-55__1db9e6fb-e427-4a94-bfa8-8cc8624db3bd__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.79.95
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['59530', '59531', '59532', '59533', '59534']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:327 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 59530:59530 -p 59531:59531 -p 59532:59532 -p 59533:59533 -p 59534:59534 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=59532 --rest-port=59530 --tcp-port=59531 --discv5-udp-port=59533 --rest-address=0.0.0.0 --nat=extip:172.18.79.95 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=59534 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QKnZcOVAhJ3XFcuDd9Szzqdgo4d4iH0lm_vxqjNJwJygNaFQjFpOtCSuB15ONV6pffZBdw-VvjRh3R2J2H5y9Q4BgmlkgnY0gmlwhKwS0DuKbXVsdGlhZGRyc4wACgSsEtA7Bp4d3QOCcnOFAAABAACJc2VjcDI1NmsxoQNReNnG93v0sqkypewLjwvV3WM-IYhS79FdLxJr03k-WoN0Y3CCnhyDdWRwgp4ehXdha3UyAQ --storenode=/ip4/172.18.208.59/tcp/40476/p2p/16Uiu2HAmJ92FkSz7Y4p4WY3iAgZoUCa8QN2ge2dQbHjyz9uvsLt1 --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.79.95 waku aaaee43ad8003fc57f588201ce83ce73f33c877242b98a2d7accc8b23cb9ed70
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID aaaee43ad800. Setting up logs at ./log/docker/store_node1_2024-05-06_06-16-55__1db9e6fb-e427-4a94-bfa8-8cc8624db3bd__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 59530
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59530/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.79.95/tcp/59531/p2p/16Uiu2HAkzgfnJiJJHEfEUC6J2iTBLVnewFXacuy7TBBNXfL5UoEk","/ip4/172.18.79.95/tcp/59532/ws/p2p/16Uiu2HAkzgfnJiJJHEfEUC6J2iTBLVnewFXacuy7TBBNXfL5UoEk"],"enrUri":"enr:-LO4QO1U6JXPZLHeF2PqHBW7K48XB2YiljDI9AqFXM4tINasYRw1OcwvknCO5gDx69bO3WDYaZLOKgSK5gGakBu9_00BgmlkgnY0gmlwhKwST1-KbXVsdGlhZGRyc4wACgSsEk9fBuiM3QOCcnOFAAABAACJc2VjcDI1NmsxoQJOIew-LtxGLF9sFURHH2BYoEVvnd9QD5VyILnlSCFqbYN0Y3CC6IuDdWRwguiNhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:193 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59530/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.208.59/tcp/40476/p2p/16Uiu2HAmJ92FkSz7Y4p4WY3iAgZoUCa8QN2ge2dQbHjyz9uvsLt1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40475/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59530/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40475/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59530/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1714976227777714688,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 215f71941a86
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id aaaee43ad800
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-06_06-16-55__1db9e6fb-e427-4a94-bfa8-8cc8624db3bd__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-06_06-16-55__1db9e6fb-e427-4a94-bfa8-8cc8624db3bd__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_only_relay__peer_relay_and_store with id: 2024-05-06_06-17-11__41f5633e-820d-4c33-ba3b-8139e5005341
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-06_06-17-11__41f5633e-820d-4c33-ba3b-8139e5005341__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.248.162
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['35888', '35889', '35890', '35891', '35892']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:327 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 35888:35888 -p 35889:35889 -p 35890:35890 -p 35891:35891 -p 35892:35892 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=35890 --rest-port=35888 --tcp-port=35889 --discv5-udp-port=35891 --rest-address=0.0.0.0 --nat=extip:172.18.248.162 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=35892 --metrics-logging=true --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.248.162 waku bfec56ce990c8ea1624d4cc5950e728fe569a0b9eff61ff741ba328d27b587b3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID bfec56ce990c. Setting up logs at ./log/docker/publishing_node1_2024-05-06_06-17-11__41f5633e-820d-4c33-ba3b-8139e5005341__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 35888
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35888/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.248.162/tcp/35889/p2p/16Uiu2HAmP3BJo2289ac2EEtA6EWKnq3pB7g5i9ozDd1ud6WMC2Sn","/ip4/172.18.248.162/tcp/35890/ws/p2p/16Uiu2HAmP3BJo2289ac2EEtA6EWKnq3pB7g5i9ozDd1ud6WMC2Sn"],"enrUri":"enr:-LO4QChYH-TbHOppuitXR-IBqIKk92LkP3uIhhfnX1Uzy87AAQG7hPx4L6hPoMaRCeJQeqt4u4fGfINY6p0Q7n7ZvO4BgmlkgnY0gmlwhKwS-KKKbXVsdGlhZGRyc4wACgSsEviiBowy3QOCcnOFAAABAACJc2VjcDI1NmsxoQOaRAlBJh7Gcwj68mt462kt7iz7a0jDoyK_DwXIIquYU4N0Y3CCjDGDdWRwgowzhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:193 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-06_06-17-11__41f5633e-820d-4c33-ba3b-8139e5005341__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.84.221
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['48520', '48521', '48522', '48523', '48524']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:327 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 48520:48520 -p 48521:48521 -p 48522:48522 -p 48523:48523 -p 48524:48524 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=48522 --rest-port=48520 --tcp-port=48521 --discv5-udp-port=48523 --rest-address=0.0.0.0 --nat=extip:172.18.84.221 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=48524 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QChYH-TbHOppuitXR-IBqIKk92LkP3uIhhfnX1Uzy87AAQG7hPx4L6hPoMaRCeJQeqt4u4fGfINY6p0Q7n7ZvO4BgmlkgnY0gmlwhKwS-KKKbXVsdGlhZGRyc4wACgSsEviiBowy3QOCcnOFAAABAACJc2VjcDI1NmsxoQOaRAlBJh7Gcwj68mt462kt7iz7a0jDoyK_DwXIIquYU4N0Y3CCjDGDdWRwgowzhXdha3UyAQ --storenode=/ip4/172.18.248.162/tcp/35889/p2p/16Uiu2HAmP3BJo2289ac2EEtA6EWKnq3pB7g5i9ozDd1ud6WMC2Sn --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.84.221 waku 715737776c3b657aed51d359dae7182cf5b75c14b5e57bb6e2bd7110ed9a3135
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 715737776c3b. Setting up logs at ./log/docker/store_node1_2024-05-06_06-17-11__41f5633e-820d-4c33-ba3b-8139e5005341__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 48520
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48520/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.84.221/tcp/48521/p2p/16Uiu2HAmUr8STQKffrou7S2ZPuwh5XJMnRygZoowcNDsJ1ZFEywT","/ip4/172.18.84.221/tcp/48522/ws/p2p/16Uiu2HAmUr8STQKffrou7S2ZPuwh5XJMnRygZoowcNDsJ1ZFEywT"],"enrUri":"enr:-LO4QAeq4J_7-WCDxiS5xtG739IiDT91m0rXFJmzc2MSWnATHCOxNUiQhfWnk9_tzfMLDz3UEc6aIKo40vE1uBZe56oBgmlkgnY0gmlwhKwSVN2KbXVsdGlhZGRyc4wACgSsElTdBr2K3QOCcnOFAAABAACJc2VjcDI1NmsxoQPwlYasHhvhHf9AOk6h5TBY0JDNg9WB99aNZb_lAzPTnoN0Y3CCvYmDdWRwgr2LhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:193 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48520/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.248.162/tcp/35889/p2p/16Uiu2HAmP3BJo2289ac2EEtA6EWKnq3pB7g5i9ozDd1ud6WMC2Sn"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35888/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48520/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35888/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48520/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1714976243987485696,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id bfec56ce990c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 715737776c3b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-06_06-17-11__41f5633e-820d-4c33-ba3b-8139e5005341__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-06_06-17-11__41f5633e-820d-4c33-ba3b-8139e5005341__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_only_relay__peer_relay_and_store with id: 2024-05-06_06-17-27__d9bbc29f-8696-4dbe-99aa-1e0fad6a81b6
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-06_06-17-27__d9bbc29f-8696-4dbe-99aa-1e0fad6a81b6__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.9.113
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['60457', '60458', '60459', '60460', '60461']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:327 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 60457:60457 -p 60458:60458 -p 60459:60459 -p 60460:60460 -p 60461:60461 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=60459 --rest-port=60457 --tcp-port=60458 --discv5-udp-port=60460 --rest-address=0.0.0.0 --nat=extip:172.18.9.113 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=60461 --metrics-logging=true --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.9.113 waku fb161fa8672844ed265d9fb04ef5fc38df26854fa9b918c0e2aa74a427bf1850
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID fb161fa86728. Setting up logs at ./log/docker/publishing_node1_2024-05-06_06-17-27__d9bbc29f-8696-4dbe-99aa-1e0fad6a81b6__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 60457
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60457/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.9.113/tcp/60458/p2p/16Uiu2HAmUku2gVhbBtx9umYti6r8xebsHcdgpvd1VLrrMrtdSQnY","/ip4/172.18.9.113/tcp/60459/ws/p2p/16Uiu2HAmUku2gVhbBtx9umYti6r8xebsHcdgpvd1VLrrMrtdSQnY"],"enrUri":"enr:-LO4QLV0UlnKX8vTxPFqr7P6unrwRs2wltHGPHbE7eHmvnZNU7v7brkz8YdDBZK0HzpsyMxVEMFN2tnlkrHLaByDT2sBgmlkgnY0gmlwhKwSCXGKbXVsdGlhZGRyc4wACgSsEglxBuwr3QOCcnOFAAABAACJc2VjcDI1NmsxoQPvPnWa5-g7rTAlGYrtJzUDiQeTGhBOS53LK_jrPXJG1YN0Y3CC7CqDdWRwguwshXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:193 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-06_06-17-27__d9bbc29f-8696-4dbe-99aa-1e0fad6a81b6__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.111.41
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['2536', '2537', '2538', '2539', '2540']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:327 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 2536:2536 -p 2537:2537 -p 2538:2538 -p 2539:2539 -p 2540:2540 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2538 --rest-port=2536 --tcp-port=2537 --discv5-udp-port=2539 --rest-address=0.0.0.0 --nat=extip:172.18.111.41 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2540 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QLV0UlnKX8vTxPFqr7P6unrwRs2wltHGPHbE7eHmvnZNU7v7brkz8YdDBZK0HzpsyMxVEMFN2tnlkrHLaByDT2sBgmlkgnY0gmlwhKwSCXGKbXVsdGlhZGRyc4wACgSsEglxBuwr3QOCcnOFAAABAACJc2VjcDI1NmsxoQPvPnWa5-g7rTAlGYrtJzUDiQeTGhBOS53LK_jrPXJG1YN0Y3CC7CqDdWRwguwshXdha3UyAQ --storenode=/ip4/172.18.9.113/tcp/60458/p2p/16Uiu2HAmUku2gVhbBtx9umYti6r8xebsHcdgpvd1VLrrMrtdSQnY --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.111.41 waku aec65a23a9ec7275a68825c14a970d2a3d3b22a7aecd675f97e4ca5808413100
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID aec65a23a9ec. Setting up logs at ./log/docker/store_node1_2024-05-06_06-17-27__d9bbc29f-8696-4dbe-99aa-1e0fad6a81b6__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 2536
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2536/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.111.41/tcp/2537/p2p/16Uiu2HAm6WEjRN46VyziQnY6tzYSkCTBXdtRvEuvGu6AzW56qx7n","/ip4/172.18.111.41/tcp/2538/ws/p2p/16Uiu2HAm6WEjRN46VyziQnY6tzYSkCTBXdtRvEuvGu6AzW56qx7n"],"enrUri":"enr:-LO4QHEX-qH7XPZ1Zuw26EfjDijCq0KTe-_bp_Yl1792bHrSBD5GPuAF3Fd0OAUDvHXiPRV1Pq7A76W_zm15WxTR-LUBgmlkgnY0gmlwhKwSbymKbXVsdGlhZGRyc4wACgSsEm8pBgnq3QOCcnOFAAABAACJc2VjcDI1NmsxoQKkm-mWcwJ7GQ9v6ckPjoeXAcL7jdlhei9e39RqrgeCVYN0Y3CCCemDdWRwggnrhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:193 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2536/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.9.113/tcp/60458/p2p/16Uiu2HAmUku2gVhbBtx9umYti6r8xebsHcdgpvd1VLrrMrtdSQnY"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60457/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2536/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60457/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2536/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1714976259451570432,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id fb161fa86728
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id aec65a23a9ec
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-06_06-17-27__d9bbc29f-8696-4dbe-99aa-1e0fad6a81b6__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-06_06-17-27__d9bbc29f-8696-4dbe-99aa-1e0fad6a81b6__harbor.status.im_wakuorg_nwaku:latest.log