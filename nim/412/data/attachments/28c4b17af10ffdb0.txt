[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_node_not_connected_directly_to_lightpushing_node with id: 2024-10-29_04-03-44__0812ca4b-8b90-4419-8623-39d480cdd08f
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-29_04-03-44__0812ca4b-8b90-4419-8623-39d480cdd08f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-10-29_04-03-44__0812ca4b-8b90-4419-8623-39d480cdd08f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-10-29_04-03-44__0812ca4b-8b90-4419-8623-39d480cdd08f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.9.94
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['17322', '17323', '17324', '17325', '17326']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 17322:17322 -p 17323:17323 -p 17324:17324 -p 17325:17325 -p 17326:17326 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17324 --rest-port=17322 --tcp-port=17323 --discv5-udp-port=17325 --rest-address=0.0.0.0 --nat=extip:172.18.9.94 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a93e2fbfd26dc71d6a58badd19cd4aebad38e0c05ea716ba8ebc283f0951ac68 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17326 --metrics-logging=true --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.9.94 waku fa36f055d248f7aed97924b3f916e8a5aadc71ed25ac89d758c8dc3e965541fe
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID fa36f055d248. Setting up logs at ./log/docker/node1_2024-10-29_04-03-44__0812ca4b-8b90-4419-8623-39d480cdd08f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 17322
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container a383083c7b1f. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17322/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17322/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.9.94/tcp/17323/p2p/16Uiu2HAmKBdPTSZryQuCacujKvKrLjt9QfDsZgFRXT6qoCZVvY2o","/ip4/172.18.9.94/tcp/17324/ws/p2p/16Uiu2HAmKBdPTSZryQuCacujKvKrLjt9QfDsZgFRXT6qoCZVvY2o"],"enrUri":"enr:-L24QDg8_giZjESZOmR8U8rGW6wbcvAKhvfhoyhiJgV7R9ncEekINCWBqyszFqCrqHYfLiyaxWiiPJvXfEwNSgSmIKACgmlkgnY0gmlwhKwSCV6KbXVsdGlhZGRyc5YACASsEgleBkOrAAoErBIJXgZDrN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDYP9ski8C1fB44mBIZBdndLBW9FXjaF7KrgA20Gn7NYyDdGNwgkOrg3VkcIJDrYV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.208.62
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['48261', '48262', '48263', '48264', '48265']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 48261:48261 -p 48262:48262 -p 48263:48263 -p 48264:48264 -p 48265:48265 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=48263 --rest-port=48261 --tcp-port=48262 --discv5-udp-port=48264 --rest-address=0.0.0.0 --nat=extip:172.18.208.62 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=aecab29df9dfb1bd7f1569beb4abe83fedcddc7e1bac577757aba0bec0fbad00 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=48265 --metrics-logging=true --lightpush=true --filter=true --relay=true --discv5-bootstrap-node=enr:-L24QDg8_giZjESZOmR8U8rGW6wbcvAKhvfhoyhiJgV7R9ncEekINCWBqyszFqCrqHYfLiyaxWiiPJvXfEwNSgSmIKACgmlkgnY0gmlwhKwSCV6KbXVsdGlhZGRyc5YACASsEgleBkOrAAoErBIJXgZDrN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDYP9ski8C1fB44mBIZBdndLBW9FXjaF7KrgA20Gn7NYyDdGNwgkOrg3VkcIJDrYV3YWt1Mgk --lightpushnode=/ip4/172.18.9.94/tcp/17323/p2p/16Uiu2HAmKBdPTSZryQuCacujKvKrLjt9QfDsZgFRXT6qoCZVvY2o
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.208.62 waku c421141b4c7f67b4da5a60ee5cc3d960ee392676da6a4e40cd938d964a7cc1aa
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID c421141b4c7f. Setting up logs at ./log/docker/node2_2024-10-29_04-03-44__0812ca4b-8b90-4419-8623-39d480cdd08f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 48261
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48261/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48261/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.208.62/tcp/48262/p2p/16Uiu2HAkxFypsi3mvPFyFjwrFxDuh1Ne2VnzaUR8yTvGYwkom2nt","/ip4/172.18.208.62/tcp/48263/ws/p2p/16Uiu2HAkxFypsi3mvPFyFjwrFxDuh1Ne2VnzaUR8yTvGYwkom2nt"],"enrUri":"enr:-L24QG1wCZTQNeEIviq9D74SqG-1bCYMXT6yLQyGNaF0NPEQZ-dS4B2VhDFwKYluZRrzmPgkMl_cfT4qgxo9q8TO1acCgmlkgnY0gmlwhKwS0D6KbXVsdGlhZGRyc5YACASsEtA-BryGAAoErBLQPga8h90DgnJzhQADAQAAiXNlY3AyNTZrMaECKhdudha2yeIKL5GREb2akmEec6YvqMVoZNaBaXbvsSmDdGNwgryGg3VkcIK8iIV3YWt1Mg0"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.130.168
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['26983', '26984', '26985', '26986', '26987']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 26983:26983 -p 26984:26984 -p 26985:26985 -p 26986:26986 -p 26987:26987 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26985 --rest-port=26983 --tcp-port=26984 --discv5-udp-port=26986 --rest-address=0.0.0.0 --nat=extip:172.18.130.168 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2433cb99f62dcd8b8af2df770811fc2ad5cffddc0fccbf4abeffa5c73b982536 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26987 --metrics-logging=true --relay=false --filternode=/ip4/172.18.208.62/tcp/48262/p2p/16Uiu2HAkxFypsi3mvPFyFjwrFxDuh1Ne2VnzaUR8yTvGYwkom2nt --discv5-bootstrap-node=enr:-L24QG1wCZTQNeEIviq9D74SqG-1bCYMXT6yLQyGNaF0NPEQZ-dS4B2VhDFwKYluZRrzmPgkMl_cfT4qgxo9q8TO1acCgmlkgnY0gmlwhKwS0D6KbXVsdGlhZGRyc5YACASsEtA-BryGAAoErBLQPga8h90DgnJzhQADAQAAiXNlY3AyNTZrMaECKhdudha2yeIKL5GREb2akmEec6YvqMVoZNaBaXbvsSmDdGNwgryGg3VkcIK8iIV3YWt1Mg0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.130.168 waku ff6365a4818d2d62331ce9cbe36c667fbac7683a4c8b7ad6434749c086d6b36e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ff6365a4818d. Setting up logs at ./log/docker/node3_2024-10-29_04-03-44__0812ca4b-8b90-4419-8623-39d480cdd08f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 26983
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26983/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26983/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.130.168/tcp/26984/p2p/16Uiu2HAmQNimPci3E8uq5ipHD4RcLXWoyotYTCE6zUcYuU7bdWZW","/ip4/172.18.130.168/tcp/26985/ws/p2p/16Uiu2HAmQNimPci3E8uq5ipHD4RcLXWoyotYTCE6zUcYuU7bdWZW"],"enrUri":"enr:-L24QGBlkth5H9Mo1Nlt5VgxeqRt4Aw7h79QQFcFEyML5X1xLEHrzBnrZuqJTCU2NfO9GmIxp2AuXLuPv2ZvT609N0QCgmlkgnY0gmlwhKwSgqiKbXVsdGlhZGRyc5YACASsEoKoBmloAAoErBKCqAZpad0DgnJzhQADAQAAiXNlY3AyNTZrMaEDriFUKWxFviUcKcU6w_scvLDWgxrCE46DsaAKM6p7K7GDdGNwgmlog3VkcIJpaoV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:17322/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48261/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26983/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17322/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17322/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.208.62/tcp/48262/p2p/16Uiu2HAkxFypsi3mvPFyFjwrFxDuh1Ne2VnzaUR8yTvGYwkom2nt","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48261/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.9.94/tcp/17323/p2p/16Uiu2HAmKBdPTSZryQuCacujKvKrLjt9QfDsZgFRXT6qoCZVvY2o","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"},{"multiaddr":"/ip4/172.18.130.168/tcp/26984/p2p/16Uiu2HAmQNimPci3E8uq5ipHD4RcLXWoyotYTCE6zUcYuU7bdWZW","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26983/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.208.62/tcp/48262/p2p/16Uiu2HAkxFypsi3mvPFyFjwrFxDuh1Ne2VnzaUR8yTvGYwkom2nt","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:17322/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1730174659809669120}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26983/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1730174659809669120,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id fa36f055d248
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id c421141b4c7f
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container fa36f055d248. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id ff6365a4818d
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container c421141b4c7f. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.