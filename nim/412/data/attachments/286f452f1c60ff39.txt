[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_version with id: 2024-10-29_04-10-41__a263e817-09b8-458a-a930-d60ebca5a799
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-10-29_04-10-41__a263e817-09b8-458a-a930-d60ebca5a799__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.92.58
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['5465', '5466', '5467', '5468', '5469']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 5465:5465 -p 5466:5466 -p 5467:5467 -p 5468:5468 -p 5469:5469 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=5467 --rest-port=5465 --tcp-port=5466 --discv5-udp-port=5468 --rest-address=0.0.0.0 --nat=extip:172.18.92.58 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ead66fcb68ddfbcd35117a361d04bb54ed4bfc1a95efff665d5cebdbe80f4e4a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=5469 --metrics-logging=true --lightpush=true --relay=true
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 642e72901ecc. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.92.58 waku 5ff16fe701446d95af7d4aebe94e3686d8a406754586577b6f343bfe42bd7310
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 5ff16fe70144. Setting up logs at ./log/docker/receiving_node1_2024-10-29_04-10-41__a263e817-09b8-458a-a930-d60ebca5a799__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 5465
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5465/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5465/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.92.58/tcp/5466/p2p/16Uiu2HAm5R3wnXiLo6rAGrhgYn4G5FyDoD8czBZrYKNGcBav828c","/ip4/172.18.92.58/tcp/5467/ws/p2p/16Uiu2HAm5R3wnXiLo6rAGrhgYn4G5FyDoD8czBZrYKNGcBav828c"],"enrUri":"enr:-L24QL1-sQ7d29NOXrefnYwKGp7wO14e4_uiA04MDOIj9V_2EPoWX6IBqMlimIRfiQIjn31fOBRulFimJiQpoYZkfUUCgmlkgnY0gmlwhKwSXDqKbXVsdGlhZGRyc5YACASsElw6BhVaAAoErBJcOgYVW90DgnJzhQADAQAAiXNlY3AyNTZrMaEClGwf8nq98O5EryKW-AwWhNybrEmkCuQOzYdvp39gUuWDdGNwghVag3VkcIIVXIV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-10-29_04-10-41__a263e817-09b8-458a-a930-d60ebca5a799__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.165.168
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['19265', '19266', '19267', '19268', '19269']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 19265:19265 -p 19266:19266 -p 19267:19267 -p 19268:19268 -p 19269:19269 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19267 --rest-port=19265 --tcp-port=19266 --discv5-udp-port=19268 --rest-address=0.0.0.0 --nat=extip:172.18.165.168 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5e7cf1ef98b4ace1157be95caf31fcde4fad2f0da9f3fdcd32c698a1e2c98d6a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19269 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.165.168 waku 0b12a1222c2f3f48757cce821eb0c653963f10f81a306fcf3b61006047e33378
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 0b12a1222c2f. Setting up logs at ./log/docker/receiving_node2_2024-10-29_04-10-41__a263e817-09b8-458a-a930-d60ebca5a799__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 19265
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19265/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19265/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.165.168/tcp/19266/p2p/16Uiu2HAkuToA9M6Ry453P5XfEicz9K6uBBY9LaP9CCMHU6X7hYzx","/ip4/172.18.165.168/tcp/19267/ws/p2p/16Uiu2HAkuToA9M6Ry453P5XfEicz9K6uBBY9LaP9CCMHU6X7hYzx"],"enrUri":"enr:-L24QA-QBLowGYYKpclb5OHZl_EoSX2_L-rgUrEcRtxYhgKjQ-oRJ04V0hRhd5yWnp-lqYkFQLyCqkSLkGzpAssJgwUCgmlkgnY0gmlwhKwSpaiKbXVsdGlhZGRyc5YACASsEqWoBktCAAoErBKlqAZLQ90DgnJzhQADAQAAiXNlY3AyNTZrMaECAItHQTjE2j611Ec8SOuqqZ9CdE0KHmTdtCHlnqV0KJ2DdGNwgktCg3VkcIJLRIV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19265/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.92.58/tcp/5466/p2p/16Uiu2HAm5R3wnXiLo6rAGrhgYn4G5FyDoD8czBZrYKNGcBav828c"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-10-29_04-10-41__a263e817-09b8-458a-a930-d60ebca5a799__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.249.62
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['64160', '64161', '64162', '64163', '64164']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 64160:64160 -p 64161:64161 -p 64162:64162 -p 64163:64163 -p 64164:64164 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64162 --rest-port=64160 --tcp-port=64161 --discv5-udp-port=64163 --rest-address=0.0.0.0 --nat=extip:172.18.249.62 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9f431cd517ed5fa1e65b09d62b8fdfefbf113ea55ed714bfc95a60c40feee6eb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64164 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QL1-sQ7d29NOXrefnYwKGp7wO14e4_uiA04MDOIj9V_2EPoWX6IBqMlimIRfiQIjn31fOBRulFimJiQpoYZkfUUCgmlkgnY0gmlwhKwSXDqKbXVsdGlhZGRyc5YACASsElw6BhVaAAoErBJcOgYVW90DgnJzhQADAQAAiXNlY3AyNTZrMaEClGwf8nq98O5EryKW-AwWhNybrEmkCuQOzYdvp39gUuWDdGNwghVag3VkcIIVXIV3YWt1Mgk --lightpushnode=/ip4/172.18.92.58/tcp/5466/p2p/16Uiu2HAm5R3wnXiLo6rAGrhgYn4G5FyDoD8czBZrYKNGcBav828c --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.249.62 waku 0ff9b71261b936fd9e2ff17af6171cdb55783512cc848151ec50ebf8595f25f2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 0ff9b71261b9. Setting up logs at ./log/docker/lightpush_node1_2024-10-29_04-10-41__a263e817-09b8-458a-a930-d60ebca5a799__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 64160
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64160/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64160/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.249.62/tcp/64161/p2p/16Uiu2HAmKZ2x2u2zXM4LxusuCJqxoMaThv3QEHXWRMuPemXfbw3Z","/ip4/172.18.249.62/tcp/64162/ws/p2p/16Uiu2HAmKZ2x2u2zXM4LxusuCJqxoMaThv3QEHXWRMuPemXfbw3Z"],"enrUri":"enr:-L24QGF2-aYiKe9RIkl0rxL60KtlrXoSD-wvRp1oWmwXeGYRFloBetAIz922YdALlv-EOJUs_iftLe-nqBTRR6Lk4E4CgmlkgnY0gmlwhKwS-T6KbXVsdGlhZGRyc5YACASsEvk-BvqhAAoErBL5Pgb6ot0DgnJzhQADAQAAiXNlY3AyNTZrMaEDZntDKhSXfNWb77YH8dAmiF6vMXsYoI4LmIdpR269bhyDdGNwgvqhg3VkcIL6o4V3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64160/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.92.58/tcp/5466/p2p/16Uiu2HAm5R3wnXiLo6rAGrhgYn4G5FyDoD8czBZrYKNGcBav828c"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64160/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.165.168/tcp/19266/p2p/16Uiu2HAkuToA9M6Ry453P5XfEicz9K6uBBY9LaP9CCMHU6X7hYzx"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5465/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19265/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64160/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1730175046366217984, "version": 2.1}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:64160/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 5ff16fe70144
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 0b12a1222c2f
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 5ff16fe70144. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 0ff9b71261b9
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 0b12a1222c2f. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.