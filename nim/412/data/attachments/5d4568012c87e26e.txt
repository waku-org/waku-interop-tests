[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_lightpush with id: 2024-10-29_04-02-55__1f278c36-2e7e-42aa-86a6-96f939a6ead4
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-29_04-02-55__1f278c36-2e7e-42aa-86a6-96f939a6ead4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.214.28
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['24888', '24889', '24890', '24891', '24892']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 24888:24888 -p 24889:24889 -p 24890:24890 -p 24891:24891 -p 24892:24892 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=24890 --rest-port=24888 --tcp-port=24889 --discv5-udp-port=24891 --rest-address=0.0.0.0 --nat=extip:172.18.214.28 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ed49a8cdfefbe12c2aedd5cd1bfa4a7fbdac1197989baedad344a147dfcfdcdc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=24892 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.214.28 waku ee3ca81989442db6ee579da60e91cfa71f71371f7125a3947ae2eb4d39f49c7b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ee3ca8198944. Setting up logs at ./log/docker/node1_2024-10-29_04-02-55__1f278c36-2e7e-42aa-86a6-96f939a6ead4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 24888
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 4d3041e75481. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24888/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24888/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.214.28/tcp/24889/p2p/16Uiu2HAmCLtJpPqvzJyz8v1bzb8WNYVQXFRTnABvdYTM5PSyqMeo","/ip4/172.18.214.28/tcp/24890/ws/p2p/16Uiu2HAmCLtJpPqvzJyz8v1bzb8WNYVQXFRTnABvdYTM5PSyqMeo"],"enrUri":"enr:-L24QIu8BbfkPD8c8t0WnmDRAqDeV-gyXpU6n8s-skrxfCzlbLV3AADaPBp4h-k7Ett6_trCwNTneziGSGj3ZM43l5YCgmlkgnY0gmlwhKwS1hyKbXVsdGlhZGRyc5YACASsEtYcBmE5AAoErBLWHAZhOt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC-1y2iNCjhLUzdkTz_GZLhupDMoX83HjeUAIdTfTwxoCDdGNwgmE5g3VkcIJhO4V3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-29_04-02-55__1f278c36-2e7e-42aa-86a6-96f939a6ead4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.124.244
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['18023', '18024', '18025', '18026', '18027']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 18023:18023 -p 18024:18024 -p 18025:18025 -p 18026:18026 -p 18027:18027 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18025 --rest-port=18023 --tcp-port=18024 --discv5-udp-port=18026 --rest-address=0.0.0.0 --nat=extip:172.18.124.244 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=def9dbb742a229bec1c2f25ef9d2affb0dccae8eeba1aacdb8919e3c72aab0e5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18027 --metrics-logging=true --lightpush=false --relay=true --discv5-bootstrap-node=enr:-L24QIu8BbfkPD8c8t0WnmDRAqDeV-gyXpU6n8s-skrxfCzlbLV3AADaPBp4h-k7Ett6_trCwNTneziGSGj3ZM43l5YCgmlkgnY0gmlwhKwS1hyKbXVsdGlhZGRyc5YACASsEtYcBmE5AAoErBLWHAZhOt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC-1y2iNCjhLUzdkTz_GZLhupDMoX83HjeUAIdTfTwxoCDdGNwgmE5g3VkcIJhO4V3YWt1Mgk
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.124.244 waku 1cf7ee6633b0ecaa0cbc12e3ea99b966c785036d79b41428da333de3aff92881
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 1cf7ee6633b0. Setting up logs at ./log/docker/node1_2024-10-29_04-02-55__1f278c36-2e7e-42aa-86a6-96f939a6ead4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 18023
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18023/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18023/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.124.244/tcp/18024/p2p/16Uiu2HAm4UnuKnxLeDJgxkUAnYuTkyZMm2632gDQvDZAgTxoBbWk","/ip4/172.18.124.244/tcp/18025/ws/p2p/16Uiu2HAm4UnuKnxLeDJgxkUAnYuTkyZMm2632gDQvDZAgTxoBbWk"],"enrUri":"enr:-L24QD51azThfDVH9-w2m9BgWWCoxpG-j1uZ-esQIT2hK1Jlcux3qFAPX88F3w2f3Q2r8fLRsmdwbOuXDgtj-7yVL00CgmlkgnY0gmlwhKwSfPSKbXVsdGlhZGRyc5YACASsEnz0BkZoAAoErBJ89AZGad0DgnJzhQADAQAAiXNlY3AyNTZrMaEChoXAqJ4-nC76cYvAjkapmK8_KIX4jFSqrwnqzW_7FlWDdGNwgkZog3VkcIJGaoV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-29_04-02-55__1f278c36-2e7e-42aa-86a6-96f939a6ead4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.117.9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['8378', '8379', '8380', '8381', '8382']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 8378:8378 -p 8379:8379 -p 8380:8380 -p 8381:8381 -p 8382:8382 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8380 --rest-port=8378 --tcp-port=8379 --discv5-udp-port=8381 --rest-address=0.0.0.0 --nat=extip:172.18.117.9 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9f4e312e9124a3ff581ee6f6efc41bcef48bfcb72392ffd7f9059edee7c2c87a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8382 --metrics-logging=true --lightpush=true --relay=false --discv5-bootstrap-node=enr:-L24QIu8BbfkPD8c8t0WnmDRAqDeV-gyXpU6n8s-skrxfCzlbLV3AADaPBp4h-k7Ett6_trCwNTneziGSGj3ZM43l5YCgmlkgnY0gmlwhKwS1hyKbXVsdGlhZGRyc5YACASsEtYcBmE5AAoErBLWHAZhOt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC-1y2iNCjhLUzdkTz_GZLhupDMoX83HjeUAIdTfTwxoCDdGNwgmE5g3VkcIJhO4V3YWt1Mgk --lightpushnode=/ip4/172.18.214.28/tcp/24889/p2p/16Uiu2HAmCLtJpPqvzJyz8v1bzb8WNYVQXFRTnABvdYTM5PSyqMeo
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.117.9 waku 7092f89457f99a269575d47e94b2d3137f804e89f65b545b4a3609d254baccae
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 7092f89457f9. Setting up logs at ./log/docker/node1_2024-10-29_04-02-55__1f278c36-2e7e-42aa-86a6-96f939a6ead4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 8378
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8378/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8378/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.117.9/tcp/8379/p2p/16Uiu2HAmVmZExfhdYDLM3D4m2NjovtorhjMfXDbv2soSZtRDzmUq","/ip4/172.18.117.9/tcp/8380/ws/p2p/16Uiu2HAmVmZExfhdYDLM3D4m2NjovtorhjMfXDbv2soSZtRDzmUq"],"enrUri":"enr:-L24QG4rmDKkMQm5kwMkyN6bskmS1R9ZF5AiEPVDGAEBeEgJT2b70Hco5_7C527e8Y8n6ZJxGuUeNcZ6qZS1IVhTnl4CgmlkgnY0gmlwhKwSdQmKbXVsdGlhZGRyc5YACASsEnUJBiC7AAoErBJ1CQYgvN0DgnJzhQADAQAAiXNlY3AyNTZrMaED_kVaOQkTEqtZYWjTZWzB0RiXINtqPxKg3u_jGGAacuaDdGNwgiC7g3VkcIIgvYV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24888/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18023/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8378/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": 1730174580058607616}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24888/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1730174580058607616,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18023/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1730174580058607616,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id ee3ca8198944
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 1cf7ee6633b0
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container ee3ca8198944. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 7092f89457f9
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 1cf7ee6633b0. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.