[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_update_subscription_with_pubsub_topic_list_instead_of_string with id: 2024-10-29_04-07-12__ceaa00b5-efcc-433b-85b2-3a9ab23154a6
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-29_04-07-12__ceaa00b5-efcc-433b-85b2-3a9ab23154a6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.37.84
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['57858', '57859', '57860', '57861', '57862']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 57858:57858 -p 57859:57859 -p 57860:57860 -p 57861:57861 -p 57862:57862 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57860 --rest-port=57858 --tcp-port=57859 --discv5-udp-port=57861 --rest-address=0.0.0.0 --nat=extip:172.18.37.84 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=83dd9eb1a2dfc2ae79823fda1fb4ccde44d37faadbfddcce510371abb6cef7b7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57862 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.11.196
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['8321', '8322', '8323', '8324', '8325']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 8321:8321 -p 8322:8322 -p 8323:8323 -p 8324:8324 -p 8325:8325 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8323 --rest-port=8321 --tcp-port=8322 --discv5-udp-port=8324 --rest-address=0.0.0.0 --nat=extip:172.18.11.196 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e9e59be06dee5e6e9a6459d1b5ccf9bced195d4863991270ab3bf06d39dafd4e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8325 --metrics-logging=true --relay=true --filter=true
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 9983458df8d5. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.11.196 waku 3fbe6ebc837ae340d87133a1ce3bb7ca45bee21463dd56087b27e9f048fa9d27
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 3fbe6ebc837a. Setting up logs at ./log/docker/node1_2024-10-29_04-07-12__ceaa00b5-efcc-433b-85b2-3a9ab23154a6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 8321
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8321/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8321/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.11.196/tcp/8322/p2p/16Uiu2HAmCyph4ogkhFKGi7SEFQjxMA3P12qVAr2XVwSmS8zBH33a","/ip4/172.18.11.196/tcp/8323/ws/p2p/16Uiu2HAmCyph4ogkhFKGi7SEFQjxMA3P12qVAr2XVwSmS8zBH33a"],"enrUri":"enr:-L24QGa-_al5tuvorPtzvn0EcCjQ6wSPWYkmurj_PwyRaYIRGy_f4O1SVrpzOTWLx0RYYmsf42xu6YbY6CA03Zifn7ICgmlkgnY0gmlwhKwSC8SKbXVsdGlhZGRyc5YACASsEgvEBiCCAAoErBILxAYgg90DgnJzhQADAQAAiXNlY3AyNTZrMaEDBNMdJxoAeqIZwrFUxfMLJo-PXSFqSkTEMiLIbHLP8N2DdGNwgiCCg3VkcIIghIV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-10-29_04-07-12__ceaa00b5-efcc-433b-85b2-3a9ab23154a6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.57.7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['37118', '37119', '37120', '37121', '37122']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 37118:37118 -p 37119:37119 -p 37120:37120 -p 37121:37121 -p 37122:37122 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37120 --rest-port=37118 --tcp-port=37119 --discv5-udp-port=37121 --rest-address=0.0.0.0 --nat=extip:172.18.57.7 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cba6118873c2ec6c5f22ffdbfa7bceea94f7a8fda5a916fad3ae9e5c8ab002cb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37122 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QGa-_al5tuvorPtzvn0EcCjQ6wSPWYkmurj_PwyRaYIRGy_f4O1SVrpzOTWLx0RYYmsf42xu6YbY6CA03Zifn7ICgmlkgnY0gmlwhKwSC8SKbXVsdGlhZGRyc5YACASsEgvEBiCCAAoErBILxAYgg90DgnJzhQADAQAAiXNlY3AyNTZrMaEDBNMdJxoAeqIZwrFUxfMLJo-PXSFqSkTEMiLIbHLP8N2DdGNwgiCCg3VkcIIghIV3YWt1MgU --filternode=/ip4/172.18.11.196/tcp/8322/p2p/16Uiu2HAmCyph4ogkhFKGi7SEFQjxMA3P12qVAr2XVwSmS8zBH33a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.57.7 waku c74f8d4d51a273d36d84a1c492e8c8db10a36e0c8f133710032882bb61a82195
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID c74f8d4d51a2. Setting up logs at ./log/docker/node2_2024-10-29_04-07-12__ceaa00b5-efcc-433b-85b2-3a9ab23154a6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 37118
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37118/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37118/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.57.7/tcp/37119/p2p/16Uiu2HAm7omjti91wr3dzQ8fzyFQsqsxsxwxmaH61VPWdo259oA8","/ip4/172.18.57.7/tcp/37120/ws/p2p/16Uiu2HAm7omjti91wr3dzQ8fzyFQsqsxsxwxmaH61VPWdo259oA8"],"enrUri":"enr:-L24QHqabwhEIY30vjcPGhLYkMNWXRj-fBAVcGu01eLb2DSUAoD2U-VhjKWDpVbHdaifIJiNeXxcczc1YyovNRBvh_MCgmlkgnY0gmlwhKwSOQeKbXVsdGlhZGRyc5YACASsEjkHBpD_AAoErBI5BwaRAN0DgnJzhQADAQAAiXNlY3AyNTZrMaECt_WIvSFgubCVnWzE8X1q_IKs4QRG377M8YkZqcJALCmDdGNwgpD_g3VkcIKRAYV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37118/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.11.196/tcp/8322/p2p/16Uiu2HAmCyph4ogkhFKGi7SEFQjxMA3P12qVAr2XVwSmS8zBH33a"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8321/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37118/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "de1ca084-5103-45c9-a945-76abc10ff608", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"de1ca084-5103-45c9-a945-76abc10ff608","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X PUT "http://127.0.0.1:37118/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": ["/waku/2/rs/3/1"]}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:37118/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 3fbe6ebc837a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id c74f8d4d51a2
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 3fbe6ebc837a. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.