[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_version with id: 2024-12-25_18-51-23__1e1b353d-df16-423a-9d9e-4c47646e2579
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-12-25_18-51-23__1e1b353d-df16-423a-9d9e-4c47646e2579__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.198.74
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['40381', '40382', '40383', '40384', '40385']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 40381:40381 -p 40382:40382 -p 40383:40383 -p 40384:40384 -p 40385:40385 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40383 --rest-port=40381 --tcp-port=40382 --discv5-udp-port=40384 --rest-address=0.0.0.0 --nat=extip:172.18.198.74 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c47894efc929f17a07a2be32b6afda83bae2a5165ce8fe99eb3472062a18dad5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40385 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.198.74 waku e795c668b129428a5a640b20d486dc0cfa95436f208d1cf562fd29b5e508ac8e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID e795c668b129. Setting up logs at ./log/docker/receiving_node1_2024-12-25_18-51-23__1e1b353d-df16-423a-9d9e-4c47646e2579__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 40381
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container b55bd46140ce. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40381/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40381/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.198.74/tcp/40382/p2p/16Uiu2HAm8X3eereGmwcqZtXr83Xq48Nje9JvUUrkU8NNNhxGg8zX","/ip4/172.18.198.74/tcp/40383/ws/p2p/16Uiu2HAm8X3eereGmwcqZtXr83Xq48Nje9JvUUrkU8NNNhxGg8zX"],"enrUri":"enr:-L24QGnog1Or1Pi55p8WH3vPqRdJFtuNvhoiCnNumQIzsAy4SvJ-am2w7oY9XBhCGW09XqPr1r2LC2Dils-wDEZ28LECgmlkgnY0gmlwhKwSxkqKbXVsdGlhZGRyc5YACASsEsZKBp2-AAoErBLGSgadv90DgnJzhQADAQAAiXNlY3AyNTZrMaECwohWIJe96h4CR0E0vdeVRn1dyjJNMCE9sHFd1_B1n-yDdGNwgp2-g3VkcIKdwIV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-12-25_18-51-23__1e1b353d-df16-423a-9d9e-4c47646e2579__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.118.184
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['61652', '61653', '61654', '61655', '61656']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 61652:61652 -p 61653:61653 -p 61654:61654 -p 61655:61655 -p 61656:61656 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61654 --rest-port=61652 --tcp-port=61653 --discv5-udp-port=61655 --rest-address=0.0.0.0 --nat=extip:172.18.118.184 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ad6c68bd92e59ae4f7ef46ddeb06cb1758f5d4f680f7f9f1d578c7baf920bcdc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61656 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.118.184 waku 4c63fc13fdedc529df28aa24cf4b14a464a422fcb18b6cfb6cf6274c7d8847cf
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 4c63fc13fded. Setting up logs at ./log/docker/receiving_node2_2024-12-25_18-51-23__1e1b353d-df16-423a-9d9e-4c47646e2579__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 61652
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61652/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61652/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.118.184/tcp/61653/p2p/16Uiu2HAm48EuTkoEpHpfTAegTdrN3DV3bh6fbB9ERmWjz6mDLP4Z","/ip4/172.18.118.184/tcp/61654/ws/p2p/16Uiu2HAm48EuTkoEpHpfTAegTdrN3DV3bh6fbB9ERmWjz6mDLP4Z"],"enrUri":"enr:-L24QPsIkt256gTBpSYyg6Hkb1bCZy3gyIYPC7ifqLd66nQsPDj3Y1iJdgArG60iSmnIWCjCUvBJDl72ogXQknk7eOgCgmlkgnY0gmlwhKwSdriKbXVsdGlhZGRyc5YACASsEna4BvDVAAoErBJ2uAbw1t0DgnJzhQADAQAAiXNlY3AyNTZrMaECgUH04KAFvKNTZDo3v16jvabO7hFO8hUiuTn9ILcAON6DdGNwgvDVg3VkcILw14V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61652/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.198.74/tcp/40382/p2p/16Uiu2HAm8X3eereGmwcqZtXr83Xq48Nje9JvUUrkU8NNNhxGg8zX"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-12-25_18-51-23__1e1b353d-df16-423a-9d9e-4c47646e2579__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.249.205
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['37835', '37836', '37837', '37838', '37839']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 37835:37835 -p 37836:37836 -p 37837:37837 -p 37838:37838 -p 37839:37839 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37837 --rest-port=37835 --tcp-port=37836 --discv5-udp-port=37838 --rest-address=0.0.0.0 --nat=extip:172.18.249.205 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=562c7ebd89f657450756eb83b9c7fecdfd3b7e1cd24aafe1a259cef44bafcf3a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37839 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QGnog1Or1Pi55p8WH3vPqRdJFtuNvhoiCnNumQIzsAy4SvJ-am2w7oY9XBhCGW09XqPr1r2LC2Dils-wDEZ28LECgmlkgnY0gmlwhKwSxkqKbXVsdGlhZGRyc5YACASsEsZKBp2-AAoErBLGSgadv90DgnJzhQADAQAAiXNlY3AyNTZrMaECwohWIJe96h4CR0E0vdeVRn1dyjJNMCE9sHFd1_B1n-yDdGNwgp2-g3VkcIKdwIV3YWt1Mgk --lightpushnode=/ip4/172.18.198.74/tcp/40382/p2p/16Uiu2HAm8X3eereGmwcqZtXr83Xq48Nje9JvUUrkU8NNNhxGg8zX --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.249.205 waku 2459411c55e4bb5e77b0fc7f9d5f96166114c97dfc5aec17a339057806a31b31
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 2459411c55e4. Setting up logs at ./log/docker/lightpush_node1_2024-12-25_18-51-23__1e1b353d-df16-423a-9d9e-4c47646e2579__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 37835
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37835/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37835/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.249.205/tcp/37836/p2p/16Uiu2HAmA4ZArmW5E5uACsk4UiV7ayTso9GTt6ohXw3WKio5MDqU","/ip4/172.18.249.205/tcp/37837/ws/p2p/16Uiu2HAmA4ZArmW5E5uACsk4UiV7ayTso9GTt6ohXw3WKio5MDqU"],"enrUri":"enr:-L24QEnSF2yr0SzcjUJY-7zBcOPk1vIEfqnnyZVxtOrI5FwMAoZYP3JXAiFNW1WNNZaXSpagy-1DA6FErc2Nwi1KAlACgmlkgnY0gmlwhKwS-c2KbXVsdGlhZGRyc5YACASsEvnNBpPMAAoErBL5zQaTzd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC2XZoXtq_SSmN77i798hWod1cS8TyZXYrWheqABc3IQuDdGNwgpPMg3VkcIKTzoV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37835/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.198.74/tcp/40382/p2p/16Uiu2HAm8X3eereGmwcqZtXr83Xq48Nje9JvUUrkU8NNNhxGg8zX"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37835/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.118.184/tcp/61653/p2p/16Uiu2HAm48EuTkoEpHpfTAegTdrN3DV3bh6fbB9ERmWjz6mDLP4Z"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40381/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61652/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37835/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1735152687433602816, "version": 2.1}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:37835/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id e795c668b129
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 4c63fc13fded
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container e795c668b129. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 2459411c55e4
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 4c63fc13fded. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.