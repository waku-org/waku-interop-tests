[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_unsubscribe_with_pubsub_topic_string_instead_of_list with id: 2024-12-25_18-50-53__72c3aeab-86e1-4f69-bf57-0368d6fa9f5d
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-25_18-50-53__72c3aeab-86e1-4f69-bf57-0368d6fa9f5d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.224.104
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['1668', '1669', '1670', '1671', '1672']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 1668:1668 -p 1669:1669 -p 1670:1670 -p 1671:1671 -p 1672:1672 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=1670 --rest-port=1668 --tcp-port=1669 --discv5-udp-port=1671 --rest-address=0.0.0.0 --nat=extip:172.18.224.104 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b09afc6e478d5ca8dd4b796aa6fadbbbcaeac9eeaff5df4b21f0f5a0e165ddbc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=1672 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.224.104 waku 3c4b3f7174fbe3ee6a334be99b0002d5b962f064595fc92ac0331002b0ef2b70
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 3c4b3f7174fb. Setting up logs at ./log/docker/node1_2024-12-25_18-50-53__72c3aeab-86e1-4f69-bf57-0368d6fa9f5d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 1668
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container cb08d0939fd6. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1668/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1668/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.224.104/tcp/1669/p2p/16Uiu2HAkzTdu6frs4MLzjoMCctw6nNxXvpotWiAJn9bFBx9g5M6x","/ip4/172.18.224.104/tcp/1670/ws/p2p/16Uiu2HAkzTdu6frs4MLzjoMCctw6nNxXvpotWiAJn9bFBx9g5M6x"],"enrUri":"enr:-L24QGqqLzTg7ktHtDuaLk5oq1OfJa-I06UqzAanvQlh9_mvZs3yHw_nMjd0kWqU164S3xv6a9a8n16M_fRGuvbDeM8CgmlkgnY0gmlwhKwS4GiKbXVsdGlhZGRyc5YACASsEuBoBgaFAAoErBLgaAYGht0DgnJzhQADAQAAiXNlY3AyNTZrMaECSss-Sem_W6P0-l09NibR5JYNh1oCUavIJl5N5N08dfmDdGNwggaFg3VkcIIGh4V3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-25_18-50-53__72c3aeab-86e1-4f69-bf57-0368d6fa9f5d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.252.47
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['14136', '14137', '14138', '14139', '14140']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 14136:14136 -p 14137:14137 -p 14138:14138 -p 14139:14139 -p 14140:14140 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14138 --rest-port=14136 --tcp-port=14137 --discv5-udp-port=14139 --rest-address=0.0.0.0 --nat=extip:172.18.252.47 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ba4a6f9ff234e0d5da1ac1ff6cc4fe02a6b33db11091c38cbf33cce6315dbf27 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14140 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QGqqLzTg7ktHtDuaLk5oq1OfJa-I06UqzAanvQlh9_mvZs3yHw_nMjd0kWqU164S3xv6a9a8n16M_fRGuvbDeM8CgmlkgnY0gmlwhKwS4GiKbXVsdGlhZGRyc5YACASsEuBoBgaFAAoErBLgaAYGht0DgnJzhQADAQAAiXNlY3AyNTZrMaECSss-Sem_W6P0-l09NibR5JYNh1oCUavIJl5N5N08dfmDdGNwggaFg3VkcIIGh4V3YWt1MgU --filternode=/ip4/172.18.224.104/tcp/1669/p2p/16Uiu2HAkzTdu6frs4MLzjoMCctw6nNxXvpotWiAJn9bFBx9g5M6x
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.252.47 waku 010129f0cfa85c1b0632bf0707643053d3a63e3511dfea4b688a08a416b8ca14
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 010129f0cfa8. Setting up logs at ./log/docker/node2_2024-12-25_18-50-53__72c3aeab-86e1-4f69-bf57-0368d6fa9f5d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 14136
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14136/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14136/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.252.47/tcp/14137/p2p/16Uiu2HAm2d7KG91wXXeXXe6jkVDT3sudfTeUSsoLCAF7cNLC9sQy","/ip4/172.18.252.47/tcp/14138/ws/p2p/16Uiu2HAm2d7KG91wXXeXXe6jkVDT3sudfTeUSsoLCAF7cNLC9sQy"],"enrUri":"enr:-L24QH20HRV-L_sPaCLLyTDvuCcCQ81NHY7L_NDbMZZz7gfqTJZ32LYFXIoWrUzRCPA2HgSH6CLHgbwRYv4P6MglTW0CgmlkgnY0gmlwhKwS_C-KbXVsdGlhZGRyc5YACASsEvwvBjc5AAoErBL8LwY3Ot0DgnJzhQADAQAAiXNlY3AyNTZrMaECau_YMZmEdUtILWz8rewH0uv_cxStCoa_2vMyj1JeIwaDdGNwgjc5g3VkcII3O4V3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14136/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.224.104/tcp/1669/p2p/16Uiu2HAkzTdu6frs4MLzjoMCctw6nNxXvpotWiAJn9bFBx9g5M6x"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1668/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14136/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "df25d3dd-68d2-4072-93fc-0fcd93c42619", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"df25d3dd-68d2-4072-93fc-0fcd93c42619","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X DELETE "http://127.0.0.1:14136/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": "/test/1/waku-filter/proto", "pubsubTopic": "/waku/2/rs/3/1"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:14136/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 3c4b3f7174fb
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 010129f0cfa8
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 3c4b3f7174fb. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.