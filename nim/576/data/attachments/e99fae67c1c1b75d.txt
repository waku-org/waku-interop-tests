[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_lightpushed_message with id: 2024-12-25_18-50-38__f06a3189-a294-44a5-9600-0207d0e72fb3
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-12-25_18-50-38__f06a3189-a294-44a5-9600-0207d0e72fb3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.186.206
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['64313', '64314', '64315', '64316', '64317']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 64313:64313 -p 64314:64314 -p 64315:64315 -p 64316:64316 -p 64317:64317 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64315 --rest-port=64313 --tcp-port=64314 --discv5-udp-port=64316 --rest-address=0.0.0.0 --nat=extip:172.18.186.206 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fbebddcfba4496e454a7c92115ef2a40b514a1a4afd191dbd6e44bcad6f7bc22 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64317 --metrics-logging=true --store=true --relay=true --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.186.206 waku b3947aa98f9bef1d230d116e63bf1ad3a3cc3ffd1e0ce228de7c72be9024ff7d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID b3947aa98f9b. Setting up logs at ./log/docker/publishing_node1_2024-12-25_18-50-38__f06a3189-a294-44a5-9600-0207d0e72fb3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 64313
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64313/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64313/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.186.206/tcp/64314/p2p/16Uiu2HAm6qDVvs7GmzoJjwgw2tVk2TZnGn8mj6awKfS4G9pMQ4Hb","/ip4/172.18.186.206/tcp/64315/ws/p2p/16Uiu2HAm6qDVvs7GmzoJjwgw2tVk2TZnGn8mj6awKfS4G9pMQ4Hb"],"enrUri":"enr:-L24QPfyIlv5hM1m91Fj4lZ_bZTc41LYqaNLgxT2U8mHQiXjB59gjbikNn_Gi94SadyN91_ECl3IAKUMo1sFGJVXccMCgmlkgnY0gmlwhKwSus6KbXVsdGlhZGRyc5YACASsErrOBvs6AAoErBK6zgb7O90DgnJzhQADAQAAiXNlY3AyNTZrMaECqXiN2gdyfWqLJfuAicRKuGQaAo7-p06IXVDe-NJwZuaDdGNwgvs6g3VkcIL7PIV3YWt1Mgs"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node2_2024-12-25_18-50-38__f06a3189-a294-44a5-9600-0207d0e72fb3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.146.255
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['60646', '60647', '60648', '60649', '60650']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 60646:60646 -p 60647:60647 -p 60648:60648 -p 60649:60649 -p 60650:60650 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=60648 --rest-port=60646 --tcp-port=60647 --discv5-udp-port=60649 --rest-address=0.0.0.0 --nat=extip:172.18.146.255 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=df1ad59792d42bdaaad4baa9babfc3fbdbbada24ab3e6988abd5e9c2ea7b154d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=60650 --metrics-logging=true --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.146.255 waku e520abd246be47cc68d487bf92c97176f55d8e6a31c3fcf5ece677e722182f1b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID e520abd246be. Setting up logs at ./log/docker/publishing_node2_2024-12-25_18-50-38__f06a3189-a294-44a5-9600-0207d0e72fb3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 60646
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60646/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60646/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.146.255/tcp/60647/p2p/16Uiu2HAmPWsqmdsz5z86SX9fjT99NZcMeQn8Qf48JMYFgx7zWpen","/ip4/172.18.146.255/tcp/60648/ws/p2p/16Uiu2HAmPWsqmdsz5z86SX9fjT99NZcMeQn8Qf48JMYFgx7zWpen"],"enrUri":"enr:-L24QPHws8r3wgcM1aJua4XyE7jw8rDryRX261hSZ0_63e7lCh5gG8p0f84uY14j9YupuRj6_rcXDINLSzU80AU2dZkCgmlkgnY0gmlwhKwSkv-KbXVsdGlhZGRyc5YACASsEpL_BuznAAoErBKS_wbs6N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDoVyMzeU-SUOPCHbxzlpwa_4zYyWcwl_ziLlsB97fIEODdGNwguzng3VkcILs6YV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60646/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.186.206/tcp/64314/p2p/16Uiu2HAm6qDVvs7GmzoJjwgw2tVk2TZnGn8mj6awKfS4G9pMQ4Hb"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2024-12-25_18-50-38__f06a3189-a294-44a5-9600-0207d0e72fb3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.17.247
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['30013', '30014', '30015', '30016', '30017']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 30013:30013 -p 30014:30014 -p 30015:30015 -p 30016:30016 -p 30017:30017 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=30015 --rest-port=30013 --tcp-port=30014 --discv5-udp-port=30016 --rest-address=0.0.0.0 --nat=extip:172.18.17.247 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b4db5cbb2b0bcc17de1ff96ecc143d60bbb413d2fdc0cfac2a906ebb630eef4b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=30017 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QPfyIlv5hM1m91Fj4lZ_bZTc41LYqaNLgxT2U8mHQiXjB59gjbikNn_Gi94SadyN91_ECl3IAKUMo1sFGJVXccMCgmlkgnY0gmlwhKwSus6KbXVsdGlhZGRyc5YACASsErrOBvs6AAoErBK6zgb7O90DgnJzhQADAQAAiXNlY3AyNTZrMaECqXiN2gdyfWqLJfuAicRKuGQaAo7-p06IXVDe-NJwZuaDdGNwgvs6g3VkcIL7PIV3YWt1Mgs --storenode=/ip4/172.18.186.206/tcp/64314/p2p/16Uiu2HAm6qDVvs7GmzoJjwgw2tVk2TZnGn8mj6awKfS4G9pMQ4Hb --store=false --relay=false --lightpush=true --lightpushnode=/ip4/172.18.186.206/tcp/64314/p2p/16Uiu2HAm6qDVvs7GmzoJjwgw2tVk2TZnGn8mj6awKfS4G9pMQ4Hb
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.17.247 waku f8223c39889f6473f796b1f90c6a5941cd4da19c464108d05ab4fe4047e291e2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID f8223c39889f. Setting up logs at ./log/docker/store_node1_2024-12-25_18-50-38__f06a3189-a294-44a5-9600-0207d0e72fb3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 30013
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30013/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30013/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.17.247/tcp/30014/p2p/16Uiu2HAmC2YoLZDXUmFjvadVzPcggRSMjDKednFMAx4R1Zqd4BKV","/ip4/172.18.17.247/tcp/30015/ws/p2p/16Uiu2HAmC2YoLZDXUmFjvadVzPcggRSMjDKednFMAx4R1Zqd4BKV"],"enrUri":"enr:-L24QDl2Zj-UeX6d-SOUKp-K4Mv1eMhOdf5aFF5gvZeLpOwbdWG-kTl_EXJE0RjH0RqY-1i1O6Miz7Pq-9mLl6V7FfYCgmlkgnY0gmlwhKwSEfeKbXVsdGlhZGRyc5YACASsEhH3BnU-AAoErBIR9wZ1P90DgnJzhQADAQAAiXNlY3AyNTZrMaEC9qozTGWikHbmEXBWxsofuea6ASSMKBKSnf06tpPWDFCDdGNwgnU-g3VkcIJ1QIV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30013/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.186.206/tcp/64314/p2p/16Uiu2HAm6qDVvs7GmzoJjwgw2tVk2TZnGn8mj6awKfS4G9pMQ4Hb"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30013/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.146.255/tcp/60647/p2p/16Uiu2HAmPWsqmdsz5z86SX9fjT99NZcMeQn8Qf48JMYFgx7zWpen"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64313/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60646/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30013/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1735152645666243584}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64313/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"LYbDiCX3qpoTXypQHmrti3W2PibLmcUzpaCn2hb4qQw="}]}'
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30013/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"c3abd091363532c81b09","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"LYbDiCX3qpoTXypQHmrti3W2PibLmcUzpaCn2hb4qQw="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id b3947aa98f9b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id e520abd246be
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container b3947aa98f9b. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id f8223c39889f
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container e520abd246be. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.