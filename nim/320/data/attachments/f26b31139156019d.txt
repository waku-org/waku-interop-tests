[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_lightpushed_message with id: 2024-08-16_08-22-56__39aed525-905f-4566-91bc-515eeddb218f
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:28 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-08-16_08-22-56__39aed525-905f-4566-91bc-515eeddb218f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.86.1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['35669', '35670', '35671', '35672', '35673']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 35669:35669 -p 35670:35670 -p 35671:35671 -p 35672:35672 -p 35673:35673 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=35671 --rest-port=35669 --tcp-port=35670 --discv5-udp-port=35672 --rest-address=0.0.0.0 --nat=extip:172.18.86.1 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a1c1eefb5aff7aab3a45d9e02dc2b2fba4aaeb0ecd9ac870c4d0dbbdfaf6471b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=35673 --metrics-logging=true --store=true --relay=true --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.86.1 waku 762b9ca1ed20a7f13255fc22155358a606fec651bda5a3b475a6d2d980f61bcb
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 762b9ca1ed20. Setting up logs at ./log/docker/publishing_node1_2024-08-16_08-22-56__39aed525-905f-4566-91bc-515eeddb218f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 35669
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35669/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35669/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.86.1/tcp/35670/p2p/16Uiu2HAm3s8KFj61SY958VL4sTBTFgz9cQo83RzUtrgpPtq7tDMd","/ip4/172.18.86.1/tcp/35671/ws/p2p/16Uiu2HAm3s8KFj61SY958VL4sTBTFgz9cQo83RzUtrgpPtq7tDMd"],"enrUri":"enr:-LO4QBWSkfmdtbeLRKzO_X4_jLr-GskBDvdqixZk3nw0Vku8QXc5l9IxjZDdHhfcKNVwdAJSV8ytWbRudRSpQgSTpFgBgmlkgnY0gmlwhKwSVgGKbXVsdGlhZGRyc4wACgSsElYBBotX3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJ9YssXW5ekZ4_mfjP9i0XcZwYJ9PTjme96LBkUAnWrdIN0Y3CCi1aDdWRwgotYhXdha3UyCw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/publishing_node2_2024-08-16_08-22-56__39aed525-905f-4566-91bc-515eeddb218f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.193.214
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['13076', '13077', '13078', '13079', '13080']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 13076:13076 -p 13077:13077 -p 13078:13078 -p 13079:13079 -p 13080:13080 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=13078 --rest-port=13076 --tcp-port=13077 --discv5-udp-port=13079 --rest-address=0.0.0.0 --nat=extip:172.18.193.214 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bb0b33cdb5adaaa72d3beb57aae237dd0ff5c8fe1cb7bbf92bab1eb30cbed9ef --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=13080 --metrics-logging=true --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.193.214 waku 8ba947c3821d4b2ee7984603e1e4c31d58bb8b3f77deaf2efe0b97daba4ebf26
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 8ba947c3821d. Setting up logs at ./log/docker/publishing_node2_2024-08-16_08-22-56__39aed525-905f-4566-91bc-515eeddb218f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 13076
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13076/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13076/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.193.214/tcp/13077/p2p/16Uiu2HAmCPamALYgtvcumHknkX6ZLmdtL94d6RGhEpTcvh2dt5Fc","/ip4/172.18.193.214/tcp/13078/ws/p2p/16Uiu2HAmCPamALYgtvcumHknkX6ZLmdtL94d6RGhEpTcvh2dt5Fc"],"enrUri":"enr:-LO4QCfcXcK6m2O3eGh6IZhn7UT71X8qJp-Yd2qH0BXx2LRGcfQSSfEncNTJ45-8n8ScAjCHFse2awuRg1KupSxKFaIBgmlkgnY0gmlwhKwSwdaKbXVsdGlhZGRyc4wACgSsEsHWBjMW3QOCcnOFAAMBAACJc2VjcDI1NmsxoQL8DZ3JoSThnPwSP68OVRmYTGtPtYrhB8FM44x4_izLN4N0Y3CCMxWDdWRwgjMXhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13076/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.86.1/tcp/35670/p2p/16Uiu2HAm3s8KFj61SY958VL4sTBTFgz9cQo83RzUtrgpPtq7tDMd"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/store_node1_2024-08-16_08-22-56__39aed525-905f-4566-91bc-515eeddb218f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.234.236
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['13252', '13253', '13254', '13255', '13256']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 13252:13252 -p 13253:13253 -p 13254:13254 -p 13255:13255 -p 13256:13256 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=13254 --rest-port=13252 --tcp-port=13253 --discv5-udp-port=13255 --rest-address=0.0.0.0 --nat=extip:172.18.234.236 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0611bb6fcdaf1e6daeea89bdbdecc5070d93af85dd05d41f2db35b4d37cd0e1d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=13256 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QBWSkfmdtbeLRKzO_X4_jLr-GskBDvdqixZk3nw0Vku8QXc5l9IxjZDdHhfcKNVwdAJSV8ytWbRudRSpQgSTpFgBgmlkgnY0gmlwhKwSVgGKbXVsdGlhZGRyc4wACgSsElYBBotX3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJ9YssXW5ekZ4_mfjP9i0XcZwYJ9PTjme96LBkUAnWrdIN0Y3CCi1aDdWRwgotYhXdha3UyCw --storenode=/ip4/172.18.86.1/tcp/35670/p2p/16Uiu2HAm3s8KFj61SY958VL4sTBTFgz9cQo83RzUtrgpPtq7tDMd --store=false --relay=false --lightpush=true --lightpushnode=/ip4/172.18.86.1/tcp/35670/p2p/16Uiu2HAm3s8KFj61SY958VL4sTBTFgz9cQo83RzUtrgpPtq7tDMd
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.234.236 waku a981e4470403ee8e042c42d2285009b9467d88b453f5af5a7dbe3bb71b6f73b2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID a981e4470403. Setting up logs at ./log/docker/store_node1_2024-08-16_08-22-56__39aed525-905f-4566-91bc-515eeddb218f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 13252
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13252/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13252/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.234.236/tcp/13253/p2p/16Uiu2HAm3utZHnFX1QqTpmV5fwSbgd6CqHRaHUvKvs8BP8b32Rev","/ip4/172.18.234.236/tcp/13254/ws/p2p/16Uiu2HAm3utZHnFX1QqTpmV5fwSbgd6CqHRaHUvKvs8BP8b32Rev"],"enrUri":"enr:-LO4QC-CAmZSOiShvT7HUhVtr_RIti-YXTKS9cYgdTrl5XqgApVAMRU8p4wrEQaieMLqyyNTO1nPHTLgPyH0vqyyvWcBgmlkgnY0gmlwhKwS6uyKbXVsdGlhZGRyc4wACgSsEursBjPG3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJ-F_rB4ozkZiKdQ2oEAQ611Yx9z8p-f4fw8b3z7aJaP4N0Y3CCM8WDdWRwgjPHhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13252/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.86.1/tcp/35670/p2p/16Uiu2HAm3s8KFj61SY958VL4sTBTFgz9cQo83RzUtrgpPtq7tDMd"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13252/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.193.214/tcp/13077/p2p/16Uiu2HAmCPamALYgtvcumHknkX6ZLmdtL94d6RGhEpTcvh2dt5Fc"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35669/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13076/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13252/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1723796581104224512}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:216 Checking that peer wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35669/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"O3+wW6QJjCizojUT2DWZW7UuKEnB+0NnwLjDNfH8hXM="}]}'
[35mDEBUG   [0m src.steps.store:store.py:216 Checking that peer wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13252/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1b2c6d95cd721e61e410","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"O3+wW6QJjCizojUT2DWZW7UuKEnB+0NnwLjDNfH8hXM="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 762b9ca1ed20
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 8ba947c3821d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id a981e4470403
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.