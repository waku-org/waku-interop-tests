[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_single_content_topic[/toychat/2/huilong/proto] with id: 2024-08-16_08-15-35__c36fb222-802d-4883-85c1-12363423003a
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node1_2024-08-16_08-15-35__c36fb222-802d-4883-85c1-12363423003a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.249.153
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['63056', '63057', '63058', '63059', '63060']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 63056:63056 -p 63057:63057 -p 63058:63058 -p 63059:63059 -p 63060:63060 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63058 --rest-port=63056 --tcp-port=63057 --discv5-udp-port=63059 --rest-address=0.0.0.0 --nat=extip:172.18.249.153 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=c68ff3e1a01c537f66eaff981a2055acdcbbd1fafc6fa38234841bd939a710c3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63060 --metrics-logging=true --relay=true --filter=true --content-topic=/toychat/2/huilong/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.249.153 waku eccfb1822faf08a218065bd725f8b7a5d50b9ca6258010a181c33036e072c09f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID eccfb1822faf. Setting up logs at ./log/docker/node1_2024-08-16_08-15-35__c36fb222-802d-4883-85c1-12363423003a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 63056
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63056/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63056/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.249.153/tcp/63057/p2p/16Uiu2HAm8iEYma3ocCuK9pBA9x9SkUvvNT5bJoTL8qQVfDZxx5NU","/ip4/172.18.249.153/tcp/63058/ws/p2p/16Uiu2HAm8iEYma3ocCuK9pBA9x9SkUvvNT5bJoTL8qQVfDZxx5NU"],"enrUri":"enr:-LO4QJtMwJTFx6lxyzG-uzK5FQEz1uW2PpA2E_PZha1Btb6sZTrYv9lbz_BxCuhLcGsEg7kG60b2CXsz6rzuCV976CQBgmlkgnY0gmlwhKwS-ZmKbXVsdGlhZGRyc4wACgSsEvmZBvZS3QOCcnOFAAIBAACJc2VjcDI1NmsxoQLFZgxhbYOl1t9NE7PbkKe-fo4wfKFPrqYVceysUETOdYN0Y3CC9lGDdWRwgvZThXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node2_2024-08-16_08-15-35__c36fb222-802d-4883-85c1-12363423003a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.126.70
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['56064', '56065', '56066', '56067', '56068']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 56064:56064 -p 56065:56065 -p 56066:56066 -p 56067:56067 -p 56068:56068 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56066 --rest-port=56064 --tcp-port=56065 --discv5-udp-port=56067 --rest-address=0.0.0.0 --nat=extip:172.18.126.70 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=2c514acc46fda1daacf1e053cf70c466e6aebaa5bbd7abc2efd26844cd841b38 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56068 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-LO4QJtMwJTFx6lxyzG-uzK5FQEz1uW2PpA2E_PZha1Btb6sZTrYv9lbz_BxCuhLcGsEg7kG60b2CXsz6rzuCV976CQBgmlkgnY0gmlwhKwS-ZmKbXVsdGlhZGRyc4wACgSsEvmZBvZS3QOCcnOFAAIBAACJc2VjcDI1NmsxoQLFZgxhbYOl1t9NE7PbkKe-fo4wfKFPrqYVceysUETOdYN0Y3CC9lGDdWRwgvZThXdha3UyBQ --content-topic=/toychat/2/huilong/proto
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.126.70 waku 3d71605a2e7012bc387ccc5aaf5f0e82573e87c63e1f1a3bc0f27c1ce7056ee4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 3d71605a2e70. Setting up logs at ./log/docker/node2_2024-08-16_08-15-35__c36fb222-802d-4883-85c1-12363423003a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 56064
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56064/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56064/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.126.70/tcp/56065/p2p/16Uiu2HAkyp49cdTS7PBZ68pnbeZqGpVSmw3RtnMJmJa1MYh5dBDV","/ip4/172.18.126.70/tcp/56066/ws/p2p/16Uiu2HAkyp49cdTS7PBZ68pnbeZqGpVSmw3RtnMJmJa1MYh5dBDV"],"enrUri":"enr:-LO4QLyk08nv9ncBh6Y_Mx9zc5AOcntupjZuSEge9D6sSzy6BNF_B3nhtA9jyyp1MrR5Fq3DgQ2OovWR8EYmGe7x_tkBgmlkgnY0gmlwhKwSfkaKbXVsdGlhZGRyc4wACgSsEn5GBtsC3QOCcnOFAAIBAACJc2VjcDI1NmsxoQJBKperIsMTvKWYeuudx3YV2BxoLJ9YV217q491zxSK3IN0Y3CC2wGDdWRwgtsDhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56064/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.249.153/tcp/63057/p2p/16Uiu2HAm8iEYma3ocCuK9pBA9x9SkUvvNT5bJoTL8qQVfDZxx5NU"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63056/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/toychat/2/huilong/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56064/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/toychat/2/huilong/proto"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63056/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63056/relay/v1/auto/messages/%2Ftoychat%2F2%2Fhuilong%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/toychat/2/huilong/proto","version":0,"timestamp":1723796138575981568,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56064/relay/v1/auto/messages/%2Ftoychat%2F2%2Fhuilong%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/toychat/2/huilong/proto","version":0,"timestamp":1723796138575981568,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id eccfb1822faf
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 3d71605a2e70
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.