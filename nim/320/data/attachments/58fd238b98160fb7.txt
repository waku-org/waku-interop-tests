[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_unsubscribe_with_pubsub_topic_string_instead_of_list with id: 2024-08-16_08-06-18__35d08abe-7386-48fa-89f8-05346ce8bfd0
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node1_2024-08-16_08-06-18__35d08abe-7386-48fa-89f8-05346ce8bfd0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.168.254
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['58825', '58826', '58827', '58828', '58829']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 58825:58825 -p 58826:58826 -p 58827:58827 -p 58828:58828 -p 58829:58829 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=58827 --rest-port=58825 --tcp-port=58826 --discv5-udp-port=58828 --rest-address=0.0.0.0 --nat=extip:172.18.168.254 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1ef3a12bf4140aeae01ffbac28d0fe62eeb5cec87ae94a85c264bf9a1a6e6537 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=58829 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.168.254 waku d9ea4fcc63bcf0c884a53e7a9c29283e166237a05f6cf0f9253c6696c1cf439c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID d9ea4fcc63bc. Setting up logs at ./log/docker/node1_2024-08-16_08-06-18__35d08abe-7386-48fa-89f8-05346ce8bfd0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 58825
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58825/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58825/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.168.254/tcp/58826/p2p/16Uiu2HAmECi3QgZCVVzRtVaFmDaxLTrz41ziJVoWqzmaeR7EjgkS","/ip4/172.18.168.254/tcp/58827/ws/p2p/16Uiu2HAmECi3QgZCVVzRtVaFmDaxLTrz41ziJVoWqzmaeR7EjgkS"],"enrUri":"enr:-LO4QBpZJTGgBKghxQWRKRf4erwYYK8lIaGaekFN-UXnTOKES-AgnOcvzXTGKrhDu1Wm0GPpSFZp98Y7DCC9mbiZfhcBgmlkgnY0gmlwhKwSqP6KbXVsdGlhZGRyc4wACgSsEqj-BuXL3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMW-9U954nAyN9AiX80x3ASAB8UE6OubEvvvLr9FKIn84N0Y3CC5cqDdWRwguXMhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node2_2024-08-16_08-06-18__35d08abe-7386-48fa-89f8-05346ce8bfd0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.50.80
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['2795', '2796', '2797', '2798', '2799']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 2795:2795 -p 2796:2796 -p 2797:2797 -p 2798:2798 -p 2799:2799 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2797 --rest-port=2795 --tcp-port=2796 --discv5-udp-port=2798 --rest-address=0.0.0.0 --nat=extip:172.18.50.80 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9eda356fd7c15d9bd684c6ff3deb87dcefda5fdbbd63f1b7047eedbbccc53dda --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2799 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QBpZJTGgBKghxQWRKRf4erwYYK8lIaGaekFN-UXnTOKES-AgnOcvzXTGKrhDu1Wm0GPpSFZp98Y7DCC9mbiZfhcBgmlkgnY0gmlwhKwSqP6KbXVsdGlhZGRyc4wACgSsEqj-BuXL3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMW-9U954nAyN9AiX80x3ASAB8UE6OubEvvvLr9FKIn84N0Y3CC5cqDdWRwguXMhXdha3UyBQ --filternode=/ip4/172.18.168.254/tcp/58826/p2p/16Uiu2HAmECi3QgZCVVzRtVaFmDaxLTrz41ziJVoWqzmaeR7EjgkS
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.50.80 waku 8fb3266ab64bfb4e40140cd03bc162e9a95c621a1630f0aa63fc303948955445
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 8fb3266ab64b. Setting up logs at ./log/docker/node2_2024-08-16_08-06-18__35d08abe-7386-48fa-89f8-05346ce8bfd0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 2795
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2795/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2795/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.50.80/tcp/2796/p2p/16Uiu2HAkwtv82mxEAfyGvydkNKgPGbrhN4NGGCYYa74Z3CBUUvkh","/ip4/172.18.50.80/tcp/2797/ws/p2p/16Uiu2HAkwtv82mxEAfyGvydkNKgPGbrhN4NGGCYYa74Z3CBUUvkh"],"enrUri":"enr:-LO4QEU7C7_MfXcgejTCCMfAB8VwMTLzEWF_s1B70kyJPtB3LgEcR8xqU1NjRJ4T4F-qX-ccD9UZUlxF_yyLR42GtfoBgmlkgnY0gmlwhKwSMlCKbXVsdGlhZGRyc4wACgSsEjJQBgrt3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIksgvQLEZDeh1esIxMIB-wq-EriNUBmowU7opjQ0qVQoN0Y3CCCuyDdWRwggruhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2795/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.168.254/tcp/58826/p2p/16Uiu2HAmECi3QgZCVVzRtVaFmDaxLTrz41ziJVoWqzmaeR7EjgkS"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:58825/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2795/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "04699f67-3b84-4996-b1e2-3bde24410b49", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"04699f67-3b84-4996-b1e2-3bde24410b49","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X DELETE "http://127.0.0.1:2795/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": "/test/1/waku-filter/proto", "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:2795/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id d9ea4fcc63bc
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 8fb3266ab64b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.