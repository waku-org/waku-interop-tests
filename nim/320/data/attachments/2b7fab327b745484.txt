[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_update_subscription_with_extra_field with id: 2024-08-16_08-05-43__b9cb28f8-d066-4d10-934b-fd9803293b5d
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node1_2024-08-16_08-05-43__b9cb28f8-d066-4d10-934b-fd9803293b5d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.213.239
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['21013', '21014', '21015', '21016', '21017']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 21013:21013 -p 21014:21014 -p 21015:21015 -p 21016:21016 -p 21017:21017 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=21015 --rest-port=21013 --tcp-port=21014 --discv5-udp-port=21016 --rest-address=0.0.0.0 --nat=extip:172.18.213.239 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d9ed5d7807eac7f20bcfa933ce3a1e0fb69afea5a72ba7af947259ddc483fce5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=21017 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.213.239 waku 20f8902c76a6ae6395295181908ba122bf2bb1489bf4f44fb4398df164e9c51a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 20f8902c76a6. Setting up logs at ./log/docker/node1_2024-08-16_08-05-43__b9cb28f8-d066-4d10-934b-fd9803293b5d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 21013
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21013/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21013/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.213.239/tcp/21014/p2p/16Uiu2HAmULZQDuzxhmnJQWeYbtu76Au572nTXAS84yY4YNk1hC2V","/ip4/172.18.213.239/tcp/21015/ws/p2p/16Uiu2HAmULZQDuzxhmnJQWeYbtu76Au572nTXAS84yY4YNk1hC2V"],"enrUri":"enr:-LO4QKuX5FHVCv-yXOPuLDnurUmKfDTS7yv-1mNBE6PISKxmD7SBQamjtebBD0ciokY_KblG9s6tGISOP_N01q2c24QBgmlkgnY0gmlwhKwS1e-KbXVsdGlhZGRyc4wACgSsEtXvBlIX3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPpAlNrca-VAiWp8laVAybtcgsjDS1RM1fC5qqbLDjCwoN0Y3CCUhaDdWRwglIYhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node2_2024-08-16_08-05-43__b9cb28f8-d066-4d10-934b-fd9803293b5d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.170.229
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['28430', '28431', '28432', '28433', '28434']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 28430:28430 -p 28431:28431 -p 28432:28432 -p 28433:28433 -p 28434:28434 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28432 --rest-port=28430 --tcp-port=28431 --discv5-udp-port=28433 --rest-address=0.0.0.0 --nat=extip:172.18.170.229 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=aafefba9b8a42e73fadc0847cdad63ac64e9eeebed82371f5e3c30ab947c7377 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28434 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QKuX5FHVCv-yXOPuLDnurUmKfDTS7yv-1mNBE6PISKxmD7SBQamjtebBD0ciokY_KblG9s6tGISOP_N01q2c24QBgmlkgnY0gmlwhKwS1e-KbXVsdGlhZGRyc4wACgSsEtXvBlIX3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPpAlNrca-VAiWp8laVAybtcgsjDS1RM1fC5qqbLDjCwoN0Y3CCUhaDdWRwglIYhXdha3UyBQ --filternode=/ip4/172.18.213.239/tcp/21014/p2p/16Uiu2HAmULZQDuzxhmnJQWeYbtu76Au572nTXAS84yY4YNk1hC2V
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.170.229 waku 88aba8cfce56bb21c1b0a212074f3fb5991a8adb5e045ad1a16a5ba6e6e32635
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 88aba8cfce56. Setting up logs at ./log/docker/node2_2024-08-16_08-05-43__b9cb28f8-d066-4d10-934b-fd9803293b5d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 28430
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28430/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28430/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.170.229/tcp/28431/p2p/16Uiu2HAkxrLyj2t4ZimzzhdskPXKPspXSGgR6tpYYvNWAZCNjwDP","/ip4/172.18.170.229/tcp/28432/ws/p2p/16Uiu2HAkxrLyj2t4ZimzzhdskPXKPspXSGgR6tpYYvNWAZCNjwDP"],"enrUri":"enr:-LO4QOTRaS4gN14KyS-6BV4m-UHqcNI7a7vZwrw7V7DLT14PEkHvjLMjNuw3LZR-u1MD9fvoLyxzJNzbkXTe_oLGCaIBgmlkgnY0gmlwhKwSquWKbXVsdGlhZGRyc4wACgSsEqrlBm8Q3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIy5Rin4n54WpXQq9I9tozNp8fNDZlZG8BdwDr7XcG0poN0Y3CCbw-DdWRwgm8RhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28430/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.213.239/tcp/21014/p2p/16Uiu2HAmULZQDuzxhmnJQWeYbtu76Au572nTXAS84yY4YNk1hC2V"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21013/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28430/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "47798dce-3653-471d-b197-8f28b701abd5", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"47798dce-3653-471d-b197-8f28b701abd5","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X PUT "http://127.0.0.1:28430/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1", "extraField": "extraValue"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:28430/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 20f8902c76a6
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 88aba8cfce56
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.