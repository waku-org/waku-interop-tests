[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_extra_field with id: 2024-08-16_08-09-06__0cb135e6-593b-4d0f-9c32-f2f5832fef23
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-16_08-09-06__0cb135e6-593b-4d0f-9c32-f2f5832fef23__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.86.198
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['56572', '56573', '56574', '56575', '56576']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 56572:56572 -p 56573:56573 -p 56574:56574 -p 56575:56575 -p 56576:56576 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56574 --rest-port=56572 --tcp-port=56573 --discv5-udp-port=56575 --rest-address=0.0.0.0 --nat=extip:172.18.86.198 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8c04e8e45dd27eee49fcbb053eededbcf27f9c27329dada51fcee926741cdfdd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56576 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.86.198 waku 8a3917988869f80d24531364ace7d84b312dc2f98a95c3f739f6c0b52bea5ce7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 8a3917988869. Setting up logs at ./log/docker/receiving_node1_2024-08-16_08-09-06__0cb135e6-593b-4d0f-9c32-f2f5832fef23__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 56572
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56572/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56572/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.86.198/tcp/56573/p2p/16Uiu2HAm5VWqhyBFpiWj41KW97AfE1ysBvCcBELUZoVbAiaMG4s9","/ip4/172.18.86.198/tcp/56574/ws/p2p/16Uiu2HAm5VWqhyBFpiWj41KW97AfE1ysBvCcBELUZoVbAiaMG4s9"],"enrUri":"enr:-LO4QDKC2vUnhsba_hCh-VS4HeM18yqu2HqHwx6ss1aisIcERLYBasBc29RG-ihSq2x7lWL_w-z26ZF203d9hiU6FHsBgmlkgnY0gmlwhKwSVsaKbXVsdGlhZGRyc4wACgSsElbGBtz-3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKVkNvISqQFSgrTiiaQQZSYdn4aBc9S5TBDlJmLUrJqwIN0Y3CC3P2DdWRwgtz_hXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-16_08-09-06__0cb135e6-593b-4d0f-9c32-f2f5832fef23__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.211.251
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['48312', '48313', '48314', '48315', '48316']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 48312:48312 -p 48313:48313 -p 48314:48314 -p 48315:48315 -p 48316:48316 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=48314 --rest-port=48312 --tcp-port=48313 --discv5-udp-port=48315 --rest-address=0.0.0.0 --nat=extip:172.18.211.251 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ef9292e9bde2ebc85a2bc2deef7fdf2b32ea77a3f4ddaf06b22eb3cedc19605c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=48316 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.211.251 waku 106ab97425555f97ed8c6248b2837a4a420997960fc645351d20ff5ac4bd08e2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 106ab9742555. Setting up logs at ./log/docker/receiving_node2_2024-08-16_08-09-06__0cb135e6-593b-4d0f-9c32-f2f5832fef23__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 48312
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48312/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48312/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.211.251/tcp/48313/p2p/16Uiu2HAmADuqibwkPC6BQZCFBcVXEi3D2JxzEDaFHnKW4yDzp8fX","/ip4/172.18.211.251/tcp/48314/ws/p2p/16Uiu2HAmADuqibwkPC6BQZCFBcVXEi3D2JxzEDaFHnKW4yDzp8fX"],"enrUri":"enr:-LO4QOYWcpevtDWCNvYcou89rWVZLiRArQoQEp1VPz-lnnASZduMafExxW8OxF470rqHduWWW11MQgD7w8CQaiLavqUBgmlkgnY0gmlwhKwS0_uKbXVsdGlhZGRyc4wACgSsEtP7Bry63QOCcnOFAAMBAACJc2VjcDI1NmsxoQLb3AGxB2vhTvoyT5Y52iQ_7Yy2gkWQ48s7k1Y8bAHgnoN0Y3CCvLmDdWRwgry7hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48312/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.86.198/tcp/56573/p2p/16Uiu2HAm5VWqhyBFpiWj41KW97AfE1ysBvCcBELUZoVbAiaMG4s9"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-16_08-09-06__0cb135e6-593b-4d0f-9c32-f2f5832fef23__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.100.134
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['55961', '55962', '55963', '55964', '55965']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 55961:55961 -p 55962:55962 -p 55963:55963 -p 55964:55964 -p 55965:55965 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55963 --rest-port=55961 --tcp-port=55962 --discv5-udp-port=55964 --rest-address=0.0.0.0 --nat=extip:172.18.100.134 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c6c4b8b8bbdcb59dffbf1da50e87bfdc42abfb1fac5cbeef23befa539bf662cd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55965 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QDKC2vUnhsba_hCh-VS4HeM18yqu2HqHwx6ss1aisIcERLYBasBc29RG-ihSq2x7lWL_w-z26ZF203d9hiU6FHsBgmlkgnY0gmlwhKwSVsaKbXVsdGlhZGRyc4wACgSsElbGBtz-3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKVkNvISqQFSgrTiiaQQZSYdn4aBc9S5TBDlJmLUrJqwIN0Y3CC3P2DdWRwgtz_hXdha3UyCQ --lightpushnode=/ip4/172.18.86.198/tcp/56573/p2p/16Uiu2HAm5VWqhyBFpiWj41KW97AfE1ysBvCcBELUZoVbAiaMG4s9 --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.100.134 waku 8a993754e0e05a7bb2ae221397b69223792177648fd2781729b1583970b1f55f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 8a993754e0e0. Setting up logs at ./log/docker/lightpush_node1_2024-08-16_08-09-06__0cb135e6-593b-4d0f-9c32-f2f5832fef23__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 55961
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55961/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55961/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.100.134/tcp/55962/p2p/16Uiu2HAmF36E8YsnuhUfzYQyEVVeBtc5KDgcXzWeYHuNYFZFNA8P","/ip4/172.18.100.134/tcp/55963/ws/p2p/16Uiu2HAmF36E8YsnuhUfzYQyEVVeBtc5KDgcXzWeYHuNYFZFNA8P"],"enrUri":"enr:-LO4QKTQMDl42hMrj492JoSZwXb51bJpIDC1dkHhFcfHXJYeP7y5n9xvWVjD4EbNLYgt26niK0srsnTVaR80LzZGQj8BgmlkgnY0gmlwhKwSZIaKbXVsdGlhZGRyc4wACgSsEmSGBtqb3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMjYMvbHIuVBLWUWKUzk5drm5CAFe5tDKlxCLdRfMKqGIN0Y3CC2pqDdWRwgtqchXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55961/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.86.198/tcp/56573/p2p/16Uiu2HAm5VWqhyBFpiWj41KW97AfE1ysBvCcBELUZoVbAiaMG4s9"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55961/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.211.251/tcp/48313/p2p/16Uiu2HAmADuqibwkPC6BQZCFBcVXEi3D2JxzEDaFHnKW4yDzp8fX"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56572/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48312/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55961/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1723795751166464512, "extraField": "extraValue"}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:55961/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 8a3917988869
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 106ab9742555
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 8a993754e0e0
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.