[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_update_subscription_with_no_content_topic with id: 2024-08-16_08-05-34__683df61b-5a93-42c1-a221-da20da889e2b
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node1_2024-08-16_08-05-34__683df61b-5a93-42c1-a221-da20da889e2b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.1.204
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['2520', '2521', '2522', '2523', '2524']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 2520:2520 -p 2521:2521 -p 2522:2522 -p 2523:2523 -p 2524:2524 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2522 --rest-port=2520 --tcp-port=2521 --discv5-udp-port=2523 --rest-address=0.0.0.0 --nat=extip:172.18.1.204 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7a494fd34004bf674ab3127ce39fdb7c340c6bcd4f1d6c8b438fa15ed2c4cdbb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2524 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.1.204 waku da4f56741e3e60ad3b998f1dc117e9da44307d381e89f4145757c23305ad1776
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID da4f56741e3e. Setting up logs at ./log/docker/node1_2024-08-16_08-05-34__683df61b-5a93-42c1-a221-da20da889e2b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 2520
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2520/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2520/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.1.204/tcp/2521/p2p/16Uiu2HAmDbd9cwCENSCtZ9bUQg89ys34dM1eKPMHmtVRr4EjiDHe","/ip4/172.18.1.204/tcp/2522/ws/p2p/16Uiu2HAmDbd9cwCENSCtZ9bUQg89ys34dM1eKPMHmtVRr4EjiDHe"],"enrUri":"enr:-LO4QDmuwiHhds6deEwiWDKmPlc03Ochd1b-BfOxHLAExix-UJTsvab1fk9q2XCGXTfnSgpMlMHWLCMmrBhbV7NEfI0BgmlkgnY0gmlwhKwSAcyKbXVsdGlhZGRyc4wACgSsEgHMBgna3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMN_vjj64O-yk83b-jRwoY8nfPeJQ5AnWRt9o9AJf3g3YN0Y3CCCdmDdWRwggnbhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node2_2024-08-16_08-05-34__683df61b-5a93-42c1-a221-da20da889e2b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.24.254
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['26857', '26858', '26859', '26860', '26861']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 26857:26857 -p 26858:26858 -p 26859:26859 -p 26860:26860 -p 26861:26861 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26859 --rest-port=26857 --tcp-port=26858 --discv5-udp-port=26860 --rest-address=0.0.0.0 --nat=extip:172.18.24.254 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=229f0b4fc79c99abc6f6aa7c2392d2fea6e126b5b960cbe93b4c0046d11c3a7b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26861 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QDmuwiHhds6deEwiWDKmPlc03Ochd1b-BfOxHLAExix-UJTsvab1fk9q2XCGXTfnSgpMlMHWLCMmrBhbV7NEfI0BgmlkgnY0gmlwhKwSAcyKbXVsdGlhZGRyc4wACgSsEgHMBgna3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMN_vjj64O-yk83b-jRwoY8nfPeJQ5AnWRt9o9AJf3g3YN0Y3CCCdmDdWRwggnbhXdha3UyBQ --filternode=/ip4/172.18.1.204/tcp/2521/p2p/16Uiu2HAmDbd9cwCENSCtZ9bUQg89ys34dM1eKPMHmtVRr4EjiDHe
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.24.254 waku 95a400fcf8a0fecf9df58b02ccc3a5c60cbe6be4867299e43a87688dd64b9242
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 95a400fcf8a0. Setting up logs at ./log/docker/node2_2024-08-16_08-05-34__683df61b-5a93-42c1-a221-da20da889e2b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 26857
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26857/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26857/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.24.254/tcp/26858/p2p/16Uiu2HAkyFp2WQLs95Q3Fi9fm4av8ZoJmz1GCETam9HJAkDQiXpa","/ip4/172.18.24.254/tcp/26859/ws/p2p/16Uiu2HAkyFp2WQLs95Q3Fi9fm4av8ZoJmz1GCETam9HJAkDQiXpa"],"enrUri":"enr:-LO4QEs4Rgpw6xpoK7839X4Qdci3i0cGITjRLDF9aOfCQmzAe4GNQYwUvS-1FgdE5Nq0aRDvvFN9J2OkSU-rUynsyicBgmlkgnY0gmlwhKwSGP6KbXVsdGlhZGRyc4wACgSsEhj-Bmjr3QOCcnOFAAMBAACJc2VjcDI1NmsxoQI46AnErM_bUV-5roBUOwK1_ISiecw2oSY7eFZ-2g-Bl4N0Y3CCaOqDdWRwgmjshXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26857/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.1.204/tcp/2521/p2p/16Uiu2HAmDbd9cwCENSCtZ9bUQg89ys34dM1eKPMHmtVRr4EjiDHe"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2520/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26857/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "af1e0080-a166-4fc0-8801-14eb52d576da", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"af1e0080-a166-4fc0-8801-14eb52d576da","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X PUT "http://127.0.0.1:26857/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "pubsubTopic": "/waku/2/rs/3/1"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:26857/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id da4f56741e3e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 95a400fcf8a0
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.