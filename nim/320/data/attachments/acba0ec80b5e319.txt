[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_meta with id: 2024-08-16_08-08-53__38bbdf58-5395-4c72-8ba6-be732d0cd456
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-16_08-08-53__38bbdf58-5395-4c72-8ba6-be732d0cd456__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.100.102
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['31422', '31423', '31424', '31425', '31426']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 31422:31422 -p 31423:31423 -p 31424:31424 -p 31425:31425 -p 31426:31426 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=31424 --rest-port=31422 --tcp-port=31423 --discv5-udp-port=31425 --rest-address=0.0.0.0 --nat=extip:172.18.100.102 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fd0f8934a475f8f09c827440d73ef6cd52f8b5d47cd8f0bd134ee064ce14e616 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=31426 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.100.102 waku 04eee23dcb91913b4a4a7a4ec56c36b81072d9cab82ee8376da4af5d83b3ed40
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 04eee23dcb91. Setting up logs at ./log/docker/receiving_node1_2024-08-16_08-08-53__38bbdf58-5395-4c72-8ba6-be732d0cd456__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 31422
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31422/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31422/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.100.102/tcp/31423/p2p/16Uiu2HAmTVTUEBss1VRC2NG6RvkPVnFzCCQDMCGC9hQy8fnF7SuM","/ip4/172.18.100.102/tcp/31424/ws/p2p/16Uiu2HAmTVTUEBss1VRC2NG6RvkPVnFzCCQDMCGC9hQy8fnF7SuM"],"enrUri":"enr:-LO4QDn5cJzF5VS2mHwbAdI7YG_KHdpXWQi6iqs0mQHFurIlXuAnT3_3YuC2Pd9ydV4SB6_GNqlqAR02x_iqZ5yJIw8BgmlkgnY0gmlwhKwSZGaKbXVsdGlhZGRyc4wACgSsEmRmBnrA3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPcbij566IoB3Ev02sOMV9b0q65gCufKR2g81BEpbdKUIN0Y3CCer-DdWRwgnrBhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-08-16_08-08-53__38bbdf58-5395-4c72-8ba6-be732d0cd456__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.121.61
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['9057', '9058', '9059', '9060', '9061']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 9057:9057 -p 9058:9058 -p 9059:9059 -p 9060:9060 -p 9061:9061 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=9059 --rest-port=9057 --tcp-port=9058 --discv5-udp-port=9060 --rest-address=0.0.0.0 --nat=extip:172.18.121.61 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=349fe46251abfe52a8e2aac336becd9c4ebcaad5da81b52b3bfbeddb2879df19 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=9061 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.121.61 waku a994c092b32db500fa6bf0650cc44d2261ab57eafa5d716d93bc00d461a10427
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID a994c092b32d. Setting up logs at ./log/docker/receiving_node2_2024-08-16_08-08-53__38bbdf58-5395-4c72-8ba6-be732d0cd456__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 9057
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9057/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9057/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.121.61/tcp/9058/p2p/16Uiu2HAmMw4yjjSXgkV8EbtKpCiaUBkoXAScj9tj4j9GLRvt4fjV","/ip4/172.18.121.61/tcp/9059/ws/p2p/16Uiu2HAmMw4yjjSXgkV8EbtKpCiaUBkoXAScj9tj4j9GLRvt4fjV"],"enrUri":"enr:-LO4QJMNUrKIlpYzQRMT2hmxhsCV8KDVqZx-1MAlSiAzaF_WZ00SXS1Mh_cbduavnMc--VseLk7-rlK1RKxUomOtd78BgmlkgnY0gmlwhKwSeT2KbXVsdGlhZGRyc4wACgSsEnk9BiNj3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOJ17Vpd_EqRm4ZBc_N-Qn_CCcc83SXOHWAF41g7gzcQIN0Y3CCI2KDdWRwgiNkhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9057/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.100.102/tcp/31423/p2p/16Uiu2HAmTVTUEBss1VRC2NG6RvkPVnFzCCQDMCGC9hQy8fnF7SuM"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-16_08-08-53__38bbdf58-5395-4c72-8ba6-be732d0cd456__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.228.65
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['62135', '62136', '62137', '62138', '62139']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 62135:62135 -p 62136:62136 -p 62137:62137 -p 62138:62138 -p 62139:62139 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62137 --rest-port=62135 --tcp-port=62136 --discv5-udp-port=62138 --rest-address=0.0.0.0 --nat=extip:172.18.228.65 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ddda869a97ee063c26bea42ea3aa24d5ad4dcebe72a2fead2dfefdcfb112fd40 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62139 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QDn5cJzF5VS2mHwbAdI7YG_KHdpXWQi6iqs0mQHFurIlXuAnT3_3YuC2Pd9ydV4SB6_GNqlqAR02x_iqZ5yJIw8BgmlkgnY0gmlwhKwSZGaKbXVsdGlhZGRyc4wACgSsEmRmBnrA3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPcbij566IoB3Ev02sOMV9b0q65gCufKR2g81BEpbdKUIN0Y3CCer-DdWRwgnrBhXdha3UyCQ --lightpushnode=/ip4/172.18.100.102/tcp/31423/p2p/16Uiu2HAmTVTUEBss1VRC2NG6RvkPVnFzCCQDMCGC9hQy8fnF7SuM --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.228.65 waku 910632126f6d30a9f3a372799366cedf7bcecb355a8ffe3bdafd0feaedfc3187
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 910632126f6d. Setting up logs at ./log/docker/lightpush_node1_2024-08-16_08-08-53__38bbdf58-5395-4c72-8ba6-be732d0cd456__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 62135
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62135/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62135/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.228.65/tcp/62136/p2p/16Uiu2HAmP5L2pLJ3ygy7KSr8bbQ5BU3C4ZBkSbiS8BEjdDbGn7nF","/ip4/172.18.228.65/tcp/62137/ws/p2p/16Uiu2HAmP5L2pLJ3ygy7KSr8bbQ5BU3C4ZBkSbiS8BEjdDbGn7nF"],"enrUri":"enr:-LO4QCL8yAvwkz-Utd7mc5h9-zWg5cv-3Het04luBBhxtgwXSyPyPLlGXU1B2NJfCVoB_1CCGfwtTX1zvRl3Qe5wMJsBgmlkgnY0gmlwhKwS5EGKbXVsdGlhZGRyc4wACgSsEuRBBvK53QOCcnOFAAMBAACJc2VjcDI1NmsxoQOa0RAILILmyNFFwhycNAc-CDxQMjRlQQHPT4OqLh-mUIN0Y3CC8riDdWRwgvK6hXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62135/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.100.102/tcp/31423/p2p/16Uiu2HAmTVTUEBss1VRC2NG6RvkPVnFzCCQDMCGC9hQy8fnF7SuM"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62135/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.121.61/tcp/9058/p2p/16Uiu2HAmMw4yjjSXgkV8EbtKpCiaUBkoXAScj9tj4j9GLRvt4fjV"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31422/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9057/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62135/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1723795737789029120, "meta": "Light push works!!"}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:62135/lightpush/v1/message. Response content: b'Invalid message: Incorrect base64 string'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 04eee23dcb91
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id a994c092b32d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 910632126f6d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.