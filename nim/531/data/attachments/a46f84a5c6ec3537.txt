[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_no_timestamp with id: 2024-12-18_04-13-44__ba0afd04-175c-4134-9d91-924996161503
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-12-18_04-13-44__ba0afd04-175c-4134-9d91-924996161503__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.37.129
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['7173', '7174', '7175', '7176', '7177']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 7173:7173 -p 7174:7174 -p 7175:7175 -p 7176:7176 -p 7177:7177 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7175 --rest-port=7173 --tcp-port=7174 --discv5-udp-port=7176 --rest-address=0.0.0.0 --nat=extip:172.18.37.129 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a30bc62b13eaaa54addbdfe72ab11dcb49cc17b28d76c8cdbcb9ffd14bf7c3cb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7177 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.37.129 waku 0883901210b2115d7611b830e88063c8717f5940bc7379d5edee04679791594a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 0883901210b2. Setting up logs at ./log/docker/receiving_node1_2024-12-18_04-13-44__ba0afd04-175c-4134-9d91-924996161503__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 7173
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 85763fedef21. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7173/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7173/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.37.129/tcp/7174/p2p/16Uiu2HAkyi7oy4qnCR9x2eTm5N7oEndvzdhrQaDP7w7gkriWfJNZ","/ip4/172.18.37.129/tcp/7175/ws/p2p/16Uiu2HAkyi7oy4qnCR9x2eTm5N7oEndvzdhrQaDP7w7gkriWfJNZ"],"enrUri":"enr:-L24QNk22dezhWSR_3E0pAaLtzj3G2YHunwTBBlsjJEo31R0KEbHuCK3nzq0dfs-egZbLaAYgfKZAvTE6cjTbDmtas4CgmlkgnY0gmlwhKwSJYGKbXVsdGlhZGRyc5YACASsEiWBBhwGAAoErBIlgQYcB90DgnJzhQADAQAAiXNlY3AyNTZrMaECP6U_VLy1glSDbLx6qyYCtQHRdqpXvMli8tDidwTvuGaDdGNwghwGg3VkcIIcCIV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-12-18_04-13-44__ba0afd04-175c-4134-9d91-924996161503__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.215.79
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['23230', '23231', '23232', '23233', '23234']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 23230:23230 -p 23231:23231 -p 23232:23232 -p 23233:23233 -p 23234:23234 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23232 --rest-port=23230 --tcp-port=23231 --discv5-udp-port=23233 --rest-address=0.0.0.0 --nat=extip:172.18.215.79 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=66fefcbfade0d4e8bd9420c054cf20140cf07bee9b2a0abcb3d3fdefaacac66a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23234 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.215.79 waku de2c160c3aba5ad79db07682cdf7852a91718d0cc93a39c266409196fa60efb5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID de2c160c3aba. Setting up logs at ./log/docker/receiving_node2_2024-12-18_04-13-44__ba0afd04-175c-4134-9d91-924996161503__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 23230
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23230/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23230/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.215.79/tcp/23231/p2p/16Uiu2HAkyVXDYomhGBzqgVwHRTDNUTDeYCmvHMsZwj2MuBv8ytFi","/ip4/172.18.215.79/tcp/23232/ws/p2p/16Uiu2HAkyVXDYomhGBzqgVwHRTDNUTDeYCmvHMsZwj2MuBv8ytFi"],"enrUri":"enr:-L24QHQ7DwqD3tOVoHaXvjo2R6PWg7MciD97aZMwZP6eRMSfKTrxqo0QxZNM5bUSPmRSFfO2Ab8jbzLBOYsx6JwPBwYCgmlkgnY0gmlwhKwS10-KbXVsdGlhZGRyc5YACASsEtdPBlq_AAoErBLXTwZawN0DgnJzhQADAQAAiXNlY3AyNTZrMaECPGspq5yZ1Y7T98Ungw8ZjEO4znQLAUCDcgxZgs_x9lGDdGNwglq_g3VkcIJawYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23230/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.37.129/tcp/7174/p2p/16Uiu2HAkyi7oy4qnCR9x2eTm5N7oEndvzdhrQaDP7w7gkriWfJNZ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-12-18_04-13-44__ba0afd04-175c-4134-9d91-924996161503__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.32.37
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['18484', '18485', '18486', '18487', '18488']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 18484:18484 -p 18485:18485 -p 18486:18486 -p 18487:18487 -p 18488:18488 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18486 --rest-port=18484 --tcp-port=18485 --discv5-udp-port=18487 --rest-address=0.0.0.0 --nat=extip:172.18.32.37 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ad1c49afa3a7d8420c2c43531568d05555dbbc78be3e85cc0c9c421825d23c7f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18488 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QNk22dezhWSR_3E0pAaLtzj3G2YHunwTBBlsjJEo31R0KEbHuCK3nzq0dfs-egZbLaAYgfKZAvTE6cjTbDmtas4CgmlkgnY0gmlwhKwSJYGKbXVsdGlhZGRyc5YACASsEiWBBhwGAAoErBIlgQYcB90DgnJzhQADAQAAiXNlY3AyNTZrMaECP6U_VLy1glSDbLx6qyYCtQHRdqpXvMli8tDidwTvuGaDdGNwghwGg3VkcIIcCIV3YWt1Mgk --lightpushnode=/ip4/172.18.37.129/tcp/7174/p2p/16Uiu2HAkyi7oy4qnCR9x2eTm5N7oEndvzdhrQaDP7w7gkriWfJNZ --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.32.37 waku 57b8e59a97e993d25c629aba3d1de6df48cc9c308aee30291fbdd62350538e75
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 57b8e59a97e9. Setting up logs at ./log/docker/lightpush_node1_2024-12-18_04-13-44__ba0afd04-175c-4134-9d91-924996161503__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 18484
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18484/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18484/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.32.37/tcp/18485/p2p/16Uiu2HAmKGpuhR5t5YLXv93vHkhcHfppiLkVMivQqURyyMqhFzA2","/ip4/172.18.32.37/tcp/18486/ws/p2p/16Uiu2HAmKGpuhR5t5YLXv93vHkhcHfppiLkVMivQqURyyMqhFzA2"],"enrUri":"enr:-L24QCwuAiaO42OkV0DmaC7BdELRBh5mO1O9DAg-HkUnhne4NtQgjy-6VgaBYUYpSklzdUiOqCbBYlRy9HF5FRgJj_0CgmlkgnY0gmlwhKwSICWKbXVsdGlhZGRyc5YACASsEiAlBkg1AAoErBIgJQZINt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDYlRa_b9Qny0ErROs9r53W2qOkELoOL5qbz6MMNpLQr-DdGNwgkg1g3VkcIJIN4V3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18484/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.37.129/tcp/7174/p2p/16Uiu2HAkyi7oy4qnCR9x2eTm5N7oEndvzdhrQaDP7w7gkriWfJNZ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18484/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.215.79/tcp/23231/p2p/16Uiu2HAkyVXDYomhGBzqgVwHRTDNUTDeYCmvHMsZwj2MuBv8ytFi"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7173/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23230/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18484/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto"}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7173/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1734495228868605440,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23230/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1734495228868605440,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 0883901210b2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id de2c160c3aba
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 0883901210b2. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 57b8e59a97e9
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container de2c160c3aba. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.