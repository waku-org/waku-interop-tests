[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_only_lightpush__peer_full with id: 2024-12-18_04-14-37__90720cfe-f1c8-4ccb-8c35-015710159f20
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-12-18_04-14-37__90720cfe-f1c8-4ccb-8c35-015710159f20__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.235.127
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['55941', '55942', '55943', '55944', '55945']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 55941:55941 -p 55942:55942 -p 55943:55943 -p 55944:55944 -p 55945:55945 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55943 --rest-port=55941 --tcp-port=55942 --discv5-udp-port=55944 --rest-address=0.0.0.0 --nat=extip:172.18.235.127 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8faeceaaac4c5d1ebaed07c06c14724cb9bcf18abc0583201ead3be5e7ae71ae --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55945 --metrics-logging=true --lightpush=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.235.127 waku f32485b721eb92fad295dc1a297acffb7327bb8b09cb4cdf722e14b6d42503bc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID f32485b721eb. Setting up logs at ./log/docker/receiving_node1_2024-12-18_04-14-37__90720cfe-f1c8-4ccb-8c35-015710159f20__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 55941
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 49d13e9df2b5. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55941/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55941/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.235.127/tcp/55942/p2p/16Uiu2HAmBpWgWGzJHcsmeWF6KPeeMwYX4y7YPh856NVEC5yNdvLM","/ip4/172.18.235.127/tcp/55943/ws/p2p/16Uiu2HAmBpWgWGzJHcsmeWF6KPeeMwYX4y7YPh856NVEC5yNdvLM"],"enrUri":"enr:-L24QHyDlXMfWlZJ-j979HxuWVfgXRFiOgrLB67ESFos_8DtPnI2YiL6L68Xn-1Y3DNOXlWvBpNYVLTfDFU6g0hseBkCgmlkgnY0gmlwhKwS63-KbXVsdGlhZGRyc5YACASsEut_BtqGAAoErBLrfwbah90DgnJzhQADAQAAiXNlY3AyNTZrMaEC85TWCMR7fc09QeVNG3JoSP13VSIx3IiG22062swjJUaDdGNwgtqGg3VkcILaiIV3YWt1Mg0"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-12-18_04-14-37__90720cfe-f1c8-4ccb-8c35-015710159f20__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.225.239
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['46897', '46898', '46899', '46900', '46901']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 46897:46897 -p 46898:46898 -p 46899:46899 -p 46900:46900 -p 46901:46901 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=46899 --rest-port=46897 --tcp-port=46898 --discv5-udp-port=46900 --rest-address=0.0.0.0 --nat=extip:172.18.225.239 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cd362e8a0ddc030b603270f1786b3e9b9b6f4c8f80f9ab4df5964e4ece69dc0a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=46901 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.225.239 waku ffafa411a015a6870129410433655639b9763fb26d8be4af9c2fc190f0ba02ea
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ffafa411a015. Setting up logs at ./log/docker/receiving_node2_2024-12-18_04-14-37__90720cfe-f1c8-4ccb-8c35-015710159f20__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 46897
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46897/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46897/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.225.239/tcp/46898/p2p/16Uiu2HAmCfe7WLtrwNU1dR9RiwTbc38THQ5jj3YySDQaqaS78CnU","/ip4/172.18.225.239/tcp/46899/ws/p2p/16Uiu2HAmCfe7WLtrwNU1dR9RiwTbc38THQ5jj3YySDQaqaS78CnU"],"enrUri":"enr:-L24QOQwExwDnW0kpoXWZPnN2ofNm5gyVvDrbTYMio_kmbdOR3fGCmmmJoC30wuB206DELk_vrvLmyCrvvHFA8sHwg4CgmlkgnY0gmlwhKwS4e-KbXVsdGlhZGRyc5YACASsEuHvBrcyAAoErBLh7wa3M90DgnJzhQADAQAAiXNlY3AyNTZrMaEDACqysn33DkhWn1XiUr3-JzuZiZmTYbpE-Uc1Ln72UjGDdGNwgrcyg3VkcIK3NIV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:46897/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.235.127/tcp/55942/p2p/16Uiu2HAmBpWgWGzJHcsmeWF6KPeeMwYX4y7YPh856NVEC5yNdvLM"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-12-18_04-14-37__90720cfe-f1c8-4ccb-8c35-015710159f20__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.33.99
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['56349', '56350', '56351', '56352', '56353']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 56349:56349 -p 56350:56350 -p 56351:56351 -p 56352:56352 -p 56353:56353 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56351 --rest-port=56349 --tcp-port=56350 --discv5-udp-port=56352 --rest-address=0.0.0.0 --nat=extip:172.18.33.99 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a7a47a3af4ddcf1ab2df88bd5c7ee567ad82b7cbd2a604a4e6a3bd4fb270de2a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56353 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QHyDlXMfWlZJ-j979HxuWVfgXRFiOgrLB67ESFos_8DtPnI2YiL6L68Xn-1Y3DNOXlWvBpNYVLTfDFU6g0hseBkCgmlkgnY0gmlwhKwS63-KbXVsdGlhZGRyc5YACASsEut_BtqGAAoErBLrfwbah90DgnJzhQADAQAAiXNlY3AyNTZrMaEC85TWCMR7fc09QeVNG3JoSP13VSIx3IiG22062swjJUaDdGNwgtqGg3VkcILaiIV3YWt1Mg0 --lightpushnode=/ip4/172.18.235.127/tcp/55942/p2p/16Uiu2HAmBpWgWGzJHcsmeWF6KPeeMwYX4y7YPh856NVEC5yNdvLM --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.33.99 waku 5abd0b6847b12ba249825bedd626b22af5d52e9db4da453663c32b48508658b8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 5abd0b6847b1. Setting up logs at ./log/docker/lightpush_node1_2024-12-18_04-14-37__90720cfe-f1c8-4ccb-8c35-015710159f20__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 56349
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56349/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56349/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.33.99/tcp/56350/p2p/16Uiu2HAmHv3fdcM81oFNFBqtGwD9ja3Arf6nhptURCiVGdTiVSao","/ip4/172.18.33.99/tcp/56351/ws/p2p/16Uiu2HAmHv3fdcM81oFNFBqtGwD9ja3Arf6nhptURCiVGdTiVSao"],"enrUri":"enr:-L24QIJwr61miXohfJILFnPnwBm3xzrBugtxPe1Gyp5VuCaYa3_ThRukIeQLiMz_XKqXQL7lpT1vtzfDbXJWii7cs4wCgmlkgnY0gmlwhKwSIWOKbXVsdGlhZGRyc5YACASsEiFjBtweAAoErBIhYwbcH90DgnJzhQADAQAAiXNlY3AyNTZrMaEDTiXlfi7ShD8Ltwzkiuo7ZOZufcfSm-iEVIUguHGGdtyDdGNwgtweg3VkcILcIIV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56349/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.235.127/tcp/55942/p2p/16Uiu2HAmBpWgWGzJHcsmeWF6KPeeMwYX4y7YPh856NVEC5yNdvLM"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56349/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.225.239/tcp/46898/p2p/16Uiu2HAmCfe7WLtrwNU1dR9RiwTbc38THQ5jj3YySDQaqaS78CnU"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55941/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:46897/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56349/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1734495282028852224}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55941/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1734495282028852224,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46897/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1734495282028852224,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id f32485b721eb
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id ffafa411a015
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container f32485b721eb. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 5abd0b6847b1
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container ffafa411a015. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.