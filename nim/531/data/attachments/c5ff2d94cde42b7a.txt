[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_single_content_topic[/app/29/sometopic/someencoding] with id: 2024-12-18_04-20-08__6bdabe32-afc0-4c8d-9fc9-110d92e5771d
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-18_04-20-08__6bdabe32-afc0-4c8d-9fc9-110d92e5771d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.184.130
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['37192', '37193', '37194', '37195', '37196']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 37192:37192 -p 37193:37193 -p 37194:37194 -p 37195:37195 -p 37196:37196 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37194 --rest-port=37192 --tcp-port=37193 --discv5-udp-port=37195 --rest-address=0.0.0.0 --nat=extip:172.18.184.130 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=8dbc7edc18bcd2b0e0b2908e0cfcfe6aed7cb85dfee65927b6403e857edbb0c2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37196 --metrics-logging=true --relay=true --filter=true --content-topic=/app/29/sometopic/someencoding
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.184.130 waku b4ef57ca2daa904732a55da39200fb614597887cf2b0606b953ae789aef24215
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID b4ef57ca2daa. Setting up logs at ./log/docker/node1_2024-12-18_04-20-08__6bdabe32-afc0-4c8d-9fc9-110d92e5771d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 37192
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container df77b6378322. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37192/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37192/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.184.130/tcp/37193/p2p/16Uiu2HAkzMRZKwNyJ8fwPJhDWWQEAbtU1XggNxMZUj4dxrVf13B2","/ip4/172.18.184.130/tcp/37194/ws/p2p/16Uiu2HAkzMRZKwNyJ8fwPJhDWWQEAbtU1XggNxMZUj4dxrVf13B2"],"enrUri":"enr:-L24QGNGgUJPWNwVOY_8I4fzfHXwfh6r8kUErrk0UxIH9bbRA0wJjNBREUcZynQxMZn_tPJhb3TM5onO4HTi81CldKQCgmlkgnY0gmlwhKwSuIKKbXVsdGlhZGRyc5YACASsEriCBpFJAAoErBK4ggaRSt0DgnJzhQACAQAAiXNlY3AyNTZrMaECSTPN-Oi8vkWPO37SoF100HC-HEh-ah8_27nUE6nvkC2DdGNwgpFJg3VkcIKRS4V3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-18_04-20-08__6bdabe32-afc0-4c8d-9fc9-110d92e5771d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.194.56
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['5924', '5925', '5926', '5927', '5928']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 5924:5924 -p 5925:5925 -p 5926:5926 -p 5927:5927 -p 5928:5928 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=5926 --rest-port=5924 --tcp-port=5925 --discv5-udp-port=5927 --rest-address=0.0.0.0 --nat=extip:172.18.194.56 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=e3aadfbf51ece31db00fbdda2ed9c3e6d19cdd20c8a6ce52c92e10b4ba93bbfd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=5928 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QGNGgUJPWNwVOY_8I4fzfHXwfh6r8kUErrk0UxIH9bbRA0wJjNBREUcZynQxMZn_tPJhb3TM5onO4HTi81CldKQCgmlkgnY0gmlwhKwSuIKKbXVsdGlhZGRyc5YACASsEriCBpFJAAoErBK4ggaRSt0DgnJzhQACAQAAiXNlY3AyNTZrMaECSTPN-Oi8vkWPO37SoF100HC-HEh-ah8_27nUE6nvkC2DdGNwgpFJg3VkcIKRS4V3YWt1MgU --content-topic=/app/29/sometopic/someencoding
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.194.56 waku 86e22dd705eea28f53ec4534444802512db79d6c1732b6aa769ba9e8d9db3cca
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 86e22dd705ee. Setting up logs at ./log/docker/node2_2024-12-18_04-20-08__6bdabe32-afc0-4c8d-9fc9-110d92e5771d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 5924
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5924/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5924/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.194.56/tcp/5925/p2p/16Uiu2HAm1cAAFpoDXuv9PBUBGPD1xf6euB5Yku6h45vaMnF3vJhh","/ip4/172.18.194.56/tcp/5926/ws/p2p/16Uiu2HAm1cAAFpoDXuv9PBUBGPD1xf6euB5Yku6h45vaMnF3vJhh"],"enrUri":"enr:-L24QCF7nhdlWRallqha662_U1uPRzZWae0ivGwRom5JKctvTbPepP7qxTUv0SosK4tkHcjpTR2gZxUFrXHwS7haP4ACgmlkgnY0gmlwhKwSwjiKbXVsdGlhZGRyc5YACASsEsI4BhclAAoErBLCOAYXJt0DgnJzhQACAQAAiXNlY3AyNTZrMaECW9XLFzEOYxlTk6gDrjoLvN2Hai7cx3O4b1xQkmJhMgSDdGNwghclg3VkcIIXJ4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5924/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.184.130/tcp/37193/p2p/16Uiu2HAkzMRZKwNyJ8fwPJhDWWQEAbtU1XggNxMZUj4dxrVf13B2"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37192/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/app/29/sometopic/someencoding"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5924/relay/v1/auto/subscriptions" -H "Content-Type: application/json" -d '["/app/29/sometopic/someencoding"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37192/relay/v1/auto/messages" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37192/relay/v1/auto/messages/%2Fapp%2F29%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/app/29/sometopic/someencoding","version":0,"timestamp":1734495611154578176,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5924/relay/v1/auto/messages/%2Fapp%2F29%2Fsometopic%2Fsomeencoding" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/app/29/sometopic/someencoding","version":0,"timestamp":1734495611154578176,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id b4ef57ca2daa
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 86e22dd705ee
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container b4ef57ca2daa. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.