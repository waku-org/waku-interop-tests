[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_lightpush with id: 2024-12-18_04-03-30__6dc3c16c-78bc-4acd-8dc5-732600626099
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-18_04-03-30__6dc3c16c-78bc-4acd-8dc5-732600626099__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.217.97
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['60796', '60797', '60798', '60799', '60800']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 60796:60796 -p 60797:60797 -p 60798:60798 -p 60799:60799 -p 60800:60800 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=60798 --rest-port=60796 --tcp-port=60797 --discv5-udp-port=60799 --rest-address=0.0.0.0 --nat=extip:172.18.217.97 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bf25cefbcbba8cbcbacdc178502c4fb7c5915fd2d693d33e5abfdf81855f41cf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=60800 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.217.97 waku 27712db30539a1c6f4cbc3330d1fb7ddd0cf04c294a75c3fece9d832cc60c836
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 27712db30539. Setting up logs at ./log/docker/node1_2024-12-18_04-03-30__6dc3c16c-78bc-4acd-8dc5-732600626099__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 60796
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container a78d2aa36ad4. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60796/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60796/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.217.97/tcp/60797/p2p/16Uiu2HAmMZCJ4dmtcyTsFQoKXiqbE1FRbgkcvKtonxv8PYN9fhHD","/ip4/172.18.217.97/tcp/60798/ws/p2p/16Uiu2HAmMZCJ4dmtcyTsFQoKXiqbE1FRbgkcvKtonxv8PYN9fhHD"],"enrUri":"enr:-L24QBj2L45U-W-Z_Wyp8uOkoebs1fpFR3PCb-EgNfWojZ0aTHLea_2DtOa6tla9d_p56FDFHkzVXpLfEyK3PlHf-68CgmlkgnY0gmlwhKwS2WGKbXVsdGlhZGRyc5YACASsEtlhBu19AAoErBLZYQbtft0DgnJzhQADAQAAiXNlY3AyNTZrMaEDhD0z-Z27gX3JyjD7oV2fH7hx1d0JQsacjLY7l-CY95yDdGNwgu19g3VkcILtf4V3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-18_04-03-30__6dc3c16c-78bc-4acd-8dc5-732600626099__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.141.210
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['7230', '7231', '7232', '7233', '7234']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 7230:7230 -p 7231:7231 -p 7232:7232 -p 7233:7233 -p 7234:7234 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7232 --rest-port=7230 --tcp-port=7231 --discv5-udp-port=7233 --rest-address=0.0.0.0 --nat=extip:172.18.141.210 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0f3a9edbc09457dea0d4337ad3f8aeb763eadb9aec43342ceba271fcc96abdc5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7234 --metrics-logging=true --lightpush=false --relay=true --discv5-bootstrap-node=enr:-L24QBj2L45U-W-Z_Wyp8uOkoebs1fpFR3PCb-EgNfWojZ0aTHLea_2DtOa6tla9d_p56FDFHkzVXpLfEyK3PlHf-68CgmlkgnY0gmlwhKwS2WGKbXVsdGlhZGRyc5YACASsEtlhBu19AAoErBLZYQbtft0DgnJzhQADAQAAiXNlY3AyNTZrMaEDhD0z-Z27gX3JyjD7oV2fH7hx1d0JQsacjLY7l-CY95yDdGNwgu19g3VkcILtf4V3YWt1Mgk
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.141.210 waku bf638200f7cb2a339e058aa180413bedabd4f4ca8567dcfd6d3a48c013d47785
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID bf638200f7cb. Setting up logs at ./log/docker/node1_2024-12-18_04-03-30__6dc3c16c-78bc-4acd-8dc5-732600626099__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 7230
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7230/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7230/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.141.210/tcp/7231/p2p/16Uiu2HAm82f1H4nV2NMmhnwoB6RqdKQ2Wk9o1qfdEJ1wqQiSDo6W","/ip4/172.18.141.210/tcp/7232/ws/p2p/16Uiu2HAm82f1H4nV2NMmhnwoB6RqdKQ2Wk9o1qfdEJ1wqQiSDo6W"],"enrUri":"enr:-L24QMcrJ2Bbj1GGlU1OpyWF80HuVrVKBT7gFHRG3UmYNh9jf2p1Kk3idSdTG5wJ2cR8PdY5m3ctdEduGM6exJ_5_Y8CgmlkgnY0gmlwhKwSjdKKbXVsdGlhZGRyc5YACASsEo3SBhw_AAoErBKN0gYcQN0DgnJzhQADAQAAiXNlY3AyNTZrMaECu0J4PAwbMnm02Q1hqb5F8ngRBzBrcmiOobsuJ1IS3oeDdGNwghw_g3VkcIIcQYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-18_04-03-30__6dc3c16c-78bc-4acd-8dc5-732600626099__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.73.76
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['37198', '37199', '37200', '37201', '37202']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 37198:37198 -p 37199:37199 -p 37200:37200 -p 37201:37201 -p 37202:37202 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37200 --rest-port=37198 --tcp-port=37199 --discv5-udp-port=37201 --rest-address=0.0.0.0 --nat=extip:172.18.73.76 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9728d03c58b77afb528ef1d5df3decf75d74919c1b090ed6061b6f2bfb7c5fcf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37202 --metrics-logging=true --lightpush=true --relay=false --discv5-bootstrap-node=enr:-L24QBj2L45U-W-Z_Wyp8uOkoebs1fpFR3PCb-EgNfWojZ0aTHLea_2DtOa6tla9d_p56FDFHkzVXpLfEyK3PlHf-68CgmlkgnY0gmlwhKwS2WGKbXVsdGlhZGRyc5YACASsEtlhBu19AAoErBLZYQbtft0DgnJzhQADAQAAiXNlY3AyNTZrMaEDhD0z-Z27gX3JyjD7oV2fH7hx1d0JQsacjLY7l-CY95yDdGNwgu19g3VkcILtf4V3YWt1Mgk --lightpushnode=/ip4/172.18.217.97/tcp/60797/p2p/16Uiu2HAmMZCJ4dmtcyTsFQoKXiqbE1FRbgkcvKtonxv8PYN9fhHD
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.73.76 waku 17d2bc4cd79a4a72852465a1c89c395b71c8f6ea78eb389b47f6d3327024704f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 17d2bc4cd79a. Setting up logs at ./log/docker/node1_2024-12-18_04-03-30__6dc3c16c-78bc-4acd-8dc5-732600626099__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 37198
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37198/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37198/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.73.76/tcp/37199/p2p/16Uiu2HAm6xRXmNVweehyc1Ef9b3jMSnpbsRo2XukjvbD3dHN4yzo","/ip4/172.18.73.76/tcp/37200/ws/p2p/16Uiu2HAm6xRXmNVweehyc1Ef9b3jMSnpbsRo2XukjvbD3dHN4yzo"],"enrUri":"enr:-L24QICDhxFaspdw5hx2xoln8GdSRh7b8B3tr9_Xuw14RpUWTW_ZzhW6JjfQXBcmfe_4Nw_vTO0kJU3Tt_i1gi9u4DICgmlkgnY0gmlwhKwSSUyKbXVsdGlhZGRyc5YACASsEklMBpFPAAoErBJJTAaRUN0DgnJzhQADAQAAiXNlY3AyNTZrMaECq1E5WPgMGgWa2vWrtE7kJfeCTRTbYUQ6PcH150sNkcCDdGNwgpFPg3VkcIKRUYV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60796/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7230/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37198/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": 1734494615041732864}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60796/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1734494615041732864,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7230/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1734494615041732864,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 27712db30539
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id bf638200f7cb
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 27712db30539. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 17d2bc4cd79a
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container bf638200f7cb. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.