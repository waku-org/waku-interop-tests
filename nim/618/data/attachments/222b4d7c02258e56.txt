[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_works_with_static_sharding with id: 2025-01-16_04-03-21__1cde4726-99bb-471f-9f26-f48db9f53f8c
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-16_04-03-21__1cde4726-99bb-471f-9f26-f48db9f53f8c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.184.225
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['6383', '6384', '6385', '6386', '6387']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 6383:6383 -p 6384:6384 -p 6385:6385 -p 6386:6386 -p 6387:6387 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6385 --rest-port=6383 --tcp-port=6384 --discv5-udp-port=6386 --rest-address=0.0.0.0 --nat=extip:172.18.184.225 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=d0eacb9e7abb8016a9edcebb7fa532cee7b70ddd0a2a957caccd33e6d12ab2aa --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6387 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/2/0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.184.225 waku 67ea25d8078ed0111ebe84bf4f7d07821d9bc1c8b111e7045f1373e3dc65fe98
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 67ea25d8078e. Setting up logs at ./log/docker/node1_2025-01-16_04-03-21__1cde4726-99bb-471f-9f26-f48db9f53f8c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 6383
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container fa876b1094f0. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6383/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6383/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.184.225/tcp/6384/p2p/16Uiu2HAm1EA6vP7EzoMmRJVYGLKW582XT8VTEVYJVuF68W3ZWbca","/ip4/172.18.184.225/tcp/6385/ws/p2p/16Uiu2HAm1EA6vP7EzoMmRJVYGLKW582XT8VTEVYJVuF68W3ZWbca"],"enrUri":"enr:-L24QImyocuKU96rVPOZx67oZQgy_3_Fv_Urg1dhM7RTH-DKWvu6fVTcptmKrgZWgasQVdsJFBTpZDnwGXLzGGFL5T4CgmlkgnY0gmlwhKwSuOGKbXVsdGlhZGRyc5YACASsErjhBhjwAAoErBK44QYY8d0DgnJzhQACAQAAiXNlY3AyNTZrMaECVjLzVC0YIJ8T6NP-zytyKIDlfi5yZdr1kP3s9LhAml-DdGNwghjwg3VkcIIY8oV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-16_04-03-21__1cde4726-99bb-471f-9f26-f48db9f53f8c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.9.88
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['34025', '34026', '34027', '34028', '34029']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 34025:34025 -p 34026:34026 -p 34027:34027 -p 34028:34028 -p 34029:34029 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34027 --rest-port=34025 --tcp-port=34026 --discv5-udp-port=34028 --rest-address=0.0.0.0 --nat=extip:172.18.9.88 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=ca3a43abbbd5b8e5aa2e35429a4aa1ed2cf13d295fa4931270950a5bb8e83eb0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34029 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QImyocuKU96rVPOZx67oZQgy_3_Fv_Urg1dhM7RTH-DKWvu6fVTcptmKrgZWgasQVdsJFBTpZDnwGXLzGGFL5T4CgmlkgnY0gmlwhKwSuOGKbXVsdGlhZGRyc5YACASsErjhBhjwAAoErBK44QYY8d0DgnJzhQACAQAAiXNlY3AyNTZrMaECVjLzVC0YIJ8T6NP-zytyKIDlfi5yZdr1kP3s9LhAml-DdGNwghjwg3VkcIIY8oV3YWt1MgU --filternode=/ip4/172.18.184.225/tcp/6384/p2p/16Uiu2HAm1EA6vP7EzoMmRJVYGLKW582XT8VTEVYJVuF68W3ZWbca --pubsub-topic=/waku/2/rs/2/0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.9.88 waku 05e5c9be1528a3054ed8dd4026d14d407ca48f7e19b5a9c431fdd60bb49b8aed
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 05e5c9be1528. Setting up logs at ./log/docker/node2_2025-01-16_04-03-21__1cde4726-99bb-471f-9f26-f48db9f53f8c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 34025
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34025/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34025/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.9.88/tcp/34026/p2p/16Uiu2HAmVApWCwCcqgHg4C8oAdm3gyyuSDqotGzphNbKRS7YGoqb","/ip4/172.18.9.88/tcp/34027/ws/p2p/16Uiu2HAmVApWCwCcqgHg4C8oAdm3gyyuSDqotGzphNbKRS7YGoqb"],"enrUri":"enr:-L24QObTq16RXc26q-Mds065Es-GwKAWqAsfb9kSfzfc045NX5vGkRcSfEDRFdy51KbTtkOC2dNo1CM2Rojwez7TA_0CgmlkgnY0gmlwhKwSCViKbXVsdGlhZGRyc5YACASsEglYBoTqAAoErBIJWAaE690DgnJzhQACAQAAiXNlY3AyNTZrMaED9V9IKdEGwYGPJH8xM-PQM7da1S317WsF7TYe_cBXCMKDdGNwgoTqg3VkcIKE7IV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34025/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.184.225/tcp/6384/p2p/16Uiu2HAm1EA6vP7EzoMmRJVYGLKW582XT8VTEVYJVuF68W3ZWbca"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6383/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34025/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "e7fae0ba-2a14-4856-9b1c-30d03e837764", "contentFilters": ["/myapp/1/latest/proto"], "pubsubTopic": "/waku/2/rs/2/0"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"e7fae0ba-2a14-4856-9b1c-30d03e837764","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6383/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:186 Checking that peer NODE_2:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34025/filter/v2/messages/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1737000204410014208,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 67ea25d8078e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 05e5c9be1528
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 67ea25d8078e. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.