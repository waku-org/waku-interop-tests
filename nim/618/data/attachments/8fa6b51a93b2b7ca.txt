[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_relay_receiving_node_not_connected_directly_to_relaying_node with id: 2025-01-16_04-02-19__9ed4c085-c7a9-45a3-8a26-199d72d750ae
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-16_04-02-19__9ed4c085-c7a9-45a3-8a26-199d72d750ae__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-16_04-02-19__9ed4c085-c7a9-45a3-8a26-199d72d750ae__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2025-01-16_04-02-19__9ed4c085-c7a9-45a3-8a26-199d72d750ae__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:33 Network waku created
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.204.34
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['31266', '31267', '31268', '31269', '31270']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 31266:31266 -p 31267:31267 -p 31268:31268 -p 31269:31269 -p 31270:31270 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=31268 --rest-port=31266 --tcp-port=31267 --discv5-udp-port=31269 --rest-address=0.0.0.0 --nat=extip:172.18.204.34 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=813176e7cda2caeb1d0d8b5de20b4c17e90f25a05759cdd42f6e93fdd0d9b7ba --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=31270 --metrics-logging=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.204.34 waku e01684087eadd43f1f3ca218d2fb1395b694879166d0955e1b3da40cdd7438f8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID e01684087ead. Setting up logs at ./log/docker/node1_2025-01-16_04-02-19__9ed4c085-c7a9-45a3-8a26-199d72d750ae__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 31266
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31266/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31266/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.204.34/tcp/31267/p2p/16Uiu2HAkzhXtDJXUZsoBwcLLFd5sJN1TA6nMFNw2Va6b96edk7Vc","/ip4/172.18.204.34/tcp/31268/ws/p2p/16Uiu2HAkzhXtDJXUZsoBwcLLFd5sJN1TA6nMFNw2Va6b96edk7Vc"],"enrUri":"enr:-L24QKWZkmImCutLXiXDXgz_dRDjYpYjab0wbjhQcGuvcCclCpad0CxnEruFShRKtL58DjnhVdVYkmnF_Msd_mwZB30CgmlkgnY0gmlwhKwSzCKKbXVsdGlhZGRyc5YACASsEswiBnojAAoErBLMIgZ6JN0DgnJzhQADAQAAiXNlY3AyNTZrMaECTlqSukoed4e_7z03eMd7DwUibIfWMXRAgSc9hG4W26uDdGNwgnojg3VkcIJ6JYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.130.125
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['48292', '48293', '48294', '48295', '48296']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 48292:48292 -p 48293:48293 -p 48294:48294 -p 48295:48295 -p 48296:48296 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=48294 --rest-port=48292 --tcp-port=48293 --discv5-udp-port=48295 --rest-address=0.0.0.0 --nat=extip:172.18.130.125 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fab0ecdcabc1663abe2c9b5c626cccaa502becba2f8271ae9b8b1e9da9c96841 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=48296 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QKWZkmImCutLXiXDXgz_dRDjYpYjab0wbjhQcGuvcCclCpad0CxnEruFShRKtL58DjnhVdVYkmnF_Msd_mwZB30CgmlkgnY0gmlwhKwSzCKKbXVsdGlhZGRyc5YACASsEswiBnojAAoErBLMIgZ6JN0DgnJzhQADAQAAiXNlY3AyNTZrMaECTlqSukoed4e_7z03eMd7DwUibIfWMXRAgSc9hG4W26uDdGNwgnojg3VkcIJ6JYV3YWt1MgE
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.130.125 waku 4a2492706a34ac76d72cf8b32d1548ffdb5f9c10796129f03519cfbbe0848a8a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 4a2492706a34. Setting up logs at ./log/docker/node2_2025-01-16_04-02-19__9ed4c085-c7a9-45a3-8a26-199d72d750ae__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 48292
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48292/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48292/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.130.125/tcp/48293/p2p/16Uiu2HAmNF3i5YQwRaAeGdeAcr43QEKb3FatzRYfDpjzCHjnyAZB","/ip4/172.18.130.125/tcp/48294/ws/p2p/16Uiu2HAmNF3i5YQwRaAeGdeAcr43QEKb3FatzRYfDpjzCHjnyAZB"],"enrUri":"enr:-L24QMYXQoCiaE4q20TQ5vyXVWwJbTWH8Vew8OG_ACkcXt9yQvGc5FT4MIvC9i1SL_3clLehUoS7lJ4HjaI-PxXJHuwCgmlkgnY0gmlwhKwSgn2KbXVsdGlhZGRyc5YACASsEoJ9BrylAAoErBKCfQa8pt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDjnK6LG_Uj4IceUCB-nJReC4-0PdkXLdwamzB0FCVPt6DdGNwgrylg3VkcIK8p4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.226.225
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['56357', '56358', '56359', '56360', '56361']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 56357:56357 -p 56358:56358 -p 56359:56359 -p 56360:56360 -p 56361:56361 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56359 --rest-port=56357 --tcp-port=56358 --discv5-udp-port=56360 --rest-address=0.0.0.0 --nat=extip:172.18.226.225 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dcebcfdecbd6bd82affcbe954dd3cdcd54f70c0d44142049f177ad8f6ac01eb6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56361 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QMYXQoCiaE4q20TQ5vyXVWwJbTWH8Vew8OG_ACkcXt9yQvGc5FT4MIvC9i1SL_3clLehUoS7lJ4HjaI-PxXJHuwCgmlkgnY0gmlwhKwSgn2KbXVsdGlhZGRyc5YACASsEoJ9BrylAAoErBKCfQa8pt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDjnK6LG_Uj4IceUCB-nJReC4-0PdkXLdwamzB0FCVPt6DdGNwgrylg3VkcIK8p4V3YWt1MgE
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.226.225 waku 8eb3cfa23e88fd09445aa0fb33f66dd808302ded956f3015c498b8d540f636ab
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 8eb3cfa23e88. Setting up logs at ./log/docker/node3_2025-01-16_04-02-19__9ed4c085-c7a9-45a3-8a26-199d72d750ae__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 56357
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56357/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56357/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.226.225/tcp/56358/p2p/16Uiu2HAmJptxAi2fFgyNgSJRxhMYagq17cb3scTANAm7eMc66Jaj","/ip4/172.18.226.225/tcp/56359/ws/p2p/16Uiu2HAmJptxAi2fFgyNgSJRxhMYagq17cb3scTANAm7eMc66Jaj"],"enrUri":"enr:-L24QC6BkndAamhkY3QgkxUUPr2gJcJI30Cd7EJG85-37vf3R5IntqeDeSNvtkBlBjWmiz67pUwpZHnj2bUdjjFXKMICgmlkgnY0gmlwhKwS4uGKbXVsdGlhZGRyc5YACASsEuLhBtwmAAoErBLi4QbcJ90DgnJzhQADAQAAiXNlY3AyNTZrMaEDW6_TS9fkH_dB1hAl1rSDVIqQgVQ2MlZOCZbVndume4CDdGNwgtwmg3VkcILcKIV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31266/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48292/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56357/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31266/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.130.125/tcp/48293/p2p/16Uiu2HAmNF3i5YQwRaAeGdeAcr43QEKb3FatzRYfDpjzCHjnyAZB","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48292/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.204.34/tcp/31267/p2p/16Uiu2HAkzhXtDJXUZsoBwcLLFd5sJN1TA6nMFNw2Va6b96edk7Vc","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"},{"multiaddr":"/ip4/172.18.226.225/tcp/56358/p2p/16Uiu2HAmJptxAi2fFgyNgSJRxhMYagq17cb3scTANAm7eMc66Jaj","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56357/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.130.125/tcp/48293/p2p/16Uiu2HAmNF3i5YQwRaAeGdeAcr43QEKb3FatzRYfDpjzCHjnyAZB","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31266/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.relay:relay.py:123 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56357/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1737000174957970176,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id e01684087ead
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 4a2492706a34
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container e01684087ead. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 8eb3cfa23e88
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 4a2492706a34. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.