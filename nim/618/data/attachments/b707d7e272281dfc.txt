[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_get_message_with_extra_field with id: 2025-01-16_04-04-34__fe84c959-52cc-4078-9ebf-cebe404dd4cf
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-16_04-04-34__fe84c959-52cc-4078-9ebf-cebe404dd4cf__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.116.72
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['47816', '47817', '47818', '47819', '47820']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 47816:47816 -p 47817:47817 -p 47818:47818 -p 47819:47819 -p 47820:47820 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=47818 --rest-port=47816 --tcp-port=47817 --discv5-udp-port=47819 --rest-address=0.0.0.0 --nat=extip:172.18.116.72 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6343b8e7d0e8efaea4eabcf7b3ab129f4e9cda3cd3ad80cebd09cad9baf96fec --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=47820 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.116.72 waku 23da114bf02076491894f04c37ddb2bcea876999670404f2f4c5a801f6bcd8d5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 23da114bf020. Setting up logs at ./log/docker/node1_2025-01-16_04-04-34__fe84c959-52cc-4078-9ebf-cebe404dd4cf__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 47816
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 64e67ed0dacc. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47816/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47816/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.116.72/tcp/47817/p2p/16Uiu2HAmHFU2CjabfzRDxXdkUCznTKpaPMtq2Dx6od5XiSEcdKWx","/ip4/172.18.116.72/tcp/47818/ws/p2p/16Uiu2HAmHFU2CjabfzRDxXdkUCznTKpaPMtq2Dx6od5XiSEcdKWx"],"enrUri":"enr:-L24QLwi55E8Iy6IStIPslMhOY4_9rqpSRqPNW7ldLM0oLEECLLXGJmLCujz3qdLNcs_iLFcUjNgOEa_7jYqX1YexsECgmlkgnY0gmlwhKwSdEiKbXVsdGlhZGRyc5YACASsEnRIBrrJAAoErBJ0SAa6yt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDREPIZvK0i_lae-9KsF7xR-l07rJu2tfsalT-saiPxAGDdGNwgrrJg3VkcIK6y4V3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-16_04-04-34__fe84c959-52cc-4078-9ebf-cebe404dd4cf__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.91.116
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['1145', '1146', '1147', '1148', '1149']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 1145:1145 -p 1146:1146 -p 1147:1147 -p 1148:1148 -p 1149:1149 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=1147 --rest-port=1145 --tcp-port=1146 --discv5-udp-port=1148 --rest-address=0.0.0.0 --nat=extip:172.18.91.116 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3e7b7cefac2eedfd3e70a8f77eb8b34b2e959ffaccfa35a9a78fbc937a98538e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=1149 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QLwi55E8Iy6IStIPslMhOY4_9rqpSRqPNW7ldLM0oLEECLLXGJmLCujz3qdLNcs_iLFcUjNgOEa_7jYqX1YexsECgmlkgnY0gmlwhKwSdEiKbXVsdGlhZGRyc5YACASsEnRIBrrJAAoErBJ0SAa6yt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDREPIZvK0i_lae-9KsF7xR-l07rJu2tfsalT-saiPxAGDdGNwgrrJg3VkcIK6y4V3YWt1MgU --filternode=/ip4/172.18.116.72/tcp/47817/p2p/16Uiu2HAmHFU2CjabfzRDxXdkUCznTKpaPMtq2Dx6od5XiSEcdKWx
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.91.116 waku d82681c3bfc281b04c960596ff5919855765b26652af50c3e5117277a759d33e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID d82681c3bfc2. Setting up logs at ./log/docker/node2_2025-01-16_04-04-34__fe84c959-52cc-4078-9ebf-cebe404dd4cf__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 1145
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1145/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1145/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.91.116/tcp/1146/p2p/16Uiu2HAm6F7sujXk8sdMh474YArByRn4hMQdeiS39YY85HRrvbFT","/ip4/172.18.91.116/tcp/1147/ws/p2p/16Uiu2HAm6F7sujXk8sdMh474YArByRn4hMQdeiS39YY85HRrvbFT"],"enrUri":"enr:-L24QGmz0YU4o_56dyM2IaN8Z8z8Kvbads0QYevGLc9WfL44Dal3NaROoZJ3z8puaGtwZvoK1r2jEdITii5yDVqrOFoCgmlkgnY0gmlwhKwSW3SKbXVsdGlhZGRyc5YACASsElt0BgR6AAoErBJbdAYEe90DgnJzhQADAQAAiXNlY3AyNTZrMaECoLxzbTrpTkQPryV_NEVv_P_6VXnIJo4xnnUrR0JbimaDdGNwggR6g3VkcIIEfIV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1145/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.116.72/tcp/47817/p2p/16Uiu2HAmHFU2CjabfzRDxXdkUCznTKpaPMtq2Dx6od5XiSEcdKWx"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47816/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1145/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "3d5c0077-a450-424d-940a-c589f9d09928", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"3d5c0077-a450-424d-940a-c589f9d09928","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47816/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "extraField": "extraValue"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:47816/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 23da114bf020
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id d82681c3bfc2
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 23da114bf020. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.