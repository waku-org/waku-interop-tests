[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_unsubscribe_with_content_topic_string_instead_of_list with id: 2024-11-20_04-12-52__92bbbdd3-4f9d-42bb-bf2d-08ac64ea5198
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-20_04-12-52__92bbbdd3-4f9d-42bb-bf2d-08ac64ea5198__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.231.20
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['54503', '54504', '54505', '54506', '54507']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 54503:54503 -p 54504:54504 -p 54505:54505 -p 54506:54506 -p 54507:54507 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=54505 --rest-port=54503 --tcp-port=54504 --discv5-udp-port=54506 --rest-address=0.0.0.0 --nat=extip:172.18.231.20 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bfcd8bda81b3c802fd6a7e2acfc99224df1b5ff1ea1bd59c0d0c6fb76134b5e4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=54507 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.231.20 waku 1421aae4e787f196b417f061b830cc91ea08fb4492287951ec2a870fc3500440
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 83385c93e700. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 1421aae4e787. Setting up logs at ./log/docker/node1_2024-11-20_04-12-52__92bbbdd3-4f9d-42bb-bf2d-08ac64ea5198__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 54503
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54503/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54503/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.231.20/tcp/54504/p2p/16Uiu2HAmQCcbMnRVyt2RhVoXtfz9EC1eXPWia5e4RVZq8TF3sJGt","/ip4/172.18.231.20/tcp/54505/ws/p2p/16Uiu2HAmQCcbMnRVyt2RhVoXtfz9EC1eXPWia5e4RVZq8TF3sJGt"],"enrUri":"enr:-L24QO5DVIi1n6vU4rYbk6ji24WzuVnyavXYdZlalMrt4sxBPaQ8T0z3642eW5_94V2toeAlZZHqFELborxMnM1AqKwCgmlkgnY0gmlwhKwS5xSKbXVsdGlhZGRyc5YACASsEucUBtToAAoErBLnFAbU6d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDq4qKdxoO_JkoMcNeEizrTdeMuT5fWIGzinylBFszg62DdGNwgtTog3VkcILU6oV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-11-20_04-12-52__92bbbdd3-4f9d-42bb-bf2d-08ac64ea5198__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.157.75
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['34287', '34288', '34289', '34290', '34291']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 34287:34287 -p 34288:34288 -p 34289:34289 -p 34290:34290 -p 34291:34291 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34289 --rest-port=34287 --tcp-port=34288 --discv5-udp-port=34290 --rest-address=0.0.0.0 --nat=extip:172.18.157.75 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a6f9efbf3ae9ff556b5c560c23ff78c1911efe00d3f63fc12f18ebeacbbce8dc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34291 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QO5DVIi1n6vU4rYbk6ji24WzuVnyavXYdZlalMrt4sxBPaQ8T0z3642eW5_94V2toeAlZZHqFELborxMnM1AqKwCgmlkgnY0gmlwhKwS5xSKbXVsdGlhZGRyc5YACASsEucUBtToAAoErBLnFAbU6d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDq4qKdxoO_JkoMcNeEizrTdeMuT5fWIGzinylBFszg62DdGNwgtTog3VkcILU6oV3YWt1MgU --filternode=/ip4/172.18.231.20/tcp/54504/p2p/16Uiu2HAmQCcbMnRVyt2RhVoXtfz9EC1eXPWia5e4RVZq8TF3sJGt
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.157.75 waku 9c7630565c890ca2d8be3bd53873b5415098be2613c3fce021b8484aadfae1e3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 9c7630565c89. Setting up logs at ./log/docker/node2_2024-11-20_04-12-52__92bbbdd3-4f9d-42bb-bf2d-08ac64ea5198__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 34287
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34287/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34287/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.157.75/tcp/34288/p2p/16Uiu2HAm4EiLTYXGhbLG6CG1geS3VsjpaxbmK81Y7DTNRnfMCPPL","/ip4/172.18.157.75/tcp/34289/ws/p2p/16Uiu2HAm4EiLTYXGhbLG6CG1geS3VsjpaxbmK81Y7DTNRnfMCPPL"],"enrUri":"enr:-L24QB_ESlXULY8DnAmz-cdiy7Uc8HyKJbznshFZKRC6Q-5EdEoozFYydPVA6izDh-ZD7WW0kNt5gZ_vM5liJOqfUBwCgmlkgnY0gmlwhKwSnUuKbXVsdGlhZGRyc5YACASsEp1LBoXwAAoErBKdSwaF8d0DgnJzhQADAQAAiXNlY3AyNTZrMaECgup1LC421giaYtiHB5mDpyvzD27oo_JXjVcaTAXv_x-DdGNwgoXwg3VkcIKF8oV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34287/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.231.20/tcp/54504/p2p/16Uiu2HAmQCcbMnRVyt2RhVoXtfz9EC1eXPWia5e4RVZq8TF3sJGt"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54503/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34287/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "b83100a3-80c8-4731-8f7e-3a49318c5c51", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"b83100a3-80c8-4731-8f7e-3a49318c5c51","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X DELETE "http://127.0.0.1:34287/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": "/test/1/waku-filter/proto", "pubsubTopic": "/waku/2/rs/3/1"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:34287/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 1421aae4e787
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 9c7630565c89
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 1421aae4e787. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.