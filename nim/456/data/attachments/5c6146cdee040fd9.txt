[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_version with id: 2024-11-20_04-15-35__1c9f0a5e-c50b-44df-a11e-0dc9788d5683
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-11-20_04-15-35__1c9f0a5e-c50b-44df-a11e-0dc9788d5683__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.107.208
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['29228', '29229', '29230', '29231', '29232']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 29228:29228 -p 29229:29229 -p 29230:29230 -p 29231:29231 -p 29232:29232 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29230 --rest-port=29228 --tcp-port=29229 --discv5-udp-port=29231 --rest-address=0.0.0.0 --nat=extip:172.18.107.208 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=66b2da6a509aaef7852a9ebcc9dc68bea777ca5e21fccca6dbdab1e45bb25d60 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29232 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.107.208 waku 56e9b0403c54d20084f0109a5c6ea34590cc9109baf01c5f5e40193f6aad9914
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 56e9b0403c54. Setting up logs at ./log/docker/receiving_node1_2024-11-20_04-15-35__1c9f0a5e-c50b-44df-a11e-0dc9788d5683__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 29228
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 12f8f113d15e. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29228/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29228/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.107.208/tcp/29229/p2p/16Uiu2HAkwmPXRM6ySS2HSsuBFqHBuRSrhrKGHdNrD9pdoU7ywj6a","/ip4/172.18.107.208/tcp/29230/ws/p2p/16Uiu2HAkwmPXRM6ySS2HSsuBFqHBuRSrhrKGHdNrD9pdoU7ywj6a"],"enrUri":"enr:-L24QLXP96Wa3gOGNTVGkVysKVQvOSmpL52dg47vDGtTj1tGAoutdZi7Cck667VvlPb9pE00VLJE8fdE9gZ9UWN0n0UCgmlkgnY0gmlwhKwSa9CKbXVsdGlhZGRyc5YACASsEmvQBnItAAoErBJr0AZyLt0DgnJzhQADAQAAiXNlY3AyNTZrMaECIsRid7Xdwe9nJOPeHFmm4Apau4T1xWguoqytuGLQ8JuDdGNwgnItg3VkcIJyL4V3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-11-20_04-15-35__1c9f0a5e-c50b-44df-a11e-0dc9788d5683__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.137.51
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['53690', '53691', '53692', '53693', '53694']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 53690:53690 -p 53691:53691 -p 53692:53692 -p 53693:53693 -p 53694:53694 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=53692 --rest-port=53690 --tcp-port=53691 --discv5-udp-port=53693 --rest-address=0.0.0.0 --nat=extip:172.18.137.51 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d9ebfde1adf362b6bd3dc81082bf3cee49a944c1c9eac59e2b5cfeab91e41cd7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=53694 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.137.51 waku d88db4a9d9801c0f2f2dd6adf1072ecd042105e4b877fbfeaa6464b29d70b3ad
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID d88db4a9d980. Setting up logs at ./log/docker/receiving_node2_2024-11-20_04-15-35__1c9f0a5e-c50b-44df-a11e-0dc9788d5683__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 53690
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53690/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53690/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.137.51/tcp/53691/p2p/16Uiu2HAm5GY7BymsHhNB4JXsCeDPkuTF3zuwfojG47RDm7CEFEjZ","/ip4/172.18.137.51/tcp/53692/ws/p2p/16Uiu2HAm5GY7BymsHhNB4JXsCeDPkuTF3zuwfojG47RDm7CEFEjZ"],"enrUri":"enr:-L24QBKINbuq_W7Dw9PJKSqZtfgexFh3_pKNIhD_1zfGSUlaPsgaadrbNFtKVsEH3gln38e65jZwejDfU--2kBmnLmwCgmlkgnY0gmlwhKwSiTOKbXVsdGlhZGRyc5YACASsEokzBtG7AAoErBKJMwbRvN0DgnJzhQADAQAAiXNlY3AyNTZrMaECkj29lJnFyNtPkN-EdUDrfeEN0Z4QztRz4HlcELRpqdiDdGNwgtG7g3VkcILRvYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53690/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.107.208/tcp/29229/p2p/16Uiu2HAkwmPXRM6ySS2HSsuBFqHBuRSrhrKGHdNrD9pdoU7ywj6a"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-11-20_04-15-35__1c9f0a5e-c50b-44df-a11e-0dc9788d5683__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.201.145
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['6198', '6199', '6200', '6201', '6202']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 6198:6198 -p 6199:6199 -p 6200:6200 -p 6201:6201 -p 6202:6202 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6200 --rest-port=6198 --tcp-port=6199 --discv5-udp-port=6201 --rest-address=0.0.0.0 --nat=extip:172.18.201.145 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e05aed1a1ab01d3dbf4cca9f6a98e6d1cc110025dd9c3b815f5e098b666ae7c8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6202 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QLXP96Wa3gOGNTVGkVysKVQvOSmpL52dg47vDGtTj1tGAoutdZi7Cck667VvlPb9pE00VLJE8fdE9gZ9UWN0n0UCgmlkgnY0gmlwhKwSa9CKbXVsdGlhZGRyc5YACASsEmvQBnItAAoErBJr0AZyLt0DgnJzhQADAQAAiXNlY3AyNTZrMaECIsRid7Xdwe9nJOPeHFmm4Apau4T1xWguoqytuGLQ8JuDdGNwgnItg3VkcIJyL4V3YWt1Mgk --lightpushnode=/ip4/172.18.107.208/tcp/29229/p2p/16Uiu2HAkwmPXRM6ySS2HSsuBFqHBuRSrhrKGHdNrD9pdoU7ywj6a --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.201.145 waku da1152167110da9b10d9c9bac3fa6d49a4a01e41ab6ac344f9c9ab40b8127df4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID da1152167110. Setting up logs at ./log/docker/lightpush_node1_2024-11-20_04-15-35__1c9f0a5e-c50b-44df-a11e-0dc9788d5683__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 6198
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6198/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6198/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.201.145/tcp/6199/p2p/16Uiu2HAm2jiuTp7JpuKXos8P51wdA7uVV9RorVpRheBnFoZ6wxCP","/ip4/172.18.201.145/tcp/6200/ws/p2p/16Uiu2HAm2jiuTp7JpuKXos8P51wdA7uVV9RorVpRheBnFoZ6wxCP"],"enrUri":"enr:-L24QCuGyl6mg7P0v_tDMaX2y3tRl5SXbDC_zYVqEnfgqvnXHkEYueu0Slj63IFOn-_QveEijQsBzuhoo59it6qIiYECgmlkgnY0gmlwhKwSyZGKbXVsdGlhZGRyc5YACASsEsmRBhg3AAoErBLJkQYYON0DgnJzhQADAQAAiXNlY3AyNTZrMaECbKGSG9sxEyWO3x3Vwg3tD8iBTzm1cOU3C_vOs1_fRpCDdGNwghg3g3VkcIIYOYV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6198/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.107.208/tcp/29229/p2p/16Uiu2HAkwmPXRM6ySS2HSsuBFqHBuRSrhrKGHdNrD9pdoU7ywj6a"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6198/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.137.51/tcp/53691/p2p/16Uiu2HAm5GY7BymsHhNB4JXsCeDPkuTF3zuwfojG47RDm7CEFEjZ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29228/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53690/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6198/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1732076141838784256, "version": 2.1}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:6198/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 56e9b0403c54
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id d88db4a9d980
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 56e9b0403c54. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id da1152167110
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container d88db4a9d980. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.