[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_lightpush with id: 2024-11-20_04-02-54__2db76a0a-05e5-40e8-b5bf-21f9dafeb3fb
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-20_04-02-54__2db76a0a-05e5-40e8-b5bf-21f9dafeb3fb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.217.128
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['48622', '48623', '48624', '48625', '48626']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 48622:48622 -p 48623:48623 -p 48624:48624 -p 48625:48625 -p 48626:48626 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=48624 --rest-port=48622 --tcp-port=48623 --discv5-udp-port=48625 --rest-address=0.0.0.0 --nat=extip:172.18.217.128 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=df71dc99f5ef6bd01abca1a061c52dedc677ae21aa8bd07b59cbf1dbe301d2c4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=48626 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.217.128 waku 398ac54047a3b8abdea67392b314c1ef9866ec2ebb6914ff0ebc6b4d63ccfca2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 398ac54047a3. Setting up logs at ./log/docker/node1_2024-11-20_04-02-54__2db76a0a-05e5-40e8-b5bf-21f9dafeb3fb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 48622
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 92d4f89a0457. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48622/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48622/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.217.128/tcp/48623/p2p/16Uiu2HAmBsUNhjurJavhWLbow44i3AQdNmn3fbDeYGv7r16Ef7V9","/ip4/172.18.217.128/tcp/48624/ws/p2p/16Uiu2HAmBsUNhjurJavhWLbow44i3AQdNmn3fbDeYGv7r16Ef7V9"],"enrUri":"enr:-L24QN1laPWHtB2d0ccNBa0ZfKz50la8oqGr5ZfLJQ37JQJsNqV9VxuM9oYXyZIzdqupau7mDh44RGCBoE4wB7ZiohkCgmlkgnY0gmlwhKwS2YCKbXVsdGlhZGRyc5YACASsEtmABr3vAAoErBLZgAa98N0DgnJzhQADAQAAiXNlY3AyNTZrMaEC9Fb4VFHJ_m7U6N1Nw9cVaeL7_W3MUI5fxkXxxhk4u5iDdGNwgr3vg3VkcIK98YV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-20_04-02-54__2db76a0a-05e5-40e8-b5bf-21f9dafeb3fb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.47.171
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['23217', '23218', '23219', '23220', '23221']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 23217:23217 -p 23218:23218 -p 23219:23219 -p 23220:23220 -p 23221:23221 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23219 --rest-port=23217 --tcp-port=23218 --discv5-udp-port=23220 --rest-address=0.0.0.0 --nat=extip:172.18.47.171 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e7c45db7f462779cfaf8c5a42f902c4cdfdccd3fc00e55b6e6cce09535ccc3b5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23221 --metrics-logging=true --lightpush=false --relay=true --discv5-bootstrap-node=enr:-L24QN1laPWHtB2d0ccNBa0ZfKz50la8oqGr5ZfLJQ37JQJsNqV9VxuM9oYXyZIzdqupau7mDh44RGCBoE4wB7ZiohkCgmlkgnY0gmlwhKwS2YCKbXVsdGlhZGRyc5YACASsEtmABr3vAAoErBLZgAa98N0DgnJzhQADAQAAiXNlY3AyNTZrMaEC9Fb4VFHJ_m7U6N1Nw9cVaeL7_W3MUI5fxkXxxhk4u5iDdGNwgr3vg3VkcIK98YV3YWt1Mgk
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.47.171 waku bf79c45e271665879f076e551dfe01fade3e18f6d6bae5eb73582dfbe7f0399f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID bf79c45e2716. Setting up logs at ./log/docker/node1_2024-11-20_04-02-54__2db76a0a-05e5-40e8-b5bf-21f9dafeb3fb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 23217
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23217/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23217/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.47.171/tcp/23218/p2p/16Uiu2HAmHUr6CqZ6V6niLx1trkTWeFCaYonMyyN73feiwiDEtHm9","/ip4/172.18.47.171/tcp/23219/ws/p2p/16Uiu2HAmHUr6CqZ6V6niLx1trkTWeFCaYonMyyN73feiwiDEtHm9"],"enrUri":"enr:-L24QOOXZpnH-n9EJ8nYjcEyJSWImgi6bDNPos1YjjwStCjNb-Ha-H9TLebgJRsQdxuenmTc57_PlZAwNnrIZ_uyU4gCgmlkgnY0gmlwhKwSL6uKbXVsdGlhZGRyc5YACASsEi-rBlqyAAoErBIvqwZas90DgnJzhQADAQAAiXNlY3AyNTZrMaEDR7FJbdfT-4qMeINSPCpzYPlmbPd9Ov75rGV97hQmqciDdGNwglqyg3VkcIJatIV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-20_04-02-54__2db76a0a-05e5-40e8-b5bf-21f9dafeb3fb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.155.90
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['9757', '9758', '9759', '9760', '9761']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 9757:9757 -p 9758:9758 -p 9759:9759 -p 9760:9760 -p 9761:9761 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=9759 --rest-port=9757 --tcp-port=9758 --discv5-udp-port=9760 --rest-address=0.0.0.0 --nat=extip:172.18.155.90 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3be8ef145b5afbb0c61bae37ad82a54cff1ddb2d1ba63de7b3bdee34c6b3ec68 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=9761 --metrics-logging=true --lightpush=true --relay=false --discv5-bootstrap-node=enr:-L24QN1laPWHtB2d0ccNBa0ZfKz50la8oqGr5ZfLJQ37JQJsNqV9VxuM9oYXyZIzdqupau7mDh44RGCBoE4wB7ZiohkCgmlkgnY0gmlwhKwS2YCKbXVsdGlhZGRyc5YACASsEtmABr3vAAoErBLZgAa98N0DgnJzhQADAQAAiXNlY3AyNTZrMaEC9Fb4VFHJ_m7U6N1Nw9cVaeL7_W3MUI5fxkXxxhk4u5iDdGNwgr3vg3VkcIK98YV3YWt1Mgk --lightpushnode=/ip4/172.18.217.128/tcp/48623/p2p/16Uiu2HAmBsUNhjurJavhWLbow44i3AQdNmn3fbDeYGv7r16Ef7V9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.155.90 waku 4be50dc96f286a1b36aee5f86021b78aa7ed641df1cb191a531a5bc02c4e028f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 4be50dc96f28. Setting up logs at ./log/docker/node1_2024-11-20_04-02-54__2db76a0a-05e5-40e8-b5bf-21f9dafeb3fb__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 9757
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9757/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9757/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.155.90/tcp/9758/p2p/16Uiu2HAkwdV3TV9HaTDTrCuPfYDvBX3GGJ8xzbPEPECcnrTnLw64","/ip4/172.18.155.90/tcp/9759/ws/p2p/16Uiu2HAkwdV3TV9HaTDTrCuPfYDvBX3GGJ8xzbPEPECcnrTnLw64"],"enrUri":"enr:-L24QJOCSjRSlm05CTYxO92Rm7_f9gkX11KVtyBNil5BMvo7ek-Dqv6wW1kJBG2-20RUq0zsmEkD0Zys_jPjoDaeXXgCgmlkgnY0gmlwhKwSm1qKbXVsdGlhZGRyc5YACASsEptaBiYeAAoErBKbWgYmH90DgnJzhQADAQAAiXNlY3AyNTZrMaECIL36LQ-zVCjVFHJz8xquAdte_dAnQTRvJugr7HVaFYWDdGNwgiYeg3VkcIImIIV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48622/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23217/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9757/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": 1732075378733124096}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48622/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1732075378733124096,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23217/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1732075378733124096,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 398ac54047a3
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id bf79c45e2716
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 398ac54047a3. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 4be50dc96f28
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container bf79c45e2716. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.