[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_2_receiving_nodes__relay_node1_forwards_lightpushed_message_to_relay_node2 with id: 2024-11-20_04-13-31__155a2ed6-67d1-4407-b17b-f2480046810b
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-11-20_04-13-31__155a2ed6-67d1-4407-b17b-f2480046810b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.198.199
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['16763', '16764', '16765', '16766', '16767']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 16763:16763 -p 16764:16764 -p 16765:16765 -p 16766:16766 -p 16767:16767 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=16765 --rest-port=16763 --tcp-port=16764 --discv5-udp-port=16766 --rest-address=0.0.0.0 --nat=extip:172.18.198.199 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fa9184b37370c006ee9e7ece6d1b82b934ac675f8ce55f1caee2d7fa97df5fa0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=16767 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.198.199 waku 7fe07fef454266a35a5b669e4c664c98b6218bd46375d6fc33b4a8bb8bdc3ba3
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 169d092c2fbe. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 7fe07fef4542. Setting up logs at ./log/docker/receiving_node1_2024-11-20_04-13-31__155a2ed6-67d1-4407-b17b-f2480046810b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 16763
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16763/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16763/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.198.199/tcp/16764/p2p/16Uiu2HAmBaHm2mU6S6C7FHqraKXMKGqGtqqt5KsSsbRyMsx9t9c5","/ip4/172.18.198.199/tcp/16765/ws/p2p/16Uiu2HAmBaHm2mU6S6C7FHqraKXMKGqGtqqt5KsSsbRyMsx9t9c5"],"enrUri":"enr:-L24QIc9MWH886378GpPHQ92VGf-aQ07nFnXwx7dOEBYPUSWDMDpBYxz0agtZzLODSVd6RDcF226J_Pw5l_zwSWXG4UCgmlkgnY0gmlwhKwSxseKbXVsdGlhZGRyc5YACASsEsbHBkF8AAoErBLGxwZBfd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC7_AYBPM9qKEzc2eGurUXiOydgssXAYpi8ZvRd0SKj2qDdGNwgkF8g3VkcIJBfoV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-11-20_04-13-31__155a2ed6-67d1-4407-b17b-f2480046810b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.192.184
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['60195', '60196', '60197', '60198', '60199']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 60195:60195 -p 60196:60196 -p 60197:60197 -p 60198:60198 -p 60199:60199 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=60197 --rest-port=60195 --tcp-port=60196 --discv5-udp-port=60198 --rest-address=0.0.0.0 --nat=extip:172.18.192.184 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=963b455cc4ba7f320e67a8bff561cd9cbb5fc19d50b6d2c7cf269f16a480d61e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=60199 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.192.184 waku 5d068236682a25d8ae087a15178dc71b5cab0a3c6172b5dfaea04b92ecda56b9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 5d068236682a. Setting up logs at ./log/docker/receiving_node2_2024-11-20_04-13-31__155a2ed6-67d1-4407-b17b-f2480046810b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 60195
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60195/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60195/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.192.184/tcp/60196/p2p/16Uiu2HAmB5TvU3stVwPsxCPfURC7LN7ftUASxcjMNYjxEKjZgtqM","/ip4/172.18.192.184/tcp/60197/ws/p2p/16Uiu2HAmB5TvU3stVwPsxCPfURC7LN7ftUASxcjMNYjxEKjZgtqM"],"enrUri":"enr:-L24QNrIWq0PKLqNaNP6WBfA0oZZlU6fXJrHxjTm0M4CJLdQSjIXrmkeoQH1J3LVzm5J8xzZCCzEoa_176D5tUsPhBICgmlkgnY0gmlwhKwSwLiKbXVsdGlhZGRyc5YACASsEsC4BuskAAoErBLAuAbrJd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC6I29ySUqjQIph4hD6N56QUl48fHySnUEBJTh91KXC3iDdGNwguskg3VkcILrJoV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60195/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.198.199/tcp/16764/p2p/16Uiu2HAmBaHm2mU6S6C7FHqraKXMKGqGtqqt5KsSsbRyMsx9t9c5"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-11-20_04-13-31__155a2ed6-67d1-4407-b17b-f2480046810b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.245.197
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['9139', '9140', '9141', '9142', '9143']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 9139:9139 -p 9140:9140 -p 9141:9141 -p 9142:9142 -p 9143:9143 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=9141 --rest-port=9139 --tcp-port=9140 --discv5-udp-port=9142 --rest-address=0.0.0.0 --nat=extip:172.18.245.197 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3cf0abee2d136b7fcefcdff3cbce4e730ae26ea14ffc8b702dfeb39b6f518f1e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=9143 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QIc9MWH886378GpPHQ92VGf-aQ07nFnXwx7dOEBYPUSWDMDpBYxz0agtZzLODSVd6RDcF226J_Pw5l_zwSWXG4UCgmlkgnY0gmlwhKwSxseKbXVsdGlhZGRyc5YACASsEsbHBkF8AAoErBLGxwZBfd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC7_AYBPM9qKEzc2eGurUXiOydgssXAYpi8ZvRd0SKj2qDdGNwgkF8g3VkcIJBfoV3YWt1Mgk --lightpushnode=/ip4/172.18.198.199/tcp/16764/p2p/16Uiu2HAmBaHm2mU6S6C7FHqraKXMKGqGtqqt5KsSsbRyMsx9t9c5 --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.245.197 waku 86f762f4ee4b10dbbedb26432dc2f4898127468d17c0d6b53830d6b34153b8c1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 86f762f4ee4b. Setting up logs at ./log/docker/lightpush_node1_2024-11-20_04-13-31__155a2ed6-67d1-4407-b17b-f2480046810b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 9139
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9139/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9139/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.245.197/tcp/9140/p2p/16Uiu2HAmSC1rUzRRXSbVuRE89mmZZ76GXDp7ppGkMsHfo8YgqZWP","/ip4/172.18.245.197/tcp/9141/ws/p2p/16Uiu2HAmSC1rUzRRXSbVuRE89mmZZ76GXDp7ppGkMsHfo8YgqZWP"],"enrUri":"enr:-L24QOFLQDhrPsiKdlKAZF8IACWIUgPOFcJzeG7PHuyiy2cESXRmEt8SXdiWpdAqFySPIphU6Mg0HGUyyYD_b4ZPpgMCgmlkgnY0gmlwhKwS9cWKbXVsdGlhZGRyc5YACASsEvXFBiO0AAoErBL1xQYjtd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDyRqijDiGUweI09NXd9xxl0RDPE-0gpxPNWzN4dPcGziDdGNwgiO0g3VkcIIjtoV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9139/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.198.199/tcp/16764/p2p/16Uiu2HAmBaHm2mU6S6C7FHqraKXMKGqGtqqt5KsSsbRyMsx9t9c5"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9139/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.192.184/tcp/60196/p2p/16Uiu2HAmB5TvU3stVwPsxCPfURC7LN7ftUASxcjMNYjxEKjZgtqM"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16763/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60195/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9139/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1732076017259839488}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16763/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1732076017259839488,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60195/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1732076017259839488,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 7fe07fef4542
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 5d068236682a
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 7fe07fef4542. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 86f762f4ee4b
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 5d068236682a. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.