[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_msg_stored_when_ephemeral_false with id: 2025-01-17_11-05-40__e9ed27b9-8385-4742-8d41-e7f595358a19
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3244
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-17_11-05-40__e9ed27b9-8385-4742-8d41-e7f595358a19__quay.io_wakuorg_nwaku-pr:3244.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3244
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-17_11-05-40__e9ed27b9-8385-4742-8d41-e7f595358a19__quay.io_wakuorg_nwaku-pr:3244.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3244
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2025-01-17_11-05-40__e9ed27b9-8385-4742-8d41-e7f595358a19__quay.io_wakuorg_nwaku-pr:3244.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:414 Start 3 nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.139.195
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['53526', '53527', '53528', '53529', '53530']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 53526:53526 -p 53527:53527 -p 53528:53528 -p 53529:53529 -p 53530:53530 quay.io/wakuorg/nwaku-pr:3244 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=53528 --rest-port=53526 --tcp-port=53527 --discv5-udp-port=53529 --rest-address=0.0.0.0 --nat=extip:172.18.139.195 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=227aacf8dbb4fef88d07e211dfbba7ad3878eaf6cbc5f9eb6acea28ede90ea2c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=53530 --metrics-logging=true --relay=true --store=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.139.195 waku daf1553d8eb786c500fb8dcf9c109c6a460c5d7d707b3870e8808a5b4602fcec
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID daf1553d8eb7. Setting up logs at ./log/docker/node1_2025-01-17_11-05-40__e9ed27b9-8385-4742-8d41-e7f595358a19__quay.io_wakuorg_nwaku-pr:3244.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3244. REST: 53526
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 9a9b5ed7ce75. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53526/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53526/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.139.195/tcp/53527/p2p/16Uiu2HAmB8wVKWskvKiqhKoLaq4TttnDEojz1XkpDLJNp4rjZ3FJ","/ip4/172.18.139.195/tcp/53528/ws/p2p/16Uiu2HAmB8wVKWskvKiqhKoLaq4TttnDEojz1XkpDLJNp4rjZ3FJ"],"enrUri":"enr:-L24QBjMX2IRG_-bX0Z4_HHtFGFUtyqUv8Z8z2DALixMRAqqCQ4EOSJNvqTnA8CiNAUApVgTFFdZt3G9aKQnI5p9yKECgmlkgnY0gmlwhKwSi8OKbXVsdGlhZGRyc5YACASsEovDBtEXAAoErBKLwwbRGN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC6XGnOpdjw9sf9cv917aZAffusYHr2lC6P-PQLohndgWDdGNwgtEXg3VkcILRGYV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.19.16
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['2712', '2713', '2714', '2715', '2716']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 2712:2712 -p 2713:2713 -p 2714:2714 -p 2715:2715 -p 2716:2716 quay.io/wakuorg/nwaku-pr:3244 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2714 --rest-port=2712 --tcp-port=2713 --discv5-udp-port=2715 --rest-address=0.0.0.0 --nat=extip:172.18.19.16 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4b3ed95d5ffa4cac8f84d9b5f644a0a4aa2baa72f5aafbfe984c0ddb75c353fb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2716 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-L24QBjMX2IRG_-bX0Z4_HHtFGFUtyqUv8Z8z2DALixMRAqqCQ4EOSJNvqTnA8CiNAUApVgTFFdZt3G9aKQnI5p9yKECgmlkgnY0gmlwhKwSi8OKbXVsdGlhZGRyc5YACASsEovDBtEXAAoErBKLwwbRGN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC6XGnOpdjw9sf9cv917aZAffusYHr2lC6P-PQLohndgWDdGNwgtEXg3VkcILRGYV3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.19.16 waku 51913852c16b3642c48b8468312048e67016c85d6be810340387889a8bf4269d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 51913852c16b. Setting up logs at ./log/docker/node2_2025-01-17_11-05-40__e9ed27b9-8385-4742-8d41-e7f595358a19__quay.io_wakuorg_nwaku-pr:3244.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3244. REST: 2712
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2712/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2712/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.19.16/tcp/2713/p2p/16Uiu2HAmCDS5dpQyYfzYHrj34ztSZ32suvtBpMRFXkCkdbbDr5Qt","/ip4/172.18.19.16/tcp/2714/ws/p2p/16Uiu2HAmCDS5dpQyYfzYHrj34ztSZ32suvtBpMRFXkCkdbbDr5Qt"],"enrUri":"enr:-L24QHqJghM5OOlWR6VBJO0jMPNdL-vr47xcrqx-opojaZZjRSBMEHN8GETQGe1y1y_9yV_zMPFsE6uRugW89tEi7jgCgmlkgnY0gmlwhKwSExCKbXVsdGlhZGRyc5YACASsEhMQBgqZAAoErBITEAYKmt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC-XP9-OpK16zvIzI0AHo_E5kSRnr39dqYmXcUVfZuSyGDdGNwggqZg3VkcIIKm4V3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.114.60
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['24954', '24955', '24956', '24957', '24958']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 24954:24954 -p 24955:24955 -p 24956:24956 -p 24957:24957 -p 24958:24958 quay.io/wakuorg/nwaku-pr:3244 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=24956 --rest-port=24954 --tcp-port=24955 --discv5-udp-port=24957 --rest-address=0.0.0.0 --nat=extip:172.18.114.60 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d1789eece9b41f7083c4c13dc9ed9e39239ca1daebded161cdb4ec5aff1afba7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=24958 --metrics-logging=true --relay=false --storenode=/ip4/172.18.19.16/tcp/2713/p2p/16Uiu2HAmCDS5dpQyYfzYHrj34ztSZ32suvtBpMRFXkCkdbbDr5Qt --discv5-bootstrap-node=enr:-L24QHqJghM5OOlWR6VBJO0jMPNdL-vr47xcrqx-opojaZZjRSBMEHN8GETQGe1y1y_9yV_zMPFsE6uRugW89tEi7jgCgmlkgnY0gmlwhKwSExCKbXVsdGlhZGRyc5YACASsEhMQBgqZAAoErBITEAYKmt0DgnJzhQADAQAAiXNlY3AyNTZrMaEC-XP9-OpK16zvIzI0AHo_E5kSRnr39dqYmXcUVfZuSyGDdGNwggqZg3VkcIIKm4V3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.114.60 waku e95c648f8476b9e82417d53462e6b9b3f0502d44169f64b3bf9beec0172afb5d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID e95c648f8476. Setting up logs at ./log/docker/node3_2025-01-17_11-05-40__e9ed27b9-8385-4742-8d41-e7f595358a19__quay.io_wakuorg_nwaku-pr:3244.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3244. REST: 24954
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24954/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24954/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.114.60/tcp/24955/p2p/16Uiu2HAmQ5gPtgGKrFxQK9d2nAC9CionxXKcF88pQUaRByAA45T1","/ip4/172.18.114.60/tcp/24956/ws/p2p/16Uiu2HAmQ5gPtgGKrFxQK9d2nAC9CionxXKcF88pQUaRByAA45T1"],"enrUri":"enr:-L24QLe7sejwlOYLnOAgLnbVEvp616n4UYs3zwhcBVecJ9aUCeZDnj9iX9fqF9A6StsKFyTpZlGLns2EQr0m2MH2geECgmlkgnY0gmlwhKwScjyKbXVsdGlhZGRyc5YACASsEnI8BmF7AAoErBJyPAZhfN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDqcPGRBAomGkIusLY4l69jcuSY8gbgKqnmb-gtqDZ7hyDdGNwgmF7g3VkcIJhfYV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:419 Subscribe node1 ,2 to pubtopic /waku/2/rs/3/1
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53526/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2712/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53526/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.19.16/tcp/2713/p2p/16Uiu2HAmCDS5dpQyYfzYHrj34ztSZ32suvtBpMRFXkCkdbbDr5Qt","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2712/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.139.195/tcp/53527/p2p/16Uiu2HAmB8wVKWskvKiqhKoLaq4TttnDEojz1XkpDLJNp4rjZ3FJ","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:424 Node1 publish message with ephemeral = false
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53526/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "ephemeral": false}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 3 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:428 Check if message is stored 
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer quay.io/wakuorg/nwaku-pr:3244 can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24954/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"a7a1190d8778d6ef02c1","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"3YY7ed9ihdCZaW5PRJMNbOWpcQXbZwyfR0L/AUXlwjU="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id daf1553d8eb7
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 51913852c16b
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container daf1553d8eb7. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id e95c648f8476
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 51913852c16b. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.