[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_lightpush with id: 2025-01-31_15-42-29__96e16841-8492-4dae-90e8-917c711a1485
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3267
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-31_15-42-29__96e16841-8492-4dae-90e8-917c711a1485__quay.io_wakuorg_nwaku-pr:3267.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.162.96
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['33773', '33774', '33775', '33776', '33777']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 33773:33773 -p 33774:33774 -p 33775:33775 -p 33776:33776 -p 33777:33777 quay.io/wakuorg/nwaku-pr:3267 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=33775 --rest-port=33773 --tcp-port=33774 --discv5-udp-port=33776 --rest-address=0.0.0.0 --nat=extip:172.18.162.96 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4b3e1bf8ebdd60448b6bddf8985d9b4a21cb4c728b2acd44561b1be1ecb3b7b8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=33777 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.162.96 waku 86ffbab2f3911f3146d2e749c5d991ab9c6bf49d4e4f714a32454781e7fb94a6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 86ffbab2f391. Setting up logs at ./log/docker/node1_2025-01-31_15-42-29__96e16841-8492-4dae-90e8-917c711a1485__quay.io_wakuorg_nwaku-pr:3267.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3267. REST: 33773
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container cffc0f75e28a. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33773/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33773/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.162.96/tcp/33774/p2p/16Uiu2HAmTDjNpgDrNJUrYmrbXsySPeNkZYteCGkM1cMz7abbD6XJ","/ip4/172.18.162.96/tcp/33775/ws/p2p/16Uiu2HAmTDjNpgDrNJUrYmrbXsySPeNkZYteCGkM1cMz7abbD6XJ"],"enrUri":"enr:-L24QFYFUdxmhb2eF6LAKKyJwTJdooSmNl99dKc4_bJRMnplDt9Kfv30mOj9OqBgXas1_fK1QGWbd2YqjF0INt3fyTUCgmlkgnY0gmlwhKwSomCKbXVsdGlhZGRyc5YACASsEqJgBoPuAAoErBKiYAaD790DgnJzhQADAQAAiXNlY3AyNTZrMaED2GbaXiMioOODuQTdaVA8a3RC-0vBIQqMlt9cbKwROBGDdGNwgoPug3VkcIKD8IV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3267
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-31_15-42-29__96e16841-8492-4dae-90e8-917c711a1485__quay.io_wakuorg_nwaku-pr:3267.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.189.148
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['44412', '44413', '44414', '44415', '44416']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 44412:44412 -p 44413:44413 -p 44414:44414 -p 44415:44415 -p 44416:44416 quay.io/wakuorg/nwaku-pr:3267 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44414 --rest-port=44412 --tcp-port=44413 --discv5-udp-port=44415 --rest-address=0.0.0.0 --nat=extip:172.18.189.148 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5c2e462b06adcc9912dadf073ff6c6191a5ca627fcbc88b6a3bccfcfccefa8ec --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44416 --metrics-logging=true --lightpush=false --relay=true --discv5-bootstrap-node=enr:-L24QFYFUdxmhb2eF6LAKKyJwTJdooSmNl99dKc4_bJRMnplDt9Kfv30mOj9OqBgXas1_fK1QGWbd2YqjF0INt3fyTUCgmlkgnY0gmlwhKwSomCKbXVsdGlhZGRyc5YACASsEqJgBoPuAAoErBKiYAaD790DgnJzhQADAQAAiXNlY3AyNTZrMaED2GbaXiMioOODuQTdaVA8a3RC-0vBIQqMlt9cbKwROBGDdGNwgoPug3VkcIKD8IV3YWt1Mgk
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.189.148 waku 6d617856a39b86bccf03f9e8fdad8cd029a218a6d154183dd1e92bf54a85b473
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 6d617856a39b. Setting up logs at ./log/docker/node1_2025-01-31_15-42-29__96e16841-8492-4dae-90e8-917c711a1485__quay.io_wakuorg_nwaku-pr:3267.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3267. REST: 44412
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44412/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44412/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.189.148/tcp/44413/p2p/16Uiu2HAkzjUaCHs3TwQRK2HUQjdvqrdwTXqU8n3d8KHucAR35UkR","/ip4/172.18.189.148/tcp/44414/ws/p2p/16Uiu2HAkzjUaCHs3TwQRK2HUQjdvqrdwTXqU8n3d8KHucAR35UkR"],"enrUri":"enr:-L24QOZ4Y1GSeRWTdCLkJbvB5nIGTrBFpQoCwE0yAgDcxNdQa6KvezYGUD81eDY3RW3yW8LbOwHlqaRSHJHoBXTGcVACgmlkgnY0gmlwhKwSvZSKbXVsdGlhZGRyc5YACASsEr2UBq19AAoErBK9lAatft0DgnJzhQADAQAAiXNlY3AyNTZrMaECTtn9zVXGXXgq3BctJ4Cz1hMRSJa0N2IHQhRhgofZkiKDdGNwgq19g3VkcIKtf4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3267
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-31_15-42-29__96e16841-8492-4dae-90e8-917c711a1485__quay.io_wakuorg_nwaku-pr:3267.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.121.141
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['21006', '21007', '21008', '21009', '21010']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 21006:21006 -p 21007:21007 -p 21008:21008 -p 21009:21009 -p 21010:21010 quay.io/wakuorg/nwaku-pr:3267 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=21008 --rest-port=21006 --tcp-port=21007 --discv5-udp-port=21009 --rest-address=0.0.0.0 --nat=extip:172.18.121.141 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5f3cfda6b997f3e3b7a1ea831ff1ffbccaaaa95a8a2efb4fca2a62ae751a69ea --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=21010 --metrics-logging=true --lightpush=true --relay=false --discv5-bootstrap-node=enr:-L24QFYFUdxmhb2eF6LAKKyJwTJdooSmNl99dKc4_bJRMnplDt9Kfv30mOj9OqBgXas1_fK1QGWbd2YqjF0INt3fyTUCgmlkgnY0gmlwhKwSomCKbXVsdGlhZGRyc5YACASsEqJgBoPuAAoErBKiYAaD790DgnJzhQADAQAAiXNlY3AyNTZrMaED2GbaXiMioOODuQTdaVA8a3RC-0vBIQqMlt9cbKwROBGDdGNwgoPug3VkcIKD8IV3YWt1Mgk --lightpushnode=/ip4/172.18.162.96/tcp/33774/p2p/16Uiu2HAmTDjNpgDrNJUrYmrbXsySPeNkZYteCGkM1cMz7abbD6XJ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.121.141 waku 1f6fa4b66616a20d30eeeb80bde2a70823fd8ddf3792aab1d0e58e7c453888bc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 1f6fa4b66616. Setting up logs at ./log/docker/node1_2025-01-31_15-42-29__96e16841-8492-4dae-90e8-917c711a1485__quay.io_wakuorg_nwaku-pr:3267.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3267. REST: 21006
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21006/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21006/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.121.141/tcp/21007/p2p/16Uiu2HAm5Tf9MyRMJbjxt88DCWWbp3vpXP1nAYcTnXX9o8Eu2pS4","/ip4/172.18.121.141/tcp/21008/ws/p2p/16Uiu2HAm5Tf9MyRMJbjxt88DCWWbp3vpXP1nAYcTnXX9o8Eu2pS4"],"enrUri":"enr:-L24QJ_KwC92c_JbqVqg2GawI_sA2HE_liwJ2L81uDhoKuzbRQ1p49qWAfpSGAZ5CzHtkoCanuBHhwrgOyKnxFcmiLMCgmlkgnY0gmlwhKwSeY2KbXVsdGlhZGRyc5YACASsEnmNBlIPAAoErBJ5jQZSEN0DgnJzhQADAQAAiXNlY3AyNTZrMaEClRcWM3VXhxyWBDEe52MxAUptFyZfHdzJuRC1HBjITJGDdGNwglIPg3VkcIJSEYV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33773/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44412/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21006/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": 1738338153458826496}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:quay.io/wakuorg/nwaku-pr:3267 can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33773/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738338153458826496,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:quay.io/wakuorg/nwaku-pr:3267 can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44412/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738338153458826496,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 86ffbab2f391
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 6d617856a39b
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 86ffbab2f391. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 1f6fa4b66616
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 6d617856a39b. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.