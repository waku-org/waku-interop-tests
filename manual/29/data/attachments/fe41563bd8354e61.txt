[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_pubsub_topics with id: 2025-01-31_15-43-58__2b98516b-30f3-4a8d-8b2e-e9340da1cd7a
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3267
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-01-31_15-43-58__2b98516b-30f3-4a8d-8b2e-e9340da1cd7a__quay.io_wakuorg_nwaku-pr:3267.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.167.186
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['51219', '51220', '51221', '51222', '51223']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 51219:51219 -p 51220:51220 -p 51221:51221 -p 51222:51222 -p 51223:51223 quay.io/wakuorg/nwaku-pr:3267 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=51221 --rest-port=51219 --tcp-port=51220 --discv5-udp-port=51222 --rest-address=0.0.0.0 --nat=extip:172.18.167.186 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d11c665abd94f5c9dea7ec88bdfc44f81dac6125bcebebc4adc07b2da5bb5673 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=51223 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.167.186 waku e7b411f7a2196db045da45c180e8aba96eb6448707e4a3e1f706240d5b7ef9c0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID e7b411f7a219. Setting up logs at ./log/docker/receiving_node1_2025-01-31_15-43-58__2b98516b-30f3-4a8d-8b2e-e9340da1cd7a__quay.io_wakuorg_nwaku-pr:3267.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3267. REST: 51219
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container c74e15a5e5db. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51219/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51219/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.167.186/tcp/51220/p2p/16Uiu2HAmAchkQmrAPfG1we5aYS4Z3pA3yryYpFq7bkvx23sbWcVc","/ip4/172.18.167.186/tcp/51221/ws/p2p/16Uiu2HAmAchkQmrAPfG1we5aYS4Z3pA3yryYpFq7bkvx23sbWcVc"],"enrUri":"enr:-L24QNTFis2v3vAEEgLPSXLabAzGmq00WTXjaI0yM9JqJ_Q8cDZ81NbWNhB6Nk9icFkPYMoacRRhEmvxsrBU4rL_ZSYCgmlkgnY0gmlwhKwSp7qKbXVsdGlhZGRyc5YACASsEqe6BsgUAAoErBKnugbIFd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC4bKxfHy3hGJiakN8vxbaIJsuMMsUocE_AaMDKs9eqk-DdGNwgsgUg3VkcILIFoV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3267
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-01-31_15-43-58__2b98516b-30f3-4a8d-8b2e-e9340da1cd7a__quay.io_wakuorg_nwaku-pr:3267.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.212.37
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['31482', '31483', '31484', '31485', '31486']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 31482:31482 -p 31483:31483 -p 31484:31484 -p 31485:31485 -p 31486:31486 quay.io/wakuorg/nwaku-pr:3267 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=31484 --rest-port=31482 --tcp-port=31483 --discv5-udp-port=31485 --rest-address=0.0.0.0 --nat=extip:172.18.212.37 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=796c65ceb8eecd8b58dcccab933f6ea2e22febda339aec1cd7d4dd6afdd54627 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=31486 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.212.37 waku 63e1d283cedebabb677e40dc87378f832267ef0890e4e8d77c4ca36668d9ed53
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 63e1d283cede. Setting up logs at ./log/docker/receiving_node2_2025-01-31_15-43-58__2b98516b-30f3-4a8d-8b2e-e9340da1cd7a__quay.io_wakuorg_nwaku-pr:3267.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3267. REST: 31482
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31482/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31482/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.212.37/tcp/31483/p2p/16Uiu2HAmMGsHz7SjPwaWfqDXfhqLRppbBfjfLqsqSmrsRufncDJ3","/ip4/172.18.212.37/tcp/31484/ws/p2p/16Uiu2HAmMGsHz7SjPwaWfqDXfhqLRppbBfjfLqsqSmrsRufncDJ3"],"enrUri":"enr:-L24QMwgmpknXMJBFoE6nssmn9rgCivfRi1-Br3TjvXFa4vqDwYqWxL2SCA3fh0_MbjByjrEDbjzNRjRb22Y1koZjEICgmlkgnY0gmlwhKwS1CWKbXVsdGlhZGRyc5YACASsEtQlBnr7AAoErBLUJQZ6_N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDgA5s2X3MABaaCRZb23f_peHcenmc_YE-F1chW2hAm5SDdGNwgnr7g3VkcIJ6_YV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31482/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.167.186/tcp/51220/p2p/16Uiu2HAmAchkQmrAPfG1we5aYS4Z3pA3yryYpFq7bkvx23sbWcVc"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3267
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-01-31_15-43-58__2b98516b-30f3-4a8d-8b2e-e9340da1cd7a__quay.io_wakuorg_nwaku-pr:3267.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.163.52
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['32320', '32321', '32322', '32323', '32324']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 32320:32320 -p 32321:32321 -p 32322:32322 -p 32323:32323 -p 32324:32324 quay.io/wakuorg/nwaku-pr:3267 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32322 --rest-port=32320 --tcp-port=32321 --discv5-udp-port=32323 --rest-address=0.0.0.0 --nat=extip:172.18.163.52 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=36ecccccc2f9cf131fe5dcb19f0c1a3908125c73fe5dfecf0c7bbefad56bbb0e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32324 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QNTFis2v3vAEEgLPSXLabAzGmq00WTXjaI0yM9JqJ_Q8cDZ81NbWNhB6Nk9icFkPYMoacRRhEmvxsrBU4rL_ZSYCgmlkgnY0gmlwhKwSp7qKbXVsdGlhZGRyc5YACASsEqe6BsgUAAoErBKnugbIFd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC4bKxfHy3hGJiakN8vxbaIJsuMMsUocE_AaMDKs9eqk-DdGNwgsgUg3VkcILIFoV3YWt1Mgk --lightpushnode=/ip4/172.18.167.186/tcp/51220/p2p/16Uiu2HAmAchkQmrAPfG1we5aYS4Z3pA3yryYpFq7bkvx23sbWcVc --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.163.52 waku d3edfcf1d58ed145e42fd8030dd68f4b731d3e86995398c5d360e96c8d7cbcec
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID d3edfcf1d58e. Setting up logs at ./log/docker/lightpush_node1_2025-01-31_15-43-58__2b98516b-30f3-4a8d-8b2e-e9340da1cd7a__quay.io_wakuorg_nwaku-pr:3267.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3267. REST: 32320
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32320/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32320/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.163.52/tcp/32321/p2p/16Uiu2HAm5MkFZCpKTjSijXBoXVGuEDbGdF7BrRoWYDhgSFiGSwPJ","/ip4/172.18.163.52/tcp/32322/ws/p2p/16Uiu2HAm5MkFZCpKTjSijXBoXVGuEDbGdF7BrRoWYDhgSFiGSwPJ"],"enrUri":"enr:-L24QDCsYrHLK4CZ6d-DoY1FHWgikDNtBQ8NHnNxGGCuemk5S1l4VdCta7Y9yTrkgoUnnKatRU3v29Mx0tfN8GZdMMsCgmlkgnY0gmlwhKwSozSKbXVsdGlhZGRyc5YACASsEqM0Bn5BAAoErBKjNAZ-Qt0DgnJzhQADAQAAiXNlY3AyNTZrMaECk5NgShdcWG9cIZqCCWCwwSSIxilmw10D-M_FPM6O4B2DdGNwgn5Bg3VkcIJ-Q4V3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32320/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.167.186/tcp/51220/p2p/16Uiu2HAmAchkQmrAPfG1we5aYS4Z3pA3yryYpFq7bkvx23sbWcVc"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32320/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.212.37/tcp/31483/p2p/16Uiu2HAmMGsHz7SjPwaWfqDXfhqLRppbBfjfLqsqSmrsRufncDJ3"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51219/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31482/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A dictionary', 'value': {'key': 'YWFh'}}
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32320/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": {"key": "YWFh"}, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738338242549672192}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:32320/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'An integer', 'value': 1234567890}
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32320/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": 1234567890, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738338242554641408}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:32320/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A list', 'value': ['YWFh']}
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32320/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": ["YWFh"], "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738338242558735360}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:32320/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A bool', 'value': True}
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32320/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": true, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738338242562757120}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:32320/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id e7b411f7a219
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 63e1d283cede
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container e7b411f7a219. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id d3edfcf1d58e
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 63e1d283cede. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.