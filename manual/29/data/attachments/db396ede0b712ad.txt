[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_content_topics with id: 2025-01-31_15-42-42__9a9c0da3-3b20-4c3c-8c55-1c10c155f1d7
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3267
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-01-31_15-42-42__9a9c0da3-3b20-4c3c-8c55-1c10c155f1d7__quay.io_wakuorg_nwaku-pr:3267.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.31.249
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['65008', '65009', '65010', '65011', '65012']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 65008:65008 -p 65009:65009 -p 65010:65010 -p 65011:65011 -p 65012:65012 quay.io/wakuorg/nwaku-pr:3267 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=65010 --rest-port=65008 --tcp-port=65009 --discv5-udp-port=65011 --rest-address=0.0.0.0 --nat=extip:172.18.31.249 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6542d20d07c354fffaceb5e1dcd798ea4ed1dabded3bb0da8c1efed3d2ee351d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=65012 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.31.249 waku c00b8e7ba92bd630e607dd9ab41d730a824cd1fa0a81df95eda75a3f4e5d25fe
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID c00b8e7ba92b. Setting up logs at ./log/docker/receiving_node1_2025-01-31_15-42-42__9a9c0da3-3b20-4c3c-8c55-1c10c155f1d7__quay.io_wakuorg_nwaku-pr:3267.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3267. REST: 65008
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 98378faf697f. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:65008/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:65008/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.31.249/tcp/65009/p2p/16Uiu2HAkzYEP5vapfmdGC8C8efQZuc1gTSm4i4PvJEwijkJnKzaK","/ip4/172.18.31.249/tcp/65010/ws/p2p/16Uiu2HAkzYEP5vapfmdGC8C8efQZuc1gTSm4i4PvJEwijkJnKzaK"],"enrUri":"enr:-L24QH_0bFQ1og-BtEfqEorrJco_wuFzofaXmJq5NPWsi96hNIfKjZvq2WPrsAhSIepFBb4UJmU2RxK8NcuduedwhYECgmlkgnY0gmlwhKwSH_mKbXVsdGlhZGRyc5YACASsEh_5Bv3xAAoErBIf-Qb98t0DgnJzhQADAQAAiXNlY3AyNTZrMaECS_iOW0depv0mPFsjU78oQrzIDA84Z47bMpkmM9bGvZCDdGNwgv3xg3VkcIL984V3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3267
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-01-31_15-42-42__9a9c0da3-3b20-4c3c-8c55-1c10c155f1d7__quay.io_wakuorg_nwaku-pr:3267.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.165.215
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['26380', '26381', '26382', '26383', '26384']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 26380:26380 -p 26381:26381 -p 26382:26382 -p 26383:26383 -p 26384:26384 quay.io/wakuorg/nwaku-pr:3267 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26382 --rest-port=26380 --tcp-port=26381 --discv5-udp-port=26383 --rest-address=0.0.0.0 --nat=extip:172.18.165.215 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bfd2a78d5cabf2fbdebd6bec6ea4e194ba7df78e0a791bc8ffe1eaebfaf4dbd8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26384 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.165.215 waku 0235252371f7434821c58bebebcb44bd66b232f85da4893a35c12933537309ae
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 0235252371f7. Setting up logs at ./log/docker/receiving_node2_2025-01-31_15-42-42__9a9c0da3-3b20-4c3c-8c55-1c10c155f1d7__quay.io_wakuorg_nwaku-pr:3267.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3267. REST: 26380
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26380/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26380/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.165.215/tcp/26381/p2p/16Uiu2HAmS4GudvYWVLoJSWqdH2apYzSsbGksgHyHhDRvpC3JHHnA","/ip4/172.18.165.215/tcp/26382/ws/p2p/16Uiu2HAmS4GudvYWVLoJSWqdH2apYzSsbGksgHyHhDRvpC3JHHnA"],"enrUri":"enr:-L24QHo4Z2LfYTA-UIyGAwbZOfT7BymwUNQg5Ee5gQ8b_gEgOE5A9HtPXPSWCKGv4SWT7rp7FE4Gn2qdOcGXtEhcbfkCgmlkgnY0gmlwhKwSpdeKbXVsdGlhZGRyc5YACASsEqXXBmcNAAoErBKl1wZnDt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDxx8CsX5W3mKZazyuNdzhsuLVjjK4aPW6mhj61E-zj4uDdGNwgmcNg3VkcIJnD4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26380/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.31.249/tcp/65009/p2p/16Uiu2HAkzYEP5vapfmdGC8C8efQZuc1gTSm4i4PvJEwijkJnKzaK"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3267
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-01-31_15-42-42__9a9c0da3-3b20-4c3c-8c55-1c10c155f1d7__quay.io_wakuorg_nwaku-pr:3267.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.179.202
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['7310', '7311', '7312', '7313', '7314']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 7310:7310 -p 7311:7311 -p 7312:7312 -p 7313:7313 -p 7314:7314 quay.io/wakuorg/nwaku-pr:3267 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7312 --rest-port=7310 --tcp-port=7311 --discv5-udp-port=7313 --rest-address=0.0.0.0 --nat=extip:172.18.179.202 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=849b29179c31bfe6a8b717821cecfa5adf5ff5a3faaae4f55dbe8c323399ab13 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7314 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QH_0bFQ1og-BtEfqEorrJco_wuFzofaXmJq5NPWsi96hNIfKjZvq2WPrsAhSIepFBb4UJmU2RxK8NcuduedwhYECgmlkgnY0gmlwhKwSH_mKbXVsdGlhZGRyc5YACASsEh_5Bv3xAAoErBIf-Qb98t0DgnJzhQADAQAAiXNlY3AyNTZrMaECS_iOW0depv0mPFsjU78oQrzIDA84Z47bMpkmM9bGvZCDdGNwgv3xg3VkcIL984V3YWt1Mgk --lightpushnode=/ip4/172.18.31.249/tcp/65009/p2p/16Uiu2HAkzYEP5vapfmdGC8C8efQZuc1gTSm4i4PvJEwijkJnKzaK --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.179.202 waku a1111ca041b262542747328d184a35fe4c81e43ab55e8acfda2cfa09637e2b7d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID a1111ca041b2. Setting up logs at ./log/docker/lightpush_node1_2025-01-31_15-42-42__9a9c0da3-3b20-4c3c-8c55-1c10c155f1d7__quay.io_wakuorg_nwaku-pr:3267.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3267. REST: 7310
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7310/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7310/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.179.202/tcp/7311/p2p/16Uiu2HAm9yKnJsghnQMbYUrLQa3WpMUMJbVVeDLn1RMMbNwWYZ4W","/ip4/172.18.179.202/tcp/7312/ws/p2p/16Uiu2HAm9yKnJsghnQMbYUrLQa3WpMUMJbVVeDLn1RMMbNwWYZ4W"],"enrUri":"enr:-L24QAzKdcMHeNVIn2TJRR-8vUL6Hd4uPWGJlCtOyUQqbLnfLTx2TnwXSMVlqw-smlOvVveWlY5wnYPmXh5niekT-zwCgmlkgnY0gmlwhKwSs8qKbXVsdGlhZGRyc5YACASsErPKBhyPAAoErBKzygYckN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC2B9dae2bI0gWV-7nmVcGxEaSJzEPxB_ab4za7LzsTvODdGNwghyPg3VkcIIckYV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7310/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.31.249/tcp/65009/p2p/16Uiu2HAkzYEP5vapfmdGC8C8efQZuc1gTSm4i4PvJEwijkJnKzaK"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7310/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.165.215/tcp/26381/p2p/16Uiu2HAmS4GudvYWVLoJSWqdH2apYzSsbGksgHyHhDRvpC3JHHnA"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:65008/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26380/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic Empty string
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7310/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "", "timestamp": 1738338166531254272}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:7310/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A dictionary
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7310/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": {"key": "YWFh"}, "timestamp": 1738338166538206976}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:7310/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic An integer
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7310/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": 1234567890, "timestamp": 1738338166541866496}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:7310/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A list
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7310/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": ["YWFh"], "timestamp": 1738338166545411328}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:7310/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A bool
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7310/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": true, "timestamp": 1738338166549261056}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:7310/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id c00b8e7ba92b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 0235252371f7
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container c00b8e7ba92b. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id a1111ca041b2
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 0235252371f7. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.