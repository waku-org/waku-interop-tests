[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_meta with id: 2025-01-31_15-44-06__24454a1d-814a-45f9-9f69-c7c8bd0bba65
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3267
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-01-31_15-44-06__24454a1d-814a-45f9-9f69-c7c8bd0bba65__quay.io_wakuorg_nwaku-pr:3267.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.176.250
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['12993', '12994', '12995', '12996', '12997']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 12993:12993 -p 12994:12994 -p 12995:12995 -p 12996:12996 -p 12997:12997 quay.io/wakuorg/nwaku-pr:3267 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=12995 --rest-port=12993 --tcp-port=12994 --discv5-udp-port=12996 --rest-address=0.0.0.0 --nat=extip:172.18.176.250 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c40f8df79d1a8a2a8bc508e7cbc4f9fb9ad38a4c9c135b41b83dd812dfe5fb7d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=12997 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.176.250 waku b09a5f6077f1ddc0b078e2ba1dadcb3a56cfb6c1ca3d8ffac730afe8c3fc8b34
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID b09a5f6077f1. Setting up logs at ./log/docker/receiving_node1_2025-01-31_15-44-06__24454a1d-814a-45f9-9f69-c7c8bd0bba65__quay.io_wakuorg_nwaku-pr:3267.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3267. REST: 12993
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container d3edfcf1d58e. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12993/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12993/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.176.250/tcp/12994/p2p/16Uiu2HAmCDx3Sdi8qPS8EXWKytqm1cVwiGVPU58i1mo6K7fqGXXC","/ip4/172.18.176.250/tcp/12995/ws/p2p/16Uiu2HAmCDx3Sdi8qPS8EXWKytqm1cVwiGVPU58i1mo6K7fqGXXC"],"enrUri":"enr:-L24QN7hHna9up-1wj1ddWvf2XQ1cg4TJzFcjLmjQVefaKbQELScuquF3C6vXYmj26E9L0t91DXVDJtBR0AHyDqsd5YCgmlkgnY0gmlwhKwSsPqKbXVsdGlhZGRyc5YACASsErD6BjLCAAoErBKw-gYyw90DgnJzhQADAQAAiXNlY3AyNTZrMaEC-ZXe1Q1dL6RiMAIuoPM2p8A1vEfyyWqPSJ1F59csNaeDdGNwgjLCg3VkcIIyxIV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3267
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-01-31_15-44-06__24454a1d-814a-45f9-9f69-c7c8bd0bba65__quay.io_wakuorg_nwaku-pr:3267.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.75.86
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['19535', '19536', '19537', '19538', '19539']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 19535:19535 -p 19536:19536 -p 19537:19537 -p 19538:19538 -p 19539:19539 quay.io/wakuorg/nwaku-pr:3267 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19537 --rest-port=19535 --tcp-port=19536 --discv5-udp-port=19538 --rest-address=0.0.0.0 --nat=extip:172.18.75.86 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eaaf2592177c29de6ccbe6af68ba5d3994d8b0c1b32aebb82aac91aed8928ed8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19539 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.75.86 waku aeb01b6edbfb899265136e79819af4744f792b977ff329b1e5458bcdf98f829d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID aeb01b6edbfb. Setting up logs at ./log/docker/receiving_node2_2025-01-31_15-44-06__24454a1d-814a-45f9-9f69-c7c8bd0bba65__quay.io_wakuorg_nwaku-pr:3267.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3267. REST: 19535
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19535/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19535/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.75.86/tcp/19536/p2p/16Uiu2HAmTajwX6EJRNhFrHJdQnaQ5NoJq1xoYZB4fATKsn5dfAEo","/ip4/172.18.75.86/tcp/19537/ws/p2p/16Uiu2HAmTajwX6EJRNhFrHJdQnaQ5NoJq1xoYZB4fATKsn5dfAEo"],"enrUri":"enr:-L24QFGFk2YDcNNtONYQ3WXgehJHqpq6YAmImn4Vp-ORijvSa9m9HpL4mJMRba8MRFIQyRETOmDj6d-Z7t8ujDEyiJoCgmlkgnY0gmlwhKwSS1aKbXVsdGlhZGRyc5YACASsEktWBkxQAAoErBJLVgZMUd0DgnJzhQADAQAAiXNlY3AyNTZrMaED3civ-hd_rZthRmpPRsNv6QKam647PVAr-5FCDlYcKFSDdGNwgkxQg3VkcIJMUoV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19535/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.176.250/tcp/12994/p2p/16Uiu2HAmCDx3Sdi8qPS8EXWKytqm1cVwiGVPU58i1mo6K7fqGXXC"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3267
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-01-31_15-44-06__24454a1d-814a-45f9-9f69-c7c8bd0bba65__quay.io_wakuorg_nwaku-pr:3267.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.64.157
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['9326', '9327', '9328', '9329', '9330']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 9326:9326 -p 9327:9327 -p 9328:9328 -p 9329:9329 -p 9330:9330 quay.io/wakuorg/nwaku-pr:3267 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=9328 --rest-port=9326 --tcp-port=9327 --discv5-udp-port=9329 --rest-address=0.0.0.0 --nat=extip:172.18.64.157 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7df18cc00a8abdb3cfa5d8bf0a612cbdb0f3aafc27267a9429c0d4b89daeeebd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=9330 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QN7hHna9up-1wj1ddWvf2XQ1cg4TJzFcjLmjQVefaKbQELScuquF3C6vXYmj26E9L0t91DXVDJtBR0AHyDqsd5YCgmlkgnY0gmlwhKwSsPqKbXVsdGlhZGRyc5YACASsErD6BjLCAAoErBKw-gYyw90DgnJzhQADAQAAiXNlY3AyNTZrMaEC-ZXe1Q1dL6RiMAIuoPM2p8A1vEfyyWqPSJ1F59csNaeDdGNwgjLCg3VkcIIyxIV3YWt1Mgk --lightpushnode=/ip4/172.18.176.250/tcp/12994/p2p/16Uiu2HAmCDx3Sdi8qPS8EXWKytqm1cVwiGVPU58i1mo6K7fqGXXC --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.64.157 waku dd37e778e97cba4d8defda8b9d51c9c32375cae85ebef080441931ab8be4b61d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID dd37e778e97c. Setting up logs at ./log/docker/lightpush_node1_2025-01-31_15-44-06__24454a1d-814a-45f9-9f69-c7c8bd0bba65__quay.io_wakuorg_nwaku-pr:3267.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3267. REST: 9326
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9326/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9326/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.64.157/tcp/9327/p2p/16Uiu2HAmScYuraARxtNbrfMBd2SS43r3ck7GCzQjyNmzT1Fj2vHF","/ip4/172.18.64.157/tcp/9328/ws/p2p/16Uiu2HAmScYuraARxtNbrfMBd2SS43r3ck7GCzQjyNmzT1Fj2vHF"],"enrUri":"enr:-L24QBRYSK98NUZpDaggN2XMATGmyDnnEBH_1Gfdw_hcqPZje7i8e_itl3cg99irYdoFMXpmWMtlLYG98LsxvjLPn_YCgmlkgnY0gmlwhKwSQJ2KbXVsdGlhZGRyc5YACASsEkCdBiRvAAoErBJAnQYkcN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDz2OxIbEkWLbegquPyyA_Y7JdGsqeVukcS7VZiiZpH6qDdGNwgiRvg3VkcIIkcYV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9326/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.176.250/tcp/12994/p2p/16Uiu2HAmCDx3Sdi8qPS8EXWKytqm1cVwiGVPU58i1mo6K7fqGXXC"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9326/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.75.86/tcp/19536/p2p/16Uiu2HAmTajwX6EJRNhFrHJdQnaQ5NoJq1xoYZB4fATKsn5dfAEo"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12993/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19535/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9326/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738338250398639616, "meta": "Light push works!!"}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:9326/lightpush/v1/message. Response content: b'Invalid message: Incorrect base64 string'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id b09a5f6077f1
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id aeb01b6edbfb
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container b09a5f6077f1. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id dd37e778e97c
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container aeb01b6edbfb. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.