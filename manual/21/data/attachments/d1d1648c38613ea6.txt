[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_relay_receiving_node_not_connected_directly_to_relaying_node with id: 2025-01-23_11-37-02__56ce079a-4177-444b-a30f-ca616754be6e
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image harbor.status.im/wakuorg/nwaku:test-debug-flag
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-23_11-37-02__56ce079a-4177-444b-a30f-ca616754be6e__harbor.status.im_wakuorg_nwaku:test-debug-flag.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image harbor.status.im/wakuorg/nwaku:test-debug-flag
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-23_11-37-02__56ce079a-4177-444b-a30f-ca616754be6e__harbor.status.im_wakuorg_nwaku:test-debug-flag.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image harbor.status.im/wakuorg/nwaku:test-debug-flag
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2025-01-23_11-37-02__56ce079a-4177-444b-a30f-ca616754be6e__harbor.status.im_wakuorg_nwaku:test-debug-flag.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:33 Network waku created
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.209.114
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['4490', '4491', '4492', '4493', '4494']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 4490:4490 -p 4491:4491 -p 4492:4492 -p 4493:4493 -p 4494:4494 harbor.status.im/wakuorg/nwaku:test-debug-flag --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4492 --rest-port=4490 --tcp-port=4491 --discv5-udp-port=4493 --rest-address=0.0.0.0 --nat=extip:172.18.209.114 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d57d5b9af029d8bd6ddfc87b575ae545e2b45cea174b9b0f370f3781896bbdce --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4494 --metrics-logging=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.209.114 waku ae1d6cd4447c612fa549d6dca3e1608c03cedfeb9b2955ba4f206157bbe515f1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ae1d6cd4447c. Setting up logs at ./log/docker/node1_2025-01-23_11-37-02__56ce079a-4177-444b-a30f-ca616754be6e__harbor.status.im_wakuorg_nwaku:test-debug-flag.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image harbor.status.im/wakuorg/nwaku:test-debug-flag. REST: 4490
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4490/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4490/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.209.114/tcp/4491/p2p/16Uiu2HAmLy72WcKzUXSrxy1SiKN8s9Dwro9WzkVYb6QGBBJ7BkYP","/ip4/172.18.209.114/tcp/4492/ws/p2p/16Uiu2HAmLy72WcKzUXSrxy1SiKN8s9Dwro9WzkVYb6QGBBJ7BkYP"],"enrUri":"enr:-L24QJZeao2vci_hhoUa_KN5uGKOigPt4ATKdU1jSo4Xwb8nN34SECe_CLNfjfKNMbLkpxtd0BJMAzWghnhl4tmVjNACgmlkgnY0gmlwhKwS0XKKbXVsdGlhZGRyc5YACASsEtFyBhGLAAoErBLRcgYRjN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDe4F_sj2T7aJyozmu_IeB8Z0dYSZ4OeEX1-FWI60_YDiDdGNwghGLg3VkcIIRjYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.22.91
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['17049', '17050', '17051', '17052', '17053']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 17049:17049 -p 17050:17050 -p 17051:17051 -p 17052:17052 -p 17053:17053 harbor.status.im/wakuorg/nwaku:test-debug-flag --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17051 --rest-port=17049 --tcp-port=17050 --discv5-udp-port=17052 --rest-address=0.0.0.0 --nat=extip:172.18.22.91 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d6ce65decef9e78feeafbfeadcddec71a4fe3b7ffe8ecc0d53bb6db47babaf97 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17053 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QJZeao2vci_hhoUa_KN5uGKOigPt4ATKdU1jSo4Xwb8nN34SECe_CLNfjfKNMbLkpxtd0BJMAzWghnhl4tmVjNACgmlkgnY0gmlwhKwS0XKKbXVsdGlhZGRyc5YACASsEtFyBhGLAAoErBLRcgYRjN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDe4F_sj2T7aJyozmu_IeB8Z0dYSZ4OeEX1-FWI60_YDiDdGNwghGLg3VkcIIRjYV3YWt1MgE
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.22.91 waku 79ba9c41e7e0d511ff3b1625a81c99846f43f9a7725cf8f0ce763661dd781d06
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 79ba9c41e7e0. Setting up logs at ./log/docker/node2_2025-01-23_11-37-02__56ce079a-4177-444b-a30f-ca616754be6e__harbor.status.im_wakuorg_nwaku:test-debug-flag.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image harbor.status.im/wakuorg/nwaku:test-debug-flag. REST: 17049
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17049/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17049/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.22.91/tcp/17050/p2p/16Uiu2HAmLczY33QnCHyD2PDVXKcGX5GhgCTV9mBtrcFBfuno8A7c","/ip4/172.18.22.91/tcp/17051/ws/p2p/16Uiu2HAmLczY33QnCHyD2PDVXKcGX5GhgCTV9mBtrcFBfuno8A7c"],"enrUri":"enr:-L24QLGX9B9IsbgT5CVCZTgvLL3GPoHHDvYytUqr5hY3_lGAEgERGMll__8EV9nWshNvXkXdqj0AGyclZPqeddZQR0oCgmlkgnY0gmlwhKwSFluKbXVsdGlhZGRyc5YACASsEhZbBkKaAAoErBIWWwZCm90DgnJzhQADAQAAiXNlY3AyNTZrMaEDdlqLFONNMYAJNZov1nUaZsDqS_dR7KV_afBitSwoYtuDdGNwgkKag3VkcIJCnIV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.133.184
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['35731', '35732', '35733', '35734', '35735']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 35731:35731 -p 35732:35732 -p 35733:35733 -p 35734:35734 -p 35735:35735 harbor.status.im/wakuorg/nwaku:test-debug-flag --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=35733 --rest-port=35731 --tcp-port=35732 --discv5-udp-port=35734 --rest-address=0.0.0.0 --nat=extip:172.18.133.184 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b25626ee4d4bc1d245965c3fedcbff69fc2f223699da3dc55bade10bf0ef2414 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=35735 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QLGX9B9IsbgT5CVCZTgvLL3GPoHHDvYytUqr5hY3_lGAEgERGMll__8EV9nWshNvXkXdqj0AGyclZPqeddZQR0oCgmlkgnY0gmlwhKwSFluKbXVsdGlhZGRyc5YACASsEhZbBkKaAAoErBIWWwZCm90DgnJzhQADAQAAiXNlY3AyNTZrMaEDdlqLFONNMYAJNZov1nUaZsDqS_dR7KV_afBitSwoYtuDdGNwgkKag3VkcIJCnIV3YWt1MgE
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.133.184 waku 6e8dbe8791dd0f93d09e062b127f4522fb09072256631d949c4fbd9e95d95435
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 6e8dbe8791dd. Setting up logs at ./log/docker/node3_2025-01-23_11-37-02__56ce079a-4177-444b-a30f-ca616754be6e__harbor.status.im_wakuorg_nwaku:test-debug-flag.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image harbor.status.im/wakuorg/nwaku:test-debug-flag. REST: 35731
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35731/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35731/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.133.184/tcp/35732/p2p/16Uiu2HAmRjWayJJgaVNcGEaQzHtpeNJhWN9ua4Xq1fRNaMGpW5Lt","/ip4/172.18.133.184/tcp/35733/ws/p2p/16Uiu2HAmRjWayJJgaVNcGEaQzHtpeNJhWN9ua4Xq1fRNaMGpW5Lt"],"enrUri":"enr:-L24QJ5hB0tr5lEkLJiI5qlTbRVwJZ36g8aq8eC-c3A43ZyAZH6Qnth6UN0boPQGIi8eAwYHTXVHz9J5Def2TYQAoasCgmlkgnY0gmlwhKwShbiKbXVsdGlhZGRyc5YACASsEoW4BouUAAoErBKFuAaLld0DgnJzhQADAQAAiXNlY3AyNTZrMaEDwlBw7HnoqH8mK_OKDaZIXoN8oTc3pI461XFfC7JtbmmDdGNwgouUg3VkcIKLloV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4490/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:17049/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35731/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4490/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.22.91/tcp/17050/p2p/16Uiu2HAmLczY33QnCHyD2PDVXKcGX5GhgCTV9mBtrcFBfuno8A7c","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17049/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.133.184/tcp/35732/p2p/16Uiu2HAmRjWayJJgaVNcGEaQzHtpeNJhWN9ua4Xq1fRNaMGpW5Lt","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"},{"multiaddr":"/ip4/172.18.209.114/tcp/4491/p2p/16Uiu2HAmLy72WcKzUXSrxy1SiKN8s9Dwro9WzkVYb6QGBBJ7BkYP","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35731/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.22.91/tcp/17050/p2p/16Uiu2HAmLczY33QnCHyD2PDVXKcGX5GhgCTV9mBtrcFBfuno8A7c","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4490/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.relay:relay.py:123 Checking that peer NODE_1:harbor.status.im/wakuorg/nwaku:test-debug-flag can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35731/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1737632266013217536,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id ae1d6cd4447c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 79ba9c41e7e0
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container ae1d6cd4447c. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 6e8dbe8791dd
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 79ba9c41e7e0. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.