[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_get_message_with_meta with id: 2024-09-13_07-47-12__e3ff5840-9fe7-448f-b91c-0df91503adcf
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3036
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-13_07-47-12__e3ff5840-9fe7-448f-b91c-0df91503adcf__quay.io_wakuorg_nwaku-pr:3036.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.150.166
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['62639', '62640', '62641', '62642', '62643']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 62639:62639 -p 62640:62640 -p 62641:62641 -p 62642:62642 -p 62643:62643 quay.io/wakuorg/nwaku-pr:3036 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62641 --rest-port=62639 --tcp-port=62640 --discv5-udp-port=62642 --rest-address=0.0.0.0 --nat=extip:172.18.150.166 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=afc0bd4ebee06b2aeadbee17cbaad0fbc3bbbace81ddcbeb4c907f0bde3ce220 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62643 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.150.166 waku 4bf0e7f75487ab4fc01671ef45635feab523679cb0fd01d2a5cb5664e9c03b1f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 4bf0e7f75487. Setting up logs at ./log/docker/node1_2024-09-13_07-47-12__e3ff5840-9fe7-448f-b91c-0df91503adcf__quay.io_wakuorg_nwaku-pr:3036.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image quay.io/wakuorg/nwaku-pr:3036. REST: 62639
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62639/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62639/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.150.166/tcp/62640/p2p/16Uiu2HAm7zSAKEFBXPsXegrwwP58wPVh8bJo9HE5dTk1AJrzmDmU","/ip4/172.18.150.166/tcp/62641/ws/p2p/16Uiu2HAm7zSAKEFBXPsXegrwwP58wPVh8bJo9HE5dTk1AJrzmDmU"],"enrUri":"enr:-LO4QMempss9zdH_az_bjjD7ngRwj81vpent17NbDj9KIz9jSQmsp_RbvZTIcZWQ2sR49LuueIjea2XMGW-k-h5KPEIBgmlkgnY0gmlwhKwSlqaKbXVsdGlhZGRyc4wACgSsEpamBvSx3QOCcnOFAAMBAACJc2VjcDI1NmsxoQK6sMj7J26J3CaAszdcY9rm1nIBn5ZZ9hjlKD52-vQhk4N0Y3CC9LCDdWRwgvSyhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3036
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-13_07-47-12__e3ff5840-9fe7-448f-b91c-0df91503adcf__quay.io_wakuorg_nwaku-pr:3036.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.109.239
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['40344', '40345', '40346', '40347', '40348']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 40344:40344 -p 40345:40345 -p 40346:40346 -p 40347:40347 -p 40348:40348 quay.io/wakuorg/nwaku-pr:3036 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40346 --rest-port=40344 --tcp-port=40345 --discv5-udp-port=40347 --rest-address=0.0.0.0 --nat=extip:172.18.109.239 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e8291add6cfcec952fbfcbbbdadb76cccaffbf541add74d8c7d2ec9f43faeba6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40348 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QMempss9zdH_az_bjjD7ngRwj81vpent17NbDj9KIz9jSQmsp_RbvZTIcZWQ2sR49LuueIjea2XMGW-k-h5KPEIBgmlkgnY0gmlwhKwSlqaKbXVsdGlhZGRyc4wACgSsEpamBvSx3QOCcnOFAAMBAACJc2VjcDI1NmsxoQK6sMj7J26J3CaAszdcY9rm1nIBn5ZZ9hjlKD52-vQhk4N0Y3CC9LCDdWRwgvSyhXdha3UyBQ --filternode=/ip4/172.18.150.166/tcp/62640/p2p/16Uiu2HAm7zSAKEFBXPsXegrwwP58wPVh8bJo9HE5dTk1AJrzmDmU
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.109.239 waku b6ca653aa230a19ef04d64731345c541594ec60a84cc890282f5b53e8bf6f0f1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID b6ca653aa230. Setting up logs at ./log/docker/node2_2024-09-13_07-47-12__e3ff5840-9fe7-448f-b91c-0df91503adcf__quay.io_wakuorg_nwaku-pr:3036.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image quay.io/wakuorg/nwaku-pr:3036. REST: 40344
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40344/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40344/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.109.239/tcp/40345/p2p/16Uiu2HAmNhdo1Eu4udZZbyAmncHqbcMU6un8VyLZWhSVMQriR98x","/ip4/172.18.109.239/tcp/40346/ws/p2p/16Uiu2HAmNhdo1Eu4udZZbyAmncHqbcMU6un8VyLZWhSVMQriR98x"],"enrUri":"enr:-LO4QEK0XNoWzbufm98M_rMKpaafrdd1CkYIhNfUGzjCmNUHLpXo7K_GO3JDYn0M_mvOuY9SHEBqxuCncwx9gKbk3SsBgmlkgnY0gmlwhKwSbe-KbXVsdGlhZGRyc4wACgSsEm3vBp2a3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOVQl5EKOiATu_3OgvZtyewUWIwJLUcUesdb99LvHgpnYN0Y3CCnZmDdWRwgp2bhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40344/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.150.166/tcp/62640/p2p/16Uiu2HAm7zSAKEFBXPsXegrwwP58wPVh8bJo9HE5dTk1AJrzmDmU"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62639/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40344/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "bba67332-d7e8-4c67-a76e-638a0e8ad0ef", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"bba67332-d7e8-4c67-a76e-638a0e8ad0ef","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62639/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "meta": "RmlsdGVyIHdvcmtzISE="}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:quay.io/wakuorg/nwaku-pr:3036 can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40344/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1726213635580827136,"meta":"RmlsdGVyIHdvcmtzISE=","ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 4bf0e7f75487
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id b6ca653aa230
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.