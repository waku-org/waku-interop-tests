[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_payloads with id: 2025-01-30_12-18-02__8b1db7c0-0e83-4f2e-a026-6a7bc1ddd4da
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3234
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-01-30_12-18-02__8b1db7c0-0e83-4f2e-a026-6a7bc1ddd4da__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.41.229
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['50559', '50560', '50561', '50562', '50563']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 50559:50559 -p 50560:50560 -p 50561:50561 -p 50562:50562 -p 50563:50563 quay.io/wakuorg/nwaku-pr:3234 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=50561 --rest-port=50559 --tcp-port=50560 --discv5-udp-port=50562 --rest-address=0.0.0.0 --nat=extip:172.18.41.229 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5ac6eb2dfed310ceddd231ca0eda20e1e125ae5dcacad798892e55a6ac5ef972 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=50563 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.41.229 waku ee9ac71bce487bea289f1afa0d9ef00d87e3b7b667137c3c5c09f129f2b2c369
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ee9ac71bce48. Setting up logs at ./log/docker/receiving_node1_2025-01-30_12-18-02__8b1db7c0-0e83-4f2e-a026-6a7bc1ddd4da__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3234. REST: 50559
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 305166d39cb6. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50559/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50559/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.41.229/tcp/50560/p2p/16Uiu2HAm1SRTZMx17REqTXchJRG7y7Gvsc91F7wa2tXbPH4JExcb","/ip4/172.18.41.229/tcp/50561/ws/p2p/16Uiu2HAm1SRTZMx17REqTXchJRG7y7Gvsc91F7wa2tXbPH4JExcb"],"enrUri":"enr:-L24QJmmRnCQnTm_H3oimXUdZrjMrYnrgydcivQQc7h_xUs0FaJjkTPWYhqWhtsZ2GVlk_myxYomYFkPe0Axu_kwhLUCgmlkgnY0gmlwhKwSKeWKbXVsdGlhZGRyc5YACASsEinlBsWAAAoErBIp5QbFgd0DgnJzhQADAQAAiXNlY3AyNTZrMaECWVdIeNLMtiwHl_6DkebpP-LFDxN0FwpvRnJRVJDBisSDdGNwgsWAg3VkcILFgoV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3234
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-01-30_12-18-02__8b1db7c0-0e83-4f2e-a026-6a7bc1ddd4da__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.57.133
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['51265', '51266', '51267', '51268', '51269']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 51265:51265 -p 51266:51266 -p 51267:51267 -p 51268:51268 -p 51269:51269 quay.io/wakuorg/nwaku-pr:3234 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=51267 --rest-port=51265 --tcp-port=51266 --discv5-udp-port=51268 --rest-address=0.0.0.0 --nat=extip:172.18.57.133 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8adcaafbdae5eecf83591b65ebdf7938c80c16ca4a4406b464cf02ceb1fcad4d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=51269 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.57.133 waku d6e5bddf6de25b9989c6e58eceef077ed06e635317f32f2eca90debd6add5faf
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID d6e5bddf6de2. Setting up logs at ./log/docker/receiving_node2_2025-01-30_12-18-02__8b1db7c0-0e83-4f2e-a026-6a7bc1ddd4da__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3234. REST: 51265
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51265/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51265/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.57.133/tcp/51266/p2p/16Uiu2HAmV77FkNigmiK275xjfcBZKYCYh7iNZ4XoDNDg4nGq768B","/ip4/172.18.57.133/tcp/51267/ws/p2p/16Uiu2HAmV77FkNigmiK275xjfcBZKYCYh7iNZ4XoDNDg4nGq768B"],"enrUri":"enr:-L24QOnDGeL-1JVHk63B8x6ctZQMJo3A6E4K61coCRi0Azu5RLnZUDRksC3oe_EnZOu8LVHQSx_ahvI8MUEN9ASeHtkCgmlkgnY0gmlwhKwSOYWKbXVsdGlhZGRyc5YACASsEjmFBshCAAoErBI5hQbIQ90DgnJzhQADAQAAiXNlY3AyNTZrMaED9GvmFPTWOKpR1A3z8-ktExLWTmVJ64sm-1YIIKEPY2SDdGNwgshCg3VkcILIRIV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51265/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.41.229/tcp/50560/p2p/16Uiu2HAm1SRTZMx17REqTXchJRG7y7Gvsc91F7wa2tXbPH4JExcb"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3234
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-01-30_12-18-02__8b1db7c0-0e83-4f2e-a026-6a7bc1ddd4da__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.39.152
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['5359', '5360', '5361', '5362', '5363']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 5359:5359 -p 5360:5360 -p 5361:5361 -p 5362:5362 -p 5363:5363 quay.io/wakuorg/nwaku-pr:3234 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=5361 --rest-port=5359 --tcp-port=5360 --discv5-udp-port=5362 --rest-address=0.0.0.0 --nat=extip:172.18.39.152 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=96e6ba9b5d75856118d1dea21d253ddbda2acfcdec4bb2a8fbf5bfa0a85cccaa --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=5363 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QJmmRnCQnTm_H3oimXUdZrjMrYnrgydcivQQc7h_xUs0FaJjkTPWYhqWhtsZ2GVlk_myxYomYFkPe0Axu_kwhLUCgmlkgnY0gmlwhKwSKeWKbXVsdGlhZGRyc5YACASsEinlBsWAAAoErBIp5QbFgd0DgnJzhQADAQAAiXNlY3AyNTZrMaECWVdIeNLMtiwHl_6DkebpP-LFDxN0FwpvRnJRVJDBisSDdGNwgsWAg3VkcILFgoV3YWt1Mgk --lightpushnode=/ip4/172.18.41.229/tcp/50560/p2p/16Uiu2HAm1SRTZMx17REqTXchJRG7y7Gvsc91F7wa2tXbPH4JExcb --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.39.152 waku b6f8c33ef1666b681dfb29a763112aa45723de63f756116d08e6c6b4bf96769b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID b6f8c33ef166. Setting up logs at ./log/docker/lightpush_node1_2025-01-30_12-18-02__8b1db7c0-0e83-4f2e-a026-6a7bc1ddd4da__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3234. REST: 5359
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5359/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5359/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.39.152/tcp/5360/p2p/16Uiu2HAm1a1kQFJKmBBH2YKzXkY1LEB6y6FQ8GKTSyPCKqczzW62","/ip4/172.18.39.152/tcp/5361/ws/p2p/16Uiu2HAm1a1kQFJKmBBH2YKzXkY1LEB6y6FQ8GKTSyPCKqczzW62"],"enrUri":"enr:-L24QL6DOKyWxVE9l5ySgzGD_l0CQLRjxsuybYrn-iBkYQbYSA0IETOc6zGBPXJ4nLeEwi3U4mnOzWErDiOtE6rffPQCgmlkgnY0gmlwhKwSJ5iKbXVsdGlhZGRyc5YACASsEieYBhTwAAoErBInmAYU8d0DgnJzhQADAQAAiXNlY3AyNTZrMaECW0ke-8V6anS7IgsIIEQ3P2unktPhloFVqRDEjVmeho-DdGNwghTwg3VkcIIU8oV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5359/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.41.229/tcp/50560/p2p/16Uiu2HAm1SRTZMx17REqTXchJRG7y7Gvsc91F7wa2tXbPH4JExcb"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5359/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.57.133/tcp/51266/p2p/16Uiu2HAmV77FkNigmiK275xjfcBZKYCYh7iNZ4XoDNDg4nGq768B"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:50559/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51265/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload Empty string
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5359/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738239486545141504}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:5359/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload Unecoded text
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5359/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "Hello World!", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738239486549929216}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:5359/lightpush/v1/message. Response content: b'Invalid message: Incorrect base64 string'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload A dictionary
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5359/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": {"key": "YWFh"}, "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738239486552707072}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:5359/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload An integer
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5359/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": 1234567890, "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738239486555720192}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:5359/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload A list
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5359/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": ["YWFh"], "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738239486558585600}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:5359/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload A bool
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5359/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": true, "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738239486561376768}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:5359/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id ee9ac71bce48
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id d6e5bddf6de2
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container ee9ac71bce48. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id b6f8c33ef166
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container d6e5bddf6de2. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.