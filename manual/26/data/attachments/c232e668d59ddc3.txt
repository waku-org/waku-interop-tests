[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_msg_stored_when_ephemeral_false with id: 2025-01-30_12-18-57__f0d6bc2c-e302-455f-8658-86c600dd4cab
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3234
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-30_12-18-57__f0d6bc2c-e302-455f-8658-86c600dd4cab__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3234
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-30_12-18-57__f0d6bc2c-e302-455f-8658-86c600dd4cab__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3234
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2025-01-30_12-18-57__f0d6bc2c-e302-455f-8658-86c600dd4cab__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:414 Start 3 nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.98.128
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['58801', '58802', '58803', '58804', '58805']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 58801:58801 -p 58802:58802 -p 58803:58803 -p 58804:58804 -p 58805:58805 quay.io/wakuorg/nwaku-pr:3234 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=58803 --rest-port=58801 --tcp-port=58802 --discv5-udp-port=58804 --rest-address=0.0.0.0 --nat=extip:172.18.98.128 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ad80daa7ca9d98202bbd3bb7cc4fffb3fa38c25fedcd5af16bf4e36ac03e4a4c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=58805 --metrics-logging=true --relay=true --store=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.98.128 waku 9cb8a4bf3c84f8942b70afba6a2cbfbd505c7aec4b7ed810c07b5455e0f4b466
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 9cb8a4bf3c84. Setting up logs at ./log/docker/node1_2025-01-30_12-18-57__f0d6bc2c-e302-455f-8658-86c600dd4cab__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3234. REST: 58801
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container a027fb7b052a. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58801/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58801/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.98.128/tcp/58802/p2p/16Uiu2HAkzNHnfhr7JZPb22RXtp9RY84wP83GCyHipRDSz6hYs7rV","/ip4/172.18.98.128/tcp/58803/ws/p2p/16Uiu2HAkzNHnfhr7JZPb22RXtp9RY84wP83GCyHipRDSz6hYs7rV"],"enrUri":"enr:-L24QLQ88NGAIS7DNyIcO6oIaFaFJmOA8LglBL-CS22_dLxtA3xK83fTZXiwowV3WkhOisWkVepGFerMLEg2ICl-LXECgmlkgnY0gmlwhKwSYoCKbXVsdGlhZGRyc5YACASsEmKABuWyAAoErBJigAbls90DgnJzhQADAQAAiXNlY3AyNTZrMaECSWyZjuvu_KNbEaRxcTDUTkWA3BMed61pHMMqy5imeo6DdGNwguWyg3VkcILltIV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.190.234
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['26230', '26231', '26232', '26233', '26234']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 26230:26230 -p 26231:26231 -p 26232:26232 -p 26233:26233 -p 26234:26234 quay.io/wakuorg/nwaku-pr:3234 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26232 --rest-port=26230 --tcp-port=26231 --discv5-udp-port=26233 --rest-address=0.0.0.0 --nat=extip:172.18.190.234 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ebcfbcd76d43ec7f5edb985d6faabd7fcfa27bb3e91cacd3c408ccbcfffe1d0e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26234 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-L24QLQ88NGAIS7DNyIcO6oIaFaFJmOA8LglBL-CS22_dLxtA3xK83fTZXiwowV3WkhOisWkVepGFerMLEg2ICl-LXECgmlkgnY0gmlwhKwSYoCKbXVsdGlhZGRyc5YACASsEmKABuWyAAoErBJigAbls90DgnJzhQADAQAAiXNlY3AyNTZrMaECSWyZjuvu_KNbEaRxcTDUTkWA3BMed61pHMMqy5imeo6DdGNwguWyg3VkcILltIV3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.190.234 waku 40bcff2ec18b6cec4109d9c38aae211f388f8d8f543d393eee9c28d417c30039
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 40bcff2ec18b. Setting up logs at ./log/docker/node2_2025-01-30_12-18-57__f0d6bc2c-e302-455f-8658-86c600dd4cab__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3234. REST: 26230
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26230/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26230/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.190.234/tcp/26231/p2p/16Uiu2HAm2RsfHHNdJ3yxkpnFKdkrjLHszw8pYccbwS6CZfidr3MK","/ip4/172.18.190.234/tcp/26232/ws/p2p/16Uiu2HAm2RsfHHNdJ3yxkpnFKdkrjLHszw8pYccbwS6CZfidr3MK"],"enrUri":"enr:-L24QEDlqAI6_FwqqiRz6rlDTnmxF9D4OHHpDy9WDXL0zDmGNWrEUem3DlgGtovHc1Zr4Tta_ylXnPjRAlAukqAuxkoCgmlkgnY0gmlwhKwSvuqKbXVsdGlhZGRyc5YACASsEr7qBmZ3AAoErBK-6gZmeN0DgnJzhQADAQAAiXNlY3AyNTZrMaECaA8EGx_ESYbLcP9PU37sbZ4_DlfJLFdDsy242uQf6-qDdGNwgmZ3g3VkcIJmeYV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.99.235
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['33670', '33671', '33672', '33673', '33674']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 33670:33670 -p 33671:33671 -p 33672:33672 -p 33673:33673 -p 33674:33674 quay.io/wakuorg/nwaku-pr:3234 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=33672 --rest-port=33670 --tcp-port=33671 --discv5-udp-port=33673 --rest-address=0.0.0.0 --nat=extip:172.18.99.235 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e3f4cf4fbb11cb3a1713d30c227ca6db595d4a1bac0ef4bb1396f2bb5da9de63 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=33674 --metrics-logging=true --relay=false --storenode=/ip4/172.18.190.234/tcp/26231/p2p/16Uiu2HAm2RsfHHNdJ3yxkpnFKdkrjLHszw8pYccbwS6CZfidr3MK --discv5-bootstrap-node=enr:-L24QEDlqAI6_FwqqiRz6rlDTnmxF9D4OHHpDy9WDXL0zDmGNWrEUem3DlgGtovHc1Zr4Tta_ylXnPjRAlAukqAuxkoCgmlkgnY0gmlwhKwSvuqKbXVsdGlhZGRyc5YACASsEr7qBmZ3AAoErBK-6gZmeN0DgnJzhQADAQAAiXNlY3AyNTZrMaECaA8EGx_ESYbLcP9PU37sbZ4_DlfJLFdDsy242uQf6-qDdGNwgmZ3g3VkcIJmeYV3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.99.235 waku 3a10b605e8c0f3442ee335199cc6b05f54c4cdf332f0c1c6276a839acb5e389e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 3a10b605e8c0. Setting up logs at ./log/docker/node3_2025-01-30_12-18-57__f0d6bc2c-e302-455f-8658-86c600dd4cab__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3234. REST: 33670
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33670/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33670/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.99.235/tcp/33671/p2p/16Uiu2HAmPMP3U3yp5piXKCBfMiR7VyK8uMfBm82t35PjatfJVGvC","/ip4/172.18.99.235/tcp/33672/ws/p2p/16Uiu2HAmPMP3U3yp5piXKCBfMiR7VyK8uMfBm82t35PjatfJVGvC"],"enrUri":"enr:-L24QJklTfMWs6MHtG6UMGu6B8wasYcyy9kMObc7YMSQaiagTemMgtz1h83xdqTuq7RjEaxPpkUn1AJrPW8aE0gyNVoCgmlkgnY0gmlwhKwSY-uKbXVsdGlhZGRyc5YACASsEmPrBoOHAAoErBJj6waDiN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDnu3Cpt5FdGmLD4TyDgu3CrLwG1zz9h3XGLCRbtdMkJmDdGNwgoOHg3VkcIKDiYV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:419 Subscribe node1 ,2 to pubtopic /waku/2/rs/3/1
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:58801/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26230/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58801/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.190.234/tcp/26231/p2p/16Uiu2HAm2RsfHHNdJ3yxkpnFKdkrjLHszw8pYccbwS6CZfidr3MK","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26230/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.98.128/tcp/58802/p2p/16Uiu2HAkzNHnfhr7JZPb22RXtp9RY84wP83GCyHipRDSz6hYs7rV","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 30 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:424 Node1 publish message with ephemeral = false
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:58801/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "ephemeral": false}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 3 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:428 Check if message is stored 
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer quay.io/wakuorg/nwaku-pr:3234 can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33670/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"7e219426f8433c85f6aa","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xa7e7ca7014ac7c829cdd18198c9fa1e4ddfa6a9410b3960ac79a70915463aa84"}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 9cb8a4bf3c84
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 40bcff2ec18b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 3a10b605e8c0
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 9cb8a4bf3c84. Exiting log stream.
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 40bcff2ec18b. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.