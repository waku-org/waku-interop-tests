[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_update_subscription_with_extra_field with id: 2025-01-30_12-17-40__386864cc-c88b-4660-b58f-fa9f7fd01781
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3234
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-30_12-17-40__386864cc-c88b-4660-b58f-fa9f7fd01781__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.10.39
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['4783', '4784', '4785', '4786', '4787']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 4783:4783 -p 4784:4784 -p 4785:4785 -p 4786:4786 -p 4787:4787 quay.io/wakuorg/nwaku-pr:3234 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4785 --rest-port=4783 --tcp-port=4784 --discv5-udp-port=4786 --rest-address=0.0.0.0 --nat=extip:172.18.10.39 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1edb337604d0e88e8c9fdf4af01cbdcd6c15b9dfca9d33de8d5c03a08144ea1d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4787 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.10.39 waku ff0eb98db037f5a249d7dcf8e48fd3f1a28062005f53f68f2588a9012f56199e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ff0eb98db037. Setting up logs at ./log/docker/node1_2025-01-30_12-17-40__386864cc-c88b-4660-b58f-fa9f7fd01781__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3234. REST: 4783
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 29d7ff056295. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4783/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4783/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.10.39/tcp/4784/p2p/16Uiu2HAmVDHG6brArhnrUxVhWZiRPpXEAJANJy8kNHwJ8bDkiUZJ","/ip4/172.18.10.39/tcp/4785/ws/p2p/16Uiu2HAmVDHG6brArhnrUxVhWZiRPpXEAJANJy8kNHwJ8bDkiUZJ"],"enrUri":"enr:-L24QPlbdpyuiTRmjytmMvenpBcMT1HQA2sQtBE2eErJWy6nPjqGHOY-1J-2NOqU0a-ncjdPYdQXVXp3SMrwIMmYo1cCgmlkgnY0gmlwhKwSCieKbXVsdGlhZGRyc5YACASsEgonBhKwAAoErBIKJwYSsd0DgnJzhQADAQAAiXNlY3AyNTZrMaED9gCyi9YBZPFsgLRsJ23ryzV-mApEBE-4gClx1YjSUrWDdGNwghKwg3VkcIISsoV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3234
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-30_12-17-40__386864cc-c88b-4660-b58f-fa9f7fd01781__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.18.237
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['9824', '9825', '9826', '9827', '9828']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 9824:9824 -p 9825:9825 -p 9826:9826 -p 9827:9827 -p 9828:9828 quay.io/wakuorg/nwaku-pr:3234 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=9826 --rest-port=9824 --tcp-port=9825 --discv5-udp-port=9827 --rest-address=0.0.0.0 --nat=extip:172.18.18.237 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6fbedbfefec3aea8b10d5fdb10a8f4c5df109e1e18fbd8cee544dc37aa7fce39 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=9828 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QPlbdpyuiTRmjytmMvenpBcMT1HQA2sQtBE2eErJWy6nPjqGHOY-1J-2NOqU0a-ncjdPYdQXVXp3SMrwIMmYo1cCgmlkgnY0gmlwhKwSCieKbXVsdGlhZGRyc5YACASsEgonBhKwAAoErBIKJwYSsd0DgnJzhQADAQAAiXNlY3AyNTZrMaED9gCyi9YBZPFsgLRsJ23ryzV-mApEBE-4gClx1YjSUrWDdGNwghKwg3VkcIISsoV3YWt1MgU --filternode=/ip4/172.18.10.39/tcp/4784/p2p/16Uiu2HAmVDHG6brArhnrUxVhWZiRPpXEAJANJy8kNHwJ8bDkiUZJ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.18.237 waku 9bbef7d601282a2d09d84ec6735ae3c1cd9b71e4ed8905d37b884d99b2e9578c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 9bbef7d60128. Setting up logs at ./log/docker/node2_2025-01-30_12-17-40__386864cc-c88b-4660-b58f-fa9f7fd01781__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3234. REST: 9824
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9824/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9824/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.18.237/tcp/9825/p2p/16Uiu2HAmQSLuCWZHZZb9wAHHykEPUKDn4h53t92kfJeoHs6Lw828","/ip4/172.18.18.237/tcp/9826/ws/p2p/16Uiu2HAmQSLuCWZHZZb9wAHHykEPUKDn4h53t92kfJeoHs6Lw828"],"enrUri":"enr:-L24QFW8As7JZWQjHyUfropLnil_4mfu54YiHwhX-RZIZaoXJ5vbvQ8rFXpOAL6GsB7otI1jpmvh0nY9EPw3IKWohlYCgmlkgnY0gmlwhKwSEu2KbXVsdGlhZGRyc5YACASsEhLtBiZhAAoErBIS7QYmYt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDrw7twete8_YYhA0GiAaCOw2MTsGS0P_O7i9hDUX5WX2DdGNwgiZhg3VkcIImY4V3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9824/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.10.39/tcp/4784/p2p/16Uiu2HAmVDHG6brArhnrUxVhWZiRPpXEAJANJy8kNHwJ8bDkiUZJ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4783/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9824/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "2fe17748-7d89-430f-b9ce-d48fda23a9c0", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"2fe17748-7d89-430f-b9ce-d48fda23a9c0","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X PUT "http://127.0.0.1:9824/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1", "extraField": "extraValue"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:9824/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id ff0eb98db037
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 9bbef7d60128
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container ff0eb98db037. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.