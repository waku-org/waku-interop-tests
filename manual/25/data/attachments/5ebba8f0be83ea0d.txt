[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_payloads with id: 2025-01-30_11-42-36__b298887c-c378-466e-b1bb-9fb5be02f528
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3234
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-01-30_11-42-36__b298887c-c378-466e-b1bb-9fb5be02f528__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.130.89
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['43349', '43350', '43351', '43352', '43353']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 43349:43349 -p 43350:43350 -p 43351:43351 -p 43352:43352 -p 43353:43353 quay.io/wakuorg/nwaku-pr:3234 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=43351 --rest-port=43349 --tcp-port=43350 --discv5-udp-port=43352 --rest-address=0.0.0.0 --nat=extip:172.18.130.89 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0aa8eebabdbb94c6c29c70bfff5dc37ca34eb08030fdad10b3fbb070a6fc7bfb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=43353 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.130.89 waku b75cac1b186b177bf31f504f34d580b5c462b9c6ee907ed60a2d3ad62ce746e3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID b75cac1b186b. Setting up logs at ./log/docker/receiving_node1_2025-01-30_11-42-36__b298887c-c378-466e-b1bb-9fb5be02f528__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3234. REST: 43349
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 95e01b525236. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43349/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43349/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.130.89/tcp/43350/p2p/16Uiu2HAkvNjm1nKegErB21YLikyLq555Qz56SDd1snbDyLzgLJdE","/ip4/172.18.130.89/tcp/43351/ws/p2p/16Uiu2HAkvNjm1nKegErB21YLikyLq555Qz56SDd1snbDyLzgLJdE"],"enrUri":"enr:-L24QFqUUh_m3fiz6UCypQ3FzWEqUjMmIW95kyujSL-KKHT7EWqSUCqomDrQ-DsaUtZpp1VPTwmuJiucl0flLu5QRO0CgmlkgnY0gmlwhKwSglmKbXVsdGlhZGRyc5YACASsEoJZBqlWAAoErBKCWQapV90DgnJzhQADAQAAiXNlY3AyNTZrMaECDhs32uZ5Cv8mS8k1x0Q5_86JHVd-8abHqsI-ZC9XTWGDdGNwgqlWg3VkcIKpWIV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3234
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-01-30_11-42-36__b298887c-c378-466e-b1bb-9fb5be02f528__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.78.199
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['25259', '25260', '25261', '25262', '25263']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 25259:25259 -p 25260:25260 -p 25261:25261 -p 25262:25262 -p 25263:25263 quay.io/wakuorg/nwaku-pr:3234 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25261 --rest-port=25259 --tcp-port=25260 --discv5-udp-port=25262 --rest-address=0.0.0.0 --nat=extip:172.18.78.199 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=79b7aaecfad30df9ced708af9e4938eeb3d56f2ad2c409cf88cb8d14c4335f1c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25263 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.78.199 waku ada7a6054536d3d9310bc0e6969643ae8777812872bb0a3c53a109abd8eff37e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ada7a6054536. Setting up logs at ./log/docker/receiving_node2_2025-01-30_11-42-36__b298887c-c378-466e-b1bb-9fb5be02f528__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3234. REST: 25259
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25259/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25259/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.78.199/tcp/25260/p2p/16Uiu2HAmLZkJNXeowyntaZ7iWvUVVwcBYnghiWa5Fiyas5U79KoU","/ip4/172.18.78.199/tcp/25261/ws/p2p/16Uiu2HAmLZkJNXeowyntaZ7iWvUVVwcBYnghiWa5Fiyas5U79KoU"],"enrUri":"enr:-L24QJuA56JBn_wBjOtAmxzCk_48vHJOnuP8zj_-tPiOni6lFVMJyhZiXlr3nzMHsr0mub1nq1zA6EAyaduDT4m9CNQCgmlkgnY0gmlwhKwSTseKbXVsdGlhZGRyc5YACASsEk7HBmKsAAoErBJOxwZird0DgnJzhQADAQAAiXNlY3AyNTZrMaEDdYW0YrarSiB3RQ9ahaqFKqQzRqnU_fse6km9Kj1n6Y-DdGNwgmKsg3VkcIJiroV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25259/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.130.89/tcp/43350/p2p/16Uiu2HAkvNjm1nKegErB21YLikyLq555Qz56SDd1snbDyLzgLJdE"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3234
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-01-30_11-42-36__b298887c-c378-466e-b1bb-9fb5be02f528__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.208.170
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['43315', '43316', '43317', '43318', '43319']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 43315:43315 -p 43316:43316 -p 43317:43317 -p 43318:43318 -p 43319:43319 quay.io/wakuorg/nwaku-pr:3234 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=43317 --rest-port=43315 --tcp-port=43316 --discv5-udp-port=43318 --rest-address=0.0.0.0 --nat=extip:172.18.208.170 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=020418a8efbb2e9eddb8d332f9070df5b20fa2ad2dade57a7cb73c2903bafd1f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=43319 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QFqUUh_m3fiz6UCypQ3FzWEqUjMmIW95kyujSL-KKHT7EWqSUCqomDrQ-DsaUtZpp1VPTwmuJiucl0flLu5QRO0CgmlkgnY0gmlwhKwSglmKbXVsdGlhZGRyc5YACASsEoJZBqlWAAoErBKCWQapV90DgnJzhQADAQAAiXNlY3AyNTZrMaECDhs32uZ5Cv8mS8k1x0Q5_86JHVd-8abHqsI-ZC9XTWGDdGNwgqlWg3VkcIKpWIV3YWt1Mgk --lightpushnode=/ip4/172.18.130.89/tcp/43350/p2p/16Uiu2HAkvNjm1nKegErB21YLikyLq555Qz56SDd1snbDyLzgLJdE --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.208.170 waku ecf327bd578c7848cf1568494d518242857ea49936ab535a69a728c2fcec4a0c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ecf327bd578c. Setting up logs at ./log/docker/lightpush_node1_2025-01-30_11-42-36__b298887c-c378-466e-b1bb-9fb5be02f528__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3234. REST: 43315
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43315/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43315/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.208.170/tcp/43316/p2p/16Uiu2HAmAqCC4Ux7GsxtCLmwvcVEKmx1vMpaXTagackUKeX8ZjAt","/ip4/172.18.208.170/tcp/43317/ws/p2p/16Uiu2HAmAqCC4Ux7GsxtCLmwvcVEKmx1vMpaXTagackUKeX8ZjAt"],"enrUri":"enr:-L24QCqTIBen7wXziouvkmPFSfHEKsZ5N8XDLORuwXFgqEfbVclJb6w8p7tj2JGyRWO2U_hZe13LJLYknrIOx_L1MgYCgmlkgnY0gmlwhKwS0KqKbXVsdGlhZGRyc5YACASsEtCqBqk0AAoErBLQqgapNd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC5OXSoI8vcO2BbDi7tlmetIoQa0KCbSTT8FGe0SsSlJWDdGNwgqk0g3VkcIKpNoV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43315/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.130.89/tcp/43350/p2p/16Uiu2HAkvNjm1nKegErB21YLikyLq555Qz56SDd1snbDyLzgLJdE"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43315/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.78.199/tcp/25260/p2p/16Uiu2HAmLZkJNXeowyntaZ7iWvUVVwcBYnghiWa5Fiyas5U79KoU"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43349/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25259/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload Empty string
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43315/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738237360800738816}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:43315/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload Unecoded text
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43315/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "Hello World!", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738237360803715072}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:43315/lightpush/v1/message. Response content: b'Invalid message: Incorrect base64 string'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload A dictionary
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43315/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": {"key": "YWFh"}, "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738237360806539776}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:43315/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload An integer
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43315/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": 1234567890, "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738237360809320704}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:43315/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload A list
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43315/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": ["YWFh"], "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738237360812058880}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:43315/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:35 Running test with payload A bool
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43315/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": true, "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738237360814840064}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:43315/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id b75cac1b186b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id ada7a6054536
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container b75cac1b186b. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id ecf327bd578c
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container ada7a6054536. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.