[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_cant_publish_on_not_subscribed_shard with id: 2025-01-30_11-47-52__e7523150-13a8-4b2e-9d07-9e2d525eeaad
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3234
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-30_11-47-52__e7523150-13a8-4b2e-9d07-9e2d525eeaad__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.160.22
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['63710', '63711', '63712', '63713', '63714']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 63710:63710 -p 63711:63711 -p 63712:63712 -p 63713:63713 -p 63714:63714 quay.io/wakuorg/nwaku-pr:3234 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63712 --rest-port=63710 --tcp-port=63711 --discv5-udp-port=63713 --rest-address=0.0.0.0 --nat=extip:172.18.160.22 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=3dd90b4ebcdca2f7cf7abeec0aacda73e6ece23fe1f12c0bc9badecad49dced1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63714 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/2/0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.160.22 waku 55f44d64f72ececc3d0c21f2093b8e2c6c59086998766bce2c5c0fe5d2759bed
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 55f44d64f72e. Setting up logs at ./log/docker/node1_2025-01-30_11-47-52__e7523150-13a8-4b2e-9d07-9e2d525eeaad__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3234. REST: 63710
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 9fa9b0c5b9f1. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63710/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63710/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.160.22/tcp/63711/p2p/16Uiu2HAm5SgrrhZk1WhrW72FArUFd8wwF9gAk69MLoF3JUYbwH6s","/ip4/172.18.160.22/tcp/63712/ws/p2p/16Uiu2HAm5SgrrhZk1WhrW72FArUFd8wwF9gAk69MLoF3JUYbwH6s"],"enrUri":"enr:-L24QOTlsX55Owh9rj0MCHaHKlmzNBi0SlrZ2OkbkMO_0bIicylj-FKWyXFDfi0KcU9bhtOK9xw9BPb5yc8AmBYJXWECgmlkgnY0gmlwhKwSoBaKbXVsdGlhZGRyc5YACASsEqAWBvjfAAoErBKgFgb44N0DgnJzhQACAQAAiXNlY3AyNTZrMaEClNdyEG8XUaNFfoHr-aL11Vp4Ccs-3bfqM4LjPs_Ey8SDdGNwgvjfg3VkcIL44YV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3234
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-30_11-47-52__e7523150-13a8-4b2e-9d07-9e2d525eeaad__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.52.103
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['10490', '10491', '10492', '10493', '10494']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 10490:10490 -p 10491:10491 -p 10492:10492 -p 10493:10493 -p 10494:10494 quay.io/wakuorg/nwaku-pr:3234 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=10492 --rest-port=10490 --tcp-port=10491 --discv5-udp-port=10493 --rest-address=0.0.0.0 --nat=extip:172.18.52.103 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=ebbccd17855e8cea10be214f8ece09ce1fcdf6bcefeddd4bf07ab9ad11d8c5c3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=10494 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QOTlsX55Owh9rj0MCHaHKlmzNBi0SlrZ2OkbkMO_0bIicylj-FKWyXFDfi0KcU9bhtOK9xw9BPb5yc8AmBYJXWECgmlkgnY0gmlwhKwSoBaKbXVsdGlhZGRyc5YACASsEqAWBvjfAAoErBKgFgb44N0DgnJzhQACAQAAiXNlY3AyNTZrMaEClNdyEG8XUaNFfoHr-aL11Vp4Ccs-3bfqM4LjPs_Ey8SDdGNwgvjfg3VkcIL44YV3YWt1MgU --pubsub-topic=/waku/2/rs/2/0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.52.103 waku dbd0848991e0a482a22590a1a39efd1febb77d51ab7d7a6733e73ee2681cf863
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID dbd0848991e0. Setting up logs at ./log/docker/node2_2025-01-30_11-47-52__e7523150-13a8-4b2e-9d07-9e2d525eeaad__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3234. REST: 10490
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10490/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10490/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.52.103/tcp/10491/p2p/16Uiu2HAm1fA6BuHwS6g59V7eL97yb3ePuGqcQyadcFxmmHNUAqWn","/ip4/172.18.52.103/tcp/10492/ws/p2p/16Uiu2HAm1fA6BuHwS6g59V7eL97yb3ePuGqcQyadcFxmmHNUAqWn"],"enrUri":"enr:-L24QLKQ3cwvQ9nXUMcqo120hDaCcjCeZ_q37oF9tUqQtunoFn9dUCWtb7aSubzgN1mR96itl2cZK1wRmVXuR33VmsICgmlkgnY0gmlwhKwSNGeKbXVsdGlhZGRyc5YACASsEjRnBij7AAoErBI0ZwYo_N0DgnJzhQACAQAAiXNlY3AyNTZrMaECXJp02geTgkCC4i_GpUl1Ui87-E3wdFervWtzyuOcU7eDdGNwgij7g3VkcIIo_YV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10490/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.160.22/tcp/63711/p2p/16Uiu2HAm5SgrrhZk1WhrW72FArUFd8wwF9gAk69MLoF3JUYbwH6s"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63710/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10490/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63710/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F1" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:63710/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F1. Response content: b'Failed to publish: Node not subscribed to topic: /waku/2/rs/2/1'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 55f44d64f72e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id dbd0848991e0
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 55f44d64f72e. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.