[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_message_relayed_while_store_node_is_paused with id: 2025-01-30_11-46-10__45505392-445a-4575-ae72-7aa0c40c660c
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3234
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-01-30_11-46-10__45505392-445a-4575-ae72-7aa0c40c660c__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.222.77
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['19424', '19425', '19426', '19427', '19428']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 19424:19424 -p 19425:19425 -p 19426:19426 -p 19427:19427 -p 19428:19428 quay.io/wakuorg/nwaku-pr:3234 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19426 --rest-port=19424 --tcp-port=19425 --discv5-udp-port=19427 --rest-address=0.0.0.0 --nat=extip:172.18.222.77 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8fff505f5c62dcbf518db269bf9b8899d66a0829d19ac39a25e6e9baf9c35abc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19428 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.222.77 waku bf88d282901e6216e6317aaed6da5be93eedc94e7eef34f988dc786c76773a5d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID bf88d282901e. Setting up logs at ./log/docker/publishing_node1_2025-01-30_11-46-10__45505392-445a-4575-ae72-7aa0c40c660c__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3234. REST: 19424
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container e2c27feb3c48. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19424/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19424/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.222.77/tcp/19425/p2p/16Uiu2HAmPbMrv19oyhnT65rfVZGJikznBizr6Y1JDKV1yXUgKoAb","/ip4/172.18.222.77/tcp/19426/ws/p2p/16Uiu2HAmPbMrv19oyhnT65rfVZGJikznBizr6Y1JDKV1yXUgKoAb"],"enrUri":"enr:-L24QIv7zdJ3D50P_UAMytAo5d1cf71aMxxd53P_4x7MpZFpJm3cUtSaHfR3r22iyKpAL7V1tOQ3Y-eApnn6Ln_UQjwCgmlkgnY0gmlwhKwS3k2KbXVsdGlhZGRyc5YACASsEt5NBkvhAAoErBLeTQZL4t0DgnJzhQADAQAAiXNlY3AyNTZrMaEDooKOJZbgadPiVRh8XCkqgIx-xhxRFlv6U04dPxTA0kSDdGNwgkvhg3VkcIJL44V3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3234
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-01-30_11-46-10__45505392-445a-4575-ae72-7aa0c40c660c__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.204.176
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['41780', '41781', '41782', '41783', '41784']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 41780:41780 -p 41781:41781 -p 41782:41782 -p 41783:41783 -p 41784:41784 quay.io/wakuorg/nwaku-pr:3234 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=41782 --rest-port=41780 --tcp-port=41781 --discv5-udp-port=41783 --rest-address=0.0.0.0 --nat=extip:172.18.204.176 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=47f787b1605d648aba04f44f314a2d51acdb5eb7d2d4af7fc5ee0afabd0a0dee --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=41784 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QIv7zdJ3D50P_UAMytAo5d1cf71aMxxd53P_4x7MpZFpJm3cUtSaHfR3r22iyKpAL7V1tOQ3Y-eApnn6Ln_UQjwCgmlkgnY0gmlwhKwS3k2KbXVsdGlhZGRyc5YACASsEt5NBkvhAAoErBLeTQZL4t0DgnJzhQADAQAAiXNlY3AyNTZrMaEDooKOJZbgadPiVRh8XCkqgIx-xhxRFlv6U04dPxTA0kSDdGNwgkvhg3VkcIJL44V3YWt1MgM --storenode=/ip4/172.18.222.77/tcp/19425/p2p/16Uiu2HAmPbMrv19oyhnT65rfVZGJikznBizr6Y1JDKV1yXUgKoAb --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.204.176 waku 7b0688e0846af089d9d194e77569a73b72b6fa39106f86556951cd3b8f7d0329
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 7b0688e0846a. Setting up logs at ./log/docker/store_node1_2025-01-30_11-46-10__45505392-445a-4575-ae72-7aa0c40c660c__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3234. REST: 41780
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41780/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41780/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.204.176/tcp/41781/p2p/16Uiu2HAm5o27uezHX3JapHSbeVeGMeFXTj1wXYYDhNzNtCei91Zt","/ip4/172.18.204.176/tcp/41782/ws/p2p/16Uiu2HAm5o27uezHX3JapHSbeVeGMeFXTj1wXYYDhNzNtCei91Zt"],"enrUri":"enr:-L24QBxWh0ZQCf-oBLcA5JLno4ADwjsT0b1xXx3T89xCD16yaKG78ndxB4yKw_PntNA9Dx6OwKNSuhpSeqS9Z8z4QVcCgmlkgnY0gmlwhKwSzLCKbXVsdGlhZGRyc5YACASsEsywBqM1AAoErBLMsAajNt0DgnJzhQADAQAAiXNlY3AyNTZrMaECmgzWqedOnTuF7xB8R2ec2l3nsdcgLgq_akduJaKC36ODdGNwgqM1g3VkcIKjN4V3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41780/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.222.77/tcp/19425/p2p/16Uiu2HAmPbMrv19oyhnT65rfVZGJikznBizr6Y1JDKV1yXUgKoAb"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19424/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41780/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19424/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer quay.io/wakuorg/nwaku-pr:3234 can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19424/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xdf6df6b2165db1aeb27f64262b7660730784b84dcdd38f3dd59a16270066ad0f"}]}'
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer quay.io/wakuorg/nwaku-pr:3234 can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41780/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xdf6df6b2165db1aeb27f64262b7660730784b84dcdd38f3dd59a16270066ad0f"}]}'
[35mDEBUG   [0m src.node.waku_node:waku_node.py:254 Pausing container with id 7b0688e0846a
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19424/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.node.waku_node:waku_node.py:259 Unpause container with id 7b0688e0846a
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41780/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41780/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.204.176/tcp/41781/p2p/16Uiu2HAm5o27uezHX3JapHSbeVeGMeFXTj1wXYYDhNzNtCei91Zt","/ip4/172.18.204.176/tcp/41782/ws/p2p/16Uiu2HAm5o27uezHX3JapHSbeVeGMeFXTj1wXYYDhNzNtCei91Zt"],"enrUri":"enr:-L24QBxWh0ZQCf-oBLcA5JLno4ADwjsT0b1xXx3T89xCD16yaKG78ndxB4yKw_PntNA9Dx6OwKNSuhpSeqS9Z8z4QVcCgmlkgnY0gmlwhKwSzLCKbXVsdGlhZGRyc5YACASsEsywBqM1AAoErBLMsAajNt0DgnJzhQADAQAAiXNlY3AyNTZrMaECmgzWqedOnTuF7xB8R2ec2l3nsdcgLgq_akduJaKC36ODdGNwgqM1g3VkcIKjN4V3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer quay.io/wakuorg/nwaku-pr:3234 can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19424/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xdf6df6b2165db1aeb27f64262b7660730784b84dcdd38f3dd59a16270066ad0f"},{"messageHash":"0x9c47c1a4fc1121e0581ee5b206b13d5d50431e4246c87dc8550882741685dbec"}]}'
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer quay.io/wakuorg/nwaku-pr:3234 can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41780/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xdf6df6b2165db1aeb27f64262b7660730784b84dcdd38f3dd59a16270066ad0f"},{"messageHash":"0x9c47c1a4fc1121e0581ee5b206b13d5d50431e4246c87dc8550882741685dbec"}]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19424/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xdf6df6b2165db1aeb27f64262b7660730784b84dcdd38f3dd59a16270066ad0f"},{"messageHash":"0x9c47c1a4fc1121e0581ee5b206b13d5d50431e4246c87dc8550882741685dbec"}]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41780/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xdf6df6b2165db1aeb27f64262b7660730784b84dcdd38f3dd59a16270066ad0f"},{"messageHash":"0x9c47c1a4fc1121e0581ee5b206b13d5d50431e4246c87dc8550882741685dbec"}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id bf88d282901e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 7b0688e0846a
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container bf88d282901e. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.