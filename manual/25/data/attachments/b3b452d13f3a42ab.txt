[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_publish_with_no_timestamp with id: 2025-01-30_11-44-11__6173e1f8-e50e-40e9-9739-b67aae8b26eb
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.relay:relay.py:34 Running fixture setup: setup_main_relay_nodes
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3234
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-30_11-44-11__6173e1f8-e50e-40e9-9739-b67aae8b26eb__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.52.220
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['38972', '38973', '38974', '38975', '38976']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 38972:38972 -p 38973:38973 -p 38974:38974 -p 38975:38975 -p 38976:38976 quay.io/wakuorg/nwaku-pr:3234 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=38974 --rest-port=38972 --tcp-port=38973 --discv5-udp-port=38975 --rest-address=0.0.0.0 --nat=extip:172.18.52.220 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7d0fea5ac0aefafceb3affc15aa88e2ba11309faacf5afcde2efa5ebc36ef4ec --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=38976 --metrics-logging=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.52.220 waku ceca45ae37adc88ef5f84f6fa663bf3740950e2ebab234887b97cf3f70250038
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ceca45ae37ad. Setting up logs at ./log/docker/node1_2025-01-30_11-44-11__6173e1f8-e50e-40e9-9739-b67aae8b26eb__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3234. REST: 38972
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 361885a5e8d8. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38972/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38972/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.52.220/tcp/38973/p2p/16Uiu2HAmN8fg7BuHsnMEsQQxAc1vGbqWDch1TSSnTeF174ZMVemT","/ip4/172.18.52.220/tcp/38974/ws/p2p/16Uiu2HAmN8fg7BuHsnMEsQQxAc1vGbqWDch1TSSnTeF174ZMVemT"],"enrUri":"enr:-L24QDf4Nn_JS5HFFUdc_2MJjq_u5N1G9yjzoELI341Ijf3qcSb7Ik4USTuAK7Iui63QNRxZWT_MvGJoNKJOfcxVRV0CgmlkgnY0gmlwhKwSNNyKbXVsdGlhZGRyc5YACASsEjTcBpg9AAoErBI03AaYPt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDjNBUFqKxL7VEyh3IuCwpnwuJtuHB9HjC7K7KzDKDF6aDdGNwgpg9g3VkcIKYP4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3234
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-30_11-44-11__6173e1f8-e50e-40e9-9739-b67aae8b26eb__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.137.111
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['52626', '52627', '52628', '52629', '52630']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 52626:52626 -p 52627:52627 -p 52628:52628 -p 52629:52629 -p 52630:52630 quay.io/wakuorg/nwaku-pr:3234 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=52628 --rest-port=52626 --tcp-port=52627 --discv5-udp-port=52629 --rest-address=0.0.0.0 --nat=extip:172.18.137.111 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=be17d96e0e7dc8c57bbefbb4acfde22db8fe4ae6dbe28bb7fa47a59e6f2d38d8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=52630 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QDf4Nn_JS5HFFUdc_2MJjq_u5N1G9yjzoELI341Ijf3qcSb7Ik4USTuAK7Iui63QNRxZWT_MvGJoNKJOfcxVRV0CgmlkgnY0gmlwhKwSNNyKbXVsdGlhZGRyc5YACASsEjTcBpg9AAoErBI03AaYPt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDjNBUFqKxL7VEyh3IuCwpnwuJtuHB9HjC7K7KzDKDF6aDdGNwgpg9g3VkcIKYP4V3YWt1MgE
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.137.111 waku 0634fb3870bae584056ee4d5d7b7fb370cf07db158608cdc8d936db02419b4e7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 0634fb3870ba. Setting up logs at ./log/docker/node2_2025-01-30_11-44-11__6173e1f8-e50e-40e9-9739-b67aae8b26eb__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3234. REST: 52626
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52626/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52626/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.137.111/tcp/52627/p2p/16Uiu2HAm5Sip3PFfCgoDetHUS7FujdC9Ua34yE7hq8ehgEmYqUuc","/ip4/172.18.137.111/tcp/52628/ws/p2p/16Uiu2HAm5Sip3PFfCgoDetHUS7FujdC9Ua34yE7hq8ehgEmYqUuc"],"enrUri":"enr:-L24QE9bf8KieunS6YFv6s_9Xi0tdh6gjYnFnmWG8unz_k0aJO0QYwdBxUwrCjNLqLdXdjsHMbY-Mq4cJfnntiFrbMICgmlkgnY0gmlwhKwSiW-KbXVsdGlhZGRyc5YACASsEolvBs2TAAoErBKJbwbNlN0DgnJzhQADAQAAiXNlY3AyNTZrMaEClNmm7oSA3NaQFMva7VDiE-FzgJXzRJyWCvBqPvvQs2eDdGNwgs2Tg3VkcILNlYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52626/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.52.220/tcp/38973/p2p/16Uiu2HAmN8fg7BuHsnMEsQQxAc1vGbqWDch1TSSnTeF174ZMVemT"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.relay:relay.py:59 Running fixture setup: subscribe_main_relay_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38972/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52626/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38972/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.relay:relay.py:123 Checking that peer NODE_1:quay.io/wakuorg/nwaku-pr:3234 can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38972/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738237454428706816,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.relay:relay.py:123 Checking that peer NODE_2:quay.io/wakuorg/nwaku-pr:3234 can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52626/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738237454428706816,"ephemeral":false}]'
[32mINFO    [0m src.steps.relay:relay.py:71 WARM UP successful!!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38972/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.relay:relay.py:123 Checking that peer NODE_1:quay.io/wakuorg/nwaku-pr:3234 can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38972/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738237454548133376,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.relay:relay.py:123 Checking that peer NODE_2:quay.io/wakuorg/nwaku-pr:3234 can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52626/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738237454548133376,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id ceca45ae37ad
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 0634fb3870ba
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container ceca45ae37ad. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.