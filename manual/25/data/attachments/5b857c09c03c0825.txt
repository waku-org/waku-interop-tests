[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_only_lightpush__peer_full with id: 2025-01-30_11-43-05__a5d7b00a-0306-49de-a972-c0a365dae856
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3234
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-01-30_11-43-05__a5d7b00a-0306-49de-a972-c0a365dae856__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.234.78
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['11787', '11788', '11789', '11790', '11791']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 11787:11787 -p 11788:11788 -p 11789:11789 -p 11790:11790 -p 11791:11791 quay.io/wakuorg/nwaku-pr:3234 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=11789 --rest-port=11787 --tcp-port=11788 --discv5-udp-port=11790 --rest-address=0.0.0.0 --nat=extip:172.18.234.78 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a1dfa6e8fced9cc5bc9cceddd8abfbd736e2b13cdf6b2bfab2afbf1c9817b5eb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=11791 --metrics-logging=true --lightpush=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.234.78 waku 8a19a5de3330d4f0ec73f9b123269f613a272e9012e2c95fa607040088b66e6b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 8a19a5de3330. Setting up logs at ./log/docker/receiving_node1_2025-01-30_11-43-05__a5d7b00a-0306-49de-a972-c0a365dae856__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3234. REST: 11787
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 717abd570907. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11787/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11787/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.234.78/tcp/11788/p2p/16Uiu2HAm83edR9sZJaFquz4i9mWNcWzHHBBJn9aX6qBU8WzkY2uW","/ip4/172.18.234.78/tcp/11789/ws/p2p/16Uiu2HAm83edR9sZJaFquz4i9mWNcWzHHBBJn9aX6qBU8WzkY2uW"],"enrUri":"enr:-L24QCUE5cnpTVUa4m678uetj8Yxs_o-Qda9z0pdu7hPs9HSTYZzV-3iePqz8qNwmSBE1Vg0KLZuspbpJ6Qg7Gp1xoACgmlkgnY0gmlwhKwS6k6KbXVsdGlhZGRyc5YACASsEupOBi4MAAoErBLqTgYuDd0DgnJzhQADAQAAiXNlY3AyNTZrMaECu4Of0oetu7MbqQTvluzMwvDcdh70wVWPAmAzZwZeq_GDdGNwgi4Mg3VkcIIuDoV3YWt1Mg0"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3234
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-01-30_11-43-05__a5d7b00a-0306-49de-a972-c0a365dae856__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.62.24
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['43647', '43648', '43649', '43650', '43651']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 43647:43647 -p 43648:43648 -p 43649:43649 -p 43650:43650 -p 43651:43651 quay.io/wakuorg/nwaku-pr:3234 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=43649 --rest-port=43647 --tcp-port=43648 --discv5-udp-port=43650 --rest-address=0.0.0.0 --nat=extip:172.18.62.24 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2aaecaafaf839ca8058622bccbfe2adb012a0ba5cef2fec5a6fb9afdbfe59faf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=43651 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.62.24 waku 73156c8cd391b5e3e6b687e2298e91a3b49f1027a7ad358c3564e14d3d4d4e30
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 73156c8cd391. Setting up logs at ./log/docker/receiving_node2_2025-01-30_11-43-05__a5d7b00a-0306-49de-a972-c0a365dae856__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3234. REST: 43647
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43647/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43647/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.62.24/tcp/43648/p2p/16Uiu2HAmVrLsXMwkm7UKpNZDwAkahb4DefnbFx953RBQQRUAyLXf","/ip4/172.18.62.24/tcp/43649/ws/p2p/16Uiu2HAmVrLsXMwkm7UKpNZDwAkahb4DefnbFx953RBQQRUAyLXf"],"enrUri":"enr:-L24QHj9MIrVDb3KvSU0cP7lINJHpssSdXCltnLV0l-pHQg2fQEINxQnWSuQW1EIXo_3-qCTyzeD2cSWrbIkSiTXczQCgmlkgnY0gmlwhKwSPhiKbXVsdGlhZGRyc5YACASsEj4YBqqAAAoErBI-GAaqgd0DgnJzhQADAQAAiXNlY3AyNTZrMaED_39FJ6f4GG3tJHIh9bOT3qpEcaisPAhtyuBvNSIuSU6DdGNwgqqAg3VkcIKqgoV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43647/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.234.78/tcp/11788/p2p/16Uiu2HAm83edR9sZJaFquz4i9mWNcWzHHBBJn9aX6qBU8WzkY2uW"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3234
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-01-30_11-43-05__a5d7b00a-0306-49de-a972-c0a365dae856__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.145.95
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['47378', '47379', '47380', '47381', '47382']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 47378:47378 -p 47379:47379 -p 47380:47380 -p 47381:47381 -p 47382:47382 quay.io/wakuorg/nwaku-pr:3234 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=47380 --rest-port=47378 --tcp-port=47379 --discv5-udp-port=47381 --rest-address=0.0.0.0 --nat=extip:172.18.145.95 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3b4ec65c06520a1df73f29da6ec71a5ff7f85ce2c8377a5e3ebfffb96aed907b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=47382 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QCUE5cnpTVUa4m678uetj8Yxs_o-Qda9z0pdu7hPs9HSTYZzV-3iePqz8qNwmSBE1Vg0KLZuspbpJ6Qg7Gp1xoACgmlkgnY0gmlwhKwS6k6KbXVsdGlhZGRyc5YACASsEupOBi4MAAoErBLqTgYuDd0DgnJzhQADAQAAiXNlY3AyNTZrMaECu4Of0oetu7MbqQTvluzMwvDcdh70wVWPAmAzZwZeq_GDdGNwgi4Mg3VkcIIuDoV3YWt1Mg0 --lightpushnode=/ip4/172.18.234.78/tcp/11788/p2p/16Uiu2HAm83edR9sZJaFquz4i9mWNcWzHHBBJn9aX6qBU8WzkY2uW --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.145.95 waku 2b2c20672a8cf6c434db0f792c9b5b1d5dae2651d04288577b166a300d0b297a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 2b2c20672a8c. Setting up logs at ./log/docker/lightpush_node1_2025-01-30_11-43-05__a5d7b00a-0306-49de-a972-c0a365dae856__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3234. REST: 47378
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47378/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47378/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.145.95/tcp/47379/p2p/16Uiu2HAmAEKwxUKAHoFtC1Dfad6zq9aTEDGoKjBbP89aqfNtDyiU","/ip4/172.18.145.95/tcp/47380/ws/p2p/16Uiu2HAmAEKwxUKAHoFtC1Dfad6zq9aTEDGoKjBbP89aqfNtDyiU"],"enrUri":"enr:-L24QE3bzUl_trMT01vFYunIR_Ow4Mcbg34ocpmUXhkxibU5NoxeWHsLm6jEGUgLEtRyy7ZUu5XGOj1pKqvvC8cCdM0CgmlkgnY0gmlwhKwSkV-KbXVsdGlhZGRyc5YACASsEpFfBrkTAAoErBKRXwa5FN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC2_dD3zfk3QGjTs4s7RP73N8YEF_mwq3nht4WXaM7hfWDdGNwgrkTg3VkcIK5FYV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47378/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.234.78/tcp/11788/p2p/16Uiu2HAm83edR9sZJaFquz4i9mWNcWzHHBBJn9aX6qBU8WzkY2uW"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47378/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.62.24/tcp/43648/p2p/16Uiu2HAmVrLsXMwkm7UKpNZDwAkahb4DefnbFx953RBQQRUAyLXf"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11787/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43647/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47378/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738237389966315008}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:quay.io/wakuorg/nwaku-pr:3234 can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11787/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738237389966315008,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:quay.io/wakuorg/nwaku-pr:3234 can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43647/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738237389966315008,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 8a19a5de3330
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 73156c8cd391
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 8a19a5de3330. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 2b2c20672a8c
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 73156c8cd391. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.