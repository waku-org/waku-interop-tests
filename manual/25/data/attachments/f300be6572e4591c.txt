[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_msg_stored_when_ephemeral_false with id: 2025-01-30_11-42-36__4bca44c3-bb5c-4eec-baf8-0381aaa02517
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3234
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-30_11-42-36__4bca44c3-bb5c-4eec-baf8-0381aaa02517__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3234
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-30_11-42-36__4bca44c3-bb5c-4eec-baf8-0381aaa02517__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3234
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2025-01-30_11-42-36__4bca44c3-bb5c-4eec-baf8-0381aaa02517__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:414 Start 3 nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.109.34
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['17286', '17287', '17288', '17289', '17290']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 17286:17286 -p 17287:17287 -p 17288:17288 -p 17289:17289 -p 17290:17290 quay.io/wakuorg/nwaku-pr:3234 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17288 --rest-port=17286 --tcp-port=17287 --discv5-udp-port=17289 --rest-address=0.0.0.0 --nat=extip:172.18.109.34 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fdca971c96dde6fdc6dfefcc608e3fe633a7facbbc255bcfb31f8fc8a7309094 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17290 --metrics-logging=true --relay=true --store=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.109.34 waku 5871a37f85e3b826befc49a6cc327c38c7275e5b2d54386a1ff894aa79696f40
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 5871a37f85e3. Setting up logs at ./log/docker/node1_2025-01-30_11-42-36__4bca44c3-bb5c-4eec-baf8-0381aaa02517__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3234. REST: 17286
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 6868caeb5531. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17286/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17286/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.109.34/tcp/17287/p2p/16Uiu2HAmG8S8DWvwn4ErktLe1wde7EAnBR2LAzvRKKhEfrfkVPZE","/ip4/172.18.109.34/tcp/17288/ws/p2p/16Uiu2HAmG8S8DWvwn4ErktLe1wde7EAnBR2LAzvRKKhEfrfkVPZE"],"enrUri":"enr:-L24QOKlygRizpBKrgnD1xyLIi0XSyAr8I4p4OQ1TV15ovy5RyoYkDt_--J-yPjLy5a0FztqwS4dafGf5heVSTMd4MkCgmlkgnY0gmlwhKwSbSKKbXVsdGlhZGRyc5YACASsEm0iBkOHAAoErBJtIgZDiN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDM5ri1I-1Dmbfs9qoOCXphRnFD1pceQMjKQPNrtfdInWDdGNwgkOHg3VkcIJDiYV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.114.116
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['38427', '38428', '38429', '38430', '38431']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 38427:38427 -p 38428:38428 -p 38429:38429 -p 38430:38430 -p 38431:38431 quay.io/wakuorg/nwaku-pr:3234 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=38429 --rest-port=38427 --tcp-port=38428 --discv5-udp-port=38430 --rest-address=0.0.0.0 --nat=extip:172.18.114.116 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c6bf5f0eb715e5b3bed7aca44afe7eb1c9eebacf17038f7cbdcb22e3bfe6bc56 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=38431 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-L24QOKlygRizpBKrgnD1xyLIi0XSyAr8I4p4OQ1TV15ovy5RyoYkDt_--J-yPjLy5a0FztqwS4dafGf5heVSTMd4MkCgmlkgnY0gmlwhKwSbSKKbXVsdGlhZGRyc5YACASsEm0iBkOHAAoErBJtIgZDiN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDM5ri1I-1Dmbfs9qoOCXphRnFD1pceQMjKQPNrtfdInWDdGNwgkOHg3VkcIJDiYV3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.114.116 waku df96052fcd1c23139e30d552b1ef5762177812965e94459036cd8dd4ebeabfdf
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID df96052fcd1c. Setting up logs at ./log/docker/node2_2025-01-30_11-42-36__4bca44c3-bb5c-4eec-baf8-0381aaa02517__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3234. REST: 38427
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38427/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38427/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.114.116/tcp/38428/p2p/16Uiu2HAmMG1DCckfvToopK1Zcu9hB6js7xfpAdyugpvSrRG6ZD3c","/ip4/172.18.114.116/tcp/38429/ws/p2p/16Uiu2HAmMG1DCckfvToopK1Zcu9hB6js7xfpAdyugpvSrRG6ZD3c"],"enrUri":"enr:-L24QBfIr8tjevrdyy90P4fxsrHHYgs0rZKLf0o2zFet7_ldA8ZlaIP61Z1057cgv-8BDCCw8Uexx7L79cnPSTWPnPwCgmlkgnY0gmlwhKwScnSKbXVsdGlhZGRyc5YACASsEnJ0BpYcAAoErBJydAaWHd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDf9XL90zFtTcabKkOnOxceBpOBGHBjCc8OngyD6oJkHeDdGNwgpYcg3VkcIKWHoV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.219.206
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['27020', '27021', '27022', '27023', '27024']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 27020:27020 -p 27021:27021 -p 27022:27022 -p 27023:27023 -p 27024:27024 quay.io/wakuorg/nwaku-pr:3234 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27022 --rest-port=27020 --tcp-port=27021 --discv5-udp-port=27023 --rest-address=0.0.0.0 --nat=extip:172.18.219.206 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2c5faf9759d2b1f51217dc0fd6b89fd3dbf2a74d9acf4bbaaeb9eefaa2bc2c7d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27024 --metrics-logging=true --relay=false --storenode=/ip4/172.18.114.116/tcp/38428/p2p/16Uiu2HAmMG1DCckfvToopK1Zcu9hB6js7xfpAdyugpvSrRG6ZD3c --discv5-bootstrap-node=enr:-L24QBfIr8tjevrdyy90P4fxsrHHYgs0rZKLf0o2zFet7_ldA8ZlaIP61Z1057cgv-8BDCCw8Uexx7L79cnPSTWPnPwCgmlkgnY0gmlwhKwScnSKbXVsdGlhZGRyc5YACASsEnJ0BpYcAAoErBJydAaWHd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDf9XL90zFtTcabKkOnOxceBpOBGHBjCc8OngyD6oJkHeDdGNwgpYcg3VkcIKWHoV3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.219.206 waku 388135fea41e2489e23b010f31013a4ce7041aff4e2503f61f40eca07ada882a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 388135fea41e. Setting up logs at ./log/docker/node3_2025-01-30_11-42-36__4bca44c3-bb5c-4eec-baf8-0381aaa02517__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3234. REST: 27020
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27020/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27020/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.219.206/tcp/27021/p2p/16Uiu2HAm2SgAryKrpSaXQzD9CnzGgdoNuZCqj3qPkMnPr7XAmEYS","/ip4/172.18.219.206/tcp/27022/ws/p2p/16Uiu2HAm2SgAryKrpSaXQzD9CnzGgdoNuZCqj3qPkMnPr7XAmEYS"],"enrUri":"enr:-L24QLROvd-Xnxj6MR5KzXYu1f7ylrbY8-JkhuedNZAsuoZKK6JMQgkN-ZepEbHg7nrolmTR3LotF_1li-fBSO-skBECgmlkgnY0gmlwhKwS286KbXVsdGlhZGRyc5YACASsEtvOBmmNAAoErBLbzgZpjt0DgnJzhQADAQAAiXNlY3AyNTZrMaECaEOa5oUIiULJKsjccT9NJXXDtcJ49w9pcW5vPUXcRyODdGNwgmmNg3VkcIJpj4V3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:419 Subscribe node1 ,2 to pubtopic /waku/2/rs/3/1
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:17286/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38427/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17286/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.114.116/tcp/38428/p2p/16Uiu2HAmMG1DCckfvToopK1Zcu9hB6js7xfpAdyugpvSrRG6ZD3c","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38427/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.109.34/tcp/17287/p2p/16Uiu2HAmG8S8DWvwn4ErktLe1wde7EAnBR2LAzvRKKhEfrfkVPZE","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 30 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:424 Node1 publish message with ephemeral = false
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:17286/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "ephemeral": false}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 3 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:428 Check if message is stored 
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer quay.io/wakuorg/nwaku-pr:3234 can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27020/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"6ac9261568bbe113123f","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x49cb0172cec64d05570984081e6ec5311d472597b0d160aa3341850f0653ca21"}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 5871a37f85e3
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id df96052fcd1c
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 5871a37f85e3. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 388135fea41e
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container df96052fcd1c. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.