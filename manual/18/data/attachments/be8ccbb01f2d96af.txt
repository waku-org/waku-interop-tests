[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_node_not_connected_directly_to_relaying_node with id: 2025-01-17_11-53-01__946097c6-0048-4b9e-b288-31ba07ac7beb
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3240
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-17_11-53-01__946097c6-0048-4b9e-b288-31ba07ac7beb__quay.io_wakuorg_nwaku-pr:3240.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3240
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-17_11-53-01__946097c6-0048-4b9e-b288-31ba07ac7beb__quay.io_wakuorg_nwaku-pr:3240.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3240
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2025-01-17_11-53-01__946097c6-0048-4b9e-b288-31ba07ac7beb__quay.io_wakuorg_nwaku-pr:3240.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:33 Network waku created
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.43.121
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['41887', '41888', '41889', '41890', '41891']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 41887:41887 -p 41888:41888 -p 41889:41889 -p 41890:41890 -p 41891:41891 quay.io/wakuorg/nwaku-pr:3240 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=41889 --rest-port=41887 --tcp-port=41888 --discv5-udp-port=41890 --rest-address=0.0.0.0 --nat=extip:172.18.43.121 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=aab1fa7b14b6e74ddecb0e8b01abcd41c04d5c6a2b97e7bebbdfcce9c909eafb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=41891 --metrics-logging=true --filter=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.43.121 waku b7a4dcd0756f9630d99938c1db5d4315442f54b4a3d2dca7d0709837bef3eede
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID b7a4dcd0756f. Setting up logs at ./log/docker/node1_2025-01-17_11-53-01__946097c6-0048-4b9e-b288-31ba07ac7beb__quay.io_wakuorg_nwaku-pr:3240.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3240. REST: 41887
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41887/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41887/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.43.121/tcp/41888/p2p/16Uiu2HAm3cDUy8oY8vS4BxVux9JeQacQMyVUMGsboRJZf8jowRgB","/ip4/172.18.43.121/tcp/41889/ws/p2p/16Uiu2HAm3cDUy8oY8vS4BxVux9JeQacQMyVUMGsboRJZf8jowRgB"],"enrUri":"enr:-L24QBEGoZ_9ta6V5aFAKgfPltys9AfDSj5F4dsgVS8oZjrtHurDaDr3Ca-mShISsmfJttfCPkh0byNmb3I5OXsUZ4ECgmlkgnY0gmlwhKwSK3mKbXVsdGlhZGRyc5YACASsEit5BqOgAAoErBIreQajod0DgnJzhQADAQAAiXNlY3AyNTZrMaECeZDskHdIk6nMIs_Up6SYNw5mkXc5jza5lAMYR6d5MpCDdGNwgqOgg3VkcIKjooV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.146.105
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['16247', '16248', '16249', '16250', '16251']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 16247:16247 -p 16248:16248 -p 16249:16249 -p 16250:16250 -p 16251:16251 quay.io/wakuorg/nwaku-pr:3240 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=16249 --rest-port=16247 --tcp-port=16248 --discv5-udp-port=16250 --rest-address=0.0.0.0 --nat=extip:172.18.146.105 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=47ac5266a345db2739d6ecefb607c39e3cca455ba50dc5cfca4ccbe721fcff08 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=16251 --metrics-logging=true --filter=true --relay=true --discv5-bootstrap-node=enr:-L24QBEGoZ_9ta6V5aFAKgfPltys9AfDSj5F4dsgVS8oZjrtHurDaDr3Ca-mShISsmfJttfCPkh0byNmb3I5OXsUZ4ECgmlkgnY0gmlwhKwSK3mKbXVsdGlhZGRyc5YACASsEit5BqOgAAoErBIreQajod0DgnJzhQADAQAAiXNlY3AyNTZrMaECeZDskHdIk6nMIs_Up6SYNw5mkXc5jza5lAMYR6d5MpCDdGNwgqOgg3VkcIKjooV3YWt1MgU
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.146.105 waku f0bb85b63b6f6fceb52672a0bc2417d8fe6a1f880cc1bfd8c60a46e53d1843c6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID f0bb85b63b6f. Setting up logs at ./log/docker/node2_2025-01-17_11-53-01__946097c6-0048-4b9e-b288-31ba07ac7beb__quay.io_wakuorg_nwaku-pr:3240.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3240. REST: 16247
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16247/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16247/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.146.105/tcp/16248/p2p/16Uiu2HAkzCnsNorwaYHmMeHeChyvSYbyJeFLWJUDCLH42DsJWGXg","/ip4/172.18.146.105/tcp/16249/ws/p2p/16Uiu2HAkzCnsNorwaYHmMeHeChyvSYbyJeFLWJUDCLH42DsJWGXg"],"enrUri":"enr:-L24QH8EC8Zv-mYzoHuubDpBTn2K0pCJ0vxeBAvvWns0liIhVV2ySS_w36jYViIM0xrQzqaWorgdb2sqQDFYxEH9wPsCgmlkgnY0gmlwhKwSkmmKbXVsdGlhZGRyc5YACASsEpJpBj94AAoErBKSaQY_ed0DgnJzhQADAQAAiXNlY3AyNTZrMaECRv2sh7vQ9oBK6fjKXyj2tXDBX_0R2Q7k1yZUz5WHVmeDdGNwgj94g3VkcII_eoV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.41.245
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['50499', '50500', '50501', '50502', '50503']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 50499:50499 -p 50500:50500 -p 50501:50501 -p 50502:50502 -p 50503:50503 quay.io/wakuorg/nwaku-pr:3240 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=50501 --rest-port=50499 --tcp-port=50500 --discv5-udp-port=50502 --rest-address=0.0.0.0 --nat=extip:172.18.41.245 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e133aebeda41dffc44c38c4039dae73a5c4fff2e03fbda24e8aa4f1bcebe65eb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=50503 --metrics-logging=true --relay=false --filternode=/ip4/172.18.146.105/tcp/16248/p2p/16Uiu2HAkzCnsNorwaYHmMeHeChyvSYbyJeFLWJUDCLH42DsJWGXg --discv5-bootstrap-node=enr:-L24QH8EC8Zv-mYzoHuubDpBTn2K0pCJ0vxeBAvvWns0liIhVV2ySS_w36jYViIM0xrQzqaWorgdb2sqQDFYxEH9wPsCgmlkgnY0gmlwhKwSkmmKbXVsdGlhZGRyc5YACASsEpJpBj94AAoErBKSaQY_ed0DgnJzhQADAQAAiXNlY3AyNTZrMaECRv2sh7vQ9oBK6fjKXyj2tXDBX_0R2Q7k1yZUz5WHVmeDdGNwgj94g3VkcII_eoV3YWt1MgU
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.41.245 waku 70f7d06b8494940a12568a0de279c3bfcb840ee9da78fcc5f0e24532258806bb
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 70f7d06b8494. Setting up logs at ./log/docker/node3_2025-01-17_11-53-01__946097c6-0048-4b9e-b288-31ba07ac7beb__quay.io_wakuorg_nwaku-pr:3240.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3240. REST: 50499
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50499/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50499/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.41.245/tcp/50500/p2p/16Uiu2HAmBtHxQnsKFBt65zVW9TmuGBFwLniLwCBHTny8iuuXjax3","/ip4/172.18.41.245/tcp/50501/ws/p2p/16Uiu2HAmBtHxQnsKFBt65zVW9TmuGBFwLniLwCBHTny8iuuXjax3"],"enrUri":"enr:-L24QLq-oLG5U9C5IeDjUyrrMNLtiCV9t__kjcyYWfbcrUVzYg1_-4l2h8dEb4dsxlec0N8uBBomRnqiJ3KQsFSoKR0CgmlkgnY0gmlwhKwSKfWKbXVsdGlhZGRyc5YACASsEin1BsVEAAoErBIp9QbFRd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC9IzFLiWs7zvx2mTnWErL8QUPOf6y01QGE1eeatOmA4yDdGNwgsVEg3VkcILFRoV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41887/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16247/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:50499/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41887/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.146.105/tcp/16248/p2p/16Uiu2HAkzCnsNorwaYHmMeHeChyvSYbyJeFLWJUDCLH42DsJWGXg","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16247/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.43.121/tcp/41888/p2p/16Uiu2HAm3cDUy8oY8vS4BxVux9JeQacQMyVUMGsboRJZf8jowRgB","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"},{"multiaddr":"/ip4/172.18.41.245/tcp/50500/p2p/16Uiu2HAmBtHxQnsKFBt65zVW9TmuGBFwLniLwCBHTny8iuuXjax3","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50499/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.146.105/tcp/16248/p2p/16Uiu2HAkzCnsNorwaYHmMeHeChyvSYbyJeFLWJUDCLH42DsJWGXg","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41887/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:quay.io/wakuorg/nwaku-pr:3240 can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50499/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1737114820911647744,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id b7a4dcd0756f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id f0bb85b63b6f
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container b7a4dcd0756f. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 70f7d06b8494
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container f0bb85b63b6f. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.