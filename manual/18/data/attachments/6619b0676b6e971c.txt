[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_message_with_ephemeral_false with id: 2025-01-17_12-00-05__0751919c-4341-4d8e-aa8c-a48e1537ef0d
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3240
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-01-17_12-00-05__0751919c-4341-4d8e-aa8c-a48e1537ef0d__quay.io_wakuorg_nwaku-pr:3240.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.132.27
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['24478', '24479', '24480', '24481', '24482']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 24478:24478 -p 24479:24479 -p 24480:24480 -p 24481:24481 -p 24482:24482 quay.io/wakuorg/nwaku-pr:3240 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=24480 --rest-port=24478 --tcp-port=24479 --discv5-udp-port=24481 --rest-address=0.0.0.0 --nat=extip:172.18.132.27 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d6ca8dad4eaead10f695dd0ca096c9c43386cef1adad0b21c44233ec6fadaee4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=24482 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.132.27 waku 5ae557fbf418ad305287f35c56d7b2f5553fc32cbf0849a9b1b4866104788e1d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 5ae557fbf418. Setting up logs at ./log/docker/publishing_node1_2025-01-17_12-00-05__0751919c-4341-4d8e-aa8c-a48e1537ef0d__quay.io_wakuorg_nwaku-pr:3240.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3240. REST: 24478
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container dbbc15b31abd. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24478/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24478/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.132.27/tcp/24479/p2p/16Uiu2HAmQo78L5d3qD8t788rcNB7DaqEuV6oqvyu5E8Vrs6Sss8h","/ip4/172.18.132.27/tcp/24480/ws/p2p/16Uiu2HAmQo78L5d3qD8t788rcNB7DaqEuV6oqvyu5E8Vrs6Sss8h"],"enrUri":"enr:-L24QFz_RjF8EOe0i9E8LhqQgSSBtFOi9uWiwnU-NgeDXkQWOEwSi1fgyABEydX22WwZBfaaWDze_jy5_-2cMgH8lFUCgmlkgnY0gmlwhKwShBuKbXVsdGlhZGRyc5YACASsEoQbBl-fAAoErBKEGwZfoN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDtGCNRpa5SrbhTWC2qmItNsBli0jAV0jw77NSxI0-4kaDdGNwgl-fg3VkcIJfoYV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3240
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-01-17_12-00-05__0751919c-4341-4d8e-aa8c-a48e1537ef0d__quay.io_wakuorg_nwaku-pr:3240.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.128.194
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['64314', '64315', '64316', '64317', '64318']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 64314:64314 -p 64315:64315 -p 64316:64316 -p 64317:64317 -p 64318:64318 quay.io/wakuorg/nwaku-pr:3240 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64316 --rest-port=64314 --tcp-port=64315 --discv5-udp-port=64317 --rest-address=0.0.0.0 --nat=extip:172.18.128.194 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d784ace09bb20afdfec03e837f01a431d945d3efce67ab2ff1fefffaab84414f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64318 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QFz_RjF8EOe0i9E8LhqQgSSBtFOi9uWiwnU-NgeDXkQWOEwSi1fgyABEydX22WwZBfaaWDze_jy5_-2cMgH8lFUCgmlkgnY0gmlwhKwShBuKbXVsdGlhZGRyc5YACASsEoQbBl-fAAoErBKEGwZfoN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDtGCNRpa5SrbhTWC2qmItNsBli0jAV0jw77NSxI0-4kaDdGNwgl-fg3VkcIJfoYV3YWt1MgM --storenode=/ip4/172.18.132.27/tcp/24479/p2p/16Uiu2HAmQo78L5d3qD8t788rcNB7DaqEuV6oqvyu5E8Vrs6Sss8h --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.128.194 waku e1ca144c0c263d8d66d6dec2eb065d0b2aa3e8d7b7592332cdda900a5794413a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID e1ca144c0c26. Setting up logs at ./log/docker/store_node1_2025-01-17_12-00-05__0751919c-4341-4d8e-aa8c-a48e1537ef0d__quay.io_wakuorg_nwaku-pr:3240.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3240. REST: 64314
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64314/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64314/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.128.194/tcp/64315/p2p/16Uiu2HAm2kB2KWi1GFgrG2NDsVhgCVRYsPVYcwKpaF419LArjhGf","/ip4/172.18.128.194/tcp/64316/ws/p2p/16Uiu2HAm2kB2KWi1GFgrG2NDsVhgCVRYsPVYcwKpaF419LArjhGf"],"enrUri":"enr:-L24QE_bLan5uBo-tC0izf1x49MIFIjM33aQZGnZqIRf0GzIa881rSHPnJNH6TLhUmsEA0rkPLcnr7NsOmoPS8tXyloCgmlkgnY0gmlwhKwSgMKKbXVsdGlhZGRyc5YACASsEoDCBvs7AAoErBKAwgb7PN0DgnJzhQADAQAAiXNlY3AyNTZrMaECbL8aSuvWUvdUAiYTvurOPwFt-MAAAOFH2xPLrF_ZByyDdGNwgvs7g3VkcIL7PYV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64314/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.132.27/tcp/24479/p2p/16Uiu2HAmQo78L5d3qD8t788rcNB7DaqEuV6oqvyu5E8Vrs6Sss8h"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24478/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64314/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24478/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)', "ephemeral": false}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer quay.io/wakuorg/nwaku-pr:3240 can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24478/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"3Fc/TGXtBYd8thCfKPGdANtLY1BtCZJr4WKnoANYUiE="}]}'
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer quay.io/wakuorg/nwaku-pr:3240 can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64314/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"3Fc/TGXtBYd8thCfKPGdANtLY1BtCZJr4WKnoANYUiE="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 5ae557fbf418
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id e1ca144c0c26
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 5ae557fbf418. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.