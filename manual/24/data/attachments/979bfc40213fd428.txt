[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_pubsub_topic_not_in_docker_flags with id: 2025-01-30_11-14-28__623329a9-03d6-498b-b78d-34e86b7061de
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3234
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-30_11-14-28__623329a9-03d6-498b-b78d-34e86b7061de__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.188.130
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['19476', '19477', '19478', '19479', '19480']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 19476:19476 -p 19477:19477 -p 19478:19478 -p 19479:19479 -p 19480:19480 quay.io/wakuorg/nwaku-pr:3234 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19478 --rest-port=19476 --tcp-port=19477 --discv5-udp-port=19479 --rest-address=0.0.0.0 --nat=extip:172.18.188.130 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=c170bfb20bda60cb14d60b57a9fd4ef89aefb63b5abd4ad6f2fc14b72500bac5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19480 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.188.130 waku 9f633e7962e9c836f584c852949b93bea1011bb1e18d8f1bc6cbd3ba87d18b94
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 9f633e7962e9. Setting up logs at ./log/docker/node1_2025-01-30_11-14-28__623329a9-03d6-498b-b78d-34e86b7061de__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3234. REST: 19476
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 61db27bfc82b. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19476/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19476/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.188.130/tcp/19477/p2p/16Uiu2HAm4c7YwvmyZnQ2XHJoXJ86gYtCp5QYCEejkF5nRaMsUWah","/ip4/172.18.188.130/tcp/19478/ws/p2p/16Uiu2HAm4c7YwvmyZnQ2XHJoXJ86gYtCp5QYCEejkF5nRaMsUWah"],"enrUri":"enr:-L24QFHSmG_ti70C2wY8xiLmziapS8Dl72acAexBpul5u4npWQ6rsAZDR0kgymoqXk0E4WsWmVuls9umGRuaPx6GqsACgmlkgnY0gmlwhKwSvIKKbXVsdGlhZGRyc5YACASsEryCBkwVAAoErBK8ggZMFt0DgnJzhQACAQAAiXNlY3AyNTZrMaECiGXng_7aCf1L4aRoqQ5iDbZ8Hy5UPGQo2gkRZHh4M86DdGNwgkwVg3VkcIJMF4V3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3234
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-30_11-14-28__623329a9-03d6-498b-b78d-34e86b7061de__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.171.144
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['34718', '34719', '34720', '34721', '34722']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 34718:34718 -p 34719:34719 -p 34720:34720 -p 34721:34721 -p 34722:34722 quay.io/wakuorg/nwaku-pr:3234 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34720 --rest-port=34718 --tcp-port=34719 --discv5-udp-port=34721 --rest-address=0.0.0.0 --nat=extip:172.18.171.144 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=fe8a4cec0f9020a0d94b2c9a16fe3b0b2e75ceda4b889be0be23d1c0ce0b3275 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34722 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-L24QFHSmG_ti70C2wY8xiLmziapS8Dl72acAexBpul5u4npWQ6rsAZDR0kgymoqXk0E4WsWmVuls9umGRuaPx6GqsACgmlkgnY0gmlwhKwSvIKKbXVsdGlhZGRyc5YACASsEryCBkwVAAoErBK8ggZMFt0DgnJzhQACAQAAiXNlY3AyNTZrMaECiGXng_7aCf1L4aRoqQ5iDbZ8Hy5UPGQo2gkRZHh4M86DdGNwgkwVg3VkcIJMF4V3YWt1MgU
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.171.144 waku 17e1f0c0aeb82adba9e451154a45b80f27b5589449817f72c235bd3deda958c3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 17e1f0c0aeb8. Setting up logs at ./log/docker/node2_2025-01-30_11-14-28__623329a9-03d6-498b-b78d-34e86b7061de__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3234. REST: 34718
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34718/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34718/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.171.144/tcp/34719/p2p/16Uiu2HAkuUegAfCniTs5EY9mrccCvR6F3rzoKXfH9RcTGm4DAYSe","/ip4/172.18.171.144/tcp/34720/ws/p2p/16Uiu2HAkuUegAfCniTs5EY9mrccCvR6F3rzoKXfH9RcTGm4DAYSe"],"enrUri":"enr:-L24QFSwa1I8RQ3n9dgW9_Kq4z1dlcyGKRAsz9L4o7F1yTqMEoNn9U-9bj-4b-1L0rKTWt4xNHAGUsuutd0gF3xfd94CgmlkgnY0gmlwhKwSq5CKbXVsdGlhZGRyc5YACASsEquQBoefAAoErBKrkAaHoN0DgnJzhQACAQAAiXNlY3AyNTZrMaECAMNEomu_7AGsZ0pgI77Xg87KLqxbgHJP65_AF9ofnrODdGNwgoefg3VkcIKHoYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34718/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.188.130/tcp/19477/p2p/16Uiu2HAm4c7YwvmyZnQ2XHJoXJ86gYtCp5QYCEejkF5nRaMsUWah"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19476/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34718/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19476/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_1:quay.io/wakuorg/nwaku-pr:3234 can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19476/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738235670972739840,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.sharding:sharding.py:157 Checking that peer NODE_2:quay.io/wakuorg/nwaku-pr:3234 can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34718/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738235670972739840,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 9f633e7962e9
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 17e1f0c0aeb8
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 9f633e7962e9. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.