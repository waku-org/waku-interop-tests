2025-02-06 15:37:54.756 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-06 15:37:54.756 DEBUG [tests.conftest] Running test: test_get_peers_after_node1_was_restarted with id: 2025-02-06_15-37-54__391969a1-117e-4c71-aee1-935c657fd501
2025-02-06 15:37:54.756 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-06 15:37:54.756 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-06 15:37:54.763 DEBUG [src.node.docker_mananger] Docker client initialized with image quay.io/wakuorg/nwaku-pr:3281
2025-02-06 15:37:54.763 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-06_15-37-54__391969a1-117e-4c71-aee1-935c657fd501__quay.io_wakuorg_nwaku-pr:3281.log
2025-02-06 15:37:54.764 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 15:37:54.764 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 15:37:54.765 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 15:37:54.765 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.20.228
2025-02-06 15:37:54.766 DEBUG [src.node.docker_mananger] Generated ports ['42450', '42451', '42452', '42453', '42454']
2025-02-06 15:37:54.766 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 15:37:54.766 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 15:37:54.766 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 15:37:54.766 DEBUG [src.node.docker_mananger] docker run -i -t -p 42450:42450 -p 42451:42451 -p 42452:42452 -p 42453:42453 -p 42454:42454 quay.io/wakuorg/nwaku-pr:3281 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42452 --rest-port=42450 --tcp-port=42451 --discv5-udp-port=42453 --rest-address=0.0.0.0 --nat=extip:172.18.20.228 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f05ebdaf3bcd1e1b6ba3b7b31cc196cf31ef2ddaeabb3b1e3eddc8b2b9cbe7fc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42454 --metrics-logging=true --relay=true --relay-peer-exchange=true
2025-02-06 15:37:55.002 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.20.228 waku 2b8e295775a984ec8d41521000df36175787c1c5726b05da9f112a82d219bba4
2025-02-06 15:37:55.039 ERROR [src.node.docker_mananger] Max retries reached for container 8ef15722e4d0. Exiting log stream.
2025-02-06 15:37:55.058 DEBUG [src.node.docker_mananger] Container started with ID 2b8e295775a9. Setting up logs at ./log/docker/node1_2025-02-06_15-37-54__391969a1-117e-4c71-aee1-935c657fd501__quay.io_wakuorg_nwaku-pr:3281.log
2025-02-06 15:37:55.059 DEBUG [src.node.waku_node] Started container from image quay.io/wakuorg/nwaku-pr:3281. REST: 42450
2025-02-06 15:37:55.059 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 15:37:55.559 ERROR [src.node.docker_mananger] Max retries reached for container 612eedee8398. Exiting log stream.
2025-02-06 15:37:56.060 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42450/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:37:56.063 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 15:37:56.063 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 15:37:56.063 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42450/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:37:56.065 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.20.228/tcp/42451/p2p/16Uiu2HAm2i4JPtULxaZ2AWve9U3VY9X6nfTTQV4gWmZABp9zz9DY","/ip4/172.18.20.228/tcp/42452/ws/p2p/16Uiu2HAm2i4JPtULxaZ2AWve9U3VY9X6nfTTQV4gWmZABp9zz9DY"],"enrUri":"enr:-L24QE7Nl5SZRHDqx7n-WfOhS_I26QLrYUF-l8TZJ-J6ugZAKuvhDBpE1ZcV7H4nFwrb9vbyCx4_NM6q-ymbreKuEj4CgmlkgnY0gmlwhKwSFOSKbXVsdGlhZGRyc5YACASsEhTkBqXTAAoErBIU5Aal1N0DgnJzhQADAQAAiXNlY3AyNTZrMaECbDRW7NM2fIXL52JSy05gX3E8D1l8yHp4p9gDw7E3dC-DdGNwgqXTg3VkcIKl1YV3YWt1MgE"}'
2025-02-06 15:37:56.065 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 15:37:56.072 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-06 15:37:56.072 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-06_15-37-54__391969a1-117e-4c71-aee1-935c657fd501__wakuorg_go-waku:latest.log
2025-02-06 15:37:56.073 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 15:37:56.073 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 15:37:56.074 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 15:37:56.074 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.108.172
2025-02-06 15:37:56.074 DEBUG [src.node.docker_mananger] Generated ports ['13664', '13665', '13666', '13667', '13668']
2025-02-06 15:37:56.075 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 15:37:56.075 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 15:37:56.075 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 15:37:56.075 DEBUG [src.node.docker_mananger] docker run -i -t -p 13664:13664 -p 13665:13665 -p 13666:13666 -p 13667:13667 -p 13668:13668 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=13666 --rest-port=13664 --tcp-port=13665 --discv5-udp-port=13667 --rest-address=0.0.0.0 --nat=extip:172.18.108.172 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a18b19a1d46abb34e8e1d1541a8515acf3d86bf9ebb3d9e3358dfdd38fd43d7d --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --discv5-bootstrap-node=enr:-L24QE7Nl5SZRHDqx7n-WfOhS_I26QLrYUF-l8TZJ-J6ugZAKuvhDBpE1ZcV7H4nFwrb9vbyCx4_NM6q-ymbreKuEj4CgmlkgnY0gmlwhKwSFOSKbXVsdGlhZGRyc5YACASsEhTkBqXTAAoErBIU5Aal1N0DgnJzhQADAQAAiXNlY3AyNTZrMaECbDRW7NM2fIXL52JSy05gX3E8D1l8yHp4p9gDw7E3dC-DdGNwgqXTg3VkcIKl1YV3YWt1MgE
2025-02-06 15:37:56.319 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.108.172 waku 032fc6b8834009ea517bce3cff6665f45b511255d77091110b2ac7709f375c79
2025-02-06 15:37:56.370 DEBUG [src.node.docker_mananger] Container started with ID 032fc6b88340. Setting up logs at ./log/docker/node2_2025-02-06_15-37-54__391969a1-117e-4c71-aee1-935c657fd501__wakuorg_go-waku:latest.log
2025-02-06 15:37:56.372 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 13664
2025-02-06 15:37:56.372 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 15:37:57.372 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:13664/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:37:57.375 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QOJulmRrzo-dUAtXT13KisNw7VZbmJs-goGmqpeonz9DQJOUC3pFF_sDeum14dhzZ6BMW8kOMGwDcit0HE10tteGAZTb6SGPgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaECHnFyMypAY_eBR0B2Rs75R4En0dx0PbLw0sMrgq9ns3-DdGNwgjVhg3VkcII1Y4V3YWt1MgE","listenAddresses":["/ip4/127.0.0.1/tcp/13665/p2p/16Uiu2HAkwUWYTh7uKMbLGxwyUgo8wFuadkSQNwkb7aLLmbKopV3c","/ip4/127.0.0.1/tcp/13666/ws/p2p/16Uiu2HAkwUWYTh7uKMbLGxwyUgo8wFuadkSQNwkb7aLLmbKopV3c","/ip4/172.17.0.3/tcp/13665/p2p/16Uiu2HAkwUWYTh7uKMbLGxwyUgo8wFuadkSQNwkb7aLLmbKopV3c","/ip4/172.17.0.3/tcp/13666/ws/p2p/16Uiu2HAkwUWYTh7uKMbLGxwyUgo8wFuadkSQNwkb7aLLmbKopV3c"]}'
2025-02-06 15:37:57.376 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 15:37:57.376 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:13664/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.20.228/tcp/42451/p2p/16Uiu2HAm2i4JPtULxaZ2AWve9U3VY9X6nfTTQV4gWmZABp9zz9DY", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-06 15:37:57.394 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-06 15:37:57.395 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42450/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0", "/waku/2/rs/3/1", "/waku/2/rs/3/9", "/waku/2/rs/3/25", "/waku/2/rs/3/1000"]'
2025-02-06 15:37:57.404 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:37:57.405 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:13664/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0", "/waku/2/rs/3/1", "/waku/2/rs/3/9", "/waku/2/rs/3/25", "/waku/2/rs/3/1000"]'
2025-02-06 15:37:57.408 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-06 15:37:57.408 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 15:37:58.409 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42450/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:37:58.413 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.3/tcp/13665/p2p/16Uiu2HAkwUWYTh7uKMbLGxwyUgo8wFuadkSQNwkb7aLLmbKopV3c","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
2025-02-06 15:37:58.413 DEBUG [src.node.waku_node] Restarting container with id 2b8e295775a9
2025-02-06 15:37:59.303 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 15:38:00.310 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-06 15:38:00.311 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node3_2025-02-06_15-37-54__391969a1-117e-4c71-aee1-935c657fd501__wakuorg_go-waku:latest.log
2025-02-06 15:38:00.311 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 15:38:00.311 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 15:38:00.312 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 15:38:00.313 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.60.162
2025-02-06 15:38:00.313 DEBUG [src.node.docker_mananger] Generated ports ['40844', '40845', '40846', '40847', '40848']
2025-02-06 15:38:00.313 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 15:38:00.313 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 15:38:00.313 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 15:38:00.313 DEBUG [src.node.docker_mananger] docker run -i -t -p 40844:40844 -p 40845:40845 -p 40846:40846 -p 40847:40847 -p 40848:40848 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=40846 --rest-port=40844 --tcp-port=40845 --discv5-udp-port=40847 --rest-address=0.0.0.0 --nat=extip:172.18.60.162 --peer-exchange=true --discv5-discovery=false --cluster-id=3 --nodekey=76fba1bd45f7bbb8feffec5c0804a1675ccfbdfa1fcf6fbdcace9aebb67bb00e --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --peer-exchange-node=/ip4/172.17.0.3/tcp/13665/p2p/16Uiu2HAkwUWYTh7uKMbLGxwyUgo8wFuadkSQNwkb7aLLmbKopV3c --pubsub-topic=/waku/2/rs/3/1
2025-02-06 15:38:00.555 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.60.162 waku 949bdb2b250adb50e50bfc28d27bfe432cd9adca718c61309534a36a925c3972
2025-02-06 15:38:00.613 DEBUG [src.node.docker_mananger] Container started with ID 949bdb2b250a. Setting up logs at ./log/docker/node3_2025-02-06_15-37-54__391969a1-117e-4c71-aee1-935c657fd501__wakuorg_go-waku:latest.log
2025-02-06 15:38:00.613 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 40844
2025-02-06 15:38:00.613 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 15:38:01.614 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40844/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:38:01.616 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-Jq4QMGatT05k10pkG_4RYHQRcY_M0gdgNsYf7itAjIoHIDEFGnnnas_gKsfk61zTEl1YMEZlNoU9ROxHz4J4303r-eGAZTb6TIegmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQOFtq-fgmkl8XiG1hu9ZvvFe2_gy1zseNFrVv4FnmM7f4N0Y3CCn42Fd2FrdTKA","listenAddresses":["/ip4/127.0.0.1/tcp/40845/p2p/16Uiu2HAmMex9Eu7oGJq5T583KnDDtWysoLkfL9ptzY3Aw3KdkUJa","/ip4/127.0.0.1/tcp/40846/ws/p2p/16Uiu2HAmMex9Eu7oGJq5T583KnDDtWysoLkfL9ptzY3Aw3KdkUJa","/ip4/172.17.0.4/tcp/40845/p2p/16Uiu2HAmMex9Eu7oGJq5T583KnDDtWysoLkfL9ptzY3Aw3KdkUJa","/ip4/172.17.0.4/tcp/40846/ws/p2p/16Uiu2HAmMex9Eu7oGJq5T583KnDDtWysoLkfL9ptzY3Aw3KdkUJa"]}'
2025-02-06 15:38:01.617 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 15:38:01.617 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40844/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.20.228/tcp/42451/p2p/16Uiu2HAm2i4JPtULxaZ2AWve9U3VY9X6nfTTQV4gWmZABp9zz9DY", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-06 15:38:01.632 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-06 15:38:01.633 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40844/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:38:01.637 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"id":"16Uiu2HAkwUWYTh7uKMbLGxwyUgo8wFuadkSQNwkb7aLLmbKopV3c","multiaddrs":["/ip4/172.17.0.3/tcp/13665/p2p/16Uiu2HAkwUWYTh7uKMbLGxwyUgo8wFuadkSQNwkb7aLLmbKopV3c","/ip4/172.17.0.3/tcp/13666/ws/p2p/16Uiu2HAkwUWYTh7uKMbLGxwyUgo8wFuadkSQNwkb7aLLmbKopV3c"],"protocols":["/vac/waku/relay/2.0.0","/vac/waku/filter-push/2.0.0-beta1"],"connected":true,"pubsubTopics":["/waku/2/rs/3/1"]},{"id":"16Uiu2HAm2i4JPtULxaZ2AWve9U3VY9X6nfTTQV4gWmZABp9zz9DY","multiaddrs":["/ip4/172.18.20.228/tcp/42451/p2p/16Uiu2HAm2i4JPtULxaZ2AWve9U3VY9X6nfTTQV4gWmZABp9zz9DY","/ip4/172.18.20.228/tcp/42452/ws/p2p/16Uiu2HAm2i4JPtULxaZ2AWve9U3VY9X6nfTTQV4gWmZABp9zz9DY"],"protocols":["/vac/waku/filter-push/2.0.0-beta1","/vac/waku/relay/2.0.0"],"connected":true,"pubsubTopics":["/waku/2/rs/3/0","/waku/2/rs/3/1","/waku/2/rs/3/3","/waku/2/rs/3/4","/waku/2/rs/3/6","/waku/2/rs/3/2","/waku/2/rs/3/5","/waku/2/rs/3/7","/waku/2/rs/3/8"]}]'
2025-02-06 15:38:01.644 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-06 15:38:01.645 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-06 15:38:01.645 DEBUG [src.node.waku_node] Stopping container with id 2b8e295775a9
2025-02-06 15:38:02.198 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 15:38:02.199 DEBUG [src.node.waku_node] Stopping container with id 032fc6b88340
2025-02-06 15:38:02.700 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 15:38:02.701 DEBUG [src.node.waku_node] Stopping container with id 949bdb2b250a
2025-02-06 15:38:03.012 ERROR [src.node.docker_mananger] Max retries reached for container 2b8e295775a9. Exiting log stream.
2025-02-06 15:38:03.231 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 15:38:03.233 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-06 15:38:03.261 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 15:38:03.269 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 15:38:03.272 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
