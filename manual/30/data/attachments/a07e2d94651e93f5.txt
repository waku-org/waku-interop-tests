2025-02-06 15:41:30.832 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-06 15:41:30.832 DEBUG [tests.conftest] Running test: test_light_push_with_invalid_version with id: 2025-02-06_15-41-30__fa846315-d9f2-4ca5-9c1d-7aaa2f20b58a
2025-02-06 15:41:30.832 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-06 15:41:30.833 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-06 15:41:30.839 DEBUG [src.node.docker_mananger] Docker client initialized with image quay.io/wakuorg/nwaku-pr:3281
2025-02-06 15:41:30.839 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-06_15-41-30__fa846315-d9f2-4ca5-9c1d-7aaa2f20b58a__quay.io_wakuorg_nwaku-pr:3281.log
2025-02-06 15:41:30.839 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 15:41:30.839 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 15:41:30.841 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 15:41:30.841 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.213.215
2025-02-06 15:41:30.841 DEBUG [src.node.docker_mananger] Generated ports ['30628', '30629', '30630', '30631', '30632']
2025-02-06 15:41:30.841 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 15:41:30.841 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 15:41:30.841 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 15:41:30.842 DEBUG [src.node.docker_mananger] docker run -i -t -p 30628:30628 -p 30629:30629 -p 30630:30630 -p 30631:30631 -p 30632:30632 quay.io/wakuorg/nwaku-pr:3281 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=30630 --rest-port=30628 --tcp-port=30629 --discv5-udp-port=30631 --rest-address=0.0.0.0 --nat=extip:172.18.213.215 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=880db5fe1d0ddc15badacf3fabedc88f0bea79febdc6cbd2cdecf96de2a81baf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=30632 --metrics-logging=true --lightpush=true --relay=true
2025-02-06 15:41:31.071 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.213.215 waku 8c489aa6cc821f8bb7686001bff955ba210efe0076d7e6e291d6ee3baf30dfac
2025-02-06 15:41:31.101 ERROR [src.node.docker_mananger] Max retries reached for container 44837f75ca12. Exiting log stream.
2025-02-06 15:41:31.120 DEBUG [src.node.docker_mananger] Container started with ID 8c489aa6cc82. Setting up logs at ./log/docker/receiving_node1_2025-02-06_15-41-30__fa846315-d9f2-4ca5-9c1d-7aaa2f20b58a__quay.io_wakuorg_nwaku-pr:3281.log
2025-02-06 15:41:31.121 DEBUG [src.node.waku_node] Started container from image quay.io/wakuorg/nwaku-pr:3281. REST: 30628
2025-02-06 15:41:31.121 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 15:41:31.624 ERROR [src.node.docker_mananger] Max retries reached for container 4f0bdd810c72. Exiting log stream.
2025-02-06 15:41:32.122 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30628/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:41:32.125 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 15:41:32.125 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 15:41:32.125 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:30628/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:41:32.127 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.213.215/tcp/30629/p2p/16Uiu2HAmQWp2dLP9N6m44RpBuwNSszajLrKCtH5kHjnbWAWXVP5o","/ip4/172.18.213.215/tcp/30630/ws/p2p/16Uiu2HAmQWp2dLP9N6m44RpBuwNSszajLrKCtH5kHjnbWAWXVP5o"],"enrUri":"enr:-L24QC1bIksHoK_s8WsZS0gUZf-44yD3wX8tsokssNI6SvHxILbgtfIpaZGU-Xat1LEpYJDow1CViXDyzEvSPwG00VwCgmlkgnY0gmlwhKwS1deKbXVsdGlhZGRyc5YACASsEtXXBnelAAoErBLV1wZ3pt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDsDPtAA4J23AzPDNzSuvtd--OtZnpBmd3nBdTFmO7bk6DdGNwgnelg3VkcIJ3p4V3YWt1Mgk"}'
2025-02-06 15:41:32.127 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 15:41:32.134 DEBUG [src.node.docker_mananger] Docker client initialized with image quay.io/wakuorg/nwaku-pr:3281
2025-02-06 15:41:32.134 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-06_15-41-30__fa846315-d9f2-4ca5-9c1d-7aaa2f20b58a__quay.io_wakuorg_nwaku-pr:3281.log
2025-02-06 15:41:32.135 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 15:41:32.135 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 15:41:32.136 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 15:41:32.136 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.131.37
2025-02-06 15:41:32.136 DEBUG [src.node.docker_mananger] Generated ports ['7708', '7709', '7710', '7711', '7712']
2025-02-06 15:41:32.136 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 15:41:32.137 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 15:41:32.137 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 15:41:32.137 DEBUG [src.node.docker_mananger] docker run -i -t -p 7708:7708 -p 7709:7709 -p 7710:7710 -p 7711:7711 -p 7712:7712 quay.io/wakuorg/nwaku-pr:3281 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7710 --rest-port=7708 --tcp-port=7709 --discv5-udp-port=7711 --rest-address=0.0.0.0 --nat=extip:172.18.131.37 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1c5e1fbceeb7f17061fbdd4c98afddf475a8fb164c79afd8d40f16c80cd5c7ee --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7712 --metrics-logging=true --lightpush=false --relay=true
2025-02-06 15:41:32.362 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.131.37 waku 611ba7aa9cab8d60756d3800fbb4a04cb6e458ea41df5d665d6bcd674c1616d9
2025-02-06 15:41:32.410 DEBUG [src.node.docker_mananger] Container started with ID 611ba7aa9cab. Setting up logs at ./log/docker/receiving_node2_2025-02-06_15-41-30__fa846315-d9f2-4ca5-9c1d-7aaa2f20b58a__quay.io_wakuorg_nwaku-pr:3281.log
2025-02-06 15:41:32.410 DEBUG [src.node.waku_node] Started container from image quay.io/wakuorg/nwaku-pr:3281. REST: 7708
2025-02-06 15:41:32.410 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 15:41:33.411 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7708/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:41:33.413 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 15:41:33.414 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 15:41:33.414 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7708/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:41:33.416 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.131.37/tcp/7709/p2p/16Uiu2HAmU36Nm5yh9eEcGwW3399vG2qJdUYrjtZcPaRb5JGZGSKW","/ip4/172.18.131.37/tcp/7710/ws/p2p/16Uiu2HAmU36Nm5yh9eEcGwW3399vG2qJdUYrjtZcPaRb5JGZGSKW"],"enrUri":"enr:-L24QNLS0ahPhXQCEUKuximE6_wEpQAXBuPMYS5SdKn06fNPMnBaOklT_RIQxsw5nMjRjHrVuNpHUPWbjMzfXEHAfdoCgmlkgnY0gmlwhKwSgyWKbXVsdGlhZGRyc5YACASsEoMlBh4dAAoErBKDJQYeHt0DgnJzhQADAQAAiXNlY3AyNTZrMaED5IjlBCJ8Zq5OwENEv6S8Wk1bozyVSmne6HoT_-WvRa2DdGNwgh4dg3VkcIIeH4V3YWt1MgE"}'
2025-02-06 15:41:33.416 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 15:41:33.417 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7708/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.213.215/tcp/30629/p2p/16Uiu2HAmQWp2dLP9N6m44RpBuwNSszajLrKCtH5kHjnbWAWXVP5o"]'
2025-02-06 15:41:33.443 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:41:33.453 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-06 15:41:33.454 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-06_15-41-30__fa846315-d9f2-4ca5-9c1d-7aaa2f20b58a__wakuorg_go-waku:latest.log
2025-02-06 15:41:33.454 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 15:41:33.454 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 15:41:33.455 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 15:41:33.455 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.245.115
2025-02-06 15:41:33.456 DEBUG [src.node.docker_mananger] Generated ports ['23977', '23978', '23979', '23980', '23981']
2025-02-06 15:41:33.456 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 15:41:33.456 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 15:41:33.456 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 15:41:33.456 DEBUG [src.node.docker_mananger] docker run -i -t -p 23977:23977 -p 23978:23978 -p 23979:23979 -p 23980:23980 -p 23981:23981 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=23979 --rest-port=23977 --tcp-port=23978 --discv5-udp-port=23980 --rest-address=0.0.0.0 --nat=extip:172.18.245.115 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c4eaa5f8697eaa95ffc33ad22c89b426d6f95bb586175a17bbc6bdf63c8035c0 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QC1bIksHoK_s8WsZS0gUZf-44yD3wX8tsokssNI6SvHxILbgtfIpaZGU-Xat1LEpYJDow1CViXDyzEvSPwG00VwCgmlkgnY0gmlwhKwS1deKbXVsdGlhZGRyc5YACASsEtXXBnelAAoErBLV1wZ3pt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDsDPtAA4J23AzPDNzSuvtd--OtZnpBmd3nBdTFmO7bk6DdGNwgnelg3VkcIJ3p4V3YWt1Mgk --lightpushnode=/ip4/172.18.213.215/tcp/30629/p2p/16Uiu2HAmQWp2dLP9N6m44RpBuwNSszajLrKCtH5kHjnbWAWXVP5o --lightpush=true --relay=false --pubsub-topic=/waku/2/rs/3/1
2025-02-06 15:41:33.688 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.245.115 waku 2c21efd43b6cfc2bf59271d1839a93b8c7b1d2b4667c5168915ab271ae60e635
2025-02-06 15:41:33.744 DEBUG [src.node.docker_mananger] Container started with ID 2c21efd43b6c. Setting up logs at ./log/docker/lightpush_node1_2025-02-06_15-41-30__fa846315-d9f2-4ca5-9c1d-7aaa2f20b58a__wakuorg_go-waku:latest.log
2025-02-06 15:41:33.745 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 23977
2025-02-06 15:41:33.745 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 15:41:34.745 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23977/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:41:34.748 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QLsqNZwfjjcjf3tOGDyEWv6BbFSQ7uNkNcnX_G2djEF_Zz0BF91MVpYt6tdvkFbYVMlaL27edcPXC8mlGL2hbiaGAZTb7HKmgmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQJna0Mbi1DVGy6WC11HpTd94IjakYzURrTPpUkXG97tWoN0Y3CCXaqDdWRwgl2shXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/23978/p2p/16Uiu2HAm2PNqSj4gqppVo5Xj5nEK6THFiqjKqkFj9SS5nTeWYYFB","/ip4/127.0.0.1/tcp/23979/ws/p2p/16Uiu2HAm2PNqSj4gqppVo5Xj5nEK6THFiqjKqkFj9SS5nTeWYYFB","/ip4/172.17.0.4/tcp/23978/p2p/16Uiu2HAm2PNqSj4gqppVo5Xj5nEK6THFiqjKqkFj9SS5nTeWYYFB","/ip4/172.17.0.4/tcp/23979/ws/p2p/16Uiu2HAm2PNqSj4gqppVo5Xj5nEK6THFiqjKqkFj9SS5nTeWYYFB"]}'
2025-02-06 15:41:34.748 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 15:41:34.748 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23977/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.213.215/tcp/30629/p2p/16Uiu2HAmQWp2dLP9N6m44RpBuwNSszajLrKCtH5kHjnbWAWXVP5o", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-06 15:41:34.750 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-06 15:41:34.751 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23977/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.131.37/tcp/7709/p2p/16Uiu2HAmU36Nm5yh9eEcGwW3399vG2qJdUYrjtZcPaRb5JGZGSKW", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-06 15:41:34.766 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-06 15:41:34.767 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:30628/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-06 15:41:34.774 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:41:34.774 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7708/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-06 15:41:34.778 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:41:34.779 DEBUG [src.steps.light_push] Lightpushing message
2025-02-06 15:41:34.780 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23977/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738856494779727616, "version": 2.1}}'
2025-02-06 15:41:34.781 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:23977/lightpush/v1/message. Response content: b''
2025-02-06 15:41:34.784 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-06 15:41:34.785 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-06 15:41:34.785 DEBUG [src.node.waku_node] Stopping container with id 8c489aa6cc82
2025-02-06 15:41:35.400 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 15:41:35.400 DEBUG [src.node.waku_node] Stopping container with id 611ba7aa9cab
2025-02-06 15:41:36.214 ERROR [src.node.docker_mananger] Max retries reached for container 8c489aa6cc82. Exiting log stream.
2025-02-06 15:41:36.924 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 15:41:36.925 DEBUG [src.node.waku_node] Stopping container with id 2c21efd43b6c
2025-02-06 15:41:37.448 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 15:41:37.450 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-06 15:41:37.457 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 15:41:37.468 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 15:41:37.471 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
