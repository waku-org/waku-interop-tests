2025-02-06 15:37:15.394 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-06 15:37:15.394 DEBUG [tests.conftest] Running test: test_invalid_page_size with id: 2025-02-06_15-37-15__33526b8b-19e7-4b45-8013-0874282af1d6
2025-02-06 15:37:15.394 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-06 15:37:15.395 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-06 15:37:15.395 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-06 15:37:15.403 DEBUG [src.node.docker_mananger] Docker client initialized with image quay.io/wakuorg/nwaku-pr:3281
2025-02-06 15:37:15.404 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-06_15-37-15__33526b8b-19e7-4b45-8013-0874282af1d6__quay.io_wakuorg_nwaku-pr:3281.log
2025-02-06 15:37:15.404 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 15:37:15.404 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 15:37:15.410 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 15:37:15.410 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.44.36
2025-02-06 15:37:15.410 DEBUG [src.node.docker_mananger] Generated ports ['32026', '32027', '32028', '32029', '32030']
2025-02-06 15:37:15.410 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 15:37:15.410 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 15:37:15.411 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 15:37:15.411 DEBUG [src.node.docker_mananger] docker run -i -t -p 32026:32026 -p 32027:32027 -p 32028:32028 -p 32029:32029 -p 32030:32030 quay.io/wakuorg/nwaku-pr:3281 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32028 --rest-port=32026 --tcp-port=32027 --discv5-udp-port=32029 --rest-address=0.0.0.0 --nat=extip:172.18.44.36 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2ed93cec1d39acccfa2006cbe6ead6e7b2f4dbdf77af8435cbc56505a6afeee6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32030 --metrics-logging=true --store=true --relay=true
2025-02-06 15:37:15.602 ERROR [src.node.docker_mananger] Max retries reached for container e8f9513c37d9. Exiting log stream.
2025-02-06 15:37:15.675 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.44.36 waku a8a212b45c42965f7f3246d95a69c0be720734be96aba063edc27c41b4fa0de4
2025-02-06 15:37:15.732 DEBUG [src.node.docker_mananger] Container started with ID a8a212b45c42. Setting up logs at ./log/docker/publishing_node1_2025-02-06_15-37-15__33526b8b-19e7-4b45-8013-0874282af1d6__quay.io_wakuorg_nwaku-pr:3281.log
2025-02-06 15:37:15.733 DEBUG [src.node.waku_node] Started container from image quay.io/wakuorg/nwaku-pr:3281. REST: 32026
2025-02-06 15:37:15.733 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 15:37:16.186 ERROR [src.node.docker_mananger] Max retries reached for container 222909ef0f07. Exiting log stream.
2025-02-06 15:37:16.733 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32026/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:37:16.737 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 15:37:16.737 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 15:37:16.737 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32026/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:37:16.739 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.44.36/tcp/32027/p2p/16Uiu2HAmCpfDXgG6LLrruWe6DfHCZ9WzKrtQxpxCdv3BoCqB72ot","/ip4/172.18.44.36/tcp/32028/ws/p2p/16Uiu2HAmCpfDXgG6LLrruWe6DfHCZ9WzKrtQxpxCdv3BoCqB72ot"],"enrUri":"enr:-L24QL9Ozs1Y8lKO4leGj7WGNnIBcpz8mUlwekmPl_ErP6cvBiZEjdRPArAZxZ1SbZ4DC9tuf4V0EAbS8_KcaQlUal0CgmlkgnY0gmlwhKwSLCSKbXVsdGlhZGRyc5YACASsEiwkBn0bAAoErBIsJAZ9HN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDAnosZoA4sD3tN7uwawDM2AUtITK5kDVxtwKY06RuLxODdGNwgn0bg3VkcIJ9HYV3YWt1MgM"}'
2025-02-06 15:37:16.740 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 15:37:16.747 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-06 15:37:16.747 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-06_15-37-15__33526b8b-19e7-4b45-8013-0874282af1d6__wakuorg_go-waku:latest.log
2025-02-06 15:37:16.747 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 15:37:16.747 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 15:37:16.752 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 15:37:16.752 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.28.42
2025-02-06 15:37:16.752 DEBUG [src.node.docker_mananger] Generated ports ['35992', '35993', '35994', '35995', '35996']
2025-02-06 15:37:16.752 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 15:37:16.752 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 15:37:16.752 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 15:37:16.753 DEBUG [src.node.docker_mananger] docker run -i -t -p 35992:35992 -p 35993:35993 -p 35994:35994 -p 35995:35995 -p 35996:35996 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=35994 --rest-port=35992 --tcp-port=35993 --discv5-udp-port=35995 --rest-address=0.0.0.0 --nat=extip:172.18.28.42 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a84f8cb00bdabf83b81920a221cfbe2bfb4d07cfac6ebc2466fbb236ed16e7f5 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QL9Ozs1Y8lKO4leGj7WGNnIBcpz8mUlwekmPl_ErP6cvBiZEjdRPArAZxZ1SbZ4DC9tuf4V0EAbS8_KcaQlUal0CgmlkgnY0gmlwhKwSLCSKbXVsdGlhZGRyc5YACASsEiwkBn0bAAoErBIsJAZ9HN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDAnosZoA4sD3tN7uwawDM2AUtITK5kDVxtwKY06RuLxODdGNwgn0bg3VkcIJ9HYV3YWt1MgM --storenode=/ip4/172.18.44.36/tcp/32027/p2p/16Uiu2HAmCpfDXgG6LLrruWe6DfHCZ9WzKrtQxpxCdv3BoCqB72ot --store=true --relay=true
2025-02-06 15:37:17.027 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.28.42 waku aff461cd3d76b7504b301078e14cc1c8b4be852363c576761fdf1e5e6d44bf8f
2025-02-06 15:37:17.082 DEBUG [src.node.docker_mananger] Container started with ID aff461cd3d76. Setting up logs at ./log/docker/store_node1_2025-02-06_15-37-15__33526b8b-19e7-4b45-8013-0874282af1d6__wakuorg_go-waku:latest.log
2025-02-06 15:37:17.084 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 35992
2025-02-06 15:37:17.085 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 15:37:18.086 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35992/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:37:18.089 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QDclvl_gHeK0xFdnOgJ9SVY9AKnhdlIqKdtRJqyCuRgfLsAAl6XtOwGjjss3nUgijtUHeWwWLO6x7ja-BZgvWWSGAZTb6IgmgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaEDpSE9DEoEcocsIk_15tVwXR0mDgGpWhWH6wnAx165RBODdGNwgoyZg3VkcIKMm4V3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/35993/p2p/16Uiu2HAmPmb1wYCvUAAGNkBCp8e4nY5nSyTpeqjFJUy3eMp9eEh8","/ip4/127.0.0.1/tcp/35994/ws/p2p/16Uiu2HAmPmb1wYCvUAAGNkBCp8e4nY5nSyTpeqjFJUy3eMp9eEh8","/ip4/172.17.0.3/tcp/35993/p2p/16Uiu2HAmPmb1wYCvUAAGNkBCp8e4nY5nSyTpeqjFJUy3eMp9eEh8","/ip4/172.17.0.3/tcp/35994/ws/p2p/16Uiu2HAmPmb1wYCvUAAGNkBCp8e4nY5nSyTpeqjFJUy3eMp9eEh8"]}'
2025-02-06 15:37:18.089 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 15:37:18.089 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35992/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.44.36/tcp/32027/p2p/16Uiu2HAmCpfDXgG6LLrruWe6DfHCZ9WzKrtQxpxCdv3BoCqB72ot", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-06 15:37:18.105 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-06 15:37:18.108 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32026/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-06 15:37:18.113 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:37:18.113 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35992/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-06 15:37:18.115 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-06 15:37:18.119 DEBUG [src.steps.store] Relaying message
2025-02-06 15:37:18.119 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32026/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 15:37:18.132 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:37:18.133 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 15:37:18.333 DEBUG [src.steps.store] Relaying message
2025-02-06 15:37:18.334 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32026/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8x", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 15:37:18.340 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:37:18.341 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 15:37:18.541 DEBUG [src.steps.store] Relaying message
2025-02-06 15:37:18.542 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32026/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8y", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 15:37:18.548 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:37:18.548 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 15:37:18.748 DEBUG [src.steps.store] Relaying message
2025-02-06 15:37:18.749 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32026/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8z", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 15:37:18.755 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:37:18.755 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 15:37:18.956 DEBUG [src.steps.store] Relaying message
2025-02-06 15:37:18.956 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32026/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV80", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 15:37:18.962 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:37:18.963 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 15:37:19.163 DEBUG [src.steps.store] Relaying message
2025-02-06 15:37:19.164 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32026/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV81", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 15:37:19.170 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:37:19.170 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 15:37:19.371 DEBUG [src.steps.store] Relaying message
2025-02-06 15:37:19.371 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32026/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV82", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 15:37:19.379 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:37:19.380 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 15:37:19.580 DEBUG [src.steps.store] Relaying message
2025-02-06 15:37:19.581 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32026/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV83", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 15:37:19.590 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:37:19.590 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 15:37:19.791 DEBUG [src.steps.store] Relaying message
2025-02-06 15:37:19.791 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32026/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV84", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 15:37:19.798 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:37:19.798 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 15:37:19.999 DEBUG [src.steps.store] Relaying message
2025-02-06 15:37:19.999 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32026/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV85", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 15:37:20.005 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:37:20.005 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 15:37:20.206 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32026/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=$2&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:37:20.209 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:32026/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=$2&ascending=true. Response content: b'page size parsing error: invalid integer: $2'
2025-02-06 15:37:20.210 DEBUG [tests.store.test_page_size] the invalid page_size $2 wasn't accepted 
2025-02-06 15:37:20.210 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35992/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=$2&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:37:20.212 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:35992/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=$2&ascending=true. Response content: b'{"status_code":400,"status_desc":"strconv.ParseUint: parsing \\"$2\\": invalid syntax"}'
2025-02-06 15:37:20.213 DEBUG [tests.store.test_page_size] the invalid page_size $2 wasn't accepted 
2025-02-06 15:37:20.215 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-06 15:37:20.216 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-06 15:37:20.216 DEBUG [src.node.waku_node] Stopping container with id a8a212b45c42
2025-02-06 15:37:21.314 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 15:37:21.315 DEBUG [src.node.waku_node] Stopping container with id aff461cd3d76
2025-02-06 15:37:21.896 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 15:37:21.897 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-06 15:37:21.904 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 15:37:21.909 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
