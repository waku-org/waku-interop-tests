2025-02-06 15:37:24.560 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-06 15:37:24.561 DEBUG [tests.conftest] Running test: test_light_push_with_invalid_meta with id: 2025-02-06_15-37-24__7fb6e0d0-6f8b-4039-85fb-4850897f53be
2025-02-06 15:37:24.561 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-06 15:37:24.561 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-06 15:37:24.568 DEBUG [src.node.docker_mananger] Docker client initialized with image quay.io/wakuorg/nwaku-pr:3281
2025-02-06 15:37:24.568 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-06_15-37-24__7fb6e0d0-6f8b-4039-85fb-4850897f53be__quay.io_wakuorg_nwaku-pr:3281.log
2025-02-06 15:37:24.568 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 15:37:24.568 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 15:37:24.570 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 15:37:24.570 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.11.7
2025-02-06 15:37:24.570 DEBUG [src.node.docker_mananger] Generated ports ['9388', '9389', '9390', '9391', '9392']
2025-02-06 15:37:24.570 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 15:37:24.570 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 15:37:24.570 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 15:37:24.570 DEBUG [src.node.docker_mananger] docker run -i -t -p 9388:9388 -p 9389:9389 -p 9390:9390 -p 9391:9391 -p 9392:9392 quay.io/wakuorg/nwaku-pr:3281 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=9390 --rest-port=9388 --tcp-port=9389 --discv5-udp-port=9391 --rest-address=0.0.0.0 --nat=extip:172.18.11.7 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=86eec9ee2fc9a71abb3dab0933b7c85caccf997dd97ed49bbea4adc4f3efd5d4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=9392 --metrics-logging=true --lightpush=true --relay=true
2025-02-06 15:37:24.798 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.11.7 waku bdfb9aaed9549d3e55f64f6bd915d17ece21ae6857c91ba46167e7870452cf6d
2025-02-06 15:37:24.857 DEBUG [src.node.docker_mananger] Container started with ID bdfb9aaed954. Setting up logs at ./log/docker/receiving_node1_2025-02-06_15-37-24__7fb6e0d0-6f8b-4039-85fb-4850897f53be__quay.io_wakuorg_nwaku-pr:3281.log
2025-02-06 15:37:24.858 DEBUG [src.node.waku_node] Started container from image quay.io/wakuorg/nwaku-pr:3281. REST: 9388
2025-02-06 15:37:24.859 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 15:37:24.863 ERROR [src.node.docker_mananger] Max retries reached for container 16303aac822a. Exiting log stream.
2025-02-06 15:37:25.354 ERROR [src.node.docker_mananger] Max retries reached for container af54944fa1db. Exiting log stream.
2025-02-06 15:37:25.863 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9388/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:37:25.866 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 15:37:25.866 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 15:37:25.866 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9388/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:37:25.868 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.11.7/tcp/9389/p2p/16Uiu2HAm77uG8Q2SeQujj63frjJQkRAq2vBghRu3tuPXSsYsBwNb","/ip4/172.18.11.7/tcp/9390/ws/p2p/16Uiu2HAm77uG8Q2SeQujj63frjJQkRAq2vBghRu3tuPXSsYsBwNb"],"enrUri":"enr:-L24QHMsKeMm_K9hJhvluV2XJHkX7WoAtSNdHCnTzJq7ENZFXAWLxl1xdBXLxX8-T3f18DtxxCSvOmKC7yT65IlAx8QCgmlkgnY0gmlwhKwSCweKbXVsdGlhZGRyc5YACASsEgsHBiStAAoErBILBwYkrt0DgnJzhQADAQAAiXNlY3AyNTZrMaECrb7OX416amRbiB4DXF1-yczBan33Fg2XCr2lZ6o9PIyDdGNwgiStg3VkcIIkr4V3YWt1Mgk"}'
2025-02-06 15:37:25.868 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 15:37:25.875 DEBUG [src.node.docker_mananger] Docker client initialized with image quay.io/wakuorg/nwaku-pr:3281
2025-02-06 15:37:25.875 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-06_15-37-24__7fb6e0d0-6f8b-4039-85fb-4850897f53be__quay.io_wakuorg_nwaku-pr:3281.log
2025-02-06 15:37:25.875 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 15:37:25.875 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 15:37:25.877 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 15:37:25.877 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.55.149
2025-02-06 15:37:25.877 DEBUG [src.node.docker_mananger] Generated ports ['32197', '32198', '32199', '32200', '32201']
2025-02-06 15:37:25.877 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 15:37:25.877 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 15:37:25.878 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 15:37:25.878 DEBUG [src.node.docker_mananger] docker run -i -t -p 32197:32197 -p 32198:32198 -p 32199:32199 -p 32200:32200 -p 32201:32201 quay.io/wakuorg/nwaku-pr:3281 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32199 --rest-port=32197 --tcp-port=32198 --discv5-udp-port=32200 --rest-address=0.0.0.0 --nat=extip:172.18.55.149 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fa86ce75d976867b335fde3d3b78bc75feaa1cfa1d3dd9edcdd2c7ecdd7bd1e1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32201 --metrics-logging=true --lightpush=false --relay=true
2025-02-06 15:37:26.109 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.55.149 waku ed08c20f11be48b27e5a85f5ca61e6290f13f5d6406fb398bdf5fa421e2398fc
2025-02-06 15:37:26.160 DEBUG [src.node.docker_mananger] Container started with ID ed08c20f11be. Setting up logs at ./log/docker/receiving_node2_2025-02-06_15-37-24__7fb6e0d0-6f8b-4039-85fb-4850897f53be__quay.io_wakuorg_nwaku-pr:3281.log
2025-02-06 15:37:26.160 DEBUG [src.node.waku_node] Started container from image quay.io/wakuorg/nwaku-pr:3281. REST: 32197
2025-02-06 15:37:26.161 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 15:37:27.161 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32197/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:37:27.164 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 15:37:27.164 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 15:37:27.165 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32197/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:37:27.167 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.55.149/tcp/32198/p2p/16Uiu2HAm2ZqvPK96Btgvgmx6tr1LXTBAyZGdQ1fCrvu6xpsY1RBP","/ip4/172.18.55.149/tcp/32199/ws/p2p/16Uiu2HAm2ZqvPK96Btgvgmx6tr1LXTBAyZGdQ1fCrvu6xpsY1RBP"],"enrUri":"enr:-L24QG1Tr2t2lOCbnLBvX6h3jOrifkFALtuCyffsmRj629KQdJPGr9vwRkCgBC4L3sF4V4gmzMRGSsuPV_Y32HITvHQCgmlkgnY0gmlwhKwSN5WKbXVsdGlhZGRyc5YACASsEjeVBn3GAAoErBI3lQZ9x90DgnJzhQADAQAAiXNlY3AyNTZrMaECahmyD9067WG9cPtyYoj6eC-WjweuzBmK0MIkto9MzCqDdGNwgn3Gg3VkcIJ9yIV3YWt1MgE"}'
2025-02-06 15:37:27.167 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 15:37:27.167 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32197/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.11.7/tcp/9389/p2p/16Uiu2HAm77uG8Q2SeQujj63frjJQkRAq2vBghRu3tuPXSsYsBwNb"]'
2025-02-06 15:37:27.196 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:37:27.207 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-06 15:37:27.207 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-06_15-37-24__7fb6e0d0-6f8b-4039-85fb-4850897f53be__wakuorg_go-waku:latest.log
2025-02-06 15:37:27.207 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 15:37:27.207 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 15:37:27.208 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 15:37:27.209 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.84.76
2025-02-06 15:37:27.209 DEBUG [src.node.docker_mananger] Generated ports ['19295', '19296', '19297', '19298', '19299']
2025-02-06 15:37:27.209 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 15:37:27.209 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 15:37:27.209 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 15:37:27.209 DEBUG [src.node.docker_mananger] docker run -i -t -p 19295:19295 -p 19296:19296 -p 19297:19297 -p 19298:19298 -p 19299:19299 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=19297 --rest-port=19295 --tcp-port=19296 --discv5-udp-port=19298 --rest-address=0.0.0.0 --nat=extip:172.18.84.76 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=aae20cd82f1f9df86bbd3bb46df5ec0b4634bbde9e74b00adcdb25f025efdb4b --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QHMsKeMm_K9hJhvluV2XJHkX7WoAtSNdHCnTzJq7ENZFXAWLxl1xdBXLxX8-T3f18DtxxCSvOmKC7yT65IlAx8QCgmlkgnY0gmlwhKwSCweKbXVsdGlhZGRyc5YACASsEgsHBiStAAoErBILBwYkrt0DgnJzhQADAQAAiXNlY3AyNTZrMaECrb7OX416amRbiB4DXF1-yczBan33Fg2XCr2lZ6o9PIyDdGNwgiStg3VkcIIkr4V3YWt1Mgk --lightpushnode=/ip4/172.18.11.7/tcp/9389/p2p/16Uiu2HAm77uG8Q2SeQujj63frjJQkRAq2vBghRu3tuPXSsYsBwNb --lightpush=true --relay=false --pubsub-topic=/waku/2/rs/3/1
2025-02-06 15:37:27.447 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.84.76 waku 51ce018ebc775b086bacbdfaec0514e1dbac3e5c244d0851965cb721c91eeccc
2025-02-06 15:37:27.508 DEBUG [src.node.docker_mananger] Container started with ID 51ce018ebc77. Setting up logs at ./log/docker/lightpush_node1_2025-02-06_15-37-24__7fb6e0d0-6f8b-4039-85fb-4850897f53be__wakuorg_go-waku:latest.log
2025-02-06 15:37:27.508 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 19295
2025-02-06 15:37:27.509 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 15:37:28.509 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19295/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:37:28.512 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QFh149E-ZjpAB0iqaTTbVLuNU0ZG12U3Degd5fVdA_7sNrEHQ0PUqcedAUByOaVsa2_wkYuZpl3k62KHKiGhoiKGAZTb6LDIgmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQNqFG3iogdJUwQ5XyU2zPqcQulN04XMdE566SfHyxo5poN0Y3CCS2CDdWRwgktihXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/19296/p2p/16Uiu2HAmKo5dk5rh1w6HaSYEgqz4WTEh9NxAQu6pKCaAKSsndD5X","/ip4/127.0.0.1/tcp/19297/ws/p2p/16Uiu2HAmKo5dk5rh1w6HaSYEgqz4WTEh9NxAQu6pKCaAKSsndD5X","/ip4/172.17.0.4/tcp/19296/p2p/16Uiu2HAmKo5dk5rh1w6HaSYEgqz4WTEh9NxAQu6pKCaAKSsndD5X","/ip4/172.17.0.4/tcp/19297/ws/p2p/16Uiu2HAmKo5dk5rh1w6HaSYEgqz4WTEh9NxAQu6pKCaAKSsndD5X"]}'
2025-02-06 15:37:28.512 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 15:37:28.512 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19295/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.11.7/tcp/9389/p2p/16Uiu2HAm77uG8Q2SeQujj63frjJQkRAq2vBghRu3tuPXSsYsBwNb", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-06 15:37:28.515 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-06 15:37:28.515 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19295/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.55.149/tcp/32198/p2p/16Uiu2HAm2ZqvPK96Btgvgmx6tr1LXTBAyZGdQ1fCrvu6xpsY1RBP", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-06 15:37:28.530 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-06 15:37:28.532 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9388/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-06 15:37:28.538 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:37:28.538 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32197/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-06 15:37:28.542 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:37:28.544 DEBUG [src.steps.light_push] Lightpushing message
2025-02-06 15:37:28.545 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19295/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738856248544680192, "meta": "Light push works!!"}}'
2025-02-06 15:37:28.547 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:19295/lightpush/v1/message. Response content: b''
2025-02-06 15:37:28.549 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-06 15:37:28.550 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-06 15:37:28.550 DEBUG [src.node.waku_node] Stopping container with id bdfb9aaed954
2025-02-06 15:37:29.147 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 15:37:29.148 DEBUG [src.node.waku_node] Stopping container with id ed08c20f11be
2025-02-06 15:37:29.960 ERROR [src.node.docker_mananger] Max retries reached for container bdfb9aaed954. Exiting log stream.
2025-02-06 15:37:30.673 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 15:37:30.674 DEBUG [src.node.waku_node] Stopping container with id 51ce018ebc77
2025-02-06 15:37:31.189 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 15:37:31.192 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-06 15:37:31.198 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 15:37:31.203 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 15:37:31.206 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
