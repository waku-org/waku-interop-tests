2025-02-06 15:37:09.378 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-06 15:37:09.379 DEBUG [tests.conftest] Running test: test_filter_update_subscription_with_invalid_content_topic_format with id: 2025-02-06_15-37-09__173e41b0-77c4-483b-b739-95d2c4dc0b7d
2025-02-06 15:37:09.379 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-06 15:37:09.379 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-06 15:37:09.379 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-06 15:37:09.386 DEBUG [src.node.docker_mananger] Docker client initialized with image quay.io/wakuorg/nwaku-pr:3281
2025-02-06 15:37:09.386 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-06_15-37-09__173e41b0-77c4-483b-b739-95d2c4dc0b7d__quay.io_wakuorg_nwaku-pr:3281.log
2025-02-06 15:37:09.386 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 15:37:09.386 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 15:37:09.388 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 15:37:09.388 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.108.76
2025-02-06 15:37:09.388 DEBUG [src.node.docker_mananger] Generated ports ['60901', '60902', '60903', '60904', '60905']
2025-02-06 15:37:09.388 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 15:37:09.388 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 15:37:09.389 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 15:37:09.389 DEBUG [src.node.docker_mananger] docker run -i -t -p 60901:60901 -p 60902:60902 -p 60903:60903 -p 60904:60904 -p 60905:60905 quay.io/wakuorg/nwaku-pr:3281 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=60903 --rest-port=60901 --tcp-port=60902 --discv5-udp-port=60904 --rest-address=0.0.0.0 --nat=extip:172.18.108.76 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=648a21c2ca4befe2eeb1f1fffbb68badb90afffe9db93071dfdbc32be66a52c8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=60905 --metrics-logging=true --relay=true --filter=true
2025-02-06 15:37:09.621 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.108.76 waku 71e4e2a126fba664bfd1132a22aea4a9226be3b4d1b4fca4cee0fc5d99a0c39d
2025-02-06 15:37:09.682 DEBUG [src.node.docker_mananger] Container started with ID 71e4e2a126fb. Setting up logs at ./log/docker/node1_2025-02-06_15-37-09__173e41b0-77c4-483b-b739-95d2c4dc0b7d__quay.io_wakuorg_nwaku-pr:3281.log
2025-02-06 15:37:09.683 DEBUG [src.node.waku_node] Started container from image quay.io/wakuorg/nwaku-pr:3281. REST: 60901
2025-02-06 15:37:09.683 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 15:37:10.186 ERROR [src.node.docker_mananger] Max retries reached for container c33a31f9224b. Exiting log stream.
2025-02-06 15:37:10.684 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60901/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:37:10.687 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 15:37:10.687 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 15:37:10.687 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60901/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:37:10.689 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.108.76/tcp/60902/p2p/16Uiu2HAkwm4rNGtDkFFBu6eBwBPAKFbbK23nmQiV3s3dYx9GVaaV","/ip4/172.18.108.76/tcp/60903/ws/p2p/16Uiu2HAkwm4rNGtDkFFBu6eBwBPAKFbbK23nmQiV3s3dYx9GVaaV"],"enrUri":"enr:-L24QMZ71H8QAwl2TkZg7oOSbEs21KI8jzD-4vgGgndzEbMFVyh3kQch9bGVhr9Fn2GvTROxIDz6f3AnQLdoJ3pxLjYCgmlkgnY0gmlwhKwSbEyKbXVsdGlhZGRyc5YACASsEmxMBu3mAAoErBJsTAbt590DgnJzhQADAQAAiXNlY3AyNTZrMaECIq9FSLYlsos6Y0B9qyX7ceNixlteDzC22WNKw6Iy08qDdGNwgu3mg3VkcILt6IV3YWt1MgU"}'
2025-02-06 15:37:10.689 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 15:37:10.690 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-06 15:37:10.696 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-06 15:37:10.696 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-06_15-37-09__173e41b0-77c4-483b-b739-95d2c4dc0b7d__wakuorg_go-waku:latest.log
2025-02-06 15:37:10.696 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 15:37:10.696 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 15:37:10.698 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 15:37:10.698 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.6.214
2025-02-06 15:37:10.698 DEBUG [src.node.docker_mananger] Generated ports ['49427', '49428', '49429', '49430', '49431']
2025-02-06 15:37:10.698 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 15:37:10.698 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 15:37:10.698 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 15:37:10.698 DEBUG [src.node.docker_mananger] docker run -i -t -p 49427:49427 -p 49428:49428 -p 49429:49429 -p 49430:49430 -p 49431:49431 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=49429 --rest-port=49427 --tcp-port=49428 --discv5-udp-port=49430 --rest-address=0.0.0.0 --nat=extip:172.18.6.214 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d172c82b3ca043d6c9f7a4ddede0bfc7d9ebdbff37149ebcb8259e89c2daa2a7 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-L24QMZ71H8QAwl2TkZg7oOSbEs21KI8jzD-4vgGgndzEbMFVyh3kQch9bGVhr9Fn2GvTROxIDz6f3AnQLdoJ3pxLjYCgmlkgnY0gmlwhKwSbEyKbXVsdGlhZGRyc5YACASsEmxMBu3mAAoErBJsTAbt590DgnJzhQADAQAAiXNlY3AyNTZrMaECIq9FSLYlsos6Y0B9qyX7ceNixlteDzC22WNKw6Iy08qDdGNwgu3mg3VkcILt6IV3YWt1MgU --filternode=/ip4/172.18.108.76/tcp/60902/p2p/16Uiu2HAkwm4rNGtDkFFBu6eBwBPAKFbbK23nmQiV3s3dYx9GVaaV --pubsub-topic=/waku/2/rs/3/1
2025-02-06 15:37:10.945 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 15:37:10.945 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 15:37:10.947 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 15:37:10.947 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.70.201
2025-02-06 15:37:10.947 DEBUG [src.node.docker_mananger] Generated ports ['20641', '20642', '20643', '20644', '20645']
2025-02-06 15:37:10.948 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 15:37:10.948 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 15:37:10.948 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 15:37:10.948 DEBUG [src.node.docker_mananger] docker run -i -t -p 20641:20641 -p 20642:20642 -p 20643:20643 -p 20644:20644 -p 20645:20645 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=20643 --rest-port=20641 --tcp-port=20642 --discv5-udp-port=20644 --rest-address=0.0.0.0 --nat=extip:172.18.70.201 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4b79efa9e9d95bbc7dafbdaab5ee606a7c519efce1aa02eeccac91fc0522eb6c --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-L24QMZ71H8QAwl2TkZg7oOSbEs21KI8jzD-4vgGgndzEbMFVyh3kQch9bGVhr9Fn2GvTROxIDz6f3AnQLdoJ3pxLjYCgmlkgnY0gmlwhKwSbEyKbXVsdGlhZGRyc5YACASsEmxMBu3mAAoErBJsTAbt590DgnJzhQADAQAAiXNlY3AyNTZrMaECIq9FSLYlsos6Y0B9qyX7ceNixlteDzC22WNKw6Iy08qDdGNwgu3mg3VkcILt6IV3YWt1MgU --filternode=/ip4/172.18.108.76/tcp/60902/p2p/16Uiu2HAkwm4rNGtDkFFBu6eBwBPAKFbbK23nmQiV3s3dYx9GVaaV --pubsub-topic=/waku/2/rs/3/1
2025-02-06 15:37:11.178 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.70.201 waku 0a182424a5223cb2cf7a2776579e0c67aff19886cf31a8f8630704cdf621c6bd
2025-02-06 15:37:11.238 DEBUG [src.node.docker_mananger] Container started with ID 0a182424a522. Setting up logs at ./log/docker/node2_2025-02-06_15-37-09__173e41b0-77c4-483b-b739-95d2c4dc0b7d__wakuorg_go-waku:latest.log
2025-02-06 15:37:11.239 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 20641
2025-02-06 15:37:11.240 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 15:37:12.240 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20641/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:37:12.242 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QKFUcfVLg7YivH-wCd7ikZzwXva3sXOa2C7y7owkGhcXD--jPE2QX524pdSTjxa27ZSGufomdyamXHpfTDfA7JeGAZTb6HE4gmlkgnY0gmlwhKwRAAOCcnOFAAMBAAGJc2VjcDI1NmsxoQJduacv37Auf2yp79XgM47-OgYyOBnTB-gRAAQqfNlpRIN0Y3CCUKKDdWRwglCkhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/20642/p2p/16Uiu2HAm1jY65g6AXadqQGQhAxzyQ22JMMsTftEpX6VMgVWBvg27","/ip4/127.0.0.1/tcp/20643/ws/p2p/16Uiu2HAm1jY65g6AXadqQGQhAxzyQ22JMMsTftEpX6VMgVWBvg27","/ip4/172.17.0.3/tcp/20642/p2p/16Uiu2HAm1jY65g6AXadqQGQhAxzyQ22JMMsTftEpX6VMgVWBvg27","/ip4/172.17.0.3/tcp/20643/ws/p2p/16Uiu2HAm1jY65g6AXadqQGQhAxzyQ22JMMsTftEpX6VMgVWBvg27"]}'
2025-02-06 15:37:12.243 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 15:37:12.243 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20641/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.108.76/tcp/60902/p2p/16Uiu2HAkwm4rNGtDkFFBu6eBwBPAKFbbK23nmQiV3s3dYx9GVaaV", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-06 15:37:12.245 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-06 15:37:12.246 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-06 15:37:12.246 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:60901/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-06 15:37:12.249 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:37:12.249 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20641/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "0ce2e337-9f83-4f32-8ed9-b205ac28c201", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-06 15:37:12.255 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"0ce2e337-9f83-4f32-8ed9-b205ac28c201","statusDesc":"OK"}'
2025-02-06 15:37:12.256 DEBUG [tests.filter.test_subscribe_update] Running test with contetn topic Empty string
2025-02-06 15:37:12.258 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-06 15:37:12.259 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-06 15:37:12.259 DEBUG [src.node.waku_node] Stopping container with id 71e4e2a126fb
2025-02-06 15:37:12.853 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 15:37:12.853 DEBUG [src.node.waku_node] Stopping container with id 0a182424a522
2025-02-06 15:37:13.666 ERROR [src.node.docker_mananger] Max retries reached for container 71e4e2a126fb. Exiting log stream.
2025-02-06 15:37:13.733 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 15:37:13.734 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-06 15:37:13.739 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 15:37:13.741 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
