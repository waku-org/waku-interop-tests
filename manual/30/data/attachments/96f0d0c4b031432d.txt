2025-02-06 15:37:42.393 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-06 15:37:42.393 DEBUG [tests.conftest] Running test: test_metadata_protocol_mounted_also_on_non_1_clusters with id: 2025-02-06_15-37-42__006ad3ed-3b7b-47f1-abdd-5ff695cf9b71
2025-02-06 15:37:42.394 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-06 15:37:42.394 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-06 15:37:42.394 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2025-02-06 15:37:42.401 DEBUG [src.node.docker_mananger] Docker client initialized with image quay.io/wakuorg/nwaku-pr:3281
2025-02-06 15:37:42.401 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-06_15-37-42__006ad3ed-3b7b-47f1-abdd-5ff695cf9b71__quay.io_wakuorg_nwaku-pr:3281.log
2025-02-06 15:37:42.401 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 15:37:42.401 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 15:37:42.403 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 15:37:42.403 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.202.15
2025-02-06 15:37:42.403 DEBUG [src.node.docker_mananger] Generated ports ['31220', '31221', '31222', '31223', '31224']
2025-02-06 15:37:42.403 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 15:37:42.403 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 15:37:42.403 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 15:37:42.404 DEBUG [src.node.docker_mananger] docker run -i -t -p 31220:31220 -p 31221:31221 -p 31222:31222 -p 31223:31223 -p 31224:31224 quay.io/wakuorg/nwaku-pr:3281 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=31222 --rest-port=31220 --tcp-port=31221 --discv5-udp-port=31223 --rest-address=0.0.0.0 --nat=extip:172.18.202.15 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b413ca950e22afcd4d77a9eeebd6fb70d0af8b8e3bc1e80fd6afaabbfaa3dbfb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=31224 --metrics-logging=true --relay=true
2025-02-06 15:37:42.631 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.202.15 waku 3a3abcf9461ed383782cea969992a181eab525f11563b27515aefe8b332a6e84
2025-02-06 15:37:42.684 DEBUG [src.node.docker_mananger] Container started with ID 3a3abcf9461e. Setting up logs at ./log/docker/node1_2025-02-06_15-37-42__006ad3ed-3b7b-47f1-abdd-5ff695cf9b71__quay.io_wakuorg_nwaku-pr:3281.log
2025-02-06 15:37:42.685 DEBUG [src.node.waku_node] Started container from image quay.io/wakuorg/nwaku-pr:3281. REST: 31220
2025-02-06 15:37:42.685 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 15:37:43.194 ERROR [src.node.docker_mananger] Max retries reached for container 8633faa83cad. Exiting log stream.
2025-02-06 15:37:43.685 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31220/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:37:43.688 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 15:37:43.688 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 15:37:43.689 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31220/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:37:43.691 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.202.15/tcp/31221/p2p/16Uiu2HAm6ZAV8xzUumB5pdogMHUnn4idB1W2ciZ2T46LgwZZheSX","/ip4/172.18.202.15/tcp/31222/ws/p2p/16Uiu2HAm6ZAV8xzUumB5pdogMHUnn4idB1W2ciZ2T46LgwZZheSX"],"enrUri":"enr:-L24QEN0DPBQnGNdrDK58yTKTWqmyQLRftv33XhCTLf76azFNZDR3Ft1guJOfdAUNdEHzbNB0Qht_Hpss7C3qVZyQCoCgmlkgnY0gmlwhKwSyg-KbXVsdGlhZGRyc5YACASsEsoPBnn1AAoErBLKDwZ59t0DgnJzhQADAQAAiXNlY3AyNTZrMaECpVvahyZc-IvMZOUCdGCn_pdWwfAMnDEYf1QoY336hDyDdGNwgnn1g3VkcIJ594V3YWt1MgE"}'
2025-02-06 15:37:43.691 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 15:37:43.697 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-06 15:37:43.697 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-06_15-37-42__006ad3ed-3b7b-47f1-abdd-5ff695cf9b71__wakuorg_go-waku:latest.log
2025-02-06 15:37:43.697 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 15:37:43.698 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 15:37:43.699 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 15:37:43.699 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.222.87
2025-02-06 15:37:43.699 DEBUG [src.node.docker_mananger] Generated ports ['33089', '33090', '33091', '33092', '33093']
2025-02-06 15:37:43.699 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 15:37:43.699 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 15:37:43.700 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 15:37:43.700 DEBUG [src.node.docker_mananger] docker run -i -t -p 33089:33089 -p 33090:33090 -p 33091:33091 -p 33092:33092 -p 33093:33093 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=33091 --rest-port=33089 --tcp-port=33090 --discv5-udp-port=33092 --rest-address=0.0.0.0 --nat=extip:172.18.222.87 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=faeb72dea2dfa779f85c301a4f6aaced2ddb57744e0cb7e6f716d0c69cfbee28 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --discv5-bootstrap-node=enr:-L24QEN0DPBQnGNdrDK58yTKTWqmyQLRftv33XhCTLf76azFNZDR3Ft1guJOfdAUNdEHzbNB0Qht_Hpss7C3qVZyQCoCgmlkgnY0gmlwhKwSyg-KbXVsdGlhZGRyc5YACASsEsoPBnn1AAoErBLKDwZ59t0DgnJzhQADAQAAiXNlY3AyNTZrMaECpVvahyZc-IvMZOUCdGCn_pdWwfAMnDEYf1QoY336hDyDdGNwgnn1g3VkcIJ594V3YWt1MgE
2025-02-06 15:37:43.944 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.222.87 waku d3d8f938d00ac8ba03577a4a8d729ceb7060af90e044ef0b3be25cdf632a2e51
2025-02-06 15:37:44.008 DEBUG [src.node.docker_mananger] Container started with ID d3d8f938d00a. Setting up logs at ./log/docker/node2_2025-02-06_15-37-42__006ad3ed-3b7b-47f1-abdd-5ff695cf9b71__wakuorg_go-waku:latest.log
2025-02-06 15:37:44.008 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 33089
2025-02-06 15:37:44.008 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 15:37:45.010 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33089/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:37:45.013 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QLI2RBPRcNLc2JDl925K0mnvKHjxThQKniL8X5jDHP7wZXtGf4mxW1Wwa09hqZg2RMdE1lUXuw3dYCN1CfhCx8CGAZTb6PE6gmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaEDebXHU0kQwJjb65LM5gw02ZHiMtMg5bxK1Nlhsow1v1ODdGNwgoFCg3VkcIKBRIV3YWt1MgE","listenAddresses":["/ip4/127.0.0.1/tcp/33090/p2p/16Uiu2HAmLr6SwGz7nMVq2VLb8gp1N7VvzwDcwHHKt1LgTV5AAxcr","/ip4/127.0.0.1/tcp/33091/ws/p2p/16Uiu2HAmLr6SwGz7nMVq2VLb8gp1N7VvzwDcwHHKt1LgTV5AAxcr","/ip4/172.17.0.3/tcp/33090/p2p/16Uiu2HAmLr6SwGz7nMVq2VLb8gp1N7VvzwDcwHHKt1LgTV5AAxcr","/ip4/172.17.0.3/tcp/33091/ws/p2p/16Uiu2HAmLr6SwGz7nMVq2VLb8gp1N7VvzwDcwHHKt1LgTV5AAxcr"]}'
2025-02-06 15:37:45.013 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 15:37:45.014 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33089/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.202.15/tcp/31221/p2p/16Uiu2HAm6ZAV8xzUumB5pdogMHUnn4idB1W2ciZ2T46LgwZZheSX", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-06 15:37:45.031 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-06 15:37:45.034 DEBUG [src.node.docker_mananger] Found matches for keyword 'Created WakuMetadata protocol': ['INF 2025-02-06 15:37:42.643+00:00 Created WakuMetadata protocol              topics="waku node" tid=1 file=protocol.nim:120 clusterId=3 shards={0}']
2025-02-06 15:37:45.038 DEBUG [src.node.docker_mananger] Found matches for keyword 'metadata protocol started': ['2025-02-06T15:37:44.012Z\t\x1b[34mINFO\x1b[0m\tgowaku.node2.metadata\tmetadata/waku_metadata.go:75\tmetadata protocol started\t{"node": "16Uiu2HAmLr6SwGz7nMVq2VLb8gp1N7VvzwDcwHHKt1LgTV5AAxcr"}']
2025-02-06 15:37:45.040 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-06 15:37:45.042 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-06 15:37:45.042 DEBUG [src.node.waku_node] Stopping container with id 3a3abcf9461e
2025-02-06 15:37:45.900 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 15:37:45.900 DEBUG [src.node.waku_node] Stopping container with id d3d8f938d00a
2025-02-06 15:37:46.509 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 15:37:46.512 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-06 15:37:46.518 DEBUG [src.node.docker_mananger] Found matches for keyword 'stacktrace': ['FAT 2025-02-06 15:37:45.055+00:00 Shutting down after receiving SIGSEGV      topics="wakunode main" tid=1 file=wakunode2.nim:124 stacktrace="/home/runner/work/nwaku/nwaku/apps/wakunode2/wakunode2.nim(136) wakunode2\\n/home/runner/work/nwaku/nwaku/vendor/nim-chronos/chronos/internal/asyncengine.nim(1210) _ZN11asyncengine10runForeverE\\n/home/runner/work/nwaku/nwaku/vendor/nim-chronos/chronos/internal/asyncengine.nim(150) _ZN11asyncengine4pollE\\n/home/runner/work/nwaku/nwaku/vendor/nim-chronos/chronos/internal/asyncfutures.nim(371) _ZN12asyncfutures14futureContinueE3refIN7futures26FutureBasecolonObjectType_EE\\n/home/runner/work/nwaku/nwaku/vendor/nim-libp2p/libp2p/muxers/yamux/yamux.nim(633) _ZN6handle67handle\\n/home/runner/work/nwaku/nwaku/vendor/nim-libp2p/libp2p/muxers/yamux/yamux.nim(505) _ZN5yamux5closeE3refIN5yamux21YamuxcolonObjectType_EE\\n/home/runner/work/nwaku/nwaku/vendor/nim-chronos/chronos/internal/asyncfutures.nim(371) _ZN12asyncfutures14futureContinueE3refIN7futures26FutureBasecolonObjectType_EE\\n/home/runner/work/nwaku/nwaku/vendor/nim-libp2p/libp2p/muxers/yamux/yamux.nim(513) _ZN5close66close\\n/home/runner/work/nwaku/nwaku/vendor/nim-libp2p/libp2p/muxers/yamux/yamux.nim(226) _ZN5yamux5resetE3refIN5yamux28YamuxChannelcolonObjectType_EE4bool\\n/home/runner/work/nwaku/nwaku/vendor/nim-chronos/chronos/internal/asyncfutures.nim(371) _ZN12asyncfutures14futureContinueE3refIN7futures26FutureBasecolonObjectType_EE\\n/home/runner/work/nwaku/nwaku/vendor/nim-libp2p/libp2p/muxers/yamux/yamux.nim(242) _ZN5reset65reset\\n/home/runner/work/nwaku/nwaku/vendor/nim-libp2p/libp2p/stream/lpstream.nim(294) _ZN8lpstream5closeE3refIN8lpstream24LPStreamcolonObjectType_EE\\n/home/runner/work/nwaku/nwaku/vendor/nim-libp2p/libp2p/muxers/yamux/yamux.nim(211) _ZN5yamux9closeImplE3refIN5yamux28YamuxChannelcolonObjectType_EE\\n/home/runner/work/nwaku/nwaku/vendor/nim-chronos/chronos/internal/asyncfutures.nim(371) _ZN12asyncfutures14futureContinueE3refIN7futures26FutureBasecolonObjectType_EE\\n/home/runner/work/nwaku/nwaku/vendor/nim-chronicles/chronicles.nim(170) _ZN9closeImpl69closeImpl\\n/home/runner/work/nwaku/nwaku/vendor/nim-chronicles/chronicles.nim(170) _ZN9wakunode213handleSigsegvE5int32\\n"', '/home/runner/work/nwaku/nwaku/vendor/nimbus-build-system/vendor/Nim/lib/system/excpt.nim(526) _ZN6system15writeStackTraceE', '/home/runner/work/nwaku/nwaku/vendor/nimbus-build-system/vendor/Nim/lib/system/stacktraces.nim(59) _ZN11stacktraces30auxWriteStackTraceWithOverrideE3varI6stringE']
2025-02-06 15:37:46.518 DEBUG [src.node.docker_mananger] Found matches for keyword 'SIGSEGV': ['FAT 2025-02-06 15:37:45.055+00:00 Shutting down after receiving SIGSEGV      topics="wakunode main" tid=1 file=wakunode2.nim:124 stacktrace="/home/runner/work/nwaku/nwaku/apps/wakunode2/wakunode2.nim(136) wakunode2\\n/home/runner/work/nwaku/nwaku/vendor/nim-chronos/chronos/internal/asyncengine.nim(1210) _ZN11asyncengine10runForeverE\\n/home/runner/work/nwaku/nwaku/vendor/nim-chronos/chronos/internal/asyncengine.nim(150) _ZN11asyncengine4pollE\\n/home/runner/work/nwaku/nwaku/vendor/nim-chronos/chronos/internal/asyncfutures.nim(371) _ZN12asyncfutures14futureContinueE3refIN7futures26FutureBasecolonObjectType_EE\\n/home/runner/work/nwaku/nwaku/vendor/nim-libp2p/libp2p/muxers/yamux/yamux.nim(633) _ZN6handle67handle\\n/home/runner/work/nwaku/nwaku/vendor/nim-libp2p/libp2p/muxers/yamux/yamux.nim(505) _ZN5yamux5closeE3refIN5yamux21YamuxcolonObjectType_EE\\n/home/runner/work/nwaku/nwaku/vendor/nim-chronos/chronos/internal/asyncfutures.nim(371) _ZN12asyncfutures14futureContinueE3refIN7futures26FutureBasecolonObjectType_EE\\n/home/runner/work/nwaku/nwaku/vendor/nim-libp2p/libp2p/muxers/yamux/yamux.nim(513) _ZN5close66close\\n/home/runner/work/nwaku/nwaku/vendor/nim-libp2p/libp2p/muxers/yamux/yamux.nim(226) _ZN5yamux5resetE3refIN5yamux28YamuxChannelcolonObjectType_EE4bool\\n/home/runner/work/nwaku/nwaku/vendor/nim-chronos/chronos/internal/asyncfutures.nim(371) _ZN12asyncfutures14futureContinueE3refIN7futures26FutureBasecolonObjectType_EE\\n/home/runner/work/nwaku/nwaku/vendor/nim-libp2p/libp2p/muxers/yamux/yamux.nim(242) _ZN5reset65reset\\n/home/runner/work/nwaku/nwaku/vendor/nim-libp2p/libp2p/stream/lpstream.nim(294) _ZN8lpstream5closeE3refIN8lpstream24LPStreamcolonObjectType_EE\\n/home/runner/work/nwaku/nwaku/vendor/nim-libp2p/libp2p/muxers/yamux/yamux.nim(211) _ZN5yamux9closeImplE3refIN5yamux28YamuxChannelcolonObjectType_EE\\n/home/runner/work/nwaku/nwaku/vendor/nim-chronos/chronos/internal/asyncfutures.nim(371) _ZN12asyncfutures14futureContinueE3refIN7futures26FutureBasecolonObjectType_EE\\n/home/runner/work/nwaku/nwaku/vendor/nim-chronicles/chronicles.nim(170) _ZN9closeImpl69closeImpl\\n/home/runner/work/nwaku/nwaku/vendor/nim-chronicles/chronicles.nim(170) _ZN9wakunode213handleSigsegvE5int32\\n"', '/home/runner/work/nwaku/nwaku/apps/wakunode2/wakunode2.nim(127) _ZN9wakunode213handleSigsegvE5int32']
