2025-02-06 15:37:10.468 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-06 15:37:10.468 DEBUG [tests.conftest] Running test: test_invalid_hash_param with id: 2025-02-06_15-37-10__1481d90e-3bf2-485d-a34c-6f97f2eed035
2025-02-06 15:37:10.469 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-06 15:37:10.469 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-06 15:37:10.469 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-06 15:37:10.476 DEBUG [src.node.docker_mananger] Docker client initialized with image quay.io/wakuorg/nwaku-pr:3281
2025-02-06 15:37:10.476 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-06_15-37-10__1481d90e-3bf2-485d-a34c-6f97f2eed035__quay.io_wakuorg_nwaku-pr:3281.log
2025-02-06 15:37:10.477 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 15:37:10.477 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 15:37:10.478 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 15:37:10.479 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.68.0
2025-02-06 15:37:10.479 DEBUG [src.node.docker_mananger] Generated ports ['52165', '52166', '52167', '52168', '52169']
2025-02-06 15:37:10.479 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 15:37:10.479 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 15:37:10.479 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 15:37:10.479 DEBUG [src.node.docker_mananger] docker run -i -t -p 52165:52165 -p 52166:52166 -p 52167:52167 -p 52168:52168 -p 52169:52169 quay.io/wakuorg/nwaku-pr:3281 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=52167 --rest-port=52165 --tcp-port=52166 --discv5-udp-port=52168 --rest-address=0.0.0.0 --nat=extip:172.18.68.0 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eaefc5ee3bfa9cfac7b582681ae05ad821a56ae7f5806a5ecd3ee082f690fa05 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=52169 --metrics-logging=true --store=true --relay=true
2025-02-06 15:37:10.724 ERROR [src.node.docker_mananger] Max retries reached for container 06254bfb7ef2. Exiting log stream.
2025-02-06 15:37:10.740 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.68.0 waku e8f9513c37d9e34492779f0b21911ecd84148dffd5e0e6306fb08a63942d9b39
2025-02-06 15:37:10.796 DEBUG [src.node.docker_mananger] Container started with ID e8f9513c37d9. Setting up logs at ./log/docker/publishing_node1_2025-02-06_15-37-10__1481d90e-3bf2-485d-a34c-6f97f2eed035__quay.io_wakuorg_nwaku-pr:3281.log
2025-02-06 15:37:10.796 DEBUG [src.node.waku_node] Started container from image quay.io/wakuorg/nwaku-pr:3281. REST: 52165
2025-02-06 15:37:10.797 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 15:37:11.272 ERROR [src.node.docker_mananger] Max retries reached for container 9807e76fd92f. Exiting log stream.
2025-02-06 15:37:11.798 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52165/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:37:11.801 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 15:37:11.801 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 15:37:11.801 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52165/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:37:11.809 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.68.0/tcp/52166/p2p/16Uiu2HAmA6ztptuyRP1q8gsfCFHgQLcuUL1Vx6ztnM5DupBikgQf","/ip4/172.18.68.0/tcp/52167/ws/p2p/16Uiu2HAmA6ztptuyRP1q8gsfCFHgQLcuUL1Vx6ztnM5DupBikgQf"],"enrUri":"enr:-L24QLA5td640RgKML2LJUaqhfQYsZ8Z1sI_bNB6mPAMAbpqKCdQb3aeFZnxEIprdHy_I_WRuLe9GUD1sHu7H8i-Hh4CgmlkgnY0gmlwhKwSRACKbXVsdGlhZGRyc5YACASsEkQABsvGAAoErBJEAAbLx90DgnJzhQADAQAAiXNlY3AyNTZrMaEC2hansh_yLXCA-7rwkUiXah48EhqN_mWdNsyrS7e3XiCDdGNwgsvGg3VkcILLyIV3YWt1MgM"}'
2025-02-06 15:37:11.809 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 15:37:11.816 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-06 15:37:11.817 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-06_15-37-10__1481d90e-3bf2-485d-a34c-6f97f2eed035__wakuorg_go-waku:latest.log
2025-02-06 15:37:11.817 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 15:37:11.817 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 15:37:11.819 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 15:37:11.819 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.178.54
2025-02-06 15:37:11.819 DEBUG [src.node.docker_mananger] Generated ports ['24029', '24030', '24031', '24032', '24033']
2025-02-06 15:37:11.819 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 15:37:11.819 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 15:37:11.819 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 15:37:11.819 DEBUG [src.node.docker_mananger] docker run -i -t -p 24029:24029 -p 24030:24030 -p 24031:24031 -p 24032:24032 -p 24033:24033 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=24031 --rest-port=24029 --tcp-port=24030 --discv5-udp-port=24032 --rest-address=0.0.0.0 --nat=extip:172.18.178.54 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9b3222cb43e26a32290ab2a2a4a1d02a90f4ebb3a8ae9af1ecaa01eb11cfaff2 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QLA5td640RgKML2LJUaqhfQYsZ8Z1sI_bNB6mPAMAbpqKCdQb3aeFZnxEIprdHy_I_WRuLe9GUD1sHu7H8i-Hh4CgmlkgnY0gmlwhKwSRACKbXVsdGlhZGRyc5YACASsEkQABsvGAAoErBJEAAbLx90DgnJzhQADAQAAiXNlY3AyNTZrMaEC2hansh_yLXCA-7rwkUiXah48EhqN_mWdNsyrS7e3XiCDdGNwgsvGg3VkcILLyIV3YWt1MgM --storenode=/ip4/172.18.68.0/tcp/52166/p2p/16Uiu2HAmA6ztptuyRP1q8gsfCFHgQLcuUL1Vx6ztnM5DupBikgQf --store=true --relay=true
2025-02-06 15:37:12.075 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.178.54 waku 222909ef0f07bb3e0b42b8c3a55502073d184efa3aa19c74bee094afcba3bb0f
2025-02-06 15:37:12.133 DEBUG [src.node.docker_mananger] Container started with ID 222909ef0f07. Setting up logs at ./log/docker/store_node1_2025-02-06_15-37-10__1481d90e-3bf2-485d-a34c-6f97f2eed035__wakuorg_go-waku:latest.log
2025-02-06 15:37:12.134 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 24029
2025-02-06 15:37:12.135 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 15:37:13.135 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:24029/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:37:13.138 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QBiXgwTR54JttMXXnXPcTFYDhfrHwYRqL1BZM8km6EIIGMb4o_y7KznG_QirhXjQsXKJLMv7jCzhHVM3F-gYu92GAZTb6HTLgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaEDVayJbiTrQCpC_MOPeB4co8Vh2ZxXmeOvjLKpGcwaY5-DdGNwgl3eg3VkcIJd4IV3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/24030/p2p/16Uiu2HAmJRRbbsoiqrN33XPATJPY1pY9qDrzE3d4taEHqMTe2zJA","/ip4/127.0.0.1/tcp/24031/ws/p2p/16Uiu2HAmJRRbbsoiqrN33XPATJPY1pY9qDrzE3d4taEHqMTe2zJA","/ip4/172.17.0.3/tcp/24030/p2p/16Uiu2HAmJRRbbsoiqrN33XPATJPY1pY9qDrzE3d4taEHqMTe2zJA","/ip4/172.17.0.3/tcp/24031/ws/p2p/16Uiu2HAmJRRbbsoiqrN33XPATJPY1pY9qDrzE3d4taEHqMTe2zJA"]}'
2025-02-06 15:37:13.138 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 15:37:13.139 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24029/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.68.0/tcp/52166/p2p/16Uiu2HAmA6ztptuyRP1q8gsfCFHgQLcuUL1Vx6ztnM5DupBikgQf", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-06 15:37:13.156 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-06 15:37:13.158 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52165/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-06 15:37:13.165 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:37:13.165 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24029/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-06 15:37:13.168 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-06 15:37:13.172 DEBUG [src.steps.store] Relaying message
2025-02-06 15:37:13.173 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52165/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 15:37:13.186 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:37:13.187 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 15:37:13.387 DEBUG [src.steps.store] Relaying message
2025-02-06 15:37:13.388 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52165/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8x", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 15:37:13.394 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:37:13.394 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 15:37:13.595 DEBUG [src.steps.store] Relaying message
2025-02-06 15:37:13.595 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52165/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8y", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 15:37:13.602 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:37:13.602 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 15:37:13.802 DEBUG [src.steps.store] Relaying message
2025-02-06 15:37:13.803 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52165/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8z", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 15:37:13.809 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:37:13.810 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 15:37:14.011 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52165/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&hashes=0x7a117a14c5a3244abd6bb3d784ef6037d2eb3877c458f3be6a771a000167ef09&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:37:14.014 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x7a117a14c5a3244abd6bb3d784ef6037d2eb3877c458f3be6a771a000167ef09"}]}'
2025-02-06 15:37:14.015 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52165/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&ascending=true&hash=0x7a117a14c5a3244abd6bb3d784ef6037d2eb3877c458f3be6a771a000167ef09" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:37:14.018 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x85d7ddf7326fbef5cd14c5e348277df4356858fefdde50810e7f7be750b3cfe4"},{"messageHash":"0xe4d6f294b484faf507c547590d77c86669e9b841d7bd7a1899d003856bbbe56f"},{"messageHash":"0x7a117a14c5a3244abd6bb3d784ef6037d2eb3877c458f3be6a771a000167ef09"},{"messageHash":"0xe8ef67f0589bc36969a4b4ac739894085e1c79425623e32be2ed0ecba51e06d7"}]}'
2025-02-06 15:37:14.019 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:24029/store/v3/messages?peerAddr=%2Fip4%2F172.18.68.0%2Ftcp%2F52166%2Fp2p%2F16Uiu2HAmA6ztptuyRP1q8gsfCFHgQLcuUL1Vx6ztnM5DupBikgQf&hashes=ehF6FMWjJEq9a7PXhO9gN9LrOHfEWPO%2BancaAAFn7wk%3D&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:37:14.021 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:24029/store/v3/messages?peerAddr=%2Fip4%2F172.18.68.0%2Ftcp%2F52166%2Fp2p%2F16Uiu2HAmA6ztptuyRP1q8gsfCFHgQLcuUL1Vx6ztnM5DupBikgQf&hashes=ehF6FMWjJEq9a7PXhO9gN9LrOHfEWPO%2BancaAAFn7wk%3D&ascending=true. Response content: b'{"status_code":400,"status_desc":"illegal base64 data at input byte 31"}'
2025-02-06 15:37:14.099 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-06 15:37:14.100 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-06 15:37:14.100 DEBUG [src.node.waku_node] Stopping container with id e8f9513c37d9
2025-02-06 15:37:14.751 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 15:37:14.753 DEBUG [src.node.waku_node] Stopping container with id 222909ef0f07
2025-02-06 15:37:15.372 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 15:37:15.375 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-06 15:37:15.386 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 15:37:15.389 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
