[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_relay_receiving_node_not_connected_directly_to_relaying_node with id: 2024-09-13_10-17-27__85af22ff-804c-4f46-849e-1f2b6e7c7332
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-13_10-17-27__85af22ff-804c-4f46-849e-1f2b6e7c7332__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3036
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-13_10-17-27__85af22ff-804c-4f46-849e-1f2b6e7c7332__quay.io_wakuorg_nwaku-pr:3036.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-09-13_10-17-27__85af22ff-804c-4f46-849e-1f2b6e7c7332__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:28 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.234.157
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['20397', '20398', '20399', '20400', '20401']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 20397:20397 -p 20398:20398 -p 20399:20399 -p 20400:20400 -p 20401:20401 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=20399 --rest-port=20397 --tcp-port=20398 --discv5-udp-port=20400 --rest-address=0.0.0.0 --nat=extip:172.18.234.157 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=31aa2bce060b6adda6734bb66f093bb2defca0c9f750358ddd36dad5de88cd5c --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.234.157 waku 6b0fa536200aed457c29fc25dab7bbf80908adb2d0dd41262bddfd02503b4882
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 6b0fa536200a. Setting up logs at ./log/docker/node1_2024-09-13_10-17-27__85af22ff-804c-4f46-849e-1f2b6e7c7332__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 20397
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20397/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QPChHDmT_lJo6kOm8KL0ZNYQ0S1BGXSvGihcdCKZtzdSJW6xGCVgovPRUQm46jgQVEWv9QXb1qDT8Z-8YjnU6E6GAZHq40QOgmlkgnY0gmlwhKwRAAiJc2VjcDI1NmsxoQIDcKEChUxE4Luj8r5LcJNzmt41DF_VY1XPwsKXkk7-MYN0Y3CCT66DdWRwgk-whXdha3UyAQ","listenAddresses":["/ip4/127.0.0.1/tcp/20398/p2p/16Uiu2HAkuf6p6ByyDwvK3mc91vYXQhtnJWrwnR8LQUzMEXjcL3a8","/ip4/127.0.0.1/tcp/20399/ws/p2p/16Uiu2HAkuf6p6ByyDwvK3mc91vYXQhtnJWrwnR8LQUzMEXjcL3a8","/ip4/172.17.0.8/tcp/20398/p2p/16Uiu2HAkuf6p6ByyDwvK3mc91vYXQhtnJWrwnR8LQUzMEXjcL3a8","/ip4/172.17.0.8/tcp/20399/ws/p2p/16Uiu2HAkuf6p6ByyDwvK3mc91vYXQhtnJWrwnR8LQUzMEXjcL3a8"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.162.91
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['6739', '6740', '6741', '6742', '6743']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 6739:6739 -p 6740:6740 -p 6741:6741 -p 6742:6742 -p 6743:6743 quay.io/wakuorg/nwaku-pr:3036 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6741 --rest-port=6739 --tcp-port=6740 --discv5-udp-port=6742 --rest-address=0.0.0.0 --nat=extip:172.18.162.91 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=011aab97daa2011c699e4bd62afbe8bebabaab5a9da3e51ee420116efcdef836 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6743 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-Ji4QPChHDmT_lJo6kOm8KL0ZNYQ0S1BGXSvGihcdCKZtzdSJW6xGCVgovPRUQm46jgQVEWv9QXb1qDT8Z-8YjnU6E6GAZHq40QOgmlkgnY0gmlwhKwRAAiJc2VjcDI1NmsxoQIDcKEChUxE4Luj8r5LcJNzmt41DF_VY1XPwsKXkk7-MYN0Y3CCT66DdWRwgk-whXdha3UyAQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.162.91 waku 9b694654508cc31340fb3cdc0d744957ced81897a6ac833b7fa55eb8e8d2f7c6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 9b694654508c. Setting up logs at ./log/docker/node2_2024-09-13_10-17-27__85af22ff-804c-4f46-849e-1f2b6e7c7332__quay.io_wakuorg_nwaku-pr:3036.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image quay.io/wakuorg/nwaku-pr:3036. REST: 6739
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6739/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6739/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.162.91/tcp/6740/p2p/16Uiu2HAmGfTxXvXLyB96b6xaSYrseb8tB6YQV8AqzknS6HLxLnv6","/ip4/172.18.162.91/tcp/6741/ws/p2p/16Uiu2HAmGfTxXvXLyB96b6xaSYrseb8tB6YQV8AqzknS6HLxLnv6"],"enrUri":"enr:-LO4QBMo3BZ35zkAqihyEsun3BgZnaarCAjQmJUeh5m_n3GRdcJuasewIio5TLeofS-UUtssXWFIHyDt1RWgijkHaD0BgmlkgnY0gmlwhKwSoluKbXVsdGlhZGRyc4wACgSsEqJbBhpV3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM7jfa6cgXtPRABR89Jzb4hFTDD2cXsLT0wlwqzj8bNI4N0Y3CCGlSDdWRwghpWhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.110.224
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['60381', '60382', '60383', '60384', '60385']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 60381:60381 -p 60382:60382 -p 60383:60383 -p 60384:60384 -p 60385:60385 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=60383 --rest-port=60381 --tcp-port=60382 --discv5-udp-port=60384 --rest-address=0.0.0.0 --nat=extip:172.18.110.224 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=19dd4d5abd23d8bd846d51c9dfb8dba53e5436037a307d8dbbf291a9cd30a4f6 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --discv5-bootstrap-node=enr:-LO4QBMo3BZ35zkAqihyEsun3BgZnaarCAjQmJUeh5m_n3GRdcJuasewIio5TLeofS-UUtssXWFIHyDt1RWgijkHaD0BgmlkgnY0gmlwhKwSoluKbXVsdGlhZGRyc4wACgSsEqJbBhpV3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM7jfa6cgXtPRABR89Jzb4hFTDD2cXsLT0wlwqzj8bNI4N0Y3CCGlSDdWRwghpWhXdha3UyAQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.110.224 waku 3fbca3d61842f9948cb66d3b173153f1d5bfc785d4db79895c7bf85e2188508f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 3fbca3d61842. Setting up logs at ./log/docker/node3_2024-09-13_10-17-27__85af22ff-804c-4f46-849e-1f2b6e7c7332__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 60381
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60381/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QLIahzBvasnsuEZUhh1He8BObBOTFMdeD8qJYOajgi21Y1CvIzYB-TQnyy2mv2fIGIeP7bPHWNJBQizTPzaRNh6GAZHq41RZgmlkgnY0gmlwhKwRAA2Jc2VjcDI1NmsxoQLxMqEGJqE3NUM1bIPXYWcbbc7Ept7oTffEtAcLxXLAyoN0Y3CC696DdWRwguvghXdha3UyAQ","listenAddresses":["/ip4/127.0.0.1/tcp/60382/p2p/16Uiu2HAmBfD1dddn7caksG7uUyt8E8nVW8nBX373ezogBcQgBwJy","/ip4/127.0.0.1/tcp/60383/ws/p2p/16Uiu2HAmBfD1dddn7caksG7uUyt8E8nVW8nBX373ezogBcQgBwJy","/ip4/172.17.0.13/tcp/60382/p2p/16Uiu2HAmBfD1dddn7caksG7uUyt8E8nVW8nBX373ezogBcQgBwJy","/ip4/172.17.0.13/tcp/60383/ws/p2p/16Uiu2HAmBfD1dddn7caksG7uUyt8E8nVW8nBX373ezogBcQgBwJy"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20397/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6739/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60381/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20397/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20397/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAmGfTxXvXLyB96b6xaSYrseb8tB6YQV8AqzknS6HLxLnv6","multiaddrs":["/ip4/172.18.162.91/tcp/6741/ws/p2p/16Uiu2HAmGfTxXvXLyB96b6xaSYrseb8tB6YQV8AqzknS6HLxLnv6","/ip4/172.18.162.91/tcp/6740/p2p/16Uiu2HAmGfTxXvXLyB96b6xaSYrseb8tB6YQV8AqzknS6HLxLnv6"],"protocols":["/vac/waku/relay/2.0.0"],"connected":true,"pubsubTopics":["/waku/2/rs/3/0","/waku/2/rs/3/1"]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6739/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.8/tcp/20398/p2p/16Uiu2HAkuf6p6ByyDwvK3mc91vYXQhtnJWrwnR8LQUzMEXjcL3a8","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60381/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAmGfTxXvXLyB96b6xaSYrseb8tB6YQV8AqzknS6HLxLnv6","multiaddrs":["/ip4/172.18.162.91/tcp/6740/p2p/16Uiu2HAmGfTxXvXLyB96b6xaSYrseb8tB6YQV8AqzknS6HLxLnv6","/ip4/172.18.162.91/tcp/6741/ws/p2p/16Uiu2HAmGfTxXvXLyB96b6xaSYrseb8tB6YQV8AqzknS6HLxLnv6"],"protocols":["/vac/waku/relay/2.0.0"],"connected":false,"pubsubTopics":["/waku/2/rs/3/0"]}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20397/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.relay:relay.py:123 Checking that peer NODE_1:wakuorg/go-waku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60381/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","timestamp":1726222684532492288,"ephemeral":null}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 6b0fa536200a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 9b694654508c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 3fbca3d61842
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.