[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_node_not_connected_directly_to_lightpushing_node with id: 2024-09-13_09-43-20__03affe2a-c185-46dc-b8a5-c192e7b56b3c
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3036
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-13_09-43-20__03affe2a-c185-46dc-b8a5-c192e7b56b3c__quay.io_wakuorg_nwaku-pr:3036.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3036
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-13_09-43-20__03affe2a-c185-46dc-b8a5-c192e7b56b3c__quay.io_wakuorg_nwaku-pr:3036.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3036
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-09-13_09-43-20__03affe2a-c185-46dc-b8a5-c192e7b56b3c__quay.io_wakuorg_nwaku-pr:3036.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:28 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.138.121
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['31120', '31121', '31122', '31123', '31124']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 31120:31120 -p 31121:31121 -p 31122:31122 -p 31123:31123 -p 31124:31124 quay.io/wakuorg/nwaku-pr:3036 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=31122 --rest-port=31120 --tcp-port=31121 --discv5-udp-port=31123 --rest-address=0.0.0.0 --nat=extip:172.18.138.121 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9dfbf0ecbfbeee3dc18aaf65ecfae77bba60c45efebc09bd3eeffda6281d168f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=31124 --metrics-logging=true --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.138.121 waku 13a8005a4f9b8f0f91e4a64542227aff7a4006e42493b1819c870647d7674267
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 13a8005a4f9b. Setting up logs at ./log/docker/node1_2024-09-13_09-43-20__03affe2a-c185-46dc-b8a5-c192e7b56b3c__quay.io_wakuorg_nwaku-pr:3036.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image quay.io/wakuorg/nwaku-pr:3036. REST: 31120
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31120/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31120/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.138.121/tcp/31121/p2p/16Uiu2HAm4zRuYoiZaXqmj7hwCEeKzf2tiGmMiyE6hpRJu4xGakn5","/ip4/172.18.138.121/tcp/31122/ws/p2p/16Uiu2HAm4zRuYoiZaXqmj7hwCEeKzf2tiGmMiyE6hpRJu4xGakn5"],"enrUri":"enr:-LO4QNWPV-ga-NOaY-Szd8tX1smMESA8Uwd6Da4XKjVO4pP_GCI27l7pbspx6qw-WoyyVRrXuY6GGFwcTaFr4pmfRiQBgmlkgnY0gmlwhKwSinmKbXVsdGlhZGRyc4wACgSsEop5BnmS3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKOHW-6wZUamrfAyml40hp40lomlojS1uxZylRI6IKpeoN0Y3CCeZGDdWRwgnmThXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.57.160
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['36687', '36688', '36689', '36690', '36691']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 36687:36687 -p 36688:36688 -p 36689:36689 -p 36690:36690 -p 36691:36691 quay.io/wakuorg/nwaku-pr:3036 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36689 --rest-port=36687 --tcp-port=36688 --discv5-udp-port=36690 --rest-address=0.0.0.0 --nat=extip:172.18.57.160 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=325ad19cfa2524d44d5493e0cdcd96cfecbcfd927c1beab9c9f3ada6edebaac4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36691 --metrics-logging=true --lightpush=true --store=true --relay=true --discv5-bootstrap-node=enr:-LO4QNWPV-ga-NOaY-Szd8tX1smMESA8Uwd6Da4XKjVO4pP_GCI27l7pbspx6qw-WoyyVRrXuY6GGFwcTaFr4pmfRiQBgmlkgnY0gmlwhKwSinmKbXVsdGlhZGRyc4wACgSsEop5BnmS3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKOHW-6wZUamrfAyml40hp40lomlojS1uxZylRI6IKpeoN0Y3CCeZGDdWRwgnmThXdha3UyCQ --lightpushnode=/ip4/172.18.138.121/tcp/31121/p2p/16Uiu2HAm4zRuYoiZaXqmj7hwCEeKzf2tiGmMiyE6hpRJu4xGakn5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.57.160 waku 152c062756d41772a56ed2365597481f1fc48844e0240c342556f4dbf8813345
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 152c062756d4. Setting up logs at ./log/docker/node2_2024-09-13_09-43-20__03affe2a-c185-46dc-b8a5-c192e7b56b3c__quay.io_wakuorg_nwaku-pr:3036.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image quay.io/wakuorg/nwaku-pr:3036. REST: 36687
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36687/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36687/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.57.160/tcp/36688/p2p/16Uiu2HAmL8jzZLTfeXksMzQkb9FY77K6jRHx4QPqefu4hDs8TQAi","/ip4/172.18.57.160/tcp/36689/ws/p2p/16Uiu2HAmL8jzZLTfeXksMzQkb9FY77K6jRHx4QPqefu4hDs8TQAi"],"enrUri":"enr:-LO4QBglggxnDuugoObuy-RE4HEm7qRiXFwlfzuaHm4b8_gEDTHr_4haSC48rsiW2roxlOqre7amXtbvbOAsjomSLcYBgmlkgnY0gmlwhKwSOaCKbXVsdGlhZGRyc4wACgSsEjmgBo9R3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNvHdZOEsZEby2dfrlemRm6L1b9K0yBUoyBJY6sRm0HL4N0Y3CCj1CDdWRwgo9ShXdha3UyCw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.143.98
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['51627', '51628', '51629', '51630', '51631']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 51627:51627 -p 51628:51628 -p 51629:51629 -p 51630:51630 -p 51631:51631 quay.io/wakuorg/nwaku-pr:3036 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=51629 --rest-port=51627 --tcp-port=51628 --discv5-udp-port=51630 --rest-address=0.0.0.0 --nat=extip:172.18.143.98 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=55a6dcedeab9f5ff9e0b9ecab77cd27ac2ce4787c710a9aa71b0bd665faf365f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=51631 --metrics-logging=true --relay=false --storenode=/ip4/172.18.57.160/tcp/36688/p2p/16Uiu2HAmL8jzZLTfeXksMzQkb9FY77K6jRHx4QPqefu4hDs8TQAi --discv5-bootstrap-node=enr:-LO4QBglggxnDuugoObuy-RE4HEm7qRiXFwlfzuaHm4b8_gEDTHr_4haSC48rsiW2roxlOqre7amXtbvbOAsjomSLcYBgmlkgnY0gmlwhKwSOaCKbXVsdGlhZGRyc4wACgSsEjmgBo9R3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNvHdZOEsZEby2dfrlemRm6L1b9K0yBUoyBJY6sRm0HL4N0Y3CCj1CDdWRwgo9ShXdha3UyCw
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.143.98 waku 26a554dbfba114d08078d20c552eadb943da015b9931ba1515c234bb449c1e50
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 26a554dbfba1. Setting up logs at ./log/docker/node3_2024-09-13_09-43-20__03affe2a-c185-46dc-b8a5-c192e7b56b3c__quay.io_wakuorg_nwaku-pr:3036.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image quay.io/wakuorg/nwaku-pr:3036. REST: 51627
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51627/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51627/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.143.98/tcp/51628/p2p/16Uiu2HAmDri8PoBAbJ6v9r81FdajebdjntC26KMz6ygnLfKG5imL","/ip4/172.18.143.98/tcp/51629/ws/p2p/16Uiu2HAmDri8PoBAbJ6v9r81FdajebdjntC26KMz6ygnLfKG5imL"],"enrUri":"enr:-LO4QCDEUlsZHo0swjJFyQF01KlMwxEJCWsR0dR8PtCP3C2hehJA7_FJxlCbbFbuhKdo209izxvynJ2Nk5-NJRvumRcBgmlkgnY0gmlwhKwSj2KKbXVsdGlhZGRyc4wACgSsEo9iBsmt3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMR3FBgZ8w97s6-mSHHtt-d0s1cTw7Ms6ouYGoxDWvmn4N0Y3CCyayDdWRwgsmuhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31120/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36687/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31120/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31120/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.57.160/tcp/36688/p2p/16Uiu2HAmL8jzZLTfeXksMzQkb9FY77K6jRHx4QPqefu4hDs8TQAi","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36687/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.138.121/tcp/31121/p2p/16Uiu2HAm4zRuYoiZaXqmj7hwCEeKzf2tiGmMiyE6hpRJu4xGakn5","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31120/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1726220636812794112}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.store:store.py:215 Checking that peer quay.io/wakuorg/nwaku-pr:3036 can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51627/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"acd643a991f162e90328","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"Oo59PA1xG64ifAg61NkqiWzhVZzk79FxBk4L22oe1gQ="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 13a8005a4f9b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 152c062756d4
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 26a554dbfba1
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.