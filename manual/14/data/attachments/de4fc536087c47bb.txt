[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_version with id: 2024-09-13_09-50-56__90dfaac5-6274-4a90-bf43-019dfe12454f
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3036
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-13_09-50-56__90dfaac5-6274-4a90-bf43-019dfe12454f__quay.io_wakuorg_nwaku-pr:3036.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.89.144
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['8953', '8954', '8955', '8956', '8957']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 8953:8953 -p 8954:8954 -p 8955:8955 -p 8956:8956 -p 8957:8957 quay.io/wakuorg/nwaku-pr:3036 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8955 --rest-port=8953 --tcp-port=8954 --discv5-udp-port=8956 --rest-address=0.0.0.0 --nat=extip:172.18.89.144 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=78ceacc3fe0cc3ebde5eeecbee03beec0062fadbb705deaad0821ecdffa20d8b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8957 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.89.144 waku c983ce64adb377837eb1539a34f4792a5cccf80518363afb22ab23489563ffa8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID c983ce64adb3. Setting up logs at ./log/docker/receiving_node1_2024-09-13_09-50-56__90dfaac5-6274-4a90-bf43-019dfe12454f__quay.io_wakuorg_nwaku-pr:3036.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image quay.io/wakuorg/nwaku-pr:3036. REST: 8953
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8953/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8953/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.89.144/tcp/8954/p2p/16Uiu2HAmNQUe4CkFHiDr2tJA86PCW3MMrdhofoGmK2MBGsmjWZzV","/ip4/172.18.89.144/tcp/8955/ws/p2p/16Uiu2HAmNQUe4CkFHiDr2tJA86PCW3MMrdhofoGmK2MBGsmjWZzV"],"enrUri":"enr:-LO4QAPbtYa6W7bCFZTTXPjLbAX3oK7MGJI73Nrg01yfsHIRKlGykDAXw4evMGYnUNJDhShK9x_vewWBIr4lT2B4Ob8BgmlkgnY0gmlwhKwSWZCKbXVsdGlhZGRyc4wACgSsElmQBiL73QOCcnOFAAMBAACJc2VjcDI1NmsxoQOQ3STIY5qXGYFNHwsxcXb5lGNJOE55D8__NhfOZz8ALoN0Y3CCIvqDdWRwgiL8hXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3036
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-13_09-50-56__90dfaac5-6274-4a90-bf43-019dfe12454f__quay.io_wakuorg_nwaku-pr:3036.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.17.113
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['41427', '41428', '41429', '41430', '41431']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 41427:41427 -p 41428:41428 -p 41429:41429 -p 41430:41430 -p 41431:41431 quay.io/wakuorg/nwaku-pr:3036 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=41429 --rest-port=41427 --tcp-port=41428 --discv5-udp-port=41430 --rest-address=0.0.0.0 --nat=extip:172.18.17.113 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f73feaedd1ecbcf1fa3d0da70ba3fc083e3fdcfd083af32b10f09adc3a45d0cc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=41431 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.17.113 waku 60644b0d080dfcad19a3dcd613a74b8005371409107249d9c3eaa46f7a08675f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 60644b0d080d. Setting up logs at ./log/docker/receiving_node2_2024-09-13_09-50-56__90dfaac5-6274-4a90-bf43-019dfe12454f__quay.io_wakuorg_nwaku-pr:3036.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image quay.io/wakuorg/nwaku-pr:3036. REST: 41427
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41427/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41427/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.17.113/tcp/41428/p2p/16Uiu2HAm4jquDuQgFqoLTJJv4poJML73TudJ4PTEBmR6Te2Rw1mt","/ip4/172.18.17.113/tcp/41429/ws/p2p/16Uiu2HAm4jquDuQgFqoLTJJv4poJML73TudJ4PTEBmR6Te2Rw1mt"],"enrUri":"enr:-LO4QFpJkKFTcqVN5wlBi9bYePeIhQVvDDvR4wVL6gwoJEOsWp7_UkirHo_PiYJPXSb3FDHNVTULkvP4-s7rFRvfw4gBgmlkgnY0gmlwhKwSEXGKbXVsdGlhZGRyc4wACgSsEhFxBqHV3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKKYNrW1FtUaiZ7pRcrpBpZHsIWTSoGmVgIQf3nC-V6-4N0Y3CCodSDdWRwgqHWhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41427/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.89.144/tcp/8954/p2p/16Uiu2HAmNQUe4CkFHiDr2tJA86PCW3MMrdhofoGmK2MBGsmjWZzV"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3036
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-13_09-50-56__90dfaac5-6274-4a90-bf43-019dfe12454f__quay.io_wakuorg_nwaku-pr:3036.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.123.156
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['32551', '32552', '32553', '32554', '32555']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 32551:32551 -p 32552:32552 -p 32553:32553 -p 32554:32554 -p 32555:32555 quay.io/wakuorg/nwaku-pr:3036 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32553 --rest-port=32551 --tcp-port=32552 --discv5-udp-port=32554 --rest-address=0.0.0.0 --nat=extip:172.18.123.156 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c77cb19dbbdf07db5c9ef4ca15558c9f8cadaaefba04d35aac109db39c90ff56 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32555 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QAPbtYa6W7bCFZTTXPjLbAX3oK7MGJI73Nrg01yfsHIRKlGykDAXw4evMGYnUNJDhShK9x_vewWBIr4lT2B4Ob8BgmlkgnY0gmlwhKwSWZCKbXVsdGlhZGRyc4wACgSsElmQBiL73QOCcnOFAAMBAACJc2VjcDI1NmsxoQOQ3STIY5qXGYFNHwsxcXb5lGNJOE55D8__NhfOZz8ALoN0Y3CCIvqDdWRwgiL8hXdha3UyCQ --lightpushnode=/ip4/172.18.89.144/tcp/8954/p2p/16Uiu2HAmNQUe4CkFHiDr2tJA86PCW3MMrdhofoGmK2MBGsmjWZzV --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.123.156 waku 7958d60fcdacdd591701eeafe82a2bc4bd16a78022fbeba13c96128e90e805e3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 7958d60fcdac. Setting up logs at ./log/docker/lightpush_node1_2024-09-13_09-50-56__90dfaac5-6274-4a90-bf43-019dfe12454f__quay.io_wakuorg_nwaku-pr:3036.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image quay.io/wakuorg/nwaku-pr:3036. REST: 32551
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32551/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32551/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.123.156/tcp/32552/p2p/16Uiu2HAm6sN2kMJuBqUNB14JEKAHyLnnhCAMFL96zX2XsSg4h6h7","/ip4/172.18.123.156/tcp/32553/ws/p2p/16Uiu2HAm6sN2kMJuBqUNB14JEKAHyLnnhCAMFL96zX2XsSg4h6h7"],"enrUri":"enr:-LO4QHI9PGj79k98S37wkEpha0h-y-UT8XSjEOlz4oywfOViZ5r2t17gM88ze5xhr6xAVgcVFz3YDV7R3Q42bEGsFZQBgmlkgnY0gmlwhKwSe5yKbXVsdGlhZGRyc4wACgSsEnucBn8p3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKqBVy2s4IlHv3LB-MKLYVA0Ym2e9uSDqPaSWi0QJIk2oN0Y3CCfyiDdWRwgn8qhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32551/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.89.144/tcp/8954/p2p/16Uiu2HAmNQUe4CkFHiDr2tJA86PCW3MMrdhofoGmK2MBGsmjWZzV"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32551/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.17.113/tcp/41428/p2p/16Uiu2HAm4jquDuQgFqoLTJJv4poJML73TudJ4PTEBmR6Te2Rw1mt"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8953/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41427/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32551/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1726221063827003648, "version": 2.1}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:32551/lightpush/v1/message. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id c983ce64adb3
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 60644b0d080d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 7958d60fcdac
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.