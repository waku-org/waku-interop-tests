[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_update_subscription_with_no_content_topic with id: 2024-09-13_09-47-09__0336053b-2747-4770-a1c5-1d8236dd7e55
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3036
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-13_09-47-09__0336053b-2747-4770-a1c5-1d8236dd7e55__quay.io_wakuorg_nwaku-pr:3036.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.117.183
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['60735', '60736', '60737', '60738', '60739']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 60735:60735 -p 60736:60736 -p 60737:60737 -p 60738:60738 -p 60739:60739 quay.io/wakuorg/nwaku-pr:3036 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=60737 --rest-port=60735 --tcp-port=60736 --discv5-udp-port=60738 --rest-address=0.0.0.0 --nat=extip:172.18.117.183 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c63c7e8d5f0c75dcd8b19ee6300fde123dc9de4f05eeb6ce3ac42e1d375be12b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=60739 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.28.203
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['43561', '43562', '43563', '43564', '43565']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 43561:43561 -p 43562:43562 -p 43563:43563 -p 43564:43564 -p 43565:43565 quay.io/wakuorg/nwaku-pr:3036 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=43563 --rest-port=43561 --tcp-port=43562 --discv5-udp-port=43564 --rest-address=0.0.0.0 --nat=extip:172.18.28.203 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dfec780aeaf7be8dfe14403dfa69db27748456df88dcafdd6b4f34ca30f8d8a2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=43565 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.28.203 waku 150b2a7371805d35096561b7711456dee7f236d22db97935b5f5973715e9c909
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 150b2a737180. Setting up logs at ./log/docker/node1_2024-09-13_09-47-09__0336053b-2747-4770-a1c5-1d8236dd7e55__quay.io_wakuorg_nwaku-pr:3036.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image quay.io/wakuorg/nwaku-pr:3036. REST: 43561
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43561/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43561/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.28.203/tcp/43562/p2p/16Uiu2HAmVCaRhpmmDhaRzZJCBy57eS3p2R9bFbVJqhvLxCBfNeHi","/ip4/172.18.28.203/tcp/43563/ws/p2p/16Uiu2HAmVCaRhpmmDhaRzZJCBy57eS3p2R9bFbVJqhvLxCBfNeHi"],"enrUri":"enr:-LO4QBX7-ZIfgUjsLpmj5BK0m-7MCN08ZUFcAVqHNSwiVZTEbS5mdql55382cew0Qj01x4OpjV_-yqJSDRJcjlywYswBgmlkgnY0gmlwhKwSHMuKbXVsdGlhZGRyc4wACgSsEhzLBqor3QOCcnOFAAMBAACJc2VjcDI1NmsxoQP10oag0zNcICcGu10wZvSTISmq4FbJ49q45qnDKFnjJYN0Y3CCqiqDdWRwgqoshXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3036
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-13_09-47-09__0336053b-2747-4770-a1c5-1d8236dd7e55__quay.io_wakuorg_nwaku-pr:3036.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.133.92
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['51420', '51421', '51422', '51423', '51424']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 51420:51420 -p 51421:51421 -p 51422:51422 -p 51423:51423 -p 51424:51424 quay.io/wakuorg/nwaku-pr:3036 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=51422 --rest-port=51420 --tcp-port=51421 --discv5-udp-port=51423 --rest-address=0.0.0.0 --nat=extip:172.18.133.92 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5d71446f14fa5fbf08dbfe86a0aaa998cccc15fffeaafbeaadac77fb4542ef87 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=51424 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QBX7-ZIfgUjsLpmj5BK0m-7MCN08ZUFcAVqHNSwiVZTEbS5mdql55382cew0Qj01x4OpjV_-yqJSDRJcjlywYswBgmlkgnY0gmlwhKwSHMuKbXVsdGlhZGRyc4wACgSsEhzLBqor3QOCcnOFAAMBAACJc2VjcDI1NmsxoQP10oag0zNcICcGu10wZvSTISmq4FbJ49q45qnDKFnjJYN0Y3CCqiqDdWRwgqoshXdha3UyBQ --filternode=/ip4/172.18.28.203/tcp/43562/p2p/16Uiu2HAmVCaRhpmmDhaRzZJCBy57eS3p2R9bFbVJqhvLxCBfNeHi
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.133.92 waku 217ba56046ae71864db7760e1a3ed347859b53e0fbe62494ff98321ba9c2fffe
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 217ba56046ae. Setting up logs at ./log/docker/node2_2024-09-13_09-47-09__0336053b-2747-4770-a1c5-1d8236dd7e55__quay.io_wakuorg_nwaku-pr:3036.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image quay.io/wakuorg/nwaku-pr:3036. REST: 51420
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51420/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51420/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.133.92/tcp/51421/p2p/16Uiu2HAm77unYY13nSnspEWLUs6mB3Ln7NbXkG6B3cwZQyPdBWXK","/ip4/172.18.133.92/tcp/51422/ws/p2p/16Uiu2HAm77unYY13nSnspEWLUs6mB3Ln7NbXkG6B3cwZQyPdBWXK"],"enrUri":"enr:-LO4QHtj3TfsGyAdXeyVUW_oHtqDr6bG45g2zV_gtbwbbBCkPHFhm3HINua4JlEfKMIJjFibzYjkYDY1N2QRc2s_5h8BgmlkgnY0gmlwhKwShVyKbXVsdGlhZGRyc4wACgSsEoVcBsje3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKtv2Yrw4izzoc-crrvsBFzLEsj_7Ef7IalRZxPVDODAoN0Y3CCyN2DdWRwgsjfhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51420/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.28.203/tcp/43562/p2p/16Uiu2HAmVCaRhpmmDhaRzZJCBy57eS3p2R9bFbVJqhvLxCBfNeHi"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43561/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51420/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "963069fb-bc5a-4057-aaa8-07300a9d4398", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"963069fb-bc5a-4057-aaa8-07300a9d4398","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X PUT "http://127.0.0.1:51420/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "pubsubTopic": "/waku/2/rs/3/1"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:51420/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 150b2a737180
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 217ba56046ae
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.