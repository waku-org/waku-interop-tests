[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_only_relay__peer_only_store with id: 2024-09-13_10-08-38__87fa982d-8690-429a-966a-815f1522b1cc
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:28 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3036
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-09-13_10-08-38__87fa982d-8690-429a-966a-815f1522b1cc__quay.io_wakuorg_nwaku-pr:3036.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.36.88
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['53403', '53404', '53405', '53406', '53407']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 53403:53403 -p 53404:53404 -p 53405:53405 -p 53406:53406 -p 53407:53407 quay.io/wakuorg/nwaku-pr:3036 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=53405 --rest-port=53403 --tcp-port=53404 --discv5-udp-port=53406 --rest-address=0.0.0.0 --nat=extip:172.18.36.88 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ef907c8fa0dbcc5c2e24b5c3918e463bcae4036edaf64dfa663bfa8dea3ff4b1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=53407 --metrics-logging=true --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.36.88 waku 5db14598d64e7dbee443f3275955a95bc8458c742a6e0531ffab430d967247bb
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 5db14598d64e. Setting up logs at ./log/docker/publishing_node1_2024-09-13_10-08-38__87fa982d-8690-429a-966a-815f1522b1cc__quay.io_wakuorg_nwaku-pr:3036.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image quay.io/wakuorg/nwaku-pr:3036. REST: 53403
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53403/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53403/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.36.88/tcp/53404/p2p/16Uiu2HAkuTeheCBwWgx92LZBCc41Ez75iivDB4StMMhcKU8oRAaM","/ip4/172.18.36.88/tcp/53405/ws/p2p/16Uiu2HAkuTeheCBwWgx92LZBCc41Ez75iivDB4StMMhcKU8oRAaM"],"enrUri":"enr:-LO4QLNCA7e2nnj3Qh72RVQg2HO_Zk22l_m_SuvqiBpTiqBmVxP0LFeCirL8pYnp-Zl_emAT2q_uz5DfqyGqcHtrL-oBgmlkgnY0gmlwhKwSJFiKbXVsdGlhZGRyc4wACgSsEiRYBtCd3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIAgbdOp7tOaZIwySNwz4TxLvjDXzMnrZs2pDvmwakakoN0Y3CC0JyDdWRwgtCehXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3036
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2024-09-13_10-08-38__87fa982d-8690-429a-966a-815f1522b1cc__quay.io_wakuorg_nwaku-pr:3036.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.179.211
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['63642', '63643', '63644', '63645', '63646']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 63642:63642 -p 63643:63643 -p 63644:63644 -p 63645:63645 -p 63646:63646 quay.io/wakuorg/nwaku-pr:3036 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63644 --rest-port=63642 --tcp-port=63643 --discv5-udp-port=63645 --rest-address=0.0.0.0 --nat=extip:172.18.179.211 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=62a2e63ebb1e3eac2cdfbab7ecdfdfe2a141d8c35fa624ccba6dc5af4c7dd7d0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63646 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QLNCA7e2nnj3Qh72RVQg2HO_Zk22l_m_SuvqiBpTiqBmVxP0LFeCirL8pYnp-Zl_emAT2q_uz5DfqyGqcHtrL-oBgmlkgnY0gmlwhKwSJFiKbXVsdGlhZGRyc4wACgSsEiRYBtCd3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIAgbdOp7tOaZIwySNwz4TxLvjDXzMnrZs2pDvmwakakoN0Y3CC0JyDdWRwgtCehXdha3UyAQ --storenode=/ip4/172.18.36.88/tcp/53404/p2p/16Uiu2HAkuTeheCBwWgx92LZBCc41Ez75iivDB4StMMhcKU8oRAaM --store=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.179.211 waku a7ffddb5ca89223eb16bac04751e510d4565be657560a679fd0080c7a0cce75c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID a7ffddb5ca89. Setting up logs at ./log/docker/store_node1_2024-09-13_10-08-38__87fa982d-8690-429a-966a-815f1522b1cc__quay.io_wakuorg_nwaku-pr:3036.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image quay.io/wakuorg/nwaku-pr:3036. REST: 63642
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63642/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63642/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.179.211/tcp/63643/p2p/16Uiu2HAkxW16T8DyVcHbXmBiA7kvarbKF48rXvyUZQ5NTGafRT7t","/ip4/172.18.179.211/tcp/63644/ws/p2p/16Uiu2HAkxW16T8DyVcHbXmBiA7kvarbKF48rXvyUZQ5NTGafRT7t"],"enrUri":"enr:-LO4QLEgMa3wq_wXmr0tN60edvZlCqTZWAeCkO04BbTfrQ9vSvMkMhIihqtEqoawXbKBd-_-07SBe6LRA4QO2kwVMUEBgmlkgnY0gmlwhKwSs9OKbXVsdGlhZGRyc4wACgSsErPTBvic3QOCcnOFAAMBAACJc2VjcDI1NmsxoQItrv9G41Q6pr1dVFCz6faJ0yB9UX6xnZp0pYsvpYq8t4N0Y3CC-JuDdWRwgvidhXdha3UyAg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63642/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.36.88/tcp/53404/p2p/16Uiu2HAkuTeheCBwWgx92LZBCc41Ez75iivDB4StMMhcKU8oRAaM"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53403/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:129 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53403/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:215 Checking that peer quay.io/wakuorg/nwaku-pr:3036 can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63642/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 5db14598d64e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id a7ffddb5ca89
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.