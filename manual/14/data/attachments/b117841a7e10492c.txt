[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_only_relay__peer_only_relay with id: 2024-09-13_10-08-51__9df117d8-13d6-48d5-82c2-c046b831c95d
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:28 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3036
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-09-13_10-08-51__9df117d8-13d6-48d5-82c2-c046b831c95d__quay.io_wakuorg_nwaku-pr:3036.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.135.98
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['25836', '25837', '25838', '25839', '25840']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 25836:25836 -p 25837:25837 -p 25838:25838 -p 25839:25839 -p 25840:25840 quay.io/wakuorg/nwaku-pr:3036 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25838 --rest-port=25836 --tcp-port=25837 --discv5-udp-port=25839 --rest-address=0.0.0.0 --nat=extip:172.18.135.98 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2db4478bbdfeae08ec3eb85a6ed648aa2c7cf4cd6dca34fd7ac1f860e0a6f467 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25840 --metrics-logging=true --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.135.98 waku 444131f4ee1ec8a36701af21b8254bb8cef8cbe05a01d01d90fd80c08f12b4a5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 444131f4ee1e. Setting up logs at ./log/docker/publishing_node1_2024-09-13_10-08-51__9df117d8-13d6-48d5-82c2-c046b831c95d__quay.io_wakuorg_nwaku-pr:3036.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image quay.io/wakuorg/nwaku-pr:3036. REST: 25836
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25836/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25836/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.135.98/tcp/25837/p2p/16Uiu2HAmJ41bzY6EWRrtkRS2T1DMiXGnUcQyCMKipG7mNm9Siuzn","/ip4/172.18.135.98/tcp/25838/ws/p2p/16Uiu2HAmJ41bzY6EWRrtkRS2T1DMiXGnUcQyCMKipG7mNm9Siuzn"],"enrUri":"enr:-LO4QJ1oc7wCF_wjvXa1Ay60UmchDkNYJDwgLz7Zn_1SJSxgYeuLnhPcWL-offDl-a3sv_livRpsfAJwGNCTObpV-jYBgmlkgnY0gmlwhKwSh2KKbXVsdGlhZGRyc4wACgSsEodiBmTu3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNQMDXoVC3nQhNUMQoQ88aCwcdAWpmxi-DPFehXPsa334N0Y3CCZO2DdWRwgmTvhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3036
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2024-09-13_10-08-51__9df117d8-13d6-48d5-82c2-c046b831c95d__quay.io_wakuorg_nwaku-pr:3036.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.99.15
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['1418', '1419', '1420', '1421', '1422']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 1418:1418 -p 1419:1419 -p 1420:1420 -p 1421:1421 -p 1422:1422 quay.io/wakuorg/nwaku-pr:3036 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=1420 --rest-port=1418 --tcp-port=1419 --discv5-udp-port=1421 --rest-address=0.0.0.0 --nat=extip:172.18.99.15 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cecbf0c845d319ddeef7c92090d5e2beba9db20e9e6123ba8fe096aacfc8fed4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=1422 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QJ1oc7wCF_wjvXa1Ay60UmchDkNYJDwgLz7Zn_1SJSxgYeuLnhPcWL-offDl-a3sv_livRpsfAJwGNCTObpV-jYBgmlkgnY0gmlwhKwSh2KKbXVsdGlhZGRyc4wACgSsEodiBmTu3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNQMDXoVC3nQhNUMQoQ88aCwcdAWpmxi-DPFehXPsa334N0Y3CCZO2DdWRwgmTvhXdha3UyAQ --storenode=/ip4/172.18.135.98/tcp/25837/p2p/16Uiu2HAmJ41bzY6EWRrtkRS2T1DMiXGnUcQyCMKipG7mNm9Siuzn --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.99.15 waku 6c9aee36705535c49ad21cb69ba6eedd1d52010f811e0ab35b1e315633f95dfa
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 6c9aee367055. Setting up logs at ./log/docker/store_node1_2024-09-13_10-08-51__9df117d8-13d6-48d5-82c2-c046b831c95d__quay.io_wakuorg_nwaku-pr:3036.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image quay.io/wakuorg/nwaku-pr:3036. REST: 1418
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1418/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1418/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.99.15/tcp/1419/p2p/16Uiu2HAmDJUMXup2s3fKsqT21h19t3zhgMvoRBXNvGSjaphVanca","/ip4/172.18.99.15/tcp/1420/ws/p2p/16Uiu2HAmDJUMXup2s3fKsqT21h19t3zhgMvoRBXNvGSjaphVanca"],"enrUri":"enr:-LO4QKPBOHDnRNJ7IT1ILGpbZrejWI9avqY-mlJ73ZokToUkCZofk2FuDFYicL3OjcQJboDpsyi2-YsAeIIoMdS37WcBgmlkgnY0gmlwhKwSYw-KbXVsdGlhZGRyc4wACgSsEmMPBgWM3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMJmieGLWh-78jcmE1nvJDM5Mb2NWsVE5fklKdGmB6ti4N0Y3CCBYuDdWRwggWNhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1418/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.135.98/tcp/25837/p2p/16Uiu2HAmJ41bzY6EWRrtkRS2T1DMiXGnUcQyCMKipG7mNm9Siuzn"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25836/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1418/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:129 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25836/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:215 Checking that peer quay.io/wakuorg/nwaku-pr:3036 can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1418/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":504,"statusDesc":"PEER_DIAL_FAILURE: 16Uiu2HAmJ41bzY6EWRrtkRS2T1DMiXGnUcQyCMKipG7mNm9Siuzn","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 444131f4ee1e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 6c9aee367055
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.