[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_node_not_connected_directly_to_relaying_node with id: 2024-09-13_09-43-01__24a51b84-5b1a-4918-9ef5-03c31255b8d8
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3036
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-13_09-43-01__24a51b84-5b1a-4918-9ef5-03c31255b8d8__quay.io_wakuorg_nwaku-pr:3036.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3036
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-13_09-43-01__24a51b84-5b1a-4918-9ef5-03c31255b8d8__quay.io_wakuorg_nwaku-pr:3036.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3036
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-09-13_09-43-01__24a51b84-5b1a-4918-9ef5-03c31255b8d8__quay.io_wakuorg_nwaku-pr:3036.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:28 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.195.87
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['20123', '20124', '20125', '20126', '20127']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 20123:20123 -p 20124:20124 -p 20125:20125 -p 20126:20126 -p 20127:20127 quay.io/wakuorg/nwaku-pr:3036 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20125 --rest-port=20123 --tcp-port=20124 --discv5-udp-port=20126 --rest-address=0.0.0.0 --nat=extip:172.18.195.87 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eebe08c1be9b3a9b1d2c947dbe0ae2aea93fac7399b452c6f7153a6ef834adef --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20127 --metrics-logging=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.195.87 waku 31fca3505796f9f4539a5b1bb9b61b55a681282ec39db4add307743f7db5dba1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 31fca3505796. Setting up logs at ./log/docker/node1_2024-09-13_09-43-01__24a51b84-5b1a-4918-9ef5-03c31255b8d8__quay.io_wakuorg_nwaku-pr:3036.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image quay.io/wakuorg/nwaku-pr:3036. REST: 20123
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20123/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20123/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.195.87/tcp/20124/p2p/16Uiu2HAmAFpAhsUwpVxqsP68HE3iT9Lr94zgSLbdAhzEzFqK6euv","/ip4/172.18.195.87/tcp/20125/ws/p2p/16Uiu2HAmAFpAhsUwpVxqsP68HE3iT9Lr94zgSLbdAhzEzFqK6euv"],"enrUri":"enr:-LO4QM_ixJLB9sfvRF6jxAfZtBv9KoPr0ycxoPpCtd70ZVe3d0-YEvlrSMjPfQb-_n_x_PrT1woTynhBog34zwHUfnoBgmlkgnY0gmlwhKwSw1eKbXVsdGlhZGRyc4wACgSsEsNXBk6d3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLcWMEQr3u0ESqR04wqHLWc7_m-liF-FOl9egDNpa47GYN0Y3CCTpyDdWRwgk6ehXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.178.94
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['22233', '22234', '22235', '22236', '22237']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 22233:22233 -p 22234:22234 -p 22235:22235 -p 22236:22236 -p 22237:22237 quay.io/wakuorg/nwaku-pr:3036 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22235 --rest-port=22233 --tcp-port=22234 --discv5-udp-port=22236 --rest-address=0.0.0.0 --nat=extip:172.18.178.94 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f33cea4eeb9f110aec7ff6917ec5cdd9a3cca1c0deacdf112ba65bbbe902205b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22237 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-LO4QM_ixJLB9sfvRF6jxAfZtBv9KoPr0ycxoPpCtd70ZVe3d0-YEvlrSMjPfQb-_n_x_PrT1woTynhBog34zwHUfnoBgmlkgnY0gmlwhKwSw1eKbXVsdGlhZGRyc4wACgSsEsNXBk6d3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLcWMEQr3u0ESqR04wqHLWc7_m-liF-FOl9egDNpa47GYN0Y3CCTpyDdWRwgk6ehXdha3UyAQ
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.52.146
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['37230', '37231', '37232', '37233', '37234']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 37230:37230 -p 37231:37231 -p 37232:37232 -p 37233:37233 -p 37234:37234 quay.io/wakuorg/nwaku-pr:3036 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37232 --rest-port=37230 --tcp-port=37231 --discv5-udp-port=37233 --rest-address=0.0.0.0 --nat=extip:172.18.52.146 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e66f5253c91ec5d505b9c08c9bafd2fbddde2effacf68406b37908c506ade44e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37234 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-LO4QM_ixJLB9sfvRF6jxAfZtBv9KoPr0ycxoPpCtd70ZVe3d0-YEvlrSMjPfQb-_n_x_PrT1woTynhBog34zwHUfnoBgmlkgnY0gmlwhKwSw1eKbXVsdGlhZGRyc4wACgSsEsNXBk6d3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLcWMEQr3u0ESqR04wqHLWc7_m-liF-FOl9egDNpa47GYN0Y3CCTpyDdWRwgk6ehXdha3UyAQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.52.146 waku 060d8fd4e111297dde7b59c88034b72b627260fa339d3e0b984997f6bca8128f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 060d8fd4e111. Setting up logs at ./log/docker/node2_2024-09-13_09-43-01__24a51b84-5b1a-4918-9ef5-03c31255b8d8__quay.io_wakuorg_nwaku-pr:3036.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image quay.io/wakuorg/nwaku-pr:3036. REST: 37230
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37230/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37230/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.52.146/tcp/37231/p2p/16Uiu2HAmD5f5YAYebY9ANC2Vztw2fqHeJQ8t6KNARqbye1AauZLr","/ip4/172.18.52.146/tcp/37232/ws/p2p/16Uiu2HAmD5f5YAYebY9ANC2Vztw2fqHeJQ8t6KNARqbye1AauZLr"],"enrUri":"enr:-LO4QDEnUqr9BKFeKEo3o3egY5YXWSJcGXrdpaznThfvVMCoN1qUuwGQ_tvGe4DsEvA8yL1qgcPNorv6KyO7XY8CDMABgmlkgnY0gmlwhKwSNJKKbXVsdGlhZGRyc4wACgSsEjSSBpFw3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMGUbrS3Bwm1-VdqcpTk63zX_HeyiRr7dI9p751RIXrT4N0Y3CCkW-DdWRwgpFxhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.132.116
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['22747', '22748', '22749', '22750', '22751']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 22747:22747 -p 22748:22748 -p 22749:22749 -p 22750:22750 -p 22751:22751 quay.io/wakuorg/nwaku-pr:3036 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22749 --rest-port=22747 --tcp-port=22748 --discv5-udp-port=22750 --rest-address=0.0.0.0 --nat=extip:172.18.132.116 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e8852d7ace9adcb9c0e2caae27a21a65f3ff6dfd70f2fffde3c5d51056ecc67a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22751 --metrics-logging=true --relay=false --storenode=/ip4/172.18.52.146/tcp/37231/p2p/16Uiu2HAmD5f5YAYebY9ANC2Vztw2fqHeJQ8t6KNARqbye1AauZLr --discv5-bootstrap-node=enr:-LO4QDEnUqr9BKFeKEo3o3egY5YXWSJcGXrdpaznThfvVMCoN1qUuwGQ_tvGe4DsEvA8yL1qgcPNorv6KyO7XY8CDMABgmlkgnY0gmlwhKwSNJKKbXVsdGlhZGRyc4wACgSsEjSSBpFw3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMGUbrS3Bwm1-VdqcpTk63zX_HeyiRr7dI9p751RIXrT4N0Y3CCkW-DdWRwgpFxhXdha3UyAw
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.132.116 waku d493c6bbd4de7cf8b31c806061b0771a03dbb0fcbc5e6e7ed1136ec019af4375
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID d493c6bbd4de. Setting up logs at ./log/docker/node3_2024-09-13_09-43-01__24a51b84-5b1a-4918-9ef5-03c31255b8d8__quay.io_wakuorg_nwaku-pr:3036.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image quay.io/wakuorg/nwaku-pr:3036. REST: 22747
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22747/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22747/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.132.116/tcp/22748/p2p/16Uiu2HAmLjysJvmMNcnqyx4pReg8M5CRgyYSvNxtzS1tE8AHKTiv","/ip4/172.18.132.116/tcp/22749/ws/p2p/16Uiu2HAmLjysJvmMNcnqyx4pReg8M5CRgyYSvNxtzS1tE8AHKTiv"],"enrUri":"enr:-LO4QH4VYxrjp0MewXKturrV0HV3MEmgSijj37WYhBBw0_-UCeoxDvLRn-qQHBGIBAKfcnNPgpJeHaRXNfTC8obszaoBgmlkgnY0gmlwhKwShHSKbXVsdGlhZGRyc4wACgSsEoR0Bljd3QOCcnOFAAMBAACJc2VjcDI1NmsxoQN4JNqfEXvuqW-SOnxddlbqPA4UmrLxaCsivhPhdies14N0Y3CCWNyDdWRwgljehXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20123/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37230/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20123/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.52.146/tcp/37231/p2p/16Uiu2HAmD5f5YAYebY9ANC2Vztw2fqHeJQ8t6KNARqbye1AauZLr","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37230/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.195.87/tcp/20124/p2p/16Uiu2HAmAFpAhsUwpVxqsP68HE3iT9Lr94zgSLbdAhzEzFqK6euv","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m src.steps.store:store.py:129 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20123/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:215 Checking that peer quay.io/wakuorg/nwaku-pr:3036 can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22747/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"798e43caea11542b0940","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"3fR7IbCq4B7vN2u+JOuPuLIFd95gvYyuA0huhj13SpM="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 31fca3505796
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 060d8fd4e111
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id d493c6bbd4de
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.