[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_2_receiving_nodes__relay_node1_forwards_lightpushed_message_to_relay_node2 with id: 2024-09-13_09-48-40__edc5871c-98bc-4d92-b2d9-1482746ade79
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3036
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-13_09-48-40__edc5871c-98bc-4d92-b2d9-1482746ade79__quay.io_wakuorg_nwaku-pr:3036.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.82.42
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['36934', '36935', '36936', '36937', '36938']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 36934:36934 -p 36935:36935 -p 36936:36936 -p 36937:36937 -p 36938:36938 quay.io/wakuorg/nwaku-pr:3036 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36936 --rest-port=36934 --tcp-port=36935 --discv5-udp-port=36937 --rest-address=0.0.0.0 --nat=extip:172.18.82.42 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fafef9899decb933ef2f983cefa4eb3e2acf13f97ac780147a5f416fbac4dfe9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36938 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.82.42 waku da09ae86d646d1140a7caee9523f74d9d69c585b76916f3b94f6c40e4a3145f5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID da09ae86d646. Setting up logs at ./log/docker/receiving_node1_2024-09-13_09-48-40__edc5871c-98bc-4d92-b2d9-1482746ade79__quay.io_wakuorg_nwaku-pr:3036.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image quay.io/wakuorg/nwaku-pr:3036. REST: 36934
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36934/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36934/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.82.42/tcp/36935/p2p/16Uiu2HAmKn6J9BKa3gXpCtpDQEX4SEcEwg4W1o4g5841r3ohG6En","/ip4/172.18.82.42/tcp/36936/ws/p2p/16Uiu2HAmKn6J9BKa3gXpCtpDQEX4SEcEwg4W1o4g5841r3ohG6En"],"enrUri":"enr:-LO4QLLT3Gwl0XjMC8GfhmsXSWeqM2GZwZeznfRldyVvQ4NFZwcHdRGYWiszQC8XLwvXf-D-OCyNmXnzU3aIoeMAg_EBgmlkgnY0gmlwhKwSUiqKbXVsdGlhZGRyc4wACgSsElIqBpBI3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNp05jU5SozGrO1aNJ8U7Gu0lQVJ_sPikXWovyKjCrja4N0Y3CCkEeDdWRwgpBJhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3036
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-13_09-48-40__edc5871c-98bc-4d92-b2d9-1482746ade79__quay.io_wakuorg_nwaku-pr:3036.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.75.213
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['12455', '12456', '12457', '12458', '12459']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 12455:12455 -p 12456:12456 -p 12457:12457 -p 12458:12458 -p 12459:12459 quay.io/wakuorg/nwaku-pr:3036 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=12457 --rest-port=12455 --tcp-port=12456 --discv5-udp-port=12458 --rest-address=0.0.0.0 --nat=extip:172.18.75.213 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d311f1df6c30b5a484e74c7c8ad9aeb406cb9604ad418bfbeb5baacea43d85aa --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=12459 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.75.213 waku fe57bdbea4cbfb7a63d0bf54363c0abe5504799b8210999c3510e12c9228d8e7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID fe57bdbea4cb. Setting up logs at ./log/docker/receiving_node2_2024-09-13_09-48-40__edc5871c-98bc-4d92-b2d9-1482746ade79__quay.io_wakuorg_nwaku-pr:3036.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image quay.io/wakuorg/nwaku-pr:3036. REST: 12455
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12455/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12455/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.75.213/tcp/12456/p2p/16Uiu2HAmGSThoKSJVgVFh2x89KhWbc58nZ77NJf2av2BkgkCNMRg","/ip4/172.18.75.213/tcp/12457/ws/p2p/16Uiu2HAmGSThoKSJVgVFh2x89KhWbc58nZ77NJf2av2BkgkCNMRg"],"enrUri":"enr:-LO4QKVFqdwkxbzmjiozTTEdKGdSfCfh3JxlFBpEU4lvVFdmW4HWQeaWPfeqTkJChMv3Kf2g5PYsyRmRnMKbeotFwogBgmlkgnY0gmlwhKwSS9WKbXVsdGlhZGRyc4wACgSsEkvVBjCp3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM4OSBCkDcGAo06CZcNV3wXjMS3BvGBwSRICKA64L7qf4N0Y3CCMKiDdWRwgjCqhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12455/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.82.42/tcp/36935/p2p/16Uiu2HAmKn6J9BKa3gXpCtpDQEX4SEcEwg4W1o4g5841r3ohG6En"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3036
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-13_09-48-40__edc5871c-98bc-4d92-b2d9-1482746ade79__quay.io_wakuorg_nwaku-pr:3036.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.40.20
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['62874', '62875', '62876', '62877', '62878']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 62874:62874 -p 62875:62875 -p 62876:62876 -p 62877:62877 -p 62878:62878 quay.io/wakuorg/nwaku-pr:3036 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62876 --rest-port=62874 --tcp-port=62875 --discv5-udp-port=62877 --rest-address=0.0.0.0 --nat=extip:172.18.40.20 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a577969adf2c039ac4ff71b22ab882ea5d17bb42d3a305f8d1da9d468edbece8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62878 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QLLT3Gwl0XjMC8GfhmsXSWeqM2GZwZeznfRldyVvQ4NFZwcHdRGYWiszQC8XLwvXf-D-OCyNmXnzU3aIoeMAg_EBgmlkgnY0gmlwhKwSUiqKbXVsdGlhZGRyc4wACgSsElIqBpBI3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNp05jU5SozGrO1aNJ8U7Gu0lQVJ_sPikXWovyKjCrja4N0Y3CCkEeDdWRwgpBJhXdha3UyCQ --lightpushnode=/ip4/172.18.82.42/tcp/36935/p2p/16Uiu2HAmKn6J9BKa3gXpCtpDQEX4SEcEwg4W1o4g5841r3ohG6En --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.40.20 waku a6d89a3f13f07f833232504bc576756aff2e0c4ccaf48f5c3c5b73934fda7b37
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID a6d89a3f13f0. Setting up logs at ./log/docker/lightpush_node1_2024-09-13_09-48-40__edc5871c-98bc-4d92-b2d9-1482746ade79__quay.io_wakuorg_nwaku-pr:3036.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image quay.io/wakuorg/nwaku-pr:3036. REST: 62874
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62874/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62874/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.40.20/tcp/62875/p2p/16Uiu2HAm8beMMZX7Zpzcp71kEjEwapk6jX2RRgNxKNRtrRp7uYq7","/ip4/172.18.40.20/tcp/62876/ws/p2p/16Uiu2HAm8beMMZX7Zpzcp71kEjEwapk6jX2RRgNxKNRtrRp7uYq7"],"enrUri":"enr:-LO4QIznkQ8lZFlhTxD1XVR0HlPyd6kt_6ZbQzyB5TbDb27rE5Ib3S8AxfisqaePJ6jefgAOx5IPbEkpGlvRc7M4aMMBgmlkgnY0gmlwhKwSKBSKbXVsdGlhZGRyc4wACgSsEigUBvWc3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLDteWmcH5UHAQoC_N89VeaIplT8YdVc8KTeeMANbaoooN0Y3CC9ZuDdWRwgvWdhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62874/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.82.42/tcp/36935/p2p/16Uiu2HAmKn6J9BKa3gXpCtpDQEX4SEcEwg4W1o4g5841r3ohG6En"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62874/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.75.213/tcp/12456/p2p/16Uiu2HAmGSThoKSJVgVFh2x89KhWbc58nZ77NJf2av2BkgkCNMRg"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36934/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12455/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62874/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1726220926903345920}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:quay.io/wakuorg/nwaku-pr:3036 can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36934/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1726220926903345920,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:quay.io/wakuorg/nwaku-pr:3036 can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12455/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1726220926903345920,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id da09ae86d646
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id fe57bdbea4cb
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id a6d89a3f13f0
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.