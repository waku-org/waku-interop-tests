[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_get_message_with_extra_field with id: 2024-09-13_09-44-17__bc4242fb-8f6e-417b-b8ad-1e62723bd628
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3036
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-13_09-44-17__bc4242fb-8f6e-417b-b8ad-1e62723bd628__quay.io_wakuorg_nwaku-pr:3036.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.226.13
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['63200', '63201', '63202', '63203', '63204']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 63200:63200 -p 63201:63201 -p 63202:63202 -p 63203:63203 -p 63204:63204 quay.io/wakuorg/nwaku-pr:3036 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63202 --rest-port=63200 --tcp-port=63201 --discv5-udp-port=63203 --rest-address=0.0.0.0 --nat=extip:172.18.226.13 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9ab0cbddabd33b3cdd87f3da20a9edd5dcafe4bfb1cdbfbe4aab8dfd8a85e0ee --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63204 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.226.13 waku 4d904fefa489dd49616c728609126c903b2408fb3de8a5407df2707b33fe32d0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 4d904fefa489. Setting up logs at ./log/docker/node1_2024-09-13_09-44-17__bc4242fb-8f6e-417b-b8ad-1e62723bd628__quay.io_wakuorg_nwaku-pr:3036.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image quay.io/wakuorg/nwaku-pr:3036. REST: 63200
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63200/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63200/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.226.13/tcp/63201/p2p/16Uiu2HAkxktLYKSTyadNrHUbgYtx28GtvkJ4gYKgU9fzviN9y9XR","/ip4/172.18.226.13/tcp/63202/ws/p2p/16Uiu2HAkxktLYKSTyadNrHUbgYtx28GtvkJ4gYKgU9fzviN9y9XR"],"enrUri":"enr:-LO4QIA5fmjBEnzrTjja_2LTinDtHere0bhlfJX7U28MiyFCBofJE40aoqYjsQ1_Cp-pqlbEK9-71eoVoRTME-xAGUABgmlkgnY0gmlwhKwS4g2KbXVsdGlhZGRyc4wACgSsEuINBvbi3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIxfxGt8HN6mVY_2NpAv4I2Yyu65cyCErgJI3Y-it6hJIN0Y3CC9uGDdWRwgvbjhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3036
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-13_09-44-17__bc4242fb-8f6e-417b-b8ad-1e62723bd628__quay.io_wakuorg_nwaku-pr:3036.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.117.130
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['19280', '19281', '19282', '19283', '19284']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 19280:19280 -p 19281:19281 -p 19282:19282 -p 19283:19283 -p 19284:19284 quay.io/wakuorg/nwaku-pr:3036 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19282 --rest-port=19280 --tcp-port=19281 --discv5-udp-port=19283 --rest-address=0.0.0.0 --nat=extip:172.18.117.130 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ddbd77dfeaeacca85f6cb14b946cbb158fd1f6b96dfd00655bf0613e1eeaa3b7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19284 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QIA5fmjBEnzrTjja_2LTinDtHere0bhlfJX7U28MiyFCBofJE40aoqYjsQ1_Cp-pqlbEK9-71eoVoRTME-xAGUABgmlkgnY0gmlwhKwS4g2KbXVsdGlhZGRyc4wACgSsEuINBvbi3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIxfxGt8HN6mVY_2NpAv4I2Yyu65cyCErgJI3Y-it6hJIN0Y3CC9uGDdWRwgvbjhXdha3UyBQ --filternode=/ip4/172.18.226.13/tcp/63201/p2p/16Uiu2HAkxktLYKSTyadNrHUbgYtx28GtvkJ4gYKgU9fzviN9y9XR
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.117.130 waku 8f3c406ad5a2eb024fdd3aa5c417fc1d355071f3927334cf7268fb4fc6ba5e83
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 8f3c406ad5a2. Setting up logs at ./log/docker/node2_2024-09-13_09-44-17__bc4242fb-8f6e-417b-b8ad-1e62723bd628__quay.io_wakuorg_nwaku-pr:3036.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image quay.io/wakuorg/nwaku-pr:3036. REST: 19280
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19280/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19280/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.117.130/tcp/19281/p2p/16Uiu2HAmJYcqqUv3zoKCtNH5CjCrysGHoWAXrsf2PB1rbxP8shU3","/ip4/172.18.117.130/tcp/19282/ws/p2p/16Uiu2HAmJYcqqUv3zoKCtNH5CjCrysGHoWAXrsf2PB1rbxP8shU3"],"enrUri":"enr:-LO4QDAM5UN19yoOywllAqM6TDFXSzGLxM4aGIabinpkkQK_H9hy6OAq3qpCJI21TRBuF49HUFSm9df1erCeWD3wGKMBgmlkgnY0gmlwhKwSdYKKbXVsdGlhZGRyc4wACgSsEnWCBktS3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNXhFFXgsDasj3wL3SkQ2i-W4oEQ5Go4uZktoNH-RWcgIN0Y3CCS1GDdWRwgktThXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19280/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.226.13/tcp/63201/p2p/16Uiu2HAkxktLYKSTyadNrHUbgYtx28GtvkJ4gYKgU9fzviN9y9XR"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63200/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19280/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "ae2cd648-b8b5-4677-8be9-b6561d8376f7", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"ae2cd648-b8b5-4677-8be9-b6561d8376f7","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63200/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "extraField": "extraValue"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:63200/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 4d904fefa489
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 8f3c406ad5a2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.