[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_subscribe_with_invalid_pubsub_topic_format with id: 2024-09-13_09-46-29__5c3cfa54-fa2e-4a18-ab38-17aa00b07156
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3036
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-13_09-46-29__5c3cfa54-fa2e-4a18-ab38-17aa00b07156__quay.io_wakuorg_nwaku-pr:3036.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.80.176
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['33500', '33501', '33502', '33503', '33504']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 33500:33500 -p 33501:33501 -p 33502:33502 -p 33503:33503 -p 33504:33504 quay.io/wakuorg/nwaku-pr:3036 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=33502 --rest-port=33500 --tcp-port=33501 --discv5-udp-port=33503 --rest-address=0.0.0.0 --nat=extip:172.18.80.176 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8cca99eb5bbe39adebb0de382fc375af3129089d6ab28088fd49bbfbe661aed3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=33504 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.80.176 waku 803df809593f2d2708230962f674cd17a96da922fee7a7c6306bef70ee4ca33d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 803df809593f. Setting up logs at ./log/docker/node1_2024-09-13_09-46-29__5c3cfa54-fa2e-4a18-ab38-17aa00b07156__quay.io_wakuorg_nwaku-pr:3036.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image quay.io/wakuorg/nwaku-pr:3036. REST: 33500
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33500/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33500/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.80.176/tcp/33501/p2p/16Uiu2HAm6KbVzB7Yi9ZB3fXwVT2btM8NtqZSnW1MM5rX1wVWoB5e","/ip4/172.18.80.176/tcp/33502/ws/p2p/16Uiu2HAm6KbVzB7Yi9ZB3fXwVT2btM8NtqZSnW1MM5rX1wVWoB5e"],"enrUri":"enr:-LO4QClOpjIO4-zXQ2HnjpDEuSna0vOpcoZCrR_j9f8XsAYBMYb1wXSA1a31WnDHUvU3DRH6LF0Z-OGLdB-t2KCvCwIBgmlkgnY0gmlwhKwSULCKbXVsdGlhZGRyc4wACgSsElCwBoLe3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKh4gGlQZaGL8LtDbrxFh7Fiw87IFOWFGJUz6RfgVbpdYN0Y3CCgt2DdWRwgoLfhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3036
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-13_09-46-29__5c3cfa54-fa2e-4a18-ab38-17aa00b07156__quay.io_wakuorg_nwaku-pr:3036.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.235.219
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['20437', '20438', '20439', '20440', '20441']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 20437:20437 -p 20438:20438 -p 20439:20439 -p 20440:20440 -p 20441:20441 quay.io/wakuorg/nwaku-pr:3036 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20439 --rest-port=20437 --tcp-port=20438 --discv5-udp-port=20440 --rest-address=0.0.0.0 --nat=extip:172.18.235.219 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=241135ddf9efd43cb0f0421fbf13ff5393cb259eb0b45dd6df5bf0e058a8bc8d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20441 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-LO4QClOpjIO4-zXQ2HnjpDEuSna0vOpcoZCrR_j9f8XsAYBMYb1wXSA1a31WnDHUvU3DRH6LF0Z-OGLdB-t2KCvCwIBgmlkgnY0gmlwhKwSULCKbXVsdGlhZGRyc4wACgSsElCwBoLe3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKh4gGlQZaGL8LtDbrxFh7Fiw87IFOWFGJUz6RfgVbpdYN0Y3CCgt2DdWRwgoLfhXdha3UyBQ --filternode=/ip4/172.18.80.176/tcp/33501/p2p/16Uiu2HAm6KbVzB7Yi9ZB3fXwVT2btM8NtqZSnW1MM5rX1wVWoB5e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.235.219 waku e227554e080897d97c93360525c60c4f68be854f5086ce7d649fc85675be69f6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID e227554e0808. Setting up logs at ./log/docker/node2_2024-09-13_09-46-29__5c3cfa54-fa2e-4a18-ab38-17aa00b07156__quay.io_wakuorg_nwaku-pr:3036.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image quay.io/wakuorg/nwaku-pr:3036. REST: 20437
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20437/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20437/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.235.219/tcp/20438/p2p/16Uiu2HAmNwmJP55D5FCumegeZidZcFA6vuQ3VFs9Jkp51jR1WiqL","/ip4/172.18.235.219/tcp/20439/ws/p2p/16Uiu2HAmNwmJP55D5FCumegeZidZcFA6vuQ3VFs9Jkp51jR1WiqL"],"enrUri":"enr:-LO4QEhxE3tvv3pUhwl63yvXWnSdMOU9V7TnJnLz99hMZ1uodDCqst822_8fHY_kYJ97H-mXpyyUInxrhsvrP6pjIPkBgmlkgnY0gmlwhKwS69uKbXVsdGlhZGRyc4wACgSsEuvbBk_X3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOY4Py3IIb_yDYC55i-3YkEtF42ZpWS5MJ4DjnT1oInv4N0Y3CCT9aDdWRwgk_YhXdha3UyAA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20437/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.80.176/tcp/33501/p2p/16Uiu2HAm6KbVzB7Yi9ZB3fXwVT2btM8NtqZSnW1MM5rX1wVWoB5e"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33500/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20437/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "c591f4e0-3308-4496-85eb-10f18ba3a170", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"c591f4e0-3308-4496-85eb-10f18ba3a170","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20437/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": ["/waku/2/rs/3/1"]}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:20437/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 803df809593f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id e227554e0808
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.