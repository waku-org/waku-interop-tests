2025-02-06 15:48:14.635 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-06 15:48:14.635 DEBUG [tests.conftest] Running test: test_empty_cursor with id: 2025-02-06_15-48-14__443f5374-a5e8-4838-8953-148fc7583946
2025-02-06 15:48:14.635 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-06 15:48:14.635 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-06 15:48:14.636 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-06 15:48:14.639 ERROR [src.node.docker_mananger] Max retries reached for container c16ad37ccdf3. Exiting log stream.
2025-02-06 15:48:14.643 DEBUG [src.node.docker_mananger] Docker client initialized with image quay.io/wakuorg/nwaku-pr:3281
2025-02-06 15:48:14.643 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-06_15-48-14__443f5374-a5e8-4838-8953-148fc7583946__quay.io_wakuorg_nwaku-pr:3281.log
2025-02-06 15:48:14.643 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 15:48:14.643 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 15:48:14.644 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 15:48:14.644 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.71.33
2025-02-06 15:48:14.645 DEBUG [src.node.docker_mananger] Generated ports ['64451', '64452', '64453', '64454', '64455']
2025-02-06 15:48:14.645 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 15:48:14.645 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 15:48:14.645 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 15:48:14.645 DEBUG [src.node.docker_mananger] docker run -i -t -p 64451:64451 -p 64452:64452 -p 64453:64453 -p 64454:64454 -p 64455:64455 quay.io/wakuorg/nwaku-pr:3281 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64453 --rest-port=64451 --tcp-port=64452 --discv5-udp-port=64454 --rest-address=0.0.0.0 --nat=extip:172.18.71.33 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4d0fbdec7ecc6b24c0f4ffe8bba378bf220ffec3058ef1d4128bd818a1e36cd3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64455 --metrics-logging=true --store=true --relay=true
2025-02-06 15:48:14.873 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.71.33 waku 6399e21e5bfaaf76e4d4046f42fd8de42d4ebcd87e80316359ee36b99f5ce9fe
2025-02-06 15:48:14.924 DEBUG [src.node.docker_mananger] Container started with ID 6399e21e5bfa. Setting up logs at ./log/docker/publishing_node1_2025-02-06_15-48-14__443f5374-a5e8-4838-8953-148fc7583946__quay.io_wakuorg_nwaku-pr:3281.log
2025-02-06 15:48:14.925 DEBUG [src.node.waku_node] Started container from image quay.io/wakuorg/nwaku-pr:3281. REST: 64451
2025-02-06 15:48:14.925 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 15:48:15.409 ERROR [src.node.docker_mananger] Max retries reached for container 6b1a740d5cf0. Exiting log stream.
2025-02-06 15:48:15.926 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64451/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:48:15.928 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 15:48:15.929 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 15:48:15.929 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64451/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:48:15.931 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.71.33/tcp/64452/p2p/16Uiu2HAm1oW4nPKNCaStvBfM2tcViNnuqBucPPhfgrYAEFDHqMrJ","/ip4/172.18.71.33/tcp/64453/ws/p2p/16Uiu2HAm1oW4nPKNCaStvBfM2tcViNnuqBucPPhfgrYAEFDHqMrJ"],"enrUri":"enr:-L24QObj5fPFr8OPgU8yoKqn0SjBPTIMm_j0qdZ1Q1YMNg5ZbBSy7Rav5m7dam-njgJnRuyqfz-CfBnusG0rppcrycMCgmlkgnY0gmlwhKwSRyGKbXVsdGlhZGRyc5YACASsEkchBvvEAAoErBJHIQb7xd0DgnJzhQADAQAAiXNlY3AyNTZrMaECXr2wiXGppKcivZ-t2bRLASY8CJhAPVASBLyumyPc2PuDdGNwgvvEg3VkcIL7xoV3YWt1MgM"}'
2025-02-06 15:48:15.931 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 15:48:15.937 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-06 15:48:15.937 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-06_15-48-14__443f5374-a5e8-4838-8953-148fc7583946__wakuorg_go-waku:latest.log
2025-02-06 15:48:15.938 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 15:48:15.938 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 15:48:15.939 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 15:48:15.939 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.33.110
2025-02-06 15:48:15.939 DEBUG [src.node.docker_mananger] Generated ports ['50669', '50670', '50671', '50672', '50673']
2025-02-06 15:48:15.940 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 15:48:15.940 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 15:48:15.940 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 15:48:15.940 DEBUG [src.node.docker_mananger] docker run -i -t -p 50669:50669 -p 50670:50670 -p 50671:50671 -p 50672:50672 -p 50673:50673 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=50671 --rest-port=50669 --tcp-port=50670 --discv5-udp-port=50672 --rest-address=0.0.0.0 --nat=extip:172.18.33.110 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fdbba75b5e0e12cbacdb5ba56ffab25fe2716abd49e6e9c496d5efb32bf3af3b --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QObj5fPFr8OPgU8yoKqn0SjBPTIMm_j0qdZ1Q1YMNg5ZbBSy7Rav5m7dam-njgJnRuyqfz-CfBnusG0rppcrycMCgmlkgnY0gmlwhKwSRyGKbXVsdGlhZGRyc5YACASsEkchBvvEAAoErBJHIQb7xd0DgnJzhQADAQAAiXNlY3AyNTZrMaECXr2wiXGppKcivZ-t2bRLASY8CJhAPVASBLyumyPc2PuDdGNwgvvEg3VkcIL7xoV3YWt1MgM --storenode=/ip4/172.18.71.33/tcp/64452/p2p/16Uiu2HAm1oW4nPKNCaStvBfM2tcViNnuqBucPPhfgrYAEFDHqMrJ --store=true --relay=true
2025-02-06 15:48:16.174 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.33.110 waku 7716c86c28216ed52456f25ce287144585608c910d20ef4b8ce097d43d2e926a
2025-02-06 15:48:16.221 DEBUG [src.node.docker_mananger] Container started with ID 7716c86c2821. Setting up logs at ./log/docker/store_node1_2025-02-06_15-48-14__443f5374-a5e8-4838-8953-148fc7583946__wakuorg_go-waku:latest.log
2025-02-06 15:48:16.221 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 50669
2025-02-06 15:48:16.222 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 15:48:17.223 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50669/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:48:17.225 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QDExvX3tbj1QyFKFMHmYWOu-4HCbhQDPG3gtXOrdAgk2H3ZSMZyd0OciRiNoLozoNb7qJVJX_tFmzHV6IJvZeCeGAZTb8pblgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaECyH4a2kKNEykW_rsO7agYkk2kTit65Jl_s8nCZAIMxNyDdGNwgsXug3VkcILF8IV3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/50670/p2p/16Uiu2HAm8vK3ha9sNwC3twgANqBJKAabcNuX4ctwTbtr1GuWDxKV","/ip4/127.0.0.1/tcp/50671/ws/p2p/16Uiu2HAm8vK3ha9sNwC3twgANqBJKAabcNuX4ctwTbtr1GuWDxKV","/ip4/172.17.0.3/tcp/50670/p2p/16Uiu2HAm8vK3ha9sNwC3twgANqBJKAabcNuX4ctwTbtr1GuWDxKV","/ip4/172.17.0.3/tcp/50671/ws/p2p/16Uiu2HAm8vK3ha9sNwC3twgANqBJKAabcNuX4ctwTbtr1GuWDxKV"]}'
2025-02-06 15:48:17.226 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 15:48:17.226 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50669/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.71.33/tcp/64452/p2p/16Uiu2HAm1oW4nPKNCaStvBfM2tcViNnuqBucPPhfgrYAEFDHqMrJ", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-06 15:48:17.241 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-06 15:48:17.243 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64451/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-06 15:48:17.250 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:48:17.250 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50669/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-06 15:48:17.253 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-06 15:48:17.255 DEBUG [src.steps.store] Relaying message
2025-02-06 15:48:17.257 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64451/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 15:48:17.267 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:48:17.268 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 15:48:17.469 DEBUG [src.steps.store] Relaying message
2025-02-06 15:48:17.469 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64451/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8x", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 15:48:17.474 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:48:17.475 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 15:48:17.675 DEBUG [src.steps.store] Relaying message
2025-02-06 15:48:17.675 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64451/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8y", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 15:48:17.680 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:48:17.680 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 15:48:17.881 DEBUG [src.steps.store] Relaying message
2025-02-06 15:48:17.881 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64451/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8z", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 15:48:17.886 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:48:17.886 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 15:48:18.087 DEBUG [src.steps.store] Relaying message
2025-02-06 15:48:18.087 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64451/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV80", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 15:48:18.092 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:48:18.092 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 15:48:18.293 DEBUG [src.steps.store] Relaying message
2025-02-06 15:48:18.293 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64451/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV81", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 15:48:18.298 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:48:18.298 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 15:48:18.499 DEBUG [src.steps.store] Relaying message
2025-02-06 15:48:18.499 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64451/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV82", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 15:48:18.504 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:48:18.504 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 15:48:18.705 DEBUG [src.steps.store] Relaying message
2025-02-06 15:48:18.705 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64451/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV83", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 15:48:18.710 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:48:18.710 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 15:48:18.910 DEBUG [src.steps.store] Relaying message
2025-02-06 15:48:18.911 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64451/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV84", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 15:48:18.916 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:48:18.916 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 15:48:19.116 DEBUG [src.steps.store] Relaying message
2025-02-06 15:48:19.117 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64451/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV85", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 15:48:19.121 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:48:19.122 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 15:48:19.322 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64451/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&cursor=&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:48:19.325 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x914fe2c99b1ca23b16b7b01f578331c04df5714eff428fc7c09cc3d886122251"},{"messageHash":"0x848756c21e7671d8f1b73ccce5350d20458359743f242e083681a782b62025f6"},{"messageHash":"0xe88447f3ab4c46c12b156bd8dacd153e7e98e352eadfcf93f1f4a5bb91d20f83"},{"messageHash":"0x130cc7fd8be9f83f672a748d6155c4c3468dbe3bfdef0ec08b1fa8a4c98eb7c2"},{"messageHash":"0xcc72261b17cae5615f441e3b19eba78ebe2a1170cb823fea56cf90433a9b80c3"}],"paginationCursor":"0xcc72261b17cae5615f441e3b19eba78ebe2a1170cb823fea56cf90433a9b80c3"}'
2025-02-06 15:48:19.326 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50669/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&cursor=&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:48:19.331 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"62ebdbe8a869d58ad3b3f9070464f42153729d3b072cec68b099e1617313463b","status_code":200,"status_desc":"OK","messages":[{"message_hash":"kU/iyZscojsWt7AfV4MxwE31cU7/Qo/HwJzD2IYSIlE="},{"message_hash":"hIdWwh52cdjxtzzM5TUNIEWDWXQ/JC4INoGngrYgJfY="},{"message_hash":"6IRH86tMRsErFWvY2s0VPn6Y41Lq38+T8fSlu5HSD4M="},{"message_hash":"EwzH/Yvp+D9nKnSNYVXEw0aNvjv97w7Aix+opMmOt8I="},{"message_hash":"zHImGxfK5WFfRB47Geunjr4qEXDLgj/qVs+QQzqbgMM="}],"pagination_cursor":"zHImGxfK5WFfRB47Geunjr4qEXDLgj/qVs+QQzqbgMM="}'
2025-02-06 15:48:19.333 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-06 15:48:19.334 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-06 15:48:19.334 DEBUG [src.node.waku_node] Stopping container with id 6399e21e5bfa
2025-02-06 15:48:20.424 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 15:48:20.424 DEBUG [src.node.waku_node] Stopping container with id 7716c86c2821
2025-02-06 15:48:20.940 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 15:48:20.941 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-06 15:48:20.959 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 15:48:20.962 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
