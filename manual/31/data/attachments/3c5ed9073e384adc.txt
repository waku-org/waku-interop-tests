2025-02-06 15:50:22.748 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-06 15:50:22.748 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_with_no_pubsub_topic with id: 2025-02-06_15-50-22__64de5332-6ce4-486e-a32f-215fe0d7e257
2025-02-06 15:50:22.748 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-06 15:50:22.749 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-06 15:50:22.749 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-06 15:50:22.755 DEBUG [src.node.docker_mananger] Docker client initialized with image quay.io/wakuorg/nwaku-pr:3281
2025-02-06 15:50:22.755 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-06_15-50-22__64de5332-6ce4-486e-a32f-215fe0d7e257__quay.io_wakuorg_nwaku-pr:3281.log
2025-02-06 15:50:22.755 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 15:50:22.755 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 15:50:22.759 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 15:50:22.760 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.215.25
2025-02-06 15:50:22.760 DEBUG [src.node.docker_mananger] Generated ports ['61667', '61668', '61669', '61670', '61671']
2025-02-06 15:50:22.760 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 15:50:22.760 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 15:50:22.760 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 15:50:22.760 DEBUG [src.node.docker_mananger] docker run -i -t -p 61667:61667 -p 61668:61668 -p 61669:61669 -p 61670:61670 -p 61671:61671 quay.io/wakuorg/nwaku-pr:3281 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61669 --rest-port=61667 --tcp-port=61668 --discv5-udp-port=61670 --rest-address=0.0.0.0 --nat=extip:172.18.215.25 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=10d05c3b5ac23c397aa76bb2a9a82a32b1fb5e6dd1e1b82b2f44b89cda9e5afc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61671 --metrics-logging=true --relay=true --filter=true
2025-02-06 15:50:23.002 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.215.25 waku 5b34163a57cda6554cf3dd87144e3cb7effdfe625b101807d82650ec8885fb2b
2025-02-06 15:50:23.053 DEBUG [src.node.docker_mananger] Container started with ID 5b34163a57cd. Setting up logs at ./log/docker/node1_2025-02-06_15-50-22__64de5332-6ce4-486e-a32f-215fe0d7e257__quay.io_wakuorg_nwaku-pr:3281.log
2025-02-06 15:50:23.054 DEBUG [src.node.waku_node] Started container from image quay.io/wakuorg/nwaku-pr:3281. REST: 61667
2025-02-06 15:50:23.055 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 15:50:23.554 ERROR [src.node.docker_mananger] Max retries reached for container 0b8ea4f2a087. Exiting log stream.
2025-02-06 15:50:24.055 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61667/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:50:24.058 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 15:50:24.059 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 15:50:24.059 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61667/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:50:24.061 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.215.25/tcp/61668/p2p/16Uiu2HAmMibosXLq5m73ngC3kLmu63hFLCm1aH8vgBKYDDuPmD3P","/ip4/172.18.215.25/tcp/61669/ws/p2p/16Uiu2HAmMibosXLq5m73ngC3kLmu63hFLCm1aH8vgBKYDDuPmD3P"],"enrUri":"enr:-L24QOdBfwUX9I0KxacF6J3zOI6supZztVnxxbtGx8oCWhAmJAzIZVX1QtlKBrCOxF3aH2mavbMgnIx0ukFjBJo5fhoCgmlkgnY0gmlwhKwS1xmKbXVsdGlhZGRyc5YACASsEtcZBvDkAAoErBLXGQbw5d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDhqYEgbbkbNoNV9rEWViPKS6SLZh33vgZ4JJ2tt707PqDdGNwgvDkg3VkcILw5oV3YWt1MgU"}'
2025-02-06 15:50:24.061 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 15:50:24.062 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-06 15:50:24.068 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-06 15:50:24.068 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-06_15-50-22__64de5332-6ce4-486e-a32f-215fe0d7e257__wakuorg_go-waku:latest.log
2025-02-06 15:50:24.068 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 15:50:24.068 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 15:50:24.069 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 15:50:24.069 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.101.90
2025-02-06 15:50:24.069 DEBUG [src.node.docker_mananger] Generated ports ['23864', '23865', '23866', '23867', '23868']
2025-02-06 15:50:24.070 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 15:50:24.070 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 15:50:24.070 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 15:50:24.070 DEBUG [src.node.docker_mananger] docker run -i -t -p 23864:23864 -p 23865:23865 -p 23866:23866 -p 23867:23867 -p 23868:23868 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=23866 --rest-port=23864 --tcp-port=23865 --discv5-udp-port=23867 --rest-address=0.0.0.0 --nat=extip:172.18.101.90 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=44cc4b7c1407fbb535c3ff13ead1d6bcef1dc7ae52eabc050df835ccddbcaa53 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-L24QOdBfwUX9I0KxacF6J3zOI6supZztVnxxbtGx8oCWhAmJAzIZVX1QtlKBrCOxF3aH2mavbMgnIx0ukFjBJo5fhoCgmlkgnY0gmlwhKwS1xmKbXVsdGlhZGRyc5YACASsEtcZBvDkAAoErBLXGQbw5d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDhqYEgbbkbNoNV9rEWViPKS6SLZh33vgZ4JJ2tt707PqDdGNwgvDkg3VkcILw5oV3YWt1MgU --filternode=/ip4/172.18.215.25/tcp/61668/p2p/16Uiu2HAmMibosXLq5m73ngC3kLmu63hFLCm1aH8vgBKYDDuPmD3P --pubsub-topic=/waku/2/rs/3/1
2025-02-06 15:50:24.295 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.101.90 waku 8145e633c6c282fdb596a62a63a6002d26d3fc29e10aeed7f245a19c56daabc4
2025-02-06 15:50:24.350 DEBUG [src.node.docker_mananger] Container started with ID 8145e633c6c2. Setting up logs at ./log/docker/node2_2025-02-06_15-50-22__64de5332-6ce4-486e-a32f-215fe0d7e257__wakuorg_go-waku:latest.log
2025-02-06 15:50:24.351 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 23864
2025-02-06 15:50:24.351 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 15:50:25.353 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23864/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:50:25.355 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QAbG5P943aL54hU39vxzCTbfnSxnzhq_sWn20c-fYQm4Xw95dwkyWVPUo9Aj6GYWU9htTxNHjEsmbdkNEFri73GGAZTb9ItXgmlkgnY0gmlwhKwRAAOCcnOFAAMBAAGJc2VjcDI1NmsxoQNY9hrv4LwbfnrJJVtAmuBFZ5lIZHFP3xJGAUMq5qHydoN0Y3CCXTmDdWRwgl07hXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/23865/p2p/16Uiu2HAmJeFtGWb1dgiX8W8i1ZvGyC8ZrLc3DmqDWXhPpQ5b52X7","/ip4/127.0.0.1/tcp/23866/ws/p2p/16Uiu2HAmJeFtGWb1dgiX8W8i1ZvGyC8ZrLc3DmqDWXhPpQ5b52X7","/ip4/172.17.0.3/tcp/23865/p2p/16Uiu2HAmJeFtGWb1dgiX8W8i1ZvGyC8ZrLc3DmqDWXhPpQ5b52X7","/ip4/172.17.0.3/tcp/23866/ws/p2p/16Uiu2HAmJeFtGWb1dgiX8W8i1ZvGyC8ZrLc3DmqDWXhPpQ5b52X7"]}'
2025-02-06 15:50:25.355 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 15:50:25.356 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23864/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.215.25/tcp/61668/p2p/16Uiu2HAmMibosXLq5m73ngC3kLmu63hFLCm1aH8vgBKYDDuPmD3P", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-06 15:50:25.357 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-06 15:50:25.358 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-06 15:50:25.358 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61667/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-06 15:50:25.362 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:50:25.362 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23864/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "3646e60c-4c61-44ac-89c5-0a4e216b4c20", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-06 15:50:25.368 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"3646e60c-4c61-44ac-89c5-0a4e216b4c20","statusDesc":"OK"}'
2025-02-06 15:50:25.370 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:23864/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": "/test/1/waku-filter/proto"}'
2025-02-06 15:50:25.371 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:23864/filter/v2/subscriptions. Response content: b''
2025-02-06 15:50:25.374 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-06 15:50:25.374 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-06 15:50:25.375 DEBUG [src.node.waku_node] Stopping container with id 5b34163a57cd
2025-02-06 15:50:25.979 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 15:50:25.981 DEBUG [src.node.waku_node] Stopping container with id 8145e633c6c2
2025-02-06 15:50:26.808 ERROR [src.node.docker_mananger] Max retries reached for container 5b34163a57cd. Exiting log stream.
2025-02-06 15:50:26.872 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 15:50:26.873 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-06 15:50:26.881 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 15:50:26.883 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
