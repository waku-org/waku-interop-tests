2025-02-06 15:50:18.574 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-06 15:50:18.574 DEBUG [tests.conftest] Running test: test_filter_subscribe_with_invalid_request_id with id: 2025-02-06_15-50-18__626678bd-664c-4998-abf7-1786492de9de
2025-02-06 15:50:18.574 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-06 15:50:18.575 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-06 15:50:18.575 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-06 15:50:18.581 DEBUG [src.node.docker_mananger] Docker client initialized with image quay.io/wakuorg/nwaku-pr:3281
2025-02-06 15:50:18.582 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-06_15-50-18__626678bd-664c-4998-abf7-1786492de9de__quay.io_wakuorg_nwaku-pr:3281.log
2025-02-06 15:50:18.582 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 15:50:18.582 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 15:50:18.583 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 15:50:18.583 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.143.250
2025-02-06 15:50:18.584 DEBUG [src.node.docker_mananger] Generated ports ['15497', '15498', '15499', '15500', '15501']
2025-02-06 15:50:18.584 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 15:50:18.584 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 15:50:18.584 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 15:50:18.584 DEBUG [src.node.docker_mananger] docker run -i -t -p 15497:15497 -p 15498:15498 -p 15499:15499 -p 15500:15500 -p 15501:15501 quay.io/wakuorg/nwaku-pr:3281 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15499 --rest-port=15497 --tcp-port=15498 --discv5-udp-port=15500 --rest-address=0.0.0.0 --nat=extip:172.18.143.250 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9a24fa70ce4e6d0e797a6bc25e379fe2cda2cd5cf1ef6bcbdbdc0528a60c6946 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15501 --metrics-logging=true --relay=true --filter=true
2025-02-06 15:50:18.633 ERROR [src.node.docker_mananger] Max retries reached for container 7634a0c4d545. Exiting log stream.
2025-02-06 15:50:18.824 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.143.250 waku 40d200c1ed6f88d2a23a820eba57cc86f9ff2511cdf22f87caaab514751eb90d
2025-02-06 15:50:18.878 DEBUG [src.node.docker_mananger] Container started with ID 40d200c1ed6f. Setting up logs at ./log/docker/node1_2025-02-06_15-50-18__626678bd-664c-4998-abf7-1786492de9de__quay.io_wakuorg_nwaku-pr:3281.log
2025-02-06 15:50:18.879 DEBUG [src.node.waku_node] Started container from image quay.io/wakuorg/nwaku-pr:3281. REST: 15497
2025-02-06 15:50:18.880 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 15:50:19.379 ERROR [src.node.docker_mananger] Max retries reached for container f4ab1153a3ca. Exiting log stream.
2025-02-06 15:50:19.880 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15497/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:50:19.883 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 15:50:19.883 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 15:50:19.883 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15497/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:50:19.886 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.143.250/tcp/15498/p2p/16Uiu2HAmHBQ2N8CMuSrVt3nCLQ1j4jorpHqw8cB83cicDqRuh9Uj","/ip4/172.18.143.250/tcp/15499/ws/p2p/16Uiu2HAmHBQ2N8CMuSrVt3nCLQ1j4jorpHqw8cB83cicDqRuh9Uj"],"enrUri":"enr:-L24QOOz6YmsoPbj_Ts1DinuMnjZUfdEZ2S2GCG_03xeruYgP9pu2RQh5fwgxWkAEOgVJCPF__o4q1o5tN30S-YdYeICgmlkgnY0gmlwhKwSj_qKbXVsdGlhZGRyc5YACASsEo_6BjyKAAoErBKP-gY8i90DgnJzhQADAQAAiXNlY3AyNTZrMaEDQzjwnwI2vmV1cf5MkyE1zI2qjgzxgEhq8anfPTMEFuiDdGNwgjyKg3VkcII8jIV3YWt1MgU"}'
2025-02-06 15:50:19.886 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 15:50:19.886 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-06 15:50:19.893 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-06 15:50:19.893 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-06_15-50-18__626678bd-664c-4998-abf7-1786492de9de__wakuorg_go-waku:latest.log
2025-02-06 15:50:19.893 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 15:50:19.893 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 15:50:19.895 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 15:50:19.895 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.74.142
2025-02-06 15:50:19.895 DEBUG [src.node.docker_mananger] Generated ports ['61178', '61179', '61180', '61181', '61182']
2025-02-06 15:50:19.895 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 15:50:19.895 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 15:50:19.896 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 15:50:19.896 DEBUG [src.node.docker_mananger] docker run -i -t -p 61178:61178 -p 61179:61179 -p 61180:61180 -p 61181:61181 -p 61182:61182 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=61180 --rest-port=61178 --tcp-port=61179 --discv5-udp-port=61181 --rest-address=0.0.0.0 --nat=extip:172.18.74.142 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ac6dbffb50ef5b3bfcf7eed4437cc5dbcdd6af2c3dee8bff29c0ecd2a6f9a017 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-L24QOOz6YmsoPbj_Ts1DinuMnjZUfdEZ2S2GCG_03xeruYgP9pu2RQh5fwgxWkAEOgVJCPF__o4q1o5tN30S-YdYeICgmlkgnY0gmlwhKwSj_qKbXVsdGlhZGRyc5YACASsEo_6BjyKAAoErBKP-gY8i90DgnJzhQADAQAAiXNlY3AyNTZrMaEDQzjwnwI2vmV1cf5MkyE1zI2qjgzxgEhq8anfPTMEFuiDdGNwgjyKg3VkcII8jIV3YWt1MgU --filternode=/ip4/172.18.143.250/tcp/15498/p2p/16Uiu2HAmHBQ2N8CMuSrVt3nCLQ1j4jorpHqw8cB83cicDqRuh9Uj --pubsub-topic=/waku/2/rs/3/1
2025-02-06 15:50:20.137 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.74.142 waku 0b8ea4f2a0872f507f5071dd42a88e50ae5f4241eff8f89461e4f11392c3059b
2025-02-06 15:50:20.188 DEBUG [src.node.docker_mananger] Container started with ID 0b8ea4f2a087. Setting up logs at ./log/docker/node2_2025-02-06_15-50-18__626678bd-664c-4998-abf7-1786492de9de__wakuorg_go-waku:latest.log
2025-02-06 15:50:20.190 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 61178
2025-02-06 15:50:20.190 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 15:50:21.190 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61178/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:50:21.193 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QMYOijPw7Ja0K92Wk7ujt4lCbWcLQgc46VfqQ-AMpUmle8xIMdLhtevk5rjQ2pBezGo8N0aAUcpXfIwCYbkOkCGGAZTb9HsZgmlkgnY0gmlwhKwRAAOCcnOFAAMBAAGJc2VjcDI1NmsxoQItF2jWbpjHVbXKo6iH8YvIbVcX60WjQ-t1D5iKXgGKm4N0Y3CC7vuDdWRwgu79hXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/61179/p2p/16Uiu2HAkxTh2gqa4PfqhizjuhhypV2FCGZRN2mrmHEJFNB2z3vfC","/ip4/127.0.0.1/tcp/61180/ws/p2p/16Uiu2HAkxTh2gqa4PfqhizjuhhypV2FCGZRN2mrmHEJFNB2z3vfC","/ip4/172.17.0.3/tcp/61179/p2p/16Uiu2HAkxTh2gqa4PfqhizjuhhypV2FCGZRN2mrmHEJFNB2z3vfC","/ip4/172.17.0.3/tcp/61180/ws/p2p/16Uiu2HAkxTh2gqa4PfqhizjuhhypV2FCGZRN2mrmHEJFNB2z3vfC"]}'
2025-02-06 15:50:21.193 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 15:50:21.193 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61178/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.143.250/tcp/15498/p2p/16Uiu2HAmHBQ2N8CMuSrVt3nCLQ1j4jorpHqw8cB83cicDqRuh9Uj", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-06 15:50:21.195 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-06 15:50:21.196 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-06 15:50:21.196 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15497/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-06 15:50:21.199 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:50:21.199 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61178/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "0a14647a-2b44-4ff9-945f-0c2722bbcdf8", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-06 15:50:21.205 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"0a14647a-2b44-4ff9-945f-0c2722bbcdf8","statusDesc":"OK"}'
2025-02-06 15:50:21.206 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61178/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": 1, "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-06 15:50:21.208 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:61178/filter/v2/subscriptions. Response content: b''
2025-02-06 15:50:21.211 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-06 15:50:21.212 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-06 15:50:21.212 DEBUG [src.node.waku_node] Stopping container with id 40d200c1ed6f
2025-02-06 15:50:21.816 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 15:50:21.817 DEBUG [src.node.waku_node] Stopping container with id 0b8ea4f2a087
2025-02-06 15:50:22.630 ERROR [src.node.docker_mananger] Max retries reached for container 40d200c1ed6f. Exiting log stream.
2025-02-06 15:50:22.737 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 15:50:22.737 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-06 15:50:22.742 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 15:50:22.745 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
