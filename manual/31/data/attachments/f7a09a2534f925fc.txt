2025-02-06 15:49:11.188 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-06 15:49:11.188 DEBUG [tests.conftest] Running test: test_message_published_on_different_pubsub_topic_is_not_retrieved with id: 2025-02-06_15-49-11__4ba58d35-d330-42b4-b55e-3f94448343be
2025-02-06 15:49:11.189 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-06 15:49:11.189 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-06 15:49:11.189 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2025-02-06 15:49:11.195 DEBUG [src.node.docker_mananger] Docker client initialized with image quay.io/wakuorg/nwaku-pr:3281
2025-02-06 15:49:11.196 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-06_15-49-11__4ba58d35-d330-42b4-b55e-3f94448343be__quay.io_wakuorg_nwaku-pr:3281.log
2025-02-06 15:49:11.196 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 15:49:11.196 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 15:49:11.197 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 15:49:11.198 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.196.100
2025-02-06 15:49:11.198 DEBUG [src.node.docker_mananger] Generated ports ['15238', '15239', '15240', '15241', '15242']
2025-02-06 15:49:11.198 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 15:49:11.198 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 15:49:11.198 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 15:49:11.198 DEBUG [src.node.docker_mananger] docker run -i -t -p 15238:15238 -p 15239:15239 -p 15240:15240 -p 15241:15241 -p 15242:15242 quay.io/wakuorg/nwaku-pr:3281 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15240 --rest-port=15238 --tcp-port=15239 --discv5-udp-port=15241 --rest-address=0.0.0.0 --nat=extip:172.18.196.100 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2d38dbdf9155a5c5695bd44bce4affb769c12e699ffb44ffc32a72af6ad9b9ed --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15242 --metrics-logging=true --relay=true
2025-02-06 15:49:11.428 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.196.100 waku 86d306c1fc1aba2ed45c17d24939dea71ac84d642f9bcd507c96adecc253c015
2025-02-06 15:49:11.478 DEBUG [src.node.docker_mananger] Container started with ID 86d306c1fc1a. Setting up logs at ./log/docker/node1_2025-02-06_15-49-11__4ba58d35-d330-42b4-b55e-3f94448343be__quay.io_wakuorg_nwaku-pr:3281.log
2025-02-06 15:49:11.478 DEBUG [src.node.waku_node] Started container from image quay.io/wakuorg/nwaku-pr:3281. REST: 15238
2025-02-06 15:49:11.479 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 15:49:11.994 ERROR [src.node.docker_mananger] Max retries reached for container b971f9e1330d. Exiting log stream.
2025-02-06 15:49:12.480 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15238/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:49:12.483 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 15:49:12.483 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 15:49:12.483 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15238/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:49:12.485 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.196.100/tcp/15239/p2p/16Uiu2HAmPKNB3aCsSvx7bJP7iAfzKa4EHfDqSPYNHrshhRSQPgCm","/ip4/172.18.196.100/tcp/15240/ws/p2p/16Uiu2HAmPKNB3aCsSvx7bJP7iAfzKa4EHfDqSPYNHrshhRSQPgCm"],"enrUri":"enr:-L24QE1CfRqWq_TGjS8On4N7BcHpfKHS5J5lXOOPBy3RBT4bHN72WWxyaOfWMao_D71lPVvDRspuVsmx7DVi5cwIGnMCgmlkgnY0gmlwhKwSxGSKbXVsdGlhZGRyc5YACASsEsRkBjuHAAoErBLEZAY7iN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDnmmdov0am0Kd9LWIZR3o1ke2hv9NDpnbA438TkH-FaaDdGNwgjuHg3VkcII7iYV3YWt1MgE"}'
2025-02-06 15:49:12.485 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 15:49:12.492 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-06 15:49:12.492 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-06_15-49-11__4ba58d35-d330-42b4-b55e-3f94448343be__wakuorg_go-waku:latest.log
2025-02-06 15:49:12.492 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 15:49:12.492 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 15:49:12.493 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 15:49:12.493 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.59.150
2025-02-06 15:49:12.494 DEBUG [src.node.docker_mananger] Generated ports ['60646', '60647', '60648', '60649', '60650']
2025-02-06 15:49:12.494 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 15:49:12.494 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 15:49:12.494 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 15:49:12.494 DEBUG [src.node.docker_mananger] docker run -i -t -p 60646:60646 -p 60647:60647 -p 60648:60648 -p 60649:60649 -p 60650:60650 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=60648 --rest-port=60646 --tcp-port=60647 --discv5-udp-port=60649 --rest-address=0.0.0.0 --nat=extip:172.18.59.150 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b95cc0faf2db31eef26aa5ce822d895e0c71ac7eeef7edd36bded7e1d781aac9 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --discv5-bootstrap-node=enr:-L24QE1CfRqWq_TGjS8On4N7BcHpfKHS5J5lXOOPBy3RBT4bHN72WWxyaOfWMao_D71lPVvDRspuVsmx7DVi5cwIGnMCgmlkgnY0gmlwhKwSxGSKbXVsdGlhZGRyc5YACASsEsRkBjuHAAoErBLEZAY7iN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDnmmdov0am0Kd9LWIZR3o1ke2hv9NDpnbA438TkH-FaaDdGNwgjuHg3VkcII7iYV3YWt1MgE
2025-02-06 15:49:12.730 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.59.150 waku e492f5adf23d82431d0e34afa35a292da489ff553e20abf680f3475f9e19a292
2025-02-06 15:49:12.783 DEBUG [src.node.docker_mananger] Container started with ID e492f5adf23d. Setting up logs at ./log/docker/node2_2025-02-06_15-49-11__4ba58d35-d330-42b4-b55e-3f94448343be__wakuorg_go-waku:latest.log
2025-02-06 15:49:12.784 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 60646
2025-02-06 15:49:12.785 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 15:49:13.786 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60646/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:49:13.789 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QI5VlyhYvekCmUGvdS66ExcA5fI8AXSXlOb1ctnJGvgAZKQ0eqJhUqkJk2k_NNcCGWTbARnC2S-fK5k31tm0tByGAZTb83PKgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaEDG6S_M1a0zwiodOkGYQXVcDOh49JWF4cMOfaWLr_KVMSDdGNwguzng3VkcILs6YV3YWt1MgE","listenAddresses":["/ip4/127.0.0.1/tcp/60647/p2p/16Uiu2HAmEWu4WwWfXNDRoBHWWWqCY8dccx56Frme1z6A9ryYxtDR","/ip4/127.0.0.1/tcp/60648/ws/p2p/16Uiu2HAmEWu4WwWfXNDRoBHWWWqCY8dccx56Frme1z6A9ryYxtDR","/ip4/172.17.0.3/tcp/60647/p2p/16Uiu2HAmEWu4WwWfXNDRoBHWWWqCY8dccx56Frme1z6A9ryYxtDR","/ip4/172.17.0.3/tcp/60648/ws/p2p/16Uiu2HAmEWu4WwWfXNDRoBHWWWqCY8dccx56Frme1z6A9ryYxtDR"]}'
2025-02-06 15:49:13.789 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 15:49:13.790 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:60646/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.196.100/tcp/15239/p2p/16Uiu2HAmPKNB3aCsSvx7bJP7iAfzKa4EHfDqSPYNHrshhRSQPgCm", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-06 15:49:13.805 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-06 15:49:13.807 DEBUG [src.steps.relay] Running fixture setup: subscribe_main_relay_nodes
2025-02-06 15:49:13.808 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15238/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-06 15:49:13.814 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:49:13.815 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:60646/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-06 15:49:13.817 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-06 15:49:13.818 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15238/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 15:49:13.827 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:49:13.830 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-06 15:49:13.930 DEBUG [src.steps.relay] Checking that peer NODE_1:quay.io/wakuorg/nwaku-pr:3281 can find the published message
2025-02-06 15:49:13.931 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15238/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:49:13.933 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738856953818672640,"ephemeral":false}]'
2025-02-06 15:49:13.935 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-06 15:49:13.935 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60646/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:49:13.936 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-06 15:49:14.938 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15238/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 15:49:14.943 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:49:14.943 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-06 15:49:15.043 DEBUG [src.steps.relay] Checking that peer NODE_1:quay.io/wakuorg/nwaku-pr:3281 can find the published message
2025-02-06 15:49:15.043 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15238/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:49:15.046 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738856954937823744,"ephemeral":false}]'
2025-02-06 15:49:15.048 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-06 15:49:15.048 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60646/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:49:15.050 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738856954937823744,"ephemeral":false}]'
2025-02-06 15:49:15.051 INFO [src.steps.relay] WARM UP successful!!
2025-02-06 15:49:15.052 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15238/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0", "/waku/2/rs/3/1", "/waku/2/rs/3/9", "/waku/2/rs/3/25", "/waku/2/rs/3/1000"]'
2025-02-06 15:49:15.057 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:49:15.058 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:60646/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0", "/waku/2/rs/3/1", "/waku/2/rs/3/9", "/waku/2/rs/3/25", "/waku/2/rs/3/1000"]'
2025-02-06 15:49:15.060 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-06 15:49:15.061 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15238/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 15:49:15.072 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:49:15.073 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-06 15:49:15.173 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60646/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:49:15.175 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-06 15:49:15.177 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-06 15:49:15.178 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-06 15:49:15.179 DEBUG [src.node.waku_node] Stopping container with id 86d306c1fc1a
2025-02-06 15:49:15.724 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 15:49:15.725 DEBUG [src.node.waku_node] Stopping container with id e492f5adf23d
2025-02-06 15:49:16.225 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 15:49:16.228 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-06 15:49:16.235 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 15:49:16.238 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
