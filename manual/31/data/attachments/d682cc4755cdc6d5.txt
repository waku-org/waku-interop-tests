2025-02-06 15:50:41.752 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-06 15:50:41.752 DEBUG [tests.conftest] Running test: test_light_push_with_valid_timestamps with id: 2025-02-06_15-50-41__b141f965-91c7-48e4-ac56-7ae954a8a915
2025-02-06 15:50:41.753 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-06 15:50:41.753 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-06 15:50:41.759 DEBUG [src.node.docker_mananger] Docker client initialized with image quay.io/wakuorg/nwaku-pr:3281
2025-02-06 15:50:41.759 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-06_15-50-41__b141f965-91c7-48e4-ac56-7ae954a8a915__quay.io_wakuorg_nwaku-pr:3281.log
2025-02-06 15:50:41.760 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 15:50:41.760 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 15:50:41.761 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 15:50:41.761 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.22.64
2025-02-06 15:50:41.761 DEBUG [src.node.docker_mananger] Generated ports ['11410', '11411', '11412', '11413', '11414']
2025-02-06 15:50:41.762 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 15:50:41.762 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 15:50:41.762 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 15:50:41.762 DEBUG [src.node.docker_mananger] docker run -i -t -p 11410:11410 -p 11411:11411 -p 11412:11412 -p 11413:11413 -p 11414:11414 quay.io/wakuorg/nwaku-pr:3281 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=11412 --rest-port=11410 --tcp-port=11411 --discv5-udp-port=11413 --rest-address=0.0.0.0 --nat=extip:172.18.22.64 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bffa89ebe3b9ba2c8e287caa71c22440890be0f98fed626ffcfa0bdb9261a6c0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=11414 --metrics-logging=true --lightpush=true --relay=true
2025-02-06 15:50:41.996 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.22.64 waku 0ff0ec15e2fdf8d552a2618bdd999cf26ed61dd6f5226a108e531da22722890e
2025-02-06 15:50:42.053 DEBUG [src.node.docker_mananger] Container started with ID 0ff0ec15e2fd. Setting up logs at ./log/docker/receiving_node1_2025-02-06_15-50-41__b141f965-91c7-48e4-ac56-7ae954a8a915__quay.io_wakuorg_nwaku-pr:3281.log
2025-02-06 15:50:42.055 DEBUG [src.node.waku_node] Started container from image quay.io/wakuorg/nwaku-pr:3281. REST: 11410
2025-02-06 15:50:42.056 ERROR [src.node.docker_mananger] Max retries reached for container 6f25922f545d. Exiting log stream.
2025-02-06 15:50:42.056 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 15:50:42.538 ERROR [src.node.docker_mananger] Max retries reached for container 0e6176ede564. Exiting log stream.
2025-02-06 15:50:43.058 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11410/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:50:43.061 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 15:50:43.061 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 15:50:43.061 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11410/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:50:43.063 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.22.64/tcp/11411/p2p/16Uiu2HAmD1b9FKiYWieKCdLCFhvYX7C8HYkw2gXr1H3dDYb4XSj6","/ip4/172.18.22.64/tcp/11412/ws/p2p/16Uiu2HAmD1b9FKiYWieKCdLCFhvYX7C8HYkw2gXr1H3dDYb4XSj6"],"enrUri":"enr:-L24QPpi-D8PogYAxRIpJldFjSEZjP6fvWaBtDraBhJHK6tYQS890reCYG0GESQDJhPy1B0kMQwE9l0v2hbgUI0r7p8CgmlkgnY0gmlwhKwSFkCKbXVsdGlhZGRyc5YACASsEhZABiyTAAoErBIWQAYslN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDBUb0v46j7YlPjXjcI_KFG0-ilzQbNPa6P0aogzTLUO2DdGNwgiyTg3VkcIIslYV3YWt1Mgk"}'
2025-02-06 15:50:43.064 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 15:50:43.070 DEBUG [src.node.docker_mananger] Docker client initialized with image quay.io/wakuorg/nwaku-pr:3281
2025-02-06 15:50:43.070 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-06_15-50-41__b141f965-91c7-48e4-ac56-7ae954a8a915__quay.io_wakuorg_nwaku-pr:3281.log
2025-02-06 15:50:43.071 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 15:50:43.071 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 15:50:43.072 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 15:50:43.072 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.194.8
2025-02-06 15:50:43.072 DEBUG [src.node.docker_mananger] Generated ports ['64746', '64747', '64748', '64749', '64750']
2025-02-06 15:50:43.073 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 15:50:43.073 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 15:50:43.073 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 15:50:43.073 DEBUG [src.node.docker_mananger] docker run -i -t -p 64746:64746 -p 64747:64747 -p 64748:64748 -p 64749:64749 -p 64750:64750 quay.io/wakuorg/nwaku-pr:3281 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64748 --rest-port=64746 --tcp-port=64747 --discv5-udp-port=64749 --rest-address=0.0.0.0 --nat=extip:172.18.194.8 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ebea2fb72728bfa157ccddc0acc7bdaabf2f4fac9ba774cddd2fcb1ac143efc4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64750 --metrics-logging=true --lightpush=false --relay=true
2025-02-06 15:50:43.303 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.194.8 waku d1fcbfc9efb9c6bb57d837e1522cb207f8114f4c24ee08f07b74f4dc5363a6f8
2025-02-06 15:50:43.352 DEBUG [src.node.docker_mananger] Container started with ID d1fcbfc9efb9. Setting up logs at ./log/docker/receiving_node2_2025-02-06_15-50-41__b141f965-91c7-48e4-ac56-7ae954a8a915__quay.io_wakuorg_nwaku-pr:3281.log
2025-02-06 15:50:43.353 DEBUG [src.node.waku_node] Started container from image quay.io/wakuorg/nwaku-pr:3281. REST: 64746
2025-02-06 15:50:43.353 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 15:50:44.354 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64746/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:50:44.356 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 15:50:44.357 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 15:50:44.357 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64746/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:50:44.359 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.194.8/tcp/64747/p2p/16Uiu2HAm6bjuUNSMzktU7HVfpk9KHfvUdUy4qcN6t5kJ4PJUDoFg","/ip4/172.18.194.8/tcp/64748/ws/p2p/16Uiu2HAm6bjuUNSMzktU7HVfpk9KHfvUdUy4qcN6t5kJ4PJUDoFg"],"enrUri":"enr:-L24QOoOP51f6ED1AEzBTes6ztPd5yRFfQRsNzTe2_7BLknrSizksVRyi_B5GvtARd6vmHJA2lA7cCefi2pWDm2hylQCgmlkgnY0gmlwhKwSwgiKbXVsdGlhZGRyc5YACASsEsIIBvzrAAoErBLCCAb87N0DgnJzhQADAQAAiXNlY3AyNTZrMaECpgTNiFGyPF3y9ONkPTp2uitA1-4nwXJ3FZRPX2sYGfuDdGNwgvzrg3VkcIL87YV3YWt1MgE"}'
2025-02-06 15:50:44.359 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 15:50:44.359 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64746/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.22.64/tcp/11411/p2p/16Uiu2HAmD1b9FKiYWieKCdLCFhvYX7C8HYkw2gXr1H3dDYb4XSj6"]'
2025-02-06 15:50:44.385 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:50:44.398 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-06 15:50:44.398 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-06_15-50-41__b141f965-91c7-48e4-ac56-7ae954a8a915__wakuorg_go-waku:latest.log
2025-02-06 15:50:44.398 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 15:50:44.398 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 15:50:44.400 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 15:50:44.400 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.141.138
2025-02-06 15:50:44.400 DEBUG [src.node.docker_mananger] Generated ports ['58589', '58590', '58591', '58592', '58593']
2025-02-06 15:50:44.401 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 15:50:44.401 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 15:50:44.401 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 15:50:44.401 DEBUG [src.node.docker_mananger] docker run -i -t -p 58589:58589 -p 58590:58590 -p 58591:58591 -p 58592:58592 -p 58593:58593 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=58591 --rest-port=58589 --tcp-port=58590 --discv5-udp-port=58592 --rest-address=0.0.0.0 --nat=extip:172.18.141.138 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=beb12b3fb951acea00d896eeacce1aee4bf384cb7b2ec3719ffbe13ccce2fca3 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QPpi-D8PogYAxRIpJldFjSEZjP6fvWaBtDraBhJHK6tYQS890reCYG0GESQDJhPy1B0kMQwE9l0v2hbgUI0r7p8CgmlkgnY0gmlwhKwSFkCKbXVsdGlhZGRyc5YACASsEhZABiyTAAoErBIWQAYslN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDBUb0v46j7YlPjXjcI_KFG0-ilzQbNPa6P0aogzTLUO2DdGNwgiyTg3VkcIIslYV3YWt1Mgk --lightpushnode=/ip4/172.18.22.64/tcp/11411/p2p/16Uiu2HAmD1b9FKiYWieKCdLCFhvYX7C8HYkw2gXr1H3dDYb4XSj6 --lightpush=true --relay=false --pubsub-topic=/waku/2/rs/3/1
2025-02-06 15:50:44.642 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.141.138 waku a2b9feb6d26d0fb5abf148ae16fbf1bccdb87757a105d6a755c5178bb37bd1d5
2025-02-06 15:50:44.699 DEBUG [src.node.docker_mananger] Container started with ID a2b9feb6d26d. Setting up logs at ./log/docker/lightpush_node1_2025-02-06_15-50-41__b141f965-91c7-48e4-ac56-7ae954a8a915__wakuorg_go-waku:latest.log
2025-02-06 15:50:44.699 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 58589
2025-02-06 15:50:44.700 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 15:50:45.702 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58589/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:50:45.704 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QLVJHIUNlTT-HNu4kjT_WvVGUiFY_75pC_imTiSiVL1eSx-w0Wswe-TPOXh2GavUZ-OTiqMTn2Flr1fhhg1U8yiGAZTb9NrQgmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQKPJFg09QXl2eRH0UfqC_qeiMi2009lPyQ0YbcicErLi4N0Y3CC5N6DdWRwguTghXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/58590/p2p/16Uiu2HAm54SRYuBHfkkSLA9w88yT2SLWfTtD3Fhgj4o8Vs8gpPpe","/ip4/127.0.0.1/tcp/58591/ws/p2p/16Uiu2HAm54SRYuBHfkkSLA9w88yT2SLWfTtD3Fhgj4o8Vs8gpPpe","/ip4/172.17.0.4/tcp/58590/p2p/16Uiu2HAm54SRYuBHfkkSLA9w88yT2SLWfTtD3Fhgj4o8Vs8gpPpe","/ip4/172.17.0.4/tcp/58591/ws/p2p/16Uiu2HAm54SRYuBHfkkSLA9w88yT2SLWfTtD3Fhgj4o8Vs8gpPpe"]}'
2025-02-06 15:50:45.704 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 15:50:45.705 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58589/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.22.64/tcp/11411/p2p/16Uiu2HAmD1b9FKiYWieKCdLCFhvYX7C8HYkw2gXr1H3dDYb4XSj6", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-06 15:50:45.706 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-06 15:50:45.707 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58589/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.194.8/tcp/64747/p2p/16Uiu2HAm6bjuUNSMzktU7HVfpk9KHfvUdUy4qcN6t5kJ4PJUDoFg", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-06 15:50:45.721 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-06 15:50:45.722 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11410/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-06 15:50:45.728 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:50:45.729 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64746/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-06 15:50:45.734 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:50:45.735 DEBUG [tests.light_push.test_publish] Running test with timestamp Now
2025-02-06 15:50:45.735 DEBUG [src.steps.light_push] Lightpushing message
2025-02-06 15:50:45.736 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58589/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738856798948915200}}'
2025-02-06 15:50:45.743 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-06 15:50:45.744 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-06 15:50:45.844 DEBUG [src.steps.light_push] Checking that peer NODE_1:quay.io/wakuorg/nwaku-pr:3281 can find the lightpushed message
2025-02-06 15:50:45.844 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11410/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:50:45.847 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738856798948915200,"ephemeral":false}]'
2025-02-06 15:50:45.849 DEBUG [src.steps.light_push] Checking that peer NODE_2:quay.io/wakuorg/nwaku-pr:3281 can find the lightpushed message
2025-02-06 15:50:45.849 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64746/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:50:45.852 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738856798948915200,"ephemeral":false}]'
2025-02-06 15:50:45.853 DEBUG [tests.light_push.test_publish] Running test with timestamp Far future
2025-02-06 15:50:45.853 DEBUG [src.steps.light_push] Lightpushing message
2025-02-06 15:50:45.853 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58589/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 2054216798948900096}}'
2025-02-06 15:50:45.859 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-06 15:50:45.860 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-06 15:50:45.960 DEBUG [src.steps.light_push] Checking that peer NODE_1:quay.io/wakuorg/nwaku-pr:3281 can find the lightpushed message
2025-02-06 15:50:45.960 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11410/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:50:45.963 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":2054216798948900096,"ephemeral":false}]'
2025-02-06 15:50:45.965 DEBUG [src.steps.light_push] Checking that peer NODE_2:quay.io/wakuorg/nwaku-pr:3281 can find the lightpushed message
2025-02-06 15:50:45.965 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64746/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:50:45.967 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":2054216798948900096,"ephemeral":false}]'
2025-02-06 15:50:45.969 DEBUG [tests.light_push.test_publish] Running test with timestamp Recent past
2025-02-06 15:50:45.969 DEBUG [src.steps.light_push] Lightpushing message
2025-02-06 15:50:45.969 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58589/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738853198948900096}}'
2025-02-06 15:50:45.976 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-06 15:50:45.977 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-06 15:50:46.077 DEBUG [src.steps.light_push] Checking that peer NODE_1:quay.io/wakuorg/nwaku-pr:3281 can find the lightpushed message
2025-02-06 15:50:46.077 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11410/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:50:46.080 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738853198948900096,"ephemeral":false}]'
2025-02-06 15:50:46.082 DEBUG [src.steps.light_push] Checking that peer NODE_2:quay.io/wakuorg/nwaku-pr:3281 can find the lightpushed message
2025-02-06 15:50:46.082 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64746/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:50:46.084 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738853198948900096,"ephemeral":false}]'
2025-02-06 15:50:46.085 DEBUG [tests.light_push.test_publish] Running test with timestamp Near future
2025-02-06 15:50:46.086 DEBUG [src.steps.light_push] Lightpushing message
2025-02-06 15:50:46.086 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58589/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738860398948900096}}'
2025-02-06 15:50:46.092 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-06 15:50:46.094 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-06 15:50:46.195 DEBUG [src.steps.light_push] Checking that peer NODE_1:quay.io/wakuorg/nwaku-pr:3281 can find the lightpushed message
2025-02-06 15:50:46.195 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11410/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:50:46.198 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738860398948900096,"ephemeral":false}]'
2025-02-06 15:50:46.199 DEBUG [src.steps.light_push] Checking that peer NODE_2:quay.io/wakuorg/nwaku-pr:3281 can find the lightpushed message
2025-02-06 15:50:46.200 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64746/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:50:46.202 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738860398948900096,"ephemeral":false}]'
2025-02-06 15:50:46.204 DEBUG [tests.light_push.test_publish] Running test with timestamp Positive number
2025-02-06 15:50:46.204 DEBUG [src.steps.light_push] Lightpushing message
2025-02-06 15:50:46.204 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58589/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1}}'
2025-02-06 15:50:46.211 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-06 15:50:46.212 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-06 15:50:46.312 DEBUG [src.steps.light_push] Checking that peer NODE_1:quay.io/wakuorg/nwaku-pr:3281 can find the lightpushed message
2025-02-06 15:50:46.313 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11410/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:50:46.316 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1,"ephemeral":false}]'
2025-02-06 15:50:46.317 DEBUG [src.steps.light_push] Checking that peer NODE_2:quay.io/wakuorg/nwaku-pr:3281 can find the lightpushed message
2025-02-06 15:50:46.317 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64746/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:50:46.320 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1,"ephemeral":false}]'
2025-02-06 15:50:46.321 DEBUG [tests.light_push.test_publish] Running test with timestamp Negative number
2025-02-06 15:50:46.322 DEBUG [src.steps.light_push] Lightpushing message
2025-02-06 15:50:46.322 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58589/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": -1}}'
2025-02-06 15:50:46.328 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-06 15:50:46.329 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-06 15:50:46.429 DEBUG [src.steps.light_push] Checking that peer NODE_1:quay.io/wakuorg/nwaku-pr:3281 can find the lightpushed message
2025-02-06 15:50:46.430 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11410/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:50:46.432 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":-1,"ephemeral":false}]'
2025-02-06 15:50:46.434 DEBUG [src.steps.light_push] Checking that peer NODE_2:quay.io/wakuorg/nwaku-pr:3281 can find the lightpushed message
2025-02-06 15:50:46.434 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64746/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:50:46.436 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":-1,"ephemeral":false}]'
2025-02-06 15:50:46.438 DEBUG [tests.light_push.test_publish] Running test with timestamp DST change
2025-02-06 15:50:46.438 DEBUG [src.steps.light_push] Lightpushing message
2025-02-06 15:50:46.438 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58589/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1583632800000000000}}'
2025-02-06 15:50:46.446 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-06 15:50:46.446 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-06 15:50:46.547 DEBUG [src.steps.light_push] Checking that peer NODE_1:quay.io/wakuorg/nwaku-pr:3281 can find the lightpushed message
2025-02-06 15:50:46.547 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11410/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:50:46.550 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1583632800000000000,"ephemeral":false}]'
2025-02-06 15:50:46.552 DEBUG [src.steps.light_push] Checking that peer NODE_2:quay.io/wakuorg/nwaku-pr:3281 can find the lightpushed message
2025-02-06 15:50:46.552 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64746/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:50:46.554 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1583632800000000000,"ephemeral":false}]'
2025-02-06 15:50:46.555 DEBUG [tests.light_push.test_publish] Running test with timestamp Missing
2025-02-06 15:50:46.556 DEBUG [src.steps.light_push] Lightpushing message
2025-02-06 15:50:46.556 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58589/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": null}}'
2025-02-06 15:50:46.562 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-06 15:50:46.563 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-06 15:50:46.664 DEBUG [src.steps.light_push] Checking that peer NODE_1:quay.io/wakuorg/nwaku-pr:3281 can find the lightpushed message
2025-02-06 15:50:46.665 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11410/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:50:46.668 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":0,"ephemeral":false}]'
2025-02-06 15:50:46.669 DEBUG [src.steps.light_push] Checking that peer NODE_2:quay.io/wakuorg/nwaku-pr:3281 can find the lightpushed message
2025-02-06 15:50:46.669 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64746/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:50:46.671 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":0,"ephemeral":false}]'
2025-02-06 15:50:46.674 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-06 15:50:46.675 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-06 15:50:46.675 DEBUG [src.node.waku_node] Stopping container with id 0ff0ec15e2fd
2025-02-06 15:50:47.238 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 15:50:47.238 DEBUG [src.node.waku_node] Stopping container with id d1fcbfc9efb9
2025-02-06 15:50:48.052 ERROR [src.node.docker_mananger] Max retries reached for container 0ff0ec15e2fd. Exiting log stream.
2025-02-06 15:50:48.336 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 15:50:48.336 DEBUG [src.node.waku_node] Stopping container with id a2b9feb6d26d
2025-02-06 15:50:48.831 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 15:50:48.833 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-06 15:50:48.842 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 15:50:48.850 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 15:50:48.853 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
