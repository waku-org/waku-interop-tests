2025-02-06 15:47:39.505 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-06 15:47:39.506 DEBUG [tests.conftest] Running test: test_light_push_with_payload_less_than_150_kb with id: 2025-02-06_15-47-39__25609dab-a09d-471e-aea6-82aa4f45eeaa
2025-02-06 15:47:39.506 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-06 15:47:39.506 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-06 15:47:39.513 DEBUG [src.node.docker_mananger] Docker client initialized with image quay.io/wakuorg/nwaku-pr:3281
2025-02-06 15:47:39.514 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-06_15-47-39__25609dab-a09d-471e-aea6-82aa4f45eeaa__quay.io_wakuorg_nwaku-pr:3281.log
2025-02-06 15:47:39.514 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 15:47:39.514 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 15:47:39.516 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 15:47:39.516 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.244.227
2025-02-06 15:47:39.516 DEBUG [src.node.docker_mananger] Generated ports ['33198', '33199', '33200', '33201', '33202']
2025-02-06 15:47:39.516 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 15:47:39.516 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 15:47:39.516 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 15:47:39.516 DEBUG [src.node.docker_mananger] docker run -i -t -p 33198:33198 -p 33199:33199 -p 33200:33200 -p 33201:33201 -p 33202:33202 quay.io/wakuorg/nwaku-pr:3281 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=33200 --rest-port=33198 --tcp-port=33199 --discv5-udp-port=33201 --rest-address=0.0.0.0 --nat=extip:172.18.244.227 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3a3cc6cdea9529502c084faca6f88e9e78fac23659bf0fffe483b45701a5deb7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=33202 --metrics-logging=true --lightpush=true --relay=true
2025-02-06 15:47:39.759 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.244.227 waku 31f4b896cec9d460d7206dba80138cc61ecbaf313812181386f286e04568b14c
2025-02-06 15:47:39.817 DEBUG [src.node.docker_mananger] Container started with ID 31f4b896cec9. Setting up logs at ./log/docker/receiving_node1_2025-02-06_15-47-39__25609dab-a09d-471e-aea6-82aa4f45eeaa__quay.io_wakuorg_nwaku-pr:3281.log
2025-02-06 15:47:39.817 DEBUG [src.node.waku_node] Started container from image quay.io/wakuorg/nwaku-pr:3281. REST: 33198
2025-02-06 15:47:39.818 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 15:47:40.308 ERROR [src.node.docker_mananger] Max retries reached for container 08091d66e5ff. Exiting log stream.
2025-02-06 15:47:40.819 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33198/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:47:40.822 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 15:47:40.823 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 15:47:40.823 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33198/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:47:40.825 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.244.227/tcp/33199/p2p/16Uiu2HAmMRsqPwjrdqUDZaPLo4JziBYpkrUriSDLvKUKNQ26iZaC","/ip4/172.18.244.227/tcp/33200/ws/p2p/16Uiu2HAmMRsqPwjrdqUDZaPLo4JziBYpkrUriSDLvKUKNQ26iZaC"],"enrUri":"enr:-L24QLTsuzgeO_l2zmIU0NbS2SaZ82xG-Wm8Qpmgqptqke_aPmAh-J8fCRr2bwzd0F_g1E7TpdGv3v1gdFjJZZ1y5Q8CgmlkgnY0gmlwhKwS9OOKbXVsdGlhZGRyc5YACASsEvTjBoGvAAoErBL04waBsN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDgl1Dy7yORqPDynNmxX5IX5fE9VWxNkr__bK11-taL52DdGNwgoGvg3VkcIKBsYV3YWt1Mgk"}'
2025-02-06 15:47:40.826 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 15:47:40.833 DEBUG [src.node.docker_mananger] Docker client initialized with image quay.io/wakuorg/nwaku-pr:3281
2025-02-06 15:47:40.833 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-06_15-47-39__25609dab-a09d-471e-aea6-82aa4f45eeaa__quay.io_wakuorg_nwaku-pr:3281.log
2025-02-06 15:47:40.833 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 15:47:40.833 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 15:47:40.835 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 15:47:40.835 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.149.244
2025-02-06 15:47:40.835 DEBUG [src.node.docker_mananger] Generated ports ['57699', '57700', '57701', '57702', '57703']
2025-02-06 15:47:40.835 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 15:47:40.835 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 15:47:40.836 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 15:47:40.836 DEBUG [src.node.docker_mananger] docker run -i -t -p 57699:57699 -p 57700:57700 -p 57701:57701 -p 57702:57702 -p 57703:57703 quay.io/wakuorg/nwaku-pr:3281 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57701 --rest-port=57699 --tcp-port=57700 --discv5-udp-port=57702 --rest-address=0.0.0.0 --nat=extip:172.18.149.244 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0efeea969dcf4c3d0c145f2cfa02b8b63c8936f31e2ca39b38328a41cb6fffb6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57703 --metrics-logging=true --lightpush=false --relay=true
2025-02-06 15:47:41.075 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.149.244 waku 9bdec1306dae8e02a452c5af6ed5cc907e4ab2cde6254cf126bc57bd15b84ef2
2025-02-06 15:47:41.124 DEBUG [src.node.docker_mananger] Container started with ID 9bdec1306dae. Setting up logs at ./log/docker/receiving_node2_2025-02-06_15-47-39__25609dab-a09d-471e-aea6-82aa4f45eeaa__quay.io_wakuorg_nwaku-pr:3281.log
2025-02-06 15:47:41.124 DEBUG [src.node.waku_node] Started container from image quay.io/wakuorg/nwaku-pr:3281. REST: 57699
2025-02-06 15:47:41.124 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 15:47:42.126 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57699/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:47:42.128 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 15:47:42.129 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 15:47:42.129 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57699/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:47:42.132 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.149.244/tcp/57700/p2p/16Uiu2HAmDqJTVUKW29YQDkJ4a5Qgut6oN37PM5cgo1RdbxsnguWS","/ip4/172.18.149.244/tcp/57701/ws/p2p/16Uiu2HAmDqJTVUKW29YQDkJ4a5Qgut6oN37PM5cgo1RdbxsnguWS"],"enrUri":"enr:-L24QNgMqfGrJ5QS1qxhZwgJ8qO392iHjhlUMyd6P9fTORGpAkd9g8tU4sQ6rLrPsx99GzgSUom8qW9INs2xBeubyZgCgmlkgnY0gmlwhKwSlfSKbXVsdGlhZGRyc5YACASsEpX0BuFkAAoErBKV9AbhZd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDEX_39TzrTtvvlt-5TFYdiARGFKEj9-iCW0VoWRUbI-ODdGNwguFkg3VkcILhZoV3YWt1MgE"}'
2025-02-06 15:47:42.132 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 15:47:42.132 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57699/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.244.227/tcp/33199/p2p/16Uiu2HAmMRsqPwjrdqUDZaPLo4JziBYpkrUriSDLvKUKNQ26iZaC"]'
2025-02-06 15:47:42.156 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:47:42.171 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-06 15:47:42.171 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-06_15-47-39__25609dab-a09d-471e-aea6-82aa4f45eeaa__wakuorg_go-waku:latest.log
2025-02-06 15:47:42.171 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 15:47:42.171 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 15:47:42.173 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 15:47:42.173 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.234.156
2025-02-06 15:47:42.173 DEBUG [src.node.docker_mananger] Generated ports ['46008', '46009', '46010', '46011', '46012']
2025-02-06 15:47:42.173 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 15:47:42.174 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 15:47:42.174 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 15:47:42.174 DEBUG [src.node.docker_mananger] docker run -i -t -p 46008:46008 -p 46009:46009 -p 46010:46010 -p 46011:46011 -p 46012:46012 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=46010 --rest-port=46008 --tcp-port=46009 --discv5-udp-port=46011 --rest-address=0.0.0.0 --nat=extip:172.18.234.156 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b630a60b8d26295d4a4e3f1ae3dba7b629fa6dfddb4fabb0bdbd77e1ad6ed2be --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QLTsuzgeO_l2zmIU0NbS2SaZ82xG-Wm8Qpmgqptqke_aPmAh-J8fCRr2bwzd0F_g1E7TpdGv3v1gdFjJZZ1y5Q8CgmlkgnY0gmlwhKwS9OOKbXVsdGlhZGRyc5YACASsEvTjBoGvAAoErBL04waBsN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDgl1Dy7yORqPDynNmxX5IX5fE9VWxNkr__bK11-taL52DdGNwgoGvg3VkcIKBsYV3YWt1Mgk --lightpushnode=/ip4/172.18.244.227/tcp/33199/p2p/16Uiu2HAmMRsqPwjrdqUDZaPLo4JziBYpkrUriSDLvKUKNQ26iZaC --lightpush=true --relay=false --pubsub-topic=/waku/2/rs/3/1
2025-02-06 15:47:42.405 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.234.156 waku 72965c71df1760d70c62f3242f855111942518bff4d3a8c398a9e6bcd2a14954
2025-02-06 15:47:42.457 DEBUG [src.node.docker_mananger] Container started with ID 72965c71df17. Setting up logs at ./log/docker/lightpush_node1_2025-02-06_15-47-39__25609dab-a09d-471e-aea6-82aa4f45eeaa__wakuorg_go-waku:latest.log
2025-02-06 15:47:42.459 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 46008
2025-02-06 15:47:42.459 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 15:47:43.460 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46008/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:47:43.462 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QNrSdknCLVd_E2AlSAEe1vEHoBfOdl9FLtqJR1P3pp8ZfBMLELA90x51StkIX9Dsua1JukvhzBto4Y_EGkB8IwWGAZTb8hL2gmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQNoy2LLQoTLH7STtewfbI12sKoLNdSSJwsL-FDPLLNL04N0Y3CCs7mDdWRwgrO7hXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/46009/p2p/16Uiu2HAmKi4dJZvna6fP5rjaMoQPHxLXPcKXnWeFZbC8h9orstv6","/ip4/127.0.0.1/tcp/46010/ws/p2p/16Uiu2HAmKi4dJZvna6fP5rjaMoQPHxLXPcKXnWeFZbC8h9orstv6","/ip4/172.17.0.4/tcp/46009/p2p/16Uiu2HAmKi4dJZvna6fP5rjaMoQPHxLXPcKXnWeFZbC8h9orstv6","/ip4/172.17.0.4/tcp/46010/ws/p2p/16Uiu2HAmKi4dJZvna6fP5rjaMoQPHxLXPcKXnWeFZbC8h9orstv6"]}'
2025-02-06 15:47:43.463 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 15:47:43.463 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46008/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.244.227/tcp/33199/p2p/16Uiu2HAmMRsqPwjrdqUDZaPLo4JziBYpkrUriSDLvKUKNQ26iZaC", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-06 15:47:43.465 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-06 15:47:43.465 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46008/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.149.244/tcp/57700/p2p/16Uiu2HAmDqJTVUKW29YQDkJ4a5Qgut6oN37PM5cgo1RdbxsnguWS", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-06 15:47:43.481 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-06 15:47:43.483 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33198/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-06 15:47:43.490 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:47:43.491 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57699/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-06 15:47:43.494 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:47:43.495 DEBUG [tests.light_push.test_publish] Running test with payload length of 143360 bytes
2025-02-06 15:47:43.497 DEBUG [src.steps.light_push] Lightpushing message
2025-02-06 15:47:43.498 INFO [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2025-02-06 15:47:43.525 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-06 15:47:43.526 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-06 15:47:43.626 DEBUG [src.steps.light_push] Checking that peer NODE_1:quay.io/wakuorg/nwaku-pr:3281 can find the lightpushed message
2025-02-06 15:47:43.627 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33198/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:47:43.632 INFO [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2025-02-06 15:47:43.635 DEBUG [src.steps.light_push] Checking that peer NODE_2:quay.io/wakuorg/nwaku-pr:3281 can find the lightpushed message
2025-02-06 15:47:43.635 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57699/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:47:43.640 INFO [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2025-02-06 15:47:43.644 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-06 15:47:43.645 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-06 15:47:43.645 DEBUG [src.node.waku_node] Stopping container with id 31f4b896cec9
2025-02-06 15:47:44.213 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 15:47:44.213 DEBUG [src.node.waku_node] Stopping container with id 9bdec1306dae
2025-02-06 15:47:45.027 ERROR [src.node.docker_mananger] Max retries reached for container 31f4b896cec9. Exiting log stream.
2025-02-06 15:47:45.769 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 15:47:45.769 DEBUG [src.node.waku_node] Stopping container with id 72965c71df17
2025-02-06 15:47:46.295 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 15:47:46.297 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-06 15:47:46.303 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 15:47:46.318 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 15:47:46.322 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
