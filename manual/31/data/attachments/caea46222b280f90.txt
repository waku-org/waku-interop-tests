2025-02-06 15:51:59.591 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-06 15:51:59.592 DEBUG [tests.conftest] Running test: test_cursor_equal_to_first_message with id: 2025-02-06_15-51-59__7ae835ed-3874-4b6f-b722-ecdd9ef1f21d
2025-02-06 15:51:59.592 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-06 15:51:59.592 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-06 15:51:59.592 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-06 15:51:59.599 DEBUG [src.node.docker_mananger] Docker client initialized with image quay.io/wakuorg/nwaku-pr:3281
2025-02-06 15:51:59.599 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-06_15-51-59__7ae835ed-3874-4b6f-b722-ecdd9ef1f21d__quay.io_wakuorg_nwaku-pr:3281.log
2025-02-06 15:51:59.599 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 15:51:59.599 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 15:51:59.600 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 15:51:59.601 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.220.4
2025-02-06 15:51:59.601 DEBUG [src.node.docker_mananger] Generated ports ['20373', '20374', '20375', '20376', '20377']
2025-02-06 15:51:59.601 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 15:51:59.601 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 15:51:59.601 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 15:51:59.601 DEBUG [src.node.docker_mananger] docker run -i -t -p 20373:20373 -p 20374:20374 -p 20375:20375 -p 20376:20376 -p 20377:20377 quay.io/wakuorg/nwaku-pr:3281 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20375 --rest-port=20373 --tcp-port=20374 --discv5-udp-port=20376 --rest-address=0.0.0.0 --nat=extip:172.18.220.4 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b8adc92720badbbeee43e5add402a8747b2d1d3cbd22fa5c4cbe30fbaaf751aa --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20377 --metrics-logging=true --store=true --relay=true
2025-02-06 15:51:59.834 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.220.4 waku 58ea06683772c0e67f55689d841351ba26f7fa9823705ff64d77f382aad58a5d
2025-02-06 15:51:59.881 ERROR [src.node.docker_mananger] Max retries reached for container 08313c8f60a0. Exiting log stream.
2025-02-06 15:51:59.885 DEBUG [src.node.docker_mananger] Container started with ID 58ea06683772. Setting up logs at ./log/docker/publishing_node1_2025-02-06_15-51-59__7ae835ed-3874-4b6f-b722-ecdd9ef1f21d__quay.io_wakuorg_nwaku-pr:3281.log
2025-02-06 15:51:59.886 DEBUG [src.node.waku_node] Started container from image quay.io/wakuorg/nwaku-pr:3281. REST: 20373
2025-02-06 15:51:59.886 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 15:52:00.397 ERROR [src.node.docker_mananger] Max retries reached for container fa6c58e91b26. Exiting log stream.
2025-02-06 15:52:00.886 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20373/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:52:00.889 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 15:52:00.889 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 15:52:00.889 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20373/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:52:00.891 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.220.4/tcp/20374/p2p/16Uiu2HAkxAEdVUgDxpnSbUWdkqLjzeS5ZhAWbJsYL7kVHbswH7H4","/ip4/172.18.220.4/tcp/20375/ws/p2p/16Uiu2HAkxAEdVUgDxpnSbUWdkqLjzeS5ZhAWbJsYL7kVHbswH7H4"],"enrUri":"enr:-L24QCByZ9aT6znlsgByAi_8tGJ7ay5AytF2iXguCwPaXr2qNU4O1DClOCueeKORqZAh1CkLmIWaptm8OePqKIUBiRoCgmlkgnY0gmlwhKwS3ASKbXVsdGlhZGRyc5YACASsEtwEBk-WAAoErBLcBAZPl90DgnJzhQADAQAAiXNlY3AyNTZrMaECKJ6vbg8sF_wgXeCz05o6hWpoN1HRE-e9APU5gx_TBhuDdGNwgk-Wg3VkcIJPmIV3YWt1MgM"}'
2025-02-06 15:52:00.892 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 15:52:00.898 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-06 15:52:00.898 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-06_15-51-59__7ae835ed-3874-4b6f-b722-ecdd9ef1f21d__wakuorg_go-waku:latest.log
2025-02-06 15:52:00.899 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 15:52:00.899 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 15:52:00.900 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 15:52:00.900 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.6.179
2025-02-06 15:52:00.900 DEBUG [src.node.docker_mananger] Generated ports ['13375', '13376', '13377', '13378', '13379']
2025-02-06 15:52:00.901 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 15:52:00.901 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 15:52:00.901 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 15:52:00.901 DEBUG [src.node.docker_mananger] docker run -i -t -p 13375:13375 -p 13376:13376 -p 13377:13377 -p 13378:13378 -p 13379:13379 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=13377 --rest-port=13375 --tcp-port=13376 --discv5-udp-port=13378 --rest-address=0.0.0.0 --nat=extip:172.18.6.179 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4d0a2854fc4fcd2f7fa29d6feb24689187d5f5ac7fbf9fda3fa7c354cad3aaed --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QCByZ9aT6znlsgByAi_8tGJ7ay5AytF2iXguCwPaXr2qNU4O1DClOCueeKORqZAh1CkLmIWaptm8OePqKIUBiRoCgmlkgnY0gmlwhKwS3ASKbXVsdGlhZGRyc5YACASsEtwEBk-WAAoErBLcBAZPl90DgnJzhQADAQAAiXNlY3AyNTZrMaECKJ6vbg8sF_wgXeCz05o6hWpoN1HRE-e9APU5gx_TBhuDdGNwgk-Wg3VkcIJPmIV3YWt1MgM --storenode=/ip4/172.18.220.4/tcp/20374/p2p/16Uiu2HAkxAEdVUgDxpnSbUWdkqLjzeS5ZhAWbJsYL7kVHbswH7H4 --store=true --relay=true
2025-02-06 15:52:01.142 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.6.179 waku efc2be86926b6575f3035601d8e4a60119121130175a8c2b0c3335d80b50ee2d
2025-02-06 15:52:01.197 DEBUG [src.node.docker_mananger] Container started with ID efc2be86926b. Setting up logs at ./log/docker/store_node1_2025-02-06_15-51-59__7ae835ed-3874-4b6f-b722-ecdd9ef1f21d__wakuorg_go-waku:latest.log
2025-02-06 15:52:01.199 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 13375
2025-02-06 15:52:01.199 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 15:52:02.200 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:13375/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:52:02.202 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QCC-T4CR63a8r7geVqTfmtmZXnVwhUFlPviph6lgS6kdc70V8-9-hQDbsnU48RDtRiOhuxLJmcR6TP3ej5EJ_XCGAZTb9gWrgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaEDQ25cakkRD6KQIbGGIjNzzg1CLnA0Ss-PD9SlC4OGDc-DdGNwgjRAg3VkcII0QoV3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/13376/p2p/16Uiu2HAmHCDGdDX5jYjrgYJ36oTzVoTWnKHYvY4eW4nBFbkeLpVt","/ip4/127.0.0.1/tcp/13377/ws/p2p/16Uiu2HAmHCDGdDX5jYjrgYJ36oTzVoTWnKHYvY4eW4nBFbkeLpVt","/ip4/172.17.0.3/tcp/13376/p2p/16Uiu2HAmHCDGdDX5jYjrgYJ36oTzVoTWnKHYvY4eW4nBFbkeLpVt","/ip4/172.17.0.3/tcp/13377/ws/p2p/16Uiu2HAmHCDGdDX5jYjrgYJ36oTzVoTWnKHYvY4eW4nBFbkeLpVt"]}'
2025-02-06 15:52:02.203 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 15:52:02.203 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:13375/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.220.4/tcp/20374/p2p/16Uiu2HAkxAEdVUgDxpnSbUWdkqLjzeS5ZhAWbJsYL7kVHbswH7H4", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-06 15:52:02.219 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-06 15:52:02.219 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20373/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-06 15:52:02.228 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:52:02.228 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:13375/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-06 15:52:02.230 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-06 15:52:02.232 DEBUG [src.steps.store] Relaying message
2025-02-06 15:52:02.233 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20373/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 15:52:02.246 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:52:02.246 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 15:52:02.447 DEBUG [src.steps.store] Relaying message
2025-02-06 15:52:02.447 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20373/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8x", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 15:52:02.453 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:52:02.453 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 15:52:02.654 DEBUG [src.steps.store] Relaying message
2025-02-06 15:52:02.654 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20373/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8y", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 15:52:02.661 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:52:02.662 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 15:52:02.863 DEBUG [src.steps.store] Relaying message
2025-02-06 15:52:02.863 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20373/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8z", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 15:52:02.869 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:52:02.869 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 15:52:03.070 DEBUG [src.steps.store] Relaying message
2025-02-06 15:52:03.070 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20373/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV80", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 15:52:03.076 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:52:03.076 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 15:52:03.277 DEBUG [src.steps.store] Relaying message
2025-02-06 15:52:03.278 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20373/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV81", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 15:52:03.283 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:52:03.283 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 15:52:03.484 DEBUG [src.steps.store] Relaying message
2025-02-06 15:52:03.484 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20373/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV82", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 15:52:03.489 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:52:03.489 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 15:52:03.690 DEBUG [src.steps.store] Relaying message
2025-02-06 15:52:03.691 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20373/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV83", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 15:52:03.696 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:52:03.696 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 15:52:03.897 DEBUG [src.steps.store] Relaying message
2025-02-06 15:52:03.897 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20373/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV84", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 15:52:03.903 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:52:03.903 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 15:52:04.104 DEBUG [src.steps.store] Relaying message
2025-02-06 15:52:04.104 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20373/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV85", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 15:52:04.110 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:52:04.110 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 15:52:04.311 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20373/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&cursor=0x38630b55d4e6387f76792933fde6d48d08b0466f0897ddfded6c6d97de94df3c&pageSize=100&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:52:04.314 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x7389d7eabe3e68c9624625b873fd973f3b384178c8d5c6d7c898b41a429dc941"},{"messageHash":"0x439cd754ff92e9805606c2f2f087f426c563b42a4b35744639cb66e5df507f34"},{"messageHash":"0x01e7ef7d13c96ae41ab163aab4ecfaa614ab245f2cd566b64563e52773a3e1c4"},{"messageHash":"0x112333ddb0a3bb1c4dfea146f656d7b138e1e50439bf0b8b03b7cb00ec476f33"},{"messageHash":"0x573d34bdbdfa5aeb8a0848c5dc1b6ab36f6834d09b950b28bfa1dabe377d154e"},{"messageHash":"0x98d29abc8e99f186ba02c58900a0159441c81cf7c0372c2bfe77008525d0a9dc"},{"messageHash":"0xacde91ed47ad9bfe7377dd30c0ebabc38269730a54732411160f84d52b26e62c"},{"messageHash":"0x652b6283d8fb82b82547e0294e45c6e77e94b487d6f029827e9e5cd638ccfca2"},{"messageHash":"0xcb75435f02e03636bb53fdae2b9d1000460dc8d3e432ca7bce4a2ef7fd3d4e7e"}]}'
2025-02-06 15:52:04.315 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:13375/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&cursor=OGMLVdTmOH92eSkz%2FebUjQiwRm8Il9397Wxtl96U3zw%3D&pageSize=100&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:52:04.316 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:13375/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&cursor=OGMLVdTmOH92eSkz%2FebUjQiwRm8Il9397Wxtl96U3zw%3D&pageSize=100&ascending=true. Response content: b'{"status_code":400,"status_desc":"illegal base64 data at input byte 16"}'
2025-02-06 15:52:04.380 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-06 15:52:04.381 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-06 15:52:04.381 DEBUG [src.node.waku_node] Stopping container with id 58ea06683772
2025-02-06 15:52:05.448 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 15:52:05.448 DEBUG [src.node.waku_node] Stopping container with id efc2be86926b
2025-02-06 15:52:05.942 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 15:52:05.943 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-06 15:52:05.951 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 15:52:05.954 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
