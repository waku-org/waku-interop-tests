2025-02-06 15:49:07.069 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-06 15:49:07.070 DEBUG [tests.conftest] Running test: test_metadata_protocol_mounted_also_on_non_1_clusters with id: 2025-02-06_15-49-07__45854dc8-80d9-48b9-ab9c-747da0724c0f
2025-02-06 15:49:07.070 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-06 15:49:07.070 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-06 15:49:07.070 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2025-02-06 15:49:07.077 DEBUG [src.node.docker_mananger] Docker client initialized with image quay.io/wakuorg/nwaku-pr:3281
2025-02-06 15:49:07.077 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-06_15-49-07__45854dc8-80d9-48b9-ab9c-747da0724c0f__quay.io_wakuorg_nwaku-pr:3281.log
2025-02-06 15:49:07.077 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 15:49:07.077 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 15:49:07.079 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 15:49:07.079 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.72.241
2025-02-06 15:49:07.079 DEBUG [src.node.docker_mananger] Generated ports ['4000', '4001', '4002', '4003', '4004']
2025-02-06 15:49:07.079 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 15:49:07.079 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 15:49:07.080 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 15:49:07.080 DEBUG [src.node.docker_mananger] docker run -i -t -p 4000:4000 -p 4001:4001 -p 4002:4002 -p 4003:4003 -p 4004:4004 quay.io/wakuorg/nwaku-pr:3281 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4002 --rest-port=4000 --tcp-port=4001 --discv5-udp-port=4003 --rest-address=0.0.0.0 --nat=extip:172.18.72.241 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=de6dca1d7203b7fc9bdf0811e26d21de60d0edbabbcda4b126dca3d6c4ae5a5b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4004 --metrics-logging=true --relay=true
2025-02-06 15:49:07.330 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.72.241 waku ea21dddb3edee392afc1b166b2594c0b576c3069be3aab0ed32f5291dc63032c
2025-02-06 15:49:07.393 DEBUG [src.node.docker_mananger] Container started with ID ea21dddb3ede. Setting up logs at ./log/docker/node1_2025-02-06_15-49-07__45854dc8-80d9-48b9-ab9c-747da0724c0f__quay.io_wakuorg_nwaku-pr:3281.log
2025-02-06 15:49:07.394 DEBUG [src.node.waku_node] Started container from image quay.io/wakuorg/nwaku-pr:3281. REST: 4000
2025-02-06 15:49:07.395 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 15:49:07.870 ERROR [src.node.docker_mananger] Max retries reached for container 4490a2be5c37. Exiting log stream.
2025-02-06 15:49:08.395 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4000/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:49:08.398 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 15:49:08.398 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 15:49:08.398 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4000/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:49:08.400 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.72.241/tcp/4001/p2p/16Uiu2HAmEMv7U3jLMp2tkeueGqovmxDXBmvsGsvqvWGNNwJv1gpu","/ip4/172.18.72.241/tcp/4002/ws/p2p/16Uiu2HAmEMv7U3jLMp2tkeueGqovmxDXBmvsGsvqvWGNNwJv1gpu"],"enrUri":"enr:-L24QD2evSywLtBdaoYtgQC7wHquKa6nHDEsua-5b9h7opvdU0KTN_PhSyeiCbMRurtQz_Jfp5OMRyb0J2fuNNHb8iYCgmlkgnY0gmlwhKwSSPGKbXVsdGlhZGRyc5YACASsEkjxBg-hAAoErBJI8QYPot0DgnJzhQADAQAAiXNlY3AyNTZrMaEDGVe1MyCq1I_9Wl0e-Cq9Xnvx9BF4af-j6vI9dCOw1EaDdGNwgg-hg3VkcIIPo4V3YWt1MgE"}'
2025-02-06 15:49:08.401 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 15:49:08.407 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-06 15:49:08.407 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-06_15-49-07__45854dc8-80d9-48b9-ab9c-747da0724c0f__wakuorg_go-waku:latest.log
2025-02-06 15:49:08.407 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 15:49:08.407 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 15:49:08.409 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 15:49:08.409 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.46.113
2025-02-06 15:49:08.409 DEBUG [src.node.docker_mananger] Generated ports ['51648', '51649', '51650', '51651', '51652']
2025-02-06 15:49:08.409 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 15:49:08.409 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 15:49:08.409 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 15:49:08.410 DEBUG [src.node.docker_mananger] docker run -i -t -p 51648:51648 -p 51649:51649 -p 51650:51650 -p 51651:51651 -p 51652:51652 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=51650 --rest-port=51648 --tcp-port=51649 --discv5-udp-port=51651 --rest-address=0.0.0.0 --nat=extip:172.18.46.113 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=61ce2b4ada3c5403d7a8e67ab58340637e85bbdb26c1e43fb89133e32b0da3da --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --discv5-bootstrap-node=enr:-L24QD2evSywLtBdaoYtgQC7wHquKa6nHDEsua-5b9h7opvdU0KTN_PhSyeiCbMRurtQz_Jfp5OMRyb0J2fuNNHb8iYCgmlkgnY0gmlwhKwSSPGKbXVsdGlhZGRyc5YACASsEkjxBg-hAAoErBJI8QYPot0DgnJzhQADAQAAiXNlY3AyNTZrMaEDGVe1MyCq1I_9Wl0e-Cq9Xnvx9BF4af-j6vI9dCOw1EaDdGNwgg-hg3VkcIIPo4V3YWt1MgE
2025-02-06 15:49:08.636 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.46.113 waku b971f9e1330dc0b72234ce355aff8099c2a3c367b9b241257eced49529efff7f
2025-02-06 15:49:08.692 DEBUG [src.node.docker_mananger] Container started with ID b971f9e1330d. Setting up logs at ./log/docker/node2_2025-02-06_15-49-07__45854dc8-80d9-48b9-ab9c-747da0724c0f__wakuorg_go-waku:latest.log
2025-02-06 15:49:08.692 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 51648
2025-02-06 15:49:08.693 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 15:49:09.694 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51648/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:49:09.697 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QCwTlsIkN6JdNq79tYBCqjnfocoJIc7BnT0KMgoUNSnWGI-foC4ixERh_DD0fSYqY_7ayj7rJzloOFvjcVR_KemGAZTb82PLgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaECjL7CTYEwKL4cxEEGpmZvRZETtVk6rHTdfg31kNO4PWmDdGNwgsnBg3VkcILJw4V3YWt1MgE","listenAddresses":["/ip4/127.0.0.1/tcp/51649/p2p/16Uiu2HAm4u5mNmuGeqnBAcaqMB8bJX8N2ucfhe12apPjaiifRz4x","/ip4/127.0.0.1/tcp/51650/ws/p2p/16Uiu2HAm4u5mNmuGeqnBAcaqMB8bJX8N2ucfhe12apPjaiifRz4x","/ip4/172.17.0.3/tcp/51649/p2p/16Uiu2HAm4u5mNmuGeqnBAcaqMB8bJX8N2ucfhe12apPjaiifRz4x","/ip4/172.17.0.3/tcp/51650/ws/p2p/16Uiu2HAm4u5mNmuGeqnBAcaqMB8bJX8N2ucfhe12apPjaiifRz4x"]}'
2025-02-06 15:49:09.697 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 15:49:09.698 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:51648/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.72.241/tcp/4001/p2p/16Uiu2HAmEMv7U3jLMp2tkeueGqovmxDXBmvsGsvqvWGNNwJv1gpu", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-06 15:49:09.714 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-06 15:49:09.718 DEBUG [src.node.docker_mananger] Found matches for keyword 'Created WakuMetadata protocol': ['INF 2025-02-06 15:49:07.341+00:00 Created WakuMetadata protocol              topics="waku node" tid=1 file=protocol.nim:120 clusterId=3 shards={0}']
2025-02-06 15:49:09.720 DEBUG [src.node.docker_mananger] Found matches for keyword 'metadata protocol started': ['2025-02-06T15:49:08.695Z\t\x1b[34mINFO\x1b[0m\tgowaku.node2.metadata\tmetadata/waku_metadata.go:75\tmetadata protocol started\t{"node": "16Uiu2HAm4u5mNmuGeqnBAcaqMB8bJX8N2ucfhe12apPjaiifRz4x"}']
2025-02-06 15:49:09.724 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-06 15:49:09.727 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-06 15:49:09.727 DEBUG [src.node.waku_node] Stopping container with id ea21dddb3ede
2025-02-06 15:49:10.291 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 15:49:10.291 DEBUG [src.node.waku_node] Stopping container with id b971f9e1330d
2025-02-06 15:49:11.105 ERROR [src.node.docker_mananger] Max retries reached for container ea21dddb3ede. Exiting log stream.
2025-02-06 15:49:11.176 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 15:49:11.177 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-06 15:49:11.181 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 15:49:11.184 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
