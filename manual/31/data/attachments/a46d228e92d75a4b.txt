2025-02-06 15:47:28.745 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-06 15:47:28.746 DEBUG [tests.conftest] Running test: test_filter_update_subscription_with_extra_field with id: 2025-02-06_15-47-28__b449649f-fd50-48e2-9dc5-761943d40af1
2025-02-06 15:47:28.746 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-06 15:47:28.746 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-06 15:47:28.746 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-06 15:47:28.753 DEBUG [src.node.docker_mananger] Docker client initialized with image quay.io/wakuorg/nwaku-pr:3281
2025-02-06 15:47:28.753 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-06_15-47-28__b449649f-fd50-48e2-9dc5-761943d40af1__quay.io_wakuorg_nwaku-pr:3281.log
2025-02-06 15:47:28.753 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 15:47:28.754 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 15:47:28.755 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 15:47:28.755 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.216.22
2025-02-06 15:47:28.755 DEBUG [src.node.docker_mananger] Generated ports ['33869', '33870', '33871', '33872', '33873']
2025-02-06 15:47:28.756 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 15:47:28.756 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 15:47:28.756 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 15:47:28.756 DEBUG [src.node.docker_mananger] docker run -i -t -p 33869:33869 -p 33870:33870 -p 33871:33871 -p 33872:33872 -p 33873:33873 quay.io/wakuorg/nwaku-pr:3281 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=33871 --rest-port=33869 --tcp-port=33870 --discv5-udp-port=33872 --rest-address=0.0.0.0 --nat=extip:172.18.216.22 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a631723daa2820de3abd0f9af9e7b5ffad7eefcdee3b8fefaffe1ac32e8fa0cf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=33873 --metrics-logging=true --relay=true --filter=true
2025-02-06 15:47:28.988 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.216.22 waku daf87cf1dc085592e2c4f2d248bde3f8412480de0398760a39b4cdeea0223c5c
2025-02-06 15:47:29.004 ERROR [src.node.docker_mananger] Max retries reached for container 55b6aaf8da5c. Exiting log stream.
2025-02-06 15:47:29.041 DEBUG [src.node.docker_mananger] Container started with ID daf87cf1dc08. Setting up logs at ./log/docker/node1_2025-02-06_15-47-28__b449649f-fd50-48e2-9dc5-761943d40af1__quay.io_wakuorg_nwaku-pr:3281.log
2025-02-06 15:47:29.041 DEBUG [src.node.waku_node] Started container from image quay.io/wakuorg/nwaku-pr:3281. REST: 33869
2025-02-06 15:47:29.042 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 15:47:29.519 ERROR [src.node.docker_mananger] Max retries reached for container 286a7defbb90. Exiting log stream.
2025-02-06 15:47:30.043 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33869/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:47:30.046 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 15:47:30.046 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 15:47:30.047 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33869/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:47:30.049 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.216.22/tcp/33870/p2p/16Uiu2HAm5zNmAeNJPcrJVABLPughimcqRpWkGJkLWNK13PnuWqXr","/ip4/172.18.216.22/tcp/33871/ws/p2p/16Uiu2HAm5zNmAeNJPcrJVABLPughimcqRpWkGJkLWNK13PnuWqXr"],"enrUri":"enr:-L24QLFQoRvG8Vht50MtiJD7QyKEJ1RNw0Ww9kCIiTINrTkgFRofJpRkiinbGPyJuXBKHaBVCX4HIGSi8zWEO2_j6uECgmlkgnY0gmlwhKwS2BaKbXVsdGlhZGRyc5YACASsEtgWBoROAAoErBLYFgaET90DgnJzhQADAQAAiXNlY3AyNTZrMaECnPWRXq-1bjdDzYPdoUEgCpFJIwmpN5Mxnz5_HTy2ZyWDdGNwgoROg3VkcIKEUIV3YWt1MgU"}'
2025-02-06 15:47:30.049 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 15:47:30.049 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-06 15:47:30.058 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-06 15:47:30.059 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-06_15-47-28__b449649f-fd50-48e2-9dc5-761943d40af1__wakuorg_go-waku:latest.log
2025-02-06 15:47:30.059 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 15:47:30.059 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 15:47:30.060 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 15:47:30.061 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.118.15
2025-02-06 15:47:30.061 DEBUG [src.node.docker_mananger] Generated ports ['17437', '17438', '17439', '17440', '17441']
2025-02-06 15:47:30.061 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 15:47:30.061 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 15:47:30.061 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 15:47:30.061 DEBUG [src.node.docker_mananger] docker run -i -t -p 17437:17437 -p 17438:17438 -p 17439:17439 -p 17440:17440 -p 17441:17441 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=17439 --rest-port=17437 --tcp-port=17438 --discv5-udp-port=17440 --rest-address=0.0.0.0 --nat=extip:172.18.118.15 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=98fad7fe0beadbc23c3b147fdaea2aaaef3bffc44d6cb6f9d5a1f7aeeca37b45 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-L24QLFQoRvG8Vht50MtiJD7QyKEJ1RNw0Ww9kCIiTINrTkgFRofJpRkiinbGPyJuXBKHaBVCX4HIGSi8zWEO2_j6uECgmlkgnY0gmlwhKwS2BaKbXVsdGlhZGRyc5YACASsEtgWBoROAAoErBLYFgaET90DgnJzhQADAQAAiXNlY3AyNTZrMaECnPWRXq-1bjdDzYPdoUEgCpFJIwmpN5Mxnz5_HTy2ZyWDdGNwgoROg3VkcIKEUIV3YWt1MgU --filternode=/ip4/172.18.216.22/tcp/33870/p2p/16Uiu2HAm5zNmAeNJPcrJVABLPughimcqRpWkGJkLWNK13PnuWqXr --pubsub-topic=/waku/2/rs/3/1
2025-02-06 15:47:30.291 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.118.15 waku 09c91cd3eeb97c91600f05f59d49445edbf8935303101181dfef5a5df830a904
2025-02-06 15:47:30.343 DEBUG [src.node.docker_mananger] Container started with ID 09c91cd3eeb9. Setting up logs at ./log/docker/node2_2025-02-06_15-47-28__b449649f-fd50-48e2-9dc5-761943d40af1__wakuorg_go-waku:latest.log
2025-02-06 15:47:30.344 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 17437
2025-02-06 15:47:30.345 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 15:47:31.345 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17437/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:47:31.347 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QL1CbxDtOVKVBU3JrzDH7jIlBAK0fjpyeQUDHBVZKkOjH_Lwhv1L3ozGqVEROklOIBZTLjaboXX_EVV5avs1FDqGAZTb8eOigmlkgnY0gmlwhKwRAAOCcnOFAAMBAAGJc2VjcDI1NmsxoQJ-KkgtjH705PMeFyLNwVHMgzaVMURc5fVVcRsMDFId_IN0Y3CCRB6DdWRwgkQghXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/17438/p2p/16Uiu2HAm3vAk82iAhaWmsAEJ5wqKBpgfxMcxm1pxrFzqe43oQkm1","/ip4/127.0.0.1/tcp/17439/ws/p2p/16Uiu2HAm3vAk82iAhaWmsAEJ5wqKBpgfxMcxm1pxrFzqe43oQkm1","/ip4/172.17.0.3/tcp/17438/p2p/16Uiu2HAm3vAk82iAhaWmsAEJ5wqKBpgfxMcxm1pxrFzqe43oQkm1","/ip4/172.17.0.3/tcp/17439/ws/p2p/16Uiu2HAm3vAk82iAhaWmsAEJ5wqKBpgfxMcxm1pxrFzqe43oQkm1"]}'
2025-02-06 15:47:31.348 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 15:47:31.348 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17437/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.216.22/tcp/33870/p2p/16Uiu2HAm5zNmAeNJPcrJVABLPughimcqRpWkGJkLWNK13PnuWqXr", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-06 15:47:31.350 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-06 15:47:31.351 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-06 15:47:31.351 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33869/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-06 15:47:31.354 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:47:31.354 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17437/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1eb8fc77-4e63-488d-91c8-c850cecfb73a", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-06 15:47:31.359 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"1eb8fc77-4e63-488d-91c8-c850cecfb73a","statusDesc":"OK"}'
2025-02-06 15:47:31.363 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-06 15:47:31.364 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-06 15:47:31.364 DEBUG [src.node.waku_node] Stopping container with id daf87cf1dc08
2025-02-06 15:47:31.971 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 15:47:31.971 DEBUG [src.node.waku_node] Stopping container with id 09c91cd3eeb9
2025-02-06 15:47:32.784 ERROR [src.node.docker_mananger] Max retries reached for container daf87cf1dc08. Exiting log stream.
2025-02-06 15:47:32.847 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 15:47:32.848 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-06 15:47:32.851 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 15:47:32.855 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
