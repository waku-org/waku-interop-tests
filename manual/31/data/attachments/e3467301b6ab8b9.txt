2025-02-06 15:47:36.036 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-06 15:47:36.036 DEBUG [tests.conftest] Running test: test_filter_update_subscription_with_no_request_id with id: 2025-02-06_15-47-36__0b2e9555-4bce-42ae-97ab-873fb97641e0
2025-02-06 15:47:36.037 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-06 15:47:36.037 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-06 15:47:36.037 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-06 15:47:36.043 DEBUG [src.node.docker_mananger] Docker client initialized with image quay.io/wakuorg/nwaku-pr:3281
2025-02-06 15:47:36.043 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-06_15-47-36__0b2e9555-4bce-42ae-97ab-873fb97641e0__quay.io_wakuorg_nwaku-pr:3281.log
2025-02-06 15:47:36.043 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 15:47:36.043 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 15:47:36.044 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 15:47:36.045 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.185.158
2025-02-06 15:47:36.045 DEBUG [src.node.docker_mananger] Generated ports ['24821', '24822', '24823', '24824', '24825']
2025-02-06 15:47:36.045 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 15:47:36.045 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 15:47:36.045 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 15:47:36.045 DEBUG [src.node.docker_mananger] docker run -i -t -p 24821:24821 -p 24822:24822 -p 24823:24823 -p 24824:24824 -p 24825:24825 quay.io/wakuorg/nwaku-pr:3281 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=24823 --rest-port=24821 --tcp-port=24822 --discv5-udp-port=24824 --rest-address=0.0.0.0 --nat=extip:172.18.185.158 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9ac50d9a113017f3fc9dc8cd650a0e2638aa9050d3bedf4aa96618d620d19f52 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=24825 --metrics-logging=true --relay=true --filter=true
2025-02-06 15:47:36.271 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.185.158 waku 0a2e94493ef431b82d2ea59bf3e6bac2b1361171a149afd782feedeab78d0a4c
2025-02-06 15:47:36.321 DEBUG [src.node.docker_mananger] Container started with ID 0a2e94493ef4. Setting up logs at ./log/docker/node1_2025-02-06_15-47-36__0b2e9555-4bce-42ae-97ab-873fb97641e0__quay.io_wakuorg_nwaku-pr:3281.log
2025-02-06 15:47:36.322 DEBUG [src.node.waku_node] Started container from image quay.io/wakuorg/nwaku-pr:3281. REST: 24821
2025-02-06 15:47:36.323 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 15:47:36.841 ERROR [src.node.docker_mananger] Max retries reached for container db18caeb8814. Exiting log stream.
2025-02-06 15:47:37.323 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:24821/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:47:37.326 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 15:47:37.326 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 15:47:37.326 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:24821/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:47:37.329 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.185.158/tcp/24822/p2p/16Uiu2HAm965nUXrrqbyD8QmErfe4nuG1oHP572eHvVGhrYk4pRhz","/ip4/172.18.185.158/tcp/24823/ws/p2p/16Uiu2HAm965nUXrrqbyD8QmErfe4nuG1oHP572eHvVGhrYk4pRhz"],"enrUri":"enr:-L24QAXs5rGxneARsLNDuZi2ee6zAXD9rpVBEj2vMZNgJeEtPvdFejCUVPi-NaRe7t4eafB3mawJA8NWxTBKhXqWGDsCgmlkgnY0gmlwhKwSuZ6KbXVsdGlhZGRyc5YACASsErmeBmD2AAoErBK5ngZg990DgnJzhQADAQAAiXNlY3AyNTZrMaECyv7qwoRPjUZa8MrJws3hRPfvReUK00gHqCTbS_UQZVGDdGNwgmD2g3VkcIJg-IV3YWt1MgU"}'
2025-02-06 15:47:37.329 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 15:47:37.329 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-06 15:47:37.335 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-06 15:47:37.335 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-06_15-47-36__0b2e9555-4bce-42ae-97ab-873fb97641e0__wakuorg_go-waku:latest.log
2025-02-06 15:47:37.335 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 15:47:37.336 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 15:47:37.337 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 15:47:37.337 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.212.164
2025-02-06 15:47:37.337 DEBUG [src.node.docker_mananger] Generated ports ['49875', '49876', '49877', '49878', '49879']
2025-02-06 15:47:37.337 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 15:47:37.337 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 15:47:37.337 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 15:47:37.338 DEBUG [src.node.docker_mananger] docker run -i -t -p 49875:49875 -p 49876:49876 -p 49877:49877 -p 49878:49878 -p 49879:49879 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=49877 --rest-port=49875 --tcp-port=49876 --discv5-udp-port=49878 --rest-address=0.0.0.0 --nat=extip:172.18.212.164 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ecb15d6b24fead40efcf1113036ad126f1d2f2e520d0893a0a5e278cd747c6be --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-L24QAXs5rGxneARsLNDuZi2ee6zAXD9rpVBEj2vMZNgJeEtPvdFejCUVPi-NaRe7t4eafB3mawJA8NWxTBKhXqWGDsCgmlkgnY0gmlwhKwSuZ6KbXVsdGlhZGRyc5YACASsErmeBmD2AAoErBK5ngZg990DgnJzhQADAQAAiXNlY3AyNTZrMaECyv7qwoRPjUZa8MrJws3hRPfvReUK00gHqCTbS_UQZVGDdGNwgmD2g3VkcIJg-IV3YWt1MgU --filternode=/ip4/172.18.185.158/tcp/24822/p2p/16Uiu2HAm965nUXrrqbyD8QmErfe4nuG1oHP572eHvVGhrYk4pRhz --pubsub-topic=/waku/2/rs/3/1
2025-02-06 15:47:37.560 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.212.164 waku 341e3c8153b97a01b6cf88fa7d951f4404e0fd379005e3c22cb4aa32f1519080
2025-02-06 15:47:37.617 DEBUG [src.node.docker_mananger] Container started with ID 341e3c8153b9. Setting up logs at ./log/docker/node2_2025-02-06_15-47-36__0b2e9555-4bce-42ae-97ab-873fb97641e0__wakuorg_go-waku:latest.log
2025-02-06 15:47:37.619 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 49875
2025-02-06 15:47:37.619 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 15:47:38.619 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49875/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:47:38.622 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QAcW3fFX-B0HZTzTmy0s2MLH9yn8171RB1fYHn297-drIdeg1xgioRJQ4J2HJYYTJHB9gUupdxDB3jgi2mO2ivKGAZTb8gAFgmlkgnY0gmlwhKwRAAOCcnOFAAMBAAGJc2VjcDI1NmsxoQP3f5mORl2ceyuYUFnT5Pr11knrkNICwEljZonkd5seEoN0Y3CCwtSDdWRwgsLWhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/49876/p2p/16Uiu2HAmVK7uGGwnu8Ww34iBRQcyBgFEaf8HRUoV3DMuAcSLtW5F","/ip4/127.0.0.1/tcp/49877/ws/p2p/16Uiu2HAmVK7uGGwnu8Ww34iBRQcyBgFEaf8HRUoV3DMuAcSLtW5F","/ip4/172.17.0.3/tcp/49876/p2p/16Uiu2HAmVK7uGGwnu8Ww34iBRQcyBgFEaf8HRUoV3DMuAcSLtW5F","/ip4/172.17.0.3/tcp/49877/ws/p2p/16Uiu2HAmVK7uGGwnu8Ww34iBRQcyBgFEaf8HRUoV3DMuAcSLtW5F"]}'
2025-02-06 15:47:38.622 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 15:47:38.622 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49875/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.185.158/tcp/24822/p2p/16Uiu2HAm965nUXrrqbyD8QmErfe4nuG1oHP572eHvVGhrYk4pRhz", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-06 15:47:38.624 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-06 15:47:38.625 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-06 15:47:38.625 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24821/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-06 15:47:38.628 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:47:38.629 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49875/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "d6873dd0-4adc-4b5d-9295-8f108413a2e3", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-06 15:47:38.634 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"d6873dd0-4adc-4b5d-9295-8f108413a2e3","statusDesc":"OK"}'
2025-02-06 15:47:38.638 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-06 15:47:38.639 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-06 15:47:38.639 DEBUG [src.node.waku_node] Stopping container with id 0a2e94493ef4
2025-02-06 15:47:39.240 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 15:47:39.240 DEBUG [src.node.waku_node] Stopping container with id 341e3c8153b9
2025-02-06 15:47:40.068 ERROR [src.node.docker_mananger] Max retries reached for container 0a2e94493ef4. Exiting log stream.
2025-02-06 15:47:40.117 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 15:47:40.119 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-06 15:47:40.126 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 15:47:40.129 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
