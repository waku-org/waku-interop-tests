2025-02-06 15:47:31.968 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-06 15:47:31.969 DEBUG [tests.conftest] Running test: test_filter_update_subscription_add_a_new_pubsub_topic with id: 2025-02-06_15-47-31__6a477380-a3bf-4bf3-af6c-aec6a08d950d
2025-02-06 15:47:31.969 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-06 15:47:31.970 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-06 15:47:31.970 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-06 15:47:31.978 DEBUG [src.node.docker_mananger] Docker client initialized with image quay.io/wakuorg/nwaku-pr:3281
2025-02-06 15:47:31.978 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-06_15-47-31__6a477380-a3bf-4bf3-af6c-aec6a08d950d__quay.io_wakuorg_nwaku-pr:3281.log
2025-02-06 15:47:31.978 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 15:47:31.978 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 15:47:31.979 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 15:47:31.980 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.44.118
2025-02-06 15:47:31.980 DEBUG [src.node.docker_mananger] Generated ports ['23018', '23019', '23020', '23021', '23022']
2025-02-06 15:47:31.980 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 15:47:31.980 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 15:47:31.980 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 15:47:31.980 DEBUG [src.node.docker_mananger] docker run -i -t -p 23018:23018 -p 23019:23019 -p 23020:23020 -p 23021:23021 -p 23022:23022 quay.io/wakuorg/nwaku-pr:3281 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23020 --rest-port=23018 --tcp-port=23019 --discv5-udp-port=23021 --rest-address=0.0.0.0 --nat=extip:172.18.44.118 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6852ba012dcec4fc90bceade2ee32aecf2fadbffde278ab2e528a29adbae8cd8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23022 --metrics-logging=true --relay=true --filter=true
2025-02-06 15:47:32.212 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.44.118 waku 61c0b125773c144954538eec9e5826bf8fcd8acc6609a99d567dec00bf3c172a
2025-02-06 15:47:32.250 ERROR [src.node.docker_mananger] Max retries reached for container 5aa9abc8616c. Exiting log stream.
2025-02-06 15:47:32.263 DEBUG [src.node.docker_mananger] Container started with ID 61c0b125773c. Setting up logs at ./log/docker/node1_2025-02-06_15-47-31__6a477380-a3bf-4bf3-af6c-aec6a08d950d__quay.io_wakuorg_nwaku-pr:3281.log
2025-02-06 15:47:32.263 DEBUG [src.node.waku_node] Started container from image quay.io/wakuorg/nwaku-pr:3281. REST: 23018
2025-02-06 15:47:32.264 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 15:47:32.785 ERROR [src.node.docker_mananger] Max retries reached for container 6b5beaae9c84. Exiting log stream.
2025-02-06 15:47:33.265 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23018/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:47:33.268 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 15:47:33.268 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 15:47:33.268 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23018/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:47:33.270 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.44.118/tcp/23019/p2p/16Uiu2HAmQ1c5Qxcwc5hhEyzLjE7pp5ynw8FDnDNmrS3zk62uT7oj","/ip4/172.18.44.118/tcp/23020/ws/p2p/16Uiu2HAmQ1c5Qxcwc5hhEyzLjE7pp5ynw8FDnDNmrS3zk62uT7oj"],"enrUri":"enr:-L24QIYdqF9FCV0h-ddNw3E3LBS-GP10UDuRHuO9IX96v-OTe0qjbgx8uLJ2X-y69KM37aZsHL97e0HBBH1-XkgWfdECgmlkgnY0gmlwhKwSLHaKbXVsdGlhZGRyc5YACASsEix2BlnrAAoErBIsdgZZ7N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDqLiRdZtDD5RZjsimAJOP5xo-NxfUyQeGGzOQX7vEWh6DdGNwglnrg3VkcIJZ7YV3YWt1MgU"}'
2025-02-06 15:47:33.271 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 15:47:33.271 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-06 15:47:33.277 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-06 15:47:33.277 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-06_15-47-31__6a477380-a3bf-4bf3-af6c-aec6a08d950d__wakuorg_go-waku:latest.log
2025-02-06 15:47:33.278 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 15:47:33.278 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 15:47:33.279 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 15:47:33.279 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.47.171
2025-02-06 15:47:33.280 DEBUG [src.node.docker_mananger] Generated ports ['8894', '8895', '8896', '8897', '8898']
2025-02-06 15:47:33.280 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 15:47:33.280 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 15:47:33.280 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 15:47:33.280 DEBUG [src.node.docker_mananger] docker run -i -t -p 8894:8894 -p 8895:8895 -p 8896:8896 -p 8897:8897 -p 8898:8898 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=8896 --rest-port=8894 --tcp-port=8895 --discv5-udp-port=8897 --rest-address=0.0.0.0 --nat=extip:172.18.47.171 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4fce22d3b9cdf50a069ce6dddae3b3ef4cfbed56b2b63e1a636babce8adc2a4b --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-L24QIYdqF9FCV0h-ddNw3E3LBS-GP10UDuRHuO9IX96v-OTe0qjbgx8uLJ2X-y69KM37aZsHL97e0HBBH1-XkgWfdECgmlkgnY0gmlwhKwSLHaKbXVsdGlhZGRyc5YACASsEix2BlnrAAoErBIsdgZZ7N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDqLiRdZtDD5RZjsimAJOP5xo-NxfUyQeGGzOQX7vEWh6DdGNwglnrg3VkcIJZ7YV3YWt1MgU --filternode=/ip4/172.18.44.118/tcp/23019/p2p/16Uiu2HAmQ1c5Qxcwc5hhEyzLjE7pp5ynw8FDnDNmrS3zk62uT7oj --pubsub-topic=/waku/2/rs/3/1
2025-02-06 15:47:33.503 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.47.171 waku db18caeb88142672faae918c39205a3a9f8c1669d555028629da744ce6cb8da8
2025-02-06 15:47:33.553 DEBUG [src.node.docker_mananger] Container started with ID db18caeb8814. Setting up logs at ./log/docker/node2_2025-02-06_15-47-31__6a477380-a3bf-4bf3-af6c-aec6a08d950d__wakuorg_go-waku:latest.log
2025-02-06 15:47:33.554 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 8894
2025-02-06 15:47:33.554 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 15:47:34.555 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:8894/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 15:47:34.558 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QJzY-B2EahfNOVjCBVgVg4SKmuP6iSCEbtsTiuzHzPaOSe3ZRD57YMdOoZLUavx4dIvyFRXyTZjAQ9Nzx0apgICGAZTb8fAtgmlkgnY0gmlwhKwRAAOCcnOFAAMBAAGJc2VjcDI1NmsxoQMg4r5wwaQWKD-ACMkaxRLBxd7M9KrlwoUGu4gSxjLMCIN0Y3CCIr-DdWRwgiLBhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/8895/p2p/16Uiu2HAmEsMvvBQ1LYnu5VZhmHNvx5JxepcQks4yAxKzz3gUvy91","/ip4/127.0.0.1/tcp/8896/ws/p2p/16Uiu2HAmEsMvvBQ1LYnu5VZhmHNvx5JxepcQks4yAxKzz3gUvy91","/ip4/172.17.0.3/tcp/8895/p2p/16Uiu2HAmEsMvvBQ1LYnu5VZhmHNvx5JxepcQks4yAxKzz3gUvy91","/ip4/172.17.0.3/tcp/8896/ws/p2p/16Uiu2HAmEsMvvBQ1LYnu5VZhmHNvx5JxepcQks4yAxKzz3gUvy91"]}'
2025-02-06 15:47:34.558 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 15:47:34.559 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:8894/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.44.118/tcp/23019/p2p/16Uiu2HAmQ1c5Qxcwc5hhEyzLjE7pp5ynw8FDnDNmrS3zk62uT7oj", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-06 15:47:34.561 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-06 15:47:34.562 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23018/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-06 15:47:34.565 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 15:47:34.565 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:8894/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "3ae721dc-cc3a-4325-bce4-8e8b4d7c03b4", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-06 15:47:34.571 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"3ae721dc-cc3a-4325-bce4-8e8b4d7c03b4","statusDesc":"OK"}'
2025-02-06 15:47:34.574 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-06 15:47:34.575 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-06 15:47:34.575 DEBUG [src.node.waku_node] Stopping container with id 61c0b125773c
2025-02-06 15:47:35.178 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 15:47:35.178 DEBUG [src.node.waku_node] Stopping container with id db18caeb8814
2025-02-06 15:47:35.992 ERROR [src.node.docker_mananger] Max retries reached for container 61c0b125773c. Exiting log stream.
2025-02-06 15:47:36.024 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 15:47:36.025 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-06 15:47:36.030 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 15:47:36.033 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
