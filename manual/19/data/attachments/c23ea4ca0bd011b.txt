[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_on_non_subscribed_pubsub_topic with id: 2025-01-17_12-33-14__30e6e656-577d-4f66-bd7b-b506b381492c
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3242
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-01-17_12-33-14__30e6e656-577d-4f66-bd7b-b506b381492c__quay.io_wakuorg_nwaku-pr:3242.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.136.160
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['18609', '18610', '18611', '18612', '18613']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 18609:18609 -p 18610:18610 -p 18611:18611 -p 18612:18612 -p 18613:18613 quay.io/wakuorg/nwaku-pr:3242 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18611 --rest-port=18609 --tcp-port=18610 --discv5-udp-port=18612 --rest-address=0.0.0.0 --nat=extip:172.18.136.160 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=da68d78f8f5ad77f9d5dd35cbee3ac984dad8ffb70cd09fabb3281fb32f128ad --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18613 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.136.160 waku 9b61d3f5fa18d20f71f3104cd9e9d007b733e1df6b5813f850f3bf4c7dd0f9e9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 9b61d3f5fa18. Setting up logs at ./log/docker/receiving_node1_2025-01-17_12-33-14__30e6e656-577d-4f66-bd7b-b506b381492c__quay.io_wakuorg_nwaku-pr:3242.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3242. REST: 18609
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container c850f1f7ab1b. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18609/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18609/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.136.160/tcp/18610/p2p/16Uiu2HAkz7TbqmM4E1nwDBEqgk8Tzf9g46RUMDJwAnJYHx1q6SmC","/ip4/172.18.136.160/tcp/18611/ws/p2p/16Uiu2HAkz7TbqmM4E1nwDBEqgk8Tzf9g46RUMDJwAnJYHx1q6SmC"],"enrUri":"enr:-L24QO01xWyi8c0N2T7TNdl44WWA5V4tX9On_2gMoIKscA07X0SMSYplR8-VnW5gd4fQNITLNv8a_YkpqhVbt0nmoKECgmlkgnY0gmlwhKwSiKCKbXVsdGlhZGRyc5YACASsEoigBkiyAAoErBKIoAZIs90DgnJzhQADAQAAiXNlY3AyNTZrMaECRZ_70hpDToDPbIxKW6N2kR8lUSjvlIBH76Hc7xhcXQ-DdGNwgkiyg3VkcIJItIV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3242
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-01-17_12-33-14__30e6e656-577d-4f66-bd7b-b506b381492c__quay.io_wakuorg_nwaku-pr:3242.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.46.233
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['13484', '13485', '13486', '13487', '13488']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 13484:13484 -p 13485:13485 -p 13486:13486 -p 13487:13487 -p 13488:13488 quay.io/wakuorg/nwaku-pr:3242 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=13486 --rest-port=13484 --tcp-port=13485 --discv5-udp-port=13487 --rest-address=0.0.0.0 --nat=extip:172.18.46.233 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dbd01fe10be5c083aded7fbd1a0d3c706b5afffdd8e2f93266da2377fb1dac4a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=13488 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.46.233 waku a5c17cdda302e12bf9a6da336aa41b3ef5d247f012a6a800c5aeb5b7f5d3341a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID a5c17cdda302. Setting up logs at ./log/docker/receiving_node2_2025-01-17_12-33-14__30e6e656-577d-4f66-bd7b-b506b381492c__quay.io_wakuorg_nwaku-pr:3242.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3242. REST: 13484
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13484/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13484/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.46.233/tcp/13485/p2p/16Uiu2HAm13xd6BbsNANsdGCczprLryC8cxzfaaChB2AweeykHbkX","/ip4/172.18.46.233/tcp/13486/ws/p2p/16Uiu2HAm13xd6BbsNANsdGCczprLryC8cxzfaaChB2AweeykHbkX"],"enrUri":"enr:-L24QFOUfBf5bPlOVhsvx4ptKTN3Ufi-c9GG1kiNwPOe4VIeJ9UKNp4hpN8EmzU2i-RQou_D_Zlq_MJVayqCangUUn4CgmlkgnY0gmlwhKwSLumKbXVsdGlhZGRyc5YACASsEi7pBjStAAoErBIu6QY0rt0DgnJzhQADAQAAiXNlY3AyNTZrMaECU5YpgBClzs6-8jYXZyyRuiiPASJ1rhgRHJgpEVWY95SDdGNwgjStg3VkcII0r4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13484/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.136.160/tcp/18610/p2p/16Uiu2HAkz7TbqmM4E1nwDBEqgk8Tzf9g46RUMDJwAnJYHx1q6SmC"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3242
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-01-17_12-33-14__30e6e656-577d-4f66-bd7b-b506b381492c__quay.io_wakuorg_nwaku-pr:3242.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.238.78
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['37345', '37346', '37347', '37348', '37349']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 37345:37345 -p 37346:37346 -p 37347:37347 -p 37348:37348 -p 37349:37349 quay.io/wakuorg/nwaku-pr:3242 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37347 --rest-port=37345 --tcp-port=37346 --discv5-udp-port=37348 --rest-address=0.0.0.0 --nat=extip:172.18.238.78 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2f6ece5f5904f84c30b8ad8ab0d110d52fefede2b5cae5ff48c36b2fb277f7c2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37349 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QO01xWyi8c0N2T7TNdl44WWA5V4tX9On_2gMoIKscA07X0SMSYplR8-VnW5gd4fQNITLNv8a_YkpqhVbt0nmoKECgmlkgnY0gmlwhKwSiKCKbXVsdGlhZGRyc5YACASsEoigBkiyAAoErBKIoAZIs90DgnJzhQADAQAAiXNlY3AyNTZrMaECRZ_70hpDToDPbIxKW6N2kR8lUSjvlIBH76Hc7xhcXQ-DdGNwgkiyg3VkcIJItIV3YWt1Mgk --lightpushnode=/ip4/172.18.136.160/tcp/18610/p2p/16Uiu2HAkz7TbqmM4E1nwDBEqgk8Tzf9g46RUMDJwAnJYHx1q6SmC --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.238.78 waku a4b378339e8a07f08eebfb0cf546b0e902505a82d695b512518d0847e93f2401
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID a4b378339e8a. Setting up logs at ./log/docker/lightpush_node1_2025-01-17_12-33-14__30e6e656-577d-4f66-bd7b-b506b381492c__quay.io_wakuorg_nwaku-pr:3242.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3242. REST: 37345
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37345/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37345/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.238.78/tcp/37346/p2p/16Uiu2HAmPv22Uhs9MANTKJGpRWDsartdm3HURYiwLfyEDbQtLG6v","/ip4/172.18.238.78/tcp/37347/ws/p2p/16Uiu2HAmPv22Uhs9MANTKJGpRWDsartdm3HURYiwLfyEDbQtLG6v"],"enrUri":"enr:-L24QB3Ca0pQNli_ZwBPWPX01huBh6pQ6_kINSMh3LfGP9T6GAAzZwSXIGY7lTqEoY2MdVX0lM4cauA9fBABHStblU0CgmlkgnY0gmlwhKwS7k6KbXVsdGlhZGRyc5YACASsEu5OBpHiAAoErBLuTgaR490DgnJzhQADAQAAiXNlY3AyNTZrMaEDp0oputYQRS3vEp_nldX-6DYCsaEC9GAI6yAXZOUeonuDdGNwgpHig3VkcIKR5IV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37345/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.136.160/tcp/18610/p2p/16Uiu2HAkz7TbqmM4E1nwDBEqgk8Tzf9g46RUMDJwAnJYHx1q6SmC"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37345/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.46.233/tcp/13485/p2p/16Uiu2HAm13xd6BbsNANsdGCczprLryC8cxzfaaChB2AweeykHbkX"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18609/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13484/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37345/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1737117198832357888}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:37345/lightpush/v1/message. Response content: b'Failed to request a message push: not_published_to_any_peer'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 9b61d3f5fa18
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id a5c17cdda302
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 9b61d3f5fa18. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id a4b378339e8a
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container a5c17cdda302. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.