[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_subscribe_to_single_topics with id: 2025-01-17_12-37-09__9b914c14-6211-40fb-9827-99fc7e847cdb
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3242
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-17_12-37-09__9b914c14-6211-40fb-9827-99fc7e847cdb__quay.io_wakuorg_nwaku-pr:3242.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.11.207
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['26386', '26387', '26388', '26389', '26390']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 26386:26386 -p 26387:26387 -p 26388:26388 -p 26389:26389 -p 26390:26390 quay.io/wakuorg/nwaku-pr:3242 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26388 --rest-port=26386 --tcp-port=26387 --discv5-udp-port=26389 --rest-address=0.0.0.0 --nat=extip:172.18.11.207 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a55e0b56ccd0f56aaaeeaabb90becc97f95d1ef84d02c19b72bcecffc49ab5d7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26390 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.11.207 waku 61d8e48d2541b6357cd36ec5594297af9b290846709bc4842778f142b3ce7d71
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 61d8e48d2541. Setting up logs at ./log/docker/node1_2025-01-17_12-37-09__9b914c14-6211-40fb-9827-99fc7e847cdb__quay.io_wakuorg_nwaku-pr:3242.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3242. REST: 26386
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container abfed9d40ed1. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26386/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26386/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.11.207/tcp/26387/p2p/16Uiu2HAm23ri2LD8CZ1hHuvvky4tdSCEgPcDXB6KtgpvWYAQh5qM","/ip4/172.18.11.207/tcp/26388/ws/p2p/16Uiu2HAm23ri2LD8CZ1hHuvvky4tdSCEgPcDXB6KtgpvWYAQh5qM"],"enrUri":"enr:-L24QPktLA8JqwUXTR1-L3f0qyEMYt-pHw7xWrvVAuShFOukNJe9lWSQRv67nuDI2ql-0xLOtefnSir1sMjGnlX7X1MCgmlkgnY0gmlwhKwSC8-KbXVsdGlhZGRyc5YACASsEgvPBmcTAAoErBILzwZnFN0DgnJzhQADAQAAiXNlY3AyNTZrMaECYmspNvcG8xktpZM1cu2RATBf0wPwn6TzPw7bcNtdJhSDdGNwgmcTg3VkcIJnFYV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3242
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-17_12-37-09__9b914c14-6211-40fb-9827-99fc7e847cdb__quay.io_wakuorg_nwaku-pr:3242.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.8.90
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['7769', '7770', '7771', '7772', '7773']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 7769:7769 -p 7770:7770 -p 7771:7771 -p 7772:7772 -p 7773:7773 quay.io/wakuorg/nwaku-pr:3242 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7771 --rest-port=7769 --tcp-port=7770 --discv5-udp-port=7772 --rest-address=0.0.0.0 --nat=extip:172.18.8.90 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1618adfdae8898b3feb1edcc931ba8eb8e6dfd1dd5142928ed5fdd4405aa21ad --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7773 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QPktLA8JqwUXTR1-L3f0qyEMYt-pHw7xWrvVAuShFOukNJe9lWSQRv67nuDI2ql-0xLOtefnSir1sMjGnlX7X1MCgmlkgnY0gmlwhKwSC8-KbXVsdGlhZGRyc5YACASsEgvPBmcTAAoErBILzwZnFN0DgnJzhQADAQAAiXNlY3AyNTZrMaECYmspNvcG8xktpZM1cu2RATBf0wPwn6TzPw7bcNtdJhSDdGNwgmcTg3VkcIJnFYV3YWt1MgU --filternode=/ip4/172.18.11.207/tcp/26387/p2p/16Uiu2HAm23ri2LD8CZ1hHuvvky4tdSCEgPcDXB6KtgpvWYAQh5qM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.8.90 waku 2a4ffb00000b81e0046d0d5e32ffead4cc9ebc1aab4e4b6066823b8642eb9b79
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 2a4ffb00000b. Setting up logs at ./log/docker/node2_2025-01-17_12-37-09__9b914c14-6211-40fb-9827-99fc7e847cdb__quay.io_wakuorg_nwaku-pr:3242.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3242. REST: 7769
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7769/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7769/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.8.90/tcp/7770/p2p/16Uiu2HAmJJzzHxUd7XyTwishACrpkP2mMY9EMLwNKtgVzpxevGF8","/ip4/172.18.8.90/tcp/7771/ws/p2p/16Uiu2HAmJJzzHxUd7XyTwishACrpkP2mMY9EMLwNKtgVzpxevGF8"],"enrUri":"enr:-L24QBJFtknwezokKV63ihWia3aG8abuG6MCtEAEfBkOkBeqB91xaeQNSRxVoM4AB5RzodPY4dj6HQNqDHxHp7yFRm0CgmlkgnY0gmlwhKwSCFqKbXVsdGlhZGRyc5YACASsEghaBh5aAAoErBIIWgYeW90DgnJzhQADAQAAiXNlY3AyNTZrMaEDVAc6DGbzNyF83RJmJoFYHrZGRYJMp6bR3uQP__bblYeDdGNwgh5ag3VkcIIeXIV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7769/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.11.207/tcp/26387/p2p/16Uiu2HAm23ri2LD8CZ1hHuvvky4tdSCEgPcDXB6KtgpvWYAQh5qM"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26386/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7769/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "db6b6f57-3b18-47a2-b157-bb8c3bfc7ed8", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"db6b6f57-3b18-47a2-b157-bb8c3bfc7ed8","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26386/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:quay.io/wakuorg/nwaku-pr:3242 can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7769/filter/v2/messages/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1737117432315919360,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 61d8e48d2541
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 2a4ffb00000b
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 61d8e48d2541. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.