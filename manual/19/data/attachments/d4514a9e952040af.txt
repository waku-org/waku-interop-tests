[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_valid_version with id: 2025-01-17_12-37-50__df083106-42de-4b10-b2e4-de7dcd3eee76
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3242
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-01-17_12-37-50__df083106-42de-4b10-b2e4-de7dcd3eee76__quay.io_wakuorg_nwaku-pr:3242.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.97.6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['19515', '19516', '19517', '19518', '19519']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 19515:19515 -p 19516:19516 -p 19517:19517 -p 19518:19518 -p 19519:19519 quay.io/wakuorg/nwaku-pr:3242 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19517 --rest-port=19515 --tcp-port=19516 --discv5-udp-port=19518 --rest-address=0.0.0.0 --nat=extip:172.18.97.6 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4ecca5ef84fda88fbf34d7cd0a3dbdb70e59f10df13882caeeff1dbc8eef38e4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19519 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.97.6 waku f35bd641874fedc774dbcce3af720d023e4e5d18e2dddd066801490aa14d6d63
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID f35bd641874f. Setting up logs at ./log/docker/receiving_node1_2025-01-17_12-37-50__df083106-42de-4b10-b2e4-de7dcd3eee76__quay.io_wakuorg_nwaku-pr:3242.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3242. REST: 19515
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container efa1c9968fcd. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19515/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19515/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.97.6/tcp/19516/p2p/16Uiu2HAmCU2PuadMEBvsNnySHcCfCFKcwmVYiZRCtVBPX48mRujy","/ip4/172.18.97.6/tcp/19517/ws/p2p/16Uiu2HAmCU2PuadMEBvsNnySHcCfCFKcwmVYiZRCtVBPX48mRujy"],"enrUri":"enr:-L24QMUsuDIkb9c7t33ScQZLH_vVIqwHpu7c4GZhBTdSOH4gHJwXkecnaNm8x2yi-tj8Ft9k6fd78TQfSKxm4tW5JgkCgmlkgnY0gmlwhKwSYQaKbXVsdGlhZGRyc5YACASsEmEGBkw8AAoErBJhBgZMPd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC_TDsbMqflHekXbS_NVpNfUx1MsrPnPkSAw11IVMEfqyDdGNwgkw8g3VkcIJMPoV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3242
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-01-17_12-37-50__df083106-42de-4b10-b2e4-de7dcd3eee76__quay.io_wakuorg_nwaku-pr:3242.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.14.229
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['28725', '28726', '28727', '28728', '28729']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 28725:28725 -p 28726:28726 -p 28727:28727 -p 28728:28728 -p 28729:28729 quay.io/wakuorg/nwaku-pr:3242 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28727 --rest-port=28725 --tcp-port=28726 --discv5-udp-port=28728 --rest-address=0.0.0.0 --nat=extip:172.18.14.229 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c2dbba063edfdf4fbfc22dfec3ac00bafdef115ac4cb5d85bed1dc9895c6ab6a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28729 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.14.229 waku fb0359c8aed57ec30532e1fcecc6628e8dea35edbfa735dd0fd23e8a99086085
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID fb0359c8aed5. Setting up logs at ./log/docker/receiving_node2_2025-01-17_12-37-50__df083106-42de-4b10-b2e4-de7dcd3eee76__quay.io_wakuorg_nwaku-pr:3242.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3242. REST: 28725
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28725/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28725/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.14.229/tcp/28726/p2p/16Uiu2HAkvXagQ23QzAxdQkBj5Hvk95wCg4hmR9fZpvM65txBJc2f","/ip4/172.18.14.229/tcp/28727/ws/p2p/16Uiu2HAkvXagQ23QzAxdQkBj5Hvk95wCg4hmR9fZpvM65txBJc2f"],"enrUri":"enr:-L24QGJpUbaimQAF1g2TVQshtcfVcsfhlHetq9C9Tz4i0XNzE-SakdWTORMyokcu6lQO3L_VtmFvuXIfA40Tn1uw9uACgmlkgnY0gmlwhKwSDuWKbXVsdGlhZGRyc5YACASsEg7lBnA2AAoErBIO5QZwN90DgnJzhQADAQAAiXNlY3AyNTZrMaECEF8t26Xatkl-jzaqVffIBBBkV1VKV2aoJAPSEt-1srSDdGNwgnA2g3VkcIJwOIV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28725/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.97.6/tcp/19516/p2p/16Uiu2HAmCU2PuadMEBvsNnySHcCfCFKcwmVYiZRCtVBPX48mRujy"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3242
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-01-17_12-37-50__df083106-42de-4b10-b2e4-de7dcd3eee76__quay.io_wakuorg_nwaku-pr:3242.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.71.117
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['22886', '22887', '22888', '22889', '22890']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 22886:22886 -p 22887:22887 -p 22888:22888 -p 22889:22889 -p 22890:22890 quay.io/wakuorg/nwaku-pr:3242 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22888 --rest-port=22886 --tcp-port=22887 --discv5-udp-port=22889 --rest-address=0.0.0.0 --nat=extip:172.18.71.117 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a9a59e25f9f6b35be65aaefabc101ea90c18af9bcbc4edfc86f62ed228cc73dc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22890 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QMUsuDIkb9c7t33ScQZLH_vVIqwHpu7c4GZhBTdSOH4gHJwXkecnaNm8x2yi-tj8Ft9k6fd78TQfSKxm4tW5JgkCgmlkgnY0gmlwhKwSYQaKbXVsdGlhZGRyc5YACASsEmEGBkw8AAoErBJhBgZMPd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC_TDsbMqflHekXbS_NVpNfUx1MsrPnPkSAw11IVMEfqyDdGNwgkw8g3VkcIJMPoV3YWt1Mgk --lightpushnode=/ip4/172.18.97.6/tcp/19516/p2p/16Uiu2HAmCU2PuadMEBvsNnySHcCfCFKcwmVYiZRCtVBPX48mRujy --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.71.117 waku a9d5c5bac972506621fd65c2492c720ca94d0169505c1c71af363b485de0a9b8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID a9d5c5bac972. Setting up logs at ./log/docker/lightpush_node1_2025-01-17_12-37-50__df083106-42de-4b10-b2e4-de7dcd3eee76__quay.io_wakuorg_nwaku-pr:3242.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3242. REST: 22886
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22886/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22886/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.71.117/tcp/22887/p2p/16Uiu2HAm5cMQSFwyZNYKLUudMwvUJpPTKns2uC1MHkDk4F9oUVCp","/ip4/172.18.71.117/tcp/22888/ws/p2p/16Uiu2HAm5cMQSFwyZNYKLUudMwvUJpPTKns2uC1MHkDk4F9oUVCp"],"enrUri":"enr:-L24QFeCWNkuX3zoSAA4ZPViLyr5K-mRMZbcnU_d7TryH0CLHvPlLCW_Hy0l3FBJfL8Bt8J0tCcOZKMViDohLkBkTC8CgmlkgnY0gmlwhKwSR3WKbXVsdGlhZGRyc5YACASsEkd1BllnAAoErBJHdQZZaN0DgnJzhQADAQAAiXNlY3AyNTZrMaECl1FBVP1MBZ79p2R2VF_WPtaJOzCYGhfp9oOi8blNgLWDdGNwgllng3VkcIJZaYV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22886/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.97.6/tcp/19516/p2p/16Uiu2HAmCU2PuadMEBvsNnySHcCfCFKcwmVYiZRCtVBPX48mRujy"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22886/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.14.229/tcp/28726/p2p/16Uiu2HAkvXagQ23QzAxdQkBj5Hvk95wCg4hmR9fZpvM65txBJc2f"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19515/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28725/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22886/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1737117474562004736, "version": 10}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:quay.io/wakuorg/nwaku-pr:3242 can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19515/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":10,"timestamp":1737117474562004736,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:quay.io/wakuorg/nwaku-pr:3242 can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28725/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":10,"timestamp":1737117474562004736,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id f35bd641874f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id fb0359c8aed5
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container f35bd641874f. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id a9d5c5bac972
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container fb0359c8aed5. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.