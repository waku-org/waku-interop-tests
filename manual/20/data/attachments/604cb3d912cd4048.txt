[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_lightpush with id: 2025-01-17_16-34-58__9f5223c8-305c-4825-85d3-a7101f34f192
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3244
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-17_16-34-58__9f5223c8-305c-4825-85d3-a7101f34f192__quay.io_wakuorg_nwaku-pr:3244.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.207.86
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['40757', '40758', '40759', '40760', '40761']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 40757:40757 -p 40758:40758 -p 40759:40759 -p 40760:40760 -p 40761:40761 quay.io/wakuorg/nwaku-pr:3244 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40759 --rest-port=40757 --tcp-port=40758 --discv5-udp-port=40760 --rest-address=0.0.0.0 --nat=extip:172.18.207.86 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ba5e003a22c995d8c50ce225e56cdb7a92cf7b2bb640ab076da1e2bdc3ab2c72 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40761 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.207.86 waku d1e769de71e40d06fb066f36863aede57f471036ef156be96341603547be3217
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID d1e769de71e4. Setting up logs at ./log/docker/node1_2025-01-17_16-34-58__9f5223c8-305c-4825-85d3-a7101f34f192__quay.io_wakuorg_nwaku-pr:3244.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3244. REST: 40757
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container e239d37d6bd0. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40757/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40757/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.207.86/tcp/40758/p2p/16Uiu2HAmPSkFMPtgXDh63NfojirGJKRqCtnipc43U7UDD67Z2A1y","/ip4/172.18.207.86/tcp/40759/ws/p2p/16Uiu2HAmPSkFMPtgXDh63NfojirGJKRqCtnipc43U7UDD67Z2A1y"],"enrUri":"enr:-L24QDCfl3RxtXBqKSTKXL65IIuJHazuty6PCBNUH0Pc_XYTIAHUCV5fWhpHEGzy-bbzlhmg1qF-oAdB4o_N6-cUV7MCgmlkgnY0gmlwhKwSz1aKbXVsdGlhZGRyc5YACASsEs9WBp82AAoErBLPVgafN90DgnJzhQADAQAAiXNlY3AyNTZrMaEDoE2kEMdEl7mtsCd77qJIcpg5yWlhj3rNw8J-WRLYy6SDdGNwgp82g3VkcIKfOIV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3244
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-17_16-34-58__9f5223c8-305c-4825-85d3-a7101f34f192__quay.io_wakuorg_nwaku-pr:3244.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.71.152
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['8692', '8693', '8694', '8695', '8696']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 8692:8692 -p 8693:8693 -p 8694:8694 -p 8695:8695 -p 8696:8696 quay.io/wakuorg/nwaku-pr:3244 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8694 --rest-port=8692 --tcp-port=8693 --discv5-udp-port=8695 --rest-address=0.0.0.0 --nat=extip:172.18.71.152 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eae9dee5888dfbf7daa49bcec8d41c930b80b1ed00debfb2fefdbd16be0fe97d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8696 --metrics-logging=true --lightpush=false --relay=true --discv5-bootstrap-node=enr:-L24QDCfl3RxtXBqKSTKXL65IIuJHazuty6PCBNUH0Pc_XYTIAHUCV5fWhpHEGzy-bbzlhmg1qF-oAdB4o_N6-cUV7MCgmlkgnY0gmlwhKwSz1aKbXVsdGlhZGRyc5YACASsEs9WBp82AAoErBLPVgafN90DgnJzhQADAQAAiXNlY3AyNTZrMaEDoE2kEMdEl7mtsCd77qJIcpg5yWlhj3rNw8J-WRLYy6SDdGNwgp82g3VkcIKfOIV3YWt1Mgk
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.71.152 waku 3bfec0d31d6e29660ee6444f5e466fd9d98ea11c090b359f558d33898c96f5f8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 3bfec0d31d6e. Setting up logs at ./log/docker/node1_2025-01-17_16-34-58__9f5223c8-305c-4825-85d3-a7101f34f192__quay.io_wakuorg_nwaku-pr:3244.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3244. REST: 8692
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8692/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8692/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.71.152/tcp/8693/p2p/16Uiu2HAmKA1fbVivpgxwQSPrEkYYe8aS8RBfoetjMHjfK7Dr3x7d","/ip4/172.18.71.152/tcp/8694/ws/p2p/16Uiu2HAmKA1fbVivpgxwQSPrEkYYe8aS8RBfoetjMHjfK7Dr3x7d"],"enrUri":"enr:-L24QLh9GKUveER-qMIuk0Ix2U-KtU_VNt8qoNTIoem7bD8aJy3-W2wkn_LZWnCA1n4ii8wvB5vz9FSBQEGgMoqkm_ECgmlkgnY0gmlwhKwSR5iKbXVsdGlhZGRyc5YACASsEkeYBiH1AAoErBJHmAYh9t0DgnJzhQADAQAAiXNlY3AyNTZrMaEDYJVz3RViQ1qzB_tnZDpkCeP4SN7U7tYbS3f5BrzeWJyDdGNwgiH1g3VkcIIh94V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3244
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-17_16-34-58__9f5223c8-305c-4825-85d3-a7101f34f192__quay.io_wakuorg_nwaku-pr:3244.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.157.91
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['51459', '51460', '51461', '51462', '51463']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 51459:51459 -p 51460:51460 -p 51461:51461 -p 51462:51462 -p 51463:51463 quay.io/wakuorg/nwaku-pr:3244 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=51461 --rest-port=51459 --tcp-port=51460 --discv5-udp-port=51462 --rest-address=0.0.0.0 --nat=extip:172.18.157.91 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ef5abd03ccb7ab615069ecb2d9ffa751111e1dc40e37f2af5bfdfe9aa4d483b3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=51463 --metrics-logging=true --lightpush=true --relay=false --discv5-bootstrap-node=enr:-L24QDCfl3RxtXBqKSTKXL65IIuJHazuty6PCBNUH0Pc_XYTIAHUCV5fWhpHEGzy-bbzlhmg1qF-oAdB4o_N6-cUV7MCgmlkgnY0gmlwhKwSz1aKbXVsdGlhZGRyc5YACASsEs9WBp82AAoErBLPVgafN90DgnJzhQADAQAAiXNlY3AyNTZrMaEDoE2kEMdEl7mtsCd77qJIcpg5yWlhj3rNw8J-WRLYy6SDdGNwgp82g3VkcIKfOIV3YWt1Mgk --lightpushnode=/ip4/172.18.207.86/tcp/40758/p2p/16Uiu2HAmPSkFMPtgXDh63NfojirGJKRqCtnipc43U7UDD67Z2A1y
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.157.91 waku 4d9eba44419fc0b737b8e2fe8c4ba072091707c17ee156519e30061002dd59d8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 4d9eba44419f. Setting up logs at ./log/docker/node1_2025-01-17_16-34-58__9f5223c8-305c-4825-85d3-a7101f34f192__quay.io_wakuorg_nwaku-pr:3244.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3244. REST: 51459
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51459/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51459/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.157.91/tcp/51460/p2p/16Uiu2HAmPCxeXPNfABKRoG32fPGbwFKo7YQ7WRbHuWn54XEgWeN2","/ip4/172.18.157.91/tcp/51461/ws/p2p/16Uiu2HAmPCxeXPNfABKRoG32fPGbwFKo7YQ7WRbHuWn54XEgWeN2"],"enrUri":"enr:-L24QK0eQe1frKXgFuCZ866Kk21cQdkyF-LFw9lrN813WvBdeNfZWVZ7L5PueRw8x-1Tks8O6kwp5xPBbzb6Hktjaa4CgmlkgnY0gmlwhKwSnVuKbXVsdGlhZGRyc5YACASsEp1bBskEAAoErBKdWwbJBd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDnMWHnObF7oZbgCwrbadnWqYcJywbVcKkf6E_mgKPPQ-DdGNwgskEg3VkcILJBoV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40757/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8692/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51459/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": 1737131702840221440}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:quay.io/wakuorg/nwaku-pr:3244 can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40757/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1737131702840221440,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:quay.io/wakuorg/nwaku-pr:3244 can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8692/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1737131702840221440,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id d1e769de71e4
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 3bfec0d31d6e
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container d1e769de71e4. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 4d9eba44419f
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 3bfec0d31d6e. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.