[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_msg_stored_when_ephemeral_false with id: 2025-01-17_16-35-35__31b894e5-7b12-4835-ae21-07ee62b9a0c4
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3244
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-17_16-35-35__31b894e5-7b12-4835-ae21-07ee62b9a0c4__quay.io_wakuorg_nwaku-pr:3244.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3244
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-17_16-35-35__31b894e5-7b12-4835-ae21-07ee62b9a0c4__quay.io_wakuorg_nwaku-pr:3244.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3244
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2025-01-17_16-35-35__31b894e5-7b12-4835-ae21-07ee62b9a0c4__quay.io_wakuorg_nwaku-pr:3244.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:414 Start 3 nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.152.10
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['37149', '37150', '37151', '37152', '37153']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 37149:37149 -p 37150:37150 -p 37151:37151 -p 37152:37152 -p 37153:37153 quay.io/wakuorg/nwaku-pr:3244 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37151 --rest-port=37149 --tcp-port=37150 --discv5-udp-port=37152 --rest-address=0.0.0.0 --nat=extip:172.18.152.10 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=92fc26fa3cec7a0d701924d02dccbdfae33e8532cb9741df39fcfff01fe8d2be --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37153 --metrics-logging=true --relay=true --store=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.152.10 waku 91681e9b24d258bff81c96a36d1e86578d47d46552db8f97b2c138a480b1b2b4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 91681e9b24d2. Setting up logs at ./log/docker/node1_2025-01-17_16-35-35__31b894e5-7b12-4835-ae21-07ee62b9a0c4__quay.io_wakuorg_nwaku-pr:3244.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3244. REST: 37149
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container ab96cb2afa0f. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37149/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37149/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.152.10/tcp/37150/p2p/16Uiu2HAmHieSgJQ48WUtrNG1XNVRbMGFcdkv6KiSvezJwc8WcfEq","/ip4/172.18.152.10/tcp/37151/ws/p2p/16Uiu2HAmHieSgJQ48WUtrNG1XNVRbMGFcdkv6KiSvezJwc8WcfEq"],"enrUri":"enr:-L24QBYeA5IDMxPIUSNE971JtvPm4KLLk8miXJidAolsESLEMz9n5GcG6wdUAzpivRDu7UEEijl1wHIM27KEHWyMTuICgmlkgnY0gmlwhKwSmAqKbXVsdGlhZGRyc5YACASsEpgKBpEeAAoErBKYCgaRH90DgnJzhQADAQAAiXNlY3AyNTZrMaEDSzo_tEkC6JczfDsc7Q9YfR__y0O8UK6pTR6YJ7cQdOKDdGNwgpEeg3VkcIKRIIV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.79.109
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['61665', '61666', '61667', '61668', '61669']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 61665:61665 -p 61666:61666 -p 61667:61667 -p 61668:61668 -p 61669:61669 quay.io/wakuorg/nwaku-pr:3244 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61667 --rest-port=61665 --tcp-port=61666 --discv5-udp-port=61668 --rest-address=0.0.0.0 --nat=extip:172.18.79.109 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=589ee7edfb84b2ddb89daa88af2674f1285363e4355e1cb24dadaf70fe49cc8f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61669 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-L24QBYeA5IDMxPIUSNE971JtvPm4KLLk8miXJidAolsESLEMz9n5GcG6wdUAzpivRDu7UEEijl1wHIM27KEHWyMTuICgmlkgnY0gmlwhKwSmAqKbXVsdGlhZGRyc5YACASsEpgKBpEeAAoErBKYCgaRH90DgnJzhQADAQAAiXNlY3AyNTZrMaEDSzo_tEkC6JczfDsc7Q9YfR__y0O8UK6pTR6YJ7cQdOKDdGNwgpEeg3VkcIKRIIV3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.79.109 waku cad2f3527db5e9ff5e1b9401bd67b11f84f0ea168d5894deda6aaeb6bab0a954
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID cad2f3527db5. Setting up logs at ./log/docker/node2_2025-01-17_16-35-35__31b894e5-7b12-4835-ae21-07ee62b9a0c4__quay.io_wakuorg_nwaku-pr:3244.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3244. REST: 61665
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61665/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61665/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.79.109/tcp/61666/p2p/16Uiu2HAmNNEBSvoUkK7rvyW4pzorTNfmomJ1RhcY72SUq5e6WqvB","/ip4/172.18.79.109/tcp/61667/ws/p2p/16Uiu2HAmNNEBSvoUkK7rvyW4pzorTNfmomJ1RhcY72SUq5e6WqvB"],"enrUri":"enr:-L24QM4jCBOx4hXMcS4fT-yTERB4TmOq-uXgdVCiYbdE3unTXQs8ruo02dEsOhY9MTCx5D5C9tq4d0fiHFnCK1AHn6wCgmlkgnY0gmlwhKwST22KbXVsdGlhZGRyc5YACASsEk9tBvDiAAoErBJPbQbw490DgnJzhQADAQAAiXNlY3AyNTZrMaEDkEmiLG0SjS5WYn43sMCiEo44cCIqWFg2U6cA6lKE1MSDdGNwgvDig3VkcILw5IV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.155.89
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['3481', '3482', '3483', '3484', '3485']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 3481:3481 -p 3482:3482 -p 3483:3483 -p 3484:3484 -p 3485:3485 quay.io/wakuorg/nwaku-pr:3244 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=3483 --rest-port=3481 --tcp-port=3482 --discv5-udp-port=3484 --rest-address=0.0.0.0 --nat=extip:172.18.155.89 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ec2daf7697c8a3ab3d8e1b83c87cfbec2dbaeffa73ae473d59dca21e0fbcaacc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=3485 --metrics-logging=true --relay=false --storenode=/ip4/172.18.79.109/tcp/61666/p2p/16Uiu2HAmNNEBSvoUkK7rvyW4pzorTNfmomJ1RhcY72SUq5e6WqvB --discv5-bootstrap-node=enr:-L24QM4jCBOx4hXMcS4fT-yTERB4TmOq-uXgdVCiYbdE3unTXQs8ruo02dEsOhY9MTCx5D5C9tq4d0fiHFnCK1AHn6wCgmlkgnY0gmlwhKwST22KbXVsdGlhZGRyc5YACASsEk9tBvDiAAoErBJPbQbw490DgnJzhQADAQAAiXNlY3AyNTZrMaEDkEmiLG0SjS5WYn43sMCiEo44cCIqWFg2U6cA6lKE1MSDdGNwgvDig3VkcILw5IV3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.155.89 waku e0ee882df769e5ab508c8a44ca0ddc1648656218f8893d2605a6f134bf1f4052
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID e0ee882df769. Setting up logs at ./log/docker/node3_2025-01-17_16-35-35__31b894e5-7b12-4835-ae21-07ee62b9a0c4__quay.io_wakuorg_nwaku-pr:3244.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3244. REST: 3481
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3481/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3481/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.155.89/tcp/3482/p2p/16Uiu2HAm7HFjCuW6CjRi3swjvVX4hoaT9jyUME2RnxLfhmVKTBv9","/ip4/172.18.155.89/tcp/3483/ws/p2p/16Uiu2HAm7HFjCuW6CjRi3swjvVX4hoaT9jyUME2RnxLfhmVKTBv9"],"enrUri":"enr:-L24QCUZzJNfDQKtveZpwuyunkHNxpeXHgjKfyvVln65qhLiFh1pFNdru_NHHMHSPKFSAd19PAk_xRnl5Agp-RuW8VICgmlkgnY0gmlwhKwSm1mKbXVsdGlhZGRyc5YACASsEptZBg2aAAoErBKbWQYNm90DgnJzhQADAQAAiXNlY3AyNTZrMaECsCQs5Xs7Dmr46hiRFpdKk-6yH51yRK_QLttpaz7ZzyKDdGNwgg2ag3VkcIINnIV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:419 Subscribe node1 ,2 to pubtopic /waku/2/rs/3/1
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37149/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61665/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37149/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.79.109/tcp/61666/p2p/16Uiu2HAmNNEBSvoUkK7rvyW4pzorTNfmomJ1RhcY72SUq5e6WqvB","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61665/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.18.152.10/tcp/37150/p2p/16Uiu2HAmHieSgJQ48WUtrNG1XNVRbMGFcdkv6KiSvezJwc8WcfEq","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:424 Node1 publish message with ephemeral = false
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37149/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "ephemeral": false}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 3 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:428 Check if message is stored 
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer quay.io/wakuorg/nwaku-pr:3244 can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3481/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"4f7c54754be0511636bd","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"Axy96qCZvHrt4V7T29b3jgkhZ92KjE6oFxAxZOK5T4s="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 91681e9b24d2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id cad2f3527db5
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 91681e9b24d2. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id e0ee882df769
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container cad2f3527db5. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.