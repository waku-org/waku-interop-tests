[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_valid_meta with id: 2025-01-17_16-40-20__c67e8d47-b6f7-4988-877c-8bf5a7c11431
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3244
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-01-17_16-40-20__c67e8d47-b6f7-4988-877c-8bf5a7c11431__quay.io_wakuorg_nwaku-pr:3244.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.9.166
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['47974', '47975', '47976', '47977', '47978']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 47974:47974 -p 47975:47975 -p 47976:47976 -p 47977:47977 -p 47978:47978 quay.io/wakuorg/nwaku-pr:3244 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=47976 --rest-port=47974 --tcp-port=47975 --discv5-udp-port=47977 --rest-address=0.0.0.0 --nat=extip:172.18.9.166 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2aeda9b08afa5eec8ce09aa6fa7ec4fea6340c0c8cdbf72b8dc0aa71fb9bf94d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=47978 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.9.166 waku 902bf0faeb2e64d01b114f70545a323d5ad789b54c9f1c5c9a6616e9e78e1b11
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 902bf0faeb2e. Setting up logs at ./log/docker/receiving_node1_2025-01-17_16-40-20__c67e8d47-b6f7-4988-877c-8bf5a7c11431__quay.io_wakuorg_nwaku-pr:3244.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3244. REST: 47974
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 42e7d07ffc27. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47974/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47974/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.9.166/tcp/47975/p2p/16Uiu2HAm4YmZV5tf1rC6hQ7sxTKjVjXGhUwfxo5sDhzF73fUjTS7","/ip4/172.18.9.166/tcp/47976/ws/p2p/16Uiu2HAm4YmZV5tf1rC6hQ7sxTKjVjXGhUwfxo5sDhzF73fUjTS7"],"enrUri":"enr:-L24QIDZB2jVurmbzgvURJvUF9ylZZvj5-qXX87xwRgeOvIALqCBkSUwKMX5u4g_3S7__qzmMIhfROFeMQDA-HbiLggCgmlkgnY0gmlwhKwSCaaKbXVsdGlhZGRyc5YACASsEgmmBrtnAAoErBIJpga7aN0DgnJzhQADAQAAiXNlY3AyNTZrMaECh4qO7shBq1dMrIcKx8WW318glq7EFVbFiTAtDm-8_9iDdGNwgrtng3VkcIK7aYV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3244
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-01-17_16-40-20__c67e8d47-b6f7-4988-877c-8bf5a7c11431__quay.io_wakuorg_nwaku-pr:3244.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.69.193
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['24359', '24360', '24361', '24362', '24363']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 24359:24359 -p 24360:24360 -p 24361:24361 -p 24362:24362 -p 24363:24363 quay.io/wakuorg/nwaku-pr:3244 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=24361 --rest-port=24359 --tcp-port=24360 --discv5-udp-port=24362 --rest-address=0.0.0.0 --nat=extip:172.18.69.193 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d0343cbf9bef110c542d8c5f57acb81aab7a8aba5e3a8ab21c425ba7fdd8e4bc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=24363 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.69.193 waku 6d51b6131a698986591638ebd21a851b5ec761ee026a2915557305ed91080099
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 6d51b6131a69. Setting up logs at ./log/docker/receiving_node2_2025-01-17_16-40-20__c67e8d47-b6f7-4988-877c-8bf5a7c11431__quay.io_wakuorg_nwaku-pr:3244.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3244. REST: 24359
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24359/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24359/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.69.193/tcp/24360/p2p/16Uiu2HAm2RdfmxSxq4JJo6xD95EkWg5ZBH61xSdGURZmkJeziZVU","/ip4/172.18.69.193/tcp/24361/ws/p2p/16Uiu2HAm2RdfmxSxq4JJo6xD95EkWg5ZBH61xSdGURZmkJeziZVU"],"enrUri":"enr:-L24QA5EgB4323R3Sa6EtTJyCPxbWUsaZnVIBwJBpXW8_HB2O3hXjBtqF7DWRuv7AqCY27f8gX__J0NjA0Km7Yuo4goCgmlkgnY0gmlwhKwSRcGKbXVsdGlhZGRyc5YACASsEkXBBl8oAAoErBJFwQZfKd0DgnJzhQADAQAAiXNlY3AyNTZrMaECZ_8yIaoy2eUKpOLttQoVKiV4U8uMuhERUV5dLmSx5cuDdGNwgl8og3VkcIJfKoV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24359/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.9.166/tcp/47975/p2p/16Uiu2HAm4YmZV5tf1rC6hQ7sxTKjVjXGhUwfxo5sDhzF73fUjTS7"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3244
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-01-17_16-40-20__c67e8d47-b6f7-4988-877c-8bf5a7c11431__quay.io_wakuorg_nwaku-pr:3244.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.54.89
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['15819', '15820', '15821', '15822', '15823']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 15819:15819 -p 15820:15820 -p 15821:15821 -p 15822:15822 -p 15823:15823 quay.io/wakuorg/nwaku-pr:3244 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15821 --rest-port=15819 --tcp-port=15820 --discv5-udp-port=15822 --rest-address=0.0.0.0 --nat=extip:172.18.54.89 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f19b7cc027bacaf90bfe3952ffb9dacb36e00d6dda9ddedba53c6055fce4b6fc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15823 --metrics-logging=true --discv5-bootstrap-node=enr:-L24QIDZB2jVurmbzgvURJvUF9ylZZvj5-qXX87xwRgeOvIALqCBkSUwKMX5u4g_3S7__qzmMIhfROFeMQDA-HbiLggCgmlkgnY0gmlwhKwSCaaKbXVsdGlhZGRyc5YACASsEgmmBrtnAAoErBIJpga7aN0DgnJzhQADAQAAiXNlY3AyNTZrMaECh4qO7shBq1dMrIcKx8WW318glq7EFVbFiTAtDm-8_9iDdGNwgrtng3VkcIK7aYV3YWt1Mgk --lightpushnode=/ip4/172.18.9.166/tcp/47975/p2p/16Uiu2HAm4YmZV5tf1rC6hQ7sxTKjVjXGhUwfxo5sDhzF73fUjTS7 --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.54.89 waku 7175c82d79e30fecdbb44f6d93b4468220f0b729ba33a257635288feef2e688f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 7175c82d79e3. Setting up logs at ./log/docker/lightpush_node1_2025-01-17_16-40-20__c67e8d47-b6f7-4988-877c-8bf5a7c11431__quay.io_wakuorg_nwaku-pr:3244.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3244. REST: 15819
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15819/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15819/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.54.89/tcp/15820/p2p/16Uiu2HAmVW54DheKHkUXVZiEFNE4RcV5tGKLzpnfwaQVwp4bGLPz","/ip4/172.18.54.89/tcp/15821/ws/p2p/16Uiu2HAmVW54DheKHkUXVZiEFNE4RcV5tGKLzpnfwaQVwp4bGLPz"],"enrUri":"enr:-L24QD-BAsmMN8TC3Fp38H2dwsIzwe1-ZP-fmxvubwyZQnB2JWRjvpUsObxIALHti_btThCOC92L5a8yIEyoWUuINWMCgmlkgnY0gmlwhKwSNlmKbXVsdGlhZGRyc5YACASsEjZZBj3MAAoErBI2WQY9zd0DgnJzhQADAQAAiXNlY3AyNTZrMaED-k3FbbCm-9u5dssUrR3JQiaSxRytzblUEMdP79DXJvmDdGNwgj3Mg3VkcII9zoV3YWt1Mgg"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15819/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.9.166/tcp/47975/p2p/16Uiu2HAm4YmZV5tf1rC6hQ7sxTKjVjXGhUwfxo5sDhzF73fUjTS7"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15819/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.69.193/tcp/24360/p2p/16Uiu2HAm2RdfmxSxq4JJo6xD95EkWg5ZBH61xSdGURZmkJeziZVU"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47974/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24359/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15819/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1737132024349496576, "meta": "TGlnaHQgcHVzaCB3b3JrcyEh"}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:quay.io/wakuorg/nwaku-pr:3244 can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47974/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1737132024349496576,"meta":"TGlnaHQgcHVzaCB3b3JrcyEh","ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:quay.io/wakuorg/nwaku-pr:3244 can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24359/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1737132024349496576,"meta":"TGlnaHQgcHVzaCB3b3JrcyEh","ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 902bf0faeb2e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 6d51b6131a69
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 902bf0faeb2e. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 7175c82d79e3
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 6d51b6131a69. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.