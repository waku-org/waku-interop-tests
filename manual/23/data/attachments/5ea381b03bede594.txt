[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_ping_on_unsubscribed_peer with id: 2025-01-30_10-30-02__eabefcc6-587f-4f61-932e-89af5c8cc73a
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3234
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-30_10-30-02__eabefcc6-587f-4f61-932e-89af5c8cc73a__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.5.22
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['1153', '1154', '1155', '1156', '1157']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 1153:1153 -p 1154:1154 -p 1155:1155 -p 1156:1156 -p 1157:1157 quay.io/wakuorg/nwaku-pr:3234 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=1155 --rest-port=1153 --tcp-port=1154 --discv5-udp-port=1156 --rest-address=0.0.0.0 --nat=extip:172.18.5.22 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bd43eeebe56f118af3fa48bd78ddcd7d4ebcbeb4e2e2de2c7fefcdcc25bcebf4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=1157 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.5.22 waku 7e3f7b710aae2f6353886f71a2a1cfb46eba745d5338dee6f6a13893ea3dd75b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 7e3f7b710aae. Setting up logs at ./log/docker/node1_2025-01-30_10-30-02__eabefcc6-587f-4f61-932e-89af5c8cc73a__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3234. REST: 1153
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 604f1ed3595a. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1153/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1153/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.5.22/tcp/1154/p2p/16Uiu2HAmFXfpDwHTege1peaqhtvcSamCwMQnTuF2E5V9zpZ54TSV","/ip4/172.18.5.22/tcp/1155/ws/p2p/16Uiu2HAmFXfpDwHTege1peaqhtvcSamCwMQnTuF2E5V9zpZ54TSV"],"enrUri":"enr:-L24QO_R-z3bV3hUHwk7TGVml5RhHdmNSn6DsFc5YKNpDzOQdPdLfiHyUbAeHYCXpqWWPRLnKiDXodeNQsTx4BDiUmECgmlkgnY0gmlwhKwSBRaKbXVsdGlhZGRyc5YACASsEgUWBgSCAAoErBIFFgYEg90DgnJzhQADAQAAiXNlY3AyNTZrMaEDKrMJbSjAhTaZHnbUs2-0cDUtr1ankGQHUlNXRXc7dmaDdGNwggSCg3VkcIIEhIV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3234
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-30_10-30-02__eabefcc6-587f-4f61-932e-89af5c8cc73a__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.34.255
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['2252', '2253', '2254', '2255', '2256']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 2252:2252 -p 2253:2253 -p 2254:2254 -p 2255:2255 -p 2256:2256 quay.io/wakuorg/nwaku-pr:3234 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2254 --rest-port=2252 --tcp-port=2253 --discv5-udp-port=2255 --rest-address=0.0.0.0 --nat=extip:172.18.34.255 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c9bb9dbf21ebab002e5a3aae75c93ddff41c3e9b9a0c3dccf4ac397b27aad1cf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2256 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QO_R-z3bV3hUHwk7TGVml5RhHdmNSn6DsFc5YKNpDzOQdPdLfiHyUbAeHYCXpqWWPRLnKiDXodeNQsTx4BDiUmECgmlkgnY0gmlwhKwSBRaKbXVsdGlhZGRyc5YACASsEgUWBgSCAAoErBIFFgYEg90DgnJzhQADAQAAiXNlY3AyNTZrMaEDKrMJbSjAhTaZHnbUs2-0cDUtr1ankGQHUlNXRXc7dmaDdGNwggSCg3VkcIIEhIV3YWt1MgU --filternode=/ip4/172.18.5.22/tcp/1154/p2p/16Uiu2HAmFXfpDwHTege1peaqhtvcSamCwMQnTuF2E5V9zpZ54TSV
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.34.255 waku 55f8d1cd48a0039698e5d794e8cd885ef0d0aaf115ba2857af532133b0e1e3db
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 55f8d1cd48a0. Setting up logs at ./log/docker/node2_2025-01-30_10-30-02__eabefcc6-587f-4f61-932e-89af5c8cc73a__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3234. REST: 2252
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2252/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2252/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.34.255/tcp/2253/p2p/16Uiu2HAkvYkXamZr1fkrRVuktj9CfFb5JkBeqJBVg6BEwNHa5wsq","/ip4/172.18.34.255/tcp/2254/ws/p2p/16Uiu2HAkvYkXamZr1fkrRVuktj9CfFb5JkBeqJBVg6BEwNHa5wsq"],"enrUri":"enr:-L24QFK5XmFAQMUe7Z74vSB72JHaSBKYQMGwmzLCPY3ubrKLCLT8OowlDpeQiua51uf6gsq-EPYRshzuMgh0mkFI4SwCgmlkgnY0gmlwhKwSIv-KbXVsdGlhZGRyc5YACASsEiL_BgjNAAoErBIi_wYIzt0DgnJzhQADAQAAiXNlY3AyNTZrMaECEKvlJ7iXnX95-zCPfhVaKznHsUMJm7Y9glx4e58S-gyDdGNwggjNg3VkcIIIz4V3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2252/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.5.22/tcp/1154/p2p/16Uiu2HAmFXfpDwHTege1peaqhtvcSamCwMQnTuF2E5V9zpZ54TSV"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1153/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2252/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "0cc55931-13d3-42a5-9efb-0f9de92fa2b5", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"0cc55931-13d3-42a5-9efb-0f9de92fa2b5","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2252/filter/v2/subscriptions/ed13123b-d0a7-4827-a2fa-efbed1f25688" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"ed13123b-d0a7-4827-a2fa-efbed1f25688","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X DELETE "http://127.0.0.1:2252/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "12345", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"12345","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2252/filter/v2/subscriptions/8d102e8a-3733-4269-bcba-4f4962fe83f6" -H "Content-Type: application/json" -d 'None'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:2252/filter/v2/subscriptions/8d102e8a-3733-4269-bcba-4f4962fe83f6. Response content: b'{"requestId":"8d102e8a-3733-4269-bcba-4f4962fe83f6","statusDesc":"NOT_FOUND: peer has no subscriptions"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 7e3f7b710aae
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 55f8d1cd48a0
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 7e3f7b710aae. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.