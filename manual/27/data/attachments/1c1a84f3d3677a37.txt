[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_update_subscription_with_extra_field with id: 2025-01-30_13-38-58__b8be70ac-22cb-4193-8f59-7f0125d848a0
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3234
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-30_13-38-58__b8be70ac-22cb-4193-8f59-7f0125d848a0__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.94.151
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['59696', '59697', '59698', '59699', '59700']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 59696:59696 -p 59697:59697 -p 59698:59698 -p 59699:59699 -p 59700:59700 quay.io/wakuorg/nwaku-pr:3234 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=59698 --rest-port=59696 --tcp-port=59697 --discv5-udp-port=59699 --rest-address=0.0.0.0 --nat=extip:172.18.94.151 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6e9be2d9b62db4bfcb06daaed867abd7aca5fd2a2caaa8eb7d62cc5b3dac0df9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=59700 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.94.151 waku fed72154c6ae8ea217a128c1d618239dfeb275d774ddad500c7f08be33741650
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID fed72154c6ae. Setting up logs at ./log/docker/node1_2025-01-30_13-38-58__b8be70ac-22cb-4193-8f59-7f0125d848a0__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3234. REST: 59696
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container b32bb9bc07c0. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59696/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59696/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.94.151/tcp/59697/p2p/16Uiu2HAkvEpci9pvtEm5t6z4SW2NF31KkGKtWAD426rvxWGD6iLB","/ip4/172.18.94.151/tcp/59698/ws/p2p/16Uiu2HAkvEpci9pvtEm5t6z4SW2NF31KkGKtWAD426rvxWGD6iLB"],"enrUri":"enr:-L24QEZRzMvB1wF-ly7rl4xjQHQN62fcn-9pExXsZABkP8BcOULLTA0-vt5c-WmQqPSRlzFbmuWxNe0s8DnMkM7IVQkCgmlkgnY0gmlwhKwSXpeKbXVsdGlhZGRyc5YACASsEl6XBukxAAoErBJelwbpMt0DgnJzhQADAQAAiXNlY3AyNTZrMaECDBQQN1ueH0vKnvBZ5kw8RGXqyjUEkKuRmqHVUDkUtMSDdGNwgukxg3VkcILpM4V3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image quay.io/wakuorg/nwaku-pr:3234
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-30_13-38-58__b8be70ac-22cb-4193-8f59-7f0125d848a0__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.102.1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['30549', '30550', '30551', '30552', '30553']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 30549:30549 -p 30550:30550 -p 30551:30551 -p 30552:30552 -p 30553:30553 quay.io/wakuorg/nwaku-pr:3234 --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=30551 --rest-port=30549 --tcp-port=30550 --discv5-udp-port=30552 --rest-address=0.0.0.0 --nat=extip:172.18.102.1 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f9b5c3fabda5c9bb7aa9dfc12ee2da2bace8d4db765ebec5ff4ca9f4d4b135ca --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=30553 --metrics-logging=true --relay=false --discv5-bootstrap-node=enr:-L24QEZRzMvB1wF-ly7rl4xjQHQN62fcn-9pExXsZABkP8BcOULLTA0-vt5c-WmQqPSRlzFbmuWxNe0s8DnMkM7IVQkCgmlkgnY0gmlwhKwSXpeKbXVsdGlhZGRyc5YACASsEl6XBukxAAoErBJelwbpMt0DgnJzhQADAQAAiXNlY3AyNTZrMaECDBQQN1ueH0vKnvBZ5kw8RGXqyjUEkKuRmqHVUDkUtMSDdGNwgukxg3VkcILpM4V3YWt1MgU --filternode=/ip4/172.18.94.151/tcp/59697/p2p/16Uiu2HAkvEpci9pvtEm5t6z4SW2NF31KkGKtWAD426rvxWGD6iLB
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.102.1 waku 6bb7127febb0a7cc27b0b5aad6337fba970da92fe0e50aca6d679d8e3013bfa7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 6bb7127febb0. Setting up logs at ./log/docker/node2_2025-01-30_13-38-58__b8be70ac-22cb-4193-8f59-7f0125d848a0__quay.io_wakuorg_nwaku-pr:3234.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image quay.io/wakuorg/nwaku-pr:3234. REST: 30549
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30549/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30549/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.102.1/tcp/30550/p2p/16Uiu2HAmLAaYnjy9dN9DXgNPJgNGsA3qYPdnAVMiCjHDQib29Erw","/ip4/172.18.102.1/tcp/30551/ws/p2p/16Uiu2HAmLAaYnjy9dN9DXgNPJgNGsA3qYPdnAVMiCjHDQib29Erw"],"enrUri":"enr:-L24QKtp9sUq7X5482UXT_GP03_XrBNy7-QiHLx1NMVhn5V2NI-a1Nc5G0HSLhvvKl1kEoT3V6TyxZTZqW4zaxTw6ksCgmlkgnY0gmlwhKwSZgGKbXVsdGlhZGRyc5YACASsEmYBBndWAAoErBJmAQZ3V90DgnJzhQADAQAAiXNlY3AyNTZrMaEDb5ZR7wDzy-v-ejGI209Q7nSgrikOph9r8a-2cDg9IXSDdGNwgndWg3VkcIJ3WIV3YWt1MgA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30549/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.94.151/tcp/59697/p2p/16Uiu2HAkvEpci9pvtEm5t6z4SW2NF31KkGKtWAD426rvxWGD6iLB"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59696/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30549/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "87a18e6f-59ca-4d7a-841b-833249c6322b", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"87a18e6f-59ca-4d7a-841b-833249c6322b","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X PUT "http://127.0.0.1:30549/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1", "extraField": "extraValue"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:30549/filter/v2/subscriptions. Response content: b'{"requestId":"unknown","statusDesc":"BAD_REQUEST: Failed to decode request: (status: 400 Bad Request, headers: , kind: Error, errobj: (status: 400 Bad Request, message: \\"Invalid content body, could not decode. Unable to deserialize data\\", contentType: \\"text/plain\\"))"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id fed72154c6ae
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 6bb7127febb0
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container fed72154c6ae. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.