[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_ping_on_unsubscribed_peer with id: 2024-08-16_03-14-42__2454c885-5e64-44c9-b70c-77300d5ca59e
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node1_2024-08-16_03-14-42__2454c885-5e64-44c9-b70c-77300d5ca59e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.140.170
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['17864', '17865', '17866', '17867', '17868']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:429 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:161 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:163 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 17864:17864 -p 17865:17865 -p 17866:17866 -p 17867:17867 -p 17868:17868 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17866 --rest-port=17864 --tcp-port=17865 --discv5-udp-port=17867 --rest-address=0.0.0.0 --nat=extip:172.18.140.170 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17868 --metrics-logging=true --relay=true --filter=true --nodekey=30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.140.170 waku 85edc1c5a27cbadb8d7f79d670ff67ba6e52791576c9f65732cb85e15028cc6b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 85edc1c5a27c. Setting up logs at ./log/docker/node1_2024-08-16_03-14-42__2454c885-5e64-44c9-b70c-77300d5ca59e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:175 Started container from image wakuorg/nwaku:latest. REST: 17864
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17864/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:275 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17864/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.140.170/tcp/17865/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip","/ip4/172.18.140.170/tcp/17866/ws/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"],"enrUri":"enr:-LO4QFw0y2Pekqr8RVbhnTSySrUfF-10YeCA7MLk0-SgE8uKXdfNQrGQpfo3LHZJqAXQZyjGOai7u_yIsewIcvMOXnwBgmlkgnY0gmlwhKwSjKqKbXVsdGlhZGRyc4wACgSsEoyqBkXK3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCRcmDdWRwgkXLhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:280 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node2_2024-08-16_03-14-42__2454c885-5e64-44c9-b70c-77300d5ca59e__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.122.48
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['25473', '25474', '25475', '25476', '25477']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:429 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:161 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:163 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 25473:25473 -p 25474:25474 -p 25475:25475 -p 25476:25476 -p 25477:25477 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=25475 --rest-port=25473 --tcp-port=25474 --discv5-udp-port=25476 --rest-address=0.0.0.0 --nat=extip:172.18.122.48 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-LO4QFw0y2Pekqr8RVbhnTSySrUfF-10YeCA7MLk0-SgE8uKXdfNQrGQpfo3LHZJqAXQZyjGOai7u_yIsewIcvMOXnwBgmlkgnY0gmlwhKwSjKqKbXVsdGlhZGRyc4wACgSsEoyqBkXK3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCRcmDdWRwgkXLhXdha3UyBQ --filternode=/ip4/172.18.140.170/tcp/17865/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.122.48 waku 1bd60a5e39cb70baf830b75176cbea3b104acbaf6a201830ff83ad7f45325683
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 1bd60a5e39cb. Setting up logs at ./log/docker/node2_2024-08-16_03-14-42__2454c885-5e64-44c9-b70c-77300d5ca59e__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:175 Started container from image wakuorg/go-waku:latest. REST: 25473
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25473/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QBPRe1E--4_W2QN_QjCXkfLgbFB_8ek9vo22i59NZL8heR9irGt05Z_ZYi8b2oUAM_I07Z409NnJVZ-Gx-OPc4eGAZFZLjDWgmlkgnY0gmlwhKwRAAaJc2VjcDI1NmsxoQIG-CQuc9W6giU4UeJJXLi4Dj7tmNTAdZ_gIAnSlW0TPYN0Y3CCY4KDdWRwgmOEhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/25474/p2p/16Uiu2HAkutstCpg6qnHR7SzybHxoykg9PKpcHfdVG1YiMy5kYBSc","/ip4/127.0.0.1/tcp/25475/ws/p2p/16Uiu2HAkutstCpg6qnHR7SzybHxoykg9PKpcHfdVG1YiMy5kYBSc","/ip4/172.17.0.6/tcp/25474/p2p/16Uiu2HAkutstCpg6qnHR7SzybHxoykg9PKpcHfdVG1YiMy5kYBSc","/ip4/172.17.0.6/tcp/25475/ws/p2p/16Uiu2HAkutstCpg6qnHR7SzybHxoykg9PKpcHfdVG1YiMy5kYBSc"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:280 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25473/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.140.170/tcp/17865/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:17864/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25473/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "841b5af0-2b78-489d-81b3-501697d6cf51", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"841b5af0-2b78-489d-81b3-501697d6cf51","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25473/filter/v2/subscriptions/59ba727d-9871-4aac-a270-5055f91d1d43" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"59ba727d-9871-4aac-a270-5055f91d1d43","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X DELETE "http://127.0.0.1:25473/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "12345", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"12345","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25473/filter/v2/subscriptions/eb48f2b8-0bda-4744-80c3-80b161814201" -H "Content-Type: application/json" -d 'None'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:25473/filter/v2/subscriptions/eb48f2b8-0bda-4744-80c3-80b161814201. Response content: b'{"requestId":"eb48f2b8-0bda-4744-80c3-80b161814201","statusDesc":"peer has no subscription"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:219 Stopping container with id 85edc1c5a27c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:219 Stopping container with id 1bd60a5e39cb
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Container stopped.