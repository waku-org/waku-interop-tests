[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_node_not_connected_directly_to_lightpushing_node with id: 2024-09-17_03-12-46__78c66f9f-c0f8-4937-a92a-0febb04eb323
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-17_03-12-46__78c66f9f-c0f8-4937-a92a-0febb04eb323__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-17_03-12-46__78c66f9f-c0f8-4937-a92a-0febb04eb323__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-09-17_03-12-46__78c66f9f-c0f8-4937-a92a-0febb04eb323__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:28 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.177.169
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['46074', '46075', '46076', '46077', '46078']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 46074:46074 -p 46075:46075 -p 46076:46076 -p 46077:46077 -p 46078:46078 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=46076 --rest-port=46074 --tcp-port=46075 --discv5-udp-port=46077 --rest-address=0.0.0.0 --nat=extip:172.18.177.169 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ef8e62afa57ccfe81666c4f60bdca0f82cacab34c3d1bbc1b3ee3cf6f56df24a --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.177.169 waku a148c88362d6124509fd63542f43d1b85b72899ba460fb7907b0ac493db821a7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID a148c88362d6. Setting up logs at ./log/docker/node1_2024-09-17_03-12-46__78c66f9f-c0f8-4937-a92a-0febb04eb323__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 46074
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46074/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QGcFQ_1q5Q8y8JDGuVXM2IUWP_QpTvDdqohW9XKpAh_qVhxzxpyAc9mWEDIl03uZT_aGoJtq-nZ355FxbiWEk6mGAZH99-G0gmlkgnY0gmlwhKwRAAaJc2VjcDI1NmsxoQOgVw7_Ntch5L6mtl3zK6ccmJm8l3gwREFmFONoyl7aZIN0Y3CCs_uDdWRwgrP9hXdha3UyCQ","listenAddresses":["/ip4/127.0.0.1/tcp/46075/p2p/16Uiu2HAmPStaSMtdt8ub38T3XjQo1xw1kfYNqmfydjPEmDpaWcVh","/ip4/127.0.0.1/tcp/46076/ws/p2p/16Uiu2HAmPStaSMtdt8ub38T3XjQo1xw1kfYNqmfydjPEmDpaWcVh","/ip4/172.17.0.6/tcp/46075/p2p/16Uiu2HAmPStaSMtdt8ub38T3XjQo1xw1kfYNqmfydjPEmDpaWcVh","/ip4/172.17.0.6/tcp/46076/ws/p2p/16Uiu2HAmPStaSMtdt8ub38T3XjQo1xw1kfYNqmfydjPEmDpaWcVh"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.62.234
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['16163', '16164', '16165', '16166', '16167']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 16163:16163 -p 16164:16164 -p 16165:16165 -p 16166:16166 -p 16167:16167 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=16165 --rest-port=16163 --tcp-port=16164 --discv5-udp-port=16166 --rest-address=0.0.0.0 --nat=extip:172.18.62.234 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3edc1ce7d3eb1ae2af6f03b9d4db3dc4ed5aadaaf1273fdfe67a7ae359c1e7e0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=16167 --metrics-logging=true --lightpush=true --store=true --relay=true --discv5-bootstrap-node=enr:-Ji4QGcFQ_1q5Q8y8JDGuVXM2IUWP_QpTvDdqohW9XKpAh_qVhxzxpyAc9mWEDIl03uZT_aGoJtq-nZ355FxbiWEk6mGAZH99-G0gmlkgnY0gmlwhKwRAAaJc2VjcDI1NmsxoQOgVw7_Ntch5L6mtl3zK6ccmJm8l3gwREFmFONoyl7aZIN0Y3CCs_uDdWRwgrP9hXdha3UyCQ --lightpushnode=/ip4/172.18.177.169/tcp/46075/p2p/16Uiu2HAmPStaSMtdt8ub38T3XjQo1xw1kfYNqmfydjPEmDpaWcVh
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.62.234 waku 91ef1140407da958b93d6a472b0a1cda86e52662884bcfcf54577e15de7a39f1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 91ef1140407d. Setting up logs at ./log/docker/node2_2024-09-17_03-12-46__78c66f9f-c0f8-4937-a92a-0febb04eb323__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 16163
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16163/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16163/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.62.234/tcp/16164/p2p/16Uiu2HAmB9rGSJDFDsaQwwoR64WxSiY7dEigNJizBrdRD7nCsKt7","/ip4/172.18.62.234/tcp/16165/ws/p2p/16Uiu2HAmB9rGSJDFDsaQwwoR64WxSiY7dEigNJizBrdRD7nCsKt7"],"enrUri":"enr:-LO4QNA4vhajqeGqwQqTIFoBMSLTMrkw5eFVZTRjgZQQv_ITDpXj_133G-_DRnSs9L05YuhXXeloCf4A55vhztpemLIBgmlkgnY0gmlwhKwSPuqKbXVsdGlhZGRyc4wACgSsEj7qBj8l3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLprVRR5qaRPQCp6FEvIERkONVLx4ZMHGFsRfHsd124PIN0Y3CCPySDdWRwgj8mhXdha3UyCw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.244.217
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['34563', '34564', '34565', '34566', '34567']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 34563:34563 -p 34564:34564 -p 34565:34565 -p 34566:34566 -p 34567:34567 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=34565 --rest-port=34563 --tcp-port=34564 --discv5-udp-port=34566 --rest-address=0.0.0.0 --nat=extip:172.18.244.217 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a2a413c6a0a3df72c36aacbfbe7bb38fbd04efde7d5c0fb5896cc7c9ff8cbb9e --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --storenode=/ip4/172.18.62.234/tcp/16164/p2p/16Uiu2HAmB9rGSJDFDsaQwwoR64WxSiY7dEigNJizBrdRD7nCsKt7 --discv5-bootstrap-node=enr:-LO4QNA4vhajqeGqwQqTIFoBMSLTMrkw5eFVZTRjgZQQv_ITDpXj_133G-_DRnSs9L05YuhXXeloCf4A55vhztpemLIBgmlkgnY0gmlwhKwSPuqKbXVsdGlhZGRyc4wACgSsEj7qBj8l3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLprVRR5qaRPQCp6FEvIERkONVLx4ZMHGFsRfHsd124PIN0Y3CCPySDdWRwgj8mhXdha3UyCw
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.244.217 waku 3ae531812347c224eb81a8c9d8e9e075a4149823289289a97b63c1baf06d4480
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 3ae531812347. Setting up logs at ./log/docker/node3_2024-09-17_03-12-46__78c66f9f-c0f8-4937-a92a-0febb04eb323__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 34563
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34563/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QIezxfrevUHRZr315tDSTuwtaPGhtkIC3RhACr22ON7KFLeeCM1QvYYTDvTnpmTs2urV7E7fPpE7haUHCWfz27WGAZH99-1fgmlkgnY0gmlwhKwRAAuJc2VjcDI1NmsxoQKkAeCeJdTxAXlY1FezRZbirxsk0Xvlgrwf0Gx2cwpiwIN0Y3CChwSDdWRwgocGhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/34564/p2p/16Uiu2HAm6TtW7mNvc3VXY2RT9vwHRzaEJH8YQ1E6awLdqAr8ZpDV","/ip4/127.0.0.1/tcp/34565/ws/p2p/16Uiu2HAm6TtW7mNvc3VXY2RT9vwHRzaEJH8YQ1E6awLdqAr8ZpDV","/ip4/172.17.0.11/tcp/34564/p2p/16Uiu2HAm6TtW7mNvc3VXY2RT9vwHRzaEJH8YQ1E6awLdqAr8ZpDV","/ip4/172.17.0.11/tcp/34565/ws/p2p/16Uiu2HAm6TtW7mNvc3VXY2RT9vwHRzaEJH8YQ1E6awLdqAr8ZpDV"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:46074/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16163/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46074/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46074/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46074/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46074/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAmB9rGSJDFDsaQwwoR64WxSiY7dEigNJizBrdRD7nCsKt7","multiaddrs":["/ip4/172.18.62.234/tcp/16164/p2p/16Uiu2HAmB9rGSJDFDsaQwwoR64WxSiY7dEigNJizBrdRD7nCsKt7","/ip4/172.18.62.234/tcp/16165/ws/p2p/16Uiu2HAmB9rGSJDFDsaQwwoR64WxSiY7dEigNJizBrdRD7nCsKt7"],"protocols":["/vac/waku/relay/2.0.0","/vac/waku/store/2.0.0-beta4","/vac/waku/store-query/3.0.0","/vac/waku/lightpush/2.0.0-beta1"],"connected":true,"pubsubTopics":["/waku/2/rs/3/0","/waku/2/rs/3/1"]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16163/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.6/tcp/46075/p2p/16Uiu2HAmPStaSMtdt8ub38T3XjQo1xw1kfYNqmfydjPEmDpaWcVh","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"},{"multiaddr":"/ip4/172.17.0.11/tcp/34564/p2p/16Uiu2HAm6TtW7mNvc3VXY2RT9vwHRzaEJH8YQ1E6awLdqAr8ZpDV","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:46074/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1726542803587378944}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.store:store.py:215 Checking that peer wakuorg/go-waku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34563/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-filter%2Fproto&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"9fa3a9e6ea5cd76299985b73f73342935a8ea7460311f39eb789be9690a6dc19","status_code":200,"status_desc":"OK","messages":[{"message_hash":"C683usOxZtGGVFFowI70mTug2/S6gmdv/AA3Wjbfej8="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id a148c88362d6
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 91ef1140407d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 3ae531812347
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.