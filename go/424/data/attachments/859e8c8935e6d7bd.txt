[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_only_lightpush__peer_full with id: 2025-01-07_03-08-25__8c07bcea-c142-495b-ab5b-bda7e41bb1c4
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-01-07_03-08-25__8c07bcea-c142-495b-ab5b-bda7e41bb1c4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.86.13
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['15284', '15285', '15286', '15287', '15288']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 15284:15284 -p 15285:15285 -p 15286:15286 -p 15287:15287 -p 15288:15288 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15286 --rest-port=15284 --tcp-port=15285 --discv5-udp-port=15287 --rest-address=0.0.0.0 --nat=extip:172.18.86.13 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f9ddc23492143be9efe4bc3b2fbbda7bedbd65af7d0da84bcfc737a277f4e3fd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15288 --metrics-logging=true --lightpush=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.86.13 waku a9fb09edd0ee5fa4011758560dc0a6ba6ebd612ef8163ae731286f8683f36be1
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 5811a5506213. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID a9fb09edd0ee. Setting up logs at ./log/docker/receiving_node1_2025-01-07_03-08-25__8c07bcea-c142-495b-ab5b-bda7e41bb1c4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 15284
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 2b5fbe14d2b4. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15284/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15284/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.86.13/tcp/15285/p2p/16Uiu2HAmSEELXu7jVE3oy9WwebQBdcvVnT96qJTMFLh3NTzA5r4S","/ip4/172.18.86.13/tcp/15286/ws/p2p/16Uiu2HAmSEELXu7jVE3oy9WwebQBdcvVnT96qJTMFLh3NTzA5r4S"],"enrUri":"enr:-L24QGJEpgfdO9PuyMlNCXTfkav-n7TP0Sjx7JtKFEyNa65zCvMSVUX_An5l3wkCddclI_FizCfqeNs41GWTTLMOhnMCgmlkgnY0gmlwhKwSVg2KbXVsdGlhZGRyc5YACASsElYNBju1AAoErBJWDQY7tt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDyavpbt9lkMU9PkMGX4X6ddq2ADZXXEWwCNDyC4wlwHuDdGNwgju1g3VkcII7t4V3YWt1Mg0"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-01-07_03-08-25__8c07bcea-c142-495b-ab5b-bda7e41bb1c4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.89.66
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['21154', '21155', '21156', '21157', '21158']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 21154:21154 -p 21155:21155 -p 21156:21156 -p 21157:21157 -p 21158:21158 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=21156 --rest-port=21154 --tcp-port=21155 --discv5-udp-port=21157 --rest-address=0.0.0.0 --nat=extip:172.18.89.66 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=46a2cf8ca59a0b3ae945b0586b628182ca8d326fc90ec03dfb7eb4fb4af20668 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=21158 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.89.66 waku 9a0b192f0dba47702e5278cacbf3b4ed66ac2e7c1c65d5239a234b22664fd91e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 9a0b192f0dba. Setting up logs at ./log/docker/receiving_node2_2025-01-07_03-08-25__8c07bcea-c142-495b-ab5b-bda7e41bb1c4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 21154
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21154/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21154/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.89.66/tcp/21155/p2p/16Uiu2HAm9P2E2gjeQZtYLsXoFaxgWMo9FHP1dSZREN9RYx3QRCa2","/ip4/172.18.89.66/tcp/21156/ws/p2p/16Uiu2HAm9P2E2gjeQZtYLsXoFaxgWMo9FHP1dSZREN9RYx3QRCa2"],"enrUri":"enr:-L24QHYQVdkVr3hanfSBMnLKoBqFbkdrQOdbhmksLpD-jQYEY20R_57QXmPCqIISQ3W7r32xMYurLY-3DSrwIrYMWQsCgmlkgnY0gmlwhKwSWUKKbXVsdGlhZGRyc5YACASsEllCBlKjAAoErBJZQgZSpN0DgnJzhQADAQAAiXNlY3AyNTZrMaECz1XEImbWBJT1rTbfhq7rYBoYXgsE5-T-xQPMN6BBBLeDdGNwglKjg3VkcIJSpYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21154/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.86.13/tcp/15285/p2p/16Uiu2HAmSEELXu7jVE3oy9WwebQBdcvVnT96qJTMFLh3NTzA5r4S"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-01-07_03-08-25__8c07bcea-c142-495b-ab5b-bda7e41bb1c4__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.112.16
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['35193', '35194', '35195', '35196', '35197']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 35193:35193 -p 35194:35194 -p 35195:35195 -p 35196:35196 -p 35197:35197 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=35195 --rest-port=35193 --tcp-port=35194 --discv5-udp-port=35196 --rest-address=0.0.0.0 --nat=extip:172.18.112.16 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ca9c0eff70af92ddb45b75ebe5d3cec5120762f8d8a77e7bb0255c13b1ea1c3b --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QGJEpgfdO9PuyMlNCXTfkav-n7TP0Sjx7JtKFEyNa65zCvMSVUX_An5l3wkCddclI_FizCfqeNs41GWTTLMOhnMCgmlkgnY0gmlwhKwSVg2KbXVsdGlhZGRyc5YACASsElYNBju1AAoErBJWDQY7tt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDyavpbt9lkMU9PkMGX4X6ddq2ADZXXEWwCNDyC4wlwHuDdGNwgju1g3VkcII7t4V3YWt1Mg0 --lightpushnode=/ip4/172.18.86.13/tcp/15285/p2p/16Uiu2HAmSEELXu7jVE3oy9WwebQBdcvVnT96qJTMFLh3NTzA5r4S --lightpush=true --relay=false --pubsub-topic=/waku/2/rs/3/1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.112.16 waku 075d44cbc913d22aed5fe61369decab71a06b5cd32acb2032643b9416a2c23b4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 075d44cbc913. Setting up logs at ./log/docker/lightpush_node1_2025-01-07_03-08-25__8c07bcea-c142-495b-ab5b-bda7e41bb1c4__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 35193
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35193/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QAz9rLVlbEuTqLQO5lOBzSAm4lWm-UFVX1aQlS4gEMqiATrr8TyKYmqwYFCzxeiaw3uFXwnrLWuA_j61THGqHvSGAZQ-vDOAgmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQITQ6yWmEv5Vn887h7FuDG6dMYALX0Yh7vvxvfq2zbjBYN0Y3CCiXqDdWRwgol8hXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/35194/p2p/16Uiu2HAkvisaTSCCYXjQRXd4nE19kCD7TS4aHsqyWvGVxKJRUiyz","/ip4/127.0.0.1/tcp/35195/ws/p2p/16Uiu2HAkvisaTSCCYXjQRXd4nE19kCD7TS4aHsqyWvGVxKJRUiyz","/ip4/172.17.0.4/tcp/35194/p2p/16Uiu2HAkvisaTSCCYXjQRXd4nE19kCD7TS4aHsqyWvGVxKJRUiyz","/ip4/172.17.0.4/tcp/35195/ws/p2p/16Uiu2HAkvisaTSCCYXjQRXd4nE19kCD7TS4aHsqyWvGVxKJRUiyz"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35193/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.86.13/tcp/15285/p2p/16Uiu2HAmSEELXu7jVE3oy9WwebQBdcvVnT96qJTMFLh3NTzA5r4S", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35193/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.89.66/tcp/21155/p2p/16Uiu2HAm9P2E2gjeQZtYLsXoFaxgWMo9FHP1dSZREN9RYx3QRCa2", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15284/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21154/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35193/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1736219309966796544}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15284/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1736219309966796544,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21154/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1736219309966796544,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id a9fb09edd0ee
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 9a0b192f0dba
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container a9fb09edd0ee. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 075d44cbc913
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.