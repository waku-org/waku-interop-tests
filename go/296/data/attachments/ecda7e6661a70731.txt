[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_pubsub_topics with id: 2024-10-01_03-30-26__86fa62f4-9c52-482e-bebd-b51aebec3449
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-10-01_03-30-26__86fa62f4-9c52-482e-bebd-b51aebec3449__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.108.106
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['44067', '44068', '44069', '44070', '44071']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 44067:44067 -p 44068:44068 -p 44069:44069 -p 44070:44070 -p 44071:44071 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44069 --rest-port=44067 --tcp-port=44068 --discv5-udp-port=44070 --rest-address=0.0.0.0 --nat=extip:172.18.108.106 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2e58fdaaa246ba4b25774e5c46bac1efe2cc82fc7bc87b51cde4d05e3d03a6c4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44071 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.108.106 waku 77ca751a4d443f87946034902c7f872c543f31c8bfd7b19b8b9124568497a75c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 77ca751a4d44. Setting up logs at ./log/docker/receiving_node1_2024-10-01_03-30-26__86fa62f4-9c52-482e-bebd-b51aebec3449__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 44067
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44067/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44067/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.108.106/tcp/44068/p2p/16Uiu2HAkxVYHZYAbYNsHnjYmzyurmbFMXNzmu5XMZHeewepmdnhk","/ip4/172.18.108.106/tcp/44069/ws/p2p/16Uiu2HAkxVYHZYAbYNsHnjYmzyurmbFMXNzmu5XMZHeewepmdnhk"],"enrUri":"enr:-LO4QOMDuEEedZuUY7SANpKZXFKtGauwOVrs3Cd58RpmG-0FNYbEkLrfj7MMd-CLWQY6KkCV7D5GIjEm_fyJ9IuBpMEBgmlkgnY0gmlwhKwSbGqKbXVsdGlhZGRyc4wACgSsEmxqBqwl3QOCcnOFAAMBAACJc2VjcDI1NmsxoQItkK9NkTonp6rtttWBxSPeNMrkletD_z4_s6Bv9tLCj4N0Y3CCrCSDdWRwgqwmhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-10-01_03-30-26__86fa62f4-9c52-482e-bebd-b51aebec3449__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.8.144
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['19707', '19708', '19709', '19710', '19711']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 19707:19707 -p 19708:19708 -p 19709:19709 -p 19710:19710 -p 19711:19711 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19709 --rest-port=19707 --tcp-port=19708 --discv5-udp-port=19710 --rest-address=0.0.0.0 --nat=extip:172.18.8.144 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fa022cd9c10bc4bffad85aefeefc4a0ff0548c93480613bbbbe9bb0e01d15ca8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19711 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.8.144 waku e03a890c68bad10a100a09079a81fff7031f760feaf9221777efdd6399f88ac0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID e03a890c68ba. Setting up logs at ./log/docker/receiving_node2_2024-10-01_03-30-26__86fa62f4-9c52-482e-bebd-b51aebec3449__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 19707
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19707/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19707/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.8.144/tcp/19708/p2p/16Uiu2HAm58twZceHGeM4WTe5R6RDmBKsRRrQGUj1hR6w9ktek5Xn","/ip4/172.18.8.144/tcp/19709/ws/p2p/16Uiu2HAm58twZceHGeM4WTe5R6RDmBKsRRrQGUj1hR6w9ktek5Xn"],"enrUri":"enr:-LO4QHRm-uxfqNBRpoW5o4jXykD57Y0ScBjor2P2FL9iwkryLIL-c5vIA2ZfdE78fEg8r987ZvmYzsjdpAGm4mpdwnEBgmlkgnY0gmlwhKwSCJCKbXVsdGlhZGRyc4wACgSsEgiQBkz93QOCcnOFAAMBAACJc2VjcDI1NmsxoQKQSKazaOS3nCfU4OtIV3nn1btSi__uSs-P4tkJhbArMYN0Y3CCTPyDdWRwgkz-hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19707/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.108.106/tcp/44068/p2p/16Uiu2HAkxVYHZYAbYNsHnjYmzyurmbFMXNzmu5XMZHeewepmdnhk"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-10-01_03-30-26__86fa62f4-9c52-482e-bebd-b51aebec3449__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.251.195
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['31507', '31508', '31509', '31510', '31511']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 31507:31507 -p 31508:31508 -p 31509:31509 -p 31510:31510 -p 31511:31511 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=31509 --rest-port=31507 --tcp-port=31508 --discv5-udp-port=31510 --rest-address=0.0.0.0 --nat=extip:172.18.251.195 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a00168ca6cfbfa58cc62add09fcb343a5eb1b641cee6ef3eadca2cccf8ecc900 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-LO4QOMDuEEedZuUY7SANpKZXFKtGauwOVrs3Cd58RpmG-0FNYbEkLrfj7MMd-CLWQY6KkCV7D5GIjEm_fyJ9IuBpMEBgmlkgnY0gmlwhKwSbGqKbXVsdGlhZGRyc4wACgSsEmxqBqwl3QOCcnOFAAMBAACJc2VjcDI1NmsxoQItkK9NkTonp6rtttWBxSPeNMrkletD_z4_s6Bv9tLCj4N0Y3CCrCSDdWRwgqwmhXdha3UyCQ --lightpushnode=/ip4/172.18.108.106/tcp/44068/p2p/16Uiu2HAkxVYHZYAbYNsHnjYmzyurmbFMXNzmu5XMZHeewepmdnhk --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.251.195 waku 1755d800cf545dd5a114f31dd606182516be5a0916d6efd8837eceb36136d605
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 1755d800cf54. Setting up logs at ./log/docker/lightpush_node1_2024-10-01_03-30-26__86fa62f4-9c52-482e-bebd-b51aebec3449__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 31507
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31507/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QBzlPRy_A9xBY4A_R6_mbgc1IdTwlJ8UxEKPkmh1C1OzUV0OPQSgPl9_FTlz68vBvaxcJ6VnQv1YCXQIe8q0G--GAZJGIShZgmlkgnY0gmlwhKwRAAuJc2VjcDI1NmsxoQIeHWhknf3Pm0bJQgA9cw62nRb7mvtgsEx53evgqGWhrIN0Y3CCexSDdWRwgnsWhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/31508/p2p/16Uiu2HAkwTEDg5G5Ej9r537jNTi8H4DB4FDbcFfPJ7TVbJ17LjrK","/ip4/127.0.0.1/tcp/31509/ws/p2p/16Uiu2HAkwTEDg5G5Ej9r537jNTi8H4DB4FDbcFfPJ7TVbJ17LjrK","/ip4/172.17.0.11/tcp/31508/p2p/16Uiu2HAkwTEDg5G5Ej9r537jNTi8H4DB4FDbcFfPJ7TVbJ17LjrK","/ip4/172.17.0.11/tcp/31509/ws/p2p/16Uiu2HAkwTEDg5G5Ej9r537jNTi8H4DB4FDbcFfPJ7TVbJ17LjrK"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31507/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.108.106/tcp/44068/p2p/16Uiu2HAkxVYHZYAbYNsHnjYmzyurmbFMXNzmu5XMZHeewepmdnhk", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31507/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.8.144/tcp/19708/p2p/16Uiu2HAm58twZceHGeM4WTe5R6RDmBKsRRrQGUj1hR6w9ktek5Xn", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44067/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19707/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A dictionary', 'value': {'key': 'YWFh'}}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31507/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": {"key": "YWFh"}, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1727753432158116096}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:31507/lightpush/v1/message. Response content: b''
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'An integer', 'value': 1234567890}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31507/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": 1234567890, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1727753432164454400}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:31507/lightpush/v1/message. Response content: b''
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A list', 'value': ['YWFh']}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31507/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": ["YWFh"], "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1727753432171205376}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:31507/lightpush/v1/message. Response content: b''
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A bool', 'value': True}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31507/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": true, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1727753432178834944}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:31507/lightpush/v1/message. Response content: b''
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 77ca751a4d44
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id e03a890c68ba
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 1755d800cf54
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.