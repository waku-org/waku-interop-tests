[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_filter_ping_on_unsubscribed_peer with id: 2024-03-29_03-09-23__8c81b8d4-ad71-4d47-910d-dc98b8811f33
[35mDEBUG   [0m src.steps.filter:filter.py:27 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:33 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:50 WakuNode instance initialized with log path ./log/docker/node1_2024-03-29_03-09-23__8c81b8d4-ad71-4d47-910d-dc98b8811f33__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:54 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.waku_node:waku_node.py:54 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.18.16
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['51143', '51144', '51145', '51146', '51147']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:279 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:115 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 51143:51143 -p 51144:51144 -p 51145:51145 -p 51146:51146 -p 51147:51147 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=51145 --rest-port=51143 --tcp-port=51144 --discv5-udp-port=51146 --rest-address=0.0.0.0 --nat=extip:172.18.18.16 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=51147 --metrics-logging=true --relay=true --filter=true --nodekey=30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.18.16 waku 9c09fd3ebfa305513bc1cb5fbb08b906e34251a6368f9554f1a1727fa23f5621
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 9c09fd3ebfa3. Setting up logs at ./log/docker/node1_2024-03-29_03-09-23__8c81b8d4-ad71-4d47-910d-dc98b8811f33__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:121 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 51143
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:38 curl -v -X GET "http://127.0.0.1:51143/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:23 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.18.16/tcp/51144/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip","/ip4/172.18.18.16/tcp/51145/ws/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"],"enrUri":"enr:-LG4QBlnJ4gmn6UzObJHwX9-G-rN_CBSg1tQe9c0e9poko70WKC_SuyVTuphgJbFkK1-ASIlT9wJPq60otfkKWXFY-EBgmlkgnY0gmlwhKwSEhCKbXVsdGlhZGRyc4wACgSsEhIQBsfJ3QOCcnODAAAAiXNlY3AyNTZrMaEDN06qX-XhZ-Cc7ZuIAdGNCVUicscmbFvEEfkFOQ2W_j2DdGNwgsfIg3VkcILHyoV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:191 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:38 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:50 WakuNode instance initialized with log path ./log/docker/node2_2024-03-29_03-09-23__8c81b8d4-ad71-4d47-910d-dc98b8811f33__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:54 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.206.130
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['7289', '7290', '7291', '7292', '7293']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:279 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:115 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 7289:7289 -p 7290:7290 -p 7291:7291 -p 7292:7292 -p 7293:7293 harbor.status.im/wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=7291 --rest-port=7289 --tcp-port=7290 --discv5-udp-port=7292 --rest-address=0.0.0.0 --nat=extip:172.18.206.130 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --relay=false --discv5-bootstrap-node=enr:-LG4QBlnJ4gmn6UzObJHwX9-G-rN_CBSg1tQe9c0e9poko70WKC_SuyVTuphgJbFkK1-ASIlT9wJPq60otfkKWXFY-EBgmlkgnY0gmlwhKwSEhCKbXVsdGlhZGRyc4wACgSsEhIQBsfJ3QOCcnODAAAAiXNlY3AyNTZrMaEDN06qX-XhZ-Cc7ZuIAdGNCVUicscmbFvEEfkFOQ2W_j2DdGNwgsfIg3VkcILHyoV3YWt1MgU --filternode=/ip4/172.18.18.16/tcp/51144/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.206.130 waku fc2cd707b4645f989d1977d3431afb64871080e5247efeb5ed4aca65d1798ae4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID fc2cd707b464. Setting up logs at ./log/docker/node2_2024-03-29_03-09-23__8c81b8d4-ad71-4d47-910d-dc98b8811f33__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:121 Started container from image harbor.status.im/wakuorg/go-waku:latest. REST: 7289
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:38 curl -v -X GET "http://127.0.0.1:7289/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:23 Response status code: 200. Response content: b'{"enrUri":"enr:-Ly4QNimbnGsS4A-HtsWBV4rdPg8ai2sG2-WmZHcBUbTp5HAVTKQ5MayQxqS6J-L4Rw5Jjo62g-SW0U8DVYT8Z39ejKGAY6IL1ApgmlkgnY0gmlwhKwRAAeKbXVsdGlhZGRyc5gACgSsEQAHBhx73QMACgR_AAABBhx73QOJc2VjcDI1NmsxoQM4I0UI7-WtDXf_e3MTYyxadywfRvybU9HzFVnb2tqRxIN0Y3CCHHqDdWRwghx8hXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/7290/p2p/16Uiu2HAmGS8Nfep8TZTvv5Wex4oDu3bs9Y3ttVsxY9aozWtSbZDD","/ip4/127.0.0.1/tcp/7291/ws/p2p/16Uiu2HAmGS8Nfep8TZTvv5Wex4oDu3bs9Y3ttVsxY9aozWtSbZDD","/ip4/172.17.0.7/tcp/7290/p2p/16Uiu2HAmGS8Nfep8TZTvv5Wex4oDu3bs9Y3ttVsxY9aozWtSbZDD","/ip4/172.17.0.7/tcp/7291/ws/p2p/16Uiu2HAmGS8Nfep8TZTvv5Wex4oDu3bs9Y3ttVsxY9aozWtSbZDD"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:191 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:45 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:38 curl -v -X POST "http://127.0.0.1:51143/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:23 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:38 curl -v -X POST "http://127.0.0.1:7289/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "59b1a71f-fbd7-427c-af74-fe5b577bc477", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/0/1"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:17 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:7289/filter/v2/subscriptions. Response content: b'{"requestId":"59b1a71f-fbd7-427c-af74-fe5b577bc477","statusDesc":"subscription failed"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:38 curl -v -X POST "http://127.0.0.1:7289/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "59b1a71f-fbd7-427c-af74-fe5b577bc477", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/0/1"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:17 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:7289/filter/v2/subscriptions. Response content: b'{"requestId":"59b1a71f-fbd7-427c-af74-fe5b577bc477","statusDesc":"subscription failed"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:38 curl -v -X POST "http://127.0.0.1:7289/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "59b1a71f-fbd7-427c-af74-fe5b577bc477", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/0/1"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:17 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:7289/filter/v2/subscriptions. Response content: b'{"requestId":"59b1a71f-fbd7-427c-af74-fe5b577bc477","statusDesc":"subscription failed"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:38 curl -v -X POST "http://127.0.0.1:7289/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "59b1a71f-fbd7-427c-af74-fe5b577bc477", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/0/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:23 Response status code: 200. Response content: b'{"requestId":"59b1a71f-fbd7-427c-af74-fe5b577bc477","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:38 curl -v -X GET "http://127.0.0.1:7289/filter/v2/subscriptions/9ce207da-d139-446b-a1eb-2f361dcfb666" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:23 Response status code: 200. Response content: b'{"requestId":"9ce207da-d139-446b-a1eb-2f361dcfb666","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:38 curl -v -X DELETE "http://127.0.0.1:7289/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "12345", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/0/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:23 Response status code: 200. Response content: b'{"requestId":"12345","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:38 curl -v -X GET "http://127.0.0.1:7289/filter/v2/subscriptions/9008a9a6-7a49-4324-98a9-3e86a747beb5" -H "Content-Type: application/json" -d 'None'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:17 HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:7289/filter/v2/subscriptions/9008a9a6-7a49-4324-98a9-3e86a747beb5. Response content: b'{"requestId":"9008a9a6-7a49-4324-98a9-3e86a747beb5","statusDesc":"peer has no subscription"}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:168 Stopping container with id 9c09fd3ebfa3
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:168 Stopping container with id fc2cd707b464
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Container stopped.