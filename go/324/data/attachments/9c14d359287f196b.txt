[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_node_not_connected_directly_to_lightpushing_node with id: 2024-10-27_10-31-13__06ddd00b-9118-4dd4-b567-495badfe641a
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-27_10-31-13__06ddd00b-9118-4dd4-b567-495badfe641a__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-10-27_10-31-13__06ddd00b-9118-4dd4-b567-495badfe641a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-10-27_10-31-13__06ddd00b-9118-4dd4-b567-495badfe641a__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.194.144
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['40903', '40904', '40905', '40906', '40907']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 40903:40903 -p 40904:40904 -p 40905:40905 -p 40906:40906 -p 40907:40907 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=40905 --rest-port=40903 --tcp-port=40904 --discv5-udp-port=40906 --rest-address=0.0.0.0 --nat=extip:172.18.194.144 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2e52befc6c4c95cedf67fa6165fdc5cb7a5ecccce99f41e9a91a851ba9dedcb1 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.194.144 waku 1d60ccf5badb04d0ead89415a22236f468d94a9f25e60208fc9dc620c059733b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 1d60ccf5badb. Setting up logs at ./log/docker/node1_2024-10-27_10-31-13__06ddd00b-9118-4dd4-b567-495badfe641a__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 40903
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container b9375bc2f200. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40903/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QJMQW_vLmd8aACqttEc7DtPQ9sZVIXVfgJxyC5o8sVBQInXfX_rCE6VgrDVAIX6Ph9jTVkedyeXrWxleMkTRfSiGAZLNh6sWgmlkgnY0gmlwhKwRAAKJc2VjcDI1NmsxoQN9TOPZUpsUogXxmNNLlVuoycJEubDWlrHrav7BipXxbIN0Y3CCn8iDdWRwgp_KhXdha3UyCQ","listenAddresses":["/ip4/127.0.0.1/tcp/40904/p2p/16Uiu2HAmM67KDBwxTXQMVAwXa2GAoCXrwZUTc531jpgo24M6JaJw","/ip4/127.0.0.1/tcp/40905/ws/p2p/16Uiu2HAmM67KDBwxTXQMVAwXa2GAoCXrwZUTc531jpgo24M6JaJw","/ip4/172.17.0.2/tcp/40904/p2p/16Uiu2HAmM67KDBwxTXQMVAwXa2GAoCXrwZUTc531jpgo24M6JaJw","/ip4/172.17.0.2/tcp/40905/ws/p2p/16Uiu2HAmM67KDBwxTXQMVAwXa2GAoCXrwZUTc531jpgo24M6JaJw"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.36.130
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['27950', '27951', '27952', '27953', '27954']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 27950:27950 -p 27951:27951 -p 27952:27952 -p 27953:27953 -p 27954:27954 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27952 --rest-port=27950 --tcp-port=27951 --discv5-udp-port=27953 --rest-address=0.0.0.0 --nat=extip:172.18.36.130 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9f2f74b78cec0fdafeea321236bf1fbfa7acdab6f727ce4dc373cea68afcd3a8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27954 --metrics-logging=true --lightpush=true --store=true --relay=true --discv5-bootstrap-node=enr:-Ji4QJMQW_vLmd8aACqttEc7DtPQ9sZVIXVfgJxyC5o8sVBQInXfX_rCE6VgrDVAIX6Ph9jTVkedyeXrWxleMkTRfSiGAZLNh6sWgmlkgnY0gmlwhKwRAAKJc2VjcDI1NmsxoQN9TOPZUpsUogXxmNNLlVuoycJEubDWlrHrav7BipXxbIN0Y3CCn8iDdWRwgp_KhXdha3UyCQ --lightpushnode=/ip4/172.18.194.144/tcp/40904/p2p/16Uiu2HAmM67KDBwxTXQMVAwXa2GAoCXrwZUTc531jpgo24M6JaJw
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.36.130 waku 54d24ce2264d507420e811b064f4cbe0afe402f54b4cd9840fb39e69d84cf8dc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 54d24ce2264d. Setting up logs at ./log/docker/node2_2024-10-27_10-31-13__06ddd00b-9118-4dd4-b567-495badfe641a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 27950
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27950/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27950/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.36.130/tcp/27951/p2p/16Uiu2HAm6XTr9kuKWJvb55gfYwyhCo2Xs32dQWkAAjRCxQGQVM19","/ip4/172.18.36.130/tcp/27952/ws/p2p/16Uiu2HAm6XTr9kuKWJvb55gfYwyhCo2Xs32dQWkAAjRCxQGQVM19"],"enrUri":"enr:-LO4QEB30aOkQc6i970VVFGivRUg1jVuh1lxpINgfj4-BFbZMnt35yibR4fT0oE_oRmjjYKKG3KnPCsXqHrH4sMq3IEBgmlkgnY0gmlwhKwSJIKKbXVsdGlhZGRyc4wACgSsEiSCBm0w3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKk7FLZMVxLGs3D2dO9mfxVFI7FEFz-nkWP8fn-4IoASIN0Y3CCbS-DdWRwgm0xhXdha3UyCw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.17.223
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['29718', '29719', '29720', '29721', '29722']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 29718:29718 -p 29719:29719 -p 29720:29720 -p 29721:29721 -p 29722:29722 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=29720 --rest-port=29718 --tcp-port=29719 --discv5-udp-port=29721 --rest-address=0.0.0.0 --nat=extip:172.18.17.223 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f0ccb3dd10ccd3d3c9cdbff163fc7637be61effbbc9bb6ce3efb5c128dc5dc6b --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --storenode=/ip4/172.18.36.130/tcp/27951/p2p/16Uiu2HAm6XTr9kuKWJvb55gfYwyhCo2Xs32dQWkAAjRCxQGQVM19 --discv5-bootstrap-node=enr:-LO4QEB30aOkQc6i970VVFGivRUg1jVuh1lxpINgfj4-BFbZMnt35yibR4fT0oE_oRmjjYKKG3KnPCsXqHrH4sMq3IEBgmlkgnY0gmlwhKwSJIKKbXVsdGlhZGRyc4wACgSsEiSCBm0w3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKk7FLZMVxLGs3D2dO9mfxVFI7FEFz-nkWP8fn-4IoASIN0Y3CCbS-DdWRwgm0xhXdha3UyCw
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.17.223 waku 0c18de5700d81c5c3d251ea47c1343d8ac2c96b25ba52ca293adba698749a416
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 0c18de5700d8. Setting up logs at ./log/docker/node3_2024-10-27_10-31-13__06ddd00b-9118-4dd4-b567-495badfe641a__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 29718
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29718/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QAf6WeRZEa0XfuRsNgmsh0jNnQDcBd2q7fwnBEjbBurofTH4gzp6Rs5gB6slIX6NysOw_GsgDE7uXIbtgLtSKT-GAZLNh7mlgmlkgnY0gmlwhKwRAAWJc2VjcDI1NmsxoQJOFNzR0ICKx8Hk0860gcRLjVDo9rwuwxgwHhxrX3AqhIN0Y3CCdBeDdWRwgnQZhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/29719/p2p/16Uiu2HAkzgUENfbRH2pksC7rMRuX1xkPdjj2cFjx4CpW9rj6vEom","/ip4/127.0.0.1/tcp/29720/ws/p2p/16Uiu2HAkzgUENfbRH2pksC7rMRuX1xkPdjj2cFjx4CpW9rj6vEom","/ip4/172.17.0.5/tcp/29719/p2p/16Uiu2HAkzgUENfbRH2pksC7rMRuX1xkPdjj2cFjx4CpW9rj6vEom","/ip4/172.17.0.5/tcp/29720/ws/p2p/16Uiu2HAkzgUENfbRH2pksC7rMRuX1xkPdjj2cFjx4CpW9rj6vEom"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40903/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27950/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40903/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40903/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40903/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAm6XTr9kuKWJvb55gfYwyhCo2Xs32dQWkAAjRCxQGQVM19","multiaddrs":["/ip4/172.18.36.130/tcp/27951/p2p/16Uiu2HAm6XTr9kuKWJvb55gfYwyhCo2Xs32dQWkAAjRCxQGQVM19","/ip4/172.18.36.130/tcp/27952/ws/p2p/16Uiu2HAm6XTr9kuKWJvb55gfYwyhCo2Xs32dQWkAAjRCxQGQVM19"],"protocols":["/vac/waku/relay/2.0.0","/vac/waku/store/2.0.0-beta4","/vac/waku/lightpush/2.0.0-beta1","/vac/waku/store-query/3.0.0"],"connected":true,"pubsubTopics":["/waku/2/rs/3/0","/waku/2/rs/3/1"]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27950/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.2/tcp/40904/p2p/16Uiu2HAmM67KDBwxTXQMVAwXa2GAoCXrwZUTc531jpgo24M6JaJw","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"},{"multiaddr":"/ip4/172.17.0.5/tcp/29719/p2p/16Uiu2HAkzgUENfbRH2pksC7rMRuX1xkPdjj2cFjx4CpW9rj6vEom","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40903/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1730025110320846080}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/go-waku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29718/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-filter%2Fproto&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"df7297ad08a6fd7e4471b09cd4f29ae81d7423f41be4f9e57dffcd93b4da3185","status_code":200,"status_desc":"OK","messages":[{"message_hash":"LfAjecyh9K6DmhIe1W771Mcn2eKVq2DtZLcxyrSVTZ8="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 1d60ccf5badb
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 54d24ce2264d
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 1d60ccf5badb. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 0c18de5700d8
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 54d24ce2264d. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.