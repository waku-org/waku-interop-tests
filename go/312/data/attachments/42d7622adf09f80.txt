[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_relay_and_store__peer_only_store with id: 2024-10-17_03-26-01__b96db294-2317-4965-bd9c-2d771a68f8fa
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-10-17_03-26-01__b96db294-2317-4965-bd9c-2d771a68f8fa__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.23.221
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['44720', '44721', '44722', '44723', '44724']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 44720:44720 -p 44721:44721 -p 44722:44722 -p 44723:44723 -p 44724:44724 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44722 --rest-port=44720 --tcp-port=44721 --discv5-udp-port=44723 --rest-address=0.0.0.0 --nat=extip:172.18.23.221 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9dae0fabb5974efce431c6c5fe79dd63bb5bbf13ec1af32925ffecaae0ffcdbe --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44724 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.132.18
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['1805', '1806', '1807', '1808', '1809']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 1805:1805 -p 1806:1806 -p 1807:1807 -p 1808:1808 -p 1809:1809 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=1807 --rest-port=1805 --tcp-port=1806 --discv5-udp-port=1808 --rest-address=0.0.0.0 --nat=extip:172.18.132.18 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bc46f7b61257ad37c9ef5adfbe7698f1fcbe4ec9efc72e8858ef9eec6164dc5b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=1809 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.132.18 waku 2e4e5f7e77a6223d4c542b8d5884ecb8fb524f1baae96a47b358414d9463265a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 2e4e5f7e77a6. Setting up logs at ./log/docker/publishing_node1_2024-10-17_03-26-01__b96db294-2317-4965-bd9c-2d771a68f8fa__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 1805
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1805/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1805/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.132.18/tcp/1806/p2p/16Uiu2HAmK9sNu9BauLB4uvtkF1jeaAZEPhHhze6VYnLy3vmGoAwX","/ip4/172.18.132.18/tcp/1807/ws/p2p/16Uiu2HAmK9sNu9BauLB4uvtkF1jeaAZEPhHhze6VYnLy3vmGoAwX"],"enrUri":"enr:-LO4QFi4A0gH9hc2Lu5IV5D75DJ72Nw5QFkZHMDXKVXpKXrGPxWgjKkZmL_HhbU3QkD5KWFoUmYMRV99b1aMIRRs2G0BgmlkgnY0gmlwhKwShBKKbXVsdGlhZGRyc4wACgSsEoQSBgcP3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNgjBTb9lNDXHDR-4R17dv9iMk_7iq9VROhlpEjTs2jfoN0Y3CCBw6DdWRwggcQhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2024-10-17_03-26-01__b96db294-2317-4965-bd9c-2d771a68f8fa__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.227.113
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['30544', '30545', '30546', '30547', '30548']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 30544:30544 -p 30545:30545 -p 30546:30546 -p 30547:30547 -p 30548:30548 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=30546 --rest-port=30544 --tcp-port=30545 --discv5-udp-port=30547 --rest-address=0.0.0.0 --nat=extip:172.18.227.113 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d8ec8bda5d76898dbf8e0aca29d9bcec7eb1fb873fdcd53abc1ae5a590430e8a --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-LO4QFi4A0gH9hc2Lu5IV5D75DJ72Nw5QFkZHMDXKVXpKXrGPxWgjKkZmL_HhbU3QkD5KWFoUmYMRV99b1aMIRRs2G0BgmlkgnY0gmlwhKwShBKKbXVsdGlhZGRyc4wACgSsEoQSBgcP3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNgjBTb9lNDXHDR-4R17dv9iMk_7iq9VROhlpEjTs2jfoN0Y3CCBw6DdWRwggcQhXdha3UyAw --storenode=/ip4/172.18.132.18/tcp/1806/p2p/16Uiu2HAmK9sNu9BauLB4uvtkF1jeaAZEPhHhze6VYnLy3vmGoAwX --store=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.227.113 waku 5fa8b43a598ba41addf11898f22649887c5cc9e70c0b57b5a1b33d4c62147bca
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 5fa8b43a598b. Setting up logs at ./log/docker/store_node1_2024-10-17_03-26-01__b96db294-2317-4965-bd9c-2d771a68f8fa__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 30544
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30544/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QIcU89OqmnahBmpzoy5-wnFDPHT4Maf_d1e6UwM3F7wVHVHAeTjFH3RhPVONJoTB_fd9WSM2eCzfMNqDlhg-FV6GAZKYgto7gmlkgnY0gmlwhKwRAAeJc2VjcDI1NmsxoQOXjB-yalM6YUK5SYs0t9EkdgX_BQWQp2pMVeCJ8szZm4N0Y3CCd1GDdWRwgndThXdha3UyAg","listenAddresses":["/ip4/127.0.0.1/tcp/30545/p2p/16Uiu2HAmNrZqdLJNEe7VYZtZTtBBWcvffVRoE3KtCHEa6FzrNqSz","/ip4/127.0.0.1/tcp/30546/ws/p2p/16Uiu2HAmNrZqdLJNEe7VYZtZTtBBWcvffVRoE3KtCHEa6FzrNqSz","/ip4/172.17.0.7/tcp/30545/p2p/16Uiu2HAmNrZqdLJNEe7VYZtZTtBBWcvffVRoE3KtCHEa6FzrNqSz","/ip4/172.17.0.7/tcp/30546/ws/p2p/16Uiu2HAmNrZqdLJNEe7VYZtZTtBBWcvffVRoE3KtCHEa6FzrNqSz"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30544/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.132.18/tcp/1806/p2p/16Uiu2HAmK9sNu9BauLB4uvtkF1jeaAZEPhHhze6VYnLy3vmGoAwX", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1805/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1805/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1805/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 2e4e5f7e77a6
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 5fa8b43a598b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.