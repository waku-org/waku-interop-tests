{"uid":"972bdd6fe1cd3a5a","name":"test_main_node_only_lightpush__peer_only_lightpush","fullName":"tests.light_push.test_running_nodes.TestRunningNodes#test_main_node_only_lightpush__peer_only_lightpush","historyId":"4bfb1c2cf45e835824529e585e1980f9","time":{"start":1720669022245,"stop":1720669026883,"duration":4638},"status":"failed","statusMessage":"AssertionError: assert ('no waku relay found' in \"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:17958/lightpush/v1/message with response: b'stream reset'\" or 'failed to negotiate protocol: protocols not supported' in \"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:17958/lightpush/v1/message with response: b'stream reset'\")\n +  where \"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:17958/lightpush/v1/message with response: b'stream reset'\" = str(Exception(\"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:17958/lightpush/v1/message with response: b'stream reset'\"))\n +  and   \"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:17958/lightpush/v1/message with response: b'stream reset'\" = str(Exception(\"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:17958/lightpush/v1/message with response: b'stream reset'\"))","statusTrace":"src/node/api_clients/base_client.py:14: in make_request\n    response.raise_for_status()\n/opt/hostedtoolcache/Python/3.12.4/x64/lib/python3.12/site-packages/requests/models.py:1021: in raise_for_status\n    raise HTTPError(http_error_msg, response=self)\nE   requests.exceptions.HTTPError: 503 Server Error: Service Unavailable for url: http://127.0.0.1:17958/lightpush/v1/message\n\nDuring handling of the above exception, another exception occurred:\ntests/light_push/test_running_nodes.py:10: in test_main_node_only_lightpush__peer_only_lightpush\n    self.light_push_node1.send_light_push_message(self.create_payload())\nsrc/node/waku_node.py:337: in send_light_push_message\n    return self._api.send_light_push_message(payload)\nsrc/node/api_clients/rest.py:57: in send_light_push_message\n    return self.rest_call(\"post\", \"lightpush/v1/message\", json.dumps(payload))\nsrc/node/api_clients/rest.py:16: in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\nsrc/node/api_clients/base_client.py:17: in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\nE   Exception: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:17958/lightpush/v1/message with response: b'stream reset'\n\nDuring handling of the above exception, another exception occurred:\ntests/light_push/test_running_nodes.py:13: in test_main_node_only_lightpush__peer_only_lightpush\n    assert \"no waku relay found\" in str(ex) or \"failed to negotiate protocol: protocols not supported\" in str(ex)\nE   assert ('no waku relay found' in \"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:17958/lightpush/v1/message with response: b'stream reset'\" or 'failed to negotiate protocol: protocols not supported' in \"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:17958/lightpush/v1/message with response: b'stream reset'\")\nE    +  where \"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:17958/lightpush/v1/message with response: b'stream reset'\" = str(Exception(\"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:17958/lightpush/v1/message with response: b'stream reset'\"))\nE    +  and   \"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:17958/lightpush/v1/message with response: b'stream reset'\" = str(Exception(\"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:17958/lightpush/v1/message with response: b'stream reset'\"))","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":2,"retriesStatusChange":false,"beforeStages":[{"name":"test_id","time":{"start":1720669022244,"stop":1720669022244,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_setup","time":{"start":1720669022244,"stop":1720669022244,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail","time":{"start":1720669022244,"stop":1720669022244,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"common_setup","time":{"start":1720669022244,"stop":1720669022244,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"light_push_setup","time":{"start":1720669022244,"stop":1720669022245,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes","time":{"start":1720669022244,"stop":1720669022244,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: assert ('no waku relay found' in \"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:17958/lightpush/v1/message with response: b'stream reset'\" or 'failed to negotiate protocol: protocols not supported' in \"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:17958/lightpush/v1/message with response: b'stream reset'\")\n +  where \"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:17958/lightpush/v1/message with response: b'stream reset'\" = str(Exception(\"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:17958/lightpush/v1/message with response: b'stream reset'\"))\n +  and   \"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:17958/lightpush/v1/message with response: b'stream reset'\" = str(Exception(\"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:17958/lightpush/v1/message with response: b'stream reset'\"))","statusTrace":"src/node/api_clients/base_client.py:14: in make_request\n    response.raise_for_status()\n/opt/hostedtoolcache/Python/3.12.4/x64/lib/python3.12/site-packages/requests/models.py:1021: in raise_for_status\n    raise HTTPError(http_error_msg, response=self)\nE   requests.exceptions.HTTPError: 503 Server Error: Service Unavailable for url: http://127.0.0.1:17958/lightpush/v1/message\n\nDuring handling of the above exception, another exception occurred:\ntests/light_push/test_running_nodes.py:10: in test_main_node_only_lightpush__peer_only_lightpush\n    self.light_push_node1.send_light_push_message(self.create_payload())\nsrc/node/waku_node.py:337: in send_light_push_message\n    return self._api.send_light_push_message(payload)\nsrc/node/api_clients/rest.py:57: in send_light_push_message\n    return self.rest_call(\"post\", \"lightpush/v1/message\", json.dumps(payload))\nsrc/node/api_clients/rest.py:16: in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\nsrc/node/api_clients/base_client.py:17: in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\nE   Exception: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:17958/lightpush/v1/message with response: b'stream reset'\n\nDuring handling of the above exception, another exception occurred:\ntests/light_push/test_running_nodes.py:13: in test_main_node_only_lightpush__peer_only_lightpush\n    assert \"no waku relay found\" in str(ex) or \"failed to negotiate protocol: protocols not supported\" in str(ex)\nE   assert ('no waku relay found' in \"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:17958/lightpush/v1/message with response: b'stream reset'\" or 'failed to negotiate protocol: protocols not supported' in \"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:17958/lightpush/v1/message with response: b'stream reset'\")\nE    +  where \"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:17958/lightpush/v1/message with response: b'stream reset'\" = str(Exception(\"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:17958/lightpush/v1/message with response: b'stream reset'\"))\nE    +  and   \"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:17958/lightpush/v1/message with response: b'stream reset'\" = str(Exception(\"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:17958/lightpush/v1/message with response: b'stream reset'\"))","steps":[{"name":"setup_first_receiving_node","time":{"start":1720669022245,"stop":1720669024694,"duration":2449},"status":"passed","steps":[{"name":"start_receiving_node","time":{"start":1720669022245,"stop":1720669024693,"duration":2448},"status":"passed","steps":[{"name":"add_node_peer","time":{"start":1720669024693,"stop":1720669024693,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"args","value":"(<tests.light_push.test_running_nodes.TestRunningNodes object at 0x7fb8c4b72a50>, <src.node.waku_node.WakuNode object at 0x7fb8bff9d400>, [])"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"image","value":"'harbor.status.im/wakuorg/nwaku:latest'"},{"name":"node_index","value":"1"},{"name":"lightpush","value":"'true'"},{"name":"relay","value":"'false'"},{"name":"nodekey","value":"'30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68'"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"lightpush","value":"'true'"},{"name":"relay","value":"'false'"}],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"setup_first_lightpush_node","time":{"start":1720669024694,"stop":1720669026870,"duration":2176},"status":"passed","steps":[{"name":"setup_lightpush_node","time":{"start":1720669024694,"stop":1720669026870,"duration":2176},"status":"passed","steps":[{"name":"add_node_peer","time":{"start":1720669026858,"stop":1720669026870,"duration":12},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"args","value":"(<tests.light_push.test_running_nodes.TestRunningNodes object at 0x7fb8c4b72a50>, <src.node.waku_node.WakuNode object at 0x7fb8bed9b410>, ['/ip4/172.18.41.65/tcp/55502/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip'])"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"image","value":"'harbor.status.im/wakuorg/go-waku:latest'"},{"name":"node_index","value":"1"},{"name":"lightpush","value":"'true'"},{"name":"relay","value":"'false'"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"lightpush","value":"'true'"},{"name":"relay","value":"'false'"}],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"create_payload","time":{"start":1720669026870,"stop":1720669026870,"duration":0},"status":"passed","steps":[{"name":"create_message","time":{"start":1720669026870,"stop":1720669026870,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"pubsub_topic","value":"None"},{"name":"message","value":"None"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"e35459bcfdebcb43","name":"log","source":"e35459bcfdebcb43.txt","type":"text/plain","size":30308}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":8,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"test_setup::0","time":{"start":1720669026931,"stop":1720669026939,"duration":8},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes::0","time":{"start":1720669026949,"stop":1720669029542,"duration":2593},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail::0","time":{"start":1720669029542,"stop":1720669029545,"duration":3},"status":"passed","steps":[],"attachments":[{"uid":"8971249cd7d82e8d","name":"receiving_node1_2024-07-11_03-37-02__e3547b7a-7f6d-4fc8-a176-8f8e90236e6e__harbor.status.im_wakuorg_nwaku:latest.log","source":"8971249cd7d82e8d.txt","type":"text/plain","size":141410},{"uid":"c749872538f0bfe9","name":"lightpush_node1_2024-07-11_03-37-02__e3547b7a-7f6d-4fc8-a176-8f8e90236e6e__harbor.status.im_wakuorg_go-waku:latest.log","source":"c749872538f0bfe9.txt","type":"text/plain","size":64445}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"tests.light_push"},{"name":"suite","value":"test_running_nodes"},{"name":"subSuite","value":"TestRunningNodes"},{"name":"host","value":"fv-az1759-122"},{"name":"thread","value":"2064-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.light_push.test_running_nodes"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"164295d6b8ff971c","status":"failed","statusDetails":"AssertionError: assert ('no waku relay found' in \"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:54387/lightpush/v1/message with response: b'stream reset'\" or 'failed to negotiate protocol: protocols not supported' in \"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:54387/lightpush/v1/message with response: b'stream reset'\")\n +  where \"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:54387/lightpush/v1/message with response: b'stream reset'\" = str(Exception(\"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:54387/lightpush/v1/message with response: b'stream reset'\"))\n +  and   \"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:54387/lightpush/v1/message with response: b'stream reset'\" = str(Exception(\"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:54387/lightpush/v1/message with response: b'stream reset'\"))","time":{"start":1720669014618,"stop":1720669019266,"duration":4648}},{"uid":"82cd2a365f18aad9","status":"failed","statusDetails":"AssertionError: assert ('no waku relay found' in \"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:21735/lightpush/v1/message with response: b'stream reset'\" or 'failed to negotiate protocol: protocols not supported' in \"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:21735/lightpush/v1/message with response: b'stream reset'\")\n +  where \"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:21735/lightpush/v1/message with response: b'stream reset'\" = str(Exception(\"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:21735/lightpush/v1/message with response: b'stream reset'\"))\n +  and   \"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:21735/lightpush/v1/message with response: b'stream reset'\" = str(Exception(\"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:21735/lightpush/v1/message with response: b'stream reset'\"))","time":{"start":1720669007878,"stop":1720669011796,"duration":3918}}],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":2,"broken":4,"skipped":0,"passed":110,"unknown":0,"total":116},"items":[{"uid":"b774a73009399d88","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/194//#testresult/b774a73009399d88","status":"passed","time":{"start":1720582575722,"stop":1720582578968,"duration":3246}},{"uid":"a8743d6e0cb4778b","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/193//#testresult/a8743d6e0cb4778b","status":"passed","time":{"start":1720527524003,"stop":1720527527848,"duration":3845}},{"uid":"149b4741e51e3e5a","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/192//#testresult/149b4741e51e3e5a","status":"passed","time":{"start":1720517120327,"stop":1720517124020,"duration":3693}},{"uid":"8c4355b39483097d","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/191//#testresult/8c4355b39483097d","status":"passed","time":{"start":1720495058282,"stop":1720495061550,"duration":3268}},{"uid":"ba490dfd22e0d00d","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/190//#testresult/ba490dfd22e0d00d","status":"passed","time":{"start":1720408677501,"stop":1720408680690,"duration":3189}},{"uid":"c8c58ade165f4837","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/189//#testresult/c8c58ade165f4837","status":"passed","time":{"start":1720322261066,"stop":1720322264448,"duration":3382}},{"uid":"27938260d9e20c14","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/188//#testresult/27938260d9e20c14","status":"passed","time":{"start":1720235906507,"stop":1720235919112,"duration":12605}},{"uid":"37388f0b4b1b2eb9","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/187//#testresult/37388f0b4b1b2eb9","status":"passed","time":{"start":1720149415079,"stop":1720149418726,"duration":3647}},{"uid":"e792597ba6052918","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/186//#testresult/e792597ba6052918","status":"passed","time":{"start":1720078800504,"stop":1720078803279,"duration":2775}},{"uid":"889505deb747a70c","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/184//#testresult/889505deb747a70c","status":"passed","time":{"start":1719991271199,"stop":1719991274243,"duration":3044}},{"uid":"4bd8c845df99d79e","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/183//#testresult/4bd8c845df99d79e","status":"passed","time":{"start":1719976615000,"stop":1719976618611,"duration":3611}},{"uid":"5c8da84eacb822bb","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/182//#testresult/5c8da84eacb822bb","status":"passed","time":{"start":1719890184019,"stop":1719890186969,"duration":2950}},{"uid":"599a8c118bb0e928","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/181//#testresult/599a8c118bb0e928","status":"passed","time":{"start":1719803817181,"stop":1719803821184,"duration":4003}},{"uid":"a141c0bffdf38aa4","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/180//#testresult/a141c0bffdf38aa4","status":"passed","time":{"start":1719717421916,"stop":1719717425435,"duration":3519}},{"uid":"1b3553cac5c440ce","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/179//#testresult/1b3553cac5c440ce","status":"passed","time":{"start":1719631011361,"stop":1719631024119,"duration":12758}},{"uid":"dc21d5334aba0927","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/178//#testresult/dc21d5334aba0927","status":"passed","time":{"start":1719544649320,"stop":1719544653474,"duration":4154}},{"uid":"e40cf14bce712f33","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/177//#testresult/e40cf14bce712f33","status":"passed","time":{"start":1719458255116,"stop":1719458258034,"duration":2918}},{"uid":"f26a5306ed1175bf","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/176//#testresult/f26a5306ed1175bf","status":"passed","time":{"start":1719371864199,"stop":1719371876558,"duration":12359}},{"uid":"61fe75707c0cc0f4","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/175//#testresult/61fe75707c0cc0f4","status":"passed","time":{"start":1719285390234,"stop":1719285394126,"duration":3892}},{"uid":"f9a4bd53bf7bbc2c","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/174//#testresult/f9a4bd53bf7bbc2c","status":"passed","time":{"start":1719199001583,"stop":1719199005099,"duration":3516}}]},"tags":[]},"source":"972bdd6fe1cd3a5a.json","parameterValues":[]}