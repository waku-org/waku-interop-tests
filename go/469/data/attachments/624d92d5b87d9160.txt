2025-02-17 03:08:39.992 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-17 03:08:39.992 DEBUG [tests.conftest] Running test: test_filter_update_subscription_with_pubsub_topic_list_instead_of_string with id: 2025-02-17_03-08-39__4bc5444b-021e-4685-87aa-4d5eec569b03
2025-02-17 03:08:39.992 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-17 03:08:39.992 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-17 03:08:39.993 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-17 03:08:39.998 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 03:08:39.998 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-17_03-08-39__4bc5444b-021e-4685-87aa-4d5eec569b03__wakuorg_nwaku:latest.log
2025-02-17 03:08:39.999 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 03:08:39.999 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 03:08:40.000 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 03:08:40.000 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.7.6
2025-02-17 03:08:40.000 DEBUG [src.node.docker_mananger] Generated ports ['40780', '40781', '40782', '40783', '40784']
2025-02-17 03:08:40.000 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 03:08:40.000 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 03:08:40.001 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 03:08:40.001 DEBUG [src.node.docker_mananger] docker run -i -t -p 40780:40780 -p 40781:40781 -p 40782:40782 -p 40783:40783 -p 40784:40784 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40782 --rest-port=40780 --tcp-port=40781 --discv5-udp-port=40783 --rest-address=0.0.0.0 --nat=extip:172.18.7.6 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dbddeb11e7e85069972b81fbfaa5dccbafdf4ccca6effcd9bb5fac654f6efd37 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40784 --metrics-logging=true --relay=true --filter=true
2025-02-17 03:08:40.229 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.7.6 waku a51a2a240aedf571a753c5e02599ffaeefc5e0b4d772e682b27c0f15478671da
2025-02-17 03:08:40.281 DEBUG [src.node.docker_mananger] Container started with ID a51a2a240aed. Setting up logs at ./log/docker/node1_2025-02-17_03-08-39__4bc5444b-021e-4685-87aa-4d5eec569b03__wakuorg_nwaku:latest.log
2025-02-17 03:08:40.281 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 40780
2025-02-17 03:08:40.281 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 03:08:40.799 ERROR [src.node.docker_mananger] Max retries reached for container d1f209abcbf6. Exiting log stream.
2025-02-17 03:08:41.282 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40780/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:08:41.285 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 03:08:41.285 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 03:08:41.285 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40780/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:08:41.287 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.7.6/tcp/40781/p2p/16Uiu2HAm4LqYhCoYyqx5Msfs43o29AcWC9QfFSEUWieDK2X1c6Xs","/ip4/172.18.7.6/tcp/40782/ws/p2p/16Uiu2HAm4LqYhCoYyqx5Msfs43o29AcWC9QfFSEUWieDK2X1c6Xs"],"enrUri":"enr:-L24QCRvI22LFsuXCVkkI-7yxzN1klnSW4NPWqjRJTiQNdYBXNqpgWf5HBBaeLVvJOSGYpafyRToKfCSDUxRlgaSfBUCgmlkgnY0gmlwhKwSBwaKbXVsdGlhZGRyc5YACASsEgcGBp9NAAoErBIHBgafTt0DgnJzhQADAQAAiXNlY3AyNTZrMaEChHwYlHK27MGaFwiml5QrEuyKehu8iiZOLFeV-IX38iqDdGNwgp9Ng3VkcIKfT4V3YWt1MgU"}'
2025-02-17 03:08:41.288 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 03:08:41.288 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-17 03:08:41.294 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-17 03:08:41.294 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-17_03-08-39__4bc5444b-021e-4685-87aa-4d5eec569b03__wakuorg_go-waku:latest.log
2025-02-17 03:08:41.294 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 03:08:41.295 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 03:08:41.296 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 03:08:41.296 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.69.100
2025-02-17 03:08:41.296 DEBUG [src.node.docker_mananger] Generated ports ['31603', '31604', '31605', '31606', '31607']
2025-02-17 03:08:41.296 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 03:08:41.296 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 03:08:41.296 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 03:08:41.297 DEBUG [src.node.docker_mananger] docker run -i -t -p 31603:31603 -p 31604:31604 -p 31605:31605 -p 31606:31606 -p 31607:31607 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=31605 --rest-port=31603 --tcp-port=31604 --discv5-udp-port=31606 --rest-address=0.0.0.0 --nat=extip:172.18.69.100 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2bcc6c97578cfd3ae8c68d4bd9edafa35ea83cb88ed5afd97709a73adcaba4c1 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-L24QCRvI22LFsuXCVkkI-7yxzN1klnSW4NPWqjRJTiQNdYBXNqpgWf5HBBaeLVvJOSGYpafyRToKfCSDUxRlgaSfBUCgmlkgnY0gmlwhKwSBwaKbXVsdGlhZGRyc5YACASsEgcGBp9NAAoErBIHBgafTt0DgnJzhQADAQAAiXNlY3AyNTZrMaEChHwYlHK27MGaFwiml5QrEuyKehu8iiZOLFeV-IX38iqDdGNwgp9Ng3VkcIKfT4V3YWt1MgU --filternode=/ip4/172.18.7.6/tcp/40781/p2p/16Uiu2HAm4LqYhCoYyqx5Msfs43o29AcWC9QfFSEUWieDK2X1c6Xs --pubsub-topic=/waku/2/rs/3/1
2025-02-17 03:08:41.522 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.69.100 waku c26b0c120768dd325c2f789846aef569b61901b6177b9cd1357841ebc9b63930
2025-02-17 03:08:41.574 DEBUG [src.node.docker_mananger] Container started with ID c26b0c120768. Setting up logs at ./log/docker/node2_2025-02-17_03-08-39__4bc5444b-021e-4685-87aa-4d5eec569b03__wakuorg_go-waku:latest.log
2025-02-17 03:08:41.575 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 31603
2025-02-17 03:08:41.575 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 03:08:42.576 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31603/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:08:42.578 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QCkPS50yW7Skno_8rkCUe3vAvzOxhQK4VbzajGiXnbYseREUS5Fi7TMeWo1iRus1sDBXmAi5RLw52gPp7sQ0jSaGAZUR4SDjgmlkgnY0gmlwhKwRAAOCcnOFAAMBAAGJc2VjcDI1NmsxoQM6FwV4ULX5HNh3ofx4yG0ePDR4xO7c2i0lS8IUVrNSIoN0Y3CCe3SDdWRwgnt2hXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/31604/p2p/16Uiu2HAmGZkMgFWiADuWjVT9tXfX6MvcypSUPd3DymMZg5RH2nU9","/ip4/127.0.0.1/tcp/31605/ws/p2p/16Uiu2HAmGZkMgFWiADuWjVT9tXfX6MvcypSUPd3DymMZg5RH2nU9","/ip4/172.17.0.3/tcp/31604/p2p/16Uiu2HAmGZkMgFWiADuWjVT9tXfX6MvcypSUPd3DymMZg5RH2nU9","/ip4/172.17.0.3/tcp/31605/ws/p2p/16Uiu2HAmGZkMgFWiADuWjVT9tXfX6MvcypSUPd3DymMZg5RH2nU9"]}'
2025-02-17 03:08:42.578 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 03:08:42.579 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31603/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.7.6/tcp/40781/p2p/16Uiu2HAm4LqYhCoYyqx5Msfs43o29AcWC9QfFSEUWieDK2X1c6Xs", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-17 03:08:42.580 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-17 03:08:42.581 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-17 03:08:42.581 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40780/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-17 03:08:42.584 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 03:08:42.585 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31603/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "18778af0-45a8-4a33-8e9c-5593b27afc31", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-17 03:08:42.590 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"18778af0-45a8-4a33-8e9c-5593b27afc31","statusDesc":"OK"}'
2025-02-17 03:08:42.594 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-17 03:08:42.595 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-17 03:08:42.595 DEBUG [src.node.waku_node] Stopping container with id a51a2a240aed
2025-02-17 03:08:43.169 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 03:08:43.169 DEBUG [src.node.waku_node] Stopping container with id c26b0c120768
2025-02-17 03:08:43.982 ERROR [src.node.docker_mananger] Max retries reached for container a51a2a240aed. Exiting log stream.
2025-02-17 03:08:44.079 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 03:08:44.080 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-17 03:08:44.086 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-17 03:08:44.088 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
