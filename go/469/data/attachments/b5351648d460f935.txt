[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_get_store_message_with_meta with id: 2025-02-17_03-09-30__fdaf63ab-e93e-4fb9-978a-1582a64361fa
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-17_03-09-30__fdaf63ab-e93e-4fb9-978a-1582a64361fa__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.52.72
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['10037', '10038', '10039', '10040', '10041']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 10037:10037 -p 10038:10038 -p 10039:10039 -p 10040:10040 -p 10041:10041 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=10039 --rest-port=10037 --tcp-port=10038 --discv5-udp-port=10040 --rest-address=0.0.0.0 --nat=extip:172.18.52.72 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=badd55f5c33b0813afa41dd893baadf21e7ce7e5c0dfdeb310ea4a728e175e39 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=10041 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.52.72 waku 00df73696c1dea837a3b679f05748e7f0f619e60517c5106b39b2a47be8d1c7f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 00df73696c1d. Setting up logs at ./log/docker/publishing_node1_2025-02-17_03-09-30__fdaf63ab-e93e-4fb9-978a-1582a64361fa__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 10037
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 62c35e9fe421. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10037/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10037/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.52.72/tcp/10038/p2p/16Uiu2HAmLMaZDpUsVE3r5q8P88wfvMHjZ7xET8aTAJca4SAhwyfc","/ip4/172.18.52.72/tcp/10039/ws/p2p/16Uiu2HAmLMaZDpUsVE3r5q8P88wfvMHjZ7xET8aTAJca4SAhwyfc"],"enrUri":"enr:-L24QJ6BQQicjoVRv2GMdUtHfqBQoxkzXcS32Q6jP0nKcNG1JJfe61NLXG3ZsvM-sYzK_Yy2aaDoQ3A1JDz6yUJhNikCgmlkgnY0gmlwhKwSNEiKbXVsdGlhZGRyc5YACASsEjRIBic2AAoErBI0SAYnN90DgnJzhQADAQAAiXNlY3AyNTZrMaEDcme3plp-Synhung2VSkszgl0D20Yiu1WQfXFJQJuEO-DdGNwgic2g3VkcIInOIV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-17_03-09-30__fdaf63ab-e93e-4fb9-978a-1582a64361fa__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.168.166
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['24443', '24444', '24445', '24446', '24447']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 24443:24443 -p 24444:24444 -p 24445:24445 -p 24446:24446 -p 24447:24447 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=24445 --rest-port=24443 --tcp-port=24444 --discv5-udp-port=24446 --rest-address=0.0.0.0 --nat=extip:172.18.168.166 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=daeeeef09d38bca2c34f0b7a58af6ed92f5dbe354859c62c4d36136acdb5cf6f --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QJ6BQQicjoVRv2GMdUtHfqBQoxkzXcS32Q6jP0nKcNG1JJfe61NLXG3ZsvM-sYzK_Yy2aaDoQ3A1JDz6yUJhNikCgmlkgnY0gmlwhKwSNEiKbXVsdGlhZGRyc5YACASsEjRIBic2AAoErBI0SAYnN90DgnJzhQADAQAAiXNlY3AyNTZrMaEDcme3plp-Synhung2VSkszgl0D20Yiu1WQfXFJQJuEO-DdGNwgic2g3VkcIInOIV3YWt1MgM --storenode=/ip4/172.18.52.72/tcp/10038/p2p/16Uiu2HAmLMaZDpUsVE3r5q8P88wfvMHjZ7xET8aTAJca4SAhwyfc --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.168.166 waku e726353684f31a682c3ee39e987c74c182d7e787f29b8c57268f90e27b2fcfc1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID e726353684f3. Setting up logs at ./log/docker/store_node1_2025-02-17_03-09-30__fdaf63ab-e93e-4fb9-978a-1582a64361fa__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 24443
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24443/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QJLiFnc3bWp2X-zCZp_CGDOvV0qe6UywbuxW42AD-fPjPrf5m3QohAIXEOszlZxb_qMG6bp9y3b_HVWKq0VmiWuGAZUR4eWOgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaEDMuEMb2IDExOYhadowMjTCPT8-hcZjsIGSf30CojfiAaDdGNwgl98g3VkcIJffoV3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/24444/p2p/16Uiu2HAmG5bmbF33pajEes2uG94o36HqeWZwiLoePkW8JGyMRazy","/ip4/127.0.0.1/tcp/24445/ws/p2p/16Uiu2HAmG5bmbF33pajEes2uG94o36HqeWZwiLoePkW8JGyMRazy","/ip4/172.17.0.3/tcp/24444/p2p/16Uiu2HAmG5bmbF33pajEes2uG94o36HqeWZwiLoePkW8JGyMRazy","/ip4/172.17.0.3/tcp/24445/ws/p2p/16Uiu2HAmG5bmbF33pajEes2uG94o36HqeWZwiLoePkW8JGyMRazy"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24443/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.52.72/tcp/10038/p2p/16Uiu2HAmLMaZDpUsVE3r5q8P88wfvMHjZ7xET8aTAJca4SAhwyfc", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10037/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24443/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10037/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)', "meta": "U3RvcmUgd29ya3MhIQ=="}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10037/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x24b1f2e21139a16ae13561613d7fd43c29ba6e9deef91a0c7f4a2f1bb79e422d"}]}'
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/go-waku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24443/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"7a1ef27af42a181a077f0051b30648326690f9ae671b21229ca9408ce1c3b481","status_code":200,"status_desc":"OK","messages":[{"message_hash":"JLHy4hE5oWrhNWFhPX/UPCm6bp3u+RoMf0ovG7eeQi0="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 00df73696c1d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id e726353684f3
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.