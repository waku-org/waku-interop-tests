2025-02-17 03:07:57.523 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-17 03:07:57.524 DEBUG [tests.conftest] Running test: test_lightpush with id: 2025-02-17_03-07-57__64ecdfd4-f7c3-4a98-b518-ed90bb8eedf4
2025-02-17 03:07:57.524 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-17 03:07:57.525 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-17 03:07:57.526 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-17 03:07:57.527 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-17 03:07:57.527 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-17 03:07:57.535 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 03:07:57.535 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-17_03-07-57__64ecdfd4-f7c3-4a98-b518-ed90bb8eedf4__wakuorg_nwaku:latest.log
2025-02-17 03:07:57.536 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 03:07:57.536 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 03:07:57.537 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 03:07:57.537 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.18.35
2025-02-17 03:07:57.538 DEBUG [src.node.docker_mananger] Generated ports ['15413', '15414', '15415', '15416', '15417']
2025-02-17 03:07:57.538 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 03:07:57.538 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 03:07:57.538 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 03:07:57.538 DEBUG [src.node.docker_mananger] docker run -i -t -p 15413:15413 -p 15414:15414 -p 15415:15415 -p 15416:15416 -p 15417:15417 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15415 --rest-port=15413 --tcp-port=15414 --discv5-udp-port=15416 --rest-address=0.0.0.0 --nat=extip:172.18.18.35 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c098fa7a3b9bc4eccbdff1da7c15b7e96eb3ca9acdc5ff2effd7a74f709bc0a5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15417 --metrics-logging=true --lightpush=true --relay=true
2025-02-17 03:07:57.789 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.18.35 waku c5805a903d4186446304b3f6f853fcf4198f30ea5e5bc52eae802877748ba291
2025-02-17 03:07:57.846 DEBUG [src.node.docker_mananger] Container started with ID c5805a903d41. Setting up logs at ./log/docker/node1_2025-02-17_03-07-57__64ecdfd4-f7c3-4a98-b518-ed90bb8eedf4__wakuorg_nwaku:latest.log
2025-02-17 03:07:57.847 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 15413
2025-02-17 03:07:57.848 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 03:07:57.897 ERROR [src.node.docker_mananger] Max retries reached for container 9a206d1cc973. Exiting log stream.
2025-02-17 03:07:58.340 ERROR [src.node.docker_mananger] Max retries reached for container e0fd4984ee51. Exiting log stream.
2025-02-17 03:07:58.848 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15413/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:07:58.851 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 03:07:58.851 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 03:07:58.852 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15413/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:07:58.854 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.18.35/tcp/15414/p2p/16Uiu2HAm3o6aarELHGvFx2KLVuXwChUWKkk9mp6Z45JCzqTwV2hF","/ip4/172.18.18.35/tcp/15415/ws/p2p/16Uiu2HAm3o6aarELHGvFx2KLVuXwChUWKkk9mp6Z45JCzqTwV2hF"],"enrUri":"enr:-L24QJxgYukhOQImO473yTHKAtjCHzuyuBHntfOnG0QVLuvWVJuSixbl7Oo1y35XvAjwbD8eu36H6woYXc60P9PZUUUCgmlkgnY0gmlwhKwSEiOKbXVsdGlhZGRyc5YACASsEhIjBjw2AAoErBISIwY8N90DgnJzhQADAQAAiXNlY3AyNTZrMaECfFqB7ajxEAAqwIwXBlc48RcGr1Va28VoxgUIqfGVdcKDdGNwgjw2g3VkcII8OIV3YWt1Mgk"}'
2025-02-17 03:07:58.854 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 03:07:58.861 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 03:07:58.861 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-17_03-07-57__64ecdfd4-f7c3-4a98-b518-ed90bb8eedf4__wakuorg_nwaku:latest.log
2025-02-17 03:07:58.861 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 03:07:58.861 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 03:07:58.862 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 03:07:58.863 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.118.189
2025-02-17 03:07:58.863 DEBUG [src.node.docker_mananger] Generated ports ['40969', '40970', '40971', '40972', '40973']
2025-02-17 03:07:58.863 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 03:07:58.863 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 03:07:58.863 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 03:07:58.863 DEBUG [src.node.docker_mananger] docker run -i -t -p 40969:40969 -p 40970:40970 -p 40971:40971 -p 40972:40972 -p 40973:40973 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40971 --rest-port=40969 --tcp-port=40970 --discv5-udp-port=40972 --rest-address=0.0.0.0 --nat=extip:172.18.118.189 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5786498a67fee07cde9a74dd640bebe7e378398decf2348067acab1daf5e8fb0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40973 --metrics-logging=true --lightpush=false --relay=true --discv5-bootstrap-node=enr:-L24QJxgYukhOQImO473yTHKAtjCHzuyuBHntfOnG0QVLuvWVJuSixbl7Oo1y35XvAjwbD8eu36H6woYXc60P9PZUUUCgmlkgnY0gmlwhKwSEiOKbXVsdGlhZGRyc5YACASsEhIjBjw2AAoErBISIwY8N90DgnJzhQADAQAAiXNlY3AyNTZrMaECfFqB7ajxEAAqwIwXBlc48RcGr1Va28VoxgUIqfGVdcKDdGNwgjw2g3VkcII8OIV3YWt1Mgk
2025-02-17 03:07:59.114 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.118.189 waku 8f9b80672e5d1e1bf3487459c90931d6c58a01febcc7b25598d2758544d250e4
2025-02-17 03:07:59.159 DEBUG [src.node.docker_mananger] Container started with ID 8f9b80672e5d. Setting up logs at ./log/docker/node1_2025-02-17_03-07-57__64ecdfd4-f7c3-4a98-b518-ed90bb8eedf4__wakuorg_nwaku:latest.log
2025-02-17 03:07:59.160 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 40969
2025-02-17 03:07:59.161 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 03:08:00.161 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40969/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:08:00.172 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 03:08:00.173 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 03:08:00.173 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40969/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:08:00.181 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.118.189/tcp/40970/p2p/16Uiu2HAmHsATAygJAG8qRmBYRFBMiroehQvjLufRpZbnyRescLUS","/ip4/172.18.118.189/tcp/40971/ws/p2p/16Uiu2HAmHsATAygJAG8qRmBYRFBMiroehQvjLufRpZbnyRescLUS"],"enrUri":"enr:-L24QIFEm6lxDPS7L_YMIOxM7ghVWPZdpERF83PKdzW2wGjzIOGfBGlGNX3pVOyV7n5FPniAN1SAYwDdda8TbnOxVTUCgmlkgnY0gmlwhKwSdr2KbXVsdGlhZGRyc5YACASsEna9BqAKAAoErBJ2vQagC90DgnJzhQADAQAAiXNlY3AyNTZrMaEDTWjTePSjYAbQzI2lgDKi69H7v5NOrY1mq3tdOxxFu5uDdGNwgqAKg3VkcIKgDIV3YWt1MgE"}'
2025-02-17 03:08:00.181 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 03:08:00.188 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-17 03:08:00.188 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-17_03-07-57__64ecdfd4-f7c3-4a98-b518-ed90bb8eedf4__wakuorg_go-waku:latest.log
2025-02-17 03:08:00.188 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 03:08:00.188 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 03:08:00.190 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 03:08:00.190 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.212.231
2025-02-17 03:08:00.190 DEBUG [src.node.docker_mananger] Generated ports ['62307', '62308', '62309', '62310', '62311']
2025-02-17 03:08:00.190 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 03:08:00.190 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 03:08:00.190 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 03:08:00.190 DEBUG [src.node.docker_mananger] docker run -i -t -p 62307:62307 -p 62308:62308 -p 62309:62309 -p 62310:62310 -p 62311:62311 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=62309 --rest-port=62307 --tcp-port=62308 --discv5-udp-port=62310 --rest-address=0.0.0.0 --nat=extip:172.18.212.231 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=68b67daaf75618f3f8cecd600dfcec6aa163cfd2fbd8d3ff4d9e6ff8cdbdcad7 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --lightpush=true --relay=false --discv5-bootstrap-node=enr:-L24QJxgYukhOQImO473yTHKAtjCHzuyuBHntfOnG0QVLuvWVJuSixbl7Oo1y35XvAjwbD8eu36H6woYXc60P9PZUUUCgmlkgnY0gmlwhKwSEiOKbXVsdGlhZGRyc5YACASsEhIjBjw2AAoErBISIwY8N90DgnJzhQADAQAAiXNlY3AyNTZrMaECfFqB7ajxEAAqwIwXBlc48RcGr1Va28VoxgUIqfGVdcKDdGNwgjw2g3VkcII8OIV3YWt1Mgk --lightpushnode=/ip4/172.18.18.35/tcp/15414/p2p/16Uiu2HAm3o6aarELHGvFx2KLVuXwChUWKkk9mp6Z45JCzqTwV2hF --pubsub-topic=/waku/2/rs/3/1
2025-02-17 03:08:00.429 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.212.231 waku aed3f3086115b0ac3540404fb0905d18c269ba2ba288f6e531a5e8d37e686e0b
2025-02-17 03:08:00.480 DEBUG [src.node.docker_mananger] Container started with ID aed3f3086115. Setting up logs at ./log/docker/node1_2025-02-17_03-07-57__64ecdfd4-f7c3-4a98-b518-ed90bb8eedf4__wakuorg_go-waku:latest.log
2025-02-17 03:08:00.481 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 62307
2025-02-17 03:08:00.482 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 03:08:01.483 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62307/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:08:01.486 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QOvfyYN8-iE9wtvu7p1r_RAdCAchgLTwXeY5-6V_ftyhd6-sdHaO0VXEoQZ-9DinRFaoch5JsYsahNQh2RlbHfGGAZUR4IBegmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQJcTS5GIeu2RosXmLwpbGk1RgexE0adt4WwRiofR4ytH4N0Y3CC82SDdWRwgvNmhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/62308/p2p/16Uiu2HAm1dykHzowqWCX3ZFpF2LmvZopXeisYE9b3V6jJ1SP1Smc","/ip4/127.0.0.1/tcp/62309/ws/p2p/16Uiu2HAm1dykHzowqWCX3ZFpF2LmvZopXeisYE9b3V6jJ1SP1Smc","/ip4/172.17.0.4/tcp/62308/p2p/16Uiu2HAm1dykHzowqWCX3ZFpF2LmvZopXeisYE9b3V6jJ1SP1Smc","/ip4/172.17.0.4/tcp/62309/ws/p2p/16Uiu2HAm1dykHzowqWCX3ZFpF2LmvZopXeisYE9b3V6jJ1SP1Smc"]}'
2025-02-17 03:08:01.486 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 03:08:01.486 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15413/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-17 03:08:01.491 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 03:08:01.492 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40969/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-17 03:08:01.498 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 03:08:01.498 DEBUG [src.steps.light_push] Lightpushing message
2025-02-17 03:08:01.499 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62307/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": 1739761681498854400}}'
2025-02-17 03:08:06.878 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-17 03:08:06.879 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-17 03:08:06.980 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-17 03:08:06.980 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15413/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:08:06.983 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739761681498854400,"ephemeral":false,"proof":""}]'
2025-02-17 03:08:06.985 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-17 03:08:06.985 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40969/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:08:06.987 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739761681498854400,"ephemeral":false,"proof":""}]'
2025-02-17 03:08:06.990 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-17 03:08:06.991 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-17 03:08:06.991 DEBUG [src.node.waku_node] Stopping container with id c5805a903d41
2025-02-17 03:08:07.619 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 03:08:07.620 DEBUG [src.node.waku_node] Stopping container with id 8f9b80672e5d
2025-02-17 03:08:08.431 ERROR [src.node.docker_mananger] Max retries reached for container c5805a903d41. Exiting log stream.
2025-02-17 03:08:08.619 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 03:08:08.620 DEBUG [src.node.waku_node] Stopping container with id aed3f3086115
2025-02-17 03:08:09.113 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 03:08:09.114 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-17 03:08:09.129 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-17 03:08:09.145 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-17 03:08:09.148 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
