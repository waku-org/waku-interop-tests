2025-02-17 03:09:02.307 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-17 03:09:02.307 DEBUG [tests.conftest] Running test: test_store_with_duplicate_hashes with id: 2025-02-17_03-09-02__8e5f1059-2552-4b5f-9a12-3007dd715a22
2025-02-17 03:09:02.307 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-17 03:09:02.308 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-17 03:09:02.308 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-17 03:09:02.314 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 03:09:02.314 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-17_03-09-02__8e5f1059-2552-4b5f-9a12-3007dd715a22__wakuorg_nwaku:latest.log
2025-02-17 03:09:02.314 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 03:09:02.314 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 03:09:02.316 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 03:09:02.316 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.85.69
2025-02-17 03:09:02.316 DEBUG [src.node.docker_mananger] Generated ports ['58896', '58897', '58898', '58899', '58900']
2025-02-17 03:09:02.316 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 03:09:02.316 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 03:09:02.316 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 03:09:02.316 DEBUG [src.node.docker_mananger] docker run -i -t -p 58896:58896 -p 58897:58897 -p 58898:58898 -p 58899:58899 -p 58900:58900 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=58898 --rest-port=58896 --tcp-port=58897 --discv5-udp-port=58899 --rest-address=0.0.0.0 --nat=extip:172.18.85.69 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4ad217ebccd605950a1534befbd094c3d8be7bfffb4c9dff89bacda1c82a494a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=58900 --metrics-logging=true --store=true --relay=true
2025-02-17 03:09:02.547 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.85.69 waku d7309c5b160bc54bbc75aa74a48269c2402af0aa1c8f4d68ae05930e95bcb6f0
2025-02-17 03:09:02.593 DEBUG [src.node.docker_mananger] Container started with ID d7309c5b160b. Setting up logs at ./log/docker/publishing_node1_2025-02-17_03-09-02__8e5f1059-2552-4b5f-9a12-3007dd715a22__wakuorg_nwaku:latest.log
2025-02-17 03:09:02.594 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 58896
2025-02-17 03:09:02.594 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 03:09:02.601 ERROR [src.node.docker_mananger] Max retries reached for container 55ecde190944. Exiting log stream.
2025-02-17 03:09:03.100 ERROR [src.node.docker_mananger] Max retries reached for container 8901e0494d07. Exiting log stream.
2025-02-17 03:09:03.598 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58896/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:09:03.601 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 03:09:03.601 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 03:09:03.601 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58896/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:09:03.603 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.85.69/tcp/58897/p2p/16Uiu2HAm8GudkfHqaDKFB7ASV3zUrDjDbpfGzX3rKoEfzva2Eg87","/ip4/172.18.85.69/tcp/58898/ws/p2p/16Uiu2HAm8GudkfHqaDKFB7ASV3zUrDjDbpfGzX3rKoEfzva2Eg87"],"enrUri":"enr:-L24QJtD9aj7ua-1sYsH_pCXinvuRFS9g0KPrKNXk3gs3ueuEt-6OQJ7nuKGGtFZHwRpr2S1qAtoi7Uiha43uECkoZUCgmlkgnY0gmlwhKwSVUWKbXVsdGlhZGRyc5YACASsElVFBuYRAAoErBJVRQbmEt0DgnJzhQADAQAAiXNlY3AyNTZrMaECvukkVdmuOUjUEHjJSGScL_Zic89JRRhB2QHnBke33pCDdGNwguYRg3VkcILmE4V3YWt1MgM"}'
2025-02-17 03:09:03.603 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 03:09:03.610 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-17 03:09:03.610 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-17_03-09-02__8e5f1059-2552-4b5f-9a12-3007dd715a22__wakuorg_go-waku:latest.log
2025-02-17 03:09:03.610 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 03:09:03.610 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 03:09:03.611 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 03:09:03.611 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.191.233
2025-02-17 03:09:03.612 DEBUG [src.node.docker_mananger] Generated ports ['40937', '40938', '40939', '40940', '40941']
2025-02-17 03:09:03.612 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 03:09:03.612 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 03:09:03.612 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 03:09:03.612 DEBUG [src.node.docker_mananger] docker run -i -t -p 40937:40937 -p 40938:40938 -p 40939:40939 -p 40940:40940 -p 40941:40941 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=40939 --rest-port=40937 --tcp-port=40938 --discv5-udp-port=40940 --rest-address=0.0.0.0 --nat=extip:172.18.191.233 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b4517dfa3aeb1debeafeb18cd23ed0fd59dfcbc1c3a80cfda4b6c12690ea9be1 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QJtD9aj7ua-1sYsH_pCXinvuRFS9g0KPrKNXk3gs3ueuEt-6OQJ7nuKGGtFZHwRpr2S1qAtoi7Uiha43uECkoZUCgmlkgnY0gmlwhKwSVUWKbXVsdGlhZGRyc5YACASsElVFBuYRAAoErBJVRQbmEt0DgnJzhQADAQAAiXNlY3AyNTZrMaECvukkVdmuOUjUEHjJSGScL_Zic89JRRhB2QHnBke33pCDdGNwguYRg3VkcILmE4V3YWt1MgM --storenode=/ip4/172.18.85.69/tcp/58897/p2p/16Uiu2HAm8GudkfHqaDKFB7ASV3zUrDjDbpfGzX3rKoEfzva2Eg87 --store=true --relay=true
2025-02-17 03:09:03.847 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.191.233 waku 44604cbe92d31ceb9a6148c2697654a079824c528eab89869dedeb3379fc02ea
2025-02-17 03:09:03.903 DEBUG [src.node.docker_mananger] Container started with ID 44604cbe92d3. Setting up logs at ./log/docker/store_node1_2025-02-17_03-09-02__8e5f1059-2552-4b5f-9a12-3007dd715a22__wakuorg_go-waku:latest.log
2025-02-17 03:09:03.903 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 40937
2025-02-17 03:09:03.904 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 03:09:04.904 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40937/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:09:04.906 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QM22dMpEv8unhXa53OH6YDdYYxHeWtZSD4o5BHeDOXN0DYSValhGX0rHEGYVW7e36w8Y8mV5UortYgF10iyJujaGAZUR4XgbgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaECUDxc5Z2DDGQ6V2w5XVuhdt8Qci48Dc9A-0ahWGmF4U6DdGNwgp_qg3VkcIKf7IV3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/40938/p2p/16Uiu2HAkzpsyrXqU2r5gqEQwjd1jGZT7ATfJhiCz1JNsKnyQ3yZo","/ip4/127.0.0.1/tcp/40939/ws/p2p/16Uiu2HAkzpsyrXqU2r5gqEQwjd1jGZT7ATfJhiCz1JNsKnyQ3yZo","/ip4/172.17.0.3/tcp/40938/p2p/16Uiu2HAkzpsyrXqU2r5gqEQwjd1jGZT7ATfJhiCz1JNsKnyQ3yZo","/ip4/172.17.0.3/tcp/40939/ws/p2p/16Uiu2HAkzpsyrXqU2r5gqEQwjd1jGZT7ATfJhiCz1JNsKnyQ3yZo"]}'
2025-02-17 03:09:04.907 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 03:09:04.907 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40937/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.85.69/tcp/58897/p2p/16Uiu2HAm8GudkfHqaDKFB7ASV3zUrDjDbpfGzX3rKoEfzva2Eg87", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-17 03:09:04.922 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-17 03:09:04.924 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58896/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-17 03:09:04.947 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 03:09:04.947 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40937/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-17 03:09:04.949 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-17 03:09:04.952 DEBUG [src.steps.store] Relaying message
2025-02-17 03:09:04.952 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58896/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 03:09:04.965 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 03:09:04.965 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-17 03:09:05.166 DEBUG [src.steps.store] Relaying message
2025-02-17 03:09:05.166 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58896/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8x", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 03:09:05.172 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 03:09:05.172 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-17 03:09:05.373 DEBUG [src.steps.store] Relaying message
2025-02-17 03:09:05.374 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58896/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8y", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 03:09:05.379 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 03:09:05.379 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-17 03:09:05.580 DEBUG [src.steps.store] Relaying message
2025-02-17 03:09:05.580 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58896/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8z", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 03:09:05.585 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 03:09:05.585 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-17 03:09:05.786 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58896/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&hashes=0x4cf4d59afa708e4d5deb95ecfbe548f09b8ff0531e5527b592082ca5c095843f%2C0x4cf4d59afa708e4d5deb95ecfbe548f09b8ff0531e5527b592082ca5c095843f&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:09:05.789 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x4cf4d59afa708e4d5deb95ecfbe548f09b8ff0531e5527b592082ca5c095843f"}]}'
2025-02-17 03:09:05.790 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40937/store/v3/messages?peerAddr=%2Fip4%2F172.18.85.69%2Ftcp%2F58897%2Fp2p%2F16Uiu2HAm8GudkfHqaDKFB7ASV3zUrDjDbpfGzX3rKoEfzva2Eg87&hashes=TPTVmvpwjk1d65Xs%2B%2BVI8JuP8FMeVSe1kggspcCVhD8%3D%2CTPTVmvpwjk1d65Xs%2B%2BVI8JuP8FMeVSe1kggspcCVhD8%3D&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:09:05.792 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:40937/store/v3/messages?peerAddr=%2Fip4%2F172.18.85.69%2Ftcp%2F58897%2Fp2p%2F16Uiu2HAm8GudkfHqaDKFB7ASV3zUrDjDbpfGzX3rKoEfzva2Eg87&hashes=TPTVmvpwjk1d65Xs%2B%2BVI8JuP8FMeVSe1kggspcCVhD8%3D%2CTPTVmvpwjk1d65Xs%2B%2BVI8JuP8FMeVSe1kggspcCVhD8%3D&pageSize=50&ascending=true. Response content: b'{"status_code":400,"status_desc":"illegal base64 data at input byte 16"}'
2025-02-17 03:09:05.826 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-17 03:09:05.826 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-17 03:09:05.827 DEBUG [src.node.waku_node] Stopping container with id d7309c5b160b
2025-02-17 03:09:06.390 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 03:09:06.392 DEBUG [src.node.waku_node] Stopping container with id 44604cbe92d3
2025-02-17 03:09:06.901 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 03:09:06.902 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-17 03:09:06.918 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-17 03:09:06.921 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
