2025-02-17 03:10:44.525 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-17 03:10:44.526 DEBUG [tests.conftest] Running test: test_store_sort_ascending[true] with id: 2025-02-17_03-10-44__9b60e484-f12b-4c03-91f8-98d1a6566993
2025-02-17 03:10:44.526 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-17 03:10:44.527 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-17 03:10:44.527 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-17 03:10:44.535 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 03:10:44.535 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-17_03-10-44__9b60e484-f12b-4c03-91f8-98d1a6566993__wakuorg_nwaku:latest.log
2025-02-17 03:10:44.535 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 03:10:44.535 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 03:10:44.536 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 03:10:44.537 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.181.176
2025-02-17 03:10:44.537 DEBUG [src.node.docker_mananger] Generated ports ['65018', '65019', '65020', '65021', '65022']
2025-02-17 03:10:44.537 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 03:10:44.537 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 03:10:44.537 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 03:10:44.537 DEBUG [src.node.docker_mananger] docker run -i -t -p 65018:65018 -p 65019:65019 -p 65020:65020 -p 65021:65021 -p 65022:65022 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=65020 --rest-port=65018 --tcp-port=65019 --discv5-udp-port=65021 --rest-address=0.0.0.0 --nat=extip:172.18.181.176 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b29fc001de9121f70dcc874ff006d5d5123bf5a18e55c3fdcef9dac3c72a9e06 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=65022 --metrics-logging=true --store=true --relay=true
2025-02-17 03:10:44.759 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.181.176 waku 70bce666b9704043b6e2d9af67a8c87ddfc7b9154673395f2e2c832f4a36ae30
2025-02-17 03:10:44.806 DEBUG [src.node.docker_mananger] Container started with ID 70bce666b970. Setting up logs at ./log/docker/publishing_node1_2025-02-17_03-10-44__9b60e484-f12b-4c03-91f8-98d1a6566993__wakuorg_nwaku:latest.log
2025-02-17 03:10:44.807 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 65018
2025-02-17 03:10:44.808 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 03:10:44.836 ERROR [src.node.docker_mananger] Max retries reached for container 006f89848cae. Exiting log stream.
2025-02-17 03:10:45.340 ERROR [src.node.docker_mananger] Max retries reached for container cb81e5d27108. Exiting log stream.
2025-02-17 03:10:45.808 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:65018/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:10:45.810 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 03:10:45.811 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 03:10:45.811 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:65018/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:10:45.813 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.181.176/tcp/65019/p2p/16Uiu2HAmPowLmehELGfykBHPJahf513VgqLCbLTHFRiu5vzcPTzS","/ip4/172.18.181.176/tcp/65020/ws/p2p/16Uiu2HAmPowLmehELGfykBHPJahf513VgqLCbLTHFRiu5vzcPTzS"],"enrUri":"enr:-L24QBD5tqRUi_ZGvLayfPvulg1z-OtkHGRz-wy-tQZsLDVlKRUFfSAusElSVXGRVaxa2ddA-hooKmPmCg0XgQDjK6YCgmlkgnY0gmlwhKwStbCKbXVsdGlhZGRyc5YACASsErWwBv37AAoErBK1sAb9_N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDpbthmNXJcwYo4aUYYurcD5-Nj6VHN7qh4w1b1TtV3yuDdGNwgv37g3VkcIL9_YV3YWt1MgM"}'
2025-02-17 03:10:45.813 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 03:10:45.819 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-17 03:10:45.820 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-17_03-10-44__9b60e484-f12b-4c03-91f8-98d1a6566993__wakuorg_go-waku:latest.log
2025-02-17 03:10:45.820 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 03:10:45.820 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 03:10:45.821 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 03:10:45.821 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.67.199
2025-02-17 03:10:45.821 DEBUG [src.node.docker_mananger] Generated ports ['61741', '61742', '61743', '61744', '61745']
2025-02-17 03:10:45.822 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 03:10:45.822 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 03:10:45.822 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 03:10:45.822 DEBUG [src.node.docker_mananger] docker run -i -t -p 61741:61741 -p 61742:61742 -p 61743:61743 -p 61744:61744 -p 61745:61745 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=61743 --rest-port=61741 --tcp-port=61742 --discv5-udp-port=61744 --rest-address=0.0.0.0 --nat=extip:172.18.67.199 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=aec8ff2ddcdd6ee2e05f8bdebcc014ba2a455bef575fa1fecaddfb096c9db4ce --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QBD5tqRUi_ZGvLayfPvulg1z-OtkHGRz-wy-tQZsLDVlKRUFfSAusElSVXGRVaxa2ddA-hooKmPmCg0XgQDjK6YCgmlkgnY0gmlwhKwStbCKbXVsdGlhZGRyc5YACASsErWwBv37AAoErBK1sAb9_N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDpbthmNXJcwYo4aUYYurcD5-Nj6VHN7qh4w1b1TtV3yuDdGNwgv37g3VkcIL9_YV3YWt1MgM --storenode=/ip4/172.18.181.176/tcp/65019/p2p/16Uiu2HAmPowLmehELGfykBHPJahf513VgqLCbLTHFRiu5vzcPTzS --store=true --relay=true
2025-02-17 03:10:46.049 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.67.199 waku b20f5e3053fab3e13f13a12b8becb5f80ba7cae49f1a3942e01dbe185eb37e68
2025-02-17 03:10:46.116 DEBUG [src.node.docker_mananger] Container started with ID b20f5e3053fa. Setting up logs at ./log/docker/store_node1_2025-02-17_03-10-44__9b60e484-f12b-4c03-91f8-98d1a6566993__wakuorg_go-waku:latest.log
2025-02-17 03:10:46.118 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 61741
2025-02-17 03:10:46.118 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 03:10:47.120 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61741/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:10:47.122 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QPC2wVQZL1DIhrv4yl7XD83AU3XR82NLQY5JNc4FGJITNtlaTzAYPXUheDkBZrS-glcanvmf1OsdxTX78yAtixqGAZUR4wdagmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaECy1c3xT1F4NYAAxsEmytuKcc4VZze4yuC3C19fbB8aWGDdGNwgvEug3VkcILxMIV3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/61742/p2p/16Uiu2HAm97RsuiwSFvAURynmx3TmaporiVnqKhstZooSkhuyGcor","/ip4/127.0.0.1/tcp/61743/ws/p2p/16Uiu2HAm97RsuiwSFvAURynmx3TmaporiVnqKhstZooSkhuyGcor","/ip4/172.17.0.3/tcp/61742/p2p/16Uiu2HAm97RsuiwSFvAURynmx3TmaporiVnqKhstZooSkhuyGcor","/ip4/172.17.0.3/tcp/61743/ws/p2p/16Uiu2HAm97RsuiwSFvAURynmx3TmaporiVnqKhstZooSkhuyGcor"]}'
2025-02-17 03:10:47.123 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 03:10:47.123 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61741/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.181.176/tcp/65019/p2p/16Uiu2HAmPowLmehELGfykBHPJahf513VgqLCbLTHFRiu5vzcPTzS", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-17 03:10:47.139 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-17 03:10:47.140 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:65018/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-17 03:10:47.163 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 03:10:47.164 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61741/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-17 03:10:47.166 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-17 03:10:47.169 DEBUG [src.steps.store] Relaying message
2025-02-17 03:10:47.170 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:65018/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 03:10:47.182 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 03:10:47.185 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-17 03:10:47.386 DEBUG [src.steps.store] Relaying message
2025-02-17 03:10:47.386 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:65018/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8x", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 03:10:47.392 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 03:10:47.392 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-17 03:10:47.593 DEBUG [src.steps.store] Relaying message
2025-02-17 03:10:47.593 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:65018/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8y", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 03:10:47.599 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 03:10:47.599 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-17 03:10:47.800 DEBUG [src.steps.store] Relaying message
2025-02-17 03:10:47.800 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:65018/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8z", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 03:10:47.805 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 03:10:47.806 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-17 03:10:48.006 DEBUG [src.steps.store] Relaying message
2025-02-17 03:10:48.007 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:65018/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV80", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 03:10:48.012 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 03:10:48.012 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-17 03:10:48.213 DEBUG [src.steps.store] Relaying message
2025-02-17 03:10:48.213 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:65018/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV81", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 03:10:48.219 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 03:10:48.219 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-17 03:10:48.420 DEBUG [src.steps.store] Relaying message
2025-02-17 03:10:48.420 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:65018/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV82", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 03:10:48.426 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 03:10:48.426 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-17 03:10:48.627 DEBUG [src.steps.store] Relaying message
2025-02-17 03:10:48.627 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:65018/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV83", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 03:10:48.633 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 03:10:48.633 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-17 03:10:48.834 DEBUG [src.steps.store] Relaying message
2025-02-17 03:10:48.834 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:65018/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV84", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 03:10:48.839 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 03:10:48.839 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-17 03:10:49.040 DEBUG [src.steps.store] Relaying message
2025-02-17 03:10:49.041 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:65018/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV85", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 03:10:49.046 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 03:10:49.046 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-17 03:10:49.247 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:65018/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:10:49.250 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x1e37ee6ee63be74c44f2a72f4e4e4b84502e4bccdcd3e2911d106053db343401"},{"messageHash":"0xf1cc92f8aa8cab0444920722b47beb9db35eaf89b58b5977df0f89d5f58c095d"},{"messageHash":"0xe2ba923a7c5435091ad6067c5d1adfa0d84268ecad75fea6292063c055e6c0f3"},{"messageHash":"0x536292e01c63a26d09165e12707800ffb9c5758a79c45975b29d3bd4b277793c"},{"messageHash":"0xbc3f9fcf05e82d2b597193d4f642347574bb694a478788d8405f8ce396375e34"}],"paginationCursor":"0xbc3f9fcf05e82d2b597193d4f642347574bb694a478788d8405f8ce396375e34"}'
2025-02-17 03:10:49.251 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61741/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:10:49.255 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"3adfeb74e1f5393112c2f6b33256663ec81e20dd11c2653dad756d041f7ec541","status_code":200,"status_desc":"OK","messages":[{"message_hash":"HjfubuY750xE8qcvTk5LhFAuS8zc0+KRHRBgU9s0NAE="},{"message_hash":"8cyS+KqMqwREkgcitHvrnbNer4m1i1l33w+J1fWMCV0="},{"message_hash":"4rqSOnxUNQka1gZ8XRrfoNhCaOytdf6mKSBjwFXmwPM="},{"message_hash":"U2KS4Bxjom0JFl4ScHgA/7nFdYp5xFl1sp071LJ3eTw="},{"message_hash":"vD+fzwXoLStZcZPU9kI0dXS7aUpHh4jYQF+M45Y3XjQ="}],"pagination_cursor":"vD+fzwXoLStZcZPU9kI0dXS7aUpHh4jYQF+M45Y3XjQ="}'
2025-02-17 03:10:49.258 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-17 03:10:49.259 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-17 03:10:49.259 DEBUG [src.node.waku_node] Stopping container with id 70bce666b970
2025-02-17 03:10:50.337 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 03:10:50.339 DEBUG [src.node.waku_node] Stopping container with id b20f5e3053fa
2025-02-17 03:10:50.871 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 03:10:50.872 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-17 03:10:50.890 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-17 03:10:50.894 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
