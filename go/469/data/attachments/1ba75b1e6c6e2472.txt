2025-02-17 03:09:20.088 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-17 03:09:20.089 DEBUG [tests.conftest] Running test: test_publish_after_node1_restarts with id: 2025-02-17_03-09-20__c00b8cf1-ff1d-437f-ad16-61e2781ca36e
2025-02-17 03:09:20.089 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-17 03:09:20.089 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-17 03:09:20.089 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2025-02-17 03:09:20.095 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 03:09:20.096 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-17_03-09-20__c00b8cf1-ff1d-437f-ad16-61e2781ca36e__wakuorg_nwaku:latest.log
2025-02-17 03:09:20.096 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 03:09:20.096 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 03:09:20.097 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 03:09:20.097 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.199.39
2025-02-17 03:09:20.098 DEBUG [src.node.docker_mananger] Generated ports ['22901', '22902', '22903', '22904', '22905']
2025-02-17 03:09:20.098 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 03:09:20.098 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 03:09:20.098 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 03:09:20.098 DEBUG [src.node.docker_mananger] docker run -i -t -p 22901:22901 -p 22902:22902 -p 22903:22903 -p 22904:22904 -p 22905:22905 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22903 --rest-port=22901 --tcp-port=22902 --discv5-udp-port=22904 --rest-address=0.0.0.0 --nat=extip:172.18.199.39 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9b6ee398eccbf2a913cc2dc3aa6f1759df2ef8cbccf3b69a6b10c215b1dba1a9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22905 --metrics-logging=true --relay=true
2025-02-17 03:09:20.331 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.199.39 waku 3f77e440686c0270493d2c6f597bafb4af41a52044068a879335254cc33bc81d
2025-02-17 03:09:20.382 DEBUG [src.node.docker_mananger] Container started with ID 3f77e440686c. Setting up logs at ./log/docker/node1_2025-02-17_03-09-20__c00b8cf1-ff1d-437f-ad16-61e2781ca36e__wakuorg_nwaku:latest.log
2025-02-17 03:09:20.382 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 22901
2025-02-17 03:09:20.382 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 03:09:20.389 ERROR [src.node.docker_mananger] Max retries reached for container 08f813c5d04d. Exiting log stream.
2025-02-17 03:09:20.886 ERROR [src.node.docker_mananger] Max retries reached for container 38e5ce673f25. Exiting log stream.
2025-02-17 03:09:21.383 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22901/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:09:21.386 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 03:09:21.386 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 03:09:21.386 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22901/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:09:21.388 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.199.39/tcp/22902/p2p/16Uiu2HAmCYj1GtUPnniPyP1rGeYfH4cRS6NQwZcbW98YiDtTayFW","/ip4/172.18.199.39/tcp/22903/ws/p2p/16Uiu2HAmCYj1GtUPnniPyP1rGeYfH4cRS6NQwZcbW98YiDtTayFW"],"enrUri":"enr:-L24QIApS6r-CURQ6EEFudU0cFicRc3MER1IpLdCyu9ORsi2N19JWZ5v_IfuB-pFtPwheWtdSSqJ-1bVJp2v3wpvkAQCgmlkgnY0gmlwhKwSxyeKbXVsdGlhZGRyc5YACASsEscnBll2AAoErBLHJwZZd90DgnJzhQADAQAAiXNlY3AyNTZrMaEC_mUqFgZP9utH3z9ScV67N5hfz_8JaDoS_giWbCfd-1GDdGNwgll2g3VkcIJZeIV3YWt1MgE"}'
2025-02-17 03:09:21.389 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 03:09:21.395 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-17 03:09:21.395 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-17_03-09-20__c00b8cf1-ff1d-437f-ad16-61e2781ca36e__wakuorg_go-waku:latest.log
2025-02-17 03:09:21.395 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 03:09:21.395 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 03:09:21.396 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 03:09:21.396 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.105.34
2025-02-17 03:09:21.397 DEBUG [src.node.docker_mananger] Generated ports ['60207', '60208', '60209', '60210', '60211']
2025-02-17 03:09:21.397 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 03:09:21.397 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 03:09:21.397 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 03:09:21.397 DEBUG [src.node.docker_mananger] docker run -i -t -p 60207:60207 -p 60208:60208 -p 60209:60209 -p 60210:60210 -p 60211:60211 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=60209 --rest-port=60207 --tcp-port=60208 --discv5-udp-port=60210 --rest-address=0.0.0.0 --nat=extip:172.18.105.34 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1cdceda81852bb8e53e9bfef45db91dfeba6eacbc5c2cda9f0af48a20ccf5dbb --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --discv5-bootstrap-node=enr:-L24QIApS6r-CURQ6EEFudU0cFicRc3MER1IpLdCyu9ORsi2N19JWZ5v_IfuB-pFtPwheWtdSSqJ-1bVJp2v3wpvkAQCgmlkgnY0gmlwhKwSxyeKbXVsdGlhZGRyc5YACASsEscnBll2AAoErBLHJwZZd90DgnJzhQADAQAAiXNlY3AyNTZrMaEC_mUqFgZP9utH3z9ScV67N5hfz_8JaDoS_giWbCfd-1GDdGNwgll2g3VkcIJZeIV3YWt1MgE
2025-02-17 03:09:21.623 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.105.34 waku cc64c4f7b7d6984de37efe78bf08439130ece6f0556265ea7f1cb47e808439fe
2025-02-17 03:09:21.673 DEBUG [src.node.docker_mananger] Container started with ID cc64c4f7b7d6. Setting up logs at ./log/docker/node2_2025-02-17_03-09-20__c00b8cf1-ff1d-437f-ad16-61e2781ca36e__wakuorg_go-waku:latest.log
2025-02-17 03:09:21.674 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 60207
2025-02-17 03:09:21.675 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 03:09:22.675 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60207/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:09:22.678 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QHzmj4raHrVvELd30RXh0IRK-IvIKr9LeY51eD5WaA9RSSEsmsaYC721uv0xroNPoXP9CJ-VHIxDzuim_FFSo8iGAZUR4b2HgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaED4Q3udGjPt9Kv9ZneDFaVqgpEBvEskZj5KurBIlMdUI-DdGNwguswg3VkcILrMoV3YWt1MgE","listenAddresses":["/ip4/127.0.0.1/tcp/60208/p2p/16Uiu2HAmToWQNEmGrvRa6ADLiFyvCiMbLLiYoVC9n5gzTrja8nMC","/ip4/127.0.0.1/tcp/60209/ws/p2p/16Uiu2HAmToWQNEmGrvRa6ADLiFyvCiMbLLiYoVC9n5gzTrja8nMC","/ip4/172.17.0.3/tcp/60208/p2p/16Uiu2HAmToWQNEmGrvRa6ADLiFyvCiMbLLiYoVC9n5gzTrja8nMC","/ip4/172.17.0.3/tcp/60209/ws/p2p/16Uiu2HAmToWQNEmGrvRa6ADLiFyvCiMbLLiYoVC9n5gzTrja8nMC"]}'
2025-02-17 03:09:22.678 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 03:09:22.679 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:60207/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.199.39/tcp/22902/p2p/16Uiu2HAmCYj1GtUPnniPyP1rGeYfH4cRS6NQwZcbW98YiDtTayFW", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-17 03:09:22.696 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-17 03:09:22.697 DEBUG [src.steps.relay] Running fixture setup: subscribe_main_relay_nodes
2025-02-17 03:09:22.697 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22901/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-17 03:09:22.719 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 03:09:22.719 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:60207/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-17 03:09:22.722 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-17 03:09:22.723 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22901/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 03:09:22.728 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 03:09:22.729 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-17 03:09:22.830 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-17 03:09:22.830 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22901/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:09:22.832 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739761762723569920,"ephemeral":false,"proof":""}]'
2025-02-17 03:09:22.834 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-17 03:09:22.834 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60207/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:09:22.836 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-17 03:09:23.837 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22901/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 03:09:23.842 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 03:09:23.842 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-17 03:09:23.942 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-17 03:09:23.942 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22901/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:09:23.945 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739761763836931072,"ephemeral":false,"proof":""}]'
2025-02-17 03:09:23.946 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-17 03:09:23.946 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60207/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:09:23.948 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739761763836931072,"ephemeral":false}]'
2025-02-17 03:09:23.949 INFO [src.steps.relay] WARM UP successful!!
2025-02-17 03:09:23.950 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22901/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 03:09:23.955 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 03:09:23.955 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-17 03:09:24.055 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-17 03:09:24.055 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22901/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:09:24.058 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739761763950792192,"ephemeral":false,"proof":""}]'
2025-02-17 03:09:24.060 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-17 03:09:24.060 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60207/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:09:24.061 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739761763950792192,"ephemeral":false}]'
2025-02-17 03:09:24.063 DEBUG [src.node.waku_node] Restarting container with id 3f77e440686c
2025-02-17 03:09:24.894 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22901/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:09:24.996 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22901/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:09:24.999 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 03:09:24.999 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 03:09:24.999 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22901/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:09:25.002 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.199.39/tcp/22902/p2p/16Uiu2HAmCYj1GtUPnniPyP1rGeYfH4cRS6NQwZcbW98YiDtTayFW","/ip4/172.18.199.39/tcp/22903/ws/p2p/16Uiu2HAmCYj1GtUPnniPyP1rGeYfH4cRS6NQwZcbW98YiDtTayFW"],"enrUri":"enr:-L24QIApS6r-CURQ6EEFudU0cFicRc3MER1IpLdCyu9ORsi2N19JWZ5v_IfuB-pFtPwheWtdSSqJ-1bVJp2v3wpvkAQCgmlkgnY0gmlwhKwSxyeKbXVsdGlhZGRyc5YACASsEscnBll2AAoErBLHJwZZd90DgnJzhQADAQAAiXNlY3AyNTZrMaEC_mUqFgZP9utH3z9ScV67N5hfz_8JaDoS_giWbCfd-1GDdGNwgll2g3VkcIJZeIV3YWt1MgE"}'
2025-02-17 03:09:25.002 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 03:09:25.002 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22901/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-17 03:09:25.020 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 03:09:25.021 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:60207/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-17 03:09:25.023 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-17 03:09:25.023 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22901/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 03:09:25.026 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 03:09:25.026 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-17 03:09:25.127 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-17 03:09:25.127 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22901/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:09:25.130 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739761765023656960,"ephemeral":false,"proof":""}]'
2025-02-17 03:09:25.131 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-17 03:09:25.131 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60207/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:09:25.133 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-17 03:09:26.134 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22901/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-17 03:09:26.137 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 03:09:26.137 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:60207/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-17 03:09:26.138 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-17 03:09:26.139 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22901/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 03:09:26.142 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 03:09:26.142 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-17 03:09:26.242 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-17 03:09:26.243 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22901/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:09:26.245 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739761766139547904,"ephemeral":false,"proof":""}]'
2025-02-17 03:09:26.246 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-17 03:09:26.247 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60207/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:09:26.248 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-17 03:09:27.249 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22901/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-17 03:09:27.252 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 03:09:27.252 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:60207/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-17 03:09:27.254 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-17 03:09:27.255 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22901/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 03:09:27.257 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 03:09:27.257 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-17 03:09:27.358 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-17 03:09:27.358 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22901/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:09:27.360 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739761767255006720,"ephemeral":false,"proof":""}]'
2025-02-17 03:09:27.361 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-17 03:09:27.361 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60207/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:09:27.363 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-17 03:09:28.364 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22901/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-17 03:09:28.367 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 03:09:28.367 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:60207/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-17 03:09:28.368 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-17 03:09:28.369 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22901/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 03:09:28.372 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 03:09:28.372 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-17 03:09:28.472 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-17 03:09:28.473 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22901/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:09:28.475 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739761768369549824,"ephemeral":false,"proof":""}]'
2025-02-17 03:09:28.477 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-17 03:09:28.477 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60207/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:09:28.479 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-17 03:09:29.480 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22901/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-17 03:09:29.482 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 03:09:29.482 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:60207/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-17 03:09:29.484 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-17 03:09:29.484 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22901/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 03:09:29.489 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 03:09:29.489 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-17 03:09:29.589 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-17 03:09:29.589 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22901/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:09:29.592 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739761769484914432,"ephemeral":false,"proof":""}]'
2025-02-17 03:09:29.593 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-17 03:09:29.593 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:60207/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:09:29.595 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739761769484914432,"ephemeral":false}]'
2025-02-17 03:09:29.598 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-17 03:09:29.599 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-17 03:09:29.599 DEBUG [src.node.waku_node] Stopping container with id 3f77e440686c
2025-02-17 03:09:30.130 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 03:09:30.130 DEBUG [src.node.waku_node] Stopping container with id cc64c4f7b7d6
2025-02-17 03:09:30.639 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 03:09:30.642 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-17 03:09:30.666 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-17 03:09:30.672 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
