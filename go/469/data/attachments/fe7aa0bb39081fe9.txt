2025-02-17 03:07:39.112 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-17 03:07:39.112 DEBUG [tests.conftest] Running test: test_store_node_not_connected_directly_to_lightpushing_node with id: 2025-02-17_03-07-39__cf9f2af4-3752-447d-b0b7-5c0c783b8efa
2025-02-17 03:07:39.113 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-17 03:07:39.113 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-17 03:07:39.113 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-17 03:07:39.121 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-17 03:07:39.122 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-17_03-07-39__cf9f2af4-3752-447d-b0b7-5c0c783b8efa__wakuorg_go-waku:latest.log
2025-02-17 03:07:39.127 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 03:07:39.127 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-17_03-07-39__cf9f2af4-3752-447d-b0b7-5c0c783b8efa__wakuorg_nwaku:latest.log
2025-02-17 03:07:39.133 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-17 03:07:39.133 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node3_2025-02-17_03-07-39__cf9f2af4-3752-447d-b0b7-5c0c783b8efa__wakuorg_go-waku:latest.log
2025-02-17 03:07:39.133 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-17 03:07:39.133 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-17 03:07:39.134 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 03:07:39.134 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 03:07:39.205 DEBUG [src.node.docker_mananger] Network waku created
2025-02-17 03:07:39.205 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.154.86
2025-02-17 03:07:39.206 DEBUG [src.node.docker_mananger] Generated ports ['50640', '50641', '50642', '50643', '50644']
2025-02-17 03:07:39.206 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 03:07:39.206 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 03:07:39.206 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 03:07:39.206 DEBUG [src.node.docker_mananger] docker run -i -t -p 50640:50640 -p 50641:50641 -p 50642:50642 -p 50643:50643 -p 50644:50644 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=50642 --rest-port=50640 --tcp-port=50641 --discv5-udp-port=50643 --rest-address=0.0.0.0 --nat=extip:172.18.154.86 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6530e66332456ba4ad88022d2a1a96dd67dfdff1dc3c2fd46f3d3b5b5f38ff56 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --lightpush=true
2025-02-17 03:07:43.022 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.154.86 waku f2ae23f9141258cc044f8f5e15a206bd6e830859f23c0474f561d7da0347d760
2025-02-17 03:07:43.081 DEBUG [src.node.docker_mananger] Container started with ID f2ae23f91412. Setting up logs at ./log/docker/node1_2025-02-17_03-07-39__cf9f2af4-3752-447d-b0b7-5c0c783b8efa__wakuorg_go-waku:latest.log
2025-02-17 03:07:43.082 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 50640
2025-02-17 03:07:43.082 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 03:07:44.083 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50640/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:07:44.085 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QPmtJ8_ZhAWK6v1AaMbvF6lBKogKyiasEsyRoUFRJ7LKTgmg2qrEuprIGgl8oM-25xtegoZW7Kyvx2abIWtMrKiGAZUR4DxcgmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaEC_8yRtxZZH34KdoqR-OC_UQ3g7N-tW8_g_nUdp1wZSgGDdGNwgsXRg3VkcILF04V3YWt1Mgk","listenAddresses":["/ip4/127.0.0.1/tcp/50641/p2p/16Uiu2HAmCeCs81FDkb7noDCukhSqurNwbXeJN5Pv9jbFb2NtyjHi","/ip4/127.0.0.1/tcp/50642/ws/p2p/16Uiu2HAmCeCs81FDkb7noDCukhSqurNwbXeJN5Pv9jbFb2NtyjHi","/ip4/172.17.0.2/tcp/50641/p2p/16Uiu2HAmCeCs81FDkb7noDCukhSqurNwbXeJN5Pv9jbFb2NtyjHi","/ip4/172.17.0.2/tcp/50642/ws/p2p/16Uiu2HAmCeCs81FDkb7noDCukhSqurNwbXeJN5Pv9jbFb2NtyjHi"]}'
2025-02-17 03:07:44.086 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 03:07:44.086 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 03:07:44.086 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 03:07:44.088 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 03:07:44.088 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.169.220
2025-02-17 03:07:44.088 DEBUG [src.node.docker_mananger] Generated ports ['19838', '19839', '19840', '19841', '19842']
2025-02-17 03:07:44.088 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 03:07:44.088 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 03:07:44.089 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 03:07:44.089 DEBUG [src.node.docker_mananger] docker run -i -t -p 19838:19838 -p 19839:19839 -p 19840:19840 -p 19841:19841 -p 19842:19842 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19840 --rest-port=19838 --tcp-port=19839 --discv5-udp-port=19841 --rest-address=0.0.0.0 --nat=extip:172.18.169.220 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=521f84a59a86390c95ebe4c115ee0bd3d3dafe13bb8ba673a65eaccce3740977 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19842 --metrics-logging=true --lightpush=true --store=true --relay=true --discv5-bootstrap-node=enr:-J-4QPmtJ8_ZhAWK6v1AaMbvF6lBKogKyiasEsyRoUFRJ7LKTgmg2qrEuprIGgl8oM-25xtegoZW7Kyvx2abIWtMrKiGAZUR4DxcgmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaEC_8yRtxZZH34KdoqR-OC_UQ3g7N-tW8_g_nUdp1wZSgGDdGNwgsXRg3VkcILF04V3YWt1Mgk --lightpushnode=/ip4/172.18.154.86/tcp/50641/p2p/16Uiu2HAmCeCs81FDkb7noDCukhSqurNwbXeJN5Pv9jbFb2NtyjHi
2025-02-17 03:07:47.223 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.169.220 waku bfdfe1c847b34941ca5c02af2cb6a7679def95685d3defc0ab004c453f9e8648
2025-02-17 03:07:47.271 DEBUG [src.node.docker_mananger] Container started with ID bfdfe1c847b3. Setting up logs at ./log/docker/node2_2025-02-17_03-07-39__cf9f2af4-3752-447d-b0b7-5c0c783b8efa__wakuorg_nwaku:latest.log
2025-02-17 03:07:47.273 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 19838
2025-02-17 03:07:47.273 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 03:07:48.273 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19838/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:07:48.277 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 03:07:48.277 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 03:07:48.277 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19838/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:07:48.279 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.169.220/tcp/19839/p2p/16Uiu2HAmTYEgXK19DhNqNrttxStGM68Nxj8E1DdzAKNKBjitcHqQ","/ip4/172.18.169.220/tcp/19840/ws/p2p/16Uiu2HAmTYEgXK19DhNqNrttxStGM68Nxj8E1DdzAKNKBjitcHqQ"],"enrUri":"enr:-L24QAchcoSZJNoOtpwbBKN0h5WSRxOmUHhq55_eU_NXvAufEMy6TD3aD_LTxlQAopXL6qsKguk4gsLBwLfTsY5m-okCgmlkgnY0gmlwhKwSqdyKbXVsdGlhZGRyc5YACASsEqncBk1_AAoErBKp3AZNgN0DgnJzhQADAQAAiXNlY3AyNTZrMaED3SRxau16cEj5CpVj1s_DWlRt-hast6mYYQXsNvVyZP-DdGNwgk1_g3VkcIJNgYV3YWt1Mgs"}'
2025-02-17 03:07:48.279 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 03:07:48.280 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 03:07:48.280 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 03:07:48.281 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 03:07:48.281 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.97.74
2025-02-17 03:07:48.281 DEBUG [src.node.docker_mananger] Generated ports ['1562', '1563', '1564', '1565', '1566']
2025-02-17 03:07:48.281 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 03:07:48.281 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 03:07:48.282 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 03:07:48.282 DEBUG [src.node.docker_mananger] docker run -i -t -p 1562:1562 -p 1563:1563 -p 1564:1564 -p 1565:1565 -p 1566:1566 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=1564 --rest-port=1562 --tcp-port=1563 --discv5-udp-port=1565 --rest-address=0.0.0.0 --nat=extip:172.18.97.74 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fefd3ab9ae74ab68bd2b42465ee18d33da9bd0e9126c3a7c8f0cf81f27f27dd2 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --storenode=/ip4/172.18.169.220/tcp/19839/p2p/16Uiu2HAmTYEgXK19DhNqNrttxStGM68Nxj8E1DdzAKNKBjitcHqQ --discv5-bootstrap-node=enr:-L24QAchcoSZJNoOtpwbBKN0h5WSRxOmUHhq55_eU_NXvAufEMy6TD3aD_LTxlQAopXL6qsKguk4gsLBwLfTsY5m-okCgmlkgnY0gmlwhKwSqdyKbXVsdGlhZGRyc5YACASsEqncBk1_AAoErBKp3AZNgN0DgnJzhQADAQAAiXNlY3AyNTZrMaED3SRxau16cEj5CpVj1s_DWlRt-hast6mYYQXsNvVyZP-DdGNwgk1_g3VkcIJNgYV3YWt1Mgs --pubsub-topic=/waku/2/rs/3/1
2025-02-17 03:07:48.504 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.97.74 waku 1835090a73191dbcf1664d02e5c01899d29a887211c48a364258ae0afe3393d2
2025-02-17 03:07:48.555 DEBUG [src.node.docker_mananger] Container started with ID 1835090a7319. Setting up logs at ./log/docker/node3_2025-02-17_03-07-39__cf9f2af4-3752-447d-b0b7-5c0c783b8efa__wakuorg_go-waku:latest.log
2025-02-17 03:07:48.556 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 1562
2025-02-17 03:07:48.556 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 03:07:49.557 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1562/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:07:49.559 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QB0z-VanthwKTGeh9dSjLwkh4OurPuXrQLlKIsQJXF9NWxzPFQhBmu_QuIODYjNZgwXJNmAyfyaHD_LSug74iceGAZUR4FHJgmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQNZHHqwGEVKPN_2_adAdn5egbBsXWrLAmxCDLLEzURgFIN0Y3CCBhuDdWRwggYdhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/1563/p2p/16Uiu2HAmJeqpgZW6diXuUw4XBqFA8MUrTKV8AuesbsRMdKwziuRV","/ip4/127.0.0.1/tcp/1564/ws/p2p/16Uiu2HAmJeqpgZW6diXuUw4XBqFA8MUrTKV8AuesbsRMdKwziuRV","/ip4/172.17.0.4/tcp/1563/p2p/16Uiu2HAmJeqpgZW6diXuUw4XBqFA8MUrTKV8AuesbsRMdKwziuRV","/ip4/172.17.0.4/tcp/1564/ws/p2p/16Uiu2HAmJeqpgZW6diXuUw4XBqFA8MUrTKV8AuesbsRMdKwziuRV"]}'
2025-02-17 03:07:49.559 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 03:07:49.560 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50640/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-17 03:07:49.562 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-17 03:07:49.562 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19838/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-17 03:07:49.565 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 03:07:49.566 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50640/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:07:49.567 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"id":"16Uiu2HAmTYEgXK19DhNqNrttxStGM68Nxj8E1DdzAKNKBjitcHqQ","multiaddrs":["/ip4/172.18.169.220/tcp/19839/p2p/16Uiu2HAmTYEgXK19DhNqNrttxStGM68Nxj8E1DdzAKNKBjitcHqQ","/ip4/172.18.169.220/tcp/19840/ws/p2p/16Uiu2HAmTYEgXK19DhNqNrttxStGM68Nxj8E1DdzAKNKBjitcHqQ"],"protocols":null,"connected":false,"pubsubTopics":[]}]'
2025-02-17 03:07:49.568 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19838/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:07:49.570 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.4/tcp/1563/p2p/16Uiu2HAmJeqpgZW6diXuUw4XBqFA8MUrTKV8AuesbsRMdKwziuRV","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
2025-02-17 03:07:49.570 DEBUG [src.libs.common] Sleeping for 30 seconds
2025-02-17 03:08:19.571 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50640/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1739761699571272704}}'
2025-02-17 03:08:19.578 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-17 03:08:19.579 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 03:08:20.580 DEBUG [src.steps.store] Checking that peer wakuorg/go-waku:latest can find the stored messages
2025-02-17 03:08:20.581 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1562/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-filter%2Fproto&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:08:20.587 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"ab3f05862733c0ac26eb2fde3451da383d7af17330d6beaa327107a4e832897f","status_code":200,"status_desc":"OK","messages":[{"message_hash":"8iokC3VoJ+q83fs0RstZEnbovZNhdk7Q2tEwRlbKRkU="}]}'
2025-02-17 03:08:20.591 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-17 03:08:20.592 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-17 03:08:20.592 DEBUG [src.node.waku_node] Stopping container with id f2ae23f91412
2025-02-17 03:08:21.091 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 03:08:21.092 DEBUG [src.node.waku_node] Stopping container with id bfdfe1c847b3
2025-02-17 03:08:21.898 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 03:08:21.898 DEBUG [src.node.waku_node] Stopping container with id 1835090a7319
2025-02-17 03:08:21.916 ERROR [src.node.docker_mananger] Max retries reached for container f2ae23f91412. Exiting log stream.
2025-02-17 03:08:22.385 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 03:08:22.386 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-17 03:08:22.396 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-17 03:08:22.411 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-17 03:08:22.415 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
