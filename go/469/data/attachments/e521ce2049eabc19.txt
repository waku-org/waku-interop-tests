2025-02-17 03:07:39.836 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-17 03:07:39.837 DEBUG [tests.conftest] Running test: test_store with id: 2025-02-17_03-07-39__8df0dfde-6e40-4b8f-a075-7d10860dfd1c
2025-02-17 03:07:39.837 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-17 03:07:39.838 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-17 03:07:39.838 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-17 03:07:39.838 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-17 03:07:39.838 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-17 03:07:39.848 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 03:07:39.848 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-17_03-07-39__8df0dfde-6e40-4b8f-a075-7d10860dfd1c__wakuorg_nwaku:latest.log
2025-02-17 03:07:39.848 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 03:07:39.849 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 03:07:39.919 DEBUG [src.node.docker_mananger] Network waku created
2025-02-17 03:07:39.919 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.234.228
2025-02-17 03:07:39.920 DEBUG [src.node.docker_mananger] Generated ports ['56681', '56682', '56683', '56684', '56685']
2025-02-17 03:07:39.920 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 03:07:39.920 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 03:07:39.920 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 03:07:39.920 DEBUG [src.node.docker_mananger] docker run -i -t -p 56681:56681 -p 56682:56682 -p 56683:56683 -p 56684:56684 -p 56685:56685 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56683 --rest-port=56681 --tcp-port=56682 --discv5-udp-port=56684 --rest-address=0.0.0.0 --nat=extip:172.18.234.228 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=39733d50e07d22acdce423ee33214caeddcaf0aadcc9cd5881dbf49745d3fbaa --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56685 --metrics-logging=true --relay=true --store=true
2025-02-17 03:07:43.089 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.234.228 waku 4ea4821cbe146e295f178015a75da19fe008207bfe45eab2e6a778d51fbc2da8
2025-02-17 03:07:43.146 DEBUG [src.node.docker_mananger] Container started with ID 4ea4821cbe14. Setting up logs at ./log/docker/node1_2025-02-17_03-07-39__8df0dfde-6e40-4b8f-a075-7d10860dfd1c__wakuorg_nwaku:latest.log
2025-02-17 03:07:43.149 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 56681
2025-02-17 03:07:43.150 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 03:07:44.150 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56681/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:07:44.154 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 03:07:44.154 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 03:07:44.154 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56681/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:07:44.156 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.234.228/tcp/56682/p2p/16Uiu2HAmHNXVfiAcocCzVUxNNMGnE4hodSrq3wPfKyufdMumcZ5U","/ip4/172.18.234.228/tcp/56683/ws/p2p/16Uiu2HAmHNXVfiAcocCzVUxNNMGnE4hodSrq3wPfKyufdMumcZ5U"],"enrUri":"enr:-L24QN1Dz9Wn86yG4R3pa0CS-hyxbv-xJhXqzhrhBrrqD_RmKtwMXgvwHpE2md60AG9RqsMmDbF8pzHipnmHJV2jZSQCgmlkgnY0gmlwhKwS6uSKbXVsdGlhZGRyc5YACASsEurkBt1qAAoErBLq5Abda90DgnJzhQADAQAAiXNlY3AyNTZrMaEDRhLGqYZRgNZ0_e7Lm-OFBsc7PUXC6RZ7DP8SxtzvcTuDdGNwgt1qg3VkcILdbIV3YWt1MgM"}'
2025-02-17 03:07:44.157 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 03:07:44.163 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-17 03:07:44.163 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-17_03-07-39__8df0dfde-6e40-4b8f-a075-7d10860dfd1c__wakuorg_go-waku:latest.log
2025-02-17 03:07:44.163 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 03:07:44.163 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 03:07:44.165 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 03:07:44.165 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.41.43
2025-02-17 03:07:44.165 DEBUG [src.node.docker_mananger] Generated ports ['55424', '55425', '55426', '55427', '55428']
2025-02-17 03:07:44.166 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 03:07:44.166 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 03:07:44.166 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 03:07:44.166 DEBUG [src.node.docker_mananger] docker run -i -t -p 55424:55424 -p 55425:55425 -p 55426:55426 -p 55427:55427 -p 55428:55428 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=55426 --rest-port=55424 --tcp-port=55425 --discv5-udp-port=55427 --rest-address=0.0.0.0 --nat=extip:172.18.41.43 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bf9a9bfbbd06ed3cfc31ecc46295ebf7ed0a43eb295eb6106df4b16cfb3cdfbc --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --store=true --discv5-bootstrap-node=enr:-L24QN1Dz9Wn86yG4R3pa0CS-hyxbv-xJhXqzhrhBrrqD_RmKtwMXgvwHpE2md60AG9RqsMmDbF8pzHipnmHJV2jZSQCgmlkgnY0gmlwhKwS6uSKbXVsdGlhZGRyc5YACASsEurkBt1qAAoErBLq5Abda90DgnJzhQADAQAAiXNlY3AyNTZrMaEDRhLGqYZRgNZ0_e7Lm-OFBsc7PUXC6RZ7DP8SxtzvcTuDdGNwgt1qg3VkcILdbIV3YWt1MgM --storenode=/ip4/172.18.234.228/tcp/56682/p2p/16Uiu2HAmHNXVfiAcocCzVUxNNMGnE4hodSrq3wPfKyufdMumcZ5U
2025-02-17 03:07:47.028 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.41.43 waku f96a38181bc6fe06cbddf3c0a72956e00f61de9634caef9b561894f6a257a85a
2025-02-17 03:07:47.082 DEBUG [src.node.docker_mananger] Container started with ID f96a38181bc6. Setting up logs at ./log/docker/node1_2025-02-17_03-07-39__8df0dfde-6e40-4b8f-a075-7d10860dfd1c__wakuorg_go-waku:latest.log
2025-02-17 03:07:47.084 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 55424
2025-02-17 03:07:47.084 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 03:07:48.084 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:55424/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:07:48.087 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QHNJPrA4IEzxZ3EPzs0Riyy8qfb2wApDr9j2shClNXJhPmqZX8gHKUL6-0peO6-KkNpdxL1Y5MxaWHAjfH6SYrSGAZUR4EwMgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaEDv_G6Vb1UVGPnGKfleiuBJHE2Yu-zhNc6wtY3XrXxLpKDdGNwgtiBg3VkcILYg4V3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/55425/p2p/16Uiu2HAmRaG1KJ3FkBC4fyWtHGVyfmfYpisZrCFBmGcB8vQzdfqB","/ip4/127.0.0.1/tcp/55426/ws/p2p/16Uiu2HAmRaG1KJ3FkBC4fyWtHGVyfmfYpisZrCFBmGcB8vQzdfqB","/ip4/172.17.0.3/tcp/55425/p2p/16Uiu2HAmRaG1KJ3FkBC4fyWtHGVyfmfYpisZrCFBmGcB8vQzdfqB","/ip4/172.17.0.3/tcp/55426/ws/p2p/16Uiu2HAmRaG1KJ3FkBC4fyWtHGVyfmfYpisZrCFBmGcB8vQzdfqB"]}'
2025-02-17 03:07:48.088 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 03:07:48.088 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56681/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-17 03:07:48.105 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 03:07:48.105 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55424/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-17 03:07:48.108 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-17 03:07:48.109 DEBUG [src.steps.store] Relaying message
2025-02-17 03:07:48.109 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56681/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 03:07:48.116 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 03:07:48.116 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-17 03:07:48.317 DEBUG [src.steps.store] Checking that peer wakuorg/go-waku:latest can find the stored messages
2025-02-17 03:07:48.317 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:55424/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-relay%2Fproto&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:07:54.842 ERROR [src.node.api_clients.base_client] HTTP error occurred: 500 Server Error: Internal Server Error for url: http://127.0.0.1:55424/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-relay%2Fproto&pageSize=5&ascending=true. Response content: b'{"messages":null,"error_message":"context deadline exceeded"}'
2025-02-17 03:07:55.845 DEBUG [src.steps.store] Relaying message
2025-02-17 03:07:55.845 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56681/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 03:07:55.851 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 03:07:55.851 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-17 03:07:56.052 DEBUG [src.steps.store] Checking that peer wakuorg/go-waku:latest can find the stored messages
2025-02-17 03:07:56.052 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:55424/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-relay%2Fproto&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:07:56.058 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"a7ab14bde2abad9385b091055c07d5664ff1098923ec7c9a6589f2306d0df56d","status_code":200,"status_desc":"OK","messages":[{"message_hash":"r6BfACBU6bnHj/coeMUfKUeQfLQ50Z7UabuPwl+7X2Q="},{"message_hash":"vxDySItDRuY3RSuBrlfG9f2DbcCNqUfhhSggZ1Zh584="}]}'
2025-02-17 03:07:56.061 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-17 03:07:56.062 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-17 03:07:56.062 DEBUG [src.node.waku_node] Stopping container with id 4ea4821cbe14
2025-02-17 03:07:56.662 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 03:07:56.662 DEBUG [src.node.waku_node] Stopping container with id f96a38181bc6
2025-02-17 03:07:57.154 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 03:07:57.157 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-17 03:07:57.164 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-17 03:07:57.168 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
