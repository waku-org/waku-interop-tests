2025-02-17 03:07:35.117 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-17 03:07:35.117 DEBUG [tests.conftest] Running test: test_store_node_not_connected_directly_to_relaying_node with id: 2025-02-17_03-07-35__89973abb-971f-4b8d-bc13-77a17632f79e
2025-02-17 03:07:35.117 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-17 03:07:35.118 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-17 03:07:35.118 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-17 03:07:35.125 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-17 03:07:35.125 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-17_03-07-35__89973abb-971f-4b8d-bc13-77a17632f79e__wakuorg_go-waku:latest.log
2025-02-17 03:07:35.131 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 03:07:35.131 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-17_03-07-35__89973abb-971f-4b8d-bc13-77a17632f79e__wakuorg_nwaku:latest.log
2025-02-17 03:07:35.136 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-17 03:07:35.137 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node3_2025-02-17_03-07-35__89973abb-971f-4b8d-bc13-77a17632f79e__wakuorg_go-waku:latest.log
2025-02-17 03:07:35.137 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-17 03:07:35.137 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-17 03:07:35.138 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 03:07:35.138 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 03:07:35.199 DEBUG [src.node.docker_mananger] Network waku created
2025-02-17 03:07:35.199 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.14.247
2025-02-17 03:07:35.199 DEBUG [src.node.docker_mananger] Generated ports ['31008', '31009', '31010', '31011', '31012']
2025-02-17 03:07:35.199 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 03:07:35.199 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 03:07:35.199 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 03:07:35.200 DEBUG [src.node.docker_mananger] docker run -i -t -p 31008:31008 -p 31009:31009 -p 31010:31010 -p 31011:31011 -p 31012:31012 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=31010 --rest-port=31008 --tcp-port=31009 --discv5-udp-port=31011 --rest-address=0.0.0.0 --nat=extip:172.18.14.247 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=602d5bd32ae99345b3ae98c4b70ebff603aeeaefb8ce32dea9e1fc7bceeefa9a --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true
2025-02-17 03:07:38.226 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.14.247 waku 38e27cb204f734b4054dc72e4836f1b7f94fac35520af2a10d7d5ac15aed8f79
2025-02-17 03:07:38.280 DEBUG [src.node.docker_mananger] Container started with ID 38e27cb204f7. Setting up logs at ./log/docker/node1_2025-02-17_03-07-35__89973abb-971f-4b8d-bc13-77a17632f79e__wakuorg_go-waku:latest.log
2025-02-17 03:07:38.281 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 31008
2025-02-17 03:07:38.284 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 03:07:39.285 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31008/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:07:39.287 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QDDU3CrvOjpTQRx3Vnz1vq7i91ZG1CoQQMkMPJOZv8wDI_G1jnI22AVZl9zs8mCRTFW3AAI4BbAwvDXWQ0_S8Z2GAZUR4CmhgmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaED_hfRz5fKRztEnvsyejIpg5hn_XR1PGDrVAEuMmmvPiODdGNwgnkhg3VkcIJ5I4V3YWt1MgE","listenAddresses":["/ip4/127.0.0.1/tcp/31009/p2p/16Uiu2HAmVkryL6iuG6pcDU5PapZUig8k3QvzARgWkv3oMsesbpR8","/ip4/127.0.0.1/tcp/31010/ws/p2p/16Uiu2HAmVkryL6iuG6pcDU5PapZUig8k3QvzARgWkv3oMsesbpR8","/ip4/172.17.0.2/tcp/31009/p2p/16Uiu2HAmVkryL6iuG6pcDU5PapZUig8k3QvzARgWkv3oMsesbpR8","/ip4/172.17.0.2/tcp/31010/ws/p2p/16Uiu2HAmVkryL6iuG6pcDU5PapZUig8k3QvzARgWkv3oMsesbpR8"]}'
2025-02-17 03:07:39.288 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 03:07:39.288 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 03:07:39.288 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 03:07:39.290 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 03:07:39.290 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.111.61
2025-02-17 03:07:39.290 DEBUG [src.node.docker_mananger] Generated ports ['42580', '42581', '42582', '42583', '42584']
2025-02-17 03:07:39.290 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 03:07:39.290 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 03:07:39.290 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 03:07:39.290 DEBUG [src.node.docker_mananger] docker run -i -t -p 42580:42580 -p 42581:42581 -p 42582:42582 -p 42583:42583 -p 42584:42584 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42582 --rest-port=42580 --tcp-port=42581 --discv5-udp-port=42583 --rest-address=0.0.0.0 --nat=extip:172.18.111.61 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ac73a612ab00acafcd2a8dde0cdb6bcc303e3cdaacdd3e5b61de0edaa6acf9ab --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42584 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-J-4QDDU3CrvOjpTQRx3Vnz1vq7i91ZG1CoQQMkMPJOZv8wDI_G1jnI22AVZl9zs8mCRTFW3AAI4BbAwvDXWQ0_S8Z2GAZUR4CmhgmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaED_hfRz5fKRztEnvsyejIpg5hn_XR1PGDrVAEuMmmvPiODdGNwgnkhg3VkcIJ5I4V3YWt1MgE
2025-02-17 03:07:41.496 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.111.61 waku f3ac2f191279c626bd9c188725f4c95819c3900167636f5331faf16b01b994d5
2025-02-17 03:07:41.552 DEBUG [src.node.docker_mananger] Container started with ID f3ac2f191279. Setting up logs at ./log/docker/node2_2025-02-17_03-07-35__89973abb-971f-4b8d-bc13-77a17632f79e__wakuorg_nwaku:latest.log
2025-02-17 03:07:41.553 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 42580
2025-02-17 03:07:41.553 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 03:07:42.554 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42580/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:07:42.575 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 03:07:42.576 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 03:07:42.577 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42580/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:07:42.581 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.111.61/tcp/42581/p2p/16Uiu2HAmTiV4JG7TMYSfBRmCbBQ4MTaUM8PBfp1s8ZZsnpoH1rQF","/ip4/172.18.111.61/tcp/42582/ws/p2p/16Uiu2HAmTiV4JG7TMYSfBRmCbBQ4MTaUM8PBfp1s8ZZsnpoH1rQF"],"enrUri":"enr:-L24QG7qgfptJmZtU7-4C-D7fB4QemsF3xfhKhOP8DcT4UBEUlYAWfrZd1lgEujwzJgjLPIdmQ-KhDCcXQ7OUS5p31ICgmlkgnY0gmlwhKwSbz2KbXVsdGlhZGRyc5YACASsEm89BqZVAAoErBJvPQamVt0DgnJzhQADAQAAiXNlY3AyNTZrMaED38SBZyinp4U2ZDOoSitjTu69JYs1_zw3lYNpkdMdJSiDdGNwgqZVg3VkcIKmV4V3YWt1MgM"}'
2025-02-17 03:07:42.582 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 03:07:42.582 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 03:07:42.582 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 03:07:42.583 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 03:07:42.583 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.198.166
2025-02-17 03:07:42.584 DEBUG [src.node.docker_mananger] Generated ports ['39907', '39908', '39909', '39910', '39911']
2025-02-17 03:07:42.584 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 03:07:42.584 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 03:07:42.584 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 03:07:42.584 DEBUG [src.node.docker_mananger] docker run -i -t -p 39907:39907 -p 39908:39908 -p 39909:39909 -p 39910:39910 -p 39911:39911 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=39909 --rest-port=39907 --tcp-port=39908 --discv5-udp-port=39910 --rest-address=0.0.0.0 --nat=extip:172.18.198.166 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dc2aef9b8afdec24dfd9acccffc38ecbf188f88e9acaba1a8f0b2aa81ad31ec3 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --storenode=/ip4/172.18.111.61/tcp/42581/p2p/16Uiu2HAmTiV4JG7TMYSfBRmCbBQ4MTaUM8PBfp1s8ZZsnpoH1rQF --discv5-bootstrap-node=enr:-L24QG7qgfptJmZtU7-4C-D7fB4QemsF3xfhKhOP8DcT4UBEUlYAWfrZd1lgEujwzJgjLPIdmQ-KhDCcXQ7OUS5p31ICgmlkgnY0gmlwhKwSbz2KbXVsdGlhZGRyc5YACASsEm89BqZVAAoErBJvPQamVt0DgnJzhQADAQAAiXNlY3AyNTZrMaED38SBZyinp4U2ZDOoSitjTu69JYs1_zw3lYNpkdMdJSiDdGNwgqZVg3VkcIKmV4V3YWt1MgM --pubsub-topic=/waku/2/rs/3/1
2025-02-17 03:07:42.802 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.198.166 waku 00db71591f7bc6d5f9363c94e6ebfced5a280b4b32d28f354976b0be5f70887d
2025-02-17 03:07:42.856 DEBUG [src.node.docker_mananger] Container started with ID 00db71591f7b. Setting up logs at ./log/docker/node3_2025-02-17_03-07-35__89973abb-971f-4b8d-bc13-77a17632f79e__wakuorg_go-waku:latest.log
2025-02-17 03:07:42.856 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 39907
2025-02-17 03:07:42.856 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 03:07:43.858 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39907/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:07:43.860 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QBZz7uVhnjm6jf7AzVZ46cejlDGpv0DYzeBICL8qOnRZKbMYbafw1ufizMVTssYLVAcY0qsX5u4gf_qPOR6ldK-GAZUR4DuDgmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQKDrsQYcDZFgyV8gpFka4VRNurgj5dBT_hWj8ZHuyucMYN0Y3CCm-SDdWRwgpvmhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/39908/p2p/16Uiu2HAm4HhxBw5wcmkSpH7ZorK3kyFARdaJzJbPKamGArzzu6Qx","/ip4/127.0.0.1/tcp/39909/ws/p2p/16Uiu2HAm4HhxBw5wcmkSpH7ZorK3kyFARdaJzJbPKamGArzzu6Qx","/ip4/172.17.0.4/tcp/39908/p2p/16Uiu2HAm4HhxBw5wcmkSpH7ZorK3kyFARdaJzJbPKamGArzzu6Qx","/ip4/172.17.0.4/tcp/39909/ws/p2p/16Uiu2HAm4HhxBw5wcmkSpH7ZorK3kyFARdaJzJbPKamGArzzu6Qx"]}'
2025-02-17 03:07:43.861 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 03:07:43.861 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31008/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-17 03:07:43.863 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-17 03:07:43.863 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42580/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-17 03:07:43.866 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 03:07:43.867 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31008/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:07:43.868 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"id":"16Uiu2HAmTiV4JG7TMYSfBRmCbBQ4MTaUM8PBfp1s8ZZsnpoH1rQF","multiaddrs":["/ip4/172.18.111.61/tcp/42581/p2p/16Uiu2HAmTiV4JG7TMYSfBRmCbBQ4MTaUM8PBfp1s8ZZsnpoH1rQF","/ip4/172.18.111.61/tcp/42582/ws/p2p/16Uiu2HAmTiV4JG7TMYSfBRmCbBQ4MTaUM8PBfp1s8ZZsnpoH1rQF"],"protocols":null,"connected":false,"pubsubTopics":[]}]'
2025-02-17 03:07:43.869 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42580/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:07:43.871 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.4/tcp/39908/p2p/16Uiu2HAm4HhxBw5wcmkSpH7ZorK3kyFARdaJzJbPKamGArzzu6Qx","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
2025-02-17 03:07:43.871 DEBUG [src.libs.common] Sleeping for 30 seconds
2025-02-17 03:08:13.872 DEBUG [src.steps.store] Relaying message
2025-02-17 03:08:13.872 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31008/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 03:08:13.875 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-17 03:08:13.875 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-17 03:08:14.076 DEBUG [src.steps.store] Checking that peer wakuorg/go-waku:latest can find the stored messages
2025-02-17 03:08:14.076 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39907/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-filter%2Fproto&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:08:14.082 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"160a68c654cfd03f29cad0721db318321c2708e8c0c50d4e850a5fc9d8e6d113","status_code":200,"status_desc":"OK","messages":[{"message_hash":"LPNon88yAvJ/ID9x1DRkK8FUy11BLjSkvGWnKRYExW8="}]}'
2025-02-17 03:08:14.085 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-17 03:08:14.086 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-17 03:08:14.086 DEBUG [src.node.waku_node] Stopping container with id 38e27cb204f7
2025-02-17 03:08:14.594 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 03:08:14.594 DEBUG [src.node.waku_node] Stopping container with id f3ac2f191279
2025-02-17 03:08:15.406 ERROR [src.node.docker_mananger] Max retries reached for container 38e27cb204f7. Exiting log stream.
2025-02-17 03:08:15.576 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 03:08:15.577 DEBUG [src.node.waku_node] Stopping container with id 00db71591f7b
2025-02-17 03:08:16.086 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 03:08:16.087 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-17 03:08:16.093 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-17 03:08:16.120 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-17 03:08:16.124 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
