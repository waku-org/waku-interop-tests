2025-02-17 03:10:39.257 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-17 03:10:39.258 DEBUG [tests.conftest] Running test: test_publishing_node_paused_and_unpaused with id: 2025-02-17_03-10-39__98c3db7e-80c8-4b99-8722-635d6f574d2f
2025-02-17 03:10:39.258 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-17 03:10:39.260 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-17 03:10:39.260 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-17 03:10:39.267 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 03:10:39.267 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-17_03-10-39__98c3db7e-80c8-4b99-8722-635d6f574d2f__wakuorg_nwaku:latest.log
2025-02-17 03:10:39.267 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 03:10:39.267 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 03:10:39.269 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 03:10:39.269 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.175.172
2025-02-17 03:10:39.269 DEBUG [src.node.docker_mananger] Generated ports ['51421', '51422', '51423', '51424', '51425']
2025-02-17 03:10:39.269 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 03:10:39.269 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 03:10:39.269 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 03:10:39.269 DEBUG [src.node.docker_mananger] docker run -i -t -p 51421:51421 -p 51422:51422 -p 51423:51423 -p 51424:51424 -p 51425:51425 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=51423 --rest-port=51421 --tcp-port=51422 --discv5-udp-port=51424 --rest-address=0.0.0.0 --nat=extip:172.18.175.172 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f2aff2e12df773e70b0deda03c5efbaaefc88959becbfe8509c52d54614bdafa --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=51425 --metrics-logging=true --store=true --relay=true
2025-02-17 03:10:39.490 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.175.172 waku 006f89848cae036facdee86f94ab6f4a74a3ea9516cd789faaf9c587d0a41ce9
2025-02-17 03:10:39.538 ERROR [src.node.docker_mananger] Max retries reached for container 3f819784b4be. Exiting log stream.
2025-02-17 03:10:39.541 DEBUG [src.node.docker_mananger] Container started with ID 006f89848cae. Setting up logs at ./log/docker/publishing_node1_2025-02-17_03-10-39__98c3db7e-80c8-4b99-8722-635d6f574d2f__wakuorg_nwaku:latest.log
2025-02-17 03:10:39.541 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 51421
2025-02-17 03:10:39.542 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 03:10:40.072 ERROR [src.node.docker_mananger] Max retries reached for container b56ebfd929fe. Exiting log stream.
2025-02-17 03:10:40.543 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51421/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:10:40.545 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 03:10:40.546 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 03:10:40.546 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51421/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:10:40.548 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.175.172/tcp/51422/p2p/16Uiu2HAm5cCoaWSJpkyZ32biiF5p6mqS9AX7BvToMQPNXWHum4Vo","/ip4/172.18.175.172/tcp/51423/ws/p2p/16Uiu2HAm5cCoaWSJpkyZ32biiF5p6mqS9AX7BvToMQPNXWHum4Vo"],"enrUri":"enr:-L24QPtLJ3MiFC5MOUE7OsS0ssmtdXhWHqZBoC4mm3AkNWnrFVBCXNEyPe_dZrx0Lv5rdGtyRcG2G4d4M1NndoZPSYUCgmlkgnY0gmlwhKwSr6yKbXVsdGlhZGRyc5YACASsEq-sBsjeAAoErBKvrAbI390DgnJzhQADAQAAiXNlY3AyNTZrMaECl0eHr8kIGOWHfRqy9JMz53Zy5Igh_2u_YQSBdEg961KDdGNwgsjeg3VkcILI4IV3YWt1MgM"}'
2025-02-17 03:10:40.548 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 03:10:40.558 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-17 03:10:40.558 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-17_03-10-39__98c3db7e-80c8-4b99-8722-635d6f574d2f__wakuorg_go-waku:latest.log
2025-02-17 03:10:40.558 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 03:10:40.558 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 03:10:40.560 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 03:10:40.560 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.167.59
2025-02-17 03:10:40.560 DEBUG [src.node.docker_mananger] Generated ports ['32272', '32273', '32274', '32275', '32276']
2025-02-17 03:10:40.560 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 03:10:40.560 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 03:10:40.560 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 03:10:40.561 DEBUG [src.node.docker_mananger] docker run -i -t -p 32272:32272 -p 32273:32273 -p 32274:32274 -p 32275:32275 -p 32276:32276 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=32274 --rest-port=32272 --tcp-port=32273 --discv5-udp-port=32275 --rest-address=0.0.0.0 --nat=extip:172.18.167.59 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f71e9a7ffbc9301edb3dd3d90b2fd5927d9deee4d3fad1ba5bf3ad146a38b555 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QPtLJ3MiFC5MOUE7OsS0ssmtdXhWHqZBoC4mm3AkNWnrFVBCXNEyPe_dZrx0Lv5rdGtyRcG2G4d4M1NndoZPSYUCgmlkgnY0gmlwhKwSr6yKbXVsdGlhZGRyc5YACASsEq-sBsjeAAoErBKvrAbI390DgnJzhQADAQAAiXNlY3AyNTZrMaECl0eHr8kIGOWHfRqy9JMz53Zy5Igh_2u_YQSBdEg961KDdGNwgsjeg3VkcILI4IV3YWt1MgM --storenode=/ip4/172.18.175.172/tcp/51422/p2p/16Uiu2HAm5cCoaWSJpkyZ32biiF5p6mqS9AX7BvToMQPNXWHum4Vo --store=true --relay=true
2025-02-17 03:10:40.784 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.167.59 waku cb81e5d271088cde0030bc9d5cb42d7dc04ec63f2476306a3222fabbdce6fedf
2025-02-17 03:10:40.837 DEBUG [src.node.docker_mananger] Container started with ID cb81e5d27108. Setting up logs at ./log/docker/store_node1_2025-02-17_03-10-39__98c3db7e-80c8-4b99-8722-635d6f574d2f__wakuorg_go-waku:latest.log
2025-02-17 03:10:40.837 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 32272
2025-02-17 03:10:40.837 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 03:10:41.838 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32272/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:10:41.841 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QLRhpjBtnyPQPnhI3ITeRyvl4ifUU6sjdP4hhUwX1eK6He8s6DzSriwqO7KrBe-XMAaQZjuyf5azC6Ym6SroVTuGAZUR4vLEgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaEC_HjVIAHuHLGsXVmKgTZj_eUmrXZE_gHFaUzNM1UJYwiDdGNwgn4Rg3VkcIJ-E4V3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/32273/p2p/16Uiu2HAmCRDasHUx5WtdTbrFAPMDRbH1N4BBADo3drs85J4rcCpo","/ip4/127.0.0.1/tcp/32274/ws/p2p/16Uiu2HAmCRDasHUx5WtdTbrFAPMDRbH1N4BBADo3drs85J4rcCpo","/ip4/172.17.0.3/tcp/32273/p2p/16Uiu2HAmCRDasHUx5WtdTbrFAPMDRbH1N4BBADo3drs85J4rcCpo","/ip4/172.17.0.3/tcp/32274/ws/p2p/16Uiu2HAmCRDasHUx5WtdTbrFAPMDRbH1N4BBADo3drs85J4rcCpo"]}'
2025-02-17 03:10:41.841 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 03:10:41.842 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32272/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.175.172/tcp/51422/p2p/16Uiu2HAm5cCoaWSJpkyZ32biiF5p6mqS9AX7BvToMQPNXWHum4Vo", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-17 03:10:41.859 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-17 03:10:41.860 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:51421/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-17 03:10:41.883 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 03:10:41.883 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32272/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-17 03:10:41.885 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-17 03:10:41.886 DEBUG [src.steps.store] Relaying message
2025-02-17 03:10:41.888 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:51421/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 03:10:41.902 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 03:10:41.902 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-17 03:10:42.103 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-17 03:10:42.103 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51421/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:10:42.106 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x91d6826a861dc1ee1096cfb1701f071029c061325c44bed7315ab6ccc67e2fea"}]}'
2025-02-17 03:10:42.107 DEBUG [src.steps.store] Checking that peer wakuorg/go-waku:latest can find the stored messages
2025-02-17 03:10:42.107 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32272/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:10:42.112 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"722afb6251bfa66637d8633910a10d5adc05c6dce3ce6ab14b71ecf59e2a1235","status_code":200,"status_desc":"OK","messages":[{"message_hash":"kdaCaoYdwe4Qls+xcB8HECnAYTJcRL7XMVq2zMZ+L+o="}]}'
2025-02-17 03:10:42.113 DEBUG [src.node.waku_node] Pausing container with id 006f89848cae
2025-02-17 03:10:42.122 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 03:10:43.122 DEBUG [src.node.waku_node] Unpause container with id 006f89848cae
2025-02-17 03:10:43.131 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51421/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:10:43.134 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 03:10:43.134 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 03:10:43.134 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51421/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:10:43.136 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.175.172/tcp/51422/p2p/16Uiu2HAm5cCoaWSJpkyZ32biiF5p6mqS9AX7BvToMQPNXWHum4Vo","/ip4/172.18.175.172/tcp/51423/ws/p2p/16Uiu2HAm5cCoaWSJpkyZ32biiF5p6mqS9AX7BvToMQPNXWHum4Vo"],"enrUri":"enr:-L24QPtLJ3MiFC5MOUE7OsS0ssmtdXhWHqZBoC4mm3AkNWnrFVBCXNEyPe_dZrx0Lv5rdGtyRcG2G4d4M1NndoZPSYUCgmlkgnY0gmlwhKwSr6yKbXVsdGlhZGRyc5YACASsEq-sBsjeAAoErBKvrAbI390DgnJzhQADAQAAiXNlY3AyNTZrMaECl0eHr8kIGOWHfRqy9JMz53Zy5Igh_2u_YQSBdEg961KDdGNwgsjeg3VkcILI4IV3YWt1MgM"}'
2025-02-17 03:10:43.136 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 03:10:43.137 DEBUG [src.steps.store] Relaying message
2025-02-17 03:10:43.137 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:51421/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-17 03:10:43.142 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 03:10:43.142 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-17 03:10:43.343 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-17 03:10:43.343 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51421/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:10:43.346 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x91d6826a861dc1ee1096cfb1701f071029c061325c44bed7315ab6ccc67e2fea"},{"messageHash":"0x5032735f260983bb567a6372f2a811d0076167d1924a7409ee23ba71bfff2881"}]}'
2025-02-17 03:10:43.346 DEBUG [src.steps.store] Checking that peer wakuorg/go-waku:latest can find the stored messages
2025-02-17 03:10:43.347 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32272/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:10:43.351 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"1ba654efc39e06933abb5700679907e4f38bfdc25c98ec68edcf74137c4638bd","status_code":200,"status_desc":"OK","messages":[{"message_hash":"kdaCaoYdwe4Qls+xcB8HECnAYTJcRL7XMVq2zMZ+L+o="},{"message_hash":"UDJzXyYJg7tWemNy8qgR0AdhZ9GSSnQJ7iO6cb//KIE="}]}'
2025-02-17 03:10:43.352 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51421/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:10:43.355 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x91d6826a861dc1ee1096cfb1701f071029c061325c44bed7315ab6ccc67e2fea"},{"messageHash":"0x5032735f260983bb567a6372f2a811d0076167d1924a7409ee23ba71bfff2881"}]}'
2025-02-17 03:10:43.355 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32272/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:10:43.477 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"80c1ff3fe969ca18c08898f9d797931c73829972e63926fcfb4ced7f7e082f6d","status_code":200,"status_desc":"OK","messages":[{"message_hash":"kdaCaoYdwe4Qls+xcB8HECnAYTJcRL7XMVq2zMZ+L+o="},{"message_hash":"UDJzXyYJg7tWemNy8qgR0AdhZ9GSSnQJ7iO6cb//KIE="}]}'
2025-02-17 03:10:43.479 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-17 03:10:43.480 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-17 03:10:43.480 DEBUG [src.node.waku_node] Stopping container with id 006f89848cae
2025-02-17 03:10:44.022 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 03:10:44.022 DEBUG [src.node.waku_node] Stopping container with id cb81e5d27108
2025-02-17 03:10:44.501 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 03:10:44.503 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-17 03:10:44.511 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-17 03:10:44.516 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
