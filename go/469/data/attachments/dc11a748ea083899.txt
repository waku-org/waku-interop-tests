2025-02-17 03:08:28.748 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-17 03:08:28.749 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_with_pubsub_topic_string_instead_of_list with id: 2025-02-17_03-08-28__2dc1f676-ac5c-4ac0-abce-1cb3f58a7f11
2025-02-17 03:08:28.749 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-17 03:08:28.749 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-17 03:08:28.750 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-17 03:08:28.757 ERROR [src.node.docker_mananger] Max retries reached for container 833ac2b47377. Exiting log stream.
2025-02-17 03:08:28.758 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-17 03:08:28.758 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-17_03-08-28__2dc1f676-ac5c-4ac0-abce-1cb3f58a7f11__wakuorg_nwaku:latest.log
2025-02-17 03:08:28.758 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 03:08:28.758 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 03:08:28.760 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 03:08:28.760 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.168.222
2025-02-17 03:08:28.760 DEBUG [src.node.docker_mananger] Generated ports ['64250', '64251', '64252', '64253', '64254']
2025-02-17 03:08:28.760 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 03:08:28.760 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 03:08:28.760 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 03:08:28.760 DEBUG [src.node.docker_mananger] docker run -i -t -p 64250:64250 -p 64251:64251 -p 64252:64252 -p 64253:64253 -p 64254:64254 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64252 --rest-port=64250 --tcp-port=64251 --discv5-udp-port=64253 --rest-address=0.0.0.0 --nat=extip:172.18.168.222 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bed09ebd09d8bdec6ee71e2c7c5cbba5cde83c6aefebda5fdab3e5d67d5bccea --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64254 --metrics-logging=true --relay=true --filter=true
2025-02-17 03:08:28.986 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.168.222 waku 9f0ecc5fabe91a4a36a8e04b031c7219452e24ce700473e5419372b480f893fd
2025-02-17 03:08:29.036 DEBUG [src.node.docker_mananger] Container started with ID 9f0ecc5fabe9. Setting up logs at ./log/docker/node1_2025-02-17_03-08-28__2dc1f676-ac5c-4ac0-abce-1cb3f58a7f11__wakuorg_nwaku:latest.log
2025-02-17 03:08:29.037 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 64250
2025-02-17 03:08:29.038 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 03:08:29.566 ERROR [src.node.docker_mananger] Max retries reached for container d3589e395d40. Exiting log stream.
2025-02-17 03:08:30.038 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64250/health" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:08:30.041 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-17 03:08:30.042 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-17 03:08:30.042 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64250/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:08:30.044 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.168.222/tcp/64251/p2p/16Uiu2HAmNH6YwU8Q26STz1SE5fxv9xqbNfywwqM2zaKZKgq7jTJK","/ip4/172.18.168.222/tcp/64252/ws/p2p/16Uiu2HAmNH6YwU8Q26STz1SE5fxv9xqbNfywwqM2zaKZKgq7jTJK"],"enrUri":"enr:-L24QIC50v3qYr3Tr5S-OHuSSCEa5cVt4Zio_i-qctCDWaMHbtfwJxCE39GYEvJdLx3hIXb4_gf-ZAHwMedvUvvTZ3ACgmlkgnY0gmlwhKwSqN6KbXVsdGlhZGRyc5YACASsEqjeBvr7AAoErBKo3gb6_N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDjvkaUTbAO7GoecfmTLj-wDaqOTgDhIKOQxEOCTatoUSDdGNwgvr7g3VkcIL6_YV3YWt1MgU"}'
2025-02-17 03:08:30.044 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 03:08:30.045 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-17 03:08:30.051 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-17 03:08:30.051 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-17_03-08-28__2dc1f676-ac5c-4ac0-abce-1cb3f58a7f11__wakuorg_go-waku:latest.log
2025-02-17 03:08:30.051 DEBUG [src.node.waku_node] Starting Node...
2025-02-17 03:08:30.051 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-17 03:08:30.053 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-17 03:08:30.053 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.33.130
2025-02-17 03:08:30.053 DEBUG [src.node.docker_mananger] Generated ports ['52004', '52005', '52006', '52007', '52008']
2025-02-17 03:08:30.053 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-17 03:08:30.053 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-17 03:08:30.054 DEBUG [src.node.waku_node] Using volumes []
2025-02-17 03:08:30.054 DEBUG [src.node.docker_mananger] docker run -i -t -p 52004:52004 -p 52005:52005 -p 52006:52006 -p 52007:52007 -p 52008:52008 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=52006 --rest-port=52004 --tcp-port=52005 --discv5-udp-port=52007 --rest-address=0.0.0.0 --nat=extip:172.18.33.130 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d3870c5a9c6c677f9dfd16284ab8c4d575dce4bae16385c574dddf41c4fa302c --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-L24QIC50v3qYr3Tr5S-OHuSSCEa5cVt4Zio_i-qctCDWaMHbtfwJxCE39GYEvJdLx3hIXb4_gf-ZAHwMedvUvvTZ3ACgmlkgnY0gmlwhKwSqN6KbXVsdGlhZGRyc5YACASsEqjeBvr7AAoErBKo3gb6_N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDjvkaUTbAO7GoecfmTLj-wDaqOTgDhIKOQxEOCTatoUSDdGNwgvr7g3VkcIL6_YV3YWt1MgU --filternode=/ip4/172.18.168.222/tcp/64251/p2p/16Uiu2HAmNH6YwU8Q26STz1SE5fxv9xqbNfywwqM2zaKZKgq7jTJK --pubsub-topic=/waku/2/rs/3/1
2025-02-17 03:08:30.278 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.33.130 waku 5d19c58b11d40d54b63bfdf0b24d2cad2009160729f5b8e11a2cd56d9fcb53c1
2025-02-17 03:08:30.339 DEBUG [src.node.docker_mananger] Container started with ID 5d19c58b11d4. Setting up logs at ./log/docker/node2_2025-02-17_03-08-28__2dc1f676-ac5c-4ac0-abce-1cb3f58a7f11__wakuorg_go-waku:latest.log
2025-02-17 03:08:30.339 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 52004
2025-02-17 03:08:30.340 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-17 03:08:31.341 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52004/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-17 03:08:31.343 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QOBkvKJoGJOhpabJp8SrFx6AtkxE43pQIuU7j2MdzMrcfrED_Hezn3pRJmCQW7SJ6ktU5GvRbQ8HJM-TwHaT1qCGAZUR4PT1gmlkgnY0gmlwhKwRAAOCcnOFAAMBAAGJc2VjcDI1NmsxoQIInqY5vH8CuCmrTH6aY4z-MVV_jRBJ6n9I4_018V4QXoN0Y3CCyyWDdWRwgssnhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/52005/p2p/16Uiu2HAkv1KYxfCN2JTtLVK9SozncpjKa8XXFUwRv9ef24cs3eW9","/ip4/127.0.0.1/tcp/52006/ws/p2p/16Uiu2HAkv1KYxfCN2JTtLVK9SozncpjKa8XXFUwRv9ef24cs3eW9","/ip4/172.17.0.3/tcp/52005/p2p/16Uiu2HAkv1KYxfCN2JTtLVK9SozncpjKa8XXFUwRv9ef24cs3eW9","/ip4/172.17.0.3/tcp/52006/ws/p2p/16Uiu2HAkv1KYxfCN2JTtLVK9SozncpjKa8XXFUwRv9ef24cs3eW9"]}'
2025-02-17 03:08:31.343 INFO [src.node.waku_node] REST service is ready !!
2025-02-17 03:08:31.344 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52004/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.168.222/tcp/64251/p2p/16Uiu2HAmNH6YwU8Q26STz1SE5fxv9xqbNfywwqM2zaKZKgq7jTJK", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-17 03:08:31.346 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-17 03:08:31.346 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-17 03:08:31.347 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64250/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-17 03:08:31.350 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-17 03:08:31.350 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52004/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "5e3ad864-b1b5-4ab9-b49f-c7536c89ceab", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-17 03:08:31.356 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"5e3ad864-b1b5-4ab9-b49f-c7536c89ceab","statusDesc":"OK"}'
2025-02-17 03:08:31.357 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:52004/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": "/test/1/waku-filter/proto", "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-17 03:08:31.359 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:52004/filter/v2/subscriptions. Response content: b''
2025-02-17 03:08:31.361 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-17 03:08:31.362 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-17 03:08:31.362 DEBUG [src.node.waku_node] Stopping container with id 9f0ecc5fabe9
2025-02-17 03:08:31.962 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 03:08:31.964 DEBUG [src.node.waku_node] Stopping container with id 5d19c58b11d4
2025-02-17 03:08:32.774 ERROR [src.node.docker_mananger] Max retries reached for container 9f0ecc5fabe9. Exiting log stream.
2025-02-17 03:08:33.003 DEBUG [src.node.waku_node] Container stopped.
2025-02-17 03:08:33.004 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-17 03:08:33.009 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-17 03:08:33.012 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
