[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store with id: 2024-11-30_03-12-15__5291f861-ebda-4d9f-b7c4-6d186a1a0fff
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-30_03-12-15__5291f861-ebda-4d9f-b7c4-6d186a1a0fff__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.215.96
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['30884', '30885', '30886', '30887', '30888']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 30884:30884 -p 30885:30885 -p 30886:30886 -p 30887:30887 -p 30888:30888 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=30886 --rest-port=30884 --tcp-port=30885 --discv5-udp-port=30887 --rest-address=0.0.0.0 --nat=extip:172.18.215.96 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=91e3a18fb3ae33edb8cfede0e852fbe6e4becd7bc0eaebc0c40e876fe29f0d9f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=30888 --metrics-logging=true --relay=true --store=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.215.96 waku 7b092685193fa2f4cdddaaa2a264d94d327e1c96959387d441d2e2279f155327
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 7b092685193f. Setting up logs at ./log/docker/node1_2024-11-30_03-12-15__5291f861-ebda-4d9f-b7c4-6d186a1a0fff__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 30884
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30884/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30884/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.215.96/tcp/30885/p2p/16Uiu2HAmCyHwfydK5R7F7327srwTbC3qMFZaYvYsxrXQ3XLasR6P","/ip4/172.18.215.96/tcp/30886/ws/p2p/16Uiu2HAmCyHwfydK5R7F7327srwTbC3qMFZaYvYsxrXQ3XLasR6P"],"enrUri":"enr:-L24QNpefmbGtE6mVdXfoTlitlMpD8PftgoBLr8zA5WkxkVJNnRJkB247tTx9sKzjEYEEx8hnia-51KHgQqDYtL3od0CgmlkgnY0gmlwhKwS12CKbXVsdGlhZGRyc5YACASsEtdgBnilAAoErBLXYAZ4pt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDBLBYyPUaoxjeBc3VHA0qYAeHe9cimjwhyFxuhUInMdiDdGNwgnilg3VkcIJ4p4V3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-30_03-12-15__5291f861-ebda-4d9f-b7c4-6d186a1a0fff__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.121.103
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['61818', '61819', '61820', '61821', '61822']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 61818:61818 -p 61819:61819 -p 61820:61820 -p 61821:61821 -p 61822:61822 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=61820 --rest-port=61818 --tcp-port=61819 --discv5-udp-port=61821 --rest-address=0.0.0.0 --nat=extip:172.18.121.103 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c3862d5d2782837f84b9abdcde668a05aacc1ecbcc89a058565af0328bc8e2ac --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --store=true --discv5-bootstrap-node=enr:-L24QNpefmbGtE6mVdXfoTlitlMpD8PftgoBLr8zA5WkxkVJNnRJkB247tTx9sKzjEYEEx8hnia-51KHgQqDYtL3od0CgmlkgnY0gmlwhKwS12CKbXVsdGlhZGRyc5YACASsEtdgBnilAAoErBLXYAZ4pt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDBLBYyPUaoxjeBc3VHA0qYAeHe9cimjwhyFxuhUInMdiDdGNwgnilg3VkcIJ4p4V3YWt1MgM --storenode=/ip4/172.18.215.96/tcp/30885/p2p/16Uiu2HAmCyHwfydK5R7F7327srwTbC3qMFZaYvYsxrXQ3XLasR6P
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.121.103 waku ba8ef3ba3201c666ec3b5d9ffae7aee20224ac635355c54505423caa465be3ab
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ba8ef3ba3201. Setting up logs at ./log/docker/node1_2024-11-30_03-12-15__5291f861-ebda-4d9f-b7c4-6d186a1a0fff__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 61818
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61818/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QFL_4H-7vktqh0KS-I42l8kmQh6hr76fR1V4hJglywzgSTegRiUkq4VNI8TH3TyJb7hM3txjSwVpz_9Gbf8z3fOGAZN7DhgjgmlkgnY0gmlwhKwRAAaCcnODAAMAiXNlY3AyNTZrMaEDvOzvwf1q6BYxc20smFZqgkDBrz1A-ewhREXf9j41JaiDdGNwgvF7g3VkcILxfYV3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/61819/p2p/16Uiu2HAmRNUYbyayXaSVAs8dSDerBWoJkgfjqJD3o4qh3XA8qGVd","/ip4/127.0.0.1/tcp/61820/ws/p2p/16Uiu2HAmRNUYbyayXaSVAs8dSDerBWoJkgfjqJD3o4qh3XA8qGVd","/ip4/172.17.0.6/tcp/61819/p2p/16Uiu2HAmRNUYbyayXaSVAs8dSDerBWoJkgfjqJD3o4qh3XA8qGVd","/ip4/172.17.0.6/tcp/61820/ws/p2p/16Uiu2HAmRNUYbyayXaSVAs8dSDerBWoJkgfjqJD3o4qh3XA8qGVd"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30884/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61818/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30884/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/go-waku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61818/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-relay%2Fproto&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 500 Server Error: Internal Server Error for url: http://127.0.0.1:61818/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-relay%2Fproto&pageSize=5&ascending=true. Response content: b'{"messages":null,"error_message":"context deadline exceeded"}'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30884/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/go-waku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61818/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-relay%2Fproto&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"be66e7d043b47d1120ed73ccd800d272f99f5f380f42e9f93ebcc9c5a49a845c","status_code":200,"status_desc":"OK","messages":[{"message_hash":"WOl5dXl9NF8TljW3aR0UPGBtm2jeIQeyV3M1RHO7J8o="},{"message_hash":"Vn6Y3ftZx0cfDJOCQtBp1lVeEm/LwCzfNuEi5mHiP0k="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 7b092685193f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id ba8ef3ba3201
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 7b092685193f. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.