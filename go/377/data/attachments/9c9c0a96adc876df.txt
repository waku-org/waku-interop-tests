[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_missing_payload with id: 2024-11-30_03-20-10__bddaf837-cdb9-422f-b5b7-d8ade81817b0
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-11-30_03-20-10__bddaf837-cdb9-422f-b5b7-d8ade81817b0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.171.130
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['56191', '56192', '56193', '56194', '56195']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 56191:56191 -p 56192:56192 -p 56193:56193 -p 56194:56194 -p 56195:56195 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56193 --rest-port=56191 --tcp-port=56192 --discv5-udp-port=56194 --rest-address=0.0.0.0 --nat=extip:172.18.171.130 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dcdbc2bfd508ac31d4ed4df227dfbe5effe44fc22bcdfa90efeb5e4ecda3826c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56195 --metrics-logging=true --lightpush=true --relay=true
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 4dd82f775e82. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.171.130 waku 94292a6f1e64c580d2e7bfc093b04d61e333872029e1a09f8579cca72860542b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 94292a6f1e64. Setting up logs at ./log/docker/receiving_node1_2024-11-30_03-20-10__bddaf837-cdb9-422f-b5b7-d8ade81817b0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 56191
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56191/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56191/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.171.130/tcp/56192/p2p/16Uiu2HAmRMvvKuscxMjsyLw3MaZiBkoNPBCHoFYCPe9NF4DS7bho","/ip4/172.18.171.130/tcp/56193/ws/p2p/16Uiu2HAmRMvvKuscxMjsyLw3MaZiBkoNPBCHoFYCPe9NF4DS7bho"],"enrUri":"enr:-L24QDAXdXSiEtaRX0u2U9FhpqFfJc3EbR6Q6B2pTgdDPCJ1JAeRHQQGfUZHiXxzhEkYHYWByd_XbZnw7ScjzM9n7FkCgmlkgnY0gmlwhKwSq4KKbXVsdGlhZGRyc5YACASsEquCBtuAAAoErBKrggbbgd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDvMktcmI08qn00WwTRmBMhmXyDVfZohPDsdywUfdSjcaDdGNwgtuAg3VkcILbgoV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-11-30_03-20-10__bddaf837-cdb9-422f-b5b7-d8ade81817b0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.94.109
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['8815', '8816', '8817', '8818', '8819']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 8815:8815 -p 8816:8816 -p 8817:8817 -p 8818:8818 -p 8819:8819 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8817 --rest-port=8815 --tcp-port=8816 --discv5-udp-port=8818 --rest-address=0.0.0.0 --nat=extip:172.18.94.109 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2ebff0bbe76a3d1ad4c5b4453587a1bbcff51d766fb3ac34a2d1dc3fd38aec4c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8819 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.94.109 waku 26e5760fc3178e8962a812e2a231ece1a77c8f5bfe6fe2dd2d12bebe9466431f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 26e5760fc317. Setting up logs at ./log/docker/receiving_node2_2024-11-30_03-20-10__bddaf837-cdb9-422f-b5b7-d8ade81817b0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 8815
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8815/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8815/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.94.109/tcp/8816/p2p/16Uiu2HAmFr28YgxjTxkfrzhLXBiEnsohhaiceQUDgoLwSWGGfpHc","/ip4/172.18.94.109/tcp/8817/ws/p2p/16Uiu2HAmFr28YgxjTxkfrzhLXBiEnsohhaiceQUDgoLwSWGGfpHc"],"enrUri":"enr:-L24QCsJAzHCP0Hfh-vSOpyHCHD_hhodfwkMaoepBD5Rx00uC0JumLYKb8GnDA1m-dVjfVO7NuMQnxg86tamJgdw_NgCgmlkgnY0gmlwhKwSXm2KbXVsdGlhZGRyc5YACASsEl5tBiJwAAoErBJebQYicd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDL2Z2cXMQkjb6UbNJU0jaCYZW9qGsZj3RXw3Tbbg4R1-DdGNwgiJwg3VkcIIicoV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8815/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.171.130/tcp/56192/p2p/16Uiu2HAmRMvvKuscxMjsyLw3MaZiBkoNPBCHoFYCPe9NF4DS7bho"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-11-30_03-20-10__bddaf837-cdb9-422f-b5b7-d8ade81817b0__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.164.147
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['24417', '24418', '24419', '24420', '24421']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 24417:24417 -p 24418:24418 -p 24419:24419 -p 24420:24420 -p 24421:24421 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=24419 --rest-port=24417 --tcp-port=24418 --discv5-udp-port=24420 --rest-address=0.0.0.0 --nat=extip:172.18.164.147 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2fdadb6901bb66dadd6dcdf7d900affaa3587bceb3bbe25c2ebee83ffd77f0c5 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QDAXdXSiEtaRX0u2U9FhpqFfJc3EbR6Q6B2pTgdDPCJ1JAeRHQQGfUZHiXxzhEkYHYWByd_XbZnw7ScjzM9n7FkCgmlkgnY0gmlwhKwSq4KKbXVsdGlhZGRyc5YACASsEquCBtuAAAoErBKrggbbgd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDvMktcmI08qn00WwTRmBMhmXyDVfZohPDsdywUfdSjcaDdGNwgtuAg3VkcILbgoV3YWt1Mgk --lightpushnode=/ip4/172.18.171.130/tcp/56192/p2p/16Uiu2HAmRMvvKuscxMjsyLw3MaZiBkoNPBCHoFYCPe9NF4DS7bho --lightpush=true --relay=false --pubsub-topic=/waku/2/rs/3/1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.164.147 waku 7efc213bbd5d4b75219eaabb3958c657cabfef0a85cc41cc7872ac427063d690
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 7efc213bbd5d. Setting up logs at ./log/docker/lightpush_node1_2024-11-30_03-20-10__bddaf837-cdb9-422f-b5b7-d8ade81817b0__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 24417
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24417/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QGoMlvXsS4JfgvL8rWlZ-348lOWG7oV9RvH1v8nzuIEMeRFE623NG5rVkjfzsLZ1QKIjY8A1__xrzu68xD4XQraGAZN7FVUJgmlkgnY0gmlwhKwRAAmCcnOFAAMBAAGJc2VjcDI1NmsxoQMYte3IU-qebi8dvNoSYzJnYqPqwDS821DoP1ZSRHpoioN0Y3CCX2KDdWRwgl9khXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/24418/p2p/16Uiu2HAmEKT2wAs21BatPmHWAJn8JtL9utpHfS1ZkpuDhSJ9yKDj","/ip4/127.0.0.1/tcp/24419/ws/p2p/16Uiu2HAmEKT2wAs21BatPmHWAJn8JtL9utpHfS1ZkpuDhSJ9yKDj","/ip4/172.17.0.9/tcp/24418/p2p/16Uiu2HAmEKT2wAs21BatPmHWAJn8JtL9utpHfS1ZkpuDhSJ9yKDj","/ip4/172.17.0.9/tcp/24419/ws/p2p/16Uiu2HAmEKT2wAs21BatPmHWAJn8JtL9utpHfS1ZkpuDhSJ9yKDj"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24417/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.171.130/tcp/56192/p2p/16Uiu2HAmRMvvKuscxMjsyLw3MaZiBkoNPBCHoFYCPe9NF4DS7bho", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24417/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.94.109/tcp/8816/p2p/16Uiu2HAmFr28YgxjTxkfrzhLXBiEnsohhaiceQUDgoLwSWGGfpHc", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56191/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8815/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24417/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"contentTopic": "/myapp/1/latest/proto", "timestamp": 1732936817173212672}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:24417/lightpush/v1/message. Response content: b'missing Payload field'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 94292a6f1e64
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 26e5760fc317
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 94292a6f1e64. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 7efc213bbd5d
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 26e5760fc317. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.