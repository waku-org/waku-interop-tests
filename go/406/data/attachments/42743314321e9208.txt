[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_no_timestamp with id: 2024-12-26_03-14-02__90f40437-5058-4d02-a864-17e9c4f2bf34
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-12-26_03-14-02__90f40437-5058-4d02-a864-17e9c4f2bf34__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.213.250
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['27575', '27576', '27577', '27578', '27579']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 27575:27575 -p 27576:27576 -p 27577:27577 -p 27578:27578 -p 27579:27579 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27577 --rest-port=27575 --tcp-port=27576 --discv5-udp-port=27578 --rest-address=0.0.0.0 --nat=extip:172.18.213.250 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f7fe1dc899c884caa98bfe05caac7db53a10fea72ea1d4befca3a4cf2b53e7f7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27579 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.213.250 waku ccdd33b4a35b14e3192dc01314f9810b2e9de4bb33a42122662b775f4a853095
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ccdd33b4a35b. Setting up logs at ./log/docker/receiving_node1_2024-12-26_03-14-02__90f40437-5058-4d02-a864-17e9c4f2bf34__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 27575
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container c1b16ce695f7. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27575/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27575/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.213.250/tcp/27576/p2p/16Uiu2HAmGE57GiQPN1vFiHEb9HFXwGq3pPoiULiM4w3TaFMzEacE","/ip4/172.18.213.250/tcp/27577/ws/p2p/16Uiu2HAmGE57GiQPN1vFiHEb9HFXwGq3pPoiULiM4w3TaFMzEacE"],"enrUri":"enr:-L24QGWvueE6DQJu-X5UbaI1BqjgmhagUP5sldQ3HDbfC5GILPQu2O7qLLH8qEjteZnEiV_k38a2_UzCfRkI7LwAVKICgmlkgnY0gmlwhKwS1fqKbXVsdGlhZGRyc5YACASsEtX6Bmu4AAoErBLV-gZrud0DgnJzhQADAQAAiXNlY3AyNTZrMaEDNQybky-xPYvOkUsQNPvQjKmRO_aQNstaEp1PxSa9treDdGNwgmu4g3VkcIJruoV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-12-26_03-14-02__90f40437-5058-4d02-a864-17e9c4f2bf34__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.18.125
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['45655', '45656', '45657', '45658', '45659']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 45655:45655 -p 45656:45656 -p 45657:45657 -p 45658:45658 -p 45659:45659 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45657 --rest-port=45655 --tcp-port=45656 --discv5-udp-port=45658 --rest-address=0.0.0.0 --nat=extip:172.18.18.125 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8c525a3104edacf735ad9d43cd1bfbaf4ed590ef5dd359a3cfe382afc0fcd677 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45659 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.18.125 waku fbafc6291b34430d59eea3599b8f2af68f003ecef798ce78d1bf1637a1522cc5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID fbafc6291b34. Setting up logs at ./log/docker/receiving_node2_2024-12-26_03-14-02__90f40437-5058-4d02-a864-17e9c4f2bf34__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 45655
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45655/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45655/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.18.125/tcp/45656/p2p/16Uiu2HAmCs2a7bGURFMGe1fSaV9uzABEHFCrXchsMLGvnEaREi1n","/ip4/172.18.18.125/tcp/45657/ws/p2p/16Uiu2HAmCs2a7bGURFMGe1fSaV9uzABEHFCrXchsMLGvnEaREi1n"],"enrUri":"enr:-L24QKMbvlgyBE5ynO-aqo2d7a_9wjTab4IEwOX6qeMrP1fKHMfybIqGO2owmDpZMkA4AZ59A9Gl8GNrNm0H6iUWyecCgmlkgnY0gmlwhKwSEn2KbXVsdGlhZGRyc5YACASsEhJ9BrJYAAoErBISfQayWd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDAxV7K1JR5-v5GlSPv5JHjiwozZQXF1yW9yqDLgGWgtmDdGNwgrJYg3VkcIKyWoV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45655/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.213.250/tcp/27576/p2p/16Uiu2HAmGE57GiQPN1vFiHEb9HFXwGq3pPoiULiM4w3TaFMzEacE"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-12-26_03-14-02__90f40437-5058-4d02-a864-17e9c4f2bf34__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.94.217
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['13430', '13431', '13432', '13433', '13434']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 13430:13430 -p 13431:13431 -p 13432:13432 -p 13433:13433 -p 13434:13434 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=13432 --rest-port=13430 --tcp-port=13431 --discv5-udp-port=13433 --rest-address=0.0.0.0 --nat=extip:172.18.94.217 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cbda4c2d692febaaee28bddfe25d49045913d83ea0bba1d55eb2a7a2bf72d3db --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QGWvueE6DQJu-X5UbaI1BqjgmhagUP5sldQ3HDbfC5GILPQu2O7qLLH8qEjteZnEiV_k38a2_UzCfRkI7LwAVKICgmlkgnY0gmlwhKwS1fqKbXVsdGlhZGRyc5YACASsEtX6Bmu4AAoErBLV-gZrud0DgnJzhQADAQAAiXNlY3AyNTZrMaEDNQybky-xPYvOkUsQNPvQjKmRO_aQNstaEp1PxSa9treDdGNwgmu4g3VkcIJruoV3YWt1Mgk --lightpushnode=/ip4/172.18.213.250/tcp/27576/p2p/16Uiu2HAmGE57GiQPN1vFiHEb9HFXwGq3pPoiULiM4w3TaFMzEacE --lightpush=true --relay=false --pubsub-topic=/waku/2/rs/3/1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.94.217 waku c869abee7a8b13f6f582bff0bdd70ce698d52e7edc0d9b7c32b735c32b023b3b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID c869abee7a8b. Setting up logs at ./log/docker/lightpush_node1_2024-12-26_03-14-02__90f40437-5058-4d02-a864-17e9c4f2bf34__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 13430
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13430/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QMkHQHrGOujpmWDabwZNglFKRyDDgNdZYY0Z3y0UQHr1fyDCShSYvRMRdJaIx_a3Z0qv3rT67vn3ckSyvb5KYpiGAZQA9QktgmlkgnY0gmlwhKwRAAuCcnOFAAMBAAGJc2VjcDI1NmsxoQMCIFLsgxEYuEYzadzbzcIFElWiOKdAoaPxbY5hOl-vH4N0Y3CCNHeDdWRwgjR5hXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/13431/p2p/16Uiu2HAmCoHkeuRs6eX33LZYUWNTLk6UbEWsnqDxYY9VdqgY9gYE","/ip4/127.0.0.1/tcp/13432/ws/p2p/16Uiu2HAmCoHkeuRs6eX33LZYUWNTLk6UbEWsnqDxYY9VdqgY9gYE","/ip4/172.17.0.11/tcp/13431/p2p/16Uiu2HAmCoHkeuRs6eX33LZYUWNTLk6UbEWsnqDxYY9VdqgY9gYE","/ip4/172.17.0.11/tcp/13432/ws/p2p/16Uiu2HAmCoHkeuRs6eX33LZYUWNTLk6UbEWsnqDxYY9VdqgY9gYE"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13430/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.213.250/tcp/27576/p2p/16Uiu2HAmGE57GiQPN1vFiHEb9HFXwGq3pPoiULiM4w3TaFMzEacE", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13430/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.18.125/tcp/45656/p2p/16Uiu2HAmCs2a7bGURFMGe1fSaV9uzABEHFCrXchsMLGvnEaREi1n", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27575/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45655/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13430/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto"}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27575/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":0,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45655/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":0,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id ccdd33b4a35b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id fbafc6291b34
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container ccdd33b4a35b. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id c869abee7a8b
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container fbafc6291b34. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.