[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_repeated_filter_requestID with id: 2024-11-27_13-36-02__ac29857e-7983-415e-b6ca-0aaefc62599d
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-27_13-36-02__ac29857e-7983-415e-b6ca-0aaefc62599d__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-11-27_13-36-02__ac29857e-7983-415e-b6ca-0aaefc62599d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-11-27_13-36-02__ac29857e-7983-415e-b6ca-0aaefc62599d__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:347 Create 3 nodes
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:348 Start 3 nodes with their corresponding config
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.0.115
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['28986', '28987', '28988', '28989', '28990']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 28986:28986 -p 28987:28987 -p 28988:28988 -p 28989:28989 -p 28990:28990 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=28988 --rest-port=28986 --tcp-port=28987 --discv5-udp-port=28989 --rest-address=0.0.0.0 --nat=extip:172.18.0.115 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4c7dd285dbf1ffbbcbd365647c25debf82d81dee3b6ff8cfc2618e3aeaa473f1 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --store=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.0.115 waku 10d8bbde43d6bcde02f1848ab71d39b9c418a62060d8844422299b3aaacca637
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 10d8bbde43d6. Setting up logs at ./log/docker/node1_2024-11-27_13-36-02__ac29857e-7983-415e-b6ca-0aaefc62599d__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 28986
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container dd8f76b1cc6a. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28986/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QK2TGJWdXVVHbYBqw3gzWBgaEQcfNHK3m-8FqEm8kGSLTetbKUQnBdcDRzli_Hl8JqUOmEc7Kys6VHMv9B5XIEuGAZNt1gdcgmlkgnY0gmlwhKwRABCCcnODAAMAiXNlY3AyNTZrMaEDFabCSu-5nSRCAqBJ8dmQ94AQ3A8WoGGvwVvL4FlZHJmDdGNwgnE7g3VkcIJxPYV3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/28987/p2p/16Uiu2HAmE7WPrBYJYEtPy6RgkuhyAVCNYCwiuDyJMQ5nt4QcA6ji","/ip4/127.0.0.1/tcp/28988/ws/p2p/16Uiu2HAmE7WPrBYJYEtPy6RgkuhyAVCNYCwiuDyJMQ5nt4QcA6ji","/ip4/172.17.0.16/tcp/28987/p2p/16Uiu2HAmE7WPrBYJYEtPy6RgkuhyAVCNYCwiuDyJMQ5nt4QcA6ji","/ip4/172.17.0.16/tcp/28988/ws/p2p/16Uiu2HAmE7WPrBYJYEtPy6RgkuhyAVCNYCwiuDyJMQ5nt4QcA6ji"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.118.19
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['53860', '53861', '53862', '53863', '53864']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 53860:53860 -p 53861:53861 -p 53862:53862 -p 53863:53863 -p 53864:53864 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=53862 --rest-port=53860 --tcp-port=53861 --discv5-udp-port=53863 --rest-address=0.0.0.0 --nat=extip:172.18.118.19 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9879ed932cbc7cf011c2b1e4c30fe2ccf162b3653e27a6edbc74256751dca9fd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=53864 --metrics-logging=true --relay=true --store=true --filter=true --discv5-bootstrap-node=enr:-J-4QK2TGJWdXVVHbYBqw3gzWBgaEQcfNHK3m-8FqEm8kGSLTetbKUQnBdcDRzli_Hl8JqUOmEc7Kys6VHMv9B5XIEuGAZNt1gdcgmlkgnY0gmlwhKwRABCCcnODAAMAiXNlY3AyNTZrMaEDFabCSu-5nSRCAqBJ8dmQ94AQ3A8WoGGvwVvL4FlZHJmDdGNwgnE7g3VkcIJxPYV3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.118.19 waku 38a51d5d4d0b78767719fc989d19c378741fa2bcf32219add95dd9952bae09f3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 38a51d5d4d0b. Setting up logs at ./log/docker/node2_2024-11-27_13-36-02__ac29857e-7983-415e-b6ca-0aaefc62599d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 53860
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53860/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53860/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.118.19/tcp/53861/p2p/16Uiu2HAmSbacJP938kfTwnnmpadEGa8TXFHysqzC2xHdtmkcMqQW","/ip4/172.18.118.19/tcp/53862/ws/p2p/16Uiu2HAmSbacJP938kfTwnnmpadEGa8TXFHysqzC2xHdtmkcMqQW"],"enrUri":"enr:-L24QMBW3ajxAs67Ezo6lh9A6stTBkTgMMRNckeC7SlCKdVBYJgjWsyG8328H56EwfRZP1tf5KEKo1MxmL6u2_S-DMACgmlkgnY0gmlwhKwSdhOKbXVsdGlhZGRyc5YACASsEnYTBtJlAAoErBJ2EwbSZt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDzyQHwM07ce1z6N__5CtO4j4Gm5PCRtSXgSvsKjwhNMODdGNwgtJlg3VkcILSZ4V3YWt1Mgc"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.132.50
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['46497', '46498', '46499', '46500', '46501']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 46497:46497 -p 46498:46498 -p 46499:46499 -p 46500:46500 -p 46501:46501 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=46499 --rest-port=46497 --tcp-port=46498 --discv5-udp-port=46500 --rest-address=0.0.0.0 --nat=extip:172.18.132.50 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f9f35ffb5d152fba13b08b0bc4ad188b7058a0e4e3df84e3df69d7e1ba8de8c8 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --filternode=/ip4/172.18.118.19/tcp/53861/p2p/16Uiu2HAmSbacJP938kfTwnnmpadEGa8TXFHysqzC2xHdtmkcMqQW --store=false --discv5-bootstrap-node=enr:-L24QMBW3ajxAs67Ezo6lh9A6stTBkTgMMRNckeC7SlCKdVBYJgjWsyG8328H56EwfRZP1tf5KEKo1MxmL6u2_S-DMACgmlkgnY0gmlwhKwSdhOKbXVsdGlhZGRyc5YACASsEnYTBtJlAAoErBJ2EwbSZt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDzyQHwM07ce1z6N__5CtO4j4Gm5PCRtSXgSvsKjwhNMODdGNwgtJlg3VkcILSZ4V3YWt1Mgc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.132.50 waku 6d1707a41accc6cc6a6ff294f305ebc5a262fcd93a738739de32a595dceecc71
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 6d1707a41acc. Setting up logs at ./log/docker/node3_2024-11-27_13-36-02__ac29857e-7983-415e-b6ca-0aaefc62599d__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 46497
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46497/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QB9z9qQBFW4C0tzDSIAtKZWRRLpqyZCYLAjzARkKF0cZSqj5JHvlp8I5zBYu1qbNNlZNj92ZFIGdcRAkAMvkbJ2GAZNt1hTjgmlkgnY0gmlwhKwRAAyCcnODAAMAiXNlY3AyNTZrMaEDuUxjScq3cD_-f6Q0UCO-LYXEOWhmHKZIMImvFwcfkcqDdGNwgrWig3VkcIK1pIV3YWt1MgE","listenAddresses":["/ip4/127.0.0.1/tcp/46498/p2p/16Uiu2HAmR8KLEpYR76SByRr7z42FJbzzwW9SGNjDkbob2P5V9qGd","/ip4/127.0.0.1/tcp/46499/ws/p2p/16Uiu2HAmR8KLEpYR76SByRr7z42FJbzzwW9SGNjDkbob2P5V9qGd","/ip4/172.17.0.12/tcp/46498/p2p/16Uiu2HAmR8KLEpYR76SByRr7z42FJbzzwW9SGNjDkbob2P5V9qGd","/ip4/172.17.0.12/tcp/46499/ws/p2p/16Uiu2HAmR8KLEpYR76SByRr7z42FJbzzwW9SGNjDkbob2P5V9qGd"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:353 Subscribe nodes to relay  pubsub topics
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28986/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:53860/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:357 Wait for all nodes auto connection
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28986/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAmSbacJP938kfTwnnmpadEGa8TXFHysqzC2xHdtmkcMqQW","multiaddrs":["/ip4/172.18.118.19/tcp/53861/p2p/16Uiu2HAmSbacJP938kfTwnnmpadEGa8TXFHysqzC2xHdtmkcMqQW","/ip4/172.18.118.19/tcp/53862/ws/p2p/16Uiu2HAmSbacJP938kfTwnnmpadEGa8TXFHysqzC2xHdtmkcMqQW"],"protocols":null,"connected":false,"pubsubTopics":[]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53860/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28986/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAmSbacJP938kfTwnnmpadEGa8TXFHysqzC2xHdtmkcMqQW","multiaddrs":["/ip4/172.18.118.19/tcp/53861/p2p/16Uiu2HAmSbacJP938kfTwnnmpadEGa8TXFHysqzC2xHdtmkcMqQW","/ip4/172.18.118.19/tcp/53862/ws/p2p/16Uiu2HAmSbacJP938kfTwnnmpadEGa8TXFHysqzC2xHdtmkcMqQW"],"protocols":null,"connected":false,"pubsubTopics":[]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53860/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28986/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAmSbacJP938kfTwnnmpadEGa8TXFHysqzC2xHdtmkcMqQW","multiaddrs":["/ip4/172.18.118.19/tcp/53861/p2p/16Uiu2HAmSbacJP938kfTwnnmpadEGa8TXFHysqzC2xHdtmkcMqQW","/ip4/172.18.118.19/tcp/53862/ws/p2p/16Uiu2HAmSbacJP938kfTwnnmpadEGa8TXFHysqzC2xHdtmkcMqQW"],"protocols":["/vac/waku/store/2.0.0-beta4","/vac/waku/relay/2.0.0","/vac/waku/store-query/3.0.0","/vac/waku/filter-subscribe/2.0.0-beta1"],"connected":true,"pubsubTopics":["/waku/2/rs/3/1","/waku/2/rs/3/0"]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:53860/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.16/tcp/28987/p2p/16Uiu2HAmE7WPrBYJYEtPy6RgkuhyAVCNYCwiuDyJMQ5nt4QcA6ji","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store/2.0.0-beta4","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:361 Node3 subscribe to filter for pubsubtopic  /waku/2/rs/3/1 2 times with same request id
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:46497/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:46497/filter/v2/subscriptions. Response content: b'{"requestId":"1","statusDesc":"subscription failed"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 10d8bbde43d6
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 38a51d5d4d0b
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 10d8bbde43d6. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 6d1707a41acc
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 38a51d5d4d0b. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node3_2024-11-27_13-36-02__ac29857e-7983-415e-b6ca-0aaefc62599d__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node2_2024-11-27_13-36-02__ac29857e-7983-415e-b6ca-0aaefc62599d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node1_2024-11-27_13-36-02__ac29857e-7983-415e-b6ca-0aaefc62599d__wakuorg_go-waku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_repeated_filter_requestID with id: 2024-11-27_13-36-45__35f75cd6-16ee-4220-aecb-862aeae73bb8
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-27_13-36-45__35f75cd6-16ee-4220-aecb-862aeae73bb8__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-11-27_13-36-45__35f75cd6-16ee-4220-aecb-862aeae73bb8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-11-27_13-36-45__35f75cd6-16ee-4220-aecb-862aeae73bb8__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:347 Create 3 nodes
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:348 Start 3 nodes with their corresponding config
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.235.105
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['28006', '28007', '28008', '28009', '28010']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 28006:28006 -p 28007:28007 -p 28008:28008 -p 28009:28009 -p 28010:28010 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=28008 --rest-port=28006 --tcp-port=28007 --discv5-udp-port=28009 --rest-address=0.0.0.0 --nat=extip:172.18.235.105 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6ec734caeb9ffa92acb2db3f01004bccf3ce4bc16eea456d40fb1bcfb71cf2eb --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --store=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.235.105 waku c48507345c6c771bfd3efcafbe71f05329d1bb3b3e349954209ca6f175e195d6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID c48507345c6c. Setting up logs at ./log/docker/node1_2024-11-27_13-36-45__35f75cd6-16ee-4220-aecb-862aeae73bb8__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 28006
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 6d1707a41acc. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28006/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QGCt0Z3Kugy3NocPn5zsNHswQbaoOZqzBzlxILoYNHmBfQd6lCk0JwysHOu7rnEjoihhSwCJ8e8OBrXkOe9CF3-GAZNt1q-EgmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaECbde8v-S37oZ6Vgkc6iE5aJatwipspPJX44zeVqhh-1WDdGNwgm1ng3VkcIJtaYV3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/28007/p2p/16Uiu2HAm2pTDcMKGJNjvhy5kngCrGUh2MkfC9tzGd1QS4cdW8iqA","/ip4/127.0.0.1/tcp/28008/ws/p2p/16Uiu2HAm2pTDcMKGJNjvhy5kngCrGUh2MkfC9tzGd1QS4cdW8iqA","/ip4/172.17.0.2/tcp/28007/p2p/16Uiu2HAm2pTDcMKGJNjvhy5kngCrGUh2MkfC9tzGd1QS4cdW8iqA","/ip4/172.17.0.2/tcp/28008/ws/p2p/16Uiu2HAm2pTDcMKGJNjvhy5kngCrGUh2MkfC9tzGd1QS4cdW8iqA"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.179.164
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['40856', '40857', '40858', '40859', '40860']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 40856:40856 -p 40857:40857 -p 40858:40858 -p 40859:40859 -p 40860:40860 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40858 --rest-port=40856 --tcp-port=40857 --discv5-udp-port=40859 --rest-address=0.0.0.0 --nat=extip:172.18.179.164 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1c37c5218b8cb4e574ba58e1f5bccf926763d0bbf5822b7f0ddb14babebef123 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40860 --metrics-logging=true --relay=true --store=true --filter=true --discv5-bootstrap-node=enr:-J-4QGCt0Z3Kugy3NocPn5zsNHswQbaoOZqzBzlxILoYNHmBfQd6lCk0JwysHOu7rnEjoihhSwCJ8e8OBrXkOe9CF3-GAZNt1q-EgmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaECbde8v-S37oZ6Vgkc6iE5aJatwipspPJX44zeVqhh-1WDdGNwgm1ng3VkcIJtaYV3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.179.164 waku 23672593220ce1bcc51c31a8554975c8683eb86c0d1a64762066890efa6a6c89
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 23672593220c. Setting up logs at ./log/docker/node2_2024-11-27_13-36-45__35f75cd6-16ee-4220-aecb-862aeae73bb8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 40856
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40856/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40856/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.179.164/tcp/40857/p2p/16Uiu2HAmG1VvshxLwGnZz7dKipeT2JCkcWmK2yE5gX8UCXJcao9N","/ip4/172.18.179.164/tcp/40858/ws/p2p/16Uiu2HAmG1VvshxLwGnZz7dKipeT2JCkcWmK2yE5gX8UCXJcao9N"],"enrUri":"enr:-L24QGjzbQYGVvLpsvr2z8lUx368HRV9yTCpryEHtvkFejBUeJIxqzhHntSqJWnQA_YgeKcvEgetMbu9NsZfemR256cCgmlkgnY0gmlwhKwSs6SKbXVsdGlhZGRyc5YACASsErOkBp-ZAAoErBKzpAafmt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDMdQfQj5YjXILdPUC-Y7VazZjhFpP6bRtz_YNmBddJlWDdGNwgp-Zg3VkcIKfm4V3YWt1Mgc"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.241.224
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['24946', '24947', '24948', '24949', '24950']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 24946:24946 -p 24947:24947 -p 24948:24948 -p 24949:24949 -p 24950:24950 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=24948 --rest-port=24946 --tcp-port=24947 --discv5-udp-port=24949 --rest-address=0.0.0.0 --nat=extip:172.18.241.224 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9de7978bfcfc6ddf7bb8d5eecbad15c48ef0eff5ed7dfbc907fd0d6b124cf18c --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --filternode=/ip4/172.18.179.164/tcp/40857/p2p/16Uiu2HAmG1VvshxLwGnZz7dKipeT2JCkcWmK2yE5gX8UCXJcao9N --store=false --discv5-bootstrap-node=enr:-L24QGjzbQYGVvLpsvr2z8lUx368HRV9yTCpryEHtvkFejBUeJIxqzhHntSqJWnQA_YgeKcvEgetMbu9NsZfemR256cCgmlkgnY0gmlwhKwSs6SKbXVsdGlhZGRyc5YACASsErOkBp-ZAAoErBKzpAafmt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDMdQfQj5YjXILdPUC-Y7VazZjhFpP6bRtz_YNmBddJlWDdGNwgp-Zg3VkcIKfm4V3YWt1Mgc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.241.224 waku 8efe4cdc8fc78f78d33488c6482084ee91eadcdcec03ba46ee1edbfab2a75466
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 8efe4cdc8fc7. Setting up logs at ./log/docker/node3_2024-11-27_13-36-45__35f75cd6-16ee-4220-aecb-862aeae73bb8__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 24946
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24946/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QDE-dYgEnqQ2aHiWSk19UzAxQiUrax7jIhe23XGrPbV_GWluemU7fxYugODXihpEChsbHFlVwXN0F6jYUqOYdSOGAZNt1rqrgmlkgnY0gmlwhKwRABGCcnODAAMAiXNlY3AyNTZrMaEDcoXTcQ7NZmLNTDijfuUY-AAlxogOo9lRlMBYN9ZZ6xqDdGNwgmFzg3VkcIJhdYV3YWt1MgE","listenAddresses":["/ip4/127.0.0.1/tcp/24947/p2p/16Uiu2HAmLN3BexwmmfA8NCQZSX9SeFTEnmPckzQPaMHEr1V1unWM","/ip4/127.0.0.1/tcp/24948/ws/p2p/16Uiu2HAmLN3BexwmmfA8NCQZSX9SeFTEnmPckzQPaMHEr1V1unWM","/ip4/172.17.0.17/tcp/24947/p2p/16Uiu2HAmLN3BexwmmfA8NCQZSX9SeFTEnmPckzQPaMHEr1V1unWM","/ip4/172.17.0.17/tcp/24948/ws/p2p/16Uiu2HAmLN3BexwmmfA8NCQZSX9SeFTEnmPckzQPaMHEr1V1unWM"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:353 Subscribe nodes to relay  pubsub topics
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28006/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40856/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:357 Wait for all nodes auto connection
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28006/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAmG1VvshxLwGnZz7dKipeT2JCkcWmK2yE5gX8UCXJcao9N","multiaddrs":["/ip4/172.18.179.164/tcp/40857/p2p/16Uiu2HAmG1VvshxLwGnZz7dKipeT2JCkcWmK2yE5gX8UCXJcao9N","/ip4/172.18.179.164/tcp/40858/ws/p2p/16Uiu2HAmG1VvshxLwGnZz7dKipeT2JCkcWmK2yE5gX8UCXJcao9N"],"protocols":null,"connected":false,"pubsubTopics":[]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40856/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28006/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAmG1VvshxLwGnZz7dKipeT2JCkcWmK2yE5gX8UCXJcao9N","multiaddrs":["/ip4/172.18.179.164/tcp/40857/p2p/16Uiu2HAmG1VvshxLwGnZz7dKipeT2JCkcWmK2yE5gX8UCXJcao9N","/ip4/172.18.179.164/tcp/40858/ws/p2p/16Uiu2HAmG1VvshxLwGnZz7dKipeT2JCkcWmK2yE5gX8UCXJcao9N"],"protocols":null,"connected":false,"pubsubTopics":[]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40856/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28006/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAmG1VvshxLwGnZz7dKipeT2JCkcWmK2yE5gX8UCXJcao9N","multiaddrs":["/ip4/172.18.179.164/tcp/40857/p2p/16Uiu2HAmG1VvshxLwGnZz7dKipeT2JCkcWmK2yE5gX8UCXJcao9N","/ip4/172.18.179.164/tcp/40858/ws/p2p/16Uiu2HAmG1VvshxLwGnZz7dKipeT2JCkcWmK2yE5gX8UCXJcao9N"],"protocols":null,"connected":false,"pubsubTopics":[]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40856/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.2/tcp/28007/p2p/16Uiu2HAm2pTDcMKGJNjvhy5kngCrGUh2MkfC9tzGd1QS4cdW8iqA","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/store-query/3.0.0","connected":true}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:361 Node3 subscribe to filter for pubsubtopic  /waku/2/rs/3/1 2 times with same request id
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24946/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:24946/filter/v2/subscriptions. Response content: b'{"requestId":"1","statusDesc":"subscription failed"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id c48507345c6c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 23672593220c
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container c48507345c6c. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 8efe4cdc8fc7
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 23672593220c. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node2_2024-11-27_13-36-45__35f75cd6-16ee-4220-aecb-862aeae73bb8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node3_2024-11-27_13-36-45__35f75cd6-16ee-4220-aecb-862aeae73bb8__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node1_2024-11-27_13-36-45__35f75cd6-16ee-4220-aecb-862aeae73bb8__wakuorg_go-waku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_repeated_filter_requestID with id: 2024-11-27_13-37-28__ac667441-c9f9-4d61-9db5-99e4593a7c6a
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-27_13-37-28__ac667441-c9f9-4d61-9db5-99e4593a7c6a__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-11-27_13-37-28__ac667441-c9f9-4d61-9db5-99e4593a7c6a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-11-27_13-37-28__ac667441-c9f9-4d61-9db5-99e4593a7c6a__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:347 Create 3 nodes
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:348 Start 3 nodes with their corresponding config
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.80.49
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['38478', '38479', '38480', '38481', '38482']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 38478:38478 -p 38479:38479 -p 38480:38480 -p 38481:38481 -p 38482:38482 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=38480 --rest-port=38478 --tcp-port=38479 --discv5-udp-port=38481 --rest-address=0.0.0.0 --nat=extip:172.18.80.49 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ebb6fcd3ce5028ec4bedfbe58ebdb6ceeccef2e616affb0294349e01bf3fc7fb --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --store=true
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 8efe4cdc8fc7. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.80.49 waku 6ddaedbf91eb5c7a8e93ad12cef788180dbd700fbc71c192f8be7ad5d1026ce9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 6ddaedbf91eb. Setting up logs at ./log/docker/node1_2024-11-27_13-37-28__ac667441-c9f9-4d61-9db5-99e4593a7c6a__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 38478
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38478/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QMeGipxQCdsDr7CYRzbgmd9iwtXLKx1EQvnTYcpZPLBpTwSxLrmhcHY9hyjtIs0nXOaAVfkPmg4EDl0Fnvnu1LGGAZNt11kHgmlkgnY0gmlwhKwRAAyCcnODAAMAiXNlY3AyNTZrMaEDRbhYWmlNfzco1T1DVtuccfbBF9RHuR-cN9rer3ZjmPSDdGNwgpZPg3VkcIKWUYV3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/38479/p2p/16Uiu2HAmHM9WyG48QEorar821ZB2eFJdkFRUvDqLFmU8ZYNDdtGb","/ip4/127.0.0.1/tcp/38480/ws/p2p/16Uiu2HAmHM9WyG48QEorar821ZB2eFJdkFRUvDqLFmU8ZYNDdtGb","/ip4/172.17.0.12/tcp/38479/p2p/16Uiu2HAmHM9WyG48QEorar821ZB2eFJdkFRUvDqLFmU8ZYNDdtGb","/ip4/172.17.0.12/tcp/38480/ws/p2p/16Uiu2HAmHM9WyG48QEorar821ZB2eFJdkFRUvDqLFmU8ZYNDdtGb"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.46.218
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['56929', '56930', '56931', '56932', '56933']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 56929:56929 -p 56930:56930 -p 56931:56931 -p 56932:56932 -p 56933:56933 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56931 --rest-port=56929 --tcp-port=56930 --discv5-udp-port=56932 --rest-address=0.0.0.0 --nat=extip:172.18.46.218 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=98a52a6eabaf11701e3ed80b8dcd105bd40e1b8a64e0a7225cdacf75e0c3144f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56933 --metrics-logging=true --relay=true --store=true --filter=true --discv5-bootstrap-node=enr:-J-4QMeGipxQCdsDr7CYRzbgmd9iwtXLKx1EQvnTYcpZPLBpTwSxLrmhcHY9hyjtIs0nXOaAVfkPmg4EDl0Fnvnu1LGGAZNt11kHgmlkgnY0gmlwhKwRAAyCcnODAAMAiXNlY3AyNTZrMaEDRbhYWmlNfzco1T1DVtuccfbBF9RHuR-cN9rer3ZjmPSDdGNwgpZPg3VkcIKWUYV3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.46.218 waku 2aebd5ef902a384db9c37f77d7cb9a5eb7c190925df7e0dd99fd4be372b7ebe5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 2aebd5ef902a. Setting up logs at ./log/docker/node2_2024-11-27_13-37-28__ac667441-c9f9-4d61-9db5-99e4593a7c6a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 56929
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56929/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56929/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.46.218/tcp/56930/p2p/16Uiu2HAmPRrGukx3kHS4a26Z7T792gxCJsEW264cSVK8aPqSMKkA","/ip4/172.18.46.218/tcp/56931/ws/p2p/16Uiu2HAmPRrGukx3kHS4a26Z7T792gxCJsEW264cSVK8aPqSMKkA"],"enrUri":"enr:-L24QCiVrESPym9tdRmeBZs-XTVY8cHmGMvlnUanP6SwJAIYRXzoil2yuRvfp-QCJm5Dd_ltcv_7yYjCFnQAKy8Kq48CgmlkgnY0gmlwhKwSLtqKbXVsdGlhZGRyc5YACASsEi7aBt5iAAoErBIu2gbeY90DgnJzhQADAQAAiXNlY3AyNTZrMaEDoBLf6iFjqZqluPfVUKUmzNceRADBPscJSHZQmEktXP-DdGNwgt5ig3VkcILeZIV3YWt1Mgc"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.194.183
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['49509', '49510', '49511', '49512', '49513']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 49509:49509 -p 49510:49510 -p 49511:49511 -p 49512:49512 -p 49513:49513 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=49511 --rest-port=49509 --tcp-port=49510 --discv5-udp-port=49512 --rest-address=0.0.0.0 --nat=extip:172.18.194.183 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b86a81eba1cafbf6ced77f6978ab44cbfa2ab45aed2c1885c2efa7ff46b04dfe --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --filternode=/ip4/172.18.46.218/tcp/56930/p2p/16Uiu2HAmPRrGukx3kHS4a26Z7T792gxCJsEW264cSVK8aPqSMKkA --store=false --discv5-bootstrap-node=enr:-L24QCiVrESPym9tdRmeBZs-XTVY8cHmGMvlnUanP6SwJAIYRXzoil2yuRvfp-QCJm5Dd_ltcv_7yYjCFnQAKy8Kq48CgmlkgnY0gmlwhKwSLtqKbXVsdGlhZGRyc5YACASsEi7aBt5iAAoErBIu2gbeY90DgnJzhQADAQAAiXNlY3AyNTZrMaEDoBLf6iFjqZqluPfVUKUmzNceRADBPscJSHZQmEktXP-DdGNwgt5ig3VkcILeZIV3YWt1Mgc
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.194.183 waku a27965e4995350cd86198e7b10871de4228e9324adf40cbeae1f554273cac3de
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID a27965e49953. Setting up logs at ./log/docker/node3_2024-11-27_13-37-28__ac667441-c9f9-4d61-9db5-99e4593a7c6a__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 49509
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49509/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QLAXwjhPI4LK2tJmjeKz-oL0NEu0t4DP9txbQeFLVUtmBhPCEZnlonC1IXfs6iMSosse9hNHwc8pMV_OYiioWNqGAZNt12h5gmlkgnY0gmlwhKwRAA2CcnODAAMAiXNlY3AyNTZrMaECQJUYU7yDa9jcGpFjwdxWyZry32-pG5VpsqFNvV4BnEGDdGNwgsFmg3VkcILBaIV3YWt1MgE","listenAddresses":["/ip4/127.0.0.1/tcp/49510/p2p/16Uiu2HAkymmw5485WbnAUo3fQiDuvzY84XBa3m71jQNiKM3WM5RJ","/ip4/127.0.0.1/tcp/49511/ws/p2p/16Uiu2HAkymmw5485WbnAUo3fQiDuvzY84XBa3m71jQNiKM3WM5RJ","/ip4/172.17.0.13/tcp/49510/p2p/16Uiu2HAkymmw5485WbnAUo3fQiDuvzY84XBa3m71jQNiKM3WM5RJ","/ip4/172.17.0.13/tcp/49511/ws/p2p/16Uiu2HAkymmw5485WbnAUo3fQiDuvzY84XBa3m71jQNiKM3WM5RJ"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:353 Subscribe nodes to relay  pubsub topics
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38478/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56929/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:357 Wait for all nodes auto connection
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38478/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAmPRrGukx3kHS4a26Z7T792gxCJsEW264cSVK8aPqSMKkA","multiaddrs":["/ip4/172.18.46.218/tcp/56930/p2p/16Uiu2HAmPRrGukx3kHS4a26Z7T792gxCJsEW264cSVK8aPqSMKkA","/ip4/172.18.46.218/tcp/56931/ws/p2p/16Uiu2HAmPRrGukx3kHS4a26Z7T792gxCJsEW264cSVK8aPqSMKkA"],"protocols":null,"connected":false,"pubsubTopics":[]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56929/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38478/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAmPRrGukx3kHS4a26Z7T792gxCJsEW264cSVK8aPqSMKkA","multiaddrs":["/ip4/172.18.46.218/tcp/56930/p2p/16Uiu2HAmPRrGukx3kHS4a26Z7T792gxCJsEW264cSVK8aPqSMKkA","/ip4/172.18.46.218/tcp/56931/ws/p2p/16Uiu2HAmPRrGukx3kHS4a26Z7T792gxCJsEW264cSVK8aPqSMKkA"],"protocols":null,"connected":false,"pubsubTopics":[]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56929/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.12/tcp/38479/p2p/16Uiu2HAmHM9WyG48QEorar821ZB2eFJdkFRUvDqLFmU8ZYNDdtGb","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":false},{"protocol":"/vac/waku/store-query/3.0.0","connected":false}],"origin":"Discv5"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:361 Node3 subscribe to filter for pubsubtopic  /waku/2/rs/3/1 2 times with same request id
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49509/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:49509/filter/v2/subscriptions. Response content: b'{"requestId":"1","statusDesc":"subscription failed"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 6ddaedbf91eb
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 2aebd5ef902a
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 6ddaedbf91eb. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id a27965e49953
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 2aebd5ef902a. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node2_2024-11-27_13-37-28__ac667441-c9f9-4d61-9db5-99e4593a7c6a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node3_2024-11-27_13-37-28__ac667441-c9f9-4d61-9db5-99e4593a7c6a__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node1_2024-11-27_13-37-28__ac667441-c9f9-4d61-9db5-99e4593a7c6a__wakuorg_go-waku:latest.log