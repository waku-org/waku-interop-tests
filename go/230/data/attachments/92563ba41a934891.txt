[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_valid_timestamps with id: 2024-08-05_03-17-12__0ea91bb2-76b6-4f60-ab5a-e5f2faebb4ca
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:81 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-05_03-17-12__0ea91bb2-76b6-4f60-ab5a-e5f2faebb4ca__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.149.147
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['44512', '44513', '44514', '44515', '44516']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:428 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:157 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:159 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 44512:44512 -p 44513:44513 -p 44514:44514 -p 44515:44515 -p 44516:44516 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44514 --rest-port=44512 --tcp-port=44513 --discv5-udp-port=44515 --rest-address=0.0.0.0 --nat=extip:172.18.149.147 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44516 --metrics-logging=true --lightpush=true --relay=true --nodekey=30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.149.147 waku f0c70f471df74ffddfba0ec85e1399a2870377e01831d26fc3bf2ef9208d4eaa
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID f0c70f471df7. Setting up logs at ./log/docker/receiving_node1_2024-08-05_03-17-12__0ea91bb2-76b6-4f60-ab5a-e5f2faebb4ca__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Started container from image wakuorg/nwaku:latest. REST: 44512
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44512/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:274 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44512/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.149.147/tcp/44513/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip","/ip4/172.18.149.147/tcp/44514/ws/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"],"enrUri":"enr:-LO4QO_9YN_B6AUdOMoYPUyfLWDNd-exhb6zC23q76PaNv-JAl3ENDRZnMYOKeoSBqc9sNBtoP1-xnSAyopWJi3MhTUBgmlkgnY0gmlwhKwSlZOKbXVsdGlhZGRyc4wACgSsEpWTBq3i3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCreGDdWRwgq3jhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:81 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-05_03-17-12__0ea91bb2-76b6-4f60-ab5a-e5f2faebb4ca__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.124.189
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['18357', '18358', '18359', '18360', '18361']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:428 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:157 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:159 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 18357:18357 -p 18358:18358 -p 18359:18359 -p 18360:18360 -p 18361:18361 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=18359 --rest-port=18357 --tcp-port=18358 --discv5-udp-port=18360 --rest-address=0.0.0.0 --nat=extip:172.18.124.189 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-LO4QO_9YN_B6AUdOMoYPUyfLWDNd-exhb6zC23q76PaNv-JAl3ENDRZnMYOKeoSBqc9sNBtoP1-xnSAyopWJi3MhTUBgmlkgnY0gmlwhKwSlZOKbXVsdGlhZGRyc4wACgSsEpWTBq3i3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCreGDdWRwgq3jhXdha3UyCQ --lightpushnode=/ip4/172.18.149.147/tcp/44513/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.124.189 waku addce0589b9aa080760b765c91f71567734590814c3ca852dbdf8a7589906590
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID addce0589b9a. Setting up logs at ./log/docker/lightpush_node1_2024-08-05_03-17-12__0ea91bb2-76b6-4f60-ab5a-e5f2faebb4ca__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Started container from image wakuorg/go-waku:latest. REST: 18357
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18357/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QNwXKmUM1FRaw-3JayeOMG88XHYPJwPC50WJEV78kHOYI7TPbeXTsnfM5iwvsui7SmyAd9X74jx7xb5g0rKbdIWGAZEgioRpgmlkgnY0gmlwhKwRAAiJc2VjcDI1NmsxoQJVd8wQu-0J0v9ndAJWHv7A2VmXWj6l7Ou5MKFLOPAIlYN0Y3CCR7aDdWRwgke4hXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/18358/p2p/16Uiu2HAm1BJao9ZJZbxSoA9Qss75M27mhEh9mBJJiTMKwxwV1AvG","/ip4/127.0.0.1/tcp/18359/ws/p2p/16Uiu2HAm1BJao9ZJZbxSoA9Qss75M27mhEh9mBJJiTMKwxwV1AvG","/ip4/172.17.0.8/tcp/18358/p2p/16Uiu2HAm1BJao9ZJZbxSoA9Qss75M27mhEh9mBJJiTMKwxwV1AvG","/ip4/172.17.0.8/tcp/18359/ws/p2p/16Uiu2HAm1BJao9ZJZbxSoA9Qss75M27mhEh9mBJJiTMKwxwV1AvG"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18357/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.149.147/tcp/44513/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44512/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:159 Running test with timestamp Now
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18357/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1722827478033451008}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:18357/lightpush/v1/message. Response content: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0xda0bff1e7b5d4573c6383fa5128ef238eff87249a7a0c61aa8bd65cd9ab5143e'
[31m[1mERROR   [0m tests.light_push.test_publish:test_publish.py:164 Timestamp Now failed: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:18357/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0xda0bff1e7b5d4573c6383fa5128ef238eff87249a7a0c61aa8bd65cd9ab5143e'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:159 Running test with timestamp Far future
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18357/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 2038187478033420032}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:18357/lightpush/v1/message. Response content: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0xc8311a5ab7bfdfea4a6c620cafe1301808d16dde866a9c76a717a03ed454f304'
[31m[1mERROR   [0m tests.light_push.test_publish:test_publish.py:164 Timestamp Far future failed: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:18357/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0xc8311a5ab7bfdfea4a6c620cafe1301808d16dde866a9c76a717a03ed454f304'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:159 Running test with timestamp Recent past
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18357/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1722823878033420032}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:18357/lightpush/v1/message. Response content: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x4c2e1732bfc196b657acbfd6b2942a8cff47f7fc02112c46e1ed504dc40872a8'
[31m[1mERROR   [0m tests.light_push.test_publish:test_publish.py:164 Timestamp Recent past failed: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:18357/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x4c2e1732bfc196b657acbfd6b2942a8cff47f7fc02112c46e1ed504dc40872a8'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:159 Running test with timestamp Near future
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18357/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1722831078033420032}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:18357/lightpush/v1/message. Response content: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x256d0216cc5b70278e25fc7c146236abfa23423f7d52544537f823d97cb32251'
[31m[1mERROR   [0m tests.light_push.test_publish:test_publish.py:164 Timestamp Near future failed: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:18357/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x256d0216cc5b70278e25fc7c146236abfa23423f7d52544537f823d97cb32251'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:159 Running test with timestamp Positive number
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18357/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:18357/lightpush/v1/message. Response content: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x47ee80622a7127c13231c3ea28878ef62429950efe9c7c753094867389629603'
[31m[1mERROR   [0m tests.light_push.test_publish:test_publish.py:164 Timestamp Positive number failed: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:18357/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x47ee80622a7127c13231c3ea28878ef62429950efe9c7c753094867389629603'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:159 Running test with timestamp Negative number
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18357/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": -1}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:18357/lightpush/v1/message. Response content: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0xa71d511bea2105fbbb6b69ea7d16d29eefa89bd70407a15b01f3623eb8e26b4b'
[31m[1mERROR   [0m tests.light_push.test_publish:test_publish.py:164 Timestamp Negative number failed: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:18357/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0xa71d511bea2105fbbb6b69ea7d16d29eefa89bd70407a15b01f3623eb8e26b4b'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:159 Running test with timestamp DST change
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18357/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1583632800000000000}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:18357/lightpush/v1/message. Response content: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0xa1de2174a28bbe78ab7cfeb98791a0d458c08a144653f0aba91de098c075d197'
[31m[1mERROR   [0m tests.light_push.test_publish:test_publish.py:164 Timestamp DST change failed: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:18357/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0xa1de2174a28bbe78ab7cfeb98791a0d458c08a144653f0aba91de098c075d197'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:159 Running test with timestamp Missing
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18357/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": null}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:18357/lightpush/v1/message. Response content: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x0cc0dc3dfd694ce41b92c3c516b7a6e64c1c08dcd66a4eaf61a68f502da2d20b'
[31m[1mERROR   [0m tests.light_push.test_publish:test_publish.py:164 Timestamp Missing failed: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:18357/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x0cc0dc3dfd694ce41b92c3c516b7a6e64c1c08dcd66a4eaf61a68f502da2d20b'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:218 Stopping container with id f0c70f471df7
[35mDEBUG   [0m src.node.waku_node:waku_node.py:225 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:218 Stopping container with id addce0589b9a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:225 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/lightpush_node1_2024-08-05_03-17-12__0ea91bb2-76b6-4f60-ab5a-e5f2faebb4ca__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/receiving_node1_2024-08-05_03-17-12__0ea91bb2-76b6-4f60-ab5a-e5f2faebb4ca__wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_valid_timestamps with id: 2024-08-05_03-17-19__d35f436e-6374-4344-acac-f3c05c264ca0
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:81 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-05_03-17-19__d35f436e-6374-4344-acac-f3c05c264ca0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.191.97
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['59555', '59556', '59557', '59558', '59559']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:428 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:157 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:159 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 59555:59555 -p 59556:59556 -p 59557:59557 -p 59558:59558 -p 59559:59559 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=59557 --rest-port=59555 --tcp-port=59556 --discv5-udp-port=59558 --rest-address=0.0.0.0 --nat=extip:172.18.191.97 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=59559 --metrics-logging=true --lightpush=true --relay=true --nodekey=30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.191.97 waku b72494c5036f103d50a72ba89adfbf4968201b412d240d4cb2d9f932791030c6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID b72494c5036f. Setting up logs at ./log/docker/receiving_node1_2024-08-05_03-17-19__d35f436e-6374-4344-acac-f3c05c264ca0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Started container from image wakuorg/nwaku:latest. REST: 59555
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59555/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:274 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59555/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.191.97/tcp/59556/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip","/ip4/172.18.191.97/tcp/59557/ws/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"],"enrUri":"enr:-LO4QC9UCphpJH4R77bnydCqaL2a9kPJF0nR2kvCxhrbzEedAsRIB600hJNDUXTi5m8Qk_GjOk1kZpU804dZdYR9o7MBgmlkgnY0gmlwhKwSv2GKbXVsdGlhZGRyc4wACgSsEr9hBuil3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CC6KSDdWRwguimhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:81 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-05_03-17-19__d35f436e-6374-4344-acac-f3c05c264ca0__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.78.56
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['3054', '3055', '3056', '3057', '3058']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:428 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:157 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:159 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 3054:3054 -p 3055:3055 -p 3056:3056 -p 3057:3057 -p 3058:3058 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=3056 --rest-port=3054 --tcp-port=3055 --discv5-udp-port=3057 --rest-address=0.0.0.0 --nat=extip:172.18.78.56 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-LO4QC9UCphpJH4R77bnydCqaL2a9kPJF0nR2kvCxhrbzEedAsRIB600hJNDUXTi5m8Qk_GjOk1kZpU804dZdYR9o7MBgmlkgnY0gmlwhKwSv2GKbXVsdGlhZGRyc4wACgSsEr9hBuil3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CC6KSDdWRwguimhXdha3UyCQ --lightpushnode=/ip4/172.18.191.97/tcp/59556/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.78.56 waku 4e48ddeaa372b4d8852bba03463f15625e8e2c35e78fd028bfe6bf466a32b890
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 4e48ddeaa372. Setting up logs at ./log/docker/lightpush_node1_2024-08-05_03-17-19__d35f436e-6374-4344-acac-f3c05c264ca0__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Started container from image wakuorg/go-waku:latest. REST: 3054
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3054/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QAy34HlmD7Fvfo1WcRDN1fQF1l4eYhOOw9E1oeyZHPdGddQie1AXEk4h7rWyhR89Ot62bc7uSeZ5wqRR1w9sRJGGAZEgiqIEgmlkgnY0gmlwhKwRAAOJc2VjcDI1NmsxoQOat6bmf10tKskMyu2oFj_jiXkkB17VeNgWk-ACGpIUOYN0Y3CCC--DdWRwggvxhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/3055/p2p/16Uiu2HAmP4wZN4pMXYSCAMDHkgwvUjiysfhJt75M3iggVnZfXrqe","/ip4/127.0.0.1/tcp/3056/ws/p2p/16Uiu2HAmP4wZN4pMXYSCAMDHkgwvUjiysfhJt75M3iggVnZfXrqe","/ip4/172.17.0.3/tcp/3055/p2p/16Uiu2HAmP4wZN4pMXYSCAMDHkgwvUjiysfhJt75M3iggVnZfXrqe","/ip4/172.17.0.3/tcp/3056/ws/p2p/16Uiu2HAmP4wZN4pMXYSCAMDHkgwvUjiysfhJt75M3iggVnZfXrqe"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3054/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.191.97/tcp/59556/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59555/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:159 Running test with timestamp Now
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3054/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1722827478033451008}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:3054/lightpush/v1/message. Response content: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0xda0bff1e7b5d4573c6383fa5128ef238eff87249a7a0c61aa8bd65cd9ab5143e'
[31m[1mERROR   [0m tests.light_push.test_publish:test_publish.py:164 Timestamp Now failed: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:3054/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0xda0bff1e7b5d4573c6383fa5128ef238eff87249a7a0c61aa8bd65cd9ab5143e'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:159 Running test with timestamp Far future
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3054/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 2038187478033420032}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:3054/lightpush/v1/message. Response content: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0xc8311a5ab7bfdfea4a6c620cafe1301808d16dde866a9c76a717a03ed454f304'
[31m[1mERROR   [0m tests.light_push.test_publish:test_publish.py:164 Timestamp Far future failed: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:3054/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0xc8311a5ab7bfdfea4a6c620cafe1301808d16dde866a9c76a717a03ed454f304'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:159 Running test with timestamp Recent past
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3054/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1722823878033420032}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:3054/lightpush/v1/message. Response content: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x4c2e1732bfc196b657acbfd6b2942a8cff47f7fc02112c46e1ed504dc40872a8'
[31m[1mERROR   [0m tests.light_push.test_publish:test_publish.py:164 Timestamp Recent past failed: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:3054/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x4c2e1732bfc196b657acbfd6b2942a8cff47f7fc02112c46e1ed504dc40872a8'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:159 Running test with timestamp Near future
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3054/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1722831078033420032}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:3054/lightpush/v1/message. Response content: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x256d0216cc5b70278e25fc7c146236abfa23423f7d52544537f823d97cb32251'
[31m[1mERROR   [0m tests.light_push.test_publish:test_publish.py:164 Timestamp Near future failed: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:3054/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x256d0216cc5b70278e25fc7c146236abfa23423f7d52544537f823d97cb32251'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:159 Running test with timestamp Positive number
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3054/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:3054/lightpush/v1/message. Response content: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x47ee80622a7127c13231c3ea28878ef62429950efe9c7c753094867389629603'
[31m[1mERROR   [0m tests.light_push.test_publish:test_publish.py:164 Timestamp Positive number failed: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:3054/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x47ee80622a7127c13231c3ea28878ef62429950efe9c7c753094867389629603'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:159 Running test with timestamp Negative number
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3054/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": -1}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:3054/lightpush/v1/message. Response content: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0xa71d511bea2105fbbb6b69ea7d16d29eefa89bd70407a15b01f3623eb8e26b4b'
[31m[1mERROR   [0m tests.light_push.test_publish:test_publish.py:164 Timestamp Negative number failed: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:3054/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0xa71d511bea2105fbbb6b69ea7d16d29eefa89bd70407a15b01f3623eb8e26b4b'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:159 Running test with timestamp DST change
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3054/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1583632800000000000}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:3054/lightpush/v1/message. Response content: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0xa1de2174a28bbe78ab7cfeb98791a0d458c08a144653f0aba91de098c075d197'
[31m[1mERROR   [0m tests.light_push.test_publish:test_publish.py:164 Timestamp DST change failed: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:3054/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0xa1de2174a28bbe78ab7cfeb98791a0d458c08a144653f0aba91de098c075d197'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:159 Running test with timestamp Missing
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3054/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": null}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:3054/lightpush/v1/message. Response content: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x0cc0dc3dfd694ce41b92c3c516b7a6e64c1c08dcd66a4eaf61a68f502da2d20b'
[31m[1mERROR   [0m tests.light_push.test_publish:test_publish.py:164 Timestamp Missing failed: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:3054/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x0cc0dc3dfd694ce41b92c3c516b7a6e64c1c08dcd66a4eaf61a68f502da2d20b'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:218 Stopping container with id b72494c5036f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:225 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:218 Stopping container with id 4e48ddeaa372
[35mDEBUG   [0m src.node.waku_node:waku_node.py:225 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/receiving_node1_2024-08-05_03-17-19__d35f436e-6374-4344-acac-f3c05c264ca0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/lightpush_node1_2024-08-05_03-17-19__d35f436e-6374-4344-acac-f3c05c264ca0__wakuorg_go-waku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_valid_timestamps with id: 2024-08-05_03-17-26__26770233-1813-44f9-a834-a673c5a67d5d
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:81 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-05_03-17-26__26770233-1813-44f9-a834-a673c5a67d5d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.160.209
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['12492', '12493', '12494', '12495', '12496']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:428 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:157 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:159 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 12492:12492 -p 12493:12493 -p 12494:12494 -p 12495:12495 -p 12496:12496 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=12494 --rest-port=12492 --tcp-port=12493 --discv5-udp-port=12495 --rest-address=0.0.0.0 --nat=extip:172.18.160.209 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=12496 --metrics-logging=true --lightpush=true --relay=true --nodekey=30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.160.209 waku a35517ac73862aa755a0f6365304022bc1941f88f1ecb94be0dcfcfdbc17752f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID a35517ac7386. Setting up logs at ./log/docker/receiving_node1_2024-08-05_03-17-26__26770233-1813-44f9-a834-a673c5a67d5d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Started container from image wakuorg/nwaku:latest. REST: 12492
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12492/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:274 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12492/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.160.209/tcp/12493/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip","/ip4/172.18.160.209/tcp/12494/ws/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"],"enrUri":"enr:-LO4QBIIfaZ2Jac-Is3SWkrmbnXgwXxjRIXZ03iqlQ6kEfXcBPAQnt-KecNquOAJT0dNs4DGH7JQqCoOSZ7fOtzG_YIBgmlkgnY0gmlwhKwSoNGKbXVsdGlhZGRyc4wACgSsEqDRBjDO3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCMM2DdWRwgjDPhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:81 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-05_03-17-26__26770233-1813-44f9-a834-a673c5a67d5d__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.98.180
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['41481', '41482', '41483', '41484', '41485']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:428 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:157 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:159 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 41481:41481 -p 41482:41482 -p 41483:41483 -p 41484:41484 -p 41485:41485 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=41483 --rest-port=41481 --tcp-port=41482 --discv5-udp-port=41484 --rest-address=0.0.0.0 --nat=extip:172.18.98.180 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-LO4QBIIfaZ2Jac-Is3SWkrmbnXgwXxjRIXZ03iqlQ6kEfXcBPAQnt-KecNquOAJT0dNs4DGH7JQqCoOSZ7fOtzG_YIBgmlkgnY0gmlwhKwSoNGKbXVsdGlhZGRyc4wACgSsEqDRBjDO3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCMM2DdWRwgjDPhXdha3UyCQ --lightpushnode=/ip4/172.18.160.209/tcp/12493/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.98.180 waku 1b64255f3e16e6d0de50689cddc39717f48bb441887160f60c8abbb702e3bef2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 1b64255f3e16. Setting up logs at ./log/docker/lightpush_node1_2024-08-05_03-17-26__26770233-1813-44f9-a834-a673c5a67d5d__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Started container from image wakuorg/go-waku:latest. REST: 41481
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41481/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QIthzl7N-QTk9SaXgvIezP0jHp3D51TAEGjr-oPM94mnCNj9JogmyFOWTFEjw1oLBUxD-v8OqfLzOaFiPptZgtyGAZEgir4qgmlkgnY0gmlwhKwRAAmJc2VjcDI1NmsxoQJy_BIPYny2wh6qfHtcquix3yqqmZX5Q1T-2OsqZXBhRoN0Y3CCogqDdWRwgqIMhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/41482/p2p/16Uiu2HAm3AXPaGR8zb7t5eW5B1RDimxBbwMy4yDA95ErmEjSRCbw","/ip4/127.0.0.1/tcp/41483/ws/p2p/16Uiu2HAm3AXPaGR8zb7t5eW5B1RDimxBbwMy4yDA95ErmEjSRCbw","/ip4/172.17.0.9/tcp/41482/p2p/16Uiu2HAm3AXPaGR8zb7t5eW5B1RDimxBbwMy4yDA95ErmEjSRCbw","/ip4/172.17.0.9/tcp/41483/ws/p2p/16Uiu2HAm3AXPaGR8zb7t5eW5B1RDimxBbwMy4yDA95ErmEjSRCbw"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41481/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.160.209/tcp/12493/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12492/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:159 Running test with timestamp Now
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41481/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1722827478033451008}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:41481/lightpush/v1/message. Response content: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0xda0bff1e7b5d4573c6383fa5128ef238eff87249a7a0c61aa8bd65cd9ab5143e'
[31m[1mERROR   [0m tests.light_push.test_publish:test_publish.py:164 Timestamp Now failed: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:41481/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0xda0bff1e7b5d4573c6383fa5128ef238eff87249a7a0c61aa8bd65cd9ab5143e'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:159 Running test with timestamp Far future
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41481/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 2038187478033420032}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:41481/lightpush/v1/message. Response content: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0xc8311a5ab7bfdfea4a6c620cafe1301808d16dde866a9c76a717a03ed454f304'
[31m[1mERROR   [0m tests.light_push.test_publish:test_publish.py:164 Timestamp Far future failed: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:41481/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0xc8311a5ab7bfdfea4a6c620cafe1301808d16dde866a9c76a717a03ed454f304'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:159 Running test with timestamp Recent past
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41481/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1722823878033420032}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:41481/lightpush/v1/message. Response content: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x4c2e1732bfc196b657acbfd6b2942a8cff47f7fc02112c46e1ed504dc40872a8'
[31m[1mERROR   [0m tests.light_push.test_publish:test_publish.py:164 Timestamp Recent past failed: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:41481/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x4c2e1732bfc196b657acbfd6b2942a8cff47f7fc02112c46e1ed504dc40872a8'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:159 Running test with timestamp Near future
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41481/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1722831078033420032}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:41481/lightpush/v1/message. Response content: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x256d0216cc5b70278e25fc7c146236abfa23423f7d52544537f823d97cb32251'
[31m[1mERROR   [0m tests.light_push.test_publish:test_publish.py:164 Timestamp Near future failed: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:41481/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x256d0216cc5b70278e25fc7c146236abfa23423f7d52544537f823d97cb32251'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:159 Running test with timestamp Positive number
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41481/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:41481/lightpush/v1/message. Response content: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x47ee80622a7127c13231c3ea28878ef62429950efe9c7c753094867389629603'
[31m[1mERROR   [0m tests.light_push.test_publish:test_publish.py:164 Timestamp Positive number failed: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:41481/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x47ee80622a7127c13231c3ea28878ef62429950efe9c7c753094867389629603'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:159 Running test with timestamp Negative number
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41481/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": -1}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:41481/lightpush/v1/message. Response content: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0xa71d511bea2105fbbb6b69ea7d16d29eefa89bd70407a15b01f3623eb8e26b4b'
[31m[1mERROR   [0m tests.light_push.test_publish:test_publish.py:164 Timestamp Negative number failed: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:41481/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0xa71d511bea2105fbbb6b69ea7d16d29eefa89bd70407a15b01f3623eb8e26b4b'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:159 Running test with timestamp DST change
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41481/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1583632800000000000}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:41481/lightpush/v1/message. Response content: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0xa1de2174a28bbe78ab7cfeb98791a0d458c08a144653f0aba91de098c075d197'
[31m[1mERROR   [0m tests.light_push.test_publish:test_publish.py:164 Timestamp DST change failed: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:41481/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0xa1de2174a28bbe78ab7cfeb98791a0d458c08a144653f0aba91de098c075d197'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:159 Running test with timestamp Missing
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41481/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": null}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:41481/lightpush/v1/message. Response content: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x0cc0dc3dfd694ce41b92c3c516b7a6e64c1c08dcd66a4eaf61a68f502da2d20b'
[31m[1mERROR   [0m tests.light_push.test_publish:test_publish.py:164 Timestamp Missing failed: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:41481/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x0cc0dc3dfd694ce41b92c3c516b7a6e64c1c08dcd66a4eaf61a68f502da2d20b'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:218 Stopping container with id a35517ac7386
[35mDEBUG   [0m src.node.waku_node:waku_node.py:225 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:218 Stopping container with id 1b64255f3e16
[35mDEBUG   [0m src.node.waku_node:waku_node.py:225 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/lightpush_node1_2024-08-05_03-17-26__26770233-1813-44f9-a834-a673c5a67d5d__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/receiving_node1_2024-08-05_03-17-26__26770233-1813-44f9-a834-a673c5a67d5d__wakuorg_nwaku:latest.log