[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_only_lightpush__peer_full with id: 2024-08-05_03-18-52__23f7ad23-8d72-4ba8-9456-81ccec1bd19b
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:81 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-05_03-18-52__23f7ad23-8d72-4ba8-9456-81ccec1bd19b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.228.246
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['44968', '44969', '44970', '44971', '44972']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:428 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:157 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:159 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 44968:44968 -p 44969:44969 -p 44970:44970 -p 44971:44971 -p 44972:44972 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=44970 --rest-port=44968 --tcp-port=44969 --discv5-udp-port=44971 --rest-address=0.0.0.0 --nat=extip:172.18.228.246 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=44972 --metrics-logging=true --lightpush=true --relay=true --nodekey=30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68 --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.228.246 waku bab705eca2e841bddb0d7bdc90332d9d8533e135fe257af5add100b23dd5b07d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID bab705eca2e8. Setting up logs at ./log/docker/receiving_node1_2024-08-05_03-18-52__23f7ad23-8d72-4ba8-9456-81ccec1bd19b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Started container from image wakuorg/nwaku:latest. REST: 44968
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44968/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:274 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44968/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.228.246/tcp/44969/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip","/ip4/172.18.228.246/tcp/44970/ws/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"],"enrUri":"enr:-LO4QNlAZq6UYDjcV70LhIkjSUEIpxdhy2bss_DA9hp2hnANJivRJEMkhQwSYHE4qCVpX3ZzXBI8y1wAXHKKfEBk86oBgmlkgnY0gmlwhKwS5PaKbXVsdGlhZGRyc4wACgSsEuT2Bq-q3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCr6mDdWRwgq-rhXdha3UyDQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:81 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-05_03-18-52__23f7ad23-8d72-4ba8-9456-81ccec1bd19b__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.89.76
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['11475', '11476', '11477', '11478', '11479']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:428 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:157 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:159 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 11475:11475 -p 11476:11476 -p 11477:11477 -p 11478:11478 -p 11479:11479 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=11477 --rest-port=11475 --tcp-port=11476 --discv5-udp-port=11478 --rest-address=0.0.0.0 --nat=extip:172.18.89.76 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-LO4QNlAZq6UYDjcV70LhIkjSUEIpxdhy2bss_DA9hp2hnANJivRJEMkhQwSYHE4qCVpX3ZzXBI8y1wAXHKKfEBk86oBgmlkgnY0gmlwhKwS5PaKbXVsdGlhZGRyc4wACgSsEuT2Bq-q3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCr6mDdWRwgq-rhXdha3UyDQ --lightpushnode=/ip4/172.18.228.246/tcp/44969/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.89.76 waku 6ffb35fd1f6949ce3b40f9c02ea6f91e32a5ade13c245f38c1857281d8d88ac1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 6ffb35fd1f69. Setting up logs at ./log/docker/lightpush_node1_2024-08-05_03-18-52__23f7ad23-8d72-4ba8-9456-81ccec1bd19b__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Started container from image wakuorg/go-waku:latest. REST: 11475
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11475/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QFbwP8lK1p1vUtL1xPVK-O1REA-aViJek2-fCGq1Fs0xF2ta2GcEeQnWRIPd7X0rzr28_GmxmP-iYKQpS-QF0buGAZEgjAvdgmlkgnY0gmlwhKwRAAWJc2VjcDI1NmsxoQP0D8eJJdOTpIvOooZSsWZTZnJlmqinGPH-bxEnZQJ03YN0Y3CCLNSDdWRwgizWhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/11476/p2p/16Uiu2HAmV5hnSd6jMunMUB7jK3p8v1UjBCFSk9zz2b1FLQP4fPja","/ip4/127.0.0.1/tcp/11477/ws/p2p/16Uiu2HAmV5hnSd6jMunMUB7jK3p8v1UjBCFSk9zz2b1FLQP4fPja","/ip4/172.17.0.5/tcp/11476/p2p/16Uiu2HAmV5hnSd6jMunMUB7jK3p8v1UjBCFSk9zz2b1FLQP4fPja","/ip4/172.17.0.5/tcp/11477/ws/p2p/16Uiu2HAmV5hnSd6jMunMUB7jK3p8v1UjBCFSk9zz2b1FLQP4fPja"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11475/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.228.246/tcp/44969/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44968/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11475/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1722827935832556800}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:11475/lightpush/v1/message. Response content: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x998f65cea4bad9353ea296f6c13d4eb4d6fddef9b1fd6f7c5cc382aeb43a93e7'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:218 Stopping container with id bab705eca2e8
[35mDEBUG   [0m src.node.waku_node:waku_node.py:225 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:218 Stopping container with id 6ffb35fd1f69
[35mDEBUG   [0m src.node.waku_node:waku_node.py:225 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/lightpush_node1_2024-08-05_03-18-52__23f7ad23-8d72-4ba8-9456-81ccec1bd19b__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/receiving_node1_2024-08-05_03-18-52__23f7ad23-8d72-4ba8-9456-81ccec1bd19b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_only_lightpush__peer_full with id: 2024-08-05_03-18-59__e1d0aa2a-8de8-4c51-8c68-01e29161d279
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:81 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-05_03-18-59__e1d0aa2a-8de8-4c51-8c68-01e29161d279__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.150.193
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['56538', '56539', '56540', '56541', '56542']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:428 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:157 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:159 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 56538:56538 -p 56539:56539 -p 56540:56540 -p 56541:56541 -p 56542:56542 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56540 --rest-port=56538 --tcp-port=56539 --discv5-udp-port=56541 --rest-address=0.0.0.0 --nat=extip:172.18.150.193 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56542 --metrics-logging=true --lightpush=true --relay=true --nodekey=30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68 --filter=true
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.83.250
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['64653', '64654', '64655', '64656', '64657']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:428 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:157 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:159 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 64653:64653 -p 64654:64654 -p 64655:64655 -p 64656:64656 -p 64657:64657 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64655 --rest-port=64653 --tcp-port=64654 --discv5-udp-port=64656 --rest-address=0.0.0.0 --nat=extip:172.18.83.250 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64657 --metrics-logging=true --lightpush=true --relay=true --nodekey=30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68 --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.83.250 waku 89cbb9923bdc470966a8312196d60ee7c79aa46fbc1d62411cf5284cda9a6ad3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 89cbb9923bdc. Setting up logs at ./log/docker/receiving_node1_2024-08-05_03-18-59__e1d0aa2a-8de8-4c51-8c68-01e29161d279__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Started container from image wakuorg/nwaku:latest. REST: 64653
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64653/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:274 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64653/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.83.250/tcp/64654/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip","/ip4/172.18.83.250/tcp/64655/ws/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"],"enrUri":"enr:-LO4QMRLmq2zWCiB2146eFzJiBFmguS1EW3nfqDmdXd7qB9CG8zTcOjG0-Eaub46YaKgXHDiFaed549kziUx8z7rvkEBgmlkgnY0gmlwhKwSU_qKbXVsdGlhZGRyc4wACgSsElP6BvyP3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CC_I6DdWRwgvyQhXdha3UyDQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:81 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-05_03-18-59__e1d0aa2a-8de8-4c51-8c68-01e29161d279__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.43.59
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['50831', '50832', '50833', '50834', '50835']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:428 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:157 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:159 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 50831:50831 -p 50832:50832 -p 50833:50833 -p 50834:50834 -p 50835:50835 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=50833 --rest-port=50831 --tcp-port=50832 --discv5-udp-port=50834 --rest-address=0.0.0.0 --nat=extip:172.18.43.59 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-LO4QMRLmq2zWCiB2146eFzJiBFmguS1EW3nfqDmdXd7qB9CG8zTcOjG0-Eaub46YaKgXHDiFaed549kziUx8z7rvkEBgmlkgnY0gmlwhKwSU_qKbXVsdGlhZGRyc4wACgSsElP6BvyP3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CC_I6DdWRwgvyQhXdha3UyDQ --lightpushnode=/ip4/172.18.83.250/tcp/64654/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.43.59 waku 07cc46cd489db9ac9353ccf5a813f955d8b366c295f5828062d327b07a6cdd8c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 07cc46cd489d. Setting up logs at ./log/docker/lightpush_node1_2024-08-05_03-18-59__e1d0aa2a-8de8-4c51-8c68-01e29161d279__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Started container from image wakuorg/go-waku:latest. REST: 50831
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50831/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QOodgL53r_rGPA6H0vLg4ao2pckDuZbxuVL-jxJz6buCcl8xreX8DNeMXqXBCqJKokVCEZ8aFk7Vds7UX999ywyGAZEgjCXSgmlkgnY0gmlwhKwRAA2Jc2VjcDI1NmsxoQLtkBDUKGVZfggh6dtBiwq7bPW2rAd2GMRHvsa8VDZRkYN0Y3CCxpCDdWRwgsaShXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/50832/p2p/16Uiu2HAmBR21vu92Djjxu8J9iiEDqLCf1o5FFkNj9MCMM7gVwxbJ","/ip4/127.0.0.1/tcp/50833/ws/p2p/16Uiu2HAmBR21vu92Djjxu8J9iiEDqLCf1o5FFkNj9MCMM7gVwxbJ","/ip4/172.17.0.13/tcp/50832/p2p/16Uiu2HAmBR21vu92Djjxu8J9iiEDqLCf1o5FFkNj9MCMM7gVwxbJ","/ip4/172.17.0.13/tcp/50833/ws/p2p/16Uiu2HAmBR21vu92Djjxu8J9iiEDqLCf1o5FFkNj9MCMM7gVwxbJ"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:50831/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.83.250/tcp/64654/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64653/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:50831/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1722827942487375616}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:50831/lightpush/v1/message. Response content: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x45d044827043e47754ba0724c67b043530bb91e4f520cb66444b8e68fa48c8f8'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:218 Stopping container with id 89cbb9923bdc
[35mDEBUG   [0m src.node.waku_node:waku_node.py:225 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:218 Stopping container with id 07cc46cd489d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:225 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/lightpush_node1_2024-08-05_03-18-59__e1d0aa2a-8de8-4c51-8c68-01e29161d279__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/receiving_node1_2024-08-05_03-18-59__e1d0aa2a-8de8-4c51-8c68-01e29161d279__wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_only_lightpush__peer_full with id: 2024-08-05_03-19-06__25708c2b-1ae7-4c01-9b3b-4184f7f7cc24
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:81 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-08-05_03-19-06__25708c2b-1ae7-4c01-9b3b-4184f7f7cc24__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.162.96
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['11707', '11708', '11709', '11710', '11711']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:428 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:157 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:159 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 11707:11707 -p 11708:11708 -p 11709:11709 -p 11710:11710 -p 11711:11711 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=11709 --rest-port=11707 --tcp-port=11708 --discv5-udp-port=11710 --rest-address=0.0.0.0 --nat=extip:172.18.162.96 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=11711 --metrics-logging=true --lightpush=true --relay=true --nodekey=30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68 --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.162.96 waku 82e1a041cabe4075481843c66c6826a85a5063c1af2dbffe2c4dc1592c73de0e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 82e1a041cabe. Setting up logs at ./log/docker/receiving_node1_2024-08-05_03-19-06__25708c2b-1ae7-4c01-9b3b-4184f7f7cc24__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Started container from image wakuorg/nwaku:latest. REST: 11707
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11707/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:274 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11707/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.162.96/tcp/11708/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip","/ip4/172.18.162.96/tcp/11709/ws/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"],"enrUri":"enr:-LO4QJulQyiGk6c8x1yCyPTFkcIXjkhudLZtB8su6DcXW0sPGagByjPOt0bLmLm5PYMsxLiBAVJWLJp6xBwKi01V9SYBgmlkgnY0gmlwhKwSomCKbXVsdGlhZGRyc4wACgSsEqJgBi293QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCLbyDdWRwgi2-hXdha3UyDQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:81 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-08-05_03-19-06__25708c2b-1ae7-4c01-9b3b-4184f7f7cc24__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.157.224
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['2769', '2770', '2771', '2772', '2773']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:428 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:157 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:159 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 2769:2769 -p 2770:2770 -p 2771:2771 -p 2772:2772 -p 2773:2773 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=2771 --rest-port=2769 --tcp-port=2770 --discv5-udp-port=2772 --rest-address=0.0.0.0 --nat=extip:172.18.157.224 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-LO4QJulQyiGk6c8x1yCyPTFkcIXjkhudLZtB8su6DcXW0sPGagByjPOt0bLmLm5PYMsxLiBAVJWLJp6xBwKi01V9SYBgmlkgnY0gmlwhKwSomCKbXVsdGlhZGRyc4wACgSsEqJgBi293QOCcnOFAAMBAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCLbyDdWRwgi2-hXdha3UyDQ --lightpushnode=/ip4/172.18.162.96/tcp/11708/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.157.224 waku 58928a75a137e980f5b2c2bde2e3f0c2ffd63c9851ff4b1ad4c99dc28f4c52d4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 58928a75a137. Setting up logs at ./log/docker/lightpush_node1_2024-08-05_03-19-06__25708c2b-1ae7-4c01-9b3b-4184f7f7cc24__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Started container from image wakuorg/go-waku:latest. REST: 2769
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2769/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QCyiVpFa3aE2kZ72-14tPeiV-yhQxizuR3gaZZlzUMYWeF0dawsZT_fqDtIlMENQckZuGfR90HD2vLMvxnNuSaOGAZEgjEMMgmlkgnY0gmlwhKwRAAmJc2VjcDI1NmsxoQKLawSSW730Dk3mBMbn2dyqlVh_AX7FicWU8gGxeLqz44N0Y3CCCtKDdWRwggrUhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/2770/p2p/16Uiu2HAm4ouJBna51Tp5RQm1439Ft2aQdg4i1icSUkmK1izHfKRU","/ip4/127.0.0.1/tcp/2771/ws/p2p/16Uiu2HAm4ouJBna51Tp5RQm1439Ft2aQdg4i1icSUkmK1izHfKRU","/ip4/172.17.0.9/tcp/2770/p2p/16Uiu2HAm4ouJBna51Tp5RQm1439Ft2aQdg4i1icSUkmK1izHfKRU","/ip4/172.17.0.9/tcp/2771/ws/p2p/16Uiu2HAm4ouJBna51Tp5RQm1439Ft2aQdg4i1icSUkmK1izHfKRU"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2769/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.162.96/tcp/11708/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11707/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2769/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1722827949919841280}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:2769/lightpush/v1/message. Response content: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0xca4b8b5a8e906a0ed059e0aeb9b1a445f5b511b6e86659202606740dee8e7c79'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:218 Stopping container with id 82e1a041cabe
[35mDEBUG   [0m src.node.waku_node:waku_node.py:225 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:218 Stopping container with id 58928a75a137
[35mDEBUG   [0m src.node.waku_node:waku_node.py:225 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/receiving_node1_2024-08-05_03-19-06__25708c2b-1ae7-4c01-9b3b-4184f7f7cc24__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/lightpush_node1_2024-08-05_03-19-06__25708c2b-1ae7-4c01-9b3b-4184f7f7cc24__wakuorg_go-waku:latest.log