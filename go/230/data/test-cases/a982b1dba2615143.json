{"uid":"a982b1dba2615143","name":"test_light_push_with_ephemeral","fullName":"tests.light_push.test_publish.TestLightPushPublish#test_light_push_with_ephemeral","historyId":"3d9e654a2bf6adc5b3a9c03e40183d1f","time":{"start":1722827875771,"stop":1722827875781,"duration":10},"status":"failed","statusMessage":"AssertionError: Ephemeral that failed: [True, False]\nassert not [True, False]","statusTrace":"tests/light_push/test_publish.py:221: in test_light_push_with_ephemeral\n    assert not failed_ephemeral, f\"Ephemeral that failed: {failed_ephemeral}\"\nE   AssertionError: Ephemeral that failed: [True, False]\nE   assert not [True, False]","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":2,"retriesStatusChange":false,"beforeStages":[{"name":"set_allure_env_variables","time":{"start":1722827478699,"stop":1722827478699,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes","time":{"start":1722827871843,"stop":1722827871843,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"common_setup","time":{"start":1722827871843,"stop":1722827871843,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail","time":{"start":1722827871843,"stop":1722827871843,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"light_push_setup","time":{"start":1722827871843,"stop":1722827871844,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_setup","time":{"start":1722827871843,"stop":1722827871843,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_id","time":{"start":1722827871843,"stop":1722827871843,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"light_push_publish_setup","time":{"start":1722827871844,"stop":1722827875770,"duration":3926},"status":"passed","steps":[{"name":"setup_first_receiving_node","time":{"start":1722827871844,"stop":1722827873213,"duration":1369},"status":"passed","steps":[{"name":"start_receiving_node","time":{"start":1722827871844,"stop":1722827873213,"duration":1369},"status":"passed","steps":[{"name":"add_node_peer","time":{"start":1722827873213,"stop":1722827873213,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"args","value":"(<tests.light_push.test_publish.TestLightPushPublish object at 0x7f430d287800>, <src.node.waku_node.WakuNode object at 0x7f430c71fe90>, [])"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"image","value":"'wakuorg/nwaku:latest'"},{"name":"node_index","value":"1"},{"name":"lightpush","value":"'true'"},{"name":"relay","value":"'true'"},{"name":"nodekey","value":"'30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68'"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"lightpush","value":"'true'"},{"name":"relay","value":"'true'"}],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"setup_first_lightpush_node","time":{"start":1722827873214,"stop":1722827875767,"duration":2553},"status":"passed","steps":[{"name":"setup_lightpush_node","time":{"start":1722827873214,"stop":1722827875766,"duration":2552},"status":"passed","steps":[{"name":"add_node_peer","time":{"start":1722827875764,"stop":1722827875766,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"args","value":"(<tests.light_push.test_publish.TestLightPushPublish object at 0x7f430d287800>, <src.node.waku_node.WakuNode object at 0x7f430c71c0b0>, ['/ip4/172.18.229.254/tcp/27414/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip'])"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"image","value":"'wakuorg/go-waku:latest'"},{"name":"node_index","value":"1"},{"name":"lightpush","value":"'true'"},{"name":"relay","value":"'false'"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"lightpush","value":"'true'"},{"name":"relay","value":"'false'"}],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"subscribe_to_pubsub_topics_via_relay","time":{"start":1722827875767,"stop":1722827875770,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node","value":"None"},{"name":"pubsub_topics","value":"None"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":7,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: Ephemeral that failed: [True, False]\nassert not [True, False]","statusTrace":"tests/light_push/test_publish.py:221: in test_light_push_with_ephemeral\n    assert not failed_ephemeral, f\"Ephemeral that failed: {failed_ephemeral}\"\nE   AssertionError: Ephemeral that failed: [True, False]\nE   assert not [True, False]","steps":[{"name":"create_message","time":{"start":1722827875771,"stop":1722827875771,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"ephemeral","value":"True"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"check_light_pushed_message_reaches_receiving_peer","time":{"start":1722827875771,"stop":1722827875775,"duration":4},"status":"broken","statusMessage":"Exception: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:18422/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x5635cca85a94c567028e4d53773c820ac5f52521c2048cf575436ae7307a5fec'\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.4/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/light_push.py\", line 122, in check_light_pushed_message_reaches_receiving_peer\n    sender.send_light_push_message(payload)\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/waku_node.py\", line 338, in send_light_push_message\n    return self._api.send_light_push_message(payload)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 57, in send_light_push_message\n    return self.rest_call(\"post\", \"lightpush/v1/message\", json.dumps(payload))\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 16, in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/base_client.py\", line 17, in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\n","steps":[{"name":"create_payload","time":{"start":1722827875771,"stop":1722827875771,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"pubsub_topic","value":"'/waku/2/rs/3/0'"},{"name":"message","value":"{'payload': 'TGlnaHQgcHVzaCB3b3JrcyEh', 'contentTopic': '/myapp/1/latest/proto', 'timestamp': 1722827875771064832, 'ephemeral': True}"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"pubsub_topic","value":"None"},{"name":"message","value":"{'payload': 'TGlnaHQgcHVzaCB3b3JrcyEh', 'contentTopic': '/myapp/1/latest/proto', 'timestamp': 1722827875771064832, 'ephemeral': True}"},{"name":"message_propagation_delay","value":"0.1"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":true,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"create_message","time":{"start":1722827875776,"stop":1722827875776,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"ephemeral","value":"False"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"check_light_pushed_message_reaches_receiving_peer","time":{"start":1722827875777,"stop":1722827875780,"duration":3},"status":"broken","statusMessage":"Exception: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:18422/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0xaa02b24262efc56a3f0c04fb45b190c274d305aac2201c43557df2a1c0f60a4a'\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.4/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/light_push.py\", line 122, in check_light_pushed_message_reaches_receiving_peer\n    sender.send_light_push_message(payload)\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/waku_node.py\", line 338, in send_light_push_message\n    return self._api.send_light_push_message(payload)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 57, in send_light_push_message\n    return self.rest_call(\"post\", \"lightpush/v1/message\", json.dumps(payload))\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 16, in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/base_client.py\", line 17, in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\n","steps":[{"name":"create_payload","time":{"start":1722827875777,"stop":1722827875777,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"pubsub_topic","value":"'/waku/2/rs/3/0'"},{"name":"message","value":"{'payload': 'TGlnaHQgcHVzaCB3b3JrcyEh', 'contentTopic': '/myapp/1/latest/proto', 'timestamp': 1722827875776464640, 'ephemeral': False}"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"pubsub_topic","value":"None"},{"name":"message","value":"{'payload': 'TGlnaHQgcHVzaCB3b3JrcyEh', 'contentTopic': '/myapp/1/latest/proto', 'timestamp': 1722827875776464640, 'ephemeral': False}"},{"name":"message_propagation_delay","value":"0.1"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":true,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"f008b161f752cdeb","name":"log","source":"f008b161f752cdeb.txt","type":"text/plain","size":38342}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":6,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"test_setup::0","time":{"start":1722827875791,"stop":1722827875793,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes::0","time":{"start":1722827875794,"stop":1722827879001,"duration":3207},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail::0","time":{"start":1722827879002,"stop":1722827879004,"duration":2},"status":"passed","steps":[],"attachments":[{"uid":"e3e2923c4a64df1f","name":"lightpush_node1_2024-08-05_03-17-51__d345904b-1856-4022-9ba5-8b2e8d337492__wakuorg_go-waku:latest.log","source":"e3e2923c4a64df1f.txt","type":"text/plain","size":56598},{"uid":"41d53712802dcf40","name":"receiving_node1_2024-08-05_03-17-51__d345904b-1856-4022-9ba5-8b2e8d337492__wakuorg_nwaku:latest.log","source":"41d53712802dcf40.txt","type":"text/plain","size":106057}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"set_allure_env_variables::0","time":{"start":1722828473927,"stop":1722828473927,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"tests.light_push"},{"name":"suite","value":"test_publish"},{"name":"subSuite","value":"TestLightPushPublish"},{"name":"host","value":"fv-az973-948"},{"name":"thread","value":"2059-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.light_push.test_publish"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"f99ac25f6401e85d","status":"failed","statusDetails":"AssertionError: Ephemeral that failed: [True, False]\nassert not [True, False]","time":{"start":1722827868269,"stop":1722827868283,"duration":14}},{"uid":"99caf6d5b0e0fc23","status":"failed","statusDetails":"AssertionError: Ephemeral that failed: [True, False]\nassert not [True, False]","time":{"start":1722827861428,"stop":1722827861442,"duration":14}}],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":5,"broken":4,"skipped":0,"passed":141,"unknown":0,"total":150},"items":[{"uid":"3ee97ee6d7088766","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/229//#testresult/3ee97ee6d7088766","status":"failed","statusDetails":"AssertionError: Ephemeral that failed: [True, False]\nassert not [True, False]","time":{"start":1722741446727,"stop":1722741446737,"duration":10}},{"uid":"18f143ce00fb99cf","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/228//#testresult/18f143ce00fb99cf","status":"failed","statusDetails":"AssertionError: Ephemeral that failed: [True, False]\nassert not [True, False]","time":{"start":1722655084945,"stop":1722655084958,"duration":13}},{"uid":"e3432f16a2c24565","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/227//#testresult/e3432f16a2c24565","status":"passed","time":{"start":1722568605892,"stop":1722568606110,"duration":218}},{"uid":"8ed614dde0cc594c","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/226//#testresult/8ed614dde0cc594c","status":"passed","time":{"start":1722482214783,"stop":1722482215007,"duration":224}},{"uid":"58b2e527423313c6","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/225//#testresult/58b2e527423313c6","status":"passed","time":{"start":1722395815598,"stop":1722395815821,"duration":223}},{"uid":"ac8f67f7bdad4834","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/224//#testresult/ac8f67f7bdad4834","status":"passed","time":{"start":1722309484722,"stop":1722309484948,"duration":226}},{"uid":"58c9db5f931afff1","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/223//#testresult/58c9db5f931afff1","status":"passed","time":{"start":1722251752935,"stop":1722251753161,"duration":226}},{"uid":"bb407090439a763b","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/221//#testresult/bb407090439a763b","status":"passed","time":{"start":1722136574120,"stop":1722136574344,"duration":224}},{"uid":"8a8e73cc60d5b21f","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/220//#testresult/8a8e73cc60d5b21f","status":"passed","time":{"start":1722050276586,"stop":1722050276808,"duration":222}},{"uid":"8babe785b0edba1e","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/219//#testresult/8babe785b0edba1e","status":"passed","time":{"start":1721963856645,"stop":1721963856864,"duration":219}},{"uid":"d16abbaeeb69da23","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/218//#testresult/d16abbaeeb69da23","status":"passed","time":{"start":1721877388355,"stop":1721877388574,"duration":219}},{"uid":"2598b92496faf07f","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/217//#testresult/2598b92496faf07f","status":"passed","time":{"start":1721790993523,"stop":1721790993747,"duration":224}},{"uid":"65f1341959b0b999","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/216//#testresult/65f1341959b0b999","status":"passed","time":{"start":1721704661657,"stop":1721704661882,"duration":225}},{"uid":"5602170cb4aa168d","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/215//#testresult/5602170cb4aa168d","status":"passed","time":{"start":1721633162379,"stop":1721633162606,"duration":227}},{"uid":"81a67eef05b8e95d","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/214//#testresult/81a67eef05b8e95d","status":"passed","time":{"start":1721618242878,"stop":1721618243104,"duration":226}},{"uid":"ac68e96667fd604e","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/213//#testresult/ac68e96667fd604e","status":"passed","time":{"start":1721531830518,"stop":1721531830738,"duration":220}},{"uid":"7904dc209ec7ecb8","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/212//#testresult/7904dc209ec7ecb8","status":"passed","time":{"start":1721445432133,"stop":1721445432360,"duration":227}},{"uid":"113d321fc479f724","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/211//#testresult/113d321fc479f724","status":"passed","time":{"start":1721359058798,"stop":1721359059017,"duration":219}},{"uid":"d8254e91ea75b8d0","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/210//#testresult/d8254e91ea75b8d0","status":"passed","time":{"start":1721290310282,"stop":1721290310504,"duration":222}},{"uid":"f32161a4b528fb28","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/209//#testresult/f32161a4b528fb28","status":"passed","time":{"start":1721272653099,"stop":1721272653319,"duration":220}}]},"tags":[]},"source":"a982b1dba2615143.json","parameterValues":[]}