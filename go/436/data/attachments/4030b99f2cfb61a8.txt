[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_message_with_ephemeral_false with id: 2025-01-19_03-11-38__bce7276e-63e8-4e97-a645-c558ccf6559b
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-01-19_03-11-38__bce7276e-63e8-4e97-a645-c558ccf6559b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.192.229
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['55650', '55651', '55652', '55653', '55654']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 55650:55650 -p 55651:55651 -p 55652:55652 -p 55653:55653 -p 55654:55654 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55652 --rest-port=55650 --tcp-port=55651 --discv5-udp-port=55653 --rest-address=0.0.0.0 --nat=extip:172.18.192.229 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fc1c0b2cff944327ebcb6ff7f8bbfe960cf15e7db1ccd6e4d151d078cc016cac --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55654 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.192.229 waku ba311857a659153703d08e67a8ff0a629087993e929a5444a3933fe3dde78d5a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ba311857a659. Setting up logs at ./log/docker/publishing_node1_2025-01-19_03-11-38__bce7276e-63e8-4e97-a645-c558ccf6559b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 55650
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 48230b519ca8. Exiting log stream.
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 47e7004cb7ab. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55650/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55650/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.192.229/tcp/55651/p2p/16Uiu2HAkz8GzJEZ2ezfXfXNefjCECbiv7qZCWCkj5RFq6fGZMN87","/ip4/172.18.192.229/tcp/55652/ws/p2p/16Uiu2HAkz8GzJEZ2ezfXfXNefjCECbiv7qZCWCkj5RFq6fGZMN87"],"enrUri":"enr:-L24QGNaazAtUj2GXarG6lWPDWvM1aZ61V0Pgj2XIhoYwtk9P5LAy5IltnJ9YsjTBRtnUa3GvVny2QV2xL_ruDqvd50CgmlkgnY0gmlwhKwSwOWKbXVsdGlhZGRyc5YACASsEsDlBtljAAoErBLA5QbZZN0DgnJzhQADAQAAiXNlY3AyNTZrMaECRdWQhO8bhBXpALQ7wl_AMSp3f752OGH8DTI8ET7PBRCDdGNwgtljg3VkcILZZYV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-01-19_03-11-38__bce7276e-63e8-4e97-a645-c558ccf6559b__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.72.194
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['58535', '58536', '58537', '58538', '58539']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 58535:58535 -p 58536:58536 -p 58537:58537 -p 58538:58538 -p 58539:58539 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=58537 --rest-port=58535 --tcp-port=58536 --discv5-udp-port=58538 --rest-address=0.0.0.0 --nat=extip:172.18.72.194 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bbdaabdaa4b9b51ffd56fbce6ecdecefe5a6cfa669eff50d2bff394cdbadb80f --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QGNaazAtUj2GXarG6lWPDWvM1aZ61V0Pgj2XIhoYwtk9P5LAy5IltnJ9YsjTBRtnUa3GvVny2QV2xL_ruDqvd50CgmlkgnY0gmlwhKwSwOWKbXVsdGlhZGRyc5YACASsEsDlBtljAAoErBLA5QbZZN0DgnJzhQADAQAAiXNlY3AyNTZrMaECRdWQhO8bhBXpALQ7wl_AMSp3f752OGH8DTI8ET7PBRCDdGNwgtljg3VkcILZZYV3YWt1MgM --storenode=/ip4/172.18.192.229/tcp/55651/p2p/16Uiu2HAkz8GzJEZ2ezfXfXNefjCECbiv7qZCWCkj5RFq6fGZMN87 --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.72.194 waku 8065e44ac9301045a4598b67fc564a9a38697c24f24a9ca8fc92fc85494be828
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 8065e44ac930. Setting up logs at ./log/docker/store_node1_2025-01-19_03-11-38__bce7276e-63e8-4e97-a645-c558ccf6559b__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 58535
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58535/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QM52upbHFnN6o90uwbxYtjf3-8zM16L3yAK8CfVSqlGuE4GY9HjtJdhatG-8BW9R2m95P2p-MuVcNsFwwI6h5FKGAZR8i2_2gmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaEDQNsfT7mu5AzmgfOoPgz8iLx_rk3xMQtoq9asQ7w5R7aDdGNwguSog3VkcILkqoV3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/58536/p2p/16Uiu2HAmH2AEeidVsrrXJrBrHiCTuTvRJ7EkJ7mZaLRTNs4t7kaq","/ip4/127.0.0.1/tcp/58537/ws/p2p/16Uiu2HAmH2AEeidVsrrXJrBrHiCTuTvRJ7EkJ7mZaLRTNs4t7kaq","/ip4/172.17.0.3/tcp/58536/p2p/16Uiu2HAmH2AEeidVsrrXJrBrHiCTuTvRJ7EkJ7mZaLRTNs4t7kaq","/ip4/172.17.0.3/tcp/58537/ws/p2p/16Uiu2HAmH2AEeidVsrrXJrBrHiCTuTvRJ7EkJ7mZaLRTNs4t7kaq"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:58535/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.192.229/tcp/55651/p2p/16Uiu2HAkz8GzJEZ2ezfXfXNefjCECbiv7qZCWCkj5RFq6fGZMN87", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55650/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:58535/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55650/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)', "ephemeral": false}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55650/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id ba311857a659
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 8065e44ac930
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2025-01-19_03-11-38__bce7276e-63e8-4e97-a645-c558ccf6559b__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2025-01-19_03-11-38__bce7276e-63e8-4e97-a645-c558ccf6559b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_message_with_ephemeral_false with id: 2025-01-19_03-11-43__66c51a14-c335-45b3-a8db-3e3d4066cc9d
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-01-19_03-11-43__66c51a14-c335-45b3-a8db-3e3d4066cc9d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.61.106
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['39979', '39980', '39981', '39982', '39983']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 39979:39979 -p 39980:39980 -p 39981:39981 -p 39982:39982 -p 39983:39983 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39981 --rest-port=39979 --tcp-port=39980 --discv5-udp-port=39982 --rest-address=0.0.0.0 --nat=extip:172.18.61.106 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b6d7a14f1dad0c2f958adcea5aec5840ea5c68734e2a5de6af5a13fd00dfb05b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39983 --metrics-logging=true --store=true --relay=true
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container ba311857a659. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.61.106 waku 0f387ddc586cdd6af46ab22d32aea8d7a47a31e8cc4b06970772432d1b28acee
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 0f387ddc586c. Setting up logs at ./log/docker/publishing_node1_2025-01-19_03-11-43__66c51a14-c335-45b3-a8db-3e3d4066cc9d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 39979
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 8065e44ac930. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39979/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39979/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.61.106/tcp/39980/p2p/16Uiu2HAmNY8YjfaoDgTTy2WPooEn71goZfFYYDydqBzRK8VBNo9n","/ip4/172.18.61.106/tcp/39981/ws/p2p/16Uiu2HAmNY8YjfaoDgTTy2WPooEn71goZfFYYDydqBzRK8VBNo9n"],"enrUri":"enr:-L24QIvt0y8rV3hzrr0F3wsm-d50NcAvn0SGa2-byNpiiJ-eXdyt12RpdNq0SmnhpisMo9njezZ9qdbKf6rXsyzkMNMCgmlkgnY0gmlwhKwSPWqKbXVsdGlhZGRyc5YACASsEj1qBpwsAAoErBI9agacLd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDktMSh12qWXiYuzXZUa1xl33ENOGKNHVsqU0WzDk_dp2DdGNwgpwsg3VkcIKcLoV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-01-19_03-11-43__66c51a14-c335-45b3-a8db-3e3d4066cc9d__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.26.98
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['27797', '27798', '27799', '27800', '27801']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 27797:27797 -p 27798:27798 -p 27799:27799 -p 27800:27800 -p 27801:27801 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=27799 --rest-port=27797 --tcp-port=27798 --discv5-udp-port=27800 --rest-address=0.0.0.0 --nat=extip:172.18.26.98 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4f0186e6c6a5407613209acbf092e7ba9b4cb8e4ace33344f1ac8cd3eeede4d3 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QIvt0y8rV3hzrr0F3wsm-d50NcAvn0SGa2-byNpiiJ-eXdyt12RpdNq0SmnhpisMo9njezZ9qdbKf6rXsyzkMNMCgmlkgnY0gmlwhKwSPWqKbXVsdGlhZGRyc5YACASsEj1qBpwsAAoErBI9agacLd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDktMSh12qWXiYuzXZUa1xl33ENOGKNHVsqU0WzDk_dp2DdGNwgpwsg3VkcIKcLoV3YWt1MgM --storenode=/ip4/172.18.61.106/tcp/39980/p2p/16Uiu2HAmNY8YjfaoDgTTy2WPooEn71goZfFYYDydqBzRK8VBNo9n --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.26.98 waku 358415f7181898c562796a95a572032d12d5aff69752b909ff538f38948d14b6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 358415f71818. Setting up logs at ./log/docker/store_node1_2025-01-19_03-11-43__66c51a14-c335-45b3-a8db-3e3d4066cc9d__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 27797
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27797/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QF6s691-vnnG2djAtRIlJ0OwB7EcOW68U9zfeUF-vWv9K4lYMVr1rDKCp8alj9Zia1kbfErFyjDgzl243PBE_A2GAZR8i3_ngmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaECHFrJXfI4JV_6JY-NbENE_XZCOGCKY9FCgtRAtuNyAJ6DdGNwgmyWg3VkcIJsmIV3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/27798/p2p/16Uiu2HAkwLMgqY7xxfd89Qn87A1Q6zVdC2D7fJtaLJcZma2huxZb","/ip4/127.0.0.1/tcp/27799/ws/p2p/16Uiu2HAkwLMgqY7xxfd89Qn87A1Q6zVdC2D7fJtaLJcZma2huxZb","/ip4/172.17.0.3/tcp/27798/p2p/16Uiu2HAkwLMgqY7xxfd89Qn87A1Q6zVdC2D7fJtaLJcZma2huxZb","/ip4/172.17.0.3/tcp/27799/ws/p2p/16Uiu2HAkwLMgqY7xxfd89Qn87A1Q6zVdC2D7fJtaLJcZma2huxZb"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27797/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.61.106/tcp/39980/p2p/16Uiu2HAmNY8YjfaoDgTTy2WPooEn71goZfFYYDydqBzRK8VBNo9n", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39979/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27797/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39979/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)', "ephemeral": false}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39979/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 0f387ddc586c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 358415f71818
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2025-01-19_03-11-43__66c51a14-c335-45b3-a8db-3e3d4066cc9d__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2025-01-19_03-11-43__66c51a14-c335-45b3-a8db-3e3d4066cc9d__wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_message_with_ephemeral_false with id: 2025-01-19_03-11-47__f7d81231-ab45-49c3-a0be-9ebe11647b65
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-01-19_03-11-47__f7d81231-ab45-49c3-a0be-9ebe11647b65__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.114.131
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['8436', '8437', '8438', '8439', '8440']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 8436:8436 -p 8437:8437 -p 8438:8438 -p 8439:8439 -p 8440:8440 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8438 --rest-port=8436 --tcp-port=8437 --discv5-udp-port=8439 --rest-address=0.0.0.0 --nat=extip:172.18.114.131 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e9bdb7f16cce0485efc8bfebef2ef7db67eecb2cfc2d7e2e1515f194df9bfa0f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8440 --metrics-logging=true --store=true --relay=true
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 0f387ddc586c. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.114.131 waku 2f733823dd045e33bc8de5e1078b9e8c712b1808ee69360bf95bcdb1a40d7ffb
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 2f733823dd04. Setting up logs at ./log/docker/publishing_node1_2025-01-19_03-11-47__f7d81231-ab45-49c3-a0be-9ebe11647b65__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 8436
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 358415f71818. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8436/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8436/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.114.131/tcp/8437/p2p/16Uiu2HAmADDvhXvEKbKafKBoKwfvvQuNSEnqyXVhsFaGjwUBtFWk","/ip4/172.18.114.131/tcp/8438/ws/p2p/16Uiu2HAmADDvhXvEKbKafKBoKwfvvQuNSEnqyXVhsFaGjwUBtFWk"],"enrUri":"enr:-L24QBqyA3MeK5i3difOAtna1XTKJo8_UMV9Hyz2zvnHROCla7MhdS9TFz1B8jxFUyOxBmPrQoZNDcBxN1cvx2yk0SoCgmlkgnY0gmlwhKwScoOKbXVsdGlhZGRyc5YACASsEnKDBiD1AAoErBJygwYg9t0DgnJzhQADAQAAiXNlY3AyNTZrMaEC267gJeZc_9g4YHiQrrr294k0jG8HNnVD5gWXyBbDeq2DdGNwgiD1g3VkcIIg94V3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-01-19_03-11-47__f7d81231-ab45-49c3-a0be-9ebe11647b65__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.188.177
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['11217', '11218', '11219', '11220', '11221']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 11217:11217 -p 11218:11218 -p 11219:11219 -p 11220:11220 -p 11221:11221 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=11219 --rest-port=11217 --tcp-port=11218 --discv5-udp-port=11220 --rest-address=0.0.0.0 --nat=extip:172.18.188.177 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5f489d64b3f8f17ddabcff8d1eeff9c377b9c28c77f49ee655a489db6fbe4bdd --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QBqyA3MeK5i3difOAtna1XTKJo8_UMV9Hyz2zvnHROCla7MhdS9TFz1B8jxFUyOxBmPrQoZNDcBxN1cvx2yk0SoCgmlkgnY0gmlwhKwScoOKbXVsdGlhZGRyc5YACASsEnKDBiD1AAoErBJygwYg9t0DgnJzhQADAQAAiXNlY3AyNTZrMaEC267gJeZc_9g4YHiQrrr294k0jG8HNnVD5gWXyBbDeq2DdGNwgiD1g3VkcIIg94V3YWt1MgM --storenode=/ip4/172.18.114.131/tcp/8437/p2p/16Uiu2HAmADDvhXvEKbKafKBoKwfvvQuNSEnqyXVhsFaGjwUBtFWk --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.188.177 waku 5ce5d02c90acc50b33eddd3d0f3c48eb9b23008018f6c649e822774b67189025
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 5ce5d02c90ac. Setting up logs at ./log/docker/store_node1_2025-01-19_03-11-47__f7d81231-ab45-49c3-a0be-9ebe11647b65__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 11217
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11217/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QE8sz-f3Ki1zhymH92mj7NMwFWCNRIhtd6k3zDNRp1-jcVE8sajZiiGCUTGN9yRjE5NOQQy_vunnGEtqEyEgl4KGAZR8i5AjgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaECvqDT7x27qK94-eKGo-55zGtIaGQr3pJUmxlTZPPPfomDdGNwgivSg3VkcIIr1IV3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/11218/p2p/16Uiu2HAm8FogNHPGAAkUs6ctjVWceoigFfzKqrVrV6M4gsiDEcn4","/ip4/127.0.0.1/tcp/11219/ws/p2p/16Uiu2HAm8FogNHPGAAkUs6ctjVWceoigFfzKqrVrV6M4gsiDEcn4","/ip4/172.17.0.3/tcp/11218/p2p/16Uiu2HAm8FogNHPGAAkUs6ctjVWceoigFfzKqrVrV6M4gsiDEcn4","/ip4/172.17.0.3/tcp/11219/ws/p2p/16Uiu2HAm8FogNHPGAAkUs6ctjVWceoigFfzKqrVrV6M4gsiDEcn4"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11217/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.114.131/tcp/8437/p2p/16Uiu2HAmADDvhXvEKbKafKBoKwfvvQuNSEnqyXVhsFaGjwUBtFWk", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8436/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11217/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8436/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)', "ephemeral": false}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8436/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 2f733823dd04
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 5ce5d02c90ac
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2025-01-19_03-11-47__f7d81231-ab45-49c3-a0be-9ebe11647b65__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2025-01-19_03-11-47__f7d81231-ab45-49c3-a0be-9ebe11647b65__wakuorg_nwaku:latest.log