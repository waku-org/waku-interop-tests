[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_node_not_connected_directly_to_relaying_node with id: 2024-09-04_03-11-02__ac9d13f8-3b1a-4122-9a85-0625745139e3
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-04_03-11-02__ac9d13f8-3b1a-4122-9a85-0625745139e3__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-04_03-11-02__ac9d13f8-3b1a-4122-9a85-0625745139e3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-09-04_03-11-02__ac9d13f8-3b1a-4122-9a85-0625745139e3__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:28 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.29.230
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['62006', '62007', '62008', '62009', '62010']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 62006:62006 -p 62007:62007 -p 62008:62008 -p 62009:62009 -p 62010:62010 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=62008 --rest-port=62006 --tcp-port=62007 --discv5-udp-port=62009 --rest-address=0.0.0.0 --nat=extip:172.18.29.230 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3143c0f93e3fddca6b213dd1cf1bb7ad947deedec459438a17b0fe71562d0fbd --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.29.230 waku 02c1f5169127afdd2293d0cb40f2f36db31e5cfb12f05d86fed4f589fbf7b86f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 02c1f5169127. Setting up logs at ./log/docker/node1_2024-09-04_03-11-02__ac9d13f8-3b1a-4122-9a85-0625745139e3__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 62006
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62006/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QFHuUYJq1cbgYHhHbu_QaCwnJBnJRvQTS1CEQFUJIrz_HFbt8MVUrU3V04yD8B9Q8wc9tMom_AGfmgNYLjnjz0eGAZG7A60ugmlkgnY0gmlwhKwRAAWJc2VjcDI1NmsxoQKvhpal_tuOUOAZvatdNQT0jDYyz5rbYJBoZRjWFEEOMYN0Y3CC8jeDdWRwgvI5hXdha3UyAQ","listenAddresses":["/ip4/127.0.0.1/tcp/62007/p2p/16Uiu2HAm7ErMi1Y6gfZAuzufu1cPDF1uqt5LqcRTavLHyV3acgqE","/ip4/127.0.0.1/tcp/62008/ws/p2p/16Uiu2HAm7ErMi1Y6gfZAuzufu1cPDF1uqt5LqcRTavLHyV3acgqE","/ip4/172.17.0.5/tcp/62007/p2p/16Uiu2HAm7ErMi1Y6gfZAuzufu1cPDF1uqt5LqcRTavLHyV3acgqE","/ip4/172.17.0.5/tcp/62008/ws/p2p/16Uiu2HAm7ErMi1Y6gfZAuzufu1cPDF1uqt5LqcRTavLHyV3acgqE"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.223.96
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['54161', '54162', '54163', '54164', '54165']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 54161:54161 -p 54162:54162 -p 54163:54163 -p 54164:54164 -p 54165:54165 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=54163 --rest-port=54161 --tcp-port=54162 --discv5-udp-port=54164 --rest-address=0.0.0.0 --nat=extip:172.18.223.96 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fa02af7c5fa60380563cefe54feebec667b2f9ddad14b1036527b7ec6aee8edd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=54165 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-Ji4QFHuUYJq1cbgYHhHbu_QaCwnJBnJRvQTS1CEQFUJIrz_HFbt8MVUrU3V04yD8B9Q8wc9tMom_AGfmgNYLjnjz0eGAZG7A60ugmlkgnY0gmlwhKwRAAWJc2VjcDI1NmsxoQKvhpal_tuOUOAZvatdNQT0jDYyz5rbYJBoZRjWFEEOMYN0Y3CC8jeDdWRwgvI5hXdha3UyAQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.223.96 waku 0019c40026937c90ffe39b62e0c528378a18357f9398d5267c4712c147592664
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 0019c4002693. Setting up logs at ./log/docker/node2_2024-09-04_03-11-02__ac9d13f8-3b1a-4122-9a85-0625745139e3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 54161
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54161/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54161/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.223.96/tcp/54162/p2p/16Uiu2HAmDwkVm9k4qDWbVZm55Q2MjQBVf7PmuQDb2VvQyh8uZEcn","/ip4/172.18.223.96/tcp/54163/ws/p2p/16Uiu2HAmDwkVm9k4qDWbVZm55Q2MjQBVf7PmuQDb2VvQyh8uZEcn"],"enrUri":"enr:-LO4QMbDsAzGFNDe62IpuO1I2tqUh65W3vt1iX_-1xknnmbbRIxD1I7lQq7v9L2loVdQ9QOEZn3RbDCnkwRg_0vH5gYBgmlkgnY0gmlwhKwS32CKbXVsdGlhZGRyc4wACgSsEt9gBtOT3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMTJuVf3J2ChfCFGL-ayfYqcjmvT8HHyCs3MDCbfzkNj4N0Y3CC05KDdWRwgtOUhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.56.66
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['21340', '21341', '21342', '21343', '21344']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 21340:21340 -p 21341:21341 -p 21342:21342 -p 21343:21343 -p 21344:21344 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=21342 --rest-port=21340 --tcp-port=21341 --discv5-udp-port=21343 --rest-address=0.0.0.0 --nat=extip:172.18.56.66 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=525aed18b3ecfb5cdcce6ab8e2cbfeecfaa4edef66bedd8ef1d2a0c3ae65c8c8 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --storenode=/ip4/172.18.223.96/tcp/54162/p2p/16Uiu2HAmDwkVm9k4qDWbVZm55Q2MjQBVf7PmuQDb2VvQyh8uZEcn --discv5-bootstrap-node=enr:-LO4QMbDsAzGFNDe62IpuO1I2tqUh65W3vt1iX_-1xknnmbbRIxD1I7lQq7v9L2loVdQ9QOEZn3RbDCnkwRg_0vH5gYBgmlkgnY0gmlwhKwS32CKbXVsdGlhZGRyc4wACgSsEt9gBtOT3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMTJuVf3J2ChfCFGL-ayfYqcjmvT8HHyCs3MDCbfzkNj4N0Y3CC05KDdWRwgtOUhXdha3UyAw
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.56.66 waku 47accb83f2600bbd026f25226a691a6aeee52e789eb548557caf685fdec9bad0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 47accb83f260. Setting up logs at ./log/docker/node3_2024-09-04_03-11-02__ac9d13f8-3b1a-4122-9a85-0625745139e3__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 21340
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21340/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QJQMihAVpdqRq3JQB21rnFGfXQhqkblnwvBOGk0bGCTTA-Xp4mST0v-_VG6YuzX8tY3g0lLTYDotwEeGvcyfUNiGAZG7A7hZgmlkgnY0gmlwhKwRAAqJc2VjcDI1NmsxoQMEXNW8OnGg8vuu4oMStjWFAmfI_0FGLlRFqfrKgefjCoN0Y3CCU12DdWRwglNfhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/21341/p2p/16Uiu2HAmCx25tTSvYuHFRep8zR9d8rTn9zfRdy1GSRrKm6kEGW41","/ip4/127.0.0.1/tcp/21342/ws/p2p/16Uiu2HAmCx25tTSvYuHFRep8zR9d8rTn9zfRdy1GSRrKm6kEGW41","/ip4/172.17.0.10/tcp/21341/p2p/16Uiu2HAmCx25tTSvYuHFRep8zR9d8rTn9zfRdy1GSRrKm6kEGW41","/ip4/172.17.0.10/tcp/21342/ws/p2p/16Uiu2HAmCx25tTSvYuHFRep8zR9d8rTn9zfRdy1GSRrKm6kEGW41"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62006/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54161/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62006/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62006/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62006/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62006/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAmDwkVm9k4qDWbVZm55Q2MjQBVf7PmuQDb2VvQyh8uZEcn","multiaddrs":["/ip4/172.18.223.96/tcp/54162/p2p/16Uiu2HAmDwkVm9k4qDWbVZm55Q2MjQBVf7PmuQDb2VvQyh8uZEcn","/ip4/172.18.223.96/tcp/54163/ws/p2p/16Uiu2HAmDwkVm9k4qDWbVZm55Q2MjQBVf7PmuQDb2VvQyh8uZEcn"],"protocols":["/vac/waku/store-query/3.0.0","/vac/waku/store/2.0.0-beta4","/vac/waku/relay/2.0.0"],"connected":true,"pubsubTopics":["/waku/2/rs/3/0","/waku/2/rs/3/1"]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54161/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.5/tcp/62007/p2p/16Uiu2HAm7ErMi1Y6gfZAuzufu1cPDF1uqt5LqcRTavLHyV3acgqE","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"},{"multiaddr":"/ip4/172.17.0.10/tcp/21341/p2p/16Uiu2HAmCx25tTSvYuHFRep8zR9d8rTn9zfRdy1GSRrKm6kEGW41","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m src.steps.store:store.py:129 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62006/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:217 Checking that peer wakuorg/go-waku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21340/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-filter%2Fproto&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"5a5d02dd527d430bdde9e70efdc65572fbad2ede7776ee8a11c2025243b58fef","status_code":200,"status_desc":"OK","messages":[{"message_hash":"lL91UgZi+Vi+wFTKxbt6FJQibb0DrCZ9Jl21vvSYyYI="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 02c1f5169127
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 0019c4002693
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 47accb83f260
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.