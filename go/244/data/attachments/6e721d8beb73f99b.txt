[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_subscribe_with_invalid_pubsub_topic_format with id: 2024-08-16_12-09-46__c2f5416c-c448-4add-87b9-822a8a466c20
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node1_2024-08-16_12-09-46__c2f5416c-c448-4add-87b9-822a8a466c20__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.152.130
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['26289', '26290', '26291', '26292', '26293']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 26289:26289 -p 26290:26290 -p 26291:26291 -p 26292:26292 -p 26293:26293 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26291 --rest-port=26289 --tcp-port=26290 --discv5-udp-port=26292 --rest-address=0.0.0.0 --nat=extip:172.18.152.130 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cb663cc8c4ad150a0b0cd5d86a31c239baf4a493aef1e3360902fcf0e6b47c0c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26293 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.152.130 waku 0d08849976f691f4d6ba9adf8e1e0bf4f919d99e91ef8c4ce2af47243561e186
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 0d08849976f6. Setting up logs at ./log/docker/node1_2024-08-16_12-09-46__c2f5416c-c448-4add-87b9-822a8a466c20__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 26289
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26289/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26289/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.152.130/tcp/26290/p2p/16Uiu2HAm6BxEk5BUGzuCsKK2q2yFf9hRbXihnXAibQTgPWQnCPgB","/ip4/172.18.152.130/tcp/26291/ws/p2p/16Uiu2HAm6BxEk5BUGzuCsKK2q2yFf9hRbXihnXAibQTgPWQnCPgB"],"enrUri":"enr:-LO4QMS-dqmNVPZdq9yhCTo8TYkTSggh02DF9clDzOehK4fkH4SuUtBtNVVO7Jhb7SH-hJoZ34l8vWoMBPYhyTvsKU8BgmlkgnY0gmlwhKwSmIKKbXVsdGlhZGRyc4wACgSsEpiCBmaz3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKf7M68v5IAlV8Ahs3u0oxCDprEpLk7eAHa8ribf5NKIIN0Y3CCZrKDdWRwgma0hXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node2_2024-08-16_12-09-46__c2f5416c-c448-4add-87b9-822a8a466c20__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.249.194
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['25200', '25201', '25202', '25203', '25204']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 25200:25200 -p 25201:25201 -p 25202:25202 -p 25203:25203 -p 25204:25204 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=25202 --rest-port=25200 --tcp-port=25201 --discv5-udp-port=25203 --rest-address=0.0.0.0 --nat=extip:172.18.249.194 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c8e2ccecfba94a65ebe1fbabbcaf9dcd99f611da37e1c3bf24faeea12a041aad --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-LO4QMS-dqmNVPZdq9yhCTo8TYkTSggh02DF9clDzOehK4fkH4SuUtBtNVVO7Jhb7SH-hJoZ34l8vWoMBPYhyTvsKU8BgmlkgnY0gmlwhKwSmIKKbXVsdGlhZGRyc4wACgSsEpiCBmaz3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKf7M68v5IAlV8Ahs3u0oxCDprEpLk7eAHa8ribf5NKIIN0Y3CCZrKDdWRwgma0hXdha3UyBQ --filternode=/ip4/172.18.152.130/tcp/26290/p2p/16Uiu2HAm6BxEk5BUGzuCsKK2q2yFf9hRbXihnXAibQTgPWQnCPgB
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.249.194 waku 5f51201c46ff7adce2aa54da57ce14e19eef0a04355edb77c614d5a4e026a7db
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 5f51201c46ff. Setting up logs at ./log/docker/node2_2024-08-16_12-09-46__c2f5416c-c448-4add-87b9-822a8a466c20__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/go-waku:latest. REST: 25200
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25200/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QAhWny9Ci73oBT9b-7NA6AwO67Ka32gFoLzMpmiAXJHGSqO1zsypSAdHSd6_NFUOYk1h2cpuYbaTJ1RabLR7TLmGAZFbGA5dgmlkgnY0gmlwhKwRAAWJc2VjcDI1NmsxoQI6H7yH8xv7GwQF8Bdkjg_SPChShosJtcoeyMNvAcjLKoN0Y3CCYnGDdWRwgmJzhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/25201/p2p/16Uiu2HAkyLZhE3JMP4QsGeC81RUS5hVV5TVLPH6Mkq7LgQGLteAd","/ip4/127.0.0.1/tcp/25202/ws/p2p/16Uiu2HAkyLZhE3JMP4QsGeC81RUS5hVV5TVLPH6Mkq7LgQGLteAd","/ip4/172.17.0.5/tcp/25201/p2p/16Uiu2HAkyLZhE3JMP4QsGeC81RUS5hVV5TVLPH6Mkq7LgQGLteAd","/ip4/172.17.0.5/tcp/25202/ws/p2p/16Uiu2HAkyLZhE3JMP4QsGeC81RUS5hVV5TVLPH6Mkq7LgQGLteAd"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25200/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.152.130/tcp/26290/p2p/16Uiu2HAm6BxEk5BUGzuCsKK2q2yFf9hRbXihnXAibQTgPWQnCPgB", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26289/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25200/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "283f2139-f827-4ac3-b512-edf7a48c0e95", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"283f2139-f827-4ac3-b512-edf7a48c0e95","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25200/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": ["/waku/2/rs/3/1"]}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:25200/filter/v2/subscriptions. Response content: b''
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 0d08849976f6
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 5f51201c46ff
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.