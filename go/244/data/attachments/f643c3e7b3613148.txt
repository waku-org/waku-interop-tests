[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_relay_receiving_node_not_connected_directly_to_lightpushing_node with id: 2024-08-16_12-07-12__d3d9cf0a-b3af-4526-8ebd-c0760e21ef6b
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node1_2024-08-16_12-07-12__d3d9cf0a-b3af-4526-8ebd-c0760e21ef6b__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node2_2024-08-16_12-07-12__d3d9cf0a-b3af-4526-8ebd-c0760e21ef6b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node3_2024-08-16_12-07-12__d3d9cf0a-b3af-4526-8ebd-c0760e21ef6b__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:28 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.204.196
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['16288', '16289', '16290', '16291', '16292']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 16288:16288 -p 16289:16289 -p 16290:16290 -p 16291:16291 -p 16292:16292 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=16290 --rest-port=16288 --tcp-port=16289 --discv5-udp-port=16291 --rest-address=0.0.0.0 --nat=extip:172.18.204.196 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5aa85291e9404967c8e53e91dbfe3af6ab5d6b2be5ff7a97bdf21caa5f504ef0 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.204.196 waku 1f2c6acb1799cd354f91101893a9b5bbd7c67561062580983774b6d2dd04d7b4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 1f2c6acb1799. Setting up logs at ./log/docker/node1_2024-08-16_12-07-12__d3d9cf0a-b3af-4526-8ebd-c0760e21ef6b__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/go-waku:latest. REST: 16288
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16288/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QMitcfrDg_hUn2QsaosF5WrCepolPRrx5czP68KsgpFzQyKElQEQ_-gKRU25pisFpRL5ZucNaPbSuEj7XH7rWNGGAZFbFa7KgmlkgnY0gmlwhKwRAAOJc2VjcDI1NmsxoQKRTDIqqmOG4tfCJcp45BEY7GXJe7Y3zkQQ7-kuoY37eIN0Y3CCP6GDdWRwgj-jhXdha3UyCQ","listenAddresses":["/ip4/127.0.0.1/tcp/16289/p2p/16Uiu2HAm5CrV3M862S1CUv5Etvd4J3zwMSBkSgPZWECrxXypMe6K","/ip4/127.0.0.1/tcp/16290/ws/p2p/16Uiu2HAm5CrV3M862S1CUv5Etvd4J3zwMSBkSgPZWECrxXypMe6K","/ip4/172.17.0.3/tcp/16289/p2p/16Uiu2HAm5CrV3M862S1CUv5Etvd4J3zwMSBkSgPZWECrxXypMe6K","/ip4/172.17.0.3/tcp/16290/ws/p2p/16Uiu2HAm5CrV3M862S1CUv5Etvd4J3zwMSBkSgPZWECrxXypMe6K"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.136.181
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['27666', '27667', '27668', '27669', '27670']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 27666:27666 -p 27667:27667 -p 27668:27668 -p 27669:27669 -p 27670:27670 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27668 --rest-port=27666 --tcp-port=27667 --discv5-udp-port=27669 --rest-address=0.0.0.0 --nat=extip:172.18.136.181 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5e86366e7c31efba56be26ebde8d875ba4eb84c06c7af9ba0582af60a890e0ef --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27670 --metrics-logging=true --lightpush=true --relay=true --discv5-bootstrap-node=enr:-Ji4QMitcfrDg_hUn2QsaosF5WrCepolPRrx5czP68KsgpFzQyKElQEQ_-gKRU25pisFpRL5ZucNaPbSuEj7XH7rWNGGAZFbFa7KgmlkgnY0gmlwhKwRAAOJc2VjcDI1NmsxoQKRTDIqqmOG4tfCJcp45BEY7GXJe7Y3zkQQ7-kuoY37eIN0Y3CCP6GDdWRwgj-jhXdha3UyCQ --lightpushnode=/ip4/172.18.204.196/tcp/16289/p2p/16Uiu2HAm5CrV3M862S1CUv5Etvd4J3zwMSBkSgPZWECrxXypMe6K
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.136.181 waku 2177c07857b4f5114b7899b4e2783d5e33b3b2c0d7b5684c009eafa74b0916aa
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 2177c07857b4. Setting up logs at ./log/docker/node2_2024-08-16_12-07-12__d3d9cf0a-b3af-4526-8ebd-c0760e21ef6b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 27666
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27666/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27666/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.136.181/tcp/27667/p2p/16Uiu2HAmGDzCd2xVR41uaoYC5rBSjAJXrAp9SYkUqSn4eShst1E9","/ip4/172.18.136.181/tcp/27668/ws/p2p/16Uiu2HAmGDzCd2xVR41uaoYC5rBSjAJXrAp9SYkUqSn4eShst1E9"],"enrUri":"enr:-LO4QFl7WHnzNO6RyoIuuNBoyBwOqO6ydwWcW5eZv9gigQKdLagW7oDuyytdxuosFwrzrIS4j1MqsbRIaZhquQU2axIBgmlkgnY0gmlwhKwSiLWKbXVsdGlhZGRyc4wACgSsEoi1BmwU3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM1Bw756yxiKMRmPtD2MVqbYWc60VGFFq4e6nu-wE8Q0oN0Y3CCbBODdWRwgmwVhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.220.39
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['32570', '32571', '32572', '32573', '32574']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 32570:32570 -p 32571:32571 -p 32572:32572 -p 32573:32573 -p 32574:32574 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=32572 --rest-port=32570 --tcp-port=32571 --discv5-udp-port=32573 --rest-address=0.0.0.0 --nat=extip:172.18.220.39 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=afe67ba9b4ecf1debad0d5f83cecff488cf4a67cba4b3d55b4f46c384addeb32 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --discv5-bootstrap-node=enr:-LO4QFl7WHnzNO6RyoIuuNBoyBwOqO6ydwWcW5eZv9gigQKdLagW7oDuyytdxuosFwrzrIS4j1MqsbRIaZhquQU2axIBgmlkgnY0gmlwhKwSiLWKbXVsdGlhZGRyc4wACgSsEoi1BmwU3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM1Bw756yxiKMRmPtD2MVqbYWc60VGFFq4e6nu-wE8Q0oN0Y3CCbBODdWRwgmwVhXdha3UyCQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.220.39 waku 4e05644c90c50a280516b249bbee39c0dc671d031b4a011441f802ebe5f98ec8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 4e05644c90c5. Setting up logs at ./log/docker/node3_2024-08-16_12-07-12__d3d9cf0a-b3af-4526-8ebd-c0760e21ef6b__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/go-waku:latest. REST: 32570
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32570/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QJUahuuaS0Ys23I7Gsh9AkLCeZyDap-ZlUVyrasoet4ucGLuz59erqs1KLvWw4X6Dsi9wDgjwjfOi5lq2J6qVCaGAZFbFbragmlkgnY0gmlwhKwRAAeJc2VjcDI1NmsxoQL8nVETn0hvVwfYAQje-0fV06mnnG4uuoE0UJ7R_NFW6IN0Y3CCfzuDdWRwgn89hXdha3UyAQ","listenAddresses":["/ip4/127.0.0.1/tcp/32571/p2p/16Uiu2HAmCRmrLoBVAjv5BR6LyLas1i27U5mtCDHHJnCTQiaVYQ47","/ip4/127.0.0.1/tcp/32572/ws/p2p/16Uiu2HAmCRmrLoBVAjv5BR6LyLas1i27U5mtCDHHJnCTQiaVYQ47","/ip4/172.17.0.7/tcp/32571/p2p/16Uiu2HAmCRmrLoBVAjv5BR6LyLas1i27U5mtCDHHJnCTQiaVYQ47","/ip4/172.17.0.7/tcp/32572/ws/p2p/16Uiu2HAmCRmrLoBVAjv5BR6LyLas1i27U5mtCDHHJnCTQiaVYQ47"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16288/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27666/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32570/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16288/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16288/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16288/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAmGDzCd2xVR41uaoYC5rBSjAJXrAp9SYkUqSn4eShst1E9","multiaddrs":["/ip4/172.18.136.181/tcp/27667/p2p/16Uiu2HAmGDzCd2xVR41uaoYC5rBSjAJXrAp9SYkUqSn4eShst1E9","/ip4/172.18.136.181/tcp/27668/ws/p2p/16Uiu2HAmGDzCd2xVR41uaoYC5rBSjAJXrAp9SYkUqSn4eShst1E9"],"protocols":["/vac/waku/relay/2.0.0","/vac/waku/lightpush/2.0.0-beta1"],"connected":true,"pubsubTopics":["/waku/2/rs/3/1","/waku/2/rs/3/0"]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27666/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.3/tcp/16289/p2p/16Uiu2HAm5CrV3M862S1CUv5Etvd4J3zwMSBkSgPZWECrxXypMe6K","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"},{"multiaddr":"/ip4/172.17.0.7/tcp/32571/p2p/16Uiu2HAmCRmrLoBVAjv5BR6LyLas1i27U5mtCDHHJnCTQiaVYQ47","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32570/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAmGDzCd2xVR41uaoYC5rBSjAJXrAp9SYkUqSn4eShst1E9","multiaddrs":["/ip4/172.18.136.181/tcp/27667/p2p/16Uiu2HAmGDzCd2xVR41uaoYC5rBSjAJXrAp9SYkUqSn4eShst1E9","/ip4/172.18.136.181/tcp/27668/ws/p2p/16Uiu2HAmGDzCd2xVR41uaoYC5rBSjAJXrAp9SYkUqSn4eShst1E9"],"protocols":["/vac/waku/relay/2.0.0","/vac/waku/lightpush/2.0.0-beta1"],"connected":true,"pubsubTopics":["/waku/2/rs/3/0","/waku/2/rs/3/1"]}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16288/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1723810069512018176}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/go-waku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32570/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1723810069512018176,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 1f2c6acb1799
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 2177c07857b4
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 4e05644c90c5
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.