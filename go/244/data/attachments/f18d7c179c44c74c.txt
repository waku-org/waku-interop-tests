[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_get_peers_after_node1_was_restarted with id: 2024-08-16_12-14-34__fa4b33b9-8182-45f8-b01e-99ee5b2904df
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node1_2024-08-16_12-14-34__fa4b33b9-8182-45f8-b01e-99ee5b2904df__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.98.120
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['13988', '13989', '13990', '13991', '13992']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 13988:13988 -p 13989:13989 -p 13990:13990 -p 13991:13991 -p 13992:13992 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=13990 --rest-port=13988 --tcp-port=13989 --discv5-udp-port=13991 --rest-address=0.0.0.0 --nat=extip:172.18.98.120 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0d47d1695ddfe29ec7dfeaaefe8451c36ed3ddbe5ecd4c0ed6cb79be53ef63a9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=13992 --metrics-logging=true --relay=true --relay-peer-exchange=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.98.120 waku 2dc5e6a804b07a09d8607cf2acf8b77ffd8a1fda9f5fca42209dc5e0f244a688
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 2dc5e6a804b0. Setting up logs at ./log/docker/node1_2024-08-16_12-14-34__fa4b33b9-8182-45f8-b01e-99ee5b2904df__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 13988
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13988/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13988/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.98.120/tcp/13989/p2p/16Uiu2HAmVmEz5xFejHLfJHJwU2CyU3tZAw9BCBR6A3vVsV6B14TC","/ip4/172.18.98.120/tcp/13990/ws/p2p/16Uiu2HAmVmEz5xFejHLfJHJwU2CyU3tZAw9BCBR6A3vVsV6B14TC"],"enrUri":"enr:-LO4QBv9recPr07pz7ExwPYKUqVtr7lS9fbZWYspbF3DGEIabzYjRzYvuZwQLwPEUibgCMmPh2SZKSH9iUnIgYVp41QBgmlkgnY0gmlwhKwSYniKbXVsdGlhZGRyc4wACgSsEmJ4Bjam3QOCcnOFAAMBAACJc2VjcDI1NmsxoQP-MLW1A72OEpOoSYMIXgTvX_aQ6zJvv57tVeeelq1WG4N0Y3CCNqWDdWRwgjanhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node2_2024-08-16_12-14-34__fa4b33b9-8182-45f8-b01e-99ee5b2904df__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.15.247
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['35714', '35715', '35716', '35717', '35718']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 35714:35714 -p 35715:35715 -p 35716:35716 -p 35717:35717 -p 35718:35718 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=35716 --rest-port=35714 --tcp-port=35715 --discv5-udp-port=35717 --rest-address=0.0.0.0 --nat=extip:172.18.15.247 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e0d48fad6daad345edf5aba1cacecee98a63bb990622a2fedfea6f1cd752ab8f --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --discv5-bootstrap-node=enr:-LO4QBv9recPr07pz7ExwPYKUqVtr7lS9fbZWYspbF3DGEIabzYjRzYvuZwQLwPEUibgCMmPh2SZKSH9iUnIgYVp41QBgmlkgnY0gmlwhKwSYniKbXVsdGlhZGRyc4wACgSsEmJ4Bjam3QOCcnOFAAMBAACJc2VjcDI1NmsxoQP-MLW1A72OEpOoSYMIXgTvX_aQ6zJvv57tVeeelq1WG4N0Y3CCNqWDdWRwgjanhXdha3UyAQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.15.247 waku efce32c8b387508572767ec61fc704ed017f47ca614884cf9f3f1c84dcb70aea
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID efce32c8b387. Setting up logs at ./log/docker/node2_2024-08-16_12-14-34__fa4b33b9-8182-45f8-b01e-99ee5b2904df__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/go-waku:latest. REST: 35714
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35714/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QBVzmi3UtuJNJm6lBzkF2ocah2uBmZ_juOLYbynILfsae37gL6xWyhgTDUljJCsWH2pf9WUYNhb5Ke40rDSQGPmGAZFbHHCAgmlkgnY0gmlwhKwRAASJc2VjcDI1NmsxoQIAXZ-ID6BwtI3KH5ehELs50xNsbULtTRB081WP1zuFloN0Y3CCi4ODdWRwgouFhXdha3UyAQ","listenAddresses":["/ip4/127.0.0.1/tcp/35715/p2p/16Uiu2HAkuT6nEtWsX2e84dVBvjWr4aJ8fTpx75cYUWpdPYt35DaD","/ip4/127.0.0.1/tcp/35716/ws/p2p/16Uiu2HAkuT6nEtWsX2e84dVBvjWr4aJ8fTpx75cYUWpdPYt35DaD","/ip4/172.17.0.4/tcp/35715/p2p/16Uiu2HAkuT6nEtWsX2e84dVBvjWr4aJ8fTpx75cYUWpdPYt35DaD","/ip4/172.17.0.4/tcp/35716/ws/p2p/16Uiu2HAkuT6nEtWsX2e84dVBvjWr4aJ8fTpx75cYUWpdPYt35DaD"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35714/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.98.120/tcp/13989/p2p/16Uiu2HAmVmEz5xFejHLfJHJwU2CyU3tZAw9BCBR6A3vVsV6B14TC", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13988/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0", "/waku/2/rs/3/1", "/waku/2/rs/3/9", "/waku/2/rs/3/25", "/waku/2/rs/3/1000"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35714/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0", "/waku/2/rs/3/1", "/waku/2/rs/3/9", "/waku/2/rs/3/25", "/waku/2/rs/3/1000"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13988/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.4/tcp/35715/p2p/16Uiu2HAkuT6nEtWsX2e84dVBvjWr4aJ8fTpx75cYUWpdPYt35DaD","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[35mDEBUG   [0m src.node.waku_node:waku_node.py:243 Restarting container with id 2dc5e6a804b0
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node3_2024-08-16_12-14-34__fa4b33b9-8182-45f8-b01e-99ee5b2904df__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.211.91
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['25763', '25764', '25765', '25766', '25767']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 25763:25763 -p 25764:25764 -p 25765:25765 -p 25766:25766 -p 25767:25767 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=25765 --rest-port=25763 --tcp-port=25764 --discv5-udp-port=25766 --rest-address=0.0.0.0 --nat=extip:172.18.211.91 --peer-exchange=true --discv5-discovery=false --cluster-id=3 --nodekey=7f4e9b22fa4e7bddb1aed2cfc8a8cfdf09cdc8e60b11bca2d621ab91b8d5e6ae --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --peer-exchange-node=/ip4/172.17.0.4/tcp/35715/p2p/16Uiu2HAkuT6nEtWsX2e84dVBvjWr4aJ8fTpx75cYUWpdPYt35DaD
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.211.91 waku 5c816e6914899346758ca52f4bea7c2f00db4f6ecb94af8eced04fde07743a40
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 5c816e691489. Setting up logs at ./log/docker/node3_2024-08-16_12-14-34__fa4b33b9-8182-45f8-b01e-99ee5b2904df__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/go-waku:latest. REST: 25763
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25763/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-JG4QM1tjoI9iyjIIhpmsWu16cRj1KKmSjBCQO7AJsyxHrtOdxlmKobyrK5Kn2LtWE2AyfV5Akc4bUb4Ua0yK8Axn-6GAZFbHIX_gmlkgnY0gmlwhKwRAAaJc2VjcDI1NmsxoQNehOTuIJUBbfSMVva99wHDJEKyJua87epnXvl0TW5LcYN0Y3CCZKSFd2FrdTKA","listenAddresses":["/ip4/127.0.0.1/tcp/25764/p2p/16Uiu2HAmK1xCwAdni2FxYMsWzMuMXuXtLdXtbaRnwpyYeDgemdnY","/ip4/127.0.0.1/tcp/25765/ws/p2p/16Uiu2HAmK1xCwAdni2FxYMsWzMuMXuXtLdXtbaRnwpyYeDgemdnY","/ip4/172.17.0.6/tcp/25764/p2p/16Uiu2HAmK1xCwAdni2FxYMsWzMuMXuXtLdXtbaRnwpyYeDgemdnY","/ip4/172.17.0.6/tcp/25765/ws/p2p/16Uiu2HAmK1xCwAdni2FxYMsWzMuMXuXtLdXtbaRnwpyYeDgemdnY"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:25763/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.98.120/tcp/13989/p2p/16Uiu2HAmVmEz5xFejHLfJHJwU2CyU3tZAw9BCBR6A3vVsV6B14TC", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25763/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAkuT6nEtWsX2e84dVBvjWr4aJ8fTpx75cYUWpdPYt35DaD","multiaddrs":["/ip4/172.17.0.4/tcp/35715/p2p/16Uiu2HAkuT6nEtWsX2e84dVBvjWr4aJ8fTpx75cYUWpdPYt35DaD","/ip4/172.17.0.4/tcp/35716/ws/p2p/16Uiu2HAkuT6nEtWsX2e84dVBvjWr4aJ8fTpx75cYUWpdPYt35DaD"],"protocols":["/vac/waku/relay/2.0.0","/vac/waku/filter-push/2.0.0-beta1"],"connected":true,"pubsubTopics":["/waku/2/default-waku/proto"]},{"id":"16Uiu2HAmVmEz5xFejHLfJHJwU2CyU3tZAw9BCBR6A3vVsV6B14TC","multiaddrs":["/ip4/172.18.98.120/tcp/13989/p2p/16Uiu2HAmVmEz5xFejHLfJHJwU2CyU3tZAw9BCBR6A3vVsV6B14TC","/ip4/172.18.98.120/tcp/13990/ws/p2p/16Uiu2HAmVmEz5xFejHLfJHJwU2CyU3tZAw9BCBR6A3vVsV6B14TC"],"protocols":["/vac/waku/relay/2.0.0"],"connected":true,"pubsubTopics":["/waku/2/rs/3/8","/waku/2/rs/3/3","/waku/2/rs/3/4","/waku/2/rs/3/6","/waku/2/rs/3/5","/waku/2/rs/3/7","/waku/2/rs/3/0","/waku/2/rs/3/1","/waku/2/rs/3/2"]}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 2dc5e6a804b0
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id efce32c8b387
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 5c816e691489
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.