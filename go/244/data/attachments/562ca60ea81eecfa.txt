[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_node_not_connected_directly_to_lightpushing_node with id: 2024-08-16_12-07-21__3c66b1ba-6147-4b7e-905b-f21cdb8f3c59
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node1_2024-08-16_12-07-21__3c66b1ba-6147-4b7e-905b-f21cdb8f3c59__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node2_2024-08-16_12-07-21__3c66b1ba-6147-4b7e-905b-f21cdb8f3c59__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node3_2024-08-16_12-07-21__3c66b1ba-6147-4b7e-905b-f21cdb8f3c59__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:28 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.240.38
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['8598', '8599', '8600', '8601', '8602']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 8598:8598 -p 8599:8599 -p 8600:8600 -p 8601:8601 -p 8602:8602 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=8600 --rest-port=8598 --tcp-port=8599 --discv5-udp-port=8601 --rest-address=0.0.0.0 --nat=extip:172.18.240.38 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b6ca2b53dc4cd1cbad29ee2b8d53ceb6e8492b213be2bb9cab74eaedbdc5dd5a --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.240.38 waku c851c9c6b3b2e77dd9220c04a1e739a16ff5297bed9a2813fd9e67cd4954b735
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID c851c9c6b3b2. Setting up logs at ./log/docker/node1_2024-08-16_12-07-21__3c66b1ba-6147-4b7e-905b-f21cdb8f3c59__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/go-waku:latest. REST: 8598
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8598/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QFlxN9cXC0fMA4EbNSYhUoSJteTYCubH6UCQUwSZBAEzT_dQMIVDnCRyeWpgaTkPNmrs7VtcerwgoYMnMOtqOIiGAZFbFdFvgmlkgnY0gmlwhKwRAAiJc2VjcDI1NmsxoQIyMbM0TikeWLtjHR0NjJoW9SSJby5PWQxGkVV5CRy8GYN0Y3CCIZeDdWRwgiGZhXdha3UyCQ","listenAddresses":["/ip4/127.0.0.1/tcp/8599/p2p/16Uiu2HAkxocKWBWzfaD3T9B6EVkvqrYAETGgiqJaLc1cLsbfUcZN","/ip4/127.0.0.1/tcp/8600/ws/p2p/16Uiu2HAkxocKWBWzfaD3T9B6EVkvqrYAETGgiqJaLc1cLsbfUcZN","/ip4/172.17.0.8/tcp/8599/p2p/16Uiu2HAkxocKWBWzfaD3T9B6EVkvqrYAETGgiqJaLc1cLsbfUcZN","/ip4/172.17.0.8/tcp/8600/ws/p2p/16Uiu2HAkxocKWBWzfaD3T9B6EVkvqrYAETGgiqJaLc1cLsbfUcZN"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.27.135
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['64225', '64226', '64227', '64228', '64229']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 64225:64225 -p 64226:64226 -p 64227:64227 -p 64228:64228 -p 64229:64229 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64227 --rest-port=64225 --tcp-port=64226 --discv5-udp-port=64228 --rest-address=0.0.0.0 --nat=extip:172.18.27.135 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b59cb56d127f8791fcfe70bcb33ba7e64cb3c6ba55fb1d0a5a0deeb8f5cdb216 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64229 --metrics-logging=true --lightpush=true --store=true --relay=true --discv5-bootstrap-node=enr:-Ji4QFlxN9cXC0fMA4EbNSYhUoSJteTYCubH6UCQUwSZBAEzT_dQMIVDnCRyeWpgaTkPNmrs7VtcerwgoYMnMOtqOIiGAZFbFdFvgmlkgnY0gmlwhKwRAAiJc2VjcDI1NmsxoQIyMbM0TikeWLtjHR0NjJoW9SSJby5PWQxGkVV5CRy8GYN0Y3CCIZeDdWRwgiGZhXdha3UyCQ --lightpushnode=/ip4/172.18.240.38/tcp/8599/p2p/16Uiu2HAkxocKWBWzfaD3T9B6EVkvqrYAETGgiqJaLc1cLsbfUcZN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.27.135 waku da871484a2064ae9af5cdf1732c368c6bb485049b2032e29d0610b08bf38f21c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID da871484a206. Setting up logs at ./log/docker/node2_2024-08-16_12-07-21__3c66b1ba-6147-4b7e-905b-f21cdb8f3c59__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 64225
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64225/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64225/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.27.135/tcp/64226/p2p/16Uiu2HAmSKGpsPAfo93D9vpDE535A5xnAwKYbtxXpSQdgQBZUYSE","/ip4/172.18.27.135/tcp/64227/ws/p2p/16Uiu2HAmSKGpsPAfo93D9vpDE535A5xnAwKYbtxXpSQdgQBZUYSE"],"enrUri":"enr:-LO4QF5EAgcwV0Gk1BcMp7zmVSSNIgkNvW1yTEXVKlu9oxEmSpRTQmZWZvAboFrQzh_47cQPuoRnMHc5rEi-b5I_Oj8BgmlkgnY0gmlwhKwSG4eKbXVsdGlhZGRyc4wACgSsEhuHBvrj3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPK9qE0b1qBgmbb-Z0OHKYQxjujGXWcefG1tHnMqkQYy4N0Y3CC-uKDdWRwgvrkhXdha3UyCw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.197.224
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['44705', '44706', '44707', '44708', '44709']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 44705:44705 -p 44706:44706 -p 44707:44707 -p 44708:44708 -p 44709:44709 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=44707 --rest-port=44705 --tcp-port=44706 --discv5-udp-port=44708 --rest-address=0.0.0.0 --nat=extip:172.18.197.224 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=10dd8c47b7e76dc6191f4a2bccdf13fb0eccd5a58d439af2e79cbf8d526f1b70 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --storenode=/ip4/172.18.27.135/tcp/64226/p2p/16Uiu2HAmSKGpsPAfo93D9vpDE535A5xnAwKYbtxXpSQdgQBZUYSE --discv5-bootstrap-node=enr:-LO4QF5EAgcwV0Gk1BcMp7zmVSSNIgkNvW1yTEXVKlu9oxEmSpRTQmZWZvAboFrQzh_47cQPuoRnMHc5rEi-b5I_Oj8BgmlkgnY0gmlwhKwSG4eKbXVsdGlhZGRyc4wACgSsEhuHBvrj3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPK9qE0b1qBgmbb-Z0OHKYQxjujGXWcefG1tHnMqkQYy4N0Y3CC-uKDdWRwgvrkhXdha3UyCw
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.197.224 waku 6fc6226bed6f16d0d0f04488bfab6dc5af720c65da6d5af69897677d4fcc3be6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 6fc6226bed6f. Setting up logs at ./log/docker/node3_2024-08-16_12-07-21__3c66b1ba-6147-4b7e-905b-f21cdb8f3c59__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/go-waku:latest. REST: 44705
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44705/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QBahEYrIsDE7C6peNoqs1euKs1X4W0q_I9HFIp18EvqOYcHKjCsVM2fH624YiZg24li76PQ8EKjSJy8KRegI9ueGAZFbFd2dgmlkgnY0gmlwhKwRAA6Jc2VjcDI1NmsxoQKdS4yldMNw_smoBvgT9f8L5XpQMVn6Nc1f-9j3YvfNIIN0Y3CCrqKDdWRwgq6khXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/44706/p2p/16Uiu2HAm61godg31sykKm3qKrEp5PtsgymqUtNeuWUrt6Yd53RZq","/ip4/127.0.0.1/tcp/44707/ws/p2p/16Uiu2HAm61godg31sykKm3qKrEp5PtsgymqUtNeuWUrt6Yd53RZq","/ip4/172.17.0.14/tcp/44706/p2p/16Uiu2HAm61godg31sykKm3qKrEp5PtsgymqUtNeuWUrt6Yd53RZq","/ip4/172.17.0.14/tcp/44707/ws/p2p/16Uiu2HAm61godg31sykKm3qKrEp5PtsgymqUtNeuWUrt6Yd53RZq"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8598/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64225/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8598/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8598/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8598/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAmSKGpsPAfo93D9vpDE535A5xnAwKYbtxXpSQdgQBZUYSE","multiaddrs":["/ip4/172.18.27.135/tcp/64226/p2p/16Uiu2HAmSKGpsPAfo93D9vpDE535A5xnAwKYbtxXpSQdgQBZUYSE","/ip4/172.18.27.135/tcp/64227/ws/p2p/16Uiu2HAmSKGpsPAfo93D9vpDE535A5xnAwKYbtxXpSQdgQBZUYSE"],"protocols":["/vac/waku/store/2.0.0-beta4","/vac/waku/store-query/3.0.0","/vac/waku/lightpush/2.0.0-beta1","/vac/waku/relay/2.0.0"],"connected":true,"pubsubTopics":["/waku/2/rs/3/0","/waku/2/rs/3/1"]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64225/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.8/tcp/8599/p2p/16Uiu2HAkxocKWBWzfaD3T9B6EVkvqrYAETGgiqJaLc1cLsbfUcZN","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"},{"multiaddr":"/ip4/172.17.0.14/tcp/44706/p2p/16Uiu2HAm61godg31sykKm3qKrEp5PtsgymqUtNeuWUrt6Yd53RZq","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8598/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1723810078432337152}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.store:store.py:216 Checking that peer wakuorg/go-waku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44705/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-filter%2Fproto&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"0cdfd097e217c9b467439865c9395bb32bddcf9e1114edcf206f5f3683720e27","status_code":200,"status_desc":"OK","messages":[{"message_hash":"cTcMxOxsoAACL+Eg1UqguKsZRWgIBgW+K8n0wrebphU="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id c851c9c6b3b2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id da871484a206
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 6fc6226bed6f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.