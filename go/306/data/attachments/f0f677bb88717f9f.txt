[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_content_topics with id: 2024-10-11_03-22-13__3077d6d3-06be-4e55-8221-20bcb0ec640e
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-10-11_03-22-13__3077d6d3-06be-4e55-8221-20bcb0ec640e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.158.84
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['29921', '29922', '29923', '29924', '29925']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 29921:29921 -p 29922:29922 -p 29923:29923 -p 29924:29924 -p 29925:29925 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29923 --rest-port=29921 --tcp-port=29922 --discv5-udp-port=29924 --rest-address=0.0.0.0 --nat=extip:172.18.158.84 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b69a41db0be07dab3c69cbcbecf8fdf4ccfecbdfcab0b3bafa0933a0527c6ebb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29925 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.158.84 waku 4e6e4a3ddc3f13eb1f2f24f1051865321e5fdb618a731af4992b374cab0dd056
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 4e6e4a3ddc3f. Setting up logs at ./log/docker/receiving_node1_2024-10-11_03-22-13__3077d6d3-06be-4e55-8221-20bcb0ec640e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 29921
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29921/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29921/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.158.84/tcp/29922/p2p/16Uiu2HAkuWbarm56LtkSumUCEBbHH2n72Y79R813Lt47r3gE3U91","/ip4/172.18.158.84/tcp/29923/ws/p2p/16Uiu2HAkuWbarm56LtkSumUCEBbHH2n72Y79R813Lt47r3gE3U91"],"enrUri":"enr:-LO4QAG6rLeyiGg5qzZzJmelUiVAa6qLB7lEXzG3-LKV5miCBpM2jpsVpL5g-OK8q-WZKE7mkrsd_u1sQLc7Tx2D7LEBgmlkgnY0gmlwhKwSnlSKbXVsdGlhZGRyc4wACgSsEp5UBnTj3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIBQu8ifqO48haF-ZnEtCymeuv8r_-EV52DYl4UDgr1HIN0Y3CCdOKDdWRwgnTkhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-10-11_03-22-13__3077d6d3-06be-4e55-8221-20bcb0ec640e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.227.40
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['4715', '4716', '4717', '4718', '4719']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 4715:4715 -p 4716:4716 -p 4717:4717 -p 4718:4718 -p 4719:4719 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4717 --rest-port=4715 --tcp-port=4716 --discv5-udp-port=4718 --rest-address=0.0.0.0 --nat=extip:172.18.227.40 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3cbdc6165687cb46dd76646c1adff98b543f4ffd892beafb7d98dd8a65cbb50d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4719 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.227.40 waku 03f733af63f46e1e1953b68f0bc084841654d040f9366bd49d8f0a03c5d8a2d4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 03f733af63f4. Setting up logs at ./log/docker/receiving_node2_2024-10-11_03-22-13__3077d6d3-06be-4e55-8221-20bcb0ec640e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 4715
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4715/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4715/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.227.40/tcp/4716/p2p/16Uiu2HAmG6SAuoFoFLTc8jPwP8hMjJ5mkSFmazG6kGFHkKZ51UZ9","/ip4/172.18.227.40/tcp/4717/ws/p2p/16Uiu2HAmG6SAuoFoFLTc8jPwP8hMjJ5mkSFmazG6kGFHkKZ51UZ9"],"enrUri":"enr:-LO4QM8_gGhyVJqtxIBWOWpzKrLgQs7ghh0smK7gbXDcW04XNDFIatVkQTB9icrAVTJDcfUqs6Q6QfrJ_BaSMt2MDxsBgmlkgnY0gmlwhKwS4yiKbXVsdGlhZGRyc4wACgSsEuMoBhJt3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMzF8bnTcYytAUykbhAkmZ65-VHD7W9K5OOCH-wK4emVIN0Y3CCEmyDdWRwghJuhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4715/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.158.84/tcp/29922/p2p/16Uiu2HAkuWbarm56LtkSumUCEBbHH2n72Y79R813Lt47r3gE3U91"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-10-11_03-22-13__3077d6d3-06be-4e55-8221-20bcb0ec640e__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.253.64
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['44611', '44612', '44613', '44614', '44615']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 44611:44611 -p 44612:44612 -p 44613:44613 -p 44614:44614 -p 44615:44615 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=44613 --rest-port=44611 --tcp-port=44612 --discv5-udp-port=44614 --rest-address=0.0.0.0 --nat=extip:172.18.253.64 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=afe98dd44f18dff80eccd490660a4d4ce92ebca912ccd0dc4a37fdefebc38a4e --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-LO4QAG6rLeyiGg5qzZzJmelUiVAa6qLB7lEXzG3-LKV5miCBpM2jpsVpL5g-OK8q-WZKE7mkrsd_u1sQLc7Tx2D7LEBgmlkgnY0gmlwhKwSnlSKbXVsdGlhZGRyc4wACgSsEp5UBnTj3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIBQu8ifqO48haF-ZnEtCymeuv8r_-EV52DYl4UDgr1HIN0Y3CCdOKDdWRwgnTkhXdha3UyCQ --lightpushnode=/ip4/172.18.158.84/tcp/29922/p2p/16Uiu2HAkuWbarm56LtkSumUCEBbHH2n72Y79R813Lt47r3gE3U91 --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.253.64 waku b70acd136c27dabb1883536de5f06e20ed30d8bd59b033b4727e33c7ebd4c204
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID b70acd136c27. Setting up logs at ./log/docker/lightpush_node1_2024-10-11_03-22-13__3077d6d3-06be-4e55-8221-20bcb0ec640e__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 44611
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44611/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QDsjcJR2syi4Sy8IUIeKPIRAz4PR0degq358abYOFDxRWuevjRghndu1rJZJ2_mr4WQBRwuK528C9ouV_t77kUGGAZJ5mTmigmlkgnY0gmlwhKwRAAyJc2VjcDI1NmsxoQKFn1MKs_CEQ9y2A8V0lamt3CyIAJ0KWnr4-xolx8blB4N0Y3CCrkSDdWRwgq5GhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/44612/p2p/16Uiu2HAm4RH7PyYYviptJY9b6qL9vvfHYUFUATfHN1CTB681rqzN","/ip4/127.0.0.1/tcp/44613/ws/p2p/16Uiu2HAm4RH7PyYYviptJY9b6qL9vvfHYUFUATfHN1CTB681rqzN","/ip4/172.17.0.12/tcp/44612/p2p/16Uiu2HAm4RH7PyYYviptJY9b6qL9vvfHYUFUATfHN1CTB681rqzN","/ip4/172.17.0.12/tcp/44613/ws/p2p/16Uiu2HAm4RH7PyYYviptJY9b6qL9vvfHYUFUATfHN1CTB681rqzN"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44611/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.158.84/tcp/29922/p2p/16Uiu2HAkuWbarm56LtkSumUCEBbHH2n72Y79R813Lt47r3gE3U91", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44611/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.227.40/tcp/4716/p2p/16Uiu2HAmG6SAuoFoFLTc8jPwP8hMjJ5mkSFmazG6kGFHkKZ51UZ9", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29921/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4715/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic Empty string
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44611/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "", "timestamp": 1728616939105589760}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:44611/lightpush/v1/message. Response content: b'missing ContentTopic field'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A dictionary
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44611/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": {"key": "YWFh"}, "timestamp": 1728616939110807296}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:44611/lightpush/v1/message. Response content: b''
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic An integer
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44611/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": 1234567890, "timestamp": 1728616939115039232}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:44611/lightpush/v1/message. Response content: b''
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A list
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44611/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": ["YWFh"], "timestamp": 1728616939118603520}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:44611/lightpush/v1/message. Response content: b''
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A bool
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44611/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": true, "timestamp": 1728616939124192512}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:44611/lightpush/v1/message. Response content: b''
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 4e6e4a3ddc3f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 03f733af63f4
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id b70acd136c27
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.