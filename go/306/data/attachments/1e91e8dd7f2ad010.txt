[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_node_not_connected_directly_to_relaying_node with id: 2024-10-11_03-16-13__d02546bd-c018-43d3-83ab-5bbdb5ba998e
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-11_03-16-13__d02546bd-c018-43d3-83ab-5bbdb5ba998e__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-10-11_03-16-13__d02546bd-c018-43d3-83ab-5bbdb5ba998e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-10-11_03-16-13__d02546bd-c018-43d3-83ab-5bbdb5ba998e__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.208.122
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['30598', '30599', '30600', '30601', '30602']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 30598:30598 -p 30599:30599 -p 30600:30600 -p 30601:30601 -p 30602:30602 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=30600 --rest-port=30598 --tcp-port=30599 --discv5-udp-port=30601 --rest-address=0.0.0.0 --nat=extip:172.18.208.122 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f0b76a0e314daea160afd9cfeb57b463f9d33ee0adbe73b3a1da9652acf1cdc5 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --filter=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.208.122 waku 4ef0a2934625df849595443dcb027268e71c6dae5c5daf6589a55aba3d091212
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 4ef0a2934625. Setting up logs at ./log/docker/node1_2024-10-11_03-16-13__d02546bd-c018-43d3-83ab-5bbdb5ba998e__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 30598
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30598/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QByzT3SCgybyQSpuPXJnoSOj_hHiqbzTxYli3D-v2y7FEEi9x0_do2XIis9tNOCpQcb3MfQ8xw717F1es0uvSrqGAZJ5k65PgmlkgnY0gmlwhKwRAASJc2VjcDI1NmsxoQPWKrxfcFrclx_YUz0-snHmHG1j9XeevZ_v3TEDdIYLLoN0Y3CCd4eDdWRwgneJhXdha3UyBQ","listenAddresses":["/ip4/127.0.0.1/tcp/30599/p2p/16Uiu2HAmT51Pnn3DpDXidhoogKduLN3Cs7ExjmLhov3yHrmGtjad","/ip4/127.0.0.1/tcp/30600/ws/p2p/16Uiu2HAmT51Pnn3DpDXidhoogKduLN3Cs7ExjmLhov3yHrmGtjad","/ip4/172.17.0.4/tcp/30599/p2p/16Uiu2HAmT51Pnn3DpDXidhoogKduLN3Cs7ExjmLhov3yHrmGtjad","/ip4/172.17.0.4/tcp/30600/ws/p2p/16Uiu2HAmT51Pnn3DpDXidhoogKduLN3Cs7ExjmLhov3yHrmGtjad"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.5.235
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['55318', '55319', '55320', '55321', '55322']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 55318:55318 -p 55319:55319 -p 55320:55320 -p 55321:55321 -p 55322:55322 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55320 --rest-port=55318 --tcp-port=55319 --discv5-udp-port=55321 --rest-address=0.0.0.0 --nat=extip:172.18.5.235 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=18a994e8cda9bd8fbf6c57bbd8982b85aacacfacabbcbbc73e6c2df0ef8d0689 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55322 --metrics-logging=true --filter=true --relay=true --discv5-bootstrap-node=enr:-Ji4QByzT3SCgybyQSpuPXJnoSOj_hHiqbzTxYli3D-v2y7FEEi9x0_do2XIis9tNOCpQcb3MfQ8xw717F1es0uvSrqGAZJ5k65PgmlkgnY0gmlwhKwRAASJc2VjcDI1NmsxoQPWKrxfcFrclx_YUz0-snHmHG1j9XeevZ_v3TEDdIYLLoN0Y3CCd4eDdWRwgneJhXdha3UyBQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.5.235 waku 8a4bbc61e29b0131713ef4d3bdd8143bac0c44f023df323c524c2a7d7621266b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 8a4bbc61e29b. Setting up logs at ./log/docker/node2_2024-10-11_03-16-13__d02546bd-c018-43d3-83ab-5bbdb5ba998e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 55318
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55318/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55318/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.5.235/tcp/55319/p2p/16Uiu2HAmRX36grxQGG3aSCc1nsYKxQEMYSPeiypbdHfznRF4GySg","/ip4/172.18.5.235/tcp/55320/ws/p2p/16Uiu2HAmRX36grxQGG3aSCc1nsYKxQEMYSPeiypbdHfznRF4GySg"],"enrUri":"enr:-LO4QJ8gE7ZGKDft0o5Rq8QPvTZg27b1sFLv848yB8QKUtSTWkZcBYUfwng5x3Ic7iii2p2L1eURzvPBS7OxPZZqpp4BgmlkgnY0gmlwhKwSBeuKbXVsdGlhZGRyc4wACgSsEgXrBtgY3QOCcnOFAAMBAACJc2VjcDI1NmsxoQO_HmQZ6ZpemjDVk9QKD9Z6EnixU13-YiYmYQgIw7XneYN0Y3CC2BeDdWRwgtgZhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.15.248
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['35419', '35420', '35421', '35422', '35423']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 35419:35419 -p 35420:35420 -p 35421:35421 -p 35422:35422 -p 35423:35423 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=35421 --rest-port=35419 --tcp-port=35420 --discv5-udp-port=35422 --rest-address=0.0.0.0 --nat=extip:172.18.15.248 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d6bb41a3ea86ee71c15205bb07f95e04e8c5e209a334a4ed158ec076f0f271e8 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --filternode=/ip4/172.18.5.235/tcp/55319/p2p/16Uiu2HAmRX36grxQGG3aSCc1nsYKxQEMYSPeiypbdHfznRF4GySg --discv5-bootstrap-node=enr:-LO4QJ8gE7ZGKDft0o5Rq8QPvTZg27b1sFLv848yB8QKUtSTWkZcBYUfwng5x3Ic7iii2p2L1eURzvPBS7OxPZZqpp4BgmlkgnY0gmlwhKwSBeuKbXVsdGlhZGRyc4wACgSsEgXrBtgY3QOCcnOFAAMBAACJc2VjcDI1NmsxoQO_HmQZ6ZpemjDVk9QKD9Z6EnixU13-YiYmYQgIw7XneYN0Y3CC2BeDdWRwgtgZhXdha3UyBQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.15.248 waku 12964628f0ccbe3e97e0efeb7106eb3b1dae4ef67274fc134db6877a3f1c94fe
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 12964628f0cc. Setting up logs at ./log/docker/node3_2024-10-11_03-16-13__d02546bd-c018-43d3-83ab-5bbdb5ba998e__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 35419
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35419/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QDkSEChTJDfdlSvgc6uZqslDerWAiUIE4tVWDm5hEKg3ABNLqKOP_1SRPfkRFOxThWoNaoYEOiLRpOcrkiuaYNKGAZJ5k8GZgmlkgnY0gmlwhKwRAAOJc2VjcDI1NmsxoQJ0JkE_Y_Ddyqd4lI5y1pBTyN-HGUtea3ZotI3zRdB8_IN0Y3CCilyDdWRwgopehXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/35420/p2p/16Uiu2HAm3F575yt2DEarzM44hPrDCfaX1MJ292gE9hC72MeCPGzw","/ip4/127.0.0.1/tcp/35421/ws/p2p/16Uiu2HAm3F575yt2DEarzM44hPrDCfaX1MJ292gE9hC72MeCPGzw","/ip4/172.17.0.3/tcp/35420/p2p/16Uiu2HAm3F575yt2DEarzM44hPrDCfaX1MJ292gE9hC72MeCPGzw","/ip4/172.17.0.3/tcp/35421/ws/p2p/16Uiu2HAm3F575yt2DEarzM44hPrDCfaX1MJ292gE9hC72MeCPGzw"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30598/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55318/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35419/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30598/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAm3F575yt2DEarzM44hPrDCfaX1MJ292gE9hC72MeCPGzw","multiaddrs":["/ip4/172.17.0.3/tcp/35420/p2p/16Uiu2HAm3F575yt2DEarzM44hPrDCfaX1MJ292gE9hC72MeCPGzw","/ip4/172.17.0.3/tcp/35421/ws/p2p/16Uiu2HAm3F575yt2DEarzM44hPrDCfaX1MJ292gE9hC72MeCPGzw"],"protocols":["/vac/waku/filter-push/2.0.0-beta1"],"connected":true,"pubsubTopics":[]},{"id":"16Uiu2HAmRX36grxQGG3aSCc1nsYKxQEMYSPeiypbdHfznRF4GySg","multiaddrs":["/ip4/172.18.5.235/tcp/55319/p2p/16Uiu2HAmRX36grxQGG3aSCc1nsYKxQEMYSPeiypbdHfznRF4GySg","/ip4/172.18.5.235/tcp/55320/ws/p2p/16Uiu2HAmRX36grxQGG3aSCc1nsYKxQEMYSPeiypbdHfznRF4GySg"],"protocols":["/vac/waku/filter-subscribe/2.0.0-beta1","/vac/waku/relay/2.0.0"],"connected":true,"pubsubTopics":["/waku/2/rs/3/0","/waku/2/rs/3/1"]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55318/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.4/tcp/30599/p2p/16Uiu2HAmT51Pnn3DpDXidhoogKduLN3Cs7ExjmLhov3yHrmGtjad","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/filter-subscribe/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"},{"multiaddr":"/ip4/172.17.0.3/tcp/35420/p2p/16Uiu2HAm3F575yt2DEarzM44hPrDCfaX1MJ292gE9hC72MeCPGzw","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35419/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAmRX36grxQGG3aSCc1nsYKxQEMYSPeiypbdHfznRF4GySg","multiaddrs":["/ip4/172.18.5.235/tcp/55319/p2p/16Uiu2HAmRX36grxQGG3aSCc1nsYKxQEMYSPeiypbdHfznRF4GySg","/ip4/172.18.5.235/tcp/55320/ws/p2p/16Uiu2HAmRX36grxQGG3aSCc1nsYKxQEMYSPeiypbdHfznRF4GySg"],"protocols":["/vac/waku/relay/2.0.0","/vac/waku/filter-subscribe/2.0.0-beta1"],"connected":true,"pubsubTopics":["/waku/2/rs/3/0"]},{"id":"16Uiu2HAmT51Pnn3DpDXidhoogKduLN3Cs7ExjmLhov3yHrmGtjad","multiaddrs":["/ip4/172.17.0.4/tcp/30600/ws/p2p/16Uiu2HAmT51Pnn3DpDXidhoogKduLN3Cs7ExjmLhov3yHrmGtjad","/ip4/172.17.0.4/tcp/30599/p2p/16Uiu2HAmT51Pnn3DpDXidhoogKduLN3Cs7ExjmLhov3yHrmGtjad"],"protocols":["/vac/waku/filter-subscribe/2.0.0-beta1","/vac/waku/filter-push/2.0.0-beta1","/vac/waku/relay/2.0.0"],"connected":true,"pubsubTopics":["/waku/2/rs/3/1"]}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30598/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35419/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","timestamp":1728616614828267264,"ephemeral":null}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 4ef0a2934625
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 8a4bbc61e29b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 12964628f0cc
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.