[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_and_retrieve_100_messages with id: 2024-11-19_03-46-15__a3dbbf9c-e67e-4ac2-9bdb-a064e1ce0a6c
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-11-19_03-46-15__a3dbbf9c-e67e-4ac2-9bdb-a064e1ce0a6c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.95.59
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['43422', '43423', '43424', '43425', '43426']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 43422:43422 -p 43423:43423 -p 43424:43424 -p 43425:43425 -p 43426:43426 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=43424 --rest-port=43422 --tcp-port=43423 --discv5-udp-port=43425 --rest-address=0.0.0.0 --nat=extip:172.18.95.59 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5c70f64b26ff61aa914eb8b6b7cf251ebcd15baded5fdaab8f6eb73e5de7cec8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=43426 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.95.59 waku f047871fe91629cd85299ee577e9f8885907cfb72af86f4a757e8383189b52c4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID f047871fe916. Setting up logs at ./log/docker/receiving_node1_2024-11-19_03-46-15__a3dbbf9c-e67e-4ac2-9bdb-a064e1ce0a6c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 43422
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container b9512f87629b. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43422/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43422/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.95.59/tcp/43423/p2p/16Uiu2HAmQJnGFV1fpUZRD18uMrA2fBJzu9iBiNcSZEEpbAxUAMzs","/ip4/172.18.95.59/tcp/43424/ws/p2p/16Uiu2HAmQJnGFV1fpUZRD18uMrA2fBJzu9iBiNcSZEEpbAxUAMzs"],"enrUri":"enr:-L24QO5K2YW-DFXh5R9CrVF7ST0hX7z5ilWF1PTCjJNXe6jRatwvs17kHAFYznbwGPmmGIjtteXBSWFVOFaMcQxktbcCgmlkgnY0gmlwhKwSXzuKbXVsdGlhZGRyc5YACASsEl87BqmfAAoErBJfOwapoN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDrR710u7RpMAA7BnBgmArO_QqZ0dWO5uFSB3o3zGp56SDdGNwgqmfg3VkcIKpoYV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-11-19_03-46-15__a3dbbf9c-e67e-4ac2-9bdb-a064e1ce0a6c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.178.126
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['17472', '17473', '17474', '17475', '17476']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 17472:17472 -p 17473:17473 -p 17474:17474 -p 17475:17475 -p 17476:17476 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17474 --rest-port=17472 --tcp-port=17473 --discv5-udp-port=17475 --rest-address=0.0.0.0 --nat=extip:172.18.178.126 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b2af37ca87ad5046cdfb7098e69d6c4e0bebe5b4b0ed7c8c2bd573f38fce8569 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17476 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.178.126 waku 8a7c4833b8999ab29472f9af4edc7b2ce0c748f74bb4c399e9a882d5920ef84c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 8a7c4833b899. Setting up logs at ./log/docker/receiving_node2_2024-11-19_03-46-15__a3dbbf9c-e67e-4ac2-9bdb-a064e1ce0a6c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 17472
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17472/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17472/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.178.126/tcp/17473/p2p/16Uiu2HAkuRgpWjWCzZR22tBB3GuAioNXBxNUvs6K5sinb2HpUeVz","/ip4/172.18.178.126/tcp/17474/ws/p2p/16Uiu2HAkuRgpWjWCzZR22tBB3GuAioNXBxNUvs6K5sinb2HpUeVz"],"enrUri":"enr:-L24QI-7JZK6qdupV9fqA2v8bBipZA-boS7gRFVxPeMITj7lMdMo4cOlpNSPEsKVkHPE8kUuoxJF4fUhv2RIkTz0rWECgmlkgnY0gmlwhKwSsn6KbXVsdGlhZGRyc5YACASsErJ-BkRBAAoErBKyfgZEQt0DgnJzhQADAQAAiXNlY3AyNTZrMaECAADzJWu16LbdF-5V2kVsgzEyW9FvdjQ7NsFWqpAf-S2DdGNwgkRBg3VkcIJEQ4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:17472/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.95.59/tcp/43423/p2p/16Uiu2HAmQJnGFV1fpUZRD18uMrA2fBJzu9iBiNcSZEEpbAxUAMzs"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-11-19_03-46-15__a3dbbf9c-e67e-4ac2-9bdb-a064e1ce0a6c__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.81.39
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['11682', '11683', '11684', '11685', '11686']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 11682:11682 -p 11683:11683 -p 11684:11684 -p 11685:11685 -p 11686:11686 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=11684 --rest-port=11682 --tcp-port=11683 --discv5-udp-port=11685 --rest-address=0.0.0.0 --nat=extip:172.18.81.39 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2e434b4e4aeee76b79cd28bbac1b1ad79a0e2c3d975ebcfaa185cdf830a2c0b6 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QO5K2YW-DFXh5R9CrVF7ST0hX7z5ilWF1PTCjJNXe6jRatwvs17kHAFYznbwGPmmGIjtteXBSWFVOFaMcQxktbcCgmlkgnY0gmlwhKwSXzuKbXVsdGlhZGRyc5YACASsEl87BqmfAAoErBJfOwapoN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDrR710u7RpMAA7BnBgmArO_QqZ0dWO5uFSB3o3zGp56SDdGNwgqmfg3VkcIKpoYV3YWt1Mgk --lightpushnode=/ip4/172.18.95.59/tcp/43423/p2p/16Uiu2HAmQJnGFV1fpUZRD18uMrA2fBJzu9iBiNcSZEEpbAxUAMzs --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.81.39 waku 5f19c83d5138fee3ddf6ee50ffa3a2bbb4c77a7e6a9494a189523ab60633a4c6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 5f19c83d5138. Setting up logs at ./log/docker/lightpush_node1_2024-11-19_03-46-15__a3dbbf9c-e67e-4ac2-9bdb-a064e1ce0a6c__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/go-waku:latest. REST: 11682
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11682/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QLo6dQpX6a3VMzAphUGIdlICd-UUKKTaeBQRx6igBnyED4djo5q3JFdPu5XaQKcZhk8gdaa_xFaWyTosT9lf-q2GAZNChz7-gmlkgnY0gmlwhKwRAAWCcnODAAMAiXNlY3AyNTZrMaEDY8G2CJpsWmpRVVIZmFUesHKaRxqZQgK8BYVLK3JqskaDdGNwgi2jg3VkcIItpYV3YWt1Mgg","listenAddresses":["/ip4/127.0.0.1/tcp/11683/p2p/16Uiu2HAmKNQ2o5xCt6PSSM2NRi12e2HCNfMeai66r6QYXisYFzxm","/ip4/127.0.0.1/tcp/11684/ws/p2p/16Uiu2HAmKNQ2o5xCt6PSSM2NRi12e2HCNfMeai66r6QYXisYFzxm","/ip4/172.17.0.5/tcp/11683/p2p/16Uiu2HAmKNQ2o5xCt6PSSM2NRi12e2HCNfMeai66r6QYXisYFzxm","/ip4/172.17.0.5/tcp/11684/ws/p2p/16Uiu2HAmKNQ2o5xCt6PSSM2NRi12e2HCNfMeai66r6QYXisYFzxm"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11682/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.95.59/tcp/43423/p2p/16Uiu2HAmQJnGFV1fpUZRD18uMrA2fBJzu9iBiNcSZEEpbAxUAMzs", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11682/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.178.126/tcp/17473/p2p/16Uiu2HAkuRgpWjWCzZR22tBB3GuAioNXBxNUvs6K5sinb2HpUeVz", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43422/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:17472/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11682/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1731987981196958208}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:11682/lightpush/v1/message. Response content: b'lightpush error'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id f047871fe916
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 8a7c4833b899
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container f047871fe916. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 5f19c83d5138
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 8a7c4833b899. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/receiving_node1_2024-11-19_03-46-15__a3dbbf9c-e67e-4ac2-9bdb-a064e1ce0a6c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/receiving_node2_2024-11-19_03-46-15__a3dbbf9c-e67e-4ac2-9bdb-a064e1ce0a6c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/lightpush_node1_2024-11-19_03-46-15__a3dbbf9c-e67e-4ac2-9bdb-a064e1ce0a6c__wakuorg_go-waku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_and_retrieve_100_messages with id: 2024-11-19_03-46-26__0bc2f038-5010-4f4f-9784-f1ee7103dba2
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-11-19_03-46-26__0bc2f038-5010-4f4f-9784-f1ee7103dba2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.208.60
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['10342', '10343', '10344', '10345', '10346']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 10342:10342 -p 10343:10343 -p 10344:10344 -p 10345:10345 -p 10346:10346 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=10344 --rest-port=10342 --tcp-port=10343 --discv5-udp-port=10345 --rest-address=0.0.0.0 --nat=extip:172.18.208.60 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1ecb7caac2564e7fb8a811d15de98ff6a026b5bbfcfc7bec811f1d83be1b1579 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=10346 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.208.60 waku 1a16659d52c85d7ac13bd31b339d8f15714d3c56e70502424ffb66e05630339d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 1a16659d52c8. Setting up logs at ./log/docker/receiving_node1_2024-11-19_03-46-26__0bc2f038-5010-4f4f-9784-f1ee7103dba2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 10342
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 5f19c83d5138. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10342/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10342/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.208.60/tcp/10343/p2p/16Uiu2HAmJQMQKz3ngaFMotNTpL8ypj8juVaFscPFPotdt3v9xJfK","/ip4/172.18.208.60/tcp/10344/ws/p2p/16Uiu2HAmJQMQKz3ngaFMotNTpL8ypj8juVaFscPFPotdt3v9xJfK"],"enrUri":"enr:-L24QJPkTBLkZl1ex8a7eMoSVmqEU9D09TGIqlRzJnF7mHoWEJam1yvOD6i-aNYG5I8_UO8-ARzi2sjYMbQr5gy7n0kCgmlkgnY0gmlwhKwS0DyKbXVsdGlhZGRyc5YACASsEtA8BihnAAoErBLQPAYoaN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDVWY2ozYt6u9-wFLWZNLul3r_0-jMtEQfo2DzuD-8p0qDdGNwgihng3VkcIIoaYV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-11-19_03-46-26__0bc2f038-5010-4f4f-9784-f1ee7103dba2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.231.78
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['32201', '32202', '32203', '32204', '32205']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 32201:32201 -p 32202:32202 -p 32203:32203 -p 32204:32204 -p 32205:32205 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32203 --rest-port=32201 --tcp-port=32202 --discv5-udp-port=32204 --rest-address=0.0.0.0 --nat=extip:172.18.231.78 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dcccf5ed93d2df6fa41cddb9e7cd25d69a6aacf7fc2e34e341bcfbedbdddfeff --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32205 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.231.78 waku 5fe28a9919513c2c31df071e550368cb18f32d61024e0c0e9f689ba0c0674294
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 5fe28a991951. Setting up logs at ./log/docker/receiving_node2_2024-11-19_03-46-26__0bc2f038-5010-4f4f-9784-f1ee7103dba2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 32201
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32201/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:32201/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.231.78/tcp/32202/p2p/16Uiu2HAm2bG2GuETY5CLbMmtLnBhwxFSa7ZAmiPGkJ1ixqHCKHSJ","/ip4/172.18.231.78/tcp/32203/ws/p2p/16Uiu2HAm2bG2GuETY5CLbMmtLnBhwxFSa7ZAmiPGkJ1ixqHCKHSJ"],"enrUri":"enr:-L24QFoniMm3cWpUglRtR7GkWlsui3gS_tuO8LqVn52SLIIWc-iOu2iqh9XxpI49UF2M6lUxqmHt_xljNm2tWkp2pi4CgmlkgnY0gmlwhKwS506KbXVsdGlhZGRyc5YACASsEudOBn3KAAoErBLnTgZ9y90DgnJzhQADAQAAiXNlY3AyNTZrMaECanaHLze9bJJ9LBufH1Pnm9opuDohM1YCUTM5saxHWvuDdGNwgn3Kg3VkcIJ9zIV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32201/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.208.60/tcp/10343/p2p/16Uiu2HAmJQMQKz3ngaFMotNTpL8ypj8juVaFscPFPotdt3v9xJfK"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-11-19_03-46-26__0bc2f038-5010-4f4f-9784-f1ee7103dba2__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.224.112
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['27354', '27355', '27356', '27357', '27358']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 27354:27354 -p 27355:27355 -p 27356:27356 -p 27357:27357 -p 27358:27358 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=27356 --rest-port=27354 --tcp-port=27355 --discv5-udp-port=27357 --rest-address=0.0.0.0 --nat=extip:172.18.224.112 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8bc3f83a0735230ca1d3c92e7e84acbc41dcc4a8a8a2cecdbb28f97147cbffae --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QJPkTBLkZl1ex8a7eMoSVmqEU9D09TGIqlRzJnF7mHoWEJam1yvOD6i-aNYG5I8_UO8-ARzi2sjYMbQr5gy7n0kCgmlkgnY0gmlwhKwS0DyKbXVsdGlhZGRyc5YACASsEtA8BihnAAoErBLQPAYoaN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDVWY2ozYt6u9-wFLWZNLul3r_0-jMtEQfo2DzuD-8p0qDdGNwgihng3VkcIIoaYV3YWt1Mgk --lightpushnode=/ip4/172.18.208.60/tcp/10343/p2p/16Uiu2HAmJQMQKz3ngaFMotNTpL8ypj8juVaFscPFPotdt3v9xJfK --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.224.112 waku d58c9ff03a1ce4c30ac6ea732604c8d89c57e2e08ff016d5dc48f03eab963070
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID d58c9ff03a1c. Setting up logs at ./log/docker/lightpush_node1_2024-11-19_03-46-26__0bc2f038-5010-4f4f-9784-f1ee7103dba2__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/go-waku:latest. REST: 27354
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27354/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QDSd65UDPs4XOt3cgGEmaDWNeK8R3o5C5kYRDkXng12WA9wC3C9Pi55fvAn83_ntuQVjBYaL_s1O3xT3i47l45qGAZNCh2gxgmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaEDVHVUp51RQYcD89k-CuDggiJLDIlx3vbiSxSvBAXZFzmDdGNwgmrbg3VkcIJq3YV3YWt1Mgg","listenAddresses":["/ip4/127.0.0.1/tcp/27355/p2p/16Uiu2HAmJLgN8RBz2aoHtnJq52c92y5ZfcEQne7cYrLNyZk2jNWt","/ip4/127.0.0.1/tcp/27356/ws/p2p/16Uiu2HAmJLgN8RBz2aoHtnJq52c92y5ZfcEQne7cYrLNyZk2jNWt","/ip4/172.17.0.2/tcp/27355/p2p/16Uiu2HAmJLgN8RBz2aoHtnJq52c92y5ZfcEQne7cYrLNyZk2jNWt","/ip4/172.17.0.2/tcp/27356/ws/p2p/16Uiu2HAmJLgN8RBz2aoHtnJq52c92y5ZfcEQne7cYrLNyZk2jNWt"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27354/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.208.60/tcp/10343/p2p/16Uiu2HAmJQMQKz3ngaFMotNTpL8ypj8juVaFscPFPotdt3v9xJfK", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27354/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.231.78/tcp/32202/p2p/16Uiu2HAm2bG2GuETY5CLbMmtLnBhwxFSa7ZAmiPGkJ1ixqHCKHSJ", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10342/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:32201/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27354/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1731987991847758080}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:27354/lightpush/v1/message. Response content: b'lightpush error'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 1a16659d52c8
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 5fe28a991951
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 1a16659d52c8. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id d58c9ff03a1c
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 5fe28a991951. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/receiving_node2_2024-11-19_03-46-26__0bc2f038-5010-4f4f-9784-f1ee7103dba2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/lightpush_node1_2024-11-19_03-46-26__0bc2f038-5010-4f4f-9784-f1ee7103dba2__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/receiving_node1_2024-11-19_03-46-26__0bc2f038-5010-4f4f-9784-f1ee7103dba2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_and_retrieve_100_messages with id: 2024-11-19_03-46-38__82c81c2f-5319-42bc-a7a1-c457af283626
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-11-19_03-46-38__82c81c2f-5319-42bc-a7a1-c457af283626__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.179.213
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['22654', '22655', '22656', '22657', '22658']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 22654:22654 -p 22655:22655 -p 22656:22656 -p 22657:22657 -p 22658:22658 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22656 --rest-port=22654 --tcp-port=22655 --discv5-udp-port=22657 --rest-address=0.0.0.0 --nat=extip:172.18.179.213 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c5dbf461b7e5e1c2cce64c19f06e5babb40f404a045bce2c0319ccf7e7a74fff --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22658 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.179.213 waku 039e6a0f4ac42f5eca1f3b1ef0178e7c2c3ba24cde19442a85d5c821ce927f86
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 039e6a0f4ac4. Setting up logs at ./log/docker/receiving_node1_2024-11-19_03-46-38__82c81c2f-5319-42bc-a7a1-c457af283626__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 22654
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container d58c9ff03a1c. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22654/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22654/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.179.213/tcp/22655/p2p/16Uiu2HAmJGTcB8XFzbjbkwMJHQRPNEUkmBqwz5KUxKw4LLyc9isZ","/ip4/172.18.179.213/tcp/22656/ws/p2p/16Uiu2HAmJGTcB8XFzbjbkwMJHQRPNEUkmBqwz5KUxKw4LLyc9isZ"],"enrUri":"enr:-L24QGfIPeckMUWA6Pen3kCAk5OZnV0-DjAnvBADF97VGT2Nbh4WgW_93d0DwHV7FyxSANwgdCj1dHexC4L_s39vexsCgmlkgnY0gmlwhKwSs9WKbXVsdGlhZGRyc5YACASsErPVBlh_AAoErBKz1QZYgN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDU2CVBxq26za7lHjKjTL04uo7UpmaQI3Avn29EEZhCOiDdGNwglh_g3VkcIJYgYV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-11-19_03-46-38__82c81c2f-5319-42bc-a7a1-c457af283626__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.1.93
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['58408', '58409', '58410', '58411', '58412']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 58408:58408 -p 58409:58409 -p 58410:58410 -p 58411:58411 -p 58412:58412 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=58410 --rest-port=58408 --tcp-port=58409 --discv5-udp-port=58411 --rest-address=0.0.0.0 --nat=extip:172.18.1.93 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4446327f78901a600fce80fbb1aa87f0746a9cd4a7aa7135dce51ef499fa0b46 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=58412 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.1.93 waku 25565f957ef81e60b216ab6282aa240cf6db268522a70b70690a6e2395bb14f0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 25565f957ef8. Setting up logs at ./log/docker/receiving_node2_2024-11-19_03-46-38__82c81c2f-5319-42bc-a7a1-c457af283626__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 58408
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58408/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58408/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.1.93/tcp/58409/p2p/16Uiu2HAmFhewBNKQiqa8xt6EabZS9c5uyFSpKg85xBwyAcEYimFR","/ip4/172.18.1.93/tcp/58410/ws/p2p/16Uiu2HAmFhewBNKQiqa8xt6EabZS9c5uyFSpKg85xBwyAcEYimFR"],"enrUri":"enr:-L24QB2sNaysl8FSscVxSUziJhl4-iKyw-DuS8Bb94sOVXSmRhEKRr4EphO72MMrejA1QdB2IA94J4AjT9DMXq8-kjUCgmlkgnY0gmlwhKwSAV2KbXVsdGlhZGRyc5YACASsEgFdBuQpAAoErBIBXQbkKt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDLUHZjSWPj298Q06Tp2dlaXPIyPupJNUFNpGpsmgwkSyDdGNwguQpg3VkcILkK4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:58408/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.179.213/tcp/22655/p2p/16Uiu2HAmJGTcB8XFzbjbkwMJHQRPNEUkmBqwz5KUxKw4LLyc9isZ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-11-19_03-46-38__82c81c2f-5319-42bc-a7a1-c457af283626__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.220.138
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['24787', '24788', '24789', '24790', '24791']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 24787:24787 -p 24788:24788 -p 24789:24789 -p 24790:24790 -p 24791:24791 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=24789 --rest-port=24787 --tcp-port=24788 --discv5-udp-port=24790 --rest-address=0.0.0.0 --nat=extip:172.18.220.138 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9acebce191edf6a7b0061bf1a37db41d8d2cdabd688c76b03b53fb4fc4d39329 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QGfIPeckMUWA6Pen3kCAk5OZnV0-DjAnvBADF97VGT2Nbh4WgW_93d0DwHV7FyxSANwgdCj1dHexC4L_s39vexsCgmlkgnY0gmlwhKwSs9WKbXVsdGlhZGRyc5YACASsErPVBlh_AAoErBKz1QZYgN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDU2CVBxq26za7lHjKjTL04uo7UpmaQI3Avn29EEZhCOiDdGNwglh_g3VkcIJYgYV3YWt1Mgk --lightpushnode=/ip4/172.18.179.213/tcp/22655/p2p/16Uiu2HAmJGTcB8XFzbjbkwMJHQRPNEUkmBqwz5KUxKw4LLyc9isZ --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.220.138 waku 461f2d8bd56a90932f5794653eeb1c4d594be2a8adaa4780560cf96a5e09e0db
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 461f2d8bd56a. Setting up logs at ./log/docker/lightpush_node1_2024-11-19_03-46-38__82c81c2f-5319-42bc-a7a1-c457af283626__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/go-waku:latest. REST: 24787
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24787/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QN_v7GxtBAwsR2_do6qjo08kZ8LL3-d6AG43W_iOv0ZPARM81LgYQQWZVMn5ZAM7nYcWY707tuHTKhR_w3bWchiGAZNCh5VIgmlkgnY0gmlwhKwRAAeCcnODAAMAiXNlY3AyNTZrMaEDbacOQaTrhjlS_eQ9FWoKMpKn2bOL0IhrWvT-ZAw0deODdGNwgmDUg3VkcIJg1oV3YWt1Mgg","listenAddresses":["/ip4/127.0.0.1/tcp/24788/p2p/16Uiu2HAmL32Xxb6SukRhL5S61FtYJPDdBQRXVjELUMMFywPNg122","/ip4/127.0.0.1/tcp/24789/ws/p2p/16Uiu2HAmL32Xxb6SukRhL5S61FtYJPDdBQRXVjELUMMFywPNg122","/ip4/172.17.0.7/tcp/24788/p2p/16Uiu2HAmL32Xxb6SukRhL5S61FtYJPDdBQRXVjELUMMFywPNg122","/ip4/172.17.0.7/tcp/24789/ws/p2p/16Uiu2HAmL32Xxb6SukRhL5S61FtYJPDdBQRXVjELUMMFywPNg122"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24787/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.179.213/tcp/22655/p2p/16Uiu2HAmJGTcB8XFzbjbkwMJHQRPNEUkmBqwz5KUxKw4LLyc9isZ", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24787/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.1.93/tcp/58409/p2p/16Uiu2HAmFhewBNKQiqa8xt6EabZS9c5uyFSpKg85xBwyAcEYimFR", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22654/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:58408/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24787/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1731988003324332544}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:24787/lightpush/v1/message. Response content: b'lightpush error'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 039e6a0f4ac4
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 25565f957ef8
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 039e6a0f4ac4. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 461f2d8bd56a
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 25565f957ef8. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/receiving_node2_2024-11-19_03-46-38__82c81c2f-5319-42bc-a7a1-c457af283626__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/lightpush_node1_2024-11-19_03-46-38__82c81c2f-5319-42bc-a7a1-c457af283626__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/receiving_node1_2024-11-19_03-46-38__82c81c2f-5319-42bc-a7a1-c457af283626__wakuorg_nwaku:latest.log