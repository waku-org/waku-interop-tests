{"uid":"f9ec1b71e37ca10c","name":"test_main_node_only_lightpush__peer_only_lightpush","fullName":"tests.light_push.test_running_nodes.TestRunningNodes#test_main_node_only_lightpush__peer_only_lightpush","historyId":"4bfb1c2cf45e835824529e585e1980f9","time":{"start":1731988031116,"stop":1731988034456,"duration":3340},"status":"failed","statusMessage":"AssertionError: assert ('no waku relay found' in \"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:64722/lightpush/v1/message with response: b'lightpush error'\" or 'failed to negotiate protocol: protocols not supported' in \"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:64722/lightpush/v1/message with response: b'lightpush error'\")\n +  where \"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:64722/lightpush/v1/message with response: b'lightpush error'\" = str(Exception(\"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:64722/lightpush/v1/message with response: b'lightpush error'\"))\n +  and   \"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:64722/lightpush/v1/message with response: b'lightpush error'\" = str(Exception(\"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:64722/lightpush/v1/message with response: b'lightpush error'\"))","statusTrace":"src/node/api_clients/base_client.py:14: in make_request\n    response.raise_for_status()\n/opt/hostedtoolcache/Python/3.12.7/x64/lib/python3.12/site-packages/requests/models.py:1021: in raise_for_status\n    raise HTTPError(http_error_msg, response=self)\nE   requests.exceptions.HTTPError: 503 Server Error: Service Unavailable for url: http://127.0.0.1:64722/lightpush/v1/message\n\nDuring handling of the above exception, another exception occurred:\ntests/light_push/test_running_nodes.py:10: in test_main_node_only_lightpush__peer_only_lightpush\n    self.light_push_node1.send_light_push_message(self.create_payload())\nsrc/node/waku_node.py:346: in send_light_push_message\n    return self._api.send_light_push_message(payload)\nsrc/node/api_clients/rest.py:57: in send_light_push_message\n    return self.rest_call(\"post\", \"lightpush/v1/message\", json.dumps(payload))\nsrc/node/api_clients/rest.py:16: in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\nsrc/node/api_clients/base_client.py:17: in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\nE   Exception: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:64722/lightpush/v1/message with response: b'lightpush error'\n\nDuring handling of the above exception, another exception occurred:\ntests/light_push/test_running_nodes.py:13: in test_main_node_only_lightpush__peer_only_lightpush\n    assert \"no waku relay found\" in str(ex) or \"failed to negotiate protocol: protocols not supported\" in str(ex)\nE   assert ('no waku relay found' in \"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:64722/lightpush/v1/message with response: b'lightpush error'\" or 'failed to negotiate protocol: protocols not supported' in \"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:64722/lightpush/v1/message with response: b'lightpush error'\")\nE    +  where \"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:64722/lightpush/v1/message with response: b'lightpush error'\" = str(Exception(\"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:64722/lightpush/v1/message with response: b'lightpush error'\"))\nE    +  and   \"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:64722/lightpush/v1/message with response: b'lightpush error'\" = str(Exception(\"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:64722/lightpush/v1/message with response: b'lightpush error'\"))","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":2,"retriesStatusChange":false,"beforeStages":[{"name":"set_allure_env_variables","time":{"start":1731985998549,"stop":1731985998549,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes","time":{"start":1731988031115,"stop":1731988031115,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_setup","time":{"start":1731988031115,"stop":1731988031115,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_id","time":{"start":1731988031115,"stop":1731988031115,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"common_setup","time":{"start":1731988031115,"stop":1731988031115,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"light_push_setup","time":{"start":1731988031115,"stop":1731988031116,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail","time":{"start":1731988031115,"stop":1731988031115,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"check_waku_log_errors","time":{"start":1731988031115,"stop":1731988031115,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: assert ('no waku relay found' in \"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:64722/lightpush/v1/message with response: b'lightpush error'\" or 'failed to negotiate protocol: protocols not supported' in \"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:64722/lightpush/v1/message with response: b'lightpush error'\")\n +  where \"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:64722/lightpush/v1/message with response: b'lightpush error'\" = str(Exception(\"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:64722/lightpush/v1/message with response: b'lightpush error'\"))\n +  and   \"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:64722/lightpush/v1/message with response: b'lightpush error'\" = str(Exception(\"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:64722/lightpush/v1/message with response: b'lightpush error'\"))","statusTrace":"src/node/api_clients/base_client.py:14: in make_request\n    response.raise_for_status()\n/opt/hostedtoolcache/Python/3.12.7/x64/lib/python3.12/site-packages/requests/models.py:1021: in raise_for_status\n    raise HTTPError(http_error_msg, response=self)\nE   requests.exceptions.HTTPError: 503 Server Error: Service Unavailable for url: http://127.0.0.1:64722/lightpush/v1/message\n\nDuring handling of the above exception, another exception occurred:\ntests/light_push/test_running_nodes.py:10: in test_main_node_only_lightpush__peer_only_lightpush\n    self.light_push_node1.send_light_push_message(self.create_payload())\nsrc/node/waku_node.py:346: in send_light_push_message\n    return self._api.send_light_push_message(payload)\nsrc/node/api_clients/rest.py:57: in send_light_push_message\n    return self.rest_call(\"post\", \"lightpush/v1/message\", json.dumps(payload))\nsrc/node/api_clients/rest.py:16: in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\nsrc/node/api_clients/base_client.py:17: in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\nE   Exception: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:64722/lightpush/v1/message with response: b'lightpush error'\n\nDuring handling of the above exception, another exception occurred:\ntests/light_push/test_running_nodes.py:13: in test_main_node_only_lightpush__peer_only_lightpush\n    assert \"no waku relay found\" in str(ex) or \"failed to negotiate protocol: protocols not supported\" in str(ex)\nE   assert ('no waku relay found' in \"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:64722/lightpush/v1/message with response: b'lightpush error'\" or 'failed to negotiate protocol: protocols not supported' in \"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:64722/lightpush/v1/message with response: b'lightpush error'\")\nE    +  where \"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:64722/lightpush/v1/message with response: b'lightpush error'\" = str(Exception(\"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:64722/lightpush/v1/message with response: b'lightpush error'\"))\nE    +  and   \"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:64722/lightpush/v1/message with response: b'lightpush error'\" = str(Exception(\"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:64722/lightpush/v1/message with response: b'lightpush error'\"))","steps":[{"name":"setup_first_receiving_node","time":{"start":1731988031116,"stop":1731988032831,"duration":1715},"status":"passed","steps":[{"name":"start_receiving_node","time":{"start":1731988031116,"stop":1731988032831,"duration":1715},"status":"passed","steps":[{"name":"add_node_peer","time":{"start":1731988032830,"stop":1731988032831,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"args","value":"(<tests.light_push.test_running_nodes.TestRunningNodes object at 0x7f63d66875c0>, <src.node.waku_node.WakuNode object at 0x7f63d6065b20>, [])"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"image","value":"'wakuorg/nwaku:latest'"},{"name":"node_index","value":"1"},{"name":"lightpush","value":"'true'"},{"name":"relay","value":"'false'"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"lightpush","value":"'true'"},{"name":"relay","value":"'false'"}],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"setup_first_lightpush_node","time":{"start":1731988032832,"stop":1731988034413,"duration":1581},"status":"passed","steps":[{"name":"setup_lightpush_node","time":{"start":1731988032832,"stop":1731988034413,"duration":1581},"status":"passed","steps":[{"name":"add_node_peer","time":{"start":1731988034395,"stop":1731988034413,"duration":18},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"args","value":"(<tests.light_push.test_running_nodes.TestRunningNodes object at 0x7f63d66875c0>, <src.node.waku_node.WakuNode object at 0x7f63d61d7e30>, ['/ip4/172.18.104.146/tcp/33638/p2p/16Uiu2HAmDG2hri8PUPSzbmXQYiTgszpnqDooumhzaf6oto511chJ'])"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"image","value":"'wakuorg/go-waku:latest'"},{"name":"node_index","value":"1"},{"name":"lightpush","value":"'true'"},{"name":"relay","value":"'false'"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"lightpush","value":"'true'"},{"name":"relay","value":"'false'"}],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"create_payload","time":{"start":1731988034414,"stop":1731988034414,"duration":0},"status":"passed","steps":[{"name":"create_message","time":{"start":1731988034414,"stop":1731988034414,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"pubsub_topic","value":"None"},{"name":"message","value":"None"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"f09d982c3c03f905","name":"log","source":"f09d982c3c03f905.txt","type":"text/plain","size":31751}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":8,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"test_setup::0","time":{"start":1731988034573,"stop":1731988034582,"duration":9},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes::0","time":{"start":1731988034583,"stop":1731988037137,"duration":2554},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"check_waku_log_errors::0","time":{"start":1731988037137,"stop":1731988037170,"duration":33},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail::0","time":{"start":1731988037171,"stop":1731988037176,"duration":5},"status":"passed","steps":[],"attachments":[{"uid":"dfdcd2b612249b56","name":"receiving_node1_2024-11-19_03-47-11__a07c06b8-bc70-4c2e-9309-7c50e84a18c6__wakuorg_nwaku:latest.log","source":"dfdcd2b612249b56.txt","type":"text/plain","size":205808},{"uid":"8cfc4cbc7b91b326","name":"lightpush_node1_2024-11-19_03-47-11__a07c06b8-bc70-4c2e-9309-7c50e84a18c6__wakuorg_go-waku:latest.log","source":"8cfc4cbc7b91b326.txt","type":"text/plain","size":120778}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"set_allure_env_variables::0","time":{"start":1731988780806,"stop":1731988780806,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"tests.light_push"},{"name":"suite","value":"test_running_nodes"},{"name":"subSuite","value":"TestRunningNodes"},{"name":"host","value":"fv-az700-143"},{"name":"thread","value":"2248-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.light_push.test_running_nodes"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"42a8ac14045868e1","status":"failed","statusDetails":"AssertionError: assert ('no waku relay found' in \"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:49735/lightpush/v1/message with response: b'lightpush error'\" or 'failed to negotiate protocol: protocols not supported' in \"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:49735/lightpush/v1/message with response: b'lightpush error'\")\n +  where \"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:49735/lightpush/v1/message with response: b'lightpush error'\" = str(Exception(\"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:49735/lightpush/v1/message with response: b'lightpush error'\"))\n +  and   \"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:49735/lightpush/v1/message with response: b'lightpush error'\" = str(Exception(\"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:49735/lightpush/v1/message with response: b'lightpush error'\"))","time":{"start":1731988021706,"stop":1731988025142,"duration":3436}},{"uid":"3e81a1ba825ce47e","status":"failed","statusDetails":"AssertionError: assert ('no waku relay found' in \"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:5582/lightpush/v1/message with response: b'lightpush error'\" or 'failed to negotiate protocol: protocols not supported' in \"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:5582/lightpush/v1/message with response: b'lightpush error'\")\n +  where \"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:5582/lightpush/v1/message with response: b'lightpush error'\" = str(Exception(\"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:5582/lightpush/v1/message with response: b'lightpush error'\"))\n +  and   \"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:5582/lightpush/v1/message with response: b'lightpush error'\" = str(Exception(\"Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:5582/lightpush/v1/message with response: b'lightpush error'\"))","time":{"start":1731988015102,"stop":1731988018904,"duration":3802}}],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":3,"broken":4,"skipped":0,"passed":275,"unknown":0,"total":282},"items":[{"uid":"33e9b3f3116360eb","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/363//#testresult/33e9b3f3116360eb","status":"passed","time":{"start":1731926477589,"stop":1731926481232,"duration":3643}},{"uid":"347ee1b1299f3866","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/362//#testresult/347ee1b1299f3866","status":"passed","time":{"start":1731924580411,"stop":1731924583213,"duration":2802}},{"uid":"7c7392d9f330b08e","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/361//#testresult/7c7392d9f330b08e","status":"passed","time":{"start":1731900262364,"stop":1731900274859,"duration":12495}},{"uid":"9fc24aecd7fd495","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/360//#testresult/9fc24aecd7fd495","status":"passed","time":{"start":1731813907153,"stop":1731813910877,"duration":3724}},{"uid":"d39dcd7e6d0a2915","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/359//#testresult/d39dcd7e6d0a2915","status":"passed","time":{"start":1731727279365,"stop":1731727292098,"duration":12733}},{"uid":"4ca72c4670260f53","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/358//#testresult/4ca72c4670260f53","status":"passed","time":{"start":1731640885302,"stop":1731640888753,"duration":3451}},{"uid":"2f5c2fe799e6e156","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/357//#testresult/2f5c2fe799e6e156","status":"passed","time":{"start":1731554365094,"stop":1731554368311,"duration":3217}},{"uid":"258e0591a62ee358","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/356//#testresult/258e0591a62ee358","status":"passed","time":{"start":1731467788307,"stop":1731467791182,"duration":2875}},{"uid":"106ca7fffd55a0e0","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/355//#testresult/106ca7fffd55a0e0","status":"passed","time":{"start":1731381231884,"stop":1731381235598,"duration":3714}},{"uid":"964f5fedb6e255a4","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/354//#testresult/964f5fedb6e255a4","status":"passed","time":{"start":1731295064811,"stop":1731295068154,"duration":3343}},{"uid":"4aae53a05c3e1cb5","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/353//#testresult/4aae53a05c3e1cb5","status":"passed","time":{"start":1731223697368,"stop":1731223700516,"duration":3148}},{"uid":"46f5a1c775a846aa","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/352//#testresult/46f5a1c775a846aa","status":"passed","time":{"start":1731208555934,"stop":1731208560225,"duration":4291}},{"uid":"644ecb04c913228a","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/351//#testresult/644ecb04c913228a","status":"passed","time":{"start":1731121960249,"stop":1731121964032,"duration":3783}},{"uid":"4a95d5feeeedcac1","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/350//#testresult/4a95d5feeeedcac1","status":"passed","time":{"start":1731035655437,"stop":1731035658857,"duration":3420}},{"uid":"6682ce619f7c3662","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/349//#testresult/6682ce619f7c3662","status":"passed","time":{"start":1730991075458,"stop":1730991078799,"duration":3341}},{"uid":"1a250a584a3d5d9f","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/348//#testresult/1a250a584a3d5d9f","status":"passed","time":{"start":1730983099464,"stop":1730983102923,"duration":3459}},{"uid":"88edf9d377f4648b","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/347//#testresult/88edf9d377f4648b","status":"passed","time":{"start":1730981009783,"stop":1730981012960,"duration":3177}},{"uid":"7a98ac8d5fd37bf2","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/346//#testresult/7a98ac8d5fd37bf2","status":"passed","time":{"start":1730980097838,"stop":1730980100673,"duration":2835}},{"uid":"4a5e1af602d4448c","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/345//#testresult/4a5e1af602d4448c","status":"passed","time":{"start":1730980063477,"stop":1730980075845,"duration":12368}},{"uid":"137f177c1e64eaf6","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/342//#testresult/137f177c1e64eaf6","status":"passed","time":{"start":1730949278555,"stop":1730949281517,"duration":2962}}]},"tags":[]},"source":"f9ec1b71e37ca10c.json","parameterValues":[]}