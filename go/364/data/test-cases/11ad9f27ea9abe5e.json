{"uid":"11ad9f27ea9abe5e","name":"test_light_push_after_node_pauses_and_pauses","fullName":"tests.light_push.test_publish.TestLightPushPublish#test_light_push_after_node_pauses_and_pauses","historyId":"74596ad5d1a9a3d1c903974d4f8e5d72","time":{"start":1731988022526,"stop":1731988022548,"duration":22},"status":"broken","statusMessage":"Exception: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:20578/lightpush/v1/message with response: b'lightpush error'","statusTrace":"src/node/api_clients/base_client.py:14: in make_request\n    response.raise_for_status()\n/opt/hostedtoolcache/Python/3.12.7/x64/lib/python3.12/site-packages/requests/models.py:1021: in raise_for_status\n    raise HTTPError(http_error_msg, response=self)\nE   requests.exceptions.HTTPError: 503 Server Error: Service Unavailable for url: http://127.0.0.1:20578/lightpush/v1/message\n\nDuring handling of the above exception, another exception occurred:\ntests/light_push/test_publish.py:252: in test_light_push_after_node_pauses_and_pauses\n    self.check_light_pushed_message_reaches_receiving_peer()\nsrc/steps/light_push.py:122: in check_light_pushed_message_reaches_receiving_peer\n    sender.send_light_push_message(payload)\nsrc/node/waku_node.py:346: in send_light_push_message\n    return self._api.send_light_push_message(payload)\nsrc/node/api_clients/rest.py:57: in send_light_push_message\n    return self.rest_call(\"post\", \"lightpush/v1/message\", json.dumps(payload))\nsrc/node/api_clients/rest.py:16: in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\nsrc/node/api_clients/base_client.py:17: in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\nE   Exception: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:20578/lightpush/v1/message with response: b'lightpush error'","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":2,"retriesStatusChange":false,"beforeStages":[{"name":"set_allure_env_variables","time":{"start":1731985999037,"stop":1731985999038,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"check_waku_log_errors","time":{"start":1731988016031,"stop":1731988016031,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes","time":{"start":1731988016031,"stop":1731988016031,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_id","time":{"start":1731988016031,"stop":1731988016032,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail","time":{"start":1731988016031,"stop":1731988016031,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"light_push_setup","time":{"start":1731988016032,"stop":1731988016033,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_setup","time":{"start":1731988016032,"stop":1731988016032,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"common_setup","time":{"start":1731988016032,"stop":1731988016032,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"light_push_publish_setup","time":{"start":1731988016033,"stop":1731988022525,"duration":6492},"status":"passed","steps":[{"name":"setup_first_receiving_node","time":{"start":1731988016033,"stop":1731988017519,"duration":1486},"status":"passed","steps":[{"name":"start_receiving_node","time":{"start":1731988016033,"stop":1731988017519,"duration":1486},"status":"passed","steps":[{"name":"add_node_peer","time":{"start":1731988017519,"stop":1731988017519,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"args","value":"(<tests.light_push.test_publish.TestLightPushPublish object at 0x7f20976ce2a0>, <src.node.waku_node.WakuNode object at 0x7f2085f828a0>, [])"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"image","value":"'wakuorg/nwaku:latest'"},{"name":"node_index","value":"1"},{"name":"lightpush","value":"'true'"},{"name":"relay","value":"'true'"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"lightpush","value":"'true'"},{"name":"relay","value":"'true'"}],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"setup_second_receiving_node","time":{"start":1731988017519,"stop":1731988020761,"duration":3242},"status":"passed","steps":[{"name":"start_receiving_node","time":{"start":1731988017519,"stop":1731988020761,"duration":3242},"status":"passed","steps":[{"name":"add_node_peer","time":{"start":1731988020711,"stop":1731988020761,"duration":50},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"args","value":"(<tests.light_push.test_publish.TestLightPushPublish object at 0x7f20976ce2a0>, <src.node.waku_node.WakuNode object at 0x7f2094126840>, ['/ip4/172.18.223.51/tcp/2828/p2p/16Uiu2HAmTQ16PTmXcd9Xw6fxFpWysSjhGDMfTfRpY7iexS6FGyTF'])"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"image","value":"'wakuorg/nwaku:latest'"},{"name":"node_index","value":"2"},{"name":"lightpush","value":"'false'"},{"name":"relay","value":"'true'"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"lightpush","value":"'false'"},{"name":"relay","value":"'true'"}],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"setup_first_lightpush_node","time":{"start":1731988020761,"stop":1731988022514,"duration":1753},"status":"passed","steps":[{"name":"setup_lightpush_node","time":{"start":1731988020761,"stop":1731988022514,"duration":1753},"status":"passed","steps":[{"name":"add_node_peer","time":{"start":1731988022479,"stop":1731988022514,"duration":35},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"args","value":"(<tests.light_push.test_publish.TestLightPushPublish object at 0x7f20976ce2a0>, <src.node.waku_node.WakuNode object at 0x7f20971eec30>, ['/ip4/172.18.223.51/tcp/2828/p2p/16Uiu2HAmTQ16PTmXcd9Xw6fxFpWysSjhGDMfTfRpY7iexS6FGyTF', '/ip4/172.18.141.232/tcp/25749/p2p/16Uiu2HAmMJDFkvhNJSzNtEMTFxYWJMRF6eB5ZJEa9NHiCo8xWvoA'])"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"image","value":"'wakuorg/go-waku:latest'"},{"name":"node_index","value":"1"},{"name":"lightpush","value":"'true'"},{"name":"relay","value":"'false'"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"lightpush","value":"'true'"},{"name":"relay","value":"'false'"}],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"subscribe_to_pubsub_topics_via_relay","time":{"start":1731988022514,"stop":1731988022525,"duration":11},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node","value":"None"},{"name":"pubsub_topics","value":"None"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":10,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"testStage":{"status":"broken","statusMessage":"Exception: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:20578/lightpush/v1/message with response: b'lightpush error'","statusTrace":"src/node/api_clients/base_client.py:14: in make_request\n    response.raise_for_status()\n/opt/hostedtoolcache/Python/3.12.7/x64/lib/python3.12/site-packages/requests/models.py:1021: in raise_for_status\n    raise HTTPError(http_error_msg, response=self)\nE   requests.exceptions.HTTPError: 503 Server Error: Service Unavailable for url: http://127.0.0.1:20578/lightpush/v1/message\n\nDuring handling of the above exception, another exception occurred:\ntests/light_push/test_publish.py:252: in test_light_push_after_node_pauses_and_pauses\n    self.check_light_pushed_message_reaches_receiving_peer()\nsrc/steps/light_push.py:122: in check_light_pushed_message_reaches_receiving_peer\n    sender.send_light_push_message(payload)\nsrc/node/waku_node.py:346: in send_light_push_message\n    return self._api.send_light_push_message(payload)\nsrc/node/api_clients/rest.py:57: in send_light_push_message\n    return self.rest_call(\"post\", \"lightpush/v1/message\", json.dumps(payload))\nsrc/node/api_clients/rest.py:16: in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\nsrc/node/api_clients/base_client.py:17: in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\nE   Exception: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:20578/lightpush/v1/message with response: b'lightpush error'","steps":[{"name":"check_light_pushed_message_reaches_receiving_peer","time":{"start":1731988022526,"stop":1731988022546,"duration":20},"status":"broken","statusMessage":"Exception: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:20578/lightpush/v1/message with response: b'lightpush error'\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.7/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/light_push.py\", line 122, in check_light_pushed_message_reaches_receiving_peer\n    sender.send_light_push_message(payload)\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/waku_node.py\", line 346, in send_light_push_message\n    return self._api.send_light_push_message(payload)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 57, in send_light_push_message\n    return self.rest_call(\"post\", \"lightpush/v1/message\", json.dumps(payload))\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 16, in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/base_client.py\", line 17, in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\n","steps":[{"name":"create_payload","time":{"start":1731988022527,"stop":1731988022527,"duration":0},"status":"passed","steps":[{"name":"create_message","time":{"start":1731988022527,"stop":1731988022527,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"pubsub_topic","value":"'/waku/2/rs/3/0'"},{"name":"message","value":"None"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"pubsub_topic","value":"None"},{"name":"message","value":"None"},{"name":"message_propagation_delay","value":"0.1"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":true,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"667a89223c436fce","name":"log","source":"667a89223c436fce.txt","type":"text/plain","size":50683}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":3,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"test_setup::0","time":{"start":1731988022624,"stop":1731988022634,"duration":10},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes::0","time":{"start":1731988022635,"stop":1731988029731,"duration":7096},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"check_waku_log_errors::0","time":{"start":1731988029732,"stop":1731988029766,"duration":34},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail::0","time":{"start":1731988029766,"stop":1731988029770,"duration":4},"status":"passed","steps":[],"attachments":[{"uid":"c2d7332b7c20348b","name":"receiving_node2_2024-11-19_03-46-56__10902b11-3d29-421c-91f0-16f9419fd73b__wakuorg_nwaku:latest.log","source":"c2d7332b7c20348b.txt","type":"text/plain","size":165558},{"uid":"6529d2eb4120b228","name":"receiving_node1_2024-11-19_03-46-56__10902b11-3d29-421c-91f0-16f9419fd73b__wakuorg_nwaku:latest.log","source":"6529d2eb4120b228.txt","type":"text/plain","size":212802},{"uid":"7a08cbc0a7245f52","name":"lightpush_node1_2024-11-19_03-46-56__10902b11-3d29-421c-91f0-16f9419fd73b__wakuorg_go-waku:latest.log","source":"7a08cbc0a7245f52.txt","type":"text/plain","size":69342}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":3,"hasContent":true,"attachmentStep":false},{"name":"set_allure_env_variables::0","time":{"start":1731988788586,"stop":1731988788586,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"tests.light_push"},{"name":"suite","value":"test_publish"},{"name":"subSuite","value":"TestLightPushPublish"},{"name":"host","value":"fv-az700-143"},{"name":"thread","value":"2242-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.light_push.test_publish"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"105bb0acc3fccfe1","status":"broken","statusDetails":"Exception: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:9525/lightpush/v1/message with response: b'lightpush error'","time":{"start":1731988009798,"stop":1731988009819,"duration":21}},{"uid":"a460eb95299e3a4e","status":"broken","statusDetails":"Exception: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:1575/lightpush/v1/message with response: b'lightpush error'","time":{"start":1731987999347,"stop":1731987999366,"duration":19}}],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":10,"skipped":0,"passed":272,"unknown":0,"total":282},"items":[{"uid":"32fdf492813f33b5","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/363//#testresult/32fdf492813f33b5","status":"passed","time":{"start":1731926471960,"stop":1731926472365,"duration":405}},{"uid":"df11527f82367b4b","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/362//#testresult/df11527f82367b4b","status":"passed","time":{"start":1731924588314,"stop":1731924588696,"duration":382}},{"uid":"7b3e6e4d318e0438","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/361//#testresult/7b3e6e4d318e0438","status":"passed","time":{"start":1731900257404,"stop":1731900257809,"duration":405}},{"uid":"1416179c89d9c34a","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/360//#testresult/1416179c89d9c34a","status":"passed","time":{"start":1731813896393,"stop":1731813896906,"duration":513}},{"uid":"fc6fa3cdaad5e9fc","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/359//#testresult/fc6fa3cdaad5e9fc","status":"passed","time":{"start":1731727273964,"stop":1731727274351,"duration":387}},{"uid":"9855e27d3776fc39","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/358//#testresult/9855e27d3776fc39","status":"passed","time":{"start":1731640867818,"stop":1731640868208,"duration":390}},{"uid":"9e4d41c6372f3bf","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/357//#testresult/9e4d41c6372f3bf","status":"passed","time":{"start":1731554234706,"stop":1731554235111,"duration":405}},{"uid":"910de9ab28655958","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/356//#testresult/910de9ab28655958","status":"passed","time":{"start":1731467777729,"stop":1731467778113,"duration":384}},{"uid":"5cfdef20df5988fc","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/355//#testresult/5cfdef20df5988fc","status":"passed","time":{"start":1731381226099,"stop":1731381226502,"duration":403}},{"uid":"da7da02bf7b6785c","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/354//#testresult/da7da02bf7b6785c","status":"passed","time":{"start":1731295054015,"stop":1731295054393,"duration":378}},{"uid":"be98921de78e1f27","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/353//#testresult/be98921de78e1f27","status":"passed","time":{"start":1731223295224,"stop":1731223295640,"duration":416}},{"uid":"9b0c1ba11a4fa3e","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/352//#testresult/9b0c1ba11a4fa3e","status":"passed","time":{"start":1731208549654,"stop":1731208550040,"duration":386}},{"uid":"dda34973cbd68a1c","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/351//#testresult/dda34973cbd68a1c","status":"passed","time":{"start":1731121975366,"stop":1731121975747,"duration":381}},{"uid":"3d75234e094851e0","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/350//#testresult/3d75234e094851e0","status":"passed","time":{"start":1731035634449,"stop":1731035634844,"duration":395}},{"uid":"5f770356ecdbb3cf","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/349//#testresult/5f770356ecdbb3cf","status":"passed","time":{"start":1730991082335,"stop":1730991082722,"duration":387}},{"uid":"c244b1b16914c0ad","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/348//#testresult/c244b1b16914c0ad","status":"passed","time":{"start":1730983091244,"stop":1730983091632,"duration":388}},{"uid":"66bd6e6410da2acc","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/347//#testresult/66bd6e6410da2acc","status":"passed","time":{"start":1730980989820,"stop":1730980990231,"duration":411}},{"uid":"8eed2dc8c53d6fc6","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/346//#testresult/8eed2dc8c53d6fc6","status":"passed","time":{"start":1730979969841,"stop":1730979970267,"duration":426}},{"uid":"21d59144287abc89","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/345//#testresult/21d59144287abc89","status":"passed","time":{"start":1730980054867,"stop":1730980055260,"duration":393}},{"uid":"154f9011f013b662","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/342//#testresult/154f9011f013b662","status":"passed","time":{"start":1730949246318,"stop":1730949246707,"duration":389}}]},"tags":[]},"source":"11ad9f27ea9abe5e.json","parameterValues":[]}