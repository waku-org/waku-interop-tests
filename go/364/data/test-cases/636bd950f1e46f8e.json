{"uid":"636bd950f1e46f8e","name":"test_filter_node_not_connected_directly_to_relaying_node","fullName":"tests.e2e.test_e2e.TestE2E#test_filter_node_not_connected_directly_to_relaying_node","historyId":"3a3f0f730a859a3d2f5e05f56c2fef33","time":{"start":1731986068987,"stop":1731986080758,"duration":11771},"status":"broken","statusMessage":"Exception: Error: 400 Client Error: Bad Request for url: http://127.0.0.1:5363/filter/v2/subscriptions with response: b'{\"requestId\":\"1\",\"statusDesc\":\"subscription failed\"}'","statusTrace":"src/node/api_clients/base_client.py:14: in make_request\n    response.raise_for_status()\n/opt/hostedtoolcache/Python/3.12.7/x64/lib/python3.12/site-packages/requests/models.py:1021: in raise_for_status\n    raise HTTPError(http_error_msg, response=self)\nE   requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: http://127.0.0.1:5363/filter/v2/subscriptions\n\nDuring handling of the above exception, another exception occurred:\ntests/e2e/test_e2e.py:50: in test_filter_node_not_connected_directly_to_relaying_node\n    self.node3.set_filter_subscriptions({\"requestId\": \"1\", \"contentFilters\": [self.test_content_topic], \"pubsubTopic\": self.test_pubsub_topic})\nsrc/node/waku_node.py:355: in set_filter_subscriptions\n    return self._api.set_filter_subscriptions(subscription)\nsrc/node/api_clients/rest.py:68: in set_filter_subscriptions\n    set_subscriptions_response = self.rest_call(\"post\", \"filter/v2/subscriptions\", json.dumps(subscription))\nsrc/node/api_clients/rest.py:16: in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\nsrc/node/api_clients/base_client.py:17: in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\nE   Exception: Error: 400 Client Error: Bad Request for url: http://127.0.0.1:5363/filter/v2/subscriptions with response: b'{\"requestId\":\"1\",\"statusDesc\":\"subscription failed\"}'","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":2,"retriesStatusChange":true,"beforeStages":[{"name":"set_allure_env_variables","time":{"start":1731985998545,"stop":1731985998546,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes","time":{"start":1731986068950,"stop":1731986068950,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"check_waku_log_errors","time":{"start":1731986068950,"stop":1731986068950,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail","time":{"start":1731986068950,"stop":1731986068950,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_id","time":{"start":1731986068950,"stop":1731986068950,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"filter_setup","time":{"start":1731986068951,"stop":1731986068951,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"light_push_setup","time":{"start":1731986068951,"stop":1731986068952,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_setup","time":{"start":1731986068951,"stop":1731986068951,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"common_setup","time":{"start":1731986068951,"stop":1731986068951,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"nodes","time":{"start":1731986068952,"stop":1731986068985,"duration":33},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"relay_setup","time":{"start":1731986068985,"stop":1731986068986,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"store_setup","time":{"start":1731986068986,"stop":1731986068986,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"broken","statusMessage":"Exception: Error: 400 Client Error: Bad Request for url: http://127.0.0.1:5363/filter/v2/subscriptions with response: b'{\"requestId\":\"1\",\"statusDesc\":\"subscription failed\"}'","statusTrace":"src/node/api_clients/base_client.py:14: in make_request\n    response.raise_for_status()\n/opt/hostedtoolcache/Python/3.12.7/x64/lib/python3.12/site-packages/requests/models.py:1021: in raise_for_status\n    raise HTTPError(http_error_msg, response=self)\nE   requests.exceptions.HTTPError: 400 Client Error: Bad Request for url: http://127.0.0.1:5363/filter/v2/subscriptions\n\nDuring handling of the above exception, another exception occurred:\ntests/e2e/test_e2e.py:50: in test_filter_node_not_connected_directly_to_relaying_node\n    self.node3.set_filter_subscriptions({\"requestId\": \"1\", \"contentFilters\": [self.test_content_topic], \"pubsubTopic\": self.test_pubsub_topic})\nsrc/node/waku_node.py:355: in set_filter_subscriptions\n    return self._api.set_filter_subscriptions(subscription)\nsrc/node/api_clients/rest.py:68: in set_filter_subscriptions\n    set_subscriptions_response = self.rest_call(\"post\", \"filter/v2/subscriptions\", json.dumps(subscription))\nsrc/node/api_clients/rest.py:16: in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\nsrc/node/api_clients/base_client.py:17: in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\nE   Exception: Error: 400 Client Error: Bad Request for url: http://127.0.0.1:5363/filter/v2/subscriptions with response: b'{\"requestId\":\"1\",\"statusDesc\":\"subscription failed\"}'","steps":[],"attachments":[{"uid":"4cbb2c2d2dec9c51","name":"log","source":"4cbb2c2d2dec9c51.txt","type":"text/plain","size":48197}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"test_setup::0","time":{"start":1731986080872,"stop":1731986080873,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes::0","time":{"start":1731986080873,"stop":1731986087023,"duration":6150},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"check_waku_log_errors::0","time":{"start":1731986087023,"stop":1731986087049,"duration":26},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail::0","time":{"start":1731986087049,"stop":1731986087052,"duration":3},"status":"passed","steps":[],"attachments":[{"uid":"f92d04b5aad3cf2","name":"node3_2024-11-19_03-14-28__23e8cbbe-8565-45d4-9b5f-1ed9f8a22384__wakuorg_go-waku:latest.log","source":"f92d04b5aad3cf2.txt","type":"text/plain","size":53108},{"uid":"fc6a7f232cb73862","name":"node2_2024-11-19_03-14-28__23e8cbbe-8565-45d4-9b5f-1ed9f8a22384__wakuorg_nwaku:latest.log","source":"fc6a7f232cb73862.txt","type":"text/plain","size":224588},{"uid":"56577dbce0ea6de5","name":"node1_2024-11-19_03-14-28__23e8cbbe-8565-45d4-9b5f-1ed9f8a22384__wakuorg_go-waku:latest.log","source":"56577dbce0ea6de5.txt","type":"text/plain","size":79415}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":3,"hasContent":true,"attachmentStep":false},{"name":"set_allure_env_variables::0","time":{"start":1731988786025,"stop":1731988786025,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"tests.e2e"},{"name":"suite","value":"test_e2e"},{"name":"subSuite","value":"TestE2E"},{"name":"host","value":"fv-az700-143"},{"name":"thread","value":"2251-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.e2e.test_e2e"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"8fb5d3d07d4d0e67","status":"broken","statusDetails":"Exception: Error: 400 Client Error: Bad Request for url: http://127.0.0.1:58785/filter/v2/subscriptions with response: b'{\"requestId\":\"1\",\"statusDesc\":\"subscription failed\"}'","time":{"start":1731986051637,"stop":1731986064673,"duration":13036}},{"uid":"54c6fdb3880b488","status":"failed","statusDetails":"AssertionError: Peer NODE_2:wakuorg/go-waku:latest couldn't find any messages","time":{"start":1731986008626,"stop":1731986047158,"duration":38532}}],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":3,"skipped":0,"passed":114,"unknown":0,"total":117},"items":[{"uid":"2b993608502068f8","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/363//#testresult/2b993608502068f8","status":"passed","time":{"start":1731925886819,"stop":1731925929312,"duration":42493}},{"uid":"9e9e03a1a557414c","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/362//#testresult/9e9e03a1a557414c","status":"passed","time":{"start":1731924016450,"stop":1731924059588,"duration":43138}},{"uid":"536ecb218fdf6bcc","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/361//#testresult/536ecb218fdf6bcc","status":"passed","time":{"start":1731899710014,"stop":1731899754745,"duration":44731}},{"uid":"9103d04423fccf85","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/360//#testresult/9103d04423fccf85","status":"passed","time":{"start":1731813360603,"stop":1731813401294,"duration":40691}},{"uid":"a1381379d00c6485","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/359//#testresult/a1381379d00c6485","status":"passed","time":{"start":1731726717743,"stop":1731726761760,"duration":44017}},{"uid":"77663e553917f187","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/358//#testresult/77663e553917f187","status":"passed","time":{"start":1731640319353,"stop":1731640362905,"duration":43552}},{"uid":"290ac4a376af3208","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/357//#testresult/290ac4a376af3208","status":"passed","time":{"start":1731553674760,"stop":1731553716618,"duration":41858}},{"uid":"45fe7b4707701dc1","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/356//#testresult/45fe7b4707701dc1","status":"passed","time":{"start":1731467235306,"stop":1731467273747,"duration":38441}},{"uid":"d6bb16531a41d7d7","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/355//#testresult/d6bb16531a41d7d7","status":"passed","time":{"start":1731380665453,"stop":1731380705279,"duration":39826}},{"uid":"173b8b0a87999570","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/354//#testresult/173b8b0a87999570","status":"passed","time":{"start":1731294485541,"stop":1731294525807,"duration":40266}},{"uid":"69055f2f1d9b36cd","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/353//#testresult/69055f2f1d9b36cd","status":"passed","time":{"start":1731222757224,"stop":1731222793241,"duration":36017}},{"uid":"42388110bad222a0","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/352//#testresult/42388110bad222a0","status":"passed","time":{"start":1731208117172,"stop":1731208158414,"duration":41242}},{"uid":"287adc9dbe5a0a1b","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/351//#testresult/287adc9dbe5a0a1b","status":"passed","time":{"start":1731121517733,"stop":1731121561877,"duration":44144}},{"uid":"aedaf03f2430098d","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/350//#testresult/aedaf03f2430098d","status":"passed","time":{"start":1731035208225,"stop":1731035248958,"duration":40733}},{"uid":"f65692184ef555b1","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/349//#testresult/f65692184ef555b1","status":"passed","time":{"start":1730990641240,"stop":1730990684470,"duration":43230}},{"uid":"2027e8c07be4b88f","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/348//#testresult/2027e8c07be4b88f","status":"passed","time":{"start":1730982601245,"stop":1730982640859,"duration":39614}},{"uid":"22a27bfd6b4636a3","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/347//#testresult/22a27bfd6b4636a3","status":"passed","time":{"start":1730980452681,"stop":1730980494203,"duration":41522}},{"uid":"b53f139d9a69d1ca","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/346//#testresult/b53f139d9a69d1ca","status":"passed","time":{"start":1730979491563,"stop":1730979528240,"duration":36677}},{"uid":"61cfb1d002070a59","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/345//#testresult/61cfb1d002070a59","status":"passed","time":{"start":1730979474279,"stop":1730979513250,"duration":38971}},{"uid":"bce513e0832a1084","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/344//#testresult/bce513e0832a1084","status":"broken","statusDetails":"requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=25228): Max retries exceeded with url: /debug/v1/info (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f12aa682e40>: Failed to establish a new connection: [Errno 111] Connection refused'))","time":{"start":1730978123847,"stop":1730978188358,"duration":64511}}]},"tags":[]},"source":"636bd950f1e46f8e.json","parameterValues":[]}