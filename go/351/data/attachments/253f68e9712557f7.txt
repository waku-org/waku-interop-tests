[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_node_not_connected_directly_to_relaying_node with id: 2024-11-09_03-04-57__59060f15-9b84-4f45-8964-cc4322ebd7e9
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-09_03-04-57__59060f15-9b84-4f45-8964-cc4322ebd7e9__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-11-09_03-04-57__59060f15-9b84-4f45-8964-cc4322ebd7e9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-11-09_03-04-57__59060f15-9b84-4f45-8964-cc4322ebd7e9__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.154.183
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['9287', '9288', '9289', '9290', '9291']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 9287:9287 -p 9288:9288 -p 9289:9289 -p 9290:9290 -p 9291:9291 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=9289 --rest-port=9287 --tcp-port=9288 --discv5-udp-port=9290 --rest-address=0.0.0.0 --nat=extip:172.18.154.183 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0fa27df653a5fdcbbbbaa3dcfc0b5674eb297c577dd95f0c07cac35978ec1a02 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.154.183 waku d395d5461cae66225c8df3af79df51c8359809d7f7e33ec6eb9aea18f90d8623
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID d395d5461cae. Setting up logs at ./log/docker/node1_2024-11-09_03-04-57__59060f15-9b84-4f45-8964-cc4322ebd7e9__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 9287
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9287/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QGChhsWspcDjVuzhZT2DbdAoU3rYiN7UMmyfGvQO8c3EA-QiAl2P4gwRbCD-BCJEjuMUWc_Dha1YiSGlnaQGmeWGAZMO4dnBgmlkgnY0gmlwhKwRAAWJc2VjcDI1NmsxoQM-jR-fOMoyK9AtHRyNEdi3nn_3YNVhOpvuU1IztvHK4oN0Y3CCJEiDdWRwgiRKhXdha3UyAQ","listenAddresses":["/ip4/127.0.0.1/tcp/9288/p2p/16Uiu2HAmGsASNXE9CGHy6Ut12YZgyTumrxXg5Y7Vj9J1rMTiPVdB","/ip4/127.0.0.1/tcp/9289/ws/p2p/16Uiu2HAmGsASNXE9CGHy6Ut12YZgyTumrxXg5Y7Vj9J1rMTiPVdB","/ip4/172.17.0.5/tcp/9288/p2p/16Uiu2HAmGsASNXE9CGHy6Ut12YZgyTumrxXg5Y7Vj9J1rMTiPVdB","/ip4/172.17.0.5/tcp/9289/ws/p2p/16Uiu2HAmGsASNXE9CGHy6Ut12YZgyTumrxXg5Y7Vj9J1rMTiPVdB"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.234.240
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['4803', '4804', '4805', '4806', '4807']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 4803:4803 -p 4804:4804 -p 4805:4805 -p 4806:4806 -p 4807:4807 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4805 --rest-port=4803 --tcp-port=4804 --discv5-udp-port=4806 --rest-address=0.0.0.0 --nat=extip:172.18.234.240 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3c89b6fbb2a226d31cfabfe8517c7cebcef3a6d33edebee04cd6ecdd2cf565fd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4807 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-Ji4QGChhsWspcDjVuzhZT2DbdAoU3rYiN7UMmyfGvQO8c3EA-QiAl2P4gwRbCD-BCJEjuMUWc_Dha1YiSGlnaQGmeWGAZMO4dnBgmlkgnY0gmlwhKwRAAWJc2VjcDI1NmsxoQM-jR-fOMoyK9AtHRyNEdi3nn_3YNVhOpvuU1IztvHK4oN0Y3CCJEiDdWRwgiRKhXdha3UyAQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.234.240 waku 9e9ef21e0ad01c4e203a0cb76f37b75eb39f73d13f124ec66061f68fd91c1a25
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 9e9ef21e0ad0. Setting up logs at ./log/docker/node2_2024-11-09_03-04-57__59060f15-9b84-4f45-8964-cc4322ebd7e9__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 4803
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4803/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4803/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.234.240/tcp/4804/p2p/16Uiu2HAm4N36qSTCTe81ypWqwPGdBu4dSmACMTkz9HSnd2oeeBue","/ip4/172.18.234.240/tcp/4805/ws/p2p/16Uiu2HAm4N36qSTCTe81ypWqwPGdBu4dSmACMTkz9HSnd2oeeBue"],"enrUri":"enr:-L24QOutv40mX2sr3o0u4ecDmBeERSWxSubEVlPYQ0y4BqVeExWuBYL-ZvECk7w7zUdn1RYl0nR9TmIaPbMwoVDjlTYCgmlkgnY0gmlwhKwS6vCKbXVsdGlhZGRyc5YACASsEurwBhLEAAoErBLq8AYSxd0DgnJzhQADAQAAiXNlY3AyNTZrMaEChMq9vTYaAJn2ibCyZWrfec9C1ATISYrEpLvm0CQtJG2DdGNwghLEg3VkcIISxoV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.117.128
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['51394', '51395', '51396', '51397', '51398']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 51394:51394 -p 51395:51395 -p 51396:51396 -p 51397:51397 -p 51398:51398 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=51396 --rest-port=51394 --tcp-port=51395 --discv5-udp-port=51397 --rest-address=0.0.0.0 --nat=extip:172.18.117.128 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3ad2e1329daeafb10d0046d9375491dfce8cfb8eef5aafaadbdd0dfaf2ceb9aa --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --storenode=/ip4/172.18.234.240/tcp/4804/p2p/16Uiu2HAm4N36qSTCTe81ypWqwPGdBu4dSmACMTkz9HSnd2oeeBue --discv5-bootstrap-node=enr:-L24QOutv40mX2sr3o0u4ecDmBeERSWxSubEVlPYQ0y4BqVeExWuBYL-ZvECk7w7zUdn1RYl0nR9TmIaPbMwoVDjlTYCgmlkgnY0gmlwhKwS6vCKbXVsdGlhZGRyc5YACASsEurwBhLEAAoErBLq8AYSxd0DgnJzhQADAQAAiXNlY3AyNTZrMaEChMq9vTYaAJn2ibCyZWrfec9C1ATISYrEpLvm0CQtJG2DdGNwghLEg3VkcIISxoV3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.117.128 waku c4451913f615eb4d6a509d978b92511a01999e12c12c16c1194bb4e7dd219045
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID c4451913f615. Setting up logs at ./log/docker/node3_2024-11-09_03-04-57__59060f15-9b84-4f45-8964-cc4322ebd7e9__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 51394
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51394/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QBDLy3XkfS65uKWBVzXKInnR3N3yGXu3T8b_0LYS_-rfG7mN2LEIzPH1eIDoRZlo2D6gndQJ3BLnTWU7ZISGeQeGAZMO4eaHgmlkgnY0gmlwhKwRAAqJc2VjcDI1NmsxoQKdlcL6GzjN-Dnz1ENeJnAXLd_2YPbLVXBoYpvHPm4644N0Y3CCyMODdWRwgsjFhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/51395/p2p/16Uiu2HAm62pSPLz38Aixak3PP4u6xbUhZZiKeg87hXfwWYyoPp8a","/ip4/127.0.0.1/tcp/51396/ws/p2p/16Uiu2HAm62pSPLz38Aixak3PP4u6xbUhZZiKeg87hXfwWYyoPp8a","/ip4/172.17.0.10/tcp/51395/p2p/16Uiu2HAm62pSPLz38Aixak3PP4u6xbUhZZiKeg87hXfwWYyoPp8a","/ip4/172.17.0.10/tcp/51396/ws/p2p/16Uiu2HAm62pSPLz38Aixak3PP4u6xbUhZZiKeg87hXfwWYyoPp8a"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9287/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4803/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9287/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAm4N36qSTCTe81ypWqwPGdBu4dSmACMTkz9HSnd2oeeBue","multiaddrs":["/ip4/172.18.234.240/tcp/4804/p2p/16Uiu2HAm4N36qSTCTe81ypWqwPGdBu4dSmACMTkz9HSnd2oeeBue","/ip4/172.18.234.240/tcp/4805/ws/p2p/16Uiu2HAm4N36qSTCTe81ypWqwPGdBu4dSmACMTkz9HSnd2oeeBue"],"protocols":["/vac/waku/relay/2.0.0","/vac/waku/store/2.0.0-beta4","/vac/waku/store-query/3.0.0"],"connected":false,"pubsubTopics":["/waku/2/rs/3/0"]},{"id":"16Uiu2HAm62pSPLz38Aixak3PP4u6xbUhZZiKeg87hXfwWYyoPp8a","multiaddrs":["/ip4/172.17.0.10/tcp/51395/p2p/16Uiu2HAm62pSPLz38Aixak3PP4u6xbUhZZiKeg87hXfwWYyoPp8a","/ip4/172.17.0.10/tcp/51396/ws/p2p/16Uiu2HAm62pSPLz38Aixak3PP4u6xbUhZZiKeg87hXfwWYyoPp8a"],"protocols":["/vac/waku/filter-push/2.0.0-beta1"],"connected":false,"pubsubTopics":[]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4803/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.10/tcp/51395/p2p/16Uiu2HAm62pSPLz38Aixak3PP4u6xbUhZZiKeg87hXfwWYyoPp8a","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9287/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/go-waku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51394/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-filter%2Fproto&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"007712757a89e88f07c238e68f9ab7ef3b5260398f28ef0d1107661613671109","status_code":200,"status_desc":"OK","messages":[{"message_hash":"qzNv9ILfNym9Bm8iZcm7a2DNYTnmWo3ZnqKG0/kMurA="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id d395d5461cae
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 9e9ef21e0ad0
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container d395d5461cae. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id c4451913f615
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 9e9ef21e0ad0. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.