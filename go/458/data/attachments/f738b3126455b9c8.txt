2025-02-08 03:09:13.997 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-08 03:09:13.997 DEBUG [tests.conftest] Running test: test_relay_no_subscription with id: 2025-02-08_03-09-13__e5810e93-d5a0-4209-9b02-f493f2d03a5d
2025-02-08 03:09:13.998 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-08 03:09:13.998 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-08 03:09:13.998 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2025-02-08 03:09:14.006 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 03:09:14.007 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-08_03-09-13__e5810e93-d5a0-4209-9b02-f493f2d03a5d__wakuorg_nwaku:latest.log
2025-02-08 03:09:14.007 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 03:09:14.007 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 03:09:14.009 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 03:09:14.009 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.224.158
2025-02-08 03:09:14.009 DEBUG [src.node.docker_mananger] Generated ports ['46456', '46457', '46458', '46459', '46460']
2025-02-08 03:09:14.010 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 03:09:14.010 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 03:09:14.010 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 03:09:14.010 DEBUG [src.node.docker_mananger] docker run -i -t -p 46456:46456 -p 46457:46457 -p 46458:46458 -p 46459:46459 -p 46460:46460 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=46458 --rest-port=46456 --tcp-port=46457 --discv5-udp-port=46459 --rest-address=0.0.0.0 --nat=extip:172.18.224.158 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d6b6a1e1b134c8aadd5d80a9eebcee79e0fe6035366bd1d53faa37dd6b7af20b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=46460 --metrics-logging=true --relay=true
2025-02-08 03:09:14.217 ERROR [src.node.docker_mananger] Max retries reached for container ecf3e3874f61. Exiting log stream.
2025-02-08 03:09:14.261 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.224.158 waku b18bf9d2fe15d638466ea2e63461aced2753e8f6b78b541de69ad98da9168ecd
2025-02-08 03:09:14.316 DEBUG [src.node.docker_mananger] Container started with ID b18bf9d2fe15. Setting up logs at ./log/docker/node1_2025-02-08_03-09-13__e5810e93-d5a0-4209-9b02-f493f2d03a5d__wakuorg_nwaku:latest.log
2025-02-08 03:09:14.317 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 46456
2025-02-08 03:09:14.318 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 03:09:14.781 ERROR [src.node.docker_mananger] Max retries reached for container ead136883ff5. Exiting log stream.
2025-02-08 03:09:15.318 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46456/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:09:15.321 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 03:09:15.321 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 03:09:15.321 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46456/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:09:15.324 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.224.158/tcp/46457/p2p/16Uiu2HAmGAdXJjxKeEBhtKMPPyaGRHCVRgUizNfiPA5yuKNLXEwa","/ip4/172.18.224.158/tcp/46458/ws/p2p/16Uiu2HAmGAdXJjxKeEBhtKMPPyaGRHCVRgUizNfiPA5yuKNLXEwa"],"enrUri":"enr:-L24QErxTw-HcUqxhUoKyvjvHo0qoxOnRZa2L1dzKtIwY8ZuHSD0QnPBWTwLsZfUpxQGsyhT0fyZNvYQ1icjekP-M0wCgmlkgnY0gmlwhKwS4J6KbXVsdGlhZGRyc5YACASsEuCeBrV5AAoErBLgnga1et0DgnJzhQADAQAAiXNlY3AyNTZrMaEDNCrvgFpn0pdzLN9rfLAtUugZZhbga8tuvrpQbqZa_LGDdGNwgrV5g3VkcIK1e4V3YWt1MgE"}'
2025-02-08 03:09:15.324 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 03:09:15.333 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-08 03:09:15.334 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-08_03-09-13__e5810e93-d5a0-4209-9b02-f493f2d03a5d__wakuorg_go-waku:latest.log
2025-02-08 03:09:15.334 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 03:09:15.334 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 03:09:15.336 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 03:09:15.336 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.97.29
2025-02-08 03:09:15.336 DEBUG [src.node.docker_mananger] Generated ports ['13226', '13227', '13228', '13229', '13230']
2025-02-08 03:09:15.336 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 03:09:15.336 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 03:09:15.336 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 03:09:15.336 DEBUG [src.node.docker_mananger] docker run -i -t -p 13226:13226 -p 13227:13227 -p 13228:13228 -p 13229:13229 -p 13230:13230 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=13228 --rest-port=13226 --tcp-port=13227 --discv5-udp-port=13229 --rest-address=0.0.0.0 --nat=extip:172.18.97.29 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=faafb61dd6c80acde379bc7c677ad89affdc9aafcf6d04b783d6f22feabc72b8 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --discv5-bootstrap-node=enr:-L24QErxTw-HcUqxhUoKyvjvHo0qoxOnRZa2L1dzKtIwY8ZuHSD0QnPBWTwLsZfUpxQGsyhT0fyZNvYQ1icjekP-M0wCgmlkgnY0gmlwhKwS4J6KbXVsdGlhZGRyc5YACASsEuCeBrV5AAoErBLgnga1et0DgnJzhQADAQAAiXNlY3AyNTZrMaEDNCrvgFpn0pdzLN9rfLAtUugZZhbga8tuvrpQbqZa_LGDdGNwgrV5g3VkcIK1e4V3YWt1MgE
2025-02-08 03:09:15.610 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.97.29 waku aec54f8de68bdaf24732621a30a126311477307ffa314e8ea66a419d90a459bb
2025-02-08 03:09:15.679 DEBUG [src.node.docker_mananger] Container started with ID aec54f8de68b. Setting up logs at ./log/docker/node2_2025-02-08_03-09-13__e5810e93-d5a0-4209-9b02-f493f2d03a5d__wakuorg_go-waku:latest.log
2025-02-08 03:09:15.679 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 13226
2025-02-08 03:09:15.681 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 03:09:16.681 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:13226/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:09:16.684 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QIL-v5OKnF1fv0Ofd2uhi0wn-evBewWG4kU9gumtU41JI-JEa80IRbu_N3WJglz5Ajy4TCAj8wjYvNMGyC3b9xOGAZTjiGoagmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaEDR4DWxIVQT2plYVwoejlg_dgGtyKPLoCQEhcyT-z9gL-DdGNwgjOrg3VkcIIzrYV3YWt1MgE","listenAddresses":["/ip4/127.0.0.1/tcp/13227/p2p/16Uiu2HAmHU7F3dTdJvbdZxwUa33G936GiVMarStzzgz2mcJ2AhFU","/ip4/127.0.0.1/tcp/13228/ws/p2p/16Uiu2HAmHU7F3dTdJvbdZxwUa33G936GiVMarStzzgz2mcJ2AhFU","/ip4/172.17.0.3/tcp/13227/p2p/16Uiu2HAmHU7F3dTdJvbdZxwUa33G936GiVMarStzzgz2mcJ2AhFU","/ip4/172.17.0.3/tcp/13228/ws/p2p/16Uiu2HAmHU7F3dTdJvbdZxwUa33G936GiVMarStzzgz2mcJ2AhFU"]}'
2025-02-08 03:09:16.684 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 03:09:16.685 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:13226/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.224.158/tcp/46457/p2p/16Uiu2HAmGAdXJjxKeEBhtKMPPyaGRHCVRgUizNfiPA5yuKNLXEwa", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-08 03:09:16.701 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-08 03:09:16.703 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46456/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 03:09:16.724 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:46456/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Failed to publish: Node not subscribed to topic: /waku/2/rs/3/1'
2025-02-08 03:09:16.725 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-08 03:09:16.727 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-08 03:09:16.727 DEBUG [src.node.waku_node] Stopping container with id b18bf9d2fe15
2025-02-08 03:09:17.279 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 03:09:17.279 DEBUG [src.node.waku_node] Stopping container with id aec54f8de68b
2025-02-08 03:09:18.093 ERROR [src.node.docker_mananger] Max retries reached for container b18bf9d2fe15. Exiting log stream.
2025-02-08 03:09:18.241 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 03:09:18.242 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-08 03:09:18.246 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 03:09:18.248 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
