2025-02-08 03:08:44.395 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-08 03:08:44.396 DEBUG [tests.conftest] Running test: test_light_push_with_invalid_version with id: 2025-02-08_03-08-44__dad99236-e3fe-4293-82e3-9795559b5286
2025-02-08 03:08:44.396 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-08 03:08:44.396 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-08 03:08:44.404 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 03:08:44.404 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-08_03-08-44__dad99236-e3fe-4293-82e3-9795559b5286__wakuorg_nwaku:latest.log
2025-02-08 03:08:44.404 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 03:08:44.405 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 03:08:44.409 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 03:08:44.409 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.106.141
2025-02-08 03:08:44.409 DEBUG [src.node.docker_mananger] Generated ports ['5637', '5638', '5639', '5640', '5641']
2025-02-08 03:08:44.409 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 03:08:44.410 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 03:08:44.410 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 03:08:44.410 DEBUG [src.node.docker_mananger] docker run -i -t -p 5637:5637 -p 5638:5638 -p 5639:5639 -p 5640:5640 -p 5641:5641 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=5639 --rest-port=5637 --tcp-port=5638 --discv5-udp-port=5640 --rest-address=0.0.0.0 --nat=extip:172.18.106.141 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f0fbeae0ddbf13c5eba744eac70baac9edb2ac3bcfb3738cd1ecafde1ba3aae6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=5641 --metrics-logging=true --lightpush=true --relay=true
2025-02-08 03:08:44.626 ERROR [src.node.docker_mananger] Max retries reached for container 25e248966e33. Exiting log stream.
2025-02-08 03:08:44.668 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.106.141 waku 18416786435cc7f3faa0725dacc04bb6cf5c17c0e24fdf8566fccb4731787f6c
2025-02-08 03:08:44.725 DEBUG [src.node.docker_mananger] Container started with ID 18416786435c. Setting up logs at ./log/docker/receiving_node1_2025-02-08_03-08-44__dad99236-e3fe-4293-82e3-9795559b5286__wakuorg_nwaku:latest.log
2025-02-08 03:08:44.726 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 5637
2025-02-08 03:08:44.726 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 03:08:45.187 ERROR [src.node.docker_mananger] Max retries reached for container c1e9d2184e2e. Exiting log stream.
2025-02-08 03:08:45.727 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:5637/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:08:45.730 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 03:08:45.730 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 03:08:45.731 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:5637/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:08:45.733 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.106.141/tcp/5638/p2p/16Uiu2HAmTcfdzhHsHEeYGxkAYW2x4eMhi1Nqqo3V8oF8XPdeogdY","/ip4/172.18.106.141/tcp/5639/ws/p2p/16Uiu2HAmTcfdzhHsHEeYGxkAYW2x4eMhi1Nqqo3V8oF8XPdeogdY"],"enrUri":"enr:-L24QBZE62ZuMnjyX1zqpjqQ5aCtAa6FWbbircxFiPLaB0mbFaCAG7tH1sWF0Ok6C1OX1RxBVRPdF-wMSNFHQ8sXbqMCgmlkgnY0gmlwhKwSao2KbXVsdGlhZGRyc5YACASsEmqNBhYGAAoErBJqjQYWB90DgnJzhQADAQAAiXNlY3AyNTZrMaED3kb8DbG6fL5z9xOKcN8GqDhPLcULOWp1bVnvEWpT8UODdGNwghYGg3VkcIIWCIV3YWt1Mgk"}'
2025-02-08 03:08:45.733 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 03:08:45.741 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 03:08:45.741 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-08_03-08-44__dad99236-e3fe-4293-82e3-9795559b5286__wakuorg_nwaku:latest.log
2025-02-08 03:08:45.741 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 03:08:45.741 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 03:08:45.743 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 03:08:45.743 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.152.182
2025-02-08 03:08:45.743 DEBUG [src.node.docker_mananger] Generated ports ['37911', '37912', '37913', '37914', '37915']
2025-02-08 03:08:45.743 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 03:08:45.744 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 03:08:45.744 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 03:08:45.744 DEBUG [src.node.docker_mananger] docker run -i -t -p 37911:37911 -p 37912:37912 -p 37913:37913 -p 37914:37914 -p 37915:37915 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37913 --rest-port=37911 --tcp-port=37912 --discv5-udp-port=37914 --rest-address=0.0.0.0 --nat=extip:172.18.152.182 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=572d0da0f29e24b1c5cfd00050fb4ee91b41f449c21f1be85ccf70fb9db5aae9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37915 --metrics-logging=true --lightpush=false --relay=true
2025-02-08 03:08:46.008 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.152.182 waku fd425bff74bf2134c072afd3e1536e70d0f0c749eed7f3a82a0914666da4e846
2025-02-08 03:08:46.067 DEBUG [src.node.docker_mananger] Container started with ID fd425bff74bf. Setting up logs at ./log/docker/receiving_node2_2025-02-08_03-08-44__dad99236-e3fe-4293-82e3-9795559b5286__wakuorg_nwaku:latest.log
2025-02-08 03:08:46.068 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 37911
2025-02-08 03:08:46.068 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 03:08:47.068 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37911/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:08:47.071 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 03:08:47.071 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 03:08:47.071 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37911/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:08:47.075 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.152.182/tcp/37912/p2p/16Uiu2HAmB1nppxkUjQMSSCYScksT7wEbMMTKhBRqHccnSxQbnfpa","/ip4/172.18.152.182/tcp/37913/ws/p2p/16Uiu2HAmB1nppxkUjQMSSCYScksT7wEbMMTKhBRqHccnSxQbnfpa"],"enrUri":"enr:-L24QJhOStT2E-9TYZZco5Rbbl4iz1sfXDEjzLGz820y24A4WRRSdyZbooJ8ADvX-uFgX-7wFXqAGpAK4GMeFiW5LqQCgmlkgnY0gmlwhKwSmLaKbXVsdGlhZGRyc5YACASsEpi2BpQYAAoErBKYtgaUGd0DgnJzhQADAQAAiXNlY3AyNTZrMaEC55zKooD7v5K7d5n2DP53Q7FOF00Wh_LqlbCMiFiHCeeDdGNwgpQYg3VkcIKUGoV3YWt1MgE"}'
2025-02-08 03:08:47.076 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 03:08:47.077 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37911/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.106.141/tcp/5638/p2p/16Uiu2HAmTcfdzhHsHEeYGxkAYW2x4eMhi1Nqqo3V8oF8XPdeogdY"]'
2025-02-08 03:08:47.123 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 03:08:47.152 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-08 03:08:47.152 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-08_03-08-44__dad99236-e3fe-4293-82e3-9795559b5286__wakuorg_go-waku:latest.log
2025-02-08 03:08:47.153 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 03:08:47.153 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 03:08:47.154 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 03:08:47.155 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.128.70
2025-02-08 03:08:47.155 DEBUG [src.node.docker_mananger] Generated ports ['57555', '57556', '57557', '57558', '57559']
2025-02-08 03:08:47.155 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 03:08:47.155 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 03:08:47.155 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 03:08:47.155 DEBUG [src.node.docker_mananger] docker run -i -t -p 57555:57555 -p 57556:57556 -p 57557:57557 -p 57558:57558 -p 57559:57559 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=57557 --rest-port=57555 --tcp-port=57556 --discv5-udp-port=57558 --rest-address=0.0.0.0 --nat=extip:172.18.128.70 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=39fbce4d7b1d66cdb2dfbc4bb0b8adfad7fa4273fe14ee92f9ad25a3acbb8dd6 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QBZE62ZuMnjyX1zqpjqQ5aCtAa6FWbbircxFiPLaB0mbFaCAG7tH1sWF0Ok6C1OX1RxBVRPdF-wMSNFHQ8sXbqMCgmlkgnY0gmlwhKwSao2KbXVsdGlhZGRyc5YACASsEmqNBhYGAAoErBJqjQYWB90DgnJzhQADAQAAiXNlY3AyNTZrMaED3kb8DbG6fL5z9xOKcN8GqDhPLcULOWp1bVnvEWpT8UODdGNwghYGg3VkcIIWCIV3YWt1Mgk --lightpushnode=/ip4/172.18.106.141/tcp/5638/p2p/16Uiu2HAmTcfdzhHsHEeYGxkAYW2x4eMhi1Nqqo3V8oF8XPdeogdY --lightpush=true --relay=false --pubsub-topic=/waku/2/rs/3/1
2025-02-08 03:08:47.417 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.128.70 waku 1b4a01bbdf3076044e46521efc40dd6c58637371eda298ef01a7b7193eb9bbd0
2025-02-08 03:08:47.479 DEBUG [src.node.docker_mananger] Container started with ID 1b4a01bbdf30. Setting up logs at ./log/docker/lightpush_node1_2025-02-08_03-08-44__dad99236-e3fe-4293-82e3-9795559b5286__wakuorg_go-waku:latest.log
2025-02-08 03:08:47.480 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 57555
2025-02-08 03:08:47.480 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 03:08:48.481 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57555/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:08:48.483 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QFvH9hTibUMW36KQMR4Hm7gOPoO08e0sbGVGWYFT81XjazBK3WwHH9-EsYe69B0ywy3kVHBeE7qqh_Bmi7XNwb2GAZTjh_vugmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQP2RQM7pSAh8FfbNaHAnZufi8C7qvdPRk0miRhmUDOdmIN0Y3CC4NSDdWRwguDWhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/57556/p2p/16Uiu2HAmVEKgMjzhX5aiGu482nxdJCQqu37ahLkB1p6hq5TsFQpf","/ip4/127.0.0.1/tcp/57557/ws/p2p/16Uiu2HAmVEKgMjzhX5aiGu482nxdJCQqu37ahLkB1p6hq5TsFQpf","/ip4/172.17.0.4/tcp/57556/p2p/16Uiu2HAmVEKgMjzhX5aiGu482nxdJCQqu37ahLkB1p6hq5TsFQpf","/ip4/172.17.0.4/tcp/57557/ws/p2p/16Uiu2HAmVEKgMjzhX5aiGu482nxdJCQqu37ahLkB1p6hq5TsFQpf"]}'
2025-02-08 03:08:48.484 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 03:08:48.484 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57555/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.106.141/tcp/5638/p2p/16Uiu2HAmTcfdzhHsHEeYGxkAYW2x4eMhi1Nqqo3V8oF8XPdeogdY", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-08 03:08:48.486 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-08 03:08:48.486 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57555/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.152.182/tcp/37912/p2p/16Uiu2HAmB1nppxkUjQMSSCYScksT7wEbMMTKhBRqHccnSxQbnfpa", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-08 03:08:48.501 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-08 03:08:48.503 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:5637/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-08 03:08:48.509 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 03:08:48.509 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37911/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-08 03:08:48.513 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 03:08:48.514 DEBUG [src.steps.light_push] Lightpushing message
2025-02-08 03:08:48.514 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57555/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738984128514384896, "version": 2.1}}'
2025-02-08 03:08:48.516 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:57555/lightpush/v1/message. Response content: b''
2025-02-08 03:08:48.519 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-08 03:08:48.520 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-08 03:08:48.520 DEBUG [src.node.waku_node] Stopping container with id 18416786435c
2025-02-08 03:08:49.172 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 03:08:49.172 DEBUG [src.node.waku_node] Stopping container with id fd425bff74bf
2025-02-08 03:08:49.985 ERROR [src.node.docker_mananger] Max retries reached for container 18416786435c. Exiting log stream.
2025-02-08 03:08:50.712 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 03:08:50.712 DEBUG [src.node.waku_node] Stopping container with id 1b4a01bbdf30
2025-02-08 03:08:51.298 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 03:08:51.299 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-08 03:08:51.307 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 03:08:51.316 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 03:08:51.319 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
