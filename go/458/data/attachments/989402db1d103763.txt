2025-02-08 03:07:32.780 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-08 03:07:32.780 DEBUG [tests.conftest] Running test: test_filter_subscribe_with_invalid_request_id with id: 2025-02-08_03-07-32__64f6ff6e-e85c-4087-be4f-54b7b1e25474
2025-02-08 03:07:32.780 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-08 03:07:32.781 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-08 03:07:32.781 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-08 03:07:32.787 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 03:07:32.787 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-08_03-07-32__64f6ff6e-e85c-4087-be4f-54b7b1e25474__wakuorg_nwaku:latest.log
2025-02-08 03:07:32.787 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 03:07:32.787 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 03:07:32.788 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 03:07:32.789 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.249.234
2025-02-08 03:07:32.789 DEBUG [src.node.docker_mananger] Generated ports ['37681', '37682', '37683', '37684', '37685']
2025-02-08 03:07:32.789 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 03:07:32.789 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 03:07:32.789 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 03:07:32.789 DEBUG [src.node.docker_mananger] docker run -i -t -p 37681:37681 -p 37682:37682 -p 37683:37683 -p 37684:37684 -p 37685:37685 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37683 --rest-port=37681 --tcp-port=37682 --discv5-udp-port=37684 --rest-address=0.0.0.0 --nat=extip:172.18.249.234 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c91f187bb8d976f55170fa6b08cefbf7dabbb719ae71a5ad9f239a7a75da31a3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37685 --metrics-logging=true --relay=true --filter=true
2025-02-08 03:07:32.793 ERROR [src.node.docker_mananger] Max retries reached for container 203264e2fce3. Exiting log stream.
2025-02-08 03:07:33.014 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.249.234 waku 039b0aa47151aabad009da4dc0a7af4001f5dcc0b916bed48a6b14bd0a2a2090
2025-02-08 03:07:33.064 DEBUG [src.node.docker_mananger] Container started with ID 039b0aa47151. Setting up logs at ./log/docker/node1_2025-02-08_03-07-32__64f6ff6e-e85c-4087-be4f-54b7b1e25474__wakuorg_nwaku:latest.log
2025-02-08 03:07:33.064 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 37681
2025-02-08 03:07:33.064 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 03:07:33.583 ERROR [src.node.docker_mananger] Max retries reached for container 812949a06355. Exiting log stream.
2025-02-08 03:07:34.065 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37681/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:07:34.068 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 03:07:34.068 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 03:07:34.068 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37681/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:07:34.070 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.249.234/tcp/37682/p2p/16Uiu2HAm2oSgy5ZGomgPcR7s9gACzhxjncR41d3rbCH9Ed4V4s3t","/ip4/172.18.249.234/tcp/37683/ws/p2p/16Uiu2HAm2oSgy5ZGomgPcR7s9gACzhxjncR41d3rbCH9Ed4V4s3t"],"enrUri":"enr:-L24QB6ei_CSyOSNYXDojVMHGf2Xju5uoypsy-pmgBhqdJIkcLKpOJU5BocTP2qqVMccT0MUitpblMGw_NXCXw7_xNkCgmlkgnY0gmlwhKwS-eqKbXVsdGlhZGRyc5YACASsEvnqBpMyAAoErBL56gaTM90DgnJzhQADAQAAiXNlY3AyNTZrMaECbZWPInXm9wfjGp371NWldgU5MB6L9Ro2ADhMoEYrbEeDdGNwgpMyg3VkcIKTNIV3YWt1MgU"}'
2025-02-08 03:07:34.070 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 03:07:34.071 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-08 03:07:34.076 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-08 03:07:34.077 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-08_03-07-32__64f6ff6e-e85c-4087-be4f-54b7b1e25474__wakuorg_go-waku:latest.log
2025-02-08 03:07:34.077 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 03:07:34.077 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 03:07:34.078 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 03:07:34.078 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.28.39
2025-02-08 03:07:34.078 DEBUG [src.node.docker_mananger] Generated ports ['58497', '58498', '58499', '58500', '58501']
2025-02-08 03:07:34.078 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 03:07:34.079 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 03:07:34.079 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 03:07:34.079 DEBUG [src.node.docker_mananger] docker run -i -t -p 58497:58497 -p 58498:58498 -p 58499:58499 -p 58500:58500 -p 58501:58501 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=58499 --rest-port=58497 --tcp-port=58498 --discv5-udp-port=58500 --rest-address=0.0.0.0 --nat=extip:172.18.28.39 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=770c5f1a86c146a77151a75ffdedbe51f8bdd1254bde41c70185ad07c38c94c3 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-L24QB6ei_CSyOSNYXDojVMHGf2Xju5uoypsy-pmgBhqdJIkcLKpOJU5BocTP2qqVMccT0MUitpblMGw_NXCXw7_xNkCgmlkgnY0gmlwhKwS-eqKbXVsdGlhZGRyc5YACASsEvnqBpMyAAoErBL56gaTM90DgnJzhQADAQAAiXNlY3AyNTZrMaECbZWPInXm9wfjGp371NWldgU5MB6L9Ro2ADhMoEYrbEeDdGNwgpMyg3VkcIKTNIV3YWt1MgU --filternode=/ip4/172.18.249.234/tcp/37682/p2p/16Uiu2HAm2oSgy5ZGomgPcR7s9gACzhxjncR41d3rbCH9Ed4V4s3t --pubsub-topic=/waku/2/rs/3/1
2025-02-08 03:07:34.308 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.28.39 waku 68a42098a71cc4e228c30f26b96d9c6c9eb5abe5f76471e539bd80d0babc6150
2025-02-08 03:07:34.361 DEBUG [src.node.docker_mananger] Container started with ID 68a42098a71c. Setting up logs at ./log/docker/node2_2025-02-08_03-07-32__64f6ff6e-e85c-4087-be4f-54b7b1e25474__wakuorg_go-waku:latest.log
2025-02-08 03:07:34.361 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 58497
2025-02-08 03:07:34.361 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 03:07:35.363 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58497/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:07:35.365 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QPvnepnLCQR7aYhFB2302ogKKqDOqORp5mTuLcUiI6fgKqVD2G2utb8C3LrTcBW-z3S-056_j8foXM2rEJxlPk-GAZTjht5TgmlkgnY0gmlwhKwRAAOCcnOFAAMBAAGJc2VjcDI1NmsxoQOhvJQitW0nsFcw2zpdVjorb251nk4qwpb9ZnjMiyCGSYN0Y3CC5IKDdWRwguSEhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/58498/p2p/16Uiu2HAmPYLmc9bqHL6oq3tCyGHDL8fHx2yZCeF5H7k8dT29bcic","/ip4/127.0.0.1/tcp/58499/ws/p2p/16Uiu2HAmPYLmc9bqHL6oq3tCyGHDL8fHx2yZCeF5H7k8dT29bcic","/ip4/172.17.0.3/tcp/58498/p2p/16Uiu2HAmPYLmc9bqHL6oq3tCyGHDL8fHx2yZCeF5H7k8dT29bcic","/ip4/172.17.0.3/tcp/58499/ws/p2p/16Uiu2HAmPYLmc9bqHL6oq3tCyGHDL8fHx2yZCeF5H7k8dT29bcic"]}'
2025-02-08 03:07:35.365 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 03:07:35.366 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58497/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.249.234/tcp/37682/p2p/16Uiu2HAm2oSgy5ZGomgPcR7s9gACzhxjncR41d3rbCH9Ed4V4s3t", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-08 03:07:35.367 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-08 03:07:35.368 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-08 03:07:35.368 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37681/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-08 03:07:35.371 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 03:07:35.371 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58497/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "34f54163-4eba-43d6-907d-db574b85b9b2", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-08 03:07:35.376 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"34f54163-4eba-43d6-907d-db574b85b9b2","statusDesc":"OK"}'
2025-02-08 03:07:35.378 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58497/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": 1, "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-08 03:07:35.380 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:58497/filter/v2/subscriptions. Response content: b''
2025-02-08 03:07:35.383 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-08 03:07:35.384 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-08 03:07:35.384 DEBUG [src.node.waku_node] Stopping container with id 039b0aa47151
2025-02-08 03:07:35.976 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 03:07:35.976 DEBUG [src.node.waku_node] Stopping container with id 68a42098a71c
2025-02-08 03:07:36.789 ERROR [src.node.docker_mananger] Max retries reached for container 039b0aa47151. Exiting log stream.
2025-02-08 03:07:36.850 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 03:07:36.851 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-08 03:07:36.855 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 03:07:36.858 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
