2025-02-08 03:06:42.479 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-08 03:06:42.480 DEBUG [tests.conftest] Running test: test_store_sort_ascending[false] with id: 2025-02-08_03-06-42__58b59fd6-d08c-4ccf-bab7-5c7c7c4eea18
2025-02-08 03:06:42.480 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-08 03:06:42.480 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-08 03:06:42.480 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-08 03:06:42.486 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 03:06:42.486 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-08_03-06-42__58b59fd6-d08c-4ccf-bab7-5c7c7c4eea18__wakuorg_nwaku:latest.log
2025-02-08 03:06:42.487 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 03:06:42.487 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 03:06:42.488 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 03:06:42.488 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.169.165
2025-02-08 03:06:42.488 DEBUG [src.node.docker_mananger] Generated ports ['25048', '25049', '25050', '25051', '25052']
2025-02-08 03:06:42.488 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 03:06:42.488 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 03:06:42.489 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 03:06:42.489 DEBUG [src.node.docker_mananger] docker run -i -t -p 25048:25048 -p 25049:25049 -p 25050:25050 -p 25051:25051 -p 25052:25052 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25050 --rest-port=25048 --tcp-port=25049 --discv5-udp-port=25051 --rest-address=0.0.0.0 --nat=extip:172.18.169.165 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0d730faca50cfa07147ccdf648ed921e2bbc188ea8ff83e5fe3e3ecfe5ab8c12 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25052 --metrics-logging=true --store=true --relay=true
2025-02-08 03:06:42.717 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.169.165 waku 1f797ddd6858ecf5d71e8d23c18c97ee3b5ede76d338fc1aa5c2b65cc2df557d
2025-02-08 03:06:42.765 DEBUG [src.node.docker_mananger] Container started with ID 1f797ddd6858. Setting up logs at ./log/docker/publishing_node1_2025-02-08_03-06-42__58b59fd6-d08c-4ccf-bab7-5c7c7c4eea18__wakuorg_nwaku:latest.log
2025-02-08 03:06:42.767 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 25048
2025-02-08 03:06:42.767 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 03:06:43.283 ERROR [src.node.docker_mananger] Max retries reached for container 84debbe3e601. Exiting log stream.
2025-02-08 03:06:43.767 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25048/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:06:43.770 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 03:06:43.771 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 03:06:43.771 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25048/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:06:43.773 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.169.165/tcp/25049/p2p/16Uiu2HAmSZWvcy6S5nkX8MD4tZttdu9Nqk8rgHiGgq3gRuxMt8B3","/ip4/172.18.169.165/tcp/25050/ws/p2p/16Uiu2HAmSZWvcy6S5nkX8MD4tZttdu9Nqk8rgHiGgq3gRuxMt8B3"],"enrUri":"enr:-L24QPnTqUoZKxesRQRHH_2AHMiAxhUFHQ6ze9XJoNA9CM1MWPkOgc6w18MNLRDIcQnBUUJ3OuHlHIQ-jn5q_XWN1msCgmlkgnY0gmlwhKwSqaWKbXVsdGlhZGRyc5YACASsEqmlBmHZAAoErBKppQZh2t0DgnJzhQADAQAAiXNlY3AyNTZrMaEDzpyz-FWQHyAIZXP7L2ftKD6oCeyxLR4XAPPQDFHkYtqDdGNwgmHZg3VkcIJh24V3YWt1MgM"}'
2025-02-08 03:06:43.773 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 03:06:43.780 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-08 03:06:43.780 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-08_03-06-42__58b59fd6-d08c-4ccf-bab7-5c7c7c4eea18__wakuorg_go-waku:latest.log
2025-02-08 03:06:43.780 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 03:06:43.780 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 03:06:43.781 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 03:06:43.781 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.153.51
2025-02-08 03:06:43.781 DEBUG [src.node.docker_mananger] Generated ports ['37972', '37973', '37974', '37975', '37976']
2025-02-08 03:06:43.782 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 03:06:43.782 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 03:06:43.782 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 03:06:43.782 DEBUG [src.node.docker_mananger] docker run -i -t -p 37972:37972 -p 37973:37973 -p 37974:37974 -p 37975:37975 -p 37976:37976 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=37974 --rest-port=37972 --tcp-port=37973 --discv5-udp-port=37975 --rest-address=0.0.0.0 --nat=extip:172.18.153.51 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a82fc8cfae694f1c7ecfa8e002e4f0fd0fdadae27b6ddefcb94ffdd30c3c8f65 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QPnTqUoZKxesRQRHH_2AHMiAxhUFHQ6ze9XJoNA9CM1MWPkOgc6w18MNLRDIcQnBUUJ3OuHlHIQ-jn5q_XWN1msCgmlkgnY0gmlwhKwSqaWKbXVsdGlhZGRyc5YACASsEqmlBmHZAAoErBKppQZh2t0DgnJzhQADAQAAiXNlY3AyNTZrMaEDzpyz-FWQHyAIZXP7L2ftKD6oCeyxLR4XAPPQDFHkYtqDdGNwgmHZg3VkcIJh24V3YWt1MgM --storenode=/ip4/172.18.169.165/tcp/25049/p2p/16Uiu2HAmSZWvcy6S5nkX8MD4tZttdu9Nqk8rgHiGgq3gRuxMt8B3 --store=true --relay=true
2025-02-08 03:06:44.013 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.153.51 waku a52bf50bea9f2a12e3c07610ddcd77fb3de2ddaab4434474e52fb4774916a615
2025-02-08 03:06:44.067 DEBUG [src.node.docker_mananger] Container started with ID a52bf50bea9f. Setting up logs at ./log/docker/store_node1_2025-02-08_03-06-42__58b59fd6-d08c-4ccf-bab7-5c7c7c4eea18__wakuorg_go-waku:latest.log
2025-02-08 03:06:44.068 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 37972
2025-02-08 03:06:44.069 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 03:06:45.070 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37972/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:06:45.072 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QEZmwcUOKmJTN-l1GEDNqQd4_gGBJ6DD8rtT5u4-1lKsewu_YjVD8htvfL4f00U-SRWfqgeHL5iKrzYEMFzHsxyGAZTjhhnhgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaEDiCeHg07_nSA3kt4jL_dIZyyFBgH8g-T5ccScHPcfHHWDdGNwgpRVg3VkcIKUV4V3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/37973/p2p/16Uiu2HAmMpUktQrbiDP6w2znvUAjwPoBnpBiW56r9y3wRQymuE9r","/ip4/127.0.0.1/tcp/37974/ws/p2p/16Uiu2HAmMpUktQrbiDP6w2znvUAjwPoBnpBiW56r9y3wRQymuE9r","/ip4/172.17.0.3/tcp/37973/p2p/16Uiu2HAmMpUktQrbiDP6w2znvUAjwPoBnpBiW56r9y3wRQymuE9r","/ip4/172.17.0.3/tcp/37974/ws/p2p/16Uiu2HAmMpUktQrbiDP6w2znvUAjwPoBnpBiW56r9y3wRQymuE9r"]}'
2025-02-08 03:06:45.073 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 03:06:45.073 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37972/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.169.165/tcp/25049/p2p/16Uiu2HAmSZWvcy6S5nkX8MD4tZttdu9Nqk8rgHiGgq3gRuxMt8B3", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-08 03:06:45.090 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-08 03:06:45.091 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25048/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-08 03:06:45.114 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 03:06:45.114 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37972/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-08 03:06:45.116 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-08 03:06:45.120 DEBUG [src.steps.store] Relaying message
2025-02-08 03:06:45.121 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25048/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 03:06:45.133 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 03:06:45.133 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-08 03:06:45.334 DEBUG [src.steps.store] Relaying message
2025-02-08 03:06:45.334 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25048/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8x", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 03:06:45.340 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 03:06:45.341 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-08 03:06:45.541 DEBUG [src.steps.store] Relaying message
2025-02-08 03:06:45.542 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25048/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8y", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 03:06:45.547 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 03:06:45.547 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-08 03:06:45.748 DEBUG [src.steps.store] Relaying message
2025-02-08 03:06:45.748 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25048/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8z", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 03:06:45.753 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 03:06:45.753 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-08 03:06:45.954 DEBUG [src.steps.store] Relaying message
2025-02-08 03:06:45.955 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25048/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV80", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 03:06:45.960 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 03:06:45.960 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-08 03:06:46.161 DEBUG [src.steps.store] Relaying message
2025-02-08 03:06:46.161 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25048/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV81", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 03:06:46.167 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 03:06:46.167 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-08 03:06:46.368 DEBUG [src.steps.store] Relaying message
2025-02-08 03:06:46.368 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25048/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV82", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 03:06:46.373 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 03:06:46.373 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-08 03:06:46.574 DEBUG [src.steps.store] Relaying message
2025-02-08 03:06:46.574 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25048/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV83", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 03:06:46.580 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 03:06:46.580 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-08 03:06:46.780 DEBUG [src.steps.store] Relaying message
2025-02-08 03:06:46.781 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25048/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV84", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 03:06:46.786 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 03:06:46.786 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-08 03:06:46.987 DEBUG [src.steps.store] Relaying message
2025-02-08 03:06:46.987 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25048/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV85", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 03:06:46.992 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 03:06:46.993 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-08 03:06:47.193 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25048/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=false" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:06:47.197 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xebf88595c2437e5855d1065607699ff84c3ff7640b84589eef89b123ab0ffc1a"},{"messageHash":"0x786ee0b1f79c064849438f345156877ddad7aca89c9f5bce8e7688fe2b20897e"},{"messageHash":"0x0005858e0a1295310ce4325dec8561767b6b7805963f810ba051133436373fc9"},{"messageHash":"0xbb6445da99e86c8e621ca912fc9d0a3473cc35af8cdacc2cd4abcefcecfcde2f"},{"messageHash":"0x9a3c81bb5622e93551540f65fd9ef50e5e27ec51e5f0cf23c8fd655368fb4b64"}],"paginationCursor":"0xebf88595c2437e5855d1065607699ff84c3ff7640b84589eef89b123ab0ffc1a"}'
2025-02-08 03:06:47.197 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37972/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5&ascending=false" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:06:47.202 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"4bc5ffc88fb175f37529fa3f532a30c1432d6279c26b94fec65e3425068b8ade","status_code":200,"status_desc":"OK","messages":[{"message_hash":"6/iFlcJDflhV0QZWB2mf+Ew/92QLhFie74mxI6sP/Bo="},{"message_hash":"eG7gsfecBkhJQ480UVaHfdrXrKicn1vOjnaI/isgiX4="},{"message_hash":"AAWFjgoSlTEM5DJd7IVhdntreAWWP4ELoFETNDY3P8k="},{"message_hash":"u2RF2pnobI5iHKkS/J0KNHPMNa+M2sws1KvO/Oz83i8="},{"message_hash":"mjyBu1Yi6TVRVA9l/Z71Dl4n7FHl8M8jyP1lU2j7S2Q="}],"pagination_cursor":"6/iFlcJDflhV0QZWB2mf+Ew/92QLhFie74mxI6sP/Bo="}'
2025-02-08 03:06:47.204 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-08 03:06:47.205 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-08 03:06:47.206 DEBUG [src.node.waku_node] Stopping container with id 1f797ddd6858
2025-02-08 03:06:48.162 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 03:06:48.162 DEBUG [src.node.waku_node] Stopping container with id a52bf50bea9f
2025-02-08 03:06:48.684 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 03:06:48.686 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-08 03:06:48.695 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 03:06:48.699 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
