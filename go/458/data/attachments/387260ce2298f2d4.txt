2025-02-08 03:07:47.882 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-08 03:07:47.883 DEBUG [tests.conftest] Running test: test_publish_with_valid_timestamps with id: 2025-02-08_03-07-47__742733d2-0ee9-4dc5-bdee-68a6a5e9cb1b
2025-02-08 03:07:47.883 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-08 03:07:47.883 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-08 03:07:47.883 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2025-02-08 03:07:47.889 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 03:07:47.890 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-08_03-07-47__742733d2-0ee9-4dc5-bdee-68a6a5e9cb1b__wakuorg_nwaku:latest.log
2025-02-08 03:07:47.890 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 03:07:47.890 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 03:07:47.891 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 03:07:47.891 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.73.85
2025-02-08 03:07:47.892 DEBUG [src.node.docker_mananger] Generated ports ['8337', '8338', '8339', '8340', '8341']
2025-02-08 03:07:47.892 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 03:07:47.892 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 03:07:47.892 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 03:07:47.892 DEBUG [src.node.docker_mananger] docker run -i -t -p 8337:8337 -p 8338:8338 -p 8339:8339 -p 8340:8340 -p 8341:8341 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8339 --rest-port=8337 --tcp-port=8338 --discv5-udp-port=8340 --rest-address=0.0.0.0 --nat=extip:172.18.73.85 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bcb6ded0fd5e0ccfd914feae82d1bdc01531cd06fde2cd473140e0fcc0eb4ccc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8341 --metrics-logging=true --relay=true
2025-02-08 03:07:48.116 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.73.85 waku e4249574bd8bcce5613d9efca789b4e2d9803bc6176dc04b836dd5ad677d15b0
2025-02-08 03:07:48.167 DEBUG [src.node.docker_mananger] Container started with ID e4249574bd8b. Setting up logs at ./log/docker/node1_2025-02-08_03-07-47__742733d2-0ee9-4dc5-bdee-68a6a5e9cb1b__wakuorg_nwaku:latest.log
2025-02-08 03:07:48.168 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 8337
2025-02-08 03:07:48.168 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 03:07:48.636 ERROR [src.node.docker_mananger] Max retries reached for container 2157217500c9. Exiting log stream.
2025-02-08 03:07:49.168 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:8337/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:07:49.171 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 03:07:49.171 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 03:07:49.171 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:8337/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:07:49.173 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.73.85/tcp/8338/p2p/16Uiu2HAm2eVqc77YyWmkMYb6UtAaeDNxd2cHYqeNcwtjergotfSw","/ip4/172.18.73.85/tcp/8339/ws/p2p/16Uiu2HAm2eVqc77YyWmkMYb6UtAaeDNxd2cHYqeNcwtjergotfSw"],"enrUri":"enr:-L24QO6NVs643z_73PzoLQ2nd2M4qGh9T9_82vf7sBuFfBTZQ3kX5GQehrjNDREADESkXz6YqE6ktWheNFw1ZhZtd1wCgmlkgnY0gmlwhKwSSVWKbXVsdGlhZGRyc5YACASsEklVBiCSAAoErBJJVQYgk90DgnJzhQADAQAAiXNlY3AyNTZrMaECa0rkcUMzPmNlyIEjXxVjVluG6_Huk_2cP0RP3jQdwjCDdGNwgiCSg3VkcIIglIV3YWt1MgE"}'
2025-02-08 03:07:49.174 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 03:07:49.180 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-08 03:07:49.180 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-08_03-07-47__742733d2-0ee9-4dc5-bdee-68a6a5e9cb1b__wakuorg_go-waku:latest.log
2025-02-08 03:07:49.180 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 03:07:49.181 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 03:07:49.182 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 03:07:49.182 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.149.68
2025-02-08 03:07:49.182 DEBUG [src.node.docker_mananger] Generated ports ['25434', '25435', '25436', '25437', '25438']
2025-02-08 03:07:49.182 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 03:07:49.182 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 03:07:49.183 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 03:07:49.183 DEBUG [src.node.docker_mananger] docker run -i -t -p 25434:25434 -p 25435:25435 -p 25436:25436 -p 25437:25437 -p 25438:25438 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=25436 --rest-port=25434 --tcp-port=25435 --discv5-udp-port=25437 --rest-address=0.0.0.0 --nat=extip:172.18.149.68 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b19cb99ccfddafb5d63ffca1e378605ab9a9073bead5afaace82babf3da3acc5 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --discv5-bootstrap-node=enr:-L24QO6NVs643z_73PzoLQ2nd2M4qGh9T9_82vf7sBuFfBTZQ3kX5GQehrjNDREADESkXz6YqE6ktWheNFw1ZhZtd1wCgmlkgnY0gmlwhKwSSVWKbXVsdGlhZGRyc5YACASsEklVBiCSAAoErBJJVQYgk90DgnJzhQADAQAAiXNlY3AyNTZrMaECa0rkcUMzPmNlyIEjXxVjVluG6_Huk_2cP0RP3jQdwjCDdGNwgiCSg3VkcIIglIV3YWt1MgE
2025-02-08 03:07:49.411 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.149.68 waku d148e294ce51f965e989454987669563f7cd4a425a7c2746e85bcc9ed1447b93
2025-02-08 03:07:49.465 DEBUG [src.node.docker_mananger] Container started with ID d148e294ce51. Setting up logs at ./log/docker/node2_2025-02-08_03-07-47__742733d2-0ee9-4dc5-bdee-68a6a5e9cb1b__wakuorg_go-waku:latest.log
2025-02-08 03:07:49.465 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 25434
2025-02-08 03:07:49.465 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 03:07:50.466 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25434/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:07:50.468 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QAK2o3oWURiXN5KsT_hr57a-2ntJaquXLMTu7EMi_vOIeojt4RTyFVK4PjcxUgwHLUP0mNg5QGKGqZZpVIcE7f6GAZTjhxlSgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaEDKmk3hS9tyQbU5AJx_MEcDw04M2wQNGAZ6D3DNsrvVq2DdGNwgmNbg3VkcIJjXYV3YWt1MgE","listenAddresses":["/ip4/127.0.0.1/tcp/25435/p2p/16Uiu2HAmFWYXbMy8y9vJDVkJr1xaKrHPfXPm4smckLD5L75o74TE","/ip4/127.0.0.1/tcp/25436/ws/p2p/16Uiu2HAmFWYXbMy8y9vJDVkJr1xaKrHPfXPm4smckLD5L75o74TE","/ip4/172.17.0.3/tcp/25435/p2p/16Uiu2HAmFWYXbMy8y9vJDVkJr1xaKrHPfXPm4smckLD5L75o74TE","/ip4/172.17.0.3/tcp/25436/ws/p2p/16Uiu2HAmFWYXbMy8y9vJDVkJr1xaKrHPfXPm4smckLD5L75o74TE"]}'
2025-02-08 03:07:50.469 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 03:07:50.469 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25434/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.73.85/tcp/8338/p2p/16Uiu2HAm2eVqc77YyWmkMYb6UtAaeDNxd2cHYqeNcwtjergotfSw", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-08 03:07:50.486 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-08 03:07:50.487 DEBUG [src.steps.relay] Running fixture setup: subscribe_main_relay_nodes
2025-02-08 03:07:50.488 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:8337/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-08 03:07:50.513 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 03:07:50.514 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25434/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-08 03:07:50.516 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-08 03:07:50.517 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:8337/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 03:07:50.526 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 03:07:50.526 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 03:07:50.626 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-08 03:07:50.626 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:8337/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:07:50.629 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738984070517701888,"ephemeral":false}]'
2025-02-08 03:07:50.631 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-08 03:07:50.631 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25434/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:07:50.632 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-08 03:07:51.634 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:8337/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 03:07:51.638 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 03:07:51.639 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 03:07:51.739 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-08 03:07:51.739 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:8337/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:07:51.742 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738984071633799680,"ephemeral":false}]'
2025-02-08 03:07:51.743 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-08 03:07:51.743 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25434/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:07:51.745 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738984071633799680,"ephemeral":false}]'
2025-02-08 03:07:51.746 INFO [src.steps.relay] WARM UP successful!!
2025-02-08 03:07:51.747 DEBUG [tests.relay.test_publish] Running test with timestamp Now
2025-02-08 03:07:51.748 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:8337/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 03:07:51.752 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 03:07:51.752 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 03:07:51.853 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-08 03:07:51.853 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:8337/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:07:51.856 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738983887172046848,"ephemeral":false}]'
2025-02-08 03:07:51.857 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-08 03:07:51.857 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25434/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:07:51.859 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738983887172046848,"ephemeral":false}]'
2025-02-08 03:07:51.860 DEBUG [tests.relay.test_publish] Running test with timestamp Far future
2025-02-08 03:07:51.861 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:8337/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 03:07:51.865 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 03:07:51.865 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 03:07:51.965 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-08 03:07:51.965 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:8337/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:07:51.968 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":2054343887172034048,"ephemeral":false}]'
2025-02-08 03:07:51.969 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-08 03:07:51.970 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25434/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:07:51.971 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":2054343887172034048,"ephemeral":false}]'
2025-02-08 03:07:51.972 DEBUG [tests.relay.test_publish] Running test with timestamp Recent past
2025-02-08 03:07:51.973 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:8337/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 03:07:51.977 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 03:07:51.977 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 03:07:52.077 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-08 03:07:52.078 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:8337/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:07:52.081 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738980287172034048,"ephemeral":false}]'
2025-02-08 03:07:52.082 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-08 03:07:52.082 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25434/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:07:52.084 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738980287172034048,"ephemeral":false}]'
2025-02-08 03:07:52.085 DEBUG [tests.relay.test_publish] Running test with timestamp Near future
2025-02-08 03:07:52.085 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:8337/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 03:07:52.091 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 03:07:52.091 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 03:07:52.191 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-08 03:07:52.191 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:8337/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:07:52.194 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738987487172034048,"ephemeral":false}]'
2025-02-08 03:07:52.195 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-08 03:07:52.195 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25434/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:07:52.197 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738987487172034048,"ephemeral":false}]'
2025-02-08 03:07:52.198 DEBUG [tests.relay.test_publish] Running test with timestamp Positive number
2025-02-08 03:07:52.199 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:8337/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 03:07:52.203 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 03:07:52.203 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 03:07:52.303 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-08 03:07:52.304 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:8337/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:07:52.306 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1,"ephemeral":false}]'
2025-02-08 03:07:52.307 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-08 03:07:52.307 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25434/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:07:52.309 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1,"ephemeral":false}]'
2025-02-08 03:07:52.311 DEBUG [tests.relay.test_publish] Running test with timestamp Negative number
2025-02-08 03:07:52.311 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:8337/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 03:07:52.315 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 03:07:52.315 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 03:07:52.415 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-08 03:07:52.416 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:8337/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:07:52.418 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":-1,"ephemeral":false}]'
2025-02-08 03:07:52.419 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-08 03:07:52.419 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25434/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:07:52.421 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":-1,"ephemeral":false}]'
2025-02-08 03:07:52.422 DEBUG [tests.relay.test_publish] Running test with timestamp DST change
2025-02-08 03:07:52.423 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:8337/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 03:07:52.427 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 03:07:52.427 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 03:07:52.527 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-08 03:07:52.528 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:8337/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:07:52.530 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1583632800000000000,"ephemeral":false}]'
2025-02-08 03:07:52.532 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-08 03:07:52.532 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25434/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:07:52.533 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1583632800000000000,"ephemeral":false}]'
2025-02-08 03:07:52.537 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-08 03:07:52.538 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-08 03:07:52.538 DEBUG [src.node.waku_node] Stopping container with id e4249574bd8b
2025-02-08 03:07:53.645 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 03:07:53.646 DEBUG [src.node.waku_node] Stopping container with id d148e294ce51
2025-02-08 03:07:54.149 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 03:07:54.150 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-08 03:07:54.157 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 03:07:54.161 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
