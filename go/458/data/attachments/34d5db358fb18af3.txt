2025-02-08 03:03:58.416 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-08 03:03:58.417 DEBUG [tests.conftest] Running test: test_store_node_not_connected_directly_to_relaying_node with id: 2025-02-08_03-03-58__f47a4a70-1836-49ef-ab9f-4d2b6ec5c738
2025-02-08 03:03:58.417 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-08 03:03:58.417 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-08 03:03:58.418 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-08 03:03:58.426 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-08 03:03:58.426 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-08_03-03-58__f47a4a70-1836-49ef-ab9f-4d2b6ec5c738__wakuorg_go-waku:latest.log
2025-02-08 03:03:58.432 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 03:03:58.432 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-08_03-03-58__f47a4a70-1836-49ef-ab9f-4d2b6ec5c738__wakuorg_nwaku:latest.log
2025-02-08 03:03:58.438 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-08 03:03:58.438 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node3_2025-02-08_03-03-58__f47a4a70-1836-49ef-ab9f-4d2b6ec5c738__wakuorg_go-waku:latest.log
2025-02-08 03:03:58.438 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-08 03:03:58.438 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-08 03:03:58.439 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 03:03:58.439 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 03:03:58.504 DEBUG [src.node.docker_mananger] Network waku created
2025-02-08 03:03:58.504 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.231.237
2025-02-08 03:03:58.505 DEBUG [src.node.docker_mananger] Generated ports ['3953', '3954', '3955', '3956', '3957']
2025-02-08 03:03:58.505 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 03:03:58.505 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 03:03:58.505 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 03:03:58.505 DEBUG [src.node.docker_mananger] docker run -i -t -p 3953:3953 -p 3954:3954 -p 3955:3955 -p 3956:3956 -p 3957:3957 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=3955 --rest-port=3953 --tcp-port=3954 --discv5-udp-port=3956 --rest-address=0.0.0.0 --nat=extip:172.18.231.237 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3abe1cefe9ad92e6f80bfaa6d23f91653fbc63608bfaa507cbf553e6fe4bcc1e --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true
2025-02-08 03:04:01.695 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.231.237 waku 974aec81001f24f95ff89c6a68e98ccf1a47f30d9edf148fafd02e7a7742204e
2025-02-08 03:04:01.748 DEBUG [src.node.docker_mananger] Container started with ID 974aec81001f. Setting up logs at ./log/docker/node1_2025-02-08_03-03-58__f47a4a70-1836-49ef-ab9f-4d2b6ec5c738__wakuorg_go-waku:latest.log
2025-02-08 03:04:01.750 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 3953
2025-02-08 03:04:01.750 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 03:04:02.753 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3953/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:04:02.755 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QLIKNDJBYONCQRrOUuvvd39kjts0SWyAASZj7-5UFZqAD9FUzsZxkoFh1jE8CJ4rUdSZaoj56GVvFNQs4YzzbhuGAZTjg5_NgmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaEC3pne4TrRk-Aq5SJy16zbrD2wzTA7hp8N62Ip2-cBINKDdGNwgg9yg3VkcIIPdIV3YWt1MgE","listenAddresses":["/ip4/127.0.0.1/tcp/3954/p2p/16Uiu2HAmAQcaBNMHCveGHfDjMvDdK6TbMyULZfPd1ytoVzEhuw6R","/ip4/127.0.0.1/tcp/3955/ws/p2p/16Uiu2HAmAQcaBNMHCveGHfDjMvDdK6TbMyULZfPd1ytoVzEhuw6R","/ip4/172.17.0.2/tcp/3954/p2p/16Uiu2HAmAQcaBNMHCveGHfDjMvDdK6TbMyULZfPd1ytoVzEhuw6R","/ip4/172.17.0.2/tcp/3955/ws/p2p/16Uiu2HAmAQcaBNMHCveGHfDjMvDdK6TbMyULZfPd1ytoVzEhuw6R"]}'
2025-02-08 03:04:02.755 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 03:04:02.756 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 03:04:02.756 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 03:04:02.757 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 03:04:02.757 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.142.103
2025-02-08 03:04:02.758 DEBUG [src.node.docker_mananger] Generated ports ['6033', '6034', '6035', '6036', '6037']
2025-02-08 03:04:02.758 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 03:04:02.758 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 03:04:02.758 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 03:04:02.758 DEBUG [src.node.docker_mananger] docker run -i -t -p 6033:6033 -p 6034:6034 -p 6035:6035 -p 6036:6036 -p 6037:6037 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6035 --rest-port=6033 --tcp-port=6034 --discv5-udp-port=6036 --rest-address=0.0.0.0 --nat=extip:172.18.142.103 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=45ecd5fa32c64e0cdcfdf6276641e5f7ebbfffeb8ff2cee38aa6d9e5a29fb51a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6037 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-J-4QLIKNDJBYONCQRrOUuvvd39kjts0SWyAASZj7-5UFZqAD9FUzsZxkoFh1jE8CJ4rUdSZaoj56GVvFNQs4YzzbhuGAZTjg5_NgmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaEC3pne4TrRk-Aq5SJy16zbrD2wzTA7hp8N62Ip2-cBINKDdGNwgg9yg3VkcIIPdIV3YWt1MgE
2025-02-08 03:04:05.422 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.142.103 waku 6e78828126e71f0b69b03e4d6e8e4ea767b2d01ae4983dce14a829821528345b
2025-02-08 03:04:05.470 DEBUG [src.node.docker_mananger] Container started with ID 6e78828126e7. Setting up logs at ./log/docker/node2_2025-02-08_03-03-58__f47a4a70-1836-49ef-ab9f-4d2b6ec5c738__wakuorg_nwaku:latest.log
2025-02-08 03:04:05.471 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 6033
2025-02-08 03:04:05.471 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 03:04:06.472 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6033/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:04:06.476 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 03:04:06.477 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 03:04:06.478 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6033/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:04:06.486 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.142.103/tcp/6034/p2p/16Uiu2HAmU84KXoD4nE3Nk4eqK4simVgEs4JXKMcsAyM7K1CbfVrj","/ip4/172.18.142.103/tcp/6035/ws/p2p/16Uiu2HAmU84KXoD4nE3Nk4eqK4simVgEs4JXKMcsAyM7K1CbfVrj"],"enrUri":"enr:-L24QLRGbOx4oPFLh3JzTiiVgK3xJHjfM5WWXGs8iMWOPnmFNLprLXS4rO6qgVbdCnbjAI5-JjEf-Tuaubtw0ewCwHACgmlkgnY0gmlwhKwSjmeKbXVsdGlhZGRyc5YACASsEo5nBheSAAoErBKOZwYXk90DgnJzhQADAQAAiXNlY3AyNTZrMaED5c55anynKg8wuY1vSsjIB-GCV-UND1zBZn8dc0ymeiSDdGNwgheSg3VkcIIXlIV3YWt1MgM"}'
2025-02-08 03:04:06.487 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 03:04:06.487 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 03:04:06.487 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 03:04:06.491 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 03:04:06.491 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.91.175
2025-02-08 03:04:06.491 DEBUG [src.node.docker_mananger] Generated ports ['62534', '62535', '62536', '62537', '62538']
2025-02-08 03:04:06.491 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 03:04:06.491 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 03:04:06.491 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 03:04:06.492 DEBUG [src.node.docker_mananger] docker run -i -t -p 62534:62534 -p 62535:62535 -p 62536:62536 -p 62537:62537 -p 62538:62538 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=62536 --rest-port=62534 --tcp-port=62535 --discv5-udp-port=62537 --rest-address=0.0.0.0 --nat=extip:172.18.91.175 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e388e0372edcdcbefb474baee0fdab105c22fdd2cbb32cdc54cfafc6f0d9114a --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --storenode=/ip4/172.18.142.103/tcp/6034/p2p/16Uiu2HAmU84KXoD4nE3Nk4eqK4simVgEs4JXKMcsAyM7K1CbfVrj --discv5-bootstrap-node=enr:-L24QLRGbOx4oPFLh3JzTiiVgK3xJHjfM5WWXGs8iMWOPnmFNLprLXS4rO6qgVbdCnbjAI5-JjEf-Tuaubtw0ewCwHACgmlkgnY0gmlwhKwSjmeKbXVsdGlhZGRyc5YACASsEo5nBheSAAoErBKOZwYXk90DgnJzhQADAQAAiXNlY3AyNTZrMaED5c55anynKg8wuY1vSsjIB-GCV-UND1zBZn8dc0ymeiSDdGNwgheSg3VkcIIXlIV3YWt1MgM --pubsub-topic=/waku/2/rs/3/1
2025-02-08 03:04:06.731 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.91.175 waku a2c3b8fba46c25d28067a8c2eeeb1f3c3ef1fc85e8c0c719586321af233799c4
2025-02-08 03:04:06.779 DEBUG [src.node.docker_mananger] Container started with ID a2c3b8fba46c. Setting up logs at ./log/docker/node3_2025-02-08_03-03-58__f47a4a70-1836-49ef-ab9f-4d2b6ec5c738__wakuorg_go-waku:latest.log
2025-02-08 03:04:06.781 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 62534
2025-02-08 03:04:06.781 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 03:04:07.781 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62534/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:04:07.784 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QBOZom7b2sgDTaOdLh8KxPAilgjdBdxIQ-Xa0q96VFMWBrjRZ415KRUR96aWUljB17E1cwSBjJel88ugfCDICLGGAZTjg7N8gmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQNRUjcUDPdpJ5s8QlTWWaovKaROSZhcfgtPHc7-2UJns4N0Y3CC9EeDdWRwgvRJhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/62535/p2p/16Uiu2HAmJ8S5vMR84oi53BuFEtNtQFZhuULcgYfTKdEtTeNYqBLn","/ip4/127.0.0.1/tcp/62536/ws/p2p/16Uiu2HAmJ8S5vMR84oi53BuFEtNtQFZhuULcgYfTKdEtTeNYqBLn","/ip4/172.17.0.4/tcp/62535/p2p/16Uiu2HAmJ8S5vMR84oi53BuFEtNtQFZhuULcgYfTKdEtTeNYqBLn","/ip4/172.17.0.4/tcp/62536/ws/p2p/16Uiu2HAmJ8S5vMR84oi53BuFEtNtQFZhuULcgYfTKdEtTeNYqBLn"]}'
2025-02-08 03:04:07.784 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 03:04:07.784 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3953/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-08 03:04:07.786 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-08 03:04:07.787 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6033/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-08 03:04:07.790 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 03:04:07.790 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:3953/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:04:07.792 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"id":"16Uiu2HAmU84KXoD4nE3Nk4eqK4simVgEs4JXKMcsAyM7K1CbfVrj","multiaddrs":["/ip4/172.18.142.103/tcp/6034/p2p/16Uiu2HAmU84KXoD4nE3Nk4eqK4simVgEs4JXKMcsAyM7K1CbfVrj","/ip4/172.18.142.103/tcp/6035/ws/p2p/16Uiu2HAmU84KXoD4nE3Nk4eqK4simVgEs4JXKMcsAyM7K1CbfVrj"],"protocols":null,"connected":false,"pubsubTopics":[]}]'
2025-02-08 03:04:07.792 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6033/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:04:07.795 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.4/tcp/62535/p2p/16Uiu2HAmJ8S5vMR84oi53BuFEtNtQFZhuULcgYfTKdEtTeNYqBLn","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
2025-02-08 03:04:07.795 DEBUG [src.libs.common] Sleeping for 30 seconds
2025-02-08 03:04:37.795 DEBUG [src.steps.store] Relaying message
2025-02-08 03:04:37.796 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:3953/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 03:04:37.798 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-08 03:04:37.800 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-08 03:04:38.003 DEBUG [src.steps.store] Checking that peer wakuorg/go-waku:latest can find the stored messages
2025-02-08 03:04:38.004 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62534/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-filter%2Fproto&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:04:38.009 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"0c053afe9b1b6ea5cb51d3f71ac966834923a8117fc0f2ebaa089da80c430719","status_code":200,"status_desc":"OK","messages":[{"message_hash":"FZTgwrEGTzREIKPK/AOFP0rJjilVPecXIufK88A4niQ="}]}'
2025-02-08 03:04:38.012 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-08 03:04:38.013 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-08 03:04:38.013 DEBUG [src.node.waku_node] Stopping container with id 974aec81001f
2025-02-08 03:04:38.527 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 03:04:38.527 DEBUG [src.node.waku_node] Stopping container with id 6e78828126e7
2025-02-08 03:04:39.340 ERROR [src.node.docker_mananger] Max retries reached for container 974aec81001f. Exiting log stream.
2025-02-08 03:04:39.895 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 03:04:39.896 DEBUG [src.node.waku_node] Stopping container with id a2c3b8fba46c
2025-02-08 03:04:40.377 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 03:04:40.378 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-08 03:04:40.383 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 03:04:40.395 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 03:04:40.398 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
