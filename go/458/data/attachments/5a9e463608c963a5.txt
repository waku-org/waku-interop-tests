2025-02-08 03:06:42.310 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-08 03:06:42.310 DEBUG [tests.conftest] Running test: test_light_push_with_missing_pubsub_topics with id: 2025-02-08_03-06-42__8577b308-2aa3-43c3-b509-1be92e7987b1
2025-02-08 03:06:42.310 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-08 03:06:42.310 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-08 03:06:42.317 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 03:06:42.317 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-08_03-06-42__8577b308-2aa3-43c3-b509-1be92e7987b1__wakuorg_nwaku:latest.log
2025-02-08 03:06:42.317 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 03:06:42.317 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 03:06:42.318 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 03:06:42.319 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.180.230
2025-02-08 03:06:42.319 DEBUG [src.node.docker_mananger] Generated ports ['63879', '63880', '63881', '63882', '63883']
2025-02-08 03:06:42.319 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 03:06:42.319 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 03:06:42.319 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 03:06:42.319 DEBUG [src.node.docker_mananger] docker run -i -t -p 63879:63879 -p 63880:63880 -p 63881:63881 -p 63882:63882 -p 63883:63883 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63881 --rest-port=63879 --tcp-port=63880 --discv5-udp-port=63882 --rest-address=0.0.0.0 --nat=extip:172.18.180.230 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=aa0aeb74a3543b07cca66fef9ac7d4562e3d4c6ad3b0384dfea6adeca2e671bc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63883 --metrics-logging=true --lightpush=true --relay=true
2025-02-08 03:06:42.556 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.180.230 waku a4bb1cdd62be93ee4f7e782a0cc6cc1a7576eb5ebcfc44288822114dfc77c985
2025-02-08 03:06:42.567 ERROR [src.node.docker_mananger] Max retries reached for container a3887e8c4d7b. Exiting log stream.
2025-02-08 03:06:42.605 DEBUG [src.node.docker_mananger] Container started with ID a4bb1cdd62be. Setting up logs at ./log/docker/receiving_node1_2025-02-08_03-06-42__8577b308-2aa3-43c3-b509-1be92e7987b1__wakuorg_nwaku:latest.log
2025-02-08 03:06:42.606 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 63879
2025-02-08 03:06:42.607 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 03:06:43.097 ERROR [src.node.docker_mananger] Max retries reached for container cd3df0a24eb8. Exiting log stream.
2025-02-08 03:06:43.609 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63879/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:06:43.612 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 03:06:43.612 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 03:06:43.612 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63879/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:06:43.614 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.180.230/tcp/63880/p2p/16Uiu2HAmLkX7BCE1H6fqLMM2UyqAL66iUixZdcP55UUQfV8tqwsf","/ip4/172.18.180.230/tcp/63881/ws/p2p/16Uiu2HAmLkX7BCE1H6fqLMM2UyqAL66iUixZdcP55UUQfV8tqwsf"],"enrUri":"enr:-L24QHeC_7AC5AKat0v3spNeUFNeyjd86yXqppiTaKsTwNq5bNJTn1cwgwW5Zph-SRyJB3y72D1POjjsX2jrvXEYNFgCgmlkgnY0gmlwhKwStOaKbXVsdGlhZGRyc5YACASsErTmBvmIAAoErBK05gb5id0DgnJzhQADAQAAiXNlY3AyNTZrMaEDeEgtFuP_FswgVPcLYw7Mxxjivjnd-EgL8662l3AjKSKDdGNwgvmIg3VkcIL5ioV3YWt1Mgk"}'
2025-02-08 03:06:43.614 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 03:06:43.621 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 03:06:43.621 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-08_03-06-42__8577b308-2aa3-43c3-b509-1be92e7987b1__wakuorg_nwaku:latest.log
2025-02-08 03:06:43.621 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 03:06:43.621 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 03:06:43.623 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 03:06:43.623 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.104.122
2025-02-08 03:06:43.623 DEBUG [src.node.docker_mananger] Generated ports ['15446', '15447', '15448', '15449', '15450']
2025-02-08 03:06:43.623 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 03:06:43.623 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 03:06:43.623 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 03:06:43.624 DEBUG [src.node.docker_mananger] docker run -i -t -p 15446:15446 -p 15447:15447 -p 15448:15448 -p 15449:15449 -p 15450:15450 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15448 --rest-port=15446 --tcp-port=15447 --discv5-udp-port=15449 --rest-address=0.0.0.0 --nat=extip:172.18.104.122 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2cbb5b6c5ceeefeabe60d4e07050f54edb4f48de84aba6f4a1547cdfc3a3c42b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15450 --metrics-logging=true --lightpush=false --relay=true
2025-02-08 03:06:43.843 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.104.122 waku 084e3dcb13a7a62366489c902a453209198f014a3ee71a8e1379b818edf2287f
2025-02-08 03:06:43.896 DEBUG [src.node.docker_mananger] Container started with ID 084e3dcb13a7. Setting up logs at ./log/docker/receiving_node2_2025-02-08_03-06-42__8577b308-2aa3-43c3-b509-1be92e7987b1__wakuorg_nwaku:latest.log
2025-02-08 03:06:43.896 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 15446
2025-02-08 03:06:43.896 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 03:06:44.897 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15446/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:06:44.900 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 03:06:44.900 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 03:06:44.900 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15446/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:06:44.902 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.104.122/tcp/15447/p2p/16Uiu2HAmA2hzcCMiXofjiwmfGjarALWQTRydubrCRfGBcM63XkuG","/ip4/172.18.104.122/tcp/15448/ws/p2p/16Uiu2HAmA2hzcCMiXofjiwmfGjarALWQTRydubrCRfGBcM63XkuG"],"enrUri":"enr:-L24QNRxJAUorTOOWPgu_O8qTzorNl5plzYD5K5bid7upurQbfIlZgSbj5iIdoWsaqQT9mBbvbE1qvTv7grGkvenwiICgmlkgnY0gmlwhKwSaHqKbXVsdGlhZGRyc5YACASsEmh6BjxXAAoErBJoegY8WN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC2P04-gVxjVPK7qZcXSqiL8GI2CcyXzAhE2EgbbuWnFODdGNwgjxXg3VkcII8WYV3YWt1MgE"}'
2025-02-08 03:06:44.902 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 03:06:44.903 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15446/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.180.230/tcp/63880/p2p/16Uiu2HAmLkX7BCE1H6fqLMM2UyqAL66iUixZdcP55UUQfV8tqwsf"]'
2025-02-08 03:06:44.943 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 03:06:44.964 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-08 03:06:44.964 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-08_03-06-42__8577b308-2aa3-43c3-b509-1be92e7987b1__wakuorg_go-waku:latest.log
2025-02-08 03:06:44.964 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 03:06:44.964 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 03:06:44.966 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 03:06:44.966 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.52.170
2025-02-08 03:06:44.966 DEBUG [src.node.docker_mananger] Generated ports ['34114', '34115', '34116', '34117', '34118']
2025-02-08 03:06:44.966 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 03:06:44.967 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 03:06:44.967 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 03:06:44.967 DEBUG [src.node.docker_mananger] docker run -i -t -p 34114:34114 -p 34115:34115 -p 34116:34116 -p 34117:34117 -p 34118:34118 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=34116 --rest-port=34114 --tcp-port=34115 --discv5-udp-port=34117 --rest-address=0.0.0.0 --nat=extip:172.18.52.170 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a0c8bed4af5db8fb1a3cc4dd493e3af66ea7a293c931e331406aa6342fab0efe --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QHeC_7AC5AKat0v3spNeUFNeyjd86yXqppiTaKsTwNq5bNJTn1cwgwW5Zph-SRyJB3y72D1POjjsX2jrvXEYNFgCgmlkgnY0gmlwhKwStOaKbXVsdGlhZGRyc5YACASsErTmBvmIAAoErBK05gb5id0DgnJzhQADAQAAiXNlY3AyNTZrMaEDeEgtFuP_FswgVPcLYw7Mxxjivjnd-EgL8662l3AjKSKDdGNwgvmIg3VkcIL5ioV3YWt1Mgk --lightpushnode=/ip4/172.18.180.230/tcp/63880/p2p/16Uiu2HAmLkX7BCE1H6fqLMM2UyqAL66iUixZdcP55UUQfV8tqwsf --lightpush=true --relay=false --pubsub-topic=/waku/2/rs/3/1
2025-02-08 03:06:45.195 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.52.170 waku 972dd5c6ec4660bc37543ffa392e7145081465e661e180381d10decebd38157f
2025-02-08 03:06:45.246 DEBUG [src.node.docker_mananger] Container started with ID 972dd5c6ec46. Setting up logs at ./log/docker/lightpush_node1_2025-02-08_03-06-42__8577b308-2aa3-43c3-b509-1be92e7987b1__wakuorg_go-waku:latest.log
2025-02-08 03:06:45.248 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 34114
2025-02-08 03:06:45.248 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 03:06:46.248 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:34114/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:06:46.251 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QLkxdA0TMWG2cbc87dO0tlNq89tm3udyw3s9ZW8Ga2S2VhWf-p5mYKHpXraUXbJILGWi85bJjpSYjte8d3w-D06GAZTjhh54gmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQIla6OinvdP0zQhyJXSrOBJxDoAFf8Yaj40rk2Av9n4voN0Y3CChUODdWRwgoVFhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/34115/p2p/16Uiu2HAkwwkG7r6rNoBk2ideCyE3Yejqs98d1Ju912j1wT6LqUf7","/ip4/127.0.0.1/tcp/34116/ws/p2p/16Uiu2HAkwwkG7r6rNoBk2ideCyE3Yejqs98d1Ju912j1wT6LqUf7","/ip4/172.17.0.4/tcp/34115/p2p/16Uiu2HAkwwkG7r6rNoBk2ideCyE3Yejqs98d1Ju912j1wT6LqUf7","/ip4/172.17.0.4/tcp/34116/ws/p2p/16Uiu2HAkwwkG7r6rNoBk2ideCyE3Yejqs98d1Ju912j1wT6LqUf7"]}'
2025-02-08 03:06:46.252 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 03:06:46.252 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34114/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.180.230/tcp/63880/p2p/16Uiu2HAmLkX7BCE1H6fqLMM2UyqAL66iUixZdcP55UUQfV8tqwsf", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-08 03:06:46.254 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-08 03:06:46.254 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34114/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.104.122/tcp/15447/p2p/16Uiu2HAmA2hzcCMiXofjiwmfGjarALWQTRydubrCRfGBcM63XkuG", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-08 03:06:46.271 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-08 03:06:46.272 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63879/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-08 03:06:46.276 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 03:06:46.277 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15446/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-08 03:06:46.282 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 03:06:46.283 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34114/lightpush/v1/message" -H "Content-Type: application/json" -d '{"message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738984006283407360}}'
2025-02-08 03:07:06.288 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-08 03:07:06.289 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-08 03:07:06.289 DEBUG [src.node.waku_node] Stopping container with id a4bb1cdd62be
2025-02-08 03:07:06.797 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 03:07:06.798 DEBUG [src.node.waku_node] Stopping container with id 084e3dcb13a7
2025-02-08 03:07:07.611 ERROR [src.node.docker_mananger] Max retries reached for container a4bb1cdd62be. Exiting log stream.
2025-02-08 03:07:07.872 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 03:07:07.873 DEBUG [src.node.waku_node] Stopping container with id 972dd5c6ec46
2025-02-08 03:07:08.381 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 03:07:08.384 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-08 03:07:08.392 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 03:07:08.399 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 03:07:08.404 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
