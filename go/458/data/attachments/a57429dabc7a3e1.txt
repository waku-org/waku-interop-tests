2025-02-08 03:04:36.076 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-08 03:04:36.077 DEBUG [tests.conftest] Running test: test_light_push_with_missing_payload with id: 2025-02-08_03-04-36__da58d3e8-1f04-4e65-9c88-2491210d6da0
2025-02-08 03:04:36.077 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-08 03:04:36.077 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-08 03:04:36.084 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 03:04:36.084 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-08_03-04-36__da58d3e8-1f04-4e65-9c88-2491210d6da0__wakuorg_nwaku:latest.log
2025-02-08 03:04:36.085 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 03:04:36.085 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 03:04:36.086 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 03:04:36.086 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.101.122
2025-02-08 03:04:36.086 DEBUG [src.node.docker_mananger] Generated ports ['28092', '28093', '28094', '28095', '28096']
2025-02-08 03:04:36.087 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 03:04:36.087 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 03:04:36.087 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 03:04:36.087 DEBUG [src.node.docker_mananger] docker run -i -t -p 28092:28092 -p 28093:28093 -p 28094:28094 -p 28095:28095 -p 28096:28096 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28094 --rest-port=28092 --tcp-port=28093 --discv5-udp-port=28095 --rest-address=0.0.0.0 --nat=extip:172.18.101.122 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=28cdade38cbc477e5a2017dc5c1047ece074b0b30cd1eafdb5fc5dd99b50410d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28096 --metrics-logging=true --lightpush=true --relay=true
2025-02-08 03:04:36.323 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.101.122 waku 714b06a7f24c90fd47af3f50071d0c9d9ed85f65292c70de135b9a7ef9d01c0f
2025-02-08 03:04:36.353 ERROR [src.node.docker_mananger] Max retries reached for container 71960ca68e04. Exiting log stream.
2025-02-08 03:04:36.377 DEBUG [src.node.docker_mananger] Container started with ID 714b06a7f24c. Setting up logs at ./log/docker/receiving_node1_2025-02-08_03-04-36__da58d3e8-1f04-4e65-9c88-2491210d6da0__wakuorg_nwaku:latest.log
2025-02-08 03:04:36.378 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 28092
2025-02-08 03:04:36.378 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 03:04:36.869 ERROR [src.node.docker_mananger] Max retries reached for container bc77f21ee4a5. Exiting log stream.
2025-02-08 03:04:37.379 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28092/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:04:37.382 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 03:04:37.382 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 03:04:37.382 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28092/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:04:37.385 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.101.122/tcp/28093/p2p/16Uiu2HAmL9WBUNjw6vJcUsbAC3p1jKoaKF9aPfbLn59W67159KfK","/ip4/172.18.101.122/tcp/28094/ws/p2p/16Uiu2HAmL9WBUNjw6vJcUsbAC3p1jKoaKF9aPfbLn59W67159KfK"],"enrUri":"enr:-L24QB7F6paRmP4hLkFRpf-AYFvrkhWr-tRQXHSNPBLRqh8LQYORCtJ8LMfiEGQWqFDIycR-kvsMoEe_kbE0E2L5TXkCgmlkgnY0gmlwhKwSZXqKbXVsdGlhZGRyc5YACASsEmV6Bm29AAoErBJlegZtvt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDb0_NBWlUCBpVZvtGKtwPHHHc9rop3mRBpkaJkUxLSbaDdGNwgm29g3VkcIJtv4V3YWt1Mgk"}'
2025-02-08 03:04:37.385 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 03:04:37.392 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 03:04:37.392 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-08_03-04-36__da58d3e8-1f04-4e65-9c88-2491210d6da0__wakuorg_nwaku:latest.log
2025-02-08 03:04:37.392 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 03:04:37.392 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 03:04:37.394 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 03:04:37.394 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.2.151
2025-02-08 03:04:37.394 DEBUG [src.node.docker_mananger] Generated ports ['1833', '1834', '1835', '1836', '1837']
2025-02-08 03:04:37.394 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 03:04:37.394 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 03:04:37.394 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 03:04:37.394 DEBUG [src.node.docker_mananger] docker run -i -t -p 1833:1833 -p 1834:1834 -p 1835:1835 -p 1836:1836 -p 1837:1837 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=1835 --rest-port=1833 --tcp-port=1834 --discv5-udp-port=1836 --rest-address=0.0.0.0 --nat=extip:172.18.2.151 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2e6aebc70a5d7edbfc62b71bdc3ffcab5b9b685ae8b84081fc9f3ddea05d8fdc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=1837 --metrics-logging=true --lightpush=false --relay=true
2025-02-08 03:04:37.633 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.2.151 waku 397d4fefe96787d5302f3cbcfe478942edf10abc6f167c1a33f4e71413a744d2
2025-02-08 03:04:37.684 DEBUG [src.node.docker_mananger] Container started with ID 397d4fefe967. Setting up logs at ./log/docker/receiving_node2_2025-02-08_03-04-36__da58d3e8-1f04-4e65-9c88-2491210d6da0__wakuorg_nwaku:latest.log
2025-02-08 03:04:37.685 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 1833
2025-02-08 03:04:37.685 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 03:04:38.685 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1833/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:04:38.688 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 03:04:38.688 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 03:04:38.688 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:1833/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:04:38.691 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.2.151/tcp/1834/p2p/16Uiu2HAmHw3zcGP98ABtopzRBxCKfTnxY1RwS16M9g2PkNdJFPQz","/ip4/172.18.2.151/tcp/1835/ws/p2p/16Uiu2HAmHw3zcGP98ABtopzRBxCKfTnxY1RwS16M9g2PkNdJFPQz"],"enrUri":"enr:-L24QNikeR8nMk0TsOP6h-eTP3Y306woOggRwLTAc36JXllMX7ijOmMq_dI-y7xIkXBYtDGrgLgLZe16QCNZ26RUKLcCgmlkgnY0gmlwhKwSApeKbXVsdGlhZGRyc5YACASsEgKXBgcqAAoErBIClwYHK90DgnJzhQADAQAAiXNlY3AyNTZrMaEDTmfY4zNj6z-kLItNTEc_QeL4HcFoSyJbc5NKwbDHEAeDdGNwggcqg3VkcIIHLIV3YWt1MgE"}'
2025-02-08 03:04:38.691 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 03:04:38.691 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:1833/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.101.122/tcp/28093/p2p/16Uiu2HAmL9WBUNjw6vJcUsbAC3p1jKoaKF9aPfbLn59W67159KfK"]'
2025-02-08 03:04:38.731 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 03:04:38.741 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-08 03:04:38.741 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-08_03-04-36__da58d3e8-1f04-4e65-9c88-2491210d6da0__wakuorg_go-waku:latest.log
2025-02-08 03:04:38.741 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 03:04:38.741 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 03:04:38.743 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 03:04:38.743 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.186.125
2025-02-08 03:04:38.743 DEBUG [src.node.docker_mananger] Generated ports ['46626', '46627', '46628', '46629', '46630']
2025-02-08 03:04:38.743 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 03:04:38.744 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 03:04:38.744 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 03:04:38.744 DEBUG [src.node.docker_mananger] docker run -i -t -p 46626:46626 -p 46627:46627 -p 46628:46628 -p 46629:46629 -p 46630:46630 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=46628 --rest-port=46626 --tcp-port=46627 --discv5-udp-port=46629 --rest-address=0.0.0.0 --nat=extip:172.18.186.125 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=515dceb531035aabdbfae7ea706ccb2b2ceacd7da1be7d7a6f5ab7f7f84fe9fc --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QB7F6paRmP4hLkFRpf-AYFvrkhWr-tRQXHSNPBLRqh8LQYORCtJ8LMfiEGQWqFDIycR-kvsMoEe_kbE0E2L5TXkCgmlkgnY0gmlwhKwSZXqKbXVsdGlhZGRyc5YACASsEmV6Bm29AAoErBJlegZtvt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDb0_NBWlUCBpVZvtGKtwPHHHc9rop3mRBpkaJkUxLSbaDdGNwgm29g3VkcIJtv4V3YWt1Mgk --lightpushnode=/ip4/172.18.101.122/tcp/28093/p2p/16Uiu2HAmL9WBUNjw6vJcUsbAC3p1jKoaKF9aPfbLn59W67159KfK --lightpush=true --relay=false --pubsub-topic=/waku/2/rs/3/1
2025-02-08 03:04:38.983 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.186.125 waku 9db72842d728b9dc1a50d34b7cd3326a36beb6460a02b6d1fef062214f15ac97
2025-02-08 03:04:39.040 DEBUG [src.node.docker_mananger] Container started with ID 9db72842d728. Setting up logs at ./log/docker/lightpush_node1_2025-02-08_03-04-36__da58d3e8-1f04-4e65-9c88-2491210d6da0__wakuorg_go-waku:latest.log
2025-02-08 03:04:39.041 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 46626
2025-02-08 03:04:39.041 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 03:04:40.042 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46626/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:04:40.045 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QJZHtgjhY3gEcUCx0ZpMgaZABEPcwfMDlFXqKYcoeIgIbsSe8AtH4r5s1oyzSJ4fv1l7WdClTfOVDJDbx8uxEG2GAZTjhDF4gmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQP0MKFiZ82bfqCQDtBgnsJi2IDL2iZUcT8AR75NSKQfLYN0Y3CCtiODdWRwgrYlhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/46627/p2p/16Uiu2HAmV6CqYpPUsP7cjuMVFWtRUy58FQn65rVdFuYL1dWLze4L","/ip4/127.0.0.1/tcp/46628/ws/p2p/16Uiu2HAmV6CqYpPUsP7cjuMVFWtRUy58FQn65rVdFuYL1dWLze4L","/ip4/172.17.0.4/tcp/46627/p2p/16Uiu2HAmV6CqYpPUsP7cjuMVFWtRUy58FQn65rVdFuYL1dWLze4L","/ip4/172.17.0.4/tcp/46628/ws/p2p/16Uiu2HAmV6CqYpPUsP7cjuMVFWtRUy58FQn65rVdFuYL1dWLze4L"]}'
2025-02-08 03:04:40.045 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 03:04:40.046 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46626/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.101.122/tcp/28093/p2p/16Uiu2HAmL9WBUNjw6vJcUsbAC3p1jKoaKF9aPfbLn59W67159KfK", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-08 03:04:40.047 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-08 03:04:40.048 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46626/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.2.151/tcp/1834/p2p/16Uiu2HAmHw3zcGP98ABtopzRBxCKfTnxY1RwS16M9g2PkNdJFPQz", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-08 03:04:40.063 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-08 03:04:40.064 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28092/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-08 03:04:40.072 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 03:04:40.073 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:1833/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-08 03:04:40.077 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 03:04:40.078 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46626/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"contentTopic": "/myapp/1/latest/proto", "timestamp": 1738983880078577408}}'
2025-02-08 03:04:40.080 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:46626/lightpush/v1/message. Response content: b'missing Payload field'
2025-02-08 03:04:40.082 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-08 03:04:40.083 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-08 03:04:40.083 DEBUG [src.node.waku_node] Stopping container with id 714b06a7f24c
2025-02-08 03:04:40.678 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 03:04:40.680 DEBUG [src.node.waku_node] Stopping container with id 397d4fefe967
2025-02-08 03:04:41.493 ERROR [src.node.docker_mananger] Max retries reached for container 714b06a7f24c. Exiting log stream.
2025-02-08 03:04:42.200 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 03:04:42.200 DEBUG [src.node.waku_node] Stopping container with id 9db72842d728
2025-02-08 03:04:42.704 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 03:04:42.705 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-08 03:04:42.711 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 03:04:42.718 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 03:04:42.720 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
