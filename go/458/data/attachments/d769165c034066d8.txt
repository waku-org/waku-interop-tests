2025-02-08 03:04:56.416 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-08 03:04:56.416 DEBUG [tests.conftest] Running test: test_store with id: 2025-02-08_03-04-56__f8471ac5-d601-465c-a270-f0ea04ca2f5a
2025-02-08 03:04:56.416 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-08 03:04:56.417 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-08 03:04:56.417 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-08 03:04:56.417 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-08 03:04:56.418 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-08 03:04:56.426 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 03:04:56.426 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-08_03-04-56__f8471ac5-d601-465c-a270-f0ea04ca2f5a__wakuorg_nwaku:latest.log
2025-02-08 03:04:56.426 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 03:04:56.426 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 03:04:56.495 DEBUG [src.node.docker_mananger] Network waku created
2025-02-08 03:04:56.495 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.107.59
2025-02-08 03:04:56.495 DEBUG [src.node.docker_mananger] Generated ports ['41325', '41326', '41327', '41328', '41329']
2025-02-08 03:04:56.495 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 03:04:56.495 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 03:04:56.496 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 03:04:56.496 DEBUG [src.node.docker_mananger] docker run -i -t -p 41325:41325 -p 41326:41326 -p 41327:41327 -p 41328:41328 -p 41329:41329 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=41327 --rest-port=41325 --tcp-port=41326 --discv5-udp-port=41328 --rest-address=0.0.0.0 --nat=extip:172.18.107.59 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e8b069d753e702c673dfb3a607dbadf45786f7584d8d604c70dee3ddd1cbd54d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=41329 --metrics-logging=true --relay=true --store=true
2025-02-08 03:04:59.853 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.107.59 waku ad7102c72d9bc87ccac8b4479a8120c1192695bb1e1a1ce592b24dfa7bb4eaf2
2025-02-08 03:04:59.903 DEBUG [src.node.docker_mananger] Container started with ID ad7102c72d9b. Setting up logs at ./log/docker/node1_2025-02-08_03-04-56__f8471ac5-d601-465c-a270-f0ea04ca2f5a__wakuorg_nwaku:latest.log
2025-02-08 03:04:59.904 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 41325
2025-02-08 03:04:59.905 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 03:05:00.905 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:41325/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:05:00.908 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 03:05:00.908 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 03:05:00.909 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:41325/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:05:00.911 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.107.59/tcp/41326/p2p/16Uiu2HAmLtSBpVjdL571FB6NnGawopb4kpgxvihQKnRV1Rs8Nqyx","/ip4/172.18.107.59/tcp/41327/ws/p2p/16Uiu2HAmLtSBpVjdL571FB6NnGawopb4kpgxvihQKnRV1Rs8Nqyx"],"enrUri":"enr:-L24QOJtHT-dOcJpeZ9vSNbsHg8c3EtsMrvXDBPjIHV319JTHsAbpvqJFIB3nD4VcBoWMkxY6IjNFjZplF2FwaVymbECgmlkgnY0gmlwhKwSazuKbXVsdGlhZGRyc5YACASsEms7BqFuAAoErBJrOwahb90DgnJzhQADAQAAiXNlY3AyNTZrMaEDek9CdU_nk6desWm6mFci-folQlg2GVHHXUqAHKXIs5-DdGNwgqFug3VkcIKhcIV3YWt1MgM"}'
2025-02-08 03:05:00.911 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 03:05:00.918 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-08 03:05:00.918 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-08_03-04-56__f8471ac5-d601-465c-a270-f0ea04ca2f5a__wakuorg_go-waku:latest.log
2025-02-08 03:05:00.918 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 03:05:00.918 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 03:05:00.920 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 03:05:00.920 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.239.156
2025-02-08 03:05:00.920 DEBUG [src.node.docker_mananger] Generated ports ['19623', '19624', '19625', '19626', '19627']
2025-02-08 03:05:00.920 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 03:05:00.920 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 03:05:00.920 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 03:05:00.921 DEBUG [src.node.docker_mananger] docker run -i -t -p 19623:19623 -p 19624:19624 -p 19625:19625 -p 19626:19626 -p 19627:19627 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=19625 --rest-port=19623 --tcp-port=19624 --discv5-udp-port=19626 --rest-address=0.0.0.0 --nat=extip:172.18.239.156 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=debf0f8d7b554f5a4c11afc3be41682815bb7b3d3cdc09ce9ab5b497e8eebaca --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --store=true --discv5-bootstrap-node=enr:-L24QOJtHT-dOcJpeZ9vSNbsHg8c3EtsMrvXDBPjIHV319JTHsAbpvqJFIB3nD4VcBoWMkxY6IjNFjZplF2FwaVymbECgmlkgnY0gmlwhKwSazuKbXVsdGlhZGRyc5YACASsEms7BqFuAAoErBJrOwahb90DgnJzhQADAQAAiXNlY3AyNTZrMaEDek9CdU_nk6desWm6mFci-folQlg2GVHHXUqAHKXIs5-DdGNwgqFug3VkcIKhcIV3YWt1MgM --storenode=/ip4/172.18.107.59/tcp/41326/p2p/16Uiu2HAmLtSBpVjdL571FB6NnGawopb4kpgxvihQKnRV1Rs8Nqyx
2025-02-08 03:05:04.827 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.239.156 waku 7f504324c86e48802cc87ca68b1d87bd49524e216c9092e7114d221fb2259bdf
2025-02-08 03:05:04.883 DEBUG [src.node.docker_mananger] Container started with ID 7f504324c86e. Setting up logs at ./log/docker/node1_2025-02-08_03-04-56__f8471ac5-d601-465c-a270-f0ea04ca2f5a__wakuorg_go-waku:latest.log
2025-02-08 03:05:04.884 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 19623
2025-02-08 03:05:04.884 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 03:05:05.885 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19623/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:05:05.888 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QG0CqurONpRBkIG8RxTzZgSpshK-W3C4krtbx_bueG4MDwpnotca-wDjFBl5O5KC_M8Ie-xH0JYydVxuuYcmp5-GAZTjhJZxgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaEDtMO6EA-YelGTswpKEoGjPU3N0forvLpjz_YCeGbezeyDdGNwgkyog3VkcIJMqoV3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/19624/p2p/16Uiu2HAmQpcqZJfXsArZvyThHybPaW2UyatbedLJGW26cvcxHVBh","/ip4/127.0.0.1/tcp/19625/ws/p2p/16Uiu2HAmQpcqZJfXsArZvyThHybPaW2UyatbedLJGW26cvcxHVBh","/ip4/172.17.0.3/tcp/19624/p2p/16Uiu2HAmQpcqZJfXsArZvyThHybPaW2UyatbedLJGW26cvcxHVBh","/ip4/172.17.0.3/tcp/19625/ws/p2p/16Uiu2HAmQpcqZJfXsArZvyThHybPaW2UyatbedLJGW26cvcxHVBh"]}'
2025-02-08 03:05:05.888 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 03:05:05.889 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:41325/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-08 03:05:05.908 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 03:05:05.909 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19623/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-08 03:05:05.911 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-08 03:05:05.912 DEBUG [src.steps.store] Relaying message
2025-02-08 03:05:05.913 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:41325/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 03:05:05.929 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 03:05:05.929 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-08 03:05:06.130 DEBUG [src.steps.store] Checking that peer wakuorg/go-waku:latest can find the stored messages
2025-02-08 03:05:06.130 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19623/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-relay%2Fproto&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:05:06.136 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"9ed0396dcd16193f12f73a4c6e716cf75d750f85fc20b2ad8ee7b8c017c6af7c","status_code":200,"status_desc":"OK","messages":[{"message_hash":"BeZbBfHWvaA2c5Q3Kzl4/rNxzUElqA88e1tTqLgPZpU="}]}'
2025-02-08 03:05:06.139 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-08 03:05:06.140 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-08 03:05:06.140 DEBUG [src.node.waku_node] Stopping container with id ad7102c72d9b
2025-02-08 03:05:06.732 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 03:05:06.732 DEBUG [src.node.waku_node] Stopping container with id 7f504324c86e
2025-02-08 03:05:07.396 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 03:05:07.397 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-08 03:05:07.404 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 03:05:07.407 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
