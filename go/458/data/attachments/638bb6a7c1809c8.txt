2025-02-08 03:05:25.761 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-08 03:05:25.761 DEBUG [tests.conftest] Running test: test_lightpush with id: 2025-02-08_03-05-25__5bc1d49d-882b-4e9a-bfb6-8988748fe783
2025-02-08 03:05:25.761 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-08 03:05:25.762 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-08 03:05:25.762 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-08 03:05:25.762 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-08 03:05:25.763 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-08 03:05:25.769 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 03:05:25.769 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-08_03-05-25__5bc1d49d-882b-4e9a-bfb6-8988748fe783__wakuorg_nwaku:latest.log
2025-02-08 03:05:25.769 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 03:05:25.769 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 03:05:25.771 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 03:05:25.771 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.4.252
2025-02-08 03:05:25.771 DEBUG [src.node.docker_mananger] Generated ports ['29304', '29305', '29306', '29307', '29308']
2025-02-08 03:05:25.771 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 03:05:25.771 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 03:05:25.771 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 03:05:25.771 DEBUG [src.node.docker_mananger] docker run -i -t -p 29304:29304 -p 29305:29305 -p 29306:29306 -p 29307:29307 -p 29308:29308 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29306 --rest-port=29304 --tcp-port=29305 --discv5-udp-port=29307 --rest-address=0.0.0.0 --nat=extip:172.18.4.252 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4d7cec2fc2ba5c9d542b5d23debff99ead930abf6ce3eab29f4eae47b1592ab4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29308 --metrics-logging=true --lightpush=true --relay=true
2025-02-08 03:05:25.996 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.4.252 waku 9905178d64ec0f140f442ccfdc8321be26e94ca579cf225ba500a37641f97898
2025-02-08 03:05:26.045 DEBUG [src.node.docker_mananger] Container started with ID 9905178d64ec. Setting up logs at ./log/docker/node1_2025-02-08_03-05-25__5bc1d49d-882b-4e9a-bfb6-8988748fe783__wakuorg_nwaku:latest.log
2025-02-08 03:05:26.046 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 29304
2025-02-08 03:05:26.046 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 03:05:26.059 ERROR [src.node.docker_mananger] Max retries reached for container b901515b4208. Exiting log stream.
2025-02-08 03:05:26.567 ERROR [src.node.docker_mananger] Max retries reached for container a412d19d0627. Exiting log stream.
2025-02-08 03:05:27.046 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29304/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:05:27.049 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 03:05:27.049 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 03:05:27.050 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29304/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:05:27.052 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.4.252/tcp/29305/p2p/16Uiu2HAmH1M61wrudoA4mEsGEJqbmLoQPpwsz7t6zo2wgxewTH5p","/ip4/172.18.4.252/tcp/29306/ws/p2p/16Uiu2HAmH1M61wrudoA4mEsGEJqbmLoQPpwsz7t6zo2wgxewTH5p"],"enrUri":"enr:-L24QHYvqyT96tRKmPiQTtU0mc7gjKf9rWU0urzRjkxJ2JsdReDQnacr1JnIpBbh3xKnNJDPSGlLkByyr4IKZWOTN3sCgmlkgnY0gmlwhKwSBPyKbXVsdGlhZGRyc5YACASsEgT8BnJ5AAoErBIE_AZyet0DgnJzhQADAQAAiXNlY3AyNTZrMaEDQKXPmJWZhkssFMjii5lEHM4PC86y4DPkto21V-znrieDdGNwgnJ5g3VkcIJye4V3YWt1Mgk"}'
2025-02-08 03:05:27.052 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 03:05:27.060 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 03:05:27.060 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-08_03-05-25__5bc1d49d-882b-4e9a-bfb6-8988748fe783__wakuorg_nwaku:latest.log
2025-02-08 03:05:27.060 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 03:05:27.060 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 03:05:27.061 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 03:05:27.062 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.71.113
2025-02-08 03:05:27.062 DEBUG [src.node.docker_mananger] Generated ports ['16867', '16868', '16869', '16870', '16871']
2025-02-08 03:05:27.062 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 03:05:27.062 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 03:05:27.062 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 03:05:27.062 DEBUG [src.node.docker_mananger] docker run -i -t -p 16867:16867 -p 16868:16868 -p 16869:16869 -p 16870:16870 -p 16871:16871 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=16869 --rest-port=16867 --tcp-port=16868 --discv5-udp-port=16870 --rest-address=0.0.0.0 --nat=extip:172.18.71.113 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=16d8ffdbbfa09fa360cd124c09fdd526b27ce58cbcaf8e8733afb4add882dd21 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=16871 --metrics-logging=true --lightpush=false --relay=true --discv5-bootstrap-node=enr:-L24QHYvqyT96tRKmPiQTtU0mc7gjKf9rWU0urzRjkxJ2JsdReDQnacr1JnIpBbh3xKnNJDPSGlLkByyr4IKZWOTN3sCgmlkgnY0gmlwhKwSBPyKbXVsdGlhZGRyc5YACASsEgT8BnJ5AAoErBIE_AZyet0DgnJzhQADAQAAiXNlY3AyNTZrMaEDQKXPmJWZhkssFMjii5lEHM4PC86y4DPkto21V-znrieDdGNwgnJ5g3VkcIJye4V3YWt1Mgk
2025-02-08 03:05:27.291 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.71.113 waku d4301e0684835df7988b6cc7967e3c2c74b90cfa8bc28c3f1f90864e8c1b71d7
2025-02-08 03:05:27.341 DEBUG [src.node.docker_mananger] Container started with ID d4301e068483. Setting up logs at ./log/docker/node1_2025-02-08_03-05-25__5bc1d49d-882b-4e9a-bfb6-8988748fe783__wakuorg_nwaku:latest.log
2025-02-08 03:05:27.342 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 16867
2025-02-08 03:05:27.342 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 03:05:28.342 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16867/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:05:28.357 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 03:05:28.357 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 03:05:28.358 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16867/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:05:28.365 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.71.113/tcp/16868/p2p/16Uiu2HAm1VJtnqkbcghQSYvpPEyxweHTzBeXSJ3sbcEyQ4LifVdC","/ip4/172.18.71.113/tcp/16869/ws/p2p/16Uiu2HAm1VJtnqkbcghQSYvpPEyxweHTzBeXSJ3sbcEyQ4LifVdC"],"enrUri":"enr:-L24QKc26DcjVBDqwgcwS8lFKg0F9EFBPFdmKEoBS41S40AMVC2m-_-Fwio0qs4uija3zbWaTYAzYvv9_zCkwDcnQuwCgmlkgnY0gmlwhKwSR3GKbXVsdGlhZGRyc5YACASsEkdxBkHkAAoErBJHcQZB5d0DgnJzhQADAQAAiXNlY3AyNTZrMaECWhSaPVfe0YSniix-RuLo5rhqwt25rKdWHFhGx0w-VsODdGNwgkHkg3VkcIJB5oV3YWt1MgE"}'
2025-02-08 03:05:28.365 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 03:05:28.371 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-08 03:05:28.371 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-08_03-05-25__5bc1d49d-882b-4e9a-bfb6-8988748fe783__wakuorg_go-waku:latest.log
2025-02-08 03:05:28.371 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 03:05:28.371 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 03:05:28.372 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 03:05:28.372 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.253.42
2025-02-08 03:05:28.373 DEBUG [src.node.docker_mananger] Generated ports ['2277', '2278', '2279', '2280', '2281']
2025-02-08 03:05:28.373 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 03:05:28.373 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 03:05:28.373 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 03:05:28.373 DEBUG [src.node.docker_mananger] docker run -i -t -p 2277:2277 -p 2278:2278 -p 2279:2279 -p 2280:2280 -p 2281:2281 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=2279 --rest-port=2277 --tcp-port=2278 --discv5-udp-port=2280 --rest-address=0.0.0.0 --nat=extip:172.18.253.42 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0830e204a9c071d0f45dbbabd1f74f7203ebd28aefdaab7d18fddae6f93d2dbf --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --lightpush=true --relay=false --discv5-bootstrap-node=enr:-L24QHYvqyT96tRKmPiQTtU0mc7gjKf9rWU0urzRjkxJ2JsdReDQnacr1JnIpBbh3xKnNJDPSGlLkByyr4IKZWOTN3sCgmlkgnY0gmlwhKwSBPyKbXVsdGlhZGRyc5YACASsEgT8BnJ5AAoErBIE_AZyet0DgnJzhQADAQAAiXNlY3AyNTZrMaEDQKXPmJWZhkssFMjii5lEHM4PC86y4DPkto21V-znrieDdGNwgnJ5g3VkcIJye4V3YWt1Mgk --lightpushnode=/ip4/172.18.4.252/tcp/29305/p2p/16Uiu2HAmH1M61wrudoA4mEsGEJqbmLoQPpwsz7t6zo2wgxewTH5p --pubsub-topic=/waku/2/rs/3/1
2025-02-08 03:05:28.611 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.253.42 waku 85022e3dd0d21644d914c1a912f3afd032a43aa7a3809a942fccb1c48aaf6b90
2025-02-08 03:05:28.663 DEBUG [src.node.docker_mananger] Container started with ID 85022e3dd0d2. Setting up logs at ./log/docker/node1_2025-02-08_03-05-25__5bc1d49d-882b-4e9a-bfb6-8988748fe783__wakuorg_go-waku:latest.log
2025-02-08 03:05:28.665 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 2277
2025-02-08 03:05:28.665 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 03:05:29.666 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2277/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:05:29.668 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QLJz7_qMNeRxj4VTPnnGaJI4y5sTwd5rT-spx01i-_Q0HujgvJxG7rrmSPEFXE_c3pr3hUBYDhllBLHuewFiJGmGAZTjhPNdgmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQMGS9J8XiLoLrsuAUVz532U4G06eed8x8fz-KzVHwnproN0Y3CCCOaDdWRwggjohXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/2278/p2p/16Uiu2HAmD5ZrWKsjbmjXYgqUE9UxAHYcgdHe7tuQM91M6ZCMQfhF","/ip4/127.0.0.1/tcp/2279/ws/p2p/16Uiu2HAmD5ZrWKsjbmjXYgqUE9UxAHYcgdHe7tuQM91M6ZCMQfhF","/ip4/172.17.0.4/tcp/2278/p2p/16Uiu2HAmD5ZrWKsjbmjXYgqUE9UxAHYcgdHe7tuQM91M6ZCMQfhF","/ip4/172.17.0.4/tcp/2279/ws/p2p/16Uiu2HAmD5ZrWKsjbmjXYgqUE9UxAHYcgdHe7tuQM91M6ZCMQfhF"]}'
2025-02-08 03:05:29.668 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 03:05:29.669 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29304/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-08 03:05:29.672 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 03:05:29.673 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16867/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-08 03:05:29.679 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 03:05:29.680 DEBUG [src.steps.light_push] Lightpushing message
2025-02-08 03:05:29.681 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2277/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": 1738983929680284416}}'
2025-02-08 03:05:32.726 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-08 03:05:32.728 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-08 03:05:32.828 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-08 03:05:32.828 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29304/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:05:32.831 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738983929680284416,"ephemeral":false}]'
2025-02-08 03:05:32.832 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-08 03:05:32.833 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16867/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:05:32.835 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738983929680284416,"ephemeral":false}]'
2025-02-08 03:05:32.838 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-08 03:05:32.839 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-08 03:05:32.839 DEBUG [src.node.waku_node] Stopping container with id 9905178d64ec
2025-02-08 03:05:33.536 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 03:05:33.539 DEBUG [src.node.waku_node] Stopping container with id d4301e068483
2025-02-08 03:05:34.325 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 03:05:34.327 DEBUG [src.node.waku_node] Stopping container with id 85022e3dd0d2
2025-02-08 03:05:34.350 ERROR [src.node.docker_mananger] Max retries reached for container 9905178d64ec. Exiting log stream.
2025-02-08 03:05:34.786 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 03:05:34.786 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-08 03:05:34.794 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 03:05:34.801 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 03:05:34.804 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
