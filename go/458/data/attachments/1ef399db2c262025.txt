2025-02-08 03:07:05.776 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-08 03:07:05.777 DEBUG [tests.conftest] Running test: test_time_filter_invalid_start_time with id: 2025-02-08_03-07-05__8208507e-b69e-40a6-9c84-e433c3e6b1df
2025-02-08 03:07:05.777 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-08 03:07:05.777 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-08 03:07:05.777 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-08 03:07:05.785 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 03:07:05.785 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-08_03-07-05__8208507e-b69e-40a6-9c84-e433c3e6b1df__wakuorg_nwaku:latest.log
2025-02-08 03:07:05.785 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 03:07:05.785 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 03:07:05.787 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 03:07:05.787 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.117.168
2025-02-08 03:07:05.787 DEBUG [src.node.docker_mananger] Generated ports ['47258', '47259', '47260', '47261', '47262']
2025-02-08 03:07:05.787 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 03:07:05.787 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 03:07:05.788 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 03:07:05.788 DEBUG [src.node.docker_mananger] docker run -i -t -p 47258:47258 -p 47259:47259 -p 47260:47260 -p 47261:47261 -p 47262:47262 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=47260 --rest-port=47258 --tcp-port=47259 --discv5-udp-port=47261 --rest-address=0.0.0.0 --nat=extip:172.18.117.168 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dcfefcfb6fa9bc06bdae566643fa8c1cde79e2edcce78f1aebd052ee4ca52854 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=47262 --metrics-logging=true --store=true --relay=true
2025-02-08 03:07:06.024 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.117.168 waku 8fe642138ad02165854560875e23e4dfaf81c8eb21bbf2981619ae2e9b343e46
2025-02-08 03:07:06.037 ERROR [src.node.docker_mananger] Max retries reached for container 1ee73139cd51. Exiting log stream.
2025-02-08 03:07:06.074 DEBUG [src.node.docker_mananger] Container started with ID 8fe642138ad0. Setting up logs at ./log/docker/publishing_node1_2025-02-08_03-07-05__8208507e-b69e-40a6-9c84-e433c3e6b1df__wakuorg_nwaku:latest.log
2025-02-08 03:07:06.076 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 47258
2025-02-08 03:07:06.076 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 03:07:06.572 ERROR [src.node.docker_mananger] Max retries reached for container 594481b3c96a. Exiting log stream.
2025-02-08 03:07:07.079 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47258/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:07:07.082 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 03:07:07.082 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 03:07:07.082 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47258/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:07:07.084 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.117.168/tcp/47259/p2p/16Uiu2HAmS66womRWuYEFou5EzxKxaGy5984sHkDVbJXyceE7AfvE","/ip4/172.18.117.168/tcp/47260/ws/p2p/16Uiu2HAmS66womRWuYEFou5EzxKxaGy5984sHkDVbJXyceE7AfvE"],"enrUri":"enr:-L24QMnkIeycUt5tIWFZU3ooy5UeE59ILfOPfgdA6Txyw9mmE6GuFvs-nwzQaQ8Y0LGNC90-zZBXl1AXgKHI5cNYhbUCgmlkgnY0gmlwhKwSdaiKbXVsdGlhZGRyc5YACASsEnWoBribAAoErBJ1qAa4nN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDx5boS29ujfFDmzcz2POk-7jbD4deXKy4eCbosXCuIQ-DdGNwgribg3VkcIK4nYV3YWt1MgM"}'
2025-02-08 03:07:07.084 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 03:07:07.091 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-08 03:07:07.091 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-08_03-07-05__8208507e-b69e-40a6-9c84-e433c3e6b1df__wakuorg_go-waku:latest.log
2025-02-08 03:07:07.092 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 03:07:07.092 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 03:07:07.093 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 03:07:07.093 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.42.10
2025-02-08 03:07:07.093 DEBUG [src.node.docker_mananger] Generated ports ['41579', '41580', '41581', '41582', '41583']
2025-02-08 03:07:07.094 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 03:07:07.094 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 03:07:07.094 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 03:07:07.094 DEBUG [src.node.docker_mananger] docker run -i -t -p 41579:41579 -p 41580:41580 -p 41581:41581 -p 41582:41582 -p 41583:41583 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=41581 --rest-port=41579 --tcp-port=41580 --discv5-udp-port=41582 --rest-address=0.0.0.0 --nat=extip:172.18.42.10 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=78c99c2cb7419caccacb76f4ffbdbbab300c791d7efdeb6ca4c4aa71ae7ae9ee --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QMnkIeycUt5tIWFZU3ooy5UeE59ILfOPfgdA6Txyw9mmE6GuFvs-nwzQaQ8Y0LGNC90-zZBXl1AXgKHI5cNYhbUCgmlkgnY0gmlwhKwSdaiKbXVsdGlhZGRyc5YACASsEnWoBribAAoErBJ1qAa4nN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDx5boS29ujfFDmzcz2POk-7jbD4deXKy4eCbosXCuIQ-DdGNwgribg3VkcIK4nYV3YWt1MgM --storenode=/ip4/172.18.117.168/tcp/47259/p2p/16Uiu2HAmS66womRWuYEFou5EzxKxaGy5984sHkDVbJXyceE7AfvE --store=true --relay=true
2025-02-08 03:07:07.335 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.42.10 waku f8edd2fafbd767c0e445b544d116c68269c4d68fb7ca71fdf3ed9756764a2870
2025-02-08 03:07:07.390 DEBUG [src.node.docker_mananger] Container started with ID f8edd2fafbd7. Setting up logs at ./log/docker/store_node1_2025-02-08_03-07-05__8208507e-b69e-40a6-9c84-e433c3e6b1df__wakuorg_go-waku:latest.log
2025-02-08 03:07:07.391 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 41579
2025-02-08 03:07:07.391 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 03:07:08.391 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:41579/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:07:08.394 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QOaKyFEzULZM-ubOk0gKFR4kQ8BeuJ3-QUKkkx8YO-z4HiDNi3-uzTVegwA-Q1m1O11d7a3pTQnYxpd4Fkqgi8KGAZTjhnT-gmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaECfCJydq0QmNjphYvbD6Vh28aCMy1ajha-Vp4YbMNXkS6DdGNwgqJsg3VkcIKiboV3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/41580/p2p/16Uiu2HAm3nEzwMmqiTFkXsmJUWNcxcqF5pmtQJPG9Qp3nrzaYZG1","/ip4/127.0.0.1/tcp/41581/ws/p2p/16Uiu2HAm3nEzwMmqiTFkXsmJUWNcxcqF5pmtQJPG9Qp3nrzaYZG1","/ip4/172.17.0.3/tcp/41580/p2p/16Uiu2HAm3nEzwMmqiTFkXsmJUWNcxcqF5pmtQJPG9Qp3nrzaYZG1","/ip4/172.17.0.3/tcp/41581/ws/p2p/16Uiu2HAm3nEzwMmqiTFkXsmJUWNcxcqF5pmtQJPG9Qp3nrzaYZG1"]}'
2025-02-08 03:07:08.395 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 03:07:08.395 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:41579/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.117.168/tcp/47259/p2p/16Uiu2HAmS66womRWuYEFou5EzxKxaGy5984sHkDVbJXyceE7AfvE", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-08 03:07:08.412 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-08 03:07:08.413 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47258/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-08 03:07:08.439 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 03:07:08.439 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:41579/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-08 03:07:08.441 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-08 03:07:08.445 DEBUG [src.steps.store] Relaying message
2025-02-08 03:07:08.447 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47258/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 03:07:08.459 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 03:07:08.459 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-08 03:07:08.660 DEBUG [src.steps.store] Relaying message
2025-02-08 03:07:08.660 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47258/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 03:07:08.666 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 03:07:08.666 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-08 03:07:08.867 DEBUG [src.steps.store] Relaying message
2025-02-08 03:07:08.867 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47258/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 03:07:08.873 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 03:07:08.873 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-08 03:07:09.074 DEBUG [src.steps.store] Relaying message
2025-02-08 03:07:09.075 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47258/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 03:07:09.080 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 03:07:09.081 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-08 03:07:09.282 DEBUG [src.steps.store] Relaying message
2025-02-08 03:07:09.282 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47258/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 03:07:09.287 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 03:07:09.288 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-08 03:07:09.488 DEBUG [src.steps.store] Relaying message
2025-02-08 03:07:09.489 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47258/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-08 03:07:09.495 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 03:07:09.495 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-08 03:07:09.696 DEBUG [tests.store.test_time_filter] inquering stored messages with start time abc
2025-02-08 03:07:09.696 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47258/store/v3/messages?includeData=True&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=abc&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:07:09.699 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:47258/store/v3/messages?includeData=True&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=abc&pageSize=20&ascending=true. Response content: b'time parsing error: invalid integer: abc'
2025-02-08 03:07:09.700 DEBUG [tests.store.test_time_filter] invalid start_time cause error Error: 400 Client Error: Bad Request for url: http://127.0.0.1:47258/store/v3/messages?includeData=True&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=abc&pageSize=20&ascending=true with response: b'time parsing error: invalid integer: abc'
2025-02-08 03:07:09.701 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-08 03:07:09.702 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-08 03:07:09.702 DEBUG [src.node.waku_node] Stopping container with id 8fe642138ad0
2025-02-08 03:07:10.291 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 03:07:10.293 DEBUG [src.node.waku_node] Stopping container with id f8edd2fafbd7
2025-02-08 03:07:10.792 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 03:07:10.795 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-08 03:07:10.803 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 03:07:10.806 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
