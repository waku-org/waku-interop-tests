2025-02-08 03:03:51.826 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-08 03:03:51.826 DEBUG [tests.conftest] Running test: test_store_node_not_connected_directly_to_lightpushing_node with id: 2025-02-08_03-03-51__3a01cc34-2a38-4c5a-8325-539a40c5121f
2025-02-08 03:03:51.827 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-08 03:03:51.827 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-08 03:03:51.827 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-08 03:03:51.835 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-08 03:03:51.835 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-08_03-03-51__3a01cc34-2a38-4c5a-8325-539a40c5121f__wakuorg_go-waku:latest.log
2025-02-08 03:03:51.841 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-08 03:03:51.841 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-08_03-03-51__3a01cc34-2a38-4c5a-8325-539a40c5121f__wakuorg_nwaku:latest.log
2025-02-08 03:03:51.846 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-08 03:03:51.846 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node3_2025-02-08_03-03-51__3a01cc34-2a38-4c5a-8325-539a40c5121f__wakuorg_go-waku:latest.log
2025-02-08 03:03:51.846 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-08 03:03:51.847 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-08 03:03:51.847 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 03:03:51.848 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 03:03:51.916 DEBUG [src.node.docker_mananger] Network waku created
2025-02-08 03:03:51.916 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.39.129
2025-02-08 03:03:51.916 DEBUG [src.node.docker_mananger] Generated ports ['56863', '56864', '56865', '56866', '56867']
2025-02-08 03:03:51.916 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 03:03:51.916 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 03:03:51.916 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 03:03:51.917 DEBUG [src.node.docker_mananger] docker run -i -t -p 56863:56863 -p 56864:56864 -p 56865:56865 -p 56866:56866 -p 56867:56867 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=56865 --rest-port=56863 --tcp-port=56864 --discv5-udp-port=56866 --rest-address=0.0.0.0 --nat=extip:172.18.39.129 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ef9ac4b2b66d0d8fe9f66a2e709be5e3acdbfa198872cec1c5809accbb8369d1 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --lightpush=true
2025-02-08 03:03:54.865 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.39.129 waku 4bfd61fb852e31480a4195239261a59fbaaea16430204a7313edf459ba700afa
2025-02-08 03:03:54.917 DEBUG [src.node.docker_mananger] Container started with ID 4bfd61fb852e. Setting up logs at ./log/docker/node1_2025-02-08_03-03-51__3a01cc34-2a38-4c5a-8325-539a40c5121f__wakuorg_go-waku:latest.log
2025-02-08 03:03:54.920 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 56863
2025-02-08 03:03:54.920 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 03:03:55.921 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56863/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:03:55.923 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QKTcY7wpn_JvRLABN9O0Ih-LZnl4H52w8nSBCo7Z5uToV_lIwLyfgID7799LabTbT6eyIAaTTdi0Kxs6lAyq4PaGAZTjg4UggmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaEDuJI7uqsO7v-Uc2NmQcte3q-jV9X9pP0rLp7NETyg49yDdGNwgt4gg3VkcILeIoV3YWt1Mgk","listenAddresses":["/ip4/127.0.0.1/tcp/56864/p2p/16Uiu2HAmR5UhMHm9gBW2AHB9PcvHW7cTHSxWN5R4L55i83PbhnZh","/ip4/127.0.0.1/tcp/56865/ws/p2p/16Uiu2HAmR5UhMHm9gBW2AHB9PcvHW7cTHSxWN5R4L55i83PbhnZh","/ip4/172.17.0.2/tcp/56864/p2p/16Uiu2HAmR5UhMHm9gBW2AHB9PcvHW7cTHSxWN5R4L55i83PbhnZh","/ip4/172.17.0.2/tcp/56865/ws/p2p/16Uiu2HAmR5UhMHm9gBW2AHB9PcvHW7cTHSxWN5R4L55i83PbhnZh"]}'
2025-02-08 03:03:55.923 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 03:03:55.923 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 03:03:55.924 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 03:03:55.925 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 03:03:55.925 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.50.125
2025-02-08 03:03:55.925 DEBUG [src.node.docker_mananger] Generated ports ['6871', '6872', '6873', '6874', '6875']
2025-02-08 03:03:55.925 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 03:03:55.925 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 03:03:55.926 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 03:03:55.926 DEBUG [src.node.docker_mananger] docker run -i -t -p 6871:6871 -p 6872:6872 -p 6873:6873 -p 6874:6874 -p 6875:6875 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6873 --rest-port=6871 --tcp-port=6872 --discv5-udp-port=6874 --rest-address=0.0.0.0 --nat=extip:172.18.50.125 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9e6eafef35de8dfd271d9c4f6ad0e5b9b7ab64b0db7ed34f2ddb61b11b6bdb8f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6875 --metrics-logging=true --lightpush=true --store=true --relay=true --discv5-bootstrap-node=enr:-J-4QKTcY7wpn_JvRLABN9O0Ih-LZnl4H52w8nSBCo7Z5uToV_lIwLyfgID7799LabTbT6eyIAaTTdi0Kxs6lAyq4PaGAZTjg4UggmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaEDuJI7uqsO7v-Uc2NmQcte3q-jV9X9pP0rLp7NETyg49yDdGNwgt4gg3VkcILeIoV3YWt1Mgk --lightpushnode=/ip4/172.18.39.129/tcp/56864/p2p/16Uiu2HAmR5UhMHm9gBW2AHB9PcvHW7cTHSxWN5R4L55i83PbhnZh
2025-02-08 03:03:57.917 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.50.125 waku 7ae589316a6c22fd8216a0a4b4e25ca4eb8daeb70baad72b7017aedb0030e26a
2025-02-08 03:03:57.966 DEBUG [src.node.docker_mananger] Container started with ID 7ae589316a6c. Setting up logs at ./log/docker/node2_2025-02-08_03-03-51__3a01cc34-2a38-4c5a-8325-539a40c5121f__wakuorg_nwaku:latest.log
2025-02-08 03:03:57.967 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 6871
2025-02-08 03:03:57.968 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 03:03:58.968 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6871/health" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:03:58.971 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-08 03:03:58.971 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-08 03:03:58.972 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6871/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:03:58.974 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.50.125/tcp/6872/p2p/16Uiu2HAmVHNq5HTxaK5VdEduwiBVWSxUmpnHpai7rdvD1WG2tzSV","/ip4/172.18.50.125/tcp/6873/ws/p2p/16Uiu2HAmVHNq5HTxaK5VdEduwiBVWSxUmpnHpai7rdvD1WG2tzSV"],"enrUri":"enr:-L24QCQCL6vZo-DPfnSUsntWp3LX7B6e2tJBaNChzyHPyQtTcT2YDBqaEf_BTOcOU4hiGSzKRCSSSrekj3E9qegS9lwCgmlkgnY0gmlwhKwSMn2KbXVsdGlhZGRyc5YACASsEjJ9BhrYAAoErBIyfQYa2d0DgnJzhQADAQAAiXNlY3AyNTZrMaED9w1RLMMJJrd0oOmJ_w2WjXIhWmKmhcEEAzV9kKSHNXKDdGNwghrYg3VkcIIa2oV3YWt1Mgs"}'
2025-02-08 03:03:58.974 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 03:03:58.974 DEBUG [src.node.waku_node] Starting Node...
2025-02-08 03:03:58.974 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-08 03:03:58.976 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-08 03:03:58.976 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.181.152
2025-02-08 03:03:58.976 DEBUG [src.node.docker_mananger] Generated ports ['28376', '28377', '28378', '28379', '28380']
2025-02-08 03:03:58.976 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-08 03:03:58.976 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-08 03:03:58.976 DEBUG [src.node.waku_node] Using volumes []
2025-02-08 03:03:58.976 DEBUG [src.node.docker_mananger] docker run -i -t -p 28376:28376 -p 28377:28377 -p 28378:28378 -p 28379:28379 -p 28380:28380 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=28378 --rest-port=28376 --tcp-port=28377 --discv5-udp-port=28379 --rest-address=0.0.0.0 --nat=extip:172.18.181.152 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c1c77d9eff4c6f73dac66db605282c4e45b63d58adc64ebbdff249d4a39ee46f --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --storenode=/ip4/172.18.50.125/tcp/6872/p2p/16Uiu2HAmVHNq5HTxaK5VdEduwiBVWSxUmpnHpai7rdvD1WG2tzSV --discv5-bootstrap-node=enr:-L24QCQCL6vZo-DPfnSUsntWp3LX7B6e2tJBaNChzyHPyQtTcT2YDBqaEf_BTOcOU4hiGSzKRCSSSrekj3E9qegS9lwCgmlkgnY0gmlwhKwSMn2KbXVsdGlhZGRyc5YACASsEjJ9BhrYAAoErBIyfQYa2d0DgnJzhQADAQAAiXNlY3AyNTZrMaED9w1RLMMJJrd0oOmJ_w2WjXIhWmKmhcEEAzV9kKSHNXKDdGNwghrYg3VkcIIa2oV3YWt1Mgs --pubsub-topic=/waku/2/rs/3/1
2025-02-08 03:03:59.205 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.181.152 waku 21e501571afbc11177bf0c9bf6dd580097efeb27c498b044c3d0363333a6ca09
2025-02-08 03:03:59.259 DEBUG [src.node.docker_mananger] Container started with ID 21e501571afb. Setting up logs at ./log/docker/node3_2025-02-08_03-03-51__3a01cc34-2a38-4c5a-8325-539a40c5121f__wakuorg_go-waku:latest.log
2025-02-08 03:03:59.260 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 28376
2025-02-08 03:03:59.260 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 03:04:00.261 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28376/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:04:00.263 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QKQNJC1GN4fKr-JN6X9cGmUXT4Q-EKLxaxgxDIc0jCr6IjNwN2QI7xqpTFrQSMx7jUIXhUUnKmlnKKSe_GXpoA6GAZTjg5YRgmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQNN1X7pBaJ1mY62-X89GSgBJmotm5fy1UxcFzIMFRwQz4N0Y3CCbtmDdWRwgm7bhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/28377/p2p/16Uiu2HAmHtpZSLf2tGzHMSGCB4XwbNwFGK7wkN7mtdNTmaMoatkW","/ip4/127.0.0.1/tcp/28378/ws/p2p/16Uiu2HAmHtpZSLf2tGzHMSGCB4XwbNwFGK7wkN7mtdNTmaMoatkW","/ip4/172.17.0.4/tcp/28377/p2p/16Uiu2HAmHtpZSLf2tGzHMSGCB4XwbNwFGK7wkN7mtdNTmaMoatkW","/ip4/172.17.0.4/tcp/28378/ws/p2p/16Uiu2HAmHtpZSLf2tGzHMSGCB4XwbNwFGK7wkN7mtdNTmaMoatkW"]}'
2025-02-08 03:04:00.263 INFO [src.node.waku_node] REST service is ready !!
2025-02-08 03:04:00.263 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56863/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-08 03:04:00.265 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-08 03:04:00.266 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6871/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-08 03:04:00.268 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-08 03:04:00.269 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56863/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:04:00.271 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"id":"16Uiu2HAmVHNq5HTxaK5VdEduwiBVWSxUmpnHpai7rdvD1WG2tzSV","multiaddrs":["/ip4/172.18.50.125/tcp/6872/p2p/16Uiu2HAmVHNq5HTxaK5VdEduwiBVWSxUmpnHpai7rdvD1WG2tzSV","/ip4/172.18.50.125/tcp/6873/ws/p2p/16Uiu2HAmVHNq5HTxaK5VdEduwiBVWSxUmpnHpai7rdvD1WG2tzSV"],"protocols":null,"connected":false,"pubsubTopics":[]}]'
2025-02-08 03:04:00.271 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6871/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:04:00.273 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.4/tcp/28377/p2p/16Uiu2HAmHtpZSLf2tGzHMSGCB4XwbNwFGK7wkN7mtdNTmaMoatkW","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
2025-02-08 03:04:00.274 DEBUG [src.libs.common] Sleeping for 30 seconds
2025-02-08 03:04:30.274 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56863/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1738983870274499584}}'
2025-02-08 03:04:30.282 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-08 03:04:30.282 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-08 03:04:31.283 DEBUG [src.steps.store] Checking that peer wakuorg/go-waku:latest can find the stored messages
2025-02-08 03:04:31.283 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28376/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-filter%2Fproto&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-08 03:04:31.288 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"3516e2ebb1b24cd0d4d945497fb315516707a77668a6f28e4815300265238b99","status_code":200,"status_desc":"OK","messages":[{"message_hash":"01VNpjYVZNDAqKf65ieF8xyceOB+Ug5u0kJfpNIHa9w="}]}'
2025-02-08 03:04:31.291 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-08 03:04:31.292 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-08 03:04:31.292 DEBUG [src.node.waku_node] Stopping container with id 4bfd61fb852e
2025-02-08 03:04:31.799 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 03:04:31.800 DEBUG [src.node.waku_node] Stopping container with id 7ae589316a6c
2025-02-08 03:04:32.612 ERROR [src.node.docker_mananger] Max retries reached for container 4bfd61fb852e. Exiting log stream.
2025-02-08 03:04:32.631 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 03:04:32.632 DEBUG [src.node.waku_node] Stopping container with id 21e501571afb
2025-02-08 03:04:33.115 DEBUG [src.node.waku_node] Container stopped.
2025-02-08 03:04:33.117 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-08 03:04:33.122 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 03:04:33.134 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-08 03:04:33.137 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
