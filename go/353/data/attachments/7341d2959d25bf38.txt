[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_node_paused_and_unpaused with id: 2024-11-10_07-32-30__7a55064c-2de9-40c2-8ffe-e0179495ba9c
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-11-10_07-32-30__7a55064c-2de9-40c2-8ffe-e0179495ba9c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.161.224
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['37946', '37947', '37948', '37949', '37950']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 37946:37946 -p 37947:37947 -p 37948:37948 -p 37949:37949 -p 37950:37950 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37948 --rest-port=37946 --tcp-port=37947 --discv5-udp-port=37949 --rest-address=0.0.0.0 --nat=extip:172.18.161.224 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9f95cc8adcd73eeeb253a91d3daa62f29f5c5a6bbf1f90cfeea1d0aaae6ee53a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37950 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.161.224 waku 68737c7e61df7e0fd7d8619380c5ea90e72e66235e6c2bb5c73c8f60769f2f21
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 68737c7e61df. Setting up logs at ./log/docker/publishing_node1_2024-11-10_07-32-30__7a55064c-2de9-40c2-8ffe-e0179495ba9c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 37946
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 8bbad15006b8. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37946/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37946/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.161.224/tcp/37947/p2p/16Uiu2HAmLWMQhUAEKUh1tkxjQbomSUot2YbNFdpQBt6kr6NkazpF","/ip4/172.18.161.224/tcp/37948/ws/p2p/16Uiu2HAmLWMQhUAEKUh1tkxjQbomSUot2YbNFdpQBt6kr6NkazpF"],"enrUri":"enr:-L24QODelX4AicirWg-r7YA5akoh9F5FFTyMKDRPJIbfkEnRLst4yDfU5LQDCgK9pK8x2HzqeQH_K0jT0s1oxe8D-vQCgmlkgnY0gmlwhKwSoeCKbXVsdGlhZGRyc5YACASsEqHgBpQ7AAoErBKh4AaUPN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDdKcUULSg5Anh9Nf4sUPA_KBn-r2g50BdzApK3Uh9iXCDdGNwgpQ7g3VkcIKUPYV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2024-11-10_07-32-30__7a55064c-2de9-40c2-8ffe-e0179495ba9c__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.96.188
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['56548', '56549', '56550', '56551', '56552']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 56548:56548 -p 56549:56549 -p 56550:56550 -p 56551:56551 -p 56552:56552 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=56550 --rest-port=56548 --tcp-port=56549 --discv5-udp-port=56551 --rest-address=0.0.0.0 --nat=extip:172.18.96.188 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5ff4b063ab769010ddf2cf65348f34a23b95c6ff56ea7fead869ede3161deee2 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QODelX4AicirWg-r7YA5akoh9F5FFTyMKDRPJIbfkEnRLst4yDfU5LQDCgK9pK8x2HzqeQH_K0jT0s1oxe8D-vQCgmlkgnY0gmlwhKwSoeCKbXVsdGlhZGRyc5YACASsEqHgBpQ7AAoErBKh4AaUPN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDdKcUULSg5Anh9Nf4sUPA_KBn-r2g50BdzApK3Uh9iXCDdGNwgpQ7g3VkcIKUPYV3YWt1MgM --storenode=/ip4/172.18.161.224/tcp/37947/p2p/16Uiu2HAmLWMQhUAEKUh1tkxjQbomSUot2YbNFdpQBt6kr6NkazpF --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.96.188 waku ecf3044ca3a4f901c58f7355e1d2c9d3221198e05d6415d7efdf248c193c64c1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ecf3044ca3a4. Setting up logs at ./log/docker/store_node1_2024-11-10_07-32-30__7a55064c-2de9-40c2-8ffe-e0179495ba9c__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/go-waku:latest. REST: 56548
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56548/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QAVqYjAW4-LXj3Mk2dWHoSu3xjMBQC7sTL5o_aR2sgdyJvNu0562s7x2oMtyQu06sI6KYGI7vSZpI0_XHf7ZTkWGAZMU_RyRgmlkgnY0gmlwhKwRAAmJc2VjcDI1NmsxoQPeoiJGqx3_cTI_hXsPztG2v1KKcvTOymyBdo1g0HzTKIN0Y3CC3OWDdWRwgtznhXdha3UyAw","listenAddresses":["/ip4/127.0.0.1/tcp/56549/p2p/16Uiu2HAmTe4FYXCjWeZee56eyhj513BmkQ2WzvWCRAZmSZzdq58b","/ip4/127.0.0.1/tcp/56550/ws/p2p/16Uiu2HAmTe4FYXCjWeZee56eyhj513BmkQ2WzvWCRAZmSZzdq58b","/ip4/172.17.0.9/tcp/56549/p2p/16Uiu2HAmTe4FYXCjWeZee56eyhj513BmkQ2WzvWCRAZmSZzdq58b","/ip4/172.17.0.9/tcp/56550/ws/p2p/16Uiu2HAmTe4FYXCjWeZee56eyhj513BmkQ2WzvWCRAZmSZzdq58b"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56548/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.161.224/tcp/37947/p2p/16Uiu2HAmLWMQhUAEKUh1tkxjQbomSUot2YbNFdpQBt6kr6NkazpF", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37946/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56548/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37946/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37946/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"nZis4LaHPowDSqtlOQwMgJ759ijMgxlfzeEFABCNaGk="}]}'
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/go-waku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56548/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"27215fb021d8804b6a3bbada2977d2a64115176d1fdc6cb28cc67e34ebad1a45","status_code":200,"status_desc":"OK","messages":[{"message_hash":"nZis4LaHPowDSqtlOQwMgJ759ijMgxlfzeEFABCNaGk="}]}'
[35mDEBUG   [0m src.node.waku_node:waku_node.py:251 Pausing container with id ecf3044ca3a4
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.node.waku_node:waku_node.py:256 Unpause container with id ecf3044ca3a4
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56548/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QPfnht98g1Y9_uY1jd5uBFqH4byPXyCY9v8yJF7h5yzASUz43yIJXkNRwwnQpbn8efzQV2cFF-4VJlH-ykes7vOGAZMU_RySgmlkgnY0gmlwhKwRAAmCcnOFAAMBAACJc2VjcDI1NmsxoQPeoiJGqx3_cTI_hXsPztG2v1KKcvTOymyBdo1g0HzTKIN0Y3CC3OWDdWRwgtznhXdha3UyAw","listenAddresses":["/ip4/127.0.0.1/tcp/56549/p2p/16Uiu2HAmTe4FYXCjWeZee56eyhj513BmkQ2WzvWCRAZmSZzdq58b","/ip4/127.0.0.1/tcp/56550/ws/p2p/16Uiu2HAmTe4FYXCjWeZee56eyhj513BmkQ2WzvWCRAZmSZzdq58b","/ip4/172.17.0.9/tcp/56549/p2p/16Uiu2HAmTe4FYXCjWeZee56eyhj513BmkQ2WzvWCRAZmSZzdq58b","/ip4/172.17.0.9/tcp/56550/ws/p2p/16Uiu2HAmTe4FYXCjWeZee56eyhj513BmkQ2WzvWCRAZmSZzdq58b"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37946/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37946/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"nZis4LaHPowDSqtlOQwMgJ759ijMgxlfzeEFABCNaGk="},{"messageHash":"21YFpgkGAfOA2GqSRLrMsbPtp8OIIPcUQ4RZa57Go14="}]}'
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/go-waku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56548/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"6e2b1b619898dbc4874a1d47734002c684c823eea8849804eee3538f3f97603d","status_code":200,"status_desc":"OK","messages":[{"message_hash":"nZis4LaHPowDSqtlOQwMgJ759ijMgxlfzeEFABCNaGk="},{"message_hash":"21YFpgkGAfOA2GqSRLrMsbPtp8OIIPcUQ4RZa57Go14="}]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37946/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"nZis4LaHPowDSqtlOQwMgJ759ijMgxlfzeEFABCNaGk="},{"messageHash":"21YFpgkGAfOA2GqSRLrMsbPtp8OIIPcUQ4RZa57Go14="}]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56548/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"ecf015486e8de36df45a4f62b6ca1468cef2101de6f77a8a70c3fbb820644e4a","status_code":200,"status_desc":"OK","messages":[{"message_hash":"nZis4LaHPowDSqtlOQwMgJ759ijMgxlfzeEFABCNaGk="},{"message_hash":"21YFpgkGAfOA2GqSRLrMsbPtp8OIIPcUQ4RZa57Go14="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 68737c7e61df
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id ecf3044ca3a4
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 68737c7e61df. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.