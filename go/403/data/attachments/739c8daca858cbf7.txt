[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_pubsub_topics with id: 2024-12-23_03-16-04__4c17bcca-c6aa-46c9-b296-dd9e052bb8cc
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-12-23_03-16-04__4c17bcca-c6aa-46c9-b296-dd9e052bb8cc__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.87.108
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['59159', '59160', '59161', '59162', '59163']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 59159:59159 -p 59160:59160 -p 59161:59161 -p 59162:59162 -p 59163:59163 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=59161 --rest-port=59159 --tcp-port=59160 --discv5-udp-port=59162 --rest-address=0.0.0.0 --nat=extip:172.18.87.108 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bff2db54d076c32bf3e4e4c8dcfcaddbb982c4ede8c3f9c45d0a23a9043b4811 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=59163 --metrics-logging=true --lightpush=true --relay=true
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container d7b8f289eb12. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.87.108 waku 51f83db515477df99ca7a5de26824b78cfa4e0b4c56c404f4333e8623e0efe71
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 51f83db51547. Setting up logs at ./log/docker/receiving_node1_2024-12-23_03-16-04__4c17bcca-c6aa-46c9-b296-dd9e052bb8cc__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 59159
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 0b64ad959afa. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59159/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59159/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.87.108/tcp/59160/p2p/16Uiu2HAm2GFSctLfo3VzVA1dEiZ7jE153pVTEmw3Bcj7iG1qUhmW","/ip4/172.18.87.108/tcp/59161/ws/p2p/16Uiu2HAm2GFSctLfo3VzVA1dEiZ7jE153pVTEmw3Bcj7iG1qUhmW"],"enrUri":"enr:-L24QHYy9X-nnikq4krNsuiGyF0LuR6i5wHTobpVdR8UWWmJLH_4yyfCxoHuO9dWxltSzUmaXwoQRfjAAE2RGiGoUeYCgmlkgnY0gmlwhKwSV2yKbXVsdGlhZGRyc5YACASsEldsBucYAAoErBJXbAbnGd0DgnJzhQADAQAAiXNlY3AyNTZrMaECZZfWKkmp8ApIETWtTC8OANKfSqgibqBbpkpwmlmsny2DdGNwgucYg3VkcILnGoV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-12-23_03-16-04__4c17bcca-c6aa-46c9-b296-dd9e052bb8cc__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.129.71
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['64505', '64506', '64507', '64508', '64509']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 64505:64505 -p 64506:64506 -p 64507:64507 -p 64508:64508 -p 64509:64509 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64507 --rest-port=64505 --tcp-port=64506 --discv5-udp-port=64508 --rest-address=0.0.0.0 --nat=extip:172.18.129.71 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0bcea4bece3976c6cfa132ef3da2ef6085f18e6f2c6fadaa3b8a4837866b2adb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64509 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.129.71 waku 5dab76c476daf294ec02e0d1f212b3f4af2002c8a666484bfe3e192884d20636
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 5dab76c476da. Setting up logs at ./log/docker/receiving_node2_2024-12-23_03-16-04__4c17bcca-c6aa-46c9-b296-dd9e052bb8cc__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 64505
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64505/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64505/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.129.71/tcp/64506/p2p/16Uiu2HAmErXRUiUPEVpCFU4GoMVHECqWsfrZWemVhKSkBzKBEqd7","/ip4/172.18.129.71/tcp/64507/ws/p2p/16Uiu2HAmErXRUiUPEVpCFU4GoMVHECqWsfrZWemVhKSkBzKBEqd7"],"enrUri":"enr:-L24QHKa6LzZVY2PSnaJ31Dk2SbCH7-EAoHTOxyWQn3uEaMpU-6Mg_h7gW7M3Tscu4guafeU8keNJJ-skxwDp0YkNsICgmlkgnY0gmlwhKwSgUeKbXVsdGlhZGRyc5YACASsEoFHBvv6AAoErBKBRwb7-90DgnJzhQADAQAAiXNlY3AyNTZrMaEDIKvlbvLm06duD171y3ZZ6Vt3vRUDP2D8TJsuYewCpRaDdGNwgvv6g3VkcIL7_IV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64505/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.87.108/tcp/59160/p2p/16Uiu2HAm2GFSctLfo3VzVA1dEiZ7jE153pVTEmw3Bcj7iG1qUhmW"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-12-23_03-16-04__4c17bcca-c6aa-46c9-b296-dd9e052bb8cc__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.154.74
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['10439', '10440', '10441', '10442', '10443']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 10439:10439 -p 10440:10440 -p 10441:10441 -p 10442:10442 -p 10443:10443 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=10441 --rest-port=10439 --tcp-port=10440 --discv5-udp-port=10442 --rest-address=0.0.0.0 --nat=extip:172.18.154.74 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0fbdf1adc9aa37edd2435d3baf534aad748fce8ec7fcb8edfb9796dfd786d8ca --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QHYy9X-nnikq4krNsuiGyF0LuR6i5wHTobpVdR8UWWmJLH_4yyfCxoHuO9dWxltSzUmaXwoQRfjAAE2RGiGoUeYCgmlkgnY0gmlwhKwSV2yKbXVsdGlhZGRyc5YACASsEldsBucYAAoErBJXbAbnGd0DgnJzhQADAQAAiXNlY3AyNTZrMaECZZfWKkmp8ApIETWtTC8OANKfSqgibqBbpkpwmlmsny2DdGNwgucYg3VkcILnGoV3YWt1Mgk --lightpushnode=/ip4/172.18.87.108/tcp/59160/p2p/16Uiu2HAm2GFSctLfo3VzVA1dEiZ7jE153pVTEmw3Bcj7iG1qUhmW --lightpush=true --relay=false --pubsub-topic=/waku/2/rs/3/1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.154.74 waku b750a748fcde5b2ed7e7b14cd57b13c7b3f46f47efd3f04d990dfa275b2e4d59
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID b750a748fcde. Setting up logs at ./log/docker/lightpush_node1_2024-12-23_03-16-04__4c17bcca-c6aa-46c9-b296-dd9e052bb8cc__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 10439
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10439/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QN6Vg1Hp9Xr-c8XdRySPy96HjlJGcGt87dzI4bJD4-98XLX0DiM0t6B3k2ztnjcjNPsp0wyMBW2LXyEw_oHr0dGGAZPxg9EXgmlkgnY0gmlwhKwRAAOCcnOFAAMBAAGJc2VjcDI1NmsxoQPTIB5dJKSQmHWhyxk6uO5ykESJd3dSrDR4HUWyK9euUIN0Y3CCKMiDdWRwgijKhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/10440/p2p/16Uiu2HAmSs8nEajR4UEgKK6hjgr1tStN8GcWTS8P4Szoub149ra3","/ip4/127.0.0.1/tcp/10441/ws/p2p/16Uiu2HAmSs8nEajR4UEgKK6hjgr1tStN8GcWTS8P4Szoub149ra3","/ip4/172.17.0.3/tcp/10440/p2p/16Uiu2HAmSs8nEajR4UEgKK6hjgr1tStN8GcWTS8P4Szoub149ra3","/ip4/172.17.0.3/tcp/10441/ws/p2p/16Uiu2HAmSs8nEajR4UEgKK6hjgr1tStN8GcWTS8P4Szoub149ra3"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10439/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.87.108/tcp/59160/p2p/16Uiu2HAm2GFSctLfo3VzVA1dEiZ7jE153pVTEmw3Bcj7iG1qUhmW", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10439/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.129.71/tcp/64506/p2p/16Uiu2HAmErXRUiUPEVpCFU4GoMVHECqWsfrZWemVhKSkBzKBEqd7", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59159/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64505/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A dictionary', 'value': {'key': 'YWFh'}}
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10439/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": {"key": "YWFh"}, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1734923769142689792}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:10439/lightpush/v1/message. Response content: b''
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'An integer', 'value': 1234567890}
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10439/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": 1234567890, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1734923769148225280}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:10439/lightpush/v1/message. Response content: b''
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A list', 'value': ['YWFh']}
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10439/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": ["YWFh"], "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1734923769152059648}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:10439/lightpush/v1/message. Response content: b''
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A bool', 'value': True}
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10439/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": true, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1734923769154954496}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:10439/lightpush/v1/message. Response content: b''
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 51f83db51547
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 5dab76c476da
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 51f83db51547. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id b750a748fcde
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.