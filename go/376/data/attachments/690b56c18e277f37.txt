[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_lightpush with id: 2024-11-29_03-14-43__cbba12f4-32c3-4599-b45c-ee804c7f7925
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-29_03-14-43__cbba12f4-32c3-4599-b45c-ee804c7f7925__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.150.156
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['46133', '46134', '46135', '46136', '46137']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 46133:46133 -p 46134:46134 -p 46135:46135 -p 46136:46136 -p 46137:46137 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=46135 --rest-port=46133 --tcp-port=46134 --discv5-udp-port=46136 --rest-address=0.0.0.0 --nat=extip:172.18.150.156 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=07bdbbf8e2bfefb18cbedea0dcc469dad02fe2c7dff666a51c7a33665d5becbe --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=46137 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.150.156 waku 2b6c0b2f7f1eae69633379004404ff32b4206bd7379f698be8e1603f2439731f
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 7354094e7cc1. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 2b6c0b2f7f1e. Setting up logs at ./log/docker/node1_2024-11-29_03-14-43__cbba12f4-32c3-4599-b45c-ee804c7f7925__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 46133
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46133/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46133/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.150.156/tcp/46134/p2p/16Uiu2HAmQPMuHDmUcJh3FiBTDDfLSGPFCw9maeHezvV9kTzHriv1","/ip4/172.18.150.156/tcp/46135/ws/p2p/16Uiu2HAmQPMuHDmUcJh3FiBTDDfLSGPFCw9maeHezvV9kTzHriv1"],"enrUri":"enr:-L24QMTSpLZ6EdbdqVVI-ZsYkDXiVtFAo8vjgfazHXBPveCKeDN8AJQwsu-cH-b0uaU785LKqVCvrZg9bdd2DAwWfDgCgmlkgnY0gmlwhKwSlpyKbXVsdGlhZGRyc5YACASsEpacBrQ2AAoErBKWnAa0N90DgnJzhQADAQAAiXNlY3AyNTZrMaEDrktRj8NU32ar-tMndUM5kpg2zA5FjWssvA72UVVenA6DdGNwgrQ2g3VkcIK0OIV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-29_03-14-43__cbba12f4-32c3-4599-b45c-ee804c7f7925__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.60.144
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['13100', '13101', '13102', '13103', '13104']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 13100:13100 -p 13101:13101 -p 13102:13102 -p 13103:13103 -p 13104:13104 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=13102 --rest-port=13100 --tcp-port=13101 --discv5-udp-port=13103 --rest-address=0.0.0.0 --nat=extip:172.18.60.144 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c3eada07aa0e8bfecee43ea15c8c3d7c2af97cde862e3acf300d3649d9487d5c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=13104 --metrics-logging=true --lightpush=false --relay=true --discv5-bootstrap-node=enr:-L24QMTSpLZ6EdbdqVVI-ZsYkDXiVtFAo8vjgfazHXBPveCKeDN8AJQwsu-cH-b0uaU785LKqVCvrZg9bdd2DAwWfDgCgmlkgnY0gmlwhKwSlpyKbXVsdGlhZGRyc5YACASsEpacBrQ2AAoErBKWnAa0N90DgnJzhQADAQAAiXNlY3AyNTZrMaEDrktRj8NU32ar-tMndUM5kpg2zA5FjWssvA72UVVenA6DdGNwgrQ2g3VkcIK0OIV3YWt1Mgk
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.60.144 waku 14502733680d0e949680bc73a4ab15759bbb009cbeea07f454c20ff6988f335e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 14502733680d. Setting up logs at ./log/docker/node1_2024-11-29_03-14-43__cbba12f4-32c3-4599-b45c-ee804c7f7925__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 13100
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13100/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13100/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.60.144/tcp/13101/p2p/16Uiu2HAmPxjAobhoxTZQoGSoZqDcLhEkSHVbTJaemvBLpS2jSCp6","/ip4/172.18.60.144/tcp/13102/ws/p2p/16Uiu2HAmPxjAobhoxTZQoGSoZqDcLhEkSHVbTJaemvBLpS2jSCp6"],"enrUri":"enr:-L24QLW7ogImQEp0aiENXee3IZDrWrVwtsvQcSu6mz8y24HjIHWFZypPdqHZ_or_18eUBnXkn11dL5vnrn9RBSUjiCMCgmlkgnY0gmlwhKwSPJCKbXVsdGlhZGRyc5YACASsEjyQBjMtAAoErBI8kAYzLt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDp_vYhTgMvNF5mRfj26Mia-SFs7otngqUfUupn9WuaB-DdGNwgjMtg3VkcIIzL4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-29_03-14-43__cbba12f4-32c3-4599-b45c-ee804c7f7925__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.254.242
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['54406', '54407', '54408', '54409', '54410']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 54406:54406 -p 54407:54407 -p 54408:54408 -p 54409:54409 -p 54410:54410 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=54408 --rest-port=54406 --tcp-port=54407 --discv5-udp-port=54409 --rest-address=0.0.0.0 --nat=extip:172.18.254.242 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fcd4e0eeacbcfb8fbfeaacfdf4cdcdd5cd338fc9a03cdc7850f2c41e0bae2fee --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --lightpush=true --relay=false --discv5-bootstrap-node=enr:-L24QMTSpLZ6EdbdqVVI-ZsYkDXiVtFAo8vjgfazHXBPveCKeDN8AJQwsu-cH-b0uaU785LKqVCvrZg9bdd2DAwWfDgCgmlkgnY0gmlwhKwSlpyKbXVsdGlhZGRyc5YACASsEpacBrQ2AAoErBKWnAa0N90DgnJzhQADAQAAiXNlY3AyNTZrMaEDrktRj8NU32ar-tMndUM5kpg2zA5FjWssvA72UVVenA6DdGNwgrQ2g3VkcIK0OIV3YWt1Mgk --lightpushnode=/ip4/172.18.150.156/tcp/46134/p2p/16Uiu2HAmQPMuHDmUcJh3FiBTDDfLSGPFCw9maeHezvV9kTzHriv1 --pubsub-topic=/waku/2/rs/3/1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.254.242 waku d5f1e6bf1001b20c4f4dee1b4e5e3a7bf1e97259919d4025755687d85bfda2f3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID d5f1e6bf1001. Setting up logs at ./log/docker/node1_2024-11-29_03-14-43__cbba12f4-32c3-4599-b45c-ee804c7f7925__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 54406
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54406/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QHAbSynI0fwtnF0eztMxAaaQMnwG-3f4lqorjyY2OOtRRmQgfa3hHl05EA0tXzjFU04VJ510ddkbBFLYwNEfXUOGAZN16fb3gmlkgnY0gmlwhKwRAAuCcnOFAAMBAAGJc2VjcDI1NmsxoQPI_1izsyQc_zQEBpkUR75QdarvaZ4t9NYWjhSSJXbEhYN0Y3CC1IeDdWRwgtSJhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/54407/p2p/16Uiu2HAmSBbii3BSkPtHVkA5sxz7JZdQXXr5iAzCroNgyXLUznUU","/ip4/127.0.0.1/tcp/54408/ws/p2p/16Uiu2HAmSBbii3BSkPtHVkA5sxz7JZdQXXr5iAzCroNgyXLUznUU","/ip4/172.17.0.11/tcp/54407/p2p/16Uiu2HAmSBbii3BSkPtHVkA5sxz7JZdQXXr5iAzCroNgyXLUznUU","/ip4/172.17.0.11/tcp/54408/ws/p2p/16Uiu2HAmSBbii3BSkPtHVkA5sxz7JZdQXXr5iAzCroNgyXLUznUU"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:46133/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13100/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54406/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": 1732850088720635392}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46133/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1732850088720635392,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13100/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1732850088720635392,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 2b6c0b2f7f1e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 14502733680d
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 2b6c0b2f7f1e. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id d5f1e6bf1001
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 14502733680d. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.