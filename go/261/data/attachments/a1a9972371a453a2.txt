[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_node_not_connected_directly_to_lightpushing_node with id: 2024-08-30_03-12-38__1ab73e6b-9155-4387-b992-ff0ead63c230
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-08-30_03-12-38__1ab73e6b-9155-4387-b992-ff0ead63c230__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-08-30_03-12-38__1ab73e6b-9155-4387-b992-ff0ead63c230__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-08-30_03-12-38__1ab73e6b-9155-4387-b992-ff0ead63c230__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:28 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.236.234
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['7032', '7033', '7034', '7035', '7036']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 7032:7032 -p 7033:7033 -p 7034:7034 -p 7035:7035 -p 7036:7036 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=7034 --rest-port=7032 --tcp-port=7033 --discv5-udp-port=7035 --rest-address=0.0.0.0 --nat=extip:172.18.236.234 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2b1aa40ac8cb5ea554b9fa4d9fa7db6dd508dfab4da774466068cad226372e75 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.236.234 waku 3f4627f12a81dcce7dfb28da23253feeff30340b8cd00557a4d6da807741602e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 3f4627f12a81. Setting up logs at ./log/docker/node1_2024-08-30_03-12-38__1ab73e6b-9155-4387-b992-ff0ead63c230__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 7032
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7032/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QNhnIE8FMgu8aEf6isUvmFzT9-2-5KLLyncPeYcRLs1bJJlPrbbovN08lciWs-AKOKCtXA7YglaLjybQo-cWxdmGAZGhRU0FgmlkgnY0gmlwhKwRAAeJc2VjcDI1NmsxoQL2aRAIoiDAL3WinHNtbY3OEo8_CQhBzQ8xlNBw2zno9YN0Y3CCG3mDdWRwght7hXdha3UyCQ","listenAddresses":["/ip4/127.0.0.1/tcp/7033/p2p/16Uiu2HAmC1ZC4i9f2tPCCfSiB6yqGJsEkZxsXDYtYAn1BHiGHy5W","/ip4/127.0.0.1/tcp/7034/ws/p2p/16Uiu2HAmC1ZC4i9f2tPCCfSiB6yqGJsEkZxsXDYtYAn1BHiGHy5W","/ip4/172.17.0.7/tcp/7033/p2p/16Uiu2HAmC1ZC4i9f2tPCCfSiB6yqGJsEkZxsXDYtYAn1BHiGHy5W","/ip4/172.17.0.7/tcp/7034/ws/p2p/16Uiu2HAmC1ZC4i9f2tPCCfSiB6yqGJsEkZxsXDYtYAn1BHiGHy5W"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.134.64
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['6493', '6494', '6495', '6496', '6497']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 6493:6493 -p 6494:6494 -p 6495:6495 -p 6496:6496 -p 6497:6497 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6495 --rest-port=6493 --tcp-port=6494 --discv5-udp-port=6496 --rest-address=0.0.0.0 --nat=extip:172.18.134.64 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a8f8cffadcee5ae88eed0cbef4cc121bab08941ff478cbf62dd5dabfababe423 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6497 --metrics-logging=true --lightpush=true --store=true --relay=true --discv5-bootstrap-node=enr:-Ji4QNhnIE8FMgu8aEf6isUvmFzT9-2-5KLLyncPeYcRLs1bJJlPrbbovN08lciWs-AKOKCtXA7YglaLjybQo-cWxdmGAZGhRU0FgmlkgnY0gmlwhKwRAAeJc2VjcDI1NmsxoQL2aRAIoiDAL3WinHNtbY3OEo8_CQhBzQ8xlNBw2zno9YN0Y3CCG3mDdWRwght7hXdha3UyCQ --lightpushnode=/ip4/172.18.236.234/tcp/7033/p2p/16Uiu2HAmC1ZC4i9f2tPCCfSiB6yqGJsEkZxsXDYtYAn1BHiGHy5W
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.134.64 waku b9a3f4a6e7fa3be6a0bf06ee5942c56285b80fea6fe9bbc84410688696f0126f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID b9a3f4a6e7fa. Setting up logs at ./log/docker/node2_2024-08-30_03-12-38__1ab73e6b-9155-4387-b992-ff0ead63c230__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 6493
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6493/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6493/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.134.64/tcp/6494/p2p/16Uiu2HAmB7hxJYVAhEnuFqTXJk8iQah2bDrCUHccXE9SfixvaYue","/ip4/172.18.134.64/tcp/6495/ws/p2p/16Uiu2HAmB7hxJYVAhEnuFqTXJk8iQah2bDrCUHccXE9SfixvaYue"],"enrUri":"enr:-LO4QIp3BdDOkRz2WDMgcg2fqDKvgo5aDsYDdwPEVHn7_GXVddsrxy1aw8SYgm7gJlP6EA7DSMTW7b-xF1wi74huUXgBgmlkgnY0gmlwhKwShkCKbXVsdGlhZGRyc4wACgSsEoZABhlf3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLpIMTD2lw88Uo2zNWUuMrf-UaR-RAGuzqT_toVjvXIYYN0Y3CCGV6DdWRwghlghXdha3UyCw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.106.82
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['40035', '40036', '40037', '40038', '40039']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 40035:40035 -p 40036:40036 -p 40037:40037 -p 40038:40038 -p 40039:40039 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=40037 --rest-port=40035 --tcp-port=40036 --discv5-udp-port=40038 --rest-address=0.0.0.0 --nat=extip:172.18.106.82 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=40f7b965ee6dcdff9cb06d63e8081abef8fdd6cb88c0e48e4ec36bae08ef383f --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --storenode=/ip4/172.18.134.64/tcp/6494/p2p/16Uiu2HAmB7hxJYVAhEnuFqTXJk8iQah2bDrCUHccXE9SfixvaYue --discv5-bootstrap-node=enr:-LO4QIp3BdDOkRz2WDMgcg2fqDKvgo5aDsYDdwPEVHn7_GXVddsrxy1aw8SYgm7gJlP6EA7DSMTW7b-xF1wi74huUXgBgmlkgnY0gmlwhKwShkCKbXVsdGlhZGRyc4wACgSsEoZABhlf3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLpIMTD2lw88Uo2zNWUuMrf-UaR-RAGuzqT_toVjvXIYYN0Y3CCGV6DdWRwghlghXdha3UyCw
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.106.82 waku 1f4b14768b1a90834fa582de7b2cc5a8f314a8e1b963bb0dcf7b8ea73f52359f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 1f4b14768b1a. Setting up logs at ./log/docker/node3_2024-08-30_03-12-38__1ab73e6b-9155-4387-b992-ff0ead63c230__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 40035
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40035/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QAs3ueUCmvUaqTkDluYjmRryBbly3tmUrbZ1dyIOY2c0JC_NxYdTPi_YqXN1pXpoP-hEI9OvUKcqvzy1mqP_kXCGAZGhRVhhgmlkgnY0gmlwhKwRAA6Jc2VjcDI1NmsxoQN8PVrxwfHb2lCc_M5QX_q84TS-52v6bL2moRoCxVhDtoN0Y3CCnGSDdWRwgpxmhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/40036/p2p/16Uiu2HAmM1yAhZRAe5JTaNkLMtzt9QetpNfgMgp7UpxZiRXg7uWu","/ip4/127.0.0.1/tcp/40037/ws/p2p/16Uiu2HAmM1yAhZRAe5JTaNkLMtzt9QetpNfgMgp7UpxZiRXg7uWu","/ip4/172.17.0.14/tcp/40036/p2p/16Uiu2HAmM1yAhZRAe5JTaNkLMtzt9QetpNfgMgp7UpxZiRXg7uWu","/ip4/172.17.0.14/tcp/40037/ws/p2p/16Uiu2HAmM1yAhZRAe5JTaNkLMtzt9QetpNfgMgp7UpxZiRXg7uWu"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7032/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6493/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7032/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7032/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7032/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAmB7hxJYVAhEnuFqTXJk8iQah2bDrCUHccXE9SfixvaYue","multiaddrs":["/ip4/172.18.134.64/tcp/6495/ws/p2p/16Uiu2HAmB7hxJYVAhEnuFqTXJk8iQah2bDrCUHccXE9SfixvaYue","/ip4/172.18.134.64/tcp/6494/p2p/16Uiu2HAmB7hxJYVAhEnuFqTXJk8iQah2bDrCUHccXE9SfixvaYue"],"protocols":["/vac/waku/store-query/3.0.0","/vac/waku/lightpush/2.0.0-beta1","/vac/waku/store/2.0.0-beta4","/vac/waku/relay/2.0.0"],"connected":true,"pubsubTopics":["/waku/2/rs/3/0","/waku/2/rs/3/1"]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6493/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.7/tcp/7033/p2p/16Uiu2HAmC1ZC4i9f2tPCCfSiB6yqGJsEkZxsXDYtYAn1BHiGHy5W","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"},{"multiaddr":"/ip4/172.17.0.14/tcp/40036/p2p/16Uiu2HAmM1yAhZRAe5JTaNkLMtzt9QetpNfgMgp7UpxZiRXg7uWu","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7032/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1724987595154340864}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.store:store.py:216 Checking that peer wakuorg/go-waku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40035/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-filter%2Fproto&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"6d8ecd6f3af8a181dbe66c6ea5dabbfa65ff9670c8c5778a5d145a8c85982220","status_code":200,"status_desc":"OK","messages":[{"message_hash":"bYwH/KMBUyPYhNqHsoXr8f1iIc9SblDHQ2Kc5KcEVEw="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 3f4627f12a81
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id b9a3f4a6e7fa
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 1f4b14768b1a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.