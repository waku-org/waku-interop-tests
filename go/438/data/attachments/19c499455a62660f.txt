[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_only_lightpush__peer_full with id: 2025-01-21_03-04-31__84cde449-c9fa-4727-a9d5-a5b960f09d29
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-01-21_03-04-31__84cde449-c9fa-4727-a9d5-a5b960f09d29__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.108.132
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['64300', '64301', '64302', '64303', '64304']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 64300:64300 -p 64301:64301 -p 64302:64302 -p 64303:64303 -p 64304:64304 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64302 --rest-port=64300 --tcp-port=64301 --discv5-udp-port=64303 --rest-address=0.0.0.0 --nat=extip:172.18.108.132 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a8b8745d9fbde4ab11ba96bea9ba930fed8e70fa7f8d3c20fa7ceaf8cacbccc7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64304 --metrics-logging=true --lightpush=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.108.132 waku ddca7e244821342ddb362d98984a55c77b3a5a6baa1b079485cfbe337c13e820
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container b818e4c9ec08. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ddca7e244821. Setting up logs at ./log/docker/receiving_node1_2025-01-21_03-04-31__84cde449-c9fa-4727-a9d5-a5b960f09d29__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 64300
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 9d308744c966. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64300/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64300/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.108.132/tcp/64301/p2p/16Uiu2HAmP649sePcqkqjbUu2MKVSThZ2jEbfnFhK4AJWH7fzJavQ","/ip4/172.18.108.132/tcp/64302/ws/p2p/16Uiu2HAmP649sePcqkqjbUu2MKVSThZ2jEbfnFhK4AJWH7fzJavQ"],"enrUri":"enr:-L24QDTYzJyznCnnISWeA02n9F6s_yav0ZCQ2jDOQB9BrEpRaNr1Qw7C8kQsIKUSq-TQnCYmglF9EPop6pC6Ys7EPHcCgmlkgnY0gmlwhKwSbISKbXVsdGlhZGRyc5YACASsEmyEBvstAAoErBJshAb7Lt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDmwCwk7C7QnfsdDUeRurPqWqWd7LitVuv9K740vgxGTWDdGNwgvstg3VkcIL7L4V3YWt1Mg0"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-01-21_03-04-31__84cde449-c9fa-4727-a9d5-a5b960f09d29__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.62.75
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['63253', '63254', '63255', '63256', '63257']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 63253:63253 -p 63254:63254 -p 63255:63255 -p 63256:63256 -p 63257:63257 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63255 --rest-port=63253 --tcp-port=63254 --discv5-udp-port=63256 --rest-address=0.0.0.0 --nat=extip:172.18.62.75 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=aacd5b4f7ba29ce54b153ddeebf85afa3adaeec9d992a1d5eaaf8bfd21963af8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63257 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.62.75 waku 554fcb0d9f24bb6e04650b7ddd9c53e41a529ed431f3044f4292bbf5e7acb8af
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 554fcb0d9f24. Setting up logs at ./log/docker/receiving_node2_2025-01-21_03-04-31__84cde449-c9fa-4727-a9d5-a5b960f09d29__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 63253
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63253/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63253/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.62.75/tcp/63254/p2p/16Uiu2HAmQ3GVx8ZZKTYc3FWu4ucj1stUda3THbRPZamTAxngZe9r","/ip4/172.18.62.75/tcp/63255/ws/p2p/16Uiu2HAmQ3GVx8ZZKTYc3FWu4ucj1stUda3THbRPZamTAxngZe9r"],"enrUri":"enr:-L24QFXuAUABn8_Ef6V_-JZVSZCppDF-Mm2Rgw5eb5ZqIbaqdiZo-W1bpahPgX0i4xXG6u38t0m02Zbm9jDSZwrrrxYCgmlkgnY0gmlwhKwSPkuKbXVsdGlhZGRyc5YACASsEj5LBvcWAAoErBI-Swb3F90DgnJzhQADAQAAiXNlY3AyNTZrMaEDqSWYFwj64oCGj6N1a82rmhv3QpwiKs0xkw8DwlIrhAWDdGNwgvcWg3VkcIL3GIV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63253/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.108.132/tcp/64301/p2p/16Uiu2HAmP649sePcqkqjbUu2MKVSThZ2jEbfnFhK4AJWH7fzJavQ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-01-21_03-04-31__84cde449-c9fa-4727-a9d5-a5b960f09d29__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.130.158
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['62662', '62663', '62664', '62665', '62666']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 62662:62662 -p 62663:62663 -p 62664:62664 -p 62665:62665 -p 62666:62666 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=62664 --rest-port=62662 --tcp-port=62663 --discv5-udp-port=62665 --rest-address=0.0.0.0 --nat=extip:172.18.130.158 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e922290be7aa71ee97e2aebd244f1c72af6a7148b17a54db4a2405de257fa0e1 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QDTYzJyznCnnISWeA02n9F6s_yav0ZCQ2jDOQB9BrEpRaNr1Qw7C8kQsIKUSq-TQnCYmglF9EPop6pC6Ys7EPHcCgmlkgnY0gmlwhKwSbISKbXVsdGlhZGRyc5YACASsEmyEBvstAAoErBJshAb7Lt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDmwCwk7C7QnfsdDUeRurPqWqWd7LitVuv9K740vgxGTWDdGNwgvstg3VkcIL7L4V3YWt1Mg0 --lightpushnode=/ip4/172.18.108.132/tcp/64301/p2p/16Uiu2HAmP649sePcqkqjbUu2MKVSThZ2jEbfnFhK4AJWH7fzJavQ --lightpush=true --relay=false --pubsub-topic=/waku/2/rs/3/1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.130.158 waku 7f07875074eb98d55165b63a1c46a9777b0281c62e324855f82bd440d50d4cb0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 7f07875074eb. Setting up logs at ./log/docker/lightpush_node1_2025-01-21_03-04-31__84cde449-c9fa-4727-a9d5-a5b960f09d29__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 62662
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62662/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QFj9spJS_Ug_Oddj3CHiHNNNw1aIG_mVgd1ivQU2SjEaNiuI7Vz-fuVHIF2_fI2F1z-vHhYqvIntairR0-ilbieGAZSG0ad7gmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQPmjsCze1sbl1zMzjDmFYvHNgGGyT6dVjSjWePzXLJtPYN0Y3CC9MeDdWRwgvTJhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/62663/p2p/16Uiu2HAmUAzNYsLy6BuzXYTCDFeSPn77n9JdHbCW7TNU4cZqtpZi","/ip4/127.0.0.1/tcp/62664/ws/p2p/16Uiu2HAmUAzNYsLy6BuzXYTCDFeSPn77n9JdHbCW7TNU4cZqtpZi","/ip4/172.17.0.4/tcp/62663/p2p/16Uiu2HAmUAzNYsLy6BuzXYTCDFeSPn77n9JdHbCW7TNU4cZqtpZi","/ip4/172.17.0.4/tcp/62664/ws/p2p/16Uiu2HAmUAzNYsLy6BuzXYTCDFeSPn77n9JdHbCW7TNU4cZqtpZi"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62662/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.108.132/tcp/64301/p2p/16Uiu2HAmP649sePcqkqjbUu2MKVSThZ2jEbfnFhK4AJWH7fzJavQ", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62662/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.62.75/tcp/63254/p2p/16Uiu2HAmQ3GVx8ZZKTYc3FWu4ucj1stUda3THbRPZamTAxngZe9r", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64300/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63253/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62662/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1737428675459572992}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64300/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1737428675459572992,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63253/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1737428675459572992,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id ddca7e244821
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 554fcb0d9f24
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container ddca7e244821. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 7f07875074eb
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.