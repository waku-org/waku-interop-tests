[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_msg_not_stored_when_ephemeral_true with id: 2024-12-03_03-20-25__7e8ee8dd-ff83-4d8e-b63b-3a3b2203a0c1
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-03_03-20-25__7e8ee8dd-ff83-4d8e-b63b-3a3b2203a0c1__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-03_03-20-25__7e8ee8dd-ff83-4d8e-b63b-3a3b2203a0c1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-12-03_03-20-25__7e8ee8dd-ff83-4d8e-b63b-3a3b2203a0c1__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:388 Start 3 nodes 
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.34.208
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['44749', '44750', '44751', '44752', '44753']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 44749:44749 -p 44750:44750 -p 44751:44751 -p 44752:44752 -p 44753:44753 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=44751 --rest-port=44749 --tcp-port=44750 --discv5-udp-port=44752 --rest-address=0.0.0.0 --nat=extip:172.18.34.208 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4ad3f06fb113783f7ea70a3f6b67a8beaba5d1c9c9d881bbb8fba328fcae6a9d --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --store=true
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 61e122b59652. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.34.208 waku 1809d6f5a4eff0b154645ad1a85def43b5220d1e44980ba867c427377ecfa78e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 1809d6f5a4ef. Setting up logs at ./log/docker/node1_2024-12-03_03-20-25__7e8ee8dd-ff83-4d8e-b63b-3a3b2203a0c1__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 44749
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44749/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QPBWXxpLzfPEQdIFpJXI-laQrSuqvbk1ezZK4EVshYd7Ge7uCEHrzFFVC_igPhpSatxjpm5A4TliVsB9u7zcmquGAZOKiJExgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaECwGpitMpm_hGFWdACKMJ512WpZwl9tUGuWTAmaNdOjLmDdGNwgq7Og3VkcIKu0IV3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/44750/p2p/16Uiu2HAm8NnM1toW85aqS1811Q5kLbZfVwQv5TZUYAg14zm9znMv","/ip4/127.0.0.1/tcp/44751/ws/p2p/16Uiu2HAm8NnM1toW85aqS1811Q5kLbZfVwQv5TZUYAg14zm9znMv","/ip4/172.17.0.3/tcp/44750/p2p/16Uiu2HAm8NnM1toW85aqS1811Q5kLbZfVwQv5TZUYAg14zm9znMv","/ip4/172.17.0.3/tcp/44751/ws/p2p/16Uiu2HAm8NnM1toW85aqS1811Q5kLbZfVwQv5TZUYAg14zm9znMv"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.236.209
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['1476', '1477', '1478', '1479', '1480']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 1476:1476 -p 1477:1477 -p 1478:1478 -p 1479:1479 -p 1480:1480 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=1478 --rest-port=1476 --tcp-port=1477 --discv5-udp-port=1479 --rest-address=0.0.0.0 --nat=extip:172.18.236.209 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cea9cfea4ce1ed4cd61671cb43edfb4f1debfaa9a679a131ff5eafee7e4957ae --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=1480 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-J-4QPBWXxpLzfPEQdIFpJXI-laQrSuqvbk1ezZK4EVshYd7Ge7uCEHrzFFVC_igPhpSatxjpm5A4TliVsB9u7zcmquGAZOKiJExgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaECwGpitMpm_hGFWdACKMJ512WpZwl9tUGuWTAmaNdOjLmDdGNwgq7Og3VkcIKu0IV3YWt1MgM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.236.209 waku 281480eb7d65e404a00657b25d0158cddf357f0fb45dc881d0497cdf8af00879
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 281480eb7d65. Setting up logs at ./log/docker/node2_2024-12-03_03-20-25__7e8ee8dd-ff83-4d8e-b63b-3a3b2203a0c1__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 1476
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1476/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1476/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.236.209/tcp/1477/p2p/16Uiu2HAmMXGjvc5tiLDe4mJ5EhvzTre2QHRyojsgioTm4WgiRni4","/ip4/172.18.236.209/tcp/1478/ws/p2p/16Uiu2HAmMXGjvc5tiLDe4mJ5EhvzTre2QHRyojsgioTm4WgiRni4"],"enrUri":"enr:-L24QG1VPRodtyiAj_byGgByMyucsWYrHId8RDdsb7cWluPoD3VRE7kfqH6jHmpaWm40pHZIYj8rO2qrTBxAbDd50f4CgmlkgnY0gmlwhKwS7NGKbXVsdGlhZGRyc5YACASsEuzRBgXFAAoErBLs0QYFxt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDg78RgieNtFK16vSBpQGv24oFIoui_csWgsAynR3uJBGDdGNwggXFg3VkcIIFx4V3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.219.174
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['47595', '47596', '47597', '47598', '47599']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 47595:47595 -p 47596:47596 -p 47597:47597 -p 47598:47598 -p 47599:47599 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=47597 --rest-port=47595 --tcp-port=47596 --discv5-udp-port=47598 --rest-address=0.0.0.0 --nat=extip:172.18.219.174 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=733f35abc985ffaf311fe11abc63bad8fc5e4787bcc659bcfcfbbc54ef94f889 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --storenode=/ip4/172.18.236.209/tcp/1477/p2p/16Uiu2HAmMXGjvc5tiLDe4mJ5EhvzTre2QHRyojsgioTm4WgiRni4 --discv5-bootstrap-node=enr:-L24QG1VPRodtyiAj_byGgByMyucsWYrHId8RDdsb7cWluPoD3VRE7kfqH6jHmpaWm40pHZIYj8rO2qrTBxAbDd50f4CgmlkgnY0gmlwhKwS7NGKbXVsdGlhZGRyc5YACASsEuzRBgXFAAoErBLs0QYFxt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDg78RgieNtFK16vSBpQGv24oFIoui_csWgsAynR3uJBGDdGNwggXFg3VkcIIFx4V3YWt1MgM --pubsub-topic=/waku/2/rs/3/1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.219.174 waku 1bc85cb0b8de9c4a18cdc6cdc0c527ce9e0b09aacd8ec414b551cc57c079e096
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 1bc85cb0b8de. Setting up logs at ./log/docker/node3_2024-12-03_03-20-25__7e8ee8dd-ff83-4d8e-b63b-3a3b2203a0c1__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 47595
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47595/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QJ_2Mi-3nWwPFoHTuplHYHdqXEnj0HHS6cB65PPwnxq1VK4YVL1e9i4RIQM0Y6qOwY5VOi5tOwLPl0GxSYIuqb2GAZOKiJ-GgmlkgnY0gmlwhKwRAA2CcnOFAAMBAAGJc2VjcDI1NmsxoQLelZDsjsgfuJHzXhDrbNegeGQztJOjfzKyJpEBJsGCWYN0Y3CCueyDdWRwgrnuhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/47596/p2p/16Uiu2HAmAQYmNqjNYpb5Lgr72XLoRjscaY9Ut86c33PWGbBH8Gkg","/ip4/127.0.0.1/tcp/47597/ws/p2p/16Uiu2HAmAQYmNqjNYpb5Lgr72XLoRjscaY9Ut86c33PWGbBH8Gkg","/ip4/172.17.0.13/tcp/47596/p2p/16Uiu2HAmAQYmNqjNYpb5Lgr72XLoRjscaY9Ut86c33PWGbBH8Gkg","/ip4/172.17.0.13/tcp/47597/ws/p2p/16Uiu2HAmAQYmNqjNYpb5Lgr72XLoRjscaY9Ut86c33PWGbBH8Gkg"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:393 Subscribe node1 ,2 to pubtopic /waku/2/rs/3/1
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44749/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1476/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44749/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAmMXGjvc5tiLDe4mJ5EhvzTre2QHRyojsgioTm4WgiRni4","multiaddrs":["/ip4/172.18.236.209/tcp/1477/p2p/16Uiu2HAmMXGjvc5tiLDe4mJ5EhvzTre2QHRyojsgioTm4WgiRni4","/ip4/172.18.236.209/tcp/1478/ws/p2p/16Uiu2HAmMXGjvc5tiLDe4mJ5EhvzTre2QHRyojsgioTm4WgiRni4"],"protocols":null,"connected":false,"pubsubTopics":[]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1476/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.13/tcp/47596/p2p/16Uiu2HAmAQYmNqjNYpb5Lgr72XLoRjscaY9Ut86c33PWGbBH8Gkg","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:398 Node1 publish message with flag ephemeral = True
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44749/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "ephemeral": true}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 3 seconds
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:403 Node3 makes store request to get messages
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/go-waku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47595/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-filter%2Fproto&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"f27629bb81ca8761e254921d817722492f2770b63b36d7492c00a8f2fb76f802","status_code":200,"status_desc":"OK"}'
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:407 Response for store when ephemeral = true is strPeer wakuorg/go-waku:latest couldn't find any messages. Actual response: {'request_id': 'f27629bb81ca8761e254921d817722492f2770b63b36d7492c00a8f2fb76f802', 'status_code': 200, 'status_desc': 'OK'}
[35mDEBUG   [0m tests.e2e.test_e2e:test_e2e.py:409 Message isn't stored as ephemeral = True
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 1809d6f5a4ef
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 281480eb7d65
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 1809d6f5a4ef. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 1bc85cb0b8de
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 281480eb7d65. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.