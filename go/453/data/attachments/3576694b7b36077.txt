[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_lightpushed_message with id: 2025-02-04_03-10-25__61b106a1-cb60-4257-801a-5a60cece9e2a
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-04_03-10-25__61b106a1-cb60-4257-801a-5a60cece9e2a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.93.60
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['48992', '48993', '48994', '48995', '48996']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 48992:48992 -p 48993:48993 -p 48994:48994 -p 48995:48995 -p 48996:48996 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=48994 --rest-port=48992 --tcp-port=48993 --discv5-udp-port=48995 --rest-address=0.0.0.0 --nat=extip:172.18.93.60 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9b24df67a4b70dd2aa0e4fbbdbc7ef79a3de16abeae8ea6a33dad2c8dea28dfe --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=48996 --metrics-logging=true --store=true --relay=true --lightpush=true
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 378508bea0fd. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.93.60 waku 93d1384cff92dd344004c49017202e3a8c7af9a34d88bf1a24bb573423f6b8e3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 93d1384cff92. Setting up logs at ./log/docker/publishing_node1_2025-02-04_03-10-25__61b106a1-cb60-4257-801a-5a60cece9e2a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 48992
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container afad38293bb5. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48992/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48992/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.93.60/tcp/48993/p2p/16Uiu2HAm2znjb6pJwA6XrGPeeLazJ9EQa84U7sKkvKkKXFTGv3Xr","/ip4/172.18.93.60/tcp/48994/ws/p2p/16Uiu2HAm2znjb6pJwA6XrGPeeLazJ9EQa84U7sKkvKkKXFTGv3Xr"],"enrUri":"enr:-L24QC9ITPSRA5w0YhQjV0FCl1C17GQThtppshfoJxm5qrgXFHrlQ-zTPxycP_Mpwnpu8Xww_hlKRUAVc7sSXUeETRkCgmlkgnY0gmlwhKwSXTyKbXVsdGlhZGRyc5YACASsEl08Br9hAAoErBJdPAa_Yt0DgnJzhQADAQAAiXNlY3AyNTZrMaECcH2c-fHJTEzO4q3syPwkdE5n3tn-U2wteI3XDMfXpD2DdGNwgr9hg3VkcIK_Y4V3YWt1Mgs"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node2_2025-02-04_03-10-25__61b106a1-cb60-4257-801a-5a60cece9e2a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.166.187
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['64279', '64280', '64281', '64282', '64283']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 64279:64279 -p 64280:64280 -p 64281:64281 -p 64282:64282 -p 64283:64283 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64281 --rest-port=64279 --tcp-port=64280 --discv5-udp-port=64282 --rest-address=0.0.0.0 --nat=extip:172.18.166.187 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b9f86a8c06ff4ecfc309de5ae8405badc756d4dface8eceaeb9e3210fd186cc9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64283 --metrics-logging=true --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.166.187 waku 3bd39cd7423ba3314550dc71b24508b98df533360639dc70aa80dd71975f8702
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 3bd39cd7423b. Setting up logs at ./log/docker/publishing_node2_2025-02-04_03-10-25__61b106a1-cb60-4257-801a-5a60cece9e2a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 64279
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64279/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64279/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.166.187/tcp/64280/p2p/16Uiu2HAm28L8qESc9qUVJEpSoFDyhMo7ve39MgQuGu5PkwsKtPuC","/ip4/172.18.166.187/tcp/64281/ws/p2p/16Uiu2HAm28L8qESc9qUVJEpSoFDyhMo7ve39MgQuGu5PkwsKtPuC"],"enrUri":"enr:-L24QPa76QXLTQUE_D8Rx_dbu7LQK8UJgLjnjNOVvdjPkmQtbNPkzuWNMLtpN70T7VAdBi5ccMAbMmtPDJM92q0JiOMCgmlkgnY0gmlwhKwSpruKbXVsdGlhZGRyc5YACASsEqa7BvsYAAoErBKmuwb7Gd0DgnJzhQADAQAAiXNlY3AyNTZrMaECY5B_MuDRjHHkR1uLYQjulFTMNjvt0uAwgAFz5FTdIkODdGNwgvsYg3VkcIL7GoV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64279/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.93.60/tcp/48993/p2p/16Uiu2HAm2znjb6pJwA6XrGPeeLazJ9EQa84U7sKkvKkKXFTGv3Xr"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-04_03-10-25__61b106a1-cb60-4257-801a-5a60cece9e2a__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.236.164
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['39540', '39541', '39542', '39543', '39544']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 39540:39540 -p 39541:39541 -p 39542:39542 -p 39543:39543 -p 39544:39544 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=39542 --rest-port=39540 --tcp-port=39541 --discv5-udp-port=39543 --rest-address=0.0.0.0 --nat=extip:172.18.236.164 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bf34a227f1eca3fbae39a8cadcafdb6a1acffcbcaf3bfdaaaaa28ce922e51e1f --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QC9ITPSRA5w0YhQjV0FCl1C17GQThtppshfoJxm5qrgXFHrlQ-zTPxycP_Mpwnpu8Xww_hlKRUAVc7sSXUeETRkCgmlkgnY0gmlwhKwSXTyKbXVsdGlhZGRyc5YACASsEl08Br9hAAoErBJdPAa_Yt0DgnJzhQADAQAAiXNlY3AyNTZrMaECcH2c-fHJTEzO4q3syPwkdE5n3tn-U2wteI3XDMfXpD2DdGNwgr9hg3VkcIK_Y4V3YWt1Mgs --storenode=/ip4/172.18.93.60/tcp/48993/p2p/16Uiu2HAm2znjb6pJwA6XrGPeeLazJ9EQa84U7sKkvKkKXFTGv3Xr --store=false --relay=false --lightpush=true --lightpushnode=/ip4/172.18.93.60/tcp/48993/p2p/16Uiu2HAm2znjb6pJwA6XrGPeeLazJ9EQa84U7sKkvKkKXFTGv3Xr --pubsub-topic=/waku/2/rs/3/1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.236.164 waku 2cbbfbbfb2fa3532ebef750888a2da059e12dab76b7a874e79a005889430c1d5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 2cbbfbbfb2fa. Setting up logs at ./log/docker/store_node1_2025-02-04_03-10-25__61b106a1-cb60-4257-801a-5a60cece9e2a__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 39540
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39540/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QHj9svKwQ_xW9pmLMeWBwpZqNqM-AWilwERqlubb_cLhMjeb6bz3nlG3iPd9qjbPl1lvqKyehR2x4fiHt1yYi3uGAZTO8BUqgmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQO4yk9YwroaXN4RNf7OQsnetwGsLU9LqOZ7085kWsj2moN0Y3CCmnWDdWRwgpp3hXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/39541/p2p/16Uiu2HAmR6LHq3QrV4YjbLUwHDigzwRyvWs4Lt14w2gTrBcYMrfj","/ip4/127.0.0.1/tcp/39542/ws/p2p/16Uiu2HAmR6LHq3QrV4YjbLUwHDigzwRyvWs4Lt14w2gTrBcYMrfj","/ip4/172.17.0.4/tcp/39541/p2p/16Uiu2HAmR6LHq3QrV4YjbLUwHDigzwRyvWs4Lt14w2gTrBcYMrfj","/ip4/172.17.0.4/tcp/39542/ws/p2p/16Uiu2HAmR6LHq3QrV4YjbLUwHDigzwRyvWs4Lt14w2gTrBcYMrfj"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39540/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.93.60/tcp/48993/p2p/16Uiu2HAm2znjb6pJwA6XrGPeeLazJ9EQa84U7sKkvKkKXFTGv3Xr", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39540/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.166.187/tcp/64280/p2p/16Uiu2HAm28L8qESc9qUVJEpSoFDyhMo7ve39MgQuGu5PkwsKtPuC", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48992/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64279/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39540/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738638629174359040}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48992/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xb9fba95609d29c1ca94d0e44e51ddd01ca2840e08fadf84de6f5249150800c07"}]}'
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/go-waku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39540/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"21e9cad7242c094f3a19e430792a7c6564c4fd9ab9d11e18fcb961eb9dbf5816","status_code":200,"status_desc":"OK","messages":[{"message_hash":"ufupVgnSnBypTQ5E5R3dAcooQOCPrfhN5vUkkVCADAc="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 93d1384cff92
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 3bd39cd7423b
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 93d1384cff92. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 2cbbfbbfb2fa
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:42 Attaching file ./log/docker/publishing_node2_2025-02-04_03-10-25__61b106a1-cb60-4257-801a-5a60cece9e2a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:42 Attaching file ./log/docker/publishing_node1_2025-02-04_03-10-25__61b106a1-cb60-4257-801a-5a60cece9e2a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:42 Attaching file ./log/docker/store_node1_2025-02-04_03-10-25__61b106a1-cb60-4257-801a-5a60cece9e2a__wakuorg_go-waku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_lightpushed_message with id: 2025-02-04_03-10-32__47054ac6-2b49-495b-9f8b-1919b01f2858
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-04_03-10-32__47054ac6-2b49-495b-9f8b-1919b01f2858__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.55.166
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['9787', '9788', '9789', '9790', '9791']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 9787:9787 -p 9788:9788 -p 9789:9789 -p 9790:9790 -p 9791:9791 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=9789 --rest-port=9787 --tcp-port=9788 --discv5-udp-port=9790 --rest-address=0.0.0.0 --nat=extip:172.18.55.166 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cdde4254ae34384cac2faeb59aaad780c9c7e3f7fbfbccbf9c5a77affbacd57e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=9791 --metrics-logging=true --store=true --relay=true --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.55.166 waku 0a905ffbb140a23f38dbdd13cdd1f26360f1a26d247d2567c7d4bceb18d8d17f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 0a905ffbb140. Setting up logs at ./log/docker/publishing_node1_2025-02-04_03-10-32__47054ac6-2b49-495b-9f8b-1919b01f2858__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 9787
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 3bd39cd7423b. Exiting log stream.
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 2cbbfbbfb2fa. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9787/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9787/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.55.166/tcp/9788/p2p/16Uiu2HAky4qhDGJkMj23eq6Z45fH3FdKw2LAC775qcBugoV1nwxR","/ip4/172.18.55.166/tcp/9789/ws/p2p/16Uiu2HAky4qhDGJkMj23eq6Z45fH3FdKw2LAC775qcBugoV1nwxR"],"enrUri":"enr:-L24QK_jh7VgdrZ4Jo3gCr43wGlse8_AfUcbPMBNaxmwOFZFXjMX78sQv5k2NLMxlEmCaPNy3m5DxoPc4BcA2V9dXDcCgmlkgnY0gmlwhKwSN6aKbXVsdGlhZGRyc5YACASsEjemBiY8AAoErBI3pgYmPd0DgnJzhQADAQAAiXNlY3AyNTZrMaECNhiI1RFppyz_qxhPxopV3Aoqkyj3_MIt05cPTT-J5a6DdGNwgiY8g3VkcIImPoV3YWt1Mgs"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node2_2025-02-04_03-10-32__47054ac6-2b49-495b-9f8b-1919b01f2858__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.57.134
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['4499', '4500', '4501', '4502', '4503']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 4499:4499 -p 4500:4500 -p 4501:4501 -p 4502:4502 -p 4503:4503 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4501 --rest-port=4499 --tcp-port=4500 --discv5-udp-port=4502 --rest-address=0.0.0.0 --nat=extip:172.18.57.134 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f557d8099fb9db85d114eafe947390cfdd35b104be7ac4beef0a43c4e5e869ab --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4503 --metrics-logging=true --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.57.134 waku 80f66b624c17da45029d12469e5074b04bc06fc5e714546f24e39e514459d7f9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 80f66b624c17. Setting up logs at ./log/docker/publishing_node2_2025-02-04_03-10-32__47054ac6-2b49-495b-9f8b-1919b01f2858__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 4499
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4499/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4499/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.57.134/tcp/4500/p2p/16Uiu2HAm5rkTXnvLWeQ2xc6qEQYZ6k6jXYn4ip315ajVun5Wj2WT","/ip4/172.18.57.134/tcp/4501/ws/p2p/16Uiu2HAm5rkTXnvLWeQ2xc6qEQYZ6k6jXYn4ip315ajVun5Wj2WT"],"enrUri":"enr:-L24QC7o-UVbow2Y7zM30LyOJzvz7gL6mv_llba8nxrd4gyJWwTLsRShjrF3Eyg_JV-szOuBZ0Wh8S_PZhEDjJj1OkcCgmlkgnY0gmlwhKwSOYaKbXVsdGlhZGRyc5YACASsEjmGBhGUAAoErBI5hgYRld0DgnJzhQADAQAAiXNlY3AyNTZrMaECmwFz-5h7fEi4IKkW7rKJhamg6FtLOhOP0wF7LBPHzvCDdGNwghGUg3VkcIIRloV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4499/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.55.166/tcp/9788/p2p/16Uiu2HAky4qhDGJkMj23eq6Z45fH3FdKw2LAC775qcBugoV1nwxR"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-04_03-10-32__47054ac6-2b49-495b-9f8b-1919b01f2858__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.231.166
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['7225', '7226', '7227', '7228', '7229']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 7225:7225 -p 7226:7226 -p 7227:7227 -p 7228:7228 -p 7229:7229 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=7227 --rest-port=7225 --tcp-port=7226 --discv5-udp-port=7228 --rest-address=0.0.0.0 --nat=extip:172.18.231.166 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6c6a2dfa5b3cf0d0eca5ca109e9c512cb9a7da32b118fe6f628fd2ffadfac8d8 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QK_jh7VgdrZ4Jo3gCr43wGlse8_AfUcbPMBNaxmwOFZFXjMX78sQv5k2NLMxlEmCaPNy3m5DxoPc4BcA2V9dXDcCgmlkgnY0gmlwhKwSN6aKbXVsdGlhZGRyc5YACASsEjemBiY8AAoErBI3pgYmPd0DgnJzhQADAQAAiXNlY3AyNTZrMaECNhiI1RFppyz_qxhPxopV3Aoqkyj3_MIt05cPTT-J5a6DdGNwgiY8g3VkcIImPoV3YWt1Mgs --storenode=/ip4/172.18.55.166/tcp/9788/p2p/16Uiu2HAky4qhDGJkMj23eq6Z45fH3FdKw2LAC775qcBugoV1nwxR --store=false --relay=false --lightpush=true --lightpushnode=/ip4/172.18.55.166/tcp/9788/p2p/16Uiu2HAky4qhDGJkMj23eq6Z45fH3FdKw2LAC775qcBugoV1nwxR --pubsub-topic=/waku/2/rs/3/1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.231.166 waku 33a756634c4ebff82e855c2aa879a588552909363d8d5f1ce6ed3ec3c8b1e661
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 33a756634c4e. Setting up logs at ./log/docker/store_node1_2025-02-04_03-10-32__47054ac6-2b49-495b-9f8b-1919b01f2858__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 7225
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7225/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QFFge4TF8tfrDNzsl7VDjae8dtwui_xwK35vZmk3SCPUEMyvPdpVEztDeYPQmnXv9OfXNCmgFsoTX2dsRKck996GAZTO8C_BgmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQOArZ81ckUHaYAfxOftGoB9vVOGcPcRhcCuVla1LL1w5oN0Y3CCHDqDdWRwghw8hXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/7226/p2p/16Uiu2HAmMKJ64Qy8KxvJfAoc3Hq1JmZeqi46TSzDpEtfedrMNCy3","/ip4/127.0.0.1/tcp/7227/ws/p2p/16Uiu2HAmMKJ64Qy8KxvJfAoc3Hq1JmZeqi46TSzDpEtfedrMNCy3","/ip4/172.17.0.4/tcp/7226/p2p/16Uiu2HAmMKJ64Qy8KxvJfAoc3Hq1JmZeqi46TSzDpEtfedrMNCy3","/ip4/172.17.0.4/tcp/7227/ws/p2p/16Uiu2HAmMKJ64Qy8KxvJfAoc3Hq1JmZeqi46TSzDpEtfedrMNCy3"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7225/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.55.166/tcp/9788/p2p/16Uiu2HAky4qhDGJkMj23eq6Z45fH3FdKw2LAC775qcBugoV1nwxR", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7225/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.57.134/tcp/4500/p2p/16Uiu2HAm5rkTXnvLWeQ2xc6qEQYZ6k6jXYn4ip315ajVun5Wj2WT", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9787/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4499/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7225/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738638635980344064}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9787/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xb0095a0f008c58987a6ed3860597ccbd4d1ea1de5ef056a52d567eab37e3b969"}]}'
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/go-waku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7225/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"426865005a4775ea61497346360afba7d151b05cf738fe60dd99d0690424c660","status_code":200,"status_desc":"OK","messages":[{"message_hash":"sAlaDwCMWJh6btOGBZfMvU0eod5e8FalLVZ+qzfjuWk="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 0a905ffbb140
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 80f66b624c17
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 0a905ffbb140. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 33a756634c4e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:42 Attaching file ./log/docker/publishing_node1_2025-02-04_03-10-32__47054ac6-2b49-495b-9f8b-1919b01f2858__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:42 Attaching file ./log/docker/publishing_node2_2025-02-04_03-10-32__47054ac6-2b49-495b-9f8b-1919b01f2858__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:42 Attaching file ./log/docker/store_node1_2025-02-04_03-10-32__47054ac6-2b49-495b-9f8b-1919b01f2858__wakuorg_go-waku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_lightpushed_message with id: 2025-02-04_03-10-38__b0f56fbd-c4c5-4752-b3d2-baa9deed8d62
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-04_03-10-38__b0f56fbd-c4c5-4752-b3d2-baa9deed8d62__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.141.38
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['20586', '20587', '20588', '20589', '20590']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 20586:20586 -p 20587:20587 -p 20588:20588 -p 20589:20589 -p 20590:20590 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20588 --rest-port=20586 --tcp-port=20587 --discv5-udp-port=20589 --rest-address=0.0.0.0 --nat=extip:172.18.141.38 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1cf7dbdfcce5d6d4fe1955fb94fe1fe3cdecef1e0afddadd33a02b884aca12e3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20590 --metrics-logging=true --store=true --relay=true --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.141.38 waku 17c25286ae93046acb59853c3b1074f3b40bf0c490eb1fa58615e0786a49858f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 17c25286ae93. Setting up logs at ./log/docker/publishing_node1_2025-02-04_03-10-38__b0f56fbd-c4c5-4752-b3d2-baa9deed8d62__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 20586
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 80f66b624c17. Exiting log stream.
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 33a756634c4e. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20586/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20586/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.141.38/tcp/20587/p2p/16Uiu2HAmD2pvG7dxS2xaWRY67Z2PvSzeCCiQL6dFH4jgcbr9wjS3","/ip4/172.18.141.38/tcp/20588/ws/p2p/16Uiu2HAmD2pvG7dxS2xaWRY67Z2PvSzeCCiQL6dFH4jgcbr9wjS3"],"enrUri":"enr:-L24QMpiiRxa7XSkkvGHrUgHQMbJgdCxKzwwcwZVU-i-FE0ec6098TIp_G0-ozyr4K8w7nAZlDZIe0tVm0VIxA9BKq0CgmlkgnY0gmlwhKwSjSaKbXVsdGlhZGRyc5YACASsEo0mBlBrAAoErBKNJgZQbN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDBZgdEPWCpdQ03XwMkEq82sEOREFarapmcIGucO2LGSSDdGNwglBrg3VkcIJQbYV3YWt1Mgs"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node2_2025-02-04_03-10-38__b0f56fbd-c4c5-4752-b3d2-baa9deed8d62__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.39.74
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['19007', '19008', '19009', '19010', '19011']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 19007:19007 -p 19008:19008 -p 19009:19009 -p 19010:19010 -p 19011:19011 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19009 --rest-port=19007 --tcp-port=19008 --discv5-udp-port=19010 --rest-address=0.0.0.0 --nat=extip:172.18.39.74 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b6d1fff9bde9aee3ee2c492ecf7e435ffc3e0b77c55d1b67aefa5d501cda100c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19011 --metrics-logging=true --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.39.74 waku 869702cf25fcc5c4c66938ce4e5efd9054c5b705b347fba8ff11b346725f226e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 869702cf25fc. Setting up logs at ./log/docker/publishing_node2_2025-02-04_03-10-38__b0f56fbd-c4c5-4752-b3d2-baa9deed8d62__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 19007
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19007/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19007/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.39.74/tcp/19008/p2p/16Uiu2HAm7zSXTWYYFo6QiHrHctEjpiUq1fX6PWDBN57Q3zWjFeeJ","/ip4/172.18.39.74/tcp/19009/ws/p2p/16Uiu2HAm7zSXTWYYFo6QiHrHctEjpiUq1fX6PWDBN57Q3zWjFeeJ"],"enrUri":"enr:-L24QG4AlAehn3opBR4e0-5TPYcZ-UCrnOGmWSwZV2ztMVaDGW8WvrCxaP24UN2H8hOD2PgAU0KJ75buSS5yQCVGC-ACgmlkgnY0gmlwhKwSJ0qKbXVsdGlhZGRyc5YACASsEidKBkpAAAoErBInSgZKQd0DgnJzhQADAQAAiXNlY3AyNTZrMaECurEyf4a_ujKHJrWM1FGHOj2A-LfdiCNLo_69uXYIeNeDdGNwgkpAg3VkcIJKQoV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19007/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.141.38/tcp/20587/p2p/16Uiu2HAmD2pvG7dxS2xaWRY67Z2PvSzeCCiQL6dFH4jgcbr9wjS3"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-04_03-10-38__b0f56fbd-c4c5-4752-b3d2-baa9deed8d62__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.129.103
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['12105', '12106', '12107', '12108', '12109']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 12105:12105 -p 12106:12106 -p 12107:12107 -p 12108:12108 -p 12109:12109 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=12107 --rest-port=12105 --tcp-port=12106 --discv5-udp-port=12108 --rest-address=0.0.0.0 --nat=extip:172.18.129.103 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5ccbc2b24c5ef634dbad96db3ec88eec9e15e4c74f24c545f6dcfdaac505f113 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QMpiiRxa7XSkkvGHrUgHQMbJgdCxKzwwcwZVU-i-FE0ec6098TIp_G0-ozyr4K8w7nAZlDZIe0tVm0VIxA9BKq0CgmlkgnY0gmlwhKwSjSaKbXVsdGlhZGRyc5YACASsEo0mBlBrAAoErBKNJgZQbN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDBZgdEPWCpdQ03XwMkEq82sEOREFarapmcIGucO2LGSSDdGNwglBrg3VkcIJQbYV3YWt1Mgs --storenode=/ip4/172.18.141.38/tcp/20587/p2p/16Uiu2HAmD2pvG7dxS2xaWRY67Z2PvSzeCCiQL6dFH4jgcbr9wjS3 --store=false --relay=false --lightpush=true --lightpushnode=/ip4/172.18.141.38/tcp/20587/p2p/16Uiu2HAmD2pvG7dxS2xaWRY67Z2PvSzeCCiQL6dFH4jgcbr9wjS3 --pubsub-topic=/waku/2/rs/3/1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.129.103 waku bbf8ec5e5068dfd4b083e76c8dd3dd30118b9f9f67829eff3dbfe9653b685d65
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID bbf8ec5e5068. Setting up logs at ./log/docker/store_node1_2025-02-04_03-10-38__b0f56fbd-c4c5-4752-b3d2-baa9deed8d62__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 12105
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12105/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QA9Yv-w-MYsYvlrfD-BiSw41NUMDX_yJgmhkyT6EdricXUTiS7VrTebUSSEC_yAjF0EwjAbnR_hPGUpOnr_qAf2GAZTO8EpUgmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQIZ1v85sB11KzjcS5XWdwnIxuyhia83xxHVZQTyRCeKpIN0Y3CCL0qDdWRwgi9MhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/12106/p2p/16Uiu2HAkwAYKLAddkSHuktzicVGF6qpssveUoYhtHz9xz8df93Xq","/ip4/127.0.0.1/tcp/12107/ws/p2p/16Uiu2HAkwAYKLAddkSHuktzicVGF6qpssveUoYhtHz9xz8df93Xq","/ip4/172.17.0.4/tcp/12106/p2p/16Uiu2HAkwAYKLAddkSHuktzicVGF6qpssveUoYhtHz9xz8df93Xq","/ip4/172.17.0.4/tcp/12107/ws/p2p/16Uiu2HAkwAYKLAddkSHuktzicVGF6qpssveUoYhtHz9xz8df93Xq"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12105/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.141.38/tcp/20587/p2p/16Uiu2HAmD2pvG7dxS2xaWRY67Z2PvSzeCCiQL6dFH4jgcbr9wjS3", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12105/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.39.74/tcp/19008/p2p/16Uiu2HAm7zSXTWYYFo6QiHrHctEjpiUq1fX6PWDBN57Q3zWjFeeJ", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20586/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19007/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12105/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738638642789519360}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20586/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x87eb6b73cd49029fe3831531dc8845a29ca7db8c4bc75afcf66706d9280fe2b8"}]}'
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/go-waku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12105/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"48f0bcd92da1105307473bda9daf12f6ab5fb23d0467b8eb829837731b07609a","status_code":200,"status_desc":"OK","messages":[{"message_hash":"h+trc81JAp/jgxUx3IhFopyn24xLx1r89mcG2SgP4rg="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 17c25286ae93
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 869702cf25fc
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 17c25286ae93. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id bbf8ec5e5068
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:42 Attaching file ./log/docker/store_node1_2025-02-04_03-10-38__b0f56fbd-c4c5-4752-b3d2-baa9deed8d62__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:42 Attaching file ./log/docker/publishing_node1_2025-02-04_03-10-38__b0f56fbd-c4c5-4752-b3d2-baa9deed8d62__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:42 Attaching file ./log/docker/publishing_node2_2025-02-04_03-10-38__b0f56fbd-c4c5-4752-b3d2-baa9deed8d62__wakuorg_nwaku:latest.log