[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_resubscribe_to_unsubscribed_topics with id: 2025-02-04_03-04-34__582e7a2f-da2f-46e3-8ca3-2dc765694bb0
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-02-04_03-04-34__582e7a2f-da2f-46e3-8ca3-2dc765694bb0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.41.254
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['39702', '39703', '39704', '39705', '39706']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 39702:39702 -p 39703:39703 -p 39704:39704 -p 39705:39705 -p 39706:39706 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39704 --rest-port=39702 --tcp-port=39703 --discv5-udp-port=39705 --rest-address=0.0.0.0 --nat=extip:172.18.41.254 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=117f0cfcff0b7cd8d62bc4edfb1a6fe98d794c70fbc2b6dafec4fe9a543ceea6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39706 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.41.254 waku 55eb6769fe22374c8c94a6ccf75c54e771119ab3ac28c7ffd03c559c3533f1ab
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 55eb6769fe22. Setting up logs at ./log/docker/node1_2025-02-04_03-04-34__582e7a2f-da2f-46e3-8ca3-2dc765694bb0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 39702
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container a4f95b5f95e5. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39702/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39702/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.41.254/tcp/39703/p2p/16Uiu2HAm2PY2eSTGzASc4XQL5pqwcRQWrbtvnQSgPKuqxBdYmLE9","/ip4/172.18.41.254/tcp/39704/ws/p2p/16Uiu2HAm2PY2eSTGzASc4XQL5pqwcRQWrbtvnQSgPKuqxBdYmLE9"],"enrUri":"enr:-L24QEX774SM5degX1eRmAsar93Gl6a36w3rrNeOQX0HT5UQdYnWTiDcCKMfiX00pEVlEAVsnzpYUChWRXpMLA8L_YQCgmlkgnY0gmlwhKwSKf6KbXVsdGlhZGRyc5YACASsEin-BpsXAAoErBIp_gabGN0DgnJzhQADAQAAiXNlY3AyNTZrMaECZ3WoJ3syKBY-JRstpQaafIuS59xwe-FxXhKgb9Sz2vaDdGNwgpsXg3VkcIKbGYV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-02-04_03-04-34__582e7a2f-da2f-46e3-8ca3-2dc765694bb0__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.51.142
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['11865', '11866', '11867', '11868', '11869']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 11865:11865 -p 11866:11866 -p 11867:11867 -p 11868:11868 -p 11869:11869 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=11867 --rest-port=11865 --tcp-port=11866 --discv5-udp-port=11868 --rest-address=0.0.0.0 --nat=extip:172.18.51.142 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b6b1e8f749b9f4ff5d627bbfbf89472df59e20c644a2fa40c7af82100c4fedf4 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-L24QEX774SM5degX1eRmAsar93Gl6a36w3rrNeOQX0HT5UQdYnWTiDcCKMfiX00pEVlEAVsnzpYUChWRXpMLA8L_YQCgmlkgnY0gmlwhKwSKf6KbXVsdGlhZGRyc5YACASsEin-BpsXAAoErBIp_gabGN0DgnJzhQADAQAAiXNlY3AyNTZrMaECZ3WoJ3syKBY-JRstpQaafIuS59xwe-FxXhKgb9Sz2vaDdGNwgpsXg3VkcIKbGYV3YWt1MgU --filternode=/ip4/172.18.41.254/tcp/39703/p2p/16Uiu2HAm2PY2eSTGzASc4XQL5pqwcRQWrbtvnQSgPKuqxBdYmLE9 --pubsub-topic=/waku/2/rs/3/1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.51.142 waku 63b39782962ea01965e966cadea438669e8bfdca1bf75e6224563cd21a3f070d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 63b39782962e. Setting up logs at ./log/docker/node2_2025-02-04_03-04-34__582e7a2f-da2f-46e3-8ca3-2dc765694bb0__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 11865
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11865/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QI4K-1WMqsX5cIMF2bQXD3Mjm3PaqYFwIM8ZBiDG1bHNd6W-XyM8lFa2BD_QrUTgKltN-qprFQMRP7P5JhqsWROGAZTO6rXTgmlkgnY0gmlwhKwRAAOCcnOFAAMBAAGJc2VjcDI1NmsxoQIjqZXrELS0czYUz2810MSWJtJyTCKX0Y1oE7okpgj1MYN0Y3CCLlqDdWRwgi5chXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/11866/p2p/16Uiu2HAkwptEQ3EBAGTK2XeQNyJGSiqXxW7yj15Hn7QK581QpNjr","/ip4/127.0.0.1/tcp/11867/ws/p2p/16Uiu2HAkwptEQ3EBAGTK2XeQNyJGSiqXxW7yj15Hn7QK581QpNjr","/ip4/172.17.0.3/tcp/11866/p2p/16Uiu2HAkwptEQ3EBAGTK2XeQNyJGSiqXxW7yj15Hn7QK581QpNjr","/ip4/172.17.0.3/tcp/11867/ws/p2p/16Uiu2HAkwptEQ3EBAGTK2XeQNyJGSiqXxW7yj15Hn7QK581QpNjr"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11865/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.41.254/tcp/39703/p2p/16Uiu2HAm2PY2eSTGzASc4XQL5pqwcRQWrbtvnQSgPKuqxBdYmLE9", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39702/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11865/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "00b74546-501d-41d6-9fca-1ff8fbbd9e6f", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"00b74546-501d-41d6-9fca-1ff8fbbd9e6f","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39702/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11865/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1738638277071166720,"ephemeral":false}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X DELETE "http://127.0.0.1:11865/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39702/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11865/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:11865/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/%2Ftest%2F1%2Fwaku-filter%2Fproto. Response content: b'not subscribed to pubsubTopic:/waku/2/rs/3/1 contentTopic: /test/1/waku-filter/proto'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39702/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11865/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "f11f30fa-bede-4199-928d-190e7f089a03", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"f11f30fa-bede-4199-928d-190e7f089a03","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39702/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11865/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 55eb6769fe22
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 63b39782962e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:42 Attaching file ./log/docker/node2_2025-02-04_03-04-34__582e7a2f-da2f-46e3-8ca3-2dc765694bb0__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:42 Attaching file ./log/docker/node1_2025-02-04_03-04-34__582e7a2f-da2f-46e3-8ca3-2dc765694bb0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_resubscribe_to_unsubscribed_topics with id: 2025-02-04_03-04-38__35d19899-b9e6-424e-965f-13e6eb24464f
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-02-04_03-04-38__35d19899-b9e6-424e-965f-13e6eb24464f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.55.164
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['7321', '7322', '7323', '7324', '7325']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 7321:7321 -p 7322:7322 -p 7323:7323 -p 7324:7324 -p 7325:7325 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7323 --rest-port=7321 --tcp-port=7322 --discv5-udp-port=7324 --rest-address=0.0.0.0 --nat=extip:172.18.55.164 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dda7cab1f165adcacdccc98159fe4c0237f42e417a5ff75eb61b01cb10f56ba5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7325 --metrics-logging=true --relay=true --filter=true
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 55eb6769fe22. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.55.164 waku 1caca014b3c39b94be7efc70fa14581c59934064c0b8d2124db535b8edbaec25
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 1caca014b3c3. Setting up logs at ./log/docker/node1_2025-02-04_03-04-38__35d19899-b9e6-424e-965f-13e6eb24464f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 7321
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 63b39782962e. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7321/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7321/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.55.164/tcp/7322/p2p/16Uiu2HAmLgyJkCA2FcYZSyWnxrK3NN1tn3qciYZNUQVp2FAY99Ep","/ip4/172.18.55.164/tcp/7323/ws/p2p/16Uiu2HAmLgyJkCA2FcYZSyWnxrK3NN1tn3qciYZNUQVp2FAY99Ep"],"enrUri":"enr:-L24QHNyv3GcC9Fd30DCli731xIvfgdPPASjmq5gd9d6iRETc-XJusQf6saZT9A-6r11KABxV-7mf6h3grClLSEXj1YCgmlkgnY0gmlwhKwSN6SKbXVsdGlhZGRyc5YACASsEjekBhyaAAoErBI3pAYcm90DgnJzhQADAQAAiXNlY3AyNTZrMaEDd196CokxnS9QZSpNWlBPqeu3EzAMGhiNP5WlLAGGQhGDdGNwghyag3VkcIIcnIV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-02-04_03-04-38__35d19899-b9e6-424e-965f-13e6eb24464f__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.169.124
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['36073', '36074', '36075', '36076', '36077']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 36073:36073 -p 36074:36074 -p 36075:36075 -p 36076:36076 -p 36077:36077 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=36075 --rest-port=36073 --tcp-port=36074 --discv5-udp-port=36076 --rest-address=0.0.0.0 --nat=extip:172.18.169.124 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=db7fe2abec7eb16cb89ff2aefcde9c04cb0f1b05fececc45b56e54aba4ca82aa --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-L24QHNyv3GcC9Fd30DCli731xIvfgdPPASjmq5gd9d6iRETc-XJusQf6saZT9A-6r11KABxV-7mf6h3grClLSEXj1YCgmlkgnY0gmlwhKwSN6SKbXVsdGlhZGRyc5YACASsEjekBhyaAAoErBI3pAYcm90DgnJzhQADAQAAiXNlY3AyNTZrMaEDd196CokxnS9QZSpNWlBPqeu3EzAMGhiNP5WlLAGGQhGDdGNwghyag3VkcIIcnIV3YWt1MgU --filternode=/ip4/172.18.55.164/tcp/7322/p2p/16Uiu2HAmLgyJkCA2FcYZSyWnxrK3NN1tn3qciYZNUQVp2FAY99Ep --pubsub-topic=/waku/2/rs/3/1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.169.124 waku e9aeb7fa008363bd73a3148feeafcfd4141186391a543f25939f1630fad4d4c7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID e9aeb7fa0083. Setting up logs at ./log/docker/node2_2025-02-04_03-04-38__35d19899-b9e6-424e-965f-13e6eb24464f__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 36073
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36073/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QNla8ijtXGpj98kG_mllLxT9rPX4FYkxgAekMDM-90KwG8QX2MUJlpIAaWPOzB_wU_9PEd1KbN-gUlGnhBdvHy2GAZTO6sW9gmlkgnY0gmlwhKwRAAOCcnOFAAMBAAGJc2VjcDI1NmsxoQN-jSTmfwqiK1feU2fsOiGtjmhO7DUNhjCd6ztOvz0KL4N0Y3CCjOqDdWRwgozshXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/36074/p2p/16Uiu2HAmMAzYoZcAKJBkaNi2TUa18nDb9yg4Lhr5CkakTWDpZUjp","/ip4/127.0.0.1/tcp/36075/ws/p2p/16Uiu2HAmMAzYoZcAKJBkaNi2TUa18nDb9yg4Lhr5CkakTWDpZUjp","/ip4/172.17.0.3/tcp/36074/p2p/16Uiu2HAmMAzYoZcAKJBkaNi2TUa18nDb9yg4Lhr5CkakTWDpZUjp","/ip4/172.17.0.3/tcp/36075/ws/p2p/16Uiu2HAmMAzYoZcAKJBkaNi2TUa18nDb9yg4Lhr5CkakTWDpZUjp"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36073/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.55.164/tcp/7322/p2p/16Uiu2HAmLgyJkCA2FcYZSyWnxrK3NN1tn3qciYZNUQVp2FAY99Ep", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7321/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36073/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "9e71af1d-d514-48d0-804c-35b9973c55bb", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"9e71af1d-d514-48d0-804c-35b9973c55bb","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7321/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36073/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1738638281155951616,"ephemeral":false}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X DELETE "http://127.0.0.1:36073/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7321/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36073/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:36073/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/%2Ftest%2F1%2Fwaku-filter%2Fproto. Response content: b'not subscribed to pubsubTopic:/waku/2/rs/3/1 contentTopic: /test/1/waku-filter/proto'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7321/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36073/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "aee0ba5a-2682-4a9f-b580-b7901c54af49", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"aee0ba5a-2682-4a9f-b580-b7901c54af49","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7321/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36073/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 1caca014b3c3
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id e9aeb7fa0083
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:42 Attaching file ./log/docker/node1_2025-02-04_03-04-38__35d19899-b9e6-424e-965f-13e6eb24464f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:42 Attaching file ./log/docker/node2_2025-02-04_03-04-38__35d19899-b9e6-424e-965f-13e6eb24464f__wakuorg_go-waku:latest.log