[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_relay_receiving_node_not_connected_directly_to_relaying_node with id: 2024-12-15_03-18-50__55ba5a58-c023-4640-817f-bc500d961425
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-15_03-18-50__55ba5a58-c023-4640-817f-bc500d961425__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-15_03-18-50__55ba5a58-c023-4640-817f-bc500d961425__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-12-15_03-18-50__55ba5a58-c023-4640-817f-bc500d961425__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.248.32
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['37561', '37562', '37563', '37564', '37565']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 37561:37561 -p 37562:37562 -p 37563:37563 -p 37564:37564 -p 37565:37565 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=37563 --rest-port=37561 --tcp-port=37562 --discv5-udp-port=37564 --rest-address=0.0.0.0 --nat=extip:172.18.248.32 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=01962effaa7a758725cefdcaa9befe3628c915cbc8c6cdafa4abb38bf87f3fb1 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container b0bea7b21e51. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.248.32 waku 34c91479d785c46f4d9b8773ff8d9289c5ae63182acdbe0725d3cf6993f32fd1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 34c91479d785. Setting up logs at ./log/docker/node1_2024-12-15_03-18-50__55ba5a58-c023-4640-817f-bc500d961425__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 37561
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 03a9ed2e3c43. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37561/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QPtRTbUdzLsK5aHkkgzqtQYPPqQUFcLF1mXyxV1JS8j1KzV0iEqZ5Y5rpVzTfnMwWV-ZwrkGQqqphbUdycwCFzuGAZPIU2smgmlkgnY0gmlwhKwRAAqCcnODAAMAiXNlY3AyNTZrMaEC4zQpMRQ17B6hy7h3QIx6yAVN25PWO2ykMYUzW7MwseKDdGNwgpK6g3VkcIKSvIV3YWt1MgE","listenAddresses":["/ip4/127.0.0.1/tcp/37562/p2p/16Uiu2HAmAiafAL1UTig7d6EcVqBNSzEGqEBuDtngfrpHNRowJ6Do","/ip4/127.0.0.1/tcp/37563/ws/p2p/16Uiu2HAmAiafAL1UTig7d6EcVqBNSzEGqEBuDtngfrpHNRowJ6Do","/ip4/172.17.0.10/tcp/37562/p2p/16Uiu2HAmAiafAL1UTig7d6EcVqBNSzEGqEBuDtngfrpHNRowJ6Do","/ip4/172.17.0.10/tcp/37563/ws/p2p/16Uiu2HAmAiafAL1UTig7d6EcVqBNSzEGqEBuDtngfrpHNRowJ6Do"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.159.182
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['65321', '65322', '65323', '65324', '65325']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 65321:65321 -p 65322:65322 -p 65323:65323 -p 65324:65324 -p 65325:65325 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=65323 --rest-port=65321 --tcp-port=65322 --discv5-udp-port=65324 --rest-address=0.0.0.0 --nat=extip:172.18.159.182 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=69e8c85a0cd0a98a1f0dcc8b3c703eef7d4baedaf6cbc84bdeffa9d49a4b9b08 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=65325 --metrics-logging=true --relay=true --discv5-bootstrap-node=enr:-J-4QPtRTbUdzLsK5aHkkgzqtQYPPqQUFcLF1mXyxV1JS8j1KzV0iEqZ5Y5rpVzTfnMwWV-ZwrkGQqqphbUdycwCFzuGAZPIU2smgmlkgnY0gmlwhKwRAAqCcnODAAMAiXNlY3AyNTZrMaEC4zQpMRQ17B6hy7h3QIx6yAVN25PWO2ykMYUzW7MwseKDdGNwgpK6g3VkcIKSvIV3YWt1MgE
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.159.182 waku 03d9e9b23f38ea05b06a6ab31ddb5c18784ba9803b33f3e5d4da75014950a9ee
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 03d9e9b23f38. Setting up logs at ./log/docker/node2_2024-12-15_03-18-50__55ba5a58-c023-4640-817f-bc500d961425__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 65321
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:65321/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:65321/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.159.182/tcp/65322/p2p/16Uiu2HAmLWYMzgH2kNGenkg3HJ7g3o2d9hd3bVzprRDqotj5CiqR","/ip4/172.18.159.182/tcp/65323/ws/p2p/16Uiu2HAmLWYMzgH2kNGenkg3HJ7g3o2d9hd3bVzprRDqotj5CiqR"],"enrUri":"enr:-L24QL6BHmS4cQ6N_Y8vp9udTUHkvcCTevqWASR7PL6C3niAHDeiZlNK15UDBIOQfevJu9RUdCjJyxtnb1yB2zJI7GgCgmlkgnY0gmlwhKwSn7aKbXVsdGlhZGRyc5YACASsEp-2Bv8qAAoErBKftgb_K90DgnJzhQADAQAAiXNlY3AyNTZrMaEDdLN24qLaLbGVsSv3Js3HeyeUH_9cwcsq1pMsUj7dJ7SDdGNwgv8qg3VkcIL_LIV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.80.174
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['7555', '7556', '7557', '7558', '7559']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 7555:7555 -p 7556:7556 -p 7557:7557 -p 7558:7558 -p 7559:7559 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=7557 --rest-port=7555 --tcp-port=7556 --discv5-udp-port=7558 --rest-address=0.0.0.0 --nat=extip:172.18.80.174 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=12ed1d03fa0e5ea5ff0afdfeb701ac6b4a3acbbcdcb2e3ac05537dcafb2d4f5f --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --discv5-bootstrap-node=enr:-L24QL6BHmS4cQ6N_Y8vp9udTUHkvcCTevqWASR7PL6C3niAHDeiZlNK15UDBIOQfevJu9RUdCjJyxtnb1yB2zJI7GgCgmlkgnY0gmlwhKwSn7aKbXVsdGlhZGRyc5YACASsEp-2Bv8qAAoErBKftgb_K90DgnJzhQADAQAAiXNlY3AyNTZrMaEDdLN24qLaLbGVsSv3Js3HeyeUH_9cwcsq1pMsUj7dJ7SDdGNwgv8qg3VkcIL_LIV3YWt1MgE
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.80.174 waku 16cd1eb888241d3352e4c6e333c21904c9c06c2e7b3db96181b18977d5415271
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 16cd1eb88824. Setting up logs at ./log/docker/node3_2024-12-15_03-18-50__55ba5a58-c023-4640-817f-bc500d961425__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 7555
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7555/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QCjWX3-_IQP1T6xIKOBfDSAxVPOklcaV47ZHiDqndN1YYxi7ckN5Zn1BehKkZ6Kknc2Bgl_IcJqJg4kjrcpSQB-GAZPIU3YdgmlkgnY0gmlwhKwRAA2CcnODAAMAiXNlY3AyNTZrMaECpQXF0B0EeRp_nCoTAQvVT8RpDPXXIFpZFp7BXol8o6uDdGNwgh2Eg3VkcIIdhoV3YWt1MgE","listenAddresses":["/ip4/127.0.0.1/tcp/7556/p2p/16Uiu2HAm6XrMaJMMNSrokKVZWDKigbS6dY9ZZR4d58fTGscmyELi","/ip4/127.0.0.1/tcp/7557/ws/p2p/16Uiu2HAm6XrMaJMMNSrokKVZWDKigbS6dY9ZZR4d58fTGscmyELi","/ip4/172.17.0.13/tcp/7556/p2p/16Uiu2HAm6XrMaJMMNSrokKVZWDKigbS6dY9ZZR4d58fTGscmyELi","/ip4/172.17.0.13/tcp/7557/ws/p2p/16Uiu2HAm6XrMaJMMNSrokKVZWDKigbS6dY9ZZR4d58fTGscmyELi"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37561/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:65321/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7555/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37561/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAmLWYMzgH2kNGenkg3HJ7g3o2d9hd3bVzprRDqotj5CiqR","multiaddrs":["/ip4/172.18.159.182/tcp/65322/p2p/16Uiu2HAmLWYMzgH2kNGenkg3HJ7g3o2d9hd3bVzprRDqotj5CiqR","/ip4/172.18.159.182/tcp/65323/ws/p2p/16Uiu2HAmLWYMzgH2kNGenkg3HJ7g3o2d9hd3bVzprRDqotj5CiqR"],"protocols":null,"connected":false,"pubsubTopics":[]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:65321/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.13/tcp/7556/p2p/16Uiu2HAm6XrMaJMMNSrokKVZWDKigbS6dY9ZZR4d58fTGscmyELi","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7555/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAmLWYMzgH2kNGenkg3HJ7g3o2d9hd3bVzprRDqotj5CiqR","multiaddrs":["/ip4/172.18.159.182/tcp/65322/p2p/16Uiu2HAmLWYMzgH2kNGenkg3HJ7g3o2d9hd3bVzprRDqotj5CiqR","/ip4/172.18.159.182/tcp/65323/ws/p2p/16Uiu2HAmLWYMzgH2kNGenkg3HJ7g3o2d9hd3bVzprRDqotj5CiqR"],"protocols":["/vac/waku/filter-push/2.0.0-beta1","/vac/waku/relay/2.0.0"],"connected":true,"pubsubTopics":["/waku/2/rs/3/0"]}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37561/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.relay:relay.py:123 Checking that peer NODE_1:wakuorg/go-waku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7555/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","timestamp":1734232764261727488,"ephemeral":null}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 34c91479d785
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 03d9e9b23f38
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 34c91479d785. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 16cd1eb88824
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.