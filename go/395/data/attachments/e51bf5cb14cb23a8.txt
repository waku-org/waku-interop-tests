[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_lightpush with id: 2024-12-15_03-18-48__85a21cc1-5d8e-4627-bbef-579121966602
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-15_03-18-48__85a21cc1-5d8e-4627-bbef-579121966602__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.81.99
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['6574', '6575', '6576', '6577', '6578']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 6574:6574 -p 6575:6575 -p 6576:6576 -p 6577:6577 -p 6578:6578 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6576 --rest-port=6574 --tcp-port=6575 --discv5-udp-port=6577 --rest-address=0.0.0.0 --nat=extip:172.18.81.99 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=55586838bccecf011dacdf3b225fddef285c8fb6daf5724e4ff0e1da9fbda3ae --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6578 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.81.99 waku c8308e9587f753121018ecc8cad7a4fcefab3972254dccbcf701a150a643e6af
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container cc609aaaf8a0. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID c8308e9587f7. Setting up logs at ./log/docker/node1_2024-12-15_03-18-48__85a21cc1-5d8e-4627-bbef-579121966602__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 6574
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 49415a53999c. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6574/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6574/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.81.99/tcp/6575/p2p/16Uiu2HAkuo9ABeqJvaa8nDb1kPU8qrrnxSfPWZYGNqLJD9mnVuWQ","/ip4/172.18.81.99/tcp/6576/ws/p2p/16Uiu2HAkuo9ABeqJvaa8nDb1kPU8qrrnxSfPWZYGNqLJD9mnVuWQ"],"enrUri":"enr:-L24QNP4Zw3aP5YXQtThcaJm7wMEmClY_73hiCwXABWIJZejeyKwG5QgdkG6BIOnmeJf0UysS09xkVn8qQgb11XXUlsCgmlkgnY0gmlwhKwSUWOKbXVsdGlhZGRyc5YACASsElFjBhmvAAoErBJRYwYZsN0DgnJzhQADAQAAiXNlY3AyNTZrMaECBX_ttgLGeHMiHItHjjbvDuoIRd5xvdcqfjMhFvjEeKmDdGNwghmvg3VkcIIZsYV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-15_03-18-48__85a21cc1-5d8e-4627-bbef-579121966602__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.29.180
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['45614', '45615', '45616', '45617', '45618']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 45614:45614 -p 45615:45615 -p 45616:45616 -p 45617:45617 -p 45618:45618 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45616 --rest-port=45614 --tcp-port=45615 --discv5-udp-port=45617 --rest-address=0.0.0.0 --nat=extip:172.18.29.180 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=144d00c1679ee5baa2ddcbaccf10c6dab99fa81929ddfd4e0bedea70fbd4b2b9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45618 --metrics-logging=true --lightpush=false --relay=true --discv5-bootstrap-node=enr:-L24QNP4Zw3aP5YXQtThcaJm7wMEmClY_73hiCwXABWIJZejeyKwG5QgdkG6BIOnmeJf0UysS09xkVn8qQgb11XXUlsCgmlkgnY0gmlwhKwSUWOKbXVsdGlhZGRyc5YACASsElFjBhmvAAoErBJRYwYZsN0DgnJzhQADAQAAiXNlY3AyNTZrMaECBX_ttgLGeHMiHItHjjbvDuoIRd5xvdcqfjMhFvjEeKmDdGNwghmvg3VkcIIZsYV3YWt1Mgk
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.29.180 waku 7381d6a036d4f54e284f1962892cf6b3387393cf25a14cc16f9dbea6b142ea1b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 7381d6a036d4. Setting up logs at ./log/docker/node1_2024-12-15_03-18-48__85a21cc1-5d8e-4627-bbef-579121966602__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 45614
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45614/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45614/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.29.180/tcp/45615/p2p/16Uiu2HAmLnUhMug6Ksp19JuU57nemQ5UMqsbjqh5LcFac1DpUeGw","/ip4/172.18.29.180/tcp/45616/ws/p2p/16Uiu2HAmLnUhMug6Ksp19JuU57nemQ5UMqsbjqh5LcFac1DpUeGw"],"enrUri":"enr:-L24QAqASMXPwoB5EgvpIRx2Q9z_QaRl07_maNTIHEmKNOD8LakfnX7IlfjysC-nkVM6dEyUqdEGEGSLShx5-CR5jVUCgmlkgnY0gmlwhKwSHbSKbXVsdGlhZGRyc5YACASsEh20BrIvAAoErBIdtAayMN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDeMicsFNcP0sfjVBEa-QTkiiNvphJMPufk4cZ6YLs9fiDdGNwgrIvg3VkcIKyMYV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-15_03-18-48__85a21cc1-5d8e-4627-bbef-579121966602__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.9.117
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['52809', '52810', '52811', '52812', '52813']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 52809:52809 -p 52810:52810 -p 52811:52811 -p 52812:52812 -p 52813:52813 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=52811 --rest-port=52809 --tcp-port=52810 --discv5-udp-port=52812 --rest-address=0.0.0.0 --nat=extip:172.18.9.117 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e02e6fbb0a5aa5ede4a86a2dc73d7aba68af8fb3ecdde1cb023fad7dcac42d39 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --lightpush=true --relay=false --discv5-bootstrap-node=enr:-L24QNP4Zw3aP5YXQtThcaJm7wMEmClY_73hiCwXABWIJZejeyKwG5QgdkG6BIOnmeJf0UysS09xkVn8qQgb11XXUlsCgmlkgnY0gmlwhKwSUWOKbXVsdGlhZGRyc5YACASsElFjBhmvAAoErBJRYwYZsN0DgnJzhQADAQAAiXNlY3AyNTZrMaECBX_ttgLGeHMiHItHjjbvDuoIRd5xvdcqfjMhFvjEeKmDdGNwghmvg3VkcIIZsYV3YWt1Mgk --lightpushnode=/ip4/172.18.81.99/tcp/6575/p2p/16Uiu2HAkuo9ABeqJvaa8nDb1kPU8qrrnxSfPWZYGNqLJD9mnVuWQ --pubsub-topic=/waku/2/rs/3/1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.9.117 waku 42331ae19070905d8500418b526f496deb0d1bf07ed23d6f81d28820b492649f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 42331ae19070. Setting up logs at ./log/docker/node1_2024-12-15_03-18-48__85a21cc1-5d8e-4627-bbef-579121966602__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 52809
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52809/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QMUUc5YzAioouRsZbHGFxG_OzJ2dOdaDVH6ADSakDmpVD7xwD_rZFUCsfyQq2Ql67HRzGG0JSDdxO860i64ZGN-GAZPIU210gmlkgnY0gmlwhKwRAAuCcnOFAAMBAAGJc2VjcDI1NmsxoQJ1xd6YxO_-RXBQyDm9il0xhTpkfcyNOQdYR8ChDDuEmIN0Y3CCzkqDdWRwgs5MhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/52810/p2p/16Uiu2HAm3MQgFBDVyia6UVCMEMhjUSz5qLsqn7jPHoW2gP6AAS5M","/ip4/127.0.0.1/tcp/52811/ws/p2p/16Uiu2HAm3MQgFBDVyia6UVCMEMhjUSz5qLsqn7jPHoW2gP6AAS5M","/ip4/172.17.0.11/tcp/52810/p2p/16Uiu2HAm3MQgFBDVyia6UVCMEMhjUSz5qLsqn7jPHoW2gP6AAS5M","/ip4/172.17.0.11/tcp/52811/ws/p2p/16Uiu2HAm3MQgFBDVyia6UVCMEMhjUSz5qLsqn7jPHoW2gP6AAS5M"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6574/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45614/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52809/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": 1734232732015912448}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6574/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1734232732015912448,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45614/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1734232732015912448,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id c8308e9587f7
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 7381d6a036d4
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container c8308e9587f7. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 42331ae19070
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.