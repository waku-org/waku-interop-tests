[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_get_peers_after_node1_was_restarted with id: 2024-10-02_03-22-33__f9864b3a-ecfc-468b-a0cb-503324cb6a4f
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-02_03-22-33__f9864b3a-ecfc-468b-a0cb-503324cb6a4f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.104.160
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['24885', '24886', '24887', '24888', '24889']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 24885:24885 -p 24886:24886 -p 24887:24887 -p 24888:24888 -p 24889:24889 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=24887 --rest-port=24885 --tcp-port=24886 --discv5-udp-port=24888 --rest-address=0.0.0.0 --nat=extip:172.18.104.160 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ed4b962e95a3ef6cdafeb7eeebfba65ad057cfcbeb99b2a48b9ac8e2e7e924ab --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=24889 --metrics-logging=true --relay=true --relay-peer-exchange=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.104.160 waku a668dacc51cf30816dd23e601dd266277e79b911bca037938dae9d4ce96b740b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID a668dacc51cf. Setting up logs at ./log/docker/node1_2024-10-02_03-22-33__f9864b3a-ecfc-468b-a0cb-503324cb6a4f__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 24885
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24885/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24885/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.104.160/tcp/24886/p2p/16Uiu2HAmD5qUEAoLn9JwmstRaLgke2pZG3rkhosZo1QSpfP3e2JR","/ip4/172.18.104.160/tcp/24887/ws/p2p/16Uiu2HAmD5qUEAoLn9JwmstRaLgke2pZG3rkhosZo1QSpfP3e2JR"],"enrUri":"enr:-LO4QGFj7jDS2J0eXAqqyN3ZGiQTtDSieXRkvcRAr_trdS-UOzEP7ErpU16phgw_snIkDDx0n2Zp4zzJceOBQU7KossBgmlkgnY0gmlwhKwSaKCKbXVsdGlhZGRyc4wACgSsEmigBmE33QOCcnOFAAMBAACJc2VjcDI1NmsxoQMGXXqpj8zWZ25jMATSKoL4oOUoi_iCCVpCpWunTtDIvoN0Y3CCYTaDdWRwgmE4hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-10-02_03-22-33__f9864b3a-ecfc-468b-a0cb-503324cb6a4f__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.64.111
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['20511', '20512', '20513', '20514', '20515']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 20511:20511 -p 20512:20512 -p 20513:20513 -p 20514:20514 -p 20515:20515 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=20513 --rest-port=20511 --tcp-port=20512 --discv5-udp-port=20514 --rest-address=0.0.0.0 --nat=extip:172.18.64.111 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c84cc7b0dcde0e18eabb1bc40abfd6fb445dd1cfab26bdee7dde9c38d8695bf1 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --discv5-bootstrap-node=enr:-LO4QGFj7jDS2J0eXAqqyN3ZGiQTtDSieXRkvcRAr_trdS-UOzEP7ErpU16phgw_snIkDDx0n2Zp4zzJceOBQU7KossBgmlkgnY0gmlwhKwSaKCKbXVsdGlhZGRyc4wACgSsEmigBmE33QOCcnOFAAMBAACJc2VjcDI1NmsxoQMGXXqpj8zWZ25jMATSKoL4oOUoi_iCCVpCpWunTtDIvoN0Y3CCYTaDdWRwgmE4hXdha3UyAQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.64.111 waku a399426448f3bc5a80bc725e29fcaefcbe6775ab049c91887112f362694f20ef
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID a399426448f3. Setting up logs at ./log/docker/node2_2024-10-02_03-22-33__f9864b3a-ecfc-468b-a0cb-503324cb6a4f__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 20511
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20511/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QABlO4k-ipo8jK5h2UJ_nNFFsm-kI6uSl7SKzmocDpDXeKdcBgugQA5dpD_wyInPbcD-x4mRRwoQgYmNExLgu6qGAZJLQEH8gmlkgnY0gmlwhKwRABKJc2VjcDI1NmsxoQI0v9oeggj43yJ4S3Oe2dMSbUsCvMPJC5KC-1N3_LxwpIN0Y3CCUCCDdWRwglAihXdha3UyAQ","listenAddresses":["/ip4/127.0.0.1/tcp/20512/p2p/16Uiu2HAkxyarZ7fW7maSvh2ogehAqxPrRSQKPxZiSFSSFNEoGEAo","/ip4/127.0.0.1/tcp/20513/ws/p2p/16Uiu2HAkxyarZ7fW7maSvh2ogehAqxPrRSQKPxZiSFSSFNEoGEAo","/ip4/172.17.0.18/tcp/20512/p2p/16Uiu2HAkxyarZ7fW7maSvh2ogehAqxPrRSQKPxZiSFSSFNEoGEAo","/ip4/172.17.0.18/tcp/20513/ws/p2p/16Uiu2HAkxyarZ7fW7maSvh2ogehAqxPrRSQKPxZiSFSSFNEoGEAo"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20511/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.104.160/tcp/24886/p2p/16Uiu2HAmD5qUEAoLn9JwmstRaLgke2pZG3rkhosZo1QSpfP3e2JR", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:24885/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0", "/waku/2/rs/3/1", "/waku/2/rs/3/9", "/waku/2/rs/3/25", "/waku/2/rs/3/1000"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20511/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0", "/waku/2/rs/3/1", "/waku/2/rs/3/9", "/waku/2/rs/3/25", "/waku/2/rs/3/1000"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:24885/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.18/tcp/20512/p2p/16Uiu2HAkxyarZ7fW7maSvh2ogehAqxPrRSQKPxZiSFSSFNEoGEAo","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[35mDEBUG   [0m src.node.waku_node:waku_node.py:244 Restarting container with id a668dacc51cf
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-10-02_03-22-33__f9864b3a-ecfc-468b-a0cb-503324cb6a4f__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.74.219
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['61471', '61472', '61473', '61474', '61475']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 61471:61471 -p 61472:61472 -p 61473:61473 -p 61474:61474 -p 61475:61475 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=61473 --rest-port=61471 --tcp-port=61472 --discv5-udp-port=61474 --rest-address=0.0.0.0 --nat=extip:172.18.74.219 --peer-exchange=true --discv5-discovery=false --cluster-id=3 --nodekey=50ea56f4fb6b5ac7b9ebeeca6517e5ab65ecbdf60d443916d4fa237f3b21bcde --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --peer-exchange-node=/ip4/172.17.0.18/tcp/20512/p2p/16Uiu2HAkxyarZ7fW7maSvh2ogehAqxPrRSQKPxZiSFSSFNEoGEAo
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.74.219 waku ae54ffcd6ebdc9d6ecb6abd35362935a519090041bfb7ecdd06159d2caa4d0ec
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID ae54ffcd6ebd. Setting up logs at ./log/docker/node3_2024-10-02_03-22-33__f9864b3a-ecfc-468b-a0cb-503324cb6a4f__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 61471
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61471/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-JG4QO8xaqslGCsmeisxsF34dDckvXludTRV9ZUx5P6RINGuRQeaQVT5ypSYueMXORW5OFZnhMCk72-jw_b57QWYGAeGAZJLQFVSgmlkgnY0gmlwhKwRAAKJc2VjcDI1NmsxoQNL7Jl2KyffNh_VSUug94sxOfeo-1LmMNKC3RSulT7rC4N0Y3CC8CCFd2FrdTKA","listenAddresses":["/ip4/127.0.0.1/tcp/61472/p2p/16Uiu2HAmHmNBG7EkFBFZkgLnsDbbvE7yFevEux5qe3UEHMYiQ5Xg","/ip4/127.0.0.1/tcp/61473/ws/p2p/16Uiu2HAmHmNBG7EkFBFZkgLnsDbbvE7yFevEux5qe3UEHMYiQ5Xg","/ip4/172.17.0.2/tcp/61472/p2p/16Uiu2HAmHmNBG7EkFBFZkgLnsDbbvE7yFevEux5qe3UEHMYiQ5Xg","/ip4/172.17.0.2/tcp/61473/ws/p2p/16Uiu2HAmHmNBG7EkFBFZkgLnsDbbvE7yFevEux5qe3UEHMYiQ5Xg"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61471/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.104.160/tcp/24886/p2p/16Uiu2HAmD5qUEAoLn9JwmstRaLgke2pZG3rkhosZo1QSpfP3e2JR", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61471/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAkxyarZ7fW7maSvh2ogehAqxPrRSQKPxZiSFSSFNEoGEAo","multiaddrs":["/ip4/172.17.0.18/tcp/20513/ws/p2p/16Uiu2HAkxyarZ7fW7maSvh2ogehAqxPrRSQKPxZiSFSSFNEoGEAo","/ip4/172.17.0.18/tcp/20512/p2p/16Uiu2HAkxyarZ7fW7maSvh2ogehAqxPrRSQKPxZiSFSSFNEoGEAo"],"protocols":["/vac/waku/filter-push/2.0.0-beta1","/vac/waku/relay/2.0.0"],"connected":true,"pubsubTopics":["/waku/2/default-waku/proto"]},{"id":"16Uiu2HAmD5qUEAoLn9JwmstRaLgke2pZG3rkhosZo1QSpfP3e2JR","multiaddrs":["/ip4/172.18.104.160/tcp/24886/p2p/16Uiu2HAmD5qUEAoLn9JwmstRaLgke2pZG3rkhosZo1QSpfP3e2JR","/ip4/172.18.104.160/tcp/24887/ws/p2p/16Uiu2HAmD5qUEAoLn9JwmstRaLgke2pZG3rkhosZo1QSpfP3e2JR"],"protocols":["/vac/waku/relay/2.0.0"],"connected":true,"pubsubTopics":["/waku/2/rs/3/4","/waku/2/rs/3/5","/waku/2/rs/3/6","/waku/2/rs/3/8","/waku/2/rs/3/0","/waku/2/rs/3/3","/waku/2/rs/3/7","/waku/2/rs/3/1","/waku/2/rs/3/2"]}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id a668dacc51cf
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id a399426448f3
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id ae54ffcd6ebd
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.