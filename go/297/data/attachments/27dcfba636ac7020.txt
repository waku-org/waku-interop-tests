[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_node_not_connected_directly_to_relaying_node with id: 2024-10-02_03-15-54__df039850-2873-418c-9f3a-5c9fa6e7c33b
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-02_03-15-54__df039850-2873-418c-9f3a-5c9fa6e7c33b__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-10-02_03-15-54__df039850-2873-418c-9f3a-5c9fa6e7c33b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-10-02_03-15-54__df039850-2873-418c-9f3a-5c9fa6e7c33b__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.240.27
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['9968', '9969', '9970', '9971', '9972']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 9968:9968 -p 9969:9969 -p 9970:9970 -p 9971:9971 -p 9972:9972 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=9970 --rest-port=9968 --tcp-port=9969 --discv5-udp-port=9971 --rest-address=0.0.0.0 --nat=extip:172.18.240.27 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d382da7bcedb37ebe4d7be51422352af7a69547bcadf4f0b503867aec7c08574 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.240.27 waku efdf10f68c03b16468424af9935b421f0a981f2b644ece1ffb30a59f43b10983
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID efdf10f68c03. Setting up logs at ./log/docker/node1_2024-10-02_03-15-54__df039850-2873-418c-9f3a-5c9fa6e7c33b__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 9968
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9968/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QOpgRh5VrRn2cSIWf702HZviNpb9Ar56LfDQzkw35vejPTQBYQio8MyqKsK8tmUWX8l2J98oBzNECmoH-eKCe-2GAZJLOjGVgmlkgnY0gmlwhKwRAAWJc2VjcDI1NmsxoQPVWIT4vFDc9nKyfFLvRg4rTMeIlhYoJEmK8AlDXSgzYoN0Y3CCJvGDdWRwgibzhXdha3UyAQ","listenAddresses":["/ip4/127.0.0.1/tcp/9969/p2p/16Uiu2HAmT1oUdooZ9zVFL29ce1SCGEo4FJCKGYBVbWvECq1vvqsw","/ip4/127.0.0.1/tcp/9970/ws/p2p/16Uiu2HAmT1oUdooZ9zVFL29ce1SCGEo4FJCKGYBVbWvECq1vvqsw","/ip4/172.17.0.5/tcp/9969/p2p/16Uiu2HAmT1oUdooZ9zVFL29ce1SCGEo4FJCKGYBVbWvECq1vvqsw","/ip4/172.17.0.5/tcp/9970/ws/p2p/16Uiu2HAmT1oUdooZ9zVFL29ce1SCGEo4FJCKGYBVbWvECq1vvqsw"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.51.132
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['5816', '5817', '5818', '5819', '5820']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 5816:5816 -p 5817:5817 -p 5818:5818 -p 5819:5819 -p 5820:5820 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=5818 --rest-port=5816 --tcp-port=5817 --discv5-udp-port=5819 --rest-address=0.0.0.0 --nat=extip:172.18.51.132 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a183c56adc086b8f5d3a3d6fcee62a5ccaaffe22e0854d1dfa7bb00d25f3d9e5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=5820 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-Ji4QOpgRh5VrRn2cSIWf702HZviNpb9Ar56LfDQzkw35vejPTQBYQio8MyqKsK8tmUWX8l2J98oBzNECmoH-eKCe-2GAZJLOjGVgmlkgnY0gmlwhKwRAAWJc2VjcDI1NmsxoQPVWIT4vFDc9nKyfFLvRg4rTMeIlhYoJEmK8AlDXSgzYoN0Y3CCJvGDdWRwgibzhXdha3UyAQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.51.132 waku 0cdff0f39eeca211ab31fb7118667fe89801f9b7237cffd6b6945ce1167236ad
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 0cdff0f39eec. Setting up logs at ./log/docker/node2_2024-10-02_03-15-54__df039850-2873-418c-9f3a-5c9fa6e7c33b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 5816
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5816/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5816/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.51.132/tcp/5817/p2p/16Uiu2HAm8WEA7o9RQxKdiJCRFngeHipKLy6pU7wJaLUgEm1RrdRA","/ip4/172.18.51.132/tcp/5818/ws/p2p/16Uiu2HAm8WEA7o9RQxKdiJCRFngeHipKLy6pU7wJaLUgEm1RrdRA"],"enrUri":"enr:-LO4QGOGIfI2eEceNlhDLLUzimL8MvI0NxUG5A3uXR7R6LktQUclscb-FBPIlB0afags2M5vNgRz3tekC4BWIPeIIrQBgmlkgnY0gmlwhKwSM4SKbXVsdGlhZGRyc4wACgSsEjOEBha63QOCcnOFAAMBAACJc2VjcDI1NmsxoQLCUqMW7H8owD3pzybit15rMfEEjzleIrOFQROgEc2-MYN0Y3CCFrmDdWRwgha7hXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.112.131
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['34126', '34127', '34128', '34129', '34130']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 34126:34126 -p 34127:34127 -p 34128:34128 -p 34129:34129 -p 34130:34130 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=34128 --rest-port=34126 --tcp-port=34127 --discv5-udp-port=34129 --rest-address=0.0.0.0 --nat=extip:172.18.112.131 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=98fdddc0e1f6517a983c323cc9b50c4c2fa112cabdc6aa8b0ffdcbdca3fd777c --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --storenode=/ip4/172.18.51.132/tcp/5817/p2p/16Uiu2HAm8WEA7o9RQxKdiJCRFngeHipKLy6pU7wJaLUgEm1RrdRA --discv5-bootstrap-node=enr:-LO4QGOGIfI2eEceNlhDLLUzimL8MvI0NxUG5A3uXR7R6LktQUclscb-FBPIlB0afags2M5vNgRz3tekC4BWIPeIIrQBgmlkgnY0gmlwhKwSM4SKbXVsdGlhZGRyc4wACgSsEjOEBha63QOCcnOFAAMBAACJc2VjcDI1NmsxoQLCUqMW7H8owD3pzybit15rMfEEjzleIrOFQROgEc2-MYN0Y3CCFrmDdWRwgha7hXdha3UyAw
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.112.131 waku ee133d0a9da09be169e061c2d64bbbe9481785afafecd225b15faca3d901b508
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID ee133d0a9da0. Setting up logs at ./log/docker/node3_2024-10-02_03-15-54__df039850-2873-418c-9f3a-5c9fa6e7c33b__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 34126
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34126/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QJDstCbwR_d1P1VTRIsLri7hQhD84B5tZV6l3gQfJsvyVv8f4FL3baYurEoYnHIdhNiPtcYQAroZCY6UhikjmJuGAZJLOj9LgmlkgnY0gmlwhKwRAAqJc2VjcDI1NmsxoQIpTh1FQ_-8sKIt5uACokjDf5RnlKZDj2H0P8aGiTkoqIN0Y3CChU-DdWRwgoVRhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/34127/p2p/16Uiu2HAkxCunDGdbxiHKjHwqhZPzMPwN6BwgJrfZonmwwkTPWDzf","/ip4/127.0.0.1/tcp/34128/ws/p2p/16Uiu2HAkxCunDGdbxiHKjHwqhZPzMPwN6BwgJrfZonmwwkTPWDzf","/ip4/172.17.0.10/tcp/34127/p2p/16Uiu2HAkxCunDGdbxiHKjHwqhZPzMPwN6BwgJrfZonmwwkTPWDzf","/ip4/172.17.0.10/tcp/34128/ws/p2p/16Uiu2HAkxCunDGdbxiHKjHwqhZPzMPwN6BwgJrfZonmwwkTPWDzf"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9968/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5816/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9968/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9968/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9968/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAm8WEA7o9RQxKdiJCRFngeHipKLy6pU7wJaLUgEm1RrdRA","multiaddrs":["/ip4/172.18.51.132/tcp/5817/p2p/16Uiu2HAm8WEA7o9RQxKdiJCRFngeHipKLy6pU7wJaLUgEm1RrdRA","/ip4/172.18.51.132/tcp/5818/ws/p2p/16Uiu2HAm8WEA7o9RQxKdiJCRFngeHipKLy6pU7wJaLUgEm1RrdRA"],"protocols":["/vac/waku/relay/2.0.0","/vac/waku/store/2.0.0-beta4","/vac/waku/store-query/3.0.0"],"connected":true,"pubsubTopics":["/waku/2/rs/3/0","/waku/2/rs/3/1"]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5816/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.5/tcp/9969/p2p/16Uiu2HAmT1oUdooZ9zVFL29ce1SCGEo4FJCKGYBVbWvECq1vvqsw","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"},{"multiaddr":"/ip4/172.17.0.10/tcp/34127/p2p/16Uiu2HAkxCunDGdbxiHKjHwqhZPzMPwN6BwgJrfZonmwwkTPWDzf","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9968/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/go-waku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34126/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-filter%2Fproto&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"8410879afbb5e5e77d154645a234fca41eb120882d1f7ee32a19c370086f5959","status_code":200,"status_desc":"OK","messages":[{"message_hash":"hoBu1gjJ30ExPXZbN2DwTgKMFAs4aCjLe5VPux3/dC4="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id efdf10f68c03
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 0cdff0f39eec
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id ee133d0a9da0
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.