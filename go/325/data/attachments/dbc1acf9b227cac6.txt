[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_pubsub_topics with id: 2024-10-28_03-17-32__4cab85d1-2027-4ee7-a013-244e2a5fbbf4
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-10-28_03-17-32__4cab85d1-2027-4ee7-a013-244e2a5fbbf4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.192.201
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['61844', '61845', '61846', '61847', '61848']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 61844:61844 -p 61845:61845 -p 61846:61846 -p 61847:61847 -p 61848:61848 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61846 --rest-port=61844 --tcp-port=61845 --discv5-udp-port=61847 --rest-address=0.0.0.0 --nat=extip:172.18.192.201 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fda9cb200ecbff3f886d1776ed62a6912dbc9adaf507c80905cdb09d6e6eabb7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61848 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.192.201 waku 0cae68972a42748ef8d3e569923531e72908cc268eab83ebd11ece0fbbb15ddf
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 0cae68972a42. Setting up logs at ./log/docker/receiving_node1_2024-10-28_03-17-32__4cab85d1-2027-4ee7-a013-244e2a5fbbf4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 61844
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 88ced494cfba. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61844/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61844/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.192.201/tcp/61845/p2p/16Uiu2HAmCVtvUKUjnoqAJQbeEZ5LP5VwRZ5GXGvRvxXKCByfimVS","/ip4/172.18.192.201/tcp/61846/ws/p2p/16Uiu2HAmCVtvUKUjnoqAJQbeEZ5LP5VwRZ5GXGvRvxXKCByfimVS"],"enrUri":"enr:-LO4QI_ZbJJhcfODmgEmtgpilpyk_g84uAebtj-4fFLOD4wIBa_vv8IPokWogbfvkwMEpJVC-9IscKntZM-wHAs6j-8BgmlkgnY0gmlwhKwSwMmKbXVsdGlhZGRyc4wACgSsEsDJBvGW3QOCcnOFAAMBAACJc2VjcDI1NmsxoQL9q6Kn8lpbu-ODdQ71E8g3m1wNhvbG_G9St3uaHI8YaYN0Y3CC8ZWDdWRwgvGXhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-10-28_03-17-32__4cab85d1-2027-4ee7-a013-244e2a5fbbf4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.106.30
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['7174', '7175', '7176', '7177', '7178']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 7174:7174 -p 7175:7175 -p 7176:7176 -p 7177:7177 -p 7178:7178 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7176 --rest-port=7174 --tcp-port=7175 --discv5-udp-port=7177 --rest-address=0.0.0.0 --nat=extip:172.18.106.30 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5dfae4fd13c8a92dad82a91e6e9e9d0deb6e2bfaafe7f11b41a2babec2b3bfde --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7178 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.106.30 waku c91f4ddaaeb5ed404b4f4f5b163d72ca508f9ce2d65743683904bd1a182bd96c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID c91f4ddaaeb5. Setting up logs at ./log/docker/receiving_node2_2024-10-28_03-17-32__4cab85d1-2027-4ee7-a013-244e2a5fbbf4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 7174
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7174/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7174/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.106.30/tcp/7175/p2p/16Uiu2HAmMX6As2bFkUStAPMqH53MUXWQwkcZG9NPpi5BSn9BCLJe","/ip4/172.18.106.30/tcp/7176/ws/p2p/16Uiu2HAmMX6As2bFkUStAPMqH53MUXWQwkcZG9NPpi5BSn9BCLJe"],"enrUri":"enr:-LO4QFY0Ay00nH0SPqkFlYN8KlAVbH2jAPucPm6D-ZsflOzgf4Hf9TURExKMnRsctOyWBMvTFTCW-f0iaeL6BrgonzgBgmlkgnY0gmlwhKwSah6KbXVsdGlhZGRyc4wACgSsEmoeBhwI3QOCcnOFAAMBAACJc2VjcDI1NmsxoQODsx3oEl167Fh9dXaR294E7LQFIBvAzd6AjGe33pxaw4N0Y3CCHAeDdWRwghwJhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7174/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.192.201/tcp/61845/p2p/16Uiu2HAmCVtvUKUjnoqAJQbeEZ5LP5VwRZ5GXGvRvxXKCByfimVS"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-10-28_03-17-32__4cab85d1-2027-4ee7-a013-244e2a5fbbf4__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.210.53
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['22534', '22535', '22536', '22537', '22538']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 22534:22534 -p 22535:22535 -p 22536:22536 -p 22537:22537 -p 22538:22538 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=22536 --rest-port=22534 --tcp-port=22535 --discv5-udp-port=22537 --rest-address=0.0.0.0 --nat=extip:172.18.210.53 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ceea91cfccafbdb2c0ae36db5aecdd2caada3b31df1cd7e108cac2b52dbd4eab --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-LO4QI_ZbJJhcfODmgEmtgpilpyk_g84uAebtj-4fFLOD4wIBa_vv8IPokWogbfvkwMEpJVC-9IscKntZM-wHAs6j-8BgmlkgnY0gmlwhKwSwMmKbXVsdGlhZGRyc4wACgSsEsDJBvGW3QOCcnOFAAMBAACJc2VjcDI1NmsxoQL9q6Kn8lpbu-ODdQ71E8g3m1wNhvbG_G9St3uaHI8YaYN0Y3CC8ZWDdWRwgvGXhXdha3UyCQ --lightpushnode=/ip4/172.18.192.201/tcp/61845/p2p/16Uiu2HAmCVtvUKUjnoqAJQbeEZ5LP5VwRZ5GXGvRvxXKCByfimVS --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.210.53 waku 334d72aa545d2edf073a01a69adcfe5cd448da0d826fb4b02c12845c56bb52b5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 334d72aa545d. Setting up logs at ./log/docker/lightpush_node1_2024-10-28_03-17-32__4cab85d1-2027-4ee7-a013-244e2a5fbbf4__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 22534
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22534/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QJ6ccqEZu-pFhtTG3t4YHoTmugHS1iuEQFVMfm5m7fkIUQyMHBtXKPvTPVlh45iDiOK9E7uFjRuEtkT5hwI2PvKGAZLRIQgJgmlkgnY0gmlwhKwRAAuJc2VjcDI1NmsxoQJtZpv10GxtAywtPF0b6HuDVkAM6EhHWLy7XRC9BR_cPIN0Y3CCWAeDdWRwglgJhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/22535/p2p/16Uiu2HAm2njAeckDk5yBXTNDxJDr6eiTE1Jw3y2Akbf5xqsZGL7V","/ip4/127.0.0.1/tcp/22536/ws/p2p/16Uiu2HAm2njAeckDk5yBXTNDxJDr6eiTE1Jw3y2Akbf5xqsZGL7V","/ip4/172.17.0.11/tcp/22535/p2p/16Uiu2HAm2njAeckDk5yBXTNDxJDr6eiTE1Jw3y2Akbf5xqsZGL7V","/ip4/172.17.0.11/tcp/22536/ws/p2p/16Uiu2HAm2njAeckDk5yBXTNDxJDr6eiTE1Jw3y2Akbf5xqsZGL7V"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22534/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.192.201/tcp/61845/p2p/16Uiu2HAmCVtvUKUjnoqAJQbeEZ5LP5VwRZ5GXGvRvxXKCByfimVS", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22534/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.106.30/tcp/7175/p2p/16Uiu2HAmMX6As2bFkUStAPMqH53MUXWQwkcZG9NPpi5BSn9BCLJe", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61844/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7174/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A dictionary', 'value': {'key': 'YWFh'}}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22534/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": {"key": "YWFh"}, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1730085456964444672}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:22534/lightpush/v1/message. Response content: b''
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'An integer', 'value': 1234567890}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22534/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": 1234567890, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1730085456969956608}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:22534/lightpush/v1/message. Response content: b''
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A list', 'value': ['YWFh']}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22534/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": ["YWFh"], "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1730085456973154816}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:22534/lightpush/v1/message. Response content: b''
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:140 Running test with pubsub topic {'description': 'A bool', 'value': True}
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22534/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": true, "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1730085456976439808}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:22534/lightpush/v1/message. Response content: b''
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 0cae68972a42
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id c91f4ddaaeb5
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 0cae68972a42. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 334d72aa545d
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container c91f4ddaaeb5. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.