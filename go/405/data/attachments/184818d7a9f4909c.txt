[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_content_topics with id: 2024-12-25_03-12-35__d24b23a6-83c2-4458-82a4-499cbe034889
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-12-25_03-12-35__d24b23a6-83c2-4458-82a4-499cbe034889__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.210.14
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['19876', '19877', '19878', '19879', '19880']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 19876:19876 -p 19877:19877 -p 19878:19878 -p 19879:19879 -p 19880:19880 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19878 --rest-port=19876 --tcp-port=19877 --discv5-udp-port=19879 --rest-address=0.0.0.0 --nat=extip:172.18.210.14 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ad700a5307fddbdaece12d4aa4e2abae8f7361a08f70ff3ae5ab7eecb0160fa5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19880 --metrics-logging=true --lightpush=true --relay=true
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 24cd2d9d0cf0. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.210.14 waku 25588262f667c4f9524a78683ecdf14cb36d157952f0dcf3dd99fb37c82e8d67
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 25588262f667. Setting up logs at ./log/docker/receiving_node1_2024-12-25_03-12-35__d24b23a6-83c2-4458-82a4-499cbe034889__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 19876
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container ad219b2c1146. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19876/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19876/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.210.14/tcp/19877/p2p/16Uiu2HAmSJz8zLWhYBNPemszgkHd7rD4RiECfcYXmqwz2VrVWpht","/ip4/172.18.210.14/tcp/19878/ws/p2p/16Uiu2HAmSJz8zLWhYBNPemszgkHd7rD4RiECfcYXmqwz2VrVWpht"],"enrUri":"enr:-L24QEvpUAJFE3prX6iA93CZBX9nS9tKX0ClP5eDDpVgFz1NXpijxx9hxBqOjfqP7FgcZmIWAAiNH-KmpVjrIVBkOGsCgmlkgnY0gmlwhKwS0g6KbXVsdGlhZGRyc5YACASsEtIOBk2lAAoErBLSDgZNpt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDyuPC0EZu3dYuRKzxnqcUzq-5bHytzX5au-S8i6B0CUeDdGNwgk2lg3VkcIJNp4V3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-12-25_03-12-35__d24b23a6-83c2-4458-82a4-499cbe034889__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.194.17
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['5800', '5801', '5802', '5803', '5804']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 5800:5800 -p 5801:5801 -p 5802:5802 -p 5803:5803 -p 5804:5804 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=5802 --rest-port=5800 --tcp-port=5801 --discv5-udp-port=5803 --rest-address=0.0.0.0 --nat=extip:172.18.194.17 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=56e0188e2cee6ec1afbdb03d76aecc1ce874d54a5d03ad7b8ed1e9a21cecde64 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=5804 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.194.17 waku 98870857319ba2ee7e3854070c8c2292959b84c72cb31c57f5b35685e3e67e29
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 98870857319b. Setting up logs at ./log/docker/receiving_node2_2024-12-25_03-12-35__d24b23a6-83c2-4458-82a4-499cbe034889__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 5800
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5800/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5800/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.194.17/tcp/5801/p2p/16Uiu2HAm7WQ22VN51v93X9cQyMG2ETc3sAbuPUu6dBQ2hTHJRtDu","/ip4/172.18.194.17/tcp/5802/ws/p2p/16Uiu2HAm7WQ22VN51v93X9cQyMG2ETc3sAbuPUu6dBQ2hTHJRtDu"],"enrUri":"enr:-L24QHWFiKwXk7i54Wu5kV4sJFMA0mPAcacEC9bEbdCNcwQtfoPLI1qJpulR4XRJOY3qvahar_fKX7EfF4PF14A5WXICgmlkgnY0gmlwhKwSwhGKbXVsdGlhZGRyc5YACASsEsIRBhapAAoErBLCEQYWqt0DgnJzhQADAQAAiXNlY3AyNTZrMaECs4IZdJpsiGe-eXt1aY8cEAenF5t5AS9v6k4gnjfyomiDdGNwghapg3VkcIIWq4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5800/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.210.14/tcp/19877/p2p/16Uiu2HAmSJz8zLWhYBNPemszgkHd7rD4RiECfcYXmqwz2VrVWpht"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-12-25_03-12-35__d24b23a6-83c2-4458-82a4-499cbe034889__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.161.185
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['59486', '59487', '59488', '59489', '59490']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 59486:59486 -p 59487:59487 -p 59488:59488 -p 59489:59489 -p 59490:59490 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=59488 --rest-port=59486 --tcp-port=59487 --discv5-udp-port=59489 --rest-address=0.0.0.0 --nat=extip:172.18.161.185 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7cbbbf05f1fab0ac9f76894b2e77aa9a74ce0a51ef92f3c7e8b3d9d4cc62042e --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QEvpUAJFE3prX6iA93CZBX9nS9tKX0ClP5eDDpVgFz1NXpijxx9hxBqOjfqP7FgcZmIWAAiNH-KmpVjrIVBkOGsCgmlkgnY0gmlwhKwS0g6KbXVsdGlhZGRyc5YACASsEtIOBk2lAAoErBLSDgZNpt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDyuPC0EZu3dYuRKzxnqcUzq-5bHytzX5au-S8i6B0CUeDdGNwgk2lg3VkcIJNp4V3YWt1Mgk --lightpushnode=/ip4/172.18.210.14/tcp/19877/p2p/16Uiu2HAmSJz8zLWhYBNPemszgkHd7rD4RiECfcYXmqwz2VrVWpht --lightpush=true --relay=false --pubsub-topic=/waku/2/rs/3/1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.161.185 waku e94d6ec73dd665ce70ce606e9076c6d1d58e2dd6a7da5acaa713f056578cfe91
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID e94d6ec73dd6. Setting up logs at ./log/docker/lightpush_node1_2024-12-25_03-12-35__d24b23a6-83c2-4458-82a4-499cbe034889__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 59486
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59486/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QBxtkOCwzwCJqkJCW_aHuxWyY55zu32Hi9AA7shXstx8cjSdTeQuaIyy0HLFSwvIEpQ7nmyytr2eWsbiwGAa8reGAZP7zVuZgmlkgnY0gmlwhKwRAAeCcnOFAAMBAAGJc2VjcDI1NmsxoQOgBF9k4N9IuxAEJ86tvDCv-Dx0NRwvmFNYm7aA4xiD9YN0Y3CC6F-DdWRwguhhhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/59487/p2p/16Uiu2HAmPRdT2CVA4mjMeJe9rjcR2tBfYmjnfwLxSTotkvRP6Gc4","/ip4/127.0.0.1/tcp/59488/ws/p2p/16Uiu2HAmPRdT2CVA4mjMeJe9rjcR2tBfYmjnfwLxSTotkvRP6Gc4","/ip4/172.17.0.7/tcp/59487/p2p/16Uiu2HAmPRdT2CVA4mjMeJe9rjcR2tBfYmjnfwLxSTotkvRP6Gc4","/ip4/172.17.0.7/tcp/59488/ws/p2p/16Uiu2HAmPRdT2CVA4mjMeJe9rjcR2tBfYmjnfwLxSTotkvRP6Gc4"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59486/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.210.14/tcp/19877/p2p/16Uiu2HAmSJz8zLWhYBNPemszgkHd7rD4RiECfcYXmqwz2VrVWpht", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59486/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.194.17/tcp/5801/p2p/16Uiu2HAm7WQ22VN51v93X9cQyMG2ETc3sAbuPUu6dBQ2hTHJRtDu", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19876/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5800/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic Empty string
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59486/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "", "timestamp": 1735096360910144256}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:59486/lightpush/v1/message. Response content: b'missing ContentTopic field'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A dictionary
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59486/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": {"key": "YWFh"}, "timestamp": 1735096360913289728}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:59486/lightpush/v1/message. Response content: b''
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic An integer
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59486/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": 1234567890, "timestamp": 1735096360915820032}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:59486/lightpush/v1/message. Response content: b''
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A list
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59486/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": ["YWFh"], "timestamp": 1735096360918406400}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:59486/lightpush/v1/message. Response content: b''
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:93 Running test with contetn topic A bool
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59486/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": true, "timestamp": 1735096360920875008}}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:59486/lightpush/v1/message. Response content: b''
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 25588262f667
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 98870857319b
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 25588262f667. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id e94d6ec73dd6
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.