[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_node_not_connected_directly_to_relaying_node with id: 2024-12-25_03-05-39__9f4641d2-68b9-421c-b869-9d5870bed277
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-25_03-05-39__9f4641d2-68b9-421c-b869-9d5870bed277__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-25_03-05-39__9f4641d2-68b9-421c-b869-9d5870bed277__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-12-25_03-05-39__9f4641d2-68b9-421c-b869-9d5870bed277__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.166.66
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['30199', '30200', '30201', '30202', '30203']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 30199:30199 -p 30200:30200 -p 30201:30201 -p 30202:30202 -p 30203:30203 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=30201 --rest-port=30199 --tcp-port=30200 --discv5-udp-port=30202 --rest-address=0.0.0.0 --nat=extip:172.18.166.66 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=320e8a9fd96894a892d4d9f5c6072e27e044ff8bebf06efa1b6f208b96dfd1ae --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.166.66 waku f28ccda6c3623d6b923942902fc8ef0cdb5278c3b957978a73534789a342d894
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID f28ccda6c362. Setting up logs at ./log/docker/node1_2024-12-25_03-05-39__9f4641d2-68b9-421c-b869-9d5870bed277__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 30199
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30199/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QIbNwtqcUIQokWGqj6JX5juFKkulW16cex_We8k47TP-ci016pkk_a3bzGl84sLjTGGdUek8hMwzgHBruspYiZiGAZP7xv9ogmlkgnY0gmlwhKwRAAWCcnODAAMAiXNlY3AyNTZrMaEC9m8rc7Yb_Tt-6RiI8e1yTQH9sydtChCXNfE_ZcbE53GDdGNwgnX4g3VkcIJ1-oV3YWt1MgE","listenAddresses":["/ip4/127.0.0.1/tcp/30200/p2p/16Uiu2HAmC1ebLBpcmPvivWavpoipcYavHZBa5fpgJNQiWGAxHqJ8","/ip4/127.0.0.1/tcp/30201/ws/p2p/16Uiu2HAmC1ebLBpcmPvivWavpoipcYavHZBa5fpgJNQiWGAxHqJ8","/ip4/172.17.0.5/tcp/30200/p2p/16Uiu2HAmC1ebLBpcmPvivWavpoipcYavHZBa5fpgJNQiWGAxHqJ8","/ip4/172.17.0.5/tcp/30201/ws/p2p/16Uiu2HAmC1ebLBpcmPvivWavpoipcYavHZBa5fpgJNQiWGAxHqJ8"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.29.235
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['37191', '37192', '37193', '37194', '37195']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 37191:37191 -p 37192:37192 -p 37193:37193 -p 37194:37194 -p 37195:37195 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37193 --rest-port=37191 --tcp-port=37192 --discv5-udp-port=37194 --rest-address=0.0.0.0 --nat=extip:172.18.29.235 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2abae61c3e5bce107772832ab7f7680af65e5082f5bacddc1af80c1d37b2ca5d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37195 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-J-4QIbNwtqcUIQokWGqj6JX5juFKkulW16cex_We8k47TP-ci016pkk_a3bzGl84sLjTGGdUek8hMwzgHBruspYiZiGAZP7xv9ogmlkgnY0gmlwhKwRAAWCcnODAAMAiXNlY3AyNTZrMaEC9m8rc7Yb_Tt-6RiI8e1yTQH9sydtChCXNfE_ZcbE53GDdGNwgnX4g3VkcIJ1-oV3YWt1MgE
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.29.235 waku 04b4d182761009ad8e8e341abc1316ee74ed28fac8f07cf2a754d34f98374698
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 04b4d1827610. Setting up logs at ./log/docker/node2_2024-12-25_03-05-39__9f4641d2-68b9-421c-b869-9d5870bed277__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 37191
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37191/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37191/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.29.235/tcp/37192/p2p/16Uiu2HAm2cvv9iqBVFLni9ky2EaRqmUL2sCi7ddika9dgysqc8KL","/ip4/172.18.29.235/tcp/37193/ws/p2p/16Uiu2HAm2cvv9iqBVFLni9ky2EaRqmUL2sCi7ddika9dgysqc8KL"],"enrUri":"enr:-L24QEOry11oPUqlN9gnJ3F8hClFGOfA3a7Ea8fG8ENOQyU6Pa15_O5lCo_S-4oKltxC0tTtCtcor2XNeV_oXAtuGzACgmlkgnY0gmlwhKwSHeuKbXVsdGlhZGRyc5YACASsEh3rBpFIAAoErBId6waRSd0DgnJzhQADAQAAiXNlY3AyNTZrMaECauQWQSOvNh7lVF2HiAl7QBv5HbLzq3XKezWjZQD1N1uDdGNwgpFIg3VkcIKRSoV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.134.74
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['3084', '3085', '3086', '3087', '3088']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 3084:3084 -p 3085:3085 -p 3086:3086 -p 3087:3087 -p 3088:3088 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=3086 --rest-port=3084 --tcp-port=3085 --discv5-udp-port=3087 --rest-address=0.0.0.0 --nat=extip:172.18.134.74 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e9b941d32bdbf35bedca6375ddfad2ef143f25bda8a3a762ded44e5c0dcfa1ec --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --storenode=/ip4/172.18.29.235/tcp/37192/p2p/16Uiu2HAm2cvv9iqBVFLni9ky2EaRqmUL2sCi7ddika9dgysqc8KL --discv5-bootstrap-node=enr:-L24QEOry11oPUqlN9gnJ3F8hClFGOfA3a7Ea8fG8ENOQyU6Pa15_O5lCo_S-4oKltxC0tTtCtcor2XNeV_oXAtuGzACgmlkgnY0gmlwhKwSHeuKbXVsdGlhZGRyc5YACASsEh3rBpFIAAoErBId6waRSd0DgnJzhQADAQAAiXNlY3AyNTZrMaECauQWQSOvNh7lVF2HiAl7QBv5HbLzq3XKezWjZQD1N1uDdGNwgpFIg3VkcIKRSoV3YWt1MgM --pubsub-topic=/waku/2/rs/3/1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.134.74 waku fb05ec51257be4f2c79b99be2a399447363dad76b97c88ee04a2ee938b7b95b3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID fb05ec51257b. Setting up logs at ./log/docker/node3_2024-12-25_03-05-39__9f4641d2-68b9-421c-b869-9d5870bed277__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 3084
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3084/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QJHoCiYbjvBk1cIfBT2kpztqSIPAbyVxCkI-k0zq45KgMC7MF7FXpTZ6n-U_8Xf6LdeHz-756I_EIw4bfIcHuEiGAZP7xwtlgmlkgnY0gmlwhKwRAAKCcnOFAAMBAAGJc2VjcDI1NmsxoQLrxn-3qEfd-tgX2jkag3865KF5-kmH0l5of7w4lmAYZYN0Y3CCDA2DdWRwggwPhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/3085/p2p/16Uiu2HAmBJ3Lp6zk6YQk157jiUcKjkRBQecwZWSNj81ZiPo27zov","/ip4/127.0.0.1/tcp/3086/ws/p2p/16Uiu2HAmBJ3Lp6zk6YQk157jiUcKjkRBQecwZWSNj81ZiPo27zov","/ip4/172.17.0.2/tcp/3085/p2p/16Uiu2HAmBJ3Lp6zk6YQk157jiUcKjkRBQecwZWSNj81ZiPo27zov","/ip4/172.17.0.2/tcp/3086/ws/p2p/16Uiu2HAmBJ3Lp6zk6YQk157jiUcKjkRBQecwZWSNj81ZiPo27zov"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30199/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37191/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30199/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAm2cvv9iqBVFLni9ky2EaRqmUL2sCi7ddika9dgysqc8KL","multiaddrs":["/ip4/172.18.29.235/tcp/37192/p2p/16Uiu2HAm2cvv9iqBVFLni9ky2EaRqmUL2sCi7ddika9dgysqc8KL","/ip4/172.18.29.235/tcp/37193/ws/p2p/16Uiu2HAm2cvv9iqBVFLni9ky2EaRqmUL2sCi7ddika9dgysqc8KL"],"protocols":null,"connected":false,"pubsubTopics":[]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37191/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.2/tcp/3085/p2p/16Uiu2HAmBJ3Lp6zk6YQk157jiUcKjkRBQecwZWSNj81ZiPo27zov","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30199/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/go-waku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3084/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-filter%2Fproto&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"b40edc2e0eea48b7367f99e4ab402189ff1a4dca6f671166ad08f6c4539339ba","status_code":200,"status_desc":"OK","messages":[{"message_hash":"n8JGBbfghxK7kerNk4NFHL25Ig7+r0eKTFmP7ky2yX4="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id f28ccda6c362
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 04b4d1827610
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container f28ccda6c362. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id fb05ec51257b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.