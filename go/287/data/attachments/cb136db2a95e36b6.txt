[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_lightpush with id: 2024-09-22_03-17-58__59af727c-bfa0-4a7c-837a-2c7f78d48819
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-22_03-17-58__59af727c-bfa0-4a7c-837a-2c7f78d48819__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.248.229
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['22303', '22304', '22305', '22306', '22307']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 22303:22303 -p 22304:22304 -p 22305:22305 -p 22306:22306 -p 22307:22307 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22305 --rest-port=22303 --tcp-port=22304 --discv5-udp-port=22306 --rest-address=0.0.0.0 --nat=extip:172.18.248.229 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=33c5252c448b6ae630d1d3f26d5c9765a9486165daffcacbd5f0a21e5e87cda7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22307 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.248.229 waku 1f40cd90f87464777f67aca228954df46c3cc95277e2955d3d5d5184c134f3b6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 1f40cd90f874. Setting up logs at ./log/docker/node1_2024-09-22_03-17-58__59af727c-bfa0-4a7c-837a-2c7f78d48819__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 22303
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22303/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22303/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.248.229/tcp/22304/p2p/16Uiu2HAkyycJbRggGzPLntLnaVes7mvCaBKoNyjEEHMaX14mASru","/ip4/172.18.248.229/tcp/22305/ws/p2p/16Uiu2HAkyycJbRggGzPLntLnaVes7mvCaBKoNyjEEHMaX14mASru"],"enrUri":"enr:-LO4QCj-VycQB-eCpuWgdDd0ZArUf8pSLFT26U2e2f_Y57nTIkmd6UfbKA8hLmONuNwNxVznzpDViD_JDxZE-sZwc6IBgmlkgnY0gmlwhKwS-OWKbXVsdGlhZGRyc4wACgSsEvjlBlch3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJDnS1jpiHUauEmcBbWZL66gGTw9Tb6wPMcQystyc-a2oN0Y3CCVyCDdWRwglcihXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-22_03-17-58__59af727c-bfa0-4a7c-837a-2c7f78d48819__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.215.30
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['46586', '46587', '46588', '46589', '46590']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 46586:46586 -p 46587:46587 -p 46588:46588 -p 46589:46589 -p 46590:46590 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=46588 --rest-port=46586 --tcp-port=46587 --discv5-udp-port=46589 --rest-address=0.0.0.0 --nat=extip:172.18.215.30 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ac21cf2e1a7de90bf0374ea6863dfcac9d95587fcc395ede1e0c9caedfbdac3f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=46590 --metrics-logging=true --lightpush=false --relay=true --discv5-bootstrap-node=enr:-LO4QCj-VycQB-eCpuWgdDd0ZArUf8pSLFT26U2e2f_Y57nTIkmd6UfbKA8hLmONuNwNxVznzpDViD_JDxZE-sZwc6IBgmlkgnY0gmlwhKwS-OWKbXVsdGlhZGRyc4wACgSsEvjlBlch3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJDnS1jpiHUauEmcBbWZL66gGTw9Tb6wPMcQystyc-a2oN0Y3CCVyCDdWRwglcihXdha3UyCQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.215.30 waku 4be395ffebc4fd69ddca958a8f9e59fb17e346108eafe42148603cd64e0d147f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 4be395ffebc4. Setting up logs at ./log/docker/node1_2024-09-22_03-17-58__59af727c-bfa0-4a7c-837a-2c7f78d48819__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 46586
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46586/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46586/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.215.30/tcp/46587/p2p/16Uiu2HAkw1Ap2vmuKxQyKbfVv6bBWpZ8kpNZtKXLmLGwuxF4XcTQ","/ip4/172.18.215.30/tcp/46588/ws/p2p/16Uiu2HAkw1Ap2vmuKxQyKbfVv6bBWpZ8kpNZtKXLmLGwuxF4XcTQ"],"enrUri":"enr:-LO4QC7kESVjy9n4ty7VYcp5UWIE9MlWRlOhG3zc_VUcY-v-DN2rkknBsPyZbr8JZI1u39hwn4km0vhcF2zcJqdNxSwBgmlkgnY0gmlwhKwS1x6KbXVsdGlhZGRyc4wACgSsEtceBrX83QOCcnOFAAMBAACJc2VjcDI1NmsxoQIXcHQqTZ5cQVlivBY9p5SaM5CbWCnfUY7llbJfe_kKR4N0Y3CCtfuDdWRwgrX9hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-22_03-17-58__59af727c-bfa0-4a7c-837a-2c7f78d48819__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.190.22
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['17538', '17539', '17540', '17541', '17542']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 17538:17538 -p 17539:17539 -p 17540:17540 -p 17541:17541 -p 17542:17542 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=17540 --rest-port=17538 --tcp-port=17539 --discv5-udp-port=17541 --rest-address=0.0.0.0 --nat=extip:172.18.190.22 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a0bc68bd1aeffef026cf6bf331b52cdf34ecbdbe1e2afd87f8bc15b239046dcd --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --lightpush=true --relay=false --discv5-bootstrap-node=enr:-LO4QCj-VycQB-eCpuWgdDd0ZArUf8pSLFT26U2e2f_Y57nTIkmd6UfbKA8hLmONuNwNxVznzpDViD_JDxZE-sZwc6IBgmlkgnY0gmlwhKwS-OWKbXVsdGlhZGRyc4wACgSsEvjlBlch3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJDnS1jpiHUauEmcBbWZL66gGTw9Tb6wPMcQystyc-a2oN0Y3CCVyCDdWRwglcihXdha3UyCQ --lightpushnode=/ip4/172.18.248.229/tcp/22304/p2p/16Uiu2HAkyycJbRggGzPLntLnaVes7mvCaBKoNyjEEHMaX14mASru
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.190.22 waku 97dad0989f3c399ac32749ad87dddfdf6ea8ea3ae9dd0555f27d96bface5e2b8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 97dad0989f3c. Setting up logs at ./log/docker/node1_2024-09-22_03-17-58__59af727c-bfa0-4a7c-837a-2c7f78d48819__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 17538
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17538/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QMyGlzSX0cWVCXpH9dP7XntRuOjM7i7mhe6vM40aE6NTWBxxspZ4tBurYUAU5PmntZ-H5bSMCeOY9HtsCrfO-5SGAZIXvH3bgmlkgnY0gmlwhKwRAA2Jc2VjcDI1NmsxoQJE9VU61aiJi2sMQmvusRYercvkDAbSTOzuY_cuIJ_r6YN0Y3CCRIODdWRwgkSFhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/17539/p2p/16Uiu2HAkz4rgE8psZ8BqGfXJCm3Bo9cyjwQAHaRY5BEAtAB1zvRW","/ip4/127.0.0.1/tcp/17540/ws/p2p/16Uiu2HAkz4rgE8psZ8BqGfXJCm3Bo9cyjwQAHaRY5BEAtAB1zvRW","/ip4/172.17.0.13/tcp/17539/p2p/16Uiu2HAkz4rgE8psZ8BqGfXJCm3Bo9cyjwQAHaRY5BEAtAB1zvRW","/ip4/172.17.0.13/tcp/17540/ws/p2p/16Uiu2HAkz4rgE8psZ8BqGfXJCm3Bo9cyjwQAHaRY5BEAtAB1zvRW"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22303/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:46586/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:17538/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": 1726975082969893632}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22303/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1726975082969893632,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46586/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1726975082969893632,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 1f40cd90f874
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 4be395ffebc4
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 97dad0989f3c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.