[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_publishing_node_restarts with id: 2025-02-02_03-11-30__b591413e-8f04-469c-8999-a312d491afe5
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-02_03-11-30__b591413e-8f04-469c-8999-a312d491afe5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.91.147
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['60518', '60519', '60520', '60521', '60522']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 60518:60518 -p 60519:60519 -p 60520:60520 -p 60521:60521 -p 60522:60522 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=60520 --rest-port=60518 --tcp-port=60519 --discv5-udp-port=60521 --rest-address=0.0.0.0 --nat=extip:172.18.91.147 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cb0d56a0785f699fec7d8db7efea2fc90eafe49efaee6f209b14fafc0befccdd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=60522 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.91.147 waku 7629c71512d416539fd50aef274c1cecf80492536d5e87a848708d097d26c54e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 7629c71512d4. Setting up logs at ./log/docker/publishing_node1_2025-02-02_03-11-30__b591413e-8f04-469c-8999-a312d491afe5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 60518
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container af8824379ba4. Exiting log stream.
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 972580ba66e9. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60518/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60518/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.91.147/tcp/60519/p2p/16Uiu2HAmCe1c6GAWtuwHvKGAvzDRvvrWFXeR3BKMbZGft1qfXjPg","/ip4/172.18.91.147/tcp/60520/ws/p2p/16Uiu2HAmCe1c6GAWtuwHvKGAvzDRvvrWFXeR3BKMbZGft1qfXjPg"],"enrUri":"enr:-L24QERhTMpKkSTxOWawkJHWfSgh-7MtTu-2t_bx8K8UpJdiRBrdLZvrCSl0sDtGEh1sSE-wA-kPGkWJm1rqSaYmu_4CgmlkgnY0gmlwhKwSW5OKbXVsdGlhZGRyc5YACASsEluTBuxnAAoErBJbkwbsaN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC_7_WpLw_kpCE7se-_xr-O5JumzP0e_N4zeoNA90AD5uDdGNwguxng3VkcILsaYV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-02_03-11-30__b591413e-8f04-469c-8999-a312d491afe5__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.165.12
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['52609', '52610', '52611', '52612', '52613']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 52609:52609 -p 52610:52610 -p 52611:52611 -p 52612:52612 -p 52613:52613 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=52611 --rest-port=52609 --tcp-port=52610 --discv5-udp-port=52612 --rest-address=0.0.0.0 --nat=extip:172.18.165.12 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ecbbaeef12deb77aa6a0eb4c53a2ba8a15a68ed18cab83ec387bb24880ee202e --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QERhTMpKkSTxOWawkJHWfSgh-7MtTu-2t_bx8K8UpJdiRBrdLZvrCSl0sDtGEh1sSE-wA-kPGkWJm1rqSaYmu_4CgmlkgnY0gmlwhKwSW5OKbXVsdGlhZGRyc5YACASsEluTBuxnAAoErBJbkwbsaN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC_7_WpLw_kpCE7se-_xr-O5JumzP0e_N4zeoNA90AD5uDdGNwguxng3VkcILsaYV3YWt1MgM --storenode=/ip4/172.18.91.147/tcp/60519/p2p/16Uiu2HAmCe1c6GAWtuwHvKGAvzDRvvrWFXeR3BKMbZGft1qfXjPg --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.165.12 waku b21a26215dbc11336993666c1f79a2ef3afe24742d273e26da146fcf849336b2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID b21a26215dbc. Setting up logs at ./log/docker/store_node1_2025-02-02_03-11-30__b591413e-8f04-469c-8999-a312d491afe5__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 52609
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52609/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QFZxfIPiugd3_l7Y_Lhk94dtyb9XsS1TOFlBIy2Y70Y1IerkD4PeJ93KHvSPDCPH0_jum5XY9JwLvXh4RqoCWNOGAZTEpFfFgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaEDHifsdFscgtH6whlXeIuyhGCMGTDr0OozIbInBzggAveDdGNwgs2Cg3VkcILNhIV3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/52610/p2p/16Uiu2HAmEghtb27Tzk2uVEW8cm39t9u4C3GmVo2ewDMnacyDYmJN","/ip4/127.0.0.1/tcp/52611/ws/p2p/16Uiu2HAmEghtb27Tzk2uVEW8cm39t9u4C3GmVo2ewDMnacyDYmJN","/ip4/172.17.0.3/tcp/52610/p2p/16Uiu2HAmEghtb27Tzk2uVEW8cm39t9u4C3GmVo2ewDMnacyDYmJN","/ip4/172.17.0.3/tcp/52611/ws/p2p/16Uiu2HAmEghtb27Tzk2uVEW8cm39t9u4C3GmVo2ewDMnacyDYmJN"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52609/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.91.147/tcp/60519/p2p/16Uiu2HAmCe1c6GAWtuwHvKGAvzDRvvrWFXeR3BKMbZGft1qfXjPg", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60518/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:52609/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60518/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60518/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xe4f5d208e3b794a6290755b698ca9d35f247584791cf4b7c8d79688e578db7b0"}]}'
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/go-waku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:52609/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"9b7817584ab43674aa83b727265c2df865c0a06cdf037429963ea83a1d79322b","status_code":200,"status_desc":"OK","messages":[{"message_hash":"5PXSCOO3lKYpB1W2mMqdNfJHWEeRz0t8jXlojleNt7A="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 7629c71512d4
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id b21a26215dbc
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:42 Attaching file ./log/docker/publishing_node1_2025-02-02_03-11-30__b591413e-8f04-469c-8999-a312d491afe5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:42 Attaching file ./log/docker/store_node1_2025-02-02_03-11-30__b591413e-8f04-469c-8999-a312d491afe5__wakuorg_go-waku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_publishing_node_restarts with id: 2025-02-02_03-11-34__6cb77ae7-96d6-4379-aa40-6c8f46b91045
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-02_03-11-34__6cb77ae7-96d6-4379-aa40-6c8f46b91045__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.245.169
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['2892', '2893', '2894', '2895', '2896']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 2892:2892 -p 2893:2893 -p 2894:2894 -p 2895:2895 -p 2896:2896 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2894 --rest-port=2892 --tcp-port=2893 --discv5-udp-port=2895 --rest-address=0.0.0.0 --nat=extip:172.18.245.169 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c1ffeeb0ac849cd0c70b7d63bc113302a5ac8bbab2d6e69aef1c26c2d43fe8ae --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2896 --metrics-logging=true --store=true --relay=true
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 7629c71512d4. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.245.169 waku 43309dd6a47c67e26f2d7f190286cbc958e79b51b28283446a746c431fa198f9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 43309dd6a47c. Setting up logs at ./log/docker/publishing_node1_2025-02-02_03-11-34__6cb77ae7-96d6-4379-aa40-6c8f46b91045__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 2892
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container b21a26215dbc. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2892/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2892/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.245.169/tcp/2893/p2p/16Uiu2HAmLeZLgtRunaNwFYfaFjrrrV8gCPbSVuKULXmc59QJCQ8d","/ip4/172.18.245.169/tcp/2894/ws/p2p/16Uiu2HAmLeZLgtRunaNwFYfaFjrrrV8gCPbSVuKULXmc59QJCQ8d"],"enrUri":"enr:-L24QESUq4UJzeoodtRgWnKWdqlY_AB729WZ14Rzk40WECGQQWkwOlaxxGFz-z__uBfRLcb6kijpZqJBab3vJFvhvxECgmlkgnY0gmlwhKwS9amKbXVsdGlhZGRyc5YACASsEvWpBgtNAAoErBL1qQYLTt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDdsE3UicRNPgxWog3uTn8NvBbLfuABJuRSFlGHrQdNh6DdGNwggtNg3VkcIILT4V3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-02_03-11-34__6cb77ae7-96d6-4379-aa40-6c8f46b91045__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.12.144
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['36033', '36034', '36035', '36036', '36037']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 36033:36033 -p 36034:36034 -p 36035:36035 -p 36036:36036 -p 36037:36037 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=36035 --rest-port=36033 --tcp-port=36034 --discv5-udp-port=36036 --rest-address=0.0.0.0 --nat=extip:172.18.12.144 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9ab40692ee4aca732fbdbcf56daafacba6d0c56b04b7514ecc9d6f701ad4b2e7 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QESUq4UJzeoodtRgWnKWdqlY_AB729WZ14Rzk40WECGQQWkwOlaxxGFz-z__uBfRLcb6kijpZqJBab3vJFvhvxECgmlkgnY0gmlwhKwS9amKbXVsdGlhZGRyc5YACASsEvWpBgtNAAoErBL1qQYLTt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDdsE3UicRNPgxWog3uTn8NvBbLfuABJuRSFlGHrQdNh6DdGNwggtNg3VkcIILT4V3YWt1MgM --storenode=/ip4/172.18.245.169/tcp/2893/p2p/16Uiu2HAmLeZLgtRunaNwFYfaFjrrrV8gCPbSVuKULXmc59QJCQ8d --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.12.144 waku f45f8ab5d0ec65facd7a419679f262dd5b043ebd6e8761ed89c070d8ad15e92e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID f45f8ab5d0ec. Setting up logs at ./log/docker/store_node1_2025-02-02_03-11-34__6cb77ae7-96d6-4379-aa40-6c8f46b91045__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 36033
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36033/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QLgCjIiaJ-hk7YbnJ2ctEItGszBlAzKyZlNe2FraB2YpRXnRp2RC6dpUgVEMXH6vFLKnkZLn7excPkOhXT-z7reGAZTEpGfigmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaEDN-QWJA_ScTgR0lrZmDw3PwhhCYf534rOIiWmDjNsRGCDdGNwgozCg3VkcIKMxIV3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/36034/p2p/16Uiu2HAmGRAVew1surmMFGqziwBnypr6FCTtXFANmnftAeK7EyK5","/ip4/127.0.0.1/tcp/36035/ws/p2p/16Uiu2HAmGRAVew1surmMFGqziwBnypr6FCTtXFANmnftAeK7EyK5","/ip4/172.17.0.3/tcp/36034/p2p/16Uiu2HAmGRAVew1surmMFGqziwBnypr6FCTtXFANmnftAeK7EyK5","/ip4/172.17.0.3/tcp/36035/ws/p2p/16Uiu2HAmGRAVew1surmMFGqziwBnypr6FCTtXFANmnftAeK7EyK5"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36033/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.245.169/tcp/2893/p2p/16Uiu2HAmLeZLgtRunaNwFYfaFjrrrV8gCPbSVuKULXmc59QJCQ8d", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2892/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36033/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2892/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2892/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x59c277bb4788f0e1bee9b9f11addcc5ec6ab4944c179ef69e01faa3097278d43"}]}'
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/go-waku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36033/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"3d9996beb63cb5b75af8b78034a403823f7ea67c493f0c3b298c4527f1ed731a","status_code":200,"status_desc":"OK","messages":[{"message_hash":"WcJ3u0eI8OG+6bnxGt3MXsarSUTBee9p4B+qMJcnjUM="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 43309dd6a47c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id f45f8ab5d0ec
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:42 Attaching file ./log/docker/publishing_node1_2025-02-02_03-11-34__6cb77ae7-96d6-4379-aa40-6c8f46b91045__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:42 Attaching file ./log/docker/store_node1_2025-02-02_03-11-34__6cb77ae7-96d6-4379-aa40-6c8f46b91045__wakuorg_go-waku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_publishing_node_restarts with id: 2025-02-02_03-11-38__dc5328e7-3033-4641-a429-e59bdfd3ab8a
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-02_03-11-38__dc5328e7-3033-4641-a429-e59bdfd3ab8a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.93.206
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['13907', '13908', '13909', '13910', '13911']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 13907:13907 -p 13908:13908 -p 13909:13909 -p 13910:13910 -p 13911:13911 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=13909 --rest-port=13907 --tcp-port=13908 --discv5-udp-port=13910 --rest-address=0.0.0.0 --nat=extip:172.18.93.206 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7db9e54a87ca9fefc46a5cc4ceedca328cbbfed45daad9cab2ea1c2dd7a8daf7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=13911 --metrics-logging=true --store=true --relay=true
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 43309dd6a47c. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.93.206 waku e3a1c306a56d7373bc1c463dc4d709b3a377db4f0eb0ed219dfafed352ca45d9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID e3a1c306a56d. Setting up logs at ./log/docker/publishing_node1_2025-02-02_03-11-38__dc5328e7-3033-4641-a429-e59bdfd3ab8a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 13907
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container f45f8ab5d0ec. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13907/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13907/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.93.206/tcp/13908/p2p/16Uiu2HAmRvgsgKgcxeH6tjEGdhCySzGzSKB374iBZx8WtTdW5WSn","/ip4/172.18.93.206/tcp/13909/ws/p2p/16Uiu2HAmRvgsgKgcxeH6tjEGdhCySzGzSKB374iBZx8WtTdW5WSn"],"enrUri":"enr:-L24QM-Xxt-nJhGJriwLGgF9fNTHq-C2XhdTzGmr2nB-8AVKa0E2l_D-1oXAmIU7VInaRJXMM6cYhLZ2hQ6HppgS7bMCgmlkgnY0gmlwhKwSXc6KbXVsdGlhZGRyc5YACASsEl3OBjZUAAoErBJdzgY2Vd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDxS12dt6gIa4ZprhnGZd_6SgaRuwaEKqDjKUaXMfAOduDdGNwgjZUg3VkcII2VoV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-02_03-11-38__dc5328e7-3033-4641-a429-e59bdfd3ab8a__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.252.240
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['30248', '30249', '30250', '30251', '30252']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 30248:30248 -p 30249:30249 -p 30250:30250 -p 30251:30251 -p 30252:30252 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=30250 --rest-port=30248 --tcp-port=30249 --discv5-udp-port=30251 --rest-address=0.0.0.0 --nat=extip:172.18.252.240 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c9edb7a2d2f0cb67fa553d46f350d1baef60365b09fb2deedb4f4cadafa5d370 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QM-Xxt-nJhGJriwLGgF9fNTHq-C2XhdTzGmr2nB-8AVKa0E2l_D-1oXAmIU7VInaRJXMM6cYhLZ2hQ6HppgS7bMCgmlkgnY0gmlwhKwSXc6KbXVsdGlhZGRyc5YACASsEl3OBjZUAAoErBJdzgY2Vd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDxS12dt6gIa4ZprhnGZd_6SgaRuwaEKqDjKUaXMfAOduDdGNwgjZUg3VkcII2VoV3YWt1MgM --storenode=/ip4/172.18.93.206/tcp/13908/p2p/16Uiu2HAmRvgsgKgcxeH6tjEGdhCySzGzSKB374iBZx8WtTdW5WSn --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.252.240 waku 8fb93742132ae04002e5f899e693d4bfdc4d3766c3eb862e1dcf54cd37268400
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 8fb93742132a. Setting up logs at ./log/docker/store_node1_2025-02-02_03-11-38__dc5328e7-3033-4641-a429-e59bdfd3ab8a__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 30248
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30248/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QB8KEK_yXYLNHd70c-M5U9vm0xhnXYokW0jsBV7x_y1uXOrYFGO5hnA6cnsrd-vZGZEXA-i6pYjK7P8kwPpi2MaGAZTEpHfkgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaEDV3wWY8IhdY3GN10Mi7X6QV5eCXaWTwJTRMeTCS7Sof6DdGNwgnYpg3VkcIJ2K4V3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/30249/p2p/16Uiu2HAmJYVZfFbJgq47D1c7qcM9BXYCdpY9CMEe1DUGjkiJFBgZ","/ip4/127.0.0.1/tcp/30250/ws/p2p/16Uiu2HAmJYVZfFbJgq47D1c7qcM9BXYCdpY9CMEe1DUGjkiJFBgZ","/ip4/172.17.0.3/tcp/30249/p2p/16Uiu2HAmJYVZfFbJgq47D1c7qcM9BXYCdpY9CMEe1DUGjkiJFBgZ","/ip4/172.17.0.3/tcp/30250/ws/p2p/16Uiu2HAmJYVZfFbJgq47D1c7qcM9BXYCdpY9CMEe1DUGjkiJFBgZ"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30248/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.93.206/tcp/13908/p2p/16Uiu2HAmRvgsgKgcxeH6tjEGdhCySzGzSKB374iBZx8WtTdW5WSn", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13907/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30248/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13907/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13907/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x64803cf8a67a36eeacb10fca18e0d5519f00029e67d5794fbd154ac52edd0f43"}]}'
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/go-waku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30248/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"52a9dc14dde70983cba55f1f77b89b18b0b51d804ff584beab539357409f6af7","status_code":200,"status_desc":"OK","messages":[{"message_hash":"ZIA8+KZ6Nu6ssQ/KGODVUZ8AAp5n1XlPvRVKxS7dD0M="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id e3a1c306a56d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 8fb93742132a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:42 Attaching file ./log/docker/store_node1_2025-02-02_03-11-38__dc5328e7-3033-4641-a429-e59bdfd3ab8a__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:42 Attaching file ./log/docker/publishing_node1_2025-02-02_03-11-38__dc5328e7-3033-4641-a429-e59bdfd3ab8a__wakuorg_nwaku:latest.log