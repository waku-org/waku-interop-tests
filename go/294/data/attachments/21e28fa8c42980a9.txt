[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_no_timestamp with id: 2024-09-29_03-25-48__8186e970-df8c-4de8-a061-238d52eaf759
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-29_03-25-48__8186e970-df8c-4de8-a061-238d52eaf759__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.206.234
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['64984', '64985', '64986', '64987', '64988']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 64984:64984 -p 64985:64985 -p 64986:64986 -p 64987:64987 -p 64988:64988 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64986 --rest-port=64984 --tcp-port=64985 --discv5-udp-port=64987 --rest-address=0.0.0.0 --nat=extip:172.18.206.234 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1b14b14afedace421a0f43a7c7b0b306ecafa771bc23b96f77abdddd6e3e2caa --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64988 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.206.234 waku f8f176515f872dd2b67a0f566279475c81e4cb8032421fd8a2ad369335df97f8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID f8f176515f87. Setting up logs at ./log/docker/receiving_node1_2024-09-29_03-25-48__8186e970-df8c-4de8-a061-238d52eaf759__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 64984
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64984/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64984/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.206.234/tcp/64985/p2p/16Uiu2HAmJtr7fWi5VSzUPc6ySieibkSxKz8YgiyhmaWvBH1Fx7FH","/ip4/172.18.206.234/tcp/64986/ws/p2p/16Uiu2HAmJtr7fWi5VSzUPc6ySieibkSxKz8YgiyhmaWvBH1Fx7FH"],"enrUri":"enr:-LO4QK-W3vochDNZcQ_UOrEGJoh9hl2PdKLCBepFBtt0N-tBOu8PL_ldYkAfNEYOTaf0wFgofGLXAPm6RHV5k4VJ0n0BgmlkgnY0gmlwhKwSzuqKbXVsdGlhZGRyc4wACgSsEs7qBv3a3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNcsvEPJWw51_xRgNnYG3UmUl02ozIkdvRoTdpUBwb_jIN0Y3CC_dmDdWRwgv3bhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-29_03-25-48__8186e970-df8c-4de8-a061-238d52eaf759__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.131.137
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['19450', '19451', '19452', '19453', '19454']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 19450:19450 -p 19451:19451 -p 19452:19452 -p 19453:19453 -p 19454:19454 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19452 --rest-port=19450 --tcp-port=19451 --discv5-udp-port=19453 --rest-address=0.0.0.0 --nat=extip:172.18.131.137 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=be2c4b142b819bfaf69f3edd471f2eb24b31ead6d3372adda3a7b3d59478ba17 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19454 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.131.137 waku ee4e627409f9c7517978d7b6b163994f99972ed3187399c4d765c694eaf77bfa
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID ee4e627409f9. Setting up logs at ./log/docker/receiving_node2_2024-09-29_03-25-48__8186e970-df8c-4de8-a061-238d52eaf759__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 19450
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19450/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19450/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.131.137/tcp/19451/p2p/16Uiu2HAmJ2PifKqJQAV8n6X7qHTMxVBLEEjdyYMuEeJZjnKqsHyt","/ip4/172.18.131.137/tcp/19452/ws/p2p/16Uiu2HAmJ2PifKqJQAV8n6X7qHTMxVBLEEjdyYMuEeJZjnKqsHyt"],"enrUri":"enr:-LO4QDElIg_KXmiQrMBwELvx3NpsJqY07YBrkQiDItZo8eQ0JN-rkjv7x9Ez9sXYDejlw9yvomu4YAXm0kczIQXeOnYBgmlkgnY0gmlwhKwSg4mKbXVsdGlhZGRyc4wACgSsEoOJBkv83QOCcnOFAAMBAACJc2VjcDI1NmsxoQNPxg3wEW1Km1FYhE6vdqvtUVZTbJSSOFihNlaxgkobc4N0Y3CCS_uDdWRwgkv9hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19450/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.206.234/tcp/64985/p2p/16Uiu2HAmJtr7fWi5VSzUPc6ySieibkSxKz8YgiyhmaWvBH1Fx7FH"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-29_03-25-48__8186e970-df8c-4de8-a061-238d52eaf759__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.102.165
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['22559', '22560', '22561', '22562', '22563']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 22559:22559 -p 22560:22560 -p 22561:22561 -p 22562:22562 -p 22563:22563 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=22561 --rest-port=22559 --tcp-port=22560 --discv5-udp-port=22562 --rest-address=0.0.0.0 --nat=extip:172.18.102.165 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5af598ebef7fb32c7ccda1d41f2640b71eeebaa81bceda90fba2baadf9f98dad --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-LO4QK-W3vochDNZcQ_UOrEGJoh9hl2PdKLCBepFBtt0N-tBOu8PL_ldYkAfNEYOTaf0wFgofGLXAPm6RHV5k4VJ0n0BgmlkgnY0gmlwhKwSzuqKbXVsdGlhZGRyc4wACgSsEs7qBv3a3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNcsvEPJWw51_xRgNnYG3UmUl02ozIkdvRoTdpUBwb_jIN0Y3CC_dmDdWRwgv3bhXdha3UyCQ --lightpushnode=/ip4/172.18.206.234/tcp/64985/p2p/16Uiu2HAmJtr7fWi5VSzUPc6ySieibkSxKz8YgiyhmaWvBH1Fx7FH --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.102.165 waku ea839e956e755b2e586998138ebc24595caac510e09b92515e0afefaadf4e365
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID ea839e956e75. Setting up logs at ./log/docker/lightpush_node1_2024-09-29_03-25-48__8186e970-df8c-4de8-a061-238d52eaf759__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 22559
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22559/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QOye5Ifqy1Hwc-DKKNV6YF3p2GC76atKqdepN4hGwnSjS0Q4YHbUZm8y37vmA4YEbMMX411KljOFkZijLHtTG3aGAZI70DFFgmlkgnY0gmlwhKwRAAeJc2VjcDI1NmsxoQINZ6YI31SVGBljGau63hjI0-sypu5U62m1Xlng-7MVb4N0Y3CCWCCDdWRwglgihXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/22560/p2p/16Uiu2HAkvKzwuHrrPatYQite25uD6dvHgjNpdfNvKpXZe42iteyc","/ip4/127.0.0.1/tcp/22561/ws/p2p/16Uiu2HAkvKzwuHrrPatYQite25uD6dvHgjNpdfNvKpXZe42iteyc","/ip4/172.17.0.7/tcp/22560/p2p/16Uiu2HAkvKzwuHrrPatYQite25uD6dvHgjNpdfNvKpXZe42iteyc","/ip4/172.17.0.7/tcp/22561/ws/p2p/16Uiu2HAkvKzwuHrrPatYQite25uD6dvHgjNpdfNvKpXZe42iteyc"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22559/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.206.234/tcp/64985/p2p/16Uiu2HAmJtr7fWi5VSzUPc6ySieibkSxKz8YgiyhmaWvBH1Fx7FH", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22559/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.131.137/tcp/19451/p2p/16Uiu2HAmJ2PifKqJQAV8n6X7qHTMxVBLEEjdyYMuEeJZjnKqsHyt", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64984/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19450/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22559/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto"}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64984/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":0,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19450/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":0,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id f8f176515f87
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id ee4e627409f9
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id ea839e956e75
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.