[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_with_peerAddr with id: 2024-09-29_03-30-38__62f6c98f-f068-4eb7-abf3-2b3ec3901cb5
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-09-29_03-30-38__62f6c98f-f068-4eb7-abf3-2b3ec3901cb5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.182.13
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['41656', '41657', '41658', '41659', '41660']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 41656:41656 -p 41657:41657 -p 41658:41658 -p 41659:41659 -p 41660:41660 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=41658 --rest-port=41656 --tcp-port=41657 --discv5-udp-port=41659 --rest-address=0.0.0.0 --nat=extip:172.18.182.13 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c1c2dcc9e1ab2fdaefec2f2f583a4ccc019b4942dbcaf9a9e6a1e3bbd0d6ed57 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=41660 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.182.13 waku b52ce7a474176a0f1bdf19ebb3246a57c0999faa2f25f74f6618737a6a76aac6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID b52ce7a47417. Setting up logs at ./log/docker/publishing_node1_2024-09-29_03-30-38__62f6c98f-f068-4eb7-abf3-2b3ec3901cb5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 41656
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41656/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:41656/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.182.13/tcp/41657/p2p/16Uiu2HAmQMLY88A2JdorfX1eYQ9dpPLiPsoQiGGeYKTbCeoWhkNE","/ip4/172.18.182.13/tcp/41658/ws/p2p/16Uiu2HAmQMLY88A2JdorfX1eYQ9dpPLiPsoQiGGeYKTbCeoWhkNE"],"enrUri":"enr:-LO4QJWsIMqQgXFITFVMMtsG68N2Q1732Pgy0Cl4xolwLj2kGLm6B6fAmZ3ElhRTt839NnEeWo8lVNZQpCbzO6jy2-oBgmlkgnY0gmlwhKwStg2KbXVsdGlhZGRyc4wACgSsErYNBqK63QOCcnOFAAMBAACJc2VjcDI1NmsxoQOtxp0j0s-7kzyMYIOMlfgIOOzGRBHgQX8-Ft6uXcV-a4N0Y3CCormDdWRwgqK7hXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2024-09-29_03-30-38__62f6c98f-f068-4eb7-abf3-2b3ec3901cb5__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.193.45
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['43905', '43906', '43907', '43908', '43909']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 43905:43905 -p 43906:43906 -p 43907:43907 -p 43908:43908 -p 43909:43909 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=43907 --rest-port=43905 --tcp-port=43906 --discv5-udp-port=43908 --rest-address=0.0.0.0 --nat=extip:172.18.193.45 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=43f385ce9c1a498d3ab3e7fbcf32ae124eafb3c8aff3d9e66bd7b8fdabe65b5b --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-LO4QJWsIMqQgXFITFVMMtsG68N2Q1732Pgy0Cl4xolwLj2kGLm6B6fAmZ3ElhRTt839NnEeWo8lVNZQpCbzO6jy2-oBgmlkgnY0gmlwhKwStg2KbXVsdGlhZGRyc4wACgSsErYNBqK63QOCcnOFAAMBAACJc2VjcDI1NmsxoQOtxp0j0s-7kzyMYIOMlfgIOOzGRBHgQX8-Ft6uXcV-a4N0Y3CCormDdWRwgqK7hXdha3UyAw --storenode=/ip4/172.18.182.13/tcp/41657/p2p/16Uiu2HAmQMLY88A2JdorfX1eYQ9dpPLiPsoQiGGeYKTbCeoWhkNE --store=true --relay=true
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.139.52
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['44638', '44639', '44640', '44641', '44642']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 44638:44638 -p 44639:44639 -p 44640:44640 -p 44641:44641 -p 44642:44642 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=44640 --rest-port=44638 --tcp-port=44639 --discv5-udp-port=44641 --rest-address=0.0.0.0 --nat=extip:172.18.139.52 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=91eb68e88e415d497fa2d1f5af0d946d9cb83460d36455ee1262918ada798cc4 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-LO4QJWsIMqQgXFITFVMMtsG68N2Q1732Pgy0Cl4xolwLj2kGLm6B6fAmZ3ElhRTt839NnEeWo8lVNZQpCbzO6jy2-oBgmlkgnY0gmlwhKwStg2KbXVsdGlhZGRyc4wACgSsErYNBqK63QOCcnOFAAMBAACJc2VjcDI1NmsxoQOtxp0j0s-7kzyMYIOMlfgIOOzGRBHgQX8-Ft6uXcV-a4N0Y3CCormDdWRwgqK7hXdha3UyAw --storenode=/ip4/172.18.182.13/tcp/41657/p2p/16Uiu2HAmQMLY88A2JdorfX1eYQ9dpPLiPsoQiGGeYKTbCeoWhkNE --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.139.52 waku f438d6f1b5c94a906ec5e62a628921349d86cf13c163a82bec3db2996b63ca27
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID f438d6f1b5c9. Setting up logs at ./log/docker/store_node1_2024-09-29_03-30-38__62f6c98f-f068-4eb7-abf3-2b3ec3901cb5__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 44638
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44638/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QFjaejKkX7DXqvFd3dI9sY9bjmYBbzMk9JOlH-t63lIvISSnL3mMhu6oJqCVNXcJKcYaWznKFoEAr7I-pmj8yQ2GAZI71JUVgmlkgnY0gmlwhKwRAAmJc2VjcDI1NmsxoQOfa66Abv-v5jzrmtxO4yq3Gtp-SfI2WImbqw_y86EZZYN0Y3CCrl-DdWRwgq5hhXdha3UyAw","listenAddresses":["/ip4/127.0.0.1/tcp/44639/p2p/16Uiu2HAmPPJQfLxoCV2GkTNbKTWbw4dFyUHSLhiWpoDjD5vGDtnQ","/ip4/127.0.0.1/tcp/44640/ws/p2p/16Uiu2HAmPPJQfLxoCV2GkTNbKTWbw4dFyUHSLhiWpoDjD5vGDtnQ","/ip4/172.17.0.9/tcp/44639/p2p/16Uiu2HAmPPJQfLxoCV2GkTNbKTWbw4dFyUHSLhiWpoDjD5vGDtnQ","/ip4/172.17.0.9/tcp/44640/ws/p2p/16Uiu2HAmPPJQfLxoCV2GkTNbKTWbw4dFyUHSLhiWpoDjD5vGDtnQ"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44638/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.182.13/tcp/41657/p2p/16Uiu2HAmQMLY88A2JdorfX1eYQ9dpPLiPsoQiGGeYKTbCeoWhkNE", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41656/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:44638/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:41656/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/go-waku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44638/store/v3/messages?peerAddr=%2Fip4%2F172.18.182.13%2Ftcp%2F41657%2Fp2p%2F16Uiu2HAmQMLY88A2JdorfX1eYQ9dpPLiPsoQiGGeYKTbCeoWhkNE&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"2d637dd3908ae511479288ecba8bc058ba258ba6e2b1fbdf525602ea539ac3a7","status_code":200,"status_desc":"OK","messages":[{"message_hash":"rcYzJATPiF2vriFcke3ilAp95Xhfgl5HUMyZmWBfZI4="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id b52ce7a47417
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id f438d6f1b5c9
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.