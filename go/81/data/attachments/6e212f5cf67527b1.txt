[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_filter_get_message_with_extra_field with id: 2024-04-13_03-09-08__3fb9b0cb-a389-4d26-8646-1112961564d6
[35mDEBUG   [0m src.steps.filter:filter.py:27 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:33 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:50 WakuNode instance initialized with log path ./log/docker/node1_2024-04-13_03-09-08__3fb9b0cb-a389-4d26-8646-1112961564d6__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:54 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.20.48
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['15448', '15449', '15450', '15451', '15452']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:297 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:115 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 15448:15448 -p 15449:15449 -p 15450:15450 -p 15451:15451 -p 15452:15452 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15450 --rest-port=15448 --tcp-port=15449 --discv5-udp-port=15451 --rest-address=0.0.0.0 --nat=extip:172.18.20.48 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15452 --metrics-logging=true --relay=true --filter=true --nodekey=30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.20.48 waku f8ba720e24622fdd463c9df24ac82bb7d154af26ac305eb1f541ae921b883a78
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID f8ba720e2462. Setting up logs at ./log/docker/node1_2024-04-13_03-09-08__3fb9b0cb-a389-4d26-8646-1112961564d6__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:121 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 15448
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15448/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.20.48/tcp/15449/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip","/ip4/172.18.20.48/tcp/15450/ws/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"],"enrUri":"enr:-LO4QByLhieNM-BZ9StiAqnvxOob2ahZX12FELbUA0NBrAm3Srs4J1OBRyXXbJHljfflObMtkF7HRI8axS7XzI9FdikBgmlkgnY0gmlwhKwSFDCKbXVsdGlhZGRyc4wACgSsEhQwBjxa3QOCcnOFAAABAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCPFmDdWRwgjxbhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:191 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:38 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:50 WakuNode instance initialized with log path ./log/docker/node2_2024-04-13_03-09-08__3fb9b0cb-a389-4d26-8646-1112961564d6__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:54 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.58.0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['36611', '36612', '36613', '36614', '36615']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:297 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:115 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 36611:36611 -p 36612:36612 -p 36613:36613 -p 36614:36614 -p 36615:36615 harbor.status.im/wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=36613 --rest-port=36611 --tcp-port=36612 --discv5-udp-port=36614 --rest-address=0.0.0.0 --nat=extip:172.18.58.0 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --relay=false --discv5-bootstrap-node=enr:-LO4QByLhieNM-BZ9StiAqnvxOob2ahZX12FELbUA0NBrAm3Srs4J1OBRyXXbJHljfflObMtkF7HRI8axS7XzI9FdikBgmlkgnY0gmlwhKwSFDCKbXVsdGlhZGRyc4wACgSsEhQwBjxa3QOCcnOFAAABAACJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCPFmDdWRwgjxbhXdha3UyBQ --filternode=/ip4/172.18.20.48/tcp/15449/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.58.0 waku 915545aca9d49e15db541c44647cc032dc12877ff90c7f843e73f223ffb0d6ed
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 915545aca9d4. Setting up logs at ./log/docker/node2_2024-04-13_03-09-08__3fb9b0cb-a389-4d26-8646-1112961564d6__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:121 Started container from image harbor.status.im/wakuorg/go-waku:latest. REST: 36611
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36611/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ly4QH4orNhbVU8Yc54dKTrqGwymlz23Yb3QjZkJV8_2nTW2bMFyR-Nap6liLrYSlQIx_ncAwlrem4AKPVkRKjpziuaGAY7VbiqYgmlkgnY0gmlwhKwRAAmKbXVsdGlhZGRyc5gACgSsEQAJBo8F3QMACgR_AAABBo8F3QOJc2VjcDI1NmsxoQKx_Iv_5qfHH_XgEN2KYc2nRHf4grxo644rNQ5QItcRrIN0Y3CCjwSDdWRwgo8GhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/36612/p2p/16Uiu2HAm7QTVjc3ybCeBMQhrrMi644uCPdo53GzppywFJuPTbAhh","/ip4/127.0.0.1/tcp/36613/ws/p2p/16Uiu2HAm7QTVjc3ybCeBMQhrrMi644uCPdo53GzppywFJuPTbAhh","/ip4/172.17.0.9/tcp/36612/p2p/16Uiu2HAm7QTVjc3ybCeBMQhrrMi644uCPdo53GzppywFJuPTbAhh","/ip4/172.17.0.9/tcp/36613/ws/p2p/16Uiu2HAm7QTVjc3ybCeBMQhrrMi644uCPdo53GzppywFJuPTbAhh"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:191 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15448/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36611/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "edf56164-021e-491d-b4fe-f11878cf6d88", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/0/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"edf56164-021e-491d-b4fe-f11878cf6d88","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15448/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "extraField": "extraValue"}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:15448/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F1. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:168 Stopping container with id f8ba720e2462
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:168 Stopping container with id 915545aca9d4
[35mDEBUG   [0m src.node.waku_node:waku_node.py:171 Container stopped.