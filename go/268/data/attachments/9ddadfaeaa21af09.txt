[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_node_not_connected_directly_to_lightpushing_node with id: 2024-09-05_03-12-33__98416f3c-f954-4458-8d07-990093b328f2
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-05_03-12-33__98416f3c-f954-4458-8d07-990093b328f2__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-05_03-12-33__98416f3c-f954-4458-8d07-990093b328f2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-09-05_03-12-33__98416f3c-f954-4458-8d07-990093b328f2__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:28 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.204.48
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['54633', '54634', '54635', '54636', '54637']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 54633:54633 -p 54634:54634 -p 54635:54635 -p 54636:54636 -p 54637:54637 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=54635 --rest-port=54633 --tcp-port=54634 --discv5-udp-port=54636 --rest-address=0.0.0.0 --nat=extip:172.18.204.48 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cbde8d4dccdef22ef0bebdcfefdf9d4fcebeb3a52fcb7be5b4da502e791c0f8e --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.204.48 waku 300f1951ca12d39f61222bbfb6fecb82ed9ff78f527ee262356a449d24c13a6e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 300f1951ca12. Setting up logs at ./log/docker/node1_2024-09-05_03-12-33__98416f3c-f954-4458-8d07-990093b328f2__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 54633
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54633/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QG-tM86uIwu-aZtLyClLjOvko95I3ka50Ovyuhjb0QjmIDYkGtjlE4GSf71w9VpWtAYsnPX7RwftEE0Z8oRsdfqGAZHAK2AvgmlkgnY0gmlwhKwRAAOJc2VjcDI1NmsxoQIIC_30ieuUXVemYuIvwT9OiXgFzmXQuzTSrHmmXV4vloN0Y3CC1WqDdWRwgtVshXdha3UyCQ","listenAddresses":["/ip4/127.0.0.1/tcp/54634/p2p/16Uiu2HAkuy5r6qfZrCtMJfYgoAU5HPTK82n11PC6aDkB87KSiCHs","/ip4/127.0.0.1/tcp/54635/ws/p2p/16Uiu2HAkuy5r6qfZrCtMJfYgoAU5HPTK82n11PC6aDkB87KSiCHs","/ip4/172.17.0.3/tcp/54634/p2p/16Uiu2HAkuy5r6qfZrCtMJfYgoAU5HPTK82n11PC6aDkB87KSiCHs","/ip4/172.17.0.3/tcp/54635/ws/p2p/16Uiu2HAkuy5r6qfZrCtMJfYgoAU5HPTK82n11PC6aDkB87KSiCHs"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.15.151
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['36408', '36409', '36410', '36411', '36412']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 36408:36408 -p 36409:36409 -p 36410:36410 -p 36411:36411 -p 36412:36412 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36410 --rest-port=36408 --tcp-port=36409 --discv5-udp-port=36411 --rest-address=0.0.0.0 --nat=extip:172.18.15.151 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cf4fac8cccef5cbf0c2ed55b4fc5ab1a6ebfc0fd6d0935fdce638b8ba1fa9167 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36412 --metrics-logging=true --lightpush=true --store=true --relay=true --discv5-bootstrap-node=enr:-Ji4QG-tM86uIwu-aZtLyClLjOvko95I3ka50Ovyuhjb0QjmIDYkGtjlE4GSf71w9VpWtAYsnPX7RwftEE0Z8oRsdfqGAZHAK2AvgmlkgnY0gmlwhKwRAAOJc2VjcDI1NmsxoQIIC_30ieuUXVemYuIvwT9OiXgFzmXQuzTSrHmmXV4vloN0Y3CC1WqDdWRwgtVshXdha3UyCQ --lightpushnode=/ip4/172.18.204.48/tcp/54634/p2p/16Uiu2HAkuy5r6qfZrCtMJfYgoAU5HPTK82n11PC6aDkB87KSiCHs
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.15.151 waku cc9b1e0485c3e07b31122393f7794e722796689438b85df9c68524702555be62
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID cc9b1e0485c3. Setting up logs at ./log/docker/node2_2024-09-05_03-12-33__98416f3c-f954-4458-8d07-990093b328f2__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 36408
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36408/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36408/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.15.151/tcp/36409/p2p/16Uiu2HAm22vi3BnLua9e7MP4gRM8Sf2Rd54E9eEUNkAwxK33C6HP","/ip4/172.18.15.151/tcp/36410/ws/p2p/16Uiu2HAm22vi3BnLua9e7MP4gRM8Sf2Rd54E9eEUNkAwxK33C6HP"],"enrUri":"enr:-LO4QFIxDNpwzdEptBGliDdf1eRGK1iVVnNNNqex40-hvx3MbfEfMnWULiz_Oc6IgmzkeXIJJ94TvuT0YfjWBDVRTX8BgmlkgnY0gmlwhKwSD5eKbXVsdGlhZGRyc4wACgSsEg-XBo463QOCcnOFAAMBAACJc2VjcDI1NmsxoQJiLhpxDfCqqRuteko1idhmirelB-WK_qDznoCfiUNAgoN0Y3CCjjmDdWRwgo47hXdha3UyCw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.230.127
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['56019', '56020', '56021', '56022', '56023']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 56019:56019 -p 56020:56020 -p 56021:56021 -p 56022:56022 -p 56023:56023 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=56021 --rest-port=56019 --tcp-port=56020 --discv5-udp-port=56022 --rest-address=0.0.0.0 --nat=extip:172.18.230.127 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f3a71cebf1d4e5b3a104fc906fbe0fd02cd3273a32a6a795ef9aa05dd38d3e7a --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --storenode=/ip4/172.18.15.151/tcp/36409/p2p/16Uiu2HAm22vi3BnLua9e7MP4gRM8Sf2Rd54E9eEUNkAwxK33C6HP --discv5-bootstrap-node=enr:-LO4QFIxDNpwzdEptBGliDdf1eRGK1iVVnNNNqex40-hvx3MbfEfMnWULiz_Oc6IgmzkeXIJJ94TvuT0YfjWBDVRTX8BgmlkgnY0gmlwhKwSD5eKbXVsdGlhZGRyc4wACgSsEg-XBo463QOCcnOFAAMBAACJc2VjcDI1NmsxoQJiLhpxDfCqqRuteko1idhmirelB-WK_qDznoCfiUNAgoN0Y3CCjjmDdWRwgo47hXdha3UyCw
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.230.127 waku 202b5fb077ccd3a4015aed9af8a784f0e48e42ed15679eda25e1734d5f3965f6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 202b5fb077cc. Setting up logs at ./log/docker/node3_2024-09-05_03-12-33__98416f3c-f954-4458-8d07-990093b328f2__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 56019
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56019/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QMXteg5uvJyUJDTjoQbNjIdSQ8t6qIjQdUst7iY_UZkrEl_A9YLHW78Dpu4-v7VTUjifG4OdpAmZUbgkBTZvREOGAZHAK2vygmlkgnY0gmlwhKwRAAyJc2VjcDI1NmsxoQLUwlyLVVQTNImHq3yo4Jiw970F90PPafinTeh1xLR33YN0Y3CC2tSDdWRwgtrWhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/56020/p2p/16Uiu2HAm9kCJiPWmPnSBvQgaZ9TYwxxWPELYNAc1zNxUDqERPZnU","/ip4/127.0.0.1/tcp/56021/ws/p2p/16Uiu2HAm9kCJiPWmPnSBvQgaZ9TYwxxWPELYNAc1zNxUDqERPZnU","/ip4/172.17.0.12/tcp/56020/p2p/16Uiu2HAm9kCJiPWmPnSBvQgaZ9TYwxxWPELYNAc1zNxUDqERPZnU","/ip4/172.17.0.12/tcp/56021/ws/p2p/16Uiu2HAm9kCJiPWmPnSBvQgaZ9TYwxxWPELYNAc1zNxUDqERPZnU"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54633/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36408/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54633/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54633/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:54633/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAm22vi3BnLua9e7MP4gRM8Sf2Rd54E9eEUNkAwxK33C6HP","multiaddrs":["/ip4/172.18.15.151/tcp/36409/p2p/16Uiu2HAm22vi3BnLua9e7MP4gRM8Sf2Rd54E9eEUNkAwxK33C6HP","/ip4/172.18.15.151/tcp/36410/ws/p2p/16Uiu2HAm22vi3BnLua9e7MP4gRM8Sf2Rd54E9eEUNkAwxK33C6HP"],"protocols":["/vac/waku/store-query/3.0.0","/vac/waku/lightpush/2.0.0-beta1","/vac/waku/relay/2.0.0","/vac/waku/store/2.0.0-beta4"],"connected":true,"pubsubTopics":["/waku/2/rs/3/0","/waku/2/rs/3/1"]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36408/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.3/tcp/54634/p2p/16Uiu2HAkuy5r6qfZrCtMJfYgoAU5HPTK82n11PC6aDkB87KSiCHs","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"},{"multiaddr":"/ip4/172.17.0.12/tcp/56020/p2p/16Uiu2HAm9kCJiPWmPnSBvQgaZ9TYwxxWPELYNAc1zNxUDqERPZnU","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:54633/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1725505989914705408}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.store:store.py:217 Checking that peer wakuorg/go-waku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56019/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-filter%2Fproto&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"109dcc117e2423c752fb0e3022806c42eb7776225934ef9f4ba18fab72c8e033","status_code":200,"status_desc":"OK","messages":[{"message_hash":"zPiKdGSihU957V9alNz9dalwyDf+tODa4RQEqhCtvSk="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 300f1951ca12
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id cc9b1e0485c3
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 202b5fb077cc
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.