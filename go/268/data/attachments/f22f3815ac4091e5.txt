[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_works_with_static_sharding with id: 2024-09-05_03-22-39__e235481a-bc03-4d60-94bd-7107d37409e3
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-05_03-22-39__e235481a-bc03-4d60-94bd-7107d37409e3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.60.80
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['38474', '38475', '38476', '38477', '38478']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 38474:38474 -p 38475:38475 -p 38476:38476 -p 38477:38477 -p 38478:38478 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=38476 --rest-port=38474 --tcp-port=38475 --discv5-udp-port=38477 --rest-address=0.0.0.0 --nat=extip:172.18.60.80 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=d5c7dbfc162caa7b5cc6b3f5e2b3312c98d0a0aee2b7afd23fbfbc783c5b86db --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=38478 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/2/0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.60.80 waku 071613240f49c029a3e85da7e0d9d58c1c8cfdd1d981c1607be6d8d296c2e876
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 071613240f49. Setting up logs at ./log/docker/node1_2024-09-05_03-22-39__e235481a-bc03-4d60-94bd-7107d37409e3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 38474
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38474/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:38474/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.60.80/tcp/38475/p2p/16Uiu2HAmE7pLx7hgZXbTsWxuKKUqZQUWkTbiJvTZWYPQ856cvpm6","/ip4/172.18.60.80/tcp/38476/ws/p2p/16Uiu2HAmE7pLx7hgZXbTsWxuKKUqZQUWkTbiJvTZWYPQ856cvpm6"],"enrUri":"enr:-LO4QJNSZ0Cgb3_bZoYcYQtmBL6a6aW_kt7Aq4Iq_A-CyiS6VsJALoV7oB5LKuJ4ScL5RbMdyxQndCWVlBIQcNS1zzgBgmlkgnY0gmlwhKwSPFCKbXVsdGlhZGRyc4wACgSsEjxQBpZM3QOCcnOFAAIBAACJc2VjcDI1NmsxoQMVuw4dCmWOURQ8yWOkOw4Ykx7NJqif13FG1cNCWseMsYN0Y3CClkuDdWRwgpZNhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-05_03-22-39__e235481a-bc03-4d60-94bd-7107d37409e3__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.144.218
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['63255', '63256', '63257', '63258', '63259']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 63255:63255 -p 63256:63256 -p 63257:63257 -p 63258:63258 -p 63259:63259 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=63257 --rest-port=63255 --tcp-port=63256 --discv5-udp-port=63258 --rest-address=0.0.0.0 --nat=extip:172.18.144.218 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=c5beadd5e6dbb9fb95c78e89fb22ee4cdd1ccffc9b51ca724b2ee0f9dd4da925 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-LO4QJNSZ0Cgb3_bZoYcYQtmBL6a6aW_kt7Aq4Iq_A-CyiS6VsJALoV7oB5LKuJ4ScL5RbMdyxQndCWVlBIQcNS1zzgBgmlkgnY0gmlwhKwSPFCKbXVsdGlhZGRyc4wACgSsEjxQBpZM3QOCcnOFAAIBAACJc2VjcDI1NmsxoQMVuw4dCmWOURQ8yWOkOw4Ykx7NJqif13FG1cNCWseMsYN0Y3CClkuDdWRwgpZNhXdha3UyBQ --filternode=/ip4/172.18.60.80/tcp/38475/p2p/16Uiu2HAmE7pLx7hgZXbTsWxuKKUqZQUWkTbiJvTZWYPQ856cvpm6 --pubsub-topic=/waku/2/rs/2/0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.144.218 waku b2309d3e6746f68d8fb545b83b7ea05dfb0a2fbbfa3930cf6f61735c7bca253b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID b2309d3e6746. Setting up logs at ./log/docker/node2_2024-09-05_03-22-39__e235481a-bc03-4d60-94bd-7107d37409e3__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 63255
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63255/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QIoUzKLe6dZCb413ikONYUjZL6zXCX8VhxQYCY6p2wGGKWwp-ZcDg52y9XTvUVW7NqBUZb7kehBzPKjZM0r8qm6GAZHANKapgmlkgnY0gmlwhKwRAAmJc2VjcDI1NmsxoQIun4zGeFaJQC0aU9bMFlMvAvWprF9QnUSh4RZOQC_JRIN0Y3CC9xiDdWRwgvcahXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/63256/p2p/16Uiu2HAkxZfqiqwWxy1p32GsoAcdK1t7bvZGWS8uM1UthKdfL5Fq","/ip4/127.0.0.1/tcp/63257/ws/p2p/16Uiu2HAkxZfqiqwWxy1p32GsoAcdK1t7bvZGWS8uM1UthKdfL5Fq","/ip4/172.17.0.9/tcp/63256/p2p/16Uiu2HAkxZfqiqwWxy1p32GsoAcdK1t7bvZGWS8uM1UthKdfL5Fq","/ip4/172.17.0.9/tcp/63257/ws/p2p/16Uiu2HAkxZfqiqwWxy1p32GsoAcdK1t7bvZGWS8uM1UthKdfL5Fq"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63255/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.60.80/tcp/38475/p2p/16Uiu2HAmE7pLx7hgZXbTsWxuKKUqZQUWkTbiJvTZWYPQ856cvpm6", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38474/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63255/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "0fe9634e-78a5-4ac0-ab40-76b4bd7683e2", "contentFilters": ["/myapp/1/latest/proto"], "pubsubTopic": "/waku/2/rs/2/0"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"0fe9634e-78a5-4ac0-ab40-76b4bd7683e2","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:38474/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:186 Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63255/filter/v2/messages/%2Fwaku%2F2%2Frs%2F2%2F0/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1725506562788921088,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 071613240f49
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id b2309d3e6746
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.