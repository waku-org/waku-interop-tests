[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_valid_meta with id: 2024-09-19_03-18-52__ac2cb4cd-639a-46a6-ae83-8fb2c1993a22
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-19_03-18-52__ac2cb4cd-639a-46a6-ae83-8fb2c1993a22__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.221.32
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['28115', '28116', '28117', '28118', '28119']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 28115:28115 -p 28116:28116 -p 28117:28117 -p 28118:28118 -p 28119:28119 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28117 --rest-port=28115 --tcp-port=28116 --discv5-udp-port=28118 --rest-address=0.0.0.0 --nat=extip:172.18.221.32 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=71949a8ed35add32eafa656bfccbaee0acac4c3d4ab10edf9f713bfae390d2b1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28119 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.221.32 waku 2f6de312941b5f6719ba4ed0c617b635e13737ac6724290925a13b11f12be335
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 2f6de312941b. Setting up logs at ./log/docker/receiving_node1_2024-09-19_03-18-52__ac2cb4cd-639a-46a6-ae83-8fb2c1993a22__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 28115
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28115/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28115/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.221.32/tcp/28116/p2p/16Uiu2HAmCeg9GutVgMTMgEpDJZTjyrJXSHzHhvpgqoFRFkzpBWF7","/ip4/172.18.221.32/tcp/28117/ws/p2p/16Uiu2HAmCeg9GutVgMTMgEpDJZTjyrJXSHzHhvpgqoFRFkzpBWF7"],"enrUri":"enr:-LO4QL3ZW-G5AxoONc9WMalKZuhbbq9mauwfF8Pl3yWkNhxcapn3ASraVoG_CqJLdQbD5Q85nEhKs_E5zp5gB405_G4BgmlkgnY0gmlwhKwS3SCKbXVsdGlhZGRyc4wACgSsEt0gBm3V3QOCcnOFAAMBAACJc2VjcDI1NmsxoQL_62nBi8NRblqWZNKSajex94HP0neQ7dlqmavbhOmIJoN0Y3CCbdSDdWRwgm3WhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-19_03-18-52__ac2cb4cd-639a-46a6-ae83-8fb2c1993a22__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.247.25
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['33738', '33739', '33740', '33741', '33742']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 33738:33738 -p 33739:33739 -p 33740:33740 -p 33741:33741 -p 33742:33742 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=33740 --rest-port=33738 --tcp-port=33739 --discv5-udp-port=33741 --rest-address=0.0.0.0 --nat=extip:172.18.247.25 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3bdd6be4623f67ae6f2ed7b8bfd74308d3356d459fcbfaa8e3b4dfb424ecf1a5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=33742 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.20.215
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['12721', '12722', '12723', '12724', '12725']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 12721:12721 -p 12722:12722 -p 12723:12723 -p 12724:12724 -p 12725:12725 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=12723 --rest-port=12721 --tcp-port=12722 --discv5-udp-port=12724 --rest-address=0.0.0.0 --nat=extip:172.18.20.215 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fb4c5b5aaf8779aac9bee1594e20f6dbabd2dafd4cff56bc9ed4d98449afc2bc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=12725 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.20.215 waku eaf6fadc39d66879ae046f6d94acaa9ad35b40c24dd31a640de9b317de8538b1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID eaf6fadc39d6. Setting up logs at ./log/docker/receiving_node2_2024-09-19_03-18-52__ac2cb4cd-639a-46a6-ae83-8fb2c1993a22__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 12721
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12721/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12721/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.20.215/tcp/12722/p2p/16Uiu2HAm4T1EWc8Sn2Hae4FTW2Si88mUuZYbmRwmkQ7C9UuYzQhF","/ip4/172.18.20.215/tcp/12723/ws/p2p/16Uiu2HAm4T1EWc8Sn2Hae4FTW2Si88mUuZYbmRwmkQ7C9UuYzQhF"],"enrUri":"enr:-LO4QKWr246WVG4xHitmZmAQdplP_y7L3naag9kTlgPahebJCvC6RUOf1EV_TzH2CzTkLpZy6NsE6P3Okv1yP5mfzpkBgmlkgnY0gmlwhKwSFNeKbXVsdGlhZGRyc4wACgSsEhTXBjGz3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKGEIiPOnEZgTr12Z_Kb7-qBYYg3KxxvpgriOjm6yvbcoN0Y3CCMbKDdWRwgjG0hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12721/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.221.32/tcp/28116/p2p/16Uiu2HAmCeg9GutVgMTMgEpDJZTjyrJXSHzHhvpgqoFRFkzpBWF7"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-19_03-18-52__ac2cb4cd-639a-46a6-ae83-8fb2c1993a22__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.44.87
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['16774', '16775', '16776', '16777', '16778']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 16774:16774 -p 16775:16775 -p 16776:16776 -p 16777:16777 -p 16778:16778 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=16776 --rest-port=16774 --tcp-port=16775 --discv5-udp-port=16777 --rest-address=0.0.0.0 --nat=extip:172.18.44.87 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8bff9a40fcc3406abf7be78d7bfeabd751ecd4f9ecb366d76c76cca77f76eada --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-LO4QL3ZW-G5AxoONc9WMalKZuhbbq9mauwfF8Pl3yWkNhxcapn3ASraVoG_CqJLdQbD5Q85nEhKs_E5zp5gB405_G4BgmlkgnY0gmlwhKwS3SCKbXVsdGlhZGRyc4wACgSsEt0gBm3V3QOCcnOFAAMBAACJc2VjcDI1NmsxoQL_62nBi8NRblqWZNKSajex94HP0neQ7dlqmavbhOmIJoN0Y3CCbdSDdWRwgm3WhXdha3UyCQ --lightpushnode=/ip4/172.18.221.32/tcp/28116/p2p/16Uiu2HAmCeg9GutVgMTMgEpDJZTjyrJXSHzHhvpgqoFRFkzpBWF7 --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.44.87 waku 30076b3b1cd23ec1b59f579eb77c052e7eacc868aa01bb466b974568e2281878
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 30076b3b1cd2. Setting up logs at ./log/docker/lightpush_node1_2024-09-19_03-18-52__ac2cb4cd-639a-46a6-ae83-8fb2c1993a22__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 16774
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16774/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QB7iqPTULPXZxGCwrD0Lr5ymLOg__1sBT100c_3f-MsgLdXuhOZwCukNxJsrb3qUZ3lZODJ1UudoYwjUP5169VaGAZIISkLCgmlkgnY0gmlwhKwRAA2Jc2VjcDI1NmsxoQN9Jvpmp2aYxoD3kfIO_QAJ9HzO20uhDvcmVcQtaS9Kf4N0Y3CCQYeDdWRwgkGJhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/16775/p2p/16Uiu2HAmM5XnW1h5nVTWRQqs3kNhwZYuuwQUiX8nGGy2Wc3NqbVG","/ip4/127.0.0.1/tcp/16776/ws/p2p/16Uiu2HAmM5XnW1h5nVTWRQqs3kNhwZYuuwQUiX8nGGy2Wc3NqbVG","/ip4/172.17.0.13/tcp/16775/p2p/16Uiu2HAmM5XnW1h5nVTWRQqs3kNhwZYuuwQUiX8nGGy2Wc3NqbVG","/ip4/172.17.0.13/tcp/16776/ws/p2p/16Uiu2HAmM5XnW1h5nVTWRQqs3kNhwZYuuwQUiX8nGGy2Wc3NqbVG"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16774/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.221.32/tcp/28116/p2p/16Uiu2HAmCeg9GutVgMTMgEpDJZTjyrJXSHzHhvpgqoFRFkzpBWF7", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16774/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.20.215/tcp/12722/p2p/16Uiu2HAm4T1EWc8Sn2Hae4FTW2Si88mUuZYbmRwmkQ7C9UuYzQhF", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:28115/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:12721/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16774/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1726715938544986112, "meta": "TGlnaHQgcHVzaCB3b3JrcyEh"}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28115/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1726715938544986112,"meta":"TGlnaHQgcHVzaCB3b3JrcyEh","ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:12721/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1726715938544986112,"meta":"TGlnaHQgcHVzaCB3b3JrcyEh","ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 2f6de312941b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id eaf6fadc39d6
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 30076b3b1cd2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.