[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_lightpushed_message with id: 2024-09-19_03-26-40__c2165e90-600e-45ab-8ef7-f4c2742b5b07
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-09-19_03-26-40__c2165e90-600e-45ab-8ef7-f4c2742b5b07__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.129.60
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['62235', '62236', '62237', '62238', '62239']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 62235:62235 -p 62236:62236 -p 62237:62237 -p 62238:62238 -p 62239:62239 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62237 --rest-port=62235 --tcp-port=62236 --discv5-udp-port=62238 --rest-address=0.0.0.0 --nat=extip:172.18.129.60 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=205dfaaadfbf43bedd7ac3b69f1d0f7e0da5d0ee4ea7f82cee9dcecadc4e42d5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62239 --metrics-logging=true --store=true --relay=true --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.129.60 waku d4a722ba80cb624b9d9e8a5f3cb7dc952add2f61d25a3669bca506f948351f74
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID d4a722ba80cb. Setting up logs at ./log/docker/publishing_node1_2024-09-19_03-26-40__c2165e90-600e-45ab-8ef7-f4c2742b5b07__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 62235
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62235/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62235/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.129.60/tcp/62236/p2p/16Uiu2HAm5TjCcaEB3n5kMeEq8a4xVQ6vKefyKKN3VN4CqjhXk5Bs","/ip4/172.18.129.60/tcp/62237/ws/p2p/16Uiu2HAm5TjCcaEB3n5kMeEq8a4xVQ6vKefyKKN3VN4CqjhXk5Bs"],"enrUri":"enr:-LO4QDI8ytj-k5HCc8Xmo__PNaq8TX5LvjFA2PRfQBEmAItnFOjPluq59Ijn6-hKT_w2r5elxFr3bMH8atrYq_yRzncBgmlkgnY0gmlwhKwSgTyKbXVsdGlhZGRyc4wACgSsEoE8BvMd3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKVG6xFFdJwjS3wmItLszG1Em1brqxVxGPcGZ59uQQQHoN0Y3CC8xyDdWRwgvMehXdha3UyCw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node2_2024-09-19_03-26-40__c2165e90-600e-45ab-8ef7-f4c2742b5b07__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.214.201
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['63755', '63756', '63757', '63758', '63759']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 63755:63755 -p 63756:63756 -p 63757:63757 -p 63758:63758 -p 63759:63759 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63757 --rest-port=63755 --tcp-port=63756 --discv5-udp-port=63758 --rest-address=0.0.0.0 --nat=extip:172.18.214.201 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b0aee2c84af90d1f8ee7b9de19ca3ceab3b587fbded60ba9aebb39712d568dea --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63759 --metrics-logging=true --store=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.214.201 waku 2c4ddc60416235310972379f2eeba50bf3bd564c38a1a157f8dd4794c71aaa12
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 2c4ddc604162. Setting up logs at ./log/docker/publishing_node2_2024-09-19_03-26-40__c2165e90-600e-45ab-8ef7-f4c2742b5b07__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 63755
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63755/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63755/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.214.201/tcp/63756/p2p/16Uiu2HAm56Nbz3xEuDpEMMsfeDKrcfFsiy7UMzTNDaZnQRuUT24M","/ip4/172.18.214.201/tcp/63757/ws/p2p/16Uiu2HAm56Nbz3xEuDpEMMsfeDKrcfFsiy7UMzTNDaZnQRuUT24M"],"enrUri":"enr:-LO4QKJSRrU7_1RqWyfXGmE1UXLzjFpVsyJNID9ljOufLV6UdhKJhv8b0SoqrNfOE4-2P7pPWi8g4636i1giz7zWMMQBgmlkgnY0gmlwhKwS1smKbXVsdGlhZGRyc4wACgSsEtbJBvkN3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKPoy_PzJDnyISElK7LC-jz-cH_doGtWu7nok07qATjpoN0Y3CC-QyDdWRwgvkOhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63755/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.129.60/tcp/62236/p2p/16Uiu2HAm5TjCcaEB3n5kMeEq8a4xVQ6vKefyKKN3VN4CqjhXk5Bs"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2024-09-19_03-26-40__c2165e90-600e-45ab-8ef7-f4c2742b5b07__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.93.214
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['17034', '17035', '17036', '17037', '17038']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 17034:17034 -p 17035:17035 -p 17036:17036 -p 17037:17037 -p 17038:17038 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=17036 --rest-port=17034 --tcp-port=17035 --discv5-udp-port=17037 --rest-address=0.0.0.0 --nat=extip:172.18.93.214 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=27daca4e753f4f1ef4bcf3adab9f2b8a7589c2d4919aeda3df19d789f7ab4112 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-LO4QDI8ytj-k5HCc8Xmo__PNaq8TX5LvjFA2PRfQBEmAItnFOjPluq59Ijn6-hKT_w2r5elxFr3bMH8atrYq_yRzncBgmlkgnY0gmlwhKwSgTyKbXVsdGlhZGRyc4wACgSsEoE8BvMd3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKVG6xFFdJwjS3wmItLszG1Em1brqxVxGPcGZ59uQQQHoN0Y3CC8xyDdWRwgvMehXdha3UyCw --storenode=/ip4/172.18.129.60/tcp/62236/p2p/16Uiu2HAm5TjCcaEB3n5kMeEq8a4xVQ6vKefyKKN3VN4CqjhXk5Bs --store=false --relay=false --lightpush=true --lightpushnode=/ip4/172.18.129.60/tcp/62236/p2p/16Uiu2HAm5TjCcaEB3n5kMeEq8a4xVQ6vKefyKKN3VN4CqjhXk5Bs
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.93.214 waku 66db76f2f53dd325692b35ad4b1b53930103643369e32ba83ba246f6eb3b7c44
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 66db76f2f53d. Setting up logs at ./log/docker/store_node1_2024-09-19_03-26-40__c2165e90-600e-45ab-8ef7-f4c2742b5b07__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 17034
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17034/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QAdV_rrL_kR9eDF1riLR7AdYIU234Tq8mswo_a_AFhb9JEfIromzutJqqOIriwhQ2MYcs15pDW3tS8rNQ4AlluGGAZIIUWQigmlkgnY0gmlwhKwRAAmJc2VjcDI1NmsxoQKgHjJP0exbk5sNyy3ugikaVbtUt6dRyhgjHGWI0tHqLYN0Y3CCQouDdWRwgkKNhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/17035/p2p/16Uiu2HAm6ChvB5udbiAGdNyMuStonstKtPEdcrCMBiVr1NTNwAp4","/ip4/127.0.0.1/tcp/17036/ws/p2p/16Uiu2HAm6ChvB5udbiAGdNyMuStonstKtPEdcrCMBiVr1NTNwAp4","/ip4/172.17.0.9/tcp/17035/p2p/16Uiu2HAm6ChvB5udbiAGdNyMuStonstKtPEdcrCMBiVr1NTNwAp4","/ip4/172.17.0.9/tcp/17036/ws/p2p/16Uiu2HAm6ChvB5udbiAGdNyMuStonstKtPEdcrCMBiVr1NTNwAp4"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:17034/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.129.60/tcp/62236/p2p/16Uiu2HAm5TjCcaEB3n5kMeEq8a4xVQ6vKefyKKN3VN4CqjhXk5Bs", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:17034/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.214.201/tcp/63756/p2p/16Uiu2HAm56Nbz3xEuDpEMMsfeDKrcfFsiy7UMzTNDaZnQRuUT24M", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62235/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63755/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:17034/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1726716405911029504}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62235/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"cEEtsjuLq904OXDPYQimIR4MQr/waGImzzQTy/Mgkmg="}]}'
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/go-waku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:17034/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"38137401cf247873d66f0c4c3a8c1a99a5712ddb8f1d88ba900b6341d985c1c6","status_code":200,"status_desc":"OK","messages":[{"message_hash":"cEEtsjuLq904OXDPYQimIR4MQr/waGImzzQTy/Mgkmg="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id d4a722ba80cb
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 2c4ddc604162
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 66db76f2f53d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.