[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_multiple_lightpush_nodes with id: 2024-09-08_03-18-24__57ea883b-a5c9-49e4-ad07-d0c0d1ec5a2c
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-08_03-18-24__57ea883b-a5c9-49e4-ad07-d0c0d1ec5a2c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.197.97
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['5608', '5609', '5610', '5611', '5612']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 5608:5608 -p 5609:5609 -p 5610:5610 -p 5611:5611 -p 5612:5612 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=5610 --rest-port=5608 --tcp-port=5609 --discv5-udp-port=5611 --rest-address=0.0.0.0 --nat=extip:172.18.197.97 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e8fb07baeb0dd9dbcac93a7a31ab622ed84ca6acc8debae0b68bd7a2d3bacccd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=5612 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.197.97 waku 9174e5cbd0aa921f1d20adbbd5353c234256fcf5868bedc5640ae4e5c8162ad7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 9174e5cbd0aa. Setting up logs at ./log/docker/receiving_node1_2024-09-08_03-18-24__57ea883b-a5c9-49e4-ad07-d0c0d1ec5a2c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 5608
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5608/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5608/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.197.97/tcp/5609/p2p/16Uiu2HAmJbLtS1u6Ywi8eBuoE4zomDYL8MP82agaqxP1A88TJxcR","/ip4/172.18.197.97/tcp/5610/ws/p2p/16Uiu2HAmJbLtS1u6Ywi8eBuoE4zomDYL8MP82agaqxP1A88TJxcR"],"enrUri":"enr:-LO4QNq7losn59s5XrG5eHkPNhavPJx4umgD63XfyhDdFX8zNK7uWkXwThCl0ocl4J1sdNcJHIryd_PU17kOnUU73XIBgmlkgnY0gmlwhKwSxWGKbXVsdGlhZGRyc4wACgSsEsVhBhXq3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNYNwT-gfsJwfmXFqUucgB7bOKyU3cy3qdGym1EWdj0qoN0Y3CCFemDdWRwghXrhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-08_03-18-24__57ea883b-a5c9-49e4-ad07-d0c0d1ec5a2c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.175.106
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['21167', '21168', '21169', '21170', '21171']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 21167:21167 -p 21168:21168 -p 21169:21169 -p 21170:21170 -p 21171:21171 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=21169 --rest-port=21167 --tcp-port=21168 --discv5-udp-port=21170 --rest-address=0.0.0.0 --nat=extip:172.18.175.106 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=11c451a2bc745f7ad1a23dd00bdcdcfbecbabcef5ebdac273dcc61a2bdb28fc8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=21171 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.175.106 waku d362c2bc1f8c6d50976d6835dc3959ce7fdd3e81ffbe8880761688afcb0893e5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID d362c2bc1f8c. Setting up logs at ./log/docker/receiving_node2_2024-09-08_03-18-24__57ea883b-a5c9-49e4-ad07-d0c0d1ec5a2c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 21167
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21167/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21167/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.175.106/tcp/21168/p2p/16Uiu2HAmSnatBQQgbtbseuGPPeAxfMeCf4yy7xVQJmWSJ8AYjQdk","/ip4/172.18.175.106/tcp/21169/ws/p2p/16Uiu2HAmSnatBQQgbtbseuGPPeAxfMeCf4yy7xVQJmWSJ8AYjQdk"],"enrUri":"enr:-LO4QDTX5hi0Z27E-FoZNPazN0rj1axFJTTDS7vvqXHzD7B6ertRkM5OKbY9tGa5yG-eNYebrkYivZjvV93rt8TEk9MBgmlkgnY0gmlwhKwSr2qKbXVsdGlhZGRyc4wACgSsEq9qBlKx3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPR9bqP5rbEFuSozOPkMLWn_Henqmf4dYEspC52ZHqJ74N0Y3CCUrCDdWRwglKyhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21167/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.197.97/tcp/5609/p2p/16Uiu2HAmJbLtS1u6Ywi8eBuoE4zomDYL8MP82agaqxP1A88TJxcR"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-08_03-18-24__57ea883b-a5c9-49e4-ad07-d0c0d1ec5a2c__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.78.109
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['1733', '1734', '1735', '1736', '1737']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 1733:1733 -p 1734:1734 -p 1735:1735 -p 1736:1736 -p 1737:1737 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=1735 --rest-port=1733 --tcp-port=1734 --discv5-udp-port=1736 --rest-address=0.0.0.0 --nat=extip:172.18.78.109 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2d16bfdbd5eaeefe95918a9be50cd1f2fd6a6bd3a366cdac80dc84cdaf4c4add --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-LO4QNq7losn59s5XrG5eHkPNhavPJx4umgD63XfyhDdFX8zNK7uWkXwThCl0ocl4J1sdNcJHIryd_PU17kOnUU73XIBgmlkgnY0gmlwhKwSxWGKbXVsdGlhZGRyc4wACgSsEsVhBhXq3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNYNwT-gfsJwfmXFqUucgB7bOKyU3cy3qdGym1EWdj0qoN0Y3CCFemDdWRwghXrhXdha3UyCQ --lightpushnode=/ip4/172.18.197.97/tcp/5609/p2p/16Uiu2HAmJbLtS1u6Ywi8eBuoE4zomDYL8MP82agaqxP1A88TJxcR --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.78.109 waku 105dc543d40a534ed0442054f4870f180e566d620c280404f862e0ee31629195
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 105dc543d40a. Setting up logs at ./log/docker/lightpush_node1_2024-09-08_03-18-24__57ea883b-a5c9-49e4-ad07-d0c0d1ec5a2c__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 1733
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1733/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QPRbdXeoVVSljk-foFdjsy304pWV-Uu-Pvm8uTFISzEQKXGMmi1cz1BMeVPJQmstH3FLdpqNMJidEFNC5n_JmlGGAZHPo90JgmlkgnY0gmlwhKwRAAWJc2VjcDI1NmsxoQO5ZAm77iY_yiyFrdAm3NfAQOUx_R70o43IYqdF8HWdzIN0Y3CCBsaDdWRwggbIhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/1734/p2p/16Uiu2HAmR8gFPP989UvrsGgG4dHTRYHjZpkJhJjNDyEa7uSKVXeK","/ip4/127.0.0.1/tcp/1735/ws/p2p/16Uiu2HAmR8gFPP989UvrsGgG4dHTRYHjZpkJhJjNDyEa7uSKVXeK","/ip4/172.17.0.5/tcp/1734/p2p/16Uiu2HAmR8gFPP989UvrsGgG4dHTRYHjZpkJhJjNDyEa7uSKVXeK","/ip4/172.17.0.5/tcp/1735/ws/p2p/16Uiu2HAmR8gFPP989UvrsGgG4dHTRYHjZpkJhJjNDyEa7uSKVXeK"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1733/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.197.97/tcp/5609/p2p/16Uiu2HAmJbLtS1u6Ywi8eBuoE4zomDYL8MP82agaqxP1A88TJxcR", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1733/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.175.106/tcp/21168/p2p/16Uiu2HAmSnatBQQgbtbseuGPPeAxfMeCf4yy7xVQJmWSJ8AYjQdk", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node2_2024-09-08_03-18-24__57ea883b-a5c9-49e4-ad07-d0c0d1ec5a2c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.169.129
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['8226', '8227', '8228', '8229', '8230']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 8226:8226 -p 8227:8227 -p 8228:8228 -p 8229:8229 -p 8230:8230 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=8228 --rest-port=8226 --tcp-port=8227 --discv5-udp-port=8229 --rest-address=0.0.0.0 --nat=extip:172.18.169.129 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e6bdd2efce6baa24503bf756b89afacfbdf048da2d9eacdaa7dfe3cc477e10c6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=8230 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QNq7losn59s5XrG5eHkPNhavPJx4umgD63XfyhDdFX8zNK7uWkXwThCl0ocl4J1sdNcJHIryd_PU17kOnUU73XIBgmlkgnY0gmlwhKwSxWGKbXVsdGlhZGRyc4wACgSsEsVhBhXq3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNYNwT-gfsJwfmXFqUucgB7bOKyU3cy3qdGym1EWdj0qoN0Y3CCFemDdWRwghXrhXdha3UyCQ --lightpushnode=/ip4/172.18.197.97/tcp/5609/p2p/16Uiu2HAmJbLtS1u6Ywi8eBuoE4zomDYL8MP82agaqxP1A88TJxcR --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.169.129 waku 464190e72652531b0a46701c8bd14d151cc2ac0d5bb26590a05cd85532b62019
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 464190e72652. Setting up logs at ./log/docker/lightpush_node2_2024-09-08_03-18-24__57ea883b-a5c9-49e4-ad07-d0c0d1ec5a2c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 8226
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8226/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8226/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.169.129/tcp/8227/p2p/16Uiu2HAmMYnuSXdpj6G3hF4hwnhkmGUsZgHpb3V5CqzouK5EKTmy","/ip4/172.18.169.129/tcp/8228/ws/p2p/16Uiu2HAmMYnuSXdpj6G3hF4hwnhkmGUsZgHpb3V5CqzouK5EKTmy"],"enrUri":"enr:-LO4QBChI_YjoJgr_aUo4INgpmWc8fg38H989FgmqDA9TpXJDvCiGni8K5o_WdEjdF7TqYpAISFonlufEbn2xStIsycBgmlkgnY0gmlwhKwSqYGKbXVsdGlhZGRyc4wACgSsEqmBBiAk3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOEIsF9gG0qa-RJPs1zUmfWTZU4mei-3KIwFGnjjsW5eIN0Y3CCICODdWRwgiAlhXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8226/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.197.97/tcp/5609/p2p/16Uiu2HAmJbLtS1u6Ywi8eBuoE4zomDYL8MP82agaqxP1A88TJxcR"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8226/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.175.106/tcp/21168/p2p/16Uiu2HAmSnatBQQgbtbseuGPPeAxfMeCf4yy7xVQJmWSJ8AYjQdk"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node3_2024-09-08_03-18-24__57ea883b-a5c9-49e4-ad07-d0c0d1ec5a2c__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.53.177
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['4026', '4027', '4028', '4029', '4030']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 4026:4026 -p 4027:4027 -p 4028:4028 -p 4029:4029 -p 4030:4030 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=4028 --rest-port=4026 --tcp-port=4027 --discv5-udp-port=4029 --rest-address=0.0.0.0 --nat=extip:172.18.53.177 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=02bdc370c1cb17d0fbbaa1e4f7bedbad091ebfbca6903c1c6fe33a87891c7cc3 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-LO4QNq7losn59s5XrG5eHkPNhavPJx4umgD63XfyhDdFX8zNK7uWkXwThCl0ocl4J1sdNcJHIryd_PU17kOnUU73XIBgmlkgnY0gmlwhKwSxWGKbXVsdGlhZGRyc4wACgSsEsVhBhXq3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNYNwT-gfsJwfmXFqUucgB7bOKyU3cy3qdGym1EWdj0qoN0Y3CCFemDdWRwghXrhXdha3UyCQ --lightpushnode=/ip4/172.18.197.97/tcp/5609/p2p/16Uiu2HAmJbLtS1u6Ywi8eBuoE4zomDYL8MP82agaqxP1A88TJxcR --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.53.177 waku 0a61dbaf248cc36bedc988e558ec87c1d1b00742cad071e6ce14def27403f126
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 0a61dbaf248c. Setting up logs at ./log/docker/lightpush_node3_2024-09-08_03-18-24__57ea883b-a5c9-49e4-ad07-d0c0d1ec5a2c__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 4026
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:4026/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QEVuPAcc0KdXsdGQWzR_fgf5x3gAVYYjhTgU0EqbKu-ZI6izE6tKNio-l67-LAON-XIVJ_3spO-R_X9M20zvySaGAZHPo-oigmlkgnY0gmlwhKwRAAyJc2VjcDI1NmsxoQJ-kTlApONfs8_Gm_-xhwebTl0zs9YK0P3rRKXSu5npHIN0Y3CCD7uDdWRwgg-9hXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/4027/p2p/16Uiu2HAm3wjnZrUtLLbuZDqkas7VC4FrpAnZAfTWtC7FrebLQXTy","/ip4/127.0.0.1/tcp/4028/ws/p2p/16Uiu2HAm3wjnZrUtLLbuZDqkas7VC4FrpAnZAfTWtC7FrebLQXTy","/ip4/172.17.0.12/tcp/4027/p2p/16Uiu2HAm3wjnZrUtLLbuZDqkas7VC4FrpAnZAfTWtC7FrebLQXTy","/ip4/172.17.0.12/tcp/4028/ws/p2p/16Uiu2HAm3wjnZrUtLLbuZDqkas7VC4FrpAnZAfTWtC7FrebLQXTy"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4026/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.197.97/tcp/5609/p2p/16Uiu2HAmJbLtS1u6Ywi8eBuoE4zomDYL8MP82agaqxP1A88TJxcR", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4026/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.175.106/tcp/21168/p2p/16Uiu2HAmSnatBQQgbtbseuGPPeAxfMeCf4yy7xVQJmWSJ8AYjQdk", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node4_2024-09-08_03-18-24__57ea883b-a5c9-49e4-ad07-d0c0d1ec5a2c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.32.149
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['63090', '63091', '63092', '63093', '63094']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 63090:63090 -p 63091:63091 -p 63092:63092 -p 63093:63093 -p 63094:63094 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63092 --rest-port=63090 --tcp-port=63091 --discv5-udp-port=63093 --rest-address=0.0.0.0 --nat=extip:172.18.32.149 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9e0ff07ed5d98c21ccecd14adbaacab6b583ccf8a0eedbae8c4ad1bbd41bc4da --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63094 --metrics-logging=true --discv5-bootstrap-node=enr:-LO4QNq7losn59s5XrG5eHkPNhavPJx4umgD63XfyhDdFX8zNK7uWkXwThCl0ocl4J1sdNcJHIryd_PU17kOnUU73XIBgmlkgnY0gmlwhKwSxWGKbXVsdGlhZGRyc4wACgSsEsVhBhXq3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNYNwT-gfsJwfmXFqUucgB7bOKyU3cy3qdGym1EWdj0qoN0Y3CCFemDdWRwghXrhXdha3UyCQ --lightpushnode=/ip4/172.18.197.97/tcp/5609/p2p/16Uiu2HAmJbLtS1u6Ywi8eBuoE4zomDYL8MP82agaqxP1A88TJxcR --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.32.149 waku 07406f97225d186d2923f71c1a8447d7ca717789e8dd29104420355e0203c5e0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 07406f97225d. Setting up logs at ./log/docker/lightpush_node4_2024-09-08_03-18-24__57ea883b-a5c9-49e4-ad07-d0c0d1ec5a2c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 63090
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63090/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63090/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.32.149/tcp/63091/p2p/16Uiu2HAmGScB3DK39vPggsMPDe6wHVxqjscQCVwJ2FK45sK2ZQyg","/ip4/172.18.32.149/tcp/63092/ws/p2p/16Uiu2HAmGScB3DK39vPggsMPDe6wHVxqjscQCVwJ2FK45sK2ZQyg"],"enrUri":"enr:-LO4QMRlIirE1_esdorMdcJf9nsqmRELEzyP4EHYjJHx361GHx8IdKPPAcM2VneGoOamhop__t8eF5NJ64qGSByN3scBgmlkgnY0gmlwhKwSIJWKbXVsdGlhZGRyc4wACgSsEiCVBvZ03QOCcnOFAAMBAACJc2VjcDI1NmsxoQM4QrPintNkZFqZD7Jp7O0yg-ByrGJvrAcSGtv3Mwb744N0Y3CC9nODdWRwgvZ1hXdha3UyCA"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63090/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.197.97/tcp/5609/p2p/16Uiu2HAmJbLtS1u6Ywi8eBuoE4zomDYL8MP82agaqxP1A88TJxcR"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63090/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.175.106/tcp/21168/p2p/16Uiu2HAmSnatBQQgbtbseuGPPeAxfMeCf4yy7xVQJmWSJ8AYjQdk"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5608/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21167/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1733/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1725765514631800576}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5608/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1725765514631800576,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21167/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1725765514631800576,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8226/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1725765514747968000}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5608/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1725765514747968000,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21167/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1725765514747968000,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:4026/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1725765514861963776}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5608/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1725765514861963776,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21167/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1725765514861963776,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63090/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1725765514985585408}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5608/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1725765514985585408,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21167/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1725765514985585408,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 9174e5cbd0aa
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id d362c2bc1f8c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 105dc543d40a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 464190e72652
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 0a61dbaf248c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 07406f97225d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.