[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_main_node_only_lightpush__peer_full with id: 2024-12-13_03-25-15__bb9c9033-b22b-45ab-a090-439a530ab066
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-12-13_03-25-15__bb9c9033-b22b-45ab-a090-439a530ab066__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.231.183
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['46173', '46174', '46175', '46176', '46177']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 46173:46173 -p 46174:46174 -p 46175:46175 -p 46176:46176 -p 46177:46177 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=46175 --rest-port=46173 --tcp-port=46174 --discv5-udp-port=46176 --rest-address=0.0.0.0 --nat=extip:172.18.231.183 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=96fd12c9d3cf63f75beface4ed6c05defcbf9db4f95e35f819c6afff0de28ae9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=46177 --metrics-logging=true --lightpush=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.231.183 waku d55a1975be20d365e36a1843a2b61abc3ae3ebb8ab3c12e9a89425a6c8085a0c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID d55a1975be20. Setting up logs at ./log/docker/receiving_node1_2024-12-13_03-25-15__bb9c9033-b22b-45ab-a090-439a530ab066__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 46173
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 853326e41854. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46173/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46173/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.231.183/tcp/46174/p2p/16Uiu2HAm9iAdrEJCXvfN1PneP62iZg34q6HmmGHABbDMZktsDvMB","/ip4/172.18.231.183/tcp/46175/ws/p2p/16Uiu2HAm9iAdrEJCXvfN1PneP62iZg34q6HmmGHABbDMZktsDvMB"],"enrUri":"enr:-L24QNQm5agsIsxrsohsSUPN40V1rDUfcW82RuSgHVNlmvkRWXEhB7I4vmcBFIMLPDd0lEnrduf0RTgNvuMZHh0cGaUCgmlkgnY0gmlwhKwS57eKbXVsdGlhZGRyc5YACASsEue3BrReAAoErBLntwa0X90DgnJzhQADAQAAiXNlY3AyNTZrMaEC1D1Pv2QJqq1RbFL6E_kUDsRUciE78SaDaB5FH_oMo6aDdGNwgrReg3VkcIK0YIV3YWt1Mg0"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-12-13_03-25-15__bb9c9033-b22b-45ab-a090-439a530ab066__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.154.99
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['62139', '62140', '62141', '62142', '62143']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 62139:62139 -p 62140:62140 -p 62141:62141 -p 62142:62142 -p 62143:62143 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62141 --rest-port=62139 --tcp-port=62140 --discv5-udp-port=62142 --rest-address=0.0.0.0 --nat=extip:172.18.154.99 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1a9dc62a22959eeb3c3a17aff9abba5789dbfa5ce1a96be69f6c61b805082413 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62143 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.154.99 waku 6850e0981c4fbb301bf4c04a18ef03674de245b1f820e09cdcef0fdace802805
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 6850e0981c4f. Setting up logs at ./log/docker/receiving_node2_2024-12-13_03-25-15__bb9c9033-b22b-45ab-a090-439a530ab066__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 62139
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62139/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62139/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.154.99/tcp/62140/p2p/16Uiu2HAmRq8Wrb8fWXCN4ze3mzY4zTQ5SHCnKz9uVnFaYS678QsG","/ip4/172.18.154.99/tcp/62141/ws/p2p/16Uiu2HAmRq8Wrb8fWXCN4ze3mzY4zTQ5SHCnKz9uVnFaYS678QsG"],"enrUri":"enr:-L24QMIeAIXCobee6nqLQn5lBmHTBIXMA0apWVvbbe1VMTAzSgbKha7LEgkEKlH6k1U2MBcLV-aG4a93kANtGnHKjHkCgmlkgnY0gmlwhKwSmmOKbXVsdGlhZGRyc5YACASsEppjBvK8AAoErBKaYwbyvd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDw8D4YjaL_u0a-JLARjYEgdAIFJ6Y3WujrPc4_7eCrfeDdGNwgvK8g3VkcILyvoV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62139/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.231.183/tcp/46174/p2p/16Uiu2HAm9iAdrEJCXvfN1PneP62iZg34q6HmmGHABbDMZktsDvMB"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-12-13_03-25-15__bb9c9033-b22b-45ab-a090-439a530ab066__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.136.151
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['33709', '33710', '33711', '33712', '33713']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 33709:33709 -p 33710:33710 -p 33711:33711 -p 33712:33712 -p 33713:33713 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=33711 --rest-port=33709 --tcp-port=33710 --discv5-udp-port=33712 --rest-address=0.0.0.0 --nat=extip:172.18.136.151 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a98ee3cf6d0daef75eea4c15ff3b80edfeaf1b4bedc88c5101dafadc9f3fceeb --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QNQm5agsIsxrsohsSUPN40V1rDUfcW82RuSgHVNlmvkRWXEhB7I4vmcBFIMLPDd0lEnrduf0RTgNvuMZHh0cGaUCgmlkgnY0gmlwhKwS57eKbXVsdGlhZGRyc5YACASsEue3BrReAAoErBLntwa0X90DgnJzhQADAQAAiXNlY3AyNTZrMaEC1D1Pv2QJqq1RbFL6E_kUDsRUciE78SaDaB5FH_oMo6aDdGNwgrReg3VkcIK0YIV3YWt1Mg0 --lightpushnode=/ip4/172.18.231.183/tcp/46174/p2p/16Uiu2HAm9iAdrEJCXvfN1PneP62iZg34q6HmmGHABbDMZktsDvMB --lightpush=true --relay=false --pubsub-topic=/waku/2/rs/3/1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.136.151 waku 9c967cf240b32e34f3fb5f230ffe236ec036694495d2c315610dab4ee6f2527b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 9c967cf240b3. Setting up logs at ./log/docker/lightpush_node1_2024-12-13_03-25-15__bb9c9033-b22b-45ab-a090-439a530ab066__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 33709
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:33709/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QJaEyEg8imoutIxuEkbomj2P7qZ62E13zrH3woEpY4ilOV3w2qnxVUike7QKeiLl2Iu9in7DAsWl37quiiRoTguGAZO-DKFdgmlkgnY0gmlwhKwRAAmCcnOFAAMBAAGJc2VjcDI1NmsxoQNDFVeqdCDd1G53YMik6Ik9dPr8cC6N6lUFPLCSACcVJYN0Y3CCg66DdWRwgoOwhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/33710/p2p/16Uiu2HAmHArYNgUPSRp5EQN8e9wiCKGFgoxudMbktkQiBPrbU6ur","/ip4/127.0.0.1/tcp/33711/ws/p2p/16Uiu2HAmHArYNgUPSRp5EQN8e9wiCKGFgoxudMbktkQiBPrbU6ur","/ip4/172.17.0.9/tcp/33710/p2p/16Uiu2HAmHArYNgUPSRp5EQN8e9wiCKGFgoxudMbktkQiBPrbU6ur","/ip4/172.17.0.9/tcp/33711/ws/p2p/16Uiu2HAmHArYNgUPSRp5EQN8e9wiCKGFgoxudMbktkQiBPrbU6ur"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33709/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.231.183/tcp/46174/p2p/16Uiu2HAm9iAdrEJCXvfN1PneP62iZg34q6HmmGHABbDMZktsDvMB", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33709/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.154.99/tcp/62140/p2p/16Uiu2HAmRq8Wrb8fWXCN4ze3mzY4zTQ5SHCnKz9uVnFaYS678QsG", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:46173/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62139/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:33709/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1734060320100664064}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:46173/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1734060320100664064,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62139/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1734060320100664064,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id d55a1975be20
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 6850e0981c4f
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container d55a1975be20. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 9c967cf240b3
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.