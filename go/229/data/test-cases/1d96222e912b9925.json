{"uid":"1d96222e912b9925","name":"test_light_push_and_retrieve_duplicate_message","fullName":"tests.light_push.test_publish.TestLightPushPublish#test_light_push_and_retrieve_duplicate_message","historyId":"6322dda1e9c94820a622825a21a24390","time":{"start":1722741460359,"stop":1722741460364,"duration":5},"status":"broken","statusMessage":"Exception: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:42055/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0xaee90037c5aa2c356d291b5f3398dfa44494433813c8c0dc10066cd83a974dbe'","statusTrace":"src/node/api_clients/base_client.py:14: in make_request\n    response.raise_for_status()\n/opt/hostedtoolcache/Python/3.12.4/x64/lib/python3.12/site-packages/requests/models.py:1021: in raise_for_status\n    raise HTTPError(http_error_msg, response=self)\nE   requests.exceptions.HTTPError: 503 Server Error: Service Unavailable for url: http://127.0.0.1:42055/lightpush/v1/message\n\nDuring handling of the above exception, another exception occurred:\ntests/light_push/test_publish.py:237: in test_light_push_and_retrieve_duplicate_message\n    self.check_light_pushed_message_reaches_receiving_peer(message=message)\nsrc/steps/light_push.py:122: in check_light_pushed_message_reaches_receiving_peer\n    sender.send_light_push_message(payload)\nsrc/node/waku_node.py:338: in send_light_push_message\n    return self._api.send_light_push_message(payload)\nsrc/node/api_clients/rest.py:57: in send_light_push_message\n    return self.rest_call(\"post\", \"lightpush/v1/message\", json.dumps(payload))\nsrc/node/api_clients/rest.py:16: in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\nsrc/node/api_clients/base_client.py:17: in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\nE   Exception: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:42055/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0xaee90037c5aa2c356d291b5f3398dfa44494433813c8c0dc10066cd83a974dbe'","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":2,"retriesStatusChange":false,"beforeStages":[{"name":"set_allure_env_variables","time":{"start":1722741054035,"stop":1722741054035,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes","time":{"start":1722741456962,"stop":1722741456962,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_id","time":{"start":1722741456962,"stop":1722741456962,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail","time":{"start":1722741456962,"stop":1722741456962,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_setup","time":{"start":1722741456962,"stop":1722741456963,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"light_push_setup","time":{"start":1722741456963,"stop":1722741456963,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"light_push_publish_setup","time":{"start":1722741456963,"stop":1722741460359,"duration":3396},"status":"passed","steps":[{"name":"setup_first_receiving_node","time":{"start":1722741456963,"stop":1722741458772,"duration":1809},"status":"passed","steps":[{"name":"start_receiving_node","time":{"start":1722741456963,"stop":1722741458772,"duration":1809},"status":"passed","steps":[{"name":"add_node_peer","time":{"start":1722741458772,"stop":1722741458772,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"args","value":"(<tests.light_push.test_publish.TestLightPushPublish object at 0x7fbad21c3bc0>, <src.node.waku_node.WakuNode object at 0x7fbad17d2390>, [])"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"image","value":"'wakuorg/nwaku:latest'"},{"name":"node_index","value":"1"},{"name":"lightpush","value":"'true'"},{"name":"relay","value":"'true'"},{"name":"nodekey","value":"'30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68'"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"lightpush","value":"'true'"},{"name":"relay","value":"'true'"}],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"setup_first_lightpush_node","time":{"start":1722741458772,"stop":1722741460356,"duration":1584},"status":"passed","steps":[{"name":"setup_lightpush_node","time":{"start":1722741458772,"stop":1722741460356,"duration":1584},"status":"passed","steps":[{"name":"add_node_peer","time":{"start":1722741460354,"stop":1722741460356,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"args","value":"(<tests.light_push.test_publish.TestLightPushPublish object at 0x7fbad21c3bc0>, <src.node.waku_node.WakuNode object at 0x7fbad21c3b60>, ['/ip4/172.18.126.96/tcp/60430/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip'])"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"image","value":"'wakuorg/go-waku:latest'"},{"name":"node_index","value":"1"},{"name":"lightpush","value":"'true'"},{"name":"relay","value":"'false'"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"lightpush","value":"'true'"},{"name":"relay","value":"'false'"}],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"subscribe_to_pubsub_topics_via_relay","time":{"start":1722741460356,"stop":1722741460359,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node","value":"None"},{"name":"pubsub_topics","value":"None"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":7,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"common_setup","time":{"start":1722741456963,"stop":1722741456963,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"broken","statusMessage":"Exception: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:42055/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0xaee90037c5aa2c356d291b5f3398dfa44494433813c8c0dc10066cd83a974dbe'","statusTrace":"src/node/api_clients/base_client.py:14: in make_request\n    response.raise_for_status()\n/opt/hostedtoolcache/Python/3.12.4/x64/lib/python3.12/site-packages/requests/models.py:1021: in raise_for_status\n    raise HTTPError(http_error_msg, response=self)\nE   requests.exceptions.HTTPError: 503 Server Error: Service Unavailable for url: http://127.0.0.1:42055/lightpush/v1/message\n\nDuring handling of the above exception, another exception occurred:\ntests/light_push/test_publish.py:237: in test_light_push_and_retrieve_duplicate_message\n    self.check_light_pushed_message_reaches_receiving_peer(message=message)\nsrc/steps/light_push.py:122: in check_light_pushed_message_reaches_receiving_peer\n    sender.send_light_push_message(payload)\nsrc/node/waku_node.py:338: in send_light_push_message\n    return self._api.send_light_push_message(payload)\nsrc/node/api_clients/rest.py:57: in send_light_push_message\n    return self.rest_call(\"post\", \"lightpush/v1/message\", json.dumps(payload))\nsrc/node/api_clients/rest.py:16: in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\nsrc/node/api_clients/base_client.py:17: in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\nE   Exception: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:42055/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0xaee90037c5aa2c356d291b5f3398dfa44494433813c8c0dc10066cd83a974dbe'","steps":[{"name":"create_message","time":{"start":1722741460359,"stop":1722741460359,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"check_light_pushed_message_reaches_receiving_peer","time":{"start":1722741460359,"stop":1722741460364,"duration":5},"status":"broken","statusMessage":"Exception: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:42055/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0xaee90037c5aa2c356d291b5f3398dfa44494433813c8c0dc10066cd83a974dbe'\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.4/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/light_push.py\", line 122, in check_light_pushed_message_reaches_receiving_peer\n    sender.send_light_push_message(payload)\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/waku_node.py\", line 338, in send_light_push_message\n    return self._api.send_light_push_message(payload)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 57, in send_light_push_message\n    return self.rest_call(\"post\", \"lightpush/v1/message\", json.dumps(payload))\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 16, in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/base_client.py\", line 17, in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\n","steps":[{"name":"create_payload","time":{"start":1722741460360,"stop":1722741460360,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"pubsub_topic","value":"'/waku/2/rs/3/0'"},{"name":"message","value":"{'payload': 'TGlnaHQgcHVzaCB3b3JrcyEh', 'contentTopic': '/myapp/1/latest/proto', 'timestamp': 1722741460359358464}"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"pubsub_topic","value":"None"},{"name":"message","value":"{'payload': 'TGlnaHQgcHVzaCB3b3JrcyEh', 'contentTopic': '/myapp/1/latest/proto', 'timestamp': 1722741460359358464}"},{"name":"message_propagation_delay","value":"0.1"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":true,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"71b51e3694d23649","name":"log","source":"71b51e3694d23649.txt","type":"text/plain","size":31269}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":3,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"test_setup::0","time":{"start":1722741460407,"stop":1722741460410,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes::0","time":{"start":1722741460411,"stop":1722741464054,"duration":3643},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail::0","time":{"start":1722741464055,"stop":1722741464057,"duration":2},"status":"passed","steps":[],"attachments":[{"uid":"71d1616576965d5e","name":"lightpush_node1_2024-08-04_03-17-36__b564788c-bc7a-48d3-9374-ce6ead8eb4de__wakuorg_go-waku:latest.log","source":"71d1616576965d5e.txt","type":"text/plain","size":56275},{"uid":"150cad64ea6569bf","name":"receiving_node1_2024-08-04_03-17-36__b564788c-bc7a-48d3-9374-ce6ead8eb4de__wakuorg_nwaku:latest.log","source":"150cad64ea6569bf.txt","type":"text/plain","size":96659}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"set_allure_env_variables::0","time":{"start":1722742084259,"stop":1722742084259,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"parentSuite","value":"tests.light_push"},{"name":"suite","value":"test_publish"},{"name":"subSuite","value":"TestLightPushPublish"},{"name":"host","value":"fv-az1536-134"},{"name":"thread","value":"2169-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.light_push.test_publish"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"c956d685420253d9","status":"broken","statusDetails":"Exception: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:13689/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0xe0cfd9266bc311b4e8ab48749350a9c4a905472a4d78b3c719cb2c89fb25dec6'","time":{"start":1722741453126,"stop":1722741453132,"duration":6}},{"uid":"77a9a8c4b82d2abf","status":"broken","statusDetails":"Exception: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:12544/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0x9d86b7e569f2cc2a41f6733877c268bbf5b261db739660bc61d3322a80a2aa7e'","time":{"start":1722741446091,"stop":1722741446097,"duration":6}}],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":8,"skipped":0,"passed":141,"unknown":0,"total":149},"items":[{"uid":"baf12619f46881fe","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/228//#testresult/baf12619f46881fe","status":"broken","statusDetails":"Exception: Error: 503 Server Error: Service Unavailable for url: http://127.0.0.1:24276/lightpush/v1/message with response: b'lightpush errorLightpush request has not been published to any peers. msg_hash: 0xbf5fa525258a03b0d561fc5b3c17802ddac98fd669cf3157fcf5d54a97277c36'","time":{"start":1722655103030,"stop":1722655103037,"duration":7}},{"uid":"8ff49458b62209ee","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/227//#testresult/8ff49458b62209ee","status":"passed","time":{"start":1722568593464,"stop":1722568593686,"duration":222}},{"uid":"5c69c4ab163e1a1b","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/226//#testresult/5c69c4ab163e1a1b","status":"passed","time":{"start":1722482222947,"stop":1722482223178,"duration":231}},{"uid":"b8310f06b3071595","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/225//#testresult/b8310f06b3071595","status":"passed","time":{"start":1722395822973,"stop":1722395823201,"duration":228}},{"uid":"d8877b9a4b59f434","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/224//#testresult/d8877b9a4b59f434","status":"passed","time":{"start":1722309490504,"stop":1722309490732,"duration":228}},{"uid":"4d07536142b8963a","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/223//#testresult/4d07536142b8963a","status":"passed","time":{"start":1722251771348,"stop":1722251771578,"duration":230}},{"uid":"52084fbfe159eede","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/221//#testresult/52084fbfe159eede","status":"passed","time":{"start":1722136582350,"stop":1722136582574,"duration":224}},{"uid":"be9e4be49c920fd9","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/220//#testresult/be9e4be49c920fd9","status":"passed","time":{"start":1722050284738,"stop":1722050284963,"duration":225}},{"uid":"a2a7e7400e3e869e","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/219//#testresult/a2a7e7400e3e869e","status":"passed","time":{"start":1721963856434,"stop":1721963856652,"duration":218}},{"uid":"1095fe48c1d8aba6","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/218//#testresult/1095fe48c1d8aba6","status":"passed","time":{"start":1721877394878,"stop":1721877395096,"duration":218}},{"uid":"d9eab0aa4bca801f","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/217//#testresult/d9eab0aa4bca801f","status":"passed","time":{"start":1721791000250,"stop":1721791000478,"duration":228}},{"uid":"17905982dbce464","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/216//#testresult/17905982dbce464","status":"passed","time":{"start":1721704665629,"stop":1721704665852,"duration":223}},{"uid":"3c4fd1baad014002","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/215//#testresult/3c4fd1baad014002","status":"passed","time":{"start":1721633167827,"stop":1721633168057,"duration":230}},{"uid":"f849e1312b7047a9","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/214//#testresult/f849e1312b7047a9","status":"passed","time":{"start":1721618254988,"stop":1721618255209,"duration":221}},{"uid":"5b5e6ffbb9758bcc","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/213//#testresult/5b5e6ffbb9758bcc","status":"passed","time":{"start":1721531838561,"stop":1721531838780,"duration":219}},{"uid":"ec9248ff6af4bee9","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/212//#testresult/ec9248ff6af4bee9","status":"passed","time":{"start":1721445440028,"stop":1721445440255,"duration":227}},{"uid":"2a4f244da195e70d","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/211//#testresult/2a4f244da195e70d","status":"passed","time":{"start":1721359066088,"stop":1721359066310,"duration":222}},{"uid":"3fd4ba66955281d7","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/210//#testresult/3fd4ba66955281d7","status":"passed","time":{"start":1721290326372,"stop":1721290326598,"duration":226}},{"uid":"701354a062ce2812","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/209//#testresult/701354a062ce2812","status":"passed","time":{"start":1721272660887,"stop":1721272661106,"duration":219}},{"uid":"3d10a2cb0361c91","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/208//#testresult/3d10a2cb0361c91","status":"passed","time":{"start":1721186267079,"stop":1721186267298,"duration":219}}]},"tags":[]},"source":"1d96222e912b9925.json","parameterValues":[]}