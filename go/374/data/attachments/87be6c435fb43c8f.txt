[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_node_not_connected_directly_to_relaying_node with id: 2024-11-27_14-31-51__10f22ad0-db85-42db-ac8d-d619745574d8
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-27_14-31-51__10f22ad0-db85-42db-ac8d-d619745574d8__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-11-27_14-31-51__10f22ad0-db85-42db-ac8d-d619745574d8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-11-27_14-31-51__10f22ad0-db85-42db-ac8d-d619745574d8__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.209.99
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['31131', '31132', '31133', '31134', '31135']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 31131:31131 -p 31132:31132 -p 31133:31133 -p 31134:31134 -p 31135:31135 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=31133 --rest-port=31131 --tcp-port=31132 --discv5-udp-port=31134 --rest-address=0.0.0.0 --nat=extip:172.18.209.99 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dca2138aeaad27f2e8a9accfd7f4bb1c9ff49427bba1ef076addc05ddbaaa4b6 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.209.99 waku 64a6fdbb8d36d76f01ed212fd9aa68635ebdf74d09b8dd28fcd17c1ff3e2ecd9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 64a6fdbb8d36. Setting up logs at ./log/docker/node1_2024-11-27_14-31-51__10f22ad0-db85-42db-ac8d-d619745574d8__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 31131
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31131/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QEP6_FxZxHtE27Ch7CxYJAgtfUesRNbo84x4uDCqC2EPfjPEKl_4JXAT4_KSxjdwGabWVD1RanqAGqd6uPJvJRqGAZNuCTBUgmlkgnY0gmlwhKwRAAWCcnODAAMAiXNlY3AyNTZrMaED7oGu3k5Vd4bVq9h9IkjxhxqZZFTa6lP-NMhdsqgYF-CDdGNwgnmcg3VkcIJ5noV3YWt1MgE","listenAddresses":["/ip4/127.0.0.1/tcp/31132/p2p/16Uiu2HAmUi25JnNhW4RvnVY3XYDVKjgWAaGs3vhi1s1zhYo8H3UB","/ip4/127.0.0.1/tcp/31133/ws/p2p/16Uiu2HAmUi25JnNhW4RvnVY3XYDVKjgWAaGs3vhi1s1zhYo8H3UB","/ip4/172.17.0.5/tcp/31132/p2p/16Uiu2HAmUi25JnNhW4RvnVY3XYDVKjgWAaGs3vhi1s1zhYo8H3UB","/ip4/172.17.0.5/tcp/31133/ws/p2p/16Uiu2HAmUi25JnNhW4RvnVY3XYDVKjgWAaGs3vhi1s1zhYo8H3UB"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.41.76
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['2250', '2251', '2252', '2253', '2254']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 2250:2250 -p 2251:2251 -p 2252:2252 -p 2253:2253 -p 2254:2254 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2252 --rest-port=2250 --tcp-port=2251 --discv5-udp-port=2253 --rest-address=0.0.0.0 --nat=extip:172.18.41.76 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=de1d8a39da640cb9cfa6db7c813b0dd8c2e5c128ea6db01cb4dec1bee7af5df1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2254 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-J-4QEP6_FxZxHtE27Ch7CxYJAgtfUesRNbo84x4uDCqC2EPfjPEKl_4JXAT4_KSxjdwGabWVD1RanqAGqd6uPJvJRqGAZNuCTBUgmlkgnY0gmlwhKwRAAWCcnODAAMAiXNlY3AyNTZrMaED7oGu3k5Vd4bVq9h9IkjxhxqZZFTa6lP-NMhdsqgYF-CDdGNwgnmcg3VkcIJ5noV3YWt1MgE
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.41.76 waku 354a095ab216fb1576a290f9c9162965e88ef1b8ccfd7751b0e83c91ad70aa8e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 354a095ab216. Setting up logs at ./log/docker/node2_2024-11-27_14-31-51__10f22ad0-db85-42db-ac8d-d619745574d8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 2250
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2250/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2250/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.41.76/tcp/2251/p2p/16Uiu2HAmHwJ16DoWxUAsnkQnrVMeftLC48Hmi6VYc8dRMRW8DqJC","/ip4/172.18.41.76/tcp/2252/ws/p2p/16Uiu2HAmHwJ16DoWxUAsnkQnrVMeftLC48Hmi6VYc8dRMRW8DqJC"],"enrUri":"enr:-L24QHLs-bdSC6Gj9o0AnteSoGlFq0autI8e1iQLvx1KiT9_HbM84cByrde4buI4IjeKH5EyVMz633yR8CLORjccPuACgmlkgnY0gmlwhKwSKUyKbXVsdGlhZGRyc5YACASsEilMBgjLAAoErBIpTAYIzN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDTnevvBTyPfrO9iEU1WCx5z4a0yj9_a0y3KdbqbmHTxWDdGNwggjLg3VkcIIIzYV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.220.158
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['42042', '42043', '42044', '42045', '42046']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 42042:42042 -p 42043:42043 -p 42044:42044 -p 42045:42045 -p 42046:42046 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=42044 --rest-port=42042 --tcp-port=42043 --discv5-udp-port=42045 --rest-address=0.0.0.0 --nat=extip:172.18.220.158 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=af6c44add4bffe75ecaa2f1ddf916ee1785e62a121effad7a6272ecbf95857bc --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --storenode=/ip4/172.18.41.76/tcp/2251/p2p/16Uiu2HAmHwJ16DoWxUAsnkQnrVMeftLC48Hmi6VYc8dRMRW8DqJC --discv5-bootstrap-node=enr:-L24QHLs-bdSC6Gj9o0AnteSoGlFq0autI8e1iQLvx1KiT9_HbM84cByrde4buI4IjeKH5EyVMz633yR8CLORjccPuACgmlkgnY0gmlwhKwSKUyKbXVsdGlhZGRyc5YACASsEilMBgjLAAoErBIpTAYIzN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDTnevvBTyPfrO9iEU1WCx5z4a0yj9_a0y3KdbqbmHTxWDdGNwggjLg3VkcIIIzYV3YWt1MgM --pubsub-topic=/waku/2/rs/3/1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.220.158 waku d9622b67079c2f56ede79620ab10439e1008302137b0de1aa0cd64b1061a329c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID d9622b67079c. Setting up logs at ./log/docker/node3_2024-11-27_14-31-51__10f22ad0-db85-42db-ac8d-d619745574d8__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 42042
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42042/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QJ1k9CdmtCSnZX_WbjcRETMOVTBRtQVmxU6H-jH-AHwgVJqvP2xCpzJHnrqpAdD4yllHiS7JMIGLx1l9J2nZgO6GAZNuCTyjgmlkgnY0gmlwhKwRAAOCcnOFAAMBAAGJc2VjcDI1NmsxoQLeOA13JKBpypBAWbXnJmICVrRpqiuIY5TDSN3uS_XuLIN0Y3CCpDuDdWRwgqQ9hXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/42043/p2p/16Uiu2HAmAP84ZBVaLxtuKs9s3CyF13P9EJQiEMQ75FoBNSGsKt59","/ip4/127.0.0.1/tcp/42044/ws/p2p/16Uiu2HAmAP84ZBVaLxtuKs9s3CyF13P9EJQiEMQ75FoBNSGsKt59","/ip4/172.17.0.3/tcp/42043/p2p/16Uiu2HAmAP84ZBVaLxtuKs9s3CyF13P9EJQiEMQ75FoBNSGsKt59","/ip4/172.17.0.3/tcp/42044/ws/p2p/16Uiu2HAmAP84ZBVaLxtuKs9s3CyF13P9EJQiEMQ75FoBNSGsKt59"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31131/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2250/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31131/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAmHwJ16DoWxUAsnkQnrVMeftLC48Hmi6VYc8dRMRW8DqJC","multiaddrs":["/ip4/172.18.41.76/tcp/2251/p2p/16Uiu2HAmHwJ16DoWxUAsnkQnrVMeftLC48Hmi6VYc8dRMRW8DqJC","/ip4/172.18.41.76/tcp/2252/ws/p2p/16Uiu2HAmHwJ16DoWxUAsnkQnrVMeftLC48Hmi6VYc8dRMRW8DqJC"],"protocols":null,"connected":false,"pubsubTopics":[]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2250/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.3/tcp/42043/p2p/16Uiu2HAmAP84ZBVaLxtuKs9s3CyF13P9EJQiEMQ75FoBNSGsKt59","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31131/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/go-waku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42042/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-filter%2Fproto&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"010b7e7a0b61d490de19bf2402b6f30e77fe6e4db229f0d7901e712e2065ff10","status_code":200,"status_desc":"OK","messages":[{"message_hash":"8xKIrN+eYGh4m2PRO8soYB2jhuxP8n312IFrKXaegzw="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 64a6fdbb8d36
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 354a095ab216
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 64a6fdbb8d36. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id d9622b67079c
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 354a095ab216. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.