[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_node_not_connected_directly_to_lightpushing_node with id: 2024-11-12_03-05-01__592a8e4a-9355-45f5-b2d6-abb9fbc71c0a
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-12_03-05-01__592a8e4a-9355-45f5-b2d6-abb9fbc71c0a__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-11-12_03-05-01__592a8e4a-9355-45f5-b2d6-abb9fbc71c0a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-11-12_03-05-01__592a8e4a-9355-45f5-b2d6-abb9fbc71c0a__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.150.161
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['57592', '57593', '57594', '57595', '57596']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 57592:57592 -p 57593:57593 -p 57594:57594 -p 57595:57595 -p 57596:57596 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=57594 --rest-port=57592 --tcp-port=57593 --discv5-udp-port=57595 --rest-address=0.0.0.0 --nat=extip:172.18.150.161 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cef7bc392b4e2f8af036e2ccb744bb69074c69ccead1dab18c0a8ea4ae7ca39b --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.150.161 waku 91ea9d752d9d1a3f244d53065e7640e51e414c86aa38a750c841ae02a8226f92
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 91ea9d752d9d. Setting up logs at ./log/docker/node1_2024-11-12_03-05-01__592a8e4a-9355-45f5-b2d6-abb9fbc71c0a__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/go-waku:latest. REST: 57592
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container e56f24ee2ac0. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57592/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QC7cYLgusFuw6ErV1U69BzGor317d9Qwz3nznG39Fh0dFY7lbfq8HrMxUjnIRTZ5O8SY7T9QPOOkCu0lxjfhnmKGAZMeVOlrgmlkgnY0gmlwhKwRAAaJc2VjcDI1NmsxoQNSx-0oYNZ-FUDSQuk79sEQrzTjKxgRBDrM8oY-vkmP7IN0Y3CC4PmDdWRwguD7hXdha3UyCQ","listenAddresses":["/ip4/127.0.0.1/tcp/57593/p2p/16Uiu2HAmJE8bd8YsXbAZPx8wiUZUW1sAX7Bh8hstPdsckcJyab87","/ip4/127.0.0.1/tcp/57594/ws/p2p/16Uiu2HAmJE8bd8YsXbAZPx8wiUZUW1sAX7Bh8hstPdsckcJyab87","/ip4/172.17.0.6/tcp/57593/p2p/16Uiu2HAmJE8bd8YsXbAZPx8wiUZUW1sAX7Bh8hstPdsckcJyab87","/ip4/172.17.0.6/tcp/57594/ws/p2p/16Uiu2HAmJE8bd8YsXbAZPx8wiUZUW1sAX7Bh8hstPdsckcJyab87"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.146.94
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['2996', '2997', '2998', '2999', '3000']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 2996:2996 -p 2997:2997 -p 2998:2998 -p 2999:2999 -p 3000:3000 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2998 --rest-port=2996 --tcp-port=2997 --discv5-udp-port=2999 --rest-address=0.0.0.0 --nat=extip:172.18.146.94 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a45d1ca6d931fbcddb607a3babebcdfcad5db51cc59dbc228ceafa2cf2b2400b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=3000 --metrics-logging=true --lightpush=true --store=true --relay=true --discv5-bootstrap-node=enr:-Ji4QC7cYLgusFuw6ErV1U69BzGor317d9Qwz3nznG39Fh0dFY7lbfq8HrMxUjnIRTZ5O8SY7T9QPOOkCu0lxjfhnmKGAZMeVOlrgmlkgnY0gmlwhKwRAAaJc2VjcDI1NmsxoQNSx-0oYNZ-FUDSQuk79sEQrzTjKxgRBDrM8oY-vkmP7IN0Y3CC4PmDdWRwguD7hXdha3UyCQ --lightpushnode=/ip4/172.18.150.161/tcp/57593/p2p/16Uiu2HAmJE8bd8YsXbAZPx8wiUZUW1sAX7Bh8hstPdsckcJyab87
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.146.94 waku 66388aefe72d6b5196a2d05c38d27c35c36745bfae549c6e6e9f0115fc24a85a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 66388aefe72d. Setting up logs at ./log/docker/node2_2024-11-12_03-05-01__592a8e4a-9355-45f5-b2d6-abb9fbc71c0a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/nwaku:latest. REST: 2996
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2996/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:279 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2996/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.146.94/tcp/2997/p2p/16Uiu2HAmHx1hdPKFX7Zjys5g3Aqta64WZNx8wSsQgXUEyDkX3N5q","/ip4/172.18.146.94/tcp/2998/ws/p2p/16Uiu2HAmHx1hdPKFX7Zjys5g3Aqta64WZNx8wSsQgXUEyDkX3N5q"],"enrUri":"enr:-L24QIHLY6LwWzwa-GLLVmUcmQyGkv1-4c5vCq4Ca0VDLy6zDxNoG4ZAeLa2je-Offl19wr-XJ0C6l1zry3JB9uEj58CgmlkgnY0gmlwhKwSkl6KbXVsdGlhZGRyc5YACASsEpJeBgu1AAoErBKSXgYLtt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDTqbV6LEXCfxVkjOjmWWFQmuw3VQq-a1tQvt3vqgztRyDdGNwggu1g3VkcIILt4V3YWt1Mgs"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.46.81
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['28796', '28797', '28798', '28799', '28800']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:436 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:165 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:167 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 28796:28796 -p 28797:28797 -p 28798:28798 -p 28799:28799 -p 28800:28800 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=28798 --rest-port=28796 --tcp-port=28797 --discv5-udp-port=28799 --rest-address=0.0.0.0 --nat=extip:172.18.46.81 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=020abaebfcd9ff5eecfd9edb6acd1ff8c511becbc65cacdeb8d322d2dcb6fda9 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --storenode=/ip4/172.18.146.94/tcp/2997/p2p/16Uiu2HAmHx1hdPKFX7Zjys5g3Aqta64WZNx8wSsQgXUEyDkX3N5q --discv5-bootstrap-node=enr:-L24QIHLY6LwWzwa-GLLVmUcmQyGkv1-4c5vCq4Ca0VDLy6zDxNoG4ZAeLa2je-Offl19wr-XJ0C6l1zry3JB9uEj58CgmlkgnY0gmlwhKwSkl6KbXVsdGlhZGRyc5YACASsEpJeBgu1AAoErBKSXgYLtt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDTqbV6LEXCfxVkjOjmWWFQmuw3VQq-a1tQvt3vqgztRyDdGNwggu1g3VkcIILt4V3YWt1Mgs
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.46.81 waku ad3191f29952f19dd6cfb7f756279a746d8b6b23f97f3d9806e6a934e3d872b6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ad3191f29952. Setting up logs at ./log/docker/node3_2024-11-12_03-05-01__592a8e4a-9355-45f5-b2d6-abb9fbc71c0a__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:179 Started container from image wakuorg/go-waku:latest. REST: 28796
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28796/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QD59LZgjjih3o0oLxrCUbMf6Fwv788D5-AIKSviq0Dc-PH5hTGFsNVxuoYNIA1itCQH-xsrzILvwu4ldRt9h9iWGAZMeVPRggmlkgnY0gmlwhKwRAA2Jc2VjcDI1NmsxoQL-qmThm6K3G_MdsLJhWDoG0YhQhmSX8qFeFQat66oBiIN0Y3CCcH2DdWRwgnB_hXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/28797/p2p/16Uiu2HAmCZnESkavH29sAujRLfJubmWbKkYueAErnkDXv9VeX5E7","/ip4/127.0.0.1/tcp/28798/ws/p2p/16Uiu2HAmCZnESkavH29sAujRLfJubmWbKkYueAErnkDXv9VeX5E7","/ip4/172.17.0.13/tcp/28797/p2p/16Uiu2HAmCZnESkavH29sAujRLfJubmWbKkYueAErnkDXv9VeX5E7","/ip4/172.17.0.13/tcp/28798/ws/p2p/16Uiu2HAmCZnESkavH29sAujRLfJubmWbKkYueAErnkDXv9VeX5E7"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:284 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57592/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2996/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57592/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAmHx1hdPKFX7Zjys5g3Aqta64WZNx8wSsQgXUEyDkX3N5q","multiaddrs":["/ip4/172.18.146.94/tcp/2997/p2p/16Uiu2HAmHx1hdPKFX7Zjys5g3Aqta64WZNx8wSsQgXUEyDkX3N5q","/ip4/172.18.146.94/tcp/2998/ws/p2p/16Uiu2HAmHx1hdPKFX7Zjys5g3Aqta64WZNx8wSsQgXUEyDkX3N5q"],"protocols":["/vac/waku/store-query/3.0.0","/vac/waku/lightpush/2.0.0-beta1","/vac/waku/store/2.0.0-beta4","/vac/waku/relay/2.0.0"],"connected":false,"pubsubTopics":["/waku/2/rs/3/0"]},{"id":"16Uiu2HAmCZnESkavH29sAujRLfJubmWbKkYueAErnkDXv9VeX5E7","multiaddrs":["/ip4/172.17.0.13/tcp/28797/p2p/16Uiu2HAmCZnESkavH29sAujRLfJubmWbKkYueAErnkDXv9VeX5E7","/ip4/172.17.0.13/tcp/28798/ws/p2p/16Uiu2HAmCZnESkavH29sAujRLfJubmWbKkYueAErnkDXv9VeX5E7"],"protocols":null,"connected":false,"pubsubTopics":[]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2996/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.13/tcp/28797/p2p/16Uiu2HAmCZnESkavH29sAujRLfJubmWbKkYueAErnkDXv9VeX5E7","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57592/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1731380735407024384}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/go-waku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:28796/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-filter%2Fproto&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"d17be0d0fe0e7183af9a77e73e172eb093562e728025bded17e53bb35a7a9f97","status_code":200,"status_desc":"OK","messages":[{"message_hash":"CJJXoeBtvffJZtn1cOrzanF0Ac567A0b0kQCJXazH50="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 91ea9d752d9d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id 66388aefe72d
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 91ea9d752d9d. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:223 Stopping container with id ad3191f29952
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 66388aefe72d. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:230 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.