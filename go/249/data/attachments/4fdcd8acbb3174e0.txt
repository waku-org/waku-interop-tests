[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_publish_while_peer_is_paused with id: 2024-08-20_08-02-52__a1ae5d1b-0ba5-4d96-9d5f-6d5b2801f50a
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.relay:relay.py:34 Running fixture setup: setup_main_relay_nodes
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node1_2024-08-20_08-02-52__a1ae5d1b-0ba5-4d96-9d5f-6d5b2801f50a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.245.162
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['10938', '10939', '10940', '10941', '10942']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 10938:10938 -p 10939:10939 -p 10940:10940 -p 10941:10941 -p 10942:10942 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=10940 --rest-port=10938 --tcp-port=10939 --discv5-udp-port=10941 --rest-address=0.0.0.0 --nat=extip:172.18.245.162 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=93c252304ba48ca15c6b5d02b18794fca63e956a38e67ba0a51a700a6f72b0de --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=10942 --metrics-logging=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.245.162 waku f984b8120b38507d70edd9c93a600541e60f390858c0dccec70d121dd18f3298
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID f984b8120b38. Setting up logs at ./log/docker/node1_2024-08-20_08-02-52__a1ae5d1b-0ba5-4d96-9d5f-6d5b2801f50a__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 10938
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10938/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10938/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.245.162/tcp/10939/p2p/16Uiu2HAmSNhDSUaFNWMwQyNufQoNg51K8KvyXdeNnWdYWVTA3c68","/ip4/172.18.245.162/tcp/10940/ws/p2p/16Uiu2HAmSNhDSUaFNWMwQyNufQoNg51K8KvyXdeNnWdYWVTA3c68"],"enrUri":"enr:-LO4QJnHdS7cLOHBqTssbNGCod8K5s3YZwyOyBFchKwewz7nUPazISD2X_34fpK4G3LGVUlEYANYA4PjsuFT-poqoTUBgmlkgnY0gmlwhKwS9aKKbXVsdGlhZGRyc4wACgSsEvWiBiq83QOCcnOFAAMBAACJc2VjcDI1NmsxoQPL1vLzsI1RJpo776ZSPflBxS84f1bQRsynjCWu9SV7tYN0Y3CCKruDdWRwgiq9hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node2_2024-08-20_08-02-52__a1ae5d1b-0ba5-4d96-9d5f-6d5b2801f50a__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.8.38
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['31720', '31721', '31722', '31723', '31724']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 31720:31720 -p 31721:31721 -p 31722:31722 -p 31723:31723 -p 31724:31724 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=31722 --rest-port=31720 --tcp-port=31721 --discv5-udp-port=31723 --rest-address=0.0.0.0 --nat=extip:172.18.8.38 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=53f28cd52a4ddaedea123f4c2a2bff7a2a63bc3c36ad3dce7cb453101e7b8633 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --discv5-bootstrap-node=enr:-LO4QJnHdS7cLOHBqTssbNGCod8K5s3YZwyOyBFchKwewz7nUPazISD2X_34fpK4G3LGVUlEYANYA4PjsuFT-poqoTUBgmlkgnY0gmlwhKwS9aKKbXVsdGlhZGRyc4wACgSsEvWiBiq83QOCcnOFAAMBAACJc2VjcDI1NmsxoQPL1vLzsI1RJpo776ZSPflBxS84f1bQRsynjCWu9SV7tYN0Y3CCKruDdWRwgiq9hXdha3UyAQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.8.38 waku 2b22a0d9c12d3aa829b112ad198777590a7a1c955871a6af091334cc4311a432
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 2b22a0d9c12d. Setting up logs at ./log/docker/node2_2024-08-20_08-02-52__a1ae5d1b-0ba5-4d96-9d5f-6d5b2801f50a__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/go-waku:latest. REST: 31720
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31720/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QG9KAbSJUYzEwxrHtcImi25_BKta5k1ejoU2m5UFPCO9dhYyy2deeMgk7dGlF1am6aIAPIah7qDLO2dhHfHcXzGGAZFuz3C9gmlkgnY0gmlwhKwRAAmJc2VjcDI1NmsxoQLvyP3aMRfSvewNJwKQDzmr2TomgDoymEoI1knbI2P5FoN0Y3CCe-mDdWRwgnvrhXdha3UyAQ","listenAddresses":["/ip4/127.0.0.1/tcp/31721/p2p/16Uiu2HAmBZhBGFpji33PWRwAruVqXso1bmz3i9c6HZQrityaywws","/ip4/127.0.0.1/tcp/31722/ws/p2p/16Uiu2HAmBZhBGFpji33PWRwAruVqXso1bmz3i9c6HZQrityaywws","/ip4/172.17.0.9/tcp/31721/p2p/16Uiu2HAmBZhBGFpji33PWRwAruVqXso1bmz3i9c6HZQrityaywws","/ip4/172.17.0.9/tcp/31722/ws/p2p/16Uiu2HAmBZhBGFpji33PWRwAruVqXso1bmz3i9c6HZQrityaywws"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31720/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.245.162/tcp/10939/p2p/16Uiu2HAmSNhDSUaFNWMwQyNufQoNg51K8KvyXdeNnWdYWVTA3c68", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[35mDEBUG   [0m src.steps.relay:relay.py:59 Running fixture setup: subscribe_main_relay_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10938/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31720/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10938/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.relay:relay.py:123 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10938/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1724140975359313408,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.relay:relay.py:123 Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31720/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10938/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.relay:relay.py:123 Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10938/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1724140976469006592,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.relay:relay.py:123 Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31720/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1724140976469006592,"ephemeral":false}]'
[32mINFO    [0m src.steps.relay:relay.py:71 WARM UP successful!!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:248 Pausing container with id 2b22a0d9c12d
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10938/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.waku_node:waku_node.py:253 Unpause container with id 2b22a0d9c12d
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31720/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1724140976583631872,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id f984b8120b38
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 2b22a0d9c12d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.