[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_without_pubsub_topic_and_content_topic with id: 2024-08-23_03-27-04__f125e7d6-1cd0-4953-b215-0a14143aeff8
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:28 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-08-23_03-27-04__f125e7d6-1cd0-4953-b215-0a14143aeff8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.46.83
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['21975', '21976', '21977', '21978', '21979']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 21975:21975 -p 21976:21976 -p 21977:21977 -p 21978:21978 -p 21979:21979 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=21977 --rest-port=21975 --tcp-port=21976 --discv5-udp-port=21978 --rest-address=0.0.0.0 --nat=extip:172.18.46.83 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=daed054cacea77d451ba0dfec875fcbed2ab6841b732edb3ac852baddebe805c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=21979 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.46.83 waku 54235b82d634c05ac5e364bf79e7fb7d6b1365412541f694b4a66ae46727c6c3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 54235b82d634. Setting up logs at ./log/docker/publishing_node1_2024-08-23_03-27-04__f125e7d6-1cd0-4953-b215-0a14143aeff8__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 21975
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21975/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21975/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.46.83/tcp/21976/p2p/16Uiu2HAmBBgZwpJQeR3hUY6GCRwgVubLXuvY3wgNKrNMfY6s4RTm","/ip4/172.18.46.83/tcp/21977/ws/p2p/16Uiu2HAmBBgZwpJQeR3hUY6GCRwgVubLXuvY3wgNKrNMfY6s4RTm"],"enrUri":"enr:-LO4QMDPbbZmg85j8dLrID8dnqcOUz9xwmaWiaiW7RnPQThDQZkQzsVQUVMS_DuPLz72tnQDrh3Elb48qbVeMkiO1uIBgmlkgnY0gmlwhKwSLlOKbXVsdGlhZGRyc4wACgSsEi5TBlXZ3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLqJYZ5hTTHU7CSj0V1wXgeyg7hzCMnskvfKjDLJmjz6IN0Y3CCVdiDdWRwglXahXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/store_node1_2024-08-23_03-27-04__f125e7d6-1cd0-4953-b215-0a14143aeff8__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.232.33
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['60140', '60141', '60142', '60143', '60144']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 60140:60140 -p 60141:60141 -p 60142:60142 -p 60143:60143 -p 60144:60144 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=60142 --rest-port=60140 --tcp-port=60141 --discv5-udp-port=60143 --rest-address=0.0.0.0 --nat=extip:172.18.232.33 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=338a36ea07bb9cfe06ca648e8fce4599e1bac5e4036bcb6d00caaeb6aafebe8c --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-LO4QMDPbbZmg85j8dLrID8dnqcOUz9xwmaWiaiW7RnPQThDQZkQzsVQUVMS_DuPLz72tnQDrh3Elb48qbVeMkiO1uIBgmlkgnY0gmlwhKwSLlOKbXVsdGlhZGRyc4wACgSsEi5TBlXZ3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLqJYZ5hTTHU7CSj0V1wXgeyg7hzCMnskvfKjDLJmjz6IN0Y3CCVdiDdWRwglXahXdha3UyAw --storenode=/ip4/172.18.46.83/tcp/21976/p2p/16Uiu2HAmBBgZwpJQeR3hUY6GCRwgVubLXuvY3wgNKrNMfY6s4RTm --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.232.33 waku 7fbdb20a2f695061a77ef4638fb1c555803b81d588621c407300bab5b549e3d6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 7fbdb20a2f69. Setting up logs at ./log/docker/store_node1_2024-08-23_03-27-04__f125e7d6-1cd0-4953-b215-0a14143aeff8__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/go-waku:latest. REST: 60140
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60140/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QCcKFSKVtcst5FJB1Fyb50gyRBkzXgRRCoLkUCVsauqGZMguecErl027UGJnD8p7yUhUtbJWS7IvZKYOww1JzZeGAZF9RgYJgmlkgnY0gmlwhKwRAAaJc2VjcDI1NmsxoQMl0f4VyzNOkT-eggqkHy7xCVVXP0coZwd3mV9AucUJEoN0Y3CC6u2DdWRwgurvhXdha3UyAw","listenAddresses":["/ip4/127.0.0.1/tcp/60141/p2p/16Uiu2HAmFCd9sxKK7YvhyMpTTzkFowVJugWPd4z1fna1RV5tgCD7","/ip4/127.0.0.1/tcp/60142/ws/p2p/16Uiu2HAmFCd9sxKK7YvhyMpTTzkFowVJugWPd4z1fna1RV5tgCD7","/ip4/172.17.0.6/tcp/60141/p2p/16Uiu2HAmFCd9sxKK7YvhyMpTTzkFowVJugWPd4z1fna1RV5tgCD7","/ip4/172.17.0.6/tcp/60142/ws/p2p/16Uiu2HAmFCd9sxKK7YvhyMpTTzkFowVJugWPd4z1fna1RV5tgCD7"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60140/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.46.83/tcp/21976/p2p/16Uiu2HAmBBgZwpJQeR3hUY6GCRwgVubLXuvY3wgNKrNMfY6s4RTm", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21975/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60140/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.steps.store:store.py:128 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21975/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:128 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21975/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:128 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21975/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/22/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:128 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21975/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/toychat/2/huilong/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:128 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21975/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/statusim/1/community/cbor", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:128 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21975/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/27/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:128 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21975/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/29/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:128 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21975/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/app/20/sometopic/someencoding", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21975/store/v3/messages?pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"uHhTRNRfh+zWAbYmwRw4zYgoBM1WEZGfP1IxaO2ow9w="},{"messageHash":"7/5cpZsAD585VLy4xVFqgN0Tr9SFjmYiGtF7J2JnKpU="},{"messageHash":"uRv716wmqzSX+0qhTpC/OadfdtEUlUXhMlZTC4L/ci0="},{"messageHash":"fVFEV+WL6TObuRzaN23h5q6uOvl7uaBoguW4VDGCaMQ="},{"messageHash":"qECdKeaD+z9PRh82kk+ci1WRP61mYhpkE2qBzHDaJ7I="},{"messageHash":"Mo+jdQS0w/3w/as7UPadkme3sMVOnmPZD6e48kmogb4="},{"messageHash":"qZU24p2m47vnQQcY1+f0tuhB3YDXSrve8cefjMCd0mo="},{"messageHash":"ZdwewvRBGOesds0/1EFvdOMwGe20zHvX5kLORFXXQcw="}]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60140/store/v3/messages?pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:60140/store/v3/messages?pageSize=20&ascending=true. Response content: b'{"status_code":400,"status_desc":"pubsubTopic and contentTopics are required"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 54235b82d634
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 7fbdb20a2f69
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.