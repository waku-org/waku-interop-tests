[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_node_not_connected_directly_to_lightpushing_node with id: 2024-08-23_03-12-32__ed3b1717-ab9d-4e4f-80ee-2f477084bb96
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node1_2024-08-23_03-12-32__ed3b1717-ab9d-4e4f-80ee-2f477084bb96__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node2_2024-08-23_03-12-32__ed3b1717-ab9d-4e4f-80ee-2f477084bb96__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/node3_2024-08-23_03-12-32__ed3b1717-ab9d-4e4f-80ee-2f477084bb96__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:28 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.66.58
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['11961', '11962', '11963', '11964', '11965']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 11961:11961 -p 11962:11962 -p 11963:11963 -p 11964:11964 -p 11965:11965 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=11963 --rest-port=11961 --tcp-port=11962 --discv5-udp-port=11964 --rest-address=0.0.0.0 --nat=extip:172.18.66.58 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f20cdcd1b4da224ec31d6a1c17fa23d889132a66fed5ec6aa9d00bf0cce9485d --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.66.58 waku b41749c270091b5e9ee9baffce9f6045b0456b7e4616a901d1acd982a17c70f0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID b41749c27009. Setting up logs at ./log/docker/node1_2024-08-23_03-12-32__ed3b1717-ab9d-4e4f-80ee-2f477084bb96__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/go-waku:latest. REST: 11961
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11961/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QHXhmM-scwF4zhJzjq8w_2mV7c_0vTObJeo-v3UqMIPeLyOR4_Zv3s8ah56VE5PK2Uu9EsWcls3KJ9KRwg9_W5qGAZF9OLEQgmlkgnY0gmlwhKwRAAmJc2VjcDI1NmsxoQLN1l85uIubvgh8z2XbUic-hWFKKBKdohKE75sENKP5AoN0Y3CCLrqDdWRwgi68hXdha3UyCQ","listenAddresses":["/ip4/127.0.0.1/tcp/11962/p2p/16Uiu2HAm9HB9drYqDX3XBQ1VQ5jmu4AejboZ1ZA4CQ4Pd1TtqYth","/ip4/127.0.0.1/tcp/11963/ws/p2p/16Uiu2HAm9HB9drYqDX3XBQ1VQ5jmu4AejboZ1ZA4CQ4Pd1TtqYth","/ip4/172.17.0.9/tcp/11962/p2p/16Uiu2HAm9HB9drYqDX3XBQ1VQ5jmu4AejboZ1ZA4CQ4Pd1TtqYth","/ip4/172.17.0.9/tcp/11963/ws/p2p/16Uiu2HAm9HB9drYqDX3XBQ1VQ5jmu4AejboZ1ZA4CQ4Pd1TtqYth"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.11.119
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['61169', '61170', '61171', '61172', '61173']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 61169:61169 -p 61170:61170 -p 61171:61171 -p 61172:61172 -p 61173:61173 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61171 --rest-port=61169 --tcp-port=61170 --discv5-udp-port=61172 --rest-address=0.0.0.0 --nat=extip:172.18.11.119 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=590712bd56c9a45fc1c4a74dd9774c5dbcdbf1cdc4cf1ecedaccf1bfcb7ad191 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61173 --metrics-logging=true --lightpush=true --filter=true --relay=true --discv5-bootstrap-node=enr:-Ji4QHXhmM-scwF4zhJzjq8w_2mV7c_0vTObJeo-v3UqMIPeLyOR4_Zv3s8ah56VE5PK2Uu9EsWcls3KJ9KRwg9_W5qGAZF9OLEQgmlkgnY0gmlwhKwRAAmJc2VjcDI1NmsxoQLN1l85uIubvgh8z2XbUic-hWFKKBKdohKE75sENKP5AoN0Y3CCLrqDdWRwgi68hXdha3UyCQ --lightpushnode=/ip4/172.18.66.58/tcp/11962/p2p/16Uiu2HAm9HB9drYqDX3XBQ1VQ5jmu4AejboZ1ZA4CQ4Pd1TtqYth
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.11.119 waku 04b66901c9483ba94e45cdad72975fa204cda8ee20b7f863f6a8423c51de5c23
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 04b66901c948. Setting up logs at ./log/docker/node2_2024-08-23_03-12-32__ed3b1717-ab9d-4e4f-80ee-2f477084bb96__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 61169
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61169/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61169/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.11.119/tcp/61170/p2p/16Uiu2HAmJbhFeanzHmzJiDY6616orqhUFCojnZFXgwaGjYhkuEvt","/ip4/172.18.11.119/tcp/61171/ws/p2p/16Uiu2HAmJbhFeanzHmzJiDY6616orqhUFCojnZFXgwaGjYhkuEvt"],"enrUri":"enr:-LO4QJG7CkQJbo3OQefaSEjYwlFN8GbXwdR8_fj4sBmcNZVSPpAN-1UvOPEx5o02Z6isoyZKOS0C9uICJF6HvJrFhRoBgmlkgnY0gmlwhKwSC3eKbXVsdGlhZGRyc4wACgSsEgt3Bu7z3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNYTgwVH4mo_zU6y4j_4HaTJfWR65ofTLjOLJdOZUuNmYN0Y3CC7vKDdWRwgu70hXdha3UyDQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.122.79
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['13667', '13668', '13669', '13670', '13671']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 13667:13667 -p 13668:13668 -p 13669:13669 -p 13670:13670 -p 13671:13671 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=13669 --rest-port=13667 --tcp-port=13668 --discv5-udp-port=13670 --rest-address=0.0.0.0 --nat=extip:172.18.122.79 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c3bb8de0c016cd40d832a76ac6ec9ebe2e7b951f5752fffb13f9d6cbea6bda6c --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --filternode=/ip4/172.18.11.119/tcp/61170/p2p/16Uiu2HAmJbhFeanzHmzJiDY6616orqhUFCojnZFXgwaGjYhkuEvt --discv5-bootstrap-node=enr:-LO4QJG7CkQJbo3OQefaSEjYwlFN8GbXwdR8_fj4sBmcNZVSPpAN-1UvOPEx5o02Z6isoyZKOS0C9uICJF6HvJrFhRoBgmlkgnY0gmlwhKwSC3eKbXVsdGlhZGRyc4wACgSsEgt3Bu7z3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNYTgwVH4mo_zU6y4j_4HaTJfWR65ofTLjOLJdOZUuNmYN0Y3CC7vKDdWRwgu70hXdha3UyDQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.122.79 waku db9530ee82bb8cac0bed418cfd1e176904ce05df80cee408ab664baa2244af5e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID db9530ee82bb. Setting up logs at ./log/docker/node3_2024-08-23_03-12-32__ed3b1717-ab9d-4e4f-80ee-2f477084bb96__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/go-waku:latest. REST: 13667
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13667/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QNx5gMjEFnsSBgYWf_crm3AwJVdoTJ09BuI_2zOj_0jOND25rk0O7kePmeH9Nuq-TJ-p30pnMIO4klGbgylr8ZmGAZF9OL2qgmlkgnY0gmlwhKwRAAqJc2VjcDI1NmsxoQNRW_pl17hlIAwvGPEPY_mXKT08IO_64wZ9s4OcMzfzaIN0Y3CCNWSDdWRwgjVmhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/13668/p2p/16Uiu2HAmJ8aiiXrGfjt3vCFMtoANnqhHVXCDZTUS5iyHucrRRXaP","/ip4/127.0.0.1/tcp/13669/ws/p2p/16Uiu2HAmJ8aiiXrGfjt3vCFMtoANnqhHVXCDZTUS5iyHucrRRXaP","/ip4/172.17.0.10/tcp/13668/p2p/16Uiu2HAmJ8aiiXrGfjt3vCFMtoANnqhHVXCDZTUS5iyHucrRRXaP","/ip4/172.17.0.10/tcp/13669/ws/p2p/16Uiu2HAmJ8aiiXrGfjt3vCFMtoANnqhHVXCDZTUS5iyHucrRRXaP"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11961/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61169/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13667/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11961/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAmJbhFeanzHmzJiDY6616orqhUFCojnZFXgwaGjYhkuEvt","multiaddrs":["/ip4/172.18.11.119/tcp/61171/ws/p2p/16Uiu2HAmJbhFeanzHmzJiDY6616orqhUFCojnZFXgwaGjYhkuEvt","/ip4/172.18.11.119/tcp/61170/p2p/16Uiu2HAmJbhFeanzHmzJiDY6616orqhUFCojnZFXgwaGjYhkuEvt"],"protocols":["/vac/waku/relay/2.0.0","/vac/waku/lightpush/2.0.0-beta1","/vac/waku/filter-subscribe/2.0.0-beta1"],"connected":true,"pubsubTopics":["/waku/2/rs/3/0","/waku/2/rs/3/1"]},{"id":"16Uiu2HAmJ8aiiXrGfjt3vCFMtoANnqhHVXCDZTUS5iyHucrRRXaP","multiaddrs":["/ip4/172.17.0.10/tcp/13668/p2p/16Uiu2HAmJ8aiiXrGfjt3vCFMtoANnqhHVXCDZTUS5iyHucrRRXaP","/ip4/172.17.0.10/tcp/13669/ws/p2p/16Uiu2HAmJ8aiiXrGfjt3vCFMtoANnqhHVXCDZTUS5iyHucrRRXaP"],"protocols":["/vac/waku/filter-push/2.0.0-beta1"],"connected":true,"pubsubTopics":[]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61169/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.9/tcp/11962/p2p/16Uiu2HAm9HB9drYqDX3XBQ1VQ5jmu4AejboZ1ZA4CQ4Pd1TtqYth","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"},{"multiaddr":"/ip4/172.17.0.10/tcp/13668/p2p/16Uiu2HAmJ8aiiXrGfjt3vCFMtoANnqhHVXCDZTUS5iyHucrRRXaP","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13667/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAmJbhFeanzHmzJiDY6616orqhUFCojnZFXgwaGjYhkuEvt","multiaddrs":["/ip4/172.18.11.119/tcp/61170/p2p/16Uiu2HAmJbhFeanzHmzJiDY6616orqhUFCojnZFXgwaGjYhkuEvt","/ip4/172.18.11.119/tcp/61171/ws/p2p/16Uiu2HAmJbhFeanzHmzJiDY6616orqhUFCojnZFXgwaGjYhkuEvt"],"protocols":["/vac/waku/lightpush/2.0.0-beta1","/vac/waku/filter-subscribe/2.0.0-beta1","/vac/waku/relay/2.0.0"],"connected":true,"pubsubTopics":["/waku/2/rs/3/0","/waku/2/rs/3/1"]},{"id":"16Uiu2HAm9HB9drYqDX3XBQ1VQ5jmu4AejboZ1ZA4CQ4Pd1TtqYth","multiaddrs":["/ip4/172.17.0.9/tcp/11963/ws/p2p/16Uiu2HAm9HB9drYqDX3XBQ1VQ5jmu4AejboZ1ZA4CQ4Pd1TtqYth","/ip4/172.17.0.9/tcp/11962/p2p/16Uiu2HAm9HB9drYqDX3XBQ1VQ5jmu4AejboZ1ZA4CQ4Pd1TtqYth"],"protocols":["/vac/waku/relay/2.0.0","/vac/waku/lightpush/2.0.0-beta1","/vac/waku/filter-push/2.0.0-beta1"],"connected":true,"pubsubTopics":["/waku/2/rs/3/1"]}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11961/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1724382794357762304}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13667/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1724382794357762304,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id b41749c27009
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 04b66901c948
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id db9530ee82bb
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.