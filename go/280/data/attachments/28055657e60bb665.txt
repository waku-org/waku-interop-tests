[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_valid_meta with id: 2024-09-15_03-23-50__c6a63c76-7c11-4025-b3ee-c66063a34069
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-15_03-23-50__c6a63c76-7c11-4025-b3ee-c66063a34069__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.170.54
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['43646', '43647', '43648', '43649', '43650']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 43646:43646 -p 43647:43647 -p 43648:43648 -p 43649:43649 -p 43650:43650 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=43648 --rest-port=43646 --tcp-port=43647 --discv5-udp-port=43649 --rest-address=0.0.0.0 --nat=extip:172.18.170.54 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=83589c5fbdfce292fdf763ffbacee947ca7d917e2576c701fa44d050b4ce3fd7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=43650 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.170.54 waku c12297b6aa61aa74aec272841b0eda9f9aa0481713983cdb635f5964deed9693
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID c12297b6aa61. Setting up logs at ./log/docker/receiving_node1_2024-09-15_03-23-50__c6a63c76-7c11-4025-b3ee-c66063a34069__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 43646
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43646/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43646/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.170.54/tcp/43647/p2p/16Uiu2HAmPFfhcVyDAKcJn2BWcQRLVDJJcNgw1dSenzsywLctxGF9","/ip4/172.18.170.54/tcp/43648/ws/p2p/16Uiu2HAmPFfhcVyDAKcJn2BWcQRLVDJJcNgw1dSenzsywLctxGF9"],"enrUri":"enr:-LO4QAXOP0QixT_x6mZ5BWeDqEznA1xEr7e5rArfdgbeCG2oGfn-Z7BYKPAPG4Re1z-QCBEhXJKL0HBPhv1Je0hVnlkBgmlkgnY0gmlwhKwSqjaKbXVsdGlhZGRyc4wACgSsEqo2BqqA3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOddxxDpz1Bl23KjZYlnz5FlqLHz-DM77gmsS-7ePOruIN0Y3CCqn-DdWRwgqqBhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-15_03-23-50__c6a63c76-7c11-4025-b3ee-c66063a34069__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.48.223
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['22251', '22252', '22253', '22254', '22255']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 22251:22251 -p 22252:22252 -p 22253:22253 -p 22254:22254 -p 22255:22255 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22253 --rest-port=22251 --tcp-port=22252 --discv5-udp-port=22254 --rest-address=0.0.0.0 --nat=extip:172.18.48.223 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7d39a0a3e02b7f474ea8c117c9e3ebeac6904e2d67c0303741da83676d27ef7f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22255 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.48.223 waku 639343c5ad7b78f577313a51259bcfa75bc82134435b92c7b03e36c3721f7346
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 639343c5ad7b. Setting up logs at ./log/docker/receiving_node2_2024-09-15_03-23-50__c6a63c76-7c11-4025-b3ee-c66063a34069__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 22251
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22251/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22251/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.48.223/tcp/22252/p2p/16Uiu2HAmFZzdn19o3iYVE2iBC4kgvuDZqnghGn6dctsX7X9ydAbM","/ip4/172.18.48.223/tcp/22253/ws/p2p/16Uiu2HAmFZzdn19o3iYVE2iBC4kgvuDZqnghGn6dctsX7X9ydAbM"],"enrUri":"enr:-LO4QGysD1Npp5qm42hJBAWtCcnnBE9YBS3jib2y7Yc-4eFlQhPpPX2ONinFhmmWo_0e7JZuozZkS25-WALJuyYL6fYBgmlkgnY0gmlwhKwSMN-KbXVsdGlhZGRyc4wACgSsEjDfBlbt3QOCcnOFAAMBAACJc2VjcDI1NmsxoQMrS3pnk6bo5WY6JR2KRujiasK5kCAkBrl7tyo09LWkrIN0Y3CCVuyDdWRwglbuhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22251/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.170.54/tcp/43647/p2p/16Uiu2HAmPFfhcVyDAKcJn2BWcQRLVDJJcNgw1dSenzsywLctxGF9"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-15_03-23-50__c6a63c76-7c11-4025-b3ee-c66063a34069__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.218.88
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['39920', '39921', '39922', '39923', '39924']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 39920:39920 -p 39921:39921 -p 39922:39922 -p 39923:39923 -p 39924:39924 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=39922 --rest-port=39920 --tcp-port=39921 --discv5-udp-port=39923 --rest-address=0.0.0.0 --nat=extip:172.18.218.88 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eeff1dc5e3bc91e61ef69d2bc621ae9f248bfb7abedeff32a6064b40eccaa5ff --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-LO4QAXOP0QixT_x6mZ5BWeDqEznA1xEr7e5rArfdgbeCG2oGfn-Z7BYKPAPG4Re1z-QCBEhXJKL0HBPhv1Je0hVnlkBgmlkgnY0gmlwhKwSqjaKbXVsdGlhZGRyc4wACgSsEqo2BqqA3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOddxxDpz1Bl23KjZYlnz5FlqLHz-DM77gmsS-7ePOruIN0Y3CCqn-DdWRwgqqBhXdha3UyCQ --lightpushnode=/ip4/172.18.170.54/tcp/43647/p2p/16Uiu2HAmPFfhcVyDAKcJn2BWcQRLVDJJcNgw1dSenzsywLctxGF9 --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.218.88 waku e0244f1cbffe88d29cb5c9d91fa4f5bc0d4317ef3b0ef4ac4278baf2fe4aacc4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID e0244f1cbffe. Setting up logs at ./log/docker/lightpush_node1_2024-09-15_03-23-50__c6a63c76-7c11-4025-b3ee-c66063a34069__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 39920
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39920/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QHLOBIoxTarBHDROlC6u7pzkcLnPKmErOZzG9SdxyufnckVm_1K_92yZhdWtMzKs0sNywFZFsowHNHlg3YXVAyWGAZHztV2XgmlkgnY0gmlwhKwRAAyJc2VjcDI1NmsxoQLFwkQQgXAL5o3_ZBg4DhjLuYz5ygOheOJvrzRpP3ys0YN0Y3CCm_GDdWRwgpvzhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/39921/p2p/16Uiu2HAm8je77TuSwPsrARn2Rvgjjk9vXb8cqPmNuW147ZNAzGr4","/ip4/127.0.0.1/tcp/39922/ws/p2p/16Uiu2HAm8je77TuSwPsrARn2Rvgjjk9vXb8cqPmNuW147ZNAzGr4","/ip4/172.17.0.12/tcp/39921/p2p/16Uiu2HAm8je77TuSwPsrARn2Rvgjjk9vXb8cqPmNuW147ZNAzGr4","/ip4/172.17.0.12/tcp/39922/ws/p2p/16Uiu2HAm8je77TuSwPsrARn2Rvgjjk9vXb8cqPmNuW147ZNAzGr4"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39920/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.170.54/tcp/43647/p2p/16Uiu2HAmPFfhcVyDAKcJn2BWcQRLVDJJcNgw1dSenzsywLctxGF9", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39920/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.48.223/tcp/22252/p2p/16Uiu2HAmFZzdn19o3iYVE2iBC4kgvuDZqnghGn6dctsX7X9ydAbM", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43646/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:22251/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39920/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1726370636263047936, "meta": "TGlnaHQgcHVzaCB3b3JrcyEh"}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43646/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1726370636263047936,"meta":"TGlnaHQgcHVzaCB3b3JrcyEh","ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:22251/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1726370636263047936,"meta":"TGlnaHQgcHVzaCB3b3JrcyEh","ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id c12297b6aa61
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 639343c5ad7b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id e0244f1cbffe
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.