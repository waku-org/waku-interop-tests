[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_valid_version with id: 2025-01-26_03-08-27__5f4f85ea-7568-45e1-83c5-99d7c56fa3c4
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-01-26_03-08-27__5f4f85ea-7568-45e1-83c5-99d7c56fa3c4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.5.80
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['21294', '21295', '21296', '21297', '21298']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 21294:21294 -p 21295:21295 -p 21296:21296 -p 21297:21297 -p 21298:21298 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=21296 --rest-port=21294 --tcp-port=21295 --discv5-udp-port=21297 --rest-address=0.0.0.0 --nat=extip:172.18.5.80 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fe0ed03619b155bfbdceb12edaddafcb60c6c13cc5ab2f97a2baaa2a7cf6c6a8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=21298 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.5.80 waku f8b5ec509facd08834e8907cf8f45d4a04cdb54e39659464a8d20314b5ad1db7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID f8b5ec509fac. Setting up logs at ./log/docker/receiving_node1_2025-01-26_03-08-27__5f4f85ea-7568-45e1-83c5-99d7c56fa3c4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 21294
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 9d8cc6157643. Exiting log stream.
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 714a6d620505. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21294/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21294/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.5.80/tcp/21295/p2p/16Uiu2HAmR7kBNme3MQRD9oW4chX19KDwDkhS5SbuDfCTksHDkABx","/ip4/172.18.5.80/tcp/21296/ws/p2p/16Uiu2HAmR7kBNme3MQRD9oW4chX19KDwDkhS5SbuDfCTksHDkABx"],"enrUri":"enr:-L24QD7wcd1BfAwPs_QAaeYvqEj6hFbzK7osx4_erSREtLTcEZNvPI6bCCUnGkskSJoTexmd8lULoCWY0PSIW9DRTtgCgmlkgnY0gmlwhKwSBVCKbXVsdGlhZGRyc5YACASsEgVQBlMvAAoErBIFUAZTMN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDuSbm3z2xppKjzdX1P-PlyfQbQHrXf22ho_nitwWzoDeDdGNwglMvg3VkcIJTMYV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-01-26_03-08-27__5f4f85ea-7568-45e1-83c5-99d7c56fa3c4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.229.2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['18871', '18872', '18873', '18874', '18875']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 18871:18871 -p 18872:18872 -p 18873:18873 -p 18874:18874 -p 18875:18875 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18873 --rest-port=18871 --tcp-port=18872 --discv5-udp-port=18874 --rest-address=0.0.0.0 --nat=extip:172.18.229.2 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f6cd3e7b5b62bddab16b1fc49fc13f2d81cabed1c2a034bc7cf35c1ed136dd7b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18875 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.229.2 waku 99f46a1521083904bf841a5fe72be8cd13a2b9b3d3c08de1a95270f9f7db336d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 99f46a152108. Setting up logs at ./log/docker/receiving_node2_2025-01-26_03-08-27__5f4f85ea-7568-45e1-83c5-99d7c56fa3c4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 18871
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18871/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18871/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.229.2/tcp/18872/p2p/16Uiu2HAm9Lw2j9isPxnG8amzzHcv2fEGZXD47GnBQeRzcxiHC4xw","/ip4/172.18.229.2/tcp/18873/ws/p2p/16Uiu2HAm9Lw2j9isPxnG8amzzHcv2fEGZXD47GnBQeRzcxiHC4xw"],"enrUri":"enr:-L24QDrZdMh-caz_CZrXrPkh52cLI_4SQSO7-1y00hqEumjRKm1M6pNwlHnHi4TC82Yv1_kPFaiXBIMKYRn-NBqsBgkCgmlkgnY0gmlwhKwS5QKKbXVsdGlhZGRyc5YACASsEuUCBkm4AAoErBLlAgZJud0DgnJzhQADAQAAiXNlY3AyNTZrMaECzsy7DZjIQwAzAUGOqxKIJvyUFGAYqonVC4x_gxsg97CDdGNwgkm4g3VkcIJJuoV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18871/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.5.80/tcp/21295/p2p/16Uiu2HAmR7kBNme3MQRD9oW4chX19KDwDkhS5SbuDfCTksHDkABx"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-01-26_03-08-27__5f4f85ea-7568-45e1-83c5-99d7c56fa3c4__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.144.131
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['47538', '47539', '47540', '47541', '47542']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 47538:47538 -p 47539:47539 -p 47540:47540 -p 47541:47541 -p 47542:47542 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=47540 --rest-port=47538 --tcp-port=47539 --discv5-udp-port=47541 --rest-address=0.0.0.0 --nat=extip:172.18.144.131 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1f0a724e05b4df1db88fbbcef4a0fa9b2de47b09459035abc8a04b4bd1569e64 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QD7wcd1BfAwPs_QAaeYvqEj6hFbzK7osx4_erSREtLTcEZNvPI6bCCUnGkskSJoTexmd8lULoCWY0PSIW9DRTtgCgmlkgnY0gmlwhKwSBVCKbXVsdGlhZGRyc5YACASsEgVQBlMvAAoErBIFUAZTMN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDuSbm3z2xppKjzdX1P-PlyfQbQHrXf22ho_nitwWzoDeDdGNwglMvg3VkcIJTMYV3YWt1Mgk --lightpushnode=/ip4/172.18.5.80/tcp/21295/p2p/16Uiu2HAmR7kBNme3MQRD9oW4chX19KDwDkhS5SbuDfCTksHDkABx --lightpush=true --relay=false --pubsub-topic=/waku/2/rs/3/1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.144.131 waku e6c087e640c4d4e04dbe10330c38c0dad5194e237fdbf0ca47744f8b46ca9c26
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID e6c087e640c4. Setting up logs at ./log/docker/lightpush_node1_2025-01-26_03-08-27__5f4f85ea-7568-45e1-83c5-99d7c56fa3c4__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 47538
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47538/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QFGpLsAWIZuPptIpOLUQ1pg_rX2Vtw1SXxFdsJW4PqwLIorOtlc97jNZAXpcqmpyXQkJZ5GDkzsPWYlDTqWmQp6GAZSglQ8YgmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQK4SqS_MamzJqlRi4lVf6pIV56dPaa6PQ6JvJwJOFXhRIN0Y3CCubODdWRwgrm1hXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/47539/p2p/16Uiu2HAm7q51czfnw15jdLBGoe9MsWME7Ac33d61J7o9QnU6so5d","/ip4/127.0.0.1/tcp/47540/ws/p2p/16Uiu2HAm7q51czfnw15jdLBGoe9MsWME7Ac33d61J7o9QnU6so5d","/ip4/172.17.0.4/tcp/47539/p2p/16Uiu2HAm7q51czfnw15jdLBGoe9MsWME7Ac33d61J7o9QnU6so5d","/ip4/172.17.0.4/tcp/47540/ws/p2p/16Uiu2HAm7q51czfnw15jdLBGoe9MsWME7Ac33d61J7o9QnU6so5d"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47538/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.5.80/tcp/21295/p2p/16Uiu2HAmR7kBNme3MQRD9oW4chX19KDwDkhS5SbuDfCTksHDkABx", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47538/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.229.2/tcp/18872/p2p/16Uiu2HAm9Lw2j9isPxnG8amzzHcv2fEGZXD47GnBQeRzcxiHC4xw", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:21294/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18871/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47538/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1737860911907348736, "version": 10}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:21294/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":10,"timestamp":1737860911907348736,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18871/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":10,"timestamp":1737860911907348736,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id f8b5ec509fac
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 99f46a152108
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container f8b5ec509fac. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id e6c087e640c4
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.