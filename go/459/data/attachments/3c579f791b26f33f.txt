2025-02-09 03:06:11.569 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-09 03:06:11.569 DEBUG [tests.conftest] Running test: test_store_node_not_connected_directly_to_relaying_node with id: 2025-02-09_03-06-11__438e58cb-e451-4947-a6ef-74b5a1d93502
2025-02-09 03:06:11.570 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-09 03:06:11.570 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-09 03:06:11.570 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-09 03:06:11.579 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-09 03:06:11.579 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-09_03-06-11__438e58cb-e451-4947-a6ef-74b5a1d93502__wakuorg_go-waku:latest.log
2025-02-09 03:06:11.585 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 03:06:11.585 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-09_03-06-11__438e58cb-e451-4947-a6ef-74b5a1d93502__wakuorg_nwaku:latest.log
2025-02-09 03:06:11.590 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-09 03:06:11.590 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node3_2025-02-09_03-06-11__438e58cb-e451-4947-a6ef-74b5a1d93502__wakuorg_go-waku:latest.log
2025-02-09 03:06:11.590 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-09 03:06:11.591 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-09 03:06:11.592 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 03:06:11.592 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 03:06:11.660 DEBUG [src.node.docker_mananger] Network waku created
2025-02-09 03:06:11.660 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.91.46
2025-02-09 03:06:11.660 DEBUG [src.node.docker_mananger] Generated ports ['55400', '55401', '55402', '55403', '55404']
2025-02-09 03:06:11.660 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 03:06:11.660 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 03:06:11.660 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 03:06:11.661 DEBUG [src.node.docker_mananger] docker run -i -t -p 55400:55400 -p 55401:55401 -p 55402:55402 -p 55403:55403 -p 55404:55404 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=55402 --rest-port=55400 --tcp-port=55401 --discv5-udp-port=55403 --rest-address=0.0.0.0 --nat=extip:172.18.91.46 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dfccb5de9ddec3417db89dedb83b0e31eff9ed5af1ef9013ad99130c719926e3 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true
2025-02-09 03:06:14.677 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 03:06:14.677 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 03:06:14.679 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 03:06:14.679 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.77.40
2025-02-09 03:06:14.679 DEBUG [src.node.docker_mananger] Generated ports ['14041', '14042', '14043', '14044', '14045']
2025-02-09 03:06:14.680 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 03:06:14.680 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 03:06:14.680 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 03:06:14.680 DEBUG [src.node.docker_mananger] docker run -i -t -p 14041:14041 -p 14042:14042 -p 14043:14043 -p 14044:14044 -p 14045:14045 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=14043 --rest-port=14041 --tcp-port=14042 --discv5-udp-port=14044 --rest-address=0.0.0.0 --nat=extip:172.18.77.40 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=aee7ae4c71fa478b8c5b356d88bbd3adee6dc2c30e69a1e3dc5716d6cf9757a2 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true
2025-02-09 03:06:14.949 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.77.40 waku 72029ae203d610437327dc8a01a5507b2253d52ce61a0b358965b373da0242ef
2025-02-09 03:06:15.000 DEBUG [src.node.docker_mananger] Container started with ID 72029ae203d6. Setting up logs at ./log/docker/node1_2025-02-09_03-06-11__438e58cb-e451-4947-a6ef-74b5a1d93502__wakuorg_go-waku:latest.log
2025-02-09 03:06:15.002 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 14041
2025-02-09 03:06:15.002 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 03:06:16.003 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14041/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 03:06:16.005 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QELU57OOmKIu_oWKcn0P4TJncguu3YJ2r4gOeSRge9gca4VO3nja_cfkLh7vKGuaQTHbyqWqVnx7VERg1hMukb6GAZTorARUgmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaEDXlQdJrMSOkkmnxC-VSFj-9thGtJEfExZHXQnaQxtzwiDdGNwgjbag3VkcII23IV3YWt1MgE","listenAddresses":["/ip4/127.0.0.1/tcp/14042/p2p/16Uiu2HAmK1D4ikcLGB8VBu2RhxPerxKPnnC3RbKPXHQcx2XZSZ5y","/ip4/127.0.0.1/tcp/14043/ws/p2p/16Uiu2HAmK1D4ikcLGB8VBu2RhxPerxKPnnC3RbKPXHQcx2XZSZ5y","/ip4/172.17.0.2/tcp/14042/p2p/16Uiu2HAmK1D4ikcLGB8VBu2RhxPerxKPnnC3RbKPXHQcx2XZSZ5y","/ip4/172.17.0.2/tcp/14043/ws/p2p/16Uiu2HAmK1D4ikcLGB8VBu2RhxPerxKPnnC3RbKPXHQcx2XZSZ5y"]}'
2025-02-09 03:06:16.006 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 03:06:16.006 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 03:06:16.006 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 03:06:16.008 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 03:06:16.008 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.136.137
2025-02-09 03:06:16.008 DEBUG [src.node.docker_mananger] Generated ports ['23917', '23918', '23919', '23920', '23921']
2025-02-09 03:06:16.008 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 03:06:16.008 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 03:06:16.008 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 03:06:16.009 DEBUG [src.node.docker_mananger] docker run -i -t -p 23917:23917 -p 23918:23918 -p 23919:23919 -p 23920:23920 -p 23921:23921 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23919 --rest-port=23917 --tcp-port=23918 --discv5-udp-port=23920 --rest-address=0.0.0.0 --nat=extip:172.18.136.137 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d56b0cab3bde88af1c0f06948d35833512aea2eca8e90a6269ecced9a9cf2a6a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23921 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-J-4QELU57OOmKIu_oWKcn0P4TJncguu3YJ2r4gOeSRge9gca4VO3nja_cfkLh7vKGuaQTHbyqWqVnx7VERg1hMukb6GAZTorARUgmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaEDXlQdJrMSOkkmnxC-VSFj-9thGtJEfExZHXQnaQxtzwiDdGNwgjbag3VkcII23IV3YWt1MgE
2025-02-09 03:06:18.343 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.136.137 waku d17a533614876b8beb5cf0ab33676e962530e461e7a12cdaf3ef3e6a7a4c0d3e
2025-02-09 03:06:18.392 DEBUG [src.node.docker_mananger] Container started with ID d17a53361487. Setting up logs at ./log/docker/node2_2025-02-09_03-06-11__438e58cb-e451-4947-a6ef-74b5a1d93502__wakuorg_nwaku:latest.log
2025-02-09 03:06:18.394 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 23917
2025-02-09 03:06:18.394 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 03:06:19.395 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23917/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 03:06:19.399 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 03:06:19.400 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 03:06:19.401 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23917/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 03:06:19.405 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.136.137/tcp/23918/p2p/16Uiu2HAmAeDLusdUEhoTDQQmf5eZKcfG3fZn9YhzioFfJ3rPrYN1","/ip4/172.18.136.137/tcp/23919/ws/p2p/16Uiu2HAmAeDLusdUEhoTDQQmf5eZKcfG3fZn9YhzioFfJ3rPrYN1"],"enrUri":"enr:-L24QKzH1paCpvq-12XOMzpn-y_SZl1-LuLssx3FmOTszRBiciPpfuFcTwFK9YNTACvvLIwrUhCSCPD6JvLIfHz-WaACgmlkgnY0gmlwhKwSiImKbXVsdGlhZGRyc5YACASsEoiJBl1uAAoErBKIiQZdb90DgnJzhQADAQAAiXNlY3AyNTZrMaEC4hW8tFPum8lIC6WjS64CtbRKDNuhxMA0m6TgikYxAcaDdGNwgl1ug3VkcIJdcIV3YWt1MgM"}'
2025-02-09 03:06:19.406 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 03:06:19.407 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 03:06:19.407 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 03:06:19.410 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 03:06:19.411 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.140.219
2025-02-09 03:06:19.412 DEBUG [src.node.docker_mananger] Generated ports ['52725', '52726', '52727', '52728', '52729']
2025-02-09 03:06:19.412 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 03:06:19.412 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 03:06:19.412 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 03:06:19.412 DEBUG [src.node.docker_mananger] docker run -i -t -p 52725:52725 -p 52726:52726 -p 52727:52727 -p 52728:52728 -p 52729:52729 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=52727 --rest-port=52725 --tcp-port=52726 --discv5-udp-port=52728 --rest-address=0.0.0.0 --nat=extip:172.18.140.219 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5bd342d3febcf423fda81e6af1ffdabcb2b9eef33fb0575ceecb56c6d92d4be2 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --storenode=/ip4/172.18.136.137/tcp/23918/p2p/16Uiu2HAmAeDLusdUEhoTDQQmf5eZKcfG3fZn9YhzioFfJ3rPrYN1 --discv5-bootstrap-node=enr:-L24QKzH1paCpvq-12XOMzpn-y_SZl1-LuLssx3FmOTszRBiciPpfuFcTwFK9YNTACvvLIwrUhCSCPD6JvLIfHz-WaACgmlkgnY0gmlwhKwSiImKbXVsdGlhZGRyc5YACASsEoiJBl1uAAoErBKIiQZdb90DgnJzhQADAQAAiXNlY3AyNTZrMaEC4hW8tFPum8lIC6WjS64CtbRKDNuhxMA0m6TgikYxAcaDdGNwgl1ug3VkcIJdcIV3YWt1MgM --pubsub-topic=/waku/2/rs/3/1
2025-02-09 03:06:19.654 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.140.219 waku ce2ae0b4782f353732a4906fa2b9e7f92a64ee4c1e817eac8833a4f95674c4fd
2025-02-09 03:06:19.707 DEBUG [src.node.docker_mananger] Container started with ID ce2ae0b4782f. Setting up logs at ./log/docker/node3_2025-02-09_03-06-11__438e58cb-e451-4947-a6ef-74b5a1d93502__wakuorg_go-waku:latest.log
2025-02-09 03:06:19.709 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 52725
2025-02-09 03:06:19.709 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 03:06:20.709 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52725/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 03:06:20.712 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QGf29gvP82SRfaxrH254cPCjCfU2uczr3hVu1eCcFDHEP3PMdnJDUUoJiB8oads_NxiFQi-vNldE3Q_S1terKGWGAZTorBa1gmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQPmAOyGtXlpzQioQFYtV2E8FNDuvMikOLVn62v4bww_koN0Y3CCzfaDdWRwgs34hXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/52726/p2p/16Uiu2HAmU8pwNVvMbpjxWWVZBv5CCPtCiB3GjXccBexnuPpm3V8V","/ip4/127.0.0.1/tcp/52727/ws/p2p/16Uiu2HAmU8pwNVvMbpjxWWVZBv5CCPtCiB3GjXccBexnuPpm3V8V","/ip4/172.17.0.4/tcp/52726/p2p/16Uiu2HAmU8pwNVvMbpjxWWVZBv5CCPtCiB3GjXccBexnuPpm3V8V","/ip4/172.17.0.4/tcp/52727/ws/p2p/16Uiu2HAmU8pwNVvMbpjxWWVZBv5CCPtCiB3GjXccBexnuPpm3V8V"]}'
2025-02-09 03:06:20.712 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 03:06:20.712 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14041/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-09 03:06:20.714 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-09 03:06:20.715 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23917/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-09 03:06:20.718 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 03:06:20.718 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14041/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-09 03:06:20.720 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"id":"16Uiu2HAmAeDLusdUEhoTDQQmf5eZKcfG3fZn9YhzioFfJ3rPrYN1","multiaddrs":["/ip4/172.18.136.137/tcp/23918/p2p/16Uiu2HAmAeDLusdUEhoTDQQmf5eZKcfG3fZn9YhzioFfJ3rPrYN1","/ip4/172.18.136.137/tcp/23919/ws/p2p/16Uiu2HAmAeDLusdUEhoTDQQmf5eZKcfG3fZn9YhzioFfJ3rPrYN1"],"protocols":null,"connected":false,"pubsubTopics":[]}]'
2025-02-09 03:06:20.720 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23917/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-09 03:06:20.723 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.4/tcp/52726/p2p/16Uiu2HAmU8pwNVvMbpjxWWVZBv5CCPtCiB3GjXccBexnuPpm3V8V","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
2025-02-09 03:06:20.723 DEBUG [src.libs.common] Sleeping for 30 seconds
2025-02-09 03:06:50.724 DEBUG [src.steps.store] Relaying message
2025-02-09 03:06:50.724 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14041/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 03:06:50.727 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-09 03:06:50.728 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-09 03:06:50.929 DEBUG [src.steps.store] Checking that peer wakuorg/go-waku:latest can find the stored messages
2025-02-09 03:06:50.929 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52725/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-filter%2Fproto&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-09 03:06:50.935 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"e7dc1e001a1c635b855e96e75aecfa5fb18b3e75cee74c81de069c81948c3062","status_code":200,"status_desc":"OK","messages":[{"message_hash":"cFHIo9FL+lTQtf7z7NMV7sOyCDMl/Tc0vRyZ6IH5DJ0="}]}'
2025-02-09 03:06:50.938 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-09 03:06:50.939 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-09 03:06:50.939 DEBUG [src.node.waku_node] Stopping container with id 72029ae203d6
2025-02-09 03:06:51.458 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 03:06:51.458 DEBUG [src.node.waku_node] Stopping container with id d17a53361487
2025-02-09 03:06:52.016 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 03:06:52.017 DEBUG [src.node.waku_node] Stopping container with id ce2ae0b4782f
2025-02-09 03:06:52.274 ERROR [src.node.docker_mananger] Max retries reached for container 72029ae203d6. Exiting log stream.
2025-02-09 03:06:52.531 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 03:06:52.532 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-09 03:06:52.773 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-09 03:06:52.798 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-09 03:06:52.803 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
