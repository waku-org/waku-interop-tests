2025-02-09 03:07:08.466 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-09 03:07:08.466 DEBUG [tests.conftest] Running test: test_store with id: 2025-02-09_03-07-08__30b7497c-e9a0-41c8-a8da-1f25f799edc4
2025-02-09 03:07:08.467 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-09 03:07:08.467 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-09 03:07:08.467 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-09 03:07:08.467 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-09 03:07:08.468 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-09 03:07:08.476 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 03:07:08.476 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-09_03-07-08__30b7497c-e9a0-41c8-a8da-1f25f799edc4__wakuorg_nwaku:latest.log
2025-02-09 03:07:08.476 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 03:07:08.476 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 03:07:08.537 DEBUG [src.node.docker_mananger] Network waku created
2025-02-09 03:07:08.537 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.73.21
2025-02-09 03:07:08.537 DEBUG [src.node.docker_mananger] Generated ports ['41951', '41952', '41953', '41954', '41955']
2025-02-09 03:07:08.538 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 03:07:08.538 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 03:07:08.538 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 03:07:08.538 DEBUG [src.node.docker_mananger] docker run -i -t -p 41951:41951 -p 41952:41952 -p 41953:41953 -p 41954:41954 -p 41955:41955 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=41953 --rest-port=41951 --tcp-port=41952 --discv5-udp-port=41954 --rest-address=0.0.0.0 --nat=extip:172.18.73.21 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f05ef9a06dcf1e0b53eda78e75d85bfa5731012acd0853fce83d44d7aed54456 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=41955 --metrics-logging=true --relay=true --store=true
2025-02-09 03:07:10.614 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.73.21 waku 5bcced07a4573478daed5f18e40b2666a5bfbd4e866c26400c89c4e684082593
2025-02-09 03:07:10.665 DEBUG [src.node.docker_mananger] Container started with ID 5bcced07a457. Setting up logs at ./log/docker/node1_2025-02-09_03-07-08__30b7497c-e9a0-41c8-a8da-1f25f799edc4__wakuorg_nwaku:latest.log
2025-02-09 03:07:10.666 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 41951
2025-02-09 03:07:10.667 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 03:07:11.669 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:41951/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 03:07:11.672 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 03:07:11.672 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 03:07:11.673 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:41951/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 03:07:11.675 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.73.21/tcp/41952/p2p/16Uiu2HAmCJXShpryL46T2GxqGp28J3tBfNypS7mSJG16Pp6VtqZ7","/ip4/172.18.73.21/tcp/41953/ws/p2p/16Uiu2HAmCJXShpryL46T2GxqGp28J3tBfNypS7mSJG16Pp6VtqZ7"],"enrUri":"enr:-L24QFZ8v_D2z73jY8hkQAWOrkKBoc-I-uWIsNYhTVyGjVA-evVaoJZBdiIVuonGGHqg_FuTbae3_KDkryUSqL27uVMCgmlkgnY0gmlwhKwSSRWKbXVsdGlhZGRyc5YACASsEkkVBqPgAAoErBJJFQaj4d0DgnJzhQADAQAAiXNlY3AyNTZrMaEC-sH126F-dmg3ZMQ-iN8cxJ227GrFgZ4P0ng7YyUpc56DdGNwgqPgg3VkcIKj4oV3YWt1MgM"}'
2025-02-09 03:07:11.675 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 03:07:11.681 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-09 03:07:11.681 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-09_03-07-08__30b7497c-e9a0-41c8-a8da-1f25f799edc4__wakuorg_go-waku:latest.log
2025-02-09 03:07:11.681 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 03:07:11.682 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 03:07:11.683 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 03:07:11.683 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.95.173
2025-02-09 03:07:11.683 DEBUG [src.node.docker_mananger] Generated ports ['63103', '63104', '63105', '63106', '63107']
2025-02-09 03:07:11.683 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 03:07:11.684 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 03:07:11.684 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 03:07:11.684 DEBUG [src.node.docker_mananger] docker run -i -t -p 63103:63103 -p 63104:63104 -p 63105:63105 -p 63106:63106 -p 63107:63107 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=63105 --rest-port=63103 --tcp-port=63104 --discv5-udp-port=63106 --rest-address=0.0.0.0 --nat=extip:172.18.95.173 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9f6a1c7699c299dbe2fe3dc8d090466bebb9fa79f1dfd3b23bbaa7b2cd7adabd --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --store=true --discv5-bootstrap-node=enr:-L24QFZ8v_D2z73jY8hkQAWOrkKBoc-I-uWIsNYhTVyGjVA-evVaoJZBdiIVuonGGHqg_FuTbae3_KDkryUSqL27uVMCgmlkgnY0gmlwhKwSSRWKbXVsdGlhZGRyc5YACASsEkkVBqPgAAoErBJJFQaj4d0DgnJzhQADAQAAiXNlY3AyNTZrMaEC-sH126F-dmg3ZMQ-iN8cxJ227GrFgZ4P0ng7YyUpc56DdGNwgqPgg3VkcIKj4oV3YWt1MgM --storenode=/ip4/172.18.73.21/tcp/41952/p2p/16Uiu2HAmCJXShpryL46T2GxqGp28J3tBfNypS7mSJG16Pp6VtqZ7
2025-02-09 03:07:14.155 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.95.173 waku eb99eb55880a7d59ee699e25dc4a11c7a4d926a6b72f238dd546bc1a46659f60
2025-02-09 03:07:14.210 DEBUG [src.node.docker_mananger] Container started with ID eb99eb55880a. Setting up logs at ./log/docker/node1_2025-02-09_03-07-08__30b7497c-e9a0-41c8-a8da-1f25f799edc4__wakuorg_go-waku:latest.log
2025-02-09 03:07:14.211 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 63103
2025-02-09 03:07:14.211 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 03:07:15.212 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63103/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 03:07:15.215 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QNwSdeoLaTMSYu7mgedH82juRiOzVoj8nEBBsqA8LNFzfGOC7h-IiF-ePqUFoMKdbNqMh6qxqCl4wZd4O8HcrU6GAZTorOuigmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaEC3ZWH_uSr5xPOv1a8CrFtYYdyxYBi2jyA8K88P4GrB4WDdGNwgvaAg3VkcIL2goV3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/63104/p2p/16Uiu2HAmALeKwanmmhAHq7uRsstg6zQvzQGJ9dYcfrWy5Jh1e83E","/ip4/127.0.0.1/tcp/63105/ws/p2p/16Uiu2HAmALeKwanmmhAHq7uRsstg6zQvzQGJ9dYcfrWy5Jh1e83E","/ip4/172.17.0.3/tcp/63104/p2p/16Uiu2HAmALeKwanmmhAHq7uRsstg6zQvzQGJ9dYcfrWy5Jh1e83E","/ip4/172.17.0.3/tcp/63105/ws/p2p/16Uiu2HAmALeKwanmmhAHq7uRsstg6zQvzQGJ9dYcfrWy5Jh1e83E"]}'
2025-02-09 03:07:15.216 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 03:07:15.216 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:41951/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-09 03:07:15.235 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 03:07:15.236 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63103/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-09 03:07:15.238 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-09 03:07:15.239 DEBUG [src.steps.store] Relaying message
2025-02-09 03:07:15.240 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:41951/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 03:07:15.254 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 03:07:15.255 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-09 03:07:15.455 DEBUG [src.steps.store] Checking that peer wakuorg/go-waku:latest can find the stored messages
2025-02-09 03:07:15.456 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63103/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-relay%2Fproto&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-09 03:07:15.461 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"8b94ce862529b4e31fd1060e17c9a719d318e8432863e4607e03d83a9b5089fb","status_code":200,"status_desc":"OK","messages":[{"message_hash":"xBT+86X1aEp/2SzDDQfAppBWR4PbzvPNEpWBucsCLmI="}]}'
2025-02-09 03:07:15.464 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-09 03:07:15.465 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-09 03:07:15.465 DEBUG [src.node.waku_node] Stopping container with id 5bcced07a457
2025-02-09 03:07:16.051 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 03:07:16.051 DEBUG [src.node.waku_node] Stopping container with id eb99eb55880a
2025-02-09 03:07:16.703 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 03:07:16.704 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-09 03:07:16.710 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-09 03:07:16.712 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
