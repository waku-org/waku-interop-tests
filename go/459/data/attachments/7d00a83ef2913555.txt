2025-02-09 03:08:53.667 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-09 03:08:53.668 DEBUG [tests.conftest] Running test: test_relay_unsubscribe_with_invalid_pubsub_topic_format with id: 2025-02-09_03-08-53__53c575c0-9696-418e-a2b1-57308516b0a8
2025-02-09 03:08:53.668 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-09 03:08:53.668 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-09 03:08:53.669 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2025-02-09 03:08:53.675 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 03:08:53.675 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-09_03-08-53__53c575c0-9696-418e-a2b1-57308516b0a8__wakuorg_nwaku:latest.log
2025-02-09 03:08:53.675 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 03:08:53.675 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 03:08:53.677 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 03:08:53.677 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.122.179
2025-02-09 03:08:53.677 DEBUG [src.node.docker_mananger] Generated ports ['53521', '53522', '53523', '53524', '53525']
2025-02-09 03:08:53.677 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 03:08:53.677 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 03:08:53.677 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 03:08:53.678 DEBUG [src.node.docker_mananger] docker run -i -t -p 53521:53521 -p 53522:53522 -p 53523:53523 -p 53524:53524 -p 53525:53525 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=53523 --rest-port=53521 --tcp-port=53522 --discv5-udp-port=53524 --rest-address=0.0.0.0 --nat=extip:172.18.122.179 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dfa5ad06bfe0ec3aab98effebf75b7f557eeae2a36f9abea6c0e412bf97dfadb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=53525 --metrics-logging=true --relay=true
2025-02-09 03:08:53.908 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.122.179 waku 8492b23077bc6b8111971fd86028122884dbaa19c41221208482a83445e8ef7c
2025-02-09 03:08:53.958 DEBUG [src.node.docker_mananger] Container started with ID 8492b23077bc. Setting up logs at ./log/docker/node1_2025-02-09_03-08-53__53c575c0-9696-418e-a2b1-57308516b0a8__wakuorg_nwaku:latest.log
2025-02-09 03:08:53.958 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 53521
2025-02-09 03:08:53.959 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 03:08:54.472 ERROR [src.node.docker_mananger] Max retries reached for container b39023a0de9b. Exiting log stream.
2025-02-09 03:08:54.959 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53521/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 03:08:54.962 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 03:08:54.962 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 03:08:54.962 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53521/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 03:08:54.964 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.122.179/tcp/53522/p2p/16Uiu2HAkw17df4CF11yafVCQqsAXvGyiyHC7UPqsgFyHhW3Qo4va","/ip4/172.18.122.179/tcp/53523/ws/p2p/16Uiu2HAkw17df4CF11yafVCQqsAXvGyiyHC7UPqsgFyHhW3Qo4va"],"enrUri":"enr:-L24QJSh_czKAEm_wGAnTj-LrxCTZG0LUzrDQPr7-F2pL45LL5aEcWLt_0_sv-OKlB_4nKgF6Zzhdp3nCLnlEnQ7bNYCgmlkgnY0gmlwhKwSerOKbXVsdGlhZGRyc5YACASsEnqzBtESAAoErBJ6swbRE90DgnJzhQADAQAAiXNlY3AyNTZrMaECF2zb_vZkh_JGHMQ_oe8-2cKl_HLUq9IJDNkIT4XfB6-DdGNwgtESg3VkcILRFIV3YWt1MgE"}'
2025-02-09 03:08:54.965 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 03:08:54.971 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-09 03:08:54.971 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-09_03-08-53__53c575c0-9696-418e-a2b1-57308516b0a8__wakuorg_go-waku:latest.log
2025-02-09 03:08:54.971 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 03:08:54.971 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 03:08:54.972 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 03:08:54.972 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.0.12
2025-02-09 03:08:54.973 DEBUG [src.node.docker_mananger] Generated ports ['17024', '17025', '17026', '17027', '17028']
2025-02-09 03:08:54.973 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 03:08:54.973 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 03:08:54.973 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 03:08:54.973 DEBUG [src.node.docker_mananger] docker run -i -t -p 17024:17024 -p 17025:17025 -p 17026:17026 -p 17027:17027 -p 17028:17028 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=17026 --rest-port=17024 --tcp-port=17025 --discv5-udp-port=17027 --rest-address=0.0.0.0 --nat=extip:172.18.0.12 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7b027edfccb48a9970ae0dddaa6dc2f2b7ffbb6dfd3dd67af7bf668cfbffffaa --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --discv5-bootstrap-node=enr:-L24QJSh_czKAEm_wGAnTj-LrxCTZG0LUzrDQPr7-F2pL45LL5aEcWLt_0_sv-OKlB_4nKgF6Zzhdp3nCLnlEnQ7bNYCgmlkgnY0gmlwhKwSerOKbXVsdGlhZGRyc5YACASsEnqzBtESAAoErBJ6swbRE90DgnJzhQADAQAAiXNlY3AyNTZrMaECF2zb_vZkh_JGHMQ_oe8-2cKl_HLUq9IJDNkIT4XfB6-DdGNwgtESg3VkcILRFIV3YWt1MgE
2025-02-09 03:08:55.212 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.0.12 waku 54bfc0b6f0aa190b31442e69ff23fba548892fb1f0bb4a543da985ee7e07d342
2025-02-09 03:08:55.276 DEBUG [src.node.docker_mananger] Container started with ID 54bfc0b6f0aa. Setting up logs at ./log/docker/node2_2025-02-09_03-08-53__53c575c0-9696-418e-a2b1-57308516b0a8__wakuorg_go-waku:latest.log
2025-02-09 03:08:55.276 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 17024
2025-02-09 03:08:55.276 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 03:08:56.277 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17024/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 03:08:56.279 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QEQy5IooILetc5lC-tSIER5OWCrbZBB7gR72e69Mvzo5E6V3pet8XWKQU-8RlfKqsRuyFzZ5JLOxhM05sR1fjNOGAZTornZagmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaEDltzD8-Mr5FAji67rZkoH1B5SJta9BYO2yEr-n3-dA-qDdGNwgkKBg3VkcIJCg4V3YWt1MgE","listenAddresses":["/ip4/127.0.0.1/tcp/17025/p2p/16Uiu2HAmNotkXrK2ezrNwVJ5cGa2HaWoUVQDAVz13ckWAidQmkFb","/ip4/127.0.0.1/tcp/17026/ws/p2p/16Uiu2HAmNotkXrK2ezrNwVJ5cGa2HaWoUVQDAVz13ckWAidQmkFb","/ip4/172.17.0.3/tcp/17025/p2p/16Uiu2HAmNotkXrK2ezrNwVJ5cGa2HaWoUVQDAVz13ckWAidQmkFb","/ip4/172.17.0.3/tcp/17026/ws/p2p/16Uiu2HAmNotkXrK2ezrNwVJ5cGa2HaWoUVQDAVz13ckWAidQmkFb"]}'
2025-02-09 03:08:56.279 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 03:08:56.280 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17024/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.122.179/tcp/53522/p2p/16Uiu2HAkw17df4CF11yafVCQqsAXvGyiyHC7UPqsgFyHhW3Qo4va", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-09 03:08:56.296 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-09 03:08:56.301 DEBUG [tests.relay.test_subscribe] Running test with payload /test/2/rs/0/1
2025-02-09 03:08:56.302 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:53521/relay/v1/subscriptions" -H "Content-Type: application/json" -d '"/test/2/rs/0/1"'
2025-02-09 03:08:56.323 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:53521/relay/v1/subscriptions. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
2025-02-09 03:08:56.324 DEBUG [tests.relay.test_subscribe] Running test with payload /waku/3/rs/0/1
2025-02-09 03:08:56.325 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:53521/relay/v1/subscriptions" -H "Content-Type: application/json" -d '"/waku/3/rs/0/1"'
2025-02-09 03:08:56.328 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:53521/relay/v1/subscriptions. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
2025-02-09 03:08:56.329 DEBUG [tests.relay.test_subscribe] Running test with payload /waku/2/test/0/1
2025-02-09 03:08:56.329 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:53521/relay/v1/subscriptions" -H "Content-Type: application/json" -d '"/waku/2/test/0/1"'
2025-02-09 03:08:56.332 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:53521/relay/v1/subscriptions. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
2025-02-09 03:08:56.333 DEBUG [tests.relay.test_subscribe] Running test with payload /waku/2/rs/3/b
2025-02-09 03:08:56.333 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:53521/relay/v1/subscriptions" -H "Content-Type: application/json" -d '"/waku/2/rs/3/b"'
2025-02-09 03:08:56.336 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:53521/relay/v1/subscriptions. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
2025-02-09 03:08:56.337 DEBUG [tests.relay.test_subscribe] Running test with payload /waku/2/rs/0
2025-02-09 03:08:56.337 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:53521/relay/v1/subscriptions" -H "Content-Type: application/json" -d '"/waku/2/rs/0"'
2025-02-09 03:08:56.340 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:53521/relay/v1/subscriptions. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
2025-02-09 03:08:56.342 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-09 03:08:56.344 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-09 03:08:56.344 DEBUG [src.node.waku_node] Stopping container with id 8492b23077bc
2025-02-09 03:08:56.853 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 03:08:56.853 DEBUG [src.node.waku_node] Stopping container with id 54bfc0b6f0aa
2025-02-09 03:08:57.666 ERROR [src.node.docker_mananger] Max retries reached for container 8492b23077bc. Exiting log stream.
2025-02-09 03:08:57.760 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 03:08:57.761 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-09 03:08:57.764 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-09 03:08:57.767 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
