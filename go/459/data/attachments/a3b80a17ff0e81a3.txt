2025-02-09 03:08:14.950 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-09 03:08:14.950 DEBUG [tests.conftest] Running test: test_filter_update_subscription_add_a_new_content_topic with id: 2025-02-09_03-08-14__62b1e1ed-2942-4072-a983-eba29d1b8625
2025-02-09 03:08:14.950 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-09 03:08:14.951 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-09 03:08:14.951 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-09 03:08:14.957 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 03:08:14.957 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-09_03-08-14__62b1e1ed-2942-4072-a983-eba29d1b8625__wakuorg_nwaku:latest.log
2025-02-09 03:08:14.957 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 03:08:14.957 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 03:08:14.959 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 03:08:14.959 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.112.113
2025-02-09 03:08:14.959 DEBUG [src.node.docker_mananger] Generated ports ['53022', '53023', '53024', '53025', '53026']
2025-02-09 03:08:14.959 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 03:08:14.959 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 03:08:14.959 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 03:08:14.959 DEBUG [src.node.docker_mananger] docker run -i -t -p 53022:53022 -p 53023:53023 -p 53024:53024 -p 53025:53025 -p 53026:53026 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=53024 --rest-port=53022 --tcp-port=53023 --discv5-udp-port=53025 --rest-address=0.0.0.0 --nat=extip:172.18.112.113 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9b6f09ebadad57afc9dafb1fa3840cfd2bf479642ff95dbab07aaefed325d7f7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=53026 --metrics-logging=true --relay=true --filter=true
2025-02-09 03:08:15.189 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.112.113 waku edff197468dc8f7a0759fcbc4a9f9022a0da7a2332037e8cdd77bf64569a5a99
2025-02-09 03:08:15.253 DEBUG [src.node.docker_mananger] Container started with ID edff197468dc. Setting up logs at ./log/docker/node1_2025-02-09_03-08-14__62b1e1ed-2942-4072-a983-eba29d1b8625__wakuorg_nwaku:latest.log
2025-02-09 03:08:15.255 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 53022
2025-02-09 03:08:15.255 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 03:08:15.752 ERROR [src.node.docker_mananger] Max retries reached for container 1591d96d1034. Exiting log stream.
2025-02-09 03:08:16.255 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53022/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 03:08:16.258 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 03:08:16.258 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 03:08:16.259 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:53022/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 03:08:16.261 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.112.113/tcp/53023/p2p/16Uiu2HAmAYixwJJjbswaUGpGEe6sD2c3QLnFnRdMGKf2a7WgRfZp","/ip4/172.18.112.113/tcp/53024/ws/p2p/16Uiu2HAmAYixwJJjbswaUGpGEe6sD2c3QLnFnRdMGKf2a7WgRfZp"],"enrUri":"enr:-L24QKQc6lvVA-Wz4pACzTABiNMClPV7rVvgyhNeMlXUUKTFAtBlJItIAbI3D-XBf8PrI-kzKaqmIWiKeX8z9ues4FUCgmlkgnY0gmlwhKwScHGKbXVsdGlhZGRyc5YACASsEnBxBs8fAAoErBJwcQbPIN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC4K2-tnlGm1kl88G-XI1X2BM8V2DSMxrOg5Jw0smbnBeDdGNwgs8fg3VkcILPIYV3YWt1MgU"}'
2025-02-09 03:08:16.261 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 03:08:16.261 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-09 03:08:16.267 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-09 03:08:16.267 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-09_03-08-14__62b1e1ed-2942-4072-a983-eba29d1b8625__wakuorg_go-waku:latest.log
2025-02-09 03:08:16.268 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 03:08:16.268 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 03:08:16.269 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 03:08:16.269 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.239.138
2025-02-09 03:08:16.269 DEBUG [src.node.docker_mananger] Generated ports ['51439', '51440', '51441', '51442', '51443']
2025-02-09 03:08:16.270 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 03:08:16.270 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 03:08:16.270 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 03:08:16.270 DEBUG [src.node.docker_mananger] docker run -i -t -p 51439:51439 -p 51440:51440 -p 51441:51441 -p 51442:51442 -p 51443:51443 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=51441 --rest-port=51439 --tcp-port=51440 --discv5-udp-port=51442 --rest-address=0.0.0.0 --nat=extip:172.18.239.138 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b24eeb7cde1e5aeecfecb29d7d38bab4ec3d2dc78cbceb4a12dc0be92ac4b7dc --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-L24QKQc6lvVA-Wz4pACzTABiNMClPV7rVvgyhNeMlXUUKTFAtBlJItIAbI3D-XBf8PrI-kzKaqmIWiKeX8z9ues4FUCgmlkgnY0gmlwhKwScHGKbXVsdGlhZGRyc5YACASsEnBxBs8fAAoErBJwcQbPIN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC4K2-tnlGm1kl88G-XI1X2BM8V2DSMxrOg5Jw0smbnBeDdGNwgs8fg3VkcILPIYV3YWt1MgU --filternode=/ip4/172.18.112.113/tcp/53023/p2p/16Uiu2HAmAYixwJJjbswaUGpGEe6sD2c3QLnFnRdMGKf2a7WgRfZp --pubsub-topic=/waku/2/rs/3/1
2025-02-09 03:08:16.498 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.239.138 waku 812c4c3f725f2d7d78216460ebd47fde5d9e7cb508548128b161bd76ddd3400b
2025-02-09 03:08:16.556 DEBUG [src.node.docker_mananger] Container started with ID 812c4c3f725f. Setting up logs at ./log/docker/node2_2025-02-09_03-08-14__62b1e1ed-2942-4072-a983-eba29d1b8625__wakuorg_go-waku:latest.log
2025-02-09 03:08:16.558 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 51439
2025-02-09 03:08:16.558 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 03:08:17.558 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:51439/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 03:08:17.561 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QFI3w4Qqkadk_I8Ob8lylCktNGNPBkj2CXs8oNfyd7dXMbNs5m77ODuhowxc_aU3s5eDD75TMOInKTarEtDOC0OGAZTord8fgmlkgnY0gmlwhKwRAAOCcnOFAAMBAAGJc2VjcDI1NmsxoQJN_Tbs8LQMV4hxCfAEnhA4fPw5NjDRIPTJ2ffGntayw4N0Y3CCyPCDdWRwgsjyhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/51440/p2p/16Uiu2HAkzg7KLWwx8k6uw33hS9BL5t91UFtpwYDSLsSiD7NXTQcA","/ip4/127.0.0.1/tcp/51441/ws/p2p/16Uiu2HAkzg7KLWwx8k6uw33hS9BL5t91UFtpwYDSLsSiD7NXTQcA","/ip4/172.17.0.3/tcp/51440/p2p/16Uiu2HAkzg7KLWwx8k6uw33hS9BL5t91UFtpwYDSLsSiD7NXTQcA","/ip4/172.17.0.3/tcp/51441/ws/p2p/16Uiu2HAkzg7KLWwx8k6uw33hS9BL5t91UFtpwYDSLsSiD7NXTQcA"]}'
2025-02-09 03:08:17.561 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 03:08:17.562 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:51439/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.112.113/tcp/53023/p2p/16Uiu2HAmAYixwJJjbswaUGpGEe6sD2c3QLnFnRdMGKf2a7WgRfZp", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-09 03:08:17.563 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-09 03:08:17.564 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:53022/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-09 03:08:17.567 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 03:08:17.568 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:51439/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "0a6efa06-06c4-4c83-b875-19722dcff857", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-09 03:08:17.573 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"0a6efa06-06c4-4c83-b875-19722dcff857","statusDesc":"OK"}'
2025-02-09 03:08:17.576 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-09 03:08:17.577 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-09 03:08:17.577 DEBUG [src.node.waku_node] Stopping container with id edff197468dc
2025-02-09 03:08:18.171 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 03:08:18.171 DEBUG [src.node.waku_node] Stopping container with id 812c4c3f725f
2025-02-09 03:08:19.002 ERROR [src.node.docker_mananger] Max retries reached for container edff197468dc. Exiting log stream.
2025-02-09 03:08:19.086 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 03:08:19.087 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-09 03:08:19.095 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-09 03:08:19.098 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
