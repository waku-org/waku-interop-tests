2025-02-09 03:07:37.591 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-09 03:07:37.591 DEBUG [tests.conftest] Running test: test_time_filter_matches_one_message with id: 2025-02-09_03-07-37__b6f5385a-7d91-4010-8567-90f067a6ab71
2025-02-09 03:07:37.591 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-09 03:07:37.591 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-09 03:07:37.592 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-09 03:07:37.598 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 03:07:37.598 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-09_03-07-37__b6f5385a-7d91-4010-8567-90f067a6ab71__wakuorg_nwaku:latest.log
2025-02-09 03:07:37.598 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 03:07:37.598 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 03:07:37.599 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 03:07:37.600 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.179.90
2025-02-09 03:07:37.600 DEBUG [src.node.docker_mananger] Generated ports ['63784', '63785', '63786', '63787', '63788']
2025-02-09 03:07:37.600 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 03:07:37.600 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 03:07:37.600 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 03:07:37.600 DEBUG [src.node.docker_mananger] docker run -i -t -p 63784:63784 -p 63785:63785 -p 63786:63786 -p 63787:63787 -p 63788:63788 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63786 --rest-port=63784 --tcp-port=63785 --discv5-udp-port=63787 --rest-address=0.0.0.0 --nat=extip:172.18.179.90 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9acdfa8f145bacf6d299bdfd95dc31c3f0958e9fab1faa21efea18017fe373c1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63788 --metrics-logging=true --store=true --relay=true
2025-02-09 03:07:37.829 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.179.90 waku 58fb93f9b158fda35dd6e665991845500c281a384efb15b0161de9c61bc1a996
2025-02-09 03:07:37.854 ERROR [src.node.docker_mananger] Max retries reached for container 087c14eee292. Exiting log stream.
2025-02-09 03:07:37.880 DEBUG [src.node.docker_mananger] Container started with ID 58fb93f9b158. Setting up logs at ./log/docker/publishing_node1_2025-02-09_03-07-37__b6f5385a-7d91-4010-8567-90f067a6ab71__wakuorg_nwaku:latest.log
2025-02-09 03:07:37.880 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 63784
2025-02-09 03:07:37.882 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 03:07:38.392 ERROR [src.node.docker_mananger] Max retries reached for container e386d84badf8. Exiting log stream.
2025-02-09 03:07:38.883 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63784/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 03:07:38.885 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 03:07:38.886 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 03:07:38.886 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63784/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 03:07:38.888 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.179.90/tcp/63785/p2p/16Uiu2HAkusWiNPTBEMZ8mUVR8b2VABCawbfa37Hy2R4mEF8QoEiP","/ip4/172.18.179.90/tcp/63786/ws/p2p/16Uiu2HAkusWiNPTBEMZ8mUVR8b2VABCawbfa37Hy2R4mEF8QoEiP"],"enrUri":"enr:-L24QLEy7Q4ssVbGPqyABJABO3vXIwUNsEGLGT2UM0v4Qm3TVJRiqddyqQ4GkPb7kURlKC3ipBGATcTnT4KC5JBzGSICgmlkgnY0gmlwhKwSs1qKbXVsdGlhZGRyc5YACASsErNaBvkpAAoErBKzWgb5Kt0DgnJzhQADAQAAiXNlY3AyNTZrMaECBp6fv3UIHr52dis2uesyKjjGsUBKNPktcwG20UZfDTSDdGNwgvkpg3VkcIL5K4V3YWt1MgM"}'
2025-02-09 03:07:38.888 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 03:07:38.895 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-09 03:07:38.895 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-09_03-07-37__b6f5385a-7d91-4010-8567-90f067a6ab71__wakuorg_go-waku:latest.log
2025-02-09 03:07:38.895 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 03:07:38.895 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 03:07:38.897 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 03:07:38.897 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.191.202
2025-02-09 03:07:38.897 DEBUG [src.node.docker_mananger] Generated ports ['7814', '7815', '7816', '7817', '7818']
2025-02-09 03:07:38.897 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 03:07:38.897 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 03:07:38.897 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 03:07:38.898 DEBUG [src.node.docker_mananger] docker run -i -t -p 7814:7814 -p 7815:7815 -p 7816:7816 -p 7817:7817 -p 7818:7818 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=7816 --rest-port=7814 --tcp-port=7815 --discv5-udp-port=7817 --rest-address=0.0.0.0 --nat=extip:172.18.191.202 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=649c874034fdea229f0c6ad1faecfb038b9c35fbfb4f0b02d4ba1896dcbbeec9 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QLEy7Q4ssVbGPqyABJABO3vXIwUNsEGLGT2UM0v4Qm3TVJRiqddyqQ4GkPb7kURlKC3ipBGATcTnT4KC5JBzGSICgmlkgnY0gmlwhKwSs1qKbXVsdGlhZGRyc5YACASsErNaBvkpAAoErBKzWgb5Kt0DgnJzhQADAQAAiXNlY3AyNTZrMaECBp6fv3UIHr52dis2uesyKjjGsUBKNPktcwG20UZfDTSDdGNwgvkpg3VkcIL5K4V3YWt1MgM --storenode=/ip4/172.18.179.90/tcp/63785/p2p/16Uiu2HAkusWiNPTBEMZ8mUVR8b2VABCawbfa37Hy2R4mEF8QoEiP --store=true --relay=true
2025-02-09 03:07:39.131 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.191.202 waku 5b48042ee5c045dfc841cf3536f13118018014145dd35b17b3a46593a93fb3c8
2025-02-09 03:07:39.180 DEBUG [src.node.docker_mananger] Container started with ID 5b48042ee5c0. Setting up logs at ./log/docker/store_node1_2025-02-09_03-07-37__b6f5385a-7d91-4010-8567-90f067a6ab71__wakuorg_go-waku:latest.log
2025-02-09 03:07:39.180 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 7814
2025-02-09 03:07:39.181 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 03:07:40.182 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7814/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 03:07:40.185 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QNoM33BsX8JnmqnqllBVvlrmlfDWAXQ4pw5eIvgSCHIcfIY_PB5hX417U6CEjYZQvDI8e-szcaVvCumvgRKXfiiGAZTorU00gmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaECu8RX4Hr9kx6t0MxJru1gZ9ka8zQKIGp-FLpkS5fcdq-DdGNwgh6Hg3VkcIIeiYV3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/7815/p2p/16Uiu2HAm84dsD3Nu6vRn8qGP8eZ3p9bweut7i6GbtmLMhHnw8D7C","/ip4/127.0.0.1/tcp/7816/ws/p2p/16Uiu2HAm84dsD3Nu6vRn8qGP8eZ3p9bweut7i6GbtmLMhHnw8D7C","/ip4/172.17.0.3/tcp/7815/p2p/16Uiu2HAm84dsD3Nu6vRn8qGP8eZ3p9bweut7i6GbtmLMhHnw8D7C","/ip4/172.17.0.3/tcp/7816/ws/p2p/16Uiu2HAm84dsD3Nu6vRn8qGP8eZ3p9bweut7i6GbtmLMhHnw8D7C"]}'
2025-02-09 03:07:40.185 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 03:07:40.186 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7814/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.179.90/tcp/63785/p2p/16Uiu2HAkusWiNPTBEMZ8mUVR8b2VABCawbfa37Hy2R4mEF8QoEiP", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-09 03:07:40.202 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-09 03:07:40.203 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63784/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-09 03:07:40.226 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 03:07:40.227 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7814/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-09 03:07:40.229 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-09 03:07:40.233 DEBUG [src.steps.store] Relaying message
2025-02-09 03:07:40.234 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63784/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 03:07:40.248 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 03:07:40.249 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-09 03:07:40.450 DEBUG [src.steps.store] Relaying message
2025-02-09 03:07:40.450 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63784/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 03:07:40.456 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 03:07:40.456 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-09 03:07:40.657 DEBUG [src.steps.store] Relaying message
2025-02-09 03:07:40.657 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63784/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 03:07:40.663 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 03:07:40.663 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-09 03:07:40.864 DEBUG [src.steps.store] Relaying message
2025-02-09 03:07:40.864 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63784/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 03:07:40.870 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 03:07:40.870 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-09 03:07:41.071 DEBUG [src.steps.store] Relaying message
2025-02-09 03:07:41.071 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63784/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 03:07:41.076 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 03:07:41.076 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-09 03:07:41.277 DEBUG [src.steps.store] Relaying message
2025-02-09 03:07:41.277 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63784/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-09 03:07:41.283 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 03:07:41.283 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-09 03:07:41.484 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63784/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=1739070457233323104&endTime=1739070457233523104&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-09 03:07:41.487 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x4ab37ac57bd68c3903fccb596bf483278ad498451ae30a7d6239374e622d5d53"}]}'
2025-02-09 03:07:41.487 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7814/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&startTime=1739070457233323104&endTime=1739070457233523104&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-09 03:07:41.492 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"4a1c0772bfd10760bfc478d0e24ece79e58fbf4af8c6eede1332a25a7fa888a0","status_code":200,"status_desc":"OK","messages":[{"message_hash":"SrN6xXvWjDkD/MtZa/SDJ4rUmEUa4wp9Yjk3TmItXVM="}]}'
2025-02-09 03:07:41.495 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-09 03:07:41.496 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-09 03:07:41.496 DEBUG [src.node.waku_node] Stopping container with id 58fb93f9b158
2025-02-09 03:07:42.053 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 03:07:42.054 DEBUG [src.node.waku_node] Stopping container with id 5b48042ee5c0
2025-02-09 03:07:42.569 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 03:07:42.571 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-09 03:07:42.578 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-09 03:07:42.581 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
