2025-02-09 03:07:45.120 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-09 03:07:45.121 DEBUG [tests.conftest] Running test: test_filter_get_message_with_150_kb_payload with id: 2025-02-09_03-07-45__f350a0cd-2e67-45b9-9e1c-01d03df641b5
2025-02-09 03:07:45.123 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-09 03:07:45.123 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-09 03:07:45.123 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-09 03:07:45.130 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 03:07:45.130 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-09_03-07-45__f350a0cd-2e67-45b9-9e1c-01d03df641b5__wakuorg_nwaku:latest.log
2025-02-09 03:07:45.130 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 03:07:45.130 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 03:07:45.132 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 03:07:45.132 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.141.147
2025-02-09 03:07:45.132 DEBUG [src.node.docker_mananger] Generated ports ['29575', '29576', '29577', '29578', '29579']
2025-02-09 03:07:45.132 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 03:07:45.132 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 03:07:45.132 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 03:07:45.132 DEBUG [src.node.docker_mananger] docker run -i -t -p 29575:29575 -p 29576:29576 -p 29577:29577 -p 29578:29578 -p 29579:29579 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29577 --rest-port=29575 --tcp-port=29576 --discv5-udp-port=29578 --rest-address=0.0.0.0 --nat=extip:172.18.141.147 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=27e10e9783cc728fa224b9f0dae19ad3953e217f1ebfec92d8bfcb97ebb27f9b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29579 --metrics-logging=true --relay=true --filter=true
2025-02-09 03:07:45.141 ERROR [src.node.docker_mananger] Max retries reached for container e26ed354bb55. Exiting log stream.
2025-02-09 03:07:45.361 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.141.147 waku 2b1839208292e2e2ec40d0eee6933e1c7309f5f1c1136cc38c4a48e74a8395d5
2025-02-09 03:07:45.412 DEBUG [src.node.docker_mananger] Container started with ID 2b1839208292. Setting up logs at ./log/docker/node1_2025-02-09_03-07-45__f350a0cd-2e67-45b9-9e1c-01d03df641b5__wakuorg_nwaku:latest.log
2025-02-09 03:07:45.413 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 29575
2025-02-09 03:07:45.414 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 03:07:45.933 ERROR [src.node.docker_mananger] Max retries reached for container 9b01cfe9af94. Exiting log stream.
2025-02-09 03:07:46.414 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29575/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 03:07:46.417 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 03:07:46.418 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 03:07:46.418 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29575/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 03:07:46.420 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.141.147/tcp/29576/p2p/16Uiu2HAm3xEXYij3euY8AXH6HcFKdjKaf9tQr3rtorTbYX2PFKGy","/ip4/172.18.141.147/tcp/29577/ws/p2p/16Uiu2HAm3xEXYij3euY8AXH6HcFKdjKaf9tQr3rtorTbYX2PFKGy"],"enrUri":"enr:-L24QBQqsffOaUxwhDi0wVGIQnqyxtL2LiidT_xd82xGRtWEBouQ_BZsX8Gj21qnO6TJaDefhYzbv0CMRMUvOIrPKgACgmlkgnY0gmlwhKwSjZOKbXVsdGlhZGRyc5YACASsEo2TBnOIAAoErBKNkwZzid0DgnJzhQADAQAAiXNlY3AyNTZrMaECfrG4o12wiZqtinJg2QdJtvNdY869OkoDZdqOf9MG_laDdGNwgnOIg3VkcIJzioV3YWt1MgU"}'
2025-02-09 03:07:46.420 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 03:07:46.421 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-09 03:07:46.427 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-09 03:07:46.427 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-09_03-07-45__f350a0cd-2e67-45b9-9e1c-01d03df641b5__wakuorg_go-waku:latest.log
2025-02-09 03:07:46.427 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 03:07:46.427 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 03:07:46.428 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 03:07:46.429 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.106.17
2025-02-09 03:07:46.429 DEBUG [src.node.docker_mananger] Generated ports ['36626', '36627', '36628', '36629', '36630']
2025-02-09 03:07:46.429 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 03:07:46.429 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 03:07:46.429 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 03:07:46.429 DEBUG [src.node.docker_mananger] docker run -i -t -p 36626:36626 -p 36627:36627 -p 36628:36628 -p 36629:36629 -p 36630:36630 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=36628 --rest-port=36626 --tcp-port=36627 --discv5-udp-port=36629 --rest-address=0.0.0.0 --nat=extip:172.18.106.17 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f0a5f4e081ac4de32ba1acaaaa631ccc3ee9d0ea511fdab2a1bdfadb6f2ab4e1 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-L24QBQqsffOaUxwhDi0wVGIQnqyxtL2LiidT_xd82xGRtWEBouQ_BZsX8Gj21qnO6TJaDefhYzbv0CMRMUvOIrPKgACgmlkgnY0gmlwhKwSjZOKbXVsdGlhZGRyc5YACASsEo2TBnOIAAoErBKNkwZzid0DgnJzhQADAQAAiXNlY3AyNTZrMaECfrG4o12wiZqtinJg2QdJtvNdY869OkoDZdqOf9MG_laDdGNwgnOIg3VkcIJzioV3YWt1MgU --filternode=/ip4/172.18.141.147/tcp/29576/p2p/16Uiu2HAm3xEXYij3euY8AXH6HcFKdjKaf9tQr3rtorTbYX2PFKGy --pubsub-topic=/waku/2/rs/3/1
2025-02-09 03:07:46.668 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.106.17 waku ec08e4fb9a25aa7b06546274e5f33ce91623fb46e9984710d9dbbc431bfb48a9
2025-02-09 03:07:46.720 DEBUG [src.node.docker_mananger] Container started with ID ec08e4fb9a25. Setting up logs at ./log/docker/node2_2025-02-09_03-07-45__f350a0cd-2e67-45b9-9e1c-01d03df641b5__wakuorg_go-waku:latest.log
2025-02-09 03:07:46.722 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 36626
2025-02-09 03:07:46.722 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 03:07:47.723 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36626/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 03:07:47.725 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QB3C-bbHb2nvQqBuRUY7zLISAfnzHx4HZH1t4BvPIMnvPxWnCDSH9cjArTTfKMzS2Q0kk9qD6OZ-se6K1WKmFOGGAZTorWqdgmlkgnY0gmlwhKwRAAOCcnOFAAMBAAGJc2VjcDI1NmsxoQMkIWLHhKxO5aItHiHEZ9yQ85K3u94RylZQ3_VXK5wpDIN0Y3CCjxODdWRwgo8VhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/36627/p2p/16Uiu2HAmF62Z79cYjgvkFw397CveZK9yXS8g4irqRE493tx3XNYb","/ip4/127.0.0.1/tcp/36628/ws/p2p/16Uiu2HAmF62Z79cYjgvkFw397CveZK9yXS8g4irqRE493tx3XNYb","/ip4/172.17.0.3/tcp/36627/p2p/16Uiu2HAmF62Z79cYjgvkFw397CveZK9yXS8g4irqRE493tx3XNYb","/ip4/172.17.0.3/tcp/36628/ws/p2p/16Uiu2HAmF62Z79cYjgvkFw397CveZK9yXS8g4irqRE493tx3XNYb"]}'
2025-02-09 03:07:47.725 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 03:07:47.726 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36626/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.141.147/tcp/29576/p2p/16Uiu2HAm3xEXYij3euY8AXH6HcFKdjKaf9tQr3rtorTbYX2PFKGy", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-09 03:07:47.727 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-09 03:07:47.728 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-09 03:07:47.728 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29575/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-09 03:07:47.732 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 03:07:47.732 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36626/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "df72c797-565a-4699-a9be-a5ad233f2023", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-09 03:07:47.738 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"df72c797-565a-4699-a9be-a5ad233f2023","statusDesc":"OK"}'
2025-02-09 03:07:47.741 INFO [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2025-02-09 03:07:47.761 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 03:07:47.761 DEBUG [src.libs.common] Sleeping for 2 seconds
2025-02-09 03:07:49.761 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-09 03:07:49.762 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36626/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-09 03:07:49.765 INFO [src.node.api_clients.base_client] Log line was discarded because it's longer than max_log_line_length=5000
2025-02-09 03:07:49.769 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-09 03:07:49.769 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-09 03:07:49.770 DEBUG [src.node.waku_node] Stopping container with id 2b1839208292
2025-02-09 03:07:51.284 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 03:07:51.285 DEBUG [src.node.waku_node] Stopping container with id ec08e4fb9a25
2025-02-09 03:07:51.776 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 03:07:51.777 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-09 03:07:51.783 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-09 03:07:51.785 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
