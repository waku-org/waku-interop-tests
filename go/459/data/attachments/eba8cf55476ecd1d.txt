2025-02-09 03:07:44.751 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-09 03:07:44.752 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_all_with_extra_field with id: 2025-02-09_03-07-44__d6cbd906-ac5b-4a82-bf80-89edbe85d25d
2025-02-09 03:07:44.752 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-09 03:07:44.752 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-09 03:07:44.753 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-09 03:07:44.758 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-09 03:07:44.758 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-09_03-07-44__d6cbd906-ac5b-4a82-bf80-89edbe85d25d__wakuorg_nwaku:latest.log
2025-02-09 03:07:44.759 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 03:07:44.759 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 03:07:44.760 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 03:07:44.760 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.64.20
2025-02-09 03:07:44.760 DEBUG [src.node.docker_mananger] Generated ports ['49345', '49346', '49347', '49348', '49349']
2025-02-09 03:07:44.761 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 03:07:44.761 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 03:07:44.761 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 03:07:44.761 DEBUG [src.node.docker_mananger] docker run -i -t -p 49345:49345 -p 49346:49346 -p 49347:49347 -p 49348:49348 -p 49349:49349 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=49347 --rest-port=49345 --tcp-port=49346 --discv5-udp-port=49348 --rest-address=0.0.0.0 --nat=extip:172.18.64.20 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3da6d65d3aaef68316d658c27a5e6266a684c7edcafd6bdbdef3a9d6eb8afe9e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=49349 --metrics-logging=true --relay=true --filter=true
2025-02-09 03:07:44.987 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.64.20 waku 5d49261ff2c04e0c6431a2e3081203834945398ca16c6e7a526591f26ce6fe95
2025-02-09 03:07:45.035 DEBUG [src.node.docker_mananger] Container started with ID 5d49261ff2c0. Setting up logs at ./log/docker/node1_2025-02-09_03-07-44__d6cbd906-ac5b-4a82-bf80-89edbe85d25d__wakuorg_nwaku:latest.log
2025-02-09 03:07:45.036 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 49345
2025-02-09 03:07:45.037 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 03:07:45.552 ERROR [src.node.docker_mananger] Max retries reached for container 1e098434f059. Exiting log stream.
2025-02-09 03:07:46.037 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49345/health" -H "Content-Type: application/json" -d 'None'
2025-02-09 03:07:46.040 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-09 03:07:46.040 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-09 03:07:46.040 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49345/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 03:07:46.043 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.64.20/tcp/49346/p2p/16Uiu2HAmTdfZJvzVo1AXmPpVvRRThGmYXm1sR4vU2T8w6bpsXN6r","/ip4/172.18.64.20/tcp/49347/ws/p2p/16Uiu2HAmTdfZJvzVo1AXmPpVvRRThGmYXm1sR4vU2T8w6bpsXN6r"],"enrUri":"enr:-L24QHZYcxfoMMXF8P2upJJVghlLQ8Bdoje49cUdn0BddHzuBCZyRFQrTWH3NLt0eS--jH8L-LSvWcG2DZCgOPish0gCgmlkgnY0gmlwhKwSQBSKbXVsdGlhZGRyc5YACASsEkAUBsDCAAoErBJAFAbAw90DgnJzhQADAQAAiXNlY3AyNTZrMaED3oh5Wzeu4W-_tj_63aVQTojgS-tOTRGZjc8jZ2FIIHeDdGNwgsDCg3VkcILAxIV3YWt1MgU"}'
2025-02-09 03:07:46.043 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 03:07:46.043 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-09 03:07:46.050 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-09 03:07:46.050 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-09_03-07-44__d6cbd906-ac5b-4a82-bf80-89edbe85d25d__wakuorg_go-waku:latest.log
2025-02-09 03:07:46.050 DEBUG [src.node.waku_node] Starting Node...
2025-02-09 03:07:46.050 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-09 03:07:46.051 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-09 03:07:46.052 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.236.166
2025-02-09 03:07:46.052 DEBUG [src.node.docker_mananger] Generated ports ['47571', '47572', '47573', '47574', '47575']
2025-02-09 03:07:46.052 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-09 03:07:46.052 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-09 03:07:46.052 DEBUG [src.node.waku_node] Using volumes []
2025-02-09 03:07:46.052 DEBUG [src.node.docker_mananger] docker run -i -t -p 47571:47571 -p 47572:47572 -p 47573:47573 -p 47574:47574 -p 47575:47575 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=47573 --rest-port=47571 --tcp-port=47572 --discv5-udp-port=47574 --rest-address=0.0.0.0 --nat=extip:172.18.236.166 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d459707ffa66d4f7f1bfe92f2e99fa26cba5e4ffcfca9ed45bea5d0e36ccca66 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-L24QHZYcxfoMMXF8P2upJJVghlLQ8Bdoje49cUdn0BddHzuBCZyRFQrTWH3NLt0eS--jH8L-LSvWcG2DZCgOPish0gCgmlkgnY0gmlwhKwSQBSKbXVsdGlhZGRyc5YACASsEkAUBsDCAAoErBJAFAbAw90DgnJzhQADAQAAiXNlY3AyNTZrMaED3oh5Wzeu4W-_tj_63aVQTojgS-tOTRGZjc8jZ2FIIHeDdGNwgsDCg3VkcILAxIV3YWt1MgU --filternode=/ip4/172.18.64.20/tcp/49346/p2p/16Uiu2HAmTdfZJvzVo1AXmPpVvRRThGmYXm1sR4vU2T8w6bpsXN6r --pubsub-topic=/waku/2/rs/3/1
2025-02-09 03:07:46.270 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.236.166 waku 0a97467bf152e918e69c86fb70846af729db0606924bfe4b36d955683f1c793b
2025-02-09 03:07:46.323 DEBUG [src.node.docker_mananger] Container started with ID 0a97467bf152. Setting up logs at ./log/docker/node2_2025-02-09_03-07-44__d6cbd906-ac5b-4a82-bf80-89edbe85d25d__wakuorg_go-waku:latest.log
2025-02-09 03:07:46.324 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 47571
2025-02-09 03:07:46.324 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-09 03:07:47.324 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47571/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-09 03:07:47.326 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QHIPCSBAQ22Gd79jbmlFlRQzkJav-x5xzCt2q_9eOTzBV7Bq8jJXdX55Mttc9q9QbpEQJL_PvnWlIsHYvRm10i6GAZTorWkRgmlkgnY0gmlwhKwRAAOCcnOFAAMBAAGJc2VjcDI1NmsxoQKxLbtbyw1QPcKSgiJtwCKuFNwr6_z0A8bdVb7TvHybC4N0Y3CCudSDdWRwgrnWhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/47572/p2p/16Uiu2HAm7MJb4HurLFrNcG5oEEKy4Q1Njayac7rvj1ejo9MbNrKk","/ip4/127.0.0.1/tcp/47573/ws/p2p/16Uiu2HAm7MJb4HurLFrNcG5oEEKy4Q1Njayac7rvj1ejo9MbNrKk","/ip4/172.17.0.3/tcp/47572/p2p/16Uiu2HAm7MJb4HurLFrNcG5oEEKy4Q1Njayac7rvj1ejo9MbNrKk","/ip4/172.17.0.3/tcp/47573/ws/p2p/16Uiu2HAm7MJb4HurLFrNcG5oEEKy4Q1Njayac7rvj1ejo9MbNrKk"]}'
2025-02-09 03:07:47.327 INFO [src.node.waku_node] REST service is ready !!
2025-02-09 03:07:47.327 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47571/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.64.20/tcp/49346/p2p/16Uiu2HAmTdfZJvzVo1AXmPpVvRRThGmYXm1sR4vU2T8w6bpsXN6r", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-09 03:07:47.329 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-09 03:07:47.329 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-09 03:07:47.330 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49345/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-09 03:07:47.332 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-09 03:07:47.333 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47571/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "2a97f121-40c3-4371-acfa-ed756ab685cc", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-09 03:07:47.338 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"2a97f121-40c3-4371-acfa-ed756ab685cc","statusDesc":"OK"}'
2025-02-09 03:07:47.340 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:47571/filter/v2/subscriptions/all" -H "Content-Type: application/json" -d '{"requestId": 1, "extraField": "extraValue"}'
2025-02-09 03:07:47.341 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:47571/filter/v2/subscriptions/all. Response content: b''
2025-02-09 03:07:47.344 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-09 03:07:47.345 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-09 03:07:47.345 DEBUG [src.node.waku_node] Stopping container with id 5d49261ff2c0
2025-02-09 03:07:47.936 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 03:07:47.937 DEBUG [src.node.waku_node] Stopping container with id 0a97467bf152
2025-02-09 03:07:48.752 ERROR [src.node.docker_mananger] Max retries reached for container 5d49261ff2c0. Exiting log stream.
2025-02-09 03:07:48.845 DEBUG [src.node.waku_node] Container stopped.
2025-02-09 03:07:48.846 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-09 03:07:48.850 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-09 03:07:48.853 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
