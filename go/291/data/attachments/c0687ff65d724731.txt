[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_node_not_connected_directly_to_relaying_node with id: 2024-09-26_03-17-01__f2caccbc-c9a9-48e7-858e-81d16ffeaec0
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-26_03-17-01__f2caccbc-c9a9-48e7-858e-81d16ffeaec0__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-26_03-17-01__f2caccbc-c9a9-48e7-858e-81d16ffeaec0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-09-26_03-17-01__f2caccbc-c9a9-48e7-858e-81d16ffeaec0__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.212.238
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['39455', '39456', '39457', '39458', '39459']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 39455:39455 -p 39456:39456 -p 39457:39457 -p 39458:39458 -p 39459:39459 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=39457 --rest-port=39455 --tcp-port=39456 --discv5-udp-port=39458 --rest-address=0.0.0.0 --nat=extip:172.18.212.238 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2ec39ea36fdbe121ece4a2d0b5c1ff9011613a72c8eefedcd78a75b1995fbefe --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.212.238 waku 2ddd3be4fa890682fb3cf9ec547692db4ef10e65ca9bc6aa2a1fd083dc151d93
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 2ddd3be4fa89. Setting up logs at ./log/docker/node1_2024-09-26_03-17-01__f2caccbc-c9a9-48e7-858e-81d16ffeaec0__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 39455
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39455/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QHMoy77CAb1SyspR3l8SzxMIMEdIBX8uOZekWyRetLCZAxCk0h3T5M7wJ8p9d-IcpfrEx7B2dfBs7p_pDD7BoxmGAZIsVRHcgmlkgnY0gmlwhKwRAAWJc2VjcDI1NmsxoQO375NkyYtyPNaf4HeUR5E64oxDc8PMJ5esu2HKRBhEBIN0Y3CCmiCDdWRwgpoihXdha3UyAQ","listenAddresses":["/ip4/127.0.0.1/tcp/39456/p2p/16Uiu2HAmR2zqkVdfdq7bU4CAEx3otCFWAwjEYa6NEhgbFxccC4Jw","/ip4/127.0.0.1/tcp/39457/ws/p2p/16Uiu2HAmR2zqkVdfdq7bU4CAEx3otCFWAwjEYa6NEhgbFxccC4Jw","/ip4/172.17.0.5/tcp/39456/p2p/16Uiu2HAmR2zqkVdfdq7bU4CAEx3otCFWAwjEYa6NEhgbFxccC4Jw","/ip4/172.17.0.5/tcp/39457/ws/p2p/16Uiu2HAmR2zqkVdfdq7bU4CAEx3otCFWAwjEYa6NEhgbFxccC4Jw"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.18.44
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['47877', '47878', '47879', '47880', '47881']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 47877:47877 -p 47878:47878 -p 47879:47879 -p 47880:47880 -p 47881:47881 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=47879 --rest-port=47877 --tcp-port=47878 --discv5-udp-port=47880 --rest-address=0.0.0.0 --nat=extip:172.18.18.44 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b117e3af5bd484dbda5b4efdcf6c8ac62ad024dc455f3bfc648eebfd1dc5ba1c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=47881 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-Ji4QHMoy77CAb1SyspR3l8SzxMIMEdIBX8uOZekWyRetLCZAxCk0h3T5M7wJ8p9d-IcpfrEx7B2dfBs7p_pDD7BoxmGAZIsVRHcgmlkgnY0gmlwhKwRAAWJc2VjcDI1NmsxoQO375NkyYtyPNaf4HeUR5E64oxDc8PMJ5esu2HKRBhEBIN0Y3CCmiCDdWRwgpoihXdha3UyAQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.18.44 waku a909358bc7069a91588a4a7f184201e026c148fa4dbbb1f2e3e5e23db41a72b0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID a909358bc706. Setting up logs at ./log/docker/node2_2024-09-26_03-17-01__f2caccbc-c9a9-48e7-858e-81d16ffeaec0__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 47877
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47877/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47877/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.18.44/tcp/47878/p2p/16Uiu2HAm6RgFtVHi3djWDXswGeSRwiB46NMEFY67Kijz4obJMEXe","/ip4/172.18.18.44/tcp/47879/ws/p2p/16Uiu2HAm6RgFtVHi3djWDXswGeSRwiB46NMEFY67Kijz4obJMEXe"],"enrUri":"enr:-LO4QACDbQ8PyW51z91F3WpCL4y314UQxnS0ep94sSMjgeFcIf5_sxvv5-NpAjTQIPYismaJBYbAHlVs4OenlGNXIOgBgmlkgnY0gmlwhKwSEiyKbXVsdGlhZGRyc4wACgSsEhIsBrsH3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKjcN61uxfIVDBJMYRdYh837lrHiUBtXgSrtvxrUnXqNYN0Y3CCuwaDdWRwgrsIhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.19.212
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['25249', '25250', '25251', '25252', '25253']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 25249:25249 -p 25250:25250 -p 25251:25251 -p 25252:25252 -p 25253:25253 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=25251 --rest-port=25249 --tcp-port=25250 --discv5-udp-port=25252 --rest-address=0.0.0.0 --nat=extip:172.18.19.212 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4bde4b7f0b8b8b7f51fadcb14dbfebbdc59f2c25e8e6d1ef438c9fb9cf206cdf --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --storenode=/ip4/172.18.18.44/tcp/47878/p2p/16Uiu2HAm6RgFtVHi3djWDXswGeSRwiB46NMEFY67Kijz4obJMEXe --discv5-bootstrap-node=enr:-LO4QACDbQ8PyW51z91F3WpCL4y314UQxnS0ep94sSMjgeFcIf5_sxvv5-NpAjTQIPYismaJBYbAHlVs4OenlGNXIOgBgmlkgnY0gmlwhKwSEiyKbXVsdGlhZGRyc4wACgSsEhIsBrsH3QOCcnOFAAMBAACJc2VjcDI1NmsxoQKjcN61uxfIVDBJMYRdYh837lrHiUBtXgSrtvxrUnXqNYN0Y3CCuwaDdWRwgrsIhXdha3UyAw
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.19.212 waku 7f27d2bd632e199b045880acccf23d77420ba2e5581d8a3b63e1f7054665b216
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 7f27d2bd632e. Setting up logs at ./log/docker/node3_2024-09-26_03-17-01__f2caccbc-c9a9-48e7-858e-81d16ffeaec0__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 25249
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25249/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QEjDyak5b7xj6VJ1ozO1kY5E7y9dS0A0Hwmo-wauJx72Cxnh5XWzajFRXJ8-k3iY1Aj2UwwqsuRPZscedDq-It-GAZIsVR56gmlkgnY0gmlwhKwRAAqJc2VjcDI1NmsxoQOHMQsAREKVoaqAZXg7pV9Eke0_gjacdI5JOZv1vbucDoN0Y3CCYqKDdWRwgmKkhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/25250/p2p/16Uiu2HAmMkimFGiBXMZsG8YSMBGfxcvyou9sUPruyvuBvQ8mTsoj","/ip4/127.0.0.1/tcp/25251/ws/p2p/16Uiu2HAmMkimFGiBXMZsG8YSMBGfxcvyou9sUPruyvuBvQ8mTsoj","/ip4/172.17.0.10/tcp/25250/p2p/16Uiu2HAmMkimFGiBXMZsG8YSMBGfxcvyou9sUPruyvuBvQ8mTsoj","/ip4/172.17.0.10/tcp/25251/ws/p2p/16Uiu2HAmMkimFGiBXMZsG8YSMBGfxcvyou9sUPruyvuBvQ8mTsoj"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39455/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47877/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:39455/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAm6RgFtVHi3djWDXswGeSRwiB46NMEFY67Kijz4obJMEXe","multiaddrs":["/ip4/172.18.18.44/tcp/47878/p2p/16Uiu2HAm6RgFtVHi3djWDXswGeSRwiB46NMEFY67Kijz4obJMEXe","/ip4/172.18.18.44/tcp/47879/ws/p2p/16Uiu2HAm6RgFtVHi3djWDXswGeSRwiB46NMEFY67Kijz4obJMEXe"],"protocols":["/vac/waku/store/2.0.0-beta4","/vac/waku/store-query/3.0.0","/vac/waku/relay/2.0.0"],"connected":false,"pubsubTopics":["/waku/2/rs/3/0"]},{"id":"16Uiu2HAmMkimFGiBXMZsG8YSMBGfxcvyou9sUPruyvuBvQ8mTsoj","multiaddrs":["/ip4/172.17.0.10/tcp/25250/p2p/16Uiu2HAmMkimFGiBXMZsG8YSMBGfxcvyou9sUPruyvuBvQ8mTsoj","/ip4/172.17.0.10/tcp/25251/ws/p2p/16Uiu2HAmMkimFGiBXMZsG8YSMBGfxcvyou9sUPruyvuBvQ8mTsoj"],"protocols":null,"connected":false,"pubsubTopics":[]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47877/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.10/tcp/25250/p2p/16Uiu2HAmMkimFGiBXMZsG8YSMBGfxcvyou9sUPruyvuBvQ8mTsoj","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:39455/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/go-waku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:25249/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-filter%2Fproto&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"838a14480aa113fe67f1b6de6334ce2054f3142761b18e44fd224bc729017130","status_code":200,"status_desc":"OK","messages":[{"message_hash":"a+4q5AJVXV1r2PcINHYxcKpHZpD25VLAR4weRlw7I2g="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 2ddd3be4fa89
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id a909358bc706
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 7f27d2bd632e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.