{"uid":"7f072543fb799dcc","name":"test_filter_ping_on_subscribed_peer","fullName":"tests.filter.test_ping.TestFilterPing#test_filter_ping_on_subscribed_peer","historyId":"4bc05992bfd76751fc34bd3ee48a2d6c","time":{"start":1720581697353,"stop":1720581697369,"duration":16},"status":"broken","statusMessage":"Exception: Error: 500 Server Error: Internal Server Error for url: http://127.0.0.1:9640/filter/v2/subscriptions/fc6b28aa-de22-48fb-8c9a-84385b52ab87 with response: b'{\"requestId\":\"fc6b28aa-de22-48fb-8c9a-84385b52ab87\",\"statusDesc\":\"ping request failed\"}'","statusTrace":"src/node/api_clients/base_client.py:14: in make_request\n    response.raise_for_status()\n/opt/hostedtoolcache/Python/3.12.4/x64/lib/python3.12/site-packages/requests/models.py:1021: in raise_for_status\n    raise HTTPError(http_error_msg, response=self)\nE   requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://127.0.0.1:9640/filter/v2/subscriptions/fc6b28aa-de22-48fb-8c9a-84385b52ab87\n\nDuring handling of the above exception, another exception occurred:\ntests/filter/test_ping.py:9: in test_filter_ping_on_subscribed_peer\n    self.ping_filter_subscriptions(str(uuid4()))\nsrc/steps/filter.py:179: in ping_filter_subscriptions\n    ping_sub_response = node.ping_filter_subscriptions(request_id)\nsrc/node/waku_node.py:358: in ping_filter_subscriptions\n    return self._api.ping_filter_subscriptions(request_id)\nsrc/node/api_clients/rest.py:84: in ping_filter_subscriptions\n    ping_subscriptions_response = self.rest_call(\"get\", f\"filter/v2/subscriptions/{quote(request_id, safe='')}\")\nsrc/node/api_clients/rest.py:16: in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\nsrc/node/api_clients/base_client.py:17: in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\nE   Exception: Error: 500 Server Error: Internal Server Error for url: http://127.0.0.1:9640/filter/v2/subscriptions/fc6b28aa-de22-48fb-8c9a-84385b52ab87 with response: b'{\"requestId\":\"fc6b28aa-de22-48fb-8c9a-84385b52ab87\",\"statusDesc\":\"ping request failed\"}'","flaky":false,"newFailed":false,"newBroken":true,"newPassed":false,"retriesCount":2,"retriesStatusChange":false,"beforeStages":[{"name":"attach_logs_on_fail","time":{"start":1720581690332,"stop":1720581690332,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"common_setup","time":{"start":1720581690332,"stop":1720581690332,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes","time":{"start":1720581690332,"stop":1720581690332,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"filter_setup","time":{"start":1720581690332,"stop":1720581690332,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_id","time":{"start":1720581690332,"stop":1720581690332,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_setup","time":{"start":1720581690332,"stop":1720581690332,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_main_relay_node","time":{"start":1720581690333,"stop":1720581691845,"duration":1512},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_main_filter_node","time":{"start":1720581691845,"stop":1720581693265,"duration":1420},"status":"passed","steps":[{"name":"add_node_peer","time":{"start":1720581693253,"stop":1720581693265,"duration":12},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"args","value":"(<tests.filter.test_ping.TestFilterPing object at 0x7fa373974b90>, <src.node.waku_node.WakuNode object at 0x7fa371351f70>, ['/ip4/172.18.108.27/tcp/2140/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip'])"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"subscribe_main_nodes","time":{"start":1720581693265,"stop":1720581697353,"duration":4088},"status":"passed","steps":[{"name":"wait_for_subscriptions_on_main_nodes","time":{"start":1720581693265,"stop":1720581697352,"duration":4087},"status":"passed","steps":[{"name":"create_filter_subscription_with_retry","time":{"start":1720581693270,"stop":1720581693285,"duration":15},"status":"broken","statusMessage":"Exception: Error: 400 Client Error: Bad Request for url: http://127.0.0.1:9640/filter/v2/subscriptions with response: b'{\"requestId\":\"0c56bb2b-e721-47d3-bdd6-af9bf20e1e26\",\"statusDesc\":\"subscription failed\"}'\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.4/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/filter.py\", line 137, in create_filter_subscription_with_retry\n    return self.create_filter_subscription(subscription, node)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.12.4/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/filter.py\", line 143, in create_filter_subscription\n    return node.set_filter_subscriptions(subscription)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/waku_node.py\", line 346, in set_filter_subscriptions\n    return self._api.set_filter_subscriptions(subscription)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 68, in set_filter_subscriptions\n    set_subscriptions_response = self.rest_call(\"post\", \"filter/v2/subscriptions\", json.dumps(subscription))\n                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 16, in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/base_client.py\", line 17, in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\n","steps":[{"name":"create_filter_subscription","time":{"start":1720581693270,"stop":1720581693283,"duration":13},"status":"broken","statusMessage":"Exception: Error: 400 Client Error: Bad Request for url: http://127.0.0.1:9640/filter/v2/subscriptions with response: b'{\"requestId\":\"0c56bb2b-e721-47d3-bdd6-af9bf20e1e26\",\"statusDesc\":\"subscription failed\"}'\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.4/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/filter.py\", line 143, in create_filter_subscription\n    return node.set_filter_subscriptions(subscription)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/waku_node.py\", line 346, in set_filter_subscriptions\n    return self._api.set_filter_subscriptions(subscription)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 68, in set_filter_subscriptions\n    set_subscriptions_response = self.rest_call(\"post\", \"filter/v2/subscriptions\", json.dumps(subscription))\n                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 16, in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/base_client.py\", line 17, in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\n","steps":[],"attachments":[],"parameters":[{"name":"subscription","value":"{'requestId': '0c56bb2b-e721-47d3-bdd6-af9bf20e1e26', 'contentFilters': ['/test/1/waku-filter/proto'], 'pubsubTopic': '/waku/2/rs/0/1'}"},{"name":"node","value":"None"}],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"subscription","value":"{'requestId': '0c56bb2b-e721-47d3-bdd6-af9bf20e1e26', 'contentFilters': ['/test/1/waku-filter/proto'], 'pubsubTopic': '/waku/2/rs/0/1'}"},{"name":"node","value":"None"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"create_filter_subscription_with_retry","time":{"start":1720581694286,"stop":1720581694302,"duration":16},"status":"broken","statusMessage":"Exception: Error: 400 Client Error: Bad Request for url: http://127.0.0.1:9640/filter/v2/subscriptions with response: b'{\"requestId\":\"0c56bb2b-e721-47d3-bdd6-af9bf20e1e26\",\"statusDesc\":\"subscription failed\"}'\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.4/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/filter.py\", line 137, in create_filter_subscription_with_retry\n    return self.create_filter_subscription(subscription, node)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.12.4/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/filter.py\", line 143, in create_filter_subscription\n    return node.set_filter_subscriptions(subscription)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/waku_node.py\", line 346, in set_filter_subscriptions\n    return self._api.set_filter_subscriptions(subscription)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 68, in set_filter_subscriptions\n    set_subscriptions_response = self.rest_call(\"post\", \"filter/v2/subscriptions\", json.dumps(subscription))\n                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 16, in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/base_client.py\", line 17, in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\n","steps":[{"name":"create_filter_subscription","time":{"start":1720581694286,"stop":1720581694301,"duration":15},"status":"broken","statusMessage":"Exception: Error: 400 Client Error: Bad Request for url: http://127.0.0.1:9640/filter/v2/subscriptions with response: b'{\"requestId\":\"0c56bb2b-e721-47d3-bdd6-af9bf20e1e26\",\"statusDesc\":\"subscription failed\"}'\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.4/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/filter.py\", line 143, in create_filter_subscription\n    return node.set_filter_subscriptions(subscription)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/waku_node.py\", line 346, in set_filter_subscriptions\n    return self._api.set_filter_subscriptions(subscription)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 68, in set_filter_subscriptions\n    set_subscriptions_response = self.rest_call(\"post\", \"filter/v2/subscriptions\", json.dumps(subscription))\n                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 16, in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/base_client.py\", line 17, in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\n","steps":[],"attachments":[],"parameters":[{"name":"subscription","value":"{'requestId': '0c56bb2b-e721-47d3-bdd6-af9bf20e1e26', 'contentFilters': ['/test/1/waku-filter/proto'], 'pubsubTopic': '/waku/2/rs/0/1'}"},{"name":"node","value":"None"}],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"subscription","value":"{'requestId': '0c56bb2b-e721-47d3-bdd6-af9bf20e1e26', 'contentFilters': ['/test/1/waku-filter/proto'], 'pubsubTopic': '/waku/2/rs/0/1'}"},{"name":"node","value":"None"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"create_filter_subscription_with_retry","time":{"start":1720581695304,"stop":1720581695319,"duration":15},"status":"broken","statusMessage":"Exception: Error: 400 Client Error: Bad Request for url: http://127.0.0.1:9640/filter/v2/subscriptions with response: b'{\"requestId\":\"0c56bb2b-e721-47d3-bdd6-af9bf20e1e26\",\"statusDesc\":\"subscription failed\"}'\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.4/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/filter.py\", line 137, in create_filter_subscription_with_retry\n    return self.create_filter_subscription(subscription, node)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.12.4/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/filter.py\", line 143, in create_filter_subscription\n    return node.set_filter_subscriptions(subscription)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/waku_node.py\", line 346, in set_filter_subscriptions\n    return self._api.set_filter_subscriptions(subscription)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 68, in set_filter_subscriptions\n    set_subscriptions_response = self.rest_call(\"post\", \"filter/v2/subscriptions\", json.dumps(subscription))\n                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 16, in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/base_client.py\", line 17, in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\n","steps":[{"name":"create_filter_subscription","time":{"start":1720581695304,"stop":1720581695318,"duration":14},"status":"broken","statusMessage":"Exception: Error: 400 Client Error: Bad Request for url: http://127.0.0.1:9640/filter/v2/subscriptions with response: b'{\"requestId\":\"0c56bb2b-e721-47d3-bdd6-af9bf20e1e26\",\"statusDesc\":\"subscription failed\"}'\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.4/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/filter.py\", line 143, in create_filter_subscription\n    return node.set_filter_subscriptions(subscription)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/waku_node.py\", line 346, in set_filter_subscriptions\n    return self._api.set_filter_subscriptions(subscription)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 68, in set_filter_subscriptions\n    set_subscriptions_response = self.rest_call(\"post\", \"filter/v2/subscriptions\", json.dumps(subscription))\n                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 16, in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/base_client.py\", line 17, in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\n","steps":[],"attachments":[],"parameters":[{"name":"subscription","value":"{'requestId': '0c56bb2b-e721-47d3-bdd6-af9bf20e1e26', 'contentFilters': ['/test/1/waku-filter/proto'], 'pubsubTopic': '/waku/2/rs/0/1'}"},{"name":"node","value":"None"}],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"subscription","value":"{'requestId': '0c56bb2b-e721-47d3-bdd6-af9bf20e1e26', 'contentFilters': ['/test/1/waku-filter/proto'], 'pubsubTopic': '/waku/2/rs/0/1'}"},{"name":"node","value":"None"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"create_filter_subscription_with_retry","time":{"start":1720581696320,"stop":1720581696336,"duration":16},"status":"broken","statusMessage":"Exception: Error: 400 Client Error: Bad Request for url: http://127.0.0.1:9640/filter/v2/subscriptions with response: b'{\"requestId\":\"0c56bb2b-e721-47d3-bdd6-af9bf20e1e26\",\"statusDesc\":\"subscription failed\"}'\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.4/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/filter.py\", line 137, in create_filter_subscription_with_retry\n    return self.create_filter_subscription(subscription, node)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.12.4/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/filter.py\", line 143, in create_filter_subscription\n    return node.set_filter_subscriptions(subscription)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/waku_node.py\", line 346, in set_filter_subscriptions\n    return self._api.set_filter_subscriptions(subscription)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 68, in set_filter_subscriptions\n    set_subscriptions_response = self.rest_call(\"post\", \"filter/v2/subscriptions\", json.dumps(subscription))\n                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 16, in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/base_client.py\", line 17, in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\n","steps":[{"name":"create_filter_subscription","time":{"start":1720581696320,"stop":1720581696335,"duration":15},"status":"broken","statusMessage":"Exception: Error: 400 Client Error: Bad Request for url: http://127.0.0.1:9640/filter/v2/subscriptions with response: b'{\"requestId\":\"0c56bb2b-e721-47d3-bdd6-af9bf20e1e26\",\"statusDesc\":\"subscription failed\"}'\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.4/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/filter.py\", line 143, in create_filter_subscription\n    return node.set_filter_subscriptions(subscription)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/waku_node.py\", line 346, in set_filter_subscriptions\n    return self._api.set_filter_subscriptions(subscription)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 68, in set_filter_subscriptions\n    set_subscriptions_response = self.rest_call(\"post\", \"filter/v2/subscriptions\", json.dumps(subscription))\n                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 16, in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/base_client.py\", line 17, in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\n","steps":[],"attachments":[],"parameters":[{"name":"subscription","value":"{'requestId': '0c56bb2b-e721-47d3-bdd6-af9bf20e1e26', 'contentFilters': ['/test/1/waku-filter/proto'], 'pubsubTopic': '/waku/2/rs/0/1'}"},{"name":"node","value":"None"}],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"subscription","value":"{'requestId': '0c56bb2b-e721-47d3-bdd6-af9bf20e1e26', 'contentFilters': ['/test/1/waku-filter/proto'], 'pubsubTopic': '/waku/2/rs/0/1'}"},{"name":"node","value":"None"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"create_filter_subscription_with_retry","time":{"start":1720581697338,"stop":1720581697352,"duration":14},"status":"passed","steps":[{"name":"create_filter_subscription","time":{"start":1720581697338,"stop":1720581697352,"duration":14},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"subscription","value":"{'requestId': '0c56bb2b-e721-47d3-bdd6-af9bf20e1e26', 'contentFilters': ['/test/1/waku-filter/proto'], 'pubsubTopic': '/waku/2/rs/0/1'}"},{"name":"node","value":"None"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"subscription","value":"{'requestId': '0c56bb2b-e721-47d3-bdd6-af9bf20e1e26', 'contentFilters': ['/test/1/waku-filter/proto'], 'pubsubTopic': '/waku/2/rs/0/1'}"},{"name":"node","value":"None"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"content_topic_list","value":"['/test/1/waku-filter/proto']"},{"name":"pubsub_topic","value":"None"}],"shouldDisplayMessage":false,"stepsCount":10,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":11,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"testStage":{"status":"broken","statusMessage":"Exception: Error: 500 Server Error: Internal Server Error for url: http://127.0.0.1:9640/filter/v2/subscriptions/fc6b28aa-de22-48fb-8c9a-84385b52ab87 with response: b'{\"requestId\":\"fc6b28aa-de22-48fb-8c9a-84385b52ab87\",\"statusDesc\":\"ping request failed\"}'","statusTrace":"src/node/api_clients/base_client.py:14: in make_request\n    response.raise_for_status()\n/opt/hostedtoolcache/Python/3.12.4/x64/lib/python3.12/site-packages/requests/models.py:1021: in raise_for_status\n    raise HTTPError(http_error_msg, response=self)\nE   requests.exceptions.HTTPError: 500 Server Error: Internal Server Error for url: http://127.0.0.1:9640/filter/v2/subscriptions/fc6b28aa-de22-48fb-8c9a-84385b52ab87\n\nDuring handling of the above exception, another exception occurred:\ntests/filter/test_ping.py:9: in test_filter_ping_on_subscribed_peer\n    self.ping_filter_subscriptions(str(uuid4()))\nsrc/steps/filter.py:179: in ping_filter_subscriptions\n    ping_sub_response = node.ping_filter_subscriptions(request_id)\nsrc/node/waku_node.py:358: in ping_filter_subscriptions\n    return self._api.ping_filter_subscriptions(request_id)\nsrc/node/api_clients/rest.py:84: in ping_filter_subscriptions\n    ping_subscriptions_response = self.rest_call(\"get\", f\"filter/v2/subscriptions/{quote(request_id, safe='')}\")\nsrc/node/api_clients/rest.py:16: in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\nsrc/node/api_clients/base_client.py:17: in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\nE   Exception: Error: 500 Server Error: Internal Server Error for url: http://127.0.0.1:9640/filter/v2/subscriptions/fc6b28aa-de22-48fb-8c9a-84385b52ab87 with response: b'{\"requestId\":\"fc6b28aa-de22-48fb-8c9a-84385b52ab87\",\"statusDesc\":\"ping request failed\"}'","steps":[{"name":"ping_filter_subscriptions","time":{"start":1720581697353,"stop":1720581697368,"duration":15},"status":"broken","statusMessage":"Exception: Error: 500 Server Error: Internal Server Error for url: http://127.0.0.1:9640/filter/v2/subscriptions/fc6b28aa-de22-48fb-8c9a-84385b52ab87 with response: b'{\"requestId\":\"fc6b28aa-de22-48fb-8c9a-84385b52ab87\",\"statusDesc\":\"ping request failed\"}'\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.4/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/filter.py\", line 179, in ping_filter_subscriptions\n    ping_sub_response = node.ping_filter_subscriptions(request_id)\n                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/waku_node.py\", line 358, in ping_filter_subscriptions\n    return self._api.ping_filter_subscriptions(request_id)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 84, in ping_filter_subscriptions\n    ping_subscriptions_response = self.rest_call(\"get\", f\"filter/v2/subscriptions/{quote(request_id, safe='')}\")\n                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 16, in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/base_client.py\", line 17, in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\n","steps":[],"attachments":[],"parameters":[{"name":"request_id","value":"'fc6b28aa-de22-48fb-8c9a-84385b52ab87'"},{"name":"node","value":"None"}],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"635b81a944b7a894","name":"log","source":"635b81a944b7a894.txt","type":"text/plain","size":45253}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":1,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"test_setup::0","time":{"start":1720581697405,"stop":1720581697406,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes::0","time":{"start":1720581697407,"stop":1720581710435,"duration":13028},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail::0","time":{"start":1720581710436,"stop":1720581710438,"duration":2},"status":"passed","steps":[],"attachments":[{"uid":"2452e0b1190ddde5","name":"node1_2024-07-10_03-21-30__4e614cc3-034a-4310-97bc-e33d1c3ae0d5__harbor.status.im_wakuorg_nwaku:latest.log","source":"2452e0b1190ddde5.txt","type":"text/plain","size":465740},{"uid":"4ed51c3b0e8fe2c2","name":"node2_2024-07-10_03-21-30__4e614cc3-034a-4310-97bc-e33d1c3ae0d5__harbor.status.im_wakuorg_go-waku:latest.log","source":"4ed51c3b0e8fe2c2.txt","type":"text/plain","size":107011}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"labels":[{"name":"tag","value":"@pytest.mark.usefixtures('setup_main_relay_node', 'setup_main_filter_node')"},{"name":"parentSuite","value":"tests.filter"},{"name":"suite","value":"test_ping"},{"name":"subSuite","value":"TestFilterPing"},{"name":"host","value":"fv-az2021-263"},{"name":"thread","value":"2140-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.filter.test_ping"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"caa2372da12ba751","status":"broken","statusDetails":"Exception: Error: 500 Server Error: Internal Server Error for url: http://127.0.0.1:44138/filter/v2/subscriptions/00b88198-c223-49a4-b6c6-abb5d6c0072d with response: b'{\"requestId\":\"00b88198-c223-49a4-b6c6-abb5d6c0072d\",\"statusDesc\":\"ping request failed\"}'","time":{"start":1720581687766,"stop":1720581687784,"duration":18}},{"uid":"79798222672fe798","status":"broken","statusDetails":"Exception: Error: 500 Server Error: Internal Server Error for url: http://127.0.0.1:34526/filter/v2/subscriptions/dc8854e9-9cce-40fe-91aa-b6ddc50a1f0d with response: b'{\"requestId\":\"dc8854e9-9cce-40fe-91aa-b6ddc50a1f0d\",\"statusDesc\":\"ping request failed\"}'","time":{"start":1720581671142,"stop":1720581671158,"duration":16}}],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":12,"skipped":0,"passed":206,"unknown":0,"total":218},"items":[{"uid":"9e0154f51a989a0e","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/193//#testresult/9e0154f51a989a0e","status":"passed","time":{"start":1720527259546,"stop":1720527259550,"duration":4}},{"uid":"fdfc1ec098922b7a","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/192//#testresult/fdfc1ec098922b7a","status":"passed","time":{"start":1720516855992,"stop":1720516855997,"duration":5}},{"uid":"82fda728425c24cc","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/191//#testresult/82fda728425c24cc","status":"passed","time":{"start":1720494797491,"stop":1720494797497,"duration":6}},{"uid":"734e0764d8313ca","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/190//#testresult/734e0764d8313ca","status":"passed","time":{"start":1720408410701,"stop":1720408410705,"duration":4}},{"uid":"a2419333c4f3d720","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/189//#testresult/a2419333c4f3d720","status":"passed","time":{"start":1720321982717,"stop":1720321982722,"duration":5}},{"uid":"93f9255ccb3252a9","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/188//#testresult/93f9255ccb3252a9","status":"passed","time":{"start":1720235647088,"stop":1720235647093,"duration":5}},{"uid":"f7aedd0bc88228b0","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/187//#testresult/f7aedd0bc88228b0","status":"passed","time":{"start":1720149127346,"stop":1720149127349,"duration":3}},{"uid":"197ebb3a6d080402","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/186//#testresult/197ebb3a6d080402","status":"passed","time":{"start":1720078515131,"stop":1720078515137,"duration":6}},{"uid":"388d9295c4ce8e9f","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/185//#testresult/388d9295c4ce8e9f","status":"broken","statusDetails":"requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=12832): Max retries exceeded with url: /debug/v1/info (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f8130a41ac0>: Failed to establish a new connection: [Errno 111] Connection refused'))","time":{"start":1720063932634,"stop":1720063932634,"duration":0}},{"uid":"bed97969b6649ab7","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/184//#testresult/bed97969b6649ab7","status":"passed","time":{"start":1719990994819,"stop":1719990994826,"duration":7}},{"uid":"9fed47046bdcbb83","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/183//#testresult/9fed47046bdcbb83","status":"passed","time":{"start":1719976362091,"stop":1719976362095,"duration":4}},{"uid":"b8c861f97492e414","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/182//#testresult/b8c861f97492e414","status":"passed","time":{"start":1719889913463,"stop":1719889913469,"duration":6}},{"uid":"ddc8d45027af8667","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/181//#testresult/ddc8d45027af8667","status":"passed","time":{"start":1719803563771,"stop":1719803563776,"duration":5}},{"uid":"5de0ba5abab5cfb1","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/180//#testresult/5de0ba5abab5cfb1","status":"passed","time":{"start":1719717155435,"stop":1719717155440,"duration":5}},{"uid":"47ceea0e25f76ece","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/179//#testresult/47ceea0e25f76ece","status":"passed","time":{"start":1719630740307,"stop":1719630740311,"duration":4}},{"uid":"98d8ccf8b622cd56","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/178//#testresult/98d8ccf8b622cd56","status":"passed","time":{"start":1719544395854,"stop":1719544395859,"duration":5}},{"uid":"d5bc55f156227bc3","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/177//#testresult/d5bc55f156227bc3","status":"passed","time":{"start":1719458016690,"stop":1719458016698,"duration":8}},{"uid":"5c9f5f0110b8048","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/176//#testresult/5c9f5f0110b8048","status":"passed","time":{"start":1719371620335,"stop":1719371620382,"duration":47}},{"uid":"4f2fd0c53715031f","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/175//#testresult/4f2fd0c53715031f","status":"passed","time":{"start":1719285103341,"stop":1719285103347,"duration":6}},{"uid":"8bc622fd6bc506d1","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/174//#testresult/8bc622fd6bc506d1","status":"passed","time":{"start":1719198734525,"stop":1719198734530,"duration":5}}]},"tags":["@pytest.mark.usefixtures('setup_main_relay_node', 'setup_main_filter_node')"]},"source":"7f072543fb799dcc.json","parameterValues":[]}