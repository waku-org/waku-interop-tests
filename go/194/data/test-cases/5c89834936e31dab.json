{"uid":"5c89834936e31dab","name":"test_filter_unsubscribe_with_extra_field","fullName":"tests.filter.test_unsubscribe.TestFilterUnSubscribe#test_filter_unsubscribe_with_extra_field","historyId":"56d1bdbe8d6699f5fe282133f1599be2","time":{"start":1720582208257,"stop":1720582208273,"duration":16},"status":"failed","statusMessage":"AssertionError: assert 'Bad Request' in ''\n +  where '' = str(AssertionError())","statusTrace":"tests/filter/test_unsubscribe.py:140: in test_filter_unsubscribe_with_extra_field\n    self.delete_filter_subscription(\nsrc/steps/filter.py:163: in delete_filter_subscription\n    assert delete_sub_response[\"statusDesc\"] in [\"OK\"]\nE   AssertionError\n\nDuring handling of the above exception, another exception occurred:\ntests/filter/test_unsubscribe.py:150: in test_filter_unsubscribe_with_extra_field\n    assert \"Bad Request\" in str(ex)\nE   AssertionError: assert 'Bad Request' in ''\nE    +  where '' = str(AssertionError())","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":2,"retriesStatusChange":false,"beforeStages":[{"name":"attach_logs_on_fail","time":{"start":1720582204153,"stop":1720582204153,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes","time":{"start":1720582204154,"stop":1720582204154,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_id","time":{"start":1720582204154,"stop":1720582204154,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"common_setup","time":{"start":1720582204154,"stop":1720582204154,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_setup","time":{"start":1720582204154,"stop":1720582204154,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"filter_setup","time":{"start":1720582204154,"stop":1720582204154,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_main_relay_node","time":{"start":1720582204154,"stop":1720582205680,"duration":1526},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_main_filter_node","time":{"start":1720582205681,"stop":1720582207218,"duration":1537},"status":"passed","steps":[{"name":"add_node_peer","time":{"start":1720582207207,"stop":1720582207218,"duration":11},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"args","value":"(<tests.filter.test_unsubscribe.TestFilterUnSubscribe object at 0x7fc2a330b560>, <src.node.waku_node.WakuNode object at 0x7fc2a04c1460>, ['/ip4/172.18.8.205/tcp/59429/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip'])"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"subscribe_main_nodes","time":{"start":1720582207219,"stop":1720582208256,"duration":1037},"status":"passed","steps":[{"name":"wait_for_subscriptions_on_main_nodes","time":{"start":1720582207219,"stop":1720582208256,"duration":1037},"status":"passed","steps":[{"name":"create_filter_subscription_with_retry","time":{"start":1720582207223,"stop":1720582207240,"duration":17},"status":"broken","statusMessage":"Exception: Error: 400 Client Error: Bad Request for url: http://127.0.0.1:41020/filter/v2/subscriptions with response: b'{\"requestId\":\"5b015a56-b507-4d7d-bc7d-475618d257d2\",\"statusDesc\":\"subscription failed\"}'\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.4/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/filter.py\", line 137, in create_filter_subscription_with_retry\n    return self.create_filter_subscription(subscription, node)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/opt/hostedtoolcache/Python/3.12.4/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/filter.py\", line 143, in create_filter_subscription\n    return node.set_filter_subscriptions(subscription)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/waku_node.py\", line 346, in set_filter_subscriptions\n    return self._api.set_filter_subscriptions(subscription)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 68, in set_filter_subscriptions\n    set_subscriptions_response = self.rest_call(\"post\", \"filter/v2/subscriptions\", json.dumps(subscription))\n                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 16, in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/base_client.py\", line 17, in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\n","steps":[{"name":"create_filter_subscription","time":{"start":1720582207224,"stop":1720582207239,"duration":15},"status":"broken","statusMessage":"Exception: Error: 400 Client Error: Bad Request for url: http://127.0.0.1:41020/filter/v2/subscriptions with response: b'{\"requestId\":\"5b015a56-b507-4d7d-bc7d-475618d257d2\",\"statusDesc\":\"subscription failed\"}'\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.4/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/filter.py\", line 143, in create_filter_subscription\n    return node.set_filter_subscriptions(subscription)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/waku_node.py\", line 346, in set_filter_subscriptions\n    return self._api.set_filter_subscriptions(subscription)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 68, in set_filter_subscriptions\n    set_subscriptions_response = self.rest_call(\"post\", \"filter/v2/subscriptions\", json.dumps(subscription))\n                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/rest.py\", line 16, in rest_call\n    return self.make_request(method, url, headers=headers, data=payload)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/api_clients/base_client.py\", line 17, in make_request\n    raise Exception(f\"Error: {http_err} with response: {response.content}\")\n","steps":[],"attachments":[],"parameters":[{"name":"subscription","value":"{'requestId': '5b015a56-b507-4d7d-bc7d-475618d257d2', 'contentFilters': ['/test/1/waku-filter/proto'], 'pubsubTopic': '/waku/2/rs/0/1'}"},{"name":"node","value":"None"}],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"subscription","value":"{'requestId': '5b015a56-b507-4d7d-bc7d-475618d257d2', 'contentFilters': ['/test/1/waku-filter/proto'], 'pubsubTopic': '/waku/2/rs/0/1'}"},{"name":"node","value":"None"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"create_filter_subscription_with_retry","time":{"start":1720582208241,"stop":1720582208256,"duration":15},"status":"passed","steps":[{"name":"create_filter_subscription","time":{"start":1720582208241,"stop":1720582208256,"duration":15},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"subscription","value":"{'requestId': '5b015a56-b507-4d7d-bc7d-475618d257d2', 'contentFilters': ['/test/1/waku-filter/proto'], 'pubsubTopic': '/waku/2/rs/0/1'}"},{"name":"node","value":"None"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"subscription","value":"{'requestId': '5b015a56-b507-4d7d-bc7d-475618d257d2', 'contentFilters': ['/test/1/waku-filter/proto'], 'pubsubTopic': '/waku/2/rs/0/1'}"},{"name":"node","value":"None"}],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"content_topic_list","value":"['/test/1/waku-filter/proto']"},{"name":"pubsub_topic","value":"None"}],"shouldDisplayMessage":false,"stepsCount":4,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":5,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: assert 'Bad Request' in ''\n +  where '' = str(AssertionError())","statusTrace":"tests/filter/test_unsubscribe.py:140: in test_filter_unsubscribe_with_extra_field\n    self.delete_filter_subscription(\nsrc/steps/filter.py:163: in delete_filter_subscription\n    assert delete_sub_response[\"statusDesc\"] in [\"OK\"]\nE   AssertionError\n\nDuring handling of the above exception, another exception occurred:\ntests/filter/test_unsubscribe.py:150: in test_filter_unsubscribe_with_extra_field\n    assert \"Bad Request\" in str(ex)\nE   AssertionError: assert 'Bad Request' in ''\nE    +  where '' = str(AssertionError())","steps":[{"name":"delete_filter_subscription","time":{"start":1720582208257,"stop":1720582208272,"duration":15},"status":"failed","statusMessage":"AssertionError\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.4/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/filter.py\", line 163, in delete_filter_subscription\n    assert delete_sub_response[\"statusDesc\"] in [\"OK\"]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n","steps":[],"attachments":[],"parameters":[{"name":"subscription","value":"{'requestId': '1', 'contentFilters': ['/test/1/waku-filter/proto'], 'pubsubTopic': '/waku/2/rs/0/1', 'extraField': 'extraValue'}"},{"name":"status","value":"None"},{"name":"node","value":"None"}],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"aa02050e665c7468","name":"log","source":"aa02050e665c7468.txt","type":"text/plain","size":37405}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":1,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"test_setup::0","time":{"start":1720582208289,"stop":1720582208291,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes::0","time":{"start":1720582208291,"stop":1720582212203,"duration":3912},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail::0","time":{"start":1720582212204,"stop":1720582212206,"duration":2},"status":"passed","steps":[],"attachments":[{"uid":"233dd97d677e583","name":"node2_2024-07-10_03-30-04__635107a4-8c57-450c-94fa-e9a5ce6a4893__harbor.status.im_wakuorg_go-waku:latest.log","source":"233dd97d677e583.txt","type":"text/plain","size":82980},{"uid":"d2c1da608639c791","name":"node1_2024-07-10_03-30-04__635107a4-8c57-450c-94fa-e9a5ce6a4893__harbor.status.im_wakuorg_nwaku:latest.log","source":"d2c1da608639c791.txt","type":"text/plain","size":283725}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"labels":[{"name":"tag","value":"@pytest.mark.usefixtures('setup_main_relay_node', 'setup_main_filter_node', 'subscribe_main_nodes')"},{"name":"parentSuite","value":"tests.filter"},{"name":"suite","value":"test_unsubscribe"},{"name":"subSuite","value":"TestFilterUnSubscribe"},{"name":"host","value":"fv-az2021-263"},{"name":"thread","value":"2143-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.filter.test_unsubscribe"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"d45b5c74670b3758","status":"failed","statusDetails":"AssertionError: assert 'Bad Request' in ''\n +  where '' = str(AssertionError())","time":{"start":1720582201741,"stop":1720582201760,"duration":19}},{"uid":"8e23e5c0ca9b55e4","status":"failed","statusDetails":"AssertionError: assert 'Bad Request' in ''\n +  where '' = str(AssertionError())","time":{"start":1720582190124,"stop":1720582190144,"duration":20}}],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":1,"broken":7,"skipped":0,"passed":206,"unknown":0,"total":214},"items":[{"uid":"f7872d1f7d9624d7","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/193//#testresult/f7872d1f7d9624d7","status":"passed","time":{"start":1720527415049,"stop":1720527415056,"duration":7}},{"uid":"7892bf838c42b41","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/192//#testresult/7892bf838c42b41","status":"passed","time":{"start":1720517005895,"stop":1720517005899,"duration":4}},{"uid":"244eeaa65fada2b3","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/191//#testresult/244eeaa65fada2b3","status":"passed","time":{"start":1720494945669,"stop":1720494945673,"duration":4}},{"uid":"52aa6600d086378b","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/190//#testresult/52aa6600d086378b","status":"passed","time":{"start":1720408564939,"stop":1720408564944,"duration":5}},{"uid":"1baa43afd19f88cb","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/189//#testresult/1baa43afd19f88cb","status":"passed","time":{"start":1720322134533,"stop":1720322134538,"duration":5}},{"uid":"2992ca48b33aeefd","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/188//#testresult/2992ca48b33aeefd","status":"passed","time":{"start":1720235787837,"stop":1720235787842,"duration":5}},{"uid":"fb1237d05e475da0","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/187//#testresult/fb1237d05e475da0","status":"passed","time":{"start":1720149299148,"stop":1720149299152,"duration":4}},{"uid":"7139bc5d3394ef51","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/186//#testresult/7139bc5d3394ef51","status":"passed","time":{"start":1720078714102,"stop":1720078714106,"duration":4}},{"uid":"4e9b08e9cf2c5bab","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/184//#testresult/4e9b08e9cf2c5bab","status":"passed","time":{"start":1719991148907,"stop":1719991148914,"duration":7}},{"uid":"32857fe5efd8ef42","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/183//#testresult/32857fe5efd8ef42","status":"passed","time":{"start":1719976494205,"stop":1719976494210,"duration":5}},{"uid":"b8e7ccf255bbe490","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/182//#testresult/b8e7ccf255bbe490","status":"passed","time":{"start":1719890062658,"stop":1719890062664,"duration":6}},{"uid":"84e685b0e727e1d9","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/181//#testresult/84e685b0e727e1d9","status":"passed","time":{"start":1719803706699,"stop":1719803706705,"duration":6}},{"uid":"7c74045af89152a5","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/180//#testresult/7c74045af89152a5","status":"passed","time":{"start":1719717299047,"stop":1719717299051,"duration":4}},{"uid":"2670baf810d16b75","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/179//#testresult/2670baf810d16b75","status":"passed","time":{"start":1719630901712,"stop":1719630901717,"duration":5}},{"uid":"9a12921018d3a439","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/178//#testresult/9a12921018d3a439","status":"passed","time":{"start":1719544542320,"stop":1719544542326,"duration":6}},{"uid":"c6647adf341136f","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/177//#testresult/c6647adf341136f","status":"passed","time":{"start":1719458140710,"stop":1719458140716,"duration":6}},{"uid":"7789b5b7ab4b6a8f","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/176//#testresult/7789b5b7ab4b6a8f","status":"passed","time":{"start":1719371749384,"stop":1719371749389,"duration":5}},{"uid":"d24d4f8c4ed0f8c8","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/175//#testresult/d24d4f8c4ed0f8c8","status":"passed","time":{"start":1719285282212,"stop":1719285282219,"duration":7}},{"uid":"eb8c3cb0f4bd1e29","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/174//#testresult/eb8c3cb0f4bd1e29","status":"passed","time":{"start":1719198897354,"stop":1719198897359,"duration":5}},{"uid":"7689de8724f31958","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/173//#testresult/7689de8724f31958","status":"passed","time":{"start":1719112478351,"stop":1719112478357,"duration":6}}]},"tags":["@pytest.mark.usefixtures('setup_main_relay_node', 'setup_main_filter_node', 'subscribe_main_nodes')"]},"source":"5c89834936e31dab.json","parameterValues":[]}