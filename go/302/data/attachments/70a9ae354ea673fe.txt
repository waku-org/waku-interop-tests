[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_lightpush with id: 2024-10-07_03-19-27__24851cfd-de29-4780-851e-ef062a87992e
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-07_03-19-27__24851cfd-de29-4780-851e-ef062a87992e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.157.134
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['6974', '6975', '6976', '6977', '6978']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 6974:6974 -p 6975:6975 -p 6976:6976 -p 6977:6977 -p 6978:6978 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6976 --rest-port=6974 --tcp-port=6975 --discv5-udp-port=6977 --rest-address=0.0.0.0 --nat=extip:172.18.157.134 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d2fac5cfb5b486c9fc5f04aeeff7cfbd7e94e6ae42d9b79b92f212dece8366d0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6978 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.157.134 waku 8954030b4ed493000e7bf6610844c9c056da69efa8488576f0a8d1f6eb411afd
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 8954030b4ed4. Setting up logs at ./log/docker/node1_2024-10-07_03-19-27__24851cfd-de29-4780-851e-ef062a87992e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 6974
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6974/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6974/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.157.134/tcp/6975/p2p/16Uiu2HAkw6irmWdJMZZkM9mHpoKbEJi3HFLaHp9nZLFyxGwMrpni","/ip4/172.18.157.134/tcp/6976/ws/p2p/16Uiu2HAkw6irmWdJMZZkM9mHpoKbEJi3HFLaHp9nZLFyxGwMrpni"],"enrUri":"enr:-LO4QMT7tCh1SioK7bpTcGnY3OMXZITeA1oGv9gJkLqMSnDgRMGJzSxJdkKeir37THp6MTlKjI6D_38X0giLgU5ns2ABgmlkgnY0gmlwhKwSnYaKbXVsdGlhZGRyc4wACgSsEp2GBhtA3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIY3Jf4aKO3VAvEsHV1xZMhrZVCoIDpuP9Ihv_QRDOp34N0Y3CCGz-DdWRwghtBhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-07_03-19-27__24851cfd-de29-4780-851e-ef062a87992e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.247.237
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['20135', '20136', '20137', '20138', '20139']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 20135:20135 -p 20136:20136 -p 20137:20137 -p 20138:20138 -p 20139:20139 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=20137 --rest-port=20135 --tcp-port=20136 --discv5-udp-port=20138 --rest-address=0.0.0.0 --nat=extip:172.18.247.237 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7d8c8618a7b25128e4d965cccdf9366ecdfd69ceeebe6c0db67bbbdc2a695c12 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=20139 --metrics-logging=true --lightpush=false --relay=true --discv5-bootstrap-node=enr:-LO4QMT7tCh1SioK7bpTcGnY3OMXZITeA1oGv9gJkLqMSnDgRMGJzSxJdkKeir37THp6MTlKjI6D_38X0giLgU5ns2ABgmlkgnY0gmlwhKwSnYaKbXVsdGlhZGRyc4wACgSsEp2GBhtA3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIY3Jf4aKO3VAvEsHV1xZMhrZVCoIDpuP9Ihv_QRDOp34N0Y3CCGz-DdWRwghtBhXdha3UyCQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.247.237 waku 64b3dd425a0d6d1ba74774bf1d9ce35905820a13f407b762e3fa2f5cf2380c6e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 64b3dd425a0d. Setting up logs at ./log/docker/node1_2024-10-07_03-19-27__24851cfd-de29-4780-851e-ef062a87992e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 20135
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20135/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20135/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.247.237/tcp/20136/p2p/16Uiu2HAmHBifoFqjS34vtia4BS59vYCxzYEamLZpJQDskpkLxT6X","/ip4/172.18.247.237/tcp/20137/ws/p2p/16Uiu2HAmHBifoFqjS34vtia4BS59vYCxzYEamLZpJQDskpkLxT6X"],"enrUri":"enr:-LO4QBbIzpPnMKTj1ulRwt17UWqrTzyw0kjAOgWdMugtt3YyYPnd7ASFJ1t16xV9bipLAPqDjcvawPK-KRmxbg3Jx4ABgmlkgnY0gmlwhKwS9-2KbXVsdGlhZGRyc4wACgSsEvftBk6p3QOCcnOFAAMBAACJc2VjcDI1NmsxoQNDTgW4r_P8Am5aELXo_F81w1MjqAfF6-KaAtLq87_W0IN0Y3CCTqiDdWRwgk6qhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-07_03-19-27__24851cfd-de29-4780-851e-ef062a87992e__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.11.81
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['50252', '50253', '50254', '50255', '50256']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 50252:50252 -p 50253:50253 -p 50254:50254 -p 50255:50255 -p 50256:50256 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=50254 --rest-port=50252 --tcp-port=50253 --discv5-udp-port=50255 --rest-address=0.0.0.0 --nat=extip:172.18.11.81 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bf97f28c6fd7a0ebdcf1f784ffbc7c9bfec50708bf879f9b74df81d4fce3f31a --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --lightpush=true --relay=false --discv5-bootstrap-node=enr:-LO4QMT7tCh1SioK7bpTcGnY3OMXZITeA1oGv9gJkLqMSnDgRMGJzSxJdkKeir37THp6MTlKjI6D_38X0giLgU5ns2ABgmlkgnY0gmlwhKwSnYaKbXVsdGlhZGRyc4wACgSsEp2GBhtA3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIY3Jf4aKO3VAvEsHV1xZMhrZVCoIDpuP9Ihv_QRDOp34N0Y3CCGz-DdWRwghtBhXdha3UyCQ --lightpushnode=/ip4/172.18.157.134/tcp/6975/p2p/16Uiu2HAkw6irmWdJMZZkM9mHpoKbEJi3HFLaHp9nZLFyxGwMrpni
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.11.81 waku 470d957a4247f6e401f7bd4652bb3104faa232c7c15e2ebea3e21a39201869ce
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 470d957a4247. Setting up logs at ./log/docker/node1_2024-10-07_03-19-27__24851cfd-de29-4780-851e-ef062a87992e__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 50252
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:50252/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QGlJuEYmKMTZe5AgvFDzStKCcYNixmhgk-5KV1VGZbH1CZA7gjjP7rlfScnMmJVdOo64TPDRC4aiwrjRHGlg-MyGAZJk_UIYgmlkgnY0gmlwhKwRAASJc2VjcDI1NmsxoQPLQuJI6zm9KTUkKfL-A7OmlNfBec8YI2HQlWOCTUPdHYN0Y3CCxE2DdWRwgsRPhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/50253/p2p/16Uiu2HAmSLSGNFrM2jUaaQmdXopwPTFWUgHEQerS3ohpLe3rjFj2","/ip4/127.0.0.1/tcp/50254/ws/p2p/16Uiu2HAmSLSGNFrM2jUaaQmdXopwPTFWUgHEQerS3ohpLe3rjFj2","/ip4/172.17.0.4/tcp/50253/p2p/16Uiu2HAmSLSGNFrM2jUaaQmdXopwPTFWUgHEQerS3ohpLe3rjFj2","/ip4/172.17.0.4/tcp/50254/ws/p2p/16Uiu2HAmSLSGNFrM2jUaaQmdXopwPTFWUgHEQerS3ohpLe3rjFj2"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6974/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:20135/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:50252/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": 1728271173236730624}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6974/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1728271173236730624,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:20135/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1728271173236730624,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 8954030b4ed4
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 64b3dd425a0d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 470d957a4247
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.