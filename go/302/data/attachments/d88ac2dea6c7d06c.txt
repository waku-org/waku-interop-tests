[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store with id: 2024-10-07_03-19-11__22627f42-e199-4e93-982f-b25a508b5b79
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-07_03-19-11__22627f42-e199-4e93-982f-b25a508b5b79__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:32 Network waku created
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.33.11
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['61487', '61488', '61489', '61490', '61491']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 61487:61487 -p 61488:61488 -p 61489:61489 -p 61490:61490 -p 61491:61491 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61489 --rest-port=61487 --tcp-port=61488 --discv5-udp-port=61490 --rest-address=0.0.0.0 --nat=extip:172.18.33.11 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8bad62ca4c2f98e780cb97fd69fb2adcfaebdd33be080f9314acce4dfcbf25ad --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61491 --metrics-logging=true --relay=true --store=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.33.11 waku d41e317906749f3468cfdd4bb8e80c6991efe6e42ddc2661abf307afc03cc222
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID d41e31790674. Setting up logs at ./log/docker/node1_2024-10-07_03-19-11__22627f42-e199-4e93-982f-b25a508b5b79__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 61487
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61487/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61487/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.33.11/tcp/61488/p2p/16Uiu2HAmQRbwZqyWZ5isTkKa7UEgAa2UE6Zg8kGKESJzr5xtnWrZ","/ip4/172.18.33.11/tcp/61489/ws/p2p/16Uiu2HAmQRbwZqyWZ5isTkKa7UEgAa2UE6Zg8kGKESJzr5xtnWrZ"],"enrUri":"enr:-LO4QJrTFs4Kya8D-GoEGKfFKvFHgcHw4romQXU2ixtvFBKINCSFcL6f2aVwKaj7lml249JyRw0EDcZO_aaP1q1fLRUBgmlkgnY0gmlwhKwSIQuKbXVsdGlhZGRyc4wACgSsEiELBvAx3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOu3lrKFPIpZohc-y3yAmkf12VCZK8xJIgLKQ2ENX57ZoN0Y3CC8DCDdWRwgvAyhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-07_03-19-11__22627f42-e199-4e93-982f-b25a508b5b79__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.231.100
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['13443', '13444', '13445', '13446', '13447']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 13443:13443 -p 13444:13444 -p 13445:13445 -p 13446:13446 -p 13447:13447 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=13445 --rest-port=13443 --tcp-port=13444 --discv5-udp-port=13446 --rest-address=0.0.0.0 --nat=extip:172.18.231.100 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c9b01f1bb1a25038ac1184c7fcbb8c6bc2b2b3cdbceb7cb3ed12f493cc5bf792 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --store=true --discv5-bootstrap-node=enr:-LO4QJrTFs4Kya8D-GoEGKfFKvFHgcHw4romQXU2ixtvFBKINCSFcL6f2aVwKaj7lml249JyRw0EDcZO_aaP1q1fLRUBgmlkgnY0gmlwhKwSIQuKbXVsdGlhZGRyc4wACgSsEiELBvAx3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOu3lrKFPIpZohc-y3yAmkf12VCZK8xJIgLKQ2ENX57ZoN0Y3CC8DCDdWRwgvAyhXdha3UyAw --storenode=/ip4/172.18.33.11/tcp/61488/p2p/16Uiu2HAmQRbwZqyWZ5isTkKa7UEgAa2UE6Zg8kGKESJzr5xtnWrZ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.231.100 waku 34bb49f4ddc3fb7675a3c5257b4063555681160f71a918cebce18c976482c3e5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 34bb49f4ddc3. Setting up logs at ./log/docker/node1_2024-10-07_03-19-11__22627f42-e199-4e93-982f-b25a508b5b79__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 13443
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13443/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QIO_zmj75MTPTIDPDDTuwmoAf1qGzIpsJIXdXTWI_RcCPBg6V4ELSauns2lVmmJzRdB4VLJGTjPiQ7qIo6InT5qGAZJk_QzegmlkgnY0gmlwhKwRAAaJc2VjcDI1NmsxoQL89SrGWUxDgmK8SMfKH3Aue0EM9xpAMdKJvOG8ZWEtAIN0Y3CCNISDdWRwgjSGhXdha3UyAw","listenAddresses":["/ip4/127.0.0.1/tcp/13444/p2p/16Uiu2HAmCT7YfsKb8XcsKxZXr9o5cvE5My7wuQiSmQfmRQHqc9H9","/ip4/127.0.0.1/tcp/13445/ws/p2p/16Uiu2HAmCT7YfsKb8XcsKxZXr9o5cvE5My7wuQiSmQfmRQHqc9H9","/ip4/172.17.0.6/tcp/13444/p2p/16Uiu2HAmCT7YfsKb8XcsKxZXr9o5cvE5My7wuQiSmQfmRQHqc9H9","/ip4/172.17.0.6/tcp/13445/ws/p2p/16Uiu2HAmCT7YfsKb8XcsKxZXr9o5cvE5My7wuQiSmQfmRQHqc9H9"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61487/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13443/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61487/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/go-waku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13443/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-relay%2Fproto&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 500 Server Error: Internal Server Error for url: http://127.0.0.1:13443/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-relay%2Fproto&pageSize=5&ascending=true. Response content: b'{"messages":null,"error_message":"failed to dial: context deadline exceeded"}'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61487/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/go-waku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13443/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-relay%2Fproto&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"2517602d46cd3e5b7e81398444dbcc2d0df46de92d5e3ca9f527900ad16c43f1","status_code":200,"status_desc":"OK","messages":[{"message_hash":"cH8doXrPSd/Tus8IV7h6lcRSKmBCcEBVnpB2JUyE5AE="},{"message_hash":"Ystjy942CPEBXhqvfrORdNWDvZ07NDnOWZivQyvylcY="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id d41e31790674
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 34bb49f4ddc3
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.