[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_publishing_node_restarts with id: 2025-02-01_03-13-25__57cf1d55-2665-40ba-b584-27c2e46be322
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-01_03-13-25__57cf1d55-2665-40ba-b584-27c2e46be322__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.69.152
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['45947', '45948', '45949', '45950', '45951']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 45947:45947 -p 45948:45948 -p 45949:45949 -p 45950:45950 -p 45951:45951 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=45949 --rest-port=45947 --tcp-port=45948 --discv5-udp-port=45950 --rest-address=0.0.0.0 --nat=extip:172.18.69.152 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3046dbb7a870f18576f2e05b63b0a9b7257ea9884ac14b1ce092a215f2eebaea --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=45951 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.69.152 waku 6735fb867ecce40bb96e8356ef0032fbfbbaf4ef715279707997b694d4918bca
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 6735fb867ecc. Setting up logs at ./log/docker/publishing_node1_2025-02-01_03-13-25__57cf1d55-2665-40ba-b584-27c2e46be322__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 45947
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 9314a6b187ba. Exiting log stream.
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 01f7f272582b. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45947/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45947/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.69.152/tcp/45948/p2p/16Uiu2HAm4pFxVGoodsCRtYx2cZRUkyAyEEsUR45rdnMQRy6nCd5m","/ip4/172.18.69.152/tcp/45949/ws/p2p/16Uiu2HAm4pFxVGoodsCRtYx2cZRUkyAyEEsUR45rdnMQRy6nCd5m"],"enrUri":"enr:-L24QBvKu84kPAdEGNOlffbpDE874v-nVxXuKheZABGX08hBBQssRwHZZrTYFlAOx5stW5cnC8tf68kZHOMZNYkxb_QCgmlkgnY0gmlwhKwSRZiKbXVsdGlhZGRyc5YACASsEkWYBrN8AAoErBJFmAazfd0DgnJzhQADAQAAiXNlY3AyNTZrMaECi4Jg7NW1nfHgk9e4rbfjT7DIs6MPSfxZo_vesktbLsyDdGNwgrN8g3VkcIKzfoV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-01_03-13-25__57cf1d55-2665-40ba-b584-27c2e46be322__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.182.121
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['8491', '8492', '8493', '8494', '8495']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 8491:8491 -p 8492:8492 -p 8493:8493 -p 8494:8494 -p 8495:8495 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=8493 --rest-port=8491 --tcp-port=8492 --discv5-udp-port=8494 --rest-address=0.0.0.0 --nat=extip:172.18.182.121 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1ce6171c97788daf608daaffd71cace51ef61cd4619354fbc24d15de5dd952aa --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QBvKu84kPAdEGNOlffbpDE874v-nVxXuKheZABGX08hBBQssRwHZZrTYFlAOx5stW5cnC8tf68kZHOMZNYkxb_QCgmlkgnY0gmlwhKwSRZiKbXVsdGlhZGRyc5YACASsEkWYBrN8AAoErBJFmAazfd0DgnJzhQADAQAAiXNlY3AyNTZrMaECi4Jg7NW1nfHgk9e4rbfjT7DIs6MPSfxZo_vesktbLsyDdGNwgrN8g3VkcIKzfoV3YWt1MgM --storenode=/ip4/172.18.69.152/tcp/45948/p2p/16Uiu2HAm4pFxVGoodsCRtYx2cZRUkyAyEEsUR45rdnMQRy6nCd5m --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.182.121 waku d4cea96c54b29f2cd312c2a62773189ca435959d7cce45abad0656c99e48eb05
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID d4cea96c54b2. Setting up logs at ./log/docker/store_node1_2025-02-01_03-13-25__57cf1d55-2665-40ba-b584-27c2e46be322__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 8491
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8491/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QDBLVhM4nD9tH2smcuviLxTFmBesvv5tPfkhYaNuc0hSesRwLqWrlXeh-r42j23ZIN-wY1HqR_pJuc8jksV1weSGAZS_f71UgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaEDnS5L-I66l7oBmJhSQ97MtpWXgVFTdqItJBXcfFF1giiDdGNwgiEsg3VkcIIhLoV3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/8492/p2p/16Uiu2HAmPEZJbopEh91aGrQn9uHUSHPB9JQU13yyGnxq5dWWf2cw","/ip4/127.0.0.1/tcp/8493/ws/p2p/16Uiu2HAmPEZJbopEh91aGrQn9uHUSHPB9JQU13yyGnxq5dWWf2cw","/ip4/172.17.0.3/tcp/8492/p2p/16Uiu2HAmPEZJbopEh91aGrQn9uHUSHPB9JQU13yyGnxq5dWWf2cw","/ip4/172.17.0.3/tcp/8493/ws/p2p/16Uiu2HAmPEZJbopEh91aGrQn9uHUSHPB9JQU13yyGnxq5dWWf2cw"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8491/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.69.152/tcp/45948/p2p/16Uiu2HAm4pFxVGoodsCRtYx2cZRUkyAyEEsUR45rdnMQRy6nCd5m", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45947/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:8491/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45947/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45947/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xac7b29fa53481db1d903345b2f6126233f38f2f366981d2a8597fff889baaaac"}]}'
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/go-waku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:8491/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"035ea6034e773353e9f71e5ef4096bd779933776b1871efd8e6604e33411340a","status_code":200,"status_desc":"OK","messages":[{"message_hash":"rHsp+lNIHbHZAzRbL2EmIz848vNmmB0qhZf/+Im6qqw="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 6735fb867ecc
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id d4cea96c54b2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:42 Attaching file ./log/docker/publishing_node1_2025-02-01_03-13-25__57cf1d55-2665-40ba-b584-27c2e46be322__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:42 Attaching file ./log/docker/store_node1_2025-02-01_03-13-25__57cf1d55-2665-40ba-b584-27c2e46be322__wakuorg_go-waku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_publishing_node_restarts with id: 2025-02-01_03-13-29__7bc5eaa3-04ab-450e-85f1-475c37660c40
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-01_03-13-29__7bc5eaa3-04ab-450e-85f1-475c37660c40__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.93.196
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['36047', '36048', '36049', '36050', '36051']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 36047:36047 -p 36048:36048 -p 36049:36049 -p 36050:36050 -p 36051:36051 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36049 --rest-port=36047 --tcp-port=36048 --discv5-udp-port=36050 --rest-address=0.0.0.0 --nat=extip:172.18.93.196 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ba1c6a844ec1918df0432992af8cd72bf2b8fcf6aa44541e0de3c59b8d30ad6b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36051 --metrics-logging=true --store=true --relay=true
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 6735fb867ecc. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.93.196 waku fc29ec44ae3fd8e5a1ca0a3bceb384d1a1f04f9e94dd6d3dec2639711b93c177
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID fc29ec44ae3f. Setting up logs at ./log/docker/publishing_node1_2025-02-01_03-13-29__7bc5eaa3-04ab-450e-85f1-475c37660c40__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 36047
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container d4cea96c54b2. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36047/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36047/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.93.196/tcp/36048/p2p/16Uiu2HAmFDpPHJ9befB24FP9p2KVZteyeaG8EXy1aV1byCh1dtHc","/ip4/172.18.93.196/tcp/36049/ws/p2p/16Uiu2HAmFDpPHJ9befB24FP9p2KVZteyeaG8EXy1aV1byCh1dtHc"],"enrUri":"enr:-L24QNSTBtXhLnI6_tQUh6QlEVGt4JDBQZaNpmWFBkUCU6AbPUr4lXTIH4mYRfUtakyGODMgceBGjFLDZpm-0ke3RfoCgmlkgnY0gmlwhKwSXcSKbXVsdGlhZGRyc5YACASsEl3EBozQAAoErBJdxAaM0d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDJiBFuJlMmmIxxskId7xCMG497zleHBg-0xd63UfSm0-DdGNwgozQg3VkcIKM0oV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-01_03-13-29__7bc5eaa3-04ab-450e-85f1-475c37660c40__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.34.121
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['18223', '18224', '18225', '18226', '18227']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 18223:18223 -p 18224:18224 -p 18225:18225 -p 18226:18226 -p 18227:18227 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=18225 --rest-port=18223 --tcp-port=18224 --discv5-udp-port=18226 --rest-address=0.0.0.0 --nat=extip:172.18.34.121 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=56412b0ebdeb1e07acc15cfac37dcbceafead209798be6c3ccaead1edbad8f58 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QNSTBtXhLnI6_tQUh6QlEVGt4JDBQZaNpmWFBkUCU6AbPUr4lXTIH4mYRfUtakyGODMgceBGjFLDZpm-0ke3RfoCgmlkgnY0gmlwhKwSXcSKbXVsdGlhZGRyc5YACASsEl3EBozQAAoErBJdxAaM0d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDJiBFuJlMmmIxxskId7xCMG497zleHBg-0xd63UfSm0-DdGNwgozQg3VkcIKM0oV3YWt1MgM --storenode=/ip4/172.18.93.196/tcp/36048/p2p/16Uiu2HAmFDpPHJ9befB24FP9p2KVZteyeaG8EXy1aV1byCh1dtHc --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.34.121 waku ab9bcb2549cac6568fc992b999d61cd94344ff774bd112956b63f4301cbb4e28
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID ab9bcb2549ca. Setting up logs at ./log/docker/store_node1_2025-02-01_03-13-29__7bc5eaa3-04ab-450e-85f1-475c37660c40__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 18223
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18223/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QGMYyhkNMobWfDkEM4KSDn5jADkSuBUJY1grxaiddjaHPiRkJBDU-mfwwj8y04rt6R9KU03vb04u5ibbyZh_hgyGAZS_f81kgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaED4AO1QmRC47vb_hQwO4pPZalInx3ydznjKhCA7YzjfMODdGNwgkcwg3VkcIJHMoV3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/18224/p2p/16Uiu2HAmTjSxJeo4RZJaDgJJG8cjB6iXmVdde9Dj2iH9LfsBe2E6","/ip4/127.0.0.1/tcp/18225/ws/p2p/16Uiu2HAmTjSxJeo4RZJaDgJJG8cjB6iXmVdde9Dj2iH9LfsBe2E6","/ip4/172.17.0.3/tcp/18224/p2p/16Uiu2HAmTjSxJeo4RZJaDgJJG8cjB6iXmVdde9Dj2iH9LfsBe2E6","/ip4/172.17.0.3/tcp/18225/ws/p2p/16Uiu2HAmTjSxJeo4RZJaDgJJG8cjB6iXmVdde9Dj2iH9LfsBe2E6"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18223/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.93.196/tcp/36048/p2p/16Uiu2HAmFDpPHJ9befB24FP9p2KVZteyeaG8EXy1aV1byCh1dtHc", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36047/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:18223/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36047/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36047/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x04c43c368b80598de5b0ccb86e02b85c8a63ead2500648f03f0e74985cf3ad5c"}]}'
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/go-waku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:18223/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"b5384045b489c2a343a3a721a8c6e0da5b5886c72760e34befce37c9a0db0e86","status_code":200,"status_desc":"OK","messages":[{"message_hash":"BMQ8NouAWY3lsMy4bgK4XIpj6tJQBkjwPw50mFzzrVw="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id fc29ec44ae3f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id ab9bcb2549ca
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:42 Attaching file ./log/docker/store_node1_2025-02-01_03-13-29__7bc5eaa3-04ab-450e-85f1-475c37660c40__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:42 Attaching file ./log/docker/publishing_node1_2025-02-01_03-13-29__7bc5eaa3-04ab-450e-85f1-475c37660c40__wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_publishing_node_restarts with id: 2025-02-01_03-13-34__cd6689ea-1aa9-41ea-97a2-1ae7327298ab
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-01_03-13-34__cd6689ea-1aa9-41ea-97a2-1ae7327298ab__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.82.18
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['11356', '11357', '11358', '11359', '11360']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 11356:11356 -p 11357:11357 -p 11358:11358 -p 11359:11359 -p 11360:11360 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=11358 --rest-port=11356 --tcp-port=11357 --discv5-udp-port=11359 --rest-address=0.0.0.0 --nat=extip:172.18.82.18 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=edfda33646ff541ea87b8ad0d64da9d8d9aa8ee6b0a892bedeea7a34a03bb35c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=11360 --metrics-logging=true --store=true --relay=true
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container fc29ec44ae3f. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.82.18 waku 9031aa7364830e9b25f369ffe5f094f07980f92d1fe256e54d9978ab2efce629
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 9031aa736483. Setting up logs at ./log/docker/publishing_node1_2025-02-01_03-13-34__cd6689ea-1aa9-41ea-97a2-1ae7327298ab__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 11356
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container ab9bcb2549ca. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11356/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11356/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.82.18/tcp/11357/p2p/16Uiu2HAkwKzd8p1WXMap83DYZubwpycVHrBH3HcmrxeohJiZnKnE","/ip4/172.18.82.18/tcp/11358/ws/p2p/16Uiu2HAkwKzd8p1WXMap83DYZubwpycVHrBH3HcmrxeohJiZnKnE"],"enrUri":"enr:-L24QJyIJN_UGg9hzbl90idOKLli9wt-zjNBfFV_-1ceAPvlYXDncfBLGV1ge7I29iGZJGnADLYRmcPU5HsS3BH0TOMCgmlkgnY0gmlwhKwSUhKKbXVsdGlhZGRyc5YACASsElISBixdAAoErBJSEgYsXt0DgnJzhQADAQAAiXNlY3AyNTZrMaECHEL4Ol2r-HGioBywWjZmMv0YWJQqCkxdrcjj0uMBaq-DdGNwgixdg3VkcIIsX4V3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-01_03-13-34__cd6689ea-1aa9-41ea-97a2-1ae7327298ab__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.91.100
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['51635', '51636', '51637', '51638', '51639']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 51635:51635 -p 51636:51636 -p 51637:51637 -p 51638:51638 -p 51639:51639 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=51637 --rest-port=51635 --tcp-port=51636 --discv5-udp-port=51638 --rest-address=0.0.0.0 --nat=extip:172.18.91.100 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fbc0b05abcfc7e5ded61f8ffdfcff195b851da4ee11bf786bb43ccc6c0f99efc --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QJyIJN_UGg9hzbl90idOKLli9wt-zjNBfFV_-1ceAPvlYXDncfBLGV1ge7I29iGZJGnADLYRmcPU5HsS3BH0TOMCgmlkgnY0gmlwhKwSUhKKbXVsdGlhZGRyc5YACASsElISBixdAAoErBJSEgYsXt0DgnJzhQADAQAAiXNlY3AyNTZrMaECHEL4Ol2r-HGioBywWjZmMv0YWJQqCkxdrcjj0uMBaq-DdGNwgixdg3VkcIIsX4V3YWt1MgM --storenode=/ip4/172.18.82.18/tcp/11357/p2p/16Uiu2HAkwKzd8p1WXMap83DYZubwpycVHrBH3HcmrxeohJiZnKnE --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.91.100 waku 222def7996454db36a1c4202570b4739b87d9d99b73cc58bb617dabff0a83df8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 222def799645. Setting up logs at ./log/docker/store_node1_2025-02-01_03-13-34__cd6689ea-1aa9-41ea-97a2-1ae7327298ab__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 51635
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51635/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QK_UIaOV-zi_uh_NApeTHsj2iQoEZAXfAshRCdBuEF66OQoPBBmQ3VTd_fXMz6a7wnszI0mCjDR6eZpRCluOHQyGAZS_f92EgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaEDmXx8Rc4TpQLYEiaU1nrQhXS2Iz8tHl7YX6s6x6PKlOqDdGNwgsm0g3VkcILJtoV3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/51636/p2p/16Uiu2HAmNz8pjzD2ui2Qq8PAFesnodwT5XFpEUGVaikF43TuWkuF","/ip4/127.0.0.1/tcp/51637/ws/p2p/16Uiu2HAmNz8pjzD2ui2Qq8PAFesnodwT5XFpEUGVaikF43TuWkuF","/ip4/172.17.0.3/tcp/51636/p2p/16Uiu2HAmNz8pjzD2ui2Qq8PAFesnodwT5XFpEUGVaikF43TuWkuF","/ip4/172.17.0.3/tcp/51637/ws/p2p/16Uiu2HAmNz8pjzD2ui2Qq8PAFesnodwT5XFpEUGVaikF43TuWkuF"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51635/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.82.18/tcp/11357/p2p/16Uiu2HAkwKzd8p1WXMap83DYZubwpycVHrBH3HcmrxeohJiZnKnE", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11356/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51635/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:11356/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:11356/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x68c73e5c5dc05553d9176a4a7b8086e745e3751cf22ad571b68ddeee474dfa14"}]}'
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/go-waku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51635/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"fa2f68051f7d92c1a13fa8c700bbbf77bdfa7c88fc92f1e92a88895373cd53c9","status_code":200,"status_desc":"OK","messages":[{"message_hash":"aMc+XF3AVVPZF2pKe4CG50XjdRzyKtVxto3e7kdN+hQ="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 9031aa736483
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 222def799645
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:42 Attaching file ./log/docker/store_node1_2025-02-01_03-13-34__cd6689ea-1aa9-41ea-97a2-1ae7327298ab__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:42 Attaching file ./log/docker/publishing_node1_2025-02-01_03-13-34__cd6689ea-1aa9-41ea-97a2-1ae7327298ab__wakuorg_nwaku:latest.log