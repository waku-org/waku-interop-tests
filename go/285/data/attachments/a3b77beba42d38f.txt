[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_invalid_timestamps with id: 2024-09-20_03-19-02__b0f75cf8-dd99-4977-9305-ed4ff333acc3
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-20_03-19-02__b0f75cf8-dd99-4977-9305-ed4ff333acc3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.76.56
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['9444', '9445', '9446', '9447', '9448']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 9444:9444 -p 9445:9445 -p 9446:9446 -p 9447:9447 -p 9448:9448 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=9446 --rest-port=9444 --tcp-port=9445 --discv5-udp-port=9447 --rest-address=0.0.0.0 --nat=extip:172.18.76.56 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=86ebf71dc6fc1fbae29d42006de0ee9c09bbfea9a1fa25ebb48f6344ab8eafbb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=9448 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.76.56 waku 4b41a912035331715b218d08f584f32821c8adf9138f856b26700477c0f45cc9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 4b41a9120353. Setting up logs at ./log/docker/receiving_node1_2024-09-20_03-19-02__b0f75cf8-dd99-4977-9305-ed4ff333acc3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 9444
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9444/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9444/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.76.56/tcp/9445/p2p/16Uiu2HAmBXTjGv4kHJdru2HBQwmmM3VupvXu5Bs1gmDMABoSfLxW","/ip4/172.18.76.56/tcp/9446/ws/p2p/16Uiu2HAmBXTjGv4kHJdru2HBQwmmM3VupvXu5Bs1gmDMABoSfLxW"],"enrUri":"enr:-LO4QMVfm8jn1Sb-ILFuC8pZxtYeSzBRrcuXpZnYZqE5lU2pFfuH7KniBqPuemiS7yqA8rGSMgLqa1ktTUWV2t0XzyABgmlkgnY0gmlwhKwSTDiKbXVsdGlhZGRyc4wACgSsEkw4BiTm3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLvNp_Lk0g3R6Nl6Yo1sVURjdGC20_8h5Ni7dWqOs2Cf4N0Y3CCJOWDdWRwgiTnhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-20_03-19-02__b0f75cf8-dd99-4977-9305-ed4ff333acc3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.64.97
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['5102', '5103', '5104', '5105', '5106']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 5102:5102 -p 5103:5103 -p 5104:5104 -p 5105:5105 -p 5106:5106 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=5104 --rest-port=5102 --tcp-port=5103 --discv5-udp-port=5105 --rest-address=0.0.0.0 --nat=extip:172.18.64.97 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=debbcdece01ee3ec23f991ffae621e7a4b83fafedee09986db89ad2a8535f838 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=5106 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.64.97 waku c77698e3ada0bd769fb295135e71f257864a95f9c4c97f5fe2563caab91ef461
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID c77698e3ada0. Setting up logs at ./log/docker/receiving_node2_2024-09-20_03-19-02__b0f75cf8-dd99-4977-9305-ed4ff333acc3__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 5102
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5102/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:5102/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.64.97/tcp/5103/p2p/16Uiu2HAmSiHBstFeWcDoLyMdGJgxW5tpZos1jgVM8VN8sYah1h3N","/ip4/172.18.64.97/tcp/5104/ws/p2p/16Uiu2HAmSiHBstFeWcDoLyMdGJgxW5tpZos1jgVM8VN8sYah1h3N"],"enrUri":"enr:-LO4QOUkNPIGDWIQ3916w59QWm8UfSdFImXGvA1HQWeOGwCcO2I1c6vqGMJ5U7_h4lbEIzLIskfLkWFCC4zsolblmHMBgmlkgnY0gmlwhKwSQGGKbXVsdGlhZGRyc4wACgSsEkBhBhPw3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPQ22XbONFQouJKSZXhM2ccRNRBLpMkWpfv_ULwylbiCYN0Y3CCE--DdWRwghPxhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5102/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.76.56/tcp/9445/p2p/16Uiu2HAmBXTjGv4kHJdru2HBQwmmM3VupvXu5Bs1gmDMABoSfLxW"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-20_03-19-02__b0f75cf8-dd99-4977-9305-ed4ff333acc3__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.8.70
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['13361', '13362', '13363', '13364', '13365']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 13361:13361 -p 13362:13362 -p 13363:13363 -p 13364:13364 -p 13365:13365 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=13363 --rest-port=13361 --tcp-port=13362 --discv5-udp-port=13364 --rest-address=0.0.0.0 --nat=extip:172.18.8.70 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fda04dfaf3bdf5c6494d99cf6411b06adc4ca474b40f1a07fa6fd4ab453c5b5f --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-LO4QMVfm8jn1Sb-ILFuC8pZxtYeSzBRrcuXpZnYZqE5lU2pFfuH7KniBqPuemiS7yqA8rGSMgLqa1ktTUWV2t0XzyABgmlkgnY0gmlwhKwSTDiKbXVsdGlhZGRyc4wACgSsEkw4BiTm3QOCcnOFAAMBAACJc2VjcDI1NmsxoQLvNp_Lk0g3R6Nl6Yo1sVURjdGC20_8h5Ni7dWqOs2Cf4N0Y3CCJOWDdWRwgiTnhXdha3UyCQ --lightpushnode=/ip4/172.18.76.56/tcp/9445/p2p/16Uiu2HAmBXTjGv4kHJdru2HBQwmmM3VupvXu5Bs1gmDMABoSfLxW --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.8.70 waku edb94e205769efb8c62ece4051dad9f0ecd262be80659a0ca166f78b477ab050
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID edb94e205769. Setting up logs at ./log/docker/lightpush_node1_2024-09-20_03-19-02__b0f75cf8-dd99-4977-9305-ed4ff333acc3__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 13361
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13361/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QKcE4sJamEfGRF8ikXwbsLTv_c0RslaHlgDcPz-Y2CP-U6bYUWo2pGKNIqek345Xx0vavtfreWoSErl9GQcPgvyGAZINcMLwgmlkgnY0gmlwhKwRAAaJc2VjcDI1NmsxoQPniOzfsVxo1xzfK9aYQ2TxT-3jkxF66UccoebmeqKMnoN0Y3CCNDKDdWRwgjQ0hXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/13362/p2p/16Uiu2HAmUEodGte9qCTGCbGP7pZJX2MUSgeZn1CmaYtbcqNVJSJy","/ip4/127.0.0.1/tcp/13363/ws/p2p/16Uiu2HAmUEodGte9qCTGCbGP7pZJX2MUSgeZn1CmaYtbcqNVJSJy","/ip4/172.17.0.6/tcp/13362/p2p/16Uiu2HAmUEodGte9qCTGCbGP7pZJX2MUSgeZn1CmaYtbcqNVJSJy","/ip4/172.17.0.6/tcp/13363/ws/p2p/16Uiu2HAmUEodGte9qCTGCbGP7pZJX2MUSgeZn1CmaYtbcqNVJSJy"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13361/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.76.56/tcp/9445/p2p/16Uiu2HAmBXTjGv4kHJdru2HBQwmmM3VupvXu5Bs1gmDMABoSfLxW", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13361/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.64.97/tcp/5103/p2p/16Uiu2HAmSiHBstFeWcDoLyMdGJgxW5tpZos1jgVM8VN8sYah1h3N", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9444/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:5102/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:171 Running test with timestamp Timestamp as string number
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13361/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": "1726802024999928832"}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:13361/lightpush/v1/message. Response content: b''
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:171 Running test with timestamp Invalid large number
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13361/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 9223372036854775808}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:13361/lightpush/v1/message. Response content: b''
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:171 Running test with timestamp Float number
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13361/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1.7268020249999316e+18}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:13361/lightpush/v1/message. Response content: b''
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:171 Running test with timestamp Array instead of timestamp
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13361/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": [1726802024999934720]}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:13361/lightpush/v1/message. Response content: b''
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:171 Running test with timestamp Object instead of timestamp
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13361/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": {"time": 1726802024999936000}}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:13361/lightpush/v1/message. Response content: b''
[35mDEBUG   [0m tests.light_push.test_publish:test_publish.py:171 Running test with timestamp ISO 8601 timestamp
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13361/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": "2023-12-26T10:58:51"}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:13361/lightpush/v1/message. Response content: b''
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 4b41a9120353
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id c77698e3ada0
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id edb94e205769
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.