{"uid":"65f92cf6cf8ebeaf","name":"test_publish_after_node2_restarts","fullName":"tests.relay.test_publish.TestRelayPublish#test_publish_after_node2_restarts","historyId":"719105ca16b4bcf069d86d819d499912","time":{"start":1721633356441,"stop":1721633359443,"duration":3002},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"set_allure_env_variables","time":{"start":1721632829792,"stop":1721632829792,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail","time":{"start":1721633351460,"stop":1721633351460,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes","time":{"start":1721633351460,"stop":1721633351460,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"relay_setup","time":{"start":1721633351461,"stop":1721633351461,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"common_setup","time":{"start":1721633351461,"stop":1721633351461,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_main_relay_nodes","time":{"start":1721633351461,"stop":1721633355202,"duration":3741},"status":"passed","steps":[{"name":"add_node_peer","time":{"start":1721633355192,"stop":1721633355202,"duration":10},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"args","value":"(<tests.relay.test_publish.TestRelayPublish object at 0x7f98972b95b0>, <src.node.waku_node.WakuNode object at 0x7f98972b9850>, ['/ip4/172.18.142.94/tcp/5168/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip'])"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"test_id","time":{"start":1721633351461,"stop":1721633351461,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_setup","time":{"start":1721633351461,"stop":1721633351461,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"subscribe_main_relay_nodes","time":{"start":1721633355203,"stop":1721633355214,"duration":11},"status":"passed","steps":[{"name":"ensure_relay_subscriptions_on_nodes","time":{"start":1721633355203,"stop":1721633355214,"duration":11},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node_list","value":"[<src.node.waku_node.WakuNode object at 0x7f98964c0f50>, <src.node.waku_node.WakuNode object at 0x7f98972b9850>]"},{"name":"pubsub_topic_list","value":"['/waku/2/rs/3/1']"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"relay_warm_up","time":{"start":1721633355214,"stop":1721633356440,"duration":1226},"status":"passed","steps":[{"name":"wait_for_published_message_to_reach_relay_peer","time":{"start":1721633355214,"stop":1721633356440,"duration":1226},"status":"passed","steps":[{"name":"check_published_message_reaches_relay_peer","time":{"start":1721633355215,"stop":1721633355324,"duration":109},"status":"failed","statusMessage":"AssertionError: Peer NODE_2:harbor.status.im/wakuorg/go-waku:latest couldn't find any messages\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.4/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/relay.py\", line 126, in check_published_message_reaches_relay_peer\n    assert get_messages_response, f\"Peer NODE_{index + 1}:{peer.image} couldn't find any messages\"\n           ^^^^^^^^^^^^^^^^^^^^^\n","steps":[{"name":"assert_received_message","time":{"start":1721633355321,"stop":1721633355321,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1721633355214504448}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1721633355214504448}"},{"name":"pubsub_topic","value":"None"},{"name":"message_propagation_delay","value":"0.1"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":true,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"check_published_message_reaches_relay_peer","time":{"start":1721633356325,"stop":1721633356440,"duration":115},"status":"passed","steps":[{"name":"assert_received_message","time":{"start":1721633356436,"stop":1721633356436,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1721633356324704000}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"assert_received_message","time":{"start":1721633356440,"stop":1721633356440,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1721633356324704000}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1721633356324704000}"},{"name":"pubsub_topic","value":"None"},{"name":"message_propagation_delay","value":"0.1"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"timeout_duration","value":"120"},{"name":"time_between_retries","value":"1"},{"name":"pubsub_topic","value":"None"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":false,"stepsCount":5,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":6,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"testStage":{"status":"passed","steps":[{"name":"check_published_message_reaches_relay_peer","time":{"start":1721633356441,"stop":1721633356556,"duration":115},"status":"passed","steps":[{"name":"create_message","time":{"start":1721633356441,"stop":1721633356441,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"assert_received_message","time":{"start":1721633356549,"stop":1721633356549,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1721633356440983296}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"assert_received_message","time":{"start":1721633356555,"stop":1721633356556,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1721633356440983296}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"message","value":"None"},{"name":"pubsub_topic","value":"None"},{"name":"message_propagation_delay","value":"0.1"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"ensure_relay_subscriptions_on_nodes","time":{"start":1721633358215,"stop":1721633358219,"duration":4},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"node_list","value":"[<src.node.waku_node.WakuNode object at 0x7f98964c0f50>, <src.node.waku_node.WakuNode object at 0x7f98972b9850>]"},{"name":"pubsub_topic_list","value":"['/waku/2/rs/3/1']"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"wait_for_published_message_to_reach_relay_peer","time":{"start":1721633358219,"stop":1721633359442,"duration":1223},"status":"passed","steps":[{"name":"check_published_message_reaches_relay_peer","time":{"start":1721633358220,"stop":1721633358329,"duration":109},"status":"failed","statusMessage":"AssertionError: Peer NODE_2:harbor.status.im/wakuorg/go-waku:latest couldn't find any messages\n","statusTrace":"  File \"/opt/hostedtoolcache/Python/3.12.4/x64/lib/python3.12/site-packages/allure_commons/_allure.py\", line 192, in impl\n    return func(*a, **kw)\n           ^^^^^^^^^^^^^^\n  File \"/home/runner/work/waku-interop-tests/waku-interop-tests/src/steps/relay.py\", line 126, in check_published_message_reaches_relay_peer\n    assert get_messages_response, f\"Peer NODE_{index + 1}:{peer.image} couldn't find any messages\"\n           ^^^^^^^^^^^^^^^^^^^^^\n","steps":[{"name":"assert_received_message","time":{"start":1721633358327,"stop":1721633358327,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1721633358219554304}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1721633358219554304}"},{"name":"pubsub_topic","value":"None"},{"name":"message_propagation_delay","value":"0.1"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":true,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"check_published_message_reaches_relay_peer","time":{"start":1721633359330,"stop":1721633359442,"duration":112},"status":"passed","steps":[{"name":"assert_received_message","time":{"start":1721633359438,"stop":1721633359438,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1721633359329676288}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"assert_received_message","time":{"start":1721633359442,"stop":1721633359442,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"sent_message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1721633359329676288}"},{"name":"index","value":"0"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"message","value":"{'payload': 'UmVsYXkgd29ya3MhIQ==', 'contentTopic': '/test/1/waku-relay/proto', 'timestamp': 1721633359329676288}"},{"name":"pubsub_topic","value":"None"},{"name":"message_propagation_delay","value":"0.1"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":false,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[{"name":"timeout_duration","value":"120"},{"name":"time_between_retries","value":"1"},{"name":"pubsub_topic","value":"None"},{"name":"sender","value":"None"},{"name":"peer_list","value":"None"}],"shouldDisplayMessage":false,"stepsCount":5,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"feef02cf63f35ba3","name":"log","source":"feef02cf63f35ba3.txt","type":"text/plain","size":21164}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":11,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"test_setup::0","time":{"start":1721633359444,"stop":1721633359447,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"close_open_nodes::0","time":{"start":1721633359448,"stop":1721633362338,"duration":2890},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"attach_logs_on_fail::0","time":{"start":1721633362339,"stop":1721633362339,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"set_allure_env_variables::0","time":{"start":1721633842144,"stop":1721633842144,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"@pytest.mark.usefixtures('setup_main_relay_nodes', 'subscribe_main_relay_nodes', 'relay_warm_up')"},{"name":"parentSuite","value":"tests.relay"},{"name":"suite","value":"test_publish"},{"name":"subSuite","value":"TestRelayPublish"},{"name":"host","value":"fv-az1391-45"},{"name":"thread","value":"2077-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.relay.test_publish"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[],"history":{"statistic":{"failed":0,"broken":7,"skipped":0,"passed":226,"unknown":0,"total":233},"items":[{"uid":"26edb964fa5eb3b3","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/214//#testresult/26edb964fa5eb3b3","status":"passed","time":{"start":1721618403998,"stop":1721618406844,"duration":2846}},{"uid":"7025fa8cb60d1ad1","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/213//#testresult/7025fa8cb60d1ad1","status":"passed","time":{"start":1721532001536,"stop":1721532004339,"duration":2803}},{"uid":"22e7f4b0b1ebfa6","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/212//#testresult/22e7f4b0b1ebfa6","status":"passed","time":{"start":1721445598621,"stop":1721445601863,"duration":3242}},{"uid":"3d195e0b6fc44abd","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/211//#testresult/3d195e0b6fc44abd","status":"passed","time":{"start":1721359219931,"stop":1721359223181,"duration":3250}},{"uid":"ab1992bde2d90438","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/210//#testresult/ab1992bde2d90438","status":"passed","time":{"start":1721290583933,"stop":1721290586788,"duration":2855}},{"uid":"bde16c132c962b87","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/209//#testresult/bde16c132c962b87","status":"passed","time":{"start":1721272811172,"stop":1721272814650,"duration":3478}},{"uid":"767747451069cf98","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/208//#testresult/767747451069cf98","status":"passed","time":{"start":1721186453951,"stop":1721186457349,"duration":3398}},{"uid":"f04f7d5de648f9c6","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/207//#testresult/f04f7d5de648f9c6","status":"passed","time":{"start":1721112754653,"stop":1721112758259,"duration":3606}},{"uid":"bd4b9dacf081720d","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/206//#testresult/bd4b9dacf081720d","status":"passed","time":{"start":1721100208470,"stop":1721100211415,"duration":2945}},{"uid":"d95a03ae6117fb33","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/205//#testresult/d95a03ae6117fb33","status":"passed","time":{"start":1721057899263,"stop":1721057902195,"duration":2932}},{"uid":"b3cc79b13a22fd77","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/204//#testresult/b3cc79b13a22fd77","status":"passed","time":{"start":1721049545053,"stop":1721049548010,"duration":2957}},{"uid":"fb51a9a8e7c9cf39","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/203//#testresult/fb51a9a8e7c9cf39","status":"passed","time":{"start":1721027312800,"stop":1721027316530,"duration":3730}},{"uid":"bbf626d72f3a8d04","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/202//#testresult/bbf626d72f3a8d04","status":"passed","time":{"start":1721013687871,"stop":1721013692450,"duration":4579}},{"uid":"b5900f80bbb25c26","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/201//#testresult/b5900f80bbb25c26","status":"passed","time":{"start":1720927305878,"stop":1720927309432,"duration":3554}},{"uid":"d0b16734ac503eb7","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/200//#testresult/d0b16734ac503eb7","status":"passed","time":{"start":1720840785984,"stop":1720840788845,"duration":2861}},{"uid":"b5cff7164723e276","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/199//#testresult/b5cff7164723e276","status":"passed","time":{"start":1720810307757,"stop":1720810311954,"duration":4197}},{"uid":"9b33a2c9ffdd528c","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/198//#testresult/9b33a2c9ffdd528c","status":"passed","time":{"start":1720754432131,"stop":1720754436004,"duration":3873}},{"uid":"52d38aced6e719db","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/197//#testresult/52d38aced6e719db","status":"passed","time":{"start":1720712131999,"stop":1720712134952,"duration":2953}},{"uid":"653058cbd6bb229f","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/196//#testresult/653058cbd6bb229f","status":"passed","time":{"start":1720708349666,"stop":1720708353752,"duration":4086}},{"uid":"650fc9d8f1f08d67","reportUrl":"https://waku-org.github.io/waku-interop-tests/go/193//#testresult/650fc9d8f1f08d67","status":"passed","time":{"start":1720527659587,"stop":1720527662559,"duration":2972}}]},"tags":["@pytest.mark.usefixtures('setup_main_relay_nodes', 'subscribe_main_relay_nodes', 'relay_warm_up')"]},"source":"65f92cf6cf8ebeaf.json","parameterValues":[]}