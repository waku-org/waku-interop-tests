[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_lightpush with id: 2024-11-04_03-10-38__2fa270cd-e8b1-4a52-997d-946556cc9dd5
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-04_03-10-38__2fa270cd-e8b1-4a52-997d-946556cc9dd5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.131.85
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['51950', '51951', '51952', '51953', '51954']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 51950:51950 -p 51951:51951 -p 51952:51952 -p 51953:51953 -p 51954:51954 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=51952 --rest-port=51950 --tcp-port=51951 --discv5-udp-port=51953 --rest-address=0.0.0.0 --nat=extip:172.18.131.85 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6fc4dafe2655ff8bdc4fbdc0c38fdf2c6bf37d5cf7b57aa7ceab75fd2fedebb5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=51954 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.131.85 waku d65586c4c88f38bebc9c65787759e14335cb29cceaabdefcc75f1855cd21078d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID d65586c4c88f. Setting up logs at ./log/docker/node1_2024-11-04_03-10-38__2fa270cd-e8b1-4a52-997d-946556cc9dd5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 51950
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 61bb21d36a59. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51950/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51950/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.131.85/tcp/51951/p2p/16Uiu2HAmKMKVGtDtNYtgrZJYRo8EvMx2LVkgUqqLqwd8yJ2owxVy","/ip4/172.18.131.85/tcp/51952/ws/p2p/16Uiu2HAmKMKVGtDtNYtgrZJYRo8EvMx2LVkgUqqLqwd8yJ2owxVy"],"enrUri":"enr:-L24QM2nMmI0SVPkI8kvk9Cake5vlcdOaIVREDrMwHStaVmJPxOcBzvNtppnz-C3z_wVIx8uy6K9sD2XK2oW_etrW4gCgmlkgnY0gmlwhKwSg1WKbXVsdGlhZGRyc5YACASsEoNVBsrvAAoErBKDVQbK8N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDY3r-MhzeIiVxz38m7g-VQPvMdvnFJkV0x9T1ylBwGXyDdGNwgsrvg3VkcILK8YV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-04_03-10-38__2fa270cd-e8b1-4a52-997d-946556cc9dd5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.55.105
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['64250', '64251', '64252', '64253', '64254']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 64250:64250 -p 64251:64251 -p 64252:64252 -p 64253:64253 -p 64254:64254 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64252 --rest-port=64250 --tcp-port=64251 --discv5-udp-port=64253 --rest-address=0.0.0.0 --nat=extip:172.18.55.105 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ea0dfebe1363a981113dc005a9bf6aeefabafb6d08f4b3b9ec89b0baf9fc8acc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64254 --metrics-logging=true --lightpush=false --relay=true --discv5-bootstrap-node=enr:-L24QM2nMmI0SVPkI8kvk9Cake5vlcdOaIVREDrMwHStaVmJPxOcBzvNtppnz-C3z_wVIx8uy6K9sD2XK2oW_etrW4gCgmlkgnY0gmlwhKwSg1WKbXVsdGlhZGRyc5YACASsEoNVBsrvAAoErBKDVQbK8N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDY3r-MhzeIiVxz38m7g-VQPvMdvnFJkV0x9T1ylBwGXyDdGNwgsrvg3VkcILK8YV3YWt1Mgk
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.55.105 waku 858d200e84c64d8ee65b9a3abbc8e7a633899ba6b1e0cac8df71f4844ada3022
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 858d200e84c6. Setting up logs at ./log/docker/node1_2024-11-04_03-10-38__2fa270cd-e8b1-4a52-997d-946556cc9dd5__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 64250
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64250/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64250/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.55.105/tcp/64251/p2p/16Uiu2HAmErHi27TF5YHUYZM9RnFz3KasHqyxUivpa63G8XbrDv7D","/ip4/172.18.55.105/tcp/64252/ws/p2p/16Uiu2HAmErHi27TF5YHUYZM9RnFz3KasHqyxUivpa63G8XbrDv7D"],"enrUri":"enr:-L24QATaGCMlXWnc01jGWfeBW2b5dEeKIflyzlnzsXslwRlLa4YJwHlKlZ0DcJcZnxm4iyT0guq_NlbKjQEivOywUUYCgmlkgnY0gmlwhKwSN2mKbXVsdGlhZGRyc5YACASsEjdpBvr7AAoErBI3aQb6_N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDIJxji1WOagZIVyaOdHIXCLKzAQmJQAeZ7IkvubZFZwyDdGNwgvr7g3VkcIL6_YV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-11-04_03-10-38__2fa270cd-e8b1-4a52-997d-946556cc9dd5__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.43.66
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['49030', '49031', '49032', '49033', '49034']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 49030:49030 -p 49031:49031 -p 49032:49032 -p 49033:49033 -p 49034:49034 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=49032 --rest-port=49030 --tcp-port=49031 --discv5-udp-port=49033 --rest-address=0.0.0.0 --nat=extip:172.18.43.66 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ac840b4caa6e6ff42aafa9d440b0c1feedd07be2e3deacad4ed25f3f3d3fb1b2 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --lightpush=true --relay=false --discv5-bootstrap-node=enr:-L24QM2nMmI0SVPkI8kvk9Cake5vlcdOaIVREDrMwHStaVmJPxOcBzvNtppnz-C3z_wVIx8uy6K9sD2XK2oW_etrW4gCgmlkgnY0gmlwhKwSg1WKbXVsdGlhZGRyc5YACASsEoNVBsrvAAoErBKDVQbK8N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDY3r-MhzeIiVxz38m7g-VQPvMdvnFJkV0x9T1ylBwGXyDdGNwgsrvg3VkcILK8YV3YWt1Mgk --lightpushnode=/ip4/172.18.131.85/tcp/51951/p2p/16Uiu2HAmKMKVGtDtNYtgrZJYRo8EvMx2LVkgUqqLqwd8yJ2owxVy
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.43.66 waku c3971ffd459c9e5e0cc90bd3fa4b7a81e920dcf5e2d62c19858d11c219c415be
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID c3971ffd459c. Setting up logs at ./log/docker/node1_2024-11-04_03-10-38__2fa270cd-e8b1-4a52-997d-946556cc9dd5__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 49030
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:49030/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QDZERxcLlYZ-xAlTfmFQcmHOoLsBq-ORXp-h54R-9N45dKLG4mk9ozPIKy1Z4t0tJgc3XAinmCXpPae_yn2ORMOGAZL1JzpEgmlkgnY0gmlwhKwRAA2Jc2VjcDI1NmsxoQIvxnjpsxRapQA5FyQ_jeq3rxKgVZYhojCfy4drGH144IN0Y3CCv4eDdWRwgr-JhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/49031/p2p/16Uiu2HAkxeAfuuxqB9LMMp221N7WpqQhBJ8CwJymE84uFWaFkbWF","/ip4/127.0.0.1/tcp/49032/ws/p2p/16Uiu2HAkxeAfuuxqB9LMMp221N7WpqQhBJ8CwJymE84uFWaFkbWF","/ip4/172.17.0.13/tcp/49031/p2p/16Uiu2HAkxeAfuuxqB9LMMp221N7WpqQhBJ8CwJymE84uFWaFkbWF","/ip4/172.17.0.13/tcp/49032/ws/p2p/16Uiu2HAkxeAfuuxqB9LMMp221N7WpqQhBJ8CwJymE84uFWaFkbWF"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51950/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64250/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:49030/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": 1730689842794806016}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51950/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1730689842794806016,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64250/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1730689842794806016,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id d65586c4c88f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 858d200e84c6
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container d65586c4c88f. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id c3971ffd459c
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 858d200e84c6. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.