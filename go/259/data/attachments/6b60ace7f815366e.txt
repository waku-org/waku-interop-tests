[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_get_peers_after_node1_was_restarted with id: 2024-08-29_03-20-45__9e7004d5-9eec-4052-8f90-358ded211773
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-08-29_03-20-45__9e7004d5-9eec-4052-8f90-358ded211773__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.112.106
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['47208', '47209', '47210', '47211', '47212']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 47208:47208 -p 47209:47209 -p 47210:47210 -p 47211:47211 -p 47212:47212 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=47210 --rest-port=47208 --tcp-port=47209 --discv5-udp-port=47211 --rest-address=0.0.0.0 --nat=extip:172.18.112.106 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2d5be4de6eff6fafcccf48be077a32265f4d48284f03ca7eedad489c8dc5ec06 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=47212 --metrics-logging=true --relay=true --relay-peer-exchange=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.112.106 waku 47581836ed8b4ab0abf7cdf880f235cddf777d7928ca5fed81fe9e42701e3890
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 47581836ed8b. Setting up logs at ./log/docker/node1_2024-08-29_03-20-45__9e7004d5-9eec-4052-8f90-358ded211773__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 47208
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47208/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47208/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.112.106/tcp/47209/p2p/16Uiu2HAkuV4TKcBgEk5wi6BxrqRTYZRis8v4dTMoM6FpyfiYC8cq","/ip4/172.18.112.106/tcp/47210/ws/p2p/16Uiu2HAkuV4TKcBgEk5wi6BxrqRTYZRis8v4dTMoM6FpyfiYC8cq"],"enrUri":"enr:-LO4QGDanq_G5XPOY4gEnzL7MXlrU0TtIO9L9ejQvJNGBXT-GxnzDZc5uXm9sw_e9l25OnD0l8vtu-ctJNbE3mddtiEBgmlkgnY0gmlwhKwScGqKbXVsdGlhZGRyc4wACgSsEnBqBrhq3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIA3ieRf12kp5VQVeqjtPgtXOI1X1UOhSwKN7cz8UMX4oN0Y3CCuGmDdWRwgrhrhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-08-29_03-20-45__9e7004d5-9eec-4052-8f90-358ded211773__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.42.248
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['31743', '31744', '31745', '31746', '31747']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 31743:31743 -p 31744:31744 -p 31745:31745 -p 31746:31746 -p 31747:31747 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=31745 --rest-port=31743 --tcp-port=31744 --discv5-udp-port=31746 --rest-address=0.0.0.0 --nat=extip:172.18.42.248 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8b2292435fed8abaeaedb3bdf06cc6fcdcdceb8abf07adba2eadbaecb89acef7 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --discv5-bootstrap-node=enr:-LO4QGDanq_G5XPOY4gEnzL7MXlrU0TtIO9L9ejQvJNGBXT-GxnzDZc5uXm9sw_e9l25OnD0l8vtu-ctJNbE3mddtiEBgmlkgnY0gmlwhKwScGqKbXVsdGlhZGRyc4wACgSsEnBqBrhq3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIA3ieRf12kp5VQVeqjtPgtXOI1X1UOhSwKN7cz8UMX4oN0Y3CCuGmDdWRwgrhrhXdha3UyAQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.42.248 waku 5fba35a506aea5b40dd47868105386c722771c5476c82df81a4837822f86932c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 5fba35a506ae. Setting up logs at ./log/docker/node2_2024-08-29_03-20-45__9e7004d5-9eec-4052-8f90-358ded211773__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 31743
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31743/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QGI3CV6EeEPk3YhjNt6MkRYcj7Rcr8tiXThoOSd67AQaJlwXhf07uGw-h8mtHO810tFmWSUm7uS0iqPcEzryfKeGAZGcJmJfgmlkgnY0gmlwhKwRAAOJc2VjcDI1NmsxoQPrkzxZApMlDSVZ4go1VguCU1YjuyDDWyutkNqTbhyD6IN0Y3CCfACDdWRwgnwChXdha3UyAQ","listenAddresses":["/ip4/127.0.0.1/tcp/31744/p2p/16Uiu2HAmUWaNjsj9Z4RG5ukorJiiuoopbwjB2YE6LCNiMXw2VHuq","/ip4/127.0.0.1/tcp/31745/ws/p2p/16Uiu2HAmUWaNjsj9Z4RG5ukorJiiuoopbwjB2YE6LCNiMXw2VHuq","/ip4/172.17.0.3/tcp/31744/p2p/16Uiu2HAmUWaNjsj9Z4RG5ukorJiiuoopbwjB2YE6LCNiMXw2VHuq","/ip4/172.17.0.3/tcp/31745/ws/p2p/16Uiu2HAmUWaNjsj9Z4RG5ukorJiiuoopbwjB2YE6LCNiMXw2VHuq"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31743/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.112.106/tcp/47209/p2p/16Uiu2HAkuV4TKcBgEk5wi6BxrqRTYZRis8v4dTMoM6FpyfiYC8cq", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:47208/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0", "/waku/2/rs/3/1", "/waku/2/rs/3/9", "/waku/2/rs/3/25", "/waku/2/rs/3/1000"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31743/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0", "/waku/2/rs/3/1", "/waku/2/rs/3/9", "/waku/2/rs/3/25", "/waku/2/rs/3/1000"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:47208/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.3/tcp/31744/p2p/16Uiu2HAmUWaNjsj9Z4RG5ukorJiiuoopbwjB2YE6LCNiMXw2VHuq","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[35mDEBUG   [0m src.node.waku_node:waku_node.py:244 Restarting container with id 47581836ed8b
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-08-29_03-20-45__9e7004d5-9eec-4052-8f90-358ded211773__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.19.58
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['58003', '58004', '58005', '58006', '58007']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:431 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 58003:58003 -p 58004:58004 -p 58005:58005 -p 58006:58006 -p 58007:58007 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=58005 --rest-port=58003 --tcp-port=58004 --discv5-udp-port=58006 --rest-address=0.0.0.0 --nat=extip:172.18.19.58 --peer-exchange=true --discv5-discovery=false --cluster-id=3 --nodekey=a0e7b6a77a6be84602a1bcf39dfddfe5e5fdd58e434ce80fcce2c721cbcacc13 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --peer-exchange-node=/ip4/172.17.0.3/tcp/31744/p2p/16Uiu2HAmUWaNjsj9Z4RG5ukorJiiuoopbwjB2YE6LCNiMXw2VHuq
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.19.58 waku 0e3a0828a3d3a739b99d697979ee5c414027432e5ba89e77bbbe93084d3743ec
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 0e3a0828a3d3. Setting up logs at ./log/docker/node3_2024-08-29_03-20-45__9e7004d5-9eec-4052-8f90-358ded211773__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 58003
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58003/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-JG4QPY7QnS3lxn5iksUYcFMMp6bmE7CCsxW6HtX16JKvoaFKWHt1XscR-MwejJG_htwPFNCjn-Zlce9jGHZo6UvAp-GAZGcJnj4gmlkgnY0gmlwhKwRAA2Jc2VjcDI1NmsxoQJu81VFi_icMSRmu384nIS4VroDcyWjaFTs3unTUQonA4N0Y3CC4pSFd2FrdTKA","listenAddresses":["/ip4/127.0.0.1/tcp/58004/p2p/16Uiu2HAm2tn2o9RUBWgw4a8dEPJPwxMdg49BXznhkdeebqakJ4ae","/ip4/127.0.0.1/tcp/58005/ws/p2p/16Uiu2HAm2tn2o9RUBWgw4a8dEPJPwxMdg49BXznhkdeebqakJ4ae","/ip4/172.17.0.13/tcp/58004/p2p/16Uiu2HAm2tn2o9RUBWgw4a8dEPJPwxMdg49BXznhkdeebqakJ4ae","/ip4/172.17.0.13/tcp/58005/ws/p2p/16Uiu2HAm2tn2o9RUBWgw4a8dEPJPwxMdg49BXznhkdeebqakJ4ae"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:58003/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.112.106/tcp/47209/p2p/16Uiu2HAkuV4TKcBgEk5wi6BxrqRTYZRis8v4dTMoM6FpyfiYC8cq", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:58003/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAmUWaNjsj9Z4RG5ukorJiiuoopbwjB2YE6LCNiMXw2VHuq","multiaddrs":["/ip4/172.17.0.3/tcp/31744/p2p/16Uiu2HAmUWaNjsj9Z4RG5ukorJiiuoopbwjB2YE6LCNiMXw2VHuq","/ip4/172.17.0.3/tcp/31745/ws/p2p/16Uiu2HAmUWaNjsj9Z4RG5ukorJiiuoopbwjB2YE6LCNiMXw2VHuq"],"protocols":["/vac/waku/filter-push/2.0.0-beta1","/vac/waku/relay/2.0.0"],"connected":true,"pubsubTopics":["/waku/2/default-waku/proto"]},{"id":"16Uiu2HAkuV4TKcBgEk5wi6BxrqRTYZRis8v4dTMoM6FpyfiYC8cq","multiaddrs":["/ip4/172.18.112.106/tcp/47209/p2p/16Uiu2HAkuV4TKcBgEk5wi6BxrqRTYZRis8v4dTMoM6FpyfiYC8cq","/ip4/172.18.112.106/tcp/47210/ws/p2p/16Uiu2HAkuV4TKcBgEk5wi6BxrqRTYZRis8v4dTMoM6FpyfiYC8cq"],"protocols":["/vac/waku/relay/2.0.0"],"connected":true,"pubsubTopics":["/waku/2/rs/3/2","/waku/2/rs/3/5","/waku/2/rs/3/7","/waku/2/rs/3/8","/waku/2/rs/3/0","/waku/2/rs/3/1","/waku/2/rs/3/3","/waku/2/rs/3/4","/waku/2/rs/3/6"]}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 47581836ed8b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 5fba35a506ae
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 0e3a0828a3d3
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.