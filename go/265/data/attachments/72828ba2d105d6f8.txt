[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_missing_payload with id: 2024-09-02_03-17-57__e9f043af-f40f-4a64-b40d-827331f1a541
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-02_03-17-57__e9f043af-f40f-4a64-b40d-827331f1a541__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.17.143
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['10145', '10146', '10147', '10148', '10149']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 10145:10145 -p 10146:10146 -p 10147:10147 -p 10148:10148 -p 10149:10149 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=10147 --rest-port=10145 --tcp-port=10146 --discv5-udp-port=10148 --rest-address=0.0.0.0 --nat=extip:172.18.17.143 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9c423e27bfdd88e19d82da3f6f45e4ecdedd9613f25437fa19baf4fa5840cad7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=10149 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.17.143 waku 5b3dd7398a643d551e01fcea985a2bddd0f0e14f71ef79a0dedcbc7e6a7a328a
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 5b3dd7398a64. Setting up logs at ./log/docker/receiving_node1_2024-09-02_03-17-57__e9f043af-f40f-4a64-b40d-827331f1a541__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 10145
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10145/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:10145/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.17.143/tcp/10146/p2p/16Uiu2HAkybPTwH9kPN6vcfmt21EUbeMumBzNgfeSVFnb2RAtD7Zg","/ip4/172.18.17.143/tcp/10147/ws/p2p/16Uiu2HAkybPTwH9kPN6vcfmt21EUbeMumBzNgfeSVFnb2RAtD7Zg"],"enrUri":"enr:-LO4QJM_e2_oYtAZkjyt2AFNy_PcB_yyjWQDfivPETnh_6GXPmhwGhdakQt5b8lABmBZbPPKJafzbiXhw7j82ScmrEUBgmlkgnY0gmlwhKwSEY-KbXVsdGlhZGRyc4wACgSsEhGPBiej3QOCcnOFAAMBAACJc2VjcDI1NmsxoQI96-HqWliQ73yVfWYAko5V1HJlMCwI8U-2mdG11-iJb4N0Y3CCJ6KDdWRwgiekhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-02_03-17-57__e9f043af-f40f-4a64-b40d-827331f1a541__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.229.52
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['57531', '57532', '57533', '57534', '57535']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 57531:57531 -p 57532:57532 -p 57533:57533 -p 57534:57534 -p 57535:57535 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=57533 --rest-port=57531 --tcp-port=57532 --discv5-udp-port=57534 --rest-address=0.0.0.0 --nat=extip:172.18.229.52 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4d69f550783288b12edce2c0ca1dbd6609560cabca74fbcd0ace4d7aafceb8de --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=57535 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.203.166
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['41995', '41996', '41997', '41998', '41999']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 41995:41995 -p 41996:41996 -p 41997:41997 -p 41998:41998 -p 41999:41999 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=41997 --rest-port=41995 --tcp-port=41996 --discv5-udp-port=41998 --rest-address=0.0.0.0 --nat=extip:172.18.203.166 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ff185dd3c448ba021aec8cc4cbba114f1bcaf6480a2ef7af9bfefdeca2fbce17 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=41999 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.120.247
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['40301', '40302', '40303', '40304', '40305']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 40301:40301 -p 40302:40302 -p 40303:40303 -p 40304:40304 -p 40305:40305 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40303 --rest-port=40301 --tcp-port=40302 --discv5-udp-port=40304 --rest-address=0.0.0.0 --nat=extip:172.18.120.247 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2aaf1ee914d8968c2ad29efa24b6e07232ddf758fb957b8ecd4e030edeea1174 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40305 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.120.247 waku 3d0ae6add0e45d04a0ea9b7a9d80bc55a00ef0d9466bed1a0be0a9a6750acaa4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 3d0ae6add0e4. Setting up logs at ./log/docker/receiving_node2_2024-09-02_03-17-57__e9f043af-f40f-4a64-b40d-827331f1a541__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 40301
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40301/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:40301/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.120.247/tcp/40302/p2p/16Uiu2HAkxdtBd1pxQZ357Vx76DqwBb6k3tCLaifkzSDqt53nauJu","/ip4/172.18.120.247/tcp/40303/ws/p2p/16Uiu2HAkxdtBd1pxQZ357Vx76DqwBb6k3tCLaifkzSDqt53nauJu"],"enrUri":"enr:-LO4QG0KN6CG4b5ZNP2f7bYFD1UemjQaQdHHeqJCZoMLb4YkFGOYSWP8LGJZKMECW9VVaDQHorqa-I-JzL7-CQLp_xYBgmlkgnY0gmlwhKwSePeKbXVsdGlhZGRyc4wACgSsEnj3Bp1v3QOCcnOFAAMBAACJc2VjcDI1NmsxoQIvs9RbgtTAy7sjVo2VE2eJAqdiIM3Fa_xn2sWfIQRaFoN0Y3CCnW6DdWRwgp1whXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40301/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.17.143/tcp/10146/p2p/16Uiu2HAkybPTwH9kPN6vcfmt21EUbeMumBzNgfeSVFnb2RAtD7Zg"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-02_03-17-57__e9f043af-f40f-4a64-b40d-827331f1a541__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.71.35
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['65355', '65356', '65357', '65358', '65359']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 65355:65355 -p 65356:65356 -p 65357:65357 -p 65358:65358 -p 65359:65359 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=65357 --rest-port=65355 --tcp-port=65356 --discv5-udp-port=65358 --rest-address=0.0.0.0 --nat=extip:172.18.71.35 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a3f8bd23aa739bedec4c4f0fd4fc2f402e50a3cd7e8cdeac07ef2fcd7bf90791 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-LO4QJM_e2_oYtAZkjyt2AFNy_PcB_yyjWQDfivPETnh_6GXPmhwGhdakQt5b8lABmBZbPPKJafzbiXhw7j82ScmrEUBgmlkgnY0gmlwhKwSEY-KbXVsdGlhZGRyc4wACgSsEhGPBiej3QOCcnOFAAMBAACJc2VjcDI1NmsxoQI96-HqWliQ73yVfWYAko5V1HJlMCwI8U-2mdG11-iJb4N0Y3CCJ6KDdWRwgiekhXdha3UyCQ --lightpushnode=/ip4/172.18.17.143/tcp/10146/p2p/16Uiu2HAkybPTwH9kPN6vcfmt21EUbeMumBzNgfeSVFnb2RAtD7Zg --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.71.35 waku 10090efd5d763b2d31dfae88965ceebe765a9eedbd508b04358faa7c3b76dd6c
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 10090efd5d76. Setting up logs at ./log/docker/lightpush_node1_2024-09-02_03-17-57__e9f043af-f40f-4a64-b40d-827331f1a541__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 65355
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:65355/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QC-OOqF66afWyjkZeVfiPwpeSBvj-6EFbfdt-BMZszk-VH64jz3bYR_HxM-jcjzqcXaUv_otskDxxZ9al2WCI_GGAZGwvVI9gmlkgnY0gmlwhKwRAAWJc2VjcDI1NmsxoQJo4hVvHxhnQBaniMJmkWksrKmh_qUtKQ87F7A_hr_kh4N0Y3CC_0yDdWRwgv9OhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/65356/p2p/16Uiu2HAm2V6L6vK9cRPg6kAEHkHDVZYn4xdaGP4U9xiJ53dGkf3L","/ip4/127.0.0.1/tcp/65357/ws/p2p/16Uiu2HAm2V6L6vK9cRPg6kAEHkHDVZYn4xdaGP4U9xiJ53dGkf3L","/ip4/172.17.0.5/tcp/65356/p2p/16Uiu2HAm2V6L6vK9cRPg6kAEHkHDVZYn4xdaGP4U9xiJ53dGkf3L","/ip4/172.17.0.5/tcp/65357/ws/p2p/16Uiu2HAm2V6L6vK9cRPg6kAEHkHDVZYn4xdaGP4U9xiJ53dGkf3L"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:65355/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.17.143/tcp/10146/p2p/16Uiu2HAkybPTwH9kPN6vcfmt21EUbeMumBzNgfeSVFnb2RAtD7Zg", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:65355/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.120.247/tcp/40302/p2p/16Uiu2HAkxdtBd1pxQZ357Vx76DqwBb6k3tCLaifkzSDqt53nauJu", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:10145/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:40301/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:65355/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"contentTopic": "/myapp/1/latest/proto", "timestamp": 1725247084302359296}}'
[1m[31mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:65355/lightpush/v1/message. Response content: b'missing Payload field'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 5b3dd7398a64
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 3d0ae6add0e4
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 10090efd5d76
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.