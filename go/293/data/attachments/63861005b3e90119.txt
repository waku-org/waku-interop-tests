[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_publishing_node_paused_and_unpaused with id: 2024-09-28_03-27-56__bed12c14-da5a-49cf-82d8-5aadd30db460
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-09-28_03-27-56__bed12c14-da5a-49cf-82d8-5aadd30db460__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.230.131
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['60072', '60073', '60074', '60075', '60076']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 60072:60072 -p 60073:60073 -p 60074:60074 -p 60075:60075 -p 60076:60076 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=60074 --rest-port=60072 --tcp-port=60073 --discv5-udp-port=60075 --rest-address=0.0.0.0 --nat=extip:172.18.230.131 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ccbeddcb8adf0d8f34d85796c6b2a8aad0bf5788fdb318be5098fdfcfbaa29a5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=60076 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.230.131 waku aa54bd6aa6bdc91961a7d7675e9c89b3995e6619ff3cd84304ee59170dc582ae
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID aa54bd6aa6bd. Setting up logs at ./log/docker/publishing_node1_2024-09-28_03-27-56__bed12c14-da5a-49cf-82d8-5aadd30db460__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 60072
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60072/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60072/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.230.131/tcp/60073/p2p/16Uiu2HAmU2M6xLrCJNgELvGR3LYeG59HqY2AvXLssRvWqTg1yNis","/ip4/172.18.230.131/tcp/60074/ws/p2p/16Uiu2HAmU2M6xLrCJNgELvGR3LYeG59HqY2AvXLssRvWqTg1yNis"],"enrUri":"enr:-LO4QMnmM30YPLxID0E-fGxCYebDBn_WyxRnEYHJ8dXH8tRpQD2hS1Sd81DWEbjnMUz0DJ-RLCo9q12YkPgKMzCT4KYBgmlkgnY0gmlwhKwS5oOKbXVsdGlhZGRyc4wACgSsEuaDBuqq3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPkV_dZLwlOJU9Z2md3uE5-UEOUSjgQfZQEjNH3sKaLEIN0Y3CC6qmDdWRwguqrhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2024-09-28_03-27-56__bed12c14-da5a-49cf-82d8-5aadd30db460__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.148.21
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['53496', '53497', '53498', '53499', '53500']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 53496:53496 -p 53497:53497 -p 53498:53498 -p 53499:53499 -p 53500:53500 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=53498 --rest-port=53496 --tcp-port=53497 --discv5-udp-port=53499 --rest-address=0.0.0.0 --nat=extip:172.18.148.21 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9b3a01cf9cdaf2e052cbdf6bfe98d04bb75beb9dffeee6132aaffe826b59f7fb --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-LO4QMnmM30YPLxID0E-fGxCYebDBn_WyxRnEYHJ8dXH8tRpQD2hS1Sd81DWEbjnMUz0DJ-RLCo9q12YkPgKMzCT4KYBgmlkgnY0gmlwhKwS5oOKbXVsdGlhZGRyc4wACgSsEuaDBuqq3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPkV_dZLwlOJU9Z2md3uE5-UEOUSjgQfZQEjNH3sKaLEIN0Y3CC6qmDdWRwguqrhXdha3UyAw --storenode=/ip4/172.18.230.131/tcp/60073/p2p/16Uiu2HAmU2M6xLrCJNgELvGR3LYeG59HqY2AvXLssRvWqTg1yNis --store=true --relay=true
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.120.30
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['31425', '31426', '31427', '31428', '31429']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 31425:31425 -p 31426:31426 -p 31427:31427 -p 31428:31428 -p 31429:31429 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=31427 --rest-port=31425 --tcp-port=31426 --discv5-udp-port=31428 --rest-address=0.0.0.0 --nat=extip:172.18.120.30 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ea8bacadb914eb5aadce31df5faee309239fe88a6aebb47aadb61fab2b77b7c0 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-LO4QMnmM30YPLxID0E-fGxCYebDBn_WyxRnEYHJ8dXH8tRpQD2hS1Sd81DWEbjnMUz0DJ-RLCo9q12YkPgKMzCT4KYBgmlkgnY0gmlwhKwS5oOKbXVsdGlhZGRyc4wACgSsEuaDBuqq3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPkV_dZLwlOJU9Z2md3uE5-UEOUSjgQfZQEjNH3sKaLEIN0Y3CC6qmDdWRwguqrhXdha3UyAw --storenode=/ip4/172.18.230.131/tcp/60073/p2p/16Uiu2HAmU2M6xLrCJNgELvGR3LYeG59HqY2AvXLssRvWqTg1yNis --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.120.30 waku 6a0d60046a99451498c2fa6e0d83f2743a6800a7265fd83bff28bf2d8e288459
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 6a0d60046a99. Setting up logs at ./log/docker/store_node1_2024-09-28_03-27-56__bed12c14-da5a-49cf-82d8-5aadd30db460__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 31425
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31425/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QMb0O1lzGWzIo05T2P6_k2Mv00q8wr_ZGPn-r51EzCQKAdCJJy5-hO_Z4QcuAtCvx-_5p2EvTAB_8iDkm2dc91yGAZI2q8NJgmlkgnY0gmlwhKwRAAeJc2VjcDI1NmsxoQMriCmfDXSY4E8zSR-c3aJtDgtkyZolvDQSLpQovdWR44N0Y3CCesKDdWRwgnrEhXdha3UyAw","listenAddresses":["/ip4/127.0.0.1/tcp/31426/p2p/16Uiu2HAmFavJcdLMMESsNSgx9grrLznpBJkW9dW2iGsQ3LGdY3Zc","/ip4/127.0.0.1/tcp/31427/ws/p2p/16Uiu2HAmFavJcdLMMESsNSgx9grrLznpBJkW9dW2iGsQ3LGdY3Zc","/ip4/172.17.0.7/tcp/31426/p2p/16Uiu2HAmFavJcdLMMESsNSgx9grrLznpBJkW9dW2iGsQ3LGdY3Zc","/ip4/172.17.0.7/tcp/31427/ws/p2p/16Uiu2HAmFavJcdLMMESsNSgx9grrLznpBJkW9dW2iGsQ3LGdY3Zc"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31425/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.230.131/tcp/60073/p2p/16Uiu2HAmU2M6xLrCJNgELvGR3LYeG59HqY2AvXLssRvWqTg1yNis", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60072/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:31425/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60072/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60072/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"Z0AvHju1C2Pra4O2wwKE4yd8pwNFV8I7PiMNw/lJAOg="}]}'
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/go-waku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31425/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"cbe02f6b6488aca1fb3df5aa86ea2909d5f407d874c4141cf3c8e77d2f52bb6b","status_code":200,"status_desc":"OK","messages":[{"message_hash":"Z0AvHju1C2Pra4O2wwKE4yd8pwNFV8I7PiMNw/lJAOg="}]}'
[35mDEBUG   [0m src.node.waku_node:waku_node.py:249 Pausing container with id aa54bd6aa6bd
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.node.waku_node:waku_node.py:254 Unpause container with id aa54bd6aa6bd
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60072/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60072/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.230.131/tcp/60073/p2p/16Uiu2HAmU2M6xLrCJNgELvGR3LYeG59HqY2AvXLssRvWqTg1yNis","/ip4/172.18.230.131/tcp/60074/ws/p2p/16Uiu2HAmU2M6xLrCJNgELvGR3LYeG59HqY2AvXLssRvWqTg1yNis"],"enrUri":"enr:-LO4QMnmM30YPLxID0E-fGxCYebDBn_WyxRnEYHJ8dXH8tRpQD2hS1Sd81DWEbjnMUz0DJ-RLCo9q12YkPgKMzCT4KYBgmlkgnY0gmlwhKwS5oOKbXVsdGlhZGRyc4wACgSsEuaDBuqq3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPkV_dZLwlOJU9Z2md3uE5-UEOUSjgQfZQEjNH3sKaLEIN0Y3CC6qmDdWRwguqrhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:60072/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60072/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"Z0AvHju1C2Pra4O2wwKE4yd8pwNFV8I7PiMNw/lJAOg="},{"messageHash":"rt5NCLHuQZ5OnM12oDv/EVe9k4NLY3sejaJLvYpQJ0A="}]}'
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/go-waku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31425/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"cd3bbf21f5dd88b05fadba6144753b4b37351fc1ea3b6df69e8fde8711031c7e","status_code":200,"status_desc":"OK","messages":[{"message_hash":"Z0AvHju1C2Pra4O2wwKE4yd8pwNFV8I7PiMNw/lJAOg="},{"message_hash":"rt5NCLHuQZ5OnM12oDv/EVe9k4NLY3sejaJLvYpQJ0A="}]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:60072/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"Z0AvHju1C2Pra4O2wwKE4yd8pwNFV8I7PiMNw/lJAOg="},{"messageHash":"rt5NCLHuQZ5OnM12oDv/EVe9k4NLY3sejaJLvYpQJ0A="}]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:31425/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"3c9f338a0a20327cf1eaa4d95a56ea0444ee55f03f63a00c2b04d2af01891bdc","status_code":200,"status_desc":"OK","messages":[{"message_hash":"Z0AvHju1C2Pra4O2wwKE4yd8pwNFV8I7PiMNw/lJAOg="},{"message_hash":"rt5NCLHuQZ5OnM12oDv/EVe9k4NLY3sejaJLvYpQJ0A="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id aa54bd6aa6bd
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 6a0d60046a99
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.