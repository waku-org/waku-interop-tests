[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_unsubscribe_from_all_subscribed_content_topics with id: 2024-12-17_03-22-13__c7c3f400-aabf-49fa-ab7a-9bcb697af1ef
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-17_03-22-13__c7c3f400-aabf-49fa-ab7a-9bcb697af1ef__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.78.64
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['61805', '61806', '61807', '61808', '61809']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 61805:61805 -p 61806:61806 -p 61807:61807 -p 61808:61808 -p 61809:61809 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61807 --rest-port=61805 --tcp-port=61806 --discv5-udp-port=61808 --rest-address=0.0.0.0 --nat=extip:172.18.78.64 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f9ab0132a3cad60bd5e7feaa5d22b2e986263eefb4fbee5ba43d08d5f9baef40 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61809 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.78.64 waku 49527adeea5ce321393395450286011554854311186c84a135e8632d2ae66d92
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 49527adeea5c. Setting up logs at ./log/docker/node1_2024-12-17_03-22-13__c7c3f400-aabf-49fa-ab7a-9bcb697af1ef__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 61805
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container ae008da2c885. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61805/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:61805/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.78.64/tcp/61806/p2p/16Uiu2HAkysqsBjyCFeg4efzjUVXeuCY9eB4nqxtEDbJkwDf3Sd8b","/ip4/172.18.78.64/tcp/61807/ws/p2p/16Uiu2HAkysqsBjyCFeg4efzjUVXeuCY9eB4nqxtEDbJkwDf3Sd8b"],"enrUri":"enr:-L24QBblFJcrcSpr9DvHg_xStCszDgQA2_WPuXAp7x_-1gTRHwaZ-mLxjKbvmgE7McmHKDM3stn4OFTY540wmCN6cPMCgmlkgnY0gmlwhKwSTkCKbXVsdGlhZGRyc5YACASsEk5ABvFuAAoErBJOQAbxb90DgnJzhQADAQAAiXNlY3AyNTZrMaECQiMG5yfgx8_vb3XscC7kj0Syort8p047RHrvA501l5CDdGNwgvFug3VkcILxcIV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-17_03-22-13__c7c3f400-aabf-49fa-ab7a-9bcb697af1ef__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.138.134
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['56013', '56014', '56015', '56016', '56017']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 56013:56013 -p 56014:56014 -p 56015:56015 -p 56016:56016 -p 56017:56017 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=56015 --rest-port=56013 --tcp-port=56014 --discv5-udp-port=56016 --rest-address=0.0.0.0 --nat=extip:172.18.138.134 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4f9a14a9f20b67dc23fdad1a06de2c4cdaa1fb3ceb1abb1f3cb019e6a1adaccb --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-L24QBblFJcrcSpr9DvHg_xStCszDgQA2_WPuXAp7x_-1gTRHwaZ-mLxjKbvmgE7McmHKDM3stn4OFTY540wmCN6cPMCgmlkgnY0gmlwhKwSTkCKbXVsdGlhZGRyc5YACASsEk5ABvFuAAoErBJOQAbxb90DgnJzhQADAQAAiXNlY3AyNTZrMaECQiMG5yfgx8_vb3XscC7kj0Syort8p047RHrvA501l5CDdGNwgvFug3VkcILxcIV3YWt1MgU --filternode=/ip4/172.18.78.64/tcp/61806/p2p/16Uiu2HAkysqsBjyCFeg4efzjUVXeuCY9eB4nqxtEDbJkwDf3Sd8b --pubsub-topic=/waku/2/rs/3/1
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.112.219
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['36493', '36494', '36495', '36496', '36497']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 36493:36493 -p 36494:36494 -p 36495:36495 -p 36496:36496 -p 36497:36497 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=36495 --rest-port=36493 --tcp-port=36494 --discv5-udp-port=36496 --rest-address=0.0.0.0 --nat=extip:172.18.112.219 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0acdcec5a7373b959b5c55ede4bdb62b267af2b71cfad78b9ffa66253aed29db --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-L24QBblFJcrcSpr9DvHg_xStCszDgQA2_WPuXAp7x_-1gTRHwaZ-mLxjKbvmgE7McmHKDM3stn4OFTY540wmCN6cPMCgmlkgnY0gmlwhKwSTkCKbXVsdGlhZGRyc5YACASsEk5ABvFuAAoErBJOQAbxb90DgnJzhQADAQAAiXNlY3AyNTZrMaECQiMG5yfgx8_vb3XscC7kj0Syort8p047RHrvA501l5CDdGNwgvFug3VkcILxcIV3YWt1MgU --filternode=/ip4/172.18.78.64/tcp/61806/p2p/16Uiu2HAkysqsBjyCFeg4efzjUVXeuCY9eB4nqxtEDbJkwDf3Sd8b --pubsub-topic=/waku/2/rs/3/1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.112.219 waku a112f3c49a6caabc51a1a5cfc0589ff8130a622bf5c35732d5cb10cc1435a113
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID a112f3c49a6c. Setting up logs at ./log/docker/node2_2024-12-17_03-22-13__c7c3f400-aabf-49fa-ab7a-9bcb697af1ef__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 36493
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36493/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QCS3siSDt92FhYZw4PAEDnB7zCgZuBL5hsok3ztCWzHGRoopoXvYzfGgJwxLldm6wWZXwUMncmi3ZxTcBmWZdWCGAZPSo0Z_gmlkgnY0gmlwhKwRAAKCcnOFAAMBAAGJc2VjcDI1NmsxoQP30e8Rtu_iw569lGKCV_wy3HESvSlGJm3vo7dvfGjsiYN0Y3CCjo6DdWRwgo6QhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/36494/p2p/16Uiu2HAmVLNidT8MtohymPMsWZNQPKGQtBkndqYxi8jaMU98sHB6","/ip4/127.0.0.1/tcp/36495/ws/p2p/16Uiu2HAmVLNidT8MtohymPMsWZNQPKGQtBkndqYxi8jaMU98sHB6","/ip4/172.17.0.2/tcp/36494/p2p/16Uiu2HAmVLNidT8MtohymPMsWZNQPKGQtBkndqYxi8jaMU98sHB6","/ip4/172.17.0.2/tcp/36495/ws/p2p/16Uiu2HAmVLNidT8MtohymPMsWZNQPKGQtBkndqYxi8jaMU98sHB6"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36493/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.78.64/tcp/61806/p2p/16Uiu2HAkysqsBjyCFeg4efzjUVXeuCY9eB4nqxtEDbJkwDf3Sd8b", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61805/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36493/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "08f93646-790f-4557-904a-54cd746aebce", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"08f93646-790f-4557-904a-54cd746aebce","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61805/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:36493/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "9b6bbf23-1a2b-49e1-b45d-22f323650347", "contentFilters": ["Hello World!", "1234567890"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"9b6bbf23-1a2b-49e1-b45d-22f323650347","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61805/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "1234567890", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36493/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/1234567890" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"1234567890","version":0,"timestamp":1734405737109206272,"ephemeral":false}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X DELETE "http://127.0.0.1:36493/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["Hello World!", "1234567890"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:61805/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "1234567890", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:36493/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/1234567890" -H "Content-Type: application/json" -d 'None'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:36493/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/1234567890. Response content: b'not subscribed to pubsubTopic:/waku/2/rs/3/1 contentTopic: 1234567890'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 49527adeea5c
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id a112f3c49a6c
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 49527adeea5c. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.