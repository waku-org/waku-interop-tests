[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_get_store_message_with_version with id: 2024-09-21_03-24-04__7e0f7740-9bfe-4e48-b7ed-0dba95c4ba06
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-09-21_03-24-04__7e0f7740-9bfe-4e48-b7ed-0dba95c4ba06__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.141.157
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['2570', '2571', '2572', '2573', '2574']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 2570:2570 -p 2571:2571 -p 2572:2572 -p 2573:2573 -p 2574:2574 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2572 --rest-port=2570 --tcp-port=2571 --discv5-udp-port=2573 --rest-address=0.0.0.0 --nat=extip:172.18.141.157 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=beded8e78c1fb73ec61f1d9cdb75a786edc77cddfbbcbc72ccee4c5561f2b01d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2574 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.141.157 waku 5d81e94a511461c6a47649ce388e383bd77fdd270633766865addc0a4c034810
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 5d81e94a5114. Setting up logs at ./log/docker/publishing_node1_2024-09-21_03-24-04__7e0f7740-9bfe-4e48-b7ed-0dba95c4ba06__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 2570
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2570/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2570/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.141.157/tcp/2571/p2p/16Uiu2HAmRBWFCMkK6eEKQGVoq2P2ALbPwTecw4wzmKxybfQ4dogD","/ip4/172.18.141.157/tcp/2572/ws/p2p/16Uiu2HAmRBWFCMkK6eEKQGVoq2P2ALbPwTecw4wzmKxybfQ4dogD"],"enrUri":"enr:-LO4QOjeeP2wG3fzXaNohjc1JooVqU44UU11QSS0D409AKGFIqtDjqYb4icWjXlGd7BlXy-4gKj2cbCGBsrgeUjxMmoBgmlkgnY0gmlwhKwSjZ2KbXVsdGlhZGRyc4wACgSsEo2dBgoM3QOCcnOFAAMBAACJc2VjcDI1NmsxoQO6HXg-5AER4pjEMvhb3AYUfrP5-jIea6ObjtjXd8SkCoN0Y3CCCguDdWRwggoNhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2024-09-21_03-24-04__7e0f7740-9bfe-4e48-b7ed-0dba95c4ba06__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.254.18
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['55152', '55153', '55154', '55155', '55156']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 55152:55152 -p 55153:55153 -p 55154:55154 -p 55155:55155 -p 55156:55156 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=55154 --rest-port=55152 --tcp-port=55153 --discv5-udp-port=55155 --rest-address=0.0.0.0 --nat=extip:172.18.254.18 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1fcedba978ac1af1efc6bc7f4dd1ac1c3be0ca806dbda4a2d17c2ecad3bcb9ca --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-LO4QOjeeP2wG3fzXaNohjc1JooVqU44UU11QSS0D409AKGFIqtDjqYb4icWjXlGd7BlXy-4gKj2cbCGBsrgeUjxMmoBgmlkgnY0gmlwhKwSjZ2KbXVsdGlhZGRyc4wACgSsEo2dBgoM3QOCcnOFAAMBAACJc2VjcDI1NmsxoQO6HXg-5AER4pjEMvhb3AYUfrP5-jIea6ObjtjXd8SkCoN0Y3CCCguDdWRwggoNhXdha3UyAw --storenode=/ip4/172.18.141.157/tcp/2571/p2p/16Uiu2HAmRBWFCMkK6eEKQGVoq2P2ALbPwTecw4wzmKxybfQ4dogD --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.254.18 waku 0a1a30be1d2bd8973ec694c5fd561b47a3602eafb100f98c19ac0083da0f55b2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 0a1a30be1d2b. Setting up logs at ./log/docker/store_node1_2024-09-21_03-24-04__7e0f7740-9bfe-4e48-b7ed-0dba95c4ba06__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 55152
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55152/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QJO_pbLA4UP4u69faVZ0bHklDTg78Fh0kLU2a1OixCwebGy6DA79Bxr0O4ysvLom8HZwtBRUoY0oe-GFe4BQe_CGAZISm7M-gmlkgnY0gmlwhKwRAAeJc2VjcDI1NmsxoQIg-x-JdfkRpnlI0cppm6mtm-Y-xmq4RlB5mkOYnugysoN0Y3CC13GDdWRwgtdzhXdha3UyAw","listenAddresses":["/ip4/127.0.0.1/tcp/55153/p2p/16Uiu2HAkweR7y924xx68ZVkxc2gR7rjYbUKjx4WUhbVyPjFDCwwf","/ip4/127.0.0.1/tcp/55154/ws/p2p/16Uiu2HAkweR7y924xx68ZVkxc2gR7rjYbUKjx4WUhbVyPjFDCwwf","/ip4/172.17.0.7/tcp/55153/p2p/16Uiu2HAkweR7y924xx68ZVkxc2gR7rjYbUKjx4WUhbVyPjFDCwwf","/ip4/172.17.0.7/tcp/55154/ws/p2p/16Uiu2HAkweR7y924xx68ZVkxc2gR7rjYbUKjx4WUhbVyPjFDCwwf"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55152/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.141.157/tcp/2571/p2p/16Uiu2HAmRBWFCMkK6eEKQGVoq2P2ALbPwTecw4wzmKxybfQ4dogD", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2570/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55152/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:2570/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)', "version": 10}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:2570/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"symoFqt0bIemab76yoQuA30eVk7t+Hiyo5ey7gjZJcw="}]}'
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/go-waku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55152/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"17280f9f10417e85636f22ad6ec1d42720a1f026b8b311e672fdfc9f6ce3dc5f","status_code":200,"status_desc":"OK","messages":[{"message_hash":"symoFqt0bIemab76yoQuA30eVk7t+Hiyo5ey7gjZJcw="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 5d81e94a5114
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 0a1a30be1d2b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.