[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_lightpush with id: 2024-10-13_03-19-31__0616e36d-d25d-4715-ac08-da41c57af5ca
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-13_03-19-31__0616e36d-d25d-4715-ac08-da41c57af5ca__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.45.48
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['26872', '26873', '26874', '26875', '26876']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 26872:26872 -p 26873:26873 -p 26874:26874 -p 26875:26875 -p 26876:26876 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26874 --rest-port=26872 --tcp-port=26873 --discv5-udp-port=26875 --rest-address=0.0.0.0 --nat=extip:172.18.45.48 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f275115fefab18cde21fb257843155d9019d0bf40cdb89b165fd5dec280eec5e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26876 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.45.48 waku ae9d7e4f60afa3a17ff87f570f1ce2ce28353183cfa9cf57525e59df73731813
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID ae9d7e4f60af. Setting up logs at ./log/docker/node1_2024-10-13_03-19-31__0616e36d-d25d-4715-ac08-da41c57af5ca__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 26872
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26872/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26872/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.45.48/tcp/26873/p2p/16Uiu2HAm5LGt6n31saNRYioJSRJ87khpXwL1F2AvNH2bG5GDXUHp","/ip4/172.18.45.48/tcp/26874/ws/p2p/16Uiu2HAm5LGt6n31saNRYioJSRJ87khpXwL1F2AvNH2bG5GDXUHp"],"enrUri":"enr:-LO4QJpfFOjjNERbPGa7zIznsxyVxcs3Y-c4999fqkZLWnqcXQjUZAvj-4d0fvYXSgPyREhXmDh6BXEhBbSG7HocLIMBgmlkgnY0gmlwhKwSLTCKbXVsdGlhZGRyc4wACgSsEi0wBmj63QOCcnOFAAMBAACJc2VjcDI1NmsxoQKTMtkZuSre35xko4L-66rTAkNEe9mlb9U-QmI3Q3Ai64N0Y3CCaPmDdWRwgmj7hXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-13_03-19-31__0616e36d-d25d-4715-ac08-da41c57af5ca__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.111.1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['15805', '15806', '15807', '15808', '15809']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 15805:15805 -p 15806:15806 -p 15807:15807 -p 15808:15808 -p 15809:15809 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15807 --rest-port=15805 --tcp-port=15806 --discv5-udp-port=15808 --rest-address=0.0.0.0 --nat=extip:172.18.111.1 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e9c8c3c35f76af5d840cbbe2cf5db656981c64df64bd5f5dc486e4a1f2f0bdb2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15809 --metrics-logging=true --lightpush=false --relay=true --discv5-bootstrap-node=enr:-LO4QJpfFOjjNERbPGa7zIznsxyVxcs3Y-c4999fqkZLWnqcXQjUZAvj-4d0fvYXSgPyREhXmDh6BXEhBbSG7HocLIMBgmlkgnY0gmlwhKwSLTCKbXVsdGlhZGRyc4wACgSsEi0wBmj63QOCcnOFAAMBAACJc2VjcDI1NmsxoQKTMtkZuSre35xko4L-66rTAkNEe9mlb9U-QmI3Q3Ai64N0Y3CCaPmDdWRwgmj7hXdha3UyCQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.111.1 waku 46d770101afaf0c4ea4bfeec604cddb43d0e3570f9331ccf8dafa9d5bfb97c0d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 46d770101afa. Setting up logs at ./log/docker/node1_2024-10-13_03-19-31__0616e36d-d25d-4715-ac08-da41c57af5ca__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 15805
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15805/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15805/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.111.1/tcp/15806/p2p/16Uiu2HAmV1xShxXFAEL1KWL6Cib92j9yaPAoijVDvv6WTgiVKFDB","/ip4/172.18.111.1/tcp/15807/ws/p2p/16Uiu2HAmV1xShxXFAEL1KWL6Cib92j9yaPAoijVDvv6WTgiVKFDB"],"enrUri":"enr:-LO4QLMtL-CCcBNpCBC-FcJkYGsOWyoAyabWMfS-HDi027BybDxuebbPBkAITNTkMW-vehCRGb_ckGw-McAummaTlmEBgmlkgnY0gmlwhKwSbwGKbXVsdGlhZGRyc4wACgSsEm8BBj2_3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPzGggx26tx_hXP8rrz35TzRgzjkVmJV_RxRmas6uAVqoN0Y3CCPb6DdWRwgj3AhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-13_03-19-31__0616e36d-d25d-4715-ac08-da41c57af5ca__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.138.132
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['16064', '16065', '16066', '16067', '16068']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 16064:16064 -p 16065:16065 -p 16066:16066 -p 16067:16067 -p 16068:16068 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=16066 --rest-port=16064 --tcp-port=16065 --discv5-udp-port=16067 --rest-address=0.0.0.0 --nat=extip:172.18.138.132 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d9ab1dbc2a5eb78ec5ee04b7c68dab5bca685f0bcc59dd7d934604cbaeaf26a2 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --lightpush=true --relay=false --discv5-bootstrap-node=enr:-LO4QJpfFOjjNERbPGa7zIznsxyVxcs3Y-c4999fqkZLWnqcXQjUZAvj-4d0fvYXSgPyREhXmDh6BXEhBbSG7HocLIMBgmlkgnY0gmlwhKwSLTCKbXVsdGlhZGRyc4wACgSsEi0wBmj63QOCcnOFAAMBAACJc2VjcDI1NmsxoQKTMtkZuSre35xko4L-66rTAkNEe9mlb9U-QmI3Q3Ai64N0Y3CCaPmDdWRwgmj7hXdha3UyCQ --lightpushnode=/ip4/172.18.45.48/tcp/26873/p2p/16Uiu2HAm5LGt6n31saNRYioJSRJ87khpXwL1F2AvNH2bG5GDXUHp
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.138.132 waku 77b1807b7ac06a74dfa19029061de96017a6b6381047800839908e4796c44421
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 77b1807b7ac0. Setting up logs at ./log/docker/node1_2024-10-13_03-19-31__0616e36d-d25d-4715-ac08-da41c57af5ca__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 16064
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16064/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QMItIjNLiSwci6hRG19xSdHUtG7ClxyA7s3opCigFobxS9VzRKx5fA0QFwxuSh0OWhZvoR2KlrrfNmcBT9wva7-GAZKD43eagmlkgnY0gmlwhKwRAA2Jc2VjcDI1NmsxoQP0lW3jk3uCLzW4dSDt7mtKRuZr6T-sqSZ_ZommnbIYwYN0Y3CCPsGDdWRwgj7DhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/16065/p2p/16Uiu2HAmV7jz5MsqxKuFof28ybDBqm4kMoM7NJrvvFE6eE6RWt8Q","/ip4/127.0.0.1/tcp/16066/ws/p2p/16Uiu2HAmV7jz5MsqxKuFof28ybDBqm4kMoM7NJrvvFE6eE6RWt8Q","/ip4/172.17.0.13/tcp/16065/p2p/16Uiu2HAmV7jz5MsqxKuFof28ybDBqm4kMoM7NJrvvFE6eE6RWt8Q","/ip4/172.17.0.13/tcp/16066/ws/p2p/16Uiu2HAmV7jz5MsqxKuFof28ybDBqm4kMoM7NJrvvFE6eE6RWt8Q"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:26872/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:15805/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16064/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": 1728789576627218432}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:26872/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1728789576627218432,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:15805/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1728789576627218432,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id ae9d7e4f60af
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 46d770101afa
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 77b1807b7ac0
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.