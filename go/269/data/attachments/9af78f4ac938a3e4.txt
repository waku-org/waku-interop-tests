[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_node_not_connected_directly_to_lightpushing_node with id: 2024-09-06_03-13-12__23c4e034-fc28-45e2-9f70-902dd6ecce2c
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-06_03-13-12__23c4e034-fc28-45e2-9f70-902dd6ecce2c__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-06_03-13-12__23c4e034-fc28-45e2-9f70-902dd6ecce2c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-09-06_03-13-12__23c4e034-fc28-45e2-9f70-902dd6ecce2c__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:28 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.199.248
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['23565', '23566', '23567', '23568', '23569']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 23565:23565 -p 23566:23566 -p 23567:23567 -p 23568:23568 -p 23569:23569 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=23567 --rest-port=23565 --tcp-port=23566 --discv5-udp-port=23568 --rest-address=0.0.0.0 --nat=extip:172.18.199.248 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9c8252bb7d9b1bbb8fe44b5eb4bdc811cdb94b5e22ab2f08f05ddaa2ecbf0459 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.199.248 waku 667e1dd5dcc80c869afa1077bb9289f10b0595961926f1e651620ccdcffe23ed
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 667e1dd5dcc8. Setting up logs at ./log/docker/node1_2024-09-06_03-13-12__23c4e034-fc28-45e2-9f70-902dd6ecce2c__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 23565
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23565/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QN0yWe4BxwiDZelBjnScn2VJSIXh6stSfKV21otHIg1FMK_VqqsKx76fK3wTdPhfvP2N5YoJ519uRZqK0_wd7jyGAZHFUlUGgmlkgnY0gmlwhKwRAAKJc2VjcDI1NmsxoQNi36L8M-7LRdy7-tW2dKyaSXEeOFEJ0z5xovKELihFq4N0Y3CCXA6DdWRwglwQhXdha3UyCQ","listenAddresses":["/ip4/127.0.0.1/tcp/23566/p2p/16Uiu2HAmKJx6CNnrCJvK5L5PjZaqYFgRFyA5y3fc5vrJrYmd1odC","/ip4/127.0.0.1/tcp/23567/ws/p2p/16Uiu2HAmKJx6CNnrCJvK5L5PjZaqYFgRFyA5y3fc5vrJrYmd1odC","/ip4/172.17.0.2/tcp/23566/p2p/16Uiu2HAmKJx6CNnrCJvK5L5PjZaqYFgRFyA5y3fc5vrJrYmd1odC","/ip4/172.17.0.2/tcp/23567/ws/p2p/16Uiu2HAmKJx6CNnrCJvK5L5PjZaqYFgRFyA5y3fc5vrJrYmd1odC"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.45.114
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['7586', '7587', '7588', '7589', '7590']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 7586:7586 -p 7587:7587 -p 7588:7588 -p 7589:7589 -p 7590:7590 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=7588 --rest-port=7586 --tcp-port=7587 --discv5-udp-port=7589 --rest-address=0.0.0.0 --nat=extip:172.18.45.114 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ed3f3f6b3413dcb7feecb9d1a7fcea18c81ca8a18cabe1d9f8d8746f71e064ea --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=7590 --metrics-logging=true --lightpush=true --store=true --relay=true --discv5-bootstrap-node=enr:-Ji4QN0yWe4BxwiDZelBjnScn2VJSIXh6stSfKV21otHIg1FMK_VqqsKx76fK3wTdPhfvP2N5YoJ519uRZqK0_wd7jyGAZHFUlUGgmlkgnY0gmlwhKwRAAKJc2VjcDI1NmsxoQNi36L8M-7LRdy7-tW2dKyaSXEeOFEJ0z5xovKELihFq4N0Y3CCXA6DdWRwglwQhXdha3UyCQ --lightpushnode=/ip4/172.18.199.248/tcp/23566/p2p/16Uiu2HAmKJx6CNnrCJvK5L5PjZaqYFgRFyA5y3fc5vrJrYmd1odC
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.45.114 waku 0ec9ae70d03875d32c0bcce904bec6770fddfc25868936c71f44435097b9c7eb
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 0ec9ae70d038. Setting up logs at ./log/docker/node2_2024-09-06_03-13-12__23c4e034-fc28-45e2-9f70-902dd6ecce2c__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 7586
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7586/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7586/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.45.114/tcp/7587/p2p/16Uiu2HAkvgNriX6rzpbqBn9AjFpzwZBK366rdiB9qVoFkKwSaywA","/ip4/172.18.45.114/tcp/7588/ws/p2p/16Uiu2HAkvgNriX6rzpbqBn9AjFpzwZBK366rdiB9qVoFkKwSaywA"],"enrUri":"enr:-LO4QIkYCy14AhrsujAV3Pf3pVvEZGWe5jVLg9QzERjTejnvb_A06bzttHXF1qwPQ2IQnURY3Fgwv12uQ98CNRiZn9cBgmlkgnY0gmlwhKwSLXKKbXVsdGlhZGRyc4wACgSsEi1yBh2k3QOCcnOFAAMBAACJc2VjcDI1NmsxoQISoAoE_eUa3nyH17ZTKomUDz0HDBzpr3h1gzbclKDfnYN0Y3CCHaODdWRwgh2lhXdha3UyCw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.118.228
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['35536', '35537', '35538', '35539', '35540']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 35536:35536 -p 35537:35537 -p 35538:35538 -p 35539:35539 -p 35540:35540 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=35538 --rest-port=35536 --tcp-port=35537 --discv5-udp-port=35539 --rest-address=0.0.0.0 --nat=extip:172.18.118.228 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ad95bea60f11c3c5945e3b6f4f6abfd0288fd4adbecfeceb83edfef5966accaa --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --storenode=/ip4/172.18.45.114/tcp/7587/p2p/16Uiu2HAkvgNriX6rzpbqBn9AjFpzwZBK366rdiB9qVoFkKwSaywA --discv5-bootstrap-node=enr:-LO4QIkYCy14AhrsujAV3Pf3pVvEZGWe5jVLg9QzERjTejnvb_A06bzttHXF1qwPQ2IQnURY3Fgwv12uQ98CNRiZn9cBgmlkgnY0gmlwhKwSLXKKbXVsdGlhZGRyc4wACgSsEi1yBh2k3QOCcnOFAAMBAACJc2VjcDI1NmsxoQISoAoE_eUa3nyH17ZTKomUDz0HDBzpr3h1gzbclKDfnYN0Y3CCHaODdWRwgh2lhXdha3UyCw
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.209.119
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['35563', '35564', '35565', '35566', '35567']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 35563:35563 -p 35564:35564 -p 35565:35565 -p 35566:35566 -p 35567:35567 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=35565 --rest-port=35563 --tcp-port=35564 --discv5-udp-port=35566 --rest-address=0.0.0.0 --nat=extip:172.18.209.119 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=183f29cdb2915d63ca1aaf70c4d28ae59ce88b9d1003ea1f7faf38a623e6d694 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --storenode=/ip4/172.18.45.114/tcp/7587/p2p/16Uiu2HAkvgNriX6rzpbqBn9AjFpzwZBK366rdiB9qVoFkKwSaywA --discv5-bootstrap-node=enr:-LO4QIkYCy14AhrsujAV3Pf3pVvEZGWe5jVLg9QzERjTejnvb_A06bzttHXF1qwPQ2IQnURY3Fgwv12uQ98CNRiZn9cBgmlkgnY0gmlwhKwSLXKKbXVsdGlhZGRyc4wACgSsEi1yBh2k3QOCcnOFAAMBAACJc2VjcDI1NmsxoQISoAoE_eUa3nyH17ZTKomUDz0HDBzpr3h1gzbclKDfnYN0Y3CCHaODdWRwgh2lhXdha3UyCw
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.209.119 waku b00d27170394590da21e91eebdfafed0f878966cdc781d13de5d1d9d4ddedc9b
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID b00d27170394. Setting up logs at ./log/docker/node3_2024-09-06_03-13-12__23c4e034-fc28-45e2-9f70-902dd6ecce2c__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 35563
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35563/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QKqgazaunzF0OlkznzbILh5s8K5-WksyJJ_-G2cCcm6EJucEbqLvnor2sNYHP9bzO4JeihOXXgCQHUeALBlFTX-GAZHFUmQsgmlkgnY0gmlwhKwRAAaJc2VjcDI1NmsxoQMQf27wMUexUe3KXaRw42yzg0JIb89mPi8_usd5DO5In4N0Y3CCiuyDdWRwgoruhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/35564/p2p/16Uiu2HAmDmPaPao3mE86ByncJcFakATwPfvUCzmuh7JSbcDHAxra","/ip4/127.0.0.1/tcp/35565/ws/p2p/16Uiu2HAmDmPaPao3mE86ByncJcFakATwPfvUCzmuh7JSbcDHAxra","/ip4/172.17.0.6/tcp/35564/p2p/16Uiu2HAmDmPaPao3mE86ByncJcFakATwPfvUCzmuh7JSbcDHAxra","/ip4/172.17.0.6/tcp/35565/ws/p2p/16Uiu2HAmDmPaPao3mE86ByncJcFakATwPfvUCzmuh7JSbcDHAxra"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23565/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:7586/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23565/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:23565/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAmDmPaPao3mE86ByncJcFakATwPfvUCzmuh7JSbcDHAxra","multiaddrs":["/ip4/172.17.0.6/tcp/35564/p2p/16Uiu2HAmDmPaPao3mE86ByncJcFakATwPfvUCzmuh7JSbcDHAxra","/ip4/172.17.0.6/tcp/35565/ws/p2p/16Uiu2HAmDmPaPao3mE86ByncJcFakATwPfvUCzmuh7JSbcDHAxra"],"protocols":["/vac/waku/filter-push/2.0.0-beta1"],"connected":true,"pubsubTopics":[]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:7586/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.6/tcp/35564/p2p/16Uiu2HAmDmPaPao3mE86ByncJcFakATwPfvUCzmuh7JSbcDHAxra","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:23565/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1725592428920616192}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.store:store.py:217 Checking that peer wakuorg/go-waku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35563/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-filter%2Fproto&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"2e6cbb483a3a96435175aa39c967ae4c4d583dd5d82beb1450b3733c8ccf02e6","status_code":200,"status_desc":"OK","messages":[{"message_hash":"zxL57pwCICzbapx2ThgBByaPxNa1riEyIj9QWY9xS98="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 667e1dd5dcc8
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 0ec9ae70d038
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id b00d27170394
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.