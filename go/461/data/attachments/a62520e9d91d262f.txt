2025-02-11 03:07:20.864 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 03:07:20.864 DEBUG [tests.conftest] Running test: test_light_push_with_missing_content_topic with id: 2025-02-11_03-07-20__c86a211f-fd41-4b4b-ae38-7d1acf8c3152
2025-02-11 03:07:20.865 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 03:07:20.865 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-11 03:07:20.871 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 03:07:20.871 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-11_03-07-20__c86a211f-fd41-4b4b-ae38-7d1acf8c3152__wakuorg_nwaku:latest.log
2025-02-11 03:07:20.872 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 03:07:20.872 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 03:07:20.873 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 03:07:20.873 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.139.253
2025-02-11 03:07:20.873 DEBUG [src.node.docker_mananger] Generated ports ['6166', '6167', '6168', '6169', '6170']
2025-02-11 03:07:20.873 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 03:07:20.874 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 03:07:20.874 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 03:07:20.874 DEBUG [src.node.docker_mananger] docker run -i -t -p 6166:6166 -p 6167:6167 -p 6168:6168 -p 6169:6169 -p 6170:6170 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6168 --rest-port=6166 --tcp-port=6167 --discv5-udp-port=6169 --rest-address=0.0.0.0 --nat=extip:172.18.139.253 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b0aed4dde6394718cac8d6296d3eba048c0dbf3bf9da0c5f4eeaba58d2afab4a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6170 --metrics-logging=true --lightpush=true --relay=true
2025-02-11 03:07:21.106 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.139.253 waku d5615e2232683f2af90b81d94e6414cc6fa79aaeec40f8eef7038bb5af3e89c0
2025-02-11 03:07:21.152 DEBUG [src.node.docker_mananger] Container started with ID d5615e223268. Setting up logs at ./log/docker/receiving_node1_2025-02-11_03-07-20__c86a211f-fd41-4b4b-ae38-7d1acf8c3152__wakuorg_nwaku:latest.log
2025-02-11 03:07:21.153 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 6166
2025-02-11 03:07:21.153 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 03:07:21.181 ERROR [src.node.docker_mananger] Max retries reached for container ec1ab1d5a95a. Exiting log stream.
2025-02-11 03:07:21.606 ERROR [src.node.docker_mananger] Max retries reached for container b5dc6bffb754. Exiting log stream.
2025-02-11 03:07:22.154 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6166/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:07:22.157 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 03:07:22.157 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 03:07:22.157 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6166/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:07:22.159 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.139.253/tcp/6167/p2p/16Uiu2HAm77QbepVXjmDdKH1ht6JLkoREZe5Uheb6AU38aELxPzCE","/ip4/172.18.139.253/tcp/6168/ws/p2p/16Uiu2HAm77QbepVXjmDdKH1ht6JLkoREZe5Uheb6AU38aELxPzCE"],"enrUri":"enr:-L24QD7UFzxuQZNFVjwf87ZqVyIca-zNu6n4P0aaZnkTYf-LPmVq-b9DgC66OPbFCuhyUZ6a6LEtwMzsQXY2RmK4jDoCgmlkgnY0gmlwhKwSi_2KbXVsdGlhZGRyc5YACASsEov9BhgXAAoErBKL_QYYGN0DgnJzhQADAQAAiXNlY3AyNTZrMaECrZ5leHRWrkGS8gsR6fF9dvYo2gnsEcVVanvjP83_Yw-DdGNwghgXg3VkcIIYGYV3YWt1Mgk"}'
2025-02-11 03:07:22.159 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 03:07:22.166 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 03:07:22.166 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-11_03-07-20__c86a211f-fd41-4b4b-ae38-7d1acf8c3152__wakuorg_nwaku:latest.log
2025-02-11 03:07:22.166 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 03:07:22.166 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 03:07:22.167 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 03:07:22.167 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.86.75
2025-02-11 03:07:22.168 DEBUG [src.node.docker_mananger] Generated ports ['23268', '23269', '23270', '23271', '23272']
2025-02-11 03:07:22.168 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 03:07:22.168 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 03:07:22.168 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 03:07:22.168 DEBUG [src.node.docker_mananger] docker run -i -t -p 23268:23268 -p 23269:23269 -p 23270:23270 -p 23271:23271 -p 23272:23272 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23270 --rest-port=23268 --tcp-port=23269 --discv5-udp-port=23271 --rest-address=0.0.0.0 --nat=extip:172.18.86.75 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=daee3d845badf98edd44c847e197aeae80f8eaa8367b8a92faed5526c4b9928b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23272 --metrics-logging=true --lightpush=false --relay=true
2025-02-11 03:07:22.404 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.86.75 waku bb6eed1b82eb3231e561b81cc931ebc90430d36be8530aed6a28fa2d85ce225c
2025-02-11 03:07:22.455 DEBUG [src.node.docker_mananger] Container started with ID bb6eed1b82eb. Setting up logs at ./log/docker/receiving_node2_2025-02-11_03-07-20__c86a211f-fd41-4b4b-ae38-7d1acf8c3152__wakuorg_nwaku:latest.log
2025-02-11 03:07:22.455 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 23268
2025-02-11 03:07:22.456 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 03:07:23.456 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23268/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:07:23.459 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 03:07:23.459 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 03:07:23.459 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23268/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:07:23.461 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.86.75/tcp/23269/p2p/16Uiu2HAmKWvSVXCf6URUYXnhwVMw4ksZrXsfCsfndfjVFDg7QCYU","/ip4/172.18.86.75/tcp/23270/ws/p2p/16Uiu2HAmKWvSVXCf6URUYXnhwVMw4ksZrXsfCsfndfjVFDg7QCYU"],"enrUri":"enr:-L24QE2kH1RFUuV6MOMEaO8Xr_Cg7EiE9MwqLHJpaPhCeh0Eb97Bqc4bNUs82eDHQWiw4mkUMyjyydikt8CIXM_gNLoCgmlkgnY0gmlwhKwSVkuKbXVsdGlhZGRyc5YACASsElZLBlrlAAoErBJWSwZa5t0DgnJzhQADAQAAiXNlY3AyNTZrMaEDZfC9mXj6GHhVc-6QusQltKIWx91Wzjg0U92gg_T4kQWDdGNwglrlg3VkcIJa54V3YWt1MgE"}'
2025-02-11 03:07:23.462 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 03:07:23.462 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23268/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.139.253/tcp/6167/p2p/16Uiu2HAm77QbepVXjmDdKH1ht6JLkoREZe5Uheb6AU38aELxPzCE"]'
2025-02-11 03:07:23.503 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 03:07:23.512 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-11 03:07:23.513 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-11_03-07-20__c86a211f-fd41-4b4b-ae38-7d1acf8c3152__wakuorg_go-waku:latest.log
2025-02-11 03:07:23.513 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 03:07:23.513 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 03:07:23.514 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 03:07:23.514 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.157.212
2025-02-11 03:07:23.515 DEBUG [src.node.docker_mananger] Generated ports ['19813', '19814', '19815', '19816', '19817']
2025-02-11 03:07:23.515 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 03:07:23.515 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 03:07:23.515 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 03:07:23.515 DEBUG [src.node.docker_mananger] docker run -i -t -p 19813:19813 -p 19814:19814 -p 19815:19815 -p 19816:19816 -p 19817:19817 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=19815 --rest-port=19813 --tcp-port=19814 --discv5-udp-port=19816 --rest-address=0.0.0.0 --nat=extip:172.18.157.212 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=91db55f0e9b6b665be2d2bfcc7b6e41e9ce6f99bfa1a926aeff4642a4579a946 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QD7UFzxuQZNFVjwf87ZqVyIca-zNu6n4P0aaZnkTYf-LPmVq-b9DgC66OPbFCuhyUZ6a6LEtwMzsQXY2RmK4jDoCgmlkgnY0gmlwhKwSi_2KbXVsdGlhZGRyc5YACASsEov9BhgXAAoErBKL_QYYGN0DgnJzhQADAQAAiXNlY3AyNTZrMaECrZ5leHRWrkGS8gsR6fF9dvYo2gnsEcVVanvjP83_Yw-DdGNwghgXg3VkcIIYGYV3YWt1Mgk --lightpushnode=/ip4/172.18.139.253/tcp/6167/p2p/16Uiu2HAm77QbepVXjmDdKH1ht6JLkoREZe5Uheb6AU38aELxPzCE --lightpush=true --relay=false --pubsub-topic=/waku/2/rs/3/1
2025-02-11 03:07:23.755 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.157.212 waku 91be212f3c44930372aac1785ca504e1aca454c7126b0e9dec05ee045a4c2755
2025-02-11 03:07:23.812 DEBUG [src.node.docker_mananger] Container started with ID 91be212f3c44. Setting up logs at ./log/docker/lightpush_node1_2025-02-11_03-07-20__c86a211f-fd41-4b4b-ae38-7d1acf8c3152__wakuorg_go-waku:latest.log
2025-02-11 03:07:23.814 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 19813
2025-02-11 03:07:23.814 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 03:07:24.814 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19813/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:07:24.817 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QJH2UTPgpGNPKmq9HvFAKf9k5l6jddS2hFP1kezOSEzsI9z77_uu6ea5NjsONdnwcN05oOpo6cxjKzF_tkh1VbmGAZTy-ckZgmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQNh8Mv4qfouzNHRaG3N07yJICFaEYgqNqaBaqOCRdZnLYN0Y3CCTWaDdWRwgk1ohXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/19814/p2p/16Uiu2HAmKFJrnZi4smszikiXN4DcEaeWa5UxYHEqCCP57gsgf5FJ","/ip4/127.0.0.1/tcp/19815/ws/p2p/16Uiu2HAmKFJrnZi4smszikiXN4DcEaeWa5UxYHEqCCP57gsgf5FJ","/ip4/172.17.0.4/tcp/19814/p2p/16Uiu2HAmKFJrnZi4smszikiXN4DcEaeWa5UxYHEqCCP57gsgf5FJ","/ip4/172.17.0.4/tcp/19815/ws/p2p/16Uiu2HAmKFJrnZi4smszikiXN4DcEaeWa5UxYHEqCCP57gsgf5FJ"]}'
2025-02-11 03:07:24.817 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 03:07:24.817 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19813/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.139.253/tcp/6167/p2p/16Uiu2HAm77QbepVXjmDdKH1ht6JLkoREZe5Uheb6AU38aELxPzCE", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-11 03:07:24.819 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-11 03:07:24.820 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19813/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.86.75/tcp/23269/p2p/16Uiu2HAmKWvSVXCf6URUYXnhwVMw4ksZrXsfCsfndfjVFDg7QCYU", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-11 03:07:24.835 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-11 03:07:24.837 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6166/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 03:07:24.844 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 03:07:24.845 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23268/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 03:07:24.847 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 03:07:24.848 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19813/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "timestamp": 1739243244848674304}}'
2025-02-11 03:07:24.850 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:19813/lightpush/v1/message. Response content: b'missing ContentTopic field'
2025-02-11 03:07:24.852 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 03:07:24.853 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 03:07:24.853 DEBUG [src.node.waku_node] Stopping container with id d5615e223268
2025-02-11 03:07:25.468 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 03:07:25.468 DEBUG [src.node.waku_node] Stopping container with id bb6eed1b82eb
2025-02-11 03:07:26.280 ERROR [src.node.docker_mananger] Max retries reached for container d5615e223268. Exiting log stream.
2025-02-11 03:07:26.981 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 03:07:26.981 DEBUG [src.node.waku_node] Stopping container with id 91be212f3c44
2025-02-11 03:07:27.468 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 03:07:27.469 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 03:07:27.476 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 03:07:27.482 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 03:07:27.484 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
