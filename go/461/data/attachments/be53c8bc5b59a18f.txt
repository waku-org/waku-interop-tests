2025-02-11 03:08:02.661 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 03:08:02.661 DEBUG [tests.conftest] Running test: test_filter_update_subscription_with_invalid_request_id with id: 2025-02-11_03-08-02__d02f2ec1-57fc-4d44-86f1-d66f310abb81
2025-02-11 03:08:02.661 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 03:08:02.661 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-11 03:08:02.662 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-11 03:08:02.668 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 03:08:02.668 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-11_03-08-02__d02f2ec1-57fc-4d44-86f1-d66f310abb81__wakuorg_nwaku:latest.log
2025-02-11 03:08:02.668 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 03:08:02.668 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 03:08:02.670 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 03:08:02.670 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.40.76
2025-02-11 03:08:02.670 DEBUG [src.node.docker_mananger] Generated ports ['46332', '46333', '46334', '46335', '46336']
2025-02-11 03:08:02.670 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 03:08:02.670 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 03:08:02.670 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 03:08:02.671 DEBUG [src.node.docker_mananger] docker run -i -t -p 46332:46332 -p 46333:46333 -p 46334:46334 -p 46335:46335 -p 46336:46336 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=46334 --rest-port=46332 --tcp-port=46333 --discv5-udp-port=46335 --rest-address=0.0.0.0 --nat=extip:172.18.40.76 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d6b74a5cadc42ab5692ab1e8052be9ae6c5a3ece2a4d7db4fe9f8ba7c9e96c09 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=46336 --metrics-logging=true --relay=true --filter=true
2025-02-11 03:08:02.889 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.40.76 waku 5930d6ba9b7393a158c2a39b675e5f64a7977ac6dcf83e692eaed4c8d2f4eaaf
2025-02-11 03:08:02.937 DEBUG [src.node.docker_mananger] Container started with ID 5930d6ba9b73. Setting up logs at ./log/docker/node1_2025-02-11_03-08-02__d02f2ec1-57fc-4d44-86f1-d66f310abb81__wakuorg_nwaku:latest.log
2025-02-11 03:08:02.939 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 46332
2025-02-11 03:08:02.939 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 03:08:03.453 ERROR [src.node.docker_mananger] Max retries reached for container 2607cb2cfd14. Exiting log stream.
2025-02-11 03:08:03.939 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46332/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:08:03.942 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 03:08:03.942 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 03:08:03.943 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46332/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:08:03.945 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.40.76/tcp/46333/p2p/16Uiu2HAmBvuStV8UByBPvaDTpvFHEQ1o7wLNpNc99Gk2QjqDe7bW","/ip4/172.18.40.76/tcp/46334/ws/p2p/16Uiu2HAmBvuStV8UByBPvaDTpvFHEQ1o7wLNpNc99Gk2QjqDe7bW"],"enrUri":"enr:-L24QIPvGbeSlJ85cWGt4Vn421hNqbjVw2mK_gRfYNkC9xmwO_Ud1froD8p9Sle24431_vIE93hg-uZpVK0nhURFAJ8CgmlkgnY0gmlwhKwSKEyKbXVsdGlhZGRyc5YACASsEihMBrT9AAoErBIoTAa0_t0DgnJzhQADAQAAiXNlY3AyNTZrMaEC9TgPx_oZiFD17pblHk7VB30xGSsY2MuFSRcK0kh2XDGDdGNwgrT9g3VkcIK0_4V3YWt1MgU"}'
2025-02-11 03:08:03.945 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 03:08:03.945 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-11 03:08:03.951 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-11 03:08:03.952 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-11_03-08-02__d02f2ec1-57fc-4d44-86f1-d66f310abb81__wakuorg_go-waku:latest.log
2025-02-11 03:08:03.952 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 03:08:03.952 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 03:08:03.953 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 03:08:03.953 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.24.76
2025-02-11 03:08:03.953 DEBUG [src.node.docker_mananger] Generated ports ['29015', '29016', '29017', '29018', '29019']
2025-02-11 03:08:03.954 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 03:08:03.954 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 03:08:03.954 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 03:08:03.954 DEBUG [src.node.docker_mananger] docker run -i -t -p 29015:29015 -p 29016:29016 -p 29017:29017 -p 29018:29018 -p 29019:29019 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=29017 --rest-port=29015 --tcp-port=29016 --discv5-udp-port=29018 --rest-address=0.0.0.0 --nat=extip:172.18.24.76 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=af5d932df7faff6add2dee31d003da92ffc4bc430559ec9fbfbcae53b90c429f --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-L24QIPvGbeSlJ85cWGt4Vn421hNqbjVw2mK_gRfYNkC9xmwO_Ud1froD8p9Sle24431_vIE93hg-uZpVK0nhURFAJ8CgmlkgnY0gmlwhKwSKEyKbXVsdGlhZGRyc5YACASsEihMBrT9AAoErBIoTAa0_t0DgnJzhQADAQAAiXNlY3AyNTZrMaEC9TgPx_oZiFD17pblHk7VB30xGSsY2MuFSRcK0kh2XDGDdGNwgrT9g3VkcIK0_4V3YWt1MgU --filternode=/ip4/172.18.40.76/tcp/46333/p2p/16Uiu2HAmBvuStV8UByBPvaDTpvFHEQ1o7wLNpNc99Gk2QjqDe7bW --pubsub-topic=/waku/2/rs/3/1
2025-02-11 03:08:04.173 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.24.76 waku 6819498201e8df4e3fa2f72f374eb80d2583ac96a9baa37e1fe3b09e1ab05f63
2025-02-11 03:08:04.229 DEBUG [src.node.docker_mananger] Container started with ID 6819498201e8. Setting up logs at ./log/docker/node2_2025-02-11_03-08-02__d02f2ec1-57fc-4d44-86f1-d66f310abb81__wakuorg_go-waku:latest.log
2025-02-11 03:08:04.230 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 29015
2025-02-11 03:08:04.230 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 03:08:05.231 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29015/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:08:05.233 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QE_qnROigev-hsauUJ2laYnASEojfx40zFvbxi4Z4H4mTEHoa833lZRi5ZAH5f-mheWNVVzDepyWjOSfWj3JsLGGAZTy-mb9gmlkgnY0gmlwhKwRAAOCcnOFAAMBAAGJc2VjcDI1NmsxoQLDirZ6HhCkfikWoIxoaal9TscnnCrIpwq-hxVdNAP7PoN0Y3CCcViDdWRwgnFahXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/29016/p2p/16Uiu2HAm8azACNSScbkmb3vZbJwpsSEZP4AYYpijEbNYm9riDKfB","/ip4/127.0.0.1/tcp/29017/ws/p2p/16Uiu2HAm8azACNSScbkmb3vZbJwpsSEZP4AYYpijEbNYm9riDKfB","/ip4/172.17.0.3/tcp/29016/p2p/16Uiu2HAm8azACNSScbkmb3vZbJwpsSEZP4AYYpijEbNYm9riDKfB","/ip4/172.17.0.3/tcp/29017/ws/p2p/16Uiu2HAm8azACNSScbkmb3vZbJwpsSEZP4AYYpijEbNYm9riDKfB"]}'
2025-02-11 03:08:05.233 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 03:08:05.234 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29015/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.40.76/tcp/46333/p2p/16Uiu2HAmBvuStV8UByBPvaDTpvFHEQ1o7wLNpNc99Gk2QjqDe7bW", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-11 03:08:05.236 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-11 03:08:05.236 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-11 03:08:05.236 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46332/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 03:08:05.239 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 03:08:05.240 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29015/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "84489970-4ea3-4fb0-9505-18fd45ef267a", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-11 03:08:05.245 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"84489970-4ea3-4fb0-9505-18fd45ef267a","statusDesc":"OK"}'
2025-02-11 03:08:05.249 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 03:08:05.250 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 03:08:05.250 DEBUG [src.node.waku_node] Stopping container with id 5930d6ba9b73
2025-02-11 03:08:05.831 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 03:08:05.831 DEBUG [src.node.waku_node] Stopping container with id 6819498201e8
2025-02-11 03:08:06.644 ERROR [src.node.docker_mananger] Max retries reached for container 5930d6ba9b73. Exiting log stream.
2025-02-11 03:08:06.712 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 03:08:06.713 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 03:08:06.717 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 03:08:06.720 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
