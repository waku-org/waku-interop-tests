2025-02-11 03:05:27.509 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 03:05:27.509 DEBUG [tests.conftest] Running test: test_store_node_not_connected_directly_to_lightpushing_node with id: 2025-02-11_03-05-27__4ff83c6a-6fe9-4134-bbb0-b33b05f52b33
2025-02-11 03:05:27.510 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 03:05:27.510 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-11 03:05:27.510 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-11 03:05:27.518 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-11 03:05:27.519 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-11_03-05-27__4ff83c6a-6fe9-4134-bbb0-b33b05f52b33__wakuorg_go-waku:latest.log
2025-02-11 03:05:27.524 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 03:05:27.524 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-11_03-05-27__4ff83c6a-6fe9-4134-bbb0-b33b05f52b33__wakuorg_nwaku:latest.log
2025-02-11 03:05:27.530 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-11 03:05:27.530 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node3_2025-02-11_03-05-27__4ff83c6a-6fe9-4134-bbb0-b33b05f52b33__wakuorg_go-waku:latest.log
2025-02-11 03:05:27.530 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-11 03:05:27.531 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-11 03:05:27.531 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 03:05:27.532 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 03:05:27.594 DEBUG [src.node.docker_mananger] Network waku created
2025-02-11 03:05:27.594 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.48.157
2025-02-11 03:05:27.594 DEBUG [src.node.docker_mananger] Generated ports ['57420', '57421', '57422', '57423', '57424']
2025-02-11 03:05:27.594 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 03:05:27.595 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 03:05:27.595 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 03:05:27.595 DEBUG [src.node.docker_mananger] docker run -i -t -p 57420:57420 -p 57421:57421 -p 57422:57422 -p 57423:57423 -p 57424:57424 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=57422 --rest-port=57420 --tcp-port=57421 --discv5-udp-port=57423 --rest-address=0.0.0.0 --nat=extip:172.18.48.157 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4680fccaca7bfa4d279adae9cceb6d8dff8535a7aa6b9626ba3bcaa053f48da5 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --lightpush=true
2025-02-11 03:05:30.378 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.48.157 waku 65d84f3fd4dfc7df821a8446d3abe90b1f6fcbaf05e1142b447638df035c912f
2025-02-11 03:05:30.428 DEBUG [src.node.docker_mananger] Container started with ID 65d84f3fd4df. Setting up logs at ./log/docker/node1_2025-02-11_03-05-27__4ff83c6a-6fe9-4134-bbb0-b33b05f52b33__wakuorg_go-waku:latest.log
2025-02-11 03:05:30.429 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 57420
2025-02-11 03:05:30.430 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 03:05:31.431 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57420/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:05:31.433 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QEM1X1qyUbASrvQKATYt3NCSP0qeXMi9xGnEPl7aCobmH_ls6AEIfk2vEdX_mwqbZcSMFwtcn__GaTS6eWsKr96GAZTy-A49gmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaECHuROFDt14OTKAdrdEVh_lLv_vWuCOZS56ZVNeAFrGVODdGNwguBNg3VkcILgT4V3YWt1Mgk","listenAddresses":["/ip4/127.0.0.1/tcp/57421/p2p/16Uiu2HAkwWG8CrWuhLGusTrTc6S69jtedvotFVJ8yXf6K3ecUFFg","/ip4/127.0.0.1/tcp/57422/ws/p2p/16Uiu2HAkwWG8CrWuhLGusTrTc6S69jtedvotFVJ8yXf6K3ecUFFg","/ip4/172.17.0.2/tcp/57421/p2p/16Uiu2HAkwWG8CrWuhLGusTrTc6S69jtedvotFVJ8yXf6K3ecUFFg","/ip4/172.17.0.2/tcp/57422/ws/p2p/16Uiu2HAkwWG8CrWuhLGusTrTc6S69jtedvotFVJ8yXf6K3ecUFFg"]}'
2025-02-11 03:05:31.434 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 03:05:31.434 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 03:05:31.434 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 03:05:31.436 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 03:05:31.436 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.213.164
2025-02-11 03:05:31.436 DEBUG [src.node.docker_mananger] Generated ports ['2571', '2572', '2573', '2574', '2575']
2025-02-11 03:05:31.436 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 03:05:31.436 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 03:05:31.436 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 03:05:31.437 DEBUG [src.node.docker_mananger] docker run -i -t -p 2571:2571 -p 2572:2572 -p 2573:2573 -p 2574:2574 -p 2575:2575 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2573 --rest-port=2571 --tcp-port=2572 --discv5-udp-port=2574 --rest-address=0.0.0.0 --nat=extip:172.18.213.164 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9e1dcfb169d409febc3f4b3bcf2e67c257f9fe7d31f77f3c310dbb69378e3ba6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2575 --metrics-logging=true --lightpush=true --store=true --relay=true --discv5-bootstrap-node=enr:-J-4QEM1X1qyUbASrvQKATYt3NCSP0qeXMi9xGnEPl7aCobmH_ls6AEIfk2vEdX_mwqbZcSMFwtcn__GaTS6eWsKr96GAZTy-A49gmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaECHuROFDt14OTKAdrdEVh_lLv_vWuCOZS56ZVNeAFrGVODdGNwguBNg3VkcILgT4V3YWt1Mgk --lightpushnode=/ip4/172.18.48.157/tcp/57421/p2p/16Uiu2HAkwWG8CrWuhLGusTrTc6S69jtedvotFVJ8yXf6K3ecUFFg
2025-02-11 03:05:33.451 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.213.164 waku 4823794874e430c29c2105716314760d02a8da4d5c86c71e5c51c1c1539572f8
2025-02-11 03:05:33.501 DEBUG [src.node.docker_mananger] Container started with ID 4823794874e4. Setting up logs at ./log/docker/node2_2025-02-11_03-05-27__4ff83c6a-6fe9-4134-bbb0-b33b05f52b33__wakuorg_nwaku:latest.log
2025-02-11 03:05:33.502 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 2571
2025-02-11 03:05:33.502 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 03:05:34.504 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2571/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:05:34.507 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 03:05:34.507 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 03:05:34.507 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2571/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:05:34.509 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.213.164/tcp/2572/p2p/16Uiu2HAmRe6vWJ7AtihiPwNxGz7VofwW7jZoJV2gmrBnJBwhZ5rG","/ip4/172.18.213.164/tcp/2573/ws/p2p/16Uiu2HAmRe6vWJ7AtihiPwNxGz7VofwW7jZoJV2gmrBnJBwhZ5rG"],"enrUri":"enr:-L24QDW_G3EVQ437J3Wm4jTKJg32shSo-OxLby9qaCaOXjQ5cNSvgwFJCXHsH-sXFzS0Rr7aCfChlW-zS4Z5TL3wRrYCgmlkgnY0gmlwhKwS1aSKbXVsdGlhZGRyc5YACASsEtWkBgoMAAoErBLVpAYKDd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDwO3H73pGe7aU6HHn9b4iTLel5FdLHosqH2hYqL0NlPmDdGNwggoMg3VkcIIKDoV3YWt1Mgs"}'
2025-02-11 03:05:34.509 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 03:05:34.509 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 03:05:34.510 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 03:05:34.511 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 03:05:34.511 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.59.216
2025-02-11 03:05:34.511 DEBUG [src.node.docker_mananger] Generated ports ['13813', '13814', '13815', '13816', '13817']
2025-02-11 03:05:34.511 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 03:05:34.511 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 03:05:34.512 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 03:05:34.512 DEBUG [src.node.docker_mananger] docker run -i -t -p 13813:13813 -p 13814:13814 -p 13815:13815 -p 13816:13816 -p 13817:13817 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=13815 --rest-port=13813 --tcp-port=13814 --discv5-udp-port=13816 --rest-address=0.0.0.0 --nat=extip:172.18.59.216 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=188bf4cbbfb8b0abb49e7df229eba5b88b7c789afb8fa9bcbf325bb6fac9eecd --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --storenode=/ip4/172.18.213.164/tcp/2572/p2p/16Uiu2HAmRe6vWJ7AtihiPwNxGz7VofwW7jZoJV2gmrBnJBwhZ5rG --discv5-bootstrap-node=enr:-L24QDW_G3EVQ437J3Wm4jTKJg32shSo-OxLby9qaCaOXjQ5cNSvgwFJCXHsH-sXFzS0Rr7aCfChlW-zS4Z5TL3wRrYCgmlkgnY0gmlwhKwS1aSKbXVsdGlhZGRyc5YACASsEtWkBgoMAAoErBLVpAYKDd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDwO3H73pGe7aU6HHn9b4iTLel5FdLHosqH2hYqL0NlPmDdGNwggoMg3VkcIIKDoV3YWt1Mgs --pubsub-topic=/waku/2/rs/3/1
2025-02-11 03:05:34.742 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.59.216 waku d922046077812006146491bbc06ec56a2b0901af130ef709f2084c1082c3bd3b
2025-02-11 03:05:34.794 DEBUG [src.node.docker_mananger] Container started with ID d92204607781. Setting up logs at ./log/docker/node3_2025-02-11_03-05-27__4ff83c6a-6fe9-4134-bbb0-b33b05f52b33__wakuorg_go-waku:latest.log
2025-02-11 03:05:34.795 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 13813
2025-02-11 03:05:34.795 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 03:05:35.795 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:13813/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:05:35.799 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QKNUsuMKECKom2WlFJ0UTAN5dl0b-EoQB_pF6tIIqPUOFRtD7vdan2u9HpFOk_RocCAcDH43691zNPKVq4y7-p-GAZTy-B9DgmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQPSGwjSM36ASdAMknbKTVKAmYT4czNdJvYn1Kb1SXCwq4N0Y3CCNfaDdWRwgjX4hXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/13814/p2p/16Uiu2HAmSo9so2omdAtMVXueoDuQWE5bAPVU193hhs9YATbpGJtr","/ip4/127.0.0.1/tcp/13815/ws/p2p/16Uiu2HAmSo9so2omdAtMVXueoDuQWE5bAPVU193hhs9YATbpGJtr","/ip4/172.17.0.4/tcp/13814/p2p/16Uiu2HAmSo9so2omdAtMVXueoDuQWE5bAPVU193hhs9YATbpGJtr","/ip4/172.17.0.4/tcp/13815/ws/p2p/16Uiu2HAmSo9so2omdAtMVXueoDuQWE5bAPVU193hhs9YATbpGJtr"]}'
2025-02-11 03:05:35.799 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 03:05:35.800 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57420/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 03:05:35.802 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-11 03:05:35.802 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2571/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 03:05:35.806 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 03:05:35.807 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57420/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:05:35.810 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"id":"16Uiu2HAmRe6vWJ7AtihiPwNxGz7VofwW7jZoJV2gmrBnJBwhZ5rG","multiaddrs":["/ip4/172.18.213.164/tcp/2572/p2p/16Uiu2HAmRe6vWJ7AtihiPwNxGz7VofwW7jZoJV2gmrBnJBwhZ5rG","/ip4/172.18.213.164/tcp/2573/ws/p2p/16Uiu2HAmRe6vWJ7AtihiPwNxGz7VofwW7jZoJV2gmrBnJBwhZ5rG"],"protocols":null,"connected":false,"pubsubTopics":[]}]'
2025-02-11 03:05:35.811 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2571/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:05:35.814 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.4/tcp/13814/p2p/16Uiu2HAmSo9so2omdAtMVXueoDuQWE5bAPVU193hhs9YATbpGJtr","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
2025-02-11 03:05:35.815 DEBUG [src.libs.common] Sleeping for 30 seconds
2025-02-11 03:06:05.815 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57420/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1739243165815625728}}'
2025-02-11 03:06:05.825 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-11 03:06:05.826 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 03:06:06.827 DEBUG [src.steps.store] Checking that peer wakuorg/go-waku:latest can find the stored messages
2025-02-11 03:06:06.827 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:13813/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-filter%2Fproto&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:06:06.833 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"112b665249463eb77acc0a71bcbf0650d95709f47394bda59808ea8cca4fc49e","status_code":200,"status_desc":"OK","messages":[{"message_hash":"KgLGVYaA096FvsZa4CucjMtsSnN0pwx7MntkNqodQr8="}]}'
2025-02-11 03:06:06.837 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 03:06:06.838 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 03:06:06.838 DEBUG [src.node.waku_node] Stopping container with id 65d84f3fd4df
2025-02-11 03:06:07.379 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 03:06:07.379 DEBUG [src.node.waku_node] Stopping container with id 4823794874e4
2025-02-11 03:06:08.193 ERROR [src.node.docker_mananger] Max retries reached for container 65d84f3fd4df. Exiting log stream.
2025-02-11 03:06:08.255 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 03:06:08.255 DEBUG [src.node.waku_node] Stopping container with id d92204607781
2025-02-11 03:06:08.747 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 03:06:08.749 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 03:06:08.948 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 03:06:08.959 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 03:06:08.963 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
