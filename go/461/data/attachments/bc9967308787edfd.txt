2025-02-11 03:05:41.676 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 03:05:41.676 DEBUG [tests.conftest] Running test: test_lightpush with id: 2025-02-11_03-05-41__e5fb5cbb-a350-4ea1-8157-510023ba4157
2025-02-11 03:05:41.677 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 03:05:41.677 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-11 03:05:41.677 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-11 03:05:41.678 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-11 03:05:41.678 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-11 03:05:41.686 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 03:05:41.686 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-11_03-05-41__e5fb5cbb-a350-4ea1-8157-510023ba4157__wakuorg_nwaku:latest.log
2025-02-11 03:05:41.686 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 03:05:41.686 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 03:05:41.688 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 03:05:41.688 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.79.9
2025-02-11 03:05:41.688 DEBUG [src.node.docker_mananger] Generated ports ['21789', '21790', '21791', '21792', '21793']
2025-02-11 03:05:41.689 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 03:05:41.689 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 03:05:41.689 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 03:05:41.689 DEBUG [src.node.docker_mananger] docker run -i -t -p 21789:21789 -p 21790:21790 -p 21791:21791 -p 21792:21792 -p 21793:21793 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=21791 --rest-port=21789 --tcp-port=21790 --discv5-udp-port=21792 --rest-address=0.0.0.0 --nat=extip:172.18.79.9 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f552fa0fcf1dadebecb3196f15dbcfabc86b0c7ca9df17bcbf00072f5cbdf218 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=21793 --metrics-logging=true --lightpush=true --relay=true
2025-02-11 03:05:41.932 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.79.9 waku 6af5ddd6fd4a79764d482f793be52d706c6d6cb5678158f1cba4ae5d11fe7018
2025-02-11 03:05:41.981 DEBUG [src.node.docker_mananger] Container started with ID 6af5ddd6fd4a. Setting up logs at ./log/docker/node1_2025-02-11_03-05-41__e5fb5cbb-a350-4ea1-8157-510023ba4157__wakuorg_nwaku:latest.log
2025-02-11 03:05:41.982 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 21789
2025-02-11 03:05:41.983 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 03:05:42.014 ERROR [src.node.docker_mananger] Max retries reached for container 92708f37ea1a. Exiting log stream.
2025-02-11 03:05:42.474 ERROR [src.node.docker_mananger] Max retries reached for container 91319cad6ae7. Exiting log stream.
2025-02-11 03:05:42.984 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:21789/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:05:42.987 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 03:05:42.987 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 03:05:42.987 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:21789/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:05:42.989 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.79.9/tcp/21790/p2p/16Uiu2HAmFtFxAtZqGVU2a5DnaeBLBYtP8XdeWcwa8q8GcAQWocza","/ip4/172.18.79.9/tcp/21791/ws/p2p/16Uiu2HAmFtFxAtZqGVU2a5DnaeBLBYtP8XdeWcwa8q8GcAQWocza"],"enrUri":"enr:-L24QGm2gN0nywoEadfFGzHBU38_ngJ707tbESxxT8NgrUwdawkm2zeQp-Kg2f2qs7uFZa6XvtvhTS1fKQX057fA_6MCgmlkgnY0gmlwhKwSTwmKbXVsdGlhZGRyc5YACASsEk8JBlUeAAoErBJPCQZVH90DgnJzhQADAQAAiXNlY3AyNTZrMaEDL_lAefW-1Tgj4YRugRYQWGxhVpgSh_pPI41iE_ArjReDdGNwglUeg3VkcIJVIIV3YWt1Mgk"}'
2025-02-11 03:05:42.990 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 03:05:42.997 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 03:05:42.997 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-11_03-05-41__e5fb5cbb-a350-4ea1-8157-510023ba4157__wakuorg_nwaku:latest.log
2025-02-11 03:05:42.997 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 03:05:42.997 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 03:05:42.999 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 03:05:42.999 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.85.41
2025-02-11 03:05:42.999 DEBUG [src.node.docker_mananger] Generated ports ['18381', '18382', '18383', '18384', '18385']
2025-02-11 03:05:43.000 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 03:05:43.000 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 03:05:43.000 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 03:05:43.000 DEBUG [src.node.docker_mananger] docker run -i -t -p 18381:18381 -p 18382:18382 -p 18383:18383 -p 18384:18384 -p 18385:18385 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18383 --rest-port=18381 --tcp-port=18382 --discv5-udp-port=18384 --rest-address=0.0.0.0 --nat=extip:172.18.85.41 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c55edd3a9dc7b2bdb038c3fa5ccf8a905177b4a6ce4fda16f8edfc25ef66cc2a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18385 --metrics-logging=true --lightpush=false --relay=true --discv5-bootstrap-node=enr:-L24QGm2gN0nywoEadfFGzHBU38_ngJ707tbESxxT8NgrUwdawkm2zeQp-Kg2f2qs7uFZa6XvtvhTS1fKQX057fA_6MCgmlkgnY0gmlwhKwSTwmKbXVsdGlhZGRyc5YACASsEk8JBlUeAAoErBJPCQZVH90DgnJzhQADAQAAiXNlY3AyNTZrMaEDL_lAefW-1Tgj4YRugRYQWGxhVpgSh_pPI41iE_ArjReDdGNwglUeg3VkcIJVIIV3YWt1Mgk
2025-02-11 03:05:43.228 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.85.41 waku ed9393787a50118fd8636c3174542208d802ef380cbf27bcc726486ae0a37ab8
2025-02-11 03:05:43.277 DEBUG [src.node.docker_mananger] Container started with ID ed9393787a50. Setting up logs at ./log/docker/node1_2025-02-11_03-05-41__e5fb5cbb-a350-4ea1-8157-510023ba4157__wakuorg_nwaku:latest.log
2025-02-11 03:05:43.277 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 18381
2025-02-11 03:05:43.277 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 03:05:44.278 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18381/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:05:44.284 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 03:05:44.287 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 03:05:44.287 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18381/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:05:44.292 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.85.41/tcp/18382/p2p/16Uiu2HAmBeszJ8UVj5zuRXKkbHeVpgTEd4NJja99LnFVmzfLyt2k","/ip4/172.18.85.41/tcp/18383/ws/p2p/16Uiu2HAmBeszJ8UVj5zuRXKkbHeVpgTEd4NJja99LnFVmzfLyt2k"],"enrUri":"enr:-L24QDUSW_C8gKUgQzoDVzAGP7Kfqh7x5wAP9eGRqBQQKOwaSIjMjTvtU_-VsIzU13R4JOl2W5MGXwb3Otm4NtQD2FcCgmlkgnY0gmlwhKwSVSmKbXVsdGlhZGRyc5YACASsElUpBkfOAAoErBJVKQZHz90DgnJzhQADAQAAiXNlY3AyNTZrMaEC8R0enORYeodyvpAb6brHG6J4_FDKjtrT89JQZzRvy4GDdGNwgkfOg3VkcIJH0IV3YWt1MgE"}'
2025-02-11 03:05:44.292 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 03:05:44.298 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-11 03:05:44.299 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-11_03-05-41__e5fb5cbb-a350-4ea1-8157-510023ba4157__wakuorg_go-waku:latest.log
2025-02-11 03:05:44.299 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 03:05:44.299 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 03:05:44.300 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 03:05:44.301 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.45.85
2025-02-11 03:05:44.301 DEBUG [src.node.docker_mananger] Generated ports ['45636', '45637', '45638', '45639', '45640']
2025-02-11 03:05:44.301 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 03:05:44.301 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 03:05:44.301 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 03:05:44.301 DEBUG [src.node.docker_mananger] docker run -i -t -p 45636:45636 -p 45637:45637 -p 45638:45638 -p 45639:45639 -p 45640:45640 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=45638 --rest-port=45636 --tcp-port=45637 --discv5-udp-port=45639 --rest-address=0.0.0.0 --nat=extip:172.18.45.85 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ee17b5abb2c55d2c5fa44dba3cdbfd5d4d6bcc91fe010ec0630ecaafae0cd29e --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --lightpush=true --relay=false --discv5-bootstrap-node=enr:-L24QGm2gN0nywoEadfFGzHBU38_ngJ707tbESxxT8NgrUwdawkm2zeQp-Kg2f2qs7uFZa6XvtvhTS1fKQX057fA_6MCgmlkgnY0gmlwhKwSTwmKbXVsdGlhZGRyc5YACASsEk8JBlUeAAoErBJPCQZVH90DgnJzhQADAQAAiXNlY3AyNTZrMaEDL_lAefW-1Tgj4YRugRYQWGxhVpgSh_pPI41iE_ArjReDdGNwglUeg3VkcIJVIIV3YWt1Mgk --lightpushnode=/ip4/172.18.79.9/tcp/21790/p2p/16Uiu2HAmFtFxAtZqGVU2a5DnaeBLBYtP8XdeWcwa8q8GcAQWocza --pubsub-topic=/waku/2/rs/3/1
2025-02-11 03:05:44.542 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.45.85 waku b773a03ee2f678b3b4c3b2703343694b7fd0faa595b74fccf29a419d27e0fdfa
2025-02-11 03:05:44.601 DEBUG [src.node.docker_mananger] Container started with ID b773a03ee2f6. Setting up logs at ./log/docker/node1_2025-02-11_03-05-41__e5fb5cbb-a350-4ea1-8157-510023ba4157__wakuorg_go-waku:latest.log
2025-02-11 03:05:44.601 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 45636
2025-02-11 03:05:44.602 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 03:05:45.602 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45636/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:05:45.605 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QME9p5izGEY6gPVnITRe9OEn4RbS8JqJ5qKIMqYkFeJ2NHM1JXvY3DfTUqoSx9OkiLj4vGDCoKOUJdECNPj4X_-GAZTy-EWMgmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQN-cURiIdU-CuJknELHpuE3PtdvrAnOcMvTaBRrGYvWe4N0Y3CCskWDdWRwgrJHhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/45637/p2p/16Uiu2HAmMAZtqZfsLYy7DUN2FAuHuEbYwsSPMSrc6a57KKECtWEn","/ip4/127.0.0.1/tcp/45638/ws/p2p/16Uiu2HAmMAZtqZfsLYy7DUN2FAuHuEbYwsSPMSrc6a57KKECtWEn","/ip4/172.17.0.4/tcp/45637/p2p/16Uiu2HAmMAZtqZfsLYy7DUN2FAuHuEbYwsSPMSrc6a57KKECtWEn","/ip4/172.17.0.4/tcp/45638/ws/p2p/16Uiu2HAmMAZtqZfsLYy7DUN2FAuHuEbYwsSPMSrc6a57KKECtWEn"]}'
2025-02-11 03:05:45.605 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 03:05:45.606 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:21789/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 03:05:45.611 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 03:05:45.611 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18381/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 03:05:45.617 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 03:05:45.619 DEBUG [src.steps.light_push] Lightpushing message
2025-02-11 03:05:45.619 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:45636/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": 1739243145619367168}}'
2025-02-11 03:05:47.522 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-11 03:05:47.523 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 03:05:47.624 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-11 03:05:47.625 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:21789/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:05:47.628 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739243145619367168,"ephemeral":false}]'
2025-02-11 03:05:47.629 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-11 03:05:47.630 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18381/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:05:47.632 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739243145619367168,"ephemeral":false}]'
2025-02-11 03:05:47.635 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 03:05:47.636 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 03:05:47.636 DEBUG [src.node.waku_node] Stopping container with id 6af5ddd6fd4a
2025-02-11 03:05:48.485 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 03:05:48.485 DEBUG [src.node.waku_node] Stopping container with id ed9393787a50
2025-02-11 03:05:49.302 ERROR [src.node.docker_mananger] Max retries reached for container 6af5ddd6fd4a. Exiting log stream.
2025-02-11 03:05:50.008 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 03:05:50.008 DEBUG [src.node.waku_node] Stopping container with id b773a03ee2f6
2025-02-11 03:05:50.527 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 03:05:50.529 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 03:05:50.536 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 03:05:50.543 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 03:05:50.545 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
