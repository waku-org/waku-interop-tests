2025-02-11 03:07:09.737 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 03:07:09.738 DEBUG [tests.conftest] Running test: test_time_filter_big_timestamp with id: 2025-02-11_03-07-09__e9e34a7c-1c91-48b4-83ef-dc675f093e74
2025-02-11 03:07:09.739 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 03:07:09.739 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-11 03:07:09.740 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-11 03:07:09.747 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 03:07:09.747 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-11_03-07-09__e9e34a7c-1c91-48b4-83ef-dc675f093e74__wakuorg_nwaku:latest.log
2025-02-11 03:07:09.747 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 03:07:09.747 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 03:07:09.749 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 03:07:09.749 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.35.167
2025-02-11 03:07:09.749 DEBUG [src.node.docker_mananger] Generated ports ['18757', '18758', '18759', '18760', '18761']
2025-02-11 03:07:09.749 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 03:07:09.749 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 03:07:09.749 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 03:07:09.750 DEBUG [src.node.docker_mananger] docker run -i -t -p 18757:18757 -p 18758:18758 -p 18759:18759 -p 18760:18760 -p 18761:18761 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18759 --rest-port=18757 --tcp-port=18758 --discv5-udp-port=18760 --rest-address=0.0.0.0 --nat=extip:172.18.35.167 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ed6d4f92f51afbfe4ebfbdbfa4f00a7de2afba14b6c4124433cf16b3d511af3a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18761 --metrics-logging=true --store=true --relay=true
2025-02-11 03:07:09.976 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.35.167 waku 447f8044d88bb49fb8640953fcf05c2925a22e7cd7d3adbae80cb60670391a79
2025-02-11 03:07:10.019 ERROR [src.node.docker_mananger] Max retries reached for container 4408c8226150. Exiting log stream.
2025-02-11 03:07:10.024 DEBUG [src.node.docker_mananger] Container started with ID 447f8044d88b. Setting up logs at ./log/docker/publishing_node1_2025-02-11_03-07-09__e9e34a7c-1c91-48b4-83ef-dc675f093e74__wakuorg_nwaku:latest.log
2025-02-11 03:07:10.026 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 18757
2025-02-11 03:07:10.026 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 03:07:10.556 ERROR [src.node.docker_mananger] Max retries reached for container 44a4f68b5ae1. Exiting log stream.
2025-02-11 03:07:11.028 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18757/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:07:11.031 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 03:07:11.031 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 03:07:11.031 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18757/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:07:11.033 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.35.167/tcp/18758/p2p/16Uiu2HAmUMosfzPMZ72UfWd1RejkjFGfLjUvxoVSxHycJYBHpjvq","/ip4/172.18.35.167/tcp/18759/ws/p2p/16Uiu2HAmUMosfzPMZ72UfWd1RejkjFGfLjUvxoVSxHycJYBHpjvq"],"enrUri":"enr:-L24QAhLNrwAnhWzra8Y6XCkvShWMYemOc8J7Ha6XrefpcZSWuQ7lDCtzS4Zlbz4ceqdovbpOGT9FoJzbSMz9eUjGfoCgmlkgnY0gmlwhKwSI6eKbXVsdGlhZGRyc5YACASsEiOnBklGAAoErBIjpwZJR90DgnJzhQADAQAAiXNlY3AyNTZrMaED6VRFinrjX_kR0ZHjj2jsED-w4x_-K_AXlhr1Pll_mfKDdGNwgklGg3VkcIJJSIV3YWt1MgM"}'
2025-02-11 03:07:11.034 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 03:07:11.041 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-11 03:07:11.041 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-11_03-07-09__e9e34a7c-1c91-48b4-83ef-dc675f093e74__wakuorg_go-waku:latest.log
2025-02-11 03:07:11.041 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 03:07:11.041 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 03:07:11.042 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 03:07:11.043 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.105.46
2025-02-11 03:07:11.043 DEBUG [src.node.docker_mananger] Generated ports ['63720', '63721', '63722', '63723', '63724']
2025-02-11 03:07:11.043 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 03:07:11.043 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 03:07:11.043 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 03:07:11.043 DEBUG [src.node.docker_mananger] docker run -i -t -p 63720:63720 -p 63721:63721 -p 63722:63722 -p 63723:63723 -p 63724:63724 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=63722 --rest-port=63720 --tcp-port=63721 --discv5-udp-port=63723 --rest-address=0.0.0.0 --nat=extip:172.18.105.46 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ac2a7f0fd9aacd7ac1e77fbbee1995e78b85abf0931a8e641bccb22c9cae8f2c --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QAhLNrwAnhWzra8Y6XCkvShWMYemOc8J7Ha6XrefpcZSWuQ7lDCtzS4Zlbz4ceqdovbpOGT9FoJzbSMz9eUjGfoCgmlkgnY0gmlwhKwSI6eKbXVsdGlhZGRyc5YACASsEiOnBklGAAoErBIjpwZJR90DgnJzhQADAQAAiXNlY3AyNTZrMaED6VRFinrjX_kR0ZHjj2jsED-w4x_-K_AXlhr1Pll_mfKDdGNwgklGg3VkcIJJSIV3YWt1MgM --storenode=/ip4/172.18.35.167/tcp/18758/p2p/16Uiu2HAmUMosfzPMZ72UfWd1RejkjFGfLjUvxoVSxHycJYBHpjvq --store=true --relay=true
2025-02-11 03:07:11.276 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.105.46 waku d86d6e3e7ab3fa7dede558af7edee1ad7f18c5027193a96df8f2d4b0464fe9af
2025-02-11 03:07:11.328 DEBUG [src.node.docker_mananger] Container started with ID d86d6e3e7ab3. Setting up logs at ./log/docker/store_node1_2025-02-11_03-07-09__e9e34a7c-1c91-48b4-83ef-dc675f093e74__wakuorg_go-waku:latest.log
2025-02-11 03:07:11.329 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 63720
2025-02-11 03:07:11.330 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 03:07:12.330 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63720/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:07:12.333 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QIS0X9itrigmh2Yxb95dl-VPKeukeIObuPN2BjfunVZJWCdyb4E3IucZxGgFB9xhJX8-iqUCEIlndFPb019nhJOGAZTy-ZhngmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaEDoC3Yi8fpZJHWjWSaGk_zNC8UsrHeKgNPRwQT7gsfAx2DdGNwgvjpg3VkcIL464V3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/63721/p2p/16Uiu2HAmPSG8QsGkSHcMHQnBQqu9sJSGq2KjXTCCrcfv6AP7GpQL","/ip4/127.0.0.1/tcp/63722/ws/p2p/16Uiu2HAmPSG8QsGkSHcMHQnBQqu9sJSGq2KjXTCCrcfv6AP7GpQL","/ip4/172.17.0.3/tcp/63721/p2p/16Uiu2HAmPSG8QsGkSHcMHQnBQqu9sJSGq2KjXTCCrcfv6AP7GpQL","/ip4/172.17.0.3/tcp/63722/ws/p2p/16Uiu2HAmPSG8QsGkSHcMHQnBQqu9sJSGq2KjXTCCrcfv6AP7GpQL"]}'
2025-02-11 03:07:12.334 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 03:07:12.334 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63720/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.35.167/tcp/18758/p2p/16Uiu2HAmUMosfzPMZ72UfWd1RejkjFGfLjUvxoVSxHycJYBHpjvq", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-11 03:07:12.351 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-11 03:07:12.352 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18757/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 03:07:12.375 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 03:07:12.376 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63720/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 03:07:12.378 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-11 03:07:12.382 DEBUG [src.steps.store] Relaying message
2025-02-11 03:07:12.384 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18757/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 03:07:12.396 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 03:07:12.396 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 03:07:12.598 DEBUG [src.steps.store] Relaying message
2025-02-11 03:07:12.598 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18757/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 03:07:12.604 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 03:07:12.604 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 03:07:12.805 DEBUG [src.steps.store] Relaying message
2025-02-11 03:07:12.805 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18757/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 03:07:12.811 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 03:07:12.811 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 03:07:13.012 DEBUG [src.steps.store] Relaying message
2025-02-11 03:07:13.012 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18757/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 03:07:13.018 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 03:07:13.018 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 03:07:13.218 DEBUG [src.steps.store] Relaying message
2025-02-11 03:07:13.219 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18757/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 03:07:13.225 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 03:07:13.226 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 03:07:13.426 DEBUG [src.steps.store] Relaying message
2025-02-11 03:07:13.426 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18757/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 03:07:13.432 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 03:07:13.432 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 03:07:13.632 DEBUG [tests.store.test_time_filter] inquering stored messages with start time 1739243229382152192 after end time 2430443233632933888
2025-02-11 03:07:13.633 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18757/store/v3/messages?includeData=True&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=1739243229382152192&endTime=2430443233632933888&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:07:13.637 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x4ffb9027591cc986ee744054f4e31321d5b7b55b0a1dd70269237dce9cb08a8a","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739243229382152192,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0x5f73996f29bcd90214eeae1402f8763375e70e8ac9aa3b90b0234c02521dd197","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739243231382159104,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0xd7d436125f26dc5962c7b5ebaece23da68d3e619a83140a7aec9528b7ff028c0","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739243232282160896,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0x28cea749453ffccb42703378d74154128488759727b586452a83db08f7a7f29a","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739243232482162944,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0xa1c91b1d847ff5f73203d84fdc329f67c24cdb4bf1efe5ca6bd7cd85d7087f43","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739243234382164992,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"},{"messageHash":"0x6fe6bc5d630a0a4de2a15113a2417517c7956bd2783a07b174f01c0b9969dbea","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739243242382167040,"ephemeral":false},"pubsubTopic":"/waku/2/rs/3/0"}]}'
2025-02-11 03:07:13.648 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 03:07:13.649 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 03:07:13.649 DEBUG [src.node.waku_node] Stopping container with id 447f8044d88b
2025-02-11 03:07:14.201 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 03:07:14.201 DEBUG [src.node.waku_node] Stopping container with id d86d6e3e7ab3
2025-02-11 03:07:14.711 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 03:07:14.715 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 03:07:14.729 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 03:07:14.733 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 03:07:14.735 DEBUG [tests.conftest] Running fixture teardown: attach_logs_on_fail
2025-02-11 03:07:14.735 DEBUG [tests.conftest] Test failed, attempting to attach logs to the allure reports
2025-02-11 03:07:14.736 DEBUG [src.libs.common] Attaching file ./log/docker/publishing_node1_2025-02-11_03-07-09__e9e34a7c-1c91-48b4-83ef-dc675f093e74__wakuorg_nwaku:latest.log
2025-02-11 03:07:14.740 DEBUG [src.libs.common] Attaching file ./log/docker/store_node1_2025-02-11_03-07-09__e9e34a7c-1c91-48b4-83ef-dc675f093e74__wakuorg_go-waku:latest.log
