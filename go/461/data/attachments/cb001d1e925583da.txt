2025-02-11 03:07:03.281 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 03:07:03.281 DEBUG [tests.conftest] Running test: test_filter_node_not_connected_directly_to_lightpushing_node with id: 2025-02-11_03-07-03__adfc5953-ac47-4e23-8075-8a430704c721
2025-02-11 03:07:03.282 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 03:07:03.282 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-11 03:07:03.282 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-11 03:07:03.302 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-11 03:07:03.302 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-11_03-07-03__adfc5953-ac47-4e23-8075-8a430704c721__wakuorg_go-waku:latest.log
2025-02-11 03:07:03.307 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 03:07:03.307 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-11_03-07-03__adfc5953-ac47-4e23-8075-8a430704c721__wakuorg_nwaku:latest.log
2025-02-11 03:07:03.312 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-11 03:07:03.312 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node3_2025-02-11_03-07-03__adfc5953-ac47-4e23-8075-8a430704c721__wakuorg_go-waku:latest.log
2025-02-11 03:07:03.313 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-11 03:07:03.313 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-11 03:07:03.314 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 03:07:03.314 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 03:07:03.374 DEBUG [src.node.docker_mananger] Network waku created
2025-02-11 03:07:03.375 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.125.171
2025-02-11 03:07:03.375 DEBUG [src.node.docker_mananger] Generated ports ['65042', '65043', '65044', '65045', '65046']
2025-02-11 03:07:03.375 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 03:07:03.375 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 03:07:03.375 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 03:07:03.375 DEBUG [src.node.docker_mananger] docker run -i -t -p 65042:65042 -p 65043:65043 -p 65044:65044 -p 65045:65045 -p 65046:65046 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=65044 --rest-port=65042 --tcp-port=65043 --discv5-udp-port=65045 --rest-address=0.0.0.0 --nat=extip:172.18.125.171 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=32b6dbc882b886cd79c020d83aadb1240dc9aae14fd2dacedf53bf9ed3c7fa42 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --lightpush=true
2025-02-11 03:07:08.322 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.125.171 waku 9c163e9ae9fdb372c33ab4471cab0cbc6b9ffcfdc873558538ad56f99ccc4a5b
2025-02-11 03:07:08.383 DEBUG [src.node.docker_mananger] Container started with ID 9c163e9ae9fd. Setting up logs at ./log/docker/node1_2025-02-11_03-07-03__adfc5953-ac47-4e23-8075-8a430704c721__wakuorg_go-waku:latest.log
2025-02-11 03:07:08.386 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 65042
2025-02-11 03:07:08.387 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 03:07:09.387 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:65042/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:07:09.389 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QDJ09k3MBv0Chx0TV8MruEif8UI0_8mREmxCwQb-wr9QWnQAdApU4zbVLUUN-yzOt9fKidOlL4JHUzdLAZyRXHKGAZTy-YzJgmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaECzSIX0s9xgROTgtzbg9TpG8RY-dhUu6PfFEE-VeuDi0iDdGNwgv4Tg3VkcIL-FYV3YWt1Mgk","listenAddresses":["/ip4/127.0.0.1/tcp/65043/p2p/16Uiu2HAm9ERi969WXERabubNP8zDcz9QH2cQ3f61i214DHKRwcrK","/ip4/127.0.0.1/tcp/65044/ws/p2p/16Uiu2HAm9ERi969WXERabubNP8zDcz9QH2cQ3f61i214DHKRwcrK","/ip4/172.17.0.2/tcp/65043/p2p/16Uiu2HAm9ERi969WXERabubNP8zDcz9QH2cQ3f61i214DHKRwcrK","/ip4/172.17.0.2/tcp/65044/ws/p2p/16Uiu2HAm9ERi969WXERabubNP8zDcz9QH2cQ3f61i214DHKRwcrK"]}'
2025-02-11 03:07:09.390 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 03:07:09.390 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 03:07:09.390 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 03:07:09.392 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 03:07:09.392 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.210.217
2025-02-11 03:07:09.392 DEBUG [src.node.docker_mananger] Generated ports ['25411', '25412', '25413', '25414', '25415']
2025-02-11 03:07:09.392 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 03:07:09.392 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 03:07:09.392 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 03:07:09.393 DEBUG [src.node.docker_mananger] docker run -i -t -p 25411:25411 -p 25412:25412 -p 25413:25413 -p 25414:25414 -p 25415:25415 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25413 --rest-port=25411 --tcp-port=25412 --discv5-udp-port=25414 --rest-address=0.0.0.0 --nat=extip:172.18.210.217 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1b94047cc55a124aa57efa3ac64a85f3ceb2ecc442c73daf41bded8f4cbb01db --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25415 --metrics-logging=true --lightpush=true --filter=true --relay=true --discv5-bootstrap-node=enr:-J-4QDJ09k3MBv0Chx0TV8MruEif8UI0_8mREmxCwQb-wr9QWnQAdApU4zbVLUUN-yzOt9fKidOlL4JHUzdLAZyRXHKGAZTy-YzJgmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaECzSIX0s9xgROTgtzbg9TpG8RY-dhUu6PfFEE-VeuDi0iDdGNwgv4Tg3VkcIL-FYV3YWt1Mgk --lightpushnode=/ip4/172.18.125.171/tcp/65043/p2p/16Uiu2HAm9ERi969WXERabubNP8zDcz9QH2cQ3f61i214DHKRwcrK
2025-02-11 03:07:12.546 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.210.217 waku e7ac4be7c21b48fb19cc78003592dcd35591cf0f3020bf6450dcf8cb1b9ca469
2025-02-11 03:07:12.600 DEBUG [src.node.docker_mananger] Container started with ID e7ac4be7c21b. Setting up logs at ./log/docker/node2_2025-02-11_03-07-03__adfc5953-ac47-4e23-8075-8a430704c721__wakuorg_nwaku:latest.log
2025-02-11 03:07:12.600 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 25411
2025-02-11 03:07:12.600 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 03:07:13.601 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25411/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:07:13.604 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 03:07:13.604 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 03:07:13.604 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25411/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:07:13.606 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.210.217/tcp/25412/p2p/16Uiu2HAmGmhEcxZjeKuVkVhkWFrTACwSf88Mg3BSSKXSRzTbKzvF","/ip4/172.18.210.217/tcp/25413/ws/p2p/16Uiu2HAmGmhEcxZjeKuVkVhkWFrTACwSf88Mg3BSSKXSRzTbKzvF"],"enrUri":"enr:-L24QExB6hw9DkcRn1X09hncEa1tXDsRmikQU4MYLVEDteF6M07Z3Q9TswnuvAaPO6PFkIQDzjsoDprBe-Lf44zAiEcCgmlkgnY0gmlwhKwS0tmKbXVsdGlhZGRyc5YACASsEtLZBmNEAAoErBLS2QZjRd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDPSZ2HfGKt4gyvHY879P_vHD7-VUfW24rwjzE_WNmw4SDdGNwgmNEg3VkcIJjRoV3YWt1Mg0"}'
2025-02-11 03:07:13.606 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 03:07:13.607 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 03:07:13.607 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 03:07:13.608 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 03:07:13.608 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.196.112
2025-02-11 03:07:13.608 DEBUG [src.node.docker_mananger] Generated ports ['11194', '11195', '11196', '11197', '11198']
2025-02-11 03:07:13.608 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 03:07:13.609 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 03:07:13.609 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 03:07:13.609 DEBUG [src.node.docker_mananger] docker run -i -t -p 11194:11194 -p 11195:11195 -p 11196:11196 -p 11197:11197 -p 11198:11198 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=11196 --rest-port=11194 --tcp-port=11195 --discv5-udp-port=11197 --rest-address=0.0.0.0 --nat=extip:172.18.196.112 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4678e0d2c11c0fbb069f2bfe1bcee59aee9ab9ddaa7f34eb9aaeee052a7b7f5e --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --filternode=/ip4/172.18.210.217/tcp/25412/p2p/16Uiu2HAmGmhEcxZjeKuVkVhkWFrTACwSf88Mg3BSSKXSRzTbKzvF --discv5-bootstrap-node=enr:-L24QExB6hw9DkcRn1X09hncEa1tXDsRmikQU4MYLVEDteF6M07Z3Q9TswnuvAaPO6PFkIQDzjsoDprBe-Lf44zAiEcCgmlkgnY0gmlwhKwS0tmKbXVsdGlhZGRyc5YACASsEtLZBmNEAAoErBLS2QZjRd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDPSZ2HfGKt4gyvHY879P_vHD7-VUfW24rwjzE_WNmw4SDdGNwgmNEg3VkcIJjRoV3YWt1Mg0 --pubsub-topic=/waku/2/rs/3/1
2025-02-11 03:07:13.837 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.196.112 waku fc498efa996482f6a1b7040e6d7822696c0f03c2b0ad6b54b643045050dbed69
2025-02-11 03:07:13.891 DEBUG [src.node.docker_mananger] Container started with ID fc498efa9964. Setting up logs at ./log/docker/node3_2025-02-11_03-07-03__adfc5953-ac47-4e23-8075-8a430704c721__wakuorg_go-waku:latest.log
2025-02-11 03:07:13.891 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 11194
2025-02-11 03:07:13.892 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 03:07:14.893 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11194/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:07:14.895 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QKjUhiSHyw8UA0S_Uw6rYOf2YVRQlMILDS1a3XG0qMnJZ5W8OFAXA9mgOUemYNlMRExlS2L2_8oBrnoWlP4oK7SGAZTy-aJbgmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQI8qgI45H48PiFe9B7vDUxRuAHkbduU6ueBFE9HWwlOAYN0Y3CCK7uDdWRwgiu9hXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/11195/p2p/16Uiu2HAkyWUoG6DK13B4ddVm6VLavZ658uHJtHSoUcT775MXMdsW","/ip4/127.0.0.1/tcp/11196/ws/p2p/16Uiu2HAkyWUoG6DK13B4ddVm6VLavZ658uHJtHSoUcT775MXMdsW","/ip4/172.17.0.4/tcp/11195/p2p/16Uiu2HAkyWUoG6DK13B4ddVm6VLavZ658uHJtHSoUcT775MXMdsW","/ip4/172.17.0.4/tcp/11196/ws/p2p/16Uiu2HAkyWUoG6DK13B4ddVm6VLavZ658uHJtHSoUcT775MXMdsW"]}'
2025-02-11 03:07:14.896 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 03:07:14.896 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:65042/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 03:07:14.898 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-11 03:07:14.898 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25411/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 03:07:14.901 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 03:07:14.901 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11194/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-11 03:07:26.399 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
2025-02-11 03:07:26.400 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:65042/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:07:26.402 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"id":"16Uiu2HAmGmhEcxZjeKuVkVhkWFrTACwSf88Mg3BSSKXSRzTbKzvF","multiaddrs":["/ip4/172.18.210.217/tcp/25412/p2p/16Uiu2HAmGmhEcxZjeKuVkVhkWFrTACwSf88Mg3BSSKXSRzTbKzvF","/ip4/172.18.210.217/tcp/25413/ws/p2p/16Uiu2HAmGmhEcxZjeKuVkVhkWFrTACwSf88Mg3BSSKXSRzTbKzvF"],"protocols":["/vac/waku/filter-push/2.0.0-beta1","/vac/waku/filter-subscribe/2.0.0-beta1","/vac/waku/lightpush/2.0.0-beta1","/vac/waku/relay/2.0.0"],"connected":true,"pubsubTopics":["/waku/2/rs/3/0","/waku/2/rs/3/1"]}]'
2025-02-11 03:07:26.402 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25411/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:07:26.405 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.2/tcp/65043/p2p/16Uiu2HAm9ERi969WXERabubNP8zDcz9QH2cQ3f61i214DHKRwcrK","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":false},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":false}],"origin":"Discv5"},{"multiaddr":"/ip4/172.17.0.4/tcp/11195/p2p/16Uiu2HAkyWUoG6DK13B4ddVm6VLavZ658uHJtHSoUcT775MXMdsW","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
2025-02-11 03:07:26.405 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11194/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:07:26.407 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"id":"16Uiu2HAmGmhEcxZjeKuVkVhkWFrTACwSf88Mg3BSSKXSRzTbKzvF","multiaddrs":["/ip4/172.18.210.217/tcp/25412/p2p/16Uiu2HAmGmhEcxZjeKuVkVhkWFrTACwSf88Mg3BSSKXSRzTbKzvF","/ip4/172.18.210.217/tcp/25413/ws/p2p/16Uiu2HAmGmhEcxZjeKuVkVhkWFrTACwSf88Mg3BSSKXSRzTbKzvF"],"protocols":["/vac/waku/relay/2.0.0","/vac/waku/lightpush/2.0.0-beta1","/vac/waku/filter-subscribe/2.0.0-beta1","/vac/waku/filter-push/2.0.0-beta1"],"connected":true,"pubsubTopics":["/waku/2/rs/3/0","/waku/2/rs/3/1"]}]'
2025-02-11 03:07:26.407 DEBUG [src.libs.common] Sleeping for 30 seconds
2025-02-11 03:07:56.408 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:65042/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1739243276408606464}}'
2025-02-11 03:07:56.419 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-11 03:07:56.419 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 03:07:57.420 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11194/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:07:57.422 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1739243276408606464,"ephemeral":false}]'
2025-02-11 03:07:57.425 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 03:07:57.426 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 03:07:57.426 DEBUG [src.node.waku_node] Stopping container with id 9c163e9ae9fd
2025-02-11 03:07:57.983 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 03:07:57.985 DEBUG [src.node.waku_node] Stopping container with id e7ac4be7c21b
2025-02-11 03:07:58.796 ERROR [src.node.docker_mananger] Max retries reached for container 9c163e9ae9fd. Exiting log stream.
2025-02-11 03:07:59.066 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 03:07:59.068 DEBUG [src.node.waku_node] Stopping container with id fc498efa9964
2025-02-11 03:07:59.594 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 03:07:59.596 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 03:07:59.602 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 03:07:59.612 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 03:07:59.616 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
