2025-02-11 03:05:28.626 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 03:05:28.627 DEBUG [tests.conftest] Running test: test_store_node_not_connected_directly_to_relaying_node with id: 2025-02-11_03-05-28__8f0db27d-7dff-4771-95ec-afb3582994d6
2025-02-11 03:05:28.627 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 03:05:28.627 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-11 03:05:28.628 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-11 03:05:28.635 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-11 03:05:28.635 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-11_03-05-28__8f0db27d-7dff-4771-95ec-afb3582994d6__wakuorg_go-waku:latest.log
2025-02-11 03:05:28.641 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 03:05:28.641 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-11_03-05-28__8f0db27d-7dff-4771-95ec-afb3582994d6__wakuorg_nwaku:latest.log
2025-02-11 03:05:28.646 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-11 03:05:28.646 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node3_2025-02-11_03-05-28__8f0db27d-7dff-4771-95ec-afb3582994d6__wakuorg_go-waku:latest.log
2025-02-11 03:05:28.647 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-11 03:05:28.647 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-11 03:05:28.648 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 03:05:28.648 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 03:05:28.714 DEBUG [src.node.docker_mananger] Network waku created
2025-02-11 03:05:28.714 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.68.66
2025-02-11 03:05:28.714 DEBUG [src.node.docker_mananger] Generated ports ['33632', '33633', '33634', '33635', '33636']
2025-02-11 03:05:28.715 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 03:05:28.715 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 03:05:28.715 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 03:05:28.715 DEBUG [src.node.docker_mananger] docker run -i -t -p 33632:33632 -p 33633:33633 -p 33634:33634 -p 33635:33635 -p 33636:33636 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=33634 --rest-port=33632 --tcp-port=33633 --discv5-udp-port=33635 --rest-address=0.0.0.0 --nat=extip:172.18.68.66 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1a9fcde2eebdec07bddc4cac124c86ad1f0bec9bb38ce37159be76806da63861 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true
2025-02-11 03:05:31.771 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.68.66 waku 4f54ff63d815fdcb00b2d628361404ebc300e47a8a3723da6c17adb5fe60f709
2025-02-11 03:05:31.821 DEBUG [src.node.docker_mananger] Container started with ID 4f54ff63d815. Setting up logs at ./log/docker/node1_2025-02-11_03-05-28__8f0db27d-7dff-4771-95ec-afb3582994d6__wakuorg_go-waku:latest.log
2025-02-11 03:05:31.823 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 33632
2025-02-11 03:05:31.824 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 03:05:32.826 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33632/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:05:32.828 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QBcoAP0-a_3DvrHjLh4Q9zrUQpJgsKiQF4b3BOLem1XmODSSh6o76t8rs8QaDrJm6b_KsOWj88zO5gUQ9WSyv8OGAZTy-BOrgmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaECziFlWPlq90EkeEKM3C0jRyItvSSzj2CWk4cS6AmTstWDdGNwgoNhg3VkcIKDY4V3YWt1MgE","listenAddresses":["/ip4/127.0.0.1/tcp/33633/p2p/16Uiu2HAm9JKW2QK42sFuTXWDUMU5YVq8w7dxtCX5Ra6LFge9oKpQ","/ip4/127.0.0.1/tcp/33634/ws/p2p/16Uiu2HAm9JKW2QK42sFuTXWDUMU5YVq8w7dxtCX5Ra6LFge9oKpQ","/ip4/172.17.0.2/tcp/33633/p2p/16Uiu2HAm9JKW2QK42sFuTXWDUMU5YVq8w7dxtCX5Ra6LFge9oKpQ","/ip4/172.17.0.2/tcp/33634/ws/p2p/16Uiu2HAm9JKW2QK42sFuTXWDUMU5YVq8w7dxtCX5Ra6LFge9oKpQ"]}'
2025-02-11 03:05:32.829 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 03:05:32.829 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 03:05:32.829 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 03:05:32.830 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 03:05:32.831 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.180.34
2025-02-11 03:05:32.831 DEBUG [src.node.docker_mananger] Generated ports ['39264', '39265', '39266', '39267', '39268']
2025-02-11 03:05:32.831 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 03:05:32.831 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 03:05:32.831 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 03:05:32.831 DEBUG [src.node.docker_mananger] docker run -i -t -p 39264:39264 -p 39265:39265 -p 39266:39266 -p 39267:39267 -p 39268:39268 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=39266 --rest-port=39264 --tcp-port=39265 --discv5-udp-port=39267 --rest-address=0.0.0.0 --nat=extip:172.18.180.34 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dfe8e8d5244f8cd73f65b9330a343c96b72dfcc615bb4ff2d63e5c0f4f3dc703 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=39268 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-J-4QBcoAP0-a_3DvrHjLh4Q9zrUQpJgsKiQF4b3BOLem1XmODSSh6o76t8rs8QaDrJm6b_KsOWj88zO5gUQ9WSyv8OGAZTy-BOrgmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaECziFlWPlq90EkeEKM3C0jRyItvSSzj2CWk4cS6AmTstWDdGNwgoNhg3VkcIKDY4V3YWt1MgE
2025-02-11 03:05:34.873 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.180.34 waku 538640dee172b36d45a0cfa7627b9d6b0a8262378f38b6a4c3382bd3b4247569
2025-02-11 03:05:34.920 DEBUG [src.node.docker_mananger] Container started with ID 538640dee172. Setting up logs at ./log/docker/node2_2025-02-11_03-05-28__8f0db27d-7dff-4771-95ec-afb3582994d6__wakuorg_nwaku:latest.log
2025-02-11 03:05:34.922 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 39264
2025-02-11 03:05:34.922 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 03:05:35.923 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39264/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:05:35.932 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 03:05:35.933 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 03:05:35.933 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39264/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:05:35.950 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.180.34/tcp/39265/p2p/16Uiu2HAmRhi4W5Dia489V7ND6WDuVrLPqKUxmmo7kcTPAVujcsBc","/ip4/172.18.180.34/tcp/39266/ws/p2p/16Uiu2HAmRhi4W5Dia489V7ND6WDuVrLPqKUxmmo7kcTPAVujcsBc"],"enrUri":"enr:-L24QHIDFEX4nqxzz8NmjXyxzz88l2w2XM3UrV5kAp0ub4yrV8uNobemKc25MBhuzYob91SJiv32wVzv_btMB8PSaroCgmlkgnY0gmlwhKwStCKKbXVsdGlhZGRyc5YACASsErQiBplhAAoErBK0IgaZYt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDwdpBAe5WlssFqS404UHQ1iy3T99r-zWM_ROePu2Uu4eDdGNwgplhg3VkcIKZY4V3YWt1MgM"}'
2025-02-11 03:05:35.951 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 03:05:35.951 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 03:05:35.951 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 03:05:35.953 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 03:05:35.953 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.108.203
2025-02-11 03:05:35.953 DEBUG [src.node.docker_mananger] Generated ports ['26288', '26289', '26290', '26291', '26292']
2025-02-11 03:05:35.954 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 03:05:35.955 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 03:05:35.956 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 03:05:35.956 DEBUG [src.node.docker_mananger] docker run -i -t -p 26288:26288 -p 26289:26289 -p 26290:26290 -p 26291:26291 -p 26292:26292 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=26290 --rest-port=26288 --tcp-port=26289 --discv5-udp-port=26291 --rest-address=0.0.0.0 --nat=extip:172.18.108.203 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5b6eafe538e4b90e23f0bae8bd1f620bab73aaeaacb5e690deab8ffebffa2bed --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --storenode=/ip4/172.18.180.34/tcp/39265/p2p/16Uiu2HAmRhi4W5Dia489V7ND6WDuVrLPqKUxmmo7kcTPAVujcsBc --discv5-bootstrap-node=enr:-L24QHIDFEX4nqxzz8NmjXyxzz88l2w2XM3UrV5kAp0ub4yrV8uNobemKc25MBhuzYob91SJiv32wVzv_btMB8PSaroCgmlkgnY0gmlwhKwStCKKbXVsdGlhZGRyc5YACASsErQiBplhAAoErBK0IgaZYt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDwdpBAe5WlssFqS404UHQ1iy3T99r-zWM_ROePu2Uu4eDdGNwgplhg3VkcIKZY4V3YWt1MgM --pubsub-topic=/waku/2/rs/3/1
2025-02-11 03:05:36.178 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.108.203 waku d85b71c91cf2a4915ec092a48bb301ac5a8cced62e7d286a22d2fecf5395bb62
2025-02-11 03:05:36.230 DEBUG [src.node.docker_mananger] Container started with ID d85b71c91cf2. Setting up logs at ./log/docker/node3_2025-02-11_03-05-28__8f0db27d-7dff-4771-95ec-afb3582994d6__wakuorg_go-waku:latest.log
2025-02-11 03:05:36.232 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 26288
2025-02-11 03:05:36.233 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 03:05:37.233 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26288/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:05:37.236 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QKsE0rrHjecnk8YcumYYhML6m7_Kkp4Siqdv_NXiZEfuRpsMjjSkNw9bhcmzwTvdT0V-TGshBj3RsoKocjeLSJuGAZTy-CTigmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQOzorjBhRLX-lH6J75cWmSsXS7p-JmcKt85_HW4ONy5a4N0Y3CCZrGDdWRwgmazhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/26289/p2p/16Uiu2HAmQkDEu3hdS69CXTPi6EuXRGNKwVED6WVFLGtXfRzdPPzS","/ip4/127.0.0.1/tcp/26290/ws/p2p/16Uiu2HAmQkDEu3hdS69CXTPi6EuXRGNKwVED6WVFLGtXfRzdPPzS","/ip4/172.17.0.4/tcp/26289/p2p/16Uiu2HAmQkDEu3hdS69CXTPi6EuXRGNKwVED6WVFLGtXfRzdPPzS","/ip4/172.17.0.4/tcp/26290/ws/p2p/16Uiu2HAmQkDEu3hdS69CXTPi6EuXRGNKwVED6WVFLGtXfRzdPPzS"]}'
2025-02-11 03:05:37.236 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 03:05:37.236 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33632/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 03:05:37.238 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-11 03:05:37.238 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:39264/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 03:05:37.241 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 03:05:37.242 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33632/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:05:37.244 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"id":"16Uiu2HAmRhi4W5Dia489V7ND6WDuVrLPqKUxmmo7kcTPAVujcsBc","multiaddrs":["/ip4/172.18.180.34/tcp/39265/p2p/16Uiu2HAmRhi4W5Dia489V7ND6WDuVrLPqKUxmmo7kcTPAVujcsBc","/ip4/172.18.180.34/tcp/39266/ws/p2p/16Uiu2HAmRhi4W5Dia489V7ND6WDuVrLPqKUxmmo7kcTPAVujcsBc"],"protocols":null,"connected":false,"pubsubTopics":[]}]'
2025-02-11 03:05:37.244 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39264/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:05:37.246 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.4/tcp/26289/p2p/16Uiu2HAmQkDEu3hdS69CXTPi6EuXRGNKwVED6WVFLGtXfRzdPPzS","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
2025-02-11 03:05:37.246 DEBUG [src.libs.common] Sleeping for 30 seconds
2025-02-11 03:06:07.247 DEBUG [src.steps.store] Relaying message
2025-02-11 03:06:07.247 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33632/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 03:06:07.250 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-11 03:06:07.251 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 03:06:07.452 DEBUG [src.steps.store] Checking that peer wakuorg/go-waku:latest can find the stored messages
2025-02-11 03:06:07.453 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26288/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-filter%2Fproto&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:06:07.458 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"0e2c9109711e4cc1572cffd0ddf25134b76222d427d3a2fd9ae8036acd859073","status_code":200,"status_desc":"OK","messages":[{"message_hash":"FRORO3m+956MAj34wkIUBrpwsHVAiO68Pq7RvXWz3Ss="}]}'
2025-02-11 03:06:07.460 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 03:06:07.461 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 03:06:07.462 DEBUG [src.node.waku_node] Stopping container with id 4f54ff63d815
2025-02-11 03:06:07.985 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 03:06:07.985 DEBUG [src.node.waku_node] Stopping container with id 538640dee172
2025-02-11 03:06:08.809 ERROR [src.node.docker_mananger] Max retries reached for container 4f54ff63d815. Exiting log stream.
2025-02-11 03:06:08.950 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 03:06:08.950 DEBUG [src.node.waku_node] Stopping container with id d85b71c91cf2
2025-02-11 03:06:09.419 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 03:06:09.422 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 03:06:09.430 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 03:06:09.442 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 03:06:09.447 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
