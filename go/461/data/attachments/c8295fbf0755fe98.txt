2025-02-11 03:09:10.019 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 03:09:10.019 DEBUG [tests.conftest] Running test: test_store_node_paused_and_unpaused with id: 2025-02-11_03-09-10__e8a037c2-a862-4bb5-a9e8-73e75dee2d8c
2025-02-11 03:09:10.019 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 03:09:10.020 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-11 03:09:10.020 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-11 03:09:10.026 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 03:09:10.026 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-11_03-09-10__e8a037c2-a862-4bb5-a9e8-73e75dee2d8c__wakuorg_nwaku:latest.log
2025-02-11 03:09:10.026 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 03:09:10.026 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 03:09:10.027 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 03:09:10.028 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.47.7
2025-02-11 03:09:10.028 DEBUG [src.node.docker_mananger] Generated ports ['32064', '32065', '32066', '32067', '32068']
2025-02-11 03:09:10.028 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 03:09:10.028 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 03:09:10.028 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 03:09:10.028 DEBUG [src.node.docker_mananger] docker run -i -t -p 32064:32064 -p 32065:32065 -p 32066:32066 -p 32067:32067 -p 32068:32068 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=32066 --rest-port=32064 --tcp-port=32065 --discv5-udp-port=32067 --rest-address=0.0.0.0 --nat=extip:172.18.47.7 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ce3f90c6844bac074d1eed2dfc0cb3b7afade636ef8cdeff8ffaf21a9e61a421 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=32068 --metrics-logging=true --store=true --relay=true
2025-02-11 03:09:10.254 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.47.7 waku aa52ddf34ff6292a9110484ea02508ec4e0fe2b84caf4e538f3b674f5e5e2b85
2025-02-11 03:09:10.301 DEBUG [src.node.docker_mananger] Container started with ID aa52ddf34ff6. Setting up logs at ./log/docker/publishing_node1_2025-02-11_03-09-10__e8a037c2-a862-4bb5-a9e8-73e75dee2d8c__wakuorg_nwaku:latest.log
2025-02-11 03:09:10.303 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 32064
2025-02-11 03:09:10.303 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 03:09:10.332 ERROR [src.node.docker_mananger] Max retries reached for container 80f4886c3a22. Exiting log stream.
2025-02-11 03:09:10.819 ERROR [src.node.docker_mananger] Max retries reached for container 566b064f8bd9. Exiting log stream.
2025-02-11 03:09:11.303 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32064/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:09:11.306 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 03:09:11.306 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 03:09:11.307 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32064/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:09:11.309 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.47.7/tcp/32065/p2p/16Uiu2HAkwoSjdr8bpwLYeHrkbMBFESGpjmizE5XAfNLsumSRhrGg","/ip4/172.18.47.7/tcp/32066/ws/p2p/16Uiu2HAkwoSjdr8bpwLYeHrkbMBFESGpjmizE5XAfNLsumSRhrGg"],"enrUri":"enr:-L24QDIiUYbFs9afYJ_73e4X8LjVZyNUp8CBfnqPNWaN1LazIaXI1Nwz4Hq_AJqr49ZobrvTUG-ScceiXYnW5J-SGAsCgmlkgnY0gmlwhKwSLweKbXVsdGlhZGRyc5YACASsEi8HBn1BAAoErBIvBwZ9Qt0DgnJzhQADAQAAiXNlY3AyNTZrMaECI0stL6f3C8lyiuvMw99wqNQspaiPb17VwRTGSi6M_NGDdGNwgn1Bg3VkcIJ9Q4V3YWt1MgM"}'
2025-02-11 03:09:11.309 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 03:09:11.315 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-11 03:09:11.315 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-11_03-09-10__e8a037c2-a862-4bb5-a9e8-73e75dee2d8c__wakuorg_go-waku:latest.log
2025-02-11 03:09:11.316 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 03:09:11.316 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 03:09:11.317 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 03:09:11.317 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.217.45
2025-02-11 03:09:11.317 DEBUG [src.node.docker_mananger] Generated ports ['27984', '27985', '27986', '27987', '27988']
2025-02-11 03:09:11.317 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 03:09:11.317 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 03:09:11.318 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 03:09:11.318 DEBUG [src.node.docker_mananger] docker run -i -t -p 27984:27984 -p 27985:27985 -p 27986:27986 -p 27987:27987 -p 27988:27988 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=27986 --rest-port=27984 --tcp-port=27985 --discv5-udp-port=27987 --rest-address=0.0.0.0 --nat=extip:172.18.217.45 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f7b4dfd01c857af1ce4d4aa5e2d4b87d0eafc7caddbb82ed7d5d243add081bee --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QDIiUYbFs9afYJ_73e4X8LjVZyNUp8CBfnqPNWaN1LazIaXI1Nwz4Hq_AJqr49ZobrvTUG-ScceiXYnW5J-SGAsCgmlkgnY0gmlwhKwSLweKbXVsdGlhZGRyc5YACASsEi8HBn1BAAoErBIvBwZ9Qt0DgnJzhQADAQAAiXNlY3AyNTZrMaECI0stL6f3C8lyiuvMw99wqNQspaiPb17VwRTGSi6M_NGDdGNwgn1Bg3VkcIJ9Q4V3YWt1MgM --storenode=/ip4/172.18.47.7/tcp/32065/p2p/16Uiu2HAkwoSjdr8bpwLYeHrkbMBFESGpjmizE5XAfNLsumSRhrGg --store=true --relay=true
2025-02-11 03:09:11.545 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.217.45 waku 117e2c3b9bdb8c230baa982cc5cdc99e30cea20d821c3083f33e21eba836d10c
2025-02-11 03:09:11.601 DEBUG [src.node.docker_mananger] Container started with ID 117e2c3b9bdb. Setting up logs at ./log/docker/store_node1_2025-02-11_03-09-10__e8a037c2-a862-4bb5-a9e8-73e75dee2d8c__wakuorg_go-waku:latest.log
2025-02-11 03:09:11.603 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 27984
2025-02-11 03:09:11.603 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 03:09:12.604 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27984/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:09:12.606 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QOFIuy_BfuTRf_J_WMFXOPTvfmqHzZS4Nb2kJdu6hSQBcPDVzwy_oBh1qOy2iaFjHZMUfZPG__o3W_wtTk6czJuGAZTy-24tgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaED2gWoAdgF4_aPWoI9bYPJMTmZZhcCOoF_GYT0TJs8B4CDdGNwgm1Rg3VkcIJtU4V3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/27985/p2p/16Uiu2HAmTL4EMwrbsYsqJLNub9iSw8UQ4avQFyHzL1cXMrRioYU7","/ip4/127.0.0.1/tcp/27986/ws/p2p/16Uiu2HAmTL4EMwrbsYsqJLNub9iSw8UQ4avQFyHzL1cXMrRioYU7","/ip4/172.17.0.3/tcp/27985/p2p/16Uiu2HAmTL4EMwrbsYsqJLNub9iSw8UQ4avQFyHzL1cXMrRioYU7","/ip4/172.17.0.3/tcp/27986/ws/p2p/16Uiu2HAmTL4EMwrbsYsqJLNub9iSw8UQ4avQFyHzL1cXMrRioYU7"]}'
2025-02-11 03:09:12.607 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 03:09:12.607 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27984/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.47.7/tcp/32065/p2p/16Uiu2HAkwoSjdr8bpwLYeHrkbMBFESGpjmizE5XAfNLsumSRhrGg", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-11 03:09:12.624 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-11 03:09:12.625 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32064/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 03:09:12.645 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 03:09:12.645 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27984/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 03:09:12.648 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-11 03:09:12.651 DEBUG [src.steps.store] Relaying message
2025-02-11 03:09:12.651 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32064/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 03:09:12.663 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 03:09:12.664 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 03:09:12.866 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-11 03:09:12.866 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32064/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:09:12.869 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xc9b88eb15ff87ad99199ee41afd5184373e315841a579401b12318a73a67951e"}]}'
2025-02-11 03:09:12.869 DEBUG [src.steps.store] Checking that peer wakuorg/go-waku:latest can find the stored messages
2025-02-11 03:09:12.869 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27984/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:09:12.874 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"643257563fd008357d54c34b42e95e54f43469fbf6f3dee429593d9f4b00fed4","status_code":200,"status_desc":"OK","messages":[{"message_hash":"ybiOsV/4etmRme5Br9UYQ3PjFYQaV5QBsSMYpzpnlR4="}]}'
2025-02-11 03:09:12.875 DEBUG [src.node.waku_node] Pausing container with id 117e2c3b9bdb
2025-02-11 03:09:12.884 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 03:09:13.884 DEBUG [src.node.waku_node] Unpause container with id 117e2c3b9bdb
2025-02-11 03:09:13.893 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27984/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:09:13.895 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QHRH0g99WsawgNziQ_QGwuGgynjSpslvU4yw8s5P7B-XQ2mP30thwidrW_k9F041jPQHWoLmaLc3YDJ7DjcIymWGAZTy-24ugmlkgnY0gmlwhKwRAAOCcnOFAAMBAACJc2VjcDI1NmsxoQPaBagB2AXj9o9agj1tg8kxOZlmFwI6gX8ZhPRMmzwHgIN0Y3CCbVGDdWRwgm1ThXdha3UyAw","listenAddresses":["/ip4/127.0.0.1/tcp/27985/p2p/16Uiu2HAmTL4EMwrbsYsqJLNub9iSw8UQ4avQFyHzL1cXMrRioYU7","/ip4/127.0.0.1/tcp/27986/ws/p2p/16Uiu2HAmTL4EMwrbsYsqJLNub9iSw8UQ4avQFyHzL1cXMrRioYU7","/ip4/172.17.0.3/tcp/27985/p2p/16Uiu2HAmTL4EMwrbsYsqJLNub9iSw8UQ4avQFyHzL1cXMrRioYU7","/ip4/172.17.0.3/tcp/27986/ws/p2p/16Uiu2HAmTL4EMwrbsYsqJLNub9iSw8UQ4avQFyHzL1cXMrRioYU7"]}'
2025-02-11 03:09:13.895 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 03:09:13.896 DEBUG [src.steps.store] Relaying message
2025-02-11 03:09:13.896 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32064/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 03:09:13.901 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 03:09:13.901 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 03:09:14.101 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-11 03:09:14.102 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32064/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:09:14.105 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xc9b88eb15ff87ad99199ee41afd5184373e315841a579401b12318a73a67951e"},{"messageHash":"0x269ef43494683b2e2b6d9a24ea3654df8c1fa7beb5c794fc5690b1f9779abfe7"}]}'
2025-02-11 03:09:14.105 DEBUG [src.steps.store] Checking that peer wakuorg/go-waku:latest can find the stored messages
2025-02-11 03:09:14.105 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27984/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:09:14.109 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"527b4482ee7a20a64f4b804813c1eb3e1e189892de7c2a4a4ebc989f5a3ef5bd","status_code":200,"status_desc":"OK","messages":[{"message_hash":"ybiOsV/4etmRme5Br9UYQ3PjFYQaV5QBsSMYpzpnlR4="},{"message_hash":"Jp70NJRoOy4rbZok6jZU34wfp761x5T8VpCx+Xeav+c="}]}'
2025-02-11 03:09:14.111 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32064/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:09:14.113 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xc9b88eb15ff87ad99199ee41afd5184373e315841a579401b12318a73a67951e"},{"messageHash":"0x269ef43494683b2e2b6d9a24ea3654df8c1fa7beb5c794fc5690b1f9779abfe7"}]}'
2025-02-11 03:09:14.113 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27984/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:09:14.236 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"66fb9c41723f54766c73426d09bf74a2730044286266101f43691261fbac6ca2","status_code":200,"status_desc":"OK","messages":[{"message_hash":"ybiOsV/4etmRme5Br9UYQ3PjFYQaV5QBsSMYpzpnlR4="},{"message_hash":"Jp70NJRoOy4rbZok6jZU34wfp761x5T8VpCx+Xeav+c="}]}'
2025-02-11 03:09:14.240 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 03:09:14.241 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 03:09:14.242 DEBUG [src.node.waku_node] Stopping container with id aa52ddf34ff6
2025-02-11 03:09:14.788 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 03:09:14.789 DEBUG [src.node.waku_node] Stopping container with id 117e2c3b9bdb
2025-02-11 03:09:15.292 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 03:09:15.292 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 03:09:15.307 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 03:09:15.310 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
