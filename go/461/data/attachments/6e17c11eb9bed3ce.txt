2025-02-11 03:11:35.154 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 03:11:35.154 DEBUG [tests.conftest] Running test: test_2_receiving_nodes__relay_node1_forwards_lightpushed_message_to_relay_node2 with id: 2025-02-11_03-11-35__ebaa229e-981d-4dce-a6be-6c6032d89b74
2025-02-11 03:11:35.155 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 03:11:35.155 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-11 03:11:35.165 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 03:11:35.165 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-11_03-11-35__ebaa229e-981d-4dce-a6be-6c6032d89b74__wakuorg_nwaku:latest.log
2025-02-11 03:11:35.165 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 03:11:35.165 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 03:11:35.167 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 03:11:35.167 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.180.36
2025-02-11 03:11:35.167 DEBUG [src.node.docker_mananger] Generated ports ['2042', '2043', '2044', '2045', '2046']
2025-02-11 03:11:35.167 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 03:11:35.167 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 03:11:35.167 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 03:11:35.167 DEBUG [src.node.docker_mananger] docker run -i -t -p 2042:2042 -p 2043:2043 -p 2044:2044 -p 2045:2045 -p 2046:2046 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2044 --rest-port=2042 --tcp-port=2043 --discv5-udp-port=2045 --rest-address=0.0.0.0 --nat=extip:172.18.180.36 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=65ec6faa521a4c93fc0c5ad5e2fbbb7b750d61a8c6857b7da3dbc4ef2f4cefed --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2046 --metrics-logging=true --lightpush=true --relay=true
2025-02-11 03:11:35.395 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.180.36 waku 542726b93a82b8d2d6ac96e67dde4e598cd55a9f91a97cc5ed850fb6b557559c
2025-02-11 03:11:35.445 ERROR [src.node.docker_mananger] Max retries reached for container 8ab8a7766256. Exiting log stream.
2025-02-11 03:11:35.448 DEBUG [src.node.docker_mananger] Container started with ID 542726b93a82. Setting up logs at ./log/docker/receiving_node1_2025-02-11_03-11-35__ebaa229e-981d-4dce-a6be-6c6032d89b74__wakuorg_nwaku:latest.log
2025-02-11 03:11:35.448 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 2042
2025-02-11 03:11:35.449 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 03:11:35.973 ERROR [src.node.docker_mananger] Max retries reached for container 1ddad09ed95d. Exiting log stream.
2025-02-11 03:11:36.449 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2042/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:11:36.452 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 03:11:36.453 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 03:11:36.453 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2042/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:11:36.455 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.180.36/tcp/2043/p2p/16Uiu2HAmMYKLsc8uqZpzKCcYjycmQywjCagEdrLeY3EGmMrgUUZS","/ip4/172.18.180.36/tcp/2044/ws/p2p/16Uiu2HAmMYKLsc8uqZpzKCcYjycmQywjCagEdrLeY3EGmMrgUUZS"],"enrUri":"enr:-L24QDD3_fOKhqHt14SDjDipsbr0a3Q4MUO8TQQbttQly0PIAkY4N7otldSqUQ4lz3cSykCzfxZvBOpuDiCvfsKO1XYCgmlkgnY0gmlwhKwStCSKbXVsdGlhZGRyc5YACASsErQkBgf7AAoErBK0JAYH_N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDhAOXiCzjGAGI-9W_lDvfe9p5pkdgASf0_Gk0hKF76W2DdGNwggf7g3VkcIIH_YV3YWt1Mgk"}'
2025-02-11 03:11:36.455 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 03:11:36.462 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 03:11:36.462 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-11_03-11-35__ebaa229e-981d-4dce-a6be-6c6032d89b74__wakuorg_nwaku:latest.log
2025-02-11 03:11:36.462 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 03:11:36.462 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 03:11:36.464 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 03:11:36.464 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.136.70
2025-02-11 03:11:36.464 DEBUG [src.node.docker_mananger] Generated ports ['59555', '59556', '59557', '59558', '59559']
2025-02-11 03:11:36.464 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 03:11:36.464 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 03:11:36.464 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 03:11:36.464 DEBUG [src.node.docker_mananger] docker run -i -t -p 59555:59555 -p 59556:59556 -p 59557:59557 -p 59558:59558 -p 59559:59559 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=59557 --rest-port=59555 --tcp-port=59556 --discv5-udp-port=59558 --rest-address=0.0.0.0 --nat=extip:172.18.136.70 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=21f33dfe90abdad7f3fd77bfe5ca08cc8dce2afdba52c682ab53668afecfab97 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=59559 --metrics-logging=true --lightpush=false --relay=true
2025-02-11 03:11:36.695 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.136.70 waku 04ea0dceb3523519a87744dac52d0edda9e3e46a7d212c6fb5f5448795272855
2025-02-11 03:11:36.746 DEBUG [src.node.docker_mananger] Container started with ID 04ea0dceb352. Setting up logs at ./log/docker/receiving_node2_2025-02-11_03-11-35__ebaa229e-981d-4dce-a6be-6c6032d89b74__wakuorg_nwaku:latest.log
2025-02-11 03:11:36.746 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 59555
2025-02-11 03:11:36.746 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 03:11:37.747 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:59555/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:11:37.750 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 03:11:37.750 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 03:11:37.750 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:59555/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:11:37.753 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.136.70/tcp/59556/p2p/16Uiu2HAkyrVxsatD31coSPCvAoyR1SjdLimKRGAKznmfNFJxZX8C","/ip4/172.18.136.70/tcp/59557/ws/p2p/16Uiu2HAkyrVxsatD31coSPCvAoyR1SjdLimKRGAKznmfNFJxZX8C"],"enrUri":"enr:-L24QPOxXW-EQK546LabxZ17SM34e77CRsKO7JPvuitUkMc_GuKBc0C_mmWs_2ofJaichk4hzOmLrrRx6TNO2q1te3gCgmlkgnY0gmlwhKwSiEaKbXVsdGlhZGRyc5YACASsEohGBuikAAoErBKIRgbopd0DgnJzhQADAQAAiXNlY3AyNTZrMaECQcrxZSxhOY6xq-NYNT7XvvabN6dSDU50zxQSo3DyvOmDdGNwguikg3VkcILopoV3YWt1MgE"}'
2025-02-11 03:11:37.753 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 03:11:37.753 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:59555/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.180.36/tcp/2043/p2p/16Uiu2HAmMYKLsc8uqZpzKCcYjycmQywjCagEdrLeY3EGmMrgUUZS"]'
2025-02-11 03:11:37.791 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 03:11:37.802 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-11 03:11:37.802 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-11_03-11-35__ebaa229e-981d-4dce-a6be-6c6032d89b74__wakuorg_go-waku:latest.log
2025-02-11 03:11:37.802 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 03:11:37.802 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 03:11:37.803 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 03:11:37.804 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.203.150
2025-02-11 03:11:37.804 DEBUG [src.node.docker_mananger] Generated ports ['33793', '33794', '33795', '33796', '33797']
2025-02-11 03:11:37.804 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 03:11:37.804 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 03:11:37.804 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 03:11:37.804 DEBUG [src.node.docker_mananger] docker run -i -t -p 33793:33793 -p 33794:33794 -p 33795:33795 -p 33796:33796 -p 33797:33797 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=33795 --rest-port=33793 --tcp-port=33794 --discv5-udp-port=33796 --rest-address=0.0.0.0 --nat=extip:172.18.203.150 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eaae1ae6fadd27bcac3d8db94be5fc2057bff687c51dcc100d88b51401921fa2 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QDD3_fOKhqHt14SDjDipsbr0a3Q4MUO8TQQbttQly0PIAkY4N7otldSqUQ4lz3cSykCzfxZvBOpuDiCvfsKO1XYCgmlkgnY0gmlwhKwStCSKbXVsdGlhZGRyc5YACASsErQkBgf7AAoErBK0JAYH_N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDhAOXiCzjGAGI-9W_lDvfe9p5pkdgASf0_Gk0hKF76W2DdGNwggf7g3VkcIIH_YV3YWt1Mgk --lightpushnode=/ip4/172.18.180.36/tcp/2043/p2p/16Uiu2HAmMYKLsc8uqZpzKCcYjycmQywjCagEdrLeY3EGmMrgUUZS --lightpush=true --relay=false --pubsub-topic=/waku/2/rs/3/1
2025-02-11 03:11:38.044 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.203.150 waku 5f091e7e729e5192cabb4f8a8261364debf5188795eebd323191d0bf6e10ff1e
2025-02-11 03:11:38.094 DEBUG [src.node.docker_mananger] Container started with ID 5f091e7e729e. Setting up logs at ./log/docker/lightpush_node1_2025-02-11_03-11-35__ebaa229e-981d-4dce-a6be-6c6032d89b74__wakuorg_go-waku:latest.log
2025-02-11 03:11:38.096 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 33793
2025-02-11 03:11:38.096 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 03:11:39.096 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33793/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:11:39.098 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QFDfSEymsi1vzihWxdzDqmU1BFgKVz7_YJbdk1JCTe2rerCGBkd9yHFjqkBwsu0GYzim4TOsJ4lMTbBXloPGZYKGAZTy_aprgmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQMMf4wWrue53wSRkaI5yMxzZqDBvDqg10PFSvkoVLKnaIN0Y3CChAKDdWRwgoQEhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/33794/p2p/16Uiu2HAmDVn3eNq6uYK5XaPBFcSWjCGfTkrmAzGuZbdrCYEj6C1M","/ip4/127.0.0.1/tcp/33795/ws/p2p/16Uiu2HAmDVn3eNq6uYK5XaPBFcSWjCGfTkrmAzGuZbdrCYEj6C1M","/ip4/172.17.0.4/tcp/33794/p2p/16Uiu2HAmDVn3eNq6uYK5XaPBFcSWjCGfTkrmAzGuZbdrCYEj6C1M","/ip4/172.17.0.4/tcp/33795/ws/p2p/16Uiu2HAmDVn3eNq6uYK5XaPBFcSWjCGfTkrmAzGuZbdrCYEj6C1M"]}'
2025-02-11 03:11:39.099 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 03:11:39.099 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33793/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.180.36/tcp/2043/p2p/16Uiu2HAmMYKLsc8uqZpzKCcYjycmQywjCagEdrLeY3EGmMrgUUZS", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-11 03:11:39.101 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-11 03:11:39.101 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33793/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.136.70/tcp/59556/p2p/16Uiu2HAkyrVxsatD31coSPCvAoyR1SjdLimKRGAKznmfNFJxZX8C", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-11 03:11:39.116 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-11 03:11:39.118 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2042/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 03:11:39.123 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 03:11:39.125 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:59555/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 03:11:39.128 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 03:11:39.129 DEBUG [src.steps.light_push] Lightpushing message
2025-02-11 03:11:39.129 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33793/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739243499129026048}}'
2025-02-11 03:11:39.136 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-11 03:11:39.137 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 03:11:39.238 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-11 03:11:39.238 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2042/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:11:39.240 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739243499129026048,"ephemeral":false}]'
2025-02-11 03:11:39.242 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-11 03:11:39.242 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:59555/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:11:39.244 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739243499129026048,"ephemeral":false}]'
2025-02-11 03:11:39.246 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 03:11:39.247 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 03:11:39.247 DEBUG [src.node.waku_node] Stopping container with id 542726b93a82
2025-02-11 03:11:39.836 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 03:11:39.837 DEBUG [src.node.waku_node] Stopping container with id 04ea0dceb352
2025-02-11 03:11:40.671 ERROR [src.node.docker_mananger] Max retries reached for container 542726b93a82. Exiting log stream.
2025-02-11 03:11:41.320 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 03:11:41.320 DEBUG [src.node.waku_node] Stopping container with id 5f091e7e729e
2025-02-11 03:11:41.819 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 03:11:41.820 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 03:11:41.832 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 03:11:41.839 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 03:11:41.842 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
