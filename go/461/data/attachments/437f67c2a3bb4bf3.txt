2025-02-11 03:07:51.454 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 03:07:51.454 DEBUG [tests.conftest] Running test: test_get_store_messages_with_wrong_typo_content_topic with id: 2025-02-11_03-07-51__e8530fd9-fbf2-4f6b-9bb0-9e20d23bce91
2025-02-11 03:07:51.454 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 03:07:51.455 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-11 03:07:51.455 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-11 03:07:51.461 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 03:07:51.461 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-11_03-07-51__e8530fd9-fbf2-4f6b-9bb0-9e20d23bce91__wakuorg_nwaku:latest.log
2025-02-11 03:07:51.461 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 03:07:51.461 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 03:07:51.463 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 03:07:51.463 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.10.229
2025-02-11 03:07:51.463 DEBUG [src.node.docker_mananger] Generated ports ['55463', '55464', '55465', '55466', '55467']
2025-02-11 03:07:51.463 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 03:07:51.463 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 03:07:51.464 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 03:07:51.464 DEBUG [src.node.docker_mananger] docker run -i -t -p 55463:55463 -p 55464:55464 -p 55465:55465 -p 55466:55466 -p 55467:55467 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55465 --rest-port=55463 --tcp-port=55464 --discv5-udp-port=55466 --rest-address=0.0.0.0 --nat=extip:172.18.10.229 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b7eac7bdc5cdc2f8afa179a12be541bdea79c0c89fdca7e7f4642abc328cc61e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55467 --metrics-logging=true --store=true --relay=true
2025-02-11 03:07:51.693 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.10.229 waku 501eb95714a114ad1411b87138f41009a95d7682e4815ee78db6ca2f0216206f
2025-02-11 03:07:51.746 DEBUG [src.node.docker_mananger] Container started with ID 501eb95714a1. Setting up logs at ./log/docker/publishing_node1_2025-02-11_03-07-51__e8530fd9-fbf2-4f6b-9bb0-9e20d23bce91__wakuorg_nwaku:latest.log
2025-02-11 03:07:51.748 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 55463
2025-02-11 03:07:51.749 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 03:07:51.775 ERROR [src.node.docker_mananger] Max retries reached for container 620a8c158b25. Exiting log stream.
2025-02-11 03:07:52.249 ERROR [src.node.docker_mananger] Max retries reached for container fe0da7a0f446. Exiting log stream.
2025-02-11 03:07:52.750 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:55463/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:07:52.752 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 03:07:52.752 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 03:07:52.753 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:55463/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:07:52.755 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.10.229/tcp/55464/p2p/16Uiu2HAmPP7iqLBDnjZLiA9xmfaMGxRHURYeUihqfcR1HK9TFTqC","/ip4/172.18.10.229/tcp/55465/ws/p2p/16Uiu2HAmPP7iqLBDnjZLiA9xmfaMGxRHURYeUihqfcR1HK9TFTqC"],"enrUri":"enr:-L24QP8fNI34eHwJuPQ1tsbgsZAGLhZU3h-U80cqxQMw25huKTxLyed35SMWePjNuZI2qih0uOYDDVFciYSyHnxDoB8CgmlkgnY0gmlwhKwSCuWKbXVsdGlhZGRyc5YACASsEgrlBtioAAoErBIK5QbYqd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDn1-ZIdDYmwnD3Yq3A87aAJxCi3G9sgOsYTSlYus1M-ODdGNwgtiog3VkcILYqoV3YWt1MgM"}'
2025-02-11 03:07:52.755 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 03:07:52.762 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-11 03:07:52.762 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-11_03-07-51__e8530fd9-fbf2-4f6b-9bb0-9e20d23bce91__wakuorg_go-waku:latest.log
2025-02-11 03:07:52.762 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 03:07:52.762 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 03:07:52.764 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 03:07:52.764 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.139.41
2025-02-11 03:07:52.764 DEBUG [src.node.docker_mananger] Generated ports ['21213', '21214', '21215', '21216', '21217']
2025-02-11 03:07:52.764 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 03:07:52.764 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 03:07:52.764 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 03:07:52.764 DEBUG [src.node.docker_mananger] docker run -i -t -p 21213:21213 -p 21214:21214 -p 21215:21215 -p 21216:21216 -p 21217:21217 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=21215 --rest-port=21213 --tcp-port=21214 --discv5-udp-port=21216 --rest-address=0.0.0.0 --nat=extip:172.18.139.41 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fde8a5c4622c1cea76aad8a9a8d49dbcd3fa8dab802eceee3ab83d6b555cb2fd --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QP8fNI34eHwJuPQ1tsbgsZAGLhZU3h-U80cqxQMw25huKTxLyed35SMWePjNuZI2qih0uOYDDVFciYSyHnxDoB8CgmlkgnY0gmlwhKwSCuWKbXVsdGlhZGRyc5YACASsEgrlBtioAAoErBIK5QbYqd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDn1-ZIdDYmwnD3Yq3A87aAJxCi3G9sgOsYTSlYus1M-ODdGNwgtiog3VkcILYqoV3YWt1MgM --storenode=/ip4/172.18.10.229/tcp/55464/p2p/16Uiu2HAmPP7iqLBDnjZLiA9xmfaMGxRHURYeUihqfcR1HK9TFTqC --store=true --relay=true
2025-02-11 03:07:53.005 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.139.41 waku cd1e2eb46fec6386cf85a303179678f7619e28fdeb249bf370d92439810c299f
2025-02-11 03:07:53.063 DEBUG [src.node.docker_mananger] Container started with ID cd1e2eb46fec. Setting up logs at ./log/docker/store_node1_2025-02-11_03-07-51__e8530fd9-fbf2-4f6b-9bb0-9e20d23bce91__wakuorg_go-waku:latest.log
2025-02-11 03:07:53.063 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 21213
2025-02-11 03:07:53.065 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 03:07:54.065 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:21213/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:07:54.068 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QHi38mDE2dIy1S5SNBgmXpF98s-VQdriJ4h1JFEJ8BHzR8sqLvJWlC76wUFVamYm2VEIQrvqgLhp_0biRJb9Wu6GAZTy-jtkgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaECc44wHcCpORZT8qm3sowuRY6tQ3i-BoAXx5M9l48_ymeDdGNwglLeg3VkcIJS4IV3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/21214/p2p/16Uiu2HAm3Ckcjp1ZN9k7dzjHu7EC3ssdMXZi6z4R9xRtsuYdqHqg","/ip4/127.0.0.1/tcp/21215/ws/p2p/16Uiu2HAm3Ckcjp1ZN9k7dzjHu7EC3ssdMXZi6z4R9xRtsuYdqHqg","/ip4/172.17.0.3/tcp/21214/p2p/16Uiu2HAm3Ckcjp1ZN9k7dzjHu7EC3ssdMXZi6z4R9xRtsuYdqHqg","/ip4/172.17.0.3/tcp/21215/ws/p2p/16Uiu2HAm3Ckcjp1ZN9k7dzjHu7EC3ssdMXZi6z4R9xRtsuYdqHqg"]}'
2025-02-11 03:07:54.068 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 03:07:54.069 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:21213/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.10.229/tcp/55464/p2p/16Uiu2HAmPP7iqLBDnjZLiA9xmfaMGxRHURYeUihqfcR1HK9TFTqC", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-11 03:07:54.085 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-11 03:07:54.085 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55463/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 03:07:54.109 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 03:07:54.109 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:21213/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 03:07:54.112 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-11 03:07:54.114 DEBUG [tests.store.test_api_flags] Trying to publish msg with content topic /myapp/1/latest/protoo
2025-02-11 03:07:54.115 DEBUG [src.steps.store] Relaying message
2025-02-11 03:07:54.116 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55463/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/protoo", "timestamp": '$(date +%s%N)'}'
2025-02-11 03:07:54.129 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 03:07:54.129 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 03:07:54.330 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:21213/store/v3/messages?includeData=true&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fprotoo&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:07:54.335 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"14ed5052d30ab8cb818291fdada5187a8f2cee2208ce03e2665634c5d718b8ff","status_code":200,"status_desc":"OK","messages":[{"message_hash":"1MM4o6DwsQZzKdC8UNifbSb1xRoz1SwS5ohtvV+3NjU=","message":{"payload":"U3RvcmUgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/protoo","version":0,"timestamp":"1739243274115095296","meta":"","ephemeral":false,"rateLimitProof":""},"pubsub_topic":"/waku/2/rs/3/0"}]}'
2025-02-11 03:07:54.336 DEBUG [tests.store.test_api_flags] stored content topic is /myapp/1/latest/protoo
2025-02-11 03:07:54.338 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 03:07:54.339 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 03:07:54.339 DEBUG [src.node.waku_node] Stopping container with id 501eb95714a1
2025-02-11 03:07:54.935 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 03:07:54.936 DEBUG [src.node.waku_node] Stopping container with id cd1e2eb46fec
2025-02-11 03:07:55.561 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 03:07:55.562 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 03:07:55.568 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 03:07:55.572 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
