2025-02-11 03:07:26.560 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 03:07:26.560 DEBUG [tests.conftest] Running test: test_publishing_node_paused_and_unpaused with id: 2025-02-11_03-07-26__77afec28-c8bf-4aa2-a140-3fd3806941e6
2025-02-11 03:07:26.561 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 03:07:26.561 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-11 03:07:26.561 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-11 03:07:26.567 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 03:07:26.567 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-11_03-07-26__77afec28-c8bf-4aa2-a140-3fd3806941e6__wakuorg_nwaku:latest.log
2025-02-11 03:07:26.567 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 03:07:26.567 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 03:07:26.569 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 03:07:26.569 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.93.7
2025-02-11 03:07:26.569 DEBUG [src.node.docker_mananger] Generated ports ['40305', '40306', '40307', '40308', '40309']
2025-02-11 03:07:26.569 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 03:07:26.569 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 03:07:26.569 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 03:07:26.570 DEBUG [src.node.docker_mananger] docker run -i -t -p 40305:40305 -p 40306:40306 -p 40307:40307 -p 40308:40308 -p 40309:40309 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40307 --rest-port=40305 --tcp-port=40306 --discv5-udp-port=40308 --rest-address=0.0.0.0 --nat=extip:172.18.93.7 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0a3982db9cd05fbdcedfbc91ec1b8ebab17abe1bfd303a2bbaaa0a3ddffe99e5 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40309 --metrics-logging=true --store=true --relay=true
2025-02-11 03:07:26.799 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.93.7 waku 0aa93f1b61547caf1bff22cb6dd8a7610c21304bd232c683e565932d3f1b166e
2025-02-11 03:07:26.844 DEBUG [src.node.docker_mananger] Container started with ID 0aa93f1b6154. Setting up logs at ./log/docker/publishing_node1_2025-02-11_03-07-26__77afec28-c8bf-4aa2-a140-3fd3806941e6__wakuorg_nwaku:latest.log
2025-02-11 03:07:26.846 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 40305
2025-02-11 03:07:26.846 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 03:07:26.863 ERROR [src.node.docker_mananger] Max retries reached for container e14dac49f715. Exiting log stream.
2025-02-11 03:07:27.373 ERROR [src.node.docker_mananger] Max retries reached for container 1f5ea7163e31. Exiting log stream.
2025-02-11 03:07:27.846 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40305/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:07:27.850 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 03:07:27.850 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 03:07:27.850 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40305/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:07:27.852 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.93.7/tcp/40306/p2p/16Uiu2HAmErp296PknnH95nzVmGohVev4ULP5VR729nQYfmSqGG4r","/ip4/172.18.93.7/tcp/40307/ws/p2p/16Uiu2HAmErp296PknnH95nzVmGohVev4ULP5VR729nQYfmSqGG4r"],"enrUri":"enr:-L24QPqmPiyLvg8vKGWiF37fXgrVx35eYCuopI5N7cZRZcKjCU2MgYUl7CGck2jivFLF4_lUAn2OGNwHWo1rMSzqFWwCgmlkgnY0gmlwhKwSXQeKbXVsdGlhZGRyc5YACASsEl0HBp1yAAoErBJdBwadc90DgnJzhQADAQAAiXNlY3AyNTZrMaEDIL6px_pGs6yXpw214BGWjvuzXKcQ4vRca0t60aJAWPODdGNwgp1yg3VkcIKddIV3YWt1MgM"}'
2025-02-11 03:07:27.852 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 03:07:27.859 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-11 03:07:27.859 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-11_03-07-26__77afec28-c8bf-4aa2-a140-3fd3806941e6__wakuorg_go-waku:latest.log
2025-02-11 03:07:27.859 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 03:07:27.859 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 03:07:27.860 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 03:07:27.861 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.237.10
2025-02-11 03:07:27.861 DEBUG [src.node.docker_mananger] Generated ports ['45986', '45987', '45988', '45989', '45990']
2025-02-11 03:07:27.861 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 03:07:27.861 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 03:07:27.861 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 03:07:27.861 DEBUG [src.node.docker_mananger] docker run -i -t -p 45986:45986 -p 45987:45987 -p 45988:45988 -p 45989:45989 -p 45990:45990 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=45988 --rest-port=45986 --tcp-port=45987 --discv5-udp-port=45989 --rest-address=0.0.0.0 --nat=extip:172.18.237.10 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cc4c72d07da6074cbf7e21f376a28af3e9c816ee9db3ffcaebb8cbdc3e1e8a87 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QPqmPiyLvg8vKGWiF37fXgrVx35eYCuopI5N7cZRZcKjCU2MgYUl7CGck2jivFLF4_lUAn2OGNwHWo1rMSzqFWwCgmlkgnY0gmlwhKwSXQeKbXVsdGlhZGRyc5YACASsEl0HBp1yAAoErBJdBwadc90DgnJzhQADAQAAiXNlY3AyNTZrMaEDIL6px_pGs6yXpw214BGWjvuzXKcQ4vRca0t60aJAWPODdGNwgp1yg3VkcIKddIV3YWt1MgM --storenode=/ip4/172.18.93.7/tcp/40306/p2p/16Uiu2HAmErp296PknnH95nzVmGohVev4ULP5VR729nQYfmSqGG4r --store=true --relay=true
2025-02-11 03:07:28.098 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.237.10 waku f45f7804d317aa6adda3d9ebcf60b84a61af6d86f6b1acde5224a381663cf2fb
2025-02-11 03:07:28.150 DEBUG [src.node.docker_mananger] Container started with ID f45f7804d317. Setting up logs at ./log/docker/store_node1_2025-02-11_03-07-26__77afec28-c8bf-4aa2-a140-3fd3806941e6__wakuorg_go-waku:latest.log
2025-02-11 03:07:28.150 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 45986
2025-02-11 03:07:28.151 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 03:07:29.152 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45986/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:07:29.155 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QEQ9O2zA4WNpAC1NsEnTKAOJEWTV5y8zs3G7xohDUTipH11IuiiAWp_tZ5hSkLW0KanRf4LIx1zQ2Mvw-k8iP2GGAZTy-doYgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaEDSPi3oJAKr8Njvu2W9_DPAxcJ_MWe_o7JuBmmL7Zy916DdGNwgrOjg3VkcIKzpYV3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/45987/p2p/16Uiu2HAmHZqfurqL8u5WxkM617KcT4BHPQcynUYbqkWHdJPVLtx5","/ip4/127.0.0.1/tcp/45988/ws/p2p/16Uiu2HAmHZqfurqL8u5WxkM617KcT4BHPQcynUYbqkWHdJPVLtx5","/ip4/172.17.0.3/tcp/45987/p2p/16Uiu2HAmHZqfurqL8u5WxkM617KcT4BHPQcynUYbqkWHdJPVLtx5","/ip4/172.17.0.3/tcp/45988/ws/p2p/16Uiu2HAmHZqfurqL8u5WxkM617KcT4BHPQcynUYbqkWHdJPVLtx5"]}'
2025-02-11 03:07:29.155 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 03:07:29.156 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:45986/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.93.7/tcp/40306/p2p/16Uiu2HAmErp296PknnH95nzVmGohVev4ULP5VR729nQYfmSqGG4r", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-11 03:07:29.171 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-11 03:07:29.173 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40305/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 03:07:29.196 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 03:07:29.196 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:45986/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 03:07:29.198 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-11 03:07:29.201 DEBUG [src.steps.store] Relaying message
2025-02-11 03:07:29.201 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40305/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 03:07:29.213 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 03:07:29.214 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 03:07:29.414 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-11 03:07:29.415 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40305/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:07:29.418 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xe5c0a61c811fe7c7e9f4ee12520435eb372de10ef29f70bed16b52be329fdb4c"}]}'
2025-02-11 03:07:29.418 DEBUG [src.steps.store] Checking that peer wakuorg/go-waku:latest can find the stored messages
2025-02-11 03:07:29.419 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45986/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:07:29.424 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"8227069a750b501daa3b44f6f551a59520e93563333532687d9fd55cd4f5aaf8","status_code":200,"status_desc":"OK","messages":[{"message_hash":"5cCmHIEf58fp9O4SUgQ16zct4Q7yn3C+0WtSvjKf20w="}]}'
2025-02-11 03:07:29.424 DEBUG [src.node.waku_node] Pausing container with id 0aa93f1b6154
2025-02-11 03:07:29.433 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 03:07:30.434 DEBUG [src.node.waku_node] Unpause container with id 0aa93f1b6154
2025-02-11 03:07:30.444 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40305/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:07:30.446 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 03:07:30.446 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 03:07:30.446 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40305/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:07:30.448 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.93.7/tcp/40306/p2p/16Uiu2HAmErp296PknnH95nzVmGohVev4ULP5VR729nQYfmSqGG4r","/ip4/172.18.93.7/tcp/40307/ws/p2p/16Uiu2HAmErp296PknnH95nzVmGohVev4ULP5VR729nQYfmSqGG4r"],"enrUri":"enr:-L24QPqmPiyLvg8vKGWiF37fXgrVx35eYCuopI5N7cZRZcKjCU2MgYUl7CGck2jivFLF4_lUAn2OGNwHWo1rMSzqFWwCgmlkgnY0gmlwhKwSXQeKbXVsdGlhZGRyc5YACASsEl0HBp1yAAoErBJdBwadc90DgnJzhQADAQAAiXNlY3AyNTZrMaEDIL6px_pGs6yXpw214BGWjvuzXKcQ4vRca0t60aJAWPODdGNwgp1yg3VkcIKddIV3YWt1MgM"}'
2025-02-11 03:07:30.448 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 03:07:30.449 DEBUG [src.steps.store] Relaying message
2025-02-11 03:07:30.449 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40305/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 03:07:30.454 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 03:07:30.454 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 03:07:30.655 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-11 03:07:30.655 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40305/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:07:30.658 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xe5c0a61c811fe7c7e9f4ee12520435eb372de10ef29f70bed16b52be329fdb4c"},{"messageHash":"0xbc444dba9c0c28403aeb87a1018d9d6da1dc46c880bd36d9dfbf1bf925c4eea2"}]}'
2025-02-11 03:07:30.658 DEBUG [src.steps.store] Checking that peer wakuorg/go-waku:latest can find the stored messages
2025-02-11 03:07:30.659 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45986/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:07:30.663 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"fd7e07e1d53f71166646c546027f2b7080eef8659053b24f3d9ca8d08b896255","status_code":200,"status_desc":"OK","messages":[{"message_hash":"5cCmHIEf58fp9O4SUgQ16zct4Q7yn3C+0WtSvjKf20w="},{"message_hash":"vERNupwMKEA664ehAY2dbaHcRsiAvTbZ378b+SXE7qI="}]}'
2025-02-11 03:07:30.664 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40305/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:07:30.667 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xe5c0a61c811fe7c7e9f4ee12520435eb372de10ef29f70bed16b52be329fdb4c"},{"messageHash":"0xbc444dba9c0c28403aeb87a1018d9d6da1dc46c880bd36d9dfbf1bf925c4eea2"}]}'
2025-02-11 03:07:30.667 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:45986/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:07:30.789 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"282eecdf7f8bbb4d118e14671201eb4bc23aaca22e872ad6ef675a5bbbceae9f","status_code":200,"status_desc":"OK","messages":[{"message_hash":"5cCmHIEf58fp9O4SUgQ16zct4Q7yn3C+0WtSvjKf20w="},{"message_hash":"vERNupwMKEA664ehAY2dbaHcRsiAvTbZ378b+SXE7qI="}]}'
2025-02-11 03:07:30.792 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 03:07:30.793 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 03:07:30.793 DEBUG [src.node.waku_node] Stopping container with id 0aa93f1b6154
2025-02-11 03:07:31.325 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 03:07:31.325 DEBUG [src.node.waku_node] Stopping container with id f45f7804d317
2025-02-11 03:07:31.834 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 03:07:31.835 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 03:07:31.843 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 03:07:31.846 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
