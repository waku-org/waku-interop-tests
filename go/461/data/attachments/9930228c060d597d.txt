2025-02-11 03:05:36.885 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 03:05:36.886 DEBUG [tests.conftest] Running test: test_filter_ping_without_request_id with id: 2025-02-11_03-05-36__3a1c3c65-2099-45df-9f2c-bedc6b9c4dc7
2025-02-11 03:05:36.886 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 03:05:36.886 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-11 03:05:36.886 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-11 03:05:36.892 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 03:05:36.892 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-11_03-05-36__3a1c3c65-2099-45df-9f2c-bedc6b9c4dc7__wakuorg_nwaku:latest.log
2025-02-11 03:05:36.892 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 03:05:36.892 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 03:05:36.894 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 03:05:36.894 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.193.100
2025-02-11 03:05:36.894 DEBUG [src.node.docker_mananger] Generated ports ['26492', '26493', '26494', '26495', '26496']
2025-02-11 03:05:36.894 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 03:05:36.894 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 03:05:36.895 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 03:05:36.895 DEBUG [src.node.docker_mananger] docker run -i -t -p 26492:26492 -p 26493:26493 -p 26494:26494 -p 26495:26495 -p 26496:26496 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26494 --rest-port=26492 --tcp-port=26493 --discv5-udp-port=26495 --rest-address=0.0.0.0 --nat=extip:172.18.193.100 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ff56bf8426cecd6cec2a87ede3fc1e5e354ea5f5f04eafd248dcb81f6dba64df --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26496 --metrics-logging=true --relay=true --filter=true
2025-02-11 03:05:37.115 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.193.100 waku f17c7dc5f83c413356c359286bee03c730ecb506db8630107f4fb03dc3390dcd
2025-02-11 03:05:37.164 DEBUG [src.node.docker_mananger] Container started with ID f17c7dc5f83c. Setting up logs at ./log/docker/node1_2025-02-11_03-05-36__3a1c3c65-2099-45df-9f2c-bedc6b9c4dc7__wakuorg_nwaku:latest.log
2025-02-11 03:05:37.164 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 26492
2025-02-11 03:05:37.164 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 03:05:37.215 ERROR [src.node.docker_mananger] Max retries reached for container 613abb88c1fc. Exiting log stream.
2025-02-11 03:05:37.682 ERROR [src.node.docker_mananger] Max retries reached for container 7cac5add1bc3. Exiting log stream.
2025-02-11 03:05:38.166 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26492/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:05:38.169 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 03:05:38.169 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 03:05:38.170 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26492/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:05:38.172 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.193.100/tcp/26493/p2p/16Uiu2HAkwjSdttaZr7q27bCdchC82QQdu1TyGsY2WeSN79w9xmjr","/ip4/172.18.193.100/tcp/26494/ws/p2p/16Uiu2HAkwjSdttaZr7q27bCdchC82QQdu1TyGsY2WeSN79w9xmjr"],"enrUri":"enr:-L24QOhp8X0Epg7GqJCVrLI900UdAwL0TRhKAHTLP3xmsfaaeWNEqBQcSQ8P_E02C_5zLNI7Bw3Z1bQc3IA2mUh6DdECgmlkgnY0gmlwhKwSwWSKbXVsdGlhZGRyc5YACASsEsFkBmd9AAoErBLBZAZnft0DgnJzhQADAQAAiXNlY3AyNTZrMaECIkS9ya_sx3kbVMiHNxXXjKyQJVgGZluMKOgIocP6vr2DdGNwgmd9g3VkcIJnf4V3YWt1MgU"}'
2025-02-11 03:05:38.172 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 03:05:38.172 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-11 03:05:38.178 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-11 03:05:38.179 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-11_03-05-36__3a1c3c65-2099-45df-9f2c-bedc6b9c4dc7__wakuorg_go-waku:latest.log
2025-02-11 03:05:38.179 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 03:05:38.179 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 03:05:38.180 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 03:05:38.180 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.238.89
2025-02-11 03:05:38.180 DEBUG [src.node.docker_mananger] Generated ports ['37492', '37493', '37494', '37495', '37496']
2025-02-11 03:05:38.181 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 03:05:38.181 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 03:05:38.181 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 03:05:38.181 DEBUG [src.node.docker_mananger] docker run -i -t -p 37492:37492 -p 37493:37493 -p 37494:37494 -p 37495:37495 -p 37496:37496 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=37494 --rest-port=37492 --tcp-port=37493 --discv5-udp-port=37495 --rest-address=0.0.0.0 --nat=extip:172.18.238.89 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=95ccb3fa3f9a0b37de694fca664aad4e5e9f1cc153ca252ec7c63d16a3be944c --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-L24QOhp8X0Epg7GqJCVrLI900UdAwL0TRhKAHTLP3xmsfaaeWNEqBQcSQ8P_E02C_5zLNI7Bw3Z1bQc3IA2mUh6DdECgmlkgnY0gmlwhKwSwWSKbXVsdGlhZGRyc5YACASsEsFkBmd9AAoErBLBZAZnft0DgnJzhQADAQAAiXNlY3AyNTZrMaECIkS9ya_sx3kbVMiHNxXXjKyQJVgGZluMKOgIocP6vr2DdGNwgmd9g3VkcIJnf4V3YWt1MgU --filternode=/ip4/172.18.193.100/tcp/26493/p2p/16Uiu2HAkwjSdttaZr7q27bCdchC82QQdu1TyGsY2WeSN79w9xmjr --pubsub-topic=/waku/2/rs/3/1
2025-02-11 03:05:38.406 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.238.89 waku 958063dbc1600740ca1dc219a8d5a6ccd3b8d62c68336d87a1e89c6f4c362ac1
2025-02-11 03:05:38.456 DEBUG [src.node.docker_mananger] Container started with ID 958063dbc160. Setting up logs at ./log/docker/node2_2025-02-11_03-05-36__3a1c3c65-2099-45df-9f2c-bedc6b9c4dc7__wakuorg_go-waku:latest.log
2025-02-11 03:05:38.457 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 37492
2025-02-11 03:05:38.457 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 03:05:39.458 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37492/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:05:39.460 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QLfJxo0JA3dhHbIVOBfSinHGVILWdyBR87GmRFn5k1VVbB_2TvmUx6I1zBFkFq_ymDL4_xTHoRnzNXBNwMO3RM6GAZTy-C2VgmlkgnY0gmlwhKwRAAOCcnOFAAMBAAGJc2VjcDI1NmsxoQKozDC_4JuZSkdcdcqFYsErmWpq7tfeiFXrNDsgLJwTioN0Y3CCknWDdWRwgpJ3hXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/37493/p2p/16Uiu2HAm6nb4T1wfkRJrx8ZS32q8gyFTWSMV3oL86L4N25Jd5YF3","/ip4/127.0.0.1/tcp/37494/ws/p2p/16Uiu2HAm6nb4T1wfkRJrx8ZS32q8gyFTWSMV3oL86L4N25Jd5YF3","/ip4/172.17.0.3/tcp/37493/p2p/16Uiu2HAm6nb4T1wfkRJrx8ZS32q8gyFTWSMV3oL86L4N25Jd5YF3","/ip4/172.17.0.3/tcp/37494/ws/p2p/16Uiu2HAm6nb4T1wfkRJrx8ZS32q8gyFTWSMV3oL86L4N25Jd5YF3"]}'
2025-02-11 03:05:39.460 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 03:05:39.461 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37492/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.193.100/tcp/26493/p2p/16Uiu2HAkwjSdttaZr7q27bCdchC82QQdu1TyGsY2WeSN79w9xmjr", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-11 03:05:39.463 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-11 03:05:39.463 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-11 03:05:39.463 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:26492/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 03:05:39.466 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 03:05:39.467 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37492/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "3cf673f5-0e54-4b6c-b41d-b55c1e4c5567", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-11 03:05:39.472 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"3cf673f5-0e54-4b6c-b41d-b55c1e4c5567","statusDesc":"OK"}'
2025-02-11 03:05:39.474 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37492/filter/v2/subscriptions/" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:05:39.475 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:37492/filter/v2/subscriptions/. Response content: b'{"requestId":"","statusDesc":"bad request id"}'
2025-02-11 03:05:39.478 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 03:05:39.479 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 03:05:39.479 DEBUG [src.node.waku_node] Stopping container with id f17c7dc5f83c
2025-02-11 03:05:40.075 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 03:05:40.077 DEBUG [src.node.waku_node] Stopping container with id 958063dbc160
2025-02-11 03:05:40.906 ERROR [src.node.docker_mananger] Max retries reached for container f17c7dc5f83c. Exiting log stream.
2025-02-11 03:05:40.950 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 03:05:40.952 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 03:05:40.959 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 03:05:40.961 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
