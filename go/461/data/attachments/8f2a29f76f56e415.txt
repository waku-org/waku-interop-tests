2025-02-11 03:08:50.090 ERROR [src.node.docker_mananger] Max retries reached for container d3a2a8e7c981. Exiting log stream.
2025-02-11 03:08:52.788 DEBUG [src.postgres_setup] Postgres container started
2025-02-11 03:08:52.789 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 03:08:52.789 DEBUG [tests.conftest] Running test: test_on_empty_postgress_db with id: 2025-02-11_03-08-52__28c94d70-3c3f-4ee7-be2f-d95e2e6960af
2025-02-11 03:08:52.790 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 03:08:52.790 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-11 03:08:52.797 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 03:08:52.797 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-11_03-08-52__28c94d70-3c3f-4ee7-be2f-d95e2e6960af__wakuorg_nwaku:latest.log
2025-02-11 03:08:52.797 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 03:08:52.797 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 03:08:52.799 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 03:08:52.799 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.126.51
2025-02-11 03:08:52.799 DEBUG [src.node.docker_mananger] Generated ports ['25036', '25037', '25038', '25039', '25040']
2025-02-11 03:08:52.799 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 03:08:52.800 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 03:08:52.800 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 03:08:52.800 DEBUG [src.node.docker_mananger] docker run -i -t -p 25036:25036 -p 25037:25037 -p 25038:25038 -p 25039:25039 -p 25040:25040 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25038 --rest-port=25036 --tcp-port=25037 --discv5-udp-port=25039 --rest-address=0.0.0.0 --nat=extip:172.18.126.51 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a0fa5f0b2afc3baf4dec22fb23cbc4dbfdc225b063e442abd4ce1ea356dea5a8 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25040 --metrics-logging=true --store=true --relay=true --store-message-db-url=postgres://postgres:test123@postgres:5432/postgres
2025-02-11 03:08:53.053 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.126.51 waku 2bb71dcb28f798f9b9b0ddba0c5e41c8c98229e9cdd82f3a37a8b2968382543a
2025-02-11 03:08:53.106 DEBUG [src.node.docker_mananger] Container started with ID 2bb71dcb28f7. Setting up logs at ./log/docker/publishing_node1_2025-02-11_03-08-52__28c94d70-3c3f-4ee7-be2f-d95e2e6960af__wakuorg_nwaku:latest.log
2025-02-11 03:08:53.106 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 25036
2025-02-11 03:08:53.106 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 03:08:54.107 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25036/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:09:14.128 ERROR [src.node.waku_node] REST service did not become ready in time: HTTPConnectionPool(host='127.0.0.1', port=25036): Read timed out. (read timeout=20)
2025-02-11 03:09:14.229 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 03:09:14.229 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 03:09:14.231 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 03:09:14.231 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.221.74
2025-02-11 03:09:14.231 DEBUG [src.node.docker_mananger] Generated ports ['33900', '33901', '33902', '33903', '33904']
2025-02-11 03:09:14.231 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 03:09:14.231 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 03:09:14.231 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 03:09:14.232 DEBUG [src.node.docker_mananger] docker run -i -t -p 33900:33900 -p 33901:33901 -p 33902:33902 -p 33903:33903 -p 33904:33904 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=33902 --rest-port=33900 --tcp-port=33901 --discv5-udp-port=33903 --rest-address=0.0.0.0 --nat=extip:172.18.221.74 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=15bafa4b45a42d883fbe24e99dc24dc85e106d17afef1fb9703b7b2fbcaff651 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=33904 --metrics-logging=true --store=true --relay=true --store-message-db-url=postgres://postgres:test123@postgres:5432/postgres
2025-02-11 03:09:14.463 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.221.74 waku a88383ca30dcef7e4d4b600f6e50f34ee58d0be5100b5b6081e9b6f3a6af49f0
2025-02-11 03:09:14.510 DEBUG [src.node.docker_mananger] Container started with ID a88383ca30dc. Setting up logs at ./log/docker/publishing_node1_2025-02-11_03-08-52__28c94d70-3c3f-4ee7-be2f-d95e2e6960af__wakuorg_nwaku:latest.log
2025-02-11 03:09:14.510 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 33900
2025-02-11 03:09:14.510 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 03:09:15.511 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33900/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:09:35.532 ERROR [src.node.waku_node] REST service did not become ready in time: HTTPConnectionPool(host='127.0.0.1', port=33900): Read timed out. (read timeout=20)
2025-02-11 03:09:35.633 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 03:09:35.633 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 03:09:35.634 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 03:09:35.635 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.56.202
2025-02-11 03:09:35.635 DEBUG [src.node.docker_mananger] Generated ports ['61671', '61672', '61673', '61674', '61675']
2025-02-11 03:09:35.635 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 03:09:35.635 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 03:09:35.635 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 03:09:35.635 DEBUG [src.node.docker_mananger] docker run -i -t -p 61671:61671 -p 61672:61672 -p 61673:61673 -p 61674:61674 -p 61675:61675 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=61673 --rest-port=61671 --tcp-port=61672 --discv5-udp-port=61674 --rest-address=0.0.0.0 --nat=extip:172.18.56.202 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9b72ea14ce7e2c1cfb43a92eeebbcd1ef083dafae4aaa16cbf9fdbb5eec93efd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=61675 --metrics-logging=true --store=true --relay=true --store-message-db-url=postgres://postgres:test123@postgres:5432/postgres
2025-02-11 03:09:35.863 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.56.202 waku af837d09627ed515b8f38e406773e7ba94c532e14e3b7ea0a409b94208257d6d
2025-02-11 03:09:35.916 DEBUG [src.node.docker_mananger] Container started with ID af837d09627e. Setting up logs at ./log/docker/publishing_node1_2025-02-11_03-08-52__28c94d70-3c3f-4ee7-be2f-d95e2e6960af__wakuorg_nwaku:latest.log
2025-02-11 03:09:35.916 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 61671
2025-02-11 03:09:35.916 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 03:09:36.917 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61671/health" -H "Content-Type: application/json" -d 'None'

+++++++++++++++++++++++++++++++++++ Timeout ++++++++++++++++++++++++++++++++++++

~~~~~~~~~ Stack of Thread-32 (_log_container_output) (139632184395456) ~~~~~~~~~
  File "/opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/threading.py", line 1032, in _bootstrap
    self._bootstrap_inner()
  File "/opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/threading.py", line 1075, in _bootstrap_inner
    self.run()
  File "/opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/threading.py", line 1012, in run
    self._target(*self._args, **self._kwargs)
  File "/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/docker_mananger.py", line 76, in _log_container_output
    for chunk in container.logs(stream=True):
  File "/opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/site-packages/docker/types/daemon.py", line 29, in __next__
    return next(self._stream)
  File "/opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/site-packages/docker/api/client.py", line 392, in _multiplexed_response_stream_helper
    header = response.raw.read(STREAM_HEADER_SIZE_BYTES)
  File "/opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/site-packages/urllib3/response.py", line 949, in read
    data = self._raw_read(amt)
  File "/opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/site-packages/urllib3/response.py", line 873, in _raw_read
    data = self._fp_read(amt, read1=read1) if not fp_closed else b""
  File "/opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/site-packages/urllib3/response.py", line 856, in _fp_read
    return self._fp.read(amt) if amt is not None else self._fp.read()
  File "/opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/http/client.py", line 473, in read
    return self._read_chunked(amt)
  File "/opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/http/client.py", line 595, in _read_chunked
    while (chunk_left := self._get_chunk_left()) is not None:
  File "/opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/http/client.py", line 579, in _get_chunk_left
    chunk_left = self._read_next_chunk_size()
  File "/opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/http/client.py", line 539, in _read_next_chunk_size
    line = self.fp.readline(_MAXLINE + 1)
  File "/opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/socket.py", line 720, in readinto
    return self._sock.recv_into(b)

~~~~~~~~~ Stack of Thread-31 (_log_container_output) (139632203269824) ~~~~~~~~~
  File "/opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/threading.py", line 1032, in _bootstrap
    self._bootstrap_inner()
  File "/opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/threading.py", line 1075, in _bootstrap_inner
    self.run()
  File "/opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/threading.py", line 1012, in run
    self._target(*self._args, **self._kwargs)
  File "/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/docker_mananger.py", line 76, in _log_container_output
    for chunk in container.logs(stream=True):
  File "/opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/site-packages/docker/types/daemon.py", line 29, in __next__
    return next(self._stream)
  File "/opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/site-packages/docker/api/client.py", line 392, in _multiplexed_response_stream_helper
    header = response.raw.read(STREAM_HEADER_SIZE_BYTES)
  File "/opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/site-packages/urllib3/response.py", line 949, in read
    data = self._raw_read(amt)
  File "/opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/site-packages/urllib3/response.py", line 873, in _raw_read
    data = self._fp_read(amt, read1=read1) if not fp_closed else b""
  File "/opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/site-packages/urllib3/response.py", line 856, in _fp_read
    return self._fp.read(amt) if amt is not None else self._fp.read()
  File "/opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/http/client.py", line 473, in read
    return self._read_chunked(amt)
  File "/opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/http/client.py", line 595, in _read_chunked
    while (chunk_left := self._get_chunk_left()) is not None:
  File "/opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/http/client.py", line 579, in _get_chunk_left
    chunk_left = self._read_next_chunk_size()
  File "/opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/http/client.py", line 539, in _read_next_chunk_size
    line = self.fp.readline(_MAXLINE + 1)
  File "/opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/socket.py", line 720, in readinto
    return self._sock.recv_into(b)

~~~~~~~~~ Stack of Thread-30 (_log_container_output) (139632165521088) ~~~~~~~~~
  File "/opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/threading.py", line 1032, in _bootstrap
    self._bootstrap_inner()
  File "/opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/threading.py", line 1075, in _bootstrap_inner
    self.run()
  File "/opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/threading.py", line 1012, in run
    self._target(*self._args, **self._kwargs)
  File "/home/runner/work/waku-interop-tests/waku-interop-tests/src/node/docker_mananger.py", line 76, in _log_container_output
    for chunk in container.logs(stream=True):
  File "/opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/site-packages/docker/types/daemon.py", line 29, in __next__
    return next(self._stream)
  File "/opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/site-packages/docker/api/client.py", line 392, in _multiplexed_response_stream_helper
    header = response.raw.read(STREAM_HEADER_SIZE_BYTES)
  File "/opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/site-packages/urllib3/response.py", line 949, in read
    data = self._raw_read(amt)
  File "/opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/site-packages/urllib3/response.py", line 873, in _raw_read
    data = self._fp_read(amt, read1=read1) if not fp_closed else b""
  File "/opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/site-packages/urllib3/response.py", line 856, in _fp_read
    return self._fp.read(amt) if amt is not None else self._fp.read()
  File "/opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/http/client.py", line 473, in read
    return self._read_chunked(amt)
  File "/opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/http/client.py", line 595, in _read_chunked
    while (chunk_left := self._get_chunk_left()) is not None:
  File "/opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/http/client.py", line 579, in _get_chunk_left
    chunk_left = self._read_next_chunk_size()
  File "/opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/http/client.py", line 539, in _read_next_chunk_size
    line = self.fp.readline(_MAXLINE + 1)
  File "/opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/socket.py", line 720, in readinto
    return self._sock.recv_into(b)

~~~~~~~~~~~~~~~ Stack of Thread-1 (run_server) (139632299738816) ~~~~~~~~~~~~~~~
  File "/opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/threading.py", line 1032, in _bootstrap
    self._bootstrap_inner()
  File "/opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/threading.py", line 1075, in _bootstrap_inner
    self.run()
  File "/opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/threading.py", line 1012, in run
    self._target(*self._args, **self._kwargs)
  File "/opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/site-packages/pytest_rerunfailures.py", line 439, in run_server
    conn, _ = self.sock.accept()
  File "/opt/hostedtoolcache/Python/3.12.8/x64/lib/python3.12/socket.py", line 295, in accept
    fd, addr = self._accept()

+++++++++++++++++++++++++++++++++++ Timeout ++++++++++++++++++++++++++++++++++++
2025-02-11 03:09:49.474 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 03:09:49.475 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 03:09:49.475 DEBUG [src.node.waku_node] Stopping container with id af837d09627e
2025-02-11 03:09:59.998 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 03:10:00.000 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 03:10:00.001 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 03:10:00.001 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 03:10:00.003 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 03:10:00.007 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 03:10:00.007 DEBUG [tests.conftest] Running test: test_on_empty_postgress_db with id: 2025-02-11_03-10-00__dd965bed-cafd-4446-905d-ba079bf1b3bd
2025-02-11 03:10:00.008 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 03:10:00.008 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-11 03:10:00.014 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 03:10:00.014 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-11_03-10-00__dd965bed-cafd-4446-905d-ba079bf1b3bd__wakuorg_nwaku:latest.log
2025-02-11 03:10:00.015 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 03:10:00.015 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 03:10:00.016 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 03:10:00.016 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.34.2
2025-02-11 03:10:00.016 DEBUG [src.node.docker_mananger] Generated ports ['38847', '38848', '38849', '38850', '38851']
2025-02-11 03:10:00.017 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 03:10:00.017 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 03:10:00.017 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 03:10:00.017 DEBUG [src.node.docker_mananger] docker run -i -t -p 38847:38847 -p 38848:38848 -p 38849:38849 -p 38850:38850 -p 38851:38851 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=38849 --rest-port=38847 --tcp-port=38848 --discv5-udp-port=38850 --rest-address=0.0.0.0 --nat=extip:172.18.34.2 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7e3d4a15a92ca1303c406e4d6f8cafedb5bd2c3eefdbdde6d74dc2fd3563c239 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=38851 --metrics-logging=true --store=true --relay=true --store-message-db-url=postgres://postgres:test123@postgres:5432/postgres
2025-02-11 03:10:00.253 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.34.2 waku 9d5e1a49ebf6dd6c2f0ae33a0d5304413099a1d6e3685b72230e6d47ef4f65d2
2025-02-11 03:10:00.300 DEBUG [src.node.docker_mananger] Container started with ID 9d5e1a49ebf6. Setting up logs at ./log/docker/publishing_node1_2025-02-11_03-10-00__dd965bed-cafd-4446-905d-ba079bf1b3bd__wakuorg_nwaku:latest.log
2025-02-11 03:10:00.300 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 38847
2025-02-11 03:10:00.300 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 03:10:00.814 ERROR [src.node.docker_mananger] Max retries reached for container af837d09627e. Exiting log stream.
2025-02-11 03:10:01.301 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38847/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:10:21.313 ERROR [src.node.waku_node] REST service did not become ready in time: HTTPConnectionPool(host='127.0.0.1', port=38847): Read timed out. (read timeout=20)
2025-02-11 03:10:21.413 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 03:10:21.414 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 03:10:21.416 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 03:10:21.416 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.183.91
2025-02-11 03:10:21.416 DEBUG [src.node.docker_mananger] Generated ports ['12772', '12773', '12774', '12775', '12776']
2025-02-11 03:10:21.416 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 03:10:21.416 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 03:10:21.416 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 03:10:21.417 DEBUG [src.node.docker_mananger] docker run -i -t -p 12772:12772 -p 12773:12773 -p 12774:12774 -p 12775:12775 -p 12776:12776 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=12774 --rest-port=12772 --tcp-port=12773 --discv5-udp-port=12775 --rest-address=0.0.0.0 --nat=extip:172.18.183.91 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a728dffb8d03dc720b1ac80eedfcb9cc3defa3457c09ae6f56a3ee539d7a04c4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=12776 --metrics-logging=true --store=true --relay=true --store-message-db-url=postgres://postgres:test123@postgres:5432/postgres
2025-02-11 03:10:21.654 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.183.91 waku 4bb8b00265572330faa9530ead238a28d4677d1e55cfd63de43619d637359f54
2025-02-11 03:10:21.703 DEBUG [src.node.docker_mananger] Container started with ID 4bb8b0026557. Setting up logs at ./log/docker/publishing_node1_2025-02-11_03-10-00__dd965bed-cafd-4446-905d-ba079bf1b3bd__wakuorg_nwaku:latest.log
2025-02-11 03:10:21.703 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 12772
2025-02-11 03:10:21.703 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 03:10:22.704 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:12772/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:10:42.713 ERROR [src.node.waku_node] REST service did not become ready in time: HTTPConnectionPool(host='127.0.0.1', port=12772): Read timed out. (read timeout=20)
2025-02-11 03:10:42.813 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 03:10:42.814 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 03:10:42.815 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 03:10:42.815 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.44.106
2025-02-11 03:10:42.816 DEBUG [src.node.docker_mananger] Generated ports ['11400', '11401', '11402', '11403', '11404']
2025-02-11 03:10:42.816 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 03:10:42.816 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 03:10:42.816 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 03:10:42.816 DEBUG [src.node.docker_mananger] docker run -i -t -p 11400:11400 -p 11401:11401 -p 11402:11402 -p 11403:11403 -p 11404:11404 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=11402 --rest-port=11400 --tcp-port=11401 --discv5-udp-port=11403 --rest-address=0.0.0.0 --nat=extip:172.18.44.106 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0acdbdede519564e8edc4c83aebd8dcfa986b80c9e56f405cf2b9f86e439de4d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=11404 --metrics-logging=true --store=true --relay=true --store-message-db-url=postgres://postgres:test123@postgres:5432/postgres
2025-02-11 03:10:43.047 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.44.106 waku ee5f262154d620a681b2beec825f597dde90fb2f0ba540ede08cd3b173eb925b
2025-02-11 03:10:43.091 DEBUG [src.node.docker_mananger] Container started with ID ee5f262154d6. Setting up logs at ./log/docker/publishing_node1_2025-02-11_03-10-00__dd965bed-cafd-4446-905d-ba079bf1b3bd__wakuorg_nwaku:latest.log
2025-02-11 03:10:43.091 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 11400
2025-02-11 03:10:43.092 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 03:10:44.093 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11400/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:10:44.096 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 03:10:44.096 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 03:10:44.097 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11400/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:10:44.099 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.44.106/tcp/11401/p2p/16Uiu2HAmAqpUgBR8NRGgqLbAa4zKYqWeQuAnxfsqW7Cri3qEEFHx","/ip4/172.18.44.106/tcp/11402/ws/p2p/16Uiu2HAmAqpUgBR8NRGgqLbAa4zKYqWeQuAnxfsqW7Cri3qEEFHx"],"enrUri":"enr:-L24QElbFVx2GoiqSdzV87Jn1wZk4wFYVgjdJAyIIOZfzv2LO5E4tp_2auYPd8EAbJGHuFlzXicmszoFjdEHI9WkFmACgmlkgnY0gmlwhKwSLGqKbXVsdGlhZGRyc5YACASsEixqBiyJAAoErBIsagYsit0DgnJzhQADAQAAiXNlY3AyNTZrMaEC5Q7aHUThvJ04T3z8Fam8WccJgNWNQHutfxT3IRwnkaeDdGNwgiyJg3VkcIIsi4V3YWt1MgM"}'
2025-02-11 03:10:44.099 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 03:10:44.106 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-11 03:10:44.106 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-11_03-10-00__dd965bed-cafd-4446-905d-ba079bf1b3bd__wakuorg_go-waku:latest.log
2025-02-11 03:10:44.106 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 03:10:44.106 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 03:10:44.107 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 03:10:44.108 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.39.115
2025-02-11 03:10:44.108 DEBUG [src.node.docker_mananger] Generated ports ['18561', '18562', '18563', '18564', '18565']
2025-02-11 03:10:44.108 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 03:10:44.108 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 03:10:44.108 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 03:10:44.108 DEBUG [src.node.docker_mananger] docker run -i -t -p 18561:18561 -p 18562:18562 -p 18563:18563 -p 18564:18564 -p 18565:18565 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=18563 --rest-port=18561 --tcp-port=18562 --discv5-udp-port=18564 --rest-address=0.0.0.0 --nat=extip:172.18.39.115 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0ec4a8478b49cdb631abac072adca2ebb769adfe45ab42f07b93bcfe7c0dcaf5 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QElbFVx2GoiqSdzV87Jn1wZk4wFYVgjdJAyIIOZfzv2LO5E4tp_2auYPd8EAbJGHuFlzXicmszoFjdEHI9WkFmACgmlkgnY0gmlwhKwSLGqKbXVsdGlhZGRyc5YACASsEixqBiyJAAoErBIsagYsit0DgnJzhQADAQAAiXNlY3AyNTZrMaEC5Q7aHUThvJ04T3z8Fam8WccJgNWNQHutfxT3IRwnkaeDdGNwgiyJg3VkcIIsi4V3YWt1MgM --storenode=/ip4/172.18.44.106/tcp/11401/p2p/16Uiu2HAmAqpUgBR8NRGgqLbAa4zKYqWeQuAnxfsqW7Cri3qEEFHx --store=false --relay=true
2025-02-11 03:10:44.348 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.39.115 waku a05e6d7c4349021a1c3aa069dfc9717d1d77cfafbb3f96fc4c631f50159dda18
2025-02-11 03:10:44.397 DEBUG [src.node.docker_mananger] Container started with ID a05e6d7c4349. Setting up logs at ./log/docker/store_node1_2025-02-11_03-10-00__dd965bed-cafd-4446-905d-ba079bf1b3bd__wakuorg_go-waku:latest.log
2025-02-11 03:10:44.399 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 18561
2025-02-11 03:10:44.399 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 03:10:45.399 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18561/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:10:45.402 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QLfv-1lcpjwZ8HDZp8J8qmAxt_QDMyt__lNzyr4bNmEtIeMepql9lgsJnyhbkC2eCqRVO2qILbLhW0W7_Ll06YCGAZTy_NitgmlkgnY0gmlwhKwRAAeCcnODAAMAiXNlY3AyNTZrMaEDZymb1WHdjJMmndN8OMkymo3PBSpdDlcx7I4TdsnAFNaDdGNwgkiCg3VkcIJIhIV3YWt1MgE","listenAddresses":["/ip4/127.0.0.1/tcp/18562/p2p/16Uiu2HAmKbh9DWCESZS887yK9fPC8iquRGfpZakd3XLiraZZUgwf","/ip4/127.0.0.1/tcp/18563/ws/p2p/16Uiu2HAmKbh9DWCESZS887yK9fPC8iquRGfpZakd3XLiraZZUgwf","/ip4/172.17.0.7/tcp/18562/p2p/16Uiu2HAmKbh9DWCESZS887yK9fPC8iquRGfpZakd3XLiraZZUgwf","/ip4/172.17.0.7/tcp/18563/ws/p2p/16Uiu2HAmKbh9DWCESZS887yK9fPC8iquRGfpZakd3XLiraZZUgwf"]}'
2025-02-11 03:10:45.402 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 03:10:45.403 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18561/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.44.106/tcp/11401/p2p/16Uiu2HAmAqpUgBR8NRGgqLbAa4zKYqWeQuAnxfsqW7Cri3qEEFHx", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-11 03:10:45.420 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-11 03:10:45.422 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11400/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 03:10:45.428 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 03:10:45.428 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18561/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 03:10:45.430 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-11 03:10:45.434 DEBUG [src.steps.store] Relaying message
2025-02-11 03:10:45.435 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11400/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 03:10:45.462 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 03:10:45.463 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 03:10:45.663 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-11 03:10:45.664 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11400/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:10:45.670 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xc2432501945f225a52b04c4ebdcd7703431afb6a70eaa895200e2899429cd2d7"}]}'
2025-02-11 03:10:45.670 DEBUG [src.steps.store] Checking that peer wakuorg/go-waku:latest can find the stored messages
2025-02-11 03:10:45.671 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18561/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-11 03:10:45.676 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"3dd3ddce6a204bc810b3cec3f3bb239b1518a23a89a607658b10f313123c353b","status_code":200,"status_desc":"OK","messages":[{"message_hash":"wkMlAZRfIlpSsExOvc13A0Ma+2pw6qiVIA4omUKc0tc="}]}'
2025-02-11 03:10:45.680 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 03:10:45.681 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 03:10:45.681 DEBUG [src.node.waku_node] Stopping container with id ee5f262154d6
2025-02-11 03:10:46.280 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 03:10:46.280 DEBUG [src.node.waku_node] Stopping container with id a05e6d7c4349
2025-02-11 03:10:46.930 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 03:10:46.933 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 03:10:46.948 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 03:10:46.962 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 03:10:46.976 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 03:10:46.980 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 03:10:47.106 DEBUG [src.postgres_setup] Postgres container stopped and removed.
