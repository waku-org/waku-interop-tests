2025-02-06 03:05:40.172 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-06 03:05:40.173 DEBUG [tests.conftest] Running test: test_light_push_with_missing_payload with id: 2025-02-06_03-05-40__bbf6374a-c443-4027-a753-2686619994f1
2025-02-06 03:05:40.173 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-06 03:05:40.173 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-06 03:05:40.179 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 03:05:40.180 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-06_03-05-40__bbf6374a-c443-4027-a753-2686619994f1__wakuorg_nwaku:latest.log
2025-02-06 03:05:40.180 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 03:05:40.180 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 03:05:40.181 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 03:05:40.181 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.121.223
2025-02-06 03:05:40.182 DEBUG [src.node.docker_mananger] Generated ports ['21599', '21600', '21601', '21602', '21603']
2025-02-06 03:05:40.182 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 03:05:40.182 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 03:05:40.182 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 03:05:40.182 DEBUG [src.node.docker_mananger] docker run -i -t -p 21599:21599 -p 21600:21600 -p 21601:21601 -p 21602:21602 -p 21603:21603 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=21601 --rest-port=21599 --tcp-port=21600 --discv5-udp-port=21602 --rest-address=0.0.0.0 --nat=extip:172.18.121.223 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bac0ec71a9b6d09df55749f7b2d2bd0ed33f77096192ab5a337a4c0d3fff9a2b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=21603 --metrics-logging=true --lightpush=true --relay=true
2025-02-06 03:05:40.410 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.121.223 waku 49f1f504242625b17b27acef140786b8f00f7cbcdfe29a9869f9949872f0e4be
2025-02-06 03:05:40.420 ERROR [src.node.docker_mananger] Max retries reached for container 289d78425960. Exiting log stream.
2025-02-06 03:05:40.459 DEBUG [src.node.docker_mananger] Container started with ID 49f1f5042426. Setting up logs at ./log/docker/receiving_node1_2025-02-06_03-05-40__bbf6374a-c443-4027-a753-2686619994f1__wakuorg_nwaku:latest.log
2025-02-06 03:05:40.460 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 21599
2025-02-06 03:05:40.460 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 03:05:40.976 ERROR [src.node.docker_mananger] Max retries reached for container fd0878185135. Exiting log stream.
2025-02-06 03:05:41.461 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:21599/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:05:41.464 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 03:05:41.464 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 03:05:41.464 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:21599/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:05:41.466 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.121.223/tcp/21600/p2p/16Uiu2HAmPuVJA8PQcbqK8jbpkAwpyoTPSMsvTaHtCGGsf62ALLtZ","/ip4/172.18.121.223/tcp/21601/ws/p2p/16Uiu2HAmPuVJA8PQcbqK8jbpkAwpyoTPSMsvTaHtCGGsf62ALLtZ"],"enrUri":"enr:-L24QHcnY9K1AjVLX6cCWMasbR2hxV7g4rpJobs3ydxQr6kwU7dPOjUCMHn5X3xEEINzdcFiBmEjy_krGd4JukJhQpgCgmlkgnY0gmlwhKwSed-KbXVsdGlhZGRyc5YACASsEnnfBlRgAAoErBJ53wZUYd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDpydqt_Vc9GvHjTYMPZUcP9eospzwqE-4yOwm_3_1S8KDdGNwglRgg3VkcIJUYoV3YWt1Mgk"}'
2025-02-06 03:05:41.466 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 03:05:41.473 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 03:05:41.473 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-06_03-05-40__bbf6374a-c443-4027-a753-2686619994f1__wakuorg_nwaku:latest.log
2025-02-06 03:05:41.473 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 03:05:41.473 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 03:05:41.475 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 03:05:41.475 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.220.70
2025-02-06 03:05:41.475 DEBUG [src.node.docker_mananger] Generated ports ['17078', '17079', '17080', '17081', '17082']
2025-02-06 03:05:41.475 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 03:05:41.475 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 03:05:41.475 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 03:05:41.476 DEBUG [src.node.docker_mananger] docker run -i -t -p 17078:17078 -p 17079:17079 -p 17080:17080 -p 17081:17081 -p 17082:17082 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17080 --rest-port=17078 --tcp-port=17079 --discv5-udp-port=17081 --rest-address=0.0.0.0 --nat=extip:172.18.220.70 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d5581f2dcccffadb0a988491fb75b8daac2deb725fed3e30b0bbdcbf32acf583 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17082 --metrics-logging=true --lightpush=false --relay=true
2025-02-06 03:05:41.713 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.220.70 waku 9f9f9f14ada49e618f382bf1f185e5b0dbd97b6e5689f70585fb8dfbcc4f2b79
2025-02-06 03:05:41.761 DEBUG [src.node.docker_mananger] Container started with ID 9f9f9f14ada4. Setting up logs at ./log/docker/receiving_node2_2025-02-06_03-05-40__bbf6374a-c443-4027-a753-2686619994f1__wakuorg_nwaku:latest.log
2025-02-06 03:05:41.761 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 17078
2025-02-06 03:05:41.761 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 03:05:42.762 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17078/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:05:42.764 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 03:05:42.765 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 03:05:42.765 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17078/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:05:42.767 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.220.70/tcp/17079/p2p/16Uiu2HAmDiMkHkioydimN957FJejpWDcrjNzqhQ6nxL3rGjMpZSN","/ip4/172.18.220.70/tcp/17080/ws/p2p/16Uiu2HAmDiMkHkioydimN957FJejpWDcrjNzqhQ6nxL3rGjMpZSN"],"enrUri":"enr:-L24QJehC56xu2aQBjbPHAAxXaCU2KYKE6Bgs2RzFIqE1ONHIoxtvtXxwZeoNsblnpiWNGQAsVOylADy3MI_BRrdyUkCgmlkgnY0gmlwhKwS3EaKbXVsdGlhZGRyc5YACASsEtxGBkK3AAoErBLcRgZCuN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDD7ifXKw9IdYAtno-lphg1pgW5Lj7evmUoVPWF4XZDVeDdGNwgkK3g3VkcIJCuYV3YWt1MgE"}'
2025-02-06 03:05:42.767 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 03:05:42.768 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17078/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.121.223/tcp/21600/p2p/16Uiu2HAmPuVJA8PQcbqK8jbpkAwpyoTPSMsvTaHtCGGsf62ALLtZ"]'
2025-02-06 03:05:42.808 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 03:05:42.816 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-06 03:05:42.816 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-06_03-05-40__bbf6374a-c443-4027-a753-2686619994f1__wakuorg_go-waku:latest.log
2025-02-06 03:05:42.816 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 03:05:42.816 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 03:05:42.818 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 03:05:42.818 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.71.72
2025-02-06 03:05:42.818 DEBUG [src.node.docker_mananger] Generated ports ['62464', '62465', '62466', '62467', '62468']
2025-02-06 03:05:42.818 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 03:05:42.818 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 03:05:42.818 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 03:05:42.819 DEBUG [src.node.docker_mananger] docker run -i -t -p 62464:62464 -p 62465:62465 -p 62466:62466 -p 62467:62467 -p 62468:62468 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=62466 --rest-port=62464 --tcp-port=62465 --discv5-udp-port=62467 --rest-address=0.0.0.0 --nat=extip:172.18.71.72 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fc0adce78ee0fab0438ccaac6ff74c129bc5cea0cf7fd8ede4b5f9ed6bbce42c --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QHcnY9K1AjVLX6cCWMasbR2hxV7g4rpJobs3ydxQr6kwU7dPOjUCMHn5X3xEEINzdcFiBmEjy_krGd4JukJhQpgCgmlkgnY0gmlwhKwSed-KbXVsdGlhZGRyc5YACASsEnnfBlRgAAoErBJ53wZUYd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDpydqt_Vc9GvHjTYMPZUcP9eospzwqE-4yOwm_3_1S8KDdGNwglRgg3VkcIJUYoV3YWt1Mgk --lightpushnode=/ip4/172.18.121.223/tcp/21600/p2p/16Uiu2HAmPuVJA8PQcbqK8jbpkAwpyoTPSMsvTaHtCGGsf62ALLtZ --lightpush=true --relay=false --pubsub-topic=/waku/2/rs/3/1
2025-02-06 03:05:43.056 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.71.72 waku 5927dba7103f35ef17f88aabbd8019fa056e1c1b5e8d758d32ec9d620f33dd72
2025-02-06 03:05:43.113 DEBUG [src.node.docker_mananger] Container started with ID 5927dba7103f. Setting up logs at ./log/docker/lightpush_node1_2025-02-06_03-05-40__bbf6374a-c443-4027-a753-2686619994f1__wakuorg_go-waku:latest.log
2025-02-06 03:05:43.113 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 62464
2025-02-06 03:05:43.114 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 03:05:44.115 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:62464/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:05:44.117 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QHaMYo6yx7lJ25vq-LAqRcT1d4oT7j8CYhbzC08oB3rWBXySzmpx5udFugzg84SyjDj-mmi1Kmzsi1CWia4TPjGGAZTZOHO_gmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQIojancq3aYsZQ3e26K4dYjbQhbbFkcKv-h9d9yLIPwW4N0Y3CC9AGDdWRwgvQDhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/62465/p2p/16Uiu2HAkx9yaMQsmgbVJYMn8kLXzcAnRtN4kLdaYeCHqqD2YwBXg","/ip4/127.0.0.1/tcp/62466/ws/p2p/16Uiu2HAkx9yaMQsmgbVJYMn8kLXzcAnRtN4kLdaYeCHqqD2YwBXg","/ip4/172.17.0.4/tcp/62465/p2p/16Uiu2HAkx9yaMQsmgbVJYMn8kLXzcAnRtN4kLdaYeCHqqD2YwBXg","/ip4/172.17.0.4/tcp/62466/ws/p2p/16Uiu2HAkx9yaMQsmgbVJYMn8kLXzcAnRtN4kLdaYeCHqqD2YwBXg"]}'
2025-02-06 03:05:44.118 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 03:05:44.118 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62464/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.121.223/tcp/21600/p2p/16Uiu2HAmPuVJA8PQcbqK8jbpkAwpyoTPSMsvTaHtCGGsf62ALLtZ", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-06 03:05:44.120 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-06 03:05:44.121 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62464/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.220.70/tcp/17079/p2p/16Uiu2HAmDiMkHkioydimN957FJejpWDcrjNzqhQ6nxL3rGjMpZSN", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-06 03:05:44.136 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-06 03:05:44.138 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:21599/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-06 03:05:44.145 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 03:05:44.146 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17078/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-06 03:05:44.149 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 03:05:44.150 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:62464/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"contentTopic": "/myapp/1/latest/proto", "timestamp": 1738811144150496768}}'
2025-02-06 03:05:44.152 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:62464/lightpush/v1/message. Response content: b'missing Payload field'
2025-02-06 03:05:44.154 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-06 03:05:44.154 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-06 03:05:44.155 DEBUG [src.node.waku_node] Stopping container with id 49f1f5042426
2025-02-06 03:05:44.742 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 03:05:44.744 DEBUG [src.node.waku_node] Stopping container with id 9f9f9f14ada4
2025-02-06 03:05:45.577 ERROR [src.node.docker_mananger] Max retries reached for container 49f1f5042426. Exiting log stream.
2025-02-06 03:05:46.263 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 03:05:46.264 DEBUG [src.node.waku_node] Stopping container with id 5927dba7103f
2025-02-06 03:05:46.797 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 03:05:46.799 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-06 03:05:46.813 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 03:05:46.819 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 03:05:46.822 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
