2025-02-06 03:09:25.785 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-06 03:09:25.785 DEBUG [tests.conftest] Running test: test_store_with_excessive_length_hash with id: 2025-02-06_03-09-25__1875d4ba-082e-4e01-a090-63d01f41f943
2025-02-06 03:09:25.785 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-06 03:09:25.785 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-06 03:09:25.786 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-06 03:09:25.792 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 03:09:25.792 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-06_03-09-25__1875d4ba-082e-4e01-a090-63d01f41f943__wakuorg_nwaku:latest.log
2025-02-06 03:09:25.792 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 03:09:25.792 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 03:09:25.794 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 03:09:25.794 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.4.181
2025-02-06 03:09:25.794 DEBUG [src.node.docker_mananger] Generated ports ['2835', '2836', '2837', '2838', '2839']
2025-02-06 03:09:25.794 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 03:09:25.794 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 03:09:25.794 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 03:09:25.795 DEBUG [src.node.docker_mananger] docker run -i -t -p 2835:2835 -p 2836:2836 -p 2837:2837 -p 2838:2838 -p 2839:2839 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=2837 --rest-port=2835 --tcp-port=2836 --discv5-udp-port=2838 --rest-address=0.0.0.0 --nat=extip:172.18.4.181 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c359954abd136a84e9ebc618eba4fd18e7afcefd262e68dde34dd9ed02efc1da --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=2839 --metrics-logging=true --store=true --relay=true
2025-02-06 03:09:26.028 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.4.181 waku 0f0a192247775000516e0a49dc7390b2d0e179a8c52700ab8e24a88221456107
2025-02-06 03:09:26.075 DEBUG [src.node.docker_mananger] Container started with ID 0f0a19224777. Setting up logs at ./log/docker/publishing_node1_2025-02-06_03-09-25__1875d4ba-082e-4e01-a090-63d01f41f943__wakuorg_nwaku:latest.log
2025-02-06 03:09:26.077 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 2835
2025-02-06 03:09:26.077 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 03:09:26.088 ERROR [src.node.docker_mananger] Max retries reached for container 14097360d27d. Exiting log stream.
2025-02-06 03:09:26.585 ERROR [src.node.docker_mananger] Max retries reached for container 3dea3fa4105a. Exiting log stream.
2025-02-06 03:09:27.077 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2835/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:09:27.080 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 03:09:27.080 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 03:09:27.081 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2835/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:09:27.082 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.4.181/tcp/2836/p2p/16Uiu2HAmJUQamKubSW4dK3vnCuDNHTBwsMTowgswtFrTWKZuy9qi","/ip4/172.18.4.181/tcp/2837/ws/p2p/16Uiu2HAmJUQamKubSW4dK3vnCuDNHTBwsMTowgswtFrTWKZuy9qi"],"enrUri":"enr:-L24QAK6XY4rKZrVhd7Iic_1qr5BtLh540nH94X_QpkLrTxwApRXJ-A5FbSbNpkaNXG-5SP2n5EFV4faV7hQWawE7TcCgmlkgnY0gmlwhKwSBLWKbXVsdGlhZGRyc5YACASsEgS1BgsUAAoErBIEtQYLFd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDVnAh2pw5qAGaVjSPvqwcEhF6lngscdqWZZAN52HiDSmDdGNwggsUg3VkcIILFoV3YWt1MgM"}'
2025-02-06 03:09:27.083 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 03:09:27.089 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-06 03:09:27.090 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-06_03-09-25__1875d4ba-082e-4e01-a090-63d01f41f943__wakuorg_go-waku:latest.log
2025-02-06 03:09:27.090 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 03:09:27.090 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 03:09:27.091 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 03:09:27.091 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.200.201
2025-02-06 03:09:27.091 DEBUG [src.node.docker_mananger] Generated ports ['19097', '19098', '19099', '19100', '19101']
2025-02-06 03:09:27.092 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 03:09:27.092 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 03:09:27.092 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 03:09:27.092 DEBUG [src.node.docker_mananger] docker run -i -t -p 19097:19097 -p 19098:19098 -p 19099:19099 -p 19100:19100 -p 19101:19101 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=19099 --rest-port=19097 --tcp-port=19098 --discv5-udp-port=19100 --rest-address=0.0.0.0 --nat=extip:172.18.200.201 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cdfdb22c7a67b90fd542e56cedf0e6f127baebca147c71ef8e7d07cbcba2155f --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QAK6XY4rKZrVhd7Iic_1qr5BtLh540nH94X_QpkLrTxwApRXJ-A5FbSbNpkaNXG-5SP2n5EFV4faV7hQWawE7TcCgmlkgnY0gmlwhKwSBLWKbXVsdGlhZGRyc5YACASsEgS1BgsUAAoErBIEtQYLFd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDVnAh2pw5qAGaVjSPvqwcEhF6lngscdqWZZAN52HiDSmDdGNwggsUg3VkcIILFoV3YWt1MgM --storenode=/ip4/172.18.4.181/tcp/2836/p2p/16Uiu2HAmJUQamKubSW4dK3vnCuDNHTBwsMTowgswtFrTWKZuy9qi --store=true --relay=true
2025-02-06 03:09:27.330 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.200.201 waku d996fd243c44e2e2b9b356dc7d5f7ce09da53f9f4a0a1ad3fab24597e819d49d
2025-02-06 03:09:27.381 DEBUG [src.node.docker_mananger] Container started with ID d996fd243c44. Setting up logs at ./log/docker/store_node1_2025-02-06_03-09-25__1875d4ba-082e-4e01-a090-63d01f41f943__wakuorg_go-waku:latest.log
2025-02-06 03:09:27.381 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 19097
2025-02-06 03:09:27.382 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 03:09:28.382 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19097/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:09:28.385 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QHTeUyiBt9n_yFoycL7nU0f4uednU4Ey0fkrBrPnl4n9LncaqXpPzHuPclxnXjUkrY5a7ZEmGfeWs2rUTbiAVmmGAZTZO9_TgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaEDipi-8gOc-TjYfIwBEaOfroHn9plt1PGfZau_0gZ9lDeDdGNwgkqag3VkcIJKnIV3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/19098/p2p/16Uiu2HAmMz1hgHYnpCQiofYRefgEx3SS6Ti8WNUcbwWoZzYF5p38","/ip4/127.0.0.1/tcp/19099/ws/p2p/16Uiu2HAmMz1hgHYnpCQiofYRefgEx3SS6Ti8WNUcbwWoZzYF5p38","/ip4/172.17.0.3/tcp/19098/p2p/16Uiu2HAmMz1hgHYnpCQiofYRefgEx3SS6Ti8WNUcbwWoZzYF5p38","/ip4/172.17.0.3/tcp/19099/ws/p2p/16Uiu2HAmMz1hgHYnpCQiofYRefgEx3SS6Ti8WNUcbwWoZzYF5p38"]}'
2025-02-06 03:09:28.385 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 03:09:28.386 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19097/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.4.181/tcp/2836/p2p/16Uiu2HAmJUQamKubSW4dK3vnCuDNHTBwsMTowgswtFrTWKZuy9qi", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-06 03:09:28.402 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-06 03:09:28.402 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2835/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-06 03:09:28.427 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 03:09:28.428 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:19097/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-06 03:09:28.430 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-06 03:09:28.433 DEBUG [src.steps.store] Relaying message
2025-02-06 03:09:28.433 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2835/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 03:09:28.446 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 03:09:28.446 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 03:09:28.647 DEBUG [src.steps.store] Relaying message
2025-02-06 03:09:28.647 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2835/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8x", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 03:09:28.653 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 03:09:28.653 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 03:09:28.854 DEBUG [src.steps.store] Relaying message
2025-02-06 03:09:28.854 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2835/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8y", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 03:09:28.860 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 03:09:28.860 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 03:09:29.060 DEBUG [src.steps.store] Relaying message
2025-02-06 03:09:29.061 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:2835/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8z", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 03:09:29.066 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 03:09:29.067 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 03:09:29.267 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:2835/store/v3/messages?hashes=AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:09:29.270 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:2835/store/v3/messages?hashes=AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&pageSize=50&ascending=true. Response content: b'waku message hash parsing error: invalid hash length: 25'
2025-02-06 03:09:29.271 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:19097/store/v3/messages?hashes=AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:09:29.273 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:19097/store/v3/messages?hashes=AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&pageSize=50&ascending=true. Response content: b'{"status_code":400,"status_desc":"illegal base64 data at input byte 48"}'
2025-02-06 03:09:29.274 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-06 03:09:29.276 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-06 03:09:29.276 DEBUG [src.node.waku_node] Stopping container with id 0f0a19224777
2025-02-06 03:09:29.831 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 03:09:29.832 DEBUG [src.node.waku_node] Stopping container with id d996fd243c44
2025-02-06 03:09:30.322 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 03:09:30.323 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-06 03:09:30.330 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 03:09:30.334 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
