2025-02-06 03:04:59.106 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-06 03:04:59.106 DEBUG [tests.conftest] Running test: test_lightpush with id: 2025-02-06_03-04-59__178a122c-03f8-40f8-84fa-27059873506b
2025-02-06 03:04:59.106 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-06 03:04:59.107 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-06 03:04:59.107 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-06 03:04:59.107 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-06 03:04:59.107 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-06 03:04:59.113 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 03:04:59.114 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-06_03-04-59__178a122c-03f8-40f8-84fa-27059873506b__wakuorg_nwaku:latest.log
2025-02-06 03:04:59.114 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 03:04:59.114 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 03:04:59.115 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 03:04:59.115 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.46.103
2025-02-06 03:04:59.115 DEBUG [src.node.docker_mananger] Generated ports ['15379', '15380', '15381', '15382', '15383']
2025-02-06 03:04:59.115 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 03:04:59.116 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 03:04:59.116 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 03:04:59.116 DEBUG [src.node.docker_mananger] docker run -i -t -p 15379:15379 -p 15380:15380 -p 15381:15381 -p 15382:15382 -p 15383:15383 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=15381 --rest-port=15379 --tcp-port=15380 --discv5-udp-port=15382 --rest-address=0.0.0.0 --nat=extip:172.18.46.103 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5820cefc6766cc5f18395a0ad7be5c8c6dabfada443a5ef7fdea2f94bcaaea5d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=15383 --metrics-logging=true --lightpush=true --relay=true
2025-02-06 03:04:59.336 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.46.103 waku 9fdc57e568ac3dfa9e3b2edb656007a20cd8051d1953be5915ab45ed3741ab30
2025-02-06 03:04:59.388 DEBUG [src.node.docker_mananger] Container started with ID 9fdc57e568ac. Setting up logs at ./log/docker/node1_2025-02-06_03-04-59__178a122c-03f8-40f8-84fa-27059873506b__wakuorg_nwaku:latest.log
2025-02-06 03:04:59.389 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 15379
2025-02-06 03:04:59.390 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 03:04:59.442 ERROR [src.node.docker_mananger] Max retries reached for container 11ddf4eae4fe. Exiting log stream.
2025-02-06 03:04:59.909 ERROR [src.node.docker_mananger] Max retries reached for container 8924b3a5174b. Exiting log stream.
2025-02-06 03:05:00.390 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15379/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:05:00.393 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 03:05:00.393 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 03:05:00.393 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15379/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:05:00.396 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.46.103/tcp/15380/p2p/16Uiu2HAm4VzfWQkbHKAn5FkwFSriU89iEtSBt4CHdnCDw5HLEi6y","/ip4/172.18.46.103/tcp/15381/ws/p2p/16Uiu2HAm4VzfWQkbHKAn5FkwFSriU89iEtSBt4CHdnCDw5HLEi6y"],"enrUri":"enr:-L24QNLNbI35RdZxY4Y8ly4iYM2w1CufbE32P-fqi4ehL7lTfOuUe3CiC8_1wHB6qlvRhFqZSZHUoG22FMLVx0Oa608CgmlkgnY0gmlwhKwSLmeKbXVsdGlhZGRyc5YACASsEi5nBjwUAAoErBIuZwY8Fd0DgnJzhQADAQAAiXNlY3AyNTZrMaEChtSh6UEHW1bPbkcRipPdSp5QMLvL40VGl2F_hFko8FaDdGNwgjwUg3VkcII8FoV3YWt1Mgk"}'
2025-02-06 03:05:00.396 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 03:05:00.402 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 03:05:00.402 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-06_03-04-59__178a122c-03f8-40f8-84fa-27059873506b__wakuorg_nwaku:latest.log
2025-02-06 03:05:00.402 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 03:05:00.402 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 03:05:00.404 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 03:05:00.404 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.139.118
2025-02-06 03:05:00.404 DEBUG [src.node.docker_mananger] Generated ports ['42889', '42890', '42891', '42892', '42893']
2025-02-06 03:05:00.404 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 03:05:00.404 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 03:05:00.404 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 03:05:00.404 DEBUG [src.node.docker_mananger] docker run -i -t -p 42889:42889 -p 42890:42890 -p 42891:42891 -p 42892:42892 -p 42893:42893 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42891 --rest-port=42889 --tcp-port=42890 --discv5-udp-port=42892 --rest-address=0.0.0.0 --nat=extip:172.18.139.118 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=309e3ec4feee0cfb7ccbb6107a3b489481adfe8f06ccecce926fb7b104f5b9bc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42893 --metrics-logging=true --lightpush=false --relay=true --discv5-bootstrap-node=enr:-L24QNLNbI35RdZxY4Y8ly4iYM2w1CufbE32P-fqi4ehL7lTfOuUe3CiC8_1wHB6qlvRhFqZSZHUoG22FMLVx0Oa608CgmlkgnY0gmlwhKwSLmeKbXVsdGlhZGRyc5YACASsEi5nBjwUAAoErBIuZwY8Fd0DgnJzhQADAQAAiXNlY3AyNTZrMaEChtSh6UEHW1bPbkcRipPdSp5QMLvL40VGl2F_hFko8FaDdGNwgjwUg3VkcII8FoV3YWt1Mgk
2025-02-06 03:05:00.620 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.139.118 waku 16f43cdfe91915d0533a05d73316f0e66d2037eb3fd021fd344c3e5a6373045f
2025-02-06 03:05:00.665 DEBUG [src.node.docker_mananger] Container started with ID 16f43cdfe919. Setting up logs at ./log/docker/node1_2025-02-06_03-04-59__178a122c-03f8-40f8-84fa-27059873506b__wakuorg_nwaku:latest.log
2025-02-06 03:05:00.666 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 42889
2025-02-06 03:05:00.667 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 03:05:01.667 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42889/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:05:01.673 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 03:05:01.673 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 03:05:01.675 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42889/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:05:01.681 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.139.118/tcp/42890/p2p/16Uiu2HAkyyKYosvNTqKTVSFuffEGCum3aupKcn4BQzGtmsu1TsM4","/ip4/172.18.139.118/tcp/42891/ws/p2p/16Uiu2HAkyyKYosvNTqKTVSFuffEGCum3aupKcn4BQzGtmsu1TsM4"],"enrUri":"enr:-L24QNrxZzQZD8YttcCL02HN4XHkVBAyb-tjxnUQKErZBEqDZEYf_9fKmXtx_P2wR5u5nlu72ZD9_DNq-H-DmTX3fEkCgmlkgnY0gmlwhKwSi3aKbXVsdGlhZGRyc5YACASsEot2BqeKAAoErBKLdgani90DgnJzhQADAQAAiXNlY3AyNTZrMaECQ4o7giHw3XB2ZSfkNo7kVTDjvM37rIUSIYrIW_blPaODdGNwgqeKg3VkcIKnjIV3YWt1MgE"}'
2025-02-06 03:05:01.681 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 03:05:01.688 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-06 03:05:01.688 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-06_03-04-59__178a122c-03f8-40f8-84fa-27059873506b__wakuorg_go-waku:latest.log
2025-02-06 03:05:01.688 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 03:05:01.688 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 03:05:01.689 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 03:05:01.690 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.44.241
2025-02-06 03:05:01.690 DEBUG [src.node.docker_mananger] Generated ports ['61594', '61595', '61596', '61597', '61598']
2025-02-06 03:05:01.690 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 03:05:01.690 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 03:05:01.690 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 03:05:01.690 DEBUG [src.node.docker_mananger] docker run -i -t -p 61594:61594 -p 61595:61595 -p 61596:61596 -p 61597:61597 -p 61598:61598 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=61596 --rest-port=61594 --tcp-port=61595 --discv5-udp-port=61597 --rest-address=0.0.0.0 --nat=extip:172.18.44.241 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fcddcd3cbdbea2954fd3babbd9b2f310b59a3d23ac67597e2a83d2cdae037c22 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --lightpush=true --relay=false --discv5-bootstrap-node=enr:-L24QNLNbI35RdZxY4Y8ly4iYM2w1CufbE32P-fqi4ehL7lTfOuUe3CiC8_1wHB6qlvRhFqZSZHUoG22FMLVx0Oa608CgmlkgnY0gmlwhKwSLmeKbXVsdGlhZGRyc5YACASsEi5nBjwUAAoErBIuZwY8Fd0DgnJzhQADAQAAiXNlY3AyNTZrMaEChtSh6UEHW1bPbkcRipPdSp5QMLvL40VGl2F_hFko8FaDdGNwgjwUg3VkcII8FoV3YWt1Mgk --lightpushnode=/ip4/172.18.46.103/tcp/15380/p2p/16Uiu2HAm4VzfWQkbHKAn5FkwFSriU89iEtSBt4CHdnCDw5HLEi6y --pubsub-topic=/waku/2/rs/3/1
2025-02-06 03:05:01.917 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.44.241 waku fc184625c2423771993bb1021e07fd6e907cccb1dc638156eb3a5a03cdeda52a
2025-02-06 03:05:01.973 DEBUG [src.node.docker_mananger] Container started with ID fc184625c242. Setting up logs at ./log/docker/node1_2025-02-06_03-04-59__178a122c-03f8-40f8-84fa-27059873506b__wakuorg_go-waku:latest.log
2025-02-06 03:05:01.973 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 61594
2025-02-06 03:05:01.973 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 03:05:02.973 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61594/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:05:02.976 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QJtVG21ZJ7USy2Fbbr5_80eBBo5SdFoAtANVCUB6Z-mWQPoQacPP077euyzZVMesbL0Y7EYICS6E0DvAGfjc2eyGAZTZN9MRgmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQI_Vv8lX_lLE1YpgWBHQnMXdT6KtLbdkI4fw75CqwPOLYN0Y3CC8JuDdWRwgvCdhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/61595/p2p/16Uiu2HAkygvc4KMgNDqAgWduGWX92vxGmkenbcQm7KMMhauaNMdW","/ip4/127.0.0.1/tcp/61596/ws/p2p/16Uiu2HAkygvc4KMgNDqAgWduGWX92vxGmkenbcQm7KMMhauaNMdW","/ip4/172.17.0.4/tcp/61595/p2p/16Uiu2HAkygvc4KMgNDqAgWduGWX92vxGmkenbcQm7KMMhauaNMdW","/ip4/172.17.0.4/tcp/61596/ws/p2p/16Uiu2HAkygvc4KMgNDqAgWduGWX92vxGmkenbcQm7KMMhauaNMdW"]}'
2025-02-06 03:05:02.976 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 03:05:02.976 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15379/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-06 03:05:02.980 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 03:05:02.981 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42889/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-06 03:05:02.988 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 03:05:02.988 DEBUG [src.steps.light_push] Lightpushing message
2025-02-06 03:05:02.989 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:61594/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": 1738811102988899328}}'
2025-02-06 03:05:06.487 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-06 03:05:06.490 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-06 03:05:06.590 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-06 03:05:06.590 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15379/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:05:06.593 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738811102988899328,"ephemeral":false}]'
2025-02-06 03:05:06.595 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-06 03:05:06.596 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42889/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:05:06.599 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738811102988899328,"ephemeral":false}]'
2025-02-06 03:05:06.602 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-06 03:05:06.602 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-06 03:05:06.603 DEBUG [src.node.waku_node] Stopping container with id 9fdc57e568ac
2025-02-06 03:05:07.189 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 03:05:07.189 DEBUG [src.node.waku_node] Stopping container with id 16f43cdfe919
2025-02-06 03:05:08.003 ERROR [src.node.docker_mananger] Max retries reached for container 9fdc57e568ac. Exiting log stream.
2025-02-06 03:05:08.622 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 03:05:08.622 DEBUG [src.node.waku_node] Stopping container with id fc184625c242
2025-02-06 03:05:09.086 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 03:05:09.088 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-06 03:05:09.095 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 03:05:09.102 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 03:05:09.104 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
