2025-02-06 03:05:48.675 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-06 03:05:48.675 DEBUG [tests.conftest] Running test: test_store_node_not_connected_directly_to_lightpushing_node with id: 2025-02-06_03-05-48__c5ae0bdc-1a7b-4ab9-82bb-e5af45a71ba2
2025-02-06 03:05:48.675 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-06 03:05:48.676 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-06 03:05:48.676 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-06 03:05:48.684 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-06 03:05:48.684 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-06_03-05-48__c5ae0bdc-1a7b-4ab9-82bb-e5af45a71ba2__wakuorg_go-waku:latest.log
2025-02-06 03:05:48.690 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 03:05:48.691 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-06_03-05-48__c5ae0bdc-1a7b-4ab9-82bb-e5af45a71ba2__wakuorg_nwaku:latest.log
2025-02-06 03:05:48.696 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-06 03:05:48.696 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node3_2025-02-06_03-05-48__c5ae0bdc-1a7b-4ab9-82bb-e5af45a71ba2__wakuorg_go-waku:latest.log
2025-02-06 03:05:48.696 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-06 03:05:48.697 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-06 03:05:48.697 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 03:05:48.698 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 03:05:48.761 DEBUG [src.node.docker_mananger] Network waku created
2025-02-06 03:05:48.761 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.36.134
2025-02-06 03:05:48.761 DEBUG [src.node.docker_mananger] Generated ports ['56723', '56724', '56725', '56726', '56727']
2025-02-06 03:05:48.761 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 03:05:48.761 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 03:05:48.761 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 03:05:48.761 DEBUG [src.node.docker_mananger] docker run -i -t -p 56723:56723 -p 56724:56724 -p 56725:56725 -p 56726:56726 -p 56727:56727 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=56725 --rest-port=56723 --tcp-port=56724 --discv5-udp-port=56726 --rest-address=0.0.0.0 --nat=extip:172.18.36.134 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dfed89cc67eb5ded0bebb6b711cbd68e902938c2ea3250160cc71de0aecaf7b8 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --lightpush=true
2025-02-06 03:05:52.825 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.36.134 waku aba8770efbb243fc8c6e26cf2d16a2257d5d7e27114e014b87c96b1c6f22e296
2025-02-06 03:05:52.869 DEBUG [src.node.docker_mananger] Container started with ID aba8770efbb2. Setting up logs at ./log/docker/node1_2025-02-06_03-05-48__c5ae0bdc-1a7b-4ab9-82bb-e5af45a71ba2__wakuorg_go-waku:latest.log
2025-02-06 03:05:52.870 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 56723
2025-02-06 03:05:52.871 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 03:05:53.872 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56723/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:05:53.874 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QNfyBVGMieE_xXRuyV41iFK_NypH78piuBwJulSbwEBGfWsjXgd-wuJCDjVI7oMTHJpDdf6ChbSrS562ZT1qUeWGAZTZOJnsgmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaECQayR8IGl5RF2jR-S33QwQW269Tvaxc-59WM36l00g0KDdGNwgt2Ug3VkcILdloV3YWt1Mgk","listenAddresses":["/ip4/127.0.0.1/tcp/56724/p2p/16Uiu2HAkyr36t5EDyzMkSk8cZaiuuHFMA97uEsSJd93ubCuMju9K","/ip4/127.0.0.1/tcp/56725/ws/p2p/16Uiu2HAkyr36t5EDyzMkSk8cZaiuuHFMA97uEsSJd93ubCuMju9K","/ip4/172.17.0.2/tcp/56724/p2p/16Uiu2HAkyr36t5EDyzMkSk8cZaiuuHFMA97uEsSJd93ubCuMju9K","/ip4/172.17.0.2/tcp/56725/ws/p2p/16Uiu2HAkyr36t5EDyzMkSk8cZaiuuHFMA97uEsSJd93ubCuMju9K"]}'
2025-02-06 03:05:53.874 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 03:05:53.875 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 03:05:53.875 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 03:05:53.876 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 03:05:53.876 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.201.127
2025-02-06 03:05:53.876 DEBUG [src.node.docker_mananger] Generated ports ['28586', '28587', '28588', '28589', '28590']
2025-02-06 03:05:53.877 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 03:05:53.877 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 03:05:53.877 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 03:05:53.877 DEBUG [src.node.docker_mananger] docker run -i -t -p 28586:28586 -p 28587:28587 -p 28588:28588 -p 28589:28589 -p 28590:28590 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28588 --rest-port=28586 --tcp-port=28587 --discv5-udp-port=28589 --rest-address=0.0.0.0 --nat=extip:172.18.201.127 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fecc6418ae89b63ee88beedf0fde8a8a541c28dd23c03d4578f93c271e8c1c8b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28590 --metrics-logging=true --lightpush=true --store=true --relay=true --discv5-bootstrap-node=enr:-J-4QNfyBVGMieE_xXRuyV41iFK_NypH78piuBwJulSbwEBGfWsjXgd-wuJCDjVI7oMTHJpDdf6ChbSrS562ZT1qUeWGAZTZOJnsgmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaECQayR8IGl5RF2jR-S33QwQW269Tvaxc-59WM36l00g0KDdGNwgt2Ug3VkcILdloV3YWt1Mgk --lightpushnode=/ip4/172.18.36.134/tcp/56724/p2p/16Uiu2HAkyr36t5EDyzMkSk8cZaiuuHFMA97uEsSJd93ubCuMju9K
2025-02-06 03:05:57.570 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.201.127 waku 4e2c07f202cbf229a68097f4ae7cfedc33acfbc7032887059b62d913e5358379
2025-02-06 03:05:57.619 DEBUG [src.node.docker_mananger] Container started with ID 4e2c07f202cb. Setting up logs at ./log/docker/node2_2025-02-06_03-05-48__c5ae0bdc-1a7b-4ab9-82bb-e5af45a71ba2__wakuorg_nwaku:latest.log
2025-02-06 03:05:57.620 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 28586
2025-02-06 03:05:57.620 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 03:05:58.621 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28586/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:05:58.623 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 03:05:58.623 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 03:05:58.624 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28586/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:05:58.626 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.201.127/tcp/28587/p2p/16Uiu2HAmUBFTna293QjEDZTJ7HA7dLtEmDG2Sz22JUcMdbPZx6F5","/ip4/172.18.201.127/tcp/28588/ws/p2p/16Uiu2HAmUBFTna293QjEDZTJ7HA7dLtEmDG2Sz22JUcMdbPZx6F5"],"enrUri":"enr:-L24QCuMTrvOALxWppzVOEhfzEC3Rz5grtQS4ZxIAkolZpBKCm6ZjaDsQ-ri2ftHP5hZdqbH5Rz5U4G1euutHYILlRoCgmlkgnY0gmlwhKwSyX-KbXVsdGlhZGRyc5YACASsEsl_Bm-rAAoErBLJfwZvrN0DgnJzhQADAQAAiXNlY3AyNTZrMaED5p_QvD_hER0NJQLa0K610_jPXjz2gU_8BeXn457Y9byDdGNwgm-rg3VkcIJvrYV3YWt1Mgs"}'
2025-02-06 03:05:58.626 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 03:05:58.626 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 03:05:58.626 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 03:05:58.628 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 03:05:58.628 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.203.84
2025-02-06 03:05:58.629 DEBUG [src.node.docker_mananger] Generated ports ['49647', '49648', '49649', '49650', '49651']
2025-02-06 03:05:58.629 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 03:05:58.629 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 03:05:58.629 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 03:05:58.629 DEBUG [src.node.docker_mananger] docker run -i -t -p 49647:49647 -p 49648:49648 -p 49649:49649 -p 49650:49650 -p 49651:49651 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=49649 --rest-port=49647 --tcp-port=49648 --discv5-udp-port=49650 --rest-address=0.0.0.0 --nat=extip:172.18.203.84 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4a4850141b0184faaeafc8eec617bcbbcd2ff5b50631547c52eff91ba2ee18a9 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --storenode=/ip4/172.18.201.127/tcp/28587/p2p/16Uiu2HAmUBFTna293QjEDZTJ7HA7dLtEmDG2Sz22JUcMdbPZx6F5 --discv5-bootstrap-node=enr:-L24QCuMTrvOALxWppzVOEhfzEC3Rz5grtQS4ZxIAkolZpBKCm6ZjaDsQ-ri2ftHP5hZdqbH5Rz5U4G1euutHYILlRoCgmlkgnY0gmlwhKwSyX-KbXVsdGlhZGRyc5YACASsEsl_Bm-rAAoErBLJfwZvrN0DgnJzhQADAQAAiXNlY3AyNTZrMaED5p_QvD_hER0NJQLa0K610_jPXjz2gU_8BeXn457Y9byDdGNwgm-rg3VkcIJvrYV3YWt1Mgs --pubsub-topic=/waku/2/rs/3/1
2025-02-06 03:05:58.864 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.203.84 waku 27e16df47089f4253ac8688aa22716b7910aa3c388d7d90ada66002825b8e0ac
2025-02-06 03:05:58.919 DEBUG [src.node.docker_mananger] Container started with ID 27e16df47089. Setting up logs at ./log/docker/node3_2025-02-06_03-05-48__c5ae0bdc-1a7b-4ab9-82bb-e5af45a71ba2__wakuorg_go-waku:latest.log
2025-02-06 03:05:58.920 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 49647
2025-02-06 03:05:58.920 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 03:05:59.921 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49647/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:05:59.924 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QIEJNOS0ycpO-BhAkK0xJgdBobpYDNR-bhGe2Z-HQ6cUVx13gLWuHzni76Zr9AurVfZNl-u2ppi39p0cL7s81DOGAZTZOLF-gmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQNIYDvtLl7CbMA33X3_Hm27kekuFmiDharA6zplPEnjyoN0Y3CCwfCDdWRwgsHyhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/49648/p2p/16Uiu2HAmHXWpDBQJyByhJDvckeAjjsYtS8qe6XYNcBEihshTqoHK","/ip4/127.0.0.1/tcp/49649/ws/p2p/16Uiu2HAmHXWpDBQJyByhJDvckeAjjsYtS8qe6XYNcBEihshTqoHK","/ip4/172.17.0.4/tcp/49648/p2p/16Uiu2HAmHXWpDBQJyByhJDvckeAjjsYtS8qe6XYNcBEihshTqoHK","/ip4/172.17.0.4/tcp/49649/ws/p2p/16Uiu2HAmHXWpDBQJyByhJDvckeAjjsYtS8qe6XYNcBEihshTqoHK"]}'
2025-02-06 03:05:59.924 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 03:05:59.924 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56723/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-06 03:05:59.926 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-06 03:05:59.927 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28586/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-06 03:05:59.930 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 03:05:59.930 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56723/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:05:59.932 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"id":"16Uiu2HAmUBFTna293QjEDZTJ7HA7dLtEmDG2Sz22JUcMdbPZx6F5","multiaddrs":["/ip4/172.18.201.127/tcp/28588/ws/p2p/16Uiu2HAmUBFTna293QjEDZTJ7HA7dLtEmDG2Sz22JUcMdbPZx6F5","/ip4/172.18.201.127/tcp/28587/p2p/16Uiu2HAmUBFTna293QjEDZTJ7HA7dLtEmDG2Sz22JUcMdbPZx6F5"],"protocols":null,"connected":false,"pubsubTopics":[]}]'
2025-02-06 03:05:59.932 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28586/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:05:59.935 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.4/tcp/49648/p2p/16Uiu2HAmHXWpDBQJyByhJDvckeAjjsYtS8qe6XYNcBEihshTqoHK","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
2025-02-06 03:05:59.935 DEBUG [src.libs.common] Sleeping for 30 seconds
2025-02-06 03:06:29.936 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56723/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1738811189936064512}}'
2025-02-06 03:06:29.944 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-06 03:06:29.945 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 03:06:30.945 DEBUG [src.steps.store] Checking that peer wakuorg/go-waku:latest can find the stored messages
2025-02-06 03:06:30.946 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49647/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-filter%2Fproto&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:06:30.952 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"91cdd3b125fc42ba9632d2d11fa86448fa5a94a375ec9dc81e72aff7e2ad17ec","status_code":200,"status_desc":"OK","messages":[{"message_hash":"2g/7RIB6xbFh7YVLzAqv+18nhoc8oTe89vNndqJAsMo="}]}'
2025-02-06 03:06:30.954 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-06 03:06:30.955 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-06 03:06:30.955 DEBUG [src.node.waku_node] Stopping container with id aba8770efbb2
2025-02-06 03:06:31.466 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 03:06:31.466 DEBUG [src.node.waku_node] Stopping container with id 4e2c07f202cb
2025-02-06 03:06:32.279 ERROR [src.node.docker_mananger] Max retries reached for container aba8770efbb2. Exiting log stream.
2025-02-06 03:06:32.341 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 03:06:32.342 DEBUG [src.node.waku_node] Stopping container with id 27e16df47089
2025-02-06 03:06:32.832 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 03:06:32.834 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-06 03:06:32.839 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 03:06:32.851 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 03:06:32.855 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
