2025-02-06 03:04:44.742 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-06 03:04:44.743 DEBUG [tests.conftest] Running test: test_store_node_not_connected_directly_to_relaying_node with id: 2025-02-06_03-04-44__1563aa09-9566-40a8-8400-03fc155dbc97
2025-02-06 03:04:44.743 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-06 03:04:44.743 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-06 03:04:44.743 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-06 03:04:44.752 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-06 03:04:44.752 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-06_03-04-44__1563aa09-9566-40a8-8400-03fc155dbc97__wakuorg_go-waku:latest.log
2025-02-06 03:04:44.758 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 03:04:44.758 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-06_03-04-44__1563aa09-9566-40a8-8400-03fc155dbc97__wakuorg_nwaku:latest.log
2025-02-06 03:04:44.764 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-06 03:04:44.764 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node3_2025-02-06_03-04-44__1563aa09-9566-40a8-8400-03fc155dbc97__wakuorg_go-waku:latest.log
2025-02-06 03:04:44.764 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-06 03:04:44.764 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-06 03:04:44.765 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 03:04:44.765 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 03:04:44.827 DEBUG [src.node.docker_mananger] Network waku created
2025-02-06 03:04:44.827 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.109.244
2025-02-06 03:04:44.827 DEBUG [src.node.docker_mananger] Generated ports ['25297', '25298', '25299', '25300', '25301']
2025-02-06 03:04:44.827 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 03:04:44.827 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 03:04:44.827 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 03:04:44.828 DEBUG [src.node.docker_mananger] docker run -i -t -p 25297:25297 -p 25298:25298 -p 25299:25299 -p 25300:25300 -p 25301:25301 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=25299 --rest-port=25297 --tcp-port=25298 --discv5-udp-port=25300 --rest-address=0.0.0.0 --nat=extip:172.18.109.244 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0fd8838d0efc3847fbabf014dc63c0b56f82bed5aad53cade3e5fc5b2e264727 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true
2025-02-06 03:04:47.902 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.109.244 waku 9f3ee1dd98011c3916d3bbf9455d6c4a26918dbcec0544a66a191c33ad831cf9
2025-02-06 03:04:47.960 DEBUG [src.node.docker_mananger] Container started with ID 9f3ee1dd9801. Setting up logs at ./log/docker/node1_2025-02-06_03-04-44__1563aa09-9566-40a8-8400-03fc155dbc97__wakuorg_go-waku:latest.log
2025-02-06 03:04:47.961 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 25297
2025-02-06 03:04:47.963 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 03:04:48.964 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25297/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:04:48.967 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QF0AwjAGTo9QVJ469wuSWH6rARFr3BdsKrpo8n9LrBCeQSFTTr1p5BscngWHoO02trRhaW7CkXrONp54YK14BUGGAZTZN5xPgmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaED46bpeq_K3W8cW7OBGb2SvUnnek9Y4dZaagSrpROyZpWDdGNwgmLSg3VkcIJi1IV3YWt1MgE","listenAddresses":["/ip4/127.0.0.1/tcp/25298/p2p/16Uiu2HAmTyeWscsxxEotWXibwqfSUW8AH7v4jupRtDHWLArH82gc","/ip4/127.0.0.1/tcp/25299/ws/p2p/16Uiu2HAmTyeWscsxxEotWXibwqfSUW8AH7v4jupRtDHWLArH82gc","/ip4/172.17.0.2/tcp/25298/p2p/16Uiu2HAmTyeWscsxxEotWXibwqfSUW8AH7v4jupRtDHWLArH82gc","/ip4/172.17.0.2/tcp/25299/ws/p2p/16Uiu2HAmTyeWscsxxEotWXibwqfSUW8AH7v4jupRtDHWLArH82gc"]}'
2025-02-06 03:04:48.967 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 03:04:48.967 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 03:04:48.967 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 03:04:48.969 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 03:04:48.969 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.137.27
2025-02-06 03:04:48.969 DEBUG [src.node.docker_mananger] Generated ports ['47301', '47302', '47303', '47304', '47305']
2025-02-06 03:04:48.969 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 03:04:48.969 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 03:04:48.970 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 03:04:48.970 DEBUG [src.node.docker_mananger] docker run -i -t -p 47301:47301 -p 47302:47302 -p 47303:47303 -p 47304:47304 -p 47305:47305 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=47303 --rest-port=47301 --tcp-port=47302 --discv5-udp-port=47304 --rest-address=0.0.0.0 --nat=extip:172.18.137.27 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1c3e69f0a6ea0e47ba2becbbc1dba51d8210beeafe61e6bc87c33c00cbd81be3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=47305 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-J-4QF0AwjAGTo9QVJ469wuSWH6rARFr3BdsKrpo8n9LrBCeQSFTTr1p5BscngWHoO02trRhaW7CkXrONp54YK14BUGGAZTZN5xPgmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaED46bpeq_K3W8cW7OBGb2SvUnnek9Y4dZaagSrpROyZpWDdGNwgmLSg3VkcIJi1IV3YWt1MgE
2025-02-06 03:04:50.880 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.137.27 waku 2f7668867d69c0409274995fa49e3f45ca66983b5353466504ef1f43554cdff6
2025-02-06 03:04:50.926 DEBUG [src.node.docker_mananger] Container started with ID 2f7668867d69. Setting up logs at ./log/docker/node2_2025-02-06_03-04-44__1563aa09-9566-40a8-8400-03fc155dbc97__wakuorg_nwaku:latest.log
2025-02-06 03:04:50.927 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 47301
2025-02-06 03:04:50.928 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 03:04:51.929 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47301/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:04:51.932 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 03:04:51.932 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 03:04:51.932 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47301/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:04:51.934 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.137.27/tcp/47302/p2p/16Uiu2HAmHnZgtJDEC8wrGyXSSjgSbZvLo5ZXnPteEh7hTRyXCziK","/ip4/172.18.137.27/tcp/47303/ws/p2p/16Uiu2HAmHnZgtJDEC8wrGyXSSjgSbZvLo5ZXnPteEh7hTRyXCziK"],"enrUri":"enr:-L24QLFc229_wZmKfJm-gRpjiCOQoktSdYeDje0xa8zpkNFYKoJOQouFnZqPj677NggFyHICQexAZ_gtJak7GlaHVLcCgmlkgnY0gmlwhKwSiRuKbXVsdGlhZGRyc5YACASsEokbBrjGAAoErBKJGwa4x90DgnJzhQADAQAAiXNlY3AyNTZrMaEDTDsyDdhcOu6Fhs7UJaJ5nxqu7mOqM3Cw0GZeYztXe_iDdGNwgrjGg3VkcIK4yIV3YWt1MgM"}'
2025-02-06 03:04:51.934 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 03:04:51.935 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 03:04:51.935 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 03:04:51.937 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 03:04:51.937 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.250.146
2025-02-06 03:04:51.937 DEBUG [src.node.docker_mananger] Generated ports ['61019', '61020', '61021', '61022', '61023']
2025-02-06 03:04:51.938 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 03:04:51.939 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 03:04:51.939 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 03:04:51.939 DEBUG [src.node.docker_mananger] docker run -i -t -p 61019:61019 -p 61020:61020 -p 61021:61021 -p 61022:61022 -p 61023:61023 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=61021 --rest-port=61019 --tcp-port=61020 --discv5-udp-port=61022 --rest-address=0.0.0.0 --nat=extip:172.18.250.146 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fccaa6f79cb9fad6b64dadddbd8b002be4bbabfee4b953bcf08e09de1e1beb8c --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --storenode=/ip4/172.18.137.27/tcp/47302/p2p/16Uiu2HAmHnZgtJDEC8wrGyXSSjgSbZvLo5ZXnPteEh7hTRyXCziK --discv5-bootstrap-node=enr:-L24QLFc229_wZmKfJm-gRpjiCOQoktSdYeDje0xa8zpkNFYKoJOQouFnZqPj677NggFyHICQexAZ_gtJak7GlaHVLcCgmlkgnY0gmlwhKwSiRuKbXVsdGlhZGRyc5YACASsEokbBrjGAAoErBKJGwa4x90DgnJzhQADAQAAiXNlY3AyNTZrMaEDTDsyDdhcOu6Fhs7UJaJ5nxqu7mOqM3Cw0GZeYztXe_iDdGNwgrjGg3VkcIK4yIV3YWt1MgM --pubsub-topic=/waku/2/rs/3/1
2025-02-06 03:04:52.186 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.250.146 waku 47a3090bd1d93cf9329a5102ab41daa6fb78c5234508ffe391033ec709a748f4
2025-02-06 03:04:52.248 DEBUG [src.node.docker_mananger] Container started with ID 47a3090bd1d9. Setting up logs at ./log/docker/node3_2025-02-06_03-04-44__1563aa09-9566-40a8-8400-03fc155dbc97__wakuorg_go-waku:latest.log
2025-02-06 03:04:52.250 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 61019
2025-02-06 03:04:52.250 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 03:04:53.250 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61019/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:04:53.253 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QMbwj3D3S5eflvwfqc9qxcyrF6_fCtMPSWFlyxTkRK4VcSHj-28qBAS_Yp0dmAfdMq9aPit0JQ2EEdT2TojWIH2GAZTZN60IgmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQL5Us_qWZ9z0yl-ZFWS8rswwh1-wcXe5OAITmao2azkEIN0Y3CC7lyDdWRwgu5ehXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/61020/p2p/16Uiu2HAmCCvjezA84wxviQLPDiWaPVGhD9w8t4fM4nmbKTmPw67q","/ip4/127.0.0.1/tcp/61021/ws/p2p/16Uiu2HAmCCvjezA84wxviQLPDiWaPVGhD9w8t4fM4nmbKTmPw67q","/ip4/172.17.0.4/tcp/61020/p2p/16Uiu2HAmCCvjezA84wxviQLPDiWaPVGhD9w8t4fM4nmbKTmPw67q","/ip4/172.17.0.4/tcp/61021/ws/p2p/16Uiu2HAmCCvjezA84wxviQLPDiWaPVGhD9w8t4fM4nmbKTmPw67q"]}'
2025-02-06 03:04:53.254 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 03:04:53.254 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25297/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-06 03:04:53.256 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-06 03:04:53.257 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:47301/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-06 03:04:53.261 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 03:04:53.262 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25297/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:04:53.265 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"id":"16Uiu2HAmHnZgtJDEC8wrGyXSSjgSbZvLo5ZXnPteEh7hTRyXCziK","multiaddrs":["/ip4/172.18.137.27/tcp/47302/p2p/16Uiu2HAmHnZgtJDEC8wrGyXSSjgSbZvLo5ZXnPteEh7hTRyXCziK","/ip4/172.18.137.27/tcp/47303/ws/p2p/16Uiu2HAmHnZgtJDEC8wrGyXSSjgSbZvLo5ZXnPteEh7hTRyXCziK"],"protocols":null,"connected":false,"pubsubTopics":[]}]'
2025-02-06 03:04:53.266 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:47301/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:04:53.269 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.4/tcp/61020/p2p/16Uiu2HAmCCvjezA84wxviQLPDiWaPVGhD9w8t4fM4nmbKTmPw67q","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
2025-02-06 03:04:53.269 DEBUG [src.libs.common] Sleeping for 30 seconds
2025-02-06 03:05:23.270 DEBUG [src.steps.store] Relaying message
2025-02-06 03:05:23.270 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25297/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 03:05:23.273 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-06 03:05:23.276 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 03:05:23.477 DEBUG [src.steps.store] Checking that peer wakuorg/go-waku:latest can find the stored messages
2025-02-06 03:05:23.477 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:61019/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-filter%2Fproto&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:05:23.482 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"6884c466383e8f34a6170ae30f50750e35cf1540cdcecbe284d3bf0b8ab807b8","status_code":200,"status_desc":"OK","messages":[{"message_hash":"eTU4WJGUMzhkqUgJpjjDgeJGBSMHly2qjqVNTcHsoD8="}]}'
2025-02-06 03:05:23.485 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-06 03:05:23.486 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-06 03:05:23.486 DEBUG [src.node.waku_node] Stopping container with id 9f3ee1dd9801
2025-02-06 03:05:23.987 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 03:05:23.988 DEBUG [src.node.waku_node] Stopping container with id 2f7668867d69
2025-02-06 03:05:24.522 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 03:05:24.522 DEBUG [src.node.waku_node] Stopping container with id 47a3090bd1d9
2025-02-06 03:05:24.799 ERROR [src.node.docker_mananger] Max retries reached for container 9f3ee1dd9801. Exiting log stream.
2025-02-06 03:05:25.010 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 03:05:25.011 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-06 03:05:25.058 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 03:05:25.081 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 03:05:25.084 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
