2025-02-06 03:05:54.864 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-06 03:05:54.864 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_all_from_multiple_pubsub_topics with id: 2025-02-06_03-05-54__cee2d5a9-f7d2-41fc-a451-f62a1999f4f8
2025-02-06 03:05:54.864 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-06 03:05:54.865 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-06 03:05:54.865 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-06 03:05:54.871 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 03:05:54.871 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-06_03-05-54__cee2d5a9-f7d2-41fc-a451-f62a1999f4f8__wakuorg_nwaku:latest.log
2025-02-06 03:05:54.871 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 03:05:54.871 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 03:05:54.873 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 03:05:54.873 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.89.227
2025-02-06 03:05:54.873 DEBUG [src.node.docker_mananger] Generated ports ['54637', '54638', '54639', '54640', '54641']
2025-02-06 03:05:54.873 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 03:05:54.873 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 03:05:54.874 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 03:05:54.874 DEBUG [src.node.docker_mananger] docker run -i -t -p 54637:54637 -p 54638:54638 -p 54639:54639 -p 54640:54640 -p 54641:54641 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=54639 --rest-port=54637 --tcp-port=54638 --discv5-udp-port=54640 --rest-address=0.0.0.0 --nat=extip:172.18.89.227 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=be9f4c742141581a33dc6ffa4adbba2fddeece20b13964ed01fefc955decc2f0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=54641 --metrics-logging=true --relay=true --filter=true
2025-02-06 03:05:55.104 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.89.227 waku ed429c7ba291e1b88b7527052d157aa40493b17ae857882b83ee0a37c95cc3cd
2025-02-06 03:05:55.154 DEBUG [src.node.docker_mananger] Container started with ID ed429c7ba291. Setting up logs at ./log/docker/node1_2025-02-06_03-05-54__cee2d5a9-f7d2-41fc-a451-f62a1999f4f8__wakuorg_nwaku:latest.log
2025-02-06 03:05:55.154 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 54637
2025-02-06 03:05:55.155 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 03:05:55.669 ERROR [src.node.docker_mananger] Max retries reached for container 28b4ec3f51a0. Exiting log stream.
2025-02-06 03:05:56.156 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54637/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:05:56.159 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 03:05:56.159 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 03:05:56.159 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54637/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:05:56.162 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.89.227/tcp/54638/p2p/16Uiu2HAmF5grmcY7JxFb7gfSu7RgaAL8UwdZdDEqUTwf7ELFjshZ","/ip4/172.18.89.227/tcp/54639/ws/p2p/16Uiu2HAmF5grmcY7JxFb7gfSu7RgaAL8UwdZdDEqUTwf7ELFjshZ"],"enrUri":"enr:-L24QLsYlnUBcR2VIRaqId3SzQrdAXxtNOeRjcXrbH22NjG5b2tKggHTeG84c95DgtMnx_QlI4lmDtlQixrZiObAWp4CgmlkgnY0gmlwhKwSWeOKbXVsdGlhZGRyc5YACASsElnjBtVuAAoErBJZ4wbVb90DgnJzhQADAQAAiXNlY3AyNTZrMaEDJAsdunb953pnHB-a7FFgbhOZX_Qntm5lCOGajV9QqMiDdGNwgtVug3VkcILVcIV3YWt1MgU"}'
2025-02-06 03:05:56.162 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 03:05:56.162 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-06 03:05:56.168 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-06 03:05:56.168 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-06_03-05-54__cee2d5a9-f7d2-41fc-a451-f62a1999f4f8__wakuorg_go-waku:latest.log
2025-02-06 03:05:56.168 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 03:05:56.168 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 03:05:56.170 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 03:05:56.170 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.130.198
2025-02-06 03:05:56.170 DEBUG [src.node.docker_mananger] Generated ports ['58924', '58925', '58926', '58927', '58928']
2025-02-06 03:05:56.170 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 03:05:56.170 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 03:05:56.170 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 03:05:56.170 DEBUG [src.node.docker_mananger] docker run -i -t -p 58924:58924 -p 58925:58925 -p 58926:58926 -p 58927:58927 -p 58928:58928 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=58926 --rest-port=58924 --tcp-port=58925 --discv5-udp-port=58927 --rest-address=0.0.0.0 --nat=extip:172.18.130.198 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9befdd2eee42994ce62dd5b1736aa6f9c3cbfc5ee141a8c6f3944ebe23f3e7c8 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-L24QLsYlnUBcR2VIRaqId3SzQrdAXxtNOeRjcXrbH22NjG5b2tKggHTeG84c95DgtMnx_QlI4lmDtlQixrZiObAWp4CgmlkgnY0gmlwhKwSWeOKbXVsdGlhZGRyc5YACASsElnjBtVuAAoErBJZ4wbVb90DgnJzhQADAQAAiXNlY3AyNTZrMaEDJAsdunb953pnHB-a7FFgbhOZX_Qntm5lCOGajV9QqMiDdGNwgtVug3VkcILVcIV3YWt1MgU --filternode=/ip4/172.18.89.227/tcp/54638/p2p/16Uiu2HAmF5grmcY7JxFb7gfSu7RgaAL8UwdZdDEqUTwf7ELFjshZ --pubsub-topic=/waku/2/rs/3/1
2025-02-06 03:05:56.396 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.130.198 waku 8fef9d0974d66c15ed3825c76536f043b4915d30a26b41dcece197bd77c8bafe
2025-02-06 03:05:56.444 DEBUG [src.node.docker_mananger] Container started with ID 8fef9d0974d6. Setting up logs at ./log/docker/node2_2025-02-06_03-05-54__cee2d5a9-f7d2-41fc-a451-f62a1999f4f8__wakuorg_go-waku:latest.log
2025-02-06 03:05:56.446 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 58924
2025-02-06 03:05:56.446 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 03:05:57.447 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58924/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:05:57.450 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QDav4aDrx9Ua---f1ja_4fFh5ILVraRm1OZg3g3vlW6hJBOtrhr332Er36IFT9zieLUluK-KnWy6KGHlw6y7CcGGAZTZOKfagmlkgnY0gmlwhKwRAAOCcnOFAAMBAAGJc2VjcDI1NmsxoQPqPBRt9e0eJllcl2kR3gG71QRlz0VSPRsLtNbp2lmD3oN0Y3CC5i2DdWRwguYvhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/58925/p2p/16Uiu2HAmURLtPQKsvrry8MkWtDnd5iG9RmvfjK1GvXSkSUVmXLgm","/ip4/127.0.0.1/tcp/58926/ws/p2p/16Uiu2HAmURLtPQKsvrry8MkWtDnd5iG9RmvfjK1GvXSkSUVmXLgm","/ip4/172.17.0.3/tcp/58925/p2p/16Uiu2HAmURLtPQKsvrry8MkWtDnd5iG9RmvfjK1GvXSkSUVmXLgm","/ip4/172.17.0.3/tcp/58926/ws/p2p/16Uiu2HAmURLtPQKsvrry8MkWtDnd5iG9RmvfjK1GvXSkSUVmXLgm"]}'
2025-02-06 03:05:57.450 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 03:05:57.450 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58924/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.89.227/tcp/54638/p2p/16Uiu2HAmF5grmcY7JxFb7gfSu7RgaAL8UwdZdDEqUTwf7ELFjshZ", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-06 03:05:57.452 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-06 03:05:57.453 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54637/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-06 03:05:57.456 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 03:05:57.456 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58924/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "fad46ded-9fee-491c-a1e0-9e497a06530c", "contentFilters": ["/waku/2/rs/3/0"], "pubsubTopic": "/waku/2/rs/3/0"}'
2025-02-06 03:05:57.461 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"fad46ded-9fee-491c-a1e0-9e497a06530c","statusDesc":"OK"}'
2025-02-06 03:05:57.462 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54637/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/waku/2/rs/3/0", "timestamp": '$(date +%s%N)'}'
2025-02-06 03:05:57.470 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 03:05:57.470 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-06 03:05:57.570 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-06 03:05:57.571 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58924/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F0/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:05:57.573 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/waku/2/rs/3/0","version":0,"timestamp":1738811157462686720,"ephemeral":false}]'
2025-02-06 03:05:57.575 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54637/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-06 03:05:57.578 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 03:05:57.578 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58924/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "b6a01ecf-6c2c-4c17-bd56-387d6054183e", "contentFilters": ["/waku/2/rs/3/1"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-06 03:05:57.584 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"b6a01ecf-6c2c-4c17-bd56-387d6054183e","statusDesc":"OK"}'
2025-02-06 03:05:57.585 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:54637/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/waku/2/rs/3/1", "timestamp": '$(date +%s%N)'}'
2025-02-06 03:05:57.589 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 03:05:57.589 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-06 03:05:57.689 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-06 03:05:57.690 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58924/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:05:57.692 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[]'
2025-02-06 03:05:57.730 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-06 03:05:57.731 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-06 03:05:57.731 DEBUG [src.node.waku_node] Stopping container with id ed429c7ba291
2025-02-06 03:05:58.268 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 03:05:58.268 DEBUG [src.node.waku_node] Stopping container with id 8fef9d0974d6
2025-02-06 03:05:58.946 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 03:05:58.947 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-06 03:05:58.953 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 03:05:58.955 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 03:05:58.956 DEBUG [tests.conftest] Running fixture teardown: attach_logs_on_fail
2025-02-06 03:05:58.956 DEBUG [tests.conftest] Test failed, attempting to attach logs to the allure reports
2025-02-06 03:05:58.957 DEBUG [src.libs.common] Attaching file ./log/docker/node2_2025-02-06_03-05-54__cee2d5a9-f7d2-41fc-a451-f62a1999f4f8__wakuorg_go-waku:latest.log
2025-02-06 03:05:58.957 DEBUG [src.libs.common] Attaching file ./log/docker/node1_2025-02-06_03-05-54__cee2d5a9-f7d2-41fc-a451-f62a1999f4f8__wakuorg_nwaku:latest.log
