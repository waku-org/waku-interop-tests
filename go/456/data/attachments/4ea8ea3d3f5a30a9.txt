2025-02-06 03:04:50.223 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-06 03:04:50.224 DEBUG [tests.conftest] Running test: test_store with id: 2025-02-06_03-04-50__ec2efae2-b90d-440d-8eee-849491dce5f1
2025-02-06 03:04:50.224 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-06 03:04:50.225 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-06 03:04:50.225 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-06 03:04:50.225 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-06 03:04:50.225 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-06 03:04:50.235 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 03:04:50.235 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-06_03-04-50__ec2efae2-b90d-440d-8eee-849491dce5f1__wakuorg_nwaku:latest.log
2025-02-06 03:04:50.236 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 03:04:50.236 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 03:04:50.306 DEBUG [src.node.docker_mananger] Network waku created
2025-02-06 03:04:50.306 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.253.8
2025-02-06 03:04:50.306 DEBUG [src.node.docker_mananger] Generated ports ['64467', '64468', '64469', '64470', '64471']
2025-02-06 03:04:50.306 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 03:04:50.306 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 03:04:50.307 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 03:04:50.307 DEBUG [src.node.docker_mananger] docker run -i -t -p 64467:64467 -p 64468:64468 -p 64469:64469 -p 64470:64470 -p 64471:64471 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=64469 --rest-port=64467 --tcp-port=64468 --discv5-udp-port=64470 --rest-address=0.0.0.0 --nat=extip:172.18.253.8 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cdbaab3fc80f09d139af4941473dbabfa373389aa1c1fd38fecf454516dc30b2 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=64471 --metrics-logging=true --relay=true --store=true
2025-02-06 03:04:52.445 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.253.8 waku 47d9288f4df5d3b858581bc3ea6d142213325d1bfc09bf36f5e5b611ea5c1752
2025-02-06 03:04:52.495 DEBUG [src.node.docker_mananger] Container started with ID 47d9288f4df5. Setting up logs at ./log/docker/node1_2025-02-06_03-04-50__ec2efae2-b90d-440d-8eee-849491dce5f1__wakuorg_nwaku:latest.log
2025-02-06 03:04:52.497 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 64467
2025-02-06 03:04:52.497 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 03:04:53.497 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64467/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:04:53.501 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 03:04:53.501 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 03:04:53.501 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:64467/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:04:53.504 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.253.8/tcp/64468/p2p/16Uiu2HAmD4cN5DSz97Q7Q91izfpb1bt5vKBcsTuahW4QbihCVqC6","/ip4/172.18.253.8/tcp/64469/ws/p2p/16Uiu2HAmD4cN5DSz97Q7Q91izfpb1bt5vKBcsTuahW4QbihCVqC6"],"enrUri":"enr:-L24QAqQnsGviGLeterrLYlKwJPRS9uUq_nnThZvmI-OjYvzP1iF_OFOq9sgX2eawajq0dxD0nEP1sVTa781A2dj6wcCgmlkgnY0gmlwhKwS_QiKbXVsdGlhZGRyc5YACASsEv0IBvvUAAoErBL9CAb71d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDBg0UR2wK8psuIyhfgsWb9U8M8iLBxnRABp56YEeONJODdGNwgvvUg3VkcIL71oV3YWt1MgM"}'
2025-02-06 03:04:53.504 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 03:04:53.511 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-06 03:04:53.511 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-06_03-04-50__ec2efae2-b90d-440d-8eee-849491dce5f1__wakuorg_go-waku:latest.log
2025-02-06 03:04:53.511 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 03:04:53.512 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 03:04:53.515 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 03:04:53.515 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.222.249
2025-02-06 03:04:53.515 DEBUG [src.node.docker_mananger] Generated ports ['6837', '6838', '6839', '6840', '6841']
2025-02-06 03:04:53.515 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 03:04:53.515 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 03:04:53.516 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 03:04:53.516 DEBUG [src.node.docker_mananger] docker run -i -t -p 6837:6837 -p 6838:6838 -p 6839:6839 -p 6840:6840 -p 6841:6841 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=6839 --rest-port=6837 --tcp-port=6838 --discv5-udp-port=6840 --rest-address=0.0.0.0 --nat=extip:172.18.222.249 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7bfae544e3d5e1c68f61ba08d88d8c4db0493acbd7553cda9dbb2af969bdaa80 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --store=true --discv5-bootstrap-node=enr:-L24QAqQnsGviGLeterrLYlKwJPRS9uUq_nnThZvmI-OjYvzP1iF_OFOq9sgX2eawajq0dxD0nEP1sVTa781A2dj6wcCgmlkgnY0gmlwhKwS_QiKbXVsdGlhZGRyc5YACASsEv0IBvvUAAoErBL9CAb71d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDBg0UR2wK8psuIyhfgsWb9U8M8iLBxnRABp56YEeONJODdGNwgvvUg3VkcIL71oV3YWt1MgM --storenode=/ip4/172.18.253.8/tcp/64468/p2p/16Uiu2HAmD4cN5DSz97Q7Q91izfpb1bt5vKBcsTuahW4QbihCVqC6
2025-02-06 03:04:56.157 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.222.249 waku abdacb9d7c0fb4972f82a42b8dfd54f73e580a1b961c644d3c4938cbc473b451
2025-02-06 03:04:56.213 DEBUG [src.node.docker_mananger] Container started with ID abdacb9d7c0f. Setting up logs at ./log/docker/node1_2025-02-06_03-04-50__ec2efae2-b90d-440d-8eee-849491dce5f1__wakuorg_go-waku:latest.log
2025-02-06 03:04:56.213 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 6837
2025-02-06 03:04:56.214 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 03:04:57.215 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6837/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:04:57.217 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QMxrPQdtOcW0WGuNXIZtzH7LI9-4yrDS5dP50Co9rCXgQimRUuEXd1m5_mgH5paiGJglvUkFnr5h_T8tIduS55OGAZTZN7yRgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaEC2vtgf6vMG7jFAU-prua539-ud4dqUH2LyI6YI4RenqKDdGNwghq2g3VkcIIauIV3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/6838/p2p/16Uiu2HAmAAVBEDmWEcUTBKFRf3huspEX5hdDwTXp8XaQ5j2oMifb","/ip4/127.0.0.1/tcp/6839/ws/p2p/16Uiu2HAmAAVBEDmWEcUTBKFRf3huspEX5hdDwTXp8XaQ5j2oMifb","/ip4/172.17.0.3/tcp/6838/p2p/16Uiu2HAmAAVBEDmWEcUTBKFRf3huspEX5hdDwTXp8XaQ5j2oMifb","/ip4/172.17.0.3/tcp/6839/ws/p2p/16Uiu2HAmAAVBEDmWEcUTBKFRf3huspEX5hdDwTXp8XaQ5j2oMifb"]}'
2025-02-06 03:04:57.218 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 03:04:57.218 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64467/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-06 03:04:57.238 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 03:04:57.238 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6837/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-06 03:04:57.241 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-06 03:04:57.242 DEBUG [src.steps.store] Relaying message
2025-02-06 03:04:57.243 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:64467/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 03:04:57.258 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 03:04:57.258 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 03:04:57.459 DEBUG [src.steps.store] Checking that peer wakuorg/go-waku:latest can find the stored messages
2025-02-06 03:04:57.459 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6837/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-relay%2Fproto&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:04:57.465 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"03ad0fdd1fdba905dd9326f472d1e5838b43e8601e423c4af8391a38440394c7","status_code":200,"status_desc":"OK","messages":[{"message_hash":"8zFIHWqoRgxrVfSCyKz3CFi8pPuKNXALRv8LV/ohOUA="}]}'
2025-02-06 03:04:57.468 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-06 03:04:57.469 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-06 03:04:57.469 DEBUG [src.node.waku_node] Stopping container with id 47d9288f4df5
2025-02-06 03:04:58.024 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 03:04:58.024 DEBUG [src.node.waku_node] Stopping container with id abdacb9d7c0f
2025-02-06 03:04:58.737 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 03:04:58.739 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-06 03:04:58.744 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 03:04:58.746 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
