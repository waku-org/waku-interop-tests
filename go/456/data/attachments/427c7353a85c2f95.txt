[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_static_sharding_multiple_shards with id: 2025-02-06_03-08-38__45ea046a-004c-4432-a30f-3255ad6e34a7
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-02-06_03-08-38__45ea046a-004c-4432-a30f-3255ad6e34a7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.219.16
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['37716', '37717', '37718', '37719', '37720']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 37716:37716 -p 37717:37717 -p 37718:37718 -p 37719:37719 -p 37720:37720 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=37718 --rest-port=37716 --tcp-port=37717 --discv5-udp-port=37719 --rest-address=0.0.0.0 --nat=extip:172.18.219.16 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=0ff53efb7c1bf6ebd245dfdaeca0fa51e36e81f50b485fdbebdadc53dbbce3c3 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=37720 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/2/0 --pubsub-topic=/waku/2/rs/2/1 --pubsub-topic=/waku/2/rs/2/2 --pubsub-topic=/waku/2/rs/2/3 --pubsub-topic=/waku/2/rs/2/4 --pubsub-topic=/waku/2/rs/2/5 --pubsub-topic=/waku/2/rs/2/6 --pubsub-topic=/waku/2/rs/2/7
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.219.16 waku bcb6d6a72e48c1fa95e49538598821d90dedc30cc35c7263ab331c2f85cb9968
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID bcb6d6a72e48. Setting up logs at ./log/docker/node1_2025-02-06_03-08-38__45ea046a-004c-4432-a30f-3255ad6e34a7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 37716
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 69cdd66c073a. Exiting log stream.
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 52153c7c037f. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37716/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37716/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.219.16/tcp/37717/p2p/16Uiu2HAmU94PepdM1bxFpboFYrErVPBTaukG2vi9NxKKFzR1Hwrh","/ip4/172.18.219.16/tcp/37718/ws/p2p/16Uiu2HAmU94PepdM1bxFpboFYrErVPBTaukG2vi9NxKKFzR1Hwrh"],"enrUri":"enr:-Mu4QI_gKEUeOX48trJCON8-toutmk4MFxc5NlaSCsVs8KmqYruIYA_BuoshDTL-KrGG8KJVxutdTUSrmIxbZvn8IYgCgmlkgnY0gmlwhKwS2xCKbXVsdGlhZGRyc5YACASsEtsQBpNVAAoErBLbEAaTVt0DgnJzkwACCAAAAAEAAgADAAQABQAGAAeJc2VjcDI1NmsxoQPmECKrl8DvErEWUvfKrhbWsim_JTdMLsMmEXwYiSObmoN0Y3CCk1WDdWRwgpNXhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-02-06_03-08-38__45ea046a-004c-4432-a30f-3255ad6e34a7__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.242.57
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['37507', '37508', '37509', '37510', '37511']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 37507:37507 -p 37508:37508 -p 37509:37509 -p 37510:37510 -p 37511:37511 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=37509 --rest-port=37507 --tcp-port=37508 --discv5-udp-port=37510 --rest-address=0.0.0.0 --nat=extip:172.18.242.57 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=ad7cdaa5ce6a32dfac59cf2a85d2eb8a39c5e86f2a74ab40d87d5b226345339c --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-Mu4QI_gKEUeOX48trJCON8-toutmk4MFxc5NlaSCsVs8KmqYruIYA_BuoshDTL-KrGG8KJVxutdTUSrmIxbZvn8IYgCgmlkgnY0gmlwhKwS2xCKbXVsdGlhZGRyc5YACASsEtsQBpNVAAoErBLbEAaTVt0DgnJzkwACCAAAAAEAAgADAAQABQAGAAeJc2VjcDI1NmsxoQPmECKrl8DvErEWUvfKrhbWsim_JTdMLsMmEXwYiSObmoN0Y3CCk1WDdWRwgpNXhXdha3UyBQ --filternode=/ip4/172.18.219.16/tcp/37717/p2p/16Uiu2HAmU94PepdM1bxFpboFYrErVPBTaukG2vi9NxKKFzR1Hwrh --pubsub-topic=/waku/2/rs/3/1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.242.57 waku 9a9c5bfb20cb020804666d2a2eaa8240c147ebfd732aba8361f1c702472ed9ec
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 9a9c5bfb20cb. Setting up logs at ./log/docker/node2_2025-02-06_03-08-38__45ea046a-004c-4432-a30f-3255ad6e34a7__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 37507
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37507/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QMJC-_bXRnL4fgDyYj_zoNf6nlIqjOqKSyXmvphYClK0LJXVWHovjbpflvnLDcwIqE6LCYTK6EXSbplaIHwKexuGAZTZOyh7gmlkgnY0gmlwhKwRAAOCcnOFAAIBAAGJc2VjcDI1NmsxoQMFpn1Hgcqd8j5BD50Kl4_7A7aPlCrVAhwRgPLuV7e80YN0Y3CCkoSDdWRwgpKGhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/37508/p2p/16Uiu2HAmD33dgD7iEzknxPUmRy7xqRRnewDrA3jD4Rjs1EP3bSSt","/ip4/127.0.0.1/tcp/37509/ws/p2p/16Uiu2HAmD33dgD7iEzknxPUmRy7xqRRnewDrA3jD4Rjs1EP3bSSt","/ip4/172.17.0.3/tcp/37508/p2p/16Uiu2HAmD33dgD7iEzknxPUmRy7xqRRnewDrA3jD4Rjs1EP3bSSt","/ip4/172.17.0.3/tcp/37509/ws/p2p/16Uiu2HAmD33dgD7iEzknxPUmRy7xqRRnewDrA3jD4Rjs1EP3bSSt"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37507/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.219.16/tcp/37717/p2p/16Uiu2HAmU94PepdM1bxFpboFYrErVPBTaukG2vi9NxKKFzR1Hwrh", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37716/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0", "/waku/2/rs/2/1", "/waku/2/rs/2/2", "/waku/2/rs/2/3", "/waku/2/rs/2/4", "/waku/2/rs/2/5", "/waku/2/rs/2/6", "/waku/2/rs/2/7"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37507/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "19bfa485-0c85-4d58-a90b-572789be7296", "contentFilters": ["/myapp/1/latest/proto"], "pubsubTopic": "/waku/2/rs/2/0"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"19bfa485-0c85-4d58-a90b-572789be7296","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37507/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "6a299b1b-b5ab-48e7-bc49-6dba5528d3de", "contentFilters": ["/waku/2/content/test.js"], "pubsubTopic": "/waku/2/rs/2/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"6a299b1b-b5ab-48e7-bc49-6dba5528d3de","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37507/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "ed516c8f-9fa5-4e6e-8191-aa8264c4421f", "contentFilters": ["/app/22/sometopic/someencoding"], "pubsubTopic": "/waku/2/rs/2/2"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"ed516c8f-9fa5-4e6e-8191-aa8264c4421f","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37507/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "3458c4ab-d28a-444e-8c35-6ad075518cc8", "contentFilters": ["/toychat/2/huilong/proto"], "pubsubTopic": "/waku/2/rs/2/3"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"3458c4ab-d28a-444e-8c35-6ad075518cc8","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37507/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "53239259-bc7c-4ea0-a8e7-e0b4f23506d7", "contentFilters": ["/statusim/1/community/cbor"], "pubsubTopic": "/waku/2/rs/2/4"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"53239259-bc7c-4ea0-a8e7-e0b4f23506d7","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37507/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "16ee3f08-0fa0-4c83-bdce-3c2bef4bf7ca", "contentFilters": ["/app/27/sometopic/someencoding"], "pubsubTopic": "/waku/2/rs/2/5"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"16ee3f08-0fa0-4c83-bdce-3c2bef4bf7ca","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37507/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1ad5c823-3e60-46b8-a9c2-9fc758df8079", "contentFilters": ["/app/29/sometopic/someencoding"], "pubsubTopic": "/waku/2/rs/2/6"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"1ad5c823-3e60-46b8-a9c2-9fc758df8079","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37507/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "2a26f75c-68d9-4295-aec7-51e9294a5cf8", "contentFilters": ["/app/20/sometopic/someencoding"], "pubsubTopic": "/waku/2/rs/2/7"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"2a26f75c-68d9-4295-aec7-51e9294a5cf8","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37716/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:186 Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37507/filter/v2/messages/%2Fwaku%2F2%2Frs%2F2%2F0/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738811321515604992,"ephemeral":false}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:37716/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F1" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:186 Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:37507/filter/v2/messages/%2Fwaku%2F2%2Frs%2F2%2F1/%2Fwaku%2F2%2Fcontent%2Ftest.js" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id bcb6d6a72e48
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 9a9c5bfb20cb
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:42 Attaching file ./log/docker/node2_2025-02-06_03-08-38__45ea046a-004c-4432-a30f-3255ad6e34a7__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:42 Attaching file ./log/docker/node1_2025-02-06_03-08-38__45ea046a-004c-4432-a30f-3255ad6e34a7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_static_sharding_multiple_shards with id: 2025-02-06_03-08-42__d87f8130-adcd-4cf8-8a61-2e9e8bb574a4
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-02-06_03-08-42__d87f8130-adcd-4cf8-8a61-2e9e8bb574a4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.45.198
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['35319', '35320', '35321', '35322', '35323']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 35319:35319 -p 35320:35320 -p 35321:35321 -p 35322:35322 -p 35323:35323 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=35321 --rest-port=35319 --tcp-port=35320 --discv5-udp-port=35322 --rest-address=0.0.0.0 --nat=extip:172.18.45.198 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=2d444dd06412e7c536fbf5debe3e342b1453dde2edfdaab6c3b3bfdd0f0fdf9e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=35323 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/2/0 --pubsub-topic=/waku/2/rs/2/1 --pubsub-topic=/waku/2/rs/2/2 --pubsub-topic=/waku/2/rs/2/3 --pubsub-topic=/waku/2/rs/2/4 --pubsub-topic=/waku/2/rs/2/5 --pubsub-topic=/waku/2/rs/2/6 --pubsub-topic=/waku/2/rs/2/7
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container bcb6d6a72e48. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.45.198 waku b246a2cdbd09fa761b5977843c6d202068173e2f295dee301c24aebcbdd25900
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID b246a2cdbd09. Setting up logs at ./log/docker/node1_2025-02-06_03-08-42__d87f8130-adcd-4cf8-8a61-2e9e8bb574a4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 35319
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 9a9c5bfb20cb. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35319/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35319/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.45.198/tcp/35320/p2p/16Uiu2HAmUTxaba5rBjyhVeLtHZqzCxhKu8wxWi4YAwfC2jfcGHvq","/ip4/172.18.45.198/tcp/35321/ws/p2p/16Uiu2HAmUTxaba5rBjyhVeLtHZqzCxhKu8wxWi4YAwfC2jfcGHvq"],"enrUri":"enr:-Mu4QAKKzYMwvP7sv5_YHcoCIqqOmerfHVrrfYw74tQV3mE_Jncq1NxbRZXL1MzULhVKnJYtSDztynKZVeVNF-Uv7FsCgmlkgnY0gmlwhKwSLcaKbXVsdGlhZGRyc5YACASsEi3GBon4AAoErBItxgaJ-d0DgnJzkwACCAAAAAEAAgADAAQABQAGAAeJc2VjcDI1NmsxoQPq55mVMUhMg8N00mBXDAuNeigLwBFfkLrlAQ1e_gWtuoN0Y3CCifiDdWRwgon6hXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-02-06_03-08-42__d87f8130-adcd-4cf8-8a61-2e9e8bb574a4__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.76.17
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['65318', '65319', '65320', '65321', '65322']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 65318:65318 -p 65319:65319 -p 65320:65320 -p 65321:65321 -p 65322:65322 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=65320 --rest-port=65318 --tcp-port=65319 --discv5-udp-port=65321 --rest-address=0.0.0.0 --nat=extip:172.18.76.17 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=3f6ff8fdc58372a56df1334ffc67c5d2cc66f3916fdbea4bfba3ab31d9ebfb27 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-Mu4QAKKzYMwvP7sv5_YHcoCIqqOmerfHVrrfYw74tQV3mE_Jncq1NxbRZXL1MzULhVKnJYtSDztynKZVeVNF-Uv7FsCgmlkgnY0gmlwhKwSLcaKbXVsdGlhZGRyc5YACASsEi3GBon4AAoErBItxgaJ-d0DgnJzkwACCAAAAAEAAgADAAQABQAGAAeJc2VjcDI1NmsxoQPq55mVMUhMg8N00mBXDAuNeigLwBFfkLrlAQ1e_gWtuoN0Y3CCifiDdWRwgon6hXdha3UyBQ --filternode=/ip4/172.18.45.198/tcp/35320/p2p/16Uiu2HAmUTxaba5rBjyhVeLtHZqzCxhKu8wxWi4YAwfC2jfcGHvq --pubsub-topic=/waku/2/rs/3/1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.76.17 waku bb47b7667c3fcaca6468c845518275a2a1f096e47e4faf74c71cf813973fd515
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID bb47b7667c3f. Setting up logs at ./log/docker/node2_2025-02-06_03-08-42__d87f8130-adcd-4cf8-8a61-2e9e8bb574a4__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 65318
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:65318/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QJepRZAvwTWbDwnxNeWzKY9N9H2NwyEoSBhWunMUdu-cXy_8tyz085UlqU2bEh4uRstz_uuYMaIHRdPNUyQY3USGAZTZOziEgmlkgnY0gmlwhKwRAAOCcnOFAAIBAAGJc2VjcDI1NmsxoQM6C6nuxW-iKC02XNfkYIBubJKIDLzCyNDOqFoH4AZoHIN0Y3CC_yeDdWRwgv8phXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/65319/p2p/16Uiu2HAmGZaK5uuMvNqq21ynZSQz5TakGfpnyb3xRtwcgTM7UXSb","/ip4/127.0.0.1/tcp/65320/ws/p2p/16Uiu2HAmGZaK5uuMvNqq21ynZSQz5TakGfpnyb3xRtwcgTM7UXSb","/ip4/172.17.0.3/tcp/65319/p2p/16Uiu2HAmGZaK5uuMvNqq21ynZSQz5TakGfpnyb3xRtwcgTM7UXSb","/ip4/172.17.0.3/tcp/65320/ws/p2p/16Uiu2HAmGZaK5uuMvNqq21ynZSQz5TakGfpnyb3xRtwcgTM7UXSb"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:65318/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.45.198/tcp/35320/p2p/16Uiu2HAmUTxaba5rBjyhVeLtHZqzCxhKu8wxWi4YAwfC2jfcGHvq", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35319/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0", "/waku/2/rs/2/1", "/waku/2/rs/2/2", "/waku/2/rs/2/3", "/waku/2/rs/2/4", "/waku/2/rs/2/5", "/waku/2/rs/2/6", "/waku/2/rs/2/7"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:65318/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "8727b0ee-a566-4b2b-8109-ac5ca65c5ef2", "contentFilters": ["/myapp/1/latest/proto"], "pubsubTopic": "/waku/2/rs/2/0"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"8727b0ee-a566-4b2b-8109-ac5ca65c5ef2","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:65318/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "aba0e46c-b255-4151-871b-ab08e18549dc", "contentFilters": ["/waku/2/content/test.js"], "pubsubTopic": "/waku/2/rs/2/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"aba0e46c-b255-4151-871b-ab08e18549dc","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:65318/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "e64063e9-8636-4103-b33c-0f7047386c1e", "contentFilters": ["/app/22/sometopic/someencoding"], "pubsubTopic": "/waku/2/rs/2/2"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"e64063e9-8636-4103-b33c-0f7047386c1e","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:65318/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "ce72649a-3a39-464c-97d8-f64f9f6ab3ce", "contentFilters": ["/toychat/2/huilong/proto"], "pubsubTopic": "/waku/2/rs/2/3"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"ce72649a-3a39-464c-97d8-f64f9f6ab3ce","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:65318/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "234db7b5-b922-436e-b72c-3acc2c27a808", "contentFilters": ["/statusim/1/community/cbor"], "pubsubTopic": "/waku/2/rs/2/4"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"234db7b5-b922-436e-b72c-3acc2c27a808","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:65318/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "0625ff0a-03e1-48e9-9886-388b311a46a2", "contentFilters": ["/app/27/sometopic/someencoding"], "pubsubTopic": "/waku/2/rs/2/5"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"0625ff0a-03e1-48e9-9886-388b311a46a2","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:65318/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "c7b04f48-0087-4153-a55d-681e2a563a8b", "contentFilters": ["/app/29/sometopic/someencoding"], "pubsubTopic": "/waku/2/rs/2/6"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"c7b04f48-0087-4153-a55d-681e2a563a8b","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:65318/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "91af7eb0-5736-4615-9e7c-0d0f36142ff4", "contentFilters": ["/app/20/sometopic/someencoding"], "pubsubTopic": "/waku/2/rs/2/7"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"91af7eb0-5736-4615-9e7c-0d0f36142ff4","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35319/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:186 Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:65318/filter/v2/messages/%2Fwaku%2F2%2Frs%2F2%2F0/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738811325631517440,"ephemeral":false}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35319/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F1" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:186 Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:65318/filter/v2/messages/%2Fwaku%2F2%2Frs%2F2%2F1/%2Fwaku%2F2%2Fcontent%2Ftest.js" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id b246a2cdbd09
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id bb47b7667c3f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:42 Attaching file ./log/docker/node2_2025-02-06_03-08-42__d87f8130-adcd-4cf8-8a61-2e9e8bb574a4__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:42 Attaching file ./log/docker/node1_2025-02-06_03-08-42__d87f8130-adcd-4cf8-8a61-2e9e8bb574a4__wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_static_sharding_multiple_shards with id: 2025-02-06_03-08-47__8c72370b-ebaa-4a27-9ccb-2aeaf23da5a6
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.sharding:sharding.py:29 Running fixture setup: sharding_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-02-06_03-08-47__8c72370b-ebaa-4a27-9ccb-2aeaf23da5a6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.84.70
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['27753', '27754', '27755', '27756', '27757']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 27753:27753 -p 27754:27754 -p 27755:27755 -p 27756:27756 -p 27757:27757 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=27755 --rest-port=27753 --tcp-port=27754 --discv5-udp-port=27756 --rest-address=0.0.0.0 --nat=extip:172.18.84.70 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=79caba97b7e9a3ebd0cbbde1c7ad47ea66d4d2fba6def6abdbab4eedde95d5fb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=27757 --metrics-logging=true --relay=true --filter=true --pubsub-topic=/waku/2/rs/2/0 --pubsub-topic=/waku/2/rs/2/1 --pubsub-topic=/waku/2/rs/2/2 --pubsub-topic=/waku/2/rs/2/3 --pubsub-topic=/waku/2/rs/2/4 --pubsub-topic=/waku/2/rs/2/5 --pubsub-topic=/waku/2/rs/2/6 --pubsub-topic=/waku/2/rs/2/7
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container b246a2cdbd09. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.84.70 waku 479865d232e6abb1675011951a50d99403cab84cc545ebeea07b3a97b39ff99e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 479865d232e6. Setting up logs at ./log/docker/node1_2025-02-06_03-08-47__8c72370b-ebaa-4a27-9ccb-2aeaf23da5a6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 27753
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container bb47b7667c3f. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27753/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27753/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.84.70/tcp/27754/p2p/16Uiu2HAmDCnCPofHqgpbJXowF2FXDScVhZW3pxJnoKyi6zHH8NLU","/ip4/172.18.84.70/tcp/27755/ws/p2p/16Uiu2HAmDCnCPofHqgpbJXowF2FXDScVhZW3pxJnoKyi6zHH8NLU"],"enrUri":"enr:-Mu4QIympuN4UW6U6usjDZssqDdEqf1IFHs92uOcq7MiTsQocacvTvGGwWIu4dXa3c_sOFg90q6GQQQirMWBYsvYefwCgmlkgnY0gmlwhKwSVEaKbXVsdGlhZGRyc5YACASsElRGBmxqAAoErBJURgZsa90DgnJzkwACCAAAAAEAAgADAAQABQAGAAeJc2VjcDI1NmsxoQMIJNgR46C2fosNM_Itp3z3qaZE_bllihuNcKYHzlXUNYN0Y3CCbGqDdWRwgmxshXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-02-06_03-08-47__8c72370b-ebaa-4a27-9ccb-2aeaf23da5a6__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.59.141
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['14076', '14077', '14078', '14079', '14080']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:72 Cluster id was resolved to: 2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 14076:14076 -p 14077:14077 -p 14078:14078 -p 14079:14079 -p 14080:14080 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=14078 --rest-port=14076 --tcp-port=14077 --discv5-udp-port=14079 --rest-address=0.0.0.0 --nat=extip:172.18.59.141 --peer-exchange=true --discv5-discovery=true --cluster-id=2 --nodekey=7fcfbaf8cfeb68aff5e397cb6a5a68a931c08b9b4399ea2eaa3c4a2fcd7d8564 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-Mu4QIympuN4UW6U6usjDZssqDdEqf1IFHs92uOcq7MiTsQocacvTvGGwWIu4dXa3c_sOFg90q6GQQQirMWBYsvYefwCgmlkgnY0gmlwhKwSVEaKbXVsdGlhZGRyc5YACASsElRGBmxqAAoErBJURgZsa90DgnJzkwACCAAAAAEAAgADAAQABQAGAAeJc2VjcDI1NmsxoQMIJNgR46C2fosNM_Itp3z3qaZE_bllihuNcKYHzlXUNYN0Y3CCbGqDdWRwgmxshXdha3UyBQ --filternode=/ip4/172.18.84.70/tcp/27754/p2p/16Uiu2HAmDCnCPofHqgpbJXowF2FXDScVhZW3pxJnoKyi6zHH8NLU --pubsub-topic=/waku/2/rs/3/1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.59.141 waku b6e124241f69a246016fc2e697d1277aa2d9e774122a6cc362eb2956979ca3f4
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID b6e124241f69. Setting up logs at ./log/docker/node2_2025-02-06_03-08-47__8c72370b-ebaa-4a27-9ccb-2aeaf23da5a6__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 14076
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14076/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QBZ1gdw8G-9dFPkX2RxC76_KSkMyTTsHNgSI7-Ve9cRuf8M0vvUP2gDxSZtbFHuDh9TI_-xx6BcjbtHs4Kzc2e6GAZTZO0iigmlkgnY0gmlwhKwRAAOCcnOFAAIBAAGJc2VjcDI1NmsxoQNsCRjQRvfZjqqN7wwu7rR3H3OxWKVEclB3hThefvsbDoN0Y3CCNv2DdWRwgjb_hXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/14077/p2p/16Uiu2HAmKviRjsrWdCJfFczCKAMuyPAjN8wtsCSN66kQsv6yurUD","/ip4/127.0.0.1/tcp/14078/ws/p2p/16Uiu2HAmKviRjsrWdCJfFczCKAMuyPAjN8wtsCSN66kQsv6yurUD","/ip4/172.17.0.3/tcp/14077/p2p/16Uiu2HAmKviRjsrWdCJfFczCKAMuyPAjN8wtsCSN66kQsv6yurUD","/ip4/172.17.0.3/tcp/14078/ws/p2p/16Uiu2HAmKviRjsrWdCJfFczCKAMuyPAjN8wtsCSN66kQsv6yurUD"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14076/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.84.70/tcp/27754/p2p/16Uiu2HAmDCnCPofHqgpbJXowF2FXDScVhZW3pxJnoKyi6zHH8NLU", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27753/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/2/0", "/waku/2/rs/2/1", "/waku/2/rs/2/2", "/waku/2/rs/2/3", "/waku/2/rs/2/4", "/waku/2/rs/2/5", "/waku/2/rs/2/6", "/waku/2/rs/2/7"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14076/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "ba2fabab-39e9-403c-9e1d-d1a172802a5f", "contentFilters": ["/myapp/1/latest/proto"], "pubsubTopic": "/waku/2/rs/2/0"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"ba2fabab-39e9-403c-9e1d-d1a172802a5f","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14076/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "b0ab0070-dc58-4c5c-92c5-3a214b6c14bc", "contentFilters": ["/waku/2/content/test.js"], "pubsubTopic": "/waku/2/rs/2/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"b0ab0070-dc58-4c5c-92c5-3a214b6c14bc","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14076/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "30966f0c-e350-46bd-a98f-fca0a6f4115b", "contentFilters": ["/app/22/sometopic/someencoding"], "pubsubTopic": "/waku/2/rs/2/2"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"30966f0c-e350-46bd-a98f-fca0a6f4115b","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14076/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "d89cdaa4-3aee-4f75-9cd9-e8e109a997c0", "contentFilters": ["/toychat/2/huilong/proto"], "pubsubTopic": "/waku/2/rs/2/3"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"d89cdaa4-3aee-4f75-9cd9-e8e109a997c0","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14076/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "0527e0ee-bee2-46b9-a71a-d0881c2e4e02", "contentFilters": ["/statusim/1/community/cbor"], "pubsubTopic": "/waku/2/rs/2/4"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"0527e0ee-bee2-46b9-a71a-d0881c2e4e02","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14076/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "66f26c6a-8fd9-4764-a172-6054e7baa9d8", "contentFilters": ["/app/27/sometopic/someencoding"], "pubsubTopic": "/waku/2/rs/2/5"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"66f26c6a-8fd9-4764-a172-6054e7baa9d8","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14076/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "22041511-7487-46f2-9fac-df32b96c06f7", "contentFilters": ["/app/29/sometopic/someencoding"], "pubsubTopic": "/waku/2/rs/2/6"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"22041511-7487-46f2-9fac-df32b96c06f7","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:14076/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "55d9c5d9-a396-4d38-8b72-aae5ff8d8caf", "contentFilters": ["/app/20/sometopic/someencoding"], "pubsubTopic": "/waku/2/rs/2/7"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"55d9c5d9-a396-4d38-8b72-aae5ff8d8caf","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27753/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F0" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:186 Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14076/filter/v2/messages/%2Fwaku%2F2%2Frs%2F2%2F0/%2Fmyapp%2F1%2Flatest%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"U2hhcmRpbmcgd29ya3MhIQ==","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738811329744373504,"ephemeral":false}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27753/relay/v1/messages/%2Fwaku%2F2%2Frs%2F2%2F1" -H "Content-Type: application/json" -d '{"payload": "U2hhcmRpbmcgd29ya3MhIQ==", "contentTopic": "/waku/2/content/test.js", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.sharding:sharding.py:186 Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:14076/filter/v2/messages/%2Fwaku%2F2%2Frs%2F2%2F1/%2Fwaku%2F2%2Fcontent%2Ftest.js" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 479865d232e6
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id b6e124241f69
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:42 Attaching file ./log/docker/node1_2025-02-06_03-08-47__8c72370b-ebaa-4a27-9ccb-2aeaf23da5a6__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:42 Attaching file ./log/docker/node2_2025-02-06_03-08-47__8c72370b-ebaa-4a27-9ccb-2aeaf23da5a6__wakuorg_go-waku:latest.log