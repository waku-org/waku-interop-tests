2025-02-06 03:07:55.273 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-06 03:07:55.273 DEBUG [tests.conftest] Running test: test_time_filter_start_time_equals_end_time with id: 2025-02-06_03-07-55__fae1948e-4ffc-472d-b940-06fc6c4f38b8
2025-02-06 03:07:55.274 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-06 03:07:55.274 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-06 03:07:55.274 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-06 03:07:55.281 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 03:07:55.281 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-06_03-07-55__fae1948e-4ffc-472d-b940-06fc6c4f38b8__wakuorg_nwaku:latest.log
2025-02-06 03:07:55.281 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 03:07:55.281 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 03:07:55.283 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 03:07:55.283 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.43.4
2025-02-06 03:07:55.283 DEBUG [src.node.docker_mananger] Generated ports ['53430', '53431', '53432', '53433', '53434']
2025-02-06 03:07:55.283 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 03:07:55.283 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 03:07:55.283 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 03:07:55.284 DEBUG [src.node.docker_mananger] docker run -i -t -p 53430:53430 -p 53431:53431 -p 53432:53432 -p 53433:53433 -p 53434:53434 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=53432 --rest-port=53430 --tcp-port=53431 --discv5-udp-port=53433 --rest-address=0.0.0.0 --nat=extip:172.18.43.4 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f63ddaba008b9d359ec121f8ba06a6909ab2cfe421ebcb98f4b360f70c84bb5c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=53434 --metrics-logging=true --store=true --relay=true
2025-02-06 03:07:55.546 ERROR [src.node.docker_mananger] Max retries reached for container d7b79648fd4b. Exiting log stream.
2025-02-06 03:07:55.657 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 03:07:55.657 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 03:07:55.658 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 03:07:55.659 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.15.247
2025-02-06 03:07:55.659 DEBUG [src.node.docker_mananger] Generated ports ['18080', '18081', '18082', '18083', '18084']
2025-02-06 03:07:55.659 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 03:07:55.659 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 03:07:55.659 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 03:07:55.659 DEBUG [src.node.docker_mananger] docker run -i -t -p 18080:18080 -p 18081:18081 -p 18082:18082 -p 18083:18083 -p 18084:18084 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18082 --rest-port=18080 --tcp-port=18081 --discv5-udp-port=18083 --rest-address=0.0.0.0 --nat=extip:172.18.15.247 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=da36b8f3be92b6afceab9f60af8680d20eea6bae2bcce3809ce17feee34eaafb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18084 --metrics-logging=true --store=true --relay=true
2025-02-06 03:07:55.894 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.15.247 waku 492ea7d596424658af8ad7cfd7245d2de0cd53b3a5a7858355f356645733570b
2025-02-06 03:07:55.946 DEBUG [src.node.docker_mananger] Container started with ID 492ea7d59642. Setting up logs at ./log/docker/publishing_node1_2025-02-06_03-07-55__fae1948e-4ffc-472d-b940-06fc6c4f38b8__wakuorg_nwaku:latest.log
2025-02-06 03:07:55.947 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 18080
2025-02-06 03:07:55.948 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 03:07:56.061 ERROR [src.node.docker_mananger] Max retries reached for container 71f969ec25a3. Exiting log stream.
2025-02-06 03:07:56.948 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18080/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:07:56.951 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 03:07:56.951 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 03:07:56.951 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18080/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:07:56.953 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.15.247/tcp/18081/p2p/16Uiu2HAmJNyvD8Wc4pyAGfMQchgAboBke1i2E8SD54RffPqA1f5J","/ip4/172.18.15.247/tcp/18082/ws/p2p/16Uiu2HAmJNyvD8Wc4pyAGfMQchgAboBke1i2E8SD54RffPqA1f5J"],"enrUri":"enr:-L24QJqQiYYIBPvjSJ-98riOLKjOw83hzVgOesCWCEX2xahtTBYR6OfIARyz3QnQiRTo-4mBuR5SvF3gPWPKk3S2UMsCgmlkgnY0gmlwhKwSD_eKbXVsdGlhZGRyc5YACASsEg_3BkahAAoErBIP9wZGot0DgnJzhQADAQAAiXNlY3AyNTZrMaEDVQxW9W2QZbAwqtj1SaHyp1JvSIIb-Znhy8tm1iaqMmGDdGNwgkahg3VkcIJGo4V3YWt1MgM"}'
2025-02-06 03:07:56.954 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 03:07:56.960 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-06 03:07:56.960 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-06_03-07-55__fae1948e-4ffc-472d-b940-06fc6c4f38b8__wakuorg_go-waku:latest.log
2025-02-06 03:07:56.960 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 03:07:56.961 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 03:07:56.962 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 03:07:56.962 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.85.20
2025-02-06 03:07:56.962 DEBUG [src.node.docker_mananger] Generated ports ['32131', '32132', '32133', '32134', '32135']
2025-02-06 03:07:56.962 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 03:07:56.962 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 03:07:56.962 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 03:07:56.963 DEBUG [src.node.docker_mananger] docker run -i -t -p 32131:32131 -p 32132:32132 -p 32133:32133 -p 32134:32134 -p 32135:32135 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=32133 --rest-port=32131 --tcp-port=32132 --discv5-udp-port=32134 --rest-address=0.0.0.0 --nat=extip:172.18.85.20 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b34f19ef8c72a4c44c0cd5a565a4fae8cdbba9801859382a05eddc16bbe80482 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QJqQiYYIBPvjSJ-98riOLKjOw83hzVgOesCWCEX2xahtTBYR6OfIARyz3QnQiRTo-4mBuR5SvF3gPWPKk3S2UMsCgmlkgnY0gmlwhKwSD_eKbXVsdGlhZGRyc5YACASsEg_3BkahAAoErBIP9wZGot0DgnJzhQADAQAAiXNlY3AyNTZrMaEDVQxW9W2QZbAwqtj1SaHyp1JvSIIb-Znhy8tm1iaqMmGDdGNwgkahg3VkcIJGo4V3YWt1MgM --storenode=/ip4/172.18.15.247/tcp/18081/p2p/16Uiu2HAmJNyvD8Wc4pyAGfMQchgAboBke1i2E8SD54RffPqA1f5J --store=true --relay=true
2025-02-06 03:07:57.199 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.85.20 waku 54180b222bd96627155977336ee9938b7c3643a5f58d80ece3fdf766c3bd64d3
2025-02-06 03:07:57.252 DEBUG [src.node.docker_mananger] Container started with ID 54180b222bd9. Setting up logs at ./log/docker/store_node1_2025-02-06_03-07-55__fae1948e-4ffc-472d-b940-06fc6c4f38b8__wakuorg_go-waku:latest.log
2025-02-06 03:07:57.253 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 32131
2025-02-06 03:07:57.253 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 03:07:58.253 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32131/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:07:58.256 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QCPxbJsWCodG0mzE19U9ce7pTrli3ZcZxYnQP5drdaFxUevu6pzWzfTCtiskapuQg3f9xjjnfLyKPP38BEH4N2-GAZTZOn_EgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaECAX4SJ7U19YeLEggAJzmgWCIlJTiXyUbXu0ih7IxBUVSDdGNwgn2Eg3VkcIJ9hoV3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/32132/p2p/16Uiu2HAkuXVtJwBwh5cn2DkoNJnYDaPCXZ4paFPrCc41vR11K9yu","/ip4/127.0.0.1/tcp/32133/ws/p2p/16Uiu2HAkuXVtJwBwh5cn2DkoNJnYDaPCXZ4paFPrCc41vR11K9yu","/ip4/172.17.0.3/tcp/32132/p2p/16Uiu2HAkuXVtJwBwh5cn2DkoNJnYDaPCXZ4paFPrCc41vR11K9yu","/ip4/172.17.0.3/tcp/32133/ws/p2p/16Uiu2HAkuXVtJwBwh5cn2DkoNJnYDaPCXZ4paFPrCc41vR11K9yu"]}'
2025-02-06 03:07:58.256 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 03:07:58.257 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32131/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.15.247/tcp/18081/p2p/16Uiu2HAmJNyvD8Wc4pyAGfMQchgAboBke1i2E8SD54RffPqA1f5J", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-06 03:07:58.273 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-06 03:07:58.275 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18080/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-06 03:07:58.300 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 03:07:58.300 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32131/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-06 03:07:58.303 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-06 03:07:58.305 DEBUG [src.steps.store] Relaying message
2025-02-06 03:07:58.307 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18080/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 03:07:58.321 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 03:07:58.322 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 03:07:58.523 DEBUG [src.steps.store] Relaying message
2025-02-06 03:07:58.523 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18080/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 03:07:58.529 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 03:07:58.529 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 03:07:58.730 DEBUG [src.steps.store] Relaying message
2025-02-06 03:07:58.730 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18080/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 03:07:58.736 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 03:07:58.736 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 03:07:58.937 DEBUG [src.steps.store] Relaying message
2025-02-06 03:07:58.937 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18080/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 03:07:58.942 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 03:07:58.943 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 03:07:59.143 DEBUG [src.steps.store] Relaying message
2025-02-06 03:07:59.144 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18080/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 03:07:59.152 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 03:07:59.152 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 03:07:59.352 DEBUG [src.steps.store] Relaying message
2025-02-06 03:07:59.353 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18080/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 03:07:59.358 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 03:07:59.359 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 03:07:59.559 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18080/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=1738811275305131008&endTime=1738811275305131008&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:07:59.563 ERROR [src.node.api_clients.base_client] HTTP error occurred: 500 Server Error: Internal Server Error for url: http://127.0.0.1:18080/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&startTime=1738811275305131008&endTime=1738811275305131008&pageSize=20&ascending=true. Response content: b'error in handleSelfStoreRequest: BAD_RESPONSE: archive error: INVALID_QUERY: startTime should be before endTime'
2025-02-06 03:07:59.563 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32131/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&startTime=1738811275305131008&endTime=1738811275305131008&pageSize=20&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:07:59.569 ERROR [src.node.api_clients.base_client] HTTP error occurred: 500 Server Error: Internal Server Error for url: http://127.0.0.1:32131/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&startTime=1738811275305131008&endTime=1738811275305131008&pageSize=20&ascending=true. Response content: b'{"messages":null,"error_message":"300 - BAD_RESPONSE: archive error: INVALID_QUERY: startTime should be before endTime"}'
2025-02-06 03:07:59.571 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-06 03:07:59.572 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-06 03:07:59.572 DEBUG [src.node.waku_node] Stopping container with id 492ea7d59642
2025-02-06 03:08:00.122 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 03:08:00.122 DEBUG [src.node.waku_node] Stopping container with id 54180b222bd9
2025-02-06 03:08:00.637 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 03:08:00.641 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-06 03:08:00.649 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 03:08:00.653 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
