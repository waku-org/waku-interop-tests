2025-02-06 03:07:00.699 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-06 03:07:00.699 DEBUG [tests.conftest] Running test: test_invalid_hash_param with id: 2025-02-06_03-07-00__f7ff5b59-784f-4dae-a5e8-0756d9cfbee5
2025-02-06 03:07:00.699 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-06 03:07:00.700 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-06 03:07:00.700 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-06 03:07:00.706 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 03:07:00.706 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-06_03-07-00__f7ff5b59-784f-4dae-a5e8-0756d9cfbee5__wakuorg_nwaku:latest.log
2025-02-06 03:07:00.707 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 03:07:00.707 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 03:07:00.708 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 03:07:00.708 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.129.28
2025-02-06 03:07:00.708 DEBUG [src.node.docker_mananger] Generated ports ['46759', '46760', '46761', '46762', '46763']
2025-02-06 03:07:00.709 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 03:07:00.709 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 03:07:00.709 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 03:07:00.709 DEBUG [src.node.docker_mananger] docker run -i -t -p 46759:46759 -p 46760:46760 -p 46761:46761 -p 46762:46762 -p 46763:46763 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=46761 --rest-port=46759 --tcp-port=46760 --discv5-udp-port=46762 --rest-address=0.0.0.0 --nat=extip:172.18.129.28 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=68e8a6eaf625fb4e5ee67e90df0d1fa70d51c5d3db5c5390ddd5e4bbc9cfc21e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=46763 --metrics-logging=true --store=true --relay=true
2025-02-06 03:07:00.935 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.129.28 waku bf3ac3bd137712601341bb4ee12e2d7b1e859e3d4227ea703101962ca11a7a6b
2025-02-06 03:07:00.984 DEBUG [src.node.docker_mananger] Container started with ID bf3ac3bd1377. Setting up logs at ./log/docker/publishing_node1_2025-02-06_03-07-00__f7ff5b59-784f-4dae-a5e8-0756d9cfbee5__wakuorg_nwaku:latest.log
2025-02-06 03:07:00.985 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 46759
2025-02-06 03:07:00.986 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 03:07:00.999 ERROR [src.node.docker_mananger] Max retries reached for container aa8bf174753a. Exiting log stream.
2025-02-06 03:07:01.505 ERROR [src.node.docker_mananger] Max retries reached for container 492efa56390c. Exiting log stream.
2025-02-06 03:07:01.986 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46759/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:07:01.989 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 03:07:01.989 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 03:07:01.989 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46759/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:07:01.991 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.129.28/tcp/46760/p2p/16Uiu2HAkzHaArDGs1irWdXWmz7fXwSrdHFXDHByCE77QCt8F4DXQ","/ip4/172.18.129.28/tcp/46761/ws/p2p/16Uiu2HAkzHaArDGs1irWdXWmz7fXwSrdHFXDHByCE77QCt8F4DXQ"],"enrUri":"enr:-L24QPcBbSuwPG_s7cyhrrcHRcXfFGboZGXGF2h3l2ft0JDAL_rhaqQpc-rstK2BiHZEBzSfYA2avx09De--A_1UaksCgmlkgnY0gmlwhKwSgRyKbXVsdGlhZGRyc5YACASsEoEcBraoAAoErBKBHAa2qd0DgnJzhQADAQAAiXNlY3AyNTZrMaECSDc4LxkNBvg7qcWYxHdXGPnzcWo6XsMIclAr_GXf1ouDdGNwgraog3VkcIK2qoV3YWt1MgM"}'
2025-02-06 03:07:01.992 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 03:07:01.998 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-06 03:07:01.998 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-06_03-07-00__f7ff5b59-784f-4dae-a5e8-0756d9cfbee5__wakuorg_go-waku:latest.log
2025-02-06 03:07:01.998 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 03:07:01.999 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 03:07:02.000 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 03:07:02.000 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.219.82
2025-02-06 03:07:02.000 DEBUG [src.node.docker_mananger] Generated ports ['24751', '24752', '24753', '24754', '24755']
2025-02-06 03:07:02.000 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 03:07:02.000 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 03:07:02.000 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 03:07:02.001 DEBUG [src.node.docker_mananger] docker run -i -t -p 24751:24751 -p 24752:24752 -p 24753:24753 -p 24754:24754 -p 24755:24755 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=24753 --rest-port=24751 --tcp-port=24752 --discv5-udp-port=24754 --rest-address=0.0.0.0 --nat=extip:172.18.219.82 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d74cf837ce3b14c46128a3c386aaecf1c67fd8495bc7a564bd752dffbcba7e7f --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QPcBbSuwPG_s7cyhrrcHRcXfFGboZGXGF2h3l2ft0JDAL_rhaqQpc-rstK2BiHZEBzSfYA2avx09De--A_1UaksCgmlkgnY0gmlwhKwSgRyKbXVsdGlhZGRyc5YACASsEoEcBraoAAoErBKBHAa2qd0DgnJzhQADAQAAiXNlY3AyNTZrMaECSDc4LxkNBvg7qcWYxHdXGPnzcWo6XsMIclAr_GXf1ouDdGNwgraog3VkcIK2qoV3YWt1MgM --storenode=/ip4/172.18.129.28/tcp/46760/p2p/16Uiu2HAkzHaArDGs1irWdXWmz7fXwSrdHFXDHByCE77QCt8F4DXQ --store=true --relay=true
2025-02-06 03:07:02.226 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.219.82 waku e1e6d23337f5a6bd3d97dc4dbe11ef0e1a5223d8d9a04f63a62f4da2c76c2586
2025-02-06 03:07:02.275 DEBUG [src.node.docker_mananger] Container started with ID e1e6d23337f5. Setting up logs at ./log/docker/store_node1_2025-02-06_03-07-00__f7ff5b59-784f-4dae-a5e8-0756d9cfbee5__wakuorg_go-waku:latest.log
2025-02-06 03:07:02.277 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 24751
2025-02-06 03:07:02.277 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 03:07:03.278 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:24751/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:07:03.280 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QPcCi5SZD00cf93kjW7fOE4HsZSfT5Z9WKYqCo7X7bHaK_gzHn6hrJyM9TkaR5_lxd3ctPpmGwdhUM5g66s8FbSGAZTZOakHgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaECIATlowFj0ZmXaMBiwKfOCJwRupqVcQaTbNQ6l_QKtvODdGNwgmCwg3VkcIJgsoV3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/24752/p2p/16Uiu2HAkwafMg8npgpuX7P92xkdmsqDmZCxkivBYKoAzyCHJUjgn","/ip4/127.0.0.1/tcp/24753/ws/p2p/16Uiu2HAkwafMg8npgpuX7P92xkdmsqDmZCxkivBYKoAzyCHJUjgn","/ip4/172.17.0.3/tcp/24752/p2p/16Uiu2HAkwafMg8npgpuX7P92xkdmsqDmZCxkivBYKoAzyCHJUjgn","/ip4/172.17.0.3/tcp/24753/ws/p2p/16Uiu2HAkwafMg8npgpuX7P92xkdmsqDmZCxkivBYKoAzyCHJUjgn"]}'
2025-02-06 03:07:03.281 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 03:07:03.281 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24751/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.129.28/tcp/46760/p2p/16Uiu2HAkzHaArDGs1irWdXWmz7fXwSrdHFXDHByCE77QCt8F4DXQ", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-06 03:07:03.299 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-06 03:07:03.300 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46759/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-06 03:07:03.326 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 03:07:03.326 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24751/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-06 03:07:03.329 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-06 03:07:03.330 DEBUG [src.steps.store] Relaying message
2025-02-06 03:07:03.331 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46759/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 03:07:03.344 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 03:07:03.345 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 03:07:03.546 DEBUG [src.steps.store] Relaying message
2025-02-06 03:07:03.546 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46759/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8x", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 03:07:03.551 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 03:07:03.552 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 03:07:03.752 DEBUG [src.steps.store] Relaying message
2025-02-06 03:07:03.752 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46759/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8y", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 03:07:03.758 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 03:07:03.758 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 03:07:03.959 DEBUG [src.steps.store] Relaying message
2025-02-06 03:07:03.959 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46759/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8z", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 03:07:03.965 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 03:07:03.965 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-06 03:07:04.166 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46759/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&hashes=0xf76d8f327c933781bc69a941ce6fc646533c84616f4fc6b3752cb3ca84cd1e53&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:07:04.169 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xf76d8f327c933781bc69a941ce6fc646533c84616f4fc6b3752cb3ca84cd1e53"}]}'
2025-02-06 03:07:04.170 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46759/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&ascending=true&hash=0xf76d8f327c933781bc69a941ce6fc646533c84616f4fc6b3752cb3ca84cd1e53" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:07:04.173 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xf67d7500d091cfdf8b05eadebba0c8401cb3c45f3cd30b17e1eb9350b7bdb157"},{"messageHash":"0xde956600541eb077ae2adbdcb81839e8290cf31b9da356164d1088fe3ceb413c"},{"messageHash":"0xf76d8f327c933781bc69a941ce6fc646533c84616f4fc6b3752cb3ca84cd1e53"},{"messageHash":"0x4b386e1a9946fba88139b2e6319a1f1d8a34a26cc2e33e10ebc26a9a042c7c0d"}]}'
2025-02-06 03:07:04.173 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:24751/store/v3/messages?peerAddr=%2Fip4%2F172.18.129.28%2Ftcp%2F46760%2Fp2p%2F16Uiu2HAkzHaArDGs1irWdXWmz7fXwSrdHFXDHByCE77QCt8F4DXQ&hashes=922PMnyTN4G8aalBzm%2FGRlM8hGFvT8azdSyzyoTNHlM%3D&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:07:04.175 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:24751/store/v3/messages?peerAddr=%2Fip4%2F172.18.129.28%2Ftcp%2F46760%2Fp2p%2F16Uiu2HAkzHaArDGs1irWdXWmz7fXwSrdHFXDHByCE77QCt8F4DXQ&hashes=922PMnyTN4G8aalBzm%2FGRlM8hGFvT8azdSyzyoTNHlM%3D&ascending=true. Response content: b'{"status_code":400,"status_desc":"illegal base64 data at input byte 18"}'
2025-02-06 03:07:04.210 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-06 03:07:04.211 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-06 03:07:04.211 DEBUG [src.node.waku_node] Stopping container with id bf3ac3bd1377
2025-02-06 03:07:04.731 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 03:07:04.734 DEBUG [src.node.waku_node] Stopping container with id e1e6d23337f5
2025-02-06 03:07:05.231 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 03:07:05.232 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-06 03:07:05.239 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 03:07:05.242 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
