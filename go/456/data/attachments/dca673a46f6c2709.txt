2025-02-06 03:05:17.914 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-06 03:05:17.915 DEBUG [tests.conftest] Running test: test_filter_resubscribe_to_unsubscribed_topics with id: 2025-02-06_03-05-17__ba0f79f0-7bc7-43f0-9341-2cbbd2c88732
2025-02-06 03:05:17.915 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-06 03:05:17.915 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-06 03:05:17.916 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-06 03:05:17.922 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 03:05:17.922 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-06_03-05-17__ba0f79f0-7bc7-43f0-9341-2cbbd2c88732__wakuorg_nwaku:latest.log
2025-02-06 03:05:17.922 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 03:05:17.922 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 03:05:17.924 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 03:05:17.924 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.7.93
2025-02-06 03:05:17.924 DEBUG [src.node.docker_mananger] Generated ports ['46396', '46397', '46398', '46399', '46400']
2025-02-06 03:05:17.924 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 03:05:17.924 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 03:05:17.924 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 03:05:17.924 DEBUG [src.node.docker_mananger] docker run -i -t -p 46396:46396 -p 46397:46397 -p 46398:46398 -p 46399:46399 -p 46400:46400 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=46398 --rest-port=46396 --tcp-port=46397 --discv5-udp-port=46399 --rest-address=0.0.0.0 --nat=extip:172.18.7.93 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1a92ed787b9ecbbce2cc2a0c9af1f17277c59741c002c0daaf88bedc9b3adf7e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=46400 --metrics-logging=true --relay=true --filter=true
2025-02-06 03:05:18.146 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.7.93 waku a3adaca3d04054773a93381e3e9367db69b84488704b9164b240ff0676693ecc
2025-02-06 03:05:18.194 DEBUG [src.node.docker_mananger] Container started with ID a3adaca3d040. Setting up logs at ./log/docker/node1_2025-02-06_03-05-17__ba0f79f0-7bc7-43f0-9341-2cbbd2c88732__wakuorg_nwaku:latest.log
2025-02-06 03:05:18.194 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 46396
2025-02-06 03:05:18.195 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 03:05:18.723 ERROR [src.node.docker_mananger] Max retries reached for container 49fac12eedc2. Exiting log stream.
2025-02-06 03:05:19.195 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46396/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:05:19.198 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 03:05:19.198 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 03:05:19.198 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46396/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:05:19.201 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.7.93/tcp/46397/p2p/16Uiu2HAmKbHihyCg5a5zZV3CVY6DBmdX36wMhCiz9m7FX7SVQtB1","/ip4/172.18.7.93/tcp/46398/ws/p2p/16Uiu2HAmKbHihyCg5a5zZV3CVY6DBmdX36wMhCiz9m7FX7SVQtB1"],"enrUri":"enr:-L24QG0_Uu5tmu3CIve1fdep9at6DKFIjjZfj6bXFUGdzhc8PryGRNb4SVgs4UREf6GEwM3kVYsHPQ7LwHn4qQRDNnoCgmlkgnY0gmlwhKwSB12KbXVsdGlhZGRyc5YACASsEgddBrU9AAoErBIHXQa1Pt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDZw8f7sor4E1oqBMlS7J8Yi3GD6RX2lHQ3Nt5QtKaLuiDdGNwgrU9g3VkcIK1P4V3YWt1MgU"}'
2025-02-06 03:05:19.201 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 03:05:19.201 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-06 03:05:19.207 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-06 03:05:19.207 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-06_03-05-17__ba0f79f0-7bc7-43f0-9341-2cbbd2c88732__wakuorg_go-waku:latest.log
2025-02-06 03:05:19.207 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 03:05:19.207 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 03:05:19.209 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 03:05:19.209 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.95.51
2025-02-06 03:05:19.209 DEBUG [src.node.docker_mananger] Generated ports ['55774', '55775', '55776', '55777', '55778']
2025-02-06 03:05:19.209 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 03:05:19.209 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 03:05:19.209 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 03:05:19.210 DEBUG [src.node.docker_mananger] docker run -i -t -p 55774:55774 -p 55775:55775 -p 55776:55776 -p 55777:55777 -p 55778:55778 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=55776 --rest-port=55774 --tcp-port=55775 --discv5-udp-port=55777 --rest-address=0.0.0.0 --nat=extip:172.18.95.51 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=37abb2babfdd943b3559efb1865d6af5b3ee1d30c91c522d8aebbb2bcc907db7 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-L24QG0_Uu5tmu3CIve1fdep9at6DKFIjjZfj6bXFUGdzhc8PryGRNb4SVgs4UREf6GEwM3kVYsHPQ7LwHn4qQRDNnoCgmlkgnY0gmlwhKwSB12KbXVsdGlhZGRyc5YACASsEgddBrU9AAoErBIHXQa1Pt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDZw8f7sor4E1oqBMlS7J8Yi3GD6RX2lHQ3Nt5QtKaLuiDdGNwgrU9g3VkcIK1P4V3YWt1MgU --filternode=/ip4/172.18.7.93/tcp/46397/p2p/16Uiu2HAmKbHihyCg5a5zZV3CVY6DBmdX36wMhCiz9m7FX7SVQtB1 --pubsub-topic=/waku/2/rs/3/1
2025-02-06 03:05:19.438 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.95.51 waku 8ba1d10cb4b8dcddccc0e9aa0f046de3a212395a5078c4eecddacdb3da880515
2025-02-06 03:05:19.492 DEBUG [src.node.docker_mananger] Container started with ID 8ba1d10cb4b8. Setting up logs at ./log/docker/node2_2025-02-06_03-05-17__ba0f79f0-7bc7-43f0-9341-2cbbd2c88732__wakuorg_go-waku:latest.log
2025-02-06 03:05:19.493 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 55774
2025-02-06 03:05:19.493 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 03:05:20.494 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:55774/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:05:20.496 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QNCuOR_RpCK46Jr4brQn_1LWNZYVGtUnFZpgyBe3wnbmImPGpFx7qyyPBPPJQw77t05jtEQkzrSkg931qCOL-_iGAZTZOBd6gmlkgnY0gmlwhKwRAAOCcnOFAAMBAAGJc2VjcDI1NmsxoQIUrSzEHh5bwZviXbDibrj6svd1cF_o0ulcYUE0eK3g-oN0Y3CC2d-DdWRwgtnhhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/55775/p2p/16Uiu2HAkvpPHp8CgVERiKGcBxwyuDccKqggNwyixo66yUYZSb8Su","/ip4/127.0.0.1/tcp/55776/ws/p2p/16Uiu2HAkvpPHp8CgVERiKGcBxwyuDccKqggNwyixo66yUYZSb8Su","/ip4/172.17.0.3/tcp/55775/p2p/16Uiu2HAkvpPHp8CgVERiKGcBxwyuDccKqggNwyixo66yUYZSb8Su","/ip4/172.17.0.3/tcp/55776/ws/p2p/16Uiu2HAkvpPHp8CgVERiKGcBxwyuDccKqggNwyixo66yUYZSb8Su"]}'
2025-02-06 03:05:20.497 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 03:05:20.497 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55774/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.7.93/tcp/46397/p2p/16Uiu2HAmKbHihyCg5a5zZV3CVY6DBmdX36wMhCiz9m7FX7SVQtB1", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-06 03:05:20.499 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-06 03:05:20.499 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-06 03:05:20.500 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46396/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-06 03:05:20.503 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 03:05:20.503 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55774/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "7ae5af84-0018-4c73-b616-acc71a1dc51a", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-06 03:05:20.509 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"7ae5af84-0018-4c73-b616-acc71a1dc51a","statusDesc":"OK"}'
2025-02-06 03:05:20.511 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46396/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 03:05:20.517 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 03:05:20.518 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-06 03:05:20.618 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-06 03:05:20.618 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:55774/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:05:20.620 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1738811120511045376,"ephemeral":false}]'
2025-02-06 03:05:20.622 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:55774/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-06 03:05:20.626 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
2025-02-06 03:05:20.628 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46396/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 03:05:20.631 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 03:05:20.631 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-06 03:05:20.731 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-06 03:05:20.732 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:55774/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:05:20.734 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:55774/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/%2Ftest%2F1%2Fwaku-filter%2Fproto. Response content: b'not subscribed to pubsubTopic:/waku/2/rs/3/1 contentTopic: /test/1/waku-filter/proto'
2025-02-06 03:05:20.736 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46396/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-06 03:05:20.738 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 03:05:20.738 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55774/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "bffce5fb-b866-4938-9e97-8b4781b2ccec", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-06 03:05:20.743 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"bffce5fb-b866-4938-9e97-8b4781b2ccec","statusDesc":"OK"}'
2025-02-06 03:05:20.744 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46396/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 03:05:20.748 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 03:05:20.748 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-06 03:05:20.848 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-06 03:05:20.849 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:55774/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:05:20.850 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[]'
2025-02-06 03:05:20.890 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-06 03:05:20.891 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-06 03:05:20.891 DEBUG [src.node.waku_node] Stopping container with id a3adaca3d040
2025-02-06 03:05:21.400 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 03:05:21.401 DEBUG [src.node.waku_node] Stopping container with id 8ba1d10cb4b8
2025-02-06 03:05:21.979 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 03:05:21.980 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-06 03:05:21.985 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 03:05:21.989 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 03:05:21.990 DEBUG [tests.conftest] Running fixture teardown: attach_logs_on_fail
2025-02-06 03:05:21.990 DEBUG [tests.conftest] Test failed, attempting to attach logs to the allure reports
2025-02-06 03:05:21.990 DEBUG [src.libs.common] Attaching file ./log/docker/node1_2025-02-06_03-05-17__ba0f79f0-7bc7-43f0-9341-2cbbd2c88732__wakuorg_nwaku:latest.log
2025-02-06 03:05:21.991 DEBUG [src.libs.common] Attaching file ./log/docker/node2_2025-02-06_03-05-17__ba0f79f0-7bc7-43f0-9341-2cbbd2c88732__wakuorg_go-waku:latest.log
2025-02-06 03:05:21.994 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-06 03:05:21.994 DEBUG [tests.conftest] Running test: test_filter_resubscribe_to_unsubscribed_topics with id: 2025-02-06_03-05-21__94cbecce-4118-476c-84c8-3eab42fb5109
2025-02-06 03:05:21.995 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-06 03:05:21.995 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-06 03:05:21.995 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-06 03:05:22.001 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-06 03:05:22.001 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-06_03-05-21__94cbecce-4118-476c-84c8-3eab42fb5109__wakuorg_nwaku:latest.log
2025-02-06 03:05:22.001 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 03:05:22.001 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 03:05:22.003 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 03:05:22.003 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.122.97
2025-02-06 03:05:22.003 DEBUG [src.node.docker_mananger] Generated ports ['34887', '34888', '34889', '34890', '34891']
2025-02-06 03:05:22.003 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 03:05:22.003 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 03:05:22.003 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 03:05:22.003 DEBUG [src.node.docker_mananger] docker run -i -t -p 34887:34887 -p 34888:34888 -p 34889:34889 -p 34890:34890 -p 34891:34891 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=34889 --rest-port=34887 --tcp-port=34888 --discv5-udp-port=34890 --rest-address=0.0.0.0 --nat=extip:172.18.122.97 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ee6eb85ff1f2d1ab33cbb7bf9ebebd9e723e0b6ea596ca1a87dfc1119fb33e46 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=34891 --metrics-logging=true --relay=true --filter=true
2025-02-06 03:05:22.212 ERROR [src.node.docker_mananger] Max retries reached for container a3adaca3d040. Exiting log stream.
2025-02-06 03:05:22.234 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.122.97 waku 7fd9360392dd3c1e914cce83afd3c609311389734915d4c19e11b93556c1826e
2025-02-06 03:05:22.301 DEBUG [src.node.docker_mananger] Container started with ID 7fd9360392dd. Setting up logs at ./log/docker/node1_2025-02-06_03-05-21__94cbecce-4118-476c-84c8-3eab42fb5109__wakuorg_nwaku:latest.log
2025-02-06 03:05:22.302 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 34887
2025-02-06 03:05:22.302 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 03:05:22.799 ERROR [src.node.docker_mananger] Max retries reached for container 8ba1d10cb4b8. Exiting log stream.
2025-02-06 03:05:23.304 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:34887/health" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:05:23.307 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-06 03:05:23.307 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-06 03:05:23.307 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:34887/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:05:23.309 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.122.97/tcp/34888/p2p/16Uiu2HAmKJjBT1VndRcom4C5gpndyUCyFRwexdnFup9qJTkcZjpr","/ip4/172.18.122.97/tcp/34889/ws/p2p/16Uiu2HAmKJjBT1VndRcom4C5gpndyUCyFRwexdnFup9qJTkcZjpr"],"enrUri":"enr:-L24QH0lLjo8Wux_13omxvkYZenYnpkRlY2J173XySeRqh0jSTGWt9aPGNztoRunEGSCOSpv-ltJYW6yYlAcGBJz950CgmlkgnY0gmlwhKwSemGKbXVsdGlhZGRyc5YACASsEnphBohIAAoErBJ6YQaISd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDYtEKN1Sa1mAQEP5fWbRTW0mlHzNWxforW9ccGPFbE8-DdGNwgohIg3VkcIKISoV3YWt1MgU"}'
2025-02-06 03:05:23.310 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 03:05:23.310 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-06 03:05:23.316 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-06 03:05:23.316 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-06_03-05-21__94cbecce-4118-476c-84c8-3eab42fb5109__wakuorg_go-waku:latest.log
2025-02-06 03:05:23.316 DEBUG [src.node.waku_node] Starting Node...
2025-02-06 03:05:23.316 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-06 03:05:23.318 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-06 03:05:23.318 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.178.87
2025-02-06 03:05:23.318 DEBUG [src.node.docker_mananger] Generated ports ['57222', '57223', '57224', '57225', '57226']
2025-02-06 03:05:23.318 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-06 03:05:23.318 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-06 03:05:23.318 DEBUG [src.node.waku_node] Using volumes []
2025-02-06 03:05:23.318 DEBUG [src.node.docker_mananger] docker run -i -t -p 57222:57222 -p 57223:57223 -p 57224:57224 -p 57225:57225 -p 57226:57226 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=57224 --rest-port=57222 --tcp-port=57223 --discv5-udp-port=57225 --rest-address=0.0.0.0 --nat=extip:172.18.178.87 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=35dec529d1a5615be501aaf4b64a1cbcf49f67be2734fdcb69b7f57a7b4b921d --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-L24QH0lLjo8Wux_13omxvkYZenYnpkRlY2J173XySeRqh0jSTGWt9aPGNztoRunEGSCOSpv-ltJYW6yYlAcGBJz950CgmlkgnY0gmlwhKwSemGKbXVsdGlhZGRyc5YACASsEnphBohIAAoErBJ6YQaISd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDYtEKN1Sa1mAQEP5fWbRTW0mlHzNWxforW9ccGPFbE8-DdGNwgohIg3VkcIKISoV3YWt1MgU --filternode=/ip4/172.18.122.97/tcp/34888/p2p/16Uiu2HAmKJjBT1VndRcom4C5gpndyUCyFRwexdnFup9qJTkcZjpr --pubsub-topic=/waku/2/rs/3/1
2025-02-06 03:05:23.547 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.178.87 waku b0d54b1885aa30202efb91765d3e9b850427c9c3891bc8728cd0461f970371ee
2025-02-06 03:05:23.598 DEBUG [src.node.docker_mananger] Container started with ID b0d54b1885aa. Setting up logs at ./log/docker/node2_2025-02-06_03-05-21__94cbecce-4118-476c-84c8-3eab42fb5109__wakuorg_go-waku:latest.log
2025-02-06 03:05:23.599 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 57222
2025-02-06 03:05:23.599 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-06 03:05:24.600 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57222/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:05:24.602 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QB73nWPM2OCY2ae9k2WGpHgNYPd_UtoECgPNHTT4pXGFDxo9KB20BMDHXCKjVriHigpxT6fUSsweAtrNh2qSSDiGAZTZOCeIgmlkgnY0gmlwhKwRAAOCcnOFAAMBAAGJc2VjcDI1NmsxoQNMwfmXA44RK6KiLxOTJSPHlCAZZUoY5BPe_Ep3RIstCYN0Y3CC34eDdWRwgt-JhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/57223/p2p/16Uiu2HAmHpctToujvXMZ2jJH7QQ3eb6p25935YtMLBtUXPCqpuTW","/ip4/127.0.0.1/tcp/57224/ws/p2p/16Uiu2HAmHpctToujvXMZ2jJH7QQ3eb6p25935YtMLBtUXPCqpuTW","/ip4/172.17.0.3/tcp/57223/p2p/16Uiu2HAmHpctToujvXMZ2jJH7QQ3eb6p25935YtMLBtUXPCqpuTW","/ip4/172.17.0.3/tcp/57224/ws/p2p/16Uiu2HAmHpctToujvXMZ2jJH7QQ3eb6p25935YtMLBtUXPCqpuTW"]}'
2025-02-06 03:05:24.603 INFO [src.node.waku_node] REST service is ready !!
2025-02-06 03:05:24.603 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57222/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.122.97/tcp/34888/p2p/16Uiu2HAmKJjBT1VndRcom4C5gpndyUCyFRwexdnFup9qJTkcZjpr", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-06 03:05:24.605 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-06 03:05:24.605 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-06 03:05:24.606 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34887/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-06 03:05:24.608 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 03:05:24.609 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57222/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "f2240081-17c3-4330-adec-0d472aacf872", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-06 03:05:24.614 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"f2240081-17c3-4330-adec-0d472aacf872","statusDesc":"OK"}'
2025-02-06 03:05:24.616 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34887/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 03:05:24.623 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 03:05:24.624 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-06 03:05:24.724 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-06 03:05:24.724 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57222/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:05:24.727 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1738811124616638720,"ephemeral":false}]'
2025-02-06 03:05:24.728 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:57222/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-06 03:05:24.733 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
2025-02-06 03:05:24.734 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34887/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 03:05:24.737 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 03:05:24.738 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-06 03:05:24.838 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-06 03:05:24.838 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57222/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:05:24.840 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:57222/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/%2Ftest%2F1%2Fwaku-filter%2Fproto. Response content: b'not subscribed to pubsubTopic:/waku/2/rs/3/1 contentTopic: /test/1/waku-filter/proto'
2025-02-06 03:05:24.842 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34887/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-06 03:05:24.844 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 03:05:24.845 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:57222/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "0e2468ce-695f-47b7-887c-7e15067676c7", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-06 03:05:24.850 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"0e2468ce-695f-47b7-887c-7e15067676c7","statusDesc":"OK"}'
2025-02-06 03:05:24.851 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34887/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2025-02-06 03:05:24.855 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-06 03:05:24.855 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-06 03:05:24.955 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-06 03:05:24.956 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:57222/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-06 03:05:24.958 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[]'
2025-02-06 03:05:24.967 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-06 03:05:24.968 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-06 03:05:24.968 DEBUG [src.node.waku_node] Stopping container with id 7fd9360392dd
2025-02-06 03:05:25.494 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 03:05:25.494 DEBUG [src.node.waku_node] Stopping container with id b0d54b1885aa
2025-02-06 03:05:26.091 DEBUG [src.node.waku_node] Container stopped.
2025-02-06 03:05:26.093 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-06 03:05:26.098 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 03:05:26.101 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-06 03:05:26.101 DEBUG [tests.conftest] Running fixture teardown: attach_logs_on_fail
2025-02-06 03:05:26.101 DEBUG [tests.conftest] Test failed, attempting to attach logs to the allure reports
2025-02-06 03:05:26.102 DEBUG [src.libs.common] Attaching file ./log/docker/node2_2025-02-06_03-05-21__94cbecce-4118-476c-84c8-3eab42fb5109__wakuorg_go-waku:latest.log
2025-02-06 03:05:26.103 DEBUG [src.libs.common] Attaching file ./log/docker/node1_2025-02-06_03-05-21__94cbecce-4118-476c-84c8-3eab42fb5109__wakuorg_nwaku:latest.log
