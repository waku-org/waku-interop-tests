[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_get_message_after_node1_restarts with id: 2025-01-05_14-09-43__151d3c0c-770f-4dc1-8ac9-948e7c4440da
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-01-05_14-09-43__151d3c0c-770f-4dc1-8ac9-948e7c4440da__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.47.164
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['19150', '19151', '19152', '19153', '19154']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 19150:19150 -p 19151:19151 -p 19152:19152 -p 19153:19153 -p 19154:19154 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=19152 --rest-port=19150 --tcp-port=19151 --discv5-udp-port=19153 --rest-address=0.0.0.0 --nat=extip:172.18.47.164 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8694fb36ade9cec7c587e0ca7aa3a0bbddaced1fade07046f2ff3db7a575104b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=19154 --metrics-logging=true --relay=true --filter=true
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 21980674b7d3. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.47.164 waku 3a4a7f36cfdb6e10db38f9c44dc48e27df4f50cc45e4115541414c9f3dc5dc25
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 3a4a7f36cfdb. Setting up logs at ./log/docker/node1_2025-01-05_14-09-43__151d3c0c-770f-4dc1-8ac9-948e7c4440da__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 19150
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container a8405adecf1d. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19150/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19150/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.47.164/tcp/19151/p2p/16Uiu2HAm1uhAqPFwDWJdfKu9TTwRPvFUPWVCVrXDMSpicKFS5QFL","/ip4/172.18.47.164/tcp/19152/ws/p2p/16Uiu2HAm1uhAqPFwDWJdfKu9TTwRPvFUPWVCVrXDMSpicKFS5QFL"],"enrUri":"enr:-L24QF6xmqy8SBLiKAJK6dNCVq3NHeKCPVTFCjqlY_HdkI0HcBYGQuGRj7PHjjGrekX92Ntu3ugS74gS_emHcoakyhYCgmlkgnY0gmlwhKwSL6SKbXVsdGlhZGRyc5YACASsEi-kBkrPAAoErBIvpAZK0N0DgnJzhQADAQAAiXNlY3AyNTZrMaECYFO67FW3eOd_MshSg1FNiJ39ukQOVwaX-sGIRNkeAmuDdGNwgkrPg3VkcIJK0YV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-01-05_14-09-43__151d3c0c-770f-4dc1-8ac9-948e7c4440da__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.55.255
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['45583', '45584', '45585', '45586', '45587']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 45583:45583 -p 45584:45584 -p 45585:45585 -p 45586:45586 -p 45587:45587 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=45585 --rest-port=45583 --tcp-port=45584 --discv5-udp-port=45586 --rest-address=0.0.0.0 --nat=extip:172.18.55.255 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a09183b4eedd62bf3cd9fc460b92dd9e6d55efd99a5ef51462ba3cdacd5f1d28 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-L24QF6xmqy8SBLiKAJK6dNCVq3NHeKCPVTFCjqlY_HdkI0HcBYGQuGRj7PHjjGrekX92Ntu3ugS74gS_emHcoakyhYCgmlkgnY0gmlwhKwSL6SKbXVsdGlhZGRyc5YACASsEi-kBkrPAAoErBIvpAZK0N0DgnJzhQADAQAAiXNlY3AyNTZrMaECYFO67FW3eOd_MshSg1FNiJ39ukQOVwaX-sGIRNkeAmuDdGNwgkrPg3VkcIJK0YV3YWt1MgU --filternode=/ip4/172.18.47.164/tcp/19151/p2p/16Uiu2HAm1uhAqPFwDWJdfKu9TTwRPvFUPWVCVrXDMSpicKFS5QFL --pubsub-topic=/waku/2/rs/3/1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.55.255 waku 0b9227f243a1e2d239bbe546f202f52f016dddc2a1ee537943382384a443627e
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 0b9227f243a1. Setting up logs at ./log/docker/node2_2025-01-05_14-09-43__151d3c0c-770f-4dc1-8ac9-948e7c4440da__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 45583
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45583/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QJQNn971OtvbBsQbYau-fLn5vRAv9ZmRfuVnqvat_fmjYf8RGXAizl_URNSCIkXCsk8kwMjcZ8CeUuYhkJARUkCGAZQ2zOM7gmlkgnY0gmlwhKwRAAOCcnOFAAMBAAGJc2VjcDI1NmsxoQMjrF1cyIhaa2oseEHKs_SXBYmBWs--qA06O_75A8TyvYN0Y3CCshCDdWRwgrIShXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/45584/p2p/16Uiu2HAmF4F4SyQFEyevnEqzD1YBNcx4hh9SgmnChRS8WhuZnJdi","/ip4/127.0.0.1/tcp/45585/ws/p2p/16Uiu2HAmF4F4SyQFEyevnEqzD1YBNcx4hh9SgmnChRS8WhuZnJdi","/ip4/172.17.0.3/tcp/45584/p2p/16Uiu2HAmF4F4SyQFEyevnEqzD1YBNcx4hh9SgmnChRS8WhuZnJdi","/ip4/172.17.0.3/tcp/45585/ws/p2p/16Uiu2HAmF4F4SyQFEyevnEqzD1YBNcx4hh9SgmnChRS8WhuZnJdi"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45583/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.47.164/tcp/19151/p2p/16Uiu2HAm1uhAqPFwDWJdfKu9TTwRPvFUPWVCVrXDMSpicKFS5QFL", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19150/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45583/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "64eef809-6de4-44ea-b8fa-888762bac64d", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"64eef809-6de4-44ea-b8fa-888762bac64d","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19150/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45583/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1736086185779931904,"ephemeral":false}]'
[35mDEBUG   [0m src.node.waku_node:waku_node.py:249 Restarting container with id 3a4a7f36cfdb
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19150/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Initializing","protocolsHealth":[]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19150/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:19150/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.47.164/tcp/19151/p2p/16Uiu2HAm1uhAqPFwDWJdfKu9TTwRPvFUPWVCVrXDMSpicKFS5QFL","/ip4/172.18.47.164/tcp/19152/ws/p2p/16Uiu2HAm1uhAqPFwDWJdfKu9TTwRPvFUPWVCVrXDMSpicKFS5QFL"],"enrUri":"enr:-L24QF6xmqy8SBLiKAJK6dNCVq3NHeKCPVTFCjqlY_HdkI0HcBYGQuGRj7PHjjGrekX92Ntu3ugS74gS_emHcoakyhYCgmlkgnY0gmlwhKwSL6SKbXVsdGlhZGRyc5YACASsEi-kBkrPAAoErBIvpAZK0N0DgnJzhQADAQAAiXNlY3AyNTZrMaECYFO67FW3eOd_MshSg1FNiJ39ukQOVwaX-sGIRNkeAmuDdGNwgkrPg3VkcIJK0YV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 2 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19150/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:45583/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "f9633dad-6c51-4374-9e71-c2f8b93c30cd", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"f9633dad-6c51-4374-9e71-c2f8b93c30cd","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:19150/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.filter:filter.py:98 Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:45583/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1736086188864648448,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 3a4a7f36cfdb
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 0b9227f243a1
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.