2025-02-11 09:57:38.914 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 09:57:38.914 DEBUG [tests.conftest] Running test: test_different_page_size[1] with id: 2025-02-11_09-57-38__ff504c95-a32a-4bf7-aa6c-c297ef7f1b4d
2025-02-11 09:57:38.915 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 09:57:38.915 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-11 09:57:38.916 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-11 09:57:38.923 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 09:57:38.923 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-11_09-57-38__ff504c95-a32a-4bf7-aa6c-c297ef7f1b4d__wakuorg_nwaku:latest.log
2025-02-11 09:57:38.923 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 09:57:38.923 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 09:57:38.925 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 09:57:38.925 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.64.144
2025-02-11 09:57:38.925 DEBUG [src.node.docker_mananger] Generated ports ['4331', '4332', '4333', '4334', '4335']
2025-02-11 09:57:38.925 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 09:57:38.925 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 09:57:38.926 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 09:57:38.926 DEBUG [src.node.docker_mananger] docker run -i -t -p 4331:4331 -p 4332:4332 -p 4333:4333 -p 4334:4334 -p 4335:4335 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=4333 --rest-port=4331 --tcp-port=4332 --discv5-udp-port=4334 --rest-address=0.0.0.0 --nat=extip:172.18.64.144 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=524bbedba991d3dd8e1d6aab6a4aeecdc85f41645dc817d5f8c54ab67ab32baa --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=4335 --metrics-logging=true --store=true --relay=true
2025-02-11 09:57:39.051 ERROR [src.node.docker_mananger] Max retries reached for container ba1380ac0151. Exiting log stream.
2025-02-11 09:57:39.159 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.64.144 waku 11e71dbc68980d953b4e395c17cfa924537a7f81d1c742c0e9fc90bf07f352be
2025-02-11 09:57:39.209 DEBUG [src.node.docker_mananger] Container started with ID 11e71dbc6898. Setting up logs at ./log/docker/publishing_node1_2025-02-11_09-57-38__ff504c95-a32a-4bf7-aa6c-c297ef7f1b4d__wakuorg_nwaku:latest.log
2025-02-11 09:57:39.209 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 4331
2025-02-11 09:57:39.209 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 09:57:39.730 ERROR [src.node.docker_mananger] Max retries reached for container e4902a420c8c. Exiting log stream.
2025-02-11 09:57:40.210 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4331/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:57:40.213 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 09:57:40.213 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 09:57:40.213 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4331/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:57:40.216 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.64.144/tcp/4332/p2p/16Uiu2HAm5anvh7cn2Mjj9AaLmiBRMWuEjo8QfTKNuMxUhKu9DTHA","/ip4/172.18.64.144/tcp/4333/ws/p2p/16Uiu2HAm5anvh7cn2Mjj9AaLmiBRMWuEjo8QfTKNuMxUhKu9DTHA"],"enrUri":"enr:-L24QI6pbneHxqrY9_hSbUQ4k-w6tLc57LsKmrpkujp2yrfHDukT_BLA5rC5RkNsanK5MTOXR3kT22caDDLfJt-Bq8kCgmlkgnY0gmlwhKwSQJCKbXVsdGlhZGRyc5YACASsEkCQBhDsAAoErBJAkAYQ7d0DgnJzhQADAQAAiXNlY3AyNTZrMaEClurzdbw_40hd8SWOQ_P3l22gf3m2jFt8t9FLJAZs5bGDdGNwghDsg3VkcIIQ7oV3YWt1MgM"}'
2025-02-11 09:57:40.216 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 09:57:40.222 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-11 09:57:40.222 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-11_09-57-38__ff504c95-a32a-4bf7-aa6c-c297ef7f1b4d__wakuorg_go-waku:latest.log
2025-02-11 09:57:40.222 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 09:57:40.223 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 09:57:40.224 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 09:57:40.224 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.171.36
2025-02-11 09:57:40.224 DEBUG [src.node.docker_mananger] Generated ports ['23287', '23288', '23289', '23290', '23291']
2025-02-11 09:57:40.224 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 09:57:40.224 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 09:57:40.225 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 09:57:40.225 DEBUG [src.node.docker_mananger] docker run -i -t -p 23287:23287 -p 23288:23288 -p 23289:23289 -p 23290:23290 -p 23291:23291 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=23289 --rest-port=23287 --tcp-port=23288 --discv5-udp-port=23290 --rest-address=0.0.0.0 --nat=extip:172.18.171.36 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b4f73a5ec2e046af28b85ada6bcabebc2b1fdffbada921f433a2b5eae2e85c94 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QI6pbneHxqrY9_hSbUQ4k-w6tLc57LsKmrpkujp2yrfHDukT_BLA5rC5RkNsanK5MTOXR3kT22caDDLfJt-Bq8kCgmlkgnY0gmlwhKwSQJCKbXVsdGlhZGRyc5YACASsEkCQBhDsAAoErBJAkAYQ7d0DgnJzhQADAQAAiXNlY3AyNTZrMaEClurzdbw_40hd8SWOQ_P3l22gf3m2jFt8t9FLJAZs5bGDdGNwghDsg3VkcIIQ7oV3YWt1MgM --storenode=/ip4/172.18.64.144/tcp/4332/p2p/16Uiu2HAm5anvh7cn2Mjj9AaLmiBRMWuEjo8QfTKNuMxUhKu9DTHA --store=true --relay=true
2025-02-11 09:57:40.466 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.171.36 waku c1bccd2085b8f12b503bb7e5dd0fdf837c8bbff383f8418820601dca5a2c9015
2025-02-11 09:57:40.520 DEBUG [src.node.docker_mananger] Container started with ID c1bccd2085b8. Setting up logs at ./log/docker/store_node1_2025-02-11_09-57-38__ff504c95-a32a-4bf7-aa6c-c297ef7f1b4d__wakuorg_go-waku:latest.log
2025-02-11 09:57:40.521 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 23287
2025-02-11 09:57:40.523 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 09:57:41.523 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23287/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:57:41.526 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QIx5031VFo2WYYNHT0HbE_yT6dOjtTJl3R6FrVgWT8ORKm_Ko3kHimHbiheATxeFOpYMAlzwUPGL503jdNz8lNOGAZT0cWgjgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaECs6pix3R6vtYkfa_cnZV95_TKv3wodsWgYx-Q0TLqDKWDdGNwglr4g3VkcIJa-oV3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/23288/p2p/16Uiu2HAm7X1eYBCGNMevY36ahxhydZBMiD5AkWh8cczNYT8NVMN4","/ip4/127.0.0.1/tcp/23289/ws/p2p/16Uiu2HAm7X1eYBCGNMevY36ahxhydZBMiD5AkWh8cczNYT8NVMN4","/ip4/172.17.0.3/tcp/23288/p2p/16Uiu2HAm7X1eYBCGNMevY36ahxhydZBMiD5AkWh8cczNYT8NVMN4","/ip4/172.17.0.3/tcp/23289/ws/p2p/16Uiu2HAm7X1eYBCGNMevY36ahxhydZBMiD5AkWh8cczNYT8NVMN4"]}'
2025-02-11 09:57:41.526 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 09:57:41.527 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23287/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.64.144/tcp/4332/p2p/16Uiu2HAm5anvh7cn2Mjj9AaLmiBRMWuEjo8QfTKNuMxUhKu9DTHA", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-11 09:57:41.545 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-11 09:57:41.546 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4331/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 09:57:41.568 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 09:57:41.568 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23287/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 09:57:41.570 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-11 09:57:41.574 DEBUG [src.steps.store] Relaying message
2025-02-11 09:57:41.575 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4331/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 09:57:41.589 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 09:57:41.589 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 09:57:41.789 DEBUG [src.steps.store] Relaying message
2025-02-11 09:57:41.790 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:4331/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8x", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 09:57:41.796 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 09:57:41.796 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 09:57:41.997 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:4331/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=1&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:57:42.000 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xcdd3b82c2a48ff3c2b5b4923187bc7cedbcdda1dc539de41e9e2840b716cedd2"}],"paginationCursor":"0xcdd3b82c2a48ff3c2b5b4923187bc7cedbcdda1dc539de41e9e2840b716cedd2"}'
2025-02-11 09:57:42.000 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23287/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=1&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:57:42.005 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"67ef9d023a4bbf2f113a5664c9ceb1116b4be6a10e85bc610bf3058a8e05d0a1","status_code":200,"status_desc":"OK","messages":[{"message_hash":"zdO4LCpI/zwrW0kjGHvHztvN2h3FOd5B6eKEC3Fs7dI="}],"pagination_cursor":"zdO4LCpI/zwrW0kjGHvHztvN2h3FOd5B6eKEC3Fs7dI="}'
2025-02-11 09:57:42.008 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 09:57:42.009 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 09:57:42.009 DEBUG [src.node.waku_node] Stopping container with id 11e71dbc6898
2025-02-11 09:57:42.615 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 09:57:42.615 DEBUG [src.node.waku_node] Stopping container with id c1bccd2085b8
2025-02-11 09:57:43.121 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 09:57:43.122 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 09:57:43.129 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 09:57:43.132 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
