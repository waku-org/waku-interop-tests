2025-02-11 09:58:06.348 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 09:58:06.349 DEBUG [tests.conftest] Running test: test_light_push_with_invalid_meta with id: 2025-02-11_09-58-06__3dbc3b49-d788-428c-ac4f-814c6a93eab0
2025-02-11 09:58:06.350 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 09:58:06.350 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-11 09:58:06.357 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 09:58:06.357 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-11_09-58-06__3dbc3b49-d788-428c-ac4f-814c6a93eab0__wakuorg_nwaku:latest.log
2025-02-11 09:58:06.357 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 09:58:06.357 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 09:58:06.358 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 09:58:06.359 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.17.44
2025-02-11 09:58:06.359 DEBUG [src.node.docker_mananger] Generated ports ['22150', '22151', '22152', '22153', '22154']
2025-02-11 09:58:06.359 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 09:58:06.359 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 09:58:06.359 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 09:58:06.359 DEBUG [src.node.docker_mananger] docker run -i -t -p 22150:22150 -p 22151:22151 -p 22152:22152 -p 22153:22153 -p 22154:22154 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22152 --rest-port=22150 --tcp-port=22151 --discv5-udp-port=22153 --rest-address=0.0.0.0 --nat=extip:172.18.17.44 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2c14b7bf0ee404b66aafee6b5c95ec55d73fb47ddb5c05fdeebe7a0d280b1a9d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22154 --metrics-logging=true --lightpush=true --relay=true
2025-02-11 09:58:06.590 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.17.44 waku f63a04d6238a7933f6c56156040e0881620cc566799eb5a9f94070c153478cff
2025-02-11 09:58:06.633 ERROR [src.node.docker_mananger] Max retries reached for container 577079a2d6d8. Exiting log stream.
2025-02-11 09:58:06.639 DEBUG [src.node.docker_mananger] Container started with ID f63a04d6238a. Setting up logs at ./log/docker/receiving_node1_2025-02-11_09-58-06__3dbc3b49-d788-428c-ac4f-814c6a93eab0__wakuorg_nwaku:latest.log
2025-02-11 09:58:06.641 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 22150
2025-02-11 09:58:06.641 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 09:58:07.161 ERROR [src.node.docker_mananger] Max retries reached for container 386ecafccfd4. Exiting log stream.
2025-02-11 09:58:07.642 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22150/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:58:07.645 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 09:58:07.645 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 09:58:07.645 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22150/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:58:07.648 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.17.44/tcp/22151/p2p/16Uiu2HAmBhw9VaqCMBuQjVKLMoq7cRDvAw972fXLDgCTU7uyvjwe","/ip4/172.18.17.44/tcp/22152/ws/p2p/16Uiu2HAmBhw9VaqCMBuQjVKLMoq7cRDvAw972fXLDgCTU7uyvjwe"],"enrUri":"enr:-L24QAIAs9RRQgwIBCc0ZNUS7kdfXTlowWWznPIGCpf0RrymVKl_DBRpyiJqqfxBKPfgWTB9JfgIGw_0UN-hiFkMZSICgmlkgnY0gmlwhKwSESyKbXVsdGlhZGRyc5YACASsEhEsBlaHAAoErBIRLAZWiN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC8eVu9Nj6fkwV2wZMa9rNK_XGtvaIi6Fmimpy0QbyA5GDdGNwglaHg3VkcIJWiYV3YWt1Mgk"}'
2025-02-11 09:58:07.648 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 09:58:07.655 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 09:58:07.655 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-11_09-58-06__3dbc3b49-d788-428c-ac4f-814c6a93eab0__wakuorg_nwaku:latest.log
2025-02-11 09:58:07.655 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 09:58:07.655 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 09:58:07.657 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 09:58:07.657 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.24.177
2025-02-11 09:58:07.657 DEBUG [src.node.docker_mananger] Generated ports ['49333', '49334', '49335', '49336', '49337']
2025-02-11 09:58:07.657 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 09:58:07.657 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 09:58:07.657 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 09:58:07.657 DEBUG [src.node.docker_mananger] docker run -i -t -p 49333:49333 -p 49334:49334 -p 49335:49335 -p 49336:49336 -p 49337:49337 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=49335 --rest-port=49333 --tcp-port=49334 --discv5-udp-port=49336 --rest-address=0.0.0.0 --nat=extip:172.18.24.177 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b4c7f7cebd730dabf768ccafbfd58afbaca7bba4ef69934b6dcb5d87b6ca4f1e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=49337 --metrics-logging=true --lightpush=false --relay=true
2025-02-11 09:58:07.889 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.24.177 waku 78efaf115131ba1ee217662690a584bb9289083996bf93125400134f08ea7554
2025-02-11 09:58:07.933 DEBUG [src.node.docker_mananger] Container started with ID 78efaf115131. Setting up logs at ./log/docker/receiving_node2_2025-02-11_09-58-06__3dbc3b49-d788-428c-ac4f-814c6a93eab0__wakuorg_nwaku:latest.log
2025-02-11 09:58:07.934 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 49333
2025-02-11 09:58:07.934 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 09:58:08.934 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49333/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:58:08.937 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 09:58:08.937 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 09:58:08.938 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49333/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:58:08.940 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.24.177/tcp/49334/p2p/16Uiu2HAmGrsp2iW9ZkYuiAirECWnNwAo49hhzqMxYiRSkLGJC6gT","/ip4/172.18.24.177/tcp/49335/ws/p2p/16Uiu2HAmGrsp2iW9ZkYuiAirECWnNwAo49hhzqMxYiRSkLGJC6gT"],"enrUri":"enr:-L24QPIuPIvvGpaEBhEgxPTrq7C4P8bVgfOo2FkuB9kx_BYDcBeM72VWP6TZamd4JZVHdEWAFQAlEPg8mIO2lzsedTICgmlkgnY0gmlwhKwSGLGKbXVsdGlhZGRyc5YACASsEhixBsC2AAoErBIYsQbAt90DgnJzhQADAQAAiXNlY3AyNTZrMaEDPnpS5BF8lO4_omNeUXkOonLsFFsV5vet9evL8gcF3AyDdGNwgsC2g3VkcILAuIV3YWt1MgE"}'
2025-02-11 09:58:08.940 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 09:58:08.940 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49333/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.17.44/tcp/22151/p2p/16Uiu2HAmBhw9VaqCMBuQjVKLMoq7cRDvAw972fXLDgCTU7uyvjwe"]'
2025-02-11 09:58:08.979 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 09:58:08.990 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-11 09:58:08.990 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-11_09-58-06__3dbc3b49-d788-428c-ac4f-814c6a93eab0__wakuorg_go-waku:latest.log
2025-02-11 09:58:08.990 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 09:58:08.990 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 09:58:08.992 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 09:58:08.992 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.205.80
2025-02-11 09:58:08.992 DEBUG [src.node.docker_mananger] Generated ports ['20097', '20098', '20099', '20100', '20101']
2025-02-11 09:58:08.992 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 09:58:08.992 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 09:58:08.993 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 09:58:08.993 DEBUG [src.node.docker_mananger] docker run -i -t -p 20097:20097 -p 20098:20098 -p 20099:20099 -p 20100:20100 -p 20101:20101 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=20099 --rest-port=20097 --tcp-port=20098 --discv5-udp-port=20100 --rest-address=0.0.0.0 --nat=extip:172.18.205.80 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b94b3e70ec9d8074d18bbc0f38daa46ea5e34655c5f57abfbeffe6d7a4e88282 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QAIAs9RRQgwIBCc0ZNUS7kdfXTlowWWznPIGCpf0RrymVKl_DBRpyiJqqfxBKPfgWTB9JfgIGw_0UN-hiFkMZSICgmlkgnY0gmlwhKwSESyKbXVsdGlhZGRyc5YACASsEhEsBlaHAAoErBIRLAZWiN0DgnJzhQADAQAAiXNlY3AyNTZrMaEC8eVu9Nj6fkwV2wZMa9rNK_XGtvaIi6Fmimpy0QbyA5GDdGNwglaHg3VkcIJWiYV3YWt1Mgk --lightpushnode=/ip4/172.18.17.44/tcp/22151/p2p/16Uiu2HAmBhw9VaqCMBuQjVKLMoq7cRDvAw972fXLDgCTU7uyvjwe --lightpush=true --relay=false --pubsub-topic=/waku/2/rs/3/1
2025-02-11 09:58:09.236 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.205.80 waku 3fc02ec2267043aef76a5e37bcd76b756c4fb680a4572172265b32bb14cebcf8
2025-02-11 09:58:09.299 DEBUG [src.node.docker_mananger] Container started with ID 3fc02ec22670. Setting up logs at ./log/docker/lightpush_node1_2025-02-11_09-58-06__3dbc3b49-d788-428c-ac4f-814c6a93eab0__wakuorg_go-waku:latest.log
2025-02-11 09:58:09.299 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 20097
2025-02-11 09:58:09.300 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 09:58:10.300 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:20097/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:58:10.302 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QLxNVAZpZu_ctV0mAtCPaVUqNsJANHijB8f7X3YYArtlZQghDZXDQGTWc2_mq94IKVF6yoNwWGWK_PjSer2P8P2GAZT0cdiCgmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQMvarVLYrTpJtRbAhM9MXgSuv2ABAn_lZwVWgR1ZNpRdYN0Y3CCToKDdWRwgk6EhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/20098/p2p/16Uiu2HAmFr5tKgMvtMh52RWdwDRiNxiBtta9XnTK3Q7osSn3abzU","/ip4/127.0.0.1/tcp/20099/ws/p2p/16Uiu2HAmFr5tKgMvtMh52RWdwDRiNxiBtta9XnTK3Q7osSn3abzU","/ip4/172.17.0.4/tcp/20098/p2p/16Uiu2HAmFr5tKgMvtMh52RWdwDRiNxiBtta9XnTK3Q7osSn3abzU","/ip4/172.17.0.4/tcp/20099/ws/p2p/16Uiu2HAmFr5tKgMvtMh52RWdwDRiNxiBtta9XnTK3Q7osSn3abzU"]}'
2025-02-11 09:58:10.303 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 09:58:10.303 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20097/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.17.44/tcp/22151/p2p/16Uiu2HAmBhw9VaqCMBuQjVKLMoq7cRDvAw972fXLDgCTU7uyvjwe", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-11 09:58:10.305 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-11 09:58:10.305 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20097/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.24.177/tcp/49334/p2p/16Uiu2HAmGrsp2iW9ZkYuiAirECWnNwAo49hhzqMxYiRSkLGJC6gT", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-11 09:58:10.321 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-11 09:58:10.322 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22150/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 09:58:10.328 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 09:58:10.328 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49333/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 09:58:10.332 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 09:58:10.334 DEBUG [src.steps.light_push] Lightpushing message
2025-02-11 09:58:10.334 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:20097/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739267890334043136, "meta": "Light push works!!"}}'
2025-02-11 09:58:10.336 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:20097/lightpush/v1/message. Response content: b''
2025-02-11 09:58:10.338 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 09:58:10.339 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 09:58:10.339 DEBUG [src.node.waku_node] Stopping container with id f63a04d6238a
2025-02-11 09:58:10.921 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 09:58:10.922 DEBUG [src.node.waku_node] Stopping container with id 78efaf115131
2025-02-11 09:58:11.735 ERROR [src.node.docker_mananger] Max retries reached for container f63a04d6238a. Exiting log stream.
2025-02-11 09:58:12.448 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 09:58:12.450 DEBUG [src.node.waku_node] Stopping container with id 3fc02ec22670
2025-02-11 09:58:12.940 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 09:58:12.941 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 09:58:12.947 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 09:58:12.953 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 09:58:12.955 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
