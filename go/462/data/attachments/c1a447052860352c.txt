2025-02-11 09:55:53.701 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 09:55:53.702 DEBUG [tests.conftest] Running test: test_store_node_not_connected_directly_to_lightpushing_node with id: 2025-02-11_09-55-53__485f87e4-ce34-46db-aaa6-51da584077b5
2025-02-11 09:55:53.702 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 09:55:53.702 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-11 09:55:53.703 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-11 09:55:53.713 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-11 09:55:53.713 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-11_09-55-53__485f87e4-ce34-46db-aaa6-51da584077b5__wakuorg_go-waku:latest.log
2025-02-11 09:55:53.719 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 09:55:53.720 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-11_09-55-53__485f87e4-ce34-46db-aaa6-51da584077b5__wakuorg_nwaku:latest.log
2025-02-11 09:55:53.726 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-11 09:55:53.726 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node3_2025-02-11_09-55-53__485f87e4-ce34-46db-aaa6-51da584077b5__wakuorg_go-waku:latest.log
2025-02-11 09:55:53.726 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-11 09:55:53.727 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-11 09:55:53.728 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 09:55:53.728 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 09:55:53.798 DEBUG [src.node.docker_mananger] Network waku created
2025-02-11 09:55:53.799 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.102.202
2025-02-11 09:55:53.799 DEBUG [src.node.docker_mananger] Generated ports ['16500', '16501', '16502', '16503', '16504']
2025-02-11 09:55:53.799 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 09:55:53.799 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 09:55:53.799 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 09:55:53.799 DEBUG [src.node.docker_mananger] docker run -i -t -p 16500:16500 -p 16501:16501 -p 16502:16502 -p 16503:16503 -p 16504:16504 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=16502 --rest-port=16500 --tcp-port=16501 --discv5-udp-port=16503 --rest-address=0.0.0.0 --nat=extip:172.18.102.202 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0ccdb2774bac77bbd172fc267d72e8baab9a13f76c63243aecee4d22deffb4f4 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --lightpush=true
2025-02-11 09:55:56.763 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.102.202 waku 77b74f05057bd33b6961672ed752adef47541a1d214ca14f93503dc7a40299f2
2025-02-11 09:55:56.813 DEBUG [src.node.docker_mananger] Container started with ID 77b74f05057b. Setting up logs at ./log/docker/node1_2025-02-11_09-55-53__485f87e4-ce34-46db-aaa6-51da584077b5__wakuorg_go-waku:latest.log
2025-02-11 09:55:56.814 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 16500
2025-02-11 09:55:56.815 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 09:55:57.816 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16500/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:55:57.819 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QLLiLLu0vuLUu-i0GUZ1cHXfu6Nbpv7TejkuP1Ax8cs0BK-6RaHO1cJrShiW09O0c_T91pqkWgYLigdpEo82uxCGAZT0b9MPgmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaEClY7gLWlp2sFr_CAmPMYcppzDbi0BLYpDaIyPUu712lKDdGNwgkB1g3VkcIJAd4V3YWt1Mgk","listenAddresses":["/ip4/127.0.0.1/tcp/16501/p2p/16Uiu2HAm5VV5zmZkT566pH2svSmY1jGZAsDaM67NXcTCMmP2iJ8Z","/ip4/127.0.0.1/tcp/16502/ws/p2p/16Uiu2HAm5VV5zmZkT566pH2svSmY1jGZAsDaM67NXcTCMmP2iJ8Z","/ip4/172.17.0.2/tcp/16501/p2p/16Uiu2HAm5VV5zmZkT566pH2svSmY1jGZAsDaM67NXcTCMmP2iJ8Z","/ip4/172.17.0.2/tcp/16502/ws/p2p/16Uiu2HAm5VV5zmZkT566pH2svSmY1jGZAsDaM67NXcTCMmP2iJ8Z"]}'
2025-02-11 09:55:57.819 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 09:55:57.819 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 09:55:57.819 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 09:55:57.821 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 09:55:57.821 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.114.23
2025-02-11 09:55:57.822 DEBUG [src.node.docker_mananger] Generated ports ['9814', '9815', '9816', '9817', '9818']
2025-02-11 09:55:57.822 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 09:55:57.822 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 09:55:57.822 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 09:55:57.822 DEBUG [src.node.docker_mananger] docker run -i -t -p 9814:9814 -p 9815:9815 -p 9816:9816 -p 9817:9817 -p 9818:9818 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=9816 --rest-port=9814 --tcp-port=9815 --discv5-udp-port=9817 --rest-address=0.0.0.0 --nat=extip:172.18.114.23 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=730de34d4748aeababbfde1ed8716fdafabecd17eb508bc2f55abdcda28eedfa --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=9818 --metrics-logging=true --lightpush=true --store=true --relay=true --discv5-bootstrap-node=enr:-J-4QLLiLLu0vuLUu-i0GUZ1cHXfu6Nbpv7TejkuP1Ax8cs0BK-6RaHO1cJrShiW09O0c_T91pqkWgYLigdpEo82uxCGAZT0b9MPgmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaEClY7gLWlp2sFr_CAmPMYcppzDbi0BLYpDaIyPUu712lKDdGNwgkB1g3VkcIJAd4V3YWt1Mgk --lightpushnode=/ip4/172.18.102.202/tcp/16501/p2p/16Uiu2HAm5VV5zmZkT566pH2svSmY1jGZAsDaM67NXcTCMmP2iJ8Z
2025-02-11 09:55:59.832 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.114.23 waku 6a53896aaa7a85b421f676b77696b1f0f0d89241ab57f39739119ca9c7f5587b
2025-02-11 09:55:59.888 DEBUG [src.node.docker_mananger] Container started with ID 6a53896aaa7a. Setting up logs at ./log/docker/node2_2025-02-11_09-55-53__485f87e4-ce34-46db-aaa6-51da584077b5__wakuorg_nwaku:latest.log
2025-02-11 09:55:59.889 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 9814
2025-02-11 09:55:59.889 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 09:56:00.890 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9814/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:56:00.894 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 09:56:00.894 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 09:56:00.894 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9814/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:56:00.897 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.114.23/tcp/9815/p2p/16Uiu2HAmK4VcJ1B9A4iYnjdMZxQpncftP1NYkMpExb2fGsvE1iu9","/ip4/172.18.114.23/tcp/9816/ws/p2p/16Uiu2HAmK4VcJ1B9A4iYnjdMZxQpncftP1NYkMpExb2fGsvE1iu9"],"enrUri":"enr:-L24QCNsClgn4wVwT29SqVzenm4YFGXbVfGAIaZUWxqawRIAfLE-zgsOFye0xU6u0zxU2VCInA-A59bxOWwe_iM9dikCgmlkgnY0gmlwhKwScheKbXVsdGlhZGRyc5YACASsEnIXBiZXAAoErBJyFwYmWN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDXyuQJaexvn6GYnltoNXESFtfcjK6d4vPOJzT7zVd8ISDdGNwgiZXg3VkcIImWYV3YWt1Mgs"}'
2025-02-11 09:56:00.897 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 09:56:00.897 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 09:56:00.897 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 09:56:00.899 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 09:56:00.899 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.207.119
2025-02-11 09:56:00.899 DEBUG [src.node.docker_mananger] Generated ports ['39393', '39394', '39395', '39396', '39397']
2025-02-11 09:56:00.899 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 09:56:00.899 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 09:56:00.899 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 09:56:00.899 DEBUG [src.node.docker_mananger] docker run -i -t -p 39393:39393 -p 39394:39394 -p 39395:39395 -p 39396:39396 -p 39397:39397 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=39395 --rest-port=39393 --tcp-port=39394 --discv5-udp-port=39396 --rest-address=0.0.0.0 --nat=extip:172.18.207.119 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=30f0a4be2b025fd4fb78bc79661e4ff1b4dcdd5ab6f9fc91cee6e1c79b7ef4e4 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --storenode=/ip4/172.18.114.23/tcp/9815/p2p/16Uiu2HAmK4VcJ1B9A4iYnjdMZxQpncftP1NYkMpExb2fGsvE1iu9 --discv5-bootstrap-node=enr:-L24QCNsClgn4wVwT29SqVzenm4YFGXbVfGAIaZUWxqawRIAfLE-zgsOFye0xU6u0zxU2VCInA-A59bxOWwe_iM9dikCgmlkgnY0gmlwhKwScheKbXVsdGlhZGRyc5YACASsEnIXBiZXAAoErBJyFwYmWN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDXyuQJaexvn6GYnltoNXESFtfcjK6d4vPOJzT7zVd8ISDdGNwgiZXg3VkcIImWYV3YWt1Mgs --pubsub-topic=/waku/2/rs/3/1
2025-02-11 09:56:01.145 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.207.119 waku 3b0cae897d7de49f229b08f1715a95de12208e07fd36644175282671a7245dd3
2025-02-11 09:56:01.205 DEBUG [src.node.docker_mananger] Container started with ID 3b0cae897d7d. Setting up logs at ./log/docker/node3_2025-02-11_09-55-53__485f87e4-ce34-46db-aaa6-51da584077b5__wakuorg_go-waku:latest.log
2025-02-11 09:56:01.206 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 39393
2025-02-11 09:56:01.207 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 09:56:02.207 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39393/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:56:02.210 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QFwwzeEBd2tVdFY1Jad3HmoQn1g1E78yEBNe2v9JxMdiYboVIBmn_W48QJWB2jtpAsP_YKTAaA2qQYCnABjpOIaGAZT0b-QpgmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQNn9oB3XM0xTPu9vy6nN8mjWvUuqpdECpPOuSKoHNlQnoN0Y3CCmeKDdWRwgpnkhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/39394/p2p/16Uiu2HAmKepMJskCvYzb2TYtzzvoionHs5mSSs6FywhikXWztXMw","/ip4/127.0.0.1/tcp/39395/ws/p2p/16Uiu2HAmKepMJskCvYzb2TYtzzvoionHs5mSSs6FywhikXWztXMw","/ip4/172.17.0.4/tcp/39394/p2p/16Uiu2HAmKepMJskCvYzb2TYtzzvoionHs5mSSs6FywhikXWztXMw","/ip4/172.17.0.4/tcp/39395/ws/p2p/16Uiu2HAmKepMJskCvYzb2TYtzzvoionHs5mSSs6FywhikXWztXMw"]}'
2025-02-11 09:56:02.210 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 09:56:02.210 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16500/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 09:56:02.213 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-11 09:56:02.213 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9814/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 09:56:02.216 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 09:56:02.217 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16500/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:56:02.219 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"id":"16Uiu2HAmK4VcJ1B9A4iYnjdMZxQpncftP1NYkMpExb2fGsvE1iu9","multiaddrs":["/ip4/172.18.114.23/tcp/9815/p2p/16Uiu2HAmK4VcJ1B9A4iYnjdMZxQpncftP1NYkMpExb2fGsvE1iu9","/ip4/172.18.114.23/tcp/9816/ws/p2p/16Uiu2HAmK4VcJ1B9A4iYnjdMZxQpncftP1NYkMpExb2fGsvE1iu9"],"protocols":null,"connected":false,"pubsubTopics":[]}]'
2025-02-11 09:56:02.220 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9814/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:56:02.222 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.4/tcp/39394/p2p/16Uiu2HAmKepMJskCvYzb2TYtzzvoionHs5mSSs6FywhikXWztXMw","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
2025-02-11 09:56:02.223 DEBUG [src.libs.common] Sleeping for 30 seconds
2025-02-11 09:56:32.223 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16500/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1739267792223681536}}'
2025-02-11 09:56:32.233 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-11 09:56:32.234 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 09:56:33.235 DEBUG [src.steps.store] Checking that peer wakuorg/go-waku:latest can find the stored messages
2025-02-11 09:56:33.235 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:39393/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-filter%2Fproto&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:56:33.241 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"c71b8087c47f9e851e8e07642bbc9f40dbe878f25a5c6b8ee18fa04ba65391ef","status_code":200,"status_desc":"OK","messages":[{"message_hash":"7q0Wykw9hYJpYNYLgL7Wi+Dax3BToLPBXSk/6ef+7OA="}]}'
2025-02-11 09:56:33.244 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 09:56:33.245 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 09:56:33.245 DEBUG [src.node.waku_node] Stopping container with id 77b74f05057b
2025-02-11 09:56:33.763 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 09:56:33.764 DEBUG [src.node.waku_node] Stopping container with id 6a53896aaa7a
2025-02-11 09:56:34.577 ERROR [src.node.docker_mananger] Max retries reached for container 77b74f05057b. Exiting log stream.
2025-02-11 09:56:34.608 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 09:56:34.608 DEBUG [src.node.waku_node] Stopping container with id 3b0cae897d7d
2025-02-11 09:56:35.133 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 09:56:35.135 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 09:56:35.140 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 09:56:35.151 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 09:56:35.154 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
