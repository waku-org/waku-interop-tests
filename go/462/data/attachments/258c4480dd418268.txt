2025-02-11 09:57:51.785 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 09:57:51.786 DEBUG [tests.conftest] Running test: test_get_peers_after_node1_was_restarted with id: 2025-02-11_09-57-51__7a60f3d9-8180-45ce-9b11-e2ddeeed8450
2025-02-11 09:57:51.786 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 09:57:51.786 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-11 09:57:51.792 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 09:57:51.793 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-11_09-57-51__7a60f3d9-8180-45ce-9b11-e2ddeeed8450__wakuorg_nwaku:latest.log
2025-02-11 09:57:51.793 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 09:57:51.793 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 09:57:51.794 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 09:57:51.794 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.53.255
2025-02-11 09:57:51.795 DEBUG [src.node.docker_mananger] Generated ports ['43083', '43084', '43085', '43086', '43087']
2025-02-11 09:57:51.795 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 09:57:51.795 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 09:57:51.795 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 09:57:51.795 DEBUG [src.node.docker_mananger] docker run -i -t -p 43083:43083 -p 43084:43084 -p 43085:43085 -p 43086:43086 -p 43087:43087 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=43085 --rest-port=43083 --tcp-port=43084 --discv5-udp-port=43086 --rest-address=0.0.0.0 --nat=extip:172.18.53.255 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6aab722e4bc9d4a84bbdde99bbbcd8ff9c6dabd8aa5eede3e7ff361b5b3a3cfb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=43087 --metrics-logging=true --relay=true --relay-peer-exchange=true
2025-02-11 09:57:52.016 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.53.255 waku ce9024e9b1e3245ef5d0755550d570e58b44c62f0813939b7c4bdb54ca4ac860
2025-02-11 09:57:52.063 DEBUG [src.node.docker_mananger] Container started with ID ce9024e9b1e3. Setting up logs at ./log/docker/node1_2025-02-11_09-57-51__7a60f3d9-8180-45ce-9b11-e2ddeeed8450__wakuorg_nwaku:latest.log
2025-02-11 09:57:52.064 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 43083
2025-02-11 09:57:52.064 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 09:57:52.077 ERROR [src.node.docker_mananger] Max retries reached for container 1c033754f11f. Exiting log stream.
2025-02-11 09:57:52.589 ERROR [src.node.docker_mananger] Max retries reached for container 101c1cc1f734. Exiting log stream.
2025-02-11 09:57:53.064 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43083/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:57:53.067 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 09:57:53.067 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 09:57:53.067 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43083/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:57:53.069 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.53.255/tcp/43084/p2p/16Uiu2HAm3KqfzCKbzqabhEAUNdJK12StAWC9JAFozc5crbkHEX47","/ip4/172.18.53.255/tcp/43085/ws/p2p/16Uiu2HAm3KqfzCKbzqabhEAUNdJK12StAWC9JAFozc5crbkHEX47"],"enrUri":"enr:-L24QIlWPtwJm8xol9cbbfJaYKYWo9gbCzg8GH7ZOeWO2P1BJGR1BlTQGy6xmic42u4-Dp3FVGQ86p-Zcx6rLQJzLI8CgmlkgnY0gmlwhKwSNf-KbXVsdGlhZGRyc5YACASsEjX_BqhMAAoErBI1_waoTd0DgnJzhQADAQAAiXNlY3AyNTZrMaECdV74b7_wJcG9aE89o5Mtgc8jT9xWZXgdNTXXphJEZ9SDdGNwgqhMg3VkcIKoToV3YWt1MgE"}'
2025-02-11 09:57:53.069 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 09:57:53.075 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-11 09:57:53.075 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-11_09-57-51__7a60f3d9-8180-45ce-9b11-e2ddeeed8450__wakuorg_go-waku:latest.log
2025-02-11 09:57:53.076 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 09:57:53.076 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 09:57:53.077 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 09:57:53.077 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.187.215
2025-02-11 09:57:53.077 DEBUG [src.node.docker_mananger] Generated ports ['35146', '35147', '35148', '35149', '35150']
2025-02-11 09:57:53.077 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 09:57:53.077 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 09:57:53.078 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 09:57:53.078 DEBUG [src.node.docker_mananger] docker run -i -t -p 35146:35146 -p 35147:35147 -p 35148:35148 -p 35149:35149 -p 35150:35150 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=35148 --rest-port=35146 --tcp-port=35147 --discv5-udp-port=35149 --rest-address=0.0.0.0 --nat=extip:172.18.187.215 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=6c10085bc2afcadd8c9bdc2acd476dceffad8dac915bc5cdfa9dd63a3ea165b4 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --discv5-bootstrap-node=enr:-L24QIlWPtwJm8xol9cbbfJaYKYWo9gbCzg8GH7ZOeWO2P1BJGR1BlTQGy6xmic42u4-Dp3FVGQ86p-Zcx6rLQJzLI8CgmlkgnY0gmlwhKwSNf-KbXVsdGlhZGRyc5YACASsEjX_BqhMAAoErBI1_waoTd0DgnJzhQADAQAAiXNlY3AyNTZrMaECdV74b7_wJcG9aE89o5Mtgc8jT9xWZXgdNTXXphJEZ9SDdGNwgqhMg3VkcIKoToV3YWt1MgE
2025-02-11 09:57:53.307 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.187.215 waku 99dca328047d16b4a7ccc7af96dee5464c00515a9fbd408faaa35b3c1feb37af
2025-02-11 09:57:53.355 DEBUG [src.node.docker_mananger] Container started with ID 99dca328047d. Setting up logs at ./log/docker/node2_2025-02-11_09-57-51__7a60f3d9-8180-45ce-9b11-e2ddeeed8450__wakuorg_go-waku:latest.log
2025-02-11 09:57:53.356 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 35146
2025-02-11 09:57:53.356 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 09:57:54.356 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35146/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:57:54.359 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QB1F90ZkbOgfzcLCyg3QHWOOXfNphs-wlJsoQz5IFds-AQRwCXfyLLkhjTs1g4mNP2y-y-PWAlDiIQzAGROfCMaGAZT0cZpKgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaECxvbxb19vzL3rFsrxlx1R7v5ZtWX_fgwsTMlkFivrzamDdGNwgolLg3VkcIKJTYV3YWt1MgE","listenAddresses":["/ip4/127.0.0.1/tcp/35147/p2p/16Uiu2HAm8pM6s25xsiqRUwGvQKb8zg4Uqinnm6f1TM7VXdH5TYuv","/ip4/127.0.0.1/tcp/35148/ws/p2p/16Uiu2HAm8pM6s25xsiqRUwGvQKb8zg4Uqinnm6f1TM7VXdH5TYuv","/ip4/172.17.0.3/tcp/35147/p2p/16Uiu2HAm8pM6s25xsiqRUwGvQKb8zg4Uqinnm6f1TM7VXdH5TYuv","/ip4/172.17.0.3/tcp/35148/ws/p2p/16Uiu2HAm8pM6s25xsiqRUwGvQKb8zg4Uqinnm6f1TM7VXdH5TYuv"]}'
2025-02-11 09:57:54.359 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 09:57:54.359 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35146/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.53.255/tcp/43084/p2p/16Uiu2HAm3KqfzCKbzqabhEAUNdJK12StAWC9JAFozc5crbkHEX47", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-11 09:57:54.377 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-11 09:57:54.378 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:43083/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0", "/waku/2/rs/3/1", "/waku/2/rs/3/9", "/waku/2/rs/3/25", "/waku/2/rs/3/1000"]'
2025-02-11 09:57:54.401 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 09:57:54.402 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35146/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0", "/waku/2/rs/3/1", "/waku/2/rs/3/9", "/waku/2/rs/3/25", "/waku/2/rs/3/1000"]'
2025-02-11 09:57:54.404 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-11 09:57:54.404 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 09:57:55.405 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43083/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:57:55.407 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.3/tcp/35147/p2p/16Uiu2HAm8pM6s25xsiqRUwGvQKb8zg4Uqinnm6f1TM7VXdH5TYuv","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
2025-02-11 09:57:55.407 DEBUG [src.node.waku_node] Restarting container with id ce9024e9b1e3
2025-02-11 09:57:56.266 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 09:57:57.273 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-11 09:57:57.273 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node3_2025-02-11_09-57-51__7a60f3d9-8180-45ce-9b11-e2ddeeed8450__wakuorg_go-waku:latest.log
2025-02-11 09:57:57.274 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 09:57:57.274 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 09:57:57.275 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 09:57:57.275 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.141.20
2025-02-11 09:57:57.275 DEBUG [src.node.docker_mananger] Generated ports ['15012', '15013', '15014', '15015', '15016']
2025-02-11 09:57:57.276 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 09:57:57.276 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 09:57:57.276 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 09:57:57.276 DEBUG [src.node.docker_mananger] docker run -i -t -p 15012:15012 -p 15013:15013 -p 15014:15014 -p 15015:15015 -p 15016:15016 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=15014 --rest-port=15012 --tcp-port=15013 --discv5-udp-port=15015 --rest-address=0.0.0.0 --nat=extip:172.18.141.20 --peer-exchange=true --discv5-discovery=false --cluster-id=3 --nodekey=7deddfca23bfdfafc523a2ce215dad8ac73017dfaea8ee03f4afb66cfcb29a31 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --peer-exchange-node=/ip4/172.17.0.3/tcp/35147/p2p/16Uiu2HAm8pM6s25xsiqRUwGvQKb8zg4Uqinnm6f1TM7VXdH5TYuv --pubsub-topic=/waku/2/rs/3/1
2025-02-11 09:57:57.506 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.141.20 waku 977672a8aebe0db727c802d252d2602e1c6f75694ae4825a7b53748ba980dec4
2025-02-11 09:57:57.563 DEBUG [src.node.docker_mananger] Container started with ID 977672a8aebe. Setting up logs at ./log/docker/node3_2025-02-11_09-57-51__7a60f3d9-8180-45ce-9b11-e2ddeeed8450__wakuorg_go-waku:latest.log
2025-02-11 09:57:57.564 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 15012
2025-02-11 09:57:57.566 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 09:57:58.566 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15012/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:57:58.568 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-Jq4QFj5MU4spFUg_WbfjEBzL4P8_h67Yf2lN3wMdBqwL_z2boXhj7GKBP5mLTdjHQJ0FKSMicLsb06LPBzO-hUbN0eGAZT0caqygmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQOOPbuW8NRRQolia3xIWj6Ch999WTL223siLmBZPh_9QoN0Y3CCOqWFd2FrdTKA","listenAddresses":["/ip4/127.0.0.1/tcp/15013/p2p/16Uiu2HAmNEEqheg8bzDN9KruPFfEYB7wA5BaaXwenWNueFoh7nSM","/ip4/127.0.0.1/tcp/15014/ws/p2p/16Uiu2HAmNEEqheg8bzDN9KruPFfEYB7wA5BaaXwenWNueFoh7nSM","/ip4/172.17.0.4/tcp/15013/p2p/16Uiu2HAmNEEqheg8bzDN9KruPFfEYB7wA5BaaXwenWNueFoh7nSM","/ip4/172.17.0.4/tcp/15014/ws/p2p/16Uiu2HAmNEEqheg8bzDN9KruPFfEYB7wA5BaaXwenWNueFoh7nSM"]}'
2025-02-11 09:57:58.569 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 09:57:58.569 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:15012/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.53.255/tcp/43084/p2p/16Uiu2HAm3KqfzCKbzqabhEAUNdJK12StAWC9JAFozc5crbkHEX47", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-11 09:57:58.584 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-11 09:57:58.586 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:15012/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:57:58.589 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"id":"16Uiu2HAm8pM6s25xsiqRUwGvQKb8zg4Uqinnm6f1TM7VXdH5TYuv","multiaddrs":["/ip4/172.17.0.3/tcp/35147/p2p/16Uiu2HAm8pM6s25xsiqRUwGvQKb8zg4Uqinnm6f1TM7VXdH5TYuv","/ip4/172.17.0.3/tcp/35148/ws/p2p/16Uiu2HAm8pM6s25xsiqRUwGvQKb8zg4Uqinnm6f1TM7VXdH5TYuv"],"protocols":["/vac/waku/filter-push/2.0.0-beta1","/vac/waku/relay/2.0.0"],"connected":true,"pubsubTopics":["/waku/2/rs/3/1"]},{"id":"16Uiu2HAm3KqfzCKbzqabhEAUNdJK12StAWC9JAFozc5crbkHEX47","multiaddrs":["/ip4/172.18.53.255/tcp/43084/p2p/16Uiu2HAm3KqfzCKbzqabhEAUNdJK12StAWC9JAFozc5crbkHEX47","/ip4/172.18.53.255/tcp/43085/ws/p2p/16Uiu2HAm3KqfzCKbzqabhEAUNdJK12StAWC9JAFozc5crbkHEX47"],"protocols":["/vac/waku/relay/2.0.0","/vac/waku/filter-push/2.0.0-beta1"],"connected":true,"pubsubTopics":["/waku/2/rs/3/0","/waku/2/rs/3/1","/waku/2/rs/3/2","/waku/2/rs/3/8","/waku/2/rs/3/3","/waku/2/rs/3/4","/waku/2/rs/3/5","/waku/2/rs/3/6","/waku/2/rs/3/7"]}]'
2025-02-11 09:57:58.591 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 09:57:58.592 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 09:57:58.592 DEBUG [src.node.waku_node] Stopping container with id ce9024e9b1e3
2025-02-11 09:57:59.108 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 09:57:59.108 DEBUG [src.node.waku_node] Stopping container with id 99dca328047d
2025-02-11 09:57:59.606 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 09:57:59.606 DEBUG [src.node.waku_node] Stopping container with id 977672a8aebe
2025-02-11 09:57:59.920 ERROR [src.node.docker_mananger] Max retries reached for container ce9024e9b1e3. Exiting log stream.
2025-02-11 09:58:00.106 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 09:58:00.108 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 09:58:00.127 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 09:58:00.130 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 09:58:00.133 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
