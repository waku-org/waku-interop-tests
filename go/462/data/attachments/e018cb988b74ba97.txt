2025-02-11 09:57:21.924 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 09:57:21.925 DEBUG [tests.conftest] Running test: test_filter_subscribe_with_no_pubsub_topic with id: 2025-02-11_09-57-21__4fda80b8-eb6d-425f-9614-394299b97485
2025-02-11 09:57:21.925 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 09:57:21.925 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-11 09:57:21.926 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-11 09:57:21.934 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 09:57:21.934 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-11_09-57-21__4fda80b8-eb6d-425f-9614-394299b97485__wakuorg_nwaku:latest.log
2025-02-11 09:57:21.934 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 09:57:21.934 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 09:57:21.936 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 09:57:21.936 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.226.10
2025-02-11 09:57:21.936 DEBUG [src.node.docker_mananger] Generated ports ['56377', '56378', '56379', '56380', '56381']
2025-02-11 09:57:21.936 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 09:57:21.936 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 09:57:21.936 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 09:57:21.936 DEBUG [src.node.docker_mananger] docker run -i -t -p 56377:56377 -p 56378:56378 -p 56379:56379 -p 56380:56380 -p 56381:56381 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56379 --rest-port=56377 --tcp-port=56378 --discv5-udp-port=56380 --rest-address=0.0.0.0 --nat=extip:172.18.226.10 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a33adbf84fd2c68e3ff097cc6d0efe5f648d5bacdcfcce8681ab06d26e6df3cb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56381 --metrics-logging=true --relay=true --filter=true
2025-02-11 09:57:22.075 ERROR [src.node.docker_mananger] Max retries reached for container c09c8a6010d2. Exiting log stream.
2025-02-11 09:57:22.161 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.226.10 waku 405ffbca680a7857127a071ec4342f93cb1027acd8e2b0b586c225032174f1e2
2025-02-11 09:57:22.208 DEBUG [src.node.docker_mananger] Container started with ID 405ffbca680a. Setting up logs at ./log/docker/node1_2025-02-11_09-57-21__4fda80b8-eb6d-425f-9614-394299b97485__wakuorg_nwaku:latest.log
2025-02-11 09:57:22.209 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 56377
2025-02-11 09:57:22.209 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 09:57:22.742 ERROR [src.node.docker_mananger] Max retries reached for container d8e1966b0c30. Exiting log stream.
2025-02-11 09:57:23.210 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56377/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:57:23.213 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 09:57:23.213 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 09:57:23.213 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:56377/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:57:23.215 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.226.10/tcp/56378/p2p/16Uiu2HAmEV1KsNkQgcghsJfUWkJ12RY1XkLhX2Dh8DxVaP8o5Ygu","/ip4/172.18.226.10/tcp/56379/ws/p2p/16Uiu2HAmEV1KsNkQgcghsJfUWkJ12RY1XkLhX2Dh8DxVaP8o5Ygu"],"enrUri":"enr:-L24QL9T0avp0CCGrXcyVcejL1qsSuTs2PGrmNjDc-Ri61jnFXGgbXGNROitF_ImGhj4sJv82fIK4ubwPHMr8n6f_gcCgmlkgnY0gmlwhKwS4gqKbXVsdGlhZGRyc5YACASsEuIKBtw6AAoErBLiCgbcO90DgnJzhQADAQAAiXNlY3AyNTZrMaEDGyirNK3Wi5ahz_atEvVbEJt36qbj5ykmVN1qRhsfN0aDdGNwgtw6g3VkcILcPIV3YWt1MgU"}'
2025-02-11 09:57:23.215 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 09:57:23.216 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-11 09:57:23.222 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-11 09:57:23.222 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-11_09-57-21__4fda80b8-eb6d-425f-9614-394299b97485__wakuorg_go-waku:latest.log
2025-02-11 09:57:23.223 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 09:57:23.223 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 09:57:23.224 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 09:57:23.224 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.24.180
2025-02-11 09:57:23.224 DEBUG [src.node.docker_mananger] Generated ports ['7615', '7616', '7617', '7618', '7619']
2025-02-11 09:57:23.225 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 09:57:23.225 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 09:57:23.225 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 09:57:23.225 DEBUG [src.node.docker_mananger] docker run -i -t -p 7615:7615 -p 7616:7616 -p 7617:7617 -p 7618:7618 -p 7619:7619 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=7617 --rest-port=7615 --tcp-port=7616 --discv5-udp-port=7618 --rest-address=0.0.0.0 --nat=extip:172.18.24.180 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=957c846b0ccc98c31cd9f066f0aebb9507960cbd9f458b06bfb807c3bbf58a33 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-L24QL9T0avp0CCGrXcyVcejL1qsSuTs2PGrmNjDc-Ri61jnFXGgbXGNROitF_ImGhj4sJv82fIK4ubwPHMr8n6f_gcCgmlkgnY0gmlwhKwS4gqKbXVsdGlhZGRyc5YACASsEuIKBtw6AAoErBLiCgbcO90DgnJzhQADAQAAiXNlY3AyNTZrMaEDGyirNK3Wi5ahz_atEvVbEJt36qbj5ykmVN1qRhsfN0aDdGNwgtw6g3VkcILcPIV3YWt1MgU --filternode=/ip4/172.18.226.10/tcp/56378/p2p/16Uiu2HAmEV1KsNkQgcghsJfUWkJ12RY1XkLhX2Dh8DxVaP8o5Ygu --pubsub-topic=/waku/2/rs/3/1
2025-02-11 09:57:23.458 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.24.180 waku 738c6fa589a1b2fe1f9c6c2a85298c56f52c4d652be2f979fbf14f4c3358cff7
2025-02-11 09:57:23.513 DEBUG [src.node.docker_mananger] Container started with ID 738c6fa589a1. Setting up logs at ./log/docker/node2_2025-02-11_09-57-21__4fda80b8-eb6d-425f-9614-394299b97485__wakuorg_go-waku:latest.log
2025-02-11 09:57:23.514 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 7615
2025-02-11 09:57:23.514 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 09:57:24.515 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:7615/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:57:24.518 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QD2K3Ab_n_8pPPRp0YcSUquG1nd_93yFl8gYU8vakI3dZjtoZ84BLVIDQX1K3ulJtkrPHblQ92qkIM7ayaU9z0uGAZT0cSWzgmlkgnY0gmlwhKwRAAOCcnOFAAMBAAGJc2VjcDI1NmsxoQPQjanssGd-3ad6SRcfpGzxe0e06kSSvmzBzNDZ7Tm3X4N0Y3CCHcCDdWRwgh3ChXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/7616/p2p/16Uiu2HAmSh6SU8hwcWN4RdyExNs16inFwzRJzhN26QL4Z6Qvs18A","/ip4/127.0.0.1/tcp/7617/ws/p2p/16Uiu2HAmSh6SU8hwcWN4RdyExNs16inFwzRJzhN26QL4Z6Qvs18A","/ip4/172.17.0.3/tcp/7616/p2p/16Uiu2HAmSh6SU8hwcWN4RdyExNs16inFwzRJzhN26QL4Z6Qvs18A","/ip4/172.17.0.3/tcp/7617/ws/p2p/16Uiu2HAmSh6SU8hwcWN4RdyExNs16inFwzRJzhN26QL4Z6Qvs18A"]}'
2025-02-11 09:57:24.518 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 09:57:24.518 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7615/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.226.10/tcp/56378/p2p/16Uiu2HAmEV1KsNkQgcghsJfUWkJ12RY1XkLhX2Dh8DxVaP8o5Ygu", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-11 09:57:24.520 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-11 09:57:24.521 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-11 09:57:24.521 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:56377/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 09:57:24.524 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 09:57:24.525 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7615/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "6e9c518f-1434-4cea-b1d8-49cb4c09f4b4", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-11 09:57:24.530 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"6e9c518f-1434-4cea-b1d8-49cb4c09f4b4","statusDesc":"OK"}'
2025-02-11 09:57:24.533 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:7615/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"]}'
2025-02-11 09:57:44.579 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 09:57:44.580 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 09:57:44.580 DEBUG [src.node.waku_node] Stopping container with id 405ffbca680a
2025-02-11 09:57:45.099 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 09:57:45.099 DEBUG [src.node.waku_node] Stopping container with id 738c6fa589a1
2025-02-11 09:57:45.912 ERROR [src.node.docker_mananger] Max retries reached for container 405ffbca680a. Exiting log stream.
2025-02-11 09:57:55.603 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 09:57:55.604 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 09:57:55.610 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 09:57:55.613 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
