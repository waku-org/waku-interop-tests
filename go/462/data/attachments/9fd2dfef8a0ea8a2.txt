2025-02-11 09:59:45.808 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 09:59:45.808 DEBUG [tests.conftest] Running test: test_light_push_with_valid_timestamps with id: 2025-02-11_09-59-45__21fa7e28-cf53-42a3-a115-ad5c9a0031ad
2025-02-11 09:59:45.808 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 09:59:45.809 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-11 09:59:45.815 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 09:59:45.815 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-11_09-59-45__21fa7e28-cf53-42a3-a115-ad5c9a0031ad__wakuorg_nwaku:latest.log
2025-02-11 09:59:45.815 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 09:59:45.815 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 09:59:45.817 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 09:59:45.817 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.210.159
2025-02-11 09:59:45.817 DEBUG [src.node.docker_mananger] Generated ports ['58803', '58804', '58805', '58806', '58807']
2025-02-11 09:59:45.817 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 09:59:45.817 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 09:59:45.817 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 09:59:45.817 DEBUG [src.node.docker_mananger] docker run -i -t -p 58803:58803 -p 58804:58804 -p 58805:58805 -p 58806:58806 -p 58807:58807 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=58805 --rest-port=58803 --tcp-port=58804 --discv5-udp-port=58806 --rest-address=0.0.0.0 --nat=extip:172.18.210.159 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f35ec6af6bf9dadf6dd66d23e7b04a56001aebb791971cead9afee5ea9d3a2dd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=58807 --metrics-logging=true --lightpush=true --relay=true
2025-02-11 09:59:46.045 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.210.159 waku e9045f8f5a93a918aaaaa2294dfbb014d2596739a78a2b27c7987b0b1fd3dd88
2025-02-11 09:59:46.090 DEBUG [src.node.docker_mananger] Container started with ID e9045f8f5a93. Setting up logs at ./log/docker/receiving_node1_2025-02-11_09-59-45__21fa7e28-cf53-42a3-a115-ad5c9a0031ad__wakuorg_nwaku:latest.log
2025-02-11 09:59:46.090 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 58803
2025-02-11 09:59:46.091 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 09:59:46.114 ERROR [src.node.docker_mananger] Max retries reached for container 306c3dee1f9f. Exiting log stream.
2025-02-11 09:59:46.583 ERROR [src.node.docker_mananger] Max retries reached for container c551b55c411e. Exiting log stream.
2025-02-11 09:59:47.092 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58803/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:59:47.095 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 09:59:47.095 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 09:59:47.095 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58803/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:59:47.097 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.210.159/tcp/58804/p2p/16Uiu2HAmUTZvmbazMzbg2X4UUhjH34vu5KxLAmiJSVZiH7jjaMVR","/ip4/172.18.210.159/tcp/58805/ws/p2p/16Uiu2HAmUTZvmbazMzbg2X4UUhjH34vu5KxLAmiJSVZiH7jjaMVR"],"enrUri":"enr:-L24QONeK9qdQiVjbFhXne6Lj9ii6SugifYs2Hpbk5pVLORSDbnW-B-4I2KOuaHZJD_QuBgj-3eHuVjacjhbt5B0hvACgmlkgnY0gmlwhKwS0p-KbXVsdGlhZGRyc5YACASsEtKfBuW0AAoErBLSnwbltd0DgnJzhQADAQAAiXNlY3AyNTZrMaED6s38rS5AxCYOcoQ4OP5MlLXg5BAMMSa4W7_deIJvG8iDdGNwguW0g3VkcILltoV3YWt1Mgk"}'
2025-02-11 09:59:47.098 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 09:59:47.104 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 09:59:47.105 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-11_09-59-45__21fa7e28-cf53-42a3-a115-ad5c9a0031ad__wakuorg_nwaku:latest.log
2025-02-11 09:59:47.105 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 09:59:47.105 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 09:59:47.106 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 09:59:47.106 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.169.173
2025-02-11 09:59:47.106 DEBUG [src.node.docker_mananger] Generated ports ['23019', '23020', '23021', '23022', '23023']
2025-02-11 09:59:47.107 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 09:59:47.107 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 09:59:47.107 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 09:59:47.107 DEBUG [src.node.docker_mananger] docker run -i -t -p 23019:23019 -p 23020:23020 -p 23021:23021 -p 23022:23022 -p 23023:23023 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23021 --rest-port=23019 --tcp-port=23020 --discv5-udp-port=23022 --rest-address=0.0.0.0 --nat=extip:172.18.169.173 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d3f3aca2ff7ec7beff6ed06daccecaabeb209d76796bdec47a2cbf5fcbeceb49 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23023 --metrics-logging=true --lightpush=false --relay=true
2025-02-11 09:59:47.333 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.169.173 waku f9a4c821a57556be0b37c8db0f368d2dda7b285767bc12d729a9baea0630e570
2025-02-11 09:59:47.380 DEBUG [src.node.docker_mananger] Container started with ID f9a4c821a575. Setting up logs at ./log/docker/receiving_node2_2025-02-11_09-59-45__21fa7e28-cf53-42a3-a115-ad5c9a0031ad__wakuorg_nwaku:latest.log
2025-02-11 09:59:47.381 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 23019
2025-02-11 09:59:47.381 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 09:59:48.381 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23019/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:59:48.384 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 09:59:48.384 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 09:59:48.384 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23019/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:59:48.386 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.169.173/tcp/23020/p2p/16Uiu2HAmFbkWqnWk7URQiFZKpXpQCbS3msbBXXAnFg4s2uAV6MwA","/ip4/172.18.169.173/tcp/23021/ws/p2p/16Uiu2HAmFbkWqnWk7URQiFZKpXpQCbS3msbBXXAnFg4s2uAV6MwA"],"enrUri":"enr:-L24QPBh3BzONCNSMB6aAsDsS4yB06MpVicTrS1fnGlBV9z8djxfO3fto9MNOPzQune1ED2yFV7SpHqKc8PsduKVB6kCgmlkgnY0gmlwhKwSqa2KbXVsdGlhZGRyc5YACASsEqmtBlnsAAoErBKprQZZ7d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDK76sukuiZSh0sBo5DHZGjZcRlhJqjXo6gq7cpaUIMb2DdGNwglnsg3VkcIJZ7oV3YWt1MgE"}'
2025-02-11 09:59:48.387 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 09:59:48.387 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23019/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.210.159/tcp/58804/p2p/16Uiu2HAmUTZvmbazMzbg2X4UUhjH34vu5KxLAmiJSVZiH7jjaMVR"]'
2025-02-11 09:59:48.432 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 09:59:48.445 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-11 09:59:48.445 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-11_09-59-45__21fa7e28-cf53-42a3-a115-ad5c9a0031ad__wakuorg_go-waku:latest.log
2025-02-11 09:59:48.445 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 09:59:48.445 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 09:59:48.447 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 09:59:48.447 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.50.240
2025-02-11 09:59:48.447 DEBUG [src.node.docker_mananger] Generated ports ['50665', '50666', '50667', '50668', '50669']
2025-02-11 09:59:48.447 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 09:59:48.447 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 09:59:48.448 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 09:59:48.448 DEBUG [src.node.docker_mananger] docker run -i -t -p 50665:50665 -p 50666:50666 -p 50667:50667 -p 50668:50668 -p 50669:50669 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=50667 --rest-port=50665 --tcp-port=50666 --discv5-udp-port=50668 --rest-address=0.0.0.0 --nat=extip:172.18.50.240 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7f9f3de57f16aeedaaeeffebc592dbbb9e72f6a7978bb02b493c0a7c5faa3a9c --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QONeK9qdQiVjbFhXne6Lj9ii6SugifYs2Hpbk5pVLORSDbnW-B-4I2KOuaHZJD_QuBgj-3eHuVjacjhbt5B0hvACgmlkgnY0gmlwhKwS0p-KbXVsdGlhZGRyc5YACASsEtKfBuW0AAoErBLSnwbltd0DgnJzhQADAQAAiXNlY3AyNTZrMaED6s38rS5AxCYOcoQ4OP5MlLXg5BAMMSa4W7_deIJvG8iDdGNwguW0g3VkcILltoV3YWt1Mgk --lightpushnode=/ip4/172.18.210.159/tcp/58804/p2p/16Uiu2HAmUTZvmbazMzbg2X4UUhjH34vu5KxLAmiJSVZiH7jjaMVR --lightpush=true --relay=false --pubsub-topic=/waku/2/rs/3/1
2025-02-11 09:59:48.684 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.50.240 waku c2fcc639bf0d337d84301197130c2d6091ec9fc62c01c5fc310e6328d1fd6809
2025-02-11 09:59:48.739 DEBUG [src.node.docker_mananger] Container started with ID c2fcc639bf0d. Setting up logs at ./log/docker/lightpush_node1_2025-02-11_09-59-45__21fa7e28-cf53-42a3-a115-ad5c9a0031ad__wakuorg_go-waku:latest.log
2025-02-11 09:59:48.739 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 50665
2025-02-11 09:59:48.739 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 09:59:49.741 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:50665/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:59:49.743 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QAd_E0cmrZwL9TzCkPJ3Lov0EVCtjMy1udPiXPXgZ03kCQQEZL0hgmo9k95gKuDdDX_PVxgf7DpO1PLZu_EE41GGAZT0c1z_gmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQO7piD7Wjw3jC4rL5HoCag1ncKkoMq35ziSjh809wwuDYN0Y3CCxeqDdWRwgsXshXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/50666/p2p/16Uiu2HAmRHVWqhcQLdqCpVXftr1Qos1gdouaULApgQ9USG6UtaVA","/ip4/127.0.0.1/tcp/50667/ws/p2p/16Uiu2HAmRHVWqhcQLdqCpVXftr1Qos1gdouaULApgQ9USG6UtaVA","/ip4/172.17.0.4/tcp/50666/p2p/16Uiu2HAmRHVWqhcQLdqCpVXftr1Qos1gdouaULApgQ9USG6UtaVA","/ip4/172.17.0.4/tcp/50667/ws/p2p/16Uiu2HAmRHVWqhcQLdqCpVXftr1Qos1gdouaULApgQ9USG6UtaVA"]}'
2025-02-11 09:59:49.744 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 09:59:49.744 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50665/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.210.159/tcp/58804/p2p/16Uiu2HAmUTZvmbazMzbg2X4UUhjH34vu5KxLAmiJSVZiH7jjaMVR", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-11 09:59:49.746 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-11 09:59:49.746 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50665/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.169.173/tcp/23020/p2p/16Uiu2HAmFbkWqnWk7URQiFZKpXpQCbS3msbBXXAnFg4s2uAV6MwA", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-11 09:59:49.762 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-11 09:59:49.764 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58803/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 09:59:49.769 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 09:59:49.769 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23019/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 09:59:49.773 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 09:59:49.774 DEBUG [tests.light_push.test_publish] Running test with timestamp Now
2025-02-11 09:59:49.775 DEBUG [src.steps.light_push] Lightpushing message
2025-02-11 09:59:49.775 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50665/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739267750354363392}}'
2025-02-11 09:59:49.782 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-11 09:59:49.783 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 09:59:49.883 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-11 09:59:49.883 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58803/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:59:49.885 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739267750354363392,"ephemeral":false}]'
2025-02-11 09:59:49.887 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-11 09:59:49.887 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23019/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:59:49.889 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739267750354363392,"ephemeral":false}]'
2025-02-11 09:59:49.890 DEBUG [tests.light_push.test_publish] Running test with timestamp Far future
2025-02-11 09:59:49.891 DEBUG [src.steps.light_push] Lightpushing message
2025-02-11 09:59:49.891 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50665/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 2054627750354348800}}'
2025-02-11 09:59:49.897 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-11 09:59:49.897 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 09:59:49.998 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-11 09:59:49.998 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58803/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:59:50.000 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":2054627750354348800,"ephemeral":false}]'
2025-02-11 09:59:50.002 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-11 09:59:50.002 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23019/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:59:50.004 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":2054627750354348800,"ephemeral":false}]'
2025-02-11 09:59:50.005 DEBUG [tests.light_push.test_publish] Running test with timestamp Recent past
2025-02-11 09:59:50.006 DEBUG [src.steps.light_push] Lightpushing message
2025-02-11 09:59:50.006 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50665/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739264150354348800}}'
2025-02-11 09:59:50.011 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-11 09:59:50.013 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 09:59:50.113 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-11 09:59:50.114 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58803/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:59:50.116 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739264150354348800,"ephemeral":false}]'
2025-02-11 09:59:50.117 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-11 09:59:50.117 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23019/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:59:50.119 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739264150354348800,"ephemeral":false}]'
2025-02-11 09:59:50.121 DEBUG [tests.light_push.test_publish] Running test with timestamp Near future
2025-02-11 09:59:50.121 DEBUG [src.steps.light_push] Lightpushing message
2025-02-11 09:59:50.121 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50665/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1739271350354348800}}'
2025-02-11 09:59:50.127 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-11 09:59:50.128 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 09:59:50.229 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-11 09:59:50.229 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58803/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:59:50.232 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739271350354348800,"ephemeral":false}]'
2025-02-11 09:59:50.233 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-11 09:59:50.233 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23019/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:59:50.235 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1739271350354348800,"ephemeral":false}]'
2025-02-11 09:59:50.236 DEBUG [tests.light_push.test_publish] Running test with timestamp Positive number
2025-02-11 09:59:50.237 DEBUG [src.steps.light_push] Lightpushing message
2025-02-11 09:59:50.237 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50665/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1}}'
2025-02-11 09:59:50.243 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-11 09:59:50.244 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 09:59:50.344 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-11 09:59:50.344 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58803/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:59:50.347 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1,"ephemeral":false}]'
2025-02-11 09:59:50.348 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-11 09:59:50.349 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23019/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:59:50.351 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1,"ephemeral":false}]'
2025-02-11 09:59:50.352 DEBUG [tests.light_push.test_publish] Running test with timestamp Negative number
2025-02-11 09:59:50.352 DEBUG [src.steps.light_push] Lightpushing message
2025-02-11 09:59:50.353 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50665/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": -1}}'
2025-02-11 09:59:50.358 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-11 09:59:50.358 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 09:59:50.459 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-11 09:59:50.459 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58803/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:59:50.461 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":-1,"ephemeral":false}]'
2025-02-11 09:59:50.462 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-11 09:59:50.462 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23019/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:59:50.465 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":-1,"ephemeral":false}]'
2025-02-11 09:59:50.466 DEBUG [tests.light_push.test_publish] Running test with timestamp DST change
2025-02-11 09:59:50.466 DEBUG [src.steps.light_push] Lightpushing message
2025-02-11 09:59:50.466 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50665/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1583632800000000000}}'
2025-02-11 09:59:50.474 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-11 09:59:50.474 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 09:59:50.574 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-11 09:59:50.575 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58803/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:59:50.577 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1583632800000000000,"ephemeral":false}]'
2025-02-11 09:59:50.578 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-11 09:59:50.579 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23019/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:59:50.581 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1583632800000000000,"ephemeral":false}]'
2025-02-11 09:59:50.582 DEBUG [tests.light_push.test_publish] Running test with timestamp Missing
2025-02-11 09:59:50.582 DEBUG [src.steps.light_push] Lightpushing message
2025-02-11 09:59:50.583 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:50665/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": null}}'
2025-02-11 09:59:50.589 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-11 09:59:50.589 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 09:59:50.691 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-11 09:59:50.691 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58803/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:59:50.694 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":0,"ephemeral":false}]'
2025-02-11 09:59:50.695 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-11 09:59:50.695 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23019/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:59:50.697 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":0,"ephemeral":false}]'
2025-02-11 09:59:50.700 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 09:59:50.701 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 09:59:50.701 DEBUG [src.node.waku_node] Stopping container with id e9045f8f5a93
2025-02-11 09:59:51.264 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 09:59:51.265 DEBUG [src.node.waku_node] Stopping container with id f9a4c821a575
2025-02-11 09:59:52.075 ERROR [src.node.docker_mananger] Max retries reached for container e9045f8f5a93. Exiting log stream.
2025-02-11 09:59:52.372 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 09:59:52.372 DEBUG [src.node.waku_node] Stopping container with id c2fcc639bf0d
2025-02-11 09:59:52.860 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 09:59:52.862 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 09:59:52.872 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 09:59:52.887 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 09:59:52.891 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
