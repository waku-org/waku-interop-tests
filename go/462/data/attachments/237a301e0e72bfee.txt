2025-02-11 09:55:51.411 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 09:55:51.411 DEBUG [tests.conftest] Running test: test_store_node_not_connected_directly_to_relaying_node with id: 2025-02-11_09-55-51__87f13a47-842a-4b74-a947-1399dea9fcea
2025-02-11 09:55:51.412 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 09:55:51.412 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-11 09:55:51.412 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-11 09:55:51.420 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-11 09:55:51.420 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-11_09-55-51__87f13a47-842a-4b74-a947-1399dea9fcea__wakuorg_go-waku:latest.log
2025-02-11 09:55:51.426 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 09:55:51.426 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-11_09-55-51__87f13a47-842a-4b74-a947-1399dea9fcea__wakuorg_nwaku:latest.log
2025-02-11 09:55:51.432 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-11 09:55:51.432 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node3_2025-02-11_09-55-51__87f13a47-842a-4b74-a947-1399dea9fcea__wakuorg_go-waku:latest.log
2025-02-11 09:55:51.433 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-11 09:55:51.433 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-11 09:55:51.434 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 09:55:51.434 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 09:55:51.503 DEBUG [src.node.docker_mananger] Network waku created
2025-02-11 09:55:51.503 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.144.243
2025-02-11 09:55:51.503 DEBUG [src.node.docker_mananger] Generated ports ['52878', '52879', '52880', '52881', '52882']
2025-02-11 09:55:51.504 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 09:55:51.504 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 09:55:51.504 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 09:55:51.504 DEBUG [src.node.docker_mananger] docker run -i -t -p 52878:52878 -p 52879:52879 -p 52880:52880 -p 52881:52881 -p 52882:52882 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=52880 --rest-port=52878 --tcp-port=52879 --discv5-udp-port=52881 --rest-address=0.0.0.0 --nat=extip:172.18.144.243 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fd10bdacf6dda900f7d09fdbde1a17749a2d40ffe7eba46bf090cd78e575deac --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true
2025-02-11 09:55:54.310 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.144.243 waku aa5c992ee3b029a8bd547f6cd8ed4abbb5114d301eb1363f825ba8784e045a98
2025-02-11 09:55:54.362 DEBUG [src.node.docker_mananger] Container started with ID aa5c992ee3b0. Setting up logs at ./log/docker/node1_2025-02-11_09-55-51__87f13a47-842a-4b74-a947-1399dea9fcea__wakuorg_go-waku:latest.log
2025-02-11 09:55:54.364 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 52878
2025-02-11 09:55:54.365 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 09:55:55.365 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52878/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:55:55.368 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QFkuqK6S6CIhAmZiWz6K48zR21AWKuQZq4uxB3YQeVXzNBsTUlPn8SVb34Vyf8bI6kr4MhdMxOJ7mCJ9VcZb87mGAZT0b8l2gmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaEDmsgHTwpCb84sa1RJ1ty-EaygDnzWhupMUX9-K-nCqaiDdGNwgs6Pg3VkcILOkYV3YWt1MgE","listenAddresses":["/ip4/127.0.0.1/tcp/52879/p2p/16Uiu2HAmP5C3Qi1vNzFo5a8MBe6axfaMLg5saFGyfnYJFA8E3ZiX","/ip4/127.0.0.1/tcp/52880/ws/p2p/16Uiu2HAmP5C3Qi1vNzFo5a8MBe6axfaMLg5saFGyfnYJFA8E3ZiX","/ip4/172.17.0.2/tcp/52879/p2p/16Uiu2HAmP5C3Qi1vNzFo5a8MBe6axfaMLg5saFGyfnYJFA8E3ZiX","/ip4/172.17.0.2/tcp/52880/ws/p2p/16Uiu2HAmP5C3Qi1vNzFo5a8MBe6axfaMLg5saFGyfnYJFA8E3ZiX"]}'
2025-02-11 09:55:55.368 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 09:55:55.368 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 09:55:55.368 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 09:55:55.370 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 09:55:55.370 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.149.234
2025-02-11 09:55:55.370 DEBUG [src.node.docker_mananger] Generated ports ['25641', '25642', '25643', '25644', '25645']
2025-02-11 09:55:55.370 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 09:55:55.370 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 09:55:55.371 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 09:55:55.371 DEBUG [src.node.docker_mananger] docker run -i -t -p 25641:25641 -p 25642:25642 -p 25643:25643 -p 25644:25644 -p 25645:25645 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=25643 --rest-port=25641 --tcp-port=25642 --discv5-udp-port=25644 --rest-address=0.0.0.0 --nat=extip:172.18.149.234 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=db74cead1e36cee1fa30ddddc087174caaf6aadbacce59bebcbebc03c80e8f6f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=25645 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-J-4QFkuqK6S6CIhAmZiWz6K48zR21AWKuQZq4uxB3YQeVXzNBsTUlPn8SVb34Vyf8bI6kr4MhdMxOJ7mCJ9VcZb87mGAZT0b8l2gmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaEDmsgHTwpCb84sa1RJ1ty-EaygDnzWhupMUX9-K-nCqaiDdGNwgs6Pg3VkcILOkYV3YWt1MgE
2025-02-11 09:55:57.287 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.149.234 waku ff2c2dea1e912c1607371d2d1b6b90932d5e7820afd81ad7584c06ed73d04254
2025-02-11 09:55:57.338 DEBUG [src.node.docker_mananger] Container started with ID ff2c2dea1e91. Setting up logs at ./log/docker/node2_2025-02-11_09-55-51__87f13a47-842a-4b74-a947-1399dea9fcea__wakuorg_nwaku:latest.log
2025-02-11 09:55:57.340 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 25641
2025-02-11 09:55:57.341 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 09:55:58.341 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25641/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:55:58.352 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 09:55:58.352 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 09:55:58.353 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25641/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:55:58.375 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.149.234/tcp/25642/p2p/16Uiu2HAmSuKYsuCMVNfk1DznP1NS86LyHmRhJNMFCbYtrRD6ixhJ","/ip4/172.18.149.234/tcp/25643/ws/p2p/16Uiu2HAmSuKYsuCMVNfk1DznP1NS86LyHmRhJNMFCbYtrRD6ixhJ"],"enrUri":"enr:-L24QHffptjbMWizQhHnwapPGudlDUD2jHag2Mek_5VBalHzEkIUb4J_Z_0JRTLvfFxrFibyBepKdOaET9_OP8rWRGkCgmlkgnY0gmlwhKwSleqKbXVsdGlhZGRyc5YACASsEpXqBmQqAAoErBKV6gZkK90DgnJzhQADAQAAiXNlY3AyNTZrMaED0691JA-cZZ7W4u1BI7jPSQBhiEMFwP10TNDWubwjgpWDdGNwgmQqg3VkcIJkLIV3YWt1MgM"}'
2025-02-11 09:55:58.376 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 09:55:58.377 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 09:55:58.377 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 09:55:58.379 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 09:55:58.379 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.230.230
2025-02-11 09:55:58.380 DEBUG [src.node.docker_mananger] Generated ports ['32474', '32475', '32476', '32477', '32478']
2025-02-11 09:55:58.380 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 09:55:58.380 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 09:55:58.380 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 09:55:58.380 DEBUG [src.node.docker_mananger] docker run -i -t -p 32474:32474 -p 32475:32475 -p 32476:32476 -p 32477:32477 -p 32478:32478 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=32476 --rest-port=32474 --tcp-port=32475 --discv5-udp-port=32477 --rest-address=0.0.0.0 --nat=extip:172.18.230.230 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a3b91e31da88b99cef7e0ebd7dd9d452acdb0beb26ea4845ec1cddd2ea5e6b28 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --storenode=/ip4/172.18.149.234/tcp/25642/p2p/16Uiu2HAmSuKYsuCMVNfk1DznP1NS86LyHmRhJNMFCbYtrRD6ixhJ --discv5-bootstrap-node=enr:-L24QHffptjbMWizQhHnwapPGudlDUD2jHag2Mek_5VBalHzEkIUb4J_Z_0JRTLvfFxrFibyBepKdOaET9_OP8rWRGkCgmlkgnY0gmlwhKwSleqKbXVsdGlhZGRyc5YACASsEpXqBmQqAAoErBKV6gZkK90DgnJzhQADAQAAiXNlY3AyNTZrMaED0691JA-cZZ7W4u1BI7jPSQBhiEMFwP10TNDWubwjgpWDdGNwgmQqg3VkcIJkLIV3YWt1MgM --pubsub-topic=/waku/2/rs/3/1
2025-02-11 09:55:58.610 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.230.230 waku 63efb1d472dbaaf9ded5342cdf31304746099481162453e61686c19f6033dc69
2025-02-11 09:55:58.661 DEBUG [src.node.docker_mananger] Container started with ID 63efb1d472db. Setting up logs at ./log/docker/node3_2025-02-11_09-55-51__87f13a47-842a-4b74-a947-1399dea9fcea__wakuorg_go-waku:latest.log
2025-02-11 09:55:58.663 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 32474
2025-02-11 09:55:58.663 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 09:55:59.664 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32474/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:55:59.666 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QHibhWMEki5b2N0dJheXiVC4TXCO0JOo26NppHIVyQdseUA13ouAOQkswDP2iIGptlrwlXycMBbukgBDuQPW1oWGAZT0b9pBgmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQIw9yKb4ERYYqxIDr1tK7ewMB_oSt_kqbvnkdANj75IQ4N0Y3CCftuDdWRwgn7dhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/32475/p2p/16Uiu2HAkxip7kD7Xq2khz8YithTHzVcSvMZtXoaPmCXNh2sgTnDx","/ip4/127.0.0.1/tcp/32476/ws/p2p/16Uiu2HAkxip7kD7Xq2khz8YithTHzVcSvMZtXoaPmCXNh2sgTnDx","/ip4/172.17.0.4/tcp/32475/p2p/16Uiu2HAkxip7kD7Xq2khz8YithTHzVcSvMZtXoaPmCXNh2sgTnDx","/ip4/172.17.0.4/tcp/32476/ws/p2p/16Uiu2HAkxip7kD7Xq2khz8YithTHzVcSvMZtXoaPmCXNh2sgTnDx"]}'
2025-02-11 09:55:59.666 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 09:55:59.666 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52878/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 09:55:59.668 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-11 09:55:59.669 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:25641/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 09:55:59.672 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 09:55:59.673 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52878/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:55:59.674 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"id":"16Uiu2HAmSuKYsuCMVNfk1DznP1NS86LyHmRhJNMFCbYtrRD6ixhJ","multiaddrs":["/ip4/172.18.149.234/tcp/25642/p2p/16Uiu2HAmSuKYsuCMVNfk1DznP1NS86LyHmRhJNMFCbYtrRD6ixhJ","/ip4/172.18.149.234/tcp/25643/ws/p2p/16Uiu2HAmSuKYsuCMVNfk1DznP1NS86LyHmRhJNMFCbYtrRD6ixhJ"],"protocols":null,"connected":false,"pubsubTopics":[]}]'
2025-02-11 09:55:59.675 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:25641/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:55:59.677 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.4/tcp/32475/p2p/16Uiu2HAkxip7kD7Xq2khz8YithTHzVcSvMZtXoaPmCXNh2sgTnDx","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
2025-02-11 09:55:59.677 DEBUG [src.libs.common] Sleeping for 30 seconds
2025-02-11 09:56:29.678 DEBUG [src.steps.store] Relaying message
2025-02-11 09:56:29.678 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52878/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 09:56:29.681 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-11 09:56:29.682 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 09:56:29.883 DEBUG [src.steps.store] Checking that peer wakuorg/go-waku:latest can find the stored messages
2025-02-11 09:56:29.884 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32474/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-filter%2Fproto&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:56:29.890 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"93055a6e97f78cc0b34b1c1503b19f34ae4167544b80d0e1a2ab408a62224a45","status_code":200,"status_desc":"OK","messages":[{"message_hash":"sws3vLpoeG0Zr/TcA6NJJ4GHwLqNmxpnbSdDZvJm3Oc="}]}'
2025-02-11 09:56:29.892 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 09:56:29.893 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 09:56:29.894 DEBUG [src.node.waku_node] Stopping container with id aa5c992ee3b0
2025-02-11 09:56:30.430 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 09:56:30.430 DEBUG [src.node.waku_node] Stopping container with id ff2c2dea1e91
2025-02-11 09:56:31.243 ERROR [src.node.docker_mananger] Max retries reached for container aa5c992ee3b0. Exiting log stream.
2025-02-11 09:56:31.511 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 09:56:31.512 DEBUG [src.node.waku_node] Stopping container with id 63efb1d472db
2025-02-11 09:56:31.985 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 09:56:31.988 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 09:56:31.993 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 09:56:32.004 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 09:56:32.007 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
