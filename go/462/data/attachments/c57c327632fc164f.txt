2025-02-11 09:57:39.194 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 09:57:39.195 DEBUG [tests.conftest] Running test: test_light_push_with_missing_content_topic with id: 2025-02-11_09-57-39__f5f53278-9d1d-4b1c-98b8-a2ebbd3829ce
2025-02-11 09:57:39.195 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 09:57:39.195 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-11 09:57:39.201 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 09:57:39.201 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-11_09-57-39__f5f53278-9d1d-4b1c-98b8-a2ebbd3829ce__wakuorg_nwaku:latest.log
2025-02-11 09:57:39.201 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 09:57:39.201 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 09:57:39.203 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 09:57:39.203 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.171.125
2025-02-11 09:57:39.203 DEBUG [src.node.docker_mananger] Generated ports ['13329', '13330', '13331', '13332', '13333']
2025-02-11 09:57:39.203 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 09:57:39.203 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 09:57:39.203 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 09:57:39.203 DEBUG [src.node.docker_mananger] docker run -i -t -p 13329:13329 -p 13330:13330 -p 13331:13331 -p 13332:13332 -p 13333:13333 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=13331 --rest-port=13329 --tcp-port=13330 --discv5-udp-port=13332 --rest-address=0.0.0.0 --nat=extip:172.18.171.125 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bb4fc8ba795bbbe4a72197abdd9b56a22a7122ded16edbef963e3ea67cdebc27 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=13333 --metrics-logging=true --lightpush=true --relay=true
2025-02-11 09:57:39.430 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.171.125 waku 2aa152e349328449efb505cad16ad5163485123dfde73c408a3ae7dac0be744d
2025-02-11 09:57:39.455 ERROR [src.node.docker_mananger] Max retries reached for container d6f98e329cec. Exiting log stream.
2025-02-11 09:57:39.482 DEBUG [src.node.docker_mananger] Container started with ID 2aa152e34932. Setting up logs at ./log/docker/receiving_node1_2025-02-11_09-57-39__f5f53278-9d1d-4b1c-98b8-a2ebbd3829ce__wakuorg_nwaku:latest.log
2025-02-11 09:57:39.483 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 13329
2025-02-11 09:57:39.483 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 09:57:39.984 ERROR [src.node.docker_mananger] Max retries reached for container d47f61bfc586. Exiting log stream.
2025-02-11 09:57:40.483 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:13329/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:57:40.486 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 09:57:40.486 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 09:57:40.486 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:13329/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:57:40.488 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.171.125/tcp/13330/p2p/16Uiu2HAkx9LrhK3XQjnc3Xyyj4oKA8zwvFQxFtb4SWrNUAKxsKxh","/ip4/172.18.171.125/tcp/13331/ws/p2p/16Uiu2HAkx9LrhK3XQjnc3Xyyj4oKA8zwvFQxFtb4SWrNUAKxsKxh"],"enrUri":"enr:-L24QFyL08NbcGFJwCnuLaWgyssj06kRnZc6l0RsNtaXzoQneTcsddQyh-nN3DyMWhGo79kDLqLKAfitA5HQsZHEYe4CgmlkgnY0gmlwhKwSq32KbXVsdGlhZGRyc5YACASsEqt9BjQSAAoErBKrfQY0E90DgnJzhQADAQAAiXNlY3AyNTZrMaECKGQlZppMVRHeuCJ3_uU0kKIFuW0D8dcq10c13LyIV2aDdGNwgjQSg3VkcII0FIV3YWt1Mgk"}'
2025-02-11 09:57:40.488 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 09:57:40.495 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 09:57:40.495 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-11_09-57-39__f5f53278-9d1d-4b1c-98b8-a2ebbd3829ce__wakuorg_nwaku:latest.log
2025-02-11 09:57:40.495 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 09:57:40.495 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 09:57:40.496 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 09:57:40.496 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.98.231
2025-02-11 09:57:40.497 DEBUG [src.node.docker_mananger] Generated ports ['11674', '11675', '11676', '11677', '11678']
2025-02-11 09:57:40.497 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 09:57:40.497 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 09:57:40.497 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 09:57:40.497 DEBUG [src.node.docker_mananger] docker run -i -t -p 11674:11674 -p 11675:11675 -p 11676:11676 -p 11677:11677 -p 11678:11678 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=11676 --rest-port=11674 --tcp-port=11675 --discv5-udp-port=11677 --rest-address=0.0.0.0 --nat=extip:172.18.98.231 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=93da345a11cb6e6351a80537d54bec9f8aab0f3d89d5ea27e511fa5acdc6ee0f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=11678 --metrics-logging=true --lightpush=false --relay=true
2025-02-11 09:57:40.722 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.98.231 waku 029ed75bdd99d638864020b6c3ee2153df545e1bc6901446a26a260b111405fc
2025-02-11 09:57:40.768 DEBUG [src.node.docker_mananger] Container started with ID 029ed75bdd99. Setting up logs at ./log/docker/receiving_node2_2025-02-11_09-57-39__f5f53278-9d1d-4b1c-98b8-a2ebbd3829ce__wakuorg_nwaku:latest.log
2025-02-11 09:57:40.768 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 11674
2025-02-11 09:57:40.769 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 09:57:41.770 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11674/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:57:41.772 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 09:57:41.772 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 09:57:41.772 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:11674/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:57:41.774 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.98.231/tcp/11675/p2p/16Uiu2HAmKhYGq3LDTfRbhTgYSo3rZw4u1RJZz8uuzY9SNnzJEyCo","/ip4/172.18.98.231/tcp/11676/ws/p2p/16Uiu2HAmKhYGq3LDTfRbhTgYSo3rZw4u1RJZz8uuzY9SNnzJEyCo"],"enrUri":"enr:-L24QAO0LCvXWU-OmgjHuql1ZHILET7uT3WoI1WIYCxAVpPxJ0DTYZG1whFFnaKG4FucUlN4MgL1J4enhYkF98SsjDICgmlkgnY0gmlwhKwSYueKbXVsdGlhZGRyc5YACASsEmLnBi2bAAoErBJi5wYtnN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDaKkQzs1GvC-GfAMSmcEDdVs22ZXm-yaoERtA8691CASDdGNwgi2bg3VkcIItnYV3YWt1MgE"}'
2025-02-11 09:57:41.774 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 09:57:41.775 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11674/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.171.125/tcp/13330/p2p/16Uiu2HAkx9LrhK3XQjnc3Xyyj4oKA8zwvFQxFtb4SWrNUAKxsKxh"]'
2025-02-11 09:57:41.813 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 09:57:41.822 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-11 09:57:41.822 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-11_09-57-39__f5f53278-9d1d-4b1c-98b8-a2ebbd3829ce__wakuorg_go-waku:latest.log
2025-02-11 09:57:41.822 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 09:57:41.822 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 09:57:41.824 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 09:57:41.824 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.43.172
2025-02-11 09:57:41.824 DEBUG [src.node.docker_mananger] Generated ports ['40168', '40169', '40170', '40171', '40172']
2025-02-11 09:57:41.824 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 09:57:41.824 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 09:57:41.824 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 09:57:41.825 DEBUG [src.node.docker_mananger] docker run -i -t -p 40168:40168 -p 40169:40169 -p 40170:40170 -p 40171:40171 -p 40172:40172 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=40170 --rest-port=40168 --tcp-port=40169 --discv5-udp-port=40171 --rest-address=0.0.0.0 --nat=extip:172.18.43.172 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2adf4d0f50f4ed16e8a243503ced30fdffb30bac5ef072cf146eea6cd36a02c8 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QFyL08NbcGFJwCnuLaWgyssj06kRnZc6l0RsNtaXzoQneTcsddQyh-nN3DyMWhGo79kDLqLKAfitA5HQsZHEYe4CgmlkgnY0gmlwhKwSq32KbXVsdGlhZGRyc5YACASsEqt9BjQSAAoErBKrfQY0E90DgnJzhQADAQAAiXNlY3AyNTZrMaECKGQlZppMVRHeuCJ3_uU0kKIFuW0D8dcq10c13LyIV2aDdGNwgjQSg3VkcII0FIV3YWt1Mgk --lightpushnode=/ip4/172.18.171.125/tcp/13330/p2p/16Uiu2HAkx9LrhK3XQjnc3Xyyj4oKA8zwvFQxFtb4SWrNUAKxsKxh --lightpush=true --relay=false --pubsub-topic=/waku/2/rs/3/1
2025-02-11 09:57:42.067 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.43.172 waku cad87fa09f05a9969dd9ebb4f8f6aedfdb38bb4283d068c5820cb6d146b9b4e9
2025-02-11 09:57:42.116 DEBUG [src.node.docker_mananger] Container started with ID cad87fa09f05. Setting up logs at ./log/docker/lightpush_node1_2025-02-11_09-57-39__f5f53278-9d1d-4b1c-98b8-a2ebbd3829ce__wakuorg_go-waku:latest.log
2025-02-11 09:57:42.118 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 40168
2025-02-11 09:57:42.118 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 09:57:43.118 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40168/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:57:43.121 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QGYU4kZzWKhZCVlMctLMkjtUWNUK0fcppQh7OMBnnkP_H63ibpYwCKI3VBzoAy_rldMPguEUPmWX-cQVk6MK6QGGAZT0cW5igmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQO_KDrniXG_UWWLodLkB_6DDVQGj6yhwCnD_MM488Lh6YN0Y3CCnOmDdWRwgpzrhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/40169/p2p/16Uiu2HAmRXBoPUV8E9dRTkcscJ6zUFXJAXPCJ1ed743uLUyDNpXz","/ip4/127.0.0.1/tcp/40170/ws/p2p/16Uiu2HAmRXBoPUV8E9dRTkcscJ6zUFXJAXPCJ1ed743uLUyDNpXz","/ip4/172.17.0.4/tcp/40169/p2p/16Uiu2HAmRXBoPUV8E9dRTkcscJ6zUFXJAXPCJ1ed743uLUyDNpXz","/ip4/172.17.0.4/tcp/40170/ws/p2p/16Uiu2HAmRXBoPUV8E9dRTkcscJ6zUFXJAXPCJ1ed743uLUyDNpXz"]}'
2025-02-11 09:57:43.121 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 09:57:43.121 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40168/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.171.125/tcp/13330/p2p/16Uiu2HAkx9LrhK3XQjnc3Xyyj4oKA8zwvFQxFtb4SWrNUAKxsKxh", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-11 09:57:43.123 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-11 09:57:43.123 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40168/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.98.231/tcp/11675/p2p/16Uiu2HAmKhYGq3LDTfRbhTgYSo3rZw4u1RJZz8uuzY9SNnzJEyCo", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-11 09:57:43.138 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-11 09:57:43.140 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:13329/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 09:57:43.145 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 09:57:43.146 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:11674/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 09:57:43.150 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 09:57:43.151 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40168/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "timestamp": 1739267863151294976}}'
2025-02-11 09:57:43.153 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:40168/lightpush/v1/message. Response content: b'missing ContentTopic field'
2025-02-11 09:57:43.154 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 09:57:43.155 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 09:57:43.155 DEBUG [src.node.waku_node] Stopping container with id 2aa152e34932
2025-02-11 09:57:43.745 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 09:57:43.746 DEBUG [src.node.waku_node] Stopping container with id 029ed75bdd99
2025-02-11 09:57:44.577 ERROR [src.node.docker_mananger] Max retries reached for container 2aa152e34932. Exiting log stream.
2025-02-11 09:57:45.242 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 09:57:45.242 DEBUG [src.node.waku_node] Stopping container with id cad87fa09f05
2025-02-11 09:57:45.735 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 09:57:45.736 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 09:57:45.748 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 09:57:45.754 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 09:57:45.756 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
