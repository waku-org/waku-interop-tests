2025-02-11 09:56:55.484 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 09:56:55.485 DEBUG [tests.conftest] Running test: test_filter_update_subscription_with_pubsub_topic_list_instead_of_string with id: 2025-02-11_09-56-55__fc85e907-a99e-4213-8298-7dca23679411
2025-02-11 09:56:55.487 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 09:56:55.488 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-11 09:56:55.488 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-11 09:56:55.494 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 09:56:55.495 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-11_09-56-55__fc85e907-a99e-4213-8298-7dca23679411__wakuorg_nwaku:latest.log
2025-02-11 09:56:55.495 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 09:56:55.495 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 09:56:55.496 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 09:56:55.496 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.84.74
2025-02-11 09:56:55.496 DEBUG [src.node.docker_mananger] Generated ports ['14906', '14907', '14908', '14909', '14910']
2025-02-11 09:56:55.496 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 09:56:55.496 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 09:56:55.497 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 09:56:55.497 DEBUG [src.node.docker_mananger] docker run -i -t -p 14906:14906 -p 14907:14907 -p 14908:14908 -p 14909:14909 -p 14910:14910 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=14908 --rest-port=14906 --tcp-port=14907 --discv5-udp-port=14909 --rest-address=0.0.0.0 --nat=extip:172.18.84.74 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b7b6d3b18bcce8d0e1d8e0a85983943be50325d54ff86bd0c51b3bcec3b3a67a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=14910 --metrics-logging=true --relay=true --filter=true
2025-02-11 09:56:55.710 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.84.74 waku 8657d4128bbd4fdd11903bb01647ba9e082527efbff45eeda16aea2ef2069dde
2025-02-11 09:56:55.757 DEBUG [src.node.docker_mananger] Container started with ID 8657d4128bbd. Setting up logs at ./log/docker/node1_2025-02-11_09-56-55__fc85e907-a99e-4213-8298-7dca23679411__wakuorg_nwaku:latest.log
2025-02-11 09:56:55.759 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 14906
2025-02-11 09:56:55.759 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 09:56:56.300 ERROR [src.node.docker_mananger] Max retries reached for container 4fdb5f565c0b. Exiting log stream.
2025-02-11 09:56:56.760 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14906/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:56:56.763 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 09:56:56.763 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 09:56:56.763 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:14906/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:56:56.765 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.84.74/tcp/14907/p2p/16Uiu2HAmKtzTztyCDnFGotyL9kQah8Py6yHEbpeTpde39ApNBXtf","/ip4/172.18.84.74/tcp/14908/ws/p2p/16Uiu2HAmKtzTztyCDnFGotyL9kQah8Py6yHEbpeTpde39ApNBXtf"],"enrUri":"enr:-L24QKCCAurZJe1MFlYU5BltRJoWDIu6QfxJp5F9lJAk7kD2V0K2zJsSCxKTqETEOgCe1NQvtQ9uIMqux1LZF7XtkV8CgmlkgnY0gmlwhKwSVEqKbXVsdGlhZGRyc5YACASsElRKBjo7AAoErBJUSgY6PN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDa5gSEzWJwtYbljHUF7MrCDTDjXtskZyS6D5nRd-m3myDdGNwgjo7g3VkcII6PYV3YWt1MgU"}'
2025-02-11 09:56:56.765 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 09:56:56.766 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-11 09:56:56.772 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-11 09:56:56.772 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-11_09-56-55__fc85e907-a99e-4213-8298-7dca23679411__wakuorg_go-waku:latest.log
2025-02-11 09:56:56.772 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 09:56:56.772 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 09:56:56.774 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 09:56:56.774 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.242.2
2025-02-11 09:56:56.774 DEBUG [src.node.docker_mananger] Generated ports ['37777', '37778', '37779', '37780', '37781']
2025-02-11 09:56:56.774 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 09:56:56.774 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 09:56:56.775 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 09:56:56.775 DEBUG [src.node.docker_mananger] docker run -i -t -p 37777:37777 -p 37778:37778 -p 37779:37779 -p 37780:37780 -p 37781:37781 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=37779 --rest-port=37777 --tcp-port=37778 --discv5-udp-port=37780 --rest-address=0.0.0.0 --nat=extip:172.18.242.2 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dcc1b7264430be3a4d9848a420b4be7dea306431eabed586fafe29ffcf51e3df --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-L24QKCCAurZJe1MFlYU5BltRJoWDIu6QfxJp5F9lJAk7kD2V0K2zJsSCxKTqETEOgCe1NQvtQ9uIMqux1LZF7XtkV8CgmlkgnY0gmlwhKwSVEqKbXVsdGlhZGRyc5YACASsElRKBjo7AAoErBJUSgY6PN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDa5gSEzWJwtYbljHUF7MrCDTDjXtskZyS6D5nRd-m3myDdGNwgjo7g3VkcII6PYV3YWt1MgU --filternode=/ip4/172.18.84.74/tcp/14907/p2p/16Uiu2HAmKtzTztyCDnFGotyL9kQah8Py6yHEbpeTpde39ApNBXtf --pubsub-topic=/waku/2/rs/3/1
2025-02-11 09:56:57.004 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.242.2 waku c76483ea754c58b5e42fedd2514549b3be4325304067d382fe9e1a828fa4b05c
2025-02-11 09:56:57.061 DEBUG [src.node.docker_mananger] Container started with ID c76483ea754c. Setting up logs at ./log/docker/node2_2025-02-11_09-56-55__fc85e907-a99e-4213-8298-7dca23679411__wakuorg_go-waku:latest.log
2025-02-11 09:56:57.061 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 37777
2025-02-11 09:56:57.062 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 09:56:58.062 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37777/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:56:58.065 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QK-lsA60QON7mx_w7pj1iRBuHF4o2JCRYh1VH0B7uWzodIY3FVGBIJz7tmV0-YPvbcLrMJD_okpSmVcKi9IxwZ6GAZT0cL5egmlkgnY0gmlwhKwRAAOCcnOFAAMBAAGJc2VjcDI1NmsxoQPRCm2e47paSwokRSD1tgQEg8_4jjRaYYQOzl09072A-YN0Y3CCk5KDdWRwgpOUhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/37778/p2p/16Uiu2HAmSiznKdochXpMeSswHVfWDsv3PoeAQ89m9VNZWqtddqgc","/ip4/127.0.0.1/tcp/37779/ws/p2p/16Uiu2HAmSiznKdochXpMeSswHVfWDsv3PoeAQ89m9VNZWqtddqgc","/ip4/172.17.0.3/tcp/37778/p2p/16Uiu2HAmSiznKdochXpMeSswHVfWDsv3PoeAQ89m9VNZWqtddqgc","/ip4/172.17.0.3/tcp/37779/ws/p2p/16Uiu2HAmSiznKdochXpMeSswHVfWDsv3PoeAQ89m9VNZWqtddqgc"]}'
2025-02-11 09:56:58.065 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 09:56:58.065 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37777/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.84.74/tcp/14907/p2p/16Uiu2HAmKtzTztyCDnFGotyL9kQah8Py6yHEbpeTpde39ApNBXtf", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-11 09:56:58.067 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-11 09:56:58.068 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-11 09:56:58.068 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:14906/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 09:56:58.071 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 09:56:58.071 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37777/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "0820aadb-d2b8-4a76-b3f7-0868cfdb0631", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-11 09:56:58.077 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"0820aadb-d2b8-4a76-b3f7-0868cfdb0631","statusDesc":"OK"}'
2025-02-11 09:56:58.081 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 09:56:58.082 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 09:56:58.082 DEBUG [src.node.waku_node] Stopping container with id 8657d4128bbd
2025-02-11 09:56:58.659 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 09:56:58.661 DEBUG [src.node.waku_node] Stopping container with id c76483ea754c
2025-02-11 09:56:59.492 ERROR [src.node.docker_mananger] Max retries reached for container 8657d4128bbd. Exiting log stream.
2025-02-11 09:56:59.557 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 09:56:59.558 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 09:56:59.566 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 09:56:59.569 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
