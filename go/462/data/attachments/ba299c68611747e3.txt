2025-02-11 09:57:13.683 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 09:57:13.683 DEBUG [tests.conftest] Running test: test_filter_ping_without_request_id with id: 2025-02-11_09-57-13__e5ff5e97-0b9d-4f4f-aec4-cb01af527449
2025-02-11 09:57:13.683 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 09:57:13.684 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-11 09:57:13.684 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-11 09:57:13.690 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 09:57:13.690 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-11_09-57-13__e5ff5e97-0b9d-4f4f-aec4-cb01af527449__wakuorg_nwaku:latest.log
2025-02-11 09:57:13.690 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 09:57:13.690 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 09:57:13.692 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 09:57:13.692 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.54.13
2025-02-11 09:57:13.692 DEBUG [src.node.docker_mananger] Generated ports ['6472', '6473', '6474', '6475', '6476']
2025-02-11 09:57:13.692 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 09:57:13.692 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 09:57:13.693 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 09:57:13.693 DEBUG [src.node.docker_mananger] docker run -i -t -p 6472:6472 -p 6473:6473 -p 6474:6474 -p 6475:6475 -p 6476:6476 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6474 --rest-port=6472 --tcp-port=6473 --discv5-udp-port=6475 --rest-address=0.0.0.0 --nat=extip:172.18.54.13 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ef3d877d4c3d84913cb2e92add0efe0fb3bf67fac737c2f97eb267d7229dfafc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6476 --metrics-logging=true --relay=true --filter=true
2025-02-11 09:57:13.935 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.54.13 waku 74561e8d5c85811bae8134af2c109fbc720de45de220806d4efbef311033b655
2025-02-11 09:57:13.957 ERROR [src.node.docker_mananger] Max retries reached for container e39b2e60ad78. Exiting log stream.
2025-02-11 09:57:13.985 DEBUG [src.node.docker_mananger] Container started with ID 74561e8d5c85. Setting up logs at ./log/docker/node1_2025-02-11_09-57-13__e5ff5e97-0b9d-4f4f-aec4-cb01af527449__wakuorg_nwaku:latest.log
2025-02-11 09:57:13.987 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 6472
2025-02-11 09:57:13.987 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 09:57:14.489 ERROR [src.node.docker_mananger] Max retries reached for container 2a0edb730fcc. Exiting log stream.
2025-02-11 09:57:14.987 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6472/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:57:14.990 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 09:57:14.990 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 09:57:14.991 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6472/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:57:14.993 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.54.13/tcp/6473/p2p/16Uiu2HAm15ADGLUiKFceoKWFyaLkU9utwXCRJTWuuDRjbSKGrUBw","/ip4/172.18.54.13/tcp/6474/ws/p2p/16Uiu2HAm15ADGLUiKFceoKWFyaLkU9utwXCRJTWuuDRjbSKGrUBw"],"enrUri":"enr:-L24QOxCFukV5zQ4bKlv110yf2G88vlm0pdoxNKpSZTuvIDaT6P55_Fz_UDD7LDlZU9jJEmWuZYbWPc8j8o7angwpBYCgmlkgnY0gmlwhKwSNg2KbXVsdGlhZGRyc5YACASsEjYNBhlJAAoErBI2DQYZSt0DgnJzhQADAQAAiXNlY3AyNTZrMaECU-TYzk5AvdBfFegzMeNFSXvpD8pZdsyvLGhRlm1ym16DdGNwghlJg3VkcIIZS4V3YWt1MgU"}'
2025-02-11 09:57:14.993 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 09:57:14.993 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-11 09:57:15.000 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-11 09:57:15.000 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-11_09-57-13__e5ff5e97-0b9d-4f4f-aec4-cb01af527449__wakuorg_go-waku:latest.log
2025-02-11 09:57:15.000 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 09:57:15.000 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 09:57:15.001 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 09:57:15.002 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.107.131
2025-02-11 09:57:15.002 DEBUG [src.node.docker_mananger] Generated ports ['31534', '31535', '31536', '31537', '31538']
2025-02-11 09:57:15.002 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 09:57:15.002 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 09:57:15.002 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 09:57:15.002 DEBUG [src.node.docker_mananger] docker run -i -t -p 31534:31534 -p 31535:31535 -p 31536:31536 -p 31537:31537 -p 31538:31538 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=31536 --rest-port=31534 --tcp-port=31535 --discv5-udp-port=31537 --rest-address=0.0.0.0 --nat=extip:172.18.107.131 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f11945f9a7ebdbba45f9fe77393cee7702a7fdf424de7566d4cbf2a69aa82e85 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-L24QOxCFukV5zQ4bKlv110yf2G88vlm0pdoxNKpSZTuvIDaT6P55_Fz_UDD7LDlZU9jJEmWuZYbWPc8j8o7angwpBYCgmlkgnY0gmlwhKwSNg2KbXVsdGlhZGRyc5YACASsEjYNBhlJAAoErBI2DQYZSt0DgnJzhQADAQAAiXNlY3AyNTZrMaECU-TYzk5AvdBfFegzMeNFSXvpD8pZdsyvLGhRlm1ym16DdGNwghlJg3VkcIIZS4V3YWt1MgU --filternode=/ip4/172.18.54.13/tcp/6473/p2p/16Uiu2HAm15ADGLUiKFceoKWFyaLkU9utwXCRJTWuuDRjbSKGrUBw --pubsub-topic=/waku/2/rs/3/1
2025-02-11 09:57:15.235 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.107.131 waku d99fbcff7ecec13d62c60f5975ecbdcd8c238758bf774c6b4be6c241cc685099
2025-02-11 09:57:15.287 DEBUG [src.node.docker_mananger] Container started with ID d99fbcff7ece. Setting up logs at ./log/docker/node2_2025-02-11_09-57-13__e5ff5e97-0b9d-4f4f-aec4-cb01af527449__wakuorg_go-waku:latest.log
2025-02-11 09:57:15.288 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 31534
2025-02-11 09:57:15.290 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 09:57:16.292 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31534/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:57:16.294 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QJhi0v3XgfxwbOSk3u7fFCUFEh9zYRPdvcefxuulIK4WaYRC_m8EAFsCtb9OBZSDkBcpiYAhd-DVQ1XKUKzmUbCGAZT0cQWSgmlkgnY0gmlwhKwRAAOCcnOFAAMBAAGJc2VjcDI1NmsxoQMjY8-MfypO2OW6zelRwm_CzTx40XsHleTxQ5KkzQg4-YN0Y3CCey-DdWRwgnsxhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/31535/p2p/16Uiu2HAmF38tktE7N62LdiDA8oMvEJi2jE9xBb4dw6rUvY6zG9t4","/ip4/127.0.0.1/tcp/31536/ws/p2p/16Uiu2HAmF38tktE7N62LdiDA8oMvEJi2jE9xBb4dw6rUvY6zG9t4","/ip4/172.17.0.3/tcp/31535/p2p/16Uiu2HAmF38tktE7N62LdiDA8oMvEJi2jE9xBb4dw6rUvY6zG9t4","/ip4/172.17.0.3/tcp/31536/ws/p2p/16Uiu2HAmF38tktE7N62LdiDA8oMvEJi2jE9xBb4dw6rUvY6zG9t4"]}'
2025-02-11 09:57:16.294 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 09:57:16.295 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31534/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.54.13/tcp/6473/p2p/16Uiu2HAm15ADGLUiKFceoKWFyaLkU9utwXCRJTWuuDRjbSKGrUBw", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-11 09:57:16.296 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-11 09:57:16.297 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-11 09:57:16.297 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6472/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 09:57:16.300 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 09:57:16.301 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31534/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "58775148-caf3-41b2-856c-ad3c79720065", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-11 09:57:16.306 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"58775148-caf3-41b2-856c-ad3c79720065","statusDesc":"OK"}'
2025-02-11 09:57:16.308 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31534/filter/v2/subscriptions/" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:57:16.310 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:31534/filter/v2/subscriptions/. Response content: b'{"requestId":"","statusDesc":"bad request id"}'
2025-02-11 09:57:16.313 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 09:57:16.314 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 09:57:16.314 DEBUG [src.node.waku_node] Stopping container with id 74561e8d5c85
2025-02-11 09:57:16.898 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 09:57:16.898 DEBUG [src.node.waku_node] Stopping container with id d99fbcff7ece
2025-02-11 09:57:17.728 ERROR [src.node.docker_mananger] Max retries reached for container 74561e8d5c85. Exiting log stream.
2025-02-11 09:57:17.809 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 09:57:17.810 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 09:57:17.818 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 09:57:17.820 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
