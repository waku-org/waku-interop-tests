2025-02-11 09:59:18.019 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 09:59:18.020 DEBUG [tests.conftest] Running test: test_publish_while_peer_is_paused with id: 2025-02-11_09-59-18__c4791bfd-5042-4b2e-b485-47851157731d
2025-02-11 09:59:18.020 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 09:59:18.020 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-11 09:59:18.021 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2025-02-11 09:59:18.027 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 09:59:18.027 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-11_09-59-18__c4791bfd-5042-4b2e-b485-47851157731d__wakuorg_nwaku:latest.log
2025-02-11 09:59:18.027 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 09:59:18.027 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 09:59:18.028 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 09:59:18.028 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.79.94
2025-02-11 09:59:18.029 DEBUG [src.node.docker_mananger] Generated ports ['38307', '38308', '38309', '38310', '38311']
2025-02-11 09:59:18.029 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 09:59:18.029 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 09:59:18.029 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 09:59:18.029 DEBUG [src.node.docker_mananger] docker run -i -t -p 38307:38307 -p 38308:38308 -p 38309:38309 -p 38310:38310 -p 38311:38311 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=38309 --rest-port=38307 --tcp-port=38308 --discv5-udp-port=38310 --rest-address=0.0.0.0 --nat=extip:172.18.79.94 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ddabf0bbfa4f650ef4be49cbf9ca43cb6dca2b9c5c3a8ccd3f4bdcb68ca595d4 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=38311 --metrics-logging=true --relay=true
2025-02-11 09:59:18.257 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.79.94 waku fea7e82679e54b3f730a29d5ac8f6fdaf3bbea8223fcb4115bf122492acb6599
2025-02-11 09:59:18.311 DEBUG [src.node.docker_mananger] Container started with ID fea7e82679e5. Setting up logs at ./log/docker/node1_2025-02-11_09-59-18__c4791bfd-5042-4b2e-b485-47851157731d__wakuorg_nwaku:latest.log
2025-02-11 09:59:18.311 ERROR [src.node.docker_mananger] Max retries reached for container 2ef00e0aba0a. Exiting log stream.
2025-02-11 09:59:18.312 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 38307
2025-02-11 09:59:18.313 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 09:59:18.831 ERROR [src.node.docker_mananger] Max retries reached for container 10bce9ea7986. Exiting log stream.
2025-02-11 09:59:19.314 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38307/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:59:19.317 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 09:59:19.317 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 09:59:19.317 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38307/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:59:19.319 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.79.94/tcp/38308/p2p/16Uiu2HAm7MydF7qYSn4nYoEmK68t6e15bDoar78Ki4pgFkV6qkxL","/ip4/172.18.79.94/tcp/38309/ws/p2p/16Uiu2HAm7MydF7qYSn4nYoEmK68t6e15bDoar78Ki4pgFkV6qkxL"],"enrUri":"enr:-L24QAytUj20Usd6bf0i5nMOjaqOv9jYeeLSEzuWDt3rjZZYfkKUyw85DGaOVwAdDjfO2IOq4LqlTZ255cqn9RNOwnsCgmlkgnY0gmlwhKwST16KbXVsdGlhZGRyc5YACASsEk9eBpWkAAoErBJPXgaVpd0DgnJzhQADAQAAiXNlY3AyNTZrMaECsVnfN1_FJRTRjQpsbTmZf0qlV2RydZhT3AgeqNCk6KWDdGNwgpWkg3VkcIKVpoV3YWt1MgE"}'
2025-02-11 09:59:19.319 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 09:59:19.326 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-11 09:59:19.326 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-11_09-59-18__c4791bfd-5042-4b2e-b485-47851157731d__wakuorg_go-waku:latest.log
2025-02-11 09:59:19.326 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 09:59:19.326 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 09:59:19.328 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 09:59:19.328 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.5.212
2025-02-11 09:59:19.328 DEBUG [src.node.docker_mananger] Generated ports ['23492', '23493', '23494', '23495', '23496']
2025-02-11 09:59:19.328 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 09:59:19.328 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 09:59:19.328 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 09:59:19.328 DEBUG [src.node.docker_mananger] docker run -i -t -p 23492:23492 -p 23493:23493 -p 23494:23494 -p 23495:23495 -p 23496:23496 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=23494 --rest-port=23492 --tcp-port=23493 --discv5-udp-port=23495 --rest-address=0.0.0.0 --nat=extip:172.18.5.212 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f8a0e2ce83cac6c4f1dd4caef0eeebbad033a167f1dd6e9efa08c6efbdb51bcb --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --discv5-bootstrap-node=enr:-L24QAytUj20Usd6bf0i5nMOjaqOv9jYeeLSEzuWDt3rjZZYfkKUyw85DGaOVwAdDjfO2IOq4LqlTZ255cqn9RNOwnsCgmlkgnY0gmlwhKwST16KbXVsdGlhZGRyc5YACASsEk9eBpWkAAoErBJPXgaVpd0DgnJzhQADAQAAiXNlY3AyNTZrMaECsVnfN1_FJRTRjQpsbTmZf0qlV2RydZhT3AgeqNCk6KWDdGNwgpWkg3VkcIKVpoV3YWt1MgE
2025-02-11 09:59:19.551 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.5.212 waku 4b7da5ad6e4ad5f97e65bd497cb908b89165634a9bb7880be242461fc1fc65c6
2025-02-11 09:59:19.607 DEBUG [src.node.docker_mananger] Container started with ID 4b7da5ad6e4a. Setting up logs at ./log/docker/node2_2025-02-11_09-59-18__c4791bfd-5042-4b2e-b485-47851157731d__wakuorg_go-waku:latest.log
2025-02-11 09:59:19.607 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 23492
2025-02-11 09:59:19.607 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 09:59:20.608 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23492/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:59:20.610 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QHo0jHR8zCnBHtmngy4N0KIMsUtBSNsKV5gGji7ZY0BiKbjkgxEeX3FwQPfgOOjxGyT5DJzi6WI3o96Opbz5XC-GAZT0cusugmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaECJ70tMApoyjP_JJfkQPUPALOGtg9r68hFq4jkEJSLk8WDdGNwglvFg3VkcIJbx4V3YWt1MgE","listenAddresses":["/ip4/127.0.0.1/tcp/23493/p2p/16Uiu2HAkx6oBuepgoyWekX5nejyRcjvvp7Qexg5DeXoC3UBqPce8","/ip4/127.0.0.1/tcp/23494/ws/p2p/16Uiu2HAkx6oBuepgoyWekX5nejyRcjvvp7Qexg5DeXoC3UBqPce8","/ip4/172.17.0.3/tcp/23493/p2p/16Uiu2HAkx6oBuepgoyWekX5nejyRcjvvp7Qexg5DeXoC3UBqPce8","/ip4/172.17.0.3/tcp/23494/ws/p2p/16Uiu2HAkx6oBuepgoyWekX5nejyRcjvvp7Qexg5DeXoC3UBqPce8"]}'
2025-02-11 09:59:20.611 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 09:59:20.611 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23492/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.79.94/tcp/38308/p2p/16Uiu2HAm7MydF7qYSn4nYoEmK68t6e15bDoar78Ki4pgFkV6qkxL", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-11 09:59:20.628 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-11 09:59:20.629 DEBUG [src.steps.relay] Running fixture setup: subscribe_main_relay_nodes
2025-02-11 09:59:20.630 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:38307/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 09:59:20.652 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 09:59:20.653 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23492/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 09:59:20.655 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-11 09:59:20.656 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:38307/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 09:59:20.670 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 09:59:20.670 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 09:59:20.770 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-11 09:59:20.770 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38307/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:59:20.773 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739267960656517888,"ephemeral":false}]'
2025-02-11 09:59:20.775 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-11 09:59:20.775 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23492/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:59:20.776 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-11 09:59:21.777 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:38307/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 09:59:21.782 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 09:59:21.782 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 09:59:21.883 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-11 09:59:21.883 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38307/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:59:21.885 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739267961777632000,"ephemeral":false}]'
2025-02-11 09:59:21.887 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-11 09:59:21.887 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23492/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:59:21.889 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739267961777632000,"ephemeral":false}]'
2025-02-11 09:59:21.890 INFO [src.steps.relay] WARM UP successful!!
2025-02-11 09:59:21.891 DEBUG [src.node.waku_node] Pausing container with id 4b7da5ad6e4a
2025-02-11 09:59:21.900 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:38307/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 09:59:21.905 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 09:59:21.905 DEBUG [src.node.waku_node] Unpause container with id 4b7da5ad6e4a
2025-02-11 09:59:21.913 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23492/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:59:21.915 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739267961891456768,"ephemeral":false}]'
2025-02-11 09:59:21.918 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 09:59:21.919 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 09:59:21.919 DEBUG [src.node.waku_node] Stopping container with id fea7e82679e5
2025-02-11 09:59:22.487 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 09:59:22.487 DEBUG [src.node.waku_node] Stopping container with id 4b7da5ad6e4a
2025-02-11 09:59:23.011 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 09:59:23.013 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 09:59:23.019 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 09:59:23.022 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
