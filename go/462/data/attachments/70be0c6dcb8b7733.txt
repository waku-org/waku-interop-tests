2025-02-11 09:57:46.348 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 09:57:46.349 DEBUG [tests.conftest] Running test: test_relay_unsubscribe_from_non_existing_pubsub_topic with id: 2025-02-11_09-57-46__666ad466-6bf0-429c-9ea7-34759349e8f5
2025-02-11 09:57:46.349 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 09:57:46.349 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-11 09:57:46.350 DEBUG [src.steps.relay] Running fixture setup: setup_main_relay_nodes
2025-02-11 09:57:46.356 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 09:57:46.356 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-11_09-57-46__666ad466-6bf0-429c-9ea7-34759349e8f5__wakuorg_nwaku:latest.log
2025-02-11 09:57:46.356 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 09:57:46.356 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 09:57:46.357 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 09:57:46.358 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.101.193
2025-02-11 09:57:46.358 DEBUG [src.node.docker_mananger] Generated ports ['49425', '49426', '49427', '49428', '49429']
2025-02-11 09:57:46.358 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 09:57:46.358 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 09:57:46.358 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 09:57:46.358 DEBUG [src.node.docker_mananger] docker run -i -t -p 49425:49425 -p 49426:49426 -p 49427:49427 -p 49428:49428 -p 49429:49429 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=49427 --rest-port=49425 --tcp-port=49426 --discv5-udp-port=49428 --rest-address=0.0.0.0 --nat=extip:172.18.101.193 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=edafdd8cb2aff37df15633b4ddb87e27c9eeb3d4bfebcbbf62eea9dbe8ee05be --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=49429 --metrics-logging=true --relay=true
2025-02-11 09:57:46.584 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.101.193 waku 3cb7ef98003eb6e1734901cebaac1411876e98788435a2ed8fe6d2945dfd7271
2025-02-11 09:57:46.631 DEBUG [src.node.docker_mananger] Container started with ID 3cb7ef98003e. Setting up logs at ./log/docker/node1_2025-02-11_09-57-46__666ad466-6bf0-429c-9ea7-34759349e8f5__wakuorg_nwaku:latest.log
2025-02-11 09:57:46.633 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 49425
2025-02-11 09:57:46.633 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 09:57:46.639 ERROR [src.node.docker_mananger] Max retries reached for container a8e311d50379. Exiting log stream.
2025-02-11 09:57:47.130 ERROR [src.node.docker_mananger] Max retries reached for container 15ceccbd846e. Exiting log stream.
2025-02-11 09:57:47.633 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49425/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:57:47.636 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 09:57:47.636 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 09:57:47.636 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49425/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:57:47.638 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.101.193/tcp/49426/p2p/16Uiu2HAkyFMfpF66Hb3xmdT6cWCH2eLP5qTsHR1YbNpyamWPuXuL","/ip4/172.18.101.193/tcp/49427/ws/p2p/16Uiu2HAkyFMfpF66Hb3xmdT6cWCH2eLP5qTsHR1YbNpyamWPuXuL"],"enrUri":"enr:-L24QCil3WrexTWoRzQnDReFqJJThtwl_fg0f5t1D5G98fmEATB13v-Hstqaq2bSyPKHGJdiBmSQQ8e-2LmOMV0P6BECgmlkgnY0gmlwhKwSZcGKbXVsdGlhZGRyc5YACASsEmXBBsESAAoErBJlwQbBE90DgnJzhQADAQAAiXNlY3AyNTZrMaECOMo8iSApEmsLWsYiCbD4wyZWNwezRMfUILDIAiEVODODdGNwgsESg3VkcILBFIV3YWt1MgE"}'
2025-02-11 09:57:47.639 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 09:57:47.645 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-11 09:57:47.645 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-11_09-57-46__666ad466-6bf0-429c-9ea7-34759349e8f5__wakuorg_go-waku:latest.log
2025-02-11 09:57:47.645 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 09:57:47.645 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 09:57:47.647 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 09:57:47.647 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.133.98
2025-02-11 09:57:47.647 DEBUG [src.node.docker_mananger] Generated ports ['27197', '27198', '27199', '27200', '27201']
2025-02-11 09:57:47.647 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 09:57:47.647 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 09:57:47.648 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 09:57:47.648 DEBUG [src.node.docker_mananger] docker run -i -t -p 27197:27197 -p 27198:27198 -p 27199:27199 -p 27200:27200 -p 27201:27201 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=27199 --rest-port=27197 --tcp-port=27198 --discv5-udp-port=27200 --rest-address=0.0.0.0 --nat=extip:172.18.133.98 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0e6c0fa4bd38aa4ade1b568ada108b75bd7b9ee5c13a7bb5478ab32edab0eefc --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true --discv5-bootstrap-node=enr:-L24QCil3WrexTWoRzQnDReFqJJThtwl_fg0f5t1D5G98fmEATB13v-Hstqaq2bSyPKHGJdiBmSQQ8e-2LmOMV0P6BECgmlkgnY0gmlwhKwSZcGKbXVsdGlhZGRyc5YACASsEmXBBsESAAoErBJlwQbBE90DgnJzhQADAQAAiXNlY3AyNTZrMaECOMo8iSApEmsLWsYiCbD4wyZWNwezRMfUILDIAiEVODODdGNwgsESg3VkcILBFIV3YWt1MgE
2025-02-11 09:57:47.872 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.133.98 waku eb989d7e7b79d1b0e6983f60ce7a666c0273b8b6cbaf74b0fea3a3949c98f791
2025-02-11 09:57:47.926 DEBUG [src.node.docker_mananger] Container started with ID eb989d7e7b79. Setting up logs at ./log/docker/node2_2025-02-11_09-57-46__666ad466-6bf0-429c-9ea7-34759349e8f5__wakuorg_go-waku:latest.log
2025-02-11 09:57:47.926 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 27197
2025-02-11 09:57:47.927 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 09:57:48.928 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27197/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:57:48.931 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QEq3Kpoz3RAc2GjZskgr9ZM2MOU0q2UhkKwQ1Yu6adzBU9PM7sUmPBKGzPrq-bkJEg2_mWJUoWJl4YflyL_-5OKGAZT0cYUNgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaEDCBXq3pNDFjgq3RummCKV1Q5saUqQXIo3IJnRBjRFi86DdGNwgmo-g3VkcIJqQIV3YWt1MgE","listenAddresses":["/ip4/127.0.0.1/tcp/27198/p2p/16Uiu2HAmDCYzjCxrN8vPRhR6na7KeRW2cPCuYKg2oRQzqX6VRxgV","/ip4/127.0.0.1/tcp/27199/ws/p2p/16Uiu2HAmDCYzjCxrN8vPRhR6na7KeRW2cPCuYKg2oRQzqX6VRxgV","/ip4/172.17.0.3/tcp/27198/p2p/16Uiu2HAmDCYzjCxrN8vPRhR6na7KeRW2cPCuYKg2oRQzqX6VRxgV","/ip4/172.17.0.3/tcp/27199/ws/p2p/16Uiu2HAmDCYzjCxrN8vPRhR6na7KeRW2cPCuYKg2oRQzqX6VRxgV"]}'
2025-02-11 09:57:48.931 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 09:57:48.931 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27197/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.101.193/tcp/49426/p2p/16Uiu2HAkyFMfpF66Hb3xmdT6cWCH2eLP5qTsHR1YbNpyamWPuXuL", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-11 09:57:48.947 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-11 09:57:48.950 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49425/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 09:57:48.972 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 09:57:48.972 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:27197/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-11 09:57:48.974 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-11 09:57:48.975 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49425/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 09:57:48.980 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 09:57:48.981 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 09:57:49.082 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-11 09:57:49.082 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49425/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:57:49.085 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739267868975454208,"ephemeral":false}]'
2025-02-11 09:57:49.087 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-11 09:57:49.087 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27197/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:57:49.089 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-11 09:57:50.090 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49425/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 09:57:50.095 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 09:57:50.095 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 09:57:50.195 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-11 09:57:50.196 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49425/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:57:50.198 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739267870089775104,"ephemeral":false}]'
2025-02-11 09:57:50.199 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-11 09:57:50.200 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27197/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:57:50.201 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739267870089775104,"ephemeral":false}]'
2025-02-11 09:57:50.203 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:49425/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1000"]'
2025-02-11 09:57:50.205 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 09:57:50.205 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:27197/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1000"]'
2025-02-11 09:57:50.207 ERROR [src.node.api_clients.base_client] HTTP error occurred: 500 Server Error: Internal Server Error for url: http://127.0.0.1:27197/relay/v1/subscriptions. Response content: b''
2025-02-11 09:57:50.208 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49425/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 09:57:50.212 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 09:57:50.212 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-11 09:57:50.312 DEBUG [src.steps.relay] Checking that peer NODE_1:wakuorg/nwaku:latest can find the published message
2025-02-11 09:57:50.313 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49425/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:57:50.315 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739267870208414976,"ephemeral":false}]'
2025-02-11 09:57:50.317 DEBUG [src.steps.relay] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-11 09:57:50.317 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:27197/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:57:50.318 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739267870208414976,"ephemeral":false}]'
2025-02-11 09:57:50.321 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 09:57:50.322 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 09:57:50.322 DEBUG [src.node.waku_node] Stopping container with id 3cb7ef98003e
2025-02-11 09:57:50.884 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 09:57:50.884 DEBUG [src.node.waku_node] Stopping container with id eb989d7e7b79
2025-02-11 09:57:51.379 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 09:57:51.381 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 09:57:51.388 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 09:57:51.392 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
