2025-02-11 09:59:04.045 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-11 09:59:04.046 DEBUG [tests.conftest] Running test: test_publishing_node_paused_and_unpaused with id: 2025-02-11_09-59-04__b285b78a-6ac5-4e83-a9da-d355fb7c7ca2
2025-02-11 09:59:04.046 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-11 09:59:04.047 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-11 09:59:04.047 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-11 09:59:04.055 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-11 09:59:04.055 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-11_09-59-04__b285b78a-6ac5-4e83-a9da-d355fb7c7ca2__wakuorg_nwaku:latest.log
2025-02-11 09:59:04.055 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 09:59:04.055 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 09:59:04.057 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 09:59:04.057 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.84.164
2025-02-11 09:59:04.057 DEBUG [src.node.docker_mananger] Generated ports ['28950', '28951', '28952', '28953', '28954']
2025-02-11 09:59:04.057 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 09:59:04.057 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 09:59:04.057 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 09:59:04.057 DEBUG [src.node.docker_mananger] docker run -i -t -p 28950:28950 -p 28951:28951 -p 28952:28952 -p 28953:28953 -p 28954:28954 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=28952 --rest-port=28950 --tcp-port=28951 --discv5-udp-port=28953 --rest-address=0.0.0.0 --nat=extip:172.18.84.164 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c7a1e8e6a6e58dbfe63976a293878bdcbebb963ac00fbcf3e10ffb16290def6c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=28954 --metrics-logging=true --store=true --relay=true
2025-02-11 09:59:04.291 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.84.164 waku a901bead8e42f6c395b26c753c6f1505e350d440077a91f4eda688e04bdc0908
2025-02-11 09:59:04.323 ERROR [src.node.docker_mananger] Max retries reached for container bd94fb2f2a97. Exiting log stream.
2025-02-11 09:59:04.343 DEBUG [src.node.docker_mananger] Container started with ID a901bead8e42. Setting up logs at ./log/docker/publishing_node1_2025-02-11_09-59-04__b285b78a-6ac5-4e83-a9da-d355fb7c7ca2__wakuorg_nwaku:latest.log
2025-02-11 09:59:04.344 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 28950
2025-02-11 09:59:04.344 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 09:59:04.862 ERROR [src.node.docker_mananger] Max retries reached for container 4ffa44bd7af2. Exiting log stream.
2025-02-11 09:59:05.345 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28950/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:59:05.350 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 09:59:05.350 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 09:59:05.351 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28950/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:59:05.354 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.84.164/tcp/28951/p2p/16Uiu2HAm5Y3bDUb6UtD68Y9VyKBz7gaHKHDDWrQvVGAhZ8t7V41Y","/ip4/172.18.84.164/tcp/28952/ws/p2p/16Uiu2HAm5Y3bDUb6UtD68Y9VyKBz7gaHKHDDWrQvVGAhZ8t7V41Y"],"enrUri":"enr:-L24QEa7tBsFQL7hhBxdnutTtSwGPUkys2hVtUPIc8OMz-0rbv0t4fmIycR1rRnGlXHfss1aTlwEkZLAbQlaeqRnLp8CgmlkgnY0gmlwhKwSVKSKbXVsdGlhZGRyc5YACASsElSkBnEXAAoErBJUpAZxGN0DgnJzhQADAQAAiXNlY3AyNTZrMaECljbKGVsA0tYbzP7MT_LDSgVgfarpn6mp7FnODE6ieuuDdGNwgnEXg3VkcIJxGYV3YWt1MgM"}'
2025-02-11 09:59:05.354 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 09:59:05.361 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-11 09:59:05.361 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-11_09-59-04__b285b78a-6ac5-4e83-a9da-d355fb7c7ca2__wakuorg_go-waku:latest.log
2025-02-11 09:59:05.361 DEBUG [src.node.waku_node] Starting Node...
2025-02-11 09:59:05.361 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-11 09:59:05.363 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-11 09:59:05.363 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.215.125
2025-02-11 09:59:05.363 DEBUG [src.node.docker_mananger] Generated ports ['36417', '36418', '36419', '36420', '36421']
2025-02-11 09:59:05.363 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-11 09:59:05.363 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-11 09:59:05.363 DEBUG [src.node.waku_node] Using volumes []
2025-02-11 09:59:05.364 DEBUG [src.node.docker_mananger] docker run -i -t -p 36417:36417 -p 36418:36418 -p 36419:36419 -p 36420:36420 -p 36421:36421 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=36419 --rest-port=36417 --tcp-port=36418 --discv5-udp-port=36420 --rest-address=0.0.0.0 --nat=extip:172.18.215.125 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eb48eae5fdbc18d6f32d9c6042a515e6bc9bca65db9ccebadb9b0cf5fa6bec32 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QEa7tBsFQL7hhBxdnutTtSwGPUkys2hVtUPIc8OMz-0rbv0t4fmIycR1rRnGlXHfss1aTlwEkZLAbQlaeqRnLp8CgmlkgnY0gmlwhKwSVKSKbXVsdGlhZGRyc5YACASsElSkBnEXAAoErBJUpAZxGN0DgnJzhQADAQAAiXNlY3AyNTZrMaECljbKGVsA0tYbzP7MT_LDSgVgfarpn6mp7FnODE6ieuuDdGNwgnEXg3VkcIJxGYV3YWt1MgM --storenode=/ip4/172.18.84.164/tcp/28951/p2p/16Uiu2HAm5Y3bDUb6UtD68Y9VyKBz7gaHKHDDWrQvVGAhZ8t7V41Y --store=true --relay=true
2025-02-11 09:59:05.611 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.215.125 waku 932ea29400dba446920f934e2a4b7d9780937f2f0a8a9f229afd41bbfa6f8a45
2025-02-11 09:59:05.665 DEBUG [src.node.docker_mananger] Container started with ID 932ea29400db. Setting up logs at ./log/docker/store_node1_2025-02-11_09-59-04__b285b78a-6ac5-4e83-a9da-d355fb7c7ca2__wakuorg_go-waku:latest.log
2025-02-11 09:59:05.667 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 36417
2025-02-11 09:59:05.667 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 09:59:06.668 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36417/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:59:06.670 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QJPr8JLxgEevnKlKwfhHz5cdnQLr2ViHmYeRGXVVflHuDPziKXGsYSn0Y9m5oJxNQw0_fUZhXEqfFgvN0opXGyuGAZT0crTBgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaECaFHKS9Md9HuvkByP4szCNBizqulGWMME1ei6w65IxXuDdGNwgo5Cg3VkcIKORIV3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/36418/p2p/16Uiu2HAm2StiVjEFmbQ9tfDGMQ4W6krK7qPX3F3HKPipDV6o4bQ6","/ip4/127.0.0.1/tcp/36419/ws/p2p/16Uiu2HAm2StiVjEFmbQ9tfDGMQ4W6krK7qPX3F3HKPipDV6o4bQ6","/ip4/172.17.0.3/tcp/36418/p2p/16Uiu2HAm2StiVjEFmbQ9tfDGMQ4W6krK7qPX3F3HKPipDV6o4bQ6","/ip4/172.17.0.3/tcp/36419/ws/p2p/16Uiu2HAm2StiVjEFmbQ9tfDGMQ4W6krK7qPX3F3HKPipDV6o4bQ6"]}'
2025-02-11 09:59:06.671 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 09:59:06.671 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36417/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.84.164/tcp/28951/p2p/16Uiu2HAm5Y3bDUb6UtD68Y9VyKBz7gaHKHDDWrQvVGAhZ8t7V41Y", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-11 09:59:06.688 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-11 09:59:06.690 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28950/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 09:59:06.711 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 09:59:06.712 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36417/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-11 09:59:06.714 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-11 09:59:06.718 DEBUG [src.steps.store] Relaying message
2025-02-11 09:59:06.718 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28950/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 09:59:06.733 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 09:59:06.733 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 09:59:06.935 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-11 09:59:06.935 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28950/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:59:06.939 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x1a410e702bddd3db34b41d971c8441b1d5eb030f4cdd149729188190c73a16ff"}]}'
2025-02-11 09:59:06.939 DEBUG [src.steps.store] Checking that peer wakuorg/go-waku:latest can find the stored messages
2025-02-11 09:59:06.940 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36417/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:59:06.945 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"c7f4b589556e7eace002920704a539a3d5939b5b50be1b8b43da2affd64d5ca8","status_code":200,"status_desc":"OK","messages":[{"message_hash":"GkEOcCvd09s0tB2XHIRBsdXrAw9M3RSXKRiBkMc6Fv8="}]}'
2025-02-11 09:59:06.946 DEBUG [src.node.waku_node] Pausing container with id a901bead8e42
2025-02-11 09:59:06.955 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-11 09:59:07.956 DEBUG [src.node.waku_node] Unpause container with id a901bead8e42
2025-02-11 09:59:07.965 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28950/health" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:59:07.968 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-11 09:59:07.968 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-11 09:59:07.968 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28950/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:59:07.970 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.84.164/tcp/28951/p2p/16Uiu2HAm5Y3bDUb6UtD68Y9VyKBz7gaHKHDDWrQvVGAhZ8t7V41Y","/ip4/172.18.84.164/tcp/28952/ws/p2p/16Uiu2HAm5Y3bDUb6UtD68Y9VyKBz7gaHKHDDWrQvVGAhZ8t7V41Y"],"enrUri":"enr:-L24QEa7tBsFQL7hhBxdnutTtSwGPUkys2hVtUPIc8OMz-0rbv0t4fmIycR1rRnGlXHfss1aTlwEkZLAbQlaeqRnLp8CgmlkgnY0gmlwhKwSVKSKbXVsdGlhZGRyc5YACASsElSkBnEXAAoErBJUpAZxGN0DgnJzhQADAQAAiXNlY3AyNTZrMaECljbKGVsA0tYbzP7MT_LDSgVgfarpn6mp7FnODE6ieuuDdGNwgnEXg3VkcIJxGYV3YWt1MgM"}'
2025-02-11 09:59:07.970 INFO [src.node.waku_node] REST service is ready !!
2025-02-11 09:59:07.971 DEBUG [src.steps.store] Relaying message
2025-02-11 09:59:07.971 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:28950/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-11 09:59:07.976 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-11 09:59:07.976 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-11 09:59:08.177 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-11 09:59:08.177 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28950/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:59:08.180 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x1a410e702bddd3db34b41d971c8441b1d5eb030f4cdd149729188190c73a16ff"},{"messageHash":"0x21aca66797ffa8b0291241532148f733406dea1a662ba648d6210330e0abd787"}]}'
2025-02-11 09:59:08.181 DEBUG [src.steps.store] Checking that peer wakuorg/go-waku:latest can find the stored messages
2025-02-11 09:59:08.181 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36417/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:59:08.186 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"04641e07a7bb13d7e322d8978bab98f4346da5aded16b1cedd8204bed68b42b7","status_code":200,"status_desc":"OK","messages":[{"message_hash":"GkEOcCvd09s0tB2XHIRBsdXrAw9M3RSXKRiBkMc6Fv8="},{"message_hash":"IaymZ5f/qLApEkFTIUj3M0Bt6hpmK6ZI1iEDMOCr14c="}]}'
2025-02-11 09:59:08.187 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:28950/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:59:08.190 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x1a410e702bddd3db34b41d971c8441b1d5eb030f4cdd149729188190c73a16ff"},{"messageHash":"0x21aca66797ffa8b0291241532148f733406dea1a662ba648d6210330e0abd787"}]}'
2025-02-11 09:59:08.190 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36417/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-11 09:59:08.312 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"283d71eef6354f2eb8f4afebded477123952acac341a286d793a6e26cc650a7e","status_code":200,"status_desc":"OK","messages":[{"message_hash":"GkEOcCvd09s0tB2XHIRBsdXrAw9M3RSXKRiBkMc6Fv8="},{"message_hash":"IaymZ5f/qLApEkFTIUj3M0Bt6hpmK6ZI1iEDMOCr14c="}]}'
2025-02-11 09:59:08.314 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-11 09:59:08.315 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-11 09:59:08.315 DEBUG [src.node.waku_node] Stopping container with id a901bead8e42
2025-02-11 09:59:08.867 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 09:59:08.868 DEBUG [src.node.waku_node] Stopping container with id 932ea29400db
2025-02-11 09:59:09.378 DEBUG [src.node.waku_node] Container stopped.
2025-02-11 09:59:09.380 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-11 09:59:09.388 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-11 09:59:09.391 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
