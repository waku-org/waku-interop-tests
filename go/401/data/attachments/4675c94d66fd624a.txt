[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_node_not_connected_directly_to_relaying_node with id: 2024-12-21_03-04-49__afea091f-956a-46a0-ac79-0216ecb73c3b
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-12-21_03-04-49__afea091f-956a-46a0-ac79-0216ecb73c3b__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-12-21_03-04-49__afea091f-956a-46a0-ac79-0216ecb73c3b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-12-21_03-04-49__afea091f-956a-46a0-ac79-0216ecb73c3b__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.120.9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['16077', '16078', '16079', '16080', '16081']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 16077:16077 -p 16078:16078 -p 16079:16079 -p 16080:16080 -p 16081:16081 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=16079 --rest-port=16077 --tcp-port=16078 --discv5-udp-port=16080 --rest-address=0.0.0.0 --nat=extip:172.18.120.9 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fabd2892d00fb5d1ad3da8caae98cfeef244b95aa5fc0ccaea14f91c2bef14ea --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.120.9 waku b3e06b75a9ebe56eee954a459f76bce4e295988ff324ff4738ff24e5cd9378f0
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID b3e06b75a9eb. Setting up logs at ./log/docker/node1_2024-12-21_03-04-49__afea091f-956a-46a0-ac79-0216ecb73c3b__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 16077
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16077/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QIdVTPpMZzB-C2ajsNc0Aqu2g2DmsarCSmUAImauaPSgYxui4LYVcNW2yTjH6FbwMR6foFAvs4McNcO--xNfXJaGAZPnLMnOgmlkgnY0gmlwhKwRAAWCcnODAAMAiXNlY3AyNTZrMaECuguFdhE7npP0Z4sB8GXam4TRlf0nm6i-Qmq-3hRn8EKDdGNwgj7Og3VkcII-0IV3YWt1MgE","listenAddresses":["/ip4/127.0.0.1/tcp/16078/p2p/16Uiu2HAm7wv12fEfdCEHPtZGRVbKPojeiyaAb2FNSEuzf4aQzxSd","/ip4/127.0.0.1/tcp/16079/ws/p2p/16Uiu2HAm7wv12fEfdCEHPtZGRVbKPojeiyaAb2FNSEuzf4aQzxSd","/ip4/172.17.0.5/tcp/16078/p2p/16Uiu2HAm7wv12fEfdCEHPtZGRVbKPojeiyaAb2FNSEuzf4aQzxSd","/ip4/172.17.0.5/tcp/16079/ws/p2p/16Uiu2HAm7wv12fEfdCEHPtZGRVbKPojeiyaAb2FNSEuzf4aQzxSd"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.3.120
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['9272', '9273', '9274', '9275', '9276']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 9272:9272 -p 9273:9273 -p 9274:9274 -p 9275:9275 -p 9276:9276 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=9274 --rest-port=9272 --tcp-port=9273 --discv5-udp-port=9275 --rest-address=0.0.0.0 --nat=extip:172.18.3.120 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=3cbbbf04acd8eb6bccdc7cb7bc42d1947c7b51ecc31dfee8ccbdc826ec19b8de --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=9276 --metrics-logging=true --store=true --relay=true --discv5-bootstrap-node=enr:-J-4QIdVTPpMZzB-C2ajsNc0Aqu2g2DmsarCSmUAImauaPSgYxui4LYVcNW2yTjH6FbwMR6foFAvs4McNcO--xNfXJaGAZPnLMnOgmlkgnY0gmlwhKwRAAWCcnODAAMAiXNlY3AyNTZrMaECuguFdhE7npP0Z4sB8GXam4TRlf0nm6i-Qmq-3hRn8EKDdGNwgj7Og3VkcII-0IV3YWt1MgE
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.3.120 waku cb2f179f3c9ff15af0cfb90a3c74b83664fc59a6c2ad3f0342822943a73b0bab
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID cb2f179f3c9f. Setting up logs at ./log/docker/node2_2024-12-21_03-04-49__afea091f-956a-46a0-ac79-0216ecb73c3b__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 9272
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9272/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9272/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.3.120/tcp/9273/p2p/16Uiu2HAky2ud1AePzcWFw87Mxsy1tejX3XbSqR66wqd2fcSoCy9c","/ip4/172.18.3.120/tcp/9274/ws/p2p/16Uiu2HAky2ud1AePzcWFw87Mxsy1tejX3XbSqR66wqd2fcSoCy9c"],"enrUri":"enr:-L24QG-yNMG1YHofa9w3qQ6m6S78hKsTYhcFoPMAj_sQZek7SDvIN6Daiuyi1K3QAtwX7Y3VX0xLQfsvZXc9NPWCIRUCgmlkgnY0gmlwhKwSA3iKbXVsdGlhZGRyc5YACASsEgN4BiQ5AAoErBIDeAYkOt0DgnJzhQADAQAAiXNlY3AyNTZrMaECNZnQS3lCOy6f80YNoQ8vhjwrXShmz4sauHmrdRDS6cuDdGNwgiQ5g3VkcIIkO4V3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.198.34
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['64827', '64828', '64829', '64830', '64831']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 64827:64827 -p 64828:64828 -p 64829:64829 -p 64830:64830 -p 64831:64831 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=64829 --rest-port=64827 --tcp-port=64828 --discv5-udp-port=64830 --rest-address=0.0.0.0 --nat=extip:172.18.198.34 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cc641b159cb4adb8b9e65b5942050e8d9f0ecaa8dbe0ca9b7d83b3158eaeda82 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --storenode=/ip4/172.18.3.120/tcp/9273/p2p/16Uiu2HAky2ud1AePzcWFw87Mxsy1tejX3XbSqR66wqd2fcSoCy9c --discv5-bootstrap-node=enr:-L24QG-yNMG1YHofa9w3qQ6m6S78hKsTYhcFoPMAj_sQZek7SDvIN6Daiuyi1K3QAtwX7Y3VX0xLQfsvZXc9NPWCIRUCgmlkgnY0gmlwhKwSA3iKbXVsdGlhZGRyc5YACASsEgN4BiQ5AAoErBIDeAYkOt0DgnJzhQADAQAAiXNlY3AyNTZrMaECNZnQS3lCOy6f80YNoQ8vhjwrXShmz4sauHmrdRDS6cuDdGNwgiQ5g3VkcIIkO4V3YWt1MgM --pubsub-topic=/waku/2/rs/3/1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.198.34 waku 0cbac77594bd5159a52d8a991a636d15d2f93d1557a3d53aca7ca9017f976a92
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 0cbac77594bd. Setting up logs at ./log/docker/node3_2024-12-21_03-04-49__afea091f-956a-46a0-ac79-0216ecb73c3b__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 64827
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64827/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QPsOB88xlb1M_rAD2u6yGIAP8ia0kdSTV0GNXxSX710PJmMRpjsmsmiLUe2sOS6TLfk_cdTHi9fSkGR6Dys4lRSGAZPnLNTigmlkgnY0gmlwhKwRAAqCcnOFAAMBAAGJc2VjcDI1NmsxoQIM_LeMIQ7Fz2I9-pBWMDGcGIUESXsVg61tLilkPTreaoN0Y3CC_TyDdWRwgv0-hXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/64828/p2p/16Uiu2HAkvJNNnyusSLSBuur8diR5GD5sGUMYLvuUC8LHUKEFbWmF","/ip4/127.0.0.1/tcp/64829/ws/p2p/16Uiu2HAkvJNNnyusSLSBuur8diR5GD5sGUMYLvuUC8LHUKEFbWmF","/ip4/172.17.0.10/tcp/64828/p2p/16Uiu2HAkvJNNnyusSLSBuur8diR5GD5sGUMYLvuUC8LHUKEFbWmF","/ip4/172.17.0.10/tcp/64829/ws/p2p/16Uiu2HAkvJNNnyusSLSBuur8diR5GD5sGUMYLvuUC8LHUKEFbWmF"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16077/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9272/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16077/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAky2ud1AePzcWFw87Mxsy1tejX3XbSqR66wqd2fcSoCy9c","multiaddrs":["/ip4/172.18.3.120/tcp/9273/p2p/16Uiu2HAky2ud1AePzcWFw87Mxsy1tejX3XbSqR66wqd2fcSoCy9c","/ip4/172.18.3.120/tcp/9274/ws/p2p/16Uiu2HAky2ud1AePzcWFw87Mxsy1tejX3XbSqR66wqd2fcSoCy9c"],"protocols":null,"connected":false,"pubsubTopics":[]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9272/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.10/tcp/64828/p2p/16Uiu2HAkvJNNnyusSLSBuur8diR5GD5sGUMYLvuUC8LHUKEFbWmF","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16077/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/go-waku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64827/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-filter%2Fproto&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"bef127134f45fd4c1442ec47b2c7430a44d6df8ecd4763920bcc2ba4026820a7","status_code":200,"status_desc":"OK","messages":[{"message_hash":"gEbuDON9CrmhI2AnO32Rfsb4nPLa9YMhOQwLdg5kuvw="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id b3e06b75a9eb
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id cb2f179f3c9f
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container b3e06b75a9eb. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 0cbac77594bd
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container cb2f179f3c9f. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.