[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_light_push_with_valid_meta with id: 2024-12-21_03-12-31__9b273105-705f-48af-94aa-31d0e3f71470
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-12-21_03-12-31__9b273105-705f-48af-94aa-31d0e3f71470__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.130.215
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['42994', '42995', '42996', '42997', '42998']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 42994:42994 -p 42995:42995 -p 42996:42996 -p 42997:42997 -p 42998:42998 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42996 --rest-port=42994 --tcp-port=42995 --discv5-udp-port=42997 --rest-address=0.0.0.0 --nat=extip:172.18.130.215 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=adb0c472b1b7d40fc5d7b16a6f45a616888fc7aad23c0aff13baebcadb0fd00b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42998 --metrics-logging=true --lightpush=true --relay=true
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container e50cd7e4937c. Exiting log stream.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.130.215 waku 939c54d5b8cb23dabccbdbd7da4b8f5d8bdd3f9d505aa1c244ea5a0e098a1669
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 939c54d5b8cb. Setting up logs at ./log/docker/receiving_node1_2024-12-21_03-12-31__9b273105-705f-48af-94aa-31d0e3f71470__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 42994
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container f5c3400b3e9a. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42994/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42994/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.130.215/tcp/42995/p2p/16Uiu2HAmCVGnj6XW7ehFSj49jhpZVoiDVZopHq1a74fPa9p6VzeJ","/ip4/172.18.130.215/tcp/42996/ws/p2p/16Uiu2HAmCVGnj6XW7ehFSj49jhpZVoiDVZopHq1a74fPa9p6VzeJ"],"enrUri":"enr:-L24QFeC2tpBKxgJMEGf60cNw8yOKG9qbxHQCXiEfPZI-6aXFxjauislS269aM38Oqu4KDJ4kwMuBchCXXsYpprwYkMCgmlkgnY0gmlwhKwSgteKbXVsdGlhZGRyc5YACASsEoLXBqfzAAoErBKC1wan9N0DgnJzhQADAQAAiXNlY3AyNTZrMaEC_YLHcARh2FTEdKE8HoRz29Tv-JCEDihCvovpti_VlgeDdGNwgqfzg3VkcIKn9YV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-12-21_03-12-31__9b273105-705f-48af-94aa-31d0e3f71470__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.242.164
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['56248', '56249', '56250', '56251', '56252']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 56248:56248 -p 56249:56249 -p 56250:56250 -p 56251:56251 -p 56252:56252 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=56250 --rest-port=56248 --tcp-port=56249 --discv5-udp-port=56251 --rest-address=0.0.0.0 --nat=extip:172.18.242.164 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=83ab31b9bdc9d8592f9c853cb6022de73d555933aa4b05c5fdcfcad3a0275916 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=56252 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.242.164 waku 43ec981e87710a0f54988080670d0e1e352b84ec831e9677ad65cd98ad4a9741
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 43ec981e8771. Setting up logs at ./log/docker/receiving_node2_2024-12-21_03-12-31__9b273105-705f-48af-94aa-31d0e3f71470__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 56248
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56248/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56248/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.242.164/tcp/56249/p2p/16Uiu2HAmMvidnEdsqm2bynkwbLJQh3rFPdQHndASygPwX1zfpvSi","/ip4/172.18.242.164/tcp/56250/ws/p2p/16Uiu2HAmMvidnEdsqm2bynkwbLJQh3rFPdQHndASygPwX1zfpvSi"],"enrUri":"enr:-L24QAEBiU_8nagtt8KInHtRlboYTcgUM9_JnwCM9vxfWX_6Z_PPcPXfn6U2k7u9ZqYqyQJCdfnaJopUCBlcBpEbkqgCgmlkgnY0gmlwhKwS8qSKbXVsdGlhZGRyc5YACASsEvKkBtu5AAoErBLypAbbut0DgnJzhQADAQAAiXNlY3AyNTZrMaEDicC0nHEc5wKgZVyev0b8HP0Ghn_AjlfIPr3amGAdJZ-DdGNwgtu5g3VkcILbu4V3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56248/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.130.215/tcp/42995/p2p/16Uiu2HAmCVGnj6XW7ehFSj49jhpZVoiDVZopHq1a74fPa9p6VzeJ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-12-21_03-12-31__9b273105-705f-48af-94aa-31d0e3f71470__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.67.48
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['63272', '63273', '63274', '63275', '63276']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 63272:63272 -p 63273:63273 -p 63274:63274 -p 63275:63275 -p 63276:63276 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=63274 --rest-port=63272 --tcp-port=63273 --discv5-udp-port=63275 --rest-address=0.0.0.0 --nat=extip:172.18.67.48 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a2fe1be59aba7a4c6ed6b3d723e7afcaeb6bdaea5c97fc1c3e7235022bc9dabd --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QFeC2tpBKxgJMEGf60cNw8yOKG9qbxHQCXiEfPZI-6aXFxjauislS269aM38Oqu4KDJ4kwMuBchCXXsYpprwYkMCgmlkgnY0gmlwhKwSgteKbXVsdGlhZGRyc5YACASsEoLXBqfzAAoErBKC1wan9N0DgnJzhQADAQAAiXNlY3AyNTZrMaEC_YLHcARh2FTEdKE8HoRz29Tv-JCEDihCvovpti_VlgeDdGNwgqfzg3VkcIKn9YV3YWt1Mgk --lightpushnode=/ip4/172.18.130.215/tcp/42995/p2p/16Uiu2HAmCVGnj6XW7ehFSj49jhpZVoiDVZopHq1a74fPa9p6VzeJ --lightpush=true --relay=false --pubsub-topic=/waku/2/rs/3/1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.67.48 waku c399273a125850283e354dd7a77bf168e38a008553e2886aa81450a8ce8db5f9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID c399273a1258. Setting up logs at ./log/docker/lightpush_node1_2024-12-21_03-12-31__9b273105-705f-48af-94aa-31d0e3f71470__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 63272
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63272/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QKhgal1ndMXbySvobhtczNPXQIjWYdGIOCU-3IG3ZMn4b6qGDFHR6ntoaYjLfbqVhgbcTwH7VvCbvahGGr73aymGAZPnM9kdgmlkgnY0gmlwhKwRAAKCcnOFAAMBAAGJc2VjcDI1NmsxoQL6mXibWxuL2HeYAQgIVcafGjX2z86O5CohWiKrJuoTXIN0Y3CC9ymDdWRwgvcrhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/63273/p2p/16Uiu2HAmCHudnf6KJeRp8Q9tVEE1JDoEMEqt5vNWcbxo5N9UX9oq","/ip4/127.0.0.1/tcp/63274/ws/p2p/16Uiu2HAmCHudnf6KJeRp8Q9tVEE1JDoEMEqt5vNWcbxo5N9UX9oq","/ip4/172.17.0.2/tcp/63273/p2p/16Uiu2HAmCHudnf6KJeRp8Q9tVEE1JDoEMEqt5vNWcbxo5N9UX9oq","/ip4/172.17.0.2/tcp/63274/ws/p2p/16Uiu2HAmCHudnf6KJeRp8Q9tVEE1JDoEMEqt5vNWcbxo5N9UX9oq"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63272/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.130.215/tcp/42995/p2p/16Uiu2HAmCVGnj6XW7ehFSj49jhpZVoiDVZopHq1a74fPa9p6VzeJ", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63272/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.242.164/tcp/56249/p2p/16Uiu2HAmMvidnEdsqm2bynkwbLJQh3rFPdQHndASygPwX1zfpvSi", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:42994/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:56248/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:121 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63272/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1734750756164737792, "meta": "TGlnaHQgcHVzaCB3b3JrcyEh"}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42994/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1734750756164737792,"meta":"TGlnaHQgcHVzaCB3b3JrcyEh","ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:125 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:56248/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1734750756164737792,"meta":"TGlnaHQgcHVzaCB3b3JrcyEh","ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 939c54d5b8cb
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 43ec981e8771
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 939c54d5b8cb. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id c399273a1258
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 43ec981e8771. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.