[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_store_node_not_connected_directly_to_lightpushing_node with id: 2024-09-25_03-19-38__7e8d08a4-07aa-499a-a6fb-98bd1d81dddc
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-25_03-19-38__7e8d08a4-07aa-499a-a6fb-98bd1d81dddc__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-25_03-19-38__7e8d08a4-07aa-499a-a6fb-98bd1d81dddc__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node3_2024-09-25_03-19-38__7e8d08a4-07aa-499a-a6fb-98bd1d81dddc__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.186.117
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['13187', '13188', '13189', '13190', '13191']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 13187:13187 -p 13188:13188 -p 13189:13189 -p 13190:13190 -p 13191:13191 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=13189 --rest-port=13187 --tcp-port=13188 --discv5-udp-port=13190 --rest-address=0.0.0.0 --nat=extip:172.18.186.117 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=e4a421c06ac4770dd7fb41c9b535efecaa7d11b87c65566ebbee10d46735e449 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --lightpush=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.186.117 waku e348f2843ec56c15b47097c7c6d98dcf5c7125412f038151f803714c39cae1e2
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID e348f2843ec5. Setting up logs at ./log/docker/node1_2024-09-25_03-19-38__7e8d08a4-07aa-499a-a6fb-98bd1d81dddc__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 13187
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13187/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QFHFBGX7fEFP4kcmkqXFX0vbzYrgvk4HnBw6Z4AWDF8XH3bBNa4JzXRdDNkv5RCsqh5mAzXKTz_6cYwCeeSvV9mGAZInMQ3AgmlkgnY0gmlwhKwRAASJc2VjcDI1NmsxoQL2n2hYD0IrUJJ7ckXIpuHW-0ctpn3zjuhzl4-J54a1koN0Y3CCM4SDdWRwgjOGhXdha3UyCQ","listenAddresses":["/ip4/127.0.0.1/tcp/13188/p2p/16Uiu2HAmC2PFiWNU5d8avtKJHnnosen6DGCL1SQwNFjwG9rCR3pM","/ip4/127.0.0.1/tcp/13189/ws/p2p/16Uiu2HAmC2PFiWNU5d8avtKJHnnosen6DGCL1SQwNFjwG9rCR3pM","/ip4/172.17.0.4/tcp/13188/p2p/16Uiu2HAmC2PFiWNU5d8avtKJHnnosen6DGCL1SQwNFjwG9rCR3pM","/ip4/172.17.0.4/tcp/13189/ws/p2p/16Uiu2HAmC2PFiWNU5d8avtKJHnnosen6DGCL1SQwNFjwG9rCR3pM"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.219.162
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['63394', '63395', '63396', '63397', '63398']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 63394:63394 -p 63395:63395 -p 63396:63396 -p 63397:63397 -p 63398:63398 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63396 --rest-port=63394 --tcp-port=63395 --discv5-udp-port=63397 --rest-address=0.0.0.0 --nat=extip:172.18.219.162 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9996f6f72202cc485d319ecf86b50a2ce6fd67afdc5a6ad2bdf01babc99c29ae --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63398 --metrics-logging=true --lightpush=true --store=true --relay=true --discv5-bootstrap-node=enr:-Ji4QFHFBGX7fEFP4kcmkqXFX0vbzYrgvk4HnBw6Z4AWDF8XH3bBNa4JzXRdDNkv5RCsqh5mAzXKTz_6cYwCeeSvV9mGAZInMQ3AgmlkgnY0gmlwhKwRAASJc2VjcDI1NmsxoQL2n2hYD0IrUJJ7ckXIpuHW-0ctpn3zjuhzl4-J54a1koN0Y3CCM4SDdWRwgjOGhXdha3UyCQ --lightpushnode=/ip4/172.18.186.117/tcp/13188/p2p/16Uiu2HAmC2PFiWNU5d8avtKJHnnosen6DGCL1SQwNFjwG9rCR3pM
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.219.162 waku eae312aa5f6b5217c21fba713aa4a398f915de8100013370f8c0150b6266ae17
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID eae312aa5f6b. Setting up logs at ./log/docker/node2_2024-09-25_03-19-38__7e8d08a4-07aa-499a-a6fb-98bd1d81dddc__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 63394
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63394/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63394/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.219.162/tcp/63395/p2p/16Uiu2HAkyhie7sgwm654dUjk2tkP1RwSMVfkE4SvkV11Dui7r7EN","/ip4/172.18.219.162/tcp/63396/ws/p2p/16Uiu2HAkyhie7sgwm654dUjk2tkP1RwSMVfkE4SvkV11Dui7r7EN"],"enrUri":"enr:-LO4QJqWAQtfha62CTpJYgbT2zawfmRmCI0sw6MafwvunYNOVxFgFhpEDT1ZfYo5a5G1FcG1BYFAOLqM6W-auIkZGbIBgmlkgnY0gmlwhKwS26KKbXVsdGlhZGRyc4wACgSsEtuiBvek3QOCcnOFAAMBAACJc2VjcDI1NmsxoQI_iwyZYOIvetWBJ6NEReir9__Q3kNKFfAx90hnagRzh4N0Y3CC96ODdWRwgvelhXdha3UyCw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.18.212
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['44124', '44125', '44126', '44127', '44128']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 44124:44124 -p 44125:44125 -p 44126:44126 -p 44127:44127 -p 44128:44128 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=44126 --rest-port=44124 --tcp-port=44125 --discv5-udp-port=44127 --rest-address=0.0.0.0 --nat=extip:172.18.18.212 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eefeecb3a0d7bec1b75cab3cf220da9cdec29d15a5f196aa50d2dc4313b8b92c --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --storenode=/ip4/172.18.219.162/tcp/63395/p2p/16Uiu2HAkyhie7sgwm654dUjk2tkP1RwSMVfkE4SvkV11Dui7r7EN --discv5-bootstrap-node=enr:-LO4QJqWAQtfha62CTpJYgbT2zawfmRmCI0sw6MafwvunYNOVxFgFhpEDT1ZfYo5a5G1FcG1BYFAOLqM6W-auIkZGbIBgmlkgnY0gmlwhKwS26KKbXVsdGlhZGRyc4wACgSsEtuiBvek3QOCcnOFAAMBAACJc2VjcDI1NmsxoQI_iwyZYOIvetWBJ6NEReir9__Q3kNKFfAx90hnagRzh4N0Y3CC96ODdWRwgvelhXdha3UyCw
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.18.212 waku d210a5794c3747be8e4e87f75d22b706603f1fd815722a212230d243d9fbf923
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID d210a5794c37. Setting up logs at ./log/docker/node3_2024-09-25_03-19-38__7e8d08a4-07aa-499a-a6fb-98bd1d81dddc__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 44124
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44124/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QLIfuQtdO5k2WT9DgstqiKYtLps7IUOiZQd_Sr5Yx2-KFZuSUF94Z6GWOAd_S0OaHxrbiuDzEVc2MKFf2YU0SS-GAZInMRh7gmlkgnY0gmlwhKwRAAKJc2VjcDI1NmsxoQLw6P-G3InkkWzO1zzr75tShiiscIalfZEElRkIZ-RHGoN0Y3CCrF2DdWRwgqxfhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/44125/p2p/16Uiu2HAmBe5theb7XuDQk8PFVT5xNaoYkeuJ8vZiM6MsgvcFWtJD","/ip4/127.0.0.1/tcp/44126/ws/p2p/16Uiu2HAmBe5theb7XuDQk8PFVT5xNaoYkeuJ8vZiM6MsgvcFWtJD","/ip4/172.17.0.2/tcp/44125/p2p/16Uiu2HAmBe5theb7XuDQk8PFVT5xNaoYkeuJ8vZiM6MsgvcFWtJD","/ip4/172.17.0.2/tcp/44126/ws/p2p/16Uiu2HAmBe5theb7XuDQk8PFVT5xNaoYkeuJ8vZiM6MsgvcFWtJD"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13187/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:63394/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13187/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13187/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13187/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:13187/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"id":"16Uiu2HAkyhie7sgwm654dUjk2tkP1RwSMVfkE4SvkV11Dui7r7EN","multiaddrs":["/ip4/172.18.219.162/tcp/63395/p2p/16Uiu2HAkyhie7sgwm654dUjk2tkP1RwSMVfkE4SvkV11Dui7r7EN","/ip4/172.18.219.162/tcp/63396/ws/p2p/16Uiu2HAkyhie7sgwm654dUjk2tkP1RwSMVfkE4SvkV11Dui7r7EN"],"protocols":["/vac/waku/relay/2.0.0","/vac/waku/store/2.0.0-beta4","/vac/waku/store-query/3.0.0","/vac/waku/lightpush/2.0.0-beta1"],"connected":true,"pubsubTopics":["/waku/2/rs/3/0","/waku/2/rs/3/1"]}]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:63394/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.4/tcp/13188/p2p/16Uiu2HAmC2PFiWNU5d8avtKJHnnosen6DGCL1SQwNFjwG9rCR3pM","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true},{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"Discv5"},{"multiaddr":"/ip4/172.17.0.2/tcp/44125/p2p/16Uiu2HAmBe5theb7XuDQk8PFVT5xNaoYkeuJ8vZiM6MsgvcFWtJD","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 30 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:13187/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1727234416036028160}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/go-waku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:44124/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-filter%2Fproto&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 500 Server Error: Internal Server Error for url: http://127.0.0.1:44124/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-filter%2Fproto&pageSize=50&ascending=true. Response content: b'{"messages":null,"error_message":"failed to open stream: i/o deadline reached"}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id e348f2843ec5
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id eae312aa5f6b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id d210a5794c37
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m tests.conftest:conftest.py:73 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:74 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node3_2024-09-25_03-19-38__7e8d08a4-07aa-499a-a6fb-98bd1d81dddc__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node1_2024-09-25_03-19-38__7e8d08a4-07aa-499a-a6fb-98bd1d81dddc__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/node2_2024-09-25_03-19-38__7e8d08a4-07aa-499a-a6fb-98bd1d81dddc__wakuorg_nwaku:latest.log