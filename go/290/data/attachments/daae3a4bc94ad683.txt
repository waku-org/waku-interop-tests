[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_metrics_after_light_push with id: 2024-09-25_03-25-00__4bae1e6a-e5dd-4ba5-bb13-070496e37457
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-09-25_03-25-00__4bae1e6a-e5dd-4ba5-bb13-070496e37457__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.85.79
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['6572', '6573', '6574', '6575', '6576']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 6572:6572 -p 6573:6573 -p 6574:6574 -p 6575:6575 -p 6576:6576 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=6574 --rest-port=6572 --tcp-port=6573 --discv5-udp-port=6575 --rest-address=0.0.0.0 --nat=extip:172.18.85.79 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b3bdc1fffdcdcbe7ff6cea330b9abe5d5edf1cbeaedb8af19bf3e6f5b25c2beb --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=6576 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.85.79 waku f81866072c690bce004e7262130c1a95a445dc464e23b9beb628d390d4fd4b0f
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID f81866072c69. Setting up logs at ./log/docker/receiving_node1_2024-09-25_03-25-00__4bae1e6a-e5dd-4ba5-bb13-070496e37457__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 6572
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6572/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6572/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.85.79/tcp/6573/p2p/16Uiu2HAmGbkhUbQeBkXnVGyvxmWCa3qFeYaK1GvER3ZDZgvCg2QQ","/ip4/172.18.85.79/tcp/6574/ws/p2p/16Uiu2HAmGbkhUbQeBkXnVGyvxmWCa3qFeYaK1GvER3ZDZgvCg2QQ"],"enrUri":"enr:-LO4QNF-ILJIYTuC6G6Rox8LI5y0w1vXA_gqkZqY9pBECpjLcAMycTKUSsLhlkTRPErPKtJwFxc70EaWtRnKcKccbkkBgmlkgnY0gmlwhKwSVU-KbXVsdGlhZGRyc4wACgSsElVPBhmu3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM6mpGnr40-wEINMROxkKiSXbDSi-EDXjfmubw-j1BgGYN0Y3CCGa2DdWRwghmvhXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-09-25_03-25-00__4bae1e6a-e5dd-4ba5-bb13-070496e37457__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.141.23
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['62046', '62047', '62048', '62049', '62050']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 62046:62046 -p 62047:62047 -p 62048:62048 -p 62049:62049 -p 62050:62050 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=62048 --rest-port=62046 --tcp-port=62047 --discv5-udp-port=62049 --rest-address=0.0.0.0 --nat=extip:172.18.141.23 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=92dae1fba55d9cbba5ff3b1db2ee124b7ed8920aaadd4682ab3ce893ac0f40ec --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=62050 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.141.23 waku 45c7f63e247e453f2ef0fd6eb5830cd549e51254c8071656af09ba3fcf2df228
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 45c7f63e247e. Setting up logs at ./log/docker/receiving_node2_2024-09-25_03-25-00__4bae1e6a-e5dd-4ba5-bb13-070496e37457__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 62046
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62046/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:62046/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.141.23/tcp/62047/p2p/16Uiu2HAmUqoTtEWfj3kUdy3i8wAoJzwYsRHBAuj7mVUbfRGah7Cn","/ip4/172.18.141.23/tcp/62048/ws/p2p/16Uiu2HAmUqoTtEWfj3kUdy3i8wAoJzwYsRHBAuj7mVUbfRGah7Cn"],"enrUri":"enr:-LO4QEJ0_3eWlvOgGwx7PcfwShR2hMRShPoy14MxPNh0QdodDmH4rCPtsOJsJBAByUJ0UPWJK1EffN_vYw3vf4QzKnkBgmlkgnY0gmlwhKwSjReKbXVsdGlhZGRyc4wACgSsEo0XBvJg3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPwgBIOqyIDnk47hPfQ-QNzhnFGSfIxi2QBADA5zP3wM4N0Y3CC8l-DdWRwgvJhhXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62046/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.85.79/tcp/6573/p2p/16Uiu2HAmGbkhUbQeBkXnVGyvxmWCa3qFeYaK1GvER3ZDZgvCg2QQ"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-09-25_03-25-00__4bae1e6a-e5dd-4ba5-bb13-070496e37457__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.9.194
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['64439', '64440', '64441', '64442', '64443']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 64439:64439 -p 64440:64440 -p 64441:64441 -p 64442:64442 -p 64443:64443 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=64441 --rest-port=64439 --tcp-port=64440 --discv5-udp-port=64442 --rest-address=0.0.0.0 --nat=extip:172.18.9.194 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1a70424d253abfc58bfbe0a1d3adb191e04adf6abedf9872161dfbee624cedd0 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-LO4QNF-ILJIYTuC6G6Rox8LI5y0w1vXA_gqkZqY9pBECpjLcAMycTKUSsLhlkTRPErPKtJwFxc70EaWtRnKcKccbkkBgmlkgnY0gmlwhKwSVU-KbXVsdGlhZGRyc4wACgSsElVPBhmu3QOCcnOFAAMBAACJc2VjcDI1NmsxoQM6mpGnr40-wEINMROxkKiSXbDSi-EDXjfmubw-j1BgGYN0Y3CCGa2DdWRwghmvhXdha3UyCQ --lightpushnode=/ip4/172.18.85.79/tcp/6573/p2p/16Uiu2HAmGbkhUbQeBkXnVGyvxmWCa3qFeYaK1GvER3ZDZgvCg2QQ --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.9.194 waku 7584787d7ef6c2bbdca20a7fc5b513ee6d07de8fd7d323f3175e1d856c7886c6
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 7584787d7ef6. Setting up logs at ./log/docker/lightpush_node1_2024-09-25_03-25-00__4bae1e6a-e5dd-4ba5-bb13-070496e37457__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 64439
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:64439/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QBcEJDxEtzV1I1-g3Th0VtWxd6SQ2jVElI4PMtsFQbIiVfQDOkfwAhRk2H0pIed-eAPEjyEU5Vr5JG2sNTME12qGAZInNgI8gmlkgnY0gmlwhKwRAAmJc2VjcDI1NmsxoQO0qBqz9PexuFXvAtEAyAeQqeGtRp0WI5uZnVcJjrtY0oN0Y3CC-7iDdWRwgvu6hXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/64440/p2p/16Uiu2HAmQpCQeYJNPAKJZRxpnKwWjQo2pVvKHvAhs2cfmRQwfCaV","/ip4/127.0.0.1/tcp/64441/ws/p2p/16Uiu2HAmQpCQeYJNPAKJZRxpnKwWjQo2pVvKHvAhs2cfmRQwfCaV","/ip4/172.17.0.9/tcp/64440/p2p/16Uiu2HAmQpCQeYJNPAKJZRxpnKwWjQo2pVvKHvAhs2cfmRQwfCaV","/ip4/172.17.0.9/tcp/64441/ws/p2p/16Uiu2HAmQpCQeYJNPAKJZRxpnKwWjQo2pVvKHvAhs2cfmRQwfCaV"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64439/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.85.79/tcp/6573/p2p/16Uiu2HAmGbkhUbQeBkXnVGyvxmWCa3qFeYaK1GvER3ZDZgvCg2QQ", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64439/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.141.23/tcp/62047/p2p/16Uiu2HAmUqoTtEWfj3kUdy3i8wAoJzwYsRHBAuj7mVUbfRGah7Cn", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:6572/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:62046/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:64439/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": 1727234705005924608}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.5 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:6572/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1727234705005924608,"ephemeral":false}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 5 seconds
[35mDEBUG   [0m src.steps.metrics:metrics.py:15 Checking metric: libp2p_peers has 1
[35mDEBUG   [0m src.steps.metrics:metrics.py:27 Found metric: libp2p_peers with value 2.0
[35mDEBUG   [0m src.steps.metrics:metrics.py:15 Checking metric: libp2p_pubsub_peers has 1
[35mDEBUG   [0m src.steps.metrics:metrics.py:27 Found metric: libp2p_pubsub_peers with value 2.0
[35mDEBUG   [0m src.steps.metrics:metrics.py:15 Checking metric: libp2p_pubsub_topics has 1
[35mDEBUG   [0m src.steps.metrics:metrics.py:27 Found metric: libp2p_pubsub_topics with value 2.0
[35mDEBUG   [0m src.steps.metrics:metrics.py:15 Checking metric: libp2p_pubsub_subscriptions_total has 1
[35mDEBUG   [0m src.steps.metrics:metrics.py:27 Found metric: libp2p_pubsub_subscriptions_total with value 2.0
[35mDEBUG   [0m src.steps.metrics:metrics.py:15 Checking metric: waku_peer_store_size has 1
[35mDEBUG   [0m src.steps.metrics:metrics.py:27 Found metric: waku_peer_store_size with value 2.0
[35mDEBUG   [0m src.steps.metrics:metrics.py:15 Checking metric: waku_histogram_message_size_count has 1
[35mDEBUG   [0m src.steps.metrics:metrics.py:27 Found metric: waku_histogram_message_size_count with value 1.0
[35mDEBUG   [0m src.steps.metrics:metrics.py:15 Checking metric: waku_node_messages_total{type="relay"} has 1
[35mDEBUG   [0m src.steps.metrics:metrics.py:27 Found metric: waku_node_messages_total{type="relay"} with value 1.0
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id f81866072c69
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 45c7f63e247e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 7584787d7ef6
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.