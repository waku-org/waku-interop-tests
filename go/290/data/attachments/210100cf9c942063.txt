[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_subscribe_with_invalid_pubsub_topic_format with id: 2024-09-25_03-21-22__fff50d33-5b9d-4164-beef-4958faa7e3d7
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-09-25_03-21-22__fff50d33-5b9d-4164-beef-4958faa7e3d7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.232.175
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['35974', '35975', '35976', '35977', '35978']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 35974:35974 -p 35975:35975 -p 35976:35976 -p 35977:35977 -p 35978:35978 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=35976 --rest-port=35974 --tcp-port=35975 --discv5-udp-port=35977 --rest-address=0.0.0.0 --nat=extip:172.18.232.175 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fcbbda3d5e902f33eb182f82c95bdb168151eaef3fbceca3cf0fcc4c887330bf --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=35978 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.232.175 waku e95e289197490c2aebcb0fe73861372d038f9b7ad15d6c37b2aa706851336921
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID e95e28919749. Setting up logs at ./log/docker/node1_2024-09-25_03-21-22__fff50d33-5b9d-4164-beef-4958faa7e3d7__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 35974
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35974/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35974/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.232.175/tcp/35975/p2p/16Uiu2HAmNfKNnd9W2JuUoQvJnaAKYhp36719fzqmggQrn8Mn4t4w","/ip4/172.18.232.175/tcp/35976/ws/p2p/16Uiu2HAmNfKNnd9W2JuUoQvJnaAKYhp36719fzqmggQrn8Mn4t4w"],"enrUri":"enr:-LO4QKhTCnvVUn-NqUJhCH82aQAJvPbeGw3EXDm2mjwAXA1_MOYSBHwOUxm-qCxJzPdi9RACqVAz1QCs0ZzLrPH1_hcBgmlkgnY0gmlwhKwS6K-KbXVsdGlhZGRyc4wACgSsEuivBoyI3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOUqmG_Yk2Sbhk5TuB1vqe1uqMJqmg1dMOIpYLQO5AJGIN0Y3CCjIeDdWRwgoyJhXdha3UyBQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2024-09-25_03-21-22__fff50d33-5b9d-4164-beef-4958faa7e3d7__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.133.168
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['3291', '3292', '3293', '3294', '3295']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 3291:3291 -p 3292:3292 -p 3293:3293 -p 3294:3294 -p 3295:3295 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=3293 --rest-port=3291 --tcp-port=3292 --discv5-udp-port=3294 --rest-address=0.0.0.0 --nat=extip:172.18.133.168 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7d2d1bb4aa2b8effeffc55aeb7ba3f1c4fd5deb5d8ea9f8eedeaa1ef2d0a6ae7 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-LO4QKhTCnvVUn-NqUJhCH82aQAJvPbeGw3EXDm2mjwAXA1_MOYSBHwOUxm-qCxJzPdi9RACqVAz1QCs0ZzLrPH1_hcBgmlkgnY0gmlwhKwS6K-KbXVsdGlhZGRyc4wACgSsEuivBoyI3QOCcnOFAAMBAACJc2VjcDI1NmsxoQOUqmG_Yk2Sbhk5TuB1vqe1uqMJqmg1dMOIpYLQO5AJGIN0Y3CCjIeDdWRwgoyJhXdha3UyBQ --filternode=/ip4/172.18.232.175/tcp/35975/p2p/16Uiu2HAmNfKNnd9W2JuUoQvJnaAKYhp36719fzqmggQrn8Mn4t4w
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.133.168 waku 5bc07e6ef6427956808e370b20982931194b06cb01e2b3d9e7f2f008627dc7c3
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 5bc07e6ef642. Setting up logs at ./log/docker/node2_2024-09-25_03-21-22__fff50d33-5b9d-4164-beef-4958faa7e3d7__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 3291
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3291/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QJthULnsR-3VCnBCJRGLoSWZGnkc6ug_uazJon1DKmaCMS3w5f9VxVUING3OiHDkN5ucZTqZCh4Nv-QtnDYdaySGAZInMqmQgmlkgnY0gmlwhKwRAAWJc2VjcDI1NmsxoQJKgMAYPyH71uCZ-irRP5_SM9-TOgusmmP5mIB0kyvB2IN0Y3CCDNyDdWRwggzehXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/3292/p2p/16Uiu2HAkzSW1wq5MBvWwsYR5WpgSgH2FWzyHjfhGt7kPCXguHUXZ","/ip4/127.0.0.1/tcp/3293/ws/p2p/16Uiu2HAkzSW1wq5MBvWwsYR5WpgSgH2FWzyHjfhGt7kPCXguHUXZ","/ip4/172.17.0.5/tcp/3292/p2p/16Uiu2HAkzSW1wq5MBvWwsYR5WpgSgH2FWzyHjfhGt7kPCXguHUXZ","/ip4/172.17.0.5/tcp/3293/ws/p2p/16Uiu2HAkzSW1wq5MBvWwsYR5WpgSgH2FWzyHjfhGt7kPCXguHUXZ"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3291/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.232.175/tcp/35975/p2p/16Uiu2HAmNfKNnd9W2JuUoQvJnaAKYhp36719fzqmggQrn8Mn4t4w", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35974/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3291/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "a1b81027-0945-4d3b-a5a7-152d6f8b9500", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"a1b81027-0945-4d3b-a5a7-152d6f8b9500","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3291/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": ["/waku/2/rs/3/1"]}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:3291/filter/v2/subscriptions. Response content: b''
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id e95e28919749
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 5bc07e6ef642
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.