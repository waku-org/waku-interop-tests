[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_metrics_after_light_push with id: 2024-11-07_03-15-07__b601419f-eb7a-47a7-bef7-db7c25b79caf
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:28 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node1_2024-11-07_03-15-07__b601419f-eb7a-47a7-bef7-db7c25b79caf__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.120.171
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['16429', '16430', '16431', '16432', '16433']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 16429:16429 -p 16430:16430 -p 16431:16431 -p 16432:16432 -p 16433:16433 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=16431 --rest-port=16429 --tcp-port=16430 --discv5-udp-port=16432 --rest-address=0.0.0.0 --nat=extip:172.18.120.171 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=97a8ad0ed471ff179e1b9cbeecfc5e77aaed8b90285ab79de949f1cea054bbba --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=16433 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.120.171 waku a0250a0f471728ad9716ec913de8cd37657f91e3b64bf2a50b8ceac5d35d1444
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID a0250a0f4717. Setting up logs at ./log/docker/receiving_node1_2024-11-07_03-15-07__b601419f-eb7a-47a7-bef7-db7c25b79caf__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 16429
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 6ffc74885542. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16429/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16429/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.120.171/tcp/16430/p2p/16Uiu2HAmACd3eYZP9YCRh89NhE525QobSZRseZv5XgnNu9mkGotv","/ip4/172.18.120.171/tcp/16431/ws/p2p/16Uiu2HAmACd3eYZP9YCRh89NhE525QobSZRseZv5XgnNu9mkGotv"],"enrUri":"enr:-L24QA5cdWOEE-rg-LX4cAQUcBpxcDu3pmCSRea0AtoJ3ScjZrY1P7yINp_7iX7zYI0dHV50ZjYGOTHcfvbBktcD560CgmlkgnY0gmlwhKwSeKuKbXVsdGlhZGRyc5YACASsEnirBkAuAAoErBJ4qwZAL90DgnJzhQADAQAAiXNlY3AyNTZrMaEC24dvuK3Bhfmm-P5vfN_sSarFnygV0iAJcQbDYR1_YMODdGNwgkAug3VkcIJAMIV3YWt1Mgk"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/receiving_node2_2024-11-07_03-15-07__b601419f-eb7a-47a7-bef7-db7c25b79caf__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.22.213
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['55617', '55618', '55619', '55620', '55621']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 55617:55617 -p 55618:55618 -p 55619:55619 -p 55620:55620 -p 55621:55621 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55619 --rest-port=55617 --tcp-port=55618 --discv5-udp-port=55620 --rest-address=0.0.0.0 --nat=extip:172.18.22.213 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dfd99ae2b4ffe1a228aec5131aace0a760bbed19e9bb7af3c4ebac7acfe62b5b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55621 --metrics-logging=true --lightpush=false --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.22.213 waku 798bf8f1b661635a60c4305bd251e3d843eeb45c8f6ef70dfe97fee367b7baa8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 798bf8f1b661. Setting up logs at ./log/docker/receiving_node2_2024-11-07_03-15-07__b601419f-eb7a-47a7-bef7-db7c25b79caf__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 55617
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55617/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:55617/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.22.213/tcp/55618/p2p/16Uiu2HAmP8xm67FHxgRkosyLUGEepy9tjmkiZYTjA8Utec67PDSb","/ip4/172.18.22.213/tcp/55619/ws/p2p/16Uiu2HAmP8xm67FHxgRkosyLUGEepy9tjmkiZYTjA8Utec67PDSb"],"enrUri":"enr:-L24QPByNaq5U06XQ703UFxXcLxKRSCWxB5eWLr-Key_KpDNcySx1u_HDfpWkJ6YQX6PdJI9T3GUr4nrHZ5A4VP-fHECgmlkgnY0gmlwhKwSFtWKbXVsdGlhZGRyc5YACASsEhbVBtlCAAoErBIW1QbZQ90DgnJzhQADAQAAiXNlY3AyNTZrMaEDm79Vn8j4KYzuJHvD4_qdJcMVW-x47tggJYDbcQlikayDdGNwgtlCg3VkcILZRIV3YWt1MgE"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55617/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.120.171/tcp/16430/p2p/16Uiu2HAmACd3eYZP9YCRh89NhE525QobSZRseZv5XgnNu9mkGotv"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/lightpush_node1_2024-11-07_03-15-07__b601419f-eb7a-47a7-bef7-db7c25b79caf__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.82.38
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['59858', '59859', '59860', '59861', '59862']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 59858:59858 -p 59859:59859 -p 59860:59860 -p 59861:59861 -p 59862:59862 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=59860 --rest-port=59858 --tcp-port=59859 --discv5-udp-port=59861 --rest-address=0.0.0.0 --nat=extip:172.18.82.38 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dd4fc141bdc47eb02a21468ea06ea6efea9ffdeccaa56dfbcd6fed3c9106138e --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QA5cdWOEE-rg-LX4cAQUcBpxcDu3pmCSRea0AtoJ3ScjZrY1P7yINp_7iX7zYI0dHV50ZjYGOTHcfvbBktcD560CgmlkgnY0gmlwhKwSeKuKbXVsdGlhZGRyc5YACASsEnirBkAuAAoErBJ4qwZAL90DgnJzhQADAQAAiXNlY3AyNTZrMaEC24dvuK3Bhfmm-P5vfN_sSarFnygV0iAJcQbDYR1_YMODdGNwgkAug3VkcIJAMIV3YWt1Mgk --lightpushnode=/ip4/172.18.120.171/tcp/16430/p2p/16Uiu2HAmACd3eYZP9YCRh89NhE525QobSZRseZv5XgnNu9mkGotv --lightpush=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.82.38 waku df1fd52343aeae8b6b2d4a30a3ad99add1154e829dda4d467e86c7ecd2e80890
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID df1fd52343ae. Setting up logs at ./log/docker/lightpush_node1_2024-11-07_03-15-07__b601419f-eb7a-47a7-bef7-db7c25b79caf__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 59858
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:59858/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QGbLW0YZjvYVji7QeE8JHwHJ0n7pRR23_Z92oISp_2D4ENx3Enx4nkp0UpYwMUJMqVdXOMZaxUs777uIp7m1nmGGAZMEnmkpgmlkgnY0gmlwhKwRAA6Jc2VjcDI1NmsxoQMw9roELV9iMQNS2bI4qs4ZOFxg08Em_BHL6afY15uYEoN0Y3CC6dODdWRwgunVhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/59859/p2p/16Uiu2HAmFx88HTjW8ch9BdB8NmkGzTUvy6hnuEXrJ5FqnYs4HEvD","/ip4/127.0.0.1/tcp/59860/ws/p2p/16Uiu2HAmFx88HTjW8ch9BdB8NmkGzTUvy6hnuEXrJ5FqnYs4HEvD","/ip4/172.17.0.14/tcp/59859/p2p/16Uiu2HAmFx88HTjW8ch9BdB8NmkGzTUvy6hnuEXrJ5FqnYs4HEvD","/ip4/172.17.0.14/tcp/59860/ws/p2p/16Uiu2HAmFx88HTjW8ch9BdB8NmkGzTUvy6hnuEXrJ5FqnYs4HEvD"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59858/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.120.171/tcp/16430/p2p/16Uiu2HAmACd3eYZP9YCRh89NhE525QobSZRseZv5XgnNu9mkGotv", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59858/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.22.213/tcp/55618/p2p/16Uiu2HAmP8xm67FHxgRkosyLUGEepy9tjmkiZYTjA8Utec67PDSb", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:16429/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:55617/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:59858/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": 1730949311830654720}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.5 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:16429/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1730949311830654720,"ephemeral":false}]'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 5 seconds
[35mDEBUG   [0m src.steps.metrics:metrics.py:15 Checking metric: libp2p_peers has 1
[35mDEBUG   [0m src.steps.metrics:metrics.py:27 Found metric: libp2p_peers with value 2.0
[35mDEBUG   [0m src.steps.metrics:metrics.py:15 Checking metric: libp2p_pubsub_peers has 1
[35mDEBUG   [0m src.steps.metrics:metrics.py:27 Found metric: libp2p_pubsub_peers with value 2.0
[35mDEBUG   [0m src.steps.metrics:metrics.py:15 Checking metric: libp2p_pubsub_topics has 1
[35mDEBUG   [0m src.steps.metrics:metrics.py:27 Found metric: libp2p_pubsub_topics with value 2.0
[35mDEBUG   [0m src.steps.metrics:metrics.py:15 Checking metric: libp2p_pubsub_subscriptions_total has 1
[35mDEBUG   [0m src.steps.metrics:metrics.py:27 Found metric: libp2p_pubsub_subscriptions_total with value 2.0
[35mDEBUG   [0m src.steps.metrics:metrics.py:15 Checking metric: waku_peer_store_size has 1
[35mDEBUG   [0m src.steps.metrics:metrics.py:27 Found metric: waku_peer_store_size with value 2.0
[35mDEBUG   [0m src.steps.metrics:metrics.py:15 Checking metric: waku_histogram_message_size_count has 1
[35mDEBUG   [0m src.steps.metrics:metrics.py:27 Found metric: waku_histogram_message_size_count with value 1.0
[35mDEBUG   [0m src.steps.metrics:metrics.py:15 Checking metric: waku_node_messages_total{type="relay"} has 1
[35mDEBUG   [0m src.steps.metrics:metrics.py:27 Found metric: waku_node_messages_total{type="relay"} with value 1.0
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id a0250a0f4717
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 798bf8f1b661
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container a0250a0f4717. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id df1fd52343ae
[1m[31mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 798bf8f1b661. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.