[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_relay_and_store__peer_only_store with id: 2024-05-13_03-20-13__2bc9d21c-ccda-4b6c-aa5e-0da452aca797
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-13_03-20-13__2bc9d21c-ccda-4b6c-aa5e-0da452aca797__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.81.206
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['48593', '48594', '48595', '48596', '48597']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:345 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 48593:48593 -p 48594:48594 -p 48595:48595 -p 48596:48596 -p 48597:48597 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=48595 --rest-port=48593 --tcp-port=48594 --discv5-udp-port=48596 --rest-address=0.0.0.0 --nat=extip:172.18.81.206 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=48597 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.81.206 waku e5d2584d3e1a0798c5d9b71ee03c38b01ac6183ad2c1523b53b6d2f1556ee909
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID e5d2584d3e1a. Setting up logs at ./log/docker/publishing_node1_2024-05-13_03-20-13__2bc9d21c-ccda-4b6c-aa5e-0da452aca797__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 48593
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48593/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:209 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48593/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.81.206/tcp/48594/p2p/16Uiu2HAmRJJKgzdgxYF25cRWuxXREUKi2F5t6V9C7Uj18hu6sHF2","/ip4/172.18.81.206/tcp/48595/ws/p2p/16Uiu2HAmRJJKgzdgxYF25cRWuxXREUKi2F5t6V9C7Uj18hu6sHF2"],"enrUri":"enr:-LO4QC4OA7ti-d8YonYqU9CdCqzsN46eYTX0xQecIJRn0BYsXiY5d--MLPXdz-eLbgROAv_3Gpl0oaA24n9LwIZugsoBgmlkgnY0gmlwhKwSUc6KbXVsdGlhZGRyc4wACgSsElHOBr3T3QOCcnOFAAABAACJc2VjcDI1NmsxoQO72w31-eEcdbRJB0WGpDEMYKy8Zrj8mus4mNl4xeUKjYN0Y3CCvdKDdWRwgr3UhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-13_03-20-13__2bc9d21c-ccda-4b6c-aa5e-0da452aca797__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.115.12
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['27413', '27414', '27415', '27416', '27417']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:345 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 27413:27413 -p 27414:27414 -p 27415:27415 -p 27416:27416 -p 27417:27417 harbor.status.im/wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=27415 --rest-port=27413 --tcp-port=27414 --discv5-udp-port=27416 --rest-address=0.0.0.0 --nat=extip:172.18.115.12 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --discv5-bootstrap-node=enr:-LO4QC4OA7ti-d8YonYqU9CdCqzsN46eYTX0xQecIJRn0BYsXiY5d--MLPXdz-eLbgROAv_3Gpl0oaA24n9LwIZugsoBgmlkgnY0gmlwhKwSUc6KbXVsdGlhZGRyc4wACgSsElHOBr3T3QOCcnOFAAABAACJc2VjcDI1NmsxoQO72w31-eEcdbRJB0WGpDEMYKy8Zrj8mus4mNl4xeUKjYN0Y3CCvdKDdWRwgr3UhXdha3UyAw --storenode=/ip4/172.18.81.206/tcp/48594/p2p/16Uiu2HAmRJJKgzdgxYF25cRWuxXREUKi2F5t6V9C7Uj18hu6sHF2 --store=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.115.12 waku 117da64de7c87afa2f2cd05a2da2d63b5df7ab8f1d62b3b838a8bd0a5659cb32
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 117da64de7c8. Setting up logs at ./log/docker/store_node1_2024-05-13_03-20-13__2bc9d21c-ccda-4b6c-aa5e-0da452aca797__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/go-waku:latest. REST: 27413
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:27413/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ly4QHxXpl3f3jiIDJ9osUCHeWePg0aGctKDkHHIqk3wVKbZJ3g__HadpzV1-fr7DMVuMudnMoGNBoryZU1EpAkRLISGAY9v9xjqgmlkgnY0gmlwhKwRAAmKbXVsdGlhZGRyc5gACgR_AAABBmsX3QMACgSsEQAJBmsX3QOJc2VjcDI1NmsxoQPRzPgb7Vyq18H6Inhg-vci3y0LoUj00tyL7ruOHlq1AIN0Y3CCaxaDdWRwgmsYhXdha3UyAg","listenAddresses":["/ip4/127.0.0.1/tcp/27414/p2p/16Uiu2HAmSmxqPzjG18nEM8YebdnhpMaHgipHQ2ouLrbmPnGmoqtb","/ip4/127.0.0.1/tcp/27415/ws/p2p/16Uiu2HAmSmxqPzjG18nEM8YebdnhpMaHgipHQ2ouLrbmPnGmoqtb","/ip4/172.17.0.9/tcp/27414/p2p/16Uiu2HAmSmxqPzjG18nEM8YebdnhpMaHgipHQ2ouLrbmPnGmoqtb","/ip4/172.17.0.9/tcp/27415/ws/p2p/16Uiu2HAmSmxqPzjG18nEM8YebdnhpMaHgipHQ2ouLrbmPnGmoqtb"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:27413/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.81.206/tcp/48594/p2p/16Uiu2HAmRJJKgzdgxYF25cRWuxXREUKi2F5t6V9C7Uj18hu6sHF2", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48593/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:48593/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:48593/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1715570416947360768,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id e5d2584d3e1a
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 117da64de7c8
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-13_03-20-13__2bc9d21c-ccda-4b6c-aa5e-0da452aca797__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-13_03-20-13__2bc9d21c-ccda-4b6c-aa5e-0da452aca797__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_relay_and_store__peer_only_store with id: 2024-05-13_03-20-20__5fe1ae7d-e058-4060-9a8a-5b03c9b88788
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-13_03-20-20__5fe1ae7d-e058-4060-9a8a-5b03c9b88788__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.154.174
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['35210', '35211', '35212', '35213', '35214']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:345 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 35210:35210 -p 35211:35211 -p 35212:35212 -p 35213:35213 -p 35214:35214 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=35212 --rest-port=35210 --tcp-port=35211 --discv5-udp-port=35213 --rest-address=0.0.0.0 --nat=extip:172.18.154.174 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=35214 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.154.174 waku 67e9264ddc5d19dae65be308363e9adee3c8cc0c6239f5741e6dea7c80a779e5
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 67e9264ddc5d. Setting up logs at ./log/docker/publishing_node1_2024-05-13_03-20-20__5fe1ae7d-e058-4060-9a8a-5b03c9b88788__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 35210
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35210/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:209 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35210/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.154.174/tcp/35211/p2p/16Uiu2HAkutKSCfLrqaAQrXtBpN6MyR5MZtZ8oSXLu4A8GeJMfCr3","/ip4/172.18.154.174/tcp/35212/ws/p2p/16Uiu2HAkutKSCfLrqaAQrXtBpN6MyR5MZtZ8oSXLu4A8GeJMfCr3"],"enrUri":"enr:-LO4QMIOeHIr-zAVQ4mXmFpKzwt0WR-RJ02GdY7HsZA2u7AwQaf_bJ7ZgkQqcbXZ1-415O2A1qyKDNM6lSsSinm3xhMBgmlkgnY0gmlwhKwSmq6KbXVsdGlhZGRyc4wACgSsEpquBomM3QOCcnOFAAABAACJc2VjcDI1NmsxoQIG03Ovia-DcnqPd4Lz8XGcMIjS8-PwpvJf131uicJEOIN0Y3CCiYuDdWRwgomNhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-13_03-20-20__5fe1ae7d-e058-4060-9a8a-5b03c9b88788__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.37.50
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['9695', '9696', '9697', '9698', '9699']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:345 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 9695:9695 -p 9696:9696 -p 9697:9697 -p 9698:9698 -p 9699:9699 harbor.status.im/wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=9697 --rest-port=9695 --tcp-port=9696 --discv5-udp-port=9698 --rest-address=0.0.0.0 --nat=extip:172.18.37.50 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --discv5-bootstrap-node=enr:-LO4QMIOeHIr-zAVQ4mXmFpKzwt0WR-RJ02GdY7HsZA2u7AwQaf_bJ7ZgkQqcbXZ1-415O2A1qyKDNM6lSsSinm3xhMBgmlkgnY0gmlwhKwSmq6KbXVsdGlhZGRyc4wACgSsEpquBomM3QOCcnOFAAABAACJc2VjcDI1NmsxoQIG03Ovia-DcnqPd4Lz8XGcMIjS8-PwpvJf131uicJEOIN0Y3CCiYuDdWRwgomNhXdha3UyAw --storenode=/ip4/172.18.154.174/tcp/35211/p2p/16Uiu2HAkutKSCfLrqaAQrXtBpN6MyR5MZtZ8oSXLu4A8GeJMfCr3 --store=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.37.50 waku 5e0e07c8cb67394eb22a159281098cc552ffa5341f742d87ad27b29cf10817b8
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 5e0e07c8cb67. Setting up logs at ./log/docker/store_node1_2024-05-13_03-20-20__5fe1ae7d-e058-4060-9a8a-5b03c9b88788__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/go-waku:latest. REST: 9695
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:9695/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ly4QNPXNljmjipMW2eLddyIlCDGY-ZMwt1-RAgXLAzG_tNiGo-DL_05kUsThXtmU3-Lr5jWnxsiLUQqU_zRVuj6yL6GAY9v9zIPgmlkgnY0gmlwhKwRAASKbXVsdGlhZGRyc5gACgR_AAABBiXh3QMACgSsEQAEBiXh3QOJc2VjcDI1NmsxoQOQ5GER3lJ8nvYd1pGLQ_vbWrB1lDnmdpnL4ZX_c5YYboN0Y3CCJeCDdWRwgiXihXdha3UyAg","listenAddresses":["/ip4/127.0.0.1/tcp/9696/p2p/16Uiu2HAmNQb3CooagxkVQVZzN4vafSeFNTqDsg9f7AhTBjhETTBb","/ip4/127.0.0.1/tcp/9697/ws/p2p/16Uiu2HAmNQb3CooagxkVQVZzN4vafSeFNTqDsg9f7AhTBjhETTBb","/ip4/172.17.0.4/tcp/9696/p2p/16Uiu2HAmNQb3CooagxkVQVZzN4vafSeFNTqDsg9f7AhTBjhETTBb","/ip4/172.17.0.4/tcp/9697/ws/p2p/16Uiu2HAmNQb3CooagxkVQVZzN4vafSeFNTqDsg9f7AhTBjhETTBb"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:9695/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.154.174/tcp/35211/p2p/16Uiu2HAkutKSCfLrqaAQrXtBpN6MyR5MZtZ8oSXLu4A8GeJMfCr3", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35210/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35210/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35210/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1715570423421181952,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 67e9264ddc5d
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 5e0e07c8cb67
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-13_03-20-20__5fe1ae7d-e058-4060-9a8a-5b03c9b88788__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-13_03-20-20__5fe1ae7d-e058-4060-9a8a-5b03c9b88788__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_main_node_relay_and_store__peer_only_store with id: 2024-05-13_03-20-25__346008dd-37e6-4daa-bd71-7d2db9650395
[35mDEBUG   [0m src.steps.common:common.py:15 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:26 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-05-13_03-20-25__346008dd-37e6-4daa-bd71-7d2db9650395__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.159.139
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['42932', '42933', '42934', '42935', '42936']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:345 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 42932:42932 -p 42933:42933 -p 42934:42934 -p 42935:42935 -p 42936:42936 harbor.status.im/wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=42934 --rest-port=42932 --tcp-port=42933 --discv5-udp-port=42935 --rest-address=0.0.0.0 --nat=extip:172.18.159.139 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=42936 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.159.139 waku b0b385d1b7c39a12ea2fbdc99dbd1c25becfd528c64b7ae8a112ee33c0206611
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID b0b385d1b7c3. Setting up logs at ./log/docker/publishing_node1_2024-05-13_03-20-25__346008dd-37e6-4daa-bd71-7d2db9650395__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 42932
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42932/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:209 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42932/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.159.139/tcp/42933/p2p/16Uiu2HAm2cktoKEVmhUt6C1pvKadF9FoCqL9vyWKPmzhFm9EAFXo","/ip4/172.18.159.139/tcp/42934/ws/p2p/16Uiu2HAm2cktoKEVmhUt6C1pvKadF9FoCqL9vyWKPmzhFm9EAFXo"],"enrUri":"enr:-LO4QEdRplwI2SpdWt9lXk42ObJCqYSdO9eQFyTnNLmFU7nWC8dcO_nTjZvEuJ4dgztni9Qq43m0sSlmQCU5nd1-G-UBgmlkgnY0gmlwhKwSn4uKbXVsdGlhZGRyc4wACgSsEp-LBqe23QOCcnOFAAABAACJc2VjcDI1NmsxoQJq2MDoFoSsJ4evX_4P9kw13tghW9vbtTV14g8MHvKZKoN0Y3CCp7WDdWRwgqe3hXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:48 WakuNode instance initialized with log path ./log/docker/store_node1_2024-05-13_03-20-25__346008dd-37e6-4daa-bd71-7d2db9650395__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:52 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.66.139
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['34158', '34159', '34160', '34161', '34162']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:345 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:114 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:116 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 34158:34158 -p 34159:34159 -p 34160:34160 -p 34161:34161 -p 34162:34162 harbor.status.im/wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=34160 --rest-port=34158 --tcp-port=34159 --discv5-udp-port=34161 --rest-address=0.0.0.0 --nat=extip:172.18.66.139 --peer-exchange=true --discv5-discovery=true --cluster-id=0 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --discv5-bootstrap-node=enr:-LO4QEdRplwI2SpdWt9lXk42ObJCqYSdO9eQFyTnNLmFU7nWC8dcO_nTjZvEuJ4dgztni9Qq43m0sSlmQCU5nd1-G-UBgmlkgnY0gmlwhKwSn4uKbXVsdGlhZGRyc4wACgSsEp-LBqe23QOCcnOFAAABAACJc2VjcDI1NmsxoQJq2MDoFoSsJ4evX_4P9kw13tghW9vbtTV14g8MHvKZKoN0Y3CCp7WDdWRwgqe3hXdha3UyAw --storenode=/ip4/172.18.159.139/tcp/42933/p2p/16Uiu2HAm2cktoKEVmhUt6C1pvKadF9FoCqL9vyWKPmzhFm9EAFXo --store=true --relay=false
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.66.139 waku f5a981e211f91f11e16c3c2c48c77c790413ec40bb476ee630c10b8e9f99b255
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID f5a981e211f9. Setting up logs at ./log/docker/store_node1_2024-05-13_03-20-25__346008dd-37e6-4daa-bd71-7d2db9650395__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/go-waku:latest. REST: 34158
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:34158/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ly4QGpK2fx786cjeVqGE4ti0yEq-wUPGcyVatwLurqL6m3PG9NcvLB5iYpMIMO6c8MjxQTeg5pOpKuUmZ3pcddM_dyGAY9v90jbgmlkgnY0gmlwhKwRAAaKbXVsdGlhZGRyc5gACgR_AAABBoVw3QMACgSsEQAGBoVw3QOJc2VjcDI1NmsxoQPcejrBD05ng3HRiMxZ2VTPdduBJyr9dekFtIqAnEDtWYN0Y3CChW-DdWRwgoVxhXdha3UyAg","listenAddresses":["/ip4/127.0.0.1/tcp/34159/p2p/16Uiu2HAmTVe9LTenJLPqH7t9WaQnAzu52sA6To87wNstbbbHiPYL","/ip4/127.0.0.1/tcp/34160/ws/p2p/16Uiu2HAmTVe9LTenJLPqH7t9WaQnAzu52sA6To87wNstbbbHiPYL","/ip4/172.17.0.6/tcp/34159/p2p/16Uiu2HAmTVe9LTenJLPqH7t9WaQnAzu52sA6To87wNstbbbHiPYL","/ip4/172.17.0.6/tcp/34160/ws/p2p/16Uiu2HAmTVe9LTenJLPqH7t9WaQnAzu52sA6To87wNstbbbHiPYL"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:214 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:34158/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.159.139/tcp/42933/p2p/16Uiu2HAm2cktoKEVmhUt6C1pvKadF9FoCqL9vyWKPmzhFm9EAFXo", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:42932/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/0/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.store:store.py:120 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:42932/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.store:store.py:151 Checking that peer harbor.status.im/wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:42932/store/v1/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F0%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"messages":[{"payload":"U3RvcmUgd29ya3MhIQ==","content_topic":"/myapp/1/latest/proto","version":0,"timestamp":1715570429238633728,"ephemeral":false}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id b0b385d1b7c3
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id f5a981e211f9
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:65 Running fixture teardown: attach_logs_on_fail
[35mDEBUG   [0m tests.conftest:conftest.py:66 Test failed, attempting to attach logs to the allure reports
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/publishing_node1_2024-05-13_03-20-25__346008dd-37e6-4daa-bd71-7d2db9650395__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.libs.common:common.py:30 Attaching file ./log/docker/store_node1_2024-05-13_03-20-25__346008dd-37e6-4daa-bd71-7d2db9650395__harbor.status.im_wakuorg_go-waku:latest.log