[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_lightpush with id: 2024-10-12_03-14-21__0bf478a4-87cf-4c01-9103-202c10379927
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.light_push:light_push.py:27 Running fixture setup: light_push_setup
[35mDEBUG   [0m src.steps.relay:relay.py:28 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-12_03-14-21__0bf478a4-87cf-4c01-9103-202c10379927__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.52.126
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['29271', '29272', '29273', '29274', '29275']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 29271:29271 -p 29272:29272 -p 29273:29273 -p 29274:29274 -p 29275:29275 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29273 --rest-port=29271 --tcp-port=29272 --discv5-udp-port=29274 --rest-address=0.0.0.0 --nat=extip:172.18.52.126 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dbff2363e0fbbaa2adeabee3bbdeded58a30154d63a4eba78ecc0eaf7eeabf9f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29275 --metrics-logging=true --lightpush=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.52.126 waku 6f5262edd0d212168630c57ea3ed264d98597d5009f77bbeed9b3127d7251f12
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 6f5262edd0d2. Setting up logs at ./log/docker/node1_2024-10-12_03-14-21__0bf478a4-87cf-4c01-9103-202c10379927__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 29271
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29271/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29271/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.52.126/tcp/29272/p2p/16Uiu2HAm2gfM2kHxhWnNzN5ZFA39v29mHXf5W2LBUtsEX9QyxcjN","/ip4/172.18.52.126/tcp/29273/ws/p2p/16Uiu2HAm2gfM2kHxhWnNzN5ZFA39v29mHXf5W2LBUtsEX9QyxcjN"],"enrUri":"enr:-LO4QDVZ1M6_nrHKBonheQgZ3dXY8NnAjQrXoNnxHPGZYVnOWcuEcg5x88drYI5Sb5m5b44qOYmUUifk098sRgQQUEQBgmlkgnY0gmlwhKwSNH6KbXVsdGlhZGRyc4wACgSsEjR-BnJZ3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJr2M3O4LoK-xFRqOMbGgpY5EHlVXC0G2i_tRFXJLeS_YN0Y3CCcliDdWRwgnJahXdha3UyCQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-12_03-14-21__0bf478a4-87cf-4c01-9103-202c10379927__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.35.157
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['30711', '30712', '30713', '30714', '30715']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 30711:30711 -p 30712:30712 -p 30713:30713 -p 30714:30714 -p 30715:30715 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=30713 --rest-port=30711 --tcp-port=30712 --discv5-udp-port=30714 --rest-address=0.0.0.0 --nat=extip:172.18.35.157 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ee01e6bf91ab5b191cf95f4818d0d1bafaca0d5f13bfb7edadbbae6bbf65281f --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=30715 --metrics-logging=true --lightpush=false --relay=true --discv5-bootstrap-node=enr:-LO4QDVZ1M6_nrHKBonheQgZ3dXY8NnAjQrXoNnxHPGZYVnOWcuEcg5x88drYI5Sb5m5b44qOYmUUifk098sRgQQUEQBgmlkgnY0gmlwhKwSNH6KbXVsdGlhZGRyc4wACgSsEjR-BnJZ3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJr2M3O4LoK-xFRqOMbGgpY5EHlVXC0G2i_tRFXJLeS_YN0Y3CCcliDdWRwgnJahXdha3UyCQ
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.35.157 waku adda7ef07c1e8d5578938e91a22b071c3abeac29768abecc7cb48e9c873d5acd
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID adda7ef07c1e. Setting up logs at ./log/docker/node1_2024-10-12_03-14-21__0bf478a4-87cf-4c01-9103-202c10379927__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 30711
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30711/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30711/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.35.157/tcp/30712/p2p/16Uiu2HAkvcW8fQzvB6LVF1amdgTozxfgieibM6i21huZcbHCsu6t","/ip4/172.18.35.157/tcp/30713/ws/p2p/16Uiu2HAkvcW8fQzvB6LVF1amdgTozxfgieibM6i21huZcbHCsu6t"],"enrUri":"enr:-LO4QPjeljDEFvN659cmOpybs69_M5u0tfKDRm22XBvyV9WvHUxzvTkzxIgML-ytH0m6OcJ4Vpib7fk_meigz8lEUIYBgmlkgnY0gmlwhKwSI52KbXVsdGlhZGRyc4wACgSsEiOdBnf53QOCcnOFAAMBAACJc2VjcDI1NmsxoQIRofETY87GYaoDKSRtTm6CEkToEy99y7VxcsZvnEwuJYN0Y3CCd_iDdWRwgnf6hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:18 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2024-10-12_03-14-21__0bf478a4-87cf-4c01-9103-202c10379927__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:21 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:24 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:81 Generated random external IP 172.18.62.79
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:74 Generated ports ['57448', '57449', '57450', '57451', '57452']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:48 docker run -i -t -p 57448:57448 -p 57449:57449 -p 57450:57450 -p 57451:57451 -p 57452:57452 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=57450 --rest-port=57448 --tcp-port=57449 --discv5-udp-port=57451 --rest-address=0.0.0.0 --nat=extip:172.18.62.79 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=03d9e94fe6dddca0bfd61ab259bfbcbffe1aafeb714dee3a12ce1aabfe8a9e7d --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --lightpush=true --relay=false --discv5-bootstrap-node=enr:-LO4QDVZ1M6_nrHKBonheQgZ3dXY8NnAjQrXoNnxHPGZYVnOWcuEcg5x88drYI5Sb5m5b44qOYmUUifk098sRgQQUEQBgmlkgnY0gmlwhKwSNH6KbXVsdGlhZGRyc4wACgSsEjR-BnJZ3QOCcnOFAAMBAACJc2VjcDI1NmsxoQJr2M3O4LoK-xFRqOMbGgpY5EHlVXC0G2i_tRFXJLeS_YN0Y3CCcliDdWRwgnJahXdha3UyCQ --lightpushnode=/ip4/172.18.52.126/tcp/29272/p2p/16Uiu2HAm2gfM2kHxhWnNzN5ZFA39v29mHXf5W2LBUtsEX9QyxcjN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 docker network connect --ip 172.18.62.79 waku 7bd6191620eee99cc5ba7d4056044ec52f97a68af1540908ae949bae59c87d30
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:57 Container started with ID 7bd6191620ee. Setting up logs at ./log/docker/node1_2024-10-12_03-14-21__0bf478a4-87cf-4c01-9103-202c10379927__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 57448
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:57448/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QH3HxVropHk4beZ5Mm_53ii5A7W8A4SGOSW_bEXk_K45VvX4FUTfHo9Noz0JXqsmz0kExjIx0c2Cg_8Zurv_-GCGAZJ-uGHPgmlkgnY0gmlwhKwRAAyJc2VjcDI1NmsxoQJSh5gYAG-8k2aec3m1H3L08IHUdD0CCsEaxk8mn8KWx4N0Y3CC4GmDdWRwguBrhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/57449/p2p/16Uiu2HAkzyqLAtLNtNuP1yCPnhfV1WSXHUEd3EaVpW4D7r2DSLRc","/ip4/127.0.0.1/tcp/57450/ws/p2p/16Uiu2HAkzyqLAtLNtNuP1yCPnhfV1WSXHUEd3EaVpW4D7r2DSLRc","/ip4/172.17.0.12/tcp/57449/p2p/16Uiu2HAkzyqLAtLNtNuP1yCPnhfV1WSXHUEd3EaVpW4D7r2DSLRc","/ip4/172.17.0.12/tcp/57450/ws/p2p/16Uiu2HAkzyqLAtLNtNuP1yCPnhfV1WSXHUEd3EaVpW4D7r2DSLRc"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:29271/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:30711/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.steps.light_push:light_push.py:120 Lightpushing message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:57448/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": 1728702866891455488}}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:29271/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1728702866891455488,"ephemeral":false}]'
[35mDEBUG   [0m src.steps.light_push:light_push.py:124 Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:30711/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1728702866891455488,"ephemeral":false}]'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 6f5262edd0d2
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id adda7ef07c1e
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 7bd6191620ee
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:117 No errors found in the waku logs.