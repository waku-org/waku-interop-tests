[35mDEBUG   [0m tests.conftest:conftest.py:43 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:49 Running test: test_publish_with_invalid_timestamps with id: 2024-02-19_06-18-44__fd490adc-9d59-4681-b87d-3f2bbadc86a1
[35mDEBUG   [0m src.steps.relay:relay.py:33 Running fixture setup: relay_setup
[35mDEBUG   [0m src.steps.relay:relay.py:39 Running fixture setup: setup_main_relay_nodes
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:50 WakuNode instance initialized with log path ./log/docker/node1_2024-02-19_06-18-44__fd490adc-9d59-4681-b87d-3f2bbadc86a1__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:54 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:78 Generated random external IP 172.18.139.250
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:71 Generated ports ['5682', '5683', '5684', '5685', '5686']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:277 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:116 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:45 Starting container with image harbor.status.im/wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:46 Using args ['--listen-address=0.0.0.0', '--rest=true', '--rest-admin=true', '--websocket-support=true', '--log-level=TRACE', '--rest-relay-cache-capacity=100', '--websocket-port=5684', '--rest-port=5682', '--tcp-port=5683', '--discv5-udp-port=5685', '--rest-address=0.0.0.0', '--nat=extip:172.18.139.250', '--peer-exchange=true', '--discv5-discovery=true', '--cluster-id=0', '--metrics-server=true', '--metrics-server-address=0.0.0.0', '--metrics-server-port=5686', '--metrics-logging=true', '--relay=true', '--nodekey=30348dd51465150e04a5d9d932c72864c8967f806cce60b5d26afeca1e77eb68']
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 Container started with ID 4993eefc79c3. Setting up logs at ./log/docker/node1_2024-02-19_06-18-44__fd490adc-9d59-4681-b87d-3f2bbadc86a1__harbor.status.im_wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/nwaku:latest. REST: 5682
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:11 GET call: http://127.0.0.1:5682/debug/v1/info with payload: None
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.139.250/tcp/5683/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip","/ip4/172.18.139.250/tcp/5684/ws/p2p/16Uiu2HAmGNtM2rQ8abySFNhqPDFY4cmfAEpfo9Z9fD3NekoFR2ip"],"enrUri":"enr:-Kq4QKpyfuPkMtucucDyLT9OqrqgXC9XE7FnkPEH0Xo7J6qaBr5YqZrfja32-TOIjA5ph-djNN88_orQm6QQQ4G3PioBgmlkgnY0gmlwhKwSi_qKbXVsdGlhZGRyc4wACgSsEov6BhY03QOJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCFjODdWRwghY1hXdha3UyAQ"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:192 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image harbor.status.im/wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:50 WakuNode instance initialized with log path ./log/docker/node2_2024-02-19_06-18-44__fd490adc-9d59-4681-b87d-3f2bbadc86a1__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:54 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:78 Generated random external IP 172.18.206.79
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:71 Generated ports ['44379', '44380', '44381', '44382', '44383']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:277 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:116 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:45 Starting container with image harbor.status.im/wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:46 Using args ['--listen-address=0.0.0.0', '--rest=true', '--rest-admin=true', '--websocket-support=true', '--log-level=DEBUG', '--rest-relay-cache-capacity=100', '--websocket-port=44381', '--rest-port=44379', '--tcp-port=44380', '--discv5-udp-port=44382', '--rest-address=0.0.0.0', '--nat=extip:172.18.206.79', '--peer-exchange=true', '--discv5-discovery=true', '--cluster-id=0', '--min-relay-peers-to-publish=1', '--legacy-filter=false', '--rest-filter-cache-capacity=50', '--relay=true', '--discv5-bootstrap-node=enr:-Kq4QKpyfuPkMtucucDyLT9OqrqgXC9XE7FnkPEH0Xo7J6qaBr5YqZrfja32-TOIjA5ph-djNN88_orQm6QQQ4G3PioBgmlkgnY0gmlwhKwSi_qKbXVsdGlhZGRyc4wACgSsEov6BhY03QOJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCFjODdWRwghY1hXdha3UyAQ']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:54 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:78 Generated random external IP 172.18.97.89
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:71 Generated ports ['21984', '21985', '21986', '21987', '21988']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:277 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:116 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:45 Starting container with image harbor.status.im/wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:46 Using args ['--listen-address=0.0.0.0', '--rest=true', '--rest-admin=true', '--websocket-support=true', '--log-level=DEBUG', '--rest-relay-cache-capacity=100', '--websocket-port=21986', '--rest-port=21984', '--tcp-port=21985', '--discv5-udp-port=21987', '--rest-address=0.0.0.0', '--nat=extip:172.18.97.89', '--peer-exchange=true', '--discv5-discovery=true', '--cluster-id=0', '--min-relay-peers-to-publish=1', '--legacy-filter=false', '--rest-filter-cache-capacity=50', '--relay=true', '--discv5-bootstrap-node=enr:-Kq4QKpyfuPkMtucucDyLT9OqrqgXC9XE7FnkPEH0Xo7J6qaBr5YqZrfja32-TOIjA5ph-djNN88_orQm6QQQ4G3PioBgmlkgnY0gmlwhKwSi_qKbXVsdGlhZGRyc4wACgSsEov6BhY03QOJc2VjcDI1NmsxoQM3Tqpf5eFn4Jztm4gB0Y0JVSJyxyZsW8QR-QU5DZb-PYN0Y3CCFjODdWRwghY1hXdha3UyAQ']
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:54 Container started with ID ebef7e40a0ac. Setting up logs at ./log/docker/node2_2024-02-19_06-18-44__fd490adc-9d59-4681-b87d-3f2bbadc86a1__harbor.status.im_wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:122 Started container from image harbor.status.im/wakuorg/go-waku:latest. REST: 21984
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:11 GET call: http://127.0.0.1:21984/debug/v1/info with payload: None
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ly4QPRhREC7p_kEY7KwqyzJq7K6s2zH0zIhz2m_-GFyHZVacM9JpIfL2AUf-6dS8tOa5KroRSqENS08DTEQ3IiD_CiGAY3ABFlsgmlkgnY0gmlwhKwRAAWKbXVsdGlhZGRyc5gACgSsEQAFBlXi3QMACgR_AAABBlXi3QOJc2VjcDI1NmsxoQNS4On_Llk6mstjwiC_Bycln9vWdC9zrUHUUy00oEnmBIN0Y3CCVeGDdWRwglXjhXdha3UyAQ","listenAddresses":["/ip4/127.0.0.1/tcp/21985/p2p/16Uiu2HAmJEWhNrxd11uZzRvzyvjbr4b16wVCvuhTWYJCPsiXf5eb","/ip4/127.0.0.1/tcp/21986/ws/p2p/16Uiu2HAmJEWhNrxd11uZzRvzyvjbr4b16wVCvuhTWYJCPsiXf5eb","/ip4/172.17.0.5/tcp/21985/p2p/16Uiu2HAmJEWhNrxd11uZzRvzyvjbr4b16wVCvuhTWYJCPsiXf5eb","/ip4/172.17.0.5/tcp/21986/ws/p2p/16Uiu2HAmJEWhNrxd11uZzRvzyvjbr4b16wVCvuhTWYJCPsiXf5eb"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:192 REST service is ready !!
[35mDEBUG   [0m src.steps.relay:relay.py:80 Running fixture setup: subscribe_main_relay_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:11 POST call: http://127.0.0.1:5682/relay/v1/subscriptions with payload: ["/waku/2/rs/0/1"]
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:11 POST call: http://127.0.0.1:21984/relay/v1/subscriptions with payload: ["/waku/2/rs/0/1"]
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:11 POST call: http://127.0.0.1:5682/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F1 with payload: {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": 1708323528103011072}
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.1 seconds
[35mDEBUG   [0m src.steps.relay:relay.py:112 Checking that peer NODE_1:harbor.status.im/wakuorg/nwaku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:11 GET call: http://127.0.0.1:5682/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F1 with payload: None
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1708323528103011072}]'
[35mDEBUG   [0m src.steps.relay:relay.py:112 Checking that peer NODE_2:harbor.status.im/wakuorg/go-waku:latest can find the published message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:11 GET call: http://127.0.0.1:21984/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F1 with payload: None
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1708323528103011072}]'
[32mINFO    [0m src.steps.relay:relay.py:92 WARM UP successful!!
[35mDEBUG   [0m tests.relay.test_publish:test_publish.py:138 Running test with timestamp Timestamp as string number
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:11 POST call: http://127.0.0.1:5682/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F1 with payload: {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": "1708323154280737024"}
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:5682/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F1. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.relay.test_publish:test_publish.py:138 Running test with timestamp Invalid large number
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:11 POST call: http://127.0.0.1:5682/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F1 with payload: {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": 9223372036854775808}
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:5682/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F1. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.relay.test_publish:test_publish.py:138 Running test with timestamp Float number
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:11 POST call: http://127.0.0.1:5682/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F1 with payload: {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": 1.7083231542807393e+18}
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:5682/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F1. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.relay.test_publish:test_publish.py:138 Running test with timestamp Array instead of timestamp
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:11 POST call: http://127.0.0.1:5682/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F1 with payload: {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": [1708323154280741120]}
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:5682/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F1. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.relay.test_publish:test_publish.py:138 Running test with timestamp Object instead of timestamp
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:11 POST call: http://127.0.0.1:5682/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F1 with payload: {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": {"time": 1708323154280742144}}
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:5682/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F1. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.relay.test_publish:test_publish.py:138 Running test with timestamp ISO 8601 timestamp
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:11 POST call: http://127.0.0.1:5682/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F1 with payload: {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": "2023-12-26T10:58:51"}
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:5682/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F1. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.relay.test_publish:test_publish.py:138 Running test with timestamp Missing
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:11 POST call: http://127.0.0.1:5682/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F1 with payload: {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": null}
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:5682/relay/v1/messages/%2Fwaku%2F2%2Frs%2F0%2F1. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:75 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id 4993eefc79c3
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:169 Stopping container with id ebef7e40a0ac
[35mDEBUG   [0m src.node.waku_node:waku_node.py:172 Container stopped.