2025-02-07 03:06:31.618 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-07 03:06:31.618 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_all_with_extra_field with id: 2025-02-07_03-06-31__ac1945ee-f21e-4597-bb28-8d9942d45c19
2025-02-07 03:06:31.618 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-07 03:06:31.619 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-07 03:06:31.619 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-07 03:06:31.625 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 03:06:31.625 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-07_03-06-31__ac1945ee-f21e-4597-bb28-8d9942d45c19__wakuorg_nwaku:latest.log
2025-02-07 03:06:31.625 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 03:06:31.625 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 03:06:31.626 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 03:06:31.627 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.45.40
2025-02-07 03:06:31.627 DEBUG [src.node.docker_mananger] Generated ports ['36704', '36705', '36706', '36707', '36708']
2025-02-07 03:06:31.627 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 03:06:31.627 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 03:06:31.627 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 03:06:31.627 DEBUG [src.node.docker_mananger] docker run -i -t -p 36704:36704 -p 36705:36705 -p 36706:36706 -p 36707:36707 -p 36708:36708 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=36706 --rest-port=36704 --tcp-port=36705 --discv5-udp-port=36707 --rest-address=0.0.0.0 --nat=extip:172.18.45.40 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=065fcc45a9db0ad89c515abc483119c8bf9da0e9a55d42abb7c9efc1d0c4dde7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=36708 --metrics-logging=true --relay=true --filter=true
2025-02-07 03:06:31.854 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.45.40 waku 6d4f38551d3035e7d7c91cb314eec2c70d4a11bc8ee287ab4c6a5e4974d63f0f
2025-02-07 03:06:31.903 DEBUG [src.node.docker_mananger] Container started with ID 6d4f38551d30. Setting up logs at ./log/docker/node1_2025-02-07_03-06-31__ac1945ee-f21e-4597-bb28-8d9942d45c19__wakuorg_nwaku:latest.log
2025-02-07 03:06:31.904 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 36704
2025-02-07 03:06:31.904 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 03:06:32.425 ERROR [src.node.docker_mananger] Max retries reached for container 8e2edbdb2da8. Exiting log stream.
2025-02-07 03:06:32.904 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36704/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 03:06:32.907 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 03:06:32.907 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 03:06:32.907 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:36704/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 03:06:32.909 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.45.40/tcp/36705/p2p/16Uiu2HAmUD7qudnqWPzgQJAPcF9HfPWZicC8a5YZLjVHyP1iQsPD","/ip4/172.18.45.40/tcp/36706/ws/p2p/16Uiu2HAmUD7qudnqWPzgQJAPcF9HfPWZicC8a5YZLjVHyP1iQsPD"],"enrUri":"enr:-L24QGwIQGLFV_lJzgArrKbLKCLxrHZW1am54Qn6u00MRIquElaNxvNtqwsTTWFerUs-BfcojOg3xHnRXzwxghQj9M4CgmlkgnY0gmlwhKwSLSiKbXVsdGlhZGRyc5YACASsEi0oBo9hAAoErBItKAaPYt0DgnJzhQADAQAAiXNlY3AyNTZrMaED5xpc1O2qKw3a8R9csfihqzhtvrP5-xFK_YOr072YhLiDdGNwgo9hg3VkcIKPY4V3YWt1MgU"}'
2025-02-07 03:06:32.910 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 03:06:32.910 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-07 03:06:32.916 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-07 03:06:32.916 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-07_03-06-31__ac1945ee-f21e-4597-bb28-8d9942d45c19__wakuorg_go-waku:latest.log
2025-02-07 03:06:32.916 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 03:06:32.916 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 03:06:32.918 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 03:06:32.918 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.19.34
2025-02-07 03:06:32.918 DEBUG [src.node.docker_mananger] Generated ports ['35041', '35042', '35043', '35044', '35045']
2025-02-07 03:06:32.918 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 03:06:32.918 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 03:06:32.918 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 03:06:32.918 DEBUG [src.node.docker_mananger] docker run -i -t -p 35041:35041 -p 35042:35042 -p 35043:35043 -p 35044:35044 -p 35045:35045 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=35043 --rest-port=35041 --tcp-port=35042 --discv5-udp-port=35044 --rest-address=0.0.0.0 --nat=extip:172.18.19.34 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5b4e8618a3b757d54ecf1b3f60daddf4ebbda7befcaf5ead4cdccd0ad46250e6 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-L24QGwIQGLFV_lJzgArrKbLKCLxrHZW1am54Qn6u00MRIquElaNxvNtqwsTTWFerUs-BfcojOg3xHnRXzwxghQj9M4CgmlkgnY0gmlwhKwSLSiKbXVsdGlhZGRyc5YACASsEi0oBo9hAAoErBItKAaPYt0DgnJzhQADAQAAiXNlY3AyNTZrMaED5xpc1O2qKw3a8R9csfihqzhtvrP5-xFK_YOr072YhLiDdGNwgo9hg3VkcIKPY4V3YWt1MgU --filternode=/ip4/172.18.45.40/tcp/36705/p2p/16Uiu2HAmUD7qudnqWPzgQJAPcF9HfPWZicC8a5YZLjVHyP1iQsPD --pubsub-topic=/waku/2/rs/3/1
2025-02-07 03:06:33.142 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.19.34 waku 88aca30dc8a2795e9363fdbfec0c1f3815bba915622127699d3b088ec11a0921
2025-02-07 03:06:33.196 DEBUG [src.node.docker_mananger] Container started with ID 88aca30dc8a2. Setting up logs at ./log/docker/node2_2025-02-07_03-06-31__ac1945ee-f21e-4597-bb28-8d9942d45c19__wakuorg_go-waku:latest.log
2025-02-07 03:06:33.197 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 35041
2025-02-07 03:06:33.197 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 03:06:34.197 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35041/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 03:06:34.200 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QNs0zy4SECekBsYPmqDZVZNELcIRX6GDQVq1PYV4E1FxJ1SCgzYbH3U3xRirL9wxPOl_AgRsDfGHInbCd47pboSGAZTeX5NjgmlkgnY0gmlwhKwRAAOCcnOFAAMBAAGJc2VjcDI1NmsxoQImEb79y9fGuIpDJNFFaGur2MjzNMSwz5-sR2T8lj5Y24N0Y3CCiOKDdWRwgojkhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/35042/p2p/16Uiu2HAkwzHAenc21PKppCTYxBcmEzcZmbpEFDLsfeaZS1yjjMFp","/ip4/127.0.0.1/tcp/35043/ws/p2p/16Uiu2HAkwzHAenc21PKppCTYxBcmEzcZmbpEFDLsfeaZS1yjjMFp","/ip4/172.17.0.3/tcp/35042/p2p/16Uiu2HAkwzHAenc21PKppCTYxBcmEzcZmbpEFDLsfeaZS1yjjMFp","/ip4/172.17.0.3/tcp/35043/ws/p2p/16Uiu2HAkwzHAenc21PKppCTYxBcmEzcZmbpEFDLsfeaZS1yjjMFp"]}'
2025-02-07 03:06:34.200 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 03:06:34.200 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35041/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.45.40/tcp/36705/p2p/16Uiu2HAmUD7qudnqWPzgQJAPcF9HfPWZicC8a5YZLjVHyP1iQsPD", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-07 03:06:34.202 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-07 03:06:34.203 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-07 03:06:34.203 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:36704/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-07 03:06:34.205 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 03:06:34.206 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35041/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "7d260001-f794-4ba4-8004-7f48cf33f277", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-07 03:06:34.211 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"7d260001-f794-4ba4-8004-7f48cf33f277","statusDesc":"OK"}'
2025-02-07 03:06:34.213 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:35041/filter/v2/subscriptions/all" -H "Content-Type: application/json" -d '{"requestId": 1, "extraField": "extraValue"}'
2025-02-07 03:06:34.215 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:35041/filter/v2/subscriptions/all. Response content: b''
2025-02-07 03:06:34.217 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-07 03:06:34.218 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-07 03:06:34.218 DEBUG [src.node.waku_node] Stopping container with id 6d4f38551d30
2025-02-07 03:06:34.795 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 03:06:34.795 DEBUG [src.node.waku_node] Stopping container with id 88aca30dc8a2
2025-02-07 03:06:35.608 ERROR [src.node.docker_mananger] Max retries reached for container 6d4f38551d30. Exiting log stream.
2025-02-07 03:06:35.695 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 03:06:35.696 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-07 03:06:35.700 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-07 03:06:35.703 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
