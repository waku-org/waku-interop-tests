2025-02-07 03:06:14.279 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-07 03:06:14.279 DEBUG [tests.conftest] Running test: test_lightpush with id: 2025-02-07_03-06-14__bbde34f6-d1c1-4074-8377-aa4bbb8c9e07
2025-02-07 03:06:14.279 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-07 03:06:14.280 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-07 03:06:14.280 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-07 03:06:14.280 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-07 03:06:14.280 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-07 03:06:14.288 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 03:06:14.288 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-07_03-06-14__bbde34f6-d1c1-4074-8377-aa4bbb8c9e07__wakuorg_nwaku:latest.log
2025-02-07 03:06:14.288 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 03:06:14.288 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 03:06:14.289 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 03:06:14.290 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.150.201
2025-02-07 03:06:14.290 DEBUG [src.node.docker_mananger] Generated ports ['38283', '38284', '38285', '38286', '38287']
2025-02-07 03:06:14.290 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 03:06:14.290 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 03:06:14.290 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 03:06:14.290 DEBUG [src.node.docker_mananger] docker run -i -t -p 38283:38283 -p 38284:38284 -p 38285:38285 -p 38286:38286 -p 38287:38287 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=38285 --rest-port=38283 --tcp-port=38284 --discv5-udp-port=38286 --rest-address=0.0.0.0 --nat=extip:172.18.150.201 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7fab9a846bce50483b6e84f49bfae3192ffa4a6aeda3e6bbd7f9bbac9fd53efc --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=38287 --metrics-logging=true --lightpush=true --relay=true
2025-02-07 03:06:14.535 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.150.201 waku f0e32f948ce41d98333b97a54566d09fdfe98a481dea649e8635ad89f768764e
2025-02-07 03:06:14.589 DEBUG [src.node.docker_mananger] Container started with ID f0e32f948ce4. Setting up logs at ./log/docker/node1_2025-02-07_03-06-14__bbde34f6-d1c1-4074-8377-aa4bbb8c9e07__wakuorg_nwaku:latest.log
2025-02-07 03:06:14.591 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 38283
2025-02-07 03:06:14.591 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 03:06:14.639 ERROR [src.node.docker_mananger] Max retries reached for container 1c8651ab777a. Exiting log stream.
2025-02-07 03:06:15.086 ERROR [src.node.docker_mananger] Max retries reached for container 4a456de6359c. Exiting log stream.
2025-02-07 03:06:15.592 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38283/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 03:06:15.594 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 03:06:15.595 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 03:06:15.595 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38283/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 03:06:15.597 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.150.201/tcp/38284/p2p/16Uiu2HAmTDNqtSquF9UimqjNijMiRqhS16M5VR15GxeXwAeZ8XT8","/ip4/172.18.150.201/tcp/38285/ws/p2p/16Uiu2HAmTDNqtSquF9UimqjNijMiRqhS16M5VR15GxeXwAeZ8XT8"],"enrUri":"enr:-L24QC7uC1cErhcFlmZ3Yu9BMjx5N74gnJrXYnk6RrADq-NiLdNM4HUYHC4myB9gNb-WCQgCmCtWDJi3MhxVTpShKSYCgmlkgnY0gmlwhKwSlsmKbXVsdGlhZGRyc5YACASsEpbJBpWMAAoErBKWyQaVjd0DgnJzhQADAQAAiXNlY3AyNTZrMaED2E-ixzWDguA0X-iQKGagrnATOpRaZh1lZHpalkLebJuDdGNwgpWMg3VkcIKVjoV3YWt1Mgk"}'
2025-02-07 03:06:15.597 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 03:06:15.603 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 03:06:15.603 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-07_03-06-14__bbde34f6-d1c1-4074-8377-aa4bbb8c9e07__wakuorg_nwaku:latest.log
2025-02-07 03:06:15.604 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 03:06:15.604 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 03:06:15.605 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 03:06:15.605 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.94.187
2025-02-07 03:06:15.605 DEBUG [src.node.docker_mananger] Generated ports ['43965', '43966', '43967', '43968', '43969']
2025-02-07 03:06:15.605 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 03:06:15.606 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 03:06:15.606 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 03:06:15.606 DEBUG [src.node.docker_mananger] docker run -i -t -p 43965:43965 -p 43966:43966 -p 43967:43967 -p 43968:43968 -p 43969:43969 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=43967 --rest-port=43965 --tcp-port=43966 --discv5-udp-port=43968 --rest-address=0.0.0.0 --nat=extip:172.18.94.187 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7b7bce1fedbf65ad7045087c00611d6fd85dbf4ebfe4cbdea1e578e68e9bb58e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=43969 --metrics-logging=true --lightpush=false --relay=true --discv5-bootstrap-node=enr:-L24QC7uC1cErhcFlmZ3Yu9BMjx5N74gnJrXYnk6RrADq-NiLdNM4HUYHC4myB9gNb-WCQgCmCtWDJi3MhxVTpShKSYCgmlkgnY0gmlwhKwSlsmKbXVsdGlhZGRyc5YACASsEpbJBpWMAAoErBKWyQaVjd0DgnJzhQADAQAAiXNlY3AyNTZrMaED2E-ixzWDguA0X-iQKGagrnATOpRaZh1lZHpalkLebJuDdGNwgpWMg3VkcIKVjoV3YWt1Mgk
2025-02-07 03:06:15.839 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.94.187 waku 8c2dc4ca27e40c59ce686c468c96a8d89d6eb383f4b8d46b192048347a7cda67
2025-02-07 03:06:15.884 DEBUG [src.node.docker_mananger] Container started with ID 8c2dc4ca27e4. Setting up logs at ./log/docker/node1_2025-02-07_03-06-14__bbde34f6-d1c1-4074-8377-aa4bbb8c9e07__wakuorg_nwaku:latest.log
2025-02-07 03:06:15.885 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 43965
2025-02-07 03:06:15.885 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 03:06:16.886 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43965/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 03:06:16.894 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 03:06:16.895 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 03:06:16.895 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43965/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 03:06:16.899 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.94.187/tcp/43966/p2p/16Uiu2HAmF5S4r4x3vSfMWeyEZcGBG5XTcMkxYjUwxLYpotWw2TxW","/ip4/172.18.94.187/tcp/43967/ws/p2p/16Uiu2HAmF5S4r4x3vSfMWeyEZcGBG5XTcMkxYjUwxLYpotWw2TxW"],"enrUri":"enr:-L24QBm1W3awUz7JKuTzPhdERYzGDBLyfklt8KIsiROJoOqkDrirCX73HQkt2bgdX7lxMmLe-x-o3yRtUXwHXvwzSgYCgmlkgnY0gmlwhKwSXruKbXVsdGlhZGRyc5YACASsEl67Bqu-AAoErBJeuwarv90DgnJzhQADAQAAiXNlY3AyNTZrMaEDI_pkGSQlXUHkYsG0UK2lA77_5nPz5yVOQLq21jbxi6ODdGNwgqu-g3VkcIKrwIV3YWt1MgE"}'
2025-02-07 03:06:16.901 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 03:06:16.907 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-07 03:06:16.908 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-07_03-06-14__bbde34f6-d1c1-4074-8377-aa4bbb8c9e07__wakuorg_go-waku:latest.log
2025-02-07 03:06:16.908 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 03:06:16.908 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 03:06:16.909 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 03:06:16.909 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.152.109
2025-02-07 03:06:16.910 DEBUG [src.node.docker_mananger] Generated ports ['37933', '37934', '37935', '37936', '37937']
2025-02-07 03:06:16.910 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 03:06:16.910 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 03:06:16.910 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 03:06:16.910 DEBUG [src.node.docker_mananger] docker run -i -t -p 37933:37933 -p 37934:37934 -p 37935:37935 -p 37936:37936 -p 37937:37937 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=37935 --rest-port=37933 --tcp-port=37934 --discv5-udp-port=37936 --rest-address=0.0.0.0 --nat=extip:172.18.152.109 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eac311ec864abb9b2e87d6a4dc8ed0c801cac3bec58e3a423e6da457964cbbdd --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --lightpush=true --relay=false --discv5-bootstrap-node=enr:-L24QC7uC1cErhcFlmZ3Yu9BMjx5N74gnJrXYnk6RrADq-NiLdNM4HUYHC4myB9gNb-WCQgCmCtWDJi3MhxVTpShKSYCgmlkgnY0gmlwhKwSlsmKbXVsdGlhZGRyc5YACASsEpbJBpWMAAoErBKWyQaVjd0DgnJzhQADAQAAiXNlY3AyNTZrMaED2E-ixzWDguA0X-iQKGagrnATOpRaZh1lZHpalkLebJuDdGNwgpWMg3VkcIKVjoV3YWt1Mgk --lightpushnode=/ip4/172.18.150.201/tcp/38284/p2p/16Uiu2HAmTDNqtSquF9UimqjNijMiRqhS16M5VR15GxeXwAeZ8XT8 --pubsub-topic=/waku/2/rs/3/1
2025-02-07 03:06:17.129 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.152.109 waku 5bfdd656cde7d9e975f0f3cc0b03fbba1ca7886d8b6a2a4cf2ab0eeecbda0929
2025-02-07 03:06:17.183 DEBUG [src.node.docker_mananger] Container started with ID 5bfdd656cde7. Setting up logs at ./log/docker/node1_2025-02-07_03-06-14__bbde34f6-d1c1-4074-8377-aa4bbb8c9e07__wakuorg_go-waku:latest.log
2025-02-07 03:06:17.184 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 37933
2025-02-07 03:06:17.185 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 03:06:18.185 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:37933/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 03:06:18.187 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QJwPCcFBS_hBWesoKZdOPcQZEsfpAlVMCO4LihOpPI__H-LQMuENxYjgWWzT-UNuDm1gJqyJoXRBhknBvA7-dm-GAZTeX1TWgmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQIOc-iG0W2xiGLCJ7v_qnlYu60-5GBTm99SIolJAWkEKoN0Y3CClC6DdWRwgpQwhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/37934/p2p/16Uiu2HAkvQ6CRCKw71oeKtniEPmsgwdoQ7k9bn4is9SviJbHDDMK","/ip4/127.0.0.1/tcp/37935/ws/p2p/16Uiu2HAkvQ6CRCKw71oeKtniEPmsgwdoQ7k9bn4is9SviJbHDDMK","/ip4/172.17.0.4/tcp/37934/p2p/16Uiu2HAkvQ6CRCKw71oeKtniEPmsgwdoQ7k9bn4is9SviJbHDDMK","/ip4/172.17.0.4/tcp/37935/ws/p2p/16Uiu2HAkvQ6CRCKw71oeKtniEPmsgwdoQ7k9bn4is9SviJbHDDMK"]}'
2025-02-07 03:06:18.188 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 03:06:18.188 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:38283/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-07 03:06:18.192 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 03:06:18.193 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:43965/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-07 03:06:18.199 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 03:06:18.200 DEBUG [src.steps.light_push] Lightpushing message
2025-02-07 03:06:18.200 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:37933/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": 1738897578200261632}}'
2025-02-07 03:06:20.005 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-07 03:06:20.007 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-07 03:06:20.107 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-07 03:06:20.108 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:38283/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-07 03:06:20.110 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738897578200261632,"ephemeral":false}]'
2025-02-07 03:06:20.112 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-07 03:06:20.112 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43965/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d 'None'
2025-02-07 03:06:20.114 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1738897578200261632,"ephemeral":false}]'
2025-02-07 03:06:20.117 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-07 03:06:20.118 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-07 03:06:20.118 DEBUG [src.node.waku_node] Stopping container with id f0e32f948ce4
2025-02-07 03:06:21.085 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 03:06:21.085 DEBUG [src.node.waku_node] Stopping container with id 8c2dc4ca27e4
2025-02-07 03:06:21.896 ERROR [src.node.docker_mananger] Max retries reached for container f0e32f948ce4. Exiting log stream.
2025-02-07 03:06:22.579 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 03:06:22.579 DEBUG [src.node.waku_node] Stopping container with id 5bfdd656cde7
2025-02-07 03:06:23.083 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 03:06:23.085 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-07 03:06:23.092 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-07 03:06:23.099 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-07 03:06:23.101 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
