2025-02-07 03:08:41.851 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-07 03:08:41.851 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_with_extra_field with id: 2025-02-07_03-08-41__0c2319a0-9d91-4729-8157-cb5ddf04c2a5
2025-02-07 03:08:41.851 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-07 03:08:41.852 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-07 03:08:41.852 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-07 03:08:41.858 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 03:08:41.858 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-07_03-08-41__0c2319a0-9d91-4729-8157-cb5ddf04c2a5__wakuorg_nwaku:latest.log
2025-02-07 03:08:41.858 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 03:08:41.858 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 03:08:41.861 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 03:08:41.861 ERROR [src.node.docker_mananger] Max retries reached for container b5055845e5cf. Exiting log stream.
2025-02-07 03:08:41.861 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.217.149
2025-02-07 03:08:41.862 DEBUG [src.node.docker_mananger] Generated ports ['29039', '29040', '29041', '29042', '29043']
2025-02-07 03:08:41.862 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 03:08:41.862 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 03:08:41.862 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 03:08:41.862 DEBUG [src.node.docker_mananger] docker run -i -t -p 29039:29039 -p 29040:29040 -p 29041:29041 -p 29042:29042 -p 29043:29043 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=29041 --rest-port=29039 --tcp-port=29040 --discv5-udp-port=29042 --rest-address=0.0.0.0 --nat=extip:172.18.217.149 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=60fee9deacfbee83df244c0d87bdfea6e13b0076779ba4fafbbc9f9baa0acb6c --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=29043 --metrics-logging=true --relay=true --filter=true
2025-02-07 03:08:42.107 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.217.149 waku 895f0c5296bc98c26750991363346cf0a71dcb9cf29bf34cfe46e1b658c49814
2025-02-07 03:08:42.155 DEBUG [src.node.docker_mananger] Container started with ID 895f0c5296bc. Setting up logs at ./log/docker/node1_2025-02-07_03-08-41__0c2319a0-9d91-4729-8157-cb5ddf04c2a5__wakuorg_nwaku:latest.log
2025-02-07 03:08:42.155 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 29039
2025-02-07 03:08:42.155 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 03:08:42.656 ERROR [src.node.docker_mananger] Max retries reached for container 6ea5517ec4b6. Exiting log stream.
2025-02-07 03:08:43.156 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29039/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 03:08:43.159 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 03:08:43.159 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 03:08:43.159 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:29039/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 03:08:43.161 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.217.149/tcp/29040/p2p/16Uiu2HAm64wryReBiSF8ZyQBsgPUE2a5ng8k8NhKXZ9Hh2Vwr89t","/ip4/172.18.217.149/tcp/29041/ws/p2p/16Uiu2HAm64wryReBiSF8ZyQBsgPUE2a5ng8k8NhKXZ9Hh2Vwr89t"],"enrUri":"enr:-L24QFdj-TjvRR-6DO5Xi9zxapEJxEmeR0RlJa3tarpF7ts-Z7thpcjE_HP_qnATHxOwTE_McVthNg03FaUXzfq3aR0CgmlkgnY0gmlwhKwS2ZWKbXVsdGlhZGRyc5YACASsEtmVBnFwAAoErBLZlQZxcd0DgnJzhQADAQAAiXNlY3AyNTZrMaECniFRR_sNBE6lC51MYihbGI3CQLOGxrrAv02H2ZaAWMeDdGNwgnFwg3VkcIJxcoV3YWt1MgU"}'
2025-02-07 03:08:43.161 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 03:08:43.162 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-07 03:08:43.168 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-07 03:08:43.168 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-07_03-08-41__0c2319a0-9d91-4729-8157-cb5ddf04c2a5__wakuorg_go-waku:latest.log
2025-02-07 03:08:43.168 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 03:08:43.168 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 03:08:43.170 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 03:08:43.170 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.168.63
2025-02-07 03:08:43.170 DEBUG [src.node.docker_mananger] Generated ports ['49594', '49595', '49596', '49597', '49598']
2025-02-07 03:08:43.170 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 03:08:43.170 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 03:08:43.171 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 03:08:43.171 DEBUG [src.node.docker_mananger] docker run -i -t -p 49594:49594 -p 49595:49595 -p 49596:49596 -p 49597:49597 -p 49598:49598 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=49596 --rest-port=49594 --tcp-port=49595 --discv5-udp-port=49597 --rest-address=0.0.0.0 --nat=extip:172.18.168.63 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=650fdcf06cfbfceafd7adc493e0da4554fca5d8f106a44c4bf94a2886e5e41e9 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-L24QFdj-TjvRR-6DO5Xi9zxapEJxEmeR0RlJa3tarpF7ts-Z7thpcjE_HP_qnATHxOwTE_McVthNg03FaUXzfq3aR0CgmlkgnY0gmlwhKwS2ZWKbXVsdGlhZGRyc5YACASsEtmVBnFwAAoErBLZlQZxcd0DgnJzhQADAQAAiXNlY3AyNTZrMaECniFRR_sNBE6lC51MYihbGI3CQLOGxrrAv02H2ZaAWMeDdGNwgnFwg3VkcIJxcoV3YWt1MgU --filternode=/ip4/172.18.217.149/tcp/29040/p2p/16Uiu2HAm64wryReBiSF8ZyQBsgPUE2a5ng8k8NhKXZ9Hh2Vwr89t --pubsub-topic=/waku/2/rs/3/1
2025-02-07 03:08:43.403 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.168.63 waku f048d0f72e9494795d5a6e8bafbf9aaec1dbdb345b61a509da1c3c0727ee74a6
2025-02-07 03:08:43.458 DEBUG [src.node.docker_mananger] Container started with ID f048d0f72e94. Setting up logs at ./log/docker/node2_2025-02-07_03-08-41__0c2319a0-9d91-4729-8157-cb5ddf04c2a5__wakuorg_go-waku:latest.log
2025-02-07 03:08:43.459 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 49594
2025-02-07 03:08:43.459 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 03:08:44.459 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49594/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 03:08:44.462 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QLJoBkc1O-8L4O_NBOrIGvAdiNt1povENITsMTfraWB4cdMg1Zi4Mwq0gxBaMywFT81zLfTN1TBQNKlsjXFsQ5SGAZTeYZA6gmlkgnY0gmlwhKwRAAOCcnOFAAMBAAGJc2VjcDI1NmsxoQORkSD7CQ9_lQ0HR0r5xrp1DUeWblkEZmTB5ONjqZj5bYN0Y3CCwbuDdWRwgsG9hXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/49595/p2p/16Uiu2HAmNTDpUyRQRqkUmfe2JywECSTXGFoEd5jKmMDEusSr4YZi","/ip4/127.0.0.1/tcp/49596/ws/p2p/16Uiu2HAmNTDpUyRQRqkUmfe2JywECSTXGFoEd5jKmMDEusSr4YZi","/ip4/172.17.0.3/tcp/49595/p2p/16Uiu2HAmNTDpUyRQRqkUmfe2JywECSTXGFoEd5jKmMDEusSr4YZi","/ip4/172.17.0.3/tcp/49596/ws/p2p/16Uiu2HAmNTDpUyRQRqkUmfe2JywECSTXGFoEd5jKmMDEusSr4YZi"]}'
2025-02-07 03:08:44.462 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 03:08:44.462 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49594/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.217.149/tcp/29040/p2p/16Uiu2HAm64wryReBiSF8ZyQBsgPUE2a5ng8k8NhKXZ9Hh2Vwr89t", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-07 03:08:44.464 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-07 03:08:44.465 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-07 03:08:44.465 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:29039/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-07 03:08:44.468 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 03:08:44.468 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49594/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "9d876542-058b-4719-8ed3-d7a744d1e6bb", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-07 03:08:44.474 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"9d876542-058b-4719-8ed3-d7a744d1e6bb","statusDesc":"OK"}'
2025-02-07 03:08:44.475 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:49594/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "1", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1", "extraField": "extraValue"}'
2025-02-07 03:08:44.480 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"1","statusDesc":"OK"}'
2025-02-07 03:08:44.482 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-07 03:08:44.483 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-07 03:08:44.483 DEBUG [src.node.waku_node] Stopping container with id 895f0c5296bc
2025-02-07 03:08:45.037 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 03:08:45.037 DEBUG [src.node.waku_node] Stopping container with id f048d0f72e94
2025-02-07 03:08:45.849 ERROR [src.node.docker_mananger] Max retries reached for container 895f0c5296bc. Exiting log stream.
2025-02-07 03:08:45.982 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 03:08:45.983 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-07 03:08:45.987 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-07 03:08:45.990 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
