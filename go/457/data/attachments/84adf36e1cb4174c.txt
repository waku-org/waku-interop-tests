2025-02-07 03:06:59.713 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-07 03:06:59.713 DEBUG [tests.conftest] Running test: test_filter_unsubscribe_with_very_large_request_id with id: 2025-02-07_03-06-59__e3ffd2ca-a141-4cc8-8cd6-5f83e24ccc38
2025-02-07 03:06:59.714 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-07 03:06:59.714 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-07 03:06:59.714 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-07 03:06:59.720 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 03:06:59.720 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-07_03-06-59__e3ffd2ca-a141-4cc8-8cd6-5f83e24ccc38__wakuorg_nwaku:latest.log
2025-02-07 03:06:59.720 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 03:06:59.720 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 03:06:59.722 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 03:06:59.722 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.195.78
2025-02-07 03:06:59.722 DEBUG [src.node.docker_mananger] Generated ports ['9984', '9985', '9986', '9987', '9988']
2025-02-07 03:06:59.722 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 03:06:59.722 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 03:06:59.723 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 03:06:59.723 DEBUG [src.node.docker_mananger] docker run -i -t -p 9984:9984 -p 9985:9985 -p 9986:9986 -p 9987:9987 -p 9988:9988 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=9986 --rest-port=9984 --tcp-port=9985 --discv5-udp-port=9987 --rest-address=0.0.0.0 --nat=extip:172.18.195.78 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d6febbed5afed3af8f3ebfebaf95adad5feb1ca76c8acf2f6b99fcd640abadb6 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=9988 --metrics-logging=true --relay=true --filter=true
2025-02-07 03:06:59.947 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.195.78 waku 5354e1cad8b0a923419457935654e6d5f16bf25da7df5c425cd3f82c6debe183
2025-02-07 03:06:59.992 DEBUG [src.node.docker_mananger] Container started with ID 5354e1cad8b0. Setting up logs at ./log/docker/node1_2025-02-07_03-06-59__e3ffd2ca-a141-4cc8-8cd6-5f83e24ccc38__wakuorg_nwaku:latest.log
2025-02-07 03:06:59.993 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 9984
2025-02-07 03:06:59.993 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 03:07:00.514 ERROR [src.node.docker_mananger] Max retries reached for container 80d20e9a349b. Exiting log stream.
2025-02-07 03:07:00.994 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9984/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 03:07:00.997 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 03:07:00.997 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 03:07:00.997 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9984/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 03:07:00.999 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.195.78/tcp/9985/p2p/16Uiu2HAmNpWGpDnNMePsdhn6mCH4YRGRPuwhyfTRDjNopeBMTWiu","/ip4/172.18.195.78/tcp/9986/ws/p2p/16Uiu2HAmNpWGpDnNMePsdhn6mCH4YRGRPuwhyfTRDjNopeBMTWiu"],"enrUri":"enr:-L24QGm7u3Uf_RCfX9luZ4GLZgtGNUXA4fsThhayrmunQd1wDJXX0-lNQNMHvkpfuG6m_EK9Cy9e7XoQBen5AEEih9UCgmlkgnY0gmlwhKwSw06KbXVsdGlhZGRyc5YACASsEsNOBicBAAoErBLDTgYnAt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDlwTuL7OLalXXCg5zsNgrL-nbJ6-4QWGNZB4CQNCCWOKDdGNwgicBg3VkcIInA4V3YWt1MgU"}'
2025-02-07 03:07:00.999 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 03:07:01.000 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-07 03:07:01.006 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-07 03:07:01.006 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-07_03-06-59__e3ffd2ca-a141-4cc8-8cd6-5f83e24ccc38__wakuorg_go-waku:latest.log
2025-02-07 03:07:01.006 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 03:07:01.006 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 03:07:01.007 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 03:07:01.007 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.151.159
2025-02-07 03:07:01.008 DEBUG [src.node.docker_mananger] Generated ports ['34674', '34675', '34676', '34677', '34678']
2025-02-07 03:07:01.008 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 03:07:01.008 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 03:07:01.008 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 03:07:01.008 DEBUG [src.node.docker_mananger] docker run -i -t -p 34674:34674 -p 34675:34675 -p 34676:34676 -p 34677:34677 -p 34678:34678 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=34676 --rest-port=34674 --tcp-port=34675 --discv5-udp-port=34677 --rest-address=0.0.0.0 --nat=extip:172.18.151.159 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=fb877fbec97a2ce6082a99b61c46d570499ea4b48c473631daef5f3142db0ecf --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-L24QGm7u3Uf_RCfX9luZ4GLZgtGNUXA4fsThhayrmunQd1wDJXX0-lNQNMHvkpfuG6m_EK9Cy9e7XoQBen5AEEih9UCgmlkgnY0gmlwhKwSw06KbXVsdGlhZGRyc5YACASsEsNOBicBAAoErBLDTgYnAt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDlwTuL7OLalXXCg5zsNgrL-nbJ6-4QWGNZB4CQNCCWOKDdGNwgicBg3VkcIInA4V3YWt1MgU --filternode=/ip4/172.18.195.78/tcp/9985/p2p/16Uiu2HAmNpWGpDnNMePsdhn6mCH4YRGRPuwhyfTRDjNopeBMTWiu --pubsub-topic=/waku/2/rs/3/1
2025-02-07 03:07:01.232 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.151.159 waku 6c400294cc0551fc12dd1b275b50b27ec7e8d5ac1edde666d1c63316ba577fdc
2025-02-07 03:07:01.289 DEBUG [src.node.docker_mananger] Container started with ID 6c400294cc05. Setting up logs at ./log/docker/node2_2025-02-07_03-06-59__e3ffd2ca-a141-4cc8-8cd6-5f83e24ccc38__wakuorg_go-waku:latest.log
2025-02-07 03:07:01.290 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 34674
2025-02-07 03:07:01.291 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 03:07:02.292 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:34674/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 03:07:02.295 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QD2iy2UpijKnqWaYTP4pFS4FqLh-t4Ynyy0Qflrxe7bnQ3akPQW8avkVTQrI4sUMcmwHpc4KzchA_MsDdZlN-K-GAZTeYAEjgmlkgnY0gmlwhKwRAAOCcnOFAAMBAAGJc2VjcDI1NmsxoQNQn9XcjTzS9ewoFV6RLsfcXifo2E8mfstiZ5pyiinVU4N0Y3CCh3ODdWRwgod1hXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/34675/p2p/16Uiu2HAmJ5iKqrWSDXXssuRZhaBcm8VykhQgrBp9St8GCGePUggA","/ip4/127.0.0.1/tcp/34676/ws/p2p/16Uiu2HAmJ5iKqrWSDXXssuRZhaBcm8VykhQgrBp9St8GCGePUggA","/ip4/172.17.0.3/tcp/34675/p2p/16Uiu2HAmJ5iKqrWSDXXssuRZhaBcm8VykhQgrBp9St8GCGePUggA","/ip4/172.17.0.3/tcp/34676/ws/p2p/16Uiu2HAmJ5iKqrWSDXXssuRZhaBcm8VykhQgrBp9St8GCGePUggA"]}'
2025-02-07 03:07:02.295 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 03:07:02.295 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34674/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.195.78/tcp/9985/p2p/16Uiu2HAmNpWGpDnNMePsdhn6mCH4YRGRPuwhyfTRDjNopeBMTWiu", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-07 03:07:02.297 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-07 03:07:02.298 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-07 03:07:02.298 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9984/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-07 03:07:02.301 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 03:07:02.301 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:34674/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "25def6ff-2592-4f43-b3f9-11a8c8a6f819", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-07 03:07:02.307 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"25def6ff-2592-4f43-b3f9-11a8c8a6f819","statusDesc":"OK"}'
2025-02-07 03:07:02.309 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9984/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2025-02-07 03:07:02.316 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 03:07:02.316 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-07 03:07:02.416 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-07 03:07:02.417 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:34674/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-07 03:07:02.419 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"RmlsdGVyIHdvcmtzISE=","contentTopic":"/test/1/waku-filter/proto","version":0,"timestamp":1738897622309047296,"ephemeral":false}]'
2025-02-07 03:07:02.420 INFO [src.node.api_clients.base_client] curl -v -X DELETE "http://127.0.0.1:34674/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "12345678901234567890123456789012345678901234567890", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-07 03:07:02.425 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"12345678901234567890123456789012345678901234567890","statusDesc":"OK"}'
2025-02-07 03:07:02.426 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:9984/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)'}'
2025-02-07 03:07:02.429 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 03:07:02.429 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-07 03:07:02.530 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-07 03:07:02.530 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:34674/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/%2Ftest%2F1%2Fwaku-filter%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-07 03:07:02.532 ERROR [src.node.api_clients.base_client] HTTP error occurred: 404 Client Error: Not Found for url: http://127.0.0.1:34674/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/%2Ftest%2F1%2Fwaku-filter%2Fproto. Response content: b'not subscribed to pubsubTopic:/waku/2/rs/3/1 contentTopic: /test/1/waku-filter/proto'
2025-02-07 03:07:02.535 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-07 03:07:02.536 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-07 03:07:02.536 DEBUG [src.node.waku_node] Stopping container with id 5354e1cad8b0
2025-02-07 03:07:03.132 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 03:07:03.133 DEBUG [src.node.waku_node] Stopping container with id 6c400294cc05
2025-02-07 03:07:03.782 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 03:07:03.783 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-07 03:07:03.789 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-07 03:07:03.791 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
