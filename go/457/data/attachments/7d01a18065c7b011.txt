2025-02-07 03:07:36.762 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-07 03:07:36.762 DEBUG [tests.conftest] Running test: test_light_push_with_extra_field with id: 2025-02-07_03-07-36__70f7dbf5-2574-40c3-adce-51b94877ef13
2025-02-07 03:07:36.762 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-07 03:07:36.763 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-07 03:07:36.769 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 03:07:36.769 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-07_03-07-36__70f7dbf5-2574-40c3-adce-51b94877ef13__wakuorg_nwaku:latest.log
2025-02-07 03:07:36.769 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 03:07:36.769 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 03:07:36.771 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 03:07:36.771 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.68.21
2025-02-07 03:07:36.771 DEBUG [src.node.docker_mananger] Generated ports ['18011', '18012', '18013', '18014', '18015']
2025-02-07 03:07:36.771 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 03:07:36.771 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 03:07:36.771 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 03:07:36.771 DEBUG [src.node.docker_mananger] docker run -i -t -p 18011:18011 -p 18012:18012 -p 18013:18013 -p 18014:18014 -p 18015:18015 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=18013 --rest-port=18011 --tcp-port=18012 --discv5-udp-port=18014 --rest-address=0.0.0.0 --nat=extip:172.18.68.21 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ea1c1df2775aae4fd61ea0d7ef0f91c8bf8fdc46e7ca9d0cc0ffee8c923defec --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=18015 --metrics-logging=true --lightpush=true --relay=true
2025-02-07 03:07:37.008 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.68.21 waku efc3b51a95b0af9e725aa05e2f574d7ba9e9a77ca9224e536ebf5cafaac879e9
2025-02-07 03:07:37.056 ERROR [src.node.docker_mananger] Max retries reached for container 0e822e24b5ee. Exiting log stream.
2025-02-07 03:07:37.059 DEBUG [src.node.docker_mananger] Container started with ID efc3b51a95b0. Setting up logs at ./log/docker/receiving_node1_2025-02-07_03-07-36__70f7dbf5-2574-40c3-adce-51b94877ef13__wakuorg_nwaku:latest.log
2025-02-07 03:07:37.061 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 18011
2025-02-07 03:07:37.061 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 03:07:37.571 ERROR [src.node.docker_mananger] Max retries reached for container 6df9128eff08. Exiting log stream.
2025-02-07 03:07:38.061 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18011/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 03:07:38.064 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 03:07:38.064 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 03:07:38.065 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18011/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 03:07:38.067 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.68.21/tcp/18012/p2p/16Uiu2HAmEdAx7mcGQ4aGBadALEHceHdMVAUjGxTUPXe66xTK5BCp","/ip4/172.18.68.21/tcp/18013/ws/p2p/16Uiu2HAmEdAx7mcGQ4aGBadALEHceHdMVAUjGxTUPXe66xTK5BCp"],"enrUri":"enr:-L24QOC8cHX683OH2j6jAEvg1QLXjsGCc8qgnLWJyuc92uLQdvmUr3hsl2fOrvV0zP4SIJ25PLw6hic7cLmfIgYjulgCgmlkgnY0gmlwhKwSRBWKbXVsdGlhZGRyc5YACASsEkQVBkZcAAoErBJEFQZGXd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDHUAyv1FkUUYcvoOmy2dujLzbZCVR9fXLguKMPlhhN1WDdGNwgkZcg3VkcIJGXoV3YWt1Mgk"}'
2025-02-07 03:07:38.067 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 03:07:38.074 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 03:07:38.074 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-07_03-07-36__70f7dbf5-2574-40c3-adce-51b94877ef13__wakuorg_nwaku:latest.log
2025-02-07 03:07:38.074 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 03:07:38.074 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 03:07:38.076 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 03:07:38.076 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.12.1
2025-02-07 03:07:38.076 DEBUG [src.node.docker_mananger] Generated ports ['58241', '58242', '58243', '58244', '58245']
2025-02-07 03:07:38.076 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 03:07:38.076 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 03:07:38.077 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 03:07:38.077 DEBUG [src.node.docker_mananger] docker run -i -t -p 58241:58241 -p 58242:58242 -p 58243:58243 -p 58244:58244 -p 58245:58245 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=58243 --rest-port=58241 --tcp-port=58242 --discv5-udp-port=58244 --rest-address=0.0.0.0 --nat=extip:172.18.12.1 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ead4b3d9c6cf375beef6dcfcd4e1fdd64f2d370a4536a68e974dd19c00e62173 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=58245 --metrics-logging=true --lightpush=false --relay=true
2025-02-07 03:07:38.308 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.12.1 waku 42f6ca71c6143c1a4ac5d3b18caf1e79b60e878cbadf8bc97b17cd1738475680
2025-02-07 03:07:38.357 DEBUG [src.node.docker_mananger] Container started with ID 42f6ca71c614. Setting up logs at ./log/docker/receiving_node2_2025-02-07_03-07-36__70f7dbf5-2574-40c3-adce-51b94877ef13__wakuorg_nwaku:latest.log
2025-02-07 03:07:38.358 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 58241
2025-02-07 03:07:38.358 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 03:07:39.358 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58241/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 03:07:39.361 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 03:07:39.362 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 03:07:39.362 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58241/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 03:07:39.364 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.12.1/tcp/58242/p2p/16Uiu2HAkxncSxtPhQu5FkwAXWDG8q1jCA49d7zzfMW6aatiYZ92R","/ip4/172.18.12.1/tcp/58243/ws/p2p/16Uiu2HAkxncSxtPhQu5FkwAXWDG8q1jCA49d7zzfMW6aatiYZ92R"],"enrUri":"enr:-L24QIDPSkjsCkNwF2idJ-ZDsfUMXMUaRcedUUfD2b4kSkQKT227aWCSL-c69YiqJyDDg_QcaBar20c4rgpEGh6ol1ICgmlkgnY0gmlwhKwSDAGKbXVsdGlhZGRyc5YACASsEgwBBuOCAAoErBIMAQbjg90DgnJzhQADAQAAiXNlY3AyNTZrMaECMfBDv_hQv6NE2vHNF0Svea28jh2-3OqHwDsg9GQh6kKDdGNwguOCg3VkcILjhIV3YWt1MgE"}'
2025-02-07 03:07:39.364 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 03:07:39.364 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58241/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.68.21/tcp/18012/p2p/16Uiu2HAmEdAx7mcGQ4aGBadALEHceHdMVAUjGxTUPXe66xTK5BCp"]'
2025-02-07 03:07:39.405 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 03:07:39.414 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-07 03:07:39.415 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-07_03-07-36__70f7dbf5-2574-40c3-adce-51b94877ef13__wakuorg_go-waku:latest.log
2025-02-07 03:07:39.415 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 03:07:39.415 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 03:07:39.417 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 03:07:39.417 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.116.101
2025-02-07 03:07:39.417 DEBUG [src.node.docker_mananger] Generated ports ['46383', '46384', '46385', '46386', '46387']
2025-02-07 03:07:39.417 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 03:07:39.417 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 03:07:39.417 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 03:07:39.418 DEBUG [src.node.docker_mananger] docker run -i -t -p 46383:46383 -p 46384:46384 -p 46385:46385 -p 46386:46386 -p 46387:46387 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=46385 --rest-port=46383 --tcp-port=46384 --discv5-udp-port=46386 --rest-address=0.0.0.0 --nat=extip:172.18.116.101 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c35ab83d6e1cf8ebbf3c3efbfa32fae0b856f9da982e36dab383f18db5fdcb12 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QOC8cHX683OH2j6jAEvg1QLXjsGCc8qgnLWJyuc92uLQdvmUr3hsl2fOrvV0zP4SIJ25PLw6hic7cLmfIgYjulgCgmlkgnY0gmlwhKwSRBWKbXVsdGlhZGRyc5YACASsEkQVBkZcAAoErBJEFQZGXd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDHUAyv1FkUUYcvoOmy2dujLzbZCVR9fXLguKMPlhhN1WDdGNwgkZcg3VkcIJGXoV3YWt1Mgk --lightpushnode=/ip4/172.18.68.21/tcp/18012/p2p/16Uiu2HAmEdAx7mcGQ4aGBadALEHceHdMVAUjGxTUPXe66xTK5BCp --lightpush=true --relay=false --pubsub-topic=/waku/2/rs/3/1
2025-02-07 03:07:39.679 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 03:07:39.679 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 03:07:39.681 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 03:07:39.681 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.106.225
2025-02-07 03:07:39.681 DEBUG [src.node.docker_mananger] Generated ports ['42544', '42545', '42546', '42547', '42548']
2025-02-07 03:07:39.682 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 03:07:39.682 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 03:07:39.682 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 03:07:39.682 DEBUG [src.node.docker_mananger] docker run -i -t -p 42544:42544 -p 42545:42545 -p 42546:42546 -p 42547:42547 -p 42548:42548 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=42546 --rest-port=42544 --tcp-port=42545 --discv5-udp-port=42547 --rest-address=0.0.0.0 --nat=extip:172.18.106.225 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=100fafee070f01f70ab6bce97087c09db252bf05cb47b80dd851ec67e592978c --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QOC8cHX683OH2j6jAEvg1QLXjsGCc8qgnLWJyuc92uLQdvmUr3hsl2fOrvV0zP4SIJ25PLw6hic7cLmfIgYjulgCgmlkgnY0gmlwhKwSRBWKbXVsdGlhZGRyc5YACASsEkQVBkZcAAoErBJEFQZGXd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDHUAyv1FkUUYcvoOmy2dujLzbZCVR9fXLguKMPlhhN1WDdGNwgkZcg3VkcIJGXoV3YWt1Mgk --lightpushnode=/ip4/172.18.68.21/tcp/18012/p2p/16Uiu2HAmEdAx7mcGQ4aGBadALEHceHdMVAUjGxTUPXe66xTK5BCp --lightpush=true --relay=false --pubsub-topic=/waku/2/rs/3/1
2025-02-07 03:07:39.911 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.106.225 waku b430859477eee450b8fdbd11fd947ecb8fa73f2c1571935bf3bb5ed0e8d07a6d
2025-02-07 03:07:39.965 DEBUG [src.node.docker_mananger] Container started with ID b430859477ee. Setting up logs at ./log/docker/lightpush_node1_2025-02-07_03-07-36__70f7dbf5-2574-40c3-adce-51b94877ef13__wakuorg_go-waku:latest.log
2025-02-07 03:07:39.965 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 42544
2025-02-07 03:07:39.965 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 03:07:40.966 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:42544/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 03:07:40.968 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QNhcFfq8jYmDfeBUw14MbcJvlnG8rbigjwbkZ3b-CI3cfZns5tmHz7-ODvN1Nxsqydn0IABxFdNu8A5rBbqcqJeGAZTeYJg2gmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQKD6PhmfRk0cJ9IsWmIvi_nJZqzd-yacOOTAVQnq3sDAYN0Y3CCpjGDdWRwgqYzhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/42545/p2p/16Uiu2HAm4JbRoqspDuuJS5JyNV1Q6Dv7q2muNfc7dWRW97x6tJwz","/ip4/127.0.0.1/tcp/42546/ws/p2p/16Uiu2HAm4JbRoqspDuuJS5JyNV1Q6Dv7q2muNfc7dWRW97x6tJwz","/ip4/172.17.0.4/tcp/42545/p2p/16Uiu2HAm4JbRoqspDuuJS5JyNV1Q6Dv7q2muNfc7dWRW97x6tJwz","/ip4/172.17.0.4/tcp/42546/ws/p2p/16Uiu2HAm4JbRoqspDuuJS5JyNV1Q6Dv7q2muNfc7dWRW97x6tJwz"]}'
2025-02-07 03:07:40.968 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 03:07:40.969 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42544/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.68.21/tcp/18012/p2p/16Uiu2HAmEdAx7mcGQ4aGBadALEHceHdMVAUjGxTUPXe66xTK5BCp", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-07 03:07:40.970 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-07 03:07:40.971 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42544/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.12.1/tcp/58242/p2p/16Uiu2HAkxncSxtPhQu5FkwAXWDG8q1jCA49d7zzfMW6aatiYZ92R", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-07 03:07:40.986 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-07 03:07:40.988 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:18011/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-07 03:07:40.995 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 03:07:40.996 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:58241/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-07 03:07:40.999 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 03:07:41.000 DEBUG [src.steps.light_push] Lightpushing message
2025-02-07 03:07:41.000 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:42544/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738897661000501248, "extraField": "extraValue"}}'
2025-02-07 03:07:41.006 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-07 03:07:41.007 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-07 03:07:41.108 DEBUG [src.steps.light_push] Checking that peer NODE_1:wakuorg/nwaku:latest can find the lightpushed message
2025-02-07 03:07:41.108 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:18011/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-07 03:07:41.111 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738897661000501248,"ephemeral":false}]'
2025-02-07 03:07:41.114 DEBUG [src.steps.light_push] Checking that peer NODE_2:wakuorg/nwaku:latest can find the lightpushed message
2025-02-07 03:07:41.114 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:58241/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
2025-02-07 03:07:41.116 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"TGlnaHQgcHVzaCB3b3JrcyEh","contentTopic":"/myapp/1/latest/proto","version":0,"timestamp":1738897661000501248,"ephemeral":false}]'
2025-02-07 03:07:41.119 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-07 03:07:41.120 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-07 03:07:41.120 DEBUG [src.node.waku_node] Stopping container with id efc3b51a95b0
2025-02-07 03:07:41.698 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 03:07:41.698 DEBUG [src.node.waku_node] Stopping container with id 42f6ca71c614
2025-02-07 03:07:42.511 ERROR [src.node.docker_mananger] Max retries reached for container efc3b51a95b0. Exiting log stream.
2025-02-07 03:07:43.206 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 03:07:43.206 DEBUG [src.node.waku_node] Stopping container with id b430859477ee
2025-02-07 03:07:43.703 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 03:07:43.704 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-07 03:07:43.710 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-07 03:07:43.717 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-07 03:07:43.720 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
