2025-02-07 03:06:56.802 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-07 03:06:56.802 DEBUG [tests.conftest] Running test: test_light_push_with_missing_content_topic with id: 2025-02-07_03-06-56__79e5959a-4f5d-43a5-b34b-b02a5f51cdbd
2025-02-07 03:06:56.803 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-07 03:06:56.803 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-07 03:06:56.809 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 03:06:56.809 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-07_03-06-56__79e5959a-4f5d-43a5-b34b-b02a5f51cdbd__wakuorg_nwaku:latest.log
2025-02-07 03:06:56.809 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 03:06:56.809 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 03:06:56.811 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 03:06:56.811 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.194.166
2025-02-07 03:06:56.811 DEBUG [src.node.docker_mananger] Generated ports ['22404', '22405', '22406', '22407', '22408']
2025-02-07 03:06:56.811 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 03:06:56.811 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 03:06:56.811 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 03:06:56.812 DEBUG [src.node.docker_mananger] docker run -i -t -p 22404:22404 -p 22405:22405 -p 22406:22406 -p 22407:22407 -p 22408:22408 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=22406 --rest-port=22404 --tcp-port=22405 --discv5-udp-port=22407 --rest-address=0.0.0.0 --nat=extip:172.18.194.166 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=0a8fbebec2fb1f05fc359d0f7183ade45d97e79ebc0fd1fb23c3952deac893db --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=22408 --metrics-logging=true --lightpush=true --relay=true
2025-02-07 03:06:57.044 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.194.166 waku 7f9a31cfbd7453d0803a17a73ac32220f2433cbfa5d04e6ea0dc05911a60311a
2025-02-07 03:06:57.083 ERROR [src.node.docker_mananger] Max retries reached for container cf856717f91c. Exiting log stream.
2025-02-07 03:06:57.090 DEBUG [src.node.docker_mananger] Container started with ID 7f9a31cfbd74. Setting up logs at ./log/docker/receiving_node1_2025-02-07_03-06-56__79e5959a-4f5d-43a5-b34b-b02a5f51cdbd__wakuorg_nwaku:latest.log
2025-02-07 03:06:57.090 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 22404
2025-02-07 03:06:57.090 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 03:06:57.568 ERROR [src.node.docker_mananger] Max retries reached for container eec1f9b550c5. Exiting log stream.
2025-02-07 03:06:58.091 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22404/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 03:06:58.094 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 03:06:58.094 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 03:06:58.094 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22404/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 03:06:58.097 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.194.166/tcp/22405/p2p/16Uiu2HAmRqq6CQC2ja5bcyGyqrpgfZqB5vF9gXQ8tVMCGLsSKrzP","/ip4/172.18.194.166/tcp/22406/ws/p2p/16Uiu2HAmRqq6CQC2ja5bcyGyqrpgfZqB5vF9gXQ8tVMCGLsSKrzP"],"enrUri":"enr:-L24QEJz80joxHXqgNURafL1goxkFxWy-HhQuUsse_jVDlvyDRGrc9zBAr90hZ_AA4-ASZRxH8Yho3B5FtwEBIGk6CECgmlkgnY0gmlwhKwSwqaKbXVsdGlhZGRyc5YACASsEsKmBleFAAoErBLCpgZXht0DgnJzhQADAQAAiXNlY3AyNTZrMaEDw-7ZL6MBgmQTvV5UqxykJmUpmgTfySQyv7dmlfkBhsSDdGNwgleFg3VkcIJXh4V3YWt1Mgk"}'
2025-02-07 03:06:58.097 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 03:06:58.103 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 03:06:58.103 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-07_03-06-56__79e5959a-4f5d-43a5-b34b-b02a5f51cdbd__wakuorg_nwaku:latest.log
2025-02-07 03:06:58.103 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 03:06:58.104 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 03:06:58.105 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 03:06:58.105 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.159.159
2025-02-07 03:06:58.105 DEBUG [src.node.docker_mananger] Generated ports ['55312', '55313', '55314', '55315', '55316']
2025-02-07 03:06:58.105 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 03:06:58.106 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 03:06:58.106 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 03:06:58.106 DEBUG [src.node.docker_mananger] docker run -i -t -p 55312:55312 -p 55313:55313 -p 55314:55314 -p 55315:55315 -p 55316:55316 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=55314 --rest-port=55312 --tcp-port=55313 --discv5-udp-port=55315 --rest-address=0.0.0.0 --nat=extip:172.18.159.159 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=2cddb7d0ffbabafd4adced100ce85fc75c0dfbaff11f8ae2ed656fcb4d8af4da --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=55316 --metrics-logging=true --lightpush=false --relay=true
2025-02-07 03:06:58.332 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.159.159 waku 767b73b5bb0357409e3c8bac1c80fe8819acb6b2ba4de00a2b00204443587921
2025-02-07 03:06:58.385 DEBUG [src.node.docker_mananger] Container started with ID 767b73b5bb03. Setting up logs at ./log/docker/receiving_node2_2025-02-07_03-06-56__79e5959a-4f5d-43a5-b34b-b02a5f51cdbd__wakuorg_nwaku:latest.log
2025-02-07 03:06:58.385 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 55312
2025-02-07 03:06:58.385 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 03:06:59.385 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:55312/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 03:06:59.388 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 03:06:59.388 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 03:06:59.389 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:55312/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 03:06:59.391 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.159.159/tcp/55313/p2p/16Uiu2HAmRhFdhp4QvAEfYZjNDnMnjZkKzVft9QuBMCdDXuxdvZqu","/ip4/172.18.159.159/tcp/55314/ws/p2p/16Uiu2HAmRhFdhp4QvAEfYZjNDnMnjZkKzVft9QuBMCdDXuxdvZqu"],"enrUri":"enr:-L24QN-OLvgZ7m53eXcb5aqIF1EcOCuyw86q8ytYeQ2qBpYpABZLN2fdIqXF6typIVDQvrtrFy9ycdJnUFIFCc3UHmcCgmlkgnY0gmlwhKwSn5-KbXVsdGlhZGRyc5YACASsEp-fBtgRAAoErBKfnwbYEt0DgnJzhQADAQAAiXNlY3AyNTZrMaEDwbxfSYDEKUdpMbtPD4w_RK_2YDMCqyFu3w5rjxdV1XyDdGNwgtgRg3VkcILYE4V3YWt1MgE"}'
2025-02-07 03:06:59.391 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 03:06:59.391 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55312/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.194.166/tcp/22405/p2p/16Uiu2HAmRqq6CQC2ja5bcyGyqrpgfZqB5vF9gXQ8tVMCGLsSKrzP"]'
2025-02-07 03:06:59.430 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 03:06:59.439 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-07 03:06:59.439 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-07_03-06-56__79e5959a-4f5d-43a5-b34b-b02a5f51cdbd__wakuorg_go-waku:latest.log
2025-02-07 03:06:59.439 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 03:06:59.439 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 03:06:59.441 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 03:06:59.441 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.130.183
2025-02-07 03:06:59.441 DEBUG [src.node.docker_mananger] Generated ports ['40600', '40601', '40602', '40603', '40604']
2025-02-07 03:06:59.441 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 03:06:59.441 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 03:06:59.442 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 03:06:59.442 DEBUG [src.node.docker_mananger] docker run -i -t -p 40600:40600 -p 40601:40601 -p 40602:40602 -p 40603:40603 -p 40604:40604 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=40602 --rest-port=40600 --tcp-port=40601 --discv5-udp-port=40603 --rest-address=0.0.0.0 --nat=extip:172.18.130.183 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=efd20d4be4a0ec0bf72f4ddd42493f6e0eed33b95c9f1aee67ddbbe4e18fbe5a --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QEJz80joxHXqgNURafL1goxkFxWy-HhQuUsse_jVDlvyDRGrc9zBAr90hZ_AA4-ASZRxH8Yho3B5FtwEBIGk6CECgmlkgnY0gmlwhKwSwqaKbXVsdGlhZGRyc5YACASsEsKmBleFAAoErBLCpgZXht0DgnJzhQADAQAAiXNlY3AyNTZrMaEDw-7ZL6MBgmQTvV5UqxykJmUpmgTfySQyv7dmlfkBhsSDdGNwgleFg3VkcIJXh4V3YWt1Mgk --lightpushnode=/ip4/172.18.194.166/tcp/22405/p2p/16Uiu2HAmRqq6CQC2ja5bcyGyqrpgfZqB5vF9gXQ8tVMCGLsSKrzP --lightpush=true --relay=false --pubsub-topic=/waku/2/rs/3/1
2025-02-07 03:06:59.675 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.130.183 waku f12fef43d998ca9a96b52d85dff6431be221c342c9b1ee004cc824ec1a7551c5
2025-02-07 03:06:59.727 DEBUG [src.node.docker_mananger] Container started with ID f12fef43d998. Setting up logs at ./log/docker/lightpush_node1_2025-02-07_03-06-56__79e5959a-4f5d-43a5-b34b-b02a5f51cdbd__wakuorg_go-waku:latest.log
2025-02-07 03:06:59.729 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 40600
2025-02-07 03:06:59.730 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 03:07:00.731 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40600/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 03:07:00.733 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QO00bDSoYgskuh-QBO5v6B6-wfKbb7OONEzC3zAHI5_RHSsKuoSgxRDDAMH01x0fPia_MmANyY3Xqrtt7mF9f7aGAZTeX_sKgmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQPd7X2GMFI9mcBkObAe0tIoRYAbOlgaXei8ySE3ctEmiYN0Y3CCnpmDdWRwgp6bhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/40601/p2p/16Uiu2HAmTbJVLsrwtPBGggDiK4ALF6QcUo4Pdw7MvjEbhj4MChMA","/ip4/127.0.0.1/tcp/40602/ws/p2p/16Uiu2HAmTbJVLsrwtPBGggDiK4ALF6QcUo4Pdw7MvjEbhj4MChMA","/ip4/172.17.0.4/tcp/40601/p2p/16Uiu2HAmTbJVLsrwtPBGggDiK4ALF6QcUo4Pdw7MvjEbhj4MChMA","/ip4/172.17.0.4/tcp/40602/ws/p2p/16Uiu2HAmTbJVLsrwtPBGggDiK4ALF6QcUo4Pdw7MvjEbhj4MChMA"]}'
2025-02-07 03:07:00.733 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 03:07:00.734 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40600/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.194.166/tcp/22405/p2p/16Uiu2HAmRqq6CQC2ja5bcyGyqrpgfZqB5vF9gXQ8tVMCGLsSKrzP", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-07 03:07:00.735 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-07 03:07:00.736 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40600/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.159.159/tcp/55313/p2p/16Uiu2HAmRhFdhp4QvAEfYZjNDnMnjZkKzVft9QuBMCdDXuxdvZqu", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-07 03:07:00.753 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-07 03:07:00.755 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22404/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-07 03:07:00.761 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 03:07:00.762 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:55312/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-07 03:07:00.765 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 03:07:00.765 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:40600/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/0", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "timestamp": 1738897620765808640}}'
2025-02-07 03:07:00.767 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:40600/lightpush/v1/message. Response content: b'missing ContentTopic field'
2025-02-07 03:07:00.769 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-07 03:07:00.770 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-07 03:07:00.770 DEBUG [src.node.waku_node] Stopping container with id 7f9a31cfbd74
2025-02-07 03:07:01.355 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 03:07:01.355 DEBUG [src.node.waku_node] Stopping container with id 767b73b5bb03
2025-02-07 03:07:02.167 ERROR [src.node.docker_mananger] Max retries reached for container 7f9a31cfbd74. Exiting log stream.
2025-02-07 03:07:02.856 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 03:07:02.857 DEBUG [src.node.waku_node] Stopping container with id f12fef43d998
2025-02-07 03:07:03.368 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 03:07:03.371 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-07 03:07:03.376 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-07 03:07:03.388 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-07 03:07:03.390 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
