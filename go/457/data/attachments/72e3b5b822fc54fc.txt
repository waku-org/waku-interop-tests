2025-02-07 03:07:03.393 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-07 03:07:03.394 DEBUG [tests.conftest] Running test: test_light_push_on_non_subscribed_pubsub_topic with id: 2025-02-07_03-07-03__7cd8ea33-0300-4a66-bbe1-865b872e05b7
2025-02-07 03:07:03.394 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-07 03:07:03.394 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-07 03:07:03.400 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 03:07:03.401 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node1_2025-02-07_03-07-03__7cd8ea33-0300-4a66-bbe1-865b872e05b7__wakuorg_nwaku:latest.log
2025-02-07 03:07:03.401 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 03:07:03.401 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 03:07:03.402 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 03:07:03.402 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.9.32
2025-02-07 03:07:03.402 DEBUG [src.node.docker_mananger] Generated ports ['23847', '23848', '23849', '23850', '23851']
2025-02-07 03:07:03.403 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 03:07:03.403 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 03:07:03.403 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 03:07:03.403 DEBUG [src.node.docker_mananger] docker run -i -t -p 23847:23847 -p 23848:23848 -p 23849:23849 -p 23850:23850 -p 23851:23851 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23849 --rest-port=23847 --tcp-port=23848 --discv5-udp-port=23850 --rest-address=0.0.0.0 --nat=extip:172.18.9.32 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a2bf56afd4ff611f1ebed8f9ff2df1da09a44deb1febeb5a6cea5aab840779f7 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23851 --metrics-logging=true --lightpush=true --relay=true
2025-02-07 03:07:03.634 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.9.32 waku 90ccabd11708e87d8c64f9c24a40b12e2c5d0f585bbd4c961139eda37e464869
2025-02-07 03:07:03.681 DEBUG [src.node.docker_mananger] Container started with ID 90ccabd11708. Setting up logs at ./log/docker/receiving_node1_2025-02-07_03-07-03__7cd8ea33-0300-4a66-bbe1-865b872e05b7__wakuorg_nwaku:latest.log
2025-02-07 03:07:03.681 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 23847
2025-02-07 03:07:03.682 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 03:07:03.696 ERROR [src.node.docker_mananger] Max retries reached for container 767b73b5bb03. Exiting log stream.
2025-02-07 03:07:04.181 ERROR [src.node.docker_mananger] Max retries reached for container f12fef43d998. Exiting log stream.
2025-02-07 03:07:04.683 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23847/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 03:07:04.685 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 03:07:04.686 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 03:07:04.686 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23847/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 03:07:04.688 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.9.32/tcp/23848/p2p/16Uiu2HAmPd2R6xWXgYfVzdF9hvmMxF4wZQyjCRRGwHYRKAZzkzjY","/ip4/172.18.9.32/tcp/23849/ws/p2p/16Uiu2HAmPd2R6xWXgYfVzdF9hvmMxF4wZQyjCRRGwHYRKAZzkzjY"],"enrUri":"enr:-L24QA9Sr355iIh9tZEPX6aDYhXtBVwuMa6GQeCrFdB3-w0dfJOBBw-UxVpegmDpSEdfJQEryRZb9KJ0pC4eKOwlZeECgmlkgnY0gmlwhKwSCSCKbXVsdGlhZGRyc5YACASsEgkgBl0oAAoErBIJIAZdKd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDou-69p4c1JG8xMOhEbOuzASrOaMvm4KlD53yiMb2iy-DdGNwgl0og3VkcIJdKoV3YWt1Mgk"}'
2025-02-07 03:07:04.688 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 03:07:04.694 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 03:07:04.694 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/receiving_node2_2025-02-07_03-07-03__7cd8ea33-0300-4a66-bbe1-865b872e05b7__wakuorg_nwaku:latest.log
2025-02-07 03:07:04.695 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 03:07:04.695 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 03:07:04.696 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 03:07:04.696 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.25.152
2025-02-07 03:07:04.696 DEBUG [src.node.docker_mananger] Generated ports ['63024', '63025', '63026', '63027', '63028']
2025-02-07 03:07:04.696 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 03:07:04.697 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 03:07:04.697 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 03:07:04.697 DEBUG [src.node.docker_mananger] docker run -i -t -p 63024:63024 -p 63025:63025 -p 63026:63026 -p 63027:63027 -p 63028:63028 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=63026 --rest-port=63024 --tcp-port=63025 --discv5-udp-port=63027 --rest-address=0.0.0.0 --nat=extip:172.18.25.152 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=d015e363e51ac13cb49e2d436c683e6fcba7f97df6f2eacd61e9a53a5199ea01 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=63028 --metrics-logging=true --lightpush=false --relay=true
2025-02-07 03:07:04.930 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.25.152 waku d7a0438b3f33dbc28f98eddbfe6483acafe07d609a0a4acf4735da187e7619ab
2025-02-07 03:07:04.978 DEBUG [src.node.docker_mananger] Container started with ID d7a0438b3f33. Setting up logs at ./log/docker/receiving_node2_2025-02-07_03-07-03__7cd8ea33-0300-4a66-bbe1-865b872e05b7__wakuorg_nwaku:latest.log
2025-02-07 03:07:04.978 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 63024
2025-02-07 03:07:04.979 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 03:07:05.979 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63024/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 03:07:05.982 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 03:07:05.982 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 03:07:05.982 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:63024/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 03:07:05.984 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.25.152/tcp/63025/p2p/16Uiu2HAkzkWYuZTgV7arKA6CDH36en6Hba8JwDS8vAvomexZt9TF","/ip4/172.18.25.152/tcp/63026/ws/p2p/16Uiu2HAkzkWYuZTgV7arKA6CDH36en6Hba8JwDS8vAvomexZt9TF"],"enrUri":"enr:-L24QDwbhlHulshXT-Ja5L3dMVSclwYykMmJvygcv_Ggm717BojBJ4VKY6XqIiIdzeNUIo_MP6Ph93od43nPYc1_ckgCgmlkgnY0gmlwhKwSGZiKbXVsdGlhZGRyc5YACASsEhmYBvYxAAoErBIZmAb2Mt0DgnJzhQADAQAAiXNlY3AyNTZrMaECTx3O-qdynCw6XR7G-b2tZlFuYxcDm2KdiGj_aMZYjaqDdGNwgvYxg3VkcIL2M4V3YWt1MgE"}'
2025-02-07 03:07:05.984 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 03:07:05.984 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63024/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.9.32/tcp/23848/p2p/16Uiu2HAmPd2R6xWXgYfVzdF9hvmMxF4wZQyjCRRGwHYRKAZzkzjY"]'
2025-02-07 03:07:06.023 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 03:07:06.032 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-07 03:07:06.032 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/lightpush_node1_2025-02-07_03-07-03__7cd8ea33-0300-4a66-bbe1-865b872e05b7__wakuorg_go-waku:latest.log
2025-02-07 03:07:06.032 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 03:07:06.032 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 03:07:06.033 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 03:07:06.034 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.151.84
2025-02-07 03:07:06.034 DEBUG [src.node.docker_mananger] Generated ports ['49176', '49177', '49178', '49179', '49180']
2025-02-07 03:07:06.034 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 03:07:06.034 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 03:07:06.034 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 03:07:06.034 DEBUG [src.node.docker_mananger] docker run -i -t -p 49176:49176 -p 49177:49177 -p 49178:49178 -p 49179:49179 -p 49180:49180 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=49178 --rest-port=49176 --tcp-port=49177 --discv5-udp-port=49179 --rest-address=0.0.0.0 --nat=extip:172.18.151.84 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1fee284f705e1f18f50171e367bcd5f8c5bc2d7e7f1ae6ddf533be1cd37fc3a4 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QA9Sr355iIh9tZEPX6aDYhXtBVwuMa6GQeCrFdB3-w0dfJOBBw-UxVpegmDpSEdfJQEryRZb9KJ0pC4eKOwlZeECgmlkgnY0gmlwhKwSCSCKbXVsdGlhZGRyc5YACASsEgkgBl0oAAoErBIJIAZdKd0DgnJzhQADAQAAiXNlY3AyNTZrMaEDou-69p4c1JG8xMOhEbOuzASrOaMvm4KlD53yiMb2iy-DdGNwgl0og3VkcIJdKoV3YWt1Mgk --lightpushnode=/ip4/172.18.9.32/tcp/23848/p2p/16Uiu2HAmPd2R6xWXgYfVzdF9hvmMxF4wZQyjCRRGwHYRKAZzkzjY --lightpush=true --relay=false --pubsub-topic=/waku/2/rs/3/1
2025-02-07 03:07:06.267 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.151.84 waku 7e6e48dd75c43eaaf035137bc127c5e9159d3fb4726572372586c4be0f8a70d5
2025-02-07 03:07:06.315 DEBUG [src.node.docker_mananger] Container started with ID 7e6e48dd75c4. Setting up logs at ./log/docker/lightpush_node1_2025-02-07_03-07-03__7cd8ea33-0300-4a66-bbe1-865b872e05b7__wakuorg_go-waku:latest.log
2025-02-07 03:07:06.316 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 49176
2025-02-07 03:07:06.316 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 03:07:07.316 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:49176/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 03:07:07.319 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QP8qQMJJo7BYXKbllLxmPad48iIi1ZSLrqzZxqmg6I2iZ0mOnzIoC1GWh4HjbSbD1cS9L8YHwCmXyzWN2xijF1KGAZTeYBTJgmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQNpWE0vk1k1vCI69EPca9T5uZe4gpOGfF_T1_-yzhHEeIN0Y3CCwBmDdWRwgsAbhXdha3UyCA","listenAddresses":["/ip4/127.0.0.1/tcp/49177/p2p/16Uiu2HAmKkDFdzmCi1iQHJM2SsPq2he6HYMxPCm2DXkgAonNnJ87","/ip4/127.0.0.1/tcp/49178/ws/p2p/16Uiu2HAmKkDFdzmCi1iQHJM2SsPq2he6HYMxPCm2DXkgAonNnJ87","/ip4/172.17.0.4/tcp/49177/p2p/16Uiu2HAmKkDFdzmCi1iQHJM2SsPq2he6HYMxPCm2DXkgAonNnJ87","/ip4/172.17.0.4/tcp/49178/ws/p2p/16Uiu2HAmKkDFdzmCi1iQHJM2SsPq2he6HYMxPCm2DXkgAonNnJ87"]}'
2025-02-07 03:07:07.319 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 03:07:07.319 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49176/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.9.32/tcp/23848/p2p/16Uiu2HAmPd2R6xWXgYfVzdF9hvmMxF4wZQyjCRRGwHYRKAZzkzjY", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-07 03:07:07.321 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-07 03:07:07.321 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49176/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.25.152/tcp/63025/p2p/16Uiu2HAkzkWYuZTgV7arKA6CDH36en6Hba8JwDS8vAvomexZt9TF", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-07 03:07:07.338 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-07 03:07:07.339 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23847/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-07 03:07:07.345 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 03:07:07.346 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:63024/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-07 03:07:07.349 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 03:07:07.350 DEBUG [src.steps.light_push] Lightpushing message
2025-02-07 03:07:07.350 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:49176/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "TGlnaHQgcHVzaCB3b3JrcyEh", "contentTopic": "/myapp/1/latest/proto", "timestamp": 1738897627350499840}}'
2025-02-07 03:07:07.355 ERROR [src.node.api_clients.base_client] HTTP error occurred: 503 Server Error: Service Unavailable for url: http://127.0.0.1:49176/lightpush/v1/message. Response content: b'lightpush errornot_published_to_any_peer'
2025-02-07 03:07:07.358 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-07 03:07:07.358 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-07 03:07:07.359 DEBUG [src.node.waku_node] Stopping container with id 90ccabd11708
2025-02-07 03:07:07.956 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 03:07:07.957 DEBUG [src.node.waku_node] Stopping container with id d7a0438b3f33
2025-02-07 03:07:08.769 ERROR [src.node.docker_mananger] Max retries reached for container 90ccabd11708. Exiting log stream.
2025-02-07 03:07:09.474 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 03:07:09.475 DEBUG [src.node.waku_node] Stopping container with id 7e6e48dd75c4
2025-02-07 03:07:09.969 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 03:07:09.970 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-07 03:07:09.977 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-07 03:07:09.983 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-07 03:07:09.986 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
