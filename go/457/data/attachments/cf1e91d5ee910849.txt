2025-02-07 03:05:55.189 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-07 03:05:55.189 DEBUG [tests.conftest] Running test: test_store_node_not_connected_directly_to_lightpushing_node with id: 2025-02-07_03-05-55__155ed8ee-270b-4b47-8012-4a5963a3774b
2025-02-07 03:05:55.190 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-07 03:05:55.190 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-07 03:05:55.190 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-07 03:05:55.198 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-07 03:05:55.198 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-07_03-05-55__155ed8ee-270b-4b47-8012-4a5963a3774b__wakuorg_go-waku:latest.log
2025-02-07 03:05:55.204 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-07 03:05:55.204 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-07_03-05-55__155ed8ee-270b-4b47-8012-4a5963a3774b__wakuorg_nwaku:latest.log
2025-02-07 03:05:55.209 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-07 03:05:55.209 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node3_2025-02-07_03-05-55__155ed8ee-270b-4b47-8012-4a5963a3774b__wakuorg_go-waku:latest.log
2025-02-07 03:05:55.210 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-07 03:05:55.210 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-07 03:05:55.211 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 03:05:55.211 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 03:05:55.271 DEBUG [src.node.docker_mananger] Network waku created
2025-02-07 03:05:55.271 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.10.198
2025-02-07 03:05:55.271 DEBUG [src.node.docker_mananger] Generated ports ['24038', '24039', '24040', '24041', '24042']
2025-02-07 03:05:55.271 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 03:05:55.272 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 03:05:55.272 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 03:05:55.272 DEBUG [src.node.docker_mananger] docker run -i -t -p 24038:24038 -p 24039:24039 -p 24040:24040 -p 24041:24041 -p 24042:24042 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=24040 --rest-port=24038 --tcp-port=24039 --discv5-udp-port=24041 --rest-address=0.0.0.0 --nat=extip:172.18.10.198 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=5d9dca8575eee5df30e6d91dca8f0a97dadebbeec6da9eabf761aa9afbdadf2f --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --lightpush=true
2025-02-07 03:05:59.320 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.10.198 waku 65440d8bda235ad31c5bb516c618d9b8d844f518bd106848db0a05f45b439a48
2025-02-07 03:05:59.373 DEBUG [src.node.docker_mananger] Container started with ID 65440d8bda23. Setting up logs at ./log/docker/node1_2025-02-07_03-05-55__155ed8ee-270b-4b47-8012-4a5963a3774b__wakuorg_go-waku:latest.log
2025-02-07 03:05:59.375 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 24038
2025-02-07 03:05:59.376 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 03:06:00.376 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:24038/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 03:06:00.379 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QNv6-vXTQD1iLCbNNcfhsylmxKvXwo0pd6xX4VOyIst9W-m_dP_osouF3bfJpkV2FhkwNkVTAFAcbkFkM2E-7OmGAZTeXw9GgmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaECTENVIZ-ZNOHHMd6CE1ipu3FyiI1x5IFbbUd0K0-VMiODdGNwgl3ng3VkcIJd6YV3YWt1Mgk","listenAddresses":["/ip4/127.0.0.1/tcp/24039/p2p/16Uiu2HAkzZNWnGnsCuF9WBPUVEHzs9ZsJrZrtREHdLg2n5xJv4eW","/ip4/127.0.0.1/tcp/24040/ws/p2p/16Uiu2HAkzZNWnGnsCuF9WBPUVEHzs9ZsJrZrtREHdLg2n5xJv4eW","/ip4/172.17.0.2/tcp/24039/p2p/16Uiu2HAkzZNWnGnsCuF9WBPUVEHzs9ZsJrZrtREHdLg2n5xJv4eW","/ip4/172.17.0.2/tcp/24040/ws/p2p/16Uiu2HAkzZNWnGnsCuF9WBPUVEHzs9ZsJrZrtREHdLg2n5xJv4eW"]}'
2025-02-07 03:06:00.379 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 03:06:00.379 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 03:06:00.379 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 03:06:00.381 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 03:06:00.381 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.7.35
2025-02-07 03:06:00.381 DEBUG [src.node.docker_mananger] Generated ports ['33582', '33583', '33584', '33585', '33586']
2025-02-07 03:06:00.381 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 03:06:00.382 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 03:06:00.382 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 03:06:00.382 DEBUG [src.node.docker_mananger] docker run -i -t -p 33582:33582 -p 33583:33583 -p 33584:33584 -p 33585:33585 -p 33586:33586 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=33584 --rest-port=33582 --tcp-port=33583 --discv5-udp-port=33585 --rest-address=0.0.0.0 --nat=extip:172.18.7.35 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=77ab04e7c39aeb581f6dfeaadb5b05bd0a7bf0d5faad1afed13f42d3b3b8bd30 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=33586 --metrics-logging=true --lightpush=true --store=true --relay=true --discv5-bootstrap-node=enr:-J-4QNv6-vXTQD1iLCbNNcfhsylmxKvXwo0pd6xX4VOyIst9W-m_dP_osouF3bfJpkV2FhkwNkVTAFAcbkFkM2E-7OmGAZTeXw9GgmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaECTENVIZ-ZNOHHMd6CE1ipu3FyiI1x5IFbbUd0K0-VMiODdGNwgl3ng3VkcIJd6YV3YWt1Mgk --lightpushnode=/ip4/172.18.10.198/tcp/24039/p2p/16Uiu2HAkzZNWnGnsCuF9WBPUVEHzs9ZsJrZrtREHdLg2n5xJv4eW
2025-02-07 03:06:04.098 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.7.35 waku cad27d87d41dc067ae24e40cc57d8cb1e870f1679b8e293599d3b3797085d630
2025-02-07 03:06:04.151 DEBUG [src.node.docker_mananger] Container started with ID cad27d87d41d. Setting up logs at ./log/docker/node2_2025-02-07_03-05-55__155ed8ee-270b-4b47-8012-4a5963a3774b__wakuorg_nwaku:latest.log
2025-02-07 03:06:04.152 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 33582
2025-02-07 03:06:04.153 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 03:06:05.155 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33582/health" -H "Content-Type: application/json" -d 'None'
2025-02-07 03:06:05.158 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-07 03:06:05.158 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-07 03:06:05.158 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33582/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 03:06:05.161 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.7.35/tcp/33583/p2p/16Uiu2HAmLmU8KYC6WkvFTHu5UjwTLfXXUmBDUA1EM7dmeAyz7U8U","/ip4/172.18.7.35/tcp/33584/ws/p2p/16Uiu2HAmLmU8KYC6WkvFTHu5UjwTLfXXUmBDUA1EM7dmeAyz7U8U"],"enrUri":"enr:-L24QA0foWm2fj-h_8RCXAyKdaoHGJCZR7roTOfiDj8XPb3HOlumVzQXgQUEp5fvFKNwP657NUXjomAWep6_06VkzSECgmlkgnY0gmlwhKwSByOKbXVsdGlhZGRyc5YACASsEgcjBoMvAAoErBIHIwaDMN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDeIZjGtfhyGFE7INCSR7sp10Tj6eGr9zMS_7h8q2q3b2DdGNwgoMvg3VkcIKDMYV3YWt1Mgs"}'
2025-02-07 03:06:05.161 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 03:06:05.161 DEBUG [src.node.waku_node] Starting Node...
2025-02-07 03:06:05.161 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-07 03:06:05.163 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-07 03:06:05.163 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.108.57
2025-02-07 03:06:05.163 DEBUG [src.node.docker_mananger] Generated ports ['9701', '9702', '9703', '9704', '9705']
2025-02-07 03:06:05.163 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-07 03:06:05.163 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-07 03:06:05.163 DEBUG [src.node.waku_node] Using volumes []
2025-02-07 03:06:05.163 DEBUG [src.node.docker_mananger] docker run -i -t -p 9701:9701 -p 9702:9702 -p 9703:9703 -p 9704:9704 -p 9705:9705 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=9703 --rest-port=9701 --tcp-port=9702 --discv5-udp-port=9704 --rest-address=0.0.0.0 --nat=extip:172.18.108.57 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9afc1b6afacbcfb5bf2600fbea1ef3f91a7e67cabbfecfee6d9bf9b2ebd82c6d --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --storenode=/ip4/172.18.7.35/tcp/33583/p2p/16Uiu2HAmLmU8KYC6WkvFTHu5UjwTLfXXUmBDUA1EM7dmeAyz7U8U --discv5-bootstrap-node=enr:-L24QA0foWm2fj-h_8RCXAyKdaoHGJCZR7roTOfiDj8XPb3HOlumVzQXgQUEp5fvFKNwP657NUXjomAWep6_06VkzSECgmlkgnY0gmlwhKwSByOKbXVsdGlhZGRyc5YACASsEgcjBoMvAAoErBIHIwaDMN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDeIZjGtfhyGFE7INCSR7sp10Tj6eGr9zMS_7h8q2q3b2DdGNwgoMvg3VkcIKDMYV3YWt1Mgs --pubsub-topic=/waku/2/rs/3/1
2025-02-07 03:06:05.387 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.108.57 waku 15fef592c1ca8867534e48a2c2546dc24552c5330d7d6c0bba6d7085de659dbe
2025-02-07 03:06:05.434 DEBUG [src.node.docker_mananger] Container started with ID 15fef592c1ca. Setting up logs at ./log/docker/node3_2025-02-07_03-05-55__155ed8ee-270b-4b47-8012-4a5963a3774b__wakuorg_go-waku:latest.log
2025-02-07 03:06:05.435 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 9701
2025-02-07 03:06:05.436 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 03:06:06.436 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9701/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-07 03:06:06.439 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QF7N7Ja0-7B2AdrR2SnvmlrnaZ9lxgv4HlKUFimi1-_QcnSxgbg0JjFMjkpv-1V42GZVLK6kFtg8pB36smxBFPiGAZTeXyb5gmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQMFeg3W8rTv362IBuDZHNPRVy-XBzhvOynYz8uXRUVCq4N0Y3CCJeaDdWRwgiXohXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/9702/p2p/16Uiu2HAmD2NLLzpAHydQ5Tqzt3BLH4vau7EkQH1ztCs8QBeBGfQ6","/ip4/127.0.0.1/tcp/9703/ws/p2p/16Uiu2HAmD2NLLzpAHydQ5Tqzt3BLH4vau7EkQH1ztCs8QBeBGfQ6","/ip4/172.17.0.4/tcp/9702/p2p/16Uiu2HAmD2NLLzpAHydQ5Tqzt3BLH4vau7EkQH1ztCs8QBeBGfQ6","/ip4/172.17.0.4/tcp/9703/ws/p2p/16Uiu2HAmD2NLLzpAHydQ5Tqzt3BLH4vau7EkQH1ztCs8QBeBGfQ6"]}'
2025-02-07 03:06:06.439 INFO [src.node.waku_node] REST service is ready !!
2025-02-07 03:06:06.439 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24038/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-07 03:06:06.442 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-07 03:06:06.442 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33582/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-07 03:06:06.445 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-07 03:06:06.446 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:24038/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-07 03:06:06.447 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"id":"16Uiu2HAmLmU8KYC6WkvFTHu5UjwTLfXXUmBDUA1EM7dmeAyz7U8U","multiaddrs":["/ip4/172.18.7.35/tcp/33583/p2p/16Uiu2HAmLmU8KYC6WkvFTHu5UjwTLfXXUmBDUA1EM7dmeAyz7U8U","/ip4/172.18.7.35/tcp/33584/ws/p2p/16Uiu2HAmLmU8KYC6WkvFTHu5UjwTLfXXUmBDUA1EM7dmeAyz7U8U"],"protocols":null,"connected":false,"pubsubTopics":[]}]'
2025-02-07 03:06:06.448 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33582/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-07 03:06:06.450 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.4/tcp/9702/p2p/16Uiu2HAmD2NLLzpAHydQ5Tqzt3BLH4vau7EkQH1ztCs8QBeBGfQ6","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
2025-02-07 03:06:06.450 DEBUG [src.libs.common] Sleeping for 30 seconds
2025-02-07 03:06:36.451 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:24038/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1738897596451192576}}'
2025-02-07 03:06:36.460 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-07 03:06:36.461 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-07 03:06:37.461 DEBUG [src.steps.store] Checking that peer wakuorg/go-waku:latest can find the stored messages
2025-02-07 03:06:37.462 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9701/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-filter%2Fproto&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-07 03:06:37.468 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"d5a66ba957db3f16224c901dbe8724ceaa1f1ce9f735221d23f94b6b424ffcfe","status_code":200,"status_desc":"OK","messages":[{"message_hash":"jXAm3kVL8MmD+V7o65DNwDle2gAZKLTYqqvSD5P5kYA="}]}'
2025-02-07 03:06:37.471 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-07 03:06:37.471 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-07 03:06:37.472 DEBUG [src.node.waku_node] Stopping container with id 65440d8bda23
2025-02-07 03:06:37.991 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 03:06:37.991 DEBUG [src.node.waku_node] Stopping container with id cad27d87d41d
2025-02-07 03:06:38.785 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 03:06:38.786 DEBUG [src.node.waku_node] Stopping container with id 15fef592c1ca
2025-02-07 03:06:38.808 ERROR [src.node.docker_mananger] Max retries reached for container 65440d8bda23. Exiting log stream.
2025-02-07 03:06:39.279 DEBUG [src.node.waku_node] Container stopped.
2025-02-07 03:06:39.280 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-07 03:06:39.285 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-07 03:06:39.309 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-07 03:06:39.313 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
