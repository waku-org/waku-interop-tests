2025-02-15 03:05:21.746 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-15 03:05:21.746 DEBUG [tests.conftest] Running test: test_filter with id: 2025-02-15_03-05-21__a4591716-efd8-4952-a9b4-3d5b805b89eb
2025-02-15 03:05:21.747 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-15 03:05:21.747 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-15 03:05:21.747 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-15 03:05:21.747 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-15 03:05:21.748 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-15 03:05:21.756 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 03:05:21.756 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-15_03-05-21__a4591716-efd8-4952-a9b4-3d5b805b89eb__wakuorg_nwaku:latest.log
2025-02-15 03:05:21.756 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 03:05:21.756 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 03:05:21.824 DEBUG [src.node.docker_mananger] Network waku created
2025-02-15 03:05:21.825 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.81.113
2025-02-15 03:05:21.825 DEBUG [src.node.docker_mananger] Generated ports ['16244', '16245', '16246', '16247', '16248']
2025-02-15 03:05:21.825 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 03:05:21.825 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 03:05:21.825 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 03:05:21.825 DEBUG [src.node.docker_mananger] docker run -i -t -p 16244:16244 -p 16245:16245 -p 16246:16246 -p 16247:16247 -p 16248:16248 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=16246 --rest-port=16244 --tcp-port=16245 --discv5-udp-port=16247 --rest-address=0.0.0.0 --nat=extip:172.18.81.113 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=1ee70bd07acdf85d5a954d3e2c69abcebc5aa8baa6e3ca34ccdd6cbeca70bcf0 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=16248 --metrics-logging=true --relay=true --filter=true
2025-02-15 03:05:25.060 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.81.113 waku 7acda2bfdce7114e0d2b0642a26a52c9ecce2d24140ffcef8e65f03501a8c247
2025-02-15 03:05:25.110 DEBUG [src.node.docker_mananger] Container started with ID 7acda2bfdce7. Setting up logs at ./log/docker/node1_2025-02-15_03-05-21__a4591716-efd8-4952-a9b4-3d5b805b89eb__wakuorg_nwaku:latest.log
2025-02-15 03:05:25.110 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 16244
2025-02-15 03:05:25.110 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 03:05:26.111 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16244/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 03:05:26.114 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 03:05:26.114 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 03:05:26.114 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:16244/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 03:05:26.116 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.81.113/tcp/16245/p2p/16Uiu2HAmT2gW918czToQBuzx9vJgWAd8U3rCnLyonpcVVbQZTDpa","/ip4/172.18.81.113/tcp/16246/ws/p2p/16Uiu2HAmT2gW918czToQBuzx9vJgWAd8U3rCnLyonpcVVbQZTDpa"],"enrUri":"enr:-L24QH5hPGmGaZJhlOgZpSYjnLbmfmmQdVw-YMpk1QjQIjuQY3Pgb-ZkExd52pBALKqrNP3PupKYiCXHrf9B1Q-wsaICgmlkgnY0gmlwhKwSUXGKbXVsdGlhZGRyc5YACASsElFxBj91AAoErBJRcQY_dt0DgnJzhQADAQAAiXNlY3AyNTZrMaED1ZI28NPHKZOAZoc81zGYV9QAqax8gRgqPiiFbjzkzGeDdGNwgj91g3VkcII_d4V3YWt1MgU"}'
2025-02-15 03:05:26.116 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 03:05:26.122 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-15 03:05:26.123 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-15_03-05-21__a4591716-efd8-4952-a9b4-3d5b805b89eb__wakuorg_go-waku:latest.log
2025-02-15 03:05:26.123 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 03:05:26.123 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 03:05:26.124 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 03:05:26.125 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.0.162
2025-02-15 03:05:26.125 DEBUG [src.node.docker_mananger] Generated ports ['43462', '43463', '43464', '43465', '43466']
2025-02-15 03:05:26.125 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 03:05:26.125 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 03:05:26.125 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 03:05:26.125 DEBUG [src.node.docker_mananger] docker run -i -t -p 43462:43462 -p 43463:43463 -p 43464:43464 -p 43465:43465 -p 43466:43466 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=43464 --rest-port=43462 --tcp-port=43463 --discv5-udp-port=43465 --rest-address=0.0.0.0 --nat=extip:172.18.0.162 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a4ac314befbd978bcaee6289ecade09f4ac50c78e1e6c052f1fa12febbae3d9f --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-L24QH5hPGmGaZJhlOgZpSYjnLbmfmmQdVw-YMpk1QjQIjuQY3Pgb-ZkExd52pBALKqrNP3PupKYiCXHrf9B1Q-wsaICgmlkgnY0gmlwhKwSUXGKbXVsdGlhZGRyc5YACASsElFxBj91AAoErBJRcQY_dt0DgnJzhQADAQAAiXNlY3AyNTZrMaED1ZI28NPHKZOAZoc81zGYV9QAqax8gRgqPiiFbjzkzGeDdGNwgj91g3VkcII_d4V3YWt1MgU --filternode=/ip4/172.18.81.113/tcp/16245/p2p/16Uiu2HAmT2gW918czToQBuzx9vJgWAd8U3rCnLyonpcVVbQZTDpa --pubsub-topic=/waku/2/rs/3/1
2025-02-15 03:05:29.589 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.0.162 waku 847ca904b903f44eefb85c866f4244798cff9c8841adafc0157416ac465df0b0
2025-02-15 03:05:29.640 DEBUG [src.node.docker_mananger] Container started with ID 847ca904b903. Setting up logs at ./log/docker/node1_2025-02-15_03-05-21__a4591716-efd8-4952-a9b4-3d5b805b89eb__wakuorg_go-waku:latest.log
2025-02-15 03:05:29.641 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 43462
2025-02-15 03:05:29.641 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 03:05:30.642 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43462/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 03:05:30.644 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QMm8H1logpNAY_T1wbNjDVac_JG-_2jRQx1ET4JFcZfDWTukrDNTnMqvhK3AlX_L542TVgQyl5bzFhKA1rxZ34mGAZUHkXsmgmlkgnY0gmlwhKwRAAOCcnOFAAMBAAGJc2VjcDI1NmsxoQNb0H_cwKilt0GdN1k3JjPTau2cA1UXkMed4bYjyoyI5IN0Y3CCqceDdWRwgqnJhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/43463/p2p/16Uiu2HAmJqPrCeMWee917DC6avREsMeZ3dVUCJ4bGMn2yZfwHoHm","/ip4/127.0.0.1/tcp/43464/ws/p2p/16Uiu2HAmJqPrCeMWee917DC6avREsMeZ3dVUCJ4bGMn2yZfwHoHm","/ip4/172.17.0.3/tcp/43463/p2p/16Uiu2HAmJqPrCeMWee917DC6avREsMeZ3dVUCJ4bGMn2yZfwHoHm","/ip4/172.17.0.3/tcp/43464/ws/p2p/16Uiu2HAmJqPrCeMWee917DC6avREsMeZ3dVUCJ4bGMn2yZfwHoHm"]}'
2025-02-15 03:05:30.645 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 03:05:30.645 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16244/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-15 03:05:30.648 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 03:05:30.649 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:43462/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "92095e4a-acda-469f-a462-05d85eb97069", "contentFilters": ["/test/1/waku-relay/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-15 03:05:39.002 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"92095e4a-acda-469f-a462-05d85eb97069","statusDesc":"OK"}'
2025-02-15 03:05:39.004 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:16244/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "UmVsYXkgd29ya3MhIQ==", "contentTopic": "/test/1/waku-relay/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 03:05:39.011 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 03:05:39.011 DEBUG [src.libs.common] Sleeping for 0.1 seconds
2025-02-15 03:05:39.111 DEBUG [src.steps.filter] Checking that peer NODE_2:wakuorg/go-waku:latest can find the published message
2025-02-15 03:05:39.112 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43462/filter/v2/messages/%2Fwaku%2F2%2Frs%2F3%2F1/%2Ftest%2F1%2Fwaku-relay%2Fproto" -H "Content-Type: application/json" -d 'None'
2025-02-15 03:05:39.114 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"payload":"UmVsYXkgd29ya3MhIQ==","contentTopic":"/test/1/waku-relay/proto","version":0,"timestamp":1739588739004012032,"ephemeral":false}]'
2025-02-15 03:05:39.119 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-15 03:05:39.120 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-15 03:05:39.120 DEBUG [src.node.waku_node] Stopping container with id 7acda2bfdce7
2025-02-15 03:05:40.475 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 03:05:40.476 DEBUG [src.node.waku_node] Stopping container with id 847ca904b903
2025-02-15 03:05:40.985 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 03:05:40.986 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-15 03:05:40.997 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-15 03:05:41.000 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
