[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_filter_get_message_with_extra_field with id: 2025-02-15_03-06-52__6c6866c3-be3c-44d3-92c1-225d3303da68
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.filter:filter.py:28 Running fixture setup: filter_setup
[35mDEBUG   [0m src.steps.filter:filter.py:34 Running fixture setup: setup_main_relay_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node1_2025-02-15_03-06-52__6c6866c3-be3c-44d3-92c1-225d3303da68__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.169.61
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['43766', '43767', '43768', '43769', '43770']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 43766:43766 -p 43767:43767 -p 43768:43768 -p 43769:43769 -p 43770:43770 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=43768 --rest-port=43766 --tcp-port=43767 --discv5-udp-port=43769 --rest-address=0.0.0.0 --nat=extip:172.18.169.61 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ead4dd4c2c365f36aa4376c46c5df22c1f6ed8ccf39a4becefac8dc6a3e361c9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=43770 --metrics-logging=true --relay=true --filter=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.169.61 waku 869c0c64aa2f8ba7b1d79a0ee50abeed5184205b13f72c0b567fcca556276b21
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 869c0c64aa2f. Setting up logs at ./log/docker/node1_2025-02-15_03-06-52__6c6866c3-be3c-44d3-92c1-225d3303da68__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/nwaku:latest. REST: 43766
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 69eef4b6fe91. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43766/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:43766/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.169.61/tcp/43767/p2p/16Uiu2HAmQt8Tjh85wmEt8jiHiKDGnFbPWrs1Z5n1UuVCNdsb6Qdo","/ip4/172.18.169.61/tcp/43768/ws/p2p/16Uiu2HAmQt8Tjh85wmEt8jiHiKDGnFbPWrs1Z5n1UuVCNdsb6Qdo"],"enrUri":"enr:-L24QLx1-t_gmiLKGERKhWpI-F_EUpMb8pUqcXEWk49JfIBJIaYFPw5YT3Q11uCVgH069zUtskove4X5QMxU2_RzDhkCgmlkgnY0gmlwhKwSqT2KbXVsdGlhZGRyc5YACASsEqk9Bqr3AAoErBKpPQaq-N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDtan3Br8s6KEafAHv9TtpvYWxGodkCU1RGEYbZNx51zqDdGNwgqr3g3VkcIKq-YV3YWt1MgU"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[35mDEBUG   [0m src.steps.filter:filter.py:39 Running fixture setup: setup_main_filter_node
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/node2_2025-02-15_03-06-52__6c6866c3-be3c-44d3-92c1-225d3303da68__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.5.78
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['35562', '35563', '35564', '35565', '35566']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:439 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:168 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:170 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 35562:35562 -p 35563:35563 -p 35564:35564 -p 35565:35565 -p 35566:35566 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=35564 --rest-port=35562 --tcp-port=35563 --discv5-udp-port=35565 --rest-address=0.0.0.0 --nat=extip:172.18.5.78 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=af71d32c316ec2f7fbe9eaebd26e714adef549137faa29007ba3ebd56b4d9646 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-L24QLx1-t_gmiLKGERKhWpI-F_EUpMb8pUqcXEWk49JfIBJIaYFPw5YT3Q11uCVgH069zUtskove4X5QMxU2_RzDhkCgmlkgnY0gmlwhKwSqT2KbXVsdGlhZGRyc5YACASsEqk9Bqr3AAoErBKpPQaq-N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDtan3Br8s6KEafAHv9TtpvYWxGodkCU1RGEYbZNx51zqDdGNwgqr3g3VkcIKq-YV3YWt1MgU --filternode=/ip4/172.18.169.61/tcp/43767/p2p/16Uiu2HAmQt8Tjh85wmEt8jiHiKDGnFbPWrs1Z5n1UuVCNdsb6Qdo --pubsub-topic=/waku/2/rs/3/1
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.5.78 waku c184c601c754cf38a5f8125e4f6cd5fbcfc6c8c7c8cd4e6815bdaa4e6d948930
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID c184c601c754. Setting up logs at ./log/docker/node2_2025-02-15_03-06-52__6c6866c3-be3c-44d3-92c1-225d3303da68__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:182 Started container from image wakuorg/go-waku:latest. REST: 35562
[35mDEBUG   [0m src.libs.common:common.py:47 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:35562/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QG3ANUIriXy1tfQ7l-6WmfiyW2Z_pUJOJHHb-QTyZHpDKuy67F6JMrTZIOVIPMfFWT5gLwP6H23AmgZiPx4oqRuGAZUHksPWgmlkgnY0gmlwhKwRAAOCcnOFAAMBAAGJc2VjcDI1NmsxoQI9SB7KKOv5sEjGhK_nEEfaFj1pYDjtiTEGGxS5rbKdsoN0Y3CCiuuDdWRwgorthXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/35563/p2p/16Uiu2HAkyYtdfzrucpp6gpG6V7hYdJjzKic2LPJwHHZMCBtzwR2y","/ip4/127.0.0.1/tcp/35564/ws/p2p/16Uiu2HAkyYtdfzrucpp6gpG6V7hYdJjzKic2LPJwHHZMCBtzwR2y","/ip4/172.17.0.3/tcp/35563/p2p/16Uiu2HAkyYtdfzrucpp6gpG6V7hYdJjzKic2LPJwHHZMCBtzwR2y","/ip4/172.17.0.3/tcp/35564/ws/p2p/16Uiu2HAkyYtdfzrucpp6gpG6V7hYdJjzKic2LPJwHHZMCBtzwR2y"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:287 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35562/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.169.61/tcp/43767/p2p/16Uiu2HAmQt8Tjh85wmEt8jiHiKDGnFbPWrs1Z5n1UuVCNdsb6Qdo", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[35mDEBUG   [0m src.steps.filter:filter.py:47 Running fixture setup: subscribe_main_nodes
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43766/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:35562/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "16b5434f-9935-4866-afe3-acafd0e797df", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"16b5434f-9935-4866-afe3-acafd0e797df","statusDesc":"OK"}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:43766/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "extraField": "extraValue"}'
[31m[1mERROR   [0m src.node.api_clients.base_client:base_client.py:16 HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:43766/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id 869c0c64aa2f
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:226 Stopping container with id c184c601c754
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 869c0c64aa2f. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:233 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.