2025-02-15 03:04:30.701 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-15 03:04:30.702 DEBUG [tests.conftest] Running test: test_store_node_not_connected_directly_to_lightpushing_node with id: 2025-02-15_03-04-30__342a47a0-ceb0-4322-bc76-743e6308d1cf
2025-02-15 03:04:30.702 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-15 03:04:30.702 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-15 03:04:30.703 DEBUG [src.steps.light_push] Running fixture setup: light_push_setup
2025-02-15 03:04:30.711 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-15 03:04:30.711 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-15_03-04-30__342a47a0-ceb0-4322-bc76-743e6308d1cf__wakuorg_go-waku:latest.log
2025-02-15 03:04:30.717 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 03:04:30.717 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-15_03-04-30__342a47a0-ceb0-4322-bc76-743e6308d1cf__wakuorg_nwaku:latest.log
2025-02-15 03:04:30.722 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-15 03:04:30.722 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node3_2025-02-15_03-04-30__342a47a0-ceb0-4322-bc76-743e6308d1cf__wakuorg_go-waku:latest.log
2025-02-15 03:04:30.723 DEBUG [src.steps.relay] Running fixture setup: relay_setup
2025-02-15 03:04:30.723 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-15 03:04:30.724 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 03:04:30.724 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 03:04:30.786 DEBUG [src.node.docker_mananger] Network waku created
2025-02-15 03:04:30.786 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.202.1
2025-02-15 03:04:30.786 DEBUG [src.node.docker_mananger] Generated ports ['6180', '6181', '6182', '6183', '6184']
2025-02-15 03:04:30.786 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 03:04:30.786 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 03:04:30.786 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 03:04:30.786 DEBUG [src.node.docker_mananger] docker run -i -t -p 6180:6180 -p 6181:6181 -p 6182:6182 -p 6183:6183 -p 6184:6184 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=6182 --rest-port=6180 --tcp-port=6181 --discv5-udp-port=6183 --rest-address=0.0.0.0 --nat=extip:172.18.202.1 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=9aafd6adcbf22dadf1e151e68cdef2ea0b29d0c83b25d386c86fceff3dfcc6a4 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --lightpush=true
2025-02-15 03:04:34.477 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.202.1 waku 57a5b5d088a585bf6bb413b65be27a93ddf8b2841d0b47da45481059525011eb
2025-02-15 03:04:34.534 DEBUG [src.node.docker_mananger] Container started with ID 57a5b5d088a5. Setting up logs at ./log/docker/node1_2025-02-15_03-04-30__342a47a0-ceb0-4322-bc76-743e6308d1cf__wakuorg_go-waku:latest.log
2025-02-15 03:04:34.535 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 6180
2025-02-15 03:04:34.535 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 03:04:35.535 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6180/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 03:04:35.538 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QEB2KFU-QpLhP_0A29c6pH5aay_P6yEysDe9bD99hopIFGybKWZgEvnOQkTcYMIrxnNnx7xn-z4QFKJsV79Gzi2GAZUHkKPZgmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaEDL9-2omTg-xTbYRQ99IvtosGglSMVJOacddp0PZh5DzeDdGNwghglg3VkcIIYJ4V3YWt1Mgk","listenAddresses":["/ip4/127.0.0.1/tcp/6181/p2p/16Uiu2HAmFssNAUQyLJFQCwia4JYNL2h7xzo8sLBiY1mdiHy7YRhG","/ip4/127.0.0.1/tcp/6182/ws/p2p/16Uiu2HAmFssNAUQyLJFQCwia4JYNL2h7xzo8sLBiY1mdiHy7YRhG","/ip4/172.17.0.2/tcp/6181/p2p/16Uiu2HAmFssNAUQyLJFQCwia4JYNL2h7xzo8sLBiY1mdiHy7YRhG","/ip4/172.17.0.2/tcp/6182/ws/p2p/16Uiu2HAmFssNAUQyLJFQCwia4JYNL2h7xzo8sLBiY1mdiHy7YRhG"]}'
2025-02-15 03:04:35.538 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 03:04:35.539 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 03:04:35.539 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 03:04:35.540 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 03:04:35.540 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.176.83
2025-02-15 03:04:35.540 DEBUG [src.node.docker_mananger] Generated ports ['13490', '13491', '13492', '13493', '13494']
2025-02-15 03:04:35.541 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 03:04:35.541 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 03:04:35.541 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 03:04:35.541 DEBUG [src.node.docker_mananger] docker run -i -t -p 13490:13490 -p 13491:13491 -p 13492:13492 -p 13493:13493 -p 13494:13494 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=13492 --rest-port=13490 --tcp-port=13491 --discv5-udp-port=13493 --rest-address=0.0.0.0 --nat=extip:172.18.176.83 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=c02802ccac1efa8fdf2b49f424a5983bb4e95cf06970d7c8cfb5e6412ccdb87e --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=13494 --metrics-logging=true --lightpush=true --store=true --relay=true --discv5-bootstrap-node=enr:-J-4QEB2KFU-QpLhP_0A29c6pH5aay_P6yEysDe9bD99hopIFGybKWZgEvnOQkTcYMIrxnNnx7xn-z4QFKJsV79Gzi2GAZUHkKPZgmlkgnY0gmlwhKwRAAKCcnODAAMAiXNlY3AyNTZrMaEDL9-2omTg-xTbYRQ99IvtosGglSMVJOacddp0PZh5DzeDdGNwghglg3VkcIIYJ4V3YWt1Mgk --lightpushnode=/ip4/172.18.202.1/tcp/6181/p2p/16Uiu2HAmFssNAUQyLJFQCwia4JYNL2h7xzo8sLBiY1mdiHy7YRhG
2025-02-15 03:04:38.605 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.176.83 waku 8aef29b804047af6a294b300de69e160ed3ce78fa417a7bcdda9cffb7c4ac5d1
2025-02-15 03:04:38.675 DEBUG [src.node.docker_mananger] Container started with ID 8aef29b80404. Setting up logs at ./log/docker/node2_2025-02-15_03-04-30__342a47a0-ceb0-4322-bc76-743e6308d1cf__wakuorg_nwaku:latest.log
2025-02-15 03:04:38.676 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 13490
2025-02-15 03:04:38.676 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 03:04:39.677 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:13490/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 03:04:39.680 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 03:04:39.680 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 03:04:39.680 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:13490/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 03:04:39.682 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.176.83/tcp/13491/p2p/16Uiu2HAmN7tks1Km3PGpotgMes6gW4kkjvyPXUV7o94fHgh2hoNC","/ip4/172.18.176.83/tcp/13492/ws/p2p/16Uiu2HAmN7tks1Km3PGpotgMes6gW4kkjvyPXUV7o94fHgh2hoNC"],"enrUri":"enr:-L24QJZROy-vpn2i8P14CfCmnaBmRgmmqaVkjnY21XaKkuHfbhqIDkyIQr2AqDrNm5oESnwTqT9N3UjhNuEec-L-f6YCgmlkgnY0gmlwhKwSsFOKbXVsdGlhZGRyc5YACASsErBTBjSzAAoErBKwUwY0tN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDjJ2KHbLHbQoU6MGLMR1NIO0EIQxxK0Ujo5H6ZBNuRVWDdGNwgjSzg3VkcII0tYV3YWt1Mgs"}'
2025-02-15 03:04:39.683 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 03:04:39.683 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 03:04:39.683 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 03:04:39.685 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 03:04:39.685 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.102.211
2025-02-15 03:04:39.685 DEBUG [src.node.docker_mananger] Generated ports ['54719', '54720', '54721', '54722', '54723']
2025-02-15 03:04:39.685 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 03:04:39.685 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 03:04:39.685 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 03:04:39.685 DEBUG [src.node.docker_mananger] docker run -i -t -p 54719:54719 -p 54720:54720 -p 54721:54721 -p 54722:54722 -p 54723:54723 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=54721 --rest-port=54719 --tcp-port=54720 --discv5-udp-port=54722 --rest-address=0.0.0.0 --nat=extip:172.18.102.211 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=93dbf9327bb1cdae651c0d7d9822d2c0cba16eba7feecaa159e80d07eebac9fd --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --storenode=/ip4/172.18.176.83/tcp/13491/p2p/16Uiu2HAmN7tks1Km3PGpotgMes6gW4kkjvyPXUV7o94fHgh2hoNC --discv5-bootstrap-node=enr:-L24QJZROy-vpn2i8P14CfCmnaBmRgmmqaVkjnY21XaKkuHfbhqIDkyIQr2AqDrNm5oESnwTqT9N3UjhNuEec-L-f6YCgmlkgnY0gmlwhKwSsFOKbXVsdGlhZGRyc5YACASsErBTBjSzAAoErBKwUwY0tN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDjJ2KHbLHbQoU6MGLMR1NIO0EIQxxK0Ujo5H6ZBNuRVWDdGNwgjSzg3VkcII0tYV3YWt1Mgs --pubsub-topic=/waku/2/rs/3/1
2025-02-15 03:04:39.912 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.102.211 waku 1e531cca78e1f9c25b727636ee0333d5bdc04f65a3c47c8c9a3e10f4536df8ce
2025-02-15 03:04:39.966 DEBUG [src.node.docker_mananger] Container started with ID 1e531cca78e1. Setting up logs at ./log/docker/node3_2025-02-15_03-04-30__342a47a0-ceb0-4322-bc76-743e6308d1cf__wakuorg_go-waku:latest.log
2025-02-15 03:04:39.967 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 54719
2025-02-15 03:04:39.968 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 03:04:40.968 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54719/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 03:04:40.971 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QIHBWMW7r3UQdhoGGqkHJYtLxQxJvXTW9sIzdcyQxfyHCQYw8EBLvApupSpFcq-64rVJPqM1l0ICQLo9NeQBVIGGAZUHkLkXgmlkgnY0gmlwhKwRAASCcnOFAAMBAAGJc2VjcDI1NmsxoQLDAom0MpqE-neKDuGuwbdTv8QVXvwZnyKF9H742tX9OoN0Y3CC1cCDdWRwgtXChXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/54720/p2p/16Uiu2HAm8Yuj3BCZ1t3HR5gL7fB2L67GBofWQhGt8ANDCnEyHRJZ","/ip4/127.0.0.1/tcp/54721/ws/p2p/16Uiu2HAm8Yuj3BCZ1t3HR5gL7fB2L67GBofWQhGt8ANDCnEyHRJZ","/ip4/172.17.0.4/tcp/54720/p2p/16Uiu2HAm8Yuj3BCZ1t3HR5gL7fB2L67GBofWQhGt8ANDCnEyHRJZ","/ip4/172.17.0.4/tcp/54721/ws/p2p/16Uiu2HAm8Yuj3BCZ1t3HR5gL7fB2L67GBofWQhGt8ANDCnEyHRJZ"]}'
2025-02-15 03:04:40.971 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 03:04:40.971 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6180/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-15 03:04:40.974 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-15 03:04:40.974 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:13490/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-15 03:04:40.977 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 03:04:40.977 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6180/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-15 03:04:40.979 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[]'
2025-02-15 03:04:41.979 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6180/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-15 03:04:41.981 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[]'
2025-02-15 03:04:42.982 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:6180/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-15 03:04:42.984 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"id":"16Uiu2HAmN7tks1Km3PGpotgMes6gW4kkjvyPXUV7o94fHgh2hoNC","multiaddrs":["/ip4/172.18.176.83/tcp/13491/p2p/16Uiu2HAmN7tks1Km3PGpotgMes6gW4kkjvyPXUV7o94fHgh2hoNC","/ip4/172.18.176.83/tcp/13492/ws/p2p/16Uiu2HAmN7tks1Km3PGpotgMes6gW4kkjvyPXUV7o94fHgh2hoNC"],"protocols":["/vac/waku/filter-push/2.0.0-beta1","/vac/waku/store-query/3.0.0","/vac/waku/relay/2.0.0","/vac/waku/lightpush/2.0.0-beta1","/vac/waku/store/2.0.0-beta4"],"connected":true,"pubsubTopics":["/waku/2/rs/3/0","/waku/2/rs/3/1"]}]'
2025-02-15 03:04:42.985 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:13490/admin/v1/peers" -H "Content-Type: application/json" -d 'None'
2025-02-15 03:04:42.988 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'[{"multiaddr":"/ip4/172.17.0.2/tcp/6181/p2p/16Uiu2HAmFssNAUQyLJFQCwia4JYNL2h7xzo8sLBiY1mdiHy7YRhG","protocols":[{"protocol":"/vac/waku/relay/2.0.0","connected":true},{"protocol":"/vac/waku/lightpush/2.0.0-beta1","connected":true}],"origin":"Discv5"},{"multiaddr":"/ip4/172.17.0.4/tcp/54720/p2p/16Uiu2HAm8Yuj3BCZ1t3HR5gL7fB2L67GBofWQhGt8ANDCnEyHRJZ","protocols":[{"protocol":"/vac/waku/peer-exchange/2.0.0-alpha1","connected":true}],"origin":"UnknownOrigin"}]'
2025-02-15 03:04:42.988 DEBUG [src.libs.common] Sleeping for 30 seconds
2025-02-15 03:05:12.989 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:6180/lightpush/v1/message" -H "Content-Type: application/json" -d '{"pubsubTopic": "/waku/2/rs/3/1", "message": {"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": 1739588712988920320}}'
2025-02-15 03:05:12.997 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-15 03:05:12.997 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 03:05:13.998 DEBUG [src.steps.store] Checking that peer wakuorg/go-waku:latest can find the stored messages
2025-02-15 03:05:13.998 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:54719/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F1&contentTopics=%2Ftest%2F1%2Fwaku-filter%2Fproto&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-15 03:05:14.004 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"6d3ff34a01be8781d86639f17d19d8164c81edc6283574e43d7532696ef7d498","status_code":200,"status_desc":"OK","messages":[{"message_hash":"gqzDs1Ua9OwfGSO1J7HtybcpKsRQ3zV8yMr741lGIp8="}]}'
2025-02-15 03:05:14.007 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-15 03:05:14.008 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-15 03:05:14.008 DEBUG [src.node.waku_node] Stopping container with id 57a5b5d088a5
2025-02-15 03:05:14.543 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 03:05:14.544 DEBUG [src.node.waku_node] Stopping container with id 8aef29b80404
2025-02-15 03:05:15.340 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 03:05:15.340 DEBUG [src.node.waku_node] Stopping container with id 1e531cca78e1
2025-02-15 03:05:15.356 ERROR [src.node.docker_mananger] Max retries reached for container 57a5b5d088a5. Exiting log stream.
2025-02-15 03:05:15.810 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 03:05:15.811 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-15 03:05:15.817 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-15 03:05:15.828 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-15 03:05:15.832 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
