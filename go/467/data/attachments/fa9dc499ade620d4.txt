2025-02-15 03:05:45.539 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-15 03:05:45.539 DEBUG [tests.conftest] Running test: test_store_with_duplicate_hashes with id: 2025-02-15_03-05-45__b4414e06-cda0-45fc-9792-088e27214b38
2025-02-15 03:05:45.539 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-15 03:05:45.540 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-15 03:05:45.540 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-15 03:05:45.547 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 03:05:45.547 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-15_03-05-45__b4414e06-cda0-45fc-9792-088e27214b38__wakuorg_nwaku:latest.log
2025-02-15 03:05:45.547 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 03:05:45.547 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 03:05:45.549 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 03:05:45.549 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.107.117
2025-02-15 03:05:45.549 DEBUG [src.node.docker_mananger] Generated ports ['17693', '17694', '17695', '17696', '17697']
2025-02-15 03:05:45.549 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 03:05:45.549 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 03:05:45.550 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 03:05:45.550 DEBUG [src.node.docker_mananger] docker run -i -t -p 17693:17693 -p 17694:17694 -p 17695:17695 -p 17696:17696 -p 17697:17697 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=17695 --rest-port=17693 --tcp-port=17694 --discv5-udp-port=17696 --rest-address=0.0.0.0 --nat=extip:172.18.107.117 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8c1eb83afd7eb9779522a1306ae0ccb194a24a3f1a349bffcfc769ff45d911b1 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=17697 --metrics-logging=true --store=true --relay=true
2025-02-15 03:05:45.774 ERROR [src.node.docker_mananger] Max retries reached for container ce2fb0bf8694. Exiting log stream.
2025-02-15 03:05:45.789 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.107.117 waku 0987f4c6bf4606044c26a6d3f0ffd8628341e3a41255da40b1e7891d76bac2b5
2025-02-15 03:05:45.834 DEBUG [src.node.docker_mananger] Container started with ID 0987f4c6bf46. Setting up logs at ./log/docker/publishing_node1_2025-02-15_03-05-45__b4414e06-cda0-45fc-9792-088e27214b38__wakuorg_nwaku:latest.log
2025-02-15 03:05:45.835 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 17693
2025-02-15 03:05:45.835 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 03:05:46.333 ERROR [src.node.docker_mananger] Max retries reached for container d4b993fe3b05. Exiting log stream.
2025-02-15 03:05:46.836 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17693/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 03:05:46.839 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 03:05:46.839 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 03:05:46.839 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17693/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 03:05:46.841 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.107.117/tcp/17694/p2p/16Uiu2HAkwbam65JRvEExfvSRSgEnPiTFzVibE2sh4iVkc2mdCHdh","/ip4/172.18.107.117/tcp/17695/ws/p2p/16Uiu2HAkwbam65JRvEExfvSRSgEnPiTFzVibE2sh4iVkc2mdCHdh"],"enrUri":"enr:-L24QJ3ibZpjv_EZDrugIVuhfDCkjiHq8nseAl4BLoEYVj7Deg4g3sdaOGhe4a-CNtYOG8vmSJtmd2-KB1FBCdwkeyYCgmlkgnY0gmlwhKwSa3WKbXVsdGlhZGRyc5YACASsEmt1BkUeAAoErBJrdQZFH90DgnJzhQADAQAAiXNlY3AyNTZrMaECIEFH3n0gjAn0xL5dMeUVcWe47_aUFstgvhfgMj00PMiDdGNwgkUeg3VkcIJFIIV3YWt1MgM"}'
2025-02-15 03:05:46.842 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 03:05:46.848 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-15 03:05:46.849 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-15_03-05-45__b4414e06-cda0-45fc-9792-088e27214b38__wakuorg_go-waku:latest.log
2025-02-15 03:05:46.849 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 03:05:46.849 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 03:05:46.850 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 03:05:46.850 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.16.86
2025-02-15 03:05:46.851 DEBUG [src.node.docker_mananger] Generated ports ['32654', '32655', '32656', '32657', '32658']
2025-02-15 03:05:46.851 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 03:05:46.851 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 03:05:46.851 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 03:05:46.851 DEBUG [src.node.docker_mananger] docker run -i -t -p 32654:32654 -p 32655:32655 -p 32656:32656 -p 32657:32657 -p 32658:32658 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=32656 --rest-port=32654 --tcp-port=32655 --discv5-udp-port=32657 --rest-address=0.0.0.0 --nat=extip:172.18.16.86 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=f869fe4bcbdc0cae7cdb4f5b813f343bcdbff828d5ddcc6a17b2ed6a3ebcfbfd --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QJ3ibZpjv_EZDrugIVuhfDCkjiHq8nseAl4BLoEYVj7Deg4g3sdaOGhe4a-CNtYOG8vmSJtmd2-KB1FBCdwkeyYCgmlkgnY0gmlwhKwSa3WKbXVsdGlhZGRyc5YACASsEmt1BkUeAAoErBJrdQZFH90DgnJzhQADAQAAiXNlY3AyNTZrMaECIEFH3n0gjAn0xL5dMeUVcWe47_aUFstgvhfgMj00PMiDdGNwgkUeg3VkcIJFIIV3YWt1MgM --storenode=/ip4/172.18.107.117/tcp/17694/p2p/16Uiu2HAkwbam65JRvEExfvSRSgEnPiTFzVibE2sh4iVkc2mdCHdh --store=true --relay=true
2025-02-15 03:05:47.080 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.16.86 waku 96334051850a2f6db2c45e225752f3e127f4e49d940ac282ee78646ee4b85353
2025-02-15 03:05:47.129 DEBUG [src.node.docker_mananger] Container started with ID 96334051850a. Setting up logs at ./log/docker/store_node1_2025-02-15_03-05-45__b4414e06-cda0-45fc-9792-088e27214b38__wakuorg_go-waku:latest.log
2025-02-15 03:05:47.130 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 32654
2025-02-15 03:05:47.130 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 03:05:48.130 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32654/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 03:05:48.133 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QFLN4-E2yy50KxmKeR7a2ncN3i3P43FtTGbbevfrzD3cHWyRCiGV5hK9w2P3wlWHpeUAfquVZQ4PVsLxww0e7neGAZUHkb9_gmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaEDxU65UMG3UQ2BmboU_tPdzT1-vS08oC2C1VEGM_q83pGDdGNwgn-Pg3VkcIJ_kYV3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/32655/p2p/16Uiu2HAmRwCHppPXURVeaSB5Em8pm4b9jRZS5U7knnLtEQhvY2v4","/ip4/127.0.0.1/tcp/32656/ws/p2p/16Uiu2HAmRwCHppPXURVeaSB5Em8pm4b9jRZS5U7knnLtEQhvY2v4","/ip4/172.17.0.3/tcp/32655/p2p/16Uiu2HAmRwCHppPXURVeaSB5Em8pm4b9jRZS5U7knnLtEQhvY2v4","/ip4/172.17.0.3/tcp/32656/ws/p2p/16Uiu2HAmRwCHppPXURVeaSB5Em8pm4b9jRZS5U7knnLtEQhvY2v4"]}'
2025-02-15 03:05:48.133 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 03:05:48.134 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32654/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.107.117/tcp/17694/p2p/16Uiu2HAkwbam65JRvEExfvSRSgEnPiTFzVibE2sh4iVkc2mdCHdh", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-15 03:05:48.150 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-15 03:05:48.151 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17693/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-15 03:05:48.173 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 03:05:48.174 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32654/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-15 03:05:48.176 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-15 03:05:48.180 DEBUG [src.steps.store] Relaying message
2025-02-15 03:05:48.181 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17693/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 03:05:48.193 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 03:05:48.194 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-15 03:05:48.397 DEBUG [src.steps.store] Relaying message
2025-02-15 03:05:48.397 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17693/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8x", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 03:05:48.403 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 03:05:48.403 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-15 03:05:48.604 DEBUG [src.steps.store] Relaying message
2025-02-15 03:05:48.604 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17693/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8y", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 03:05:48.610 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 03:05:48.610 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-15 03:05:48.811 DEBUG [src.steps.store] Relaying message
2025-02-15 03:05:48.812 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:17693/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8z", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 03:05:48.817 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 03:05:48.817 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-15 03:05:49.018 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:17693/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&hashes=0xb16ee7938462488d39c6d2432e97f4c8aba34552a41ad4cda265caaefe96717b%2C0xb16ee7938462488d39c6d2432e97f4c8aba34552a41ad4cda265caaefe96717b&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-15 03:05:49.022 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xb16ee7938462488d39c6d2432e97f4c8aba34552a41ad4cda265caaefe96717b"}]}'
2025-02-15 03:05:49.022 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32654/store/v3/messages?peerAddr=%2Fip4%2F172.18.107.117%2Ftcp%2F17694%2Fp2p%2F16Uiu2HAkwbam65JRvEExfvSRSgEnPiTFzVibE2sh4iVkc2mdCHdh&hashes=sW7nk4RiSI05xtJDLpf0yKujRVKkGtTNomXKrv6WcXs%3D%2CsW7nk4RiSI05xtJDLpf0yKujRVKkGtTNomXKrv6WcXs%3D&pageSize=50&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-15 03:05:49.028 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"dcb65cc9e32783d6b1c384dec27b8439c558085955ba13952c776bf574a8b382","status_code":200,"status_desc":"OK","messages":[{"message_hash":"sW7nk4RiSI05xtJDLpf0yKujRVKkGtTNomXKrv6WcXs="}]}'
2025-02-15 03:05:49.030 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-15 03:05:49.031 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-15 03:05:49.031 DEBUG [src.node.waku_node] Stopping container with id 0987f4c6bf46
2025-02-15 03:05:49.612 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 03:05:49.612 DEBUG [src.node.waku_node] Stopping container with id 96334051850a
2025-02-15 03:05:50.126 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 03:05:50.128 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-15 03:05:50.136 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-15 03:05:50.139 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
