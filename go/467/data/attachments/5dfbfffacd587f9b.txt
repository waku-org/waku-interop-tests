2025-02-15 03:06:52.223 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-15 03:06:52.223 DEBUG [tests.conftest] Running test: test_filter_get_message_with_extra_field with id: 2025-02-15_03-06-52__6c6866c3-be3c-44d3-92c1-225d3303da68
2025-02-15 03:06:52.224 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-15 03:06:52.224 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-15 03:06:52.224 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-15 03:06:52.230 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 03:06:52.230 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-15_03-06-52__6c6866c3-be3c-44d3-92c1-225d3303da68__wakuorg_nwaku:latest.log
2025-02-15 03:06:52.230 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 03:06:52.230 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 03:06:52.232 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 03:06:52.232 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.169.61
2025-02-15 03:06:52.232 DEBUG [src.node.docker_mananger] Generated ports ['43766', '43767', '43768', '43769', '43770']
2025-02-15 03:06:52.232 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 03:06:52.232 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 03:06:52.232 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 03:06:52.232 DEBUG [src.node.docker_mananger] docker run -i -t -p 43766:43766 -p 43767:43767 -p 43768:43768 -p 43769:43769 -p 43770:43770 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=43768 --rest-port=43766 --tcp-port=43767 --discv5-udp-port=43769 --rest-address=0.0.0.0 --nat=extip:172.18.169.61 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ead4dd4c2c365f36aa4376c46c5df22c1f6ed8ccf39a4becefac8dc6a3e361c9 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=43770 --metrics-logging=true --relay=true --filter=true
2025-02-15 03:06:52.452 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.169.61 waku 869c0c64aa2f8ba7b1d79a0ee50abeed5184205b13f72c0b567fcca556276b21
2025-02-15 03:06:52.500 DEBUG [src.node.docker_mananger] Container started with ID 869c0c64aa2f. Setting up logs at ./log/docker/node1_2025-02-15_03-06-52__6c6866c3-be3c-44d3-92c1-225d3303da68__wakuorg_nwaku:latest.log
2025-02-15 03:06:52.500 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 43766
2025-02-15 03:06:52.500 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 03:06:52.966 ERROR [src.node.docker_mananger] Max retries reached for container 69eef4b6fe91. Exiting log stream.
2025-02-15 03:06:53.502 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43766/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 03:06:53.504 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 03:06:53.504 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 03:06:53.504 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:43766/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 03:06:53.506 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.169.61/tcp/43767/p2p/16Uiu2HAmQt8Tjh85wmEt8jiHiKDGnFbPWrs1Z5n1UuVCNdsb6Qdo","/ip4/172.18.169.61/tcp/43768/ws/p2p/16Uiu2HAmQt8Tjh85wmEt8jiHiKDGnFbPWrs1Z5n1UuVCNdsb6Qdo"],"enrUri":"enr:-L24QLx1-t_gmiLKGERKhWpI-F_EUpMb8pUqcXEWk49JfIBJIaYFPw5YT3Q11uCVgH069zUtskove4X5QMxU2_RzDhkCgmlkgnY0gmlwhKwSqT2KbXVsdGlhZGRyc5YACASsEqk9Bqr3AAoErBKpPQaq-N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDtan3Br8s6KEafAHv9TtpvYWxGodkCU1RGEYbZNx51zqDdGNwgqr3g3VkcIKq-YV3YWt1MgU"}'
2025-02-15 03:06:53.506 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 03:06:53.507 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-15 03:06:53.512 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-15 03:06:53.512 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-15_03-06-52__6c6866c3-be3c-44d3-92c1-225d3303da68__wakuorg_go-waku:latest.log
2025-02-15 03:06:53.512 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 03:06:53.512 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 03:06:53.514 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 03:06:53.514 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.5.78
2025-02-15 03:06:53.514 DEBUG [src.node.docker_mananger] Generated ports ['35562', '35563', '35564', '35565', '35566']
2025-02-15 03:06:53.514 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 03:06:53.514 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 03:06:53.514 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 03:06:53.514 DEBUG [src.node.docker_mananger] docker run -i -t -p 35562:35562 -p 35563:35563 -p 35564:35564 -p 35565:35565 -p 35566:35566 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=35564 --rest-port=35562 --tcp-port=35563 --discv5-udp-port=35565 --rest-address=0.0.0.0 --nat=extip:172.18.5.78 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=af71d32c316ec2f7fbe9eaebd26e714adef549137faa29007ba3ebd56b4d9646 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-L24QLx1-t_gmiLKGERKhWpI-F_EUpMb8pUqcXEWk49JfIBJIaYFPw5YT3Q11uCVgH069zUtskove4X5QMxU2_RzDhkCgmlkgnY0gmlwhKwSqT2KbXVsdGlhZGRyc5YACASsEqk9Bqr3AAoErBKpPQaq-N0DgnJzhQADAQAAiXNlY3AyNTZrMaEDtan3Br8s6KEafAHv9TtpvYWxGodkCU1RGEYbZNx51zqDdGNwgqr3g3VkcIKq-YV3YWt1MgU --filternode=/ip4/172.18.169.61/tcp/43767/p2p/16Uiu2HAmQt8Tjh85wmEt8jiHiKDGnFbPWrs1Z5n1UuVCNdsb6Qdo --pubsub-topic=/waku/2/rs/3/1
2025-02-15 03:06:53.739 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.5.78 waku c184c601c754cf38a5f8125e4f6cd5fbcfc6c8c7c8cd4e6815bdaa4e6d948930
2025-02-15 03:06:53.791 DEBUG [src.node.docker_mananger] Container started with ID c184c601c754. Setting up logs at ./log/docker/node2_2025-02-15_03-06-52__6c6866c3-be3c-44d3-92c1-225d3303da68__wakuorg_go-waku:latest.log
2025-02-15 03:06:53.792 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 35562
2025-02-15 03:06:53.793 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 03:06:54.793 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:35562/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 03:06:54.795 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QG3ANUIriXy1tfQ7l-6WmfiyW2Z_pUJOJHHb-QTyZHpDKuy67F6JMrTZIOVIPMfFWT5gLwP6H23AmgZiPx4oqRuGAZUHksPWgmlkgnY0gmlwhKwRAAOCcnOFAAMBAAGJc2VjcDI1NmsxoQI9SB7KKOv5sEjGhK_nEEfaFj1pYDjtiTEGGxS5rbKdsoN0Y3CCiuuDdWRwgorthXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/35563/p2p/16Uiu2HAkyYtdfzrucpp6gpG6V7hYdJjzKic2LPJwHHZMCBtzwR2y","/ip4/127.0.0.1/tcp/35564/ws/p2p/16Uiu2HAkyYtdfzrucpp6gpG6V7hYdJjzKic2LPJwHHZMCBtzwR2y","/ip4/172.17.0.3/tcp/35563/p2p/16Uiu2HAkyYtdfzrucpp6gpG6V7hYdJjzKic2LPJwHHZMCBtzwR2y","/ip4/172.17.0.3/tcp/35564/ws/p2p/16Uiu2HAkyYtdfzrucpp6gpG6V7hYdJjzKic2LPJwHHZMCBtzwR2y"]}'
2025-02-15 03:06:54.795 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 03:06:54.796 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35562/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.169.61/tcp/43767/p2p/16Uiu2HAmQt8Tjh85wmEt8jiHiKDGnFbPWrs1Z5n1UuVCNdsb6Qdo", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-15 03:06:54.797 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-15 03:06:54.798 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-15 03:06:54.798 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:43766/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-15 03:06:54.801 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 03:06:54.801 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:35562/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "16b5434f-9935-4866-afe3-acafd0e797df", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-15 03:06:54.806 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"16b5434f-9935-4866-afe3-acafd0e797df","statusDesc":"OK"}'
2025-02-15 03:06:54.808 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:43766/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1" -H "Content-Type: application/json" -d '{"payload": "RmlsdGVyIHdvcmtzISE=", "contentTopic": "/test/1/waku-filter/proto", "timestamp": '$(date +%s%N)', "extraField": "extraValue"}'
2025-02-15 03:06:54.811 ERROR [src.node.api_clients.base_client] HTTP error occurred: 400 Client Error: Bad Request for url: http://127.0.0.1:43766/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F1. Response content: b'Invalid content body, could not decode. Unable to deserialize data'
2025-02-15 03:06:54.814 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-15 03:06:54.815 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-15 03:06:54.815 DEBUG [src.node.waku_node] Stopping container with id 869c0c64aa2f
2025-02-15 03:06:55.406 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 03:06:55.406 DEBUG [src.node.waku_node] Stopping container with id c184c601c754
2025-02-15 03:06:56.218 ERROR [src.node.docker_mananger] Max retries reached for container 869c0c64aa2f. Exiting log stream.
2025-02-15 03:06:56.270 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 03:06:56.272 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-15 03:06:56.277 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-15 03:06:56.279 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
