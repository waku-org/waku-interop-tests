2025-02-15 03:06:14.201 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-15 03:06:14.202 DEBUG [tests.conftest] Running test: test_filter_update_subscription_with_extra_field with id: 2025-02-15_03-06-14__c3597cda-a078-4e4a-aaaa-d5df46688b8f
2025-02-15 03:06:14.203 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-15 03:06:14.203 DEBUG [src.steps.filter] Running fixture setup: filter_setup
2025-02-15 03:06:14.204 DEBUG [src.steps.filter] Running fixture setup: setup_main_relay_node
2025-02-15 03:06:14.212 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 03:06:14.212 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node1_2025-02-15_03-06-14__c3597cda-a078-4e4a-aaaa-d5df46688b8f__wakuorg_nwaku:latest.log
2025-02-15 03:06:14.213 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 03:06:14.213 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 03:06:14.216 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 03:06:14.216 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.181.65
2025-02-15 03:06:14.216 DEBUG [src.node.docker_mananger] Generated ports ['65251', '65252', '65253', '65254', '65255']
2025-02-15 03:06:14.216 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 03:06:14.216 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 03:06:14.217 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 03:06:14.217 DEBUG [src.node.docker_mananger] docker run -i -t -p 65251:65251 -p 65252:65252 -p 65253:65253 -p 65254:65254 -p 65255:65255 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=65253 --rest-port=65251 --tcp-port=65252 --discv5-udp-port=65254 --rest-address=0.0.0.0 --nat=extip:172.18.181.65 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=a0cfae09adbaecf47e1ab0e5365e425ca6adc6acfdf0306deabd73def9db0eef --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=65255 --metrics-logging=true --relay=true --filter=true
2025-02-15 03:06:14.436 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.181.65 waku 1eae2eb2cd6ac116c0bd1303b6a66f4a9a725479c8118b99a8e17b9cdb1832b7
2025-02-15 03:06:14.472 ERROR [src.node.docker_mananger] Max retries reached for container a16a3ba815a6. Exiting log stream.
2025-02-15 03:06:14.478 DEBUG [src.node.docker_mananger] Container started with ID 1eae2eb2cd6a. Setting up logs at ./log/docker/node1_2025-02-15_03-06-14__c3597cda-a078-4e4a-aaaa-d5df46688b8f__wakuorg_nwaku:latest.log
2025-02-15 03:06:14.479 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 65251
2025-02-15 03:06:14.479 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 03:06:15.025 ERROR [src.node.docker_mananger] Max retries reached for container 42a2674e1bc3. Exiting log stream.
2025-02-15 03:06:15.479 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:65251/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 03:06:15.482 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 03:06:15.482 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 03:06:15.483 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:65251/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 03:06:15.485 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.181.65/tcp/65252/p2p/16Uiu2HAmDpDjAzv5mtPZ18ckxfStwufMjMm1rbQLgq5Y5y3Aihi7","/ip4/172.18.181.65/tcp/65253/ws/p2p/16Uiu2HAmDpDjAzv5mtPZ18ckxfStwufMjMm1rbQLgq5Y5y3Aihi7"],"enrUri":"enr:-L24QBhpiPT5sof-5XGRb4eGCeKWFt5EPGr4q0esUYsy74-eZxr-MRRiuXTcPuQF5jCQ8bOm967xnyV7V5185vOo0Q0CgmlkgnY0gmlwhKwStUGKbXVsdGlhZGRyc5YACASsErVBBv7kAAoErBK1QQb-5d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDETkKO1dWe081DXYx5P75G07z4zQDI2raX23r9sbrfyiDdGNwgv7kg3VkcIL-5oV3YWt1MgU"}'
2025-02-15 03:06:15.485 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 03:06:15.485 DEBUG [src.steps.filter] Running fixture setup: setup_main_filter_node
2025-02-15 03:06:15.492 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-15 03:06:15.492 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/node2_2025-02-15_03-06-14__c3597cda-a078-4e4a-aaaa-d5df46688b8f__wakuorg_go-waku:latest.log
2025-02-15 03:06:15.492 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 03:06:15.492 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 03:06:15.493 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 03:06:15.494 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.102.174
2025-02-15 03:06:15.494 DEBUG [src.node.docker_mananger] Generated ports ['33877', '33878', '33879', '33880', '33881']
2025-02-15 03:06:15.494 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 03:06:15.494 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 03:06:15.494 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 03:06:15.494 DEBUG [src.node.docker_mananger] docker run -i -t -p 33877:33877 -p 33878:33878 -p 33879:33879 -p 33880:33880 -p 33881:33881 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=33879 --rest-port=33877 --tcp-port=33878 --discv5-udp-port=33880 --rest-address=0.0.0.0 --nat=extip:172.18.102.174 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ab6d902dd735ed8ca15a1800a7dcc80add1bf90d6ed82e72c8aae54815b57939 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --relay=false --discv5-bootstrap-node=enr:-L24QBhpiPT5sof-5XGRb4eGCeKWFt5EPGr4q0esUYsy74-eZxr-MRRiuXTcPuQF5jCQ8bOm967xnyV7V5185vOo0Q0CgmlkgnY0gmlwhKwStUGKbXVsdGlhZGRyc5YACASsErVBBv7kAAoErBK1QQb-5d0DgnJzhQADAQAAiXNlY3AyNTZrMaEDETkKO1dWe081DXYx5P75G07z4zQDI2raX23r9sbrfyiDdGNwgv7kg3VkcIL-5oV3YWt1MgU --filternode=/ip4/172.18.181.65/tcp/65252/p2p/16Uiu2HAmDpDjAzv5mtPZ18ckxfStwufMjMm1rbQLgq5Y5y3Aihi7 --pubsub-topic=/waku/2/rs/3/1
2025-02-15 03:06:15.721 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.102.174 waku 3d5c27d1df2e1b678d52a748b4f4d7c37dbd6c91ccef088133345653eac3d75d
2025-02-15 03:06:15.779 DEBUG [src.node.docker_mananger] Container started with ID 3d5c27d1df2e. Setting up logs at ./log/docker/node2_2025-02-15_03-06-14__c3597cda-a078-4e4a-aaaa-d5df46688b8f__wakuorg_go-waku:latest.log
2025-02-15 03:06:15.780 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 33877
2025-02-15 03:06:15.780 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 03:06:16.780 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33877/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 03:06:16.783 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QKciy375sRSjZCyCEeVEnAXJ9VRb4FkDPgxUdLht4oJxFe0pGHlvWZEU0yKtwwWDmi0u3oXbIXtOGWxPOIsOpOSGAZUHki9XgmlkgnY0gmlwhKwRAAOCcnOFAAMBAAGJc2VjcDI1NmsxoQOPAbkWP2u5HXcLhtB5R0ldwwb2F-Vj6auxeShWWtz5jYN0Y3CChFaDdWRwgoRYhXdha3UygA","listenAddresses":["/ip4/127.0.0.1/tcp/33878/p2p/16Uiu2HAmNHEB7jvdUHu8LYh6Sau3PmfQ6iBonSDG521vkGfpBGgU","/ip4/127.0.0.1/tcp/33879/ws/p2p/16Uiu2HAmNHEB7jvdUHu8LYh6Sau3PmfQ6iBonSDG521vkGfpBGgU","/ip4/172.17.0.3/tcp/33878/p2p/16Uiu2HAmNHEB7jvdUHu8LYh6Sau3PmfQ6iBonSDG521vkGfpBGgU","/ip4/172.17.0.3/tcp/33879/ws/p2p/16Uiu2HAmNHEB7jvdUHu8LYh6Sau3PmfQ6iBonSDG521vkGfpBGgU"]}'
2025-02-15 03:06:16.783 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 03:06:16.783 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33877/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.181.65/tcp/65252/p2p/16Uiu2HAmDpDjAzv5mtPZ18ckxfStwufMjMm1rbQLgq5Y5y3Aihi7", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-15 03:06:16.785 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-15 03:06:16.786 DEBUG [src.steps.filter] Running fixture setup: subscribe_main_nodes
2025-02-15 03:06:16.786 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:65251/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/1"]'
2025-02-15 03:06:16.789 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 03:06:16.789 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33877/filter/v2/subscriptions" -H "Content-Type: application/json" -d '{"requestId": "82bfc352-5ae4-419a-89b5-1ec9c5a40742", "contentFilters": ["/test/1/waku-filter/proto"], "pubsubTopic": "/waku/2/rs/3/1"}'
2025-02-15 03:06:16.795 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"82bfc352-5ae4-419a-89b5-1ec9c5a40742","statusDesc":"OK"}'
2025-02-15 03:06:16.798 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-15 03:06:16.799 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-15 03:06:16.800 DEBUG [src.node.waku_node] Stopping container with id 1eae2eb2cd6a
2025-02-15 03:06:17.362 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 03:06:17.363 DEBUG [src.node.waku_node] Stopping container with id 3d5c27d1df2e
2025-02-15 03:06:18.191 ERROR [src.node.docker_mananger] Max retries reached for container 1eae2eb2cd6a. Exiting log stream.
2025-02-15 03:06:18.287 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 03:06:18.287 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-15 03:06:18.296 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-15 03:06:18.299 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
