2025-02-15 03:08:16.093 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-15 03:08:16.093 DEBUG [tests.conftest] Running test: test_store_sort_ascending[false] with id: 2025-02-15_03-08-16__a08585bd-03d5-43bb-9d39-c31772e980f7
2025-02-15 03:08:16.094 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-15 03:08:16.094 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-15 03:08:16.094 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-15 03:08:16.101 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 03:08:16.102 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-15_03-08-16__a08585bd-03d5-43bb-9d39-c31772e980f7__wakuorg_nwaku:latest.log
2025-02-15 03:08:16.102 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 03:08:16.102 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 03:08:16.103 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 03:08:16.104 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.113.226
2025-02-15 03:08:16.104 DEBUG [src.node.docker_mananger] Generated ports ['52234', '52235', '52236', '52237', '52238']
2025-02-15 03:08:16.104 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 03:08:16.104 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 03:08:16.104 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 03:08:16.104 DEBUG [src.node.docker_mananger] docker run -i -t -p 52234:52234 -p 52235:52235 -p 52236:52236 -p 52237:52237 -p 52238:52238 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=52236 --rest-port=52234 --tcp-port=52235 --discv5-udp-port=52237 --rest-address=0.0.0.0 --nat=extip:172.18.113.226 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ccdccdeca1edd7197a3a9b07b58d4b19fcd537b2a69f8dae7c93c669bc0cc46d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=52238 --metrics-logging=true --store=true --relay=true
2025-02-15 03:08:16.351 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.113.226 waku 5126509387cbe450cee5fdc012749d4bec36158ceeae8834080ae613d773e129
2025-02-15 03:08:16.412 DEBUG [src.node.docker_mananger] Container started with ID 5126509387cb. Setting up logs at ./log/docker/publishing_node1_2025-02-15_03-08-16__a08585bd-03d5-43bb-9d39-c31772e980f7__wakuorg_nwaku:latest.log
2025-02-15 03:08:16.414 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 52234
2025-02-15 03:08:16.414 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 03:08:16.901 ERROR [src.node.docker_mananger] Max retries reached for container 65c9d6006e9b. Exiting log stream.
2025-02-15 03:08:17.414 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52234/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 03:08:17.417 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 03:08:17.417 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 03:08:17.418 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52234/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 03:08:17.420 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.113.226/tcp/52235/p2p/16Uiu2HAmE1HRx8MssUkRXd7VWFajMTipLi5au7NSa4oDLgZh94Ka","/ip4/172.18.113.226/tcp/52236/ws/p2p/16Uiu2HAmE1HRx8MssUkRXd7VWFajMTipLi5au7NSa4oDLgZh94Ka"],"enrUri":"enr:-L24QB5JWjUCl7xAzsZsqdJu_Z0RWqqbeiVavppZ674FPxRXUdKnvxrNtuqwTUItAyLxkip-KRglJ0hD2LPsLJD5wbECgmlkgnY0gmlwhKwSceKKbXVsdGlhZGRyc5YACASsEnHiBswLAAoErBJx4gbMDN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDFA6drmuXtBGCSNUYw983RYzs6OkYwts3f-Z2duIF8qGDdGNwgswLg3VkcILMDYV3YWt1MgM"}'
2025-02-15 03:08:17.420 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 03:08:17.428 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-15 03:08:17.428 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-15_03-08-16__a08585bd-03d5-43bb-9d39-c31772e980f7__wakuorg_go-waku:latest.log
2025-02-15 03:08:17.428 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 03:08:17.428 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 03:08:17.430 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 03:08:17.430 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.9.76
2025-02-15 03:08:17.430 DEBUG [src.node.docker_mananger] Generated ports ['31984', '31985', '31986', '31987', '31988']
2025-02-15 03:08:17.430 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 03:08:17.430 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 03:08:17.430 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 03:08:17.431 DEBUG [src.node.docker_mananger] docker run -i -t -p 31984:31984 -p 31985:31985 -p 31986:31986 -p 31987:31987 -p 31988:31988 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=31986 --rest-port=31984 --tcp-port=31985 --discv5-udp-port=31987 --rest-address=0.0.0.0 --nat=extip:172.18.9.76 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=881c5e818f2babf933eb982dde6df2bccf319ad76a3cbfcc369274f1cc756f80 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QB5JWjUCl7xAzsZsqdJu_Z0RWqqbeiVavppZ674FPxRXUdKnvxrNtuqwTUItAyLxkip-KRglJ0hD2LPsLJD5wbECgmlkgnY0gmlwhKwSceKKbXVsdGlhZGRyc5YACASsEnHiBswLAAoErBJx4gbMDN0DgnJzhQADAQAAiXNlY3AyNTZrMaEDFA6drmuXtBGCSNUYw983RYzs6OkYwts3f-Z2duIF8qGDdGNwgswLg3VkcILMDYV3YWt1MgM --storenode=/ip4/172.18.113.226/tcp/52235/p2p/16Uiu2HAmE1HRx8MssUkRXd7VWFajMTipLi5au7NSa4oDLgZh94Ka --store=true --relay=true
2025-02-15 03:08:17.677 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.9.76 waku 4a374222b57b87687720ec3325bba75d3dfd6a33fcc5b2ed9a196a99c07517a2
2025-02-15 03:08:17.737 DEBUG [src.node.docker_mananger] Container started with ID 4a374222b57b. Setting up logs at ./log/docker/store_node1_2025-02-15_03-08-16__a08585bd-03d5-43bb-9d39-c31772e980f7__wakuorg_go-waku:latest.log
2025-02-15 03:08:17.738 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 31984
2025-02-15 03:08:17.738 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 03:08:18.738 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31984/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 03:08:18.741 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QN6SIVr5lDEiYChF2m6Px9Iv56_Nfmx1Yg5uI7EZTK-ZGwA4ApslPkhtvnbZ02Tpggy1lln_10zUqO8llPMpIkeGAZUHlAvIgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaECFiVQE8WVmSb4O_ecVKBqLV-wHzcd6xXbtadVbd12iBSDdGNwgnzxg3VkcIJ884V3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/31985/p2p/16Uiu2HAkvv7wzdc9PTEPoprW2JWe4SFVNiRURgtUHcoCMoxoHgBM","/ip4/127.0.0.1/tcp/31986/ws/p2p/16Uiu2HAkvv7wzdc9PTEPoprW2JWe4SFVNiRURgtUHcoCMoxoHgBM","/ip4/172.17.0.3/tcp/31985/p2p/16Uiu2HAkvv7wzdc9PTEPoprW2JWe4SFVNiRURgtUHcoCMoxoHgBM","/ip4/172.17.0.3/tcp/31986/ws/p2p/16Uiu2HAkvv7wzdc9PTEPoprW2JWe4SFVNiRURgtUHcoCMoxoHgBM"]}'
2025-02-15 03:08:18.742 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 03:08:18.742 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31984/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.113.226/tcp/52235/p2p/16Uiu2HAmE1HRx8MssUkRXd7VWFajMTipLi5au7NSa4oDLgZh94Ka", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-15 03:08:18.760 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-15 03:08:18.761 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52234/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-15 03:08:18.786 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 03:08:18.787 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:31984/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-15 03:08:18.789 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-15 03:08:18.792 DEBUG [src.steps.store] Relaying message
2025-02-15 03:08:18.792 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52234/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 03:08:18.807 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 03:08:18.807 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-15 03:08:19.008 DEBUG [src.steps.store] Relaying message
2025-02-15 03:08:19.008 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52234/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8x", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 03:08:19.015 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 03:08:19.015 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-15 03:08:19.216 DEBUG [src.steps.store] Relaying message
2025-02-15 03:08:19.216 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52234/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8y", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 03:08:19.223 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 03:08:19.224 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-15 03:08:19.424 DEBUG [src.steps.store] Relaying message
2025-02-15 03:08:19.425 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52234/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8z", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 03:08:19.431 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 03:08:19.431 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-15 03:08:19.632 DEBUG [src.steps.store] Relaying message
2025-02-15 03:08:19.633 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52234/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV80", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 03:08:19.639 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 03:08:19.639 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-15 03:08:19.840 DEBUG [src.steps.store] Relaying message
2025-02-15 03:08:19.841 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52234/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV81", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 03:08:19.847 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 03:08:19.847 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-15 03:08:20.048 DEBUG [src.steps.store] Relaying message
2025-02-15 03:08:20.048 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52234/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV82", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 03:08:20.054 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 03:08:20.054 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-15 03:08:20.255 DEBUG [src.steps.store] Relaying message
2025-02-15 03:08:20.256 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52234/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV83", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 03:08:20.264 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 03:08:20.264 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-15 03:08:20.465 DEBUG [src.steps.store] Relaying message
2025-02-15 03:08:20.465 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52234/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV84", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 03:08:20.472 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 03:08:20.472 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-15 03:08:20.673 DEBUG [src.steps.store] Relaying message
2025-02-15 03:08:20.673 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:52234/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV85", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 03:08:20.679 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 03:08:20.679 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-15 03:08:20.880 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:52234/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=false" -H "Content-Type: application/json" -d 'None'
2025-02-15 03:08:20.884 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xc3691b4adcf5bdefc852f4781f626898e0864c4171371194e0317739b3c2f246"},{"messageHash":"0x90068e4e7f5f0b010ca281547e5d1fbb949fbcf251f3e910c828d1497dd87a16"},{"messageHash":"0x795a6618df0a373a4d3f5c2f81f36206fb118d8546a8af6a85da75a4b29ed19c"},{"messageHash":"0x9179a70e813c74e87ea55dc190ac3b309dd366c986631dc81c401065098262c0"},{"messageHash":"0x36584c2ede3db4aeb73e26c9c4c844c54c0a47bfe106570f51eff7f0761c0b3f"}],"paginationCursor":"0xc3691b4adcf5bdefc852f4781f626898e0864c4171371194e0317739b3c2f246"}'
2025-02-15 03:08:20.884 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:31984/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5&ascending=false" -H "Content-Type: application/json" -d 'None'
2025-02-15 03:08:20.891 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"76ccd295a2278dea941a8c8a193c6f42479ea92b61ad6e8f0f111e3e0a75ec0d","status_code":200,"status_desc":"OK","messages":[{"message_hash":"w2kbStz1ve/IUvR4H2JomOCGTEFxNxGU4DF3ObPC8kY="},{"message_hash":"kAaOTn9fCwEMooFUfl0fu5SfvPJR8+kQyCjRSX3YehY="},{"message_hash":"eVpmGN8KNzpNP1wvgfNiBvsRjYVGqK9qhdp1pLKe0Zw="},{"message_hash":"kXmnDoE8dOh+pV3BkKw7MJ3TZsmGYx3IHEAQZQmCYsA="},{"message_hash":"NlhMLt49tK63PibJxMhExUwKR7/hBlcPUe/38HYcCz8="}],"pagination_cursor":"w2kbStz1ve/IUvR4H2JomOCGTEFxNxGU4DF3ObPC8kY="}'
2025-02-15 03:08:20.893 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-15 03:08:20.894 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-15 03:08:20.894 DEBUG [src.node.waku_node] Stopping container with id 5126509387cb
2025-02-15 03:08:21.974 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 03:08:21.975 DEBUG [src.node.waku_node] Stopping container with id 4a374222b57b
2025-02-15 03:08:22.533 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 03:08:22.534 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-15 03:08:22.545 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-15 03:08:22.549 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
