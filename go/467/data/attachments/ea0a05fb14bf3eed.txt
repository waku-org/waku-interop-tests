2025-02-15 03:07:43.397 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-15 03:07:43.397 DEBUG [tests.conftest] Running test: test_store_invalid_ascending with id: 2025-02-15_03-07-43__a2d9a9af-c8bd-4240-9aa9-3759bf2b86bf
2025-02-15 03:07:43.397 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-15 03:07:43.397 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-15 03:07:43.398 DEBUG [src.steps.store] Running fixture setup: node_setup
2025-02-15 03:07:43.404 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 03:07:43.404 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-15_03-07-43__a2d9a9af-c8bd-4240-9aa9-3759bf2b86bf__wakuorg_nwaku:latest.log
2025-02-15 03:07:43.404 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 03:07:43.404 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 03:07:43.405 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 03:07:43.406 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.241.226
2025-02-15 03:07:43.406 DEBUG [src.node.docker_mananger] Generated ports ['46812', '46813', '46814', '46815', '46816']
2025-02-15 03:07:43.406 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 03:07:43.406 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 03:07:43.406 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 03:07:43.406 DEBUG [src.node.docker_mananger] docker run -i -t -p 46812:46812 -p 46813:46813 -p 46814:46814 -p 46815:46815 -p 46816:46816 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=46814 --rest-port=46812 --tcp-port=46813 --discv5-udp-port=46815 --rest-address=0.0.0.0 --nat=extip:172.18.241.226 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=4aaacccb0596ca58eefd5e8e2df8265d37ce4d382bfebfc9e39ffc3f8bbedbdd --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=46816 --metrics-logging=true --store=true --relay=true
2025-02-15 03:07:43.633 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.241.226 waku 92edebfc8732b64035ba43a9ac5c64be56f17a1e2103577f524df716bad540ac
2025-02-15 03:07:43.649 ERROR [src.node.docker_mananger] Max retries reached for container 41f304d8e406. Exiting log stream.
2025-02-15 03:07:43.684 DEBUG [src.node.docker_mananger] Container started with ID 92edebfc8732. Setting up logs at ./log/docker/publishing_node1_2025-02-15_03-07-43__a2d9a9af-c8bd-4240-9aa9-3759bf2b86bf__wakuorg_nwaku:latest.log
2025-02-15 03:07:43.685 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 46812
2025-02-15 03:07:43.686 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 03:07:44.183 ERROR [src.node.docker_mananger] Max retries reached for container b896fdbbacef. Exiting log stream.
2025-02-15 03:07:44.687 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46812/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 03:07:44.690 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 03:07:44.691 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 03:07:44.691 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46812/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 03:07:44.693 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.241.226/tcp/46813/p2p/16Uiu2HAkyrrVrM6nY8G1iMShsXQCBVUDvwH8BbwaZCbwmHrUtx6f","/ip4/172.18.241.226/tcp/46814/ws/p2p/16Uiu2HAkyrrVrM6nY8G1iMShsXQCBVUDvwH8BbwaZCbwmHrUtx6f"],"enrUri":"enr:-L24QCmRerBEU4i53aSmw40k3r1snr3sRK8W_sG6NYpIYPoOSYOARmCtaVfcD0Qgd06hgf8vpb2u8dtNAEaafiGex1YCgmlkgnY0gmlwhKwS8eKKbXVsdGlhZGRyc5YACASsEvHiBrbdAAoErBLx4ga23t0DgnJzhQADAQAAiXNlY3AyNTZrMaECQeIpM96WHIrPWxDRe45QwBjV3AKA8CPM3Q14uraKZkyDdGNwgrbdg3VkcIK234V3YWt1MgM"}'
2025-02-15 03:07:44.693 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 03:07:44.700 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-15 03:07:44.700 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-15_03-07-43__a2d9a9af-c8bd-4240-9aa9-3759bf2b86bf__wakuorg_go-waku:latest.log
2025-02-15 03:07:44.700 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 03:07:44.701 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 03:07:44.702 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 03:07:44.702 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.122.118
2025-02-15 03:07:44.702 DEBUG [src.node.docker_mananger] Generated ports ['32082', '32083', '32084', '32085', '32086']
2025-02-15 03:07:44.702 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 03:07:44.703 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 03:07:44.703 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 03:07:44.703 DEBUG [src.node.docker_mananger] docker run -i -t -p 32082:32082 -p 32083:32083 -p 32084:32084 -p 32085:32085 -p 32086:32086 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=32084 --rest-port=32082 --tcp-port=32083 --discv5-udp-port=32085 --rest-address=0.0.0.0 --nat=extip:172.18.122.118 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=afcd3df7b637ae2aa1099d3a39fcd3aece3dfadc85e86da0e37ce6baabddc7af --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QCmRerBEU4i53aSmw40k3r1snr3sRK8W_sG6NYpIYPoOSYOARmCtaVfcD0Qgd06hgf8vpb2u8dtNAEaafiGex1YCgmlkgnY0gmlwhKwS8eKKbXVsdGlhZGRyc5YACASsEvHiBrbdAAoErBLx4ga23t0DgnJzhQADAQAAiXNlY3AyNTZrMaECQeIpM96WHIrPWxDRe45QwBjV3AKA8CPM3Q14uraKZkyDdGNwgrbdg3VkcIK234V3YWt1MgM --storenode=/ip4/172.18.241.226/tcp/46813/p2p/16Uiu2HAkyrrVrM6nY8G1iMShsXQCBVUDvwH8BbwaZCbwmHrUtx6f --store=true --relay=true
2025-02-15 03:07:44.930 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.122.118 waku 2826557502f9fc7d3bfaebbaf82cb4e839387d6920317264533a397810d3c950
2025-02-15 03:07:44.981 DEBUG [src.node.docker_mananger] Container started with ID 2826557502f9. Setting up logs at ./log/docker/store_node1_2025-02-15_03-07-43__a2d9a9af-c8bd-4240-9aa9-3759bf2b86bf__wakuorg_go-waku:latest.log
2025-02-15 03:07:44.982 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 32082
2025-02-15 03:07:44.982 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 03:07:45.983 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32082/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 03:07:45.985 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QBFNhdRj3bzJ2hhsFBfuEDl1ETCfsxkcIfP738c5IiUMILtuphZLVzmeL2AzYfSmL3URFjOX-o_e_L396hVU1YGGAZUHk4vWgmlkgnY0gmlwhKwRAAOCcnODAAMAiXNlY3AyNTZrMaECksCF6ZtPOpQnm5SMd7-XgxQatUkUJVPdPOML__LsXImDdGNwgn1Tg3VkcIJ9VYV3YWt1MgM","listenAddresses":["/ip4/127.0.0.1/tcp/32083/p2p/16Uiu2HAm5JXmkC1nKrmLJtgTebb3z1PHk8Z4KA4JYswD1MtWZACQ","/ip4/127.0.0.1/tcp/32084/ws/p2p/16Uiu2HAm5JXmkC1nKrmLJtgTebb3z1PHk8Z4KA4JYswD1MtWZACQ","/ip4/172.17.0.3/tcp/32083/p2p/16Uiu2HAm5JXmkC1nKrmLJtgTebb3z1PHk8Z4KA4JYswD1MtWZACQ","/ip4/172.17.0.3/tcp/32084/ws/p2p/16Uiu2HAm5JXmkC1nKrmLJtgTebb3z1PHk8Z4KA4JYswD1MtWZACQ"]}'
2025-02-15 03:07:45.986 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 03:07:45.986 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32082/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.241.226/tcp/46813/p2p/16Uiu2HAkyrrVrM6nY8G1iMShsXQCBVUDvwH8BbwaZCbwmHrUtx6f", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-15 03:07:46.004 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-15 03:07:46.005 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46812/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-15 03:07:46.025 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 03:07:46.025 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:32082/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-15 03:07:46.028 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-15 03:07:46.032 DEBUG [src.steps.store] Relaying message
2025-02-15 03:07:46.032 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46812/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8w", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 03:07:46.044 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 03:07:46.045 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-15 03:07:46.246 DEBUG [src.steps.store] Relaying message
2025-02-15 03:07:46.246 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46812/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8x", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 03:07:46.252 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 03:07:46.252 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-15 03:07:46.453 DEBUG [src.steps.store] Relaying message
2025-02-15 03:07:46.453 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46812/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8y", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 03:07:46.458 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 03:07:46.458 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-15 03:07:46.659 DEBUG [src.steps.store] Relaying message
2025-02-15 03:07:46.660 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:46812/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "TWVzc2FnZV8z", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 03:07:46.665 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 03:07:46.665 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-15 03:07:46.866 DEBUG [tests.store.test_sorting] requesting stored messages with invalid ascending =##
2025-02-15 03:07:46.866 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:46812/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=2&ascending=##" -H "Content-Type: application/json" -d 'None'
2025-02-15 03:07:46.869 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0x0b9cacc702b1a0da657a145626667fba08b1ebf0f870534cc0b0ddafaea3f2bc"},{"messageHash":"0x2b2a97082e6a72af73127f020ba204681c4152e3cc81f2d36119983bc777d40d"}],"paginationCursor":"0x2b2a97082e6a72af73127f020ba204681c4152e3cc81f2d36119983bc777d40d"}'
2025-02-15 03:07:46.869 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:32082/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=2&ascending=##" -H "Content-Type: application/json" -d 'None'
2025-02-15 03:07:46.874 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"e7c72db7f0accc8d7328fa0041c134d99c4d6e16f868dd9765b60693a27c24c2","status_code":200,"status_desc":"OK","messages":[{"message_hash":"C5ysxwKxoNplehRWJmZ/ugix6/D4cFNMwLDdr66j8rw="},{"message_hash":"KyqXCC5qcq9zEn8CC6IEaBxBUuPMgfLTYRmYO8d31A0="}],"pagination_cursor":"KyqXCC5qcq9zEn8CC6IEaBxBUuPMgfLTYRmYO8d31A0="}'
2025-02-15 03:07:46.876 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-15 03:07:46.877 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-15 03:07:46.877 DEBUG [src.node.waku_node] Stopping container with id 92edebfc8732
2025-02-15 03:07:47.470 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 03:07:47.470 DEBUG [src.node.waku_node] Stopping container with id 2826557502f9
2025-02-15 03:07:47.984 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 03:07:47.986 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-15 03:07:47.994 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-15 03:07:47.997 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
