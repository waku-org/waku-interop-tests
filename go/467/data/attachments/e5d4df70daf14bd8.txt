2025-02-15 03:07:45.135 DEBUG [tests.conftest] Running fixture setup: test_id
2025-02-15 03:07:45.135 DEBUG [tests.conftest] Running test: test_on_postgress_db_with_one_message with id: 2025-02-15_03-07-45__00d31472-828d-4489-b949-0c6a0a97c34b
2025-02-15 03:07:45.136 DEBUG [src.steps.common] Running fixture setup: common_setup
2025-02-15 03:07:45.136 DEBUG [src.steps.store] Running fixture setup: store_setup
2025-02-15 03:07:45.388 ERROR [src.node.docker_mananger] Max retries reached for container 4455471c3d47. Exiting log stream.
2025-02-15 03:07:45.938 ERROR [src.node.docker_mananger] Max retries reached for container 3282c066cdd9. Exiting log stream.
2025-02-15 03:07:50.291 DEBUG [src.postgres_setup] Postgres container started
2025-02-15 03:07:50.299 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 03:07:50.299 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-15_03-07-45__00d31472-828d-4489-b949-0c6a0a97c34b__wakuorg_nwaku:latest.log
2025-02-15 03:07:50.299 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 03:07:50.299 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 03:07:50.301 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 03:07:50.301 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.129.183
2025-02-15 03:07:50.301 DEBUG [src.node.docker_mananger] Generated ports ['26053', '26054', '26055', '26056', '26057']
2025-02-15 03:07:50.301 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 03:07:50.301 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 03:07:50.301 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 03:07:50.301 DEBUG [src.node.docker_mananger] docker run -i -t -p 26053:26053 -p 26054:26054 -p 26055:26055 -p 26056:26056 -p 26057:26057 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26055 --rest-port=26053 --tcp-port=26054 --discv5-udp-port=26056 --rest-address=0.0.0.0 --nat=extip:172.18.129.183 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=ba3a7df5c1ea3acbacfcee073b99cebf39fb6fddb6404bd3a2b2db80aa1855ce --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26057 --metrics-logging=true --store=true --relay=true --store-message-db-url=postgres://postgres:test123@postgres:5432/postgres
2025-02-15 03:07:50.548 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.129.183 waku 10dcb9378be3efe354c19a5a58d91694349d745a39a882e3d06d783847682edd
2025-02-15 03:07:50.607 DEBUG [src.node.docker_mananger] Container started with ID 10dcb9378be3. Setting up logs at ./log/docker/publishing_node1_2025-02-15_03-07-45__00d31472-828d-4489-b949-0c6a0a97c34b__wakuorg_nwaku:latest.log
2025-02-15 03:07:50.608 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 26053
2025-02-15 03:07:50.608 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 03:07:51.608 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26053/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 03:08:11.630 ERROR [src.node.waku_node] REST service did not become ready in time: HTTPConnectionPool(host='127.0.0.1', port=26053): Read timed out. (read timeout=20)
2025-02-15 03:08:11.730 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 03:08:11.730 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 03:08:11.732 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 03:08:11.732 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.250.58
2025-02-15 03:08:11.732 DEBUG [src.node.docker_mananger] Generated ports ['23549', '23550', '23551', '23552', '23553']
2025-02-15 03:08:11.732 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 03:08:11.733 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 03:08:11.733 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 03:08:11.733 DEBUG [src.node.docker_mananger] docker run -i -t -p 23549:23549 -p 23550:23550 -p 23551:23551 -p 23552:23552 -p 23553:23553 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=23551 --rest-port=23549 --tcp-port=23550 --discv5-udp-port=23552 --rest-address=0.0.0.0 --nat=extip:172.18.250.58 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bcb1bbbf49a9bb0724f3078b623fbd49caa37af11cf92ef4b2ebfbeae70cff24 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=23553 --metrics-logging=true --store=true --relay=true --store-message-db-url=postgres://postgres:test123@postgres:5432/postgres
2025-02-15 03:08:11.964 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.250.58 waku 77ccc40fc389a0507b59af27a6fadceed313ee4f93fee29945086b7f68914df8
2025-02-15 03:08:12.014 DEBUG [src.node.docker_mananger] Container started with ID 77ccc40fc389. Setting up logs at ./log/docker/publishing_node1_2025-02-15_03-07-45__00d31472-828d-4489-b949-0c6a0a97c34b__wakuorg_nwaku:latest.log
2025-02-15 03:08:12.014 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 23549
2025-02-15 03:08:12.014 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 03:08:13.015 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23549/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 03:08:13.019 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 03:08:13.019 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 03:08:13.019 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23549/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 03:08:13.021 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.250.58/tcp/23550/p2p/16Uiu2HAm6M4sMeCgSkSzAybPcx9NCJqnJn9aVwknXyCnMqtb35cK","/ip4/172.18.250.58/tcp/23551/ws/p2p/16Uiu2HAm6M4sMeCgSkSzAybPcx9NCJqnJn9aVwknXyCnMqtb35cK"],"enrUri":"enr:-L24QDHY14OhrTPvfM5g00gpyblQlXV6wrBmOzMLr-DN5MFsWz2MwqXOPeKNZVBLV_oNuXdP7a0ir4-Rw8VXInTqzyoCgmlkgnY0gmlwhKwS-jqKbXVsdGlhZGRyc5YACASsEvo6Blv-AAoErBL6OgZb_90DgnJzhQADAQAAiXNlY3AyNTZrMaECokKIaFxvhAwDx7-lVj1jGP_EQLuBK32gOSZNfAfTpOCDdGNwglv-g3VkcIJcAIV3YWt1MgM"}'
2025-02-15 03:08:13.021 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 03:08:13.028 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-15 03:08:13.028 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-15_03-07-45__00d31472-828d-4489-b949-0c6a0a97c34b__wakuorg_go-waku:latest.log
2025-02-15 03:08:13.028 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 03:08:13.028 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 03:08:13.030 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 03:08:13.030 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.193.163
2025-02-15 03:08:13.031 DEBUG [src.node.docker_mananger] Generated ports ['22391', '22392', '22393', '22394', '22395']
2025-02-15 03:08:13.031 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 03:08:13.031 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 03:08:13.031 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 03:08:13.031 DEBUG [src.node.docker_mananger] docker run -i -t -p 22391:22391 -p 22392:22392 -p 22393:22393 -p 22394:22394 -p 22395:22395 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=22393 --rest-port=22391 --tcp-port=22392 --discv5-udp-port=22394 --rest-address=0.0.0.0 --nat=extip:172.18.193.163 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=7a8f315eadd42b0af7f8aaaaff5f036bef3cbedb6d68782debfbadcabfafbb35 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QDHY14OhrTPvfM5g00gpyblQlXV6wrBmOzMLr-DN5MFsWz2MwqXOPeKNZVBLV_oNuXdP7a0ir4-Rw8VXInTqzyoCgmlkgnY0gmlwhKwS-jqKbXVsdGlhZGRyc5YACASsEvo6Blv-AAoErBL6OgZb_90DgnJzhQADAQAAiXNlY3AyNTZrMaECokKIaFxvhAwDx7-lVj1jGP_EQLuBK32gOSZNfAfTpOCDdGNwglv-g3VkcIJcAIV3YWt1MgM --storenode=/ip4/172.18.250.58/tcp/23550/p2p/16Uiu2HAm6M4sMeCgSkSzAybPcx9NCJqnJn9aVwknXyCnMqtb35cK --store=false --relay=true
2025-02-15 03:08:13.268 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.193.163 waku f2219665c37323c243cc53556869dde9a1fec309dc5884dd9a44dab77e6e6329
2025-02-15 03:08:13.322 DEBUG [src.node.docker_mananger] Container started with ID f2219665c373. Setting up logs at ./log/docker/store_node1_2025-02-15_03-07-45__00d31472-828d-4489-b949-0c6a0a97c34b__wakuorg_go-waku:latest.log
2025-02-15 03:08:13.323 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 22391
2025-02-15 03:08:13.324 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 03:08:14.324 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22391/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 03:08:14.327 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QJW7Hc9v4eDY_BDSlRffLd0ylqqj1ITWq2URkgn5CFvUOAFjNQLoldJJECT9m8MO3M-sXaOb3us0EfkYprE1nAeGAZUHk_qBgmlkgnY0gmlwhKwRAASCcnODAAMAiXNlY3AyNTZrMaEDryiFpIUJ9wOaN0p2YsPAC46XtI1OAFE8KrzghPr2L_ODdGNwgld4g3VkcIJXeoV3YWt1MgE","listenAddresses":["/ip4/127.0.0.1/tcp/22392/p2p/16Uiu2HAmQSjY28XopBr6PkMMjnKfTybNoNYeXzzuxRXhQ2WReux6","/ip4/127.0.0.1/tcp/22393/ws/p2p/16Uiu2HAmQSjY28XopBr6PkMMjnKfTybNoNYeXzzuxRXhQ2WReux6","/ip4/172.17.0.4/tcp/22392/p2p/16Uiu2HAmQSjY28XopBr6PkMMjnKfTybNoNYeXzzuxRXhQ2WReux6","/ip4/172.17.0.4/tcp/22393/ws/p2p/16Uiu2HAmQSjY28XopBr6PkMMjnKfTybNoNYeXzzuxRXhQ2WReux6"]}'
2025-02-15 03:08:14.327 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 03:08:14.328 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22391/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.250.58/tcp/23550/p2p/16Uiu2HAm6M4sMeCgSkSzAybPcx9NCJqnJn9aVwknXyCnMqtb35cK", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-15 03:08:14.345 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-15 03:08:14.346 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23549/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-15 03:08:14.353 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 03:08:14.353 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22391/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-15 03:08:14.355 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-15 03:08:14.358 DEBUG [src.steps.store] Relaying message
2025-02-15 03:08:14.358 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23549/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 03:08:14.385 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 03:08:14.385 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-15 03:08:14.586 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-15 03:08:14.586 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23549/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-15 03:08:14.592 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xaa49181ebe2029eb7e3e32f8f095ab18d30f31128f1dd798b4c2a1ad530f2442"}]}'
2025-02-15 03:08:14.592 DEBUG [src.steps.store] Checking that peer wakuorg/go-waku:latest can find the stored messages
2025-02-15 03:08:14.593 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22391/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-15 03:08:14.598 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"f463effe5523d534bdd7aeb17e0b45755f2266e4f60b6094d77a4819f8e1c509","status_code":200,"status_desc":"OK","messages":[{"message_hash":"qkkYHr4gKet+PjL48JWrGNMPMRKPHdeYtMKhrVMPJEI="}]}'
2025-02-15 03:08:14.605 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/nwaku:latest
2025-02-15 03:08:14.605 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/publishing_node1_2025-02-15_03-07-45__00d31472-828d-4489-b949-0c6a0a97c34b__wakuorg_nwaku:latest.log
2025-02-15 03:08:14.605 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 03:08:14.606 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 03:08:14.607 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 03:08:14.607 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.19.105
2025-02-15 03:08:14.607 DEBUG [src.node.docker_mananger] Generated ports ['40138', '40139', '40140', '40141', '40142']
2025-02-15 03:08:14.608 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 03:08:14.608 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 03:08:14.608 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 03:08:14.608 DEBUG [src.node.docker_mananger] docker run -i -t -p 40138:40138 -p 40139:40139 -p 40140:40140 -p 40141:40141 -p 40142:40142 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=40140 --rest-port=40138 --tcp-port=40139 --discv5-udp-port=40141 --rest-address=0.0.0.0 --nat=extip:172.18.19.105 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=dcbcfe0a0fcc293bd835ff8cb442d16cfa09ac05b9aa47dee58afa49355ee56b --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=40142 --metrics-logging=true --store=true --relay=true --store-message-db-url=postgres://postgres:test123@postgres:5432/postgres
2025-02-15 03:08:14.846 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.19.105 waku 790e4559591fde59d4554d1563637a15f71c8688bee953b4c620d6b1cf9c065c
2025-02-15 03:08:14.895 DEBUG [src.node.docker_mananger] Container started with ID 790e4559591f. Setting up logs at ./log/docker/publishing_node1_2025-02-15_03-07-45__00d31472-828d-4489-b949-0c6a0a97c34b__wakuorg_nwaku:latest.log
2025-02-15 03:08:14.895 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 40138
2025-02-15 03:08:14.895 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 03:08:15.896 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:40138/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 03:08:35.916 ERROR [src.node.waku_node] REST service did not become ready in time: HTTPConnectionPool(host='127.0.0.1', port=40138): Read timed out. (read timeout=20)
2025-02-15 03:08:36.017 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 03:08:36.017 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 03:08:36.019 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 03:08:36.019 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.79.106
2025-02-15 03:08:36.019 DEBUG [src.node.docker_mananger] Generated ports ['9948', '9949', '9950', '9951', '9952']
2025-02-15 03:08:36.019 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 03:08:36.019 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 03:08:36.019 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 03:08:36.020 DEBUG [src.node.docker_mananger] docker run -i -t -p 9948:9948 -p 9949:9949 -p 9950:9950 -p 9951:9951 -p 9952:9952 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=9950 --rest-port=9948 --tcp-port=9949 --discv5-udp-port=9951 --rest-address=0.0.0.0 --nat=extip:172.18.79.106 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=eef2dfbfb2ddfc4ac3aaffffadc8cbc2b5fe60ecaa2131db7900acd0df55df47 --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=9952 --metrics-logging=true --store=true --relay=true --store-message-db-url=postgres://postgres:test123@postgres:5432/postgres
2025-02-15 03:08:36.252 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.79.106 waku 7582a7ee96b6d38c49e7286e875123bc7cd4075f747e56dc87667d0689539c7b
2025-02-15 03:08:36.311 DEBUG [src.node.docker_mananger] Container started with ID 7582a7ee96b6. Setting up logs at ./log/docker/publishing_node1_2025-02-15_03-07-45__00d31472-828d-4489-b949-0c6a0a97c34b__wakuorg_nwaku:latest.log
2025-02-15 03:08:36.311 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 9948
2025-02-15 03:08:36.312 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 03:08:37.312 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:9948/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 03:08:57.334 ERROR [src.node.waku_node] REST service did not become ready in time: HTTPConnectionPool(host='127.0.0.1', port=9948): Read timed out. (read timeout=20)
2025-02-15 03:08:57.434 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 03:08:57.434 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 03:08:57.436 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 03:08:57.436 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.120.200
2025-02-15 03:08:57.436 DEBUG [src.node.docker_mananger] Generated ports ['26725', '26726', '26727', '26728', '26729']
2025-02-15 03:08:57.436 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 03:08:57.437 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 03:08:57.437 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 03:08:57.437 DEBUG [src.node.docker_mananger] docker run -i -t -p 26725:26725 -p 26726:26726 -p 26727:26727 -p 26728:26728 -p 26729:26729 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=26727 --rest-port=26725 --tcp-port=26726 --discv5-udp-port=26728 --rest-address=0.0.0.0 --nat=extip:172.18.120.200 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=99d3bbd3adafde62da3bbf43e0bd2c66ea56ba50bcdda283d52b5dc7e1baf44a --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=26729 --metrics-logging=true --store=true --relay=true --store-message-db-url=postgres://postgres:test123@postgres:5432/postgres
2025-02-15 03:08:57.676 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.120.200 waku 452457db2c27d2cb9a53b97fff64399277b2296eaeb5333b5a1588cd439d01f4
2025-02-15 03:08:57.730 DEBUG [src.node.docker_mananger] Container started with ID 452457db2c27. Setting up logs at ./log/docker/publishing_node1_2025-02-15_03-07-45__00d31472-828d-4489-b949-0c6a0a97c34b__wakuorg_nwaku:latest.log
2025-02-15 03:08:57.730 DEBUG [src.node.waku_node] Started container from image wakuorg/nwaku:latest. REST: 26725
2025-02-15 03:08:57.730 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 03:08:58.731 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26725/health" -H "Content-Type: application/json" -d 'None'
2025-02-15 03:08:58.734 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
2025-02-15 03:08:58.734 INFO [src.node.waku_node] Node protocols are initialized !!
2025-02-15 03:08:58.734 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26725/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 03:08:58.736 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.120.200/tcp/26726/p2p/16Uiu2HAmMsdemHvyy365L2tT58EUstotxgHkSpWXQsmbrDXQQkLE","/ip4/172.18.120.200/tcp/26727/ws/p2p/16Uiu2HAmMsdemHvyy365L2tT58EUstotxgHkSpWXQsmbrDXQQkLE"],"enrUri":"enr:-L24QGssjE6b_YflA9p33yJRG3U5qfUQJT_05U8fGpx8tVajGpAMEMset-0GGLT09CoZ4pAtTXgNfzYgyMvCyBO2eu8CgmlkgnY0gmlwhKwSeMiKbXVsdGlhZGRyc5YACASsEnjIBmhmAAoErBJ4yAZoZ90DgnJzhQADAQAAiXNlY3AyNTZrMaEDiPZUKJ1XbtexyBV5NThuJJfcLkDu7L7T3zGGTR28L6-DdGNwgmhmg3VkcIJoaIV3YWt1MgM"}'
2025-02-15 03:08:58.737 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 03:08:58.737 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:26725/admin/v1/peers" -H "Content-Type: application/json" -d '["/ip4/172.18.250.58/tcp/23550/p2p/16Uiu2HAm6M4sMeCgSkSzAybPcx9NCJqnJn9aVwknXyCnMqtb35cK"]'
2025-02-15 03:08:58.762 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 03:08:58.775 DEBUG [src.node.docker_mananger] Docker client initialized with image wakuorg/go-waku:latest
2025-02-15 03:08:58.776 DEBUG [src.node.waku_node] WakuNode instance initialized with log path ./log/docker/store_node1_2025-02-15_03-07-45__00d31472-828d-4489-b949-0c6a0a97c34b__wakuorg_go-waku:latest.log
2025-02-15 03:08:58.776 DEBUG [src.node.waku_node] Starting Node...
2025-02-15 03:08:58.776 DEBUG [src.node.docker_mananger] Attempting to create or retrieve network waku
2025-02-15 03:08:58.777 DEBUG [src.node.docker_mananger] Network waku already exists
2025-02-15 03:08:58.777 DEBUG [src.node.docker_mananger] Generated random external IP 172.18.152.165
2025-02-15 03:08:58.778 DEBUG [src.node.docker_mananger] Generated ports ['33131', '33132', '33133', '33134', '33135']
2025-02-15 03:08:58.778 DEBUG [src.node.waku_node] RLN credentials were not set
2025-02-15 03:08:58.778 INFO [src.node.waku_node] RLN credentials not set or credential store not available, starting without RLN
2025-02-15 03:08:58.778 DEBUG [src.node.waku_node] Using volumes []
2025-02-15 03:08:58.778 DEBUG [src.node.docker_mananger] docker run -i -t -p 33131:33131 -p 33132:33132 -p 33133:33133 -p 33134:33134 -p 33135:33135 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=33133 --rest-port=33131 --tcp-port=33132 --discv5-udp-port=33134 --rest-address=0.0.0.0 --nat=extip:172.18.152.165 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=8f7df8deaeb7d65884ce48923fcab2ea6ff9edaa7a2be14ef9e2f9e8d6d7f3f6 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QGssjE6b_YflA9p33yJRG3U5qfUQJT_05U8fGpx8tVajGpAMEMset-0GGLT09CoZ4pAtTXgNfzYgyMvCyBO2eu8CgmlkgnY0gmlwhKwSeMiKbXVsdGlhZGRyc5YACASsEnjIBmhmAAoErBJ4yAZoZ90DgnJzhQADAQAAiXNlY3AyNTZrMaEDiPZUKJ1XbtexyBV5NThuJJfcLkDu7L7T3zGGTR28L6-DdGNwgmhmg3VkcIJoaIV3YWt1MgM --storenode=/ip4/172.18.250.58/tcp/23550/p2p/16Uiu2HAm6M4sMeCgSkSzAybPcx9NCJqnJn9aVwknXyCnMqtb35cK --store=false --relay=true
2025-02-15 03:08:59.014 DEBUG [src.node.docker_mananger] docker network connect --ip 172.18.152.165 waku b23f43e9f6496411b84ad5eb85672e05713d9b1e32139a5e0ae334b926697aa8
2025-02-15 03:08:59.067 DEBUG [src.node.docker_mananger] Container started with ID b23f43e9f649. Setting up logs at ./log/docker/store_node1_2025-02-15_03-07-45__00d31472-828d-4489-b949-0c6a0a97c34b__wakuorg_go-waku:latest.log
2025-02-15 03:08:59.068 DEBUG [src.node.waku_node] Started container from image wakuorg/go-waku:latest. REST: 33131
2025-02-15 03:08:59.068 DEBUG [src.libs.common] Sleeping for 1 seconds
2025-02-15 03:09:00.069 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33131/debug/v1/info" -H "Content-Type: application/json" -d 'None'
2025-02-15 03:09:00.072 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"enrUri":"enr:-J-4QKndy72oE18VjQN_c92H76ljDaCU6O1Dja-OrLW0MilQKZwbcXugrNKmY1nBnJ0D0ojYRRiD9SK-OuDWuClE1omGAZUHlK01gmlkgnY0gmlwhKwRAAiCcnODAAMAiXNlY3AyNTZrMaECaxY_AdN8OR8Owfrnz9YN2Hj3dnixYsEYOLh7PRJtEUeDdGNwgoFsg3VkcIKBboV3YWt1MgE","listenAddresses":["/ip4/127.0.0.1/tcp/33132/p2p/16Uiu2HAm2dhH6GUCLgonnr3hDTi5NfjkZj9wmEX1j6XmAMni889t","/ip4/127.0.0.1/tcp/33133/ws/p2p/16Uiu2HAm2dhH6GUCLgonnr3hDTi5NfjkZj9wmEX1j6XmAMni889t","/ip4/172.17.0.8/tcp/33132/p2p/16Uiu2HAm2dhH6GUCLgonnr3hDTi5NfjkZj9wmEX1j6XmAMni889t","/ip4/172.17.0.8/tcp/33133/ws/p2p/16Uiu2HAm2dhH6GUCLgonnr3hDTi5NfjkZj9wmEX1j6XmAMni889t"]}'
2025-02-15 03:09:00.072 INFO [src.node.waku_node] REST service is ready !!
2025-02-15 03:09:00.073 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33131/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.250.58/tcp/23550/p2p/16Uiu2HAm6M4sMeCgSkSzAybPcx9NCJqnJn9aVwknXyCnMqtb35cK", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-15 03:09:00.089 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-15 03:09:00.091 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33131/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.120.200/tcp/26726/p2p/16Uiu2HAmMsdemHvyy365L2tT58EUstotxgHkSpWXQsmbrDXQQkLE", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
2025-02-15 03:09:00.112 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'null'
2025-02-15 03:09:00.114 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:23549/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-15 03:09:00.118 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 03:09:00.118 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:22391/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-15 03:09:00.121 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-15 03:09:00.122 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:26725/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-15 03:09:00.125 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 03:09:00.125 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:33131/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
2025-02-15 03:09:00.128 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'true'
2025-02-15 03:09:00.129 DEBUG [src.steps.store] Relaying message
2025-02-15 03:09:00.129 INFO [src.node.api_clients.base_client] curl -v -X POST "http://127.0.0.1:26725/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
2025-02-15 03:09:00.152 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'OK'
2025-02-15 03:09:00.152 DEBUG [src.libs.common] Sleeping for 0.2 seconds
2025-02-15 03:09:00.354 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-15 03:09:00.354 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:23549/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-15 03:09:00.360 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xaa49181ebe2029eb7e3e32f8f095ab18d30f31128f1dd798b4c2a1ad530f2442"},{"messageHash":"0xd568de6ccee33d44cc3455b5dcebb5bc6af5660ab7e7c4018ea85e871b53d0e7"}]}'
2025-02-15 03:09:00.360 DEBUG [src.steps.store] Checking that peer wakuorg/go-waku:latest can find the stored messages
2025-02-15 03:09:00.360 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:22391/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-15 03:09:00.365 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"4aee0a41e3d20e81dda9a476cdf4f6f769392de196181ccfdedbdb93a2ea3312","status_code":200,"status_desc":"OK","messages":[{"message_hash":"qkkYHr4gKet+PjL48JWrGNMPMRKPHdeYtMKhrVMPJEI="},{"message_hash":"1WjebM7jPUTMNFW13Ou1vGr1Zgq358QBjqhehxtT0Oc="}]}'
2025-02-15 03:09:00.366 DEBUG [src.steps.store] Checking that peer wakuorg/nwaku:latest can find the stored messages
2025-02-15 03:09:00.367 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:26725/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-15 03:09:00.372 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"0xaa49181ebe2029eb7e3e32f8f095ab18d30f31128f1dd798b4c2a1ad530f2442"},{"messageHash":"0xd568de6ccee33d44cc3455b5dcebb5bc6af5660ab7e7c4018ea85e871b53d0e7"}]}'
2025-02-15 03:09:00.372 DEBUG [src.steps.store] Checking that peer wakuorg/go-waku:latest can find the stored messages
2025-02-15 03:09:00.373 INFO [src.node.api_clients.base_client] curl -v -X GET "http://127.0.0.1:33131/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
2025-02-15 03:09:00.378 INFO [src.node.api_clients.base_client] Response status code: 200. Response content: b'{"request_id":"76105903764fceab1858030a04af20f368c2c526de3dcad84b2cda5cae4e760f","status_code":200,"status_desc":"OK","messages":[{"message_hash":"qkkYHr4gKet+PjL48JWrGNMPMRKPHdeYtMKhrVMPJEI="},{"message_hash":"1WjebM7jPUTMNFW13Ou1vGr1Zgq358QBjqhehxtT0Oc="}]}'
2025-02-15 03:09:00.539 DEBUG [src.postgres_setup] Postgres container stopped and removed.
2025-02-15 03:09:00.540 DEBUG [tests.conftest] Running fixture teardown: test_setup
2025-02-15 03:09:00.541 DEBUG [tests.conftest] Running fixture teardown: close_open_nodes
2025-02-15 03:09:00.541 DEBUG [src.node.waku_node] Stopping container with id 77ccc40fc389
2025-02-15 03:09:01.130 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 03:09:01.130 DEBUG [src.node.waku_node] Stopping container with id f2219665c373
2025-02-15 03:09:01.680 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 03:09:01.682 DEBUG [src.node.waku_node] Stopping container with id 452457db2c27
2025-02-15 03:09:01.942 ERROR [src.node.docker_mananger] Max retries reached for container 77ccc40fc389. Exiting log stream.
2025-02-15 03:09:02.494 ERROR [src.node.docker_mananger] Max retries reached for container f2219665c373. Exiting log stream.
2025-02-15 03:09:02.586 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 03:09:02.587 DEBUG [src.node.waku_node] Stopping container with id b23f43e9f649
2025-02-15 03:09:03.083 DEBUG [src.node.waku_node] Container stopped.
2025-02-15 03:09:03.084 DEBUG [tests.conftest] Running fixture teardown: check_waku_log_errors
2025-02-15 03:09:03.103 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-15 03:09:03.120 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-15 03:09:03.124 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-15 03:09:03.141 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-15 03:09:03.157 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-15 03:09:03.174 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
2025-02-15 03:09:03.178 DEBUG [src.node.docker_mananger] No errors found in the waku logs.
