[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_messages_with_timestamps_far_from_now with id: 2024-08-22_03-28-17__e35c889d-b309-4804-a9be-1c9ac17ac24e
[35mDEBUG   [0m src.steps.common:common.py:17 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:28 Running fixture setup: store_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-08-22_03-28-17__e35c889d-b309-4804-a9be-1c9ac17ac24e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.15.242
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['3684', '3685', '3686', '3687', '3688']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 3684:3684 -p 3685:3685 -p 3686:3686 -p 3687:3687 -p 3688:3688 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=3686 --rest-port=3684 --tcp-port=3685 --discv5-udp-port=3687 --rest-address=0.0.0.0 --nat=extip:172.18.15.242 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=b6aeff0df6c2de7c19209bc8bad69f227b5f82d651baba63ff42db609abbf70d --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=3688 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.15.242 waku 7747b477b2016ae0a18472bcc7ba5e8226ad81fe97a92acf76d3bf6454b9bffd
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID 7747b477b201. Setting up logs at ./log/docker/publishing_node1_2024-08-22_03-28-17__e35c889d-b309-4804-a9be-1c9ac17ac24e__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/nwaku:latest. REST: 3684
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3684/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:276 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3684/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.15.242/tcp/3685/p2p/16Uiu2HAmRusGBDMVtXquxNGUd45kDXYRFtCZPihYfx16QHQiBBcC","/ip4/172.18.15.242/tcp/3686/ws/p2p/16Uiu2HAmRusGBDMVtXquxNGUd45kDXYRFtCZPihYfx16QHQiBBcC"],"enrUri":"enr:-LO4QDl-MrqxjIg3S3bpY_bwftjiRrLSnMEgq5jDGBC28BrxBsMHJpZOIjlWBba_cfIn_On0BjYU2t1obnETAS3esXABgmlkgnY0gmlwhKwSD_KKbXVsdGlhZGRyc4wACgSsEg_yBg5m3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPE96Co3HP1aXSmCTkNt4whF4tmhHH4LNDKbWC24yAQYYN0Y3CCDmWDdWRwgg5nhXdha3UyAw"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:17 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:84 WakuNode instance initialized with log path ./log/docker/store_node1_2024-08-22_03-28-17__e35c889d-b309-4804-a9be-1c9ac17ac24e__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:88 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:20 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:23 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:80 Generated random external IP 172.18.172.171
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:73 Generated ports ['51151', '51152', '51153', '51154', '51155']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:430 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:162 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:164 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:47 docker run -i -t -p 51151:51151 -p 51152:51152 -p 51153:51153 -p 51154:51154 -p 51155:51155 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=51153 --rest-port=51151 --tcp-port=51152 --discv5-udp-port=51154 --rest-address=0.0.0.0 --nat=extip:172.18.172.171 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=cffc9dac40cda5ea857af9d517ba55588aa43b9f4ad56e0d5eefacb5e8e65add --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-LO4QDl-MrqxjIg3S3bpY_bwftjiRrLSnMEgq5jDGBC28BrxBsMHJpZOIjlWBba_cfIn_On0BjYU2t1obnETAS3esXABgmlkgnY0gmlwhKwSD_KKbXVsdGlhZGRyc4wACgSsEg_yBg5m3QOCcnOFAAMBAACJc2VjcDI1NmsxoQPE96Co3HP1aXSmCTkNt4whF4tmhHH4LNDKbWC24yAQYYN0Y3CCDmWDdWRwgg5nhXdha3UyAw --storenode=/ip4/172.18.15.242/tcp/3685/p2p/16Uiu2HAmRusGBDMVtXquxNGUd45kDXYRFtCZPihYfx16QHQiBBcC --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:53 docker network connect --ip 172.18.172.171 waku a67e9e45aa3b5be5090a855d9a97bf9982fb4624945fc2ed27e892875a0079d9
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:56 Container started with ID a67e9e45aa3b. Setting up logs at ./log/docker/store_node1_2024-08-22_03-28-17__e35c889d-b309-4804-a9be-1c9ac17ac24e__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:176 Started container from image wakuorg/go-waku:latest. REST: 51151
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:51151/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QPcvpLcImRouUrx_01zyPOYwrDZkpwph0SzCaxhaAgKMLhsm638TLnP9SRFLjLfSrfiilCLCcVIi1lzeKyGg_VaGAZF4IMQ3gmlkgnY0gmlwhKwRAAqJc2VjcDI1NmsxoQLbs4ZuKuDhIiDBQeoaaW8bJIvzjLcrU5JY3UDtJPcuE4N0Y3CCx9CDdWRwgsfShXdha3UyAw","listenAddresses":["/ip4/127.0.0.1/tcp/51152/p2p/16Uiu2HAmADJ3CZUT2tw2ouQLbsLXzEdregBfMnAA2kgE65VNFYKc","/ip4/127.0.0.1/tcp/51153/ws/p2p/16Uiu2HAmADJ3CZUT2tw2ouQLbsLXzEdregBfMnAA2kgE65VNFYKc","/ip4/172.17.0.10/tcp/51152/p2p/16Uiu2HAmADJ3CZUT2tw2ouQLbsLXzEdregBfMnAA2kgE65VNFYKc","/ip4/172.17.0.10/tcp/51153/ws/p2p/16Uiu2HAmADJ3CZUT2tw2ouQLbsLXzEdregBfMnAA2kgE65VNFYKc"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:281 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51151/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.15.242/tcp/3685/p2p/16Uiu2HAmRusGBDMVtXquxNGUd45kDXYRFtCZPihYfx16QHQiBBcC", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3684/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:51151/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m tests.store.test_time_filter:test_time_filter.py:42 Running test with payload 20 sec Past
[35mDEBUG   [0m src.steps.store:store.py:128 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3684/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:216 Checking that peer wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3684/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.store.test_time_filter:test_time_filter.py:42 Running test with payload 40 sec Future
[35mDEBUG   [0m src.steps.store:store.py:128 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:3684/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:216 Checking that peer wakuorg/nwaku:latest can find the stored message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:3684/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true&pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id 7747b477b201
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:220 Stopping container with id a67e9e45aa3b
[35mDEBUG   [0m src.node.waku_node:waku_node.py:227 Container stopped.