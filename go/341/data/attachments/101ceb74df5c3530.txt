[35mDEBUG   [0m tests.conftest:conftest.py:51 Running fixture setup: test_id
[35mDEBUG   [0m tests.conftest:conftest.py:57 Running test: test_message_relayed_while_store_node_is_paused with id: 2024-11-06_21-34-59__bd5c15e4-1381-4e5c-adf1-9ee19b2cc303
[35mDEBUG   [0m src.steps.common:common.py:18 Running fixture setup: common_setup
[35mDEBUG   [0m src.steps.store:store.py:31 Running fixture setup: store_setup
[35mDEBUG   [0m src.steps.store:store.py:39 Running fixture setup: node_setup
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/nwaku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/publishing_node1_2024-11-06_21-34-59__bd5c15e4-1381-4e5c-adf1-9ee19b2cc303__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.230.225
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['1197', '1198', '1199', '1200', '1201']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 1197:1197 -p 1198:1198 -p 1199:1199 -p 1200:1200 -p 1201:1201 wakuorg/nwaku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=TRACE --rest-relay-cache-capacity=100 --websocket-port=1199 --rest-port=1197 --tcp-port=1198 --discv5-udp-port=1200 --rest-address=0.0.0.0 --nat=extip:172.18.230.225 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=aeafdbd8b3e776e764ad051433a5daf8dad5f0b5f5af444b23c664bacd9bbcee --shard=0 --metrics-server=true --metrics-server-address=0.0.0.0 --metrics-server-port=1201 --metrics-logging=true --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.230.225 waku 89eadbf0dbfcb117d98f1844442f1f8198a151e07140005287fddff810d8120d
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 89eadbf0dbfc. Setting up logs at ./log/docker/publishing_node1_2024-11-06_21-34-59__bd5c15e4-1381-4e5c-adf1-9ee19b2cc303__wakuorg_nwaku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/nwaku:latest. REST: 1197
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container e419a975aa45. Exiting log stream.
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1197/health" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"nodeHealth":"Ready","protocolsHealth":[]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:277 Node protocols are initialized !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1197/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"listenAddresses":["/ip4/172.18.230.225/tcp/1198/p2p/16Uiu2HAkuwXft4S1WH5NE7ya6TwKYkVpQZkmGfLuz6YN8wQEjhHz","/ip4/172.18.230.225/tcp/1199/ws/p2p/16Uiu2HAkuwXft4S1WH5NE7ya6TwKYkVpQZkmGfLuz6YN8wQEjhHz"],"enrUri":"enr:-L24QP0Riq9cxqu4UrCJpwpFh0kItBLNqZwigqnXl0L8_rAaIiFlVUMo9rNlwIaf-u_29IZ6CCbAP0DL8oeuDEg46vgCgmlkgnY0gmlwhKwS5uGKbXVsdGlhZGRyc5YACASsEubhBgSuAAoErBLm4QYEr90DgnJzhQADAQAAiXNlY3AyNTZrMaECB6YHiZ_Nwv6Morizmv_uKR_odREfAfQwHeN39CcBqTmDdGNwggSug3VkcIIEsIV3YWt1MgM"}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:19 Docker client initialized with image wakuorg/go-waku:latest
[35mDEBUG   [0m src.node.waku_node:waku_node.py:85 WakuNode instance initialized with log path ./log/docker/store_node1_2024-11-06_21-34-59__bd5c15e4-1381-4e5c-adf1-9ee19b2cc303__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:89 Starting Node...
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:22 Attempting to create or retrieve network waku
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:25 Network waku already exists
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:108 Generated random external IP 172.18.24.22
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:101 Generated ports ['65495', '65496', '65497', '65498', '65499']
[35mDEBUG   [0m src.node.waku_node:waku_node.py:434 RLN credentials were not set
[32mINFO    [0m src.node.waku_node:waku_node.py:163 RLN credentials not set or credential store not available, starting without RLN
[35mDEBUG   [0m src.node.waku_node:waku_node.py:165 Using volumes []
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:49 docker run -i -t -p 65495:65495 -p 65496:65496 -p 65497:65497 -p 65498:65498 -p 65499:65499 wakuorg/go-waku:latest --listen-address=0.0.0.0 --rest=true --rest-admin=true --websocket-support=true --log-level=DEBUG --rest-relay-cache-capacity=100 --websocket-port=65497 --rest-port=65495 --tcp-port=65496 --discv5-udp-port=65498 --rest-address=0.0.0.0 --nat=extip:172.18.24.22 --peer-exchange=true --discv5-discovery=true --cluster-id=3 --nodekey=bcef96489b83bbeaee22572e5d547f12ff1e4adff3ac9963cedbc0aceaef4b03 --min-relay-peers-to-publish=1 --rest-filter-cache-capacity=50 --peer-store-capacity=10 --discv5-bootstrap-node=enr:-L24QP0Riq9cxqu4UrCJpwpFh0kItBLNqZwigqnXl0L8_rAaIiFlVUMo9rNlwIaf-u_29IZ6CCbAP0DL8oeuDEg46vgCgmlkgnY0gmlwhKwS5uGKbXVsdGlhZGRyc5YACASsEubhBgSuAAoErBLm4QYEr90DgnJzhQADAQAAiXNlY3AyNTZrMaECB6YHiZ_Nwv6Morizmv_uKR_odREfAfQwHeN39CcBqTmDdGNwggSug3VkcIIEsIV3YWt1MgM --storenode=/ip4/172.18.230.225/tcp/1198/p2p/16Uiu2HAkuwXft4S1WH5NE7ya6TwKYkVpQZkmGfLuz6YN8wQEjhHz --store=true --relay=true
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:55 docker network connect --ip 172.18.24.22 waku 8c1d0e99cc2b0c8d29118ffe38c249b29c981d14715be1540b5cec7d8e6c5e70
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:58 Container started with ID 8c1d0e99cc2b. Setting up logs at ./log/docker/store_node1_2024-11-06_21-34-59__bd5c15e4-1381-4e5c-adf1-9ee19b2cc303__wakuorg_go-waku:latest.log
[35mDEBUG   [0m src.node.waku_node:waku_node.py:177 Started container from image wakuorg/go-waku:latest. REST: 65495
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 1 seconds
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:65495/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-Ji4QFYnJnjmmjeCsHOMJgnzOqKlCeX-d8LLnDEiP8nA2FVhIUdatCj04STOwTWN19xb6-o0_goL9mm8_ms39YvhmpaGAZMDZv6DgmlkgnY0gmlwhKwRAAmJc2VjcDI1NmsxoQMxwfBRkhJxjACEeGrp_3VZScIdtFDYLJCfjdsIBdDlWoN0Y3CC_9iDdWRwgv_ahXdha3UyAw","listenAddresses":["/ip4/127.0.0.1/tcp/65496/p2p/16Uiu2HAmG1Dr9gym1nKKMBwX2kEXvNAVjP5vvBX7aRToGk4xsxFK","/ip4/127.0.0.1/tcp/65497/ws/p2p/16Uiu2HAmG1Dr9gym1nKKMBwX2kEXvNAVjP5vvBX7aRToGk4xsxFK","/ip4/172.17.0.9/tcp/65496/p2p/16Uiu2HAmG1Dr9gym1nKKMBwX2kEXvNAVjP5vvBX7aRToGk4xsxFK","/ip4/172.17.0.9/tcp/65497/ws/p2p/16Uiu2HAmG1Dr9gym1nKKMBwX2kEXvNAVjP5vvBX7aRToGk4xsxFK"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:65495/admin/v1/peers" -H "Content-Type: application/json" -d '{"multiaddr": "/ip4/172.18.230.225/tcp/1198/p2p/16Uiu2HAkuwXft4S1WH5NE7ya6TwKYkVpQZkmGfLuz6YN8wQEjhHz", "protocols": ["/vac/waku/relay/2.0.0"], "shards": [0, 1, 2, 3, 4, 5, 6, 7, 8]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'null'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1197/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:65495/relay/v1/subscriptions" -H "Content-Type: application/json" -d '["/waku/2/rs/3/0"]'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'true'
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1197/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1197/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"SAEK5dsTU4uqbSvEAXpw45jTIi2xtfNGMy+0vneFtPY="}]}'
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/go-waku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:65495/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"f24bcc4d9ca22f304add435efb775dc7c7e3ea57f9db8adf25067e56e583fe71","status_code":200,"status_desc":"OK","messages":[{"message_hash":"SAEK5dsTU4uqbSvEAXpw45jTIi2xtfNGMy+0vneFtPY="}]}'
[35mDEBUG   [0m src.node.waku_node:waku_node.py:249 Pausing container with id 8c1d0e99cc2b
[35mDEBUG   [0m src.steps.store:store.py:132 Relaying message
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X POST "http://127.0.0.1:1197/relay/v1/messages/%2Fwaku%2F2%2Frs%2F3%2F0" -H "Content-Type: application/json" -d '{"payload": "U3RvcmUgd29ya3MhIQ==", "contentTopic": "/myapp/1/latest/proto", "timestamp": '$(date +%s%N)'}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'OK'
[35mDEBUG   [0m src.libs.common:common.py:35 Sleeping for 0.2 seconds
[35mDEBUG   [0m src.node.waku_node:waku_node.py:254 Unpause container with id 8c1d0e99cc2b
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:65495/debug/v1/info" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"enrUri":"enr:-KG4QEhtok95TFDcut553w3ULTOmcCdow_PNJr_fvEuO3aXXHHynQxn_aaaoILh0QfGezcsDlHqzOzbNMx6bJIeaVfOGAZMDZv6EgmlkgnY0gmlwhKwRAAmCcnOFAAMBAACJc2VjcDI1NmsxoQMxwfBRkhJxjACEeGrp_3VZScIdtFDYLJCfjdsIBdDlWoN0Y3CC_9iDdWRwgv_ahXdha3UyAw","listenAddresses":["/ip4/127.0.0.1/tcp/65496/p2p/16Uiu2HAmG1Dr9gym1nKKMBwX2kEXvNAVjP5vvBX7aRToGk4xsxFK","/ip4/127.0.0.1/tcp/65497/ws/p2p/16Uiu2HAmG1Dr9gym1nKKMBwX2kEXvNAVjP5vvBX7aRToGk4xsxFK","/ip4/172.17.0.9/tcp/65496/p2p/16Uiu2HAmG1Dr9gym1nKKMBwX2kEXvNAVjP5vvBX7aRToGk4xsxFK","/ip4/172.17.0.9/tcp/65497/ws/p2p/16Uiu2HAmG1Dr9gym1nKKMBwX2kEXvNAVjP5vvBX7aRToGk4xsxFK"]}'
[32mINFO    [0m src.node.waku_node:waku_node.py:282 REST service is ready !!
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/nwaku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1197/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"SAEK5dsTU4uqbSvEAXpw45jTIi2xtfNGMy+0vneFtPY="},{"messageHash":"WRBehdcjSMA+0MI/Rfza8qdc0W0X53RxEbd/TCA15Dw="}]}'
[35mDEBUG   [0m src.steps.store:store.py:218 Checking that peer wakuorg/go-waku:latest can find the stored messages
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:65495/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"0145a1e709f0a03cd5cdff43f2de08fd7059ca009aac542689cfa91cb207b2d9","status_code":200,"status_desc":"OK","messages":[{"message_hash":"SAEK5dsTU4uqbSvEAXpw45jTIi2xtfNGMy+0vneFtPY="},{"message_hash":"WRBehdcjSMA+0MI/Rfza8qdc0W0X53RxEbd/TCA15Dw="}]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:1197/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"requestId":"","statusCode":200,"statusDesc":"OK","messages":[{"messageHash":"SAEK5dsTU4uqbSvEAXpw45jTIi2xtfNGMy+0vneFtPY="},{"messageHash":"WRBehdcjSMA+0MI/Rfza8qdc0W0X53RxEbd/TCA15Dw="}]}'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:37 curl -v -X GET "http://127.0.0.1:65495/store/v3/messages?pubsubTopic=%2Fwaku%2F2%2Frs%2F3%2F0&contentTopics=%2Fmyapp%2F1%2Flatest%2Fproto&pageSize=5&ascending=true" -H "Content-Type: application/json" -d 'None'
[32mINFO    [0m src.node.api_clients.base_client:base_client.py:22 Response status code: 200. Response content: b'{"request_id":"01a22b7b779181588c3686d4b0b69fcff549ed682be53e9ca5c73492718c0bc0","status_code":200,"status_desc":"OK","messages":[{"message_hash":"SAEK5dsTU4uqbSvEAXpw45jTIi2xtfNGMy+0vneFtPY="},{"message_hash":"WRBehdcjSMA+0MI/Rfza8qdc0W0X53RxEbd/TCA15Dw="}]}'
[35mDEBUG   [0m tests.conftest:conftest.py:59 Running fixture teardown: test_setup
[35mDEBUG   [0m tests.conftest:conftest.py:83 Running fixture teardown: close_open_nodes
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 89eadbf0dbfc
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:221 Stopping container with id 8c1d0e99cc2b
[31m[1mERROR   [0m src.node.docker_mananger:docker_mananger.py:89 Max retries reached for container 89eadbf0dbfc. Exiting log stream.
[35mDEBUG   [0m src.node.waku_node:waku_node.py:228 Container stopped.
[35mDEBUG   [0m tests.conftest:conftest.py:98 Running fixture teardown: check_waku_log_errors
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.
[35mDEBUG   [0m src.node.docker_mananger:docker_mananger.py:144 No errors found in the waku logs.